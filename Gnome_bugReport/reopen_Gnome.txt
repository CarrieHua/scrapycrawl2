id=668477	REOPENED	glib	gio	2.44.x	Other Linux	High critical		2012-01-23 09:03 UTC by	Paolo Benvenuto	2015-12-23 14:11 UTC (	1 user	I run gthumb (2.13.1), and I go to a ssh-mounted directoryI select an image, and I Tools -> resize (55% x 55%) => gthumb asks me whether overwriting it, and issueing ok it begins eating endlessly 100% cpu time, and I must kill it manually.Same thing if I select more than one image.Same thing if I use the resize tool in image editing mode.I'm quite sure it's a long time bug.I can't verify it on 2.14, It's not packaged for ubuntu at the moment.	Marking as obsolete, as this was reported for a now-unsupported version and no recent activity has occurred. Please feel free to reopen this bug report if the problem still occurs with a current version of gThumb.3.4.0: gthumb freezes if resizing one image on an sftp mount directoryConfirmed in 3.4.1:Program received signal SIGPIPE, Broken pipe.0x00007ffff49424ed in write () at ../sysdeps/unix/syscall-template.S:8181 T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)The sftp mount also disappears from nautilus and the gThumb sidebar... probably a glib/gio bug?To reproduce:1) In nautilus, click "connect to server" and connect to a server for which you have ssh access, like "sftp://".2) Open gThumb. The mounted sftp folder should appear in the sidebar. Open it.3) Ctrl+click an image to select it (but not open it).4) Click the Tools icon.5) Click "Resize images".6) Set width/height to 50%.7) Click "execute".8) Select "overwrite" in the overwrite dialog.8) gThumb hangs, cpu at 100%.Versions:glib2-2.44.1-2.fc22.x86_64gthumb 3.4.1, and gthumb git master	5.0	id=730775	27	True	True	t.i.m	1
id=730775	REOPENED	cheese	general	3.12.x	Other Linux	High critical	Cheese Maintainer(s)	2014-05-26 18:08 UTC by	octopus81	2015-08-26 17:07 UTC (	7 users	The following error occurs, when trying to record video from WebCam. Worked in previous versions of Fedora, and is only a recent mishap in Fedora 20.(Screenshot attached with error message.)-----------------------------------------------------------------------------(cheese:2674): GLib-GObject-WARNING **: value "5.000000" of type 'gdouble' is invalid or out of range for property 'delaytime' of type 'gdouble'(cheese:2674): GStreamer-CRITICAL **: gst_mini_object_unref: assertion 'mini_object != NULL' failed(cheese:2674): cheese-WARNING **: Filter caps do not completely specify the output format: gstcapsfilter.c(348): gst_capsfilter_prepare_buf (): /GstCameraBin:camerabin/GstCapsFilter:videobin-capsfilter:Output caps are unfixed: video/x-raw, width=(int)640, height=(int)480, format=(string)I420, pixel-aspect-ratio=(fraction)1/1, interlace-mode=(string)progressive, framerate=(fraction)[ 0/1, 30/1 ]	CreatedThis is the attachment, as the previous one did not appear to upload. Last upload, unless by request.Attempted making adjustments using dconf-editor, but that didn't make a difference. Furthermore, the webcam microphone is no longer listed as an audio device.More information about the WebCam:Bus 003 Device 003: ID 045e:00f5 Microsoft Corp. LifeCam VX-3000Device is seen as "video0" but no audio input device is listed.Let's move this to cheese for now, since it looks like an app problem.And also, consider updating your F20 too, works for me here (tested with 5 different cameras) with up to date packages.(small correction, actually fails with git master of gstreamer, but works with F20)I don't see any question here; hence removing NEEDINFO.Would it be possible to provide a stack trace of the point the critical is hit ? That requires running this with git master of Cheese, of cource. Use G_DEBUG=fatal_criticals and run cheeze into gdb to produce that backtrace. Make sure you have all debug and dbg packages installed, and then put into a file the result of "thread apply all bt" in GDB and attach to this bug.Is this still an issue ? All cams I got works in Fedora 20, and also works with GST 1.4.Hi octopus81, I am closing this bug report as no updated information has been provided.Please feel free to reopen this bug if you can provide the information that was asked for in a previous comment.And should be fixed in 1.4 / Fedora 21 anyway.Sorry for the delay. This has been tried on Fedora 21, CentOS 7, Debian 7, and Ubuntu 14.04 with the same webcam.Same error occurred in all but CentOS.I have yet to try a stack trace, as I'm still very new to this arena.Sorry for the delay. This has been tried on Fedora 21, CentOS 7, Debian 7, and Ubuntu 14.04 with the same webcam.Same error occurred in all but CentOS.I have yet to try a stack trace, as I'm still very new to this arena.Are you sure you webcam works on Linux ?Try resetting the dconf configuration - dconf reset -f /org/gnome/cheese***has been marked as a duplicate of this bug. ***to be precise, in order to properly have cheese working, I must first run it, then close it, then run it again. From the second run it will work properly.^ Correction - the third time.I use Arch Linux 64-bit. Cheese 3.14.2 and gstreamer 1.4.5Whenever I shut down the machine and/or restart, when I use Cheese for the first time to take a photo, the message pops up. I must close Cheese, then take a photo, the message pops up again. From the third time on, everything is OK.Same here (Fedora 21, 64-bit). I get this error:(cheese:13584): cheese-WARNING **: Failed to allocate a buffer: gstv4l2src.c(749): gst_v4l2src_create (): /GstCameraBin:camerabin/GstWrapperCameraBinSrc:camera_source/GstBin:bin35/GstV4l2Src:video_sourceThe first time I run Cheese; after a couple of tries, it works fine.If I use `gst-launch-1.0 v4l2src ! xvimagesink` it always works.My webcam is: ID 046d:082b Logitech, Inc. Webcam C170The webcam works reliably in the Google Hangout plugin.Emmanuele, did you check your kernel logs at that moment ? Usually when I get that, it matches a uvcvideo driver failure (it recover by itself after a second). Would be nice to clarify if you are running from jhbuild or from a specific version.When I saw that the issue persisted in Fedora 21, I gave up on it. Thanks for all the help, but I'm moving on. :(Why are you closing the bug report?If you have moved on and are not interested in the issue any more you should remove yourself from the Cc list; you also probably want to change the options for mail delivery in Bugzilla.(In reply to Nicolas Dufresne (stormer) from)I don't have any uvcvideo related lines in the journal, but I do get a reset from the xHCI USB controller:Mar 02 17:44:09 marie kernel: restoring control 00000000-0000-0000-0000-000000000101/10/5Mar 02 17:44:09 marie kernel: xhci_hcd 0000:00:14.0: xHCI xhci_drop_endpoint called with disabled ep ffff88000a969b40Mar 02 17:44:09 marie kernel: usb 1-1.4: reset high-speed USB device number 25 using xhci_hcdMar 02 17:44:09 marie kernel: usb 1-1.4: hub failed to enable device, error -22Mar 02 17:44:09 marie kernel: xhci_hcd 0000:00:14.0: Setup ERROR: setup context command for slot 11.Mar 02 17:44:09 marie kernel: usb 1-1.4: reset high-speed USB device number 25 using xhci_hcdMar 02 17:44:09 marie kernel: usb 1-1.4: hub failed to enable device, error -22Mar 02 17:44:09 marie kernel: xhci_hcd 0000:00:14.0: Setup ERROR: setup context command for slot 11.Mar 02 17:44:09 marie kernel: usb 1-1.4: reset high-speed USB device number 25 using xhci_hcdand this trace from the kernel side:Mar 02 17:44:11 marie kernel: ---[ end trace 3339674856b4648f ]---Mar 02 17:44:11 marie kernel: [<ffffffff810b5220>] ? kthread_create_on_node+0x1a0/0x1a0Mar 02 17:44:11 marie kernel: [<ffffffff817472fc>] ret_from_fork+0x7c/0xb0Mar 02 17:44:11 marie kernel: [<ffffffff810b5220>] ? kthread_create_on_node+0x1a0/0x1a0Mar 02 17:44:11 marie kernel: [<ffffffff810b530a>] kthread+0xea/0x100Mar 02 17:44:11 marie kernel: [<ffffffff810b01c0>] ? rescuer_thread+0x2a0/0x2a0Mar 02 17:44:11 marie kernel: [<ffffffff810b022b>] worker_thread+0x6b/0x4a0Mar 02 17:44:11 marie kernel: [<ffffffff810af89d>] process_one_work+0x14d/0x400Mar 02 17:44:11 marie kernel: [<ffffffffa011ea74>] edp_panel_vdd_work+0x34/0x50 [i915]Mar 02 17:44:11 marie kernel: [<ffffffffa011e924>] edp_panel_vdd_off_sync+0xf4/0x1e0 [i915]Mar 02 17:44:11 marie kernel: [<ffffffffa00b32ec>] intel_display_power_put+0x14c/0x160 [i915]Mar 02 17:44:11 marie kernel: [<ffffffff810971ea>] warn_slowpath_null+0x1a/0x20Mar 02 17:44:11 marie kernel: [<ffffffff810970bd>] warn_slowpath_common+0x7d/0xa0Mar 02 17:44:11 marie kernel: [<ffffffff817401ea>] dump_stack+0x45/0x56Mar 02 17:44:11 marie kernel: Call Trace:Mar 02 17:44:11 marie kernel: 000000000000000b ffff8802609c8610 ffff880260e6a000 ffff8802609c0000Mar 02 17:44:11 marie kernel: 0000000000000000 ffff880241aa3d70 ffffffff810970bd ffff8802609c002cMar 02 17:44:11 marie kernel: 0000000000000000 00000000b75deedf ffff880241aa3d38 ffffffff817401eaMar 02 17:44:11 marie kernel: Workqueue: events edp_panel_vdd_work [i915]Mar 02 17:44:11 marie kernel: Hardware name: Apple Inc. MacBookAir6,2/Mac-7DF21CB3ED6977E5, BIOS MBA61.88Z.0099.B00.1305241529 05/24/2013Mar 02 17:44:11 marie kernel: CPU: 1 PID: 13286 Comm: kworker/1:0 Tainted: P W OE 3.17.7-300.fc21.x86_64 #1Mar 02 17:44:11 marie kernel: shpchp snd_timer snd sbs sbshc soundcore apple_bl binfmt_misc i915 i2c_algo_bit drm_kms_helper drm uas usb_storage video [last unloaded: btusb]Mar 02 17:44:11 marie kernel: Modules linked in: btusb uvcvideo videobuf2_vmalloc videobuf2_memops videobuf2_core v4l2_common snd_usb_audio videodev snd_usbmidi_lib snd_rawmidi meMar 02 17:44:11 marie kernel: WARNING: CPU: 1 PID: 13286 at drivers/gpu/drm/i915/intel_pm.c:6312 intel_display_power_put+0x14c/0x160 [i915]()So I guess it's kernel-related, but I still think it's something in the GStreamer pipeline that Cheese uses; after all, as I said, `gst-launch-1.0` works reliably without an hitch, whereas Cheese works (roughly) one in three times.I'm using the packaged version of Cheese in Fedora 21, but I'll try to use Cheese from jhbuild next.Thanks for reopening, it's obviously not right to simply close bugs base on "lost interest". It's not a feature request.Camerabin (cheese) might be causing a quick sequence of actions leading to this error. It's a much more complex case. That the kernel fails is a kernel bugs, though it does not always mean Gst is completly right. What we can do, is trace the device calls and compare.cho 0xff > /sys/class/video4linux/video0/debugThe trace will show in kernel log (so in journal too).Truncated command-> "echo 0xff > /sys/class/video4linux/video0/debug"With the debugging enabled, I only get these additional messages:Mar 02 18:13:34 marie kernel: video0: releaseMar 02 18:13:33 marie kernel: video0: poll: 00000041Mar 02 18:13:33 marie kernel: video0: poll: 00000000Mar 02 18:13:33 marie kernel: video0: mmap (0)Mar 02 18:13:33 marie kernel: video0: mmap (0)Mar 02 18:13:33 marie kernel: video0: open (0)Mar 02 18:13:33 marie kernel: video0: releaseMar 02 18:13:33 marie kernel: video0: open (0)Mar 02 18:13:33 marie kernel: video0: releaseMar 02 18:13:33 marie kernel: video0: open (0)Mar 02 18:13:33 marie kernel: video0: releaseMar 02 18:13:33 marie kernel: video0: open (0)You mean this is the delta, or all you get ? (does not seem very verbose)(In reply to Nicolas Dufresne (stormer) from)It's the additional output I get in the journal, alongside with the traceback and the xhci/usb module spew of.Could you try if patch inhelps ? Looks like something fails on quick reset, removing that quick reset could help.With Cheese 3.16, now the exact same error ofis happening. The difference is that the solution found there - remove the file ~/.cache/gstreamer-1.0/registry.x86_64.bin - is *not* working this time.I've experienced the exact same symptoms on Linux Mint 17.1 Rebecca, which ships Cheese 3.10.2 and found a work-around (and this should likely also give a good idea where to look for the root cause...)The output is very similar to the initial report:jbl@Tatanka ~ $ cheeseERROR: Could not load classifier cascade /usr/share/opencv/haarcascades/haarcascade_frontalface_alt2.xml(cheese:29538): GStreamer-CRITICAL **: gst_mini_object_unref: assertion 'mini_object != NULL' failed(cheese:29538): cheese-WARNING **: Filter caps do not completely specify the output format: gstcapsfilter.c(348): gst_capsfilter_prepare_buf (): /GstCameraBin:camerabin/GstCapsFilter:videobin-capsfilter:Output caps are unfixed: video/x-raw, width=(int)640, height=(int)480, format=(string)I420, pixel-aspect-ratio=(fraction)1/1, interlace-mode=(string)progressive, framerate=(fraction)[ 0/1, 30/1 ]This i what I get if I attempt to record a video right after starting Cheese.Now, the workaround:Start Cheese, select the video recording mode, click the "effects" and select any effect *other* than "No effect" and record a video (that should work, it works on my setup). Then selecting "No effect" (i.e. the default when you just want to record a video when starting Cheese) and then recording now works (again, on my setup).So I think the effect plugins perform some extra (and correct/required!) initialization of the Gstreamer pipeline that is not done correctly in the "No effect" plugin...My 2 centsEmmanuele, let me know if you have time to test apply patch from, I'm quite sure not doing the quick start/stop/start dance would help, but I can't reproduce it here. Also, have you reported this to kernel dev yet ?Can someone run:GST_DEBUG=*:8 cheese 2>debug.logThen cause the problem, ctrl-C this line, gzip the debug.log and attach here.Even gzipped, the log is 3.8 megs, so it's too big for Bugzilla.I put it here:(In reply to Nicolas Dufresne (stormer) from)Sorry, didn't have time up until now. I'm currently on Fedora 22 with GStreamer 1.4.5, and I can still reproduce it. I'll try and build GStreamer 1.5 as soon as possible.:libv4l2: error got 4 consecutive frame decode errors, last error: v4l-convert: libjpeg error: End Of ImageThis is an error from libv4l2 that transparently does jpeg decoding for us (but seems to fail at it)I do wonder why using `gst-launch-1.0 v4l2src ! xvimagesink` and the Google Hangout plugin still work reliably, though.For comparison:I think it depends on the natively supported formats, try this:gst-launch-1.0 v4l2src ! video/x-raw,format=YUY2 ! xvimagesinkand:gst-launch-1.0 v4l2src ! video/x-raw,format=I420 ! xvimagesinkI420 is emulated and I suspect it's going to decode jpeg for that (and hopefully cause the same failure)Indeed, I420 fails.The I420 pipeline fails for me with 1.4.5 (debian sid), but works with the 1.4 branch, so one of the patches that got cherry-picked seem to fix it (both link against libv4lconvert.so.0 fwiw).could you try this:gst-launch-1.0 v4l2src ! image/jpeg ! filesink location=dump.mjpegTo see if we can capture those bad jpeg images...Tim: there are not so many patches on top of 1.4.5, I can only see 2 or 3 that might be relevant:6c43b983fecd1c46f895e8cf7b106f62de059ce2bca79b41713909b3f4e252599d6d15713d8e87e2and maybe:efc5332f1e9b456d7a0032bee4dbd104235582f5Could you cherry pick and see which one of these fixes makes it work for you?Seems I spoke too soon and my failure was spurious and not related to the branch, sorry for the noise.Base on the information in that bug, the USB stack get reset due to error, the camera produce bogus frames (it's not clear if the kernel recover by itself, probably not).Now the rest is a little more complicated. Most cameras don't support I420, but Cheese do hardcode I420 for all cameras (I remember filing a bug for that). That's one of the reason a converter is needed in libv4l2. What also happens, is that GStreamer wan't the highest framerate, and camera produce higher rate in JPEG. We already force I420 (conversion) forcing emulated format to be picked, and then from there picking the highest framerate lead to JPEG. Now that corruption seem to cause error in the libv42 decoding (quite normal), which lead to fatal error.This is very different to Skype, Chrome or your custom pipeline (which most likely don't depend on libv4l2 and don't force a libv4l2 emulation). The main point of regression from my testing is kernel side, since the USB and UVC driver seems to have increased failure rate (with low recovery ability). I think from Cheese and GStreamer point of view, there is very little we can do, unless there is some method that would allow transparently retrying.Oh, and my point about the 1.5 patches from, is that it removes a quick reconfigure of the device' which is known to be a good trigger for kernel bugs. I didn't backport it, as I thought this quick reocnfigure was only existent in 1.5 due to recent change in decodebin.Hi,It appears this has been fixed here on Arch Linux. Don't know about Fedora tough.cheese 3.16.1gstreamer 1.4.5v4l-utils 1.6.3	46.0	id=567269	41	True	True	doclivingston	1
id=760571	REOPENED	epiphany	Interface	unspecified	Other Linux	High critical	Epiphany Maintainers	2016-01-13 09:22 UTC by	Sergio Villar	2016-01-15 15:34 UTC (	1 user	Steps to reproduce:1- Visit* Expected outcome:Web is rendered properly* Actual outcome:epiphany crashes with the following btProgram received signal SIGSEGV, Segmentation fault.0x00007ffff28c77b0 in gdk_pixbuf_get_from_surface () from /usr/lib/x86_64-linux-gnu/libgdk-3.so.0(gdb) bt	Sergio I hate to use a canned reply on you, but...Thanks for taking the time to report this.Unfortunately, that stack trace is missing some elements that will help a lot to solve the problem, so it will be hard for the developers to fix that crash. Can you get us a stack trace with debugging symbols? Please seefor more information on how to do so and reopen this bug report. Thanks in advance!(In reply to Michael Catanzaro from)Easy, if you hate it then just don't use it :).I know epi has good developers so the bt provided should be more than enough knowing a bit what the methods do. Anyway another one (I'd have fix this but by gnome git account is temporarily disabled so I'm waiting for sysadmins to enable it again)Program terminated with signal SIGSEGV, Segmentation fault.So apparently the pixbuf in the surface was freed too early.(In reply to Sergio Villar from)We have more crashes in Bugzilla than we can fix... I could try to look at a bug with a truncated stacktrace with no debuginfo for half the frames in the trace, or I could look at a bug with a full stacktrace ('thread apply all bt full') and appropriate debuginfo (at least for GTK+, GLib, and WebKit) installed.But anyway, thanks for reporting. :)I guess it's a thread safety issue in the WebKit icon database thread, but really that is just a guess. I found a much better backtrace for this in Red Hat #1283313, but it's hard to know what's wrong even with that. I don't think the Epiphany snapshot service thread is to blame, because it only calls webkit_web_view_get_snapshot in an idle on the main thread, which is safe.If you know what's wrong, please give a hint or post a patch; doesn't matter if you have a working GNOME account or not, since it is no effort at all for me to commit your patch if it turns out to be an Epiphany bug.(In reply to Michael Catanzaro from)Sorry, I got confused between snapshot (unrelated) and favicon.I checked all the code that touches the favicon in the snapshot thread, and it is all called from the main thread, so I suspect WebKit is to blame for this.(In reply to Michael Catanzaro from)Or maybe not, I got these criticals today which suggest it's Ephy's fault:** (epiphany:5918): CRITICAL **: cairo_surface_t *webkit_web_view_get_favicon(WebKitWebView *): assertion 'WEBKIT_IS_WEB_VIEW(webView)' failed** (epiphany:5918): CRITICAL **: const gchar *webkit_web_view_get_uri(WebKitWebView *): assertion 'WEBKIT_IS_WEB_VIEW(webView)' failed** (epiphany:5918): CRITICAL **: ephy_snapshot_service_save_snapshot_async: assertion 'EPHY_IS_SNAPSHOT_SERVICE (service)' failedI'm not sure when these occurred; maybe when closing a web view?	5.0	id=325508	26	False	False	Christian.Kirbach	1
id=765965	REOPENED	glib	gsettings	unspecified	Other Linux	High critical	Allison Lortie (desrt)	2016-05-04 09:03 UTC by	Allison Lortie (desrt)	2016-05-04 09:22 UTC (	1 user	There's no denying the fact that GSettingsBackend is effectively an abstraction of dconf.dconf contains a fantastically useful data structure called DConfChangeset that models the state of a dconf database, or a set of changes to a dconf database. In reality, this data structure also models state of GSettings backends and changes to them as well.Let's merge the code into GIO. We can drop the GTree-based interface for changesets and move over to using the changeset type natively. We can also use it to help us with implementation of the delayed and memory backends.The reason we're doing this here is for another backend that will be a very heavy user of GSettingsBackendChangeset: the container settings backend.	Some review from the branch: Want more docs/comments on GSettingsBackendReadFlags and for the new vfuncs in gsettingsbackendg_settings_backend_changeset_new() typo:- * contents are the database are what you would have if you applied the+ * contents of the database are what you would have if you applied theg_settings_backend_changeset_is_similar_to: * Strictly speaking, a write resettings all of "/a/" after a write * containing "/a/b" could cause the later to be removed from the queue, * but this situation is difficult to detect and is expected to be * extremely rare.Its not clear what you mean here. A clear of /a/ would not be "similar to" a write of /a/b, so how is this related to this function?g_settings_backend_changeset_seal() typo:- * value of that key) or %NULL (to reset a reset).+ * value of that key) or %NULL (to request a reset).g_settings_backend_changeset_change ():The docs should mention that the the "changes" argument must be sealed (it return_if_fail on that. Actually, why is this needed? It will be sealed automatically otherwise?With the new g_settings_backend_is_*, can't the gsettingsbackend.c is_* local funcs just be g_return_val_if_fail (g_setttings_backend_is_*(), FALSE);g_settings_backend_changeset_applied() claims Since 2.26 which seems wrongg_settings_backend_changeset_applied() - This doesn't seem to do anything with key resets, it just emits keys_changed for all the reset:ed dirs. Is that really right? Shouldn't each reset in the changeset emit a path_changed?g_settings_backend_changeset_serialise() - this uses "serialise", but other apis in glib like g_icon_serialize uses "serialize". Also serialize seems more popular according to google.Also, its not clear how serialise can be used, as the format is unspecified. Can we at least define if it is stable over time or not? I.e. can i store it in a file?	1.0	id=760571	8	True	True	mcatanzaro	1
id=763657	REOPENED	rhythmbox	general	3.2.x	Other Linux	High critical	RhythmBox Maintainers	2016-03-15 02:21 UTC by	Nicholas	2016-03-25 06:00 UTC (	1 user	Using version 3.2.1, I plug in my Samsung S4 to my Ubuntu 15.10 computer. It pops up in my dock and shows up as "Media Player" in Rhythmbox.If I wait a minute or so, "Media Player" will turn into a specific name for the device type, but if I click on 'Properties' before that happens, then Rhythmbox crashes with a segfault and the command line reads:Gtk-Message: GtkDialog mapped without a transient parent. This is discouraged.sys:1: Warning: g_type_instance_get_private: assertion 'instance != NULL && instance->g_class != NULL' failedSegmentation fault (core dumped)my kern.log contains this:Mar 14 21:16:41 kbb kernel: [128343.231153] rhythmbox[31037]: segfault at 0 ip 00007f4847d3593c sp 00007ffc88a4f7c0 error 4 in librhythmbox-core.so.9.0.0[7f4847cbf000+13a000]My apport.log contains this, unhelpfully:ERROR: apport (pid 31053) Mon Mar 14 21:16:41 2016: this executable already crashed 2 times, ignoring	Thanks for taking the time to report this.Without a stack trace from the crash it's very hard to determine what caused it.Can you get us a stack trace? Please seefor more information on how to do so. When pasting a stack trace in this bug report, please reset the status of this bug report from NEEDINFO to its previous status. Thanks in advance!~$ gdb rhythmboxGNU gdb (Ubuntu 7.10-1ubuntu2) 7.10Copyright (C) 2015 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later <>This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law. Type "show copying"and "show warranty" for details.This GDB was configured as "x86_64-linux-gnu".Type "show configuration" for configuration details.For bug reporting instructions, please see:<>.Find the GDB manual and other documentation resources online at:<>.For help, type "help".Type "apropos word" to search for commands related to "word"...Reading symbols from rhythmbox...Reading symbols from /usr/lib/debug/.build-id/11/ab81d097c557a3acfdfb770d9800ca4e1b514f.debug...done.done.(gdb) runStarting program: /usr/bin/rhythmbox [Thread debugging using libthread_db enabled]Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".[New Thread 0x7fffda2ae700 (LWP 32070)][New Thread 0x7fffd9aad700 (LWP 32071)][New Thread 0x7fffd9079700 (LWP 32072)][New Thread 0x7fffcaf98700 (LWP 32073)][New Thread 0x7fffca797700 (LWP 32074)][New Thread 0x7fffc376c700 (LWP 32075)](rhythmbox:32066): libsoup-CRITICAL **: soup_server_quit: assertion 'priv->listeners != NULL' failedsys:1: Warning: object SoupServer 0x1657d20 finalized while still in-constructionsys:1: Warning: Custom constructor for class SoupServer returned NULL (which is invalid). Please use GInitable instead.[New Thread 0x7fffb77bb700 (LWP 32077)][Thread 0x7fffb77bb700 (LWP 32077) exited][New Thread 0x7fffb77bb700 (LWP 32078)](rhythmbox:32066): Gtk-WARNING **: Duplicate child name in GtkStack: Add to Playlist(rhythmbox:32066): Gtk-WARNING **: Duplicate child name in GtkStack: Add to Playlist(rhythmbox:32066): Gtk-WARNING **: Duplicate child name in GtkStack: Add to Playlist(rhythmbox:32066): Gtk-WARNING **: Duplicate child name in GtkStack: Add to Playlist(rhythmbox:32066): Gtk-WARNING **: Duplicate child name in GtkStack: Add to Playlist(rhythmbox:32066): Gtk-WARNING **: Duplicate child name in GtkStack: Add to Playlist[New Thread 0x7fffb6520700 (LWP 32080)][Thread 0x7fffca797700 (LWP 32074) exited][Thread 0x7fffb6520700 (LWP 32080) exited][Thread 0x7fffb77bb700 (LWP 32078) exited][Thread 0x7fffcaf98700 (LWP 32073) exited][New Thread 0x7fffcaf98700 (LWP 32083)][New Thread 0x7fffb77bb700 (LWP 32084)][Thread 0x7fffb77bb700 (LWP 32084) exited][New Thread 0x7fffca797700 (LWP 32085)][Thread 0x7fffca797700 (LWP 32085) exited][New Thread 0x7fffb5d1f700 (LWP 32116)][New Thread 0x7fffb551e700 (LWP 32117)]Gtk-Message: GtkDialog mapped without a transient parent. This is discouraged.sys:1: Warning: g_type_instance_get_private: assertion 'instance != NULL && instance->g_class != NULL' failedProgram received signal SIGSEGV, Segmentation fault.rb_sync_settings_sync_category (settings=0x0, category=category@entry=0x7ffff7b8b6cc "music") at rb-sync-settings.c:170170 rb-sync-settings.c: No such file or directory.(gdb) thread apply all btThe only status options I can see are NEEDINFO and RESOLVED and I don't want to change it to RESOLVED.There is a new plugin in rhythmbox 3.3 that deals with android devices, and it does a far better job than the mtp plugin ever did. I don't think there's much point looking into this further.OK. I will try with 3.3.What is the name of the new plugin, and what do I have to do to use it? My experience in 3.3 is largely the same as in 3.2.The new plugin is enabled by default if it's built. If you disable the MTP device plugin, does the same thing still happen? A stack trace from the new plugin would definitely be helpful.	7.0	id=765965	7	True	True	alexl	1
id=752014	REOPENED	GStreamer	gst-plugins-bad	git master	Other Linux	High critical	GStreamer Maintainers	2015-07-06 12:49 UTC by	Dimitrios Katsaros	2016-11-01 17:36 UTC (	6 users	I am trying to develop a component that uses the x-bayer format. After trying to debug a segmentation fault I reached this pipeline:gst-launch-1.0 v4l2src device=/dev/video0 ! video/x-bayer ! bayer2rgb ! ximagesinkThe pipeline Starts normally, then the ximagesink causes a renegotiation to happen to maximize the framesize. That causes a segmentation fault. I cannot determine if the problem is the bayer2rgb component or the v4l2src.	Thanks for taking the time to report this.Without a stack trace from the crash it's very hard to determine what caused it.Can you get us a stack trace? Please seefor more information on how to do so. When pasting a stack trace in this bug report, please reset the status of this bug report from NEEDINFO to its previous status. Thanks in advance!a GST_DEBUG=6 showing the issue might also be helpful in debugging.CreatedBacktraceCreatedLast ~100 lines of debug messages before segmentation faultI have added the Backtrace for the segmentation fault and the last 100 lines of debug messages before the segmenetation. The debug was too large and exceeded the file limits of bugzilla, if needed I can post the entire dump on a file sharing site. I have installed the debug sumbols for orc, however, gdb does not seem to resolve the symbols for the orc call inside the tmp-orc.c file that is generated. I generated the file, however there are only orc calls in it.Createdfix crash using non existent caps structureI don't think this fixes that issue (unless you have asserts off), but I got another crash trying to repro this issue. It works "fine" with your original command line (pipeline errors out) but crashes in transform_caps if I use xvimagesink instead of ximagesink.I'm not pushing it right away because I'm not quite sure whether the new test is sufficient. I don't think we could get ANY here, due to the template caps, but I'm not 100% confident.I tested the patch out of curiosity and it doesn't fix the segmentation fault I have been dealing with.To reproduce, without v4l2:gst-launch-1.0 videotestsrc ! rgb2bayer ! bayer2rgb ! ximagesinkResize the window, it crashes.It crashes if width is odd.I didn't two unrelated fixes, but one need to figure-out how to fix odd width support.commitAuthor: Nicolas Dufresne <>Date: Thu Aug 6 18:04:58 2015 -0400 bayer2rgb: Read stride from the video infocommitAuthor: Nicolas Dufresne <>Date: Thu Aug 6 18:04:41 2015 -0400 bayer2rgb: Protect against failing mapTwo observations:1) Doesn't happen with ORC_CODE=backup2) Happens when passing a less than 8-aligned dest pointer to the orc merge functions. The unit size calculation seems to use width * height * 4, so strides and rows will always be 8-aligned if width is even.Simpler way to reproduce:gst-launch-1.0 -f videotestsrc num-buffers=1 ! video/x-raw,width=319,height=240 ! rgb2bayer ! bayer2rgb ! fakesink(There also seem to be some stride/size inconsistencies between the elements on the bayer side of things.)Createdbayer: fix stride inconsistencies for odd widths(Doesn't fix this bug, just cleans up an inconsistency in the codebase. The bug here appears to be about strides/offsets on the RGB video buffer side of things, not the Bayer buffer.)Consistently use GST_ROUND_UP_4(width) as stride forbayer buffers. Bayer data will usually come in widthsthat are multiples of 4 anyway, so hopefully thisshould not have any adverse impact on anyone inpractice. Before, bayer2rgb required input buffers to are sizedaccordingly, but then didn't actually round up whencalculating row offsets. rgb2bayer didn't use a roundedstride nor buffer size.Hi,It's not exactly the same bug but in the same file, somehow when running something like this: gst-launch-1.0 --no-fault filesrc location=/home/cJ/pouet.raw ! video/x-bayer,format=rggb,width=4096,height=2048,framerate=30/1 ! bayer2rgb ! video/x-raw,format=RGBx ! fakesinkI get: WARNING **: bayer2rgb0: size 4096 is not a multiple of unit size 8388608This is with bayer2rgb v1.8.2.Do you have a test file replacing filesrc with videotestsrc works, so it's liekly particular to the file.This is not related and not expected to work. You need to teach videoparse bayer formats and then use that.Comment onfix crash using non existent caps structureThis should be fixed at the basetransform level. Most calls already prevent this, at least one doesn't.pushed as- bayer: fix stride inconsistencies for odd widthsMore left to do here	18.0	id=763657	7	True	False	notverysmart	1
id=325508	REOPENED	evolution	Calendar	3.6.x (obsolete)	Other Linux	High critical		2006-01-02 13:45 UTC by	Luke Hutchison	2013-02-04 08:12 UTC (	6 users	Distribution: UnknownPackage: EvolutionSeverity: criticalVersion: GNOME2.13.3 2.5.xGnome-Distributor: Red Hat, IncSynopsis: Crash clicking on e-a-n panel iconBugzilla-Product: EvolutionBugzilla-Component: CalendarBugzilla-Version: 2.5.xBugBuddy-GnomeVersion: 2.0 (2.13.0)Description:Description of the crash:I saw I had two alarms (the new e-a-n panel icon had a flashingexclamation mark). I double-clicked on the icon and got this crash asthe "Appointments" window was trying to draw itself. This hasn'thappened before since I upgraded to Evolution 2.5.2 a few days ago.Debugging Information:Backtrace was generated from '/usr/libexec/evolution-alarm-notify'Using host libthread_db library "/lib/libthread_db.so.1".[Thread debugging using libthread_db enabled][New Thread -1208858432 (LWP 9059)][New Thread -1210958928 (LWP 9060)]0x0097d402 in ?? ()------- Bug created by bug-buddy at 2006-01-02 13:45 -------	unique stack trace.excellent trace, confirmingI guess, this is fixed in CVS Head. @Luke: Can you try with CVS Head and confirm if it still happens?Yes, this appears fixed, I haven't seen it again. Thanks!***has been marked as a duplicate of this bug. ***I have seen this again with FC5 rpms from FC5-development, with the same version numbers as those in FC5-final (as covered in the dup). Re-opening so that there is one instance of this bug open. I have seen this several times recently. There is no e-d-s 1.6.0 available for FC5 yet in either the updates or development channels.sragavan has rewritten alarm deamon code and committed in head 2.7.x. Marking this as 'Needinfo' to verify in evolution 2.8.marcus, did you have a chance to update to Evolution 2.8 yet?Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!I'm reopening this, because we've a similar crash in 2.32.1 of evolution, filled as a downstream bug report:Core was generated by `/usr/libexec/evolution/2.32/evolution-alarm-notify'.Program terminated with signal 11, Segmentation fault.Downstream bug report from Evolution 3.0.1:-> "See Also: Add Bug URLs:" field.It seems to be still there, this time from 3.6.1:Version-Release number of selected component:evolution-3.6.1-1.fc18Additional info:libreport version: 2.0.18abrt_version: 2.0.18backtrace_rating: 4cmdline: /usr/libexec/evolution/3.6/evolution-alarm-notifycrash_function: lookup_queued_alarmkernel: 3.6.6-3.fc18.x86_64truncated backtrace::Thread no. 1 (10 frames): #0 lookup_queued_alarm at alarm-queue.c:328: #1 open_alarm_dialog at alarm-queue.c:1438: #2 tray_icon_clicked_cb at alarm-queue.c:1486: #3 icon_activated at alarm-queue.c:1511: #4 _g_closure_invoke_va at gclosure.c:840: #7 emit_activate_signal at gtkstatusicon.c:1278: #8 gtk_status_icon_button_press at gtkstatusicon.c:1604: #9 _gtk_marshal_BOOLEAN__BOXED at gtkmarshalers.c:85: #14 gtk_widget_event_internal at gtkwidget.c:6301: #15 gtk_widget_event at gtkwidget.c:5958	13.0	id=668477	14	True	True	mjc	1
id=713530	REOPENED	geary	engine	0.5.x	Other All	High major	Jim Nelson	2013-08-10 01:20 UTC by	Geary Maintainers	2017-02-06 23:42 UTC (	3 users	---- Reported by2013-08-09 18:20:00 -0700 ----Original Redmine bug id: 7325Original URL:Searchable id: yorba-bug-7325Original author: Brendan LongOriginal description:I just left Geary running in the background, and the log is full of messageslike this: [deb] 19:15:31 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1875-06-19T11:49:28-0659 [deb] 19:15:32 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1875-05-19T11:49:28-0659 [deb] 19:15:32 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1875-04-19T11:49:28-0659 [deb] 19:15:33 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1875-03-19T11:49:28-0659 [deb] 19:15:33 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1875-02-19T11:49:28-0659 [deb] 19:15:33 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1875-01-19T11:49:28-0659 [deb] 19:15:34 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-12-19T11:49:28-0659 [deb] 19:15:34 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-11-19T11:49:28-0659 [deb] 19:15:35 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-10-19T11:49:28-0659 [deb] 19:15:35 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-09-19T11:49:28-0659 [deb] 19:15:36 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-08-19T11:49:28-0659 [deb] 19:15:36 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-07-19T11:49:28-0659 [deb] 19:15:37 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-06-19T11:49:28-0659 [deb] 19:15:37 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-05-19T11:49:28-0659 [deb] 19:15:38 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-04-19T11:49:28-0659 [deb] 19:15:38 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-03-19T11:49:28-0659 [deb] 19:15:38 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-02-19T11:49:28-0659 [deb] 19:15:39 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1874-01-19T11:49:28-0659 [deb] 19:15:39 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1873-12-19T11:49:28-0659I'm fairly certain I didn't send any emails in 1873. I stopped geary andrestarted, and it looks like this set of messages starts with: [deb] 19:19:51 imap-engine-account-synchronizer.vala:282: Oldest local email in Gmail account:INBOX not old enough (2011-10-19T11:49:28-0600 vs. 1-01-01T00:00:00-0659), email_total=3516 vs. local_count=3515, synchronizing... [deb] 19:19:51 imap-engine-generic-folder.vala:490: Not opening Gmail account:INBOX: already open (open_count=3) [deb] 19:19:51 imap-engine-account-synchronizer.vala:339: Background sync'ing Gmail account:INBOX [deb] 19:19:51 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-09-19T11:49:28-0600 [deb] 19:19:52 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-08-19T11:49:28-0600 [deb] 19:19:52 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-07-19T11:49:28-0600 [deb] 19:19:52 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-06-19T11:49:28-0600 [deb] 19:19:52 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-05-19T11:49:28-0600 [deb] 19:19:53 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-04-19T11:49:28-0600 [deb] 19:19:53 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-03-19T11:49:28-0600 [deb] 19:19:53 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-02-19T11:49:28-0700---- Additional Comments From2013-09-27 19:11:00 -0700 ----### History#####1Updated by Jim Nelson 3 months ago * **Target version** set to _0.4.0_Huh -- it looks like the GDateTime was initialized to a bogus value in thefirst run. In gear menu -> Accounts, what do you have your Download mail timeset to?The second set is normal; Geary doesn't pull all your old mail at once, ratherit pulls in batches to keep the application usable.#####2Updated by Brendan Long 3 months agoJim Nelson wrote:first run. In gear menu -> Accounts, what do you have your Download mail timeset to?It's set to "Everything".. So I suppose you could say this isn't a bug, but Iwould expect an email client to realize that I don't have any messages from 1AD (that's how far back it appears to want to go, according to the logs: `notold enough (2011-10-19T11:49:28-0600 vs. 1-01-01T00:00:00-0659)`). If I set itto "1 year back", it works as expected.Is there really no better way to tell if there's older email in an IMAPaccount? :( At the very least, you should be able to stop at[1971]()#####3Updated by Jim Nelson 3 months ago * **Assignee** set to _Jim Nelson_ * **Priority** changed from _Normal_ to _Urgent_That's what I thought; yes, it should be able to detect when it's hit the endof the folder and doesn't need to go further. (I thought you were saying itwas starting in 1875 and going back from there, i.e. an initializationproblem.) I'll get on this Monday.#####4Updated by Jim Nelson 3 months ago * **Status** changed from _Open_ to _Fixed_Applied in changeset ec10e06213f8b3fd3155a3d8333f7ec47181226b.#####5Updated by Brendan Long 3 months agoThis fix doesn't seem to work for me. I still get the same messages, so Iadded a tiny bit more debugging: int local_count = yield folder.local_folder.get_email_count_async(ImapDB.Folder.ListFlags.NONE, bg_cancellable); debug("Got %d of %d emails", local_count, folder.properties.email_total); if (local_count >= folder.properties.email_total) { And I get output like: [deb] 17:32:48 imap-engine-account-synchronizer.vala:339: Background sync'ing Gmail account:INBOX [deb] 17:32:48 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-09-19T11:49:28-0600 [deb] 17:32:49 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:32:49 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-08-19T11:49:28-0600 [deb] 17:32:49 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:32:49 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-07-19T11:49:28-0600 [deb] 17:32:49 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:32:49 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 2011-06-19T11:49:28-0600 # etc [deb] 17:40:54 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:40:54 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1906-05-19T11:49:28-0700 [deb] 17:40:54 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:40:54 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1906-04-19T11:49:28-0700 [deb] 17:40:54 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:40:54 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1906-03-19T11:49:28-0700 [deb] 17:40:54 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:40:54 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1906-02-19T11:49:28-0700 [deb] 17:40:55 imap-engine-account-synchronizer.vala:377: Got 3709 of 3710 emails [deb] 17:40:55 imap-engine-account-synchronizer.vala:353: Background sync'ing Gmail account:INBOX to 1906-01-19T11:49:28-0700 Note: Thunderbird says there's 3710 messages in the inbox and the oldest oneis from 2011.#####6Updated by Jim Nelson 3 months ago * **Status** changed from _Fixed_ to _Open_Huh -- it looks like it's not fetching one email and that's preventing theterminus check from completing. Let me take a look and see if I can figure outwhat the issue is.#####7Updated by Jim Nelson about 1 month ago * **Status** changed from _Open_ to _Fixed_Applied in changeset 28a355a8e8db5b1c1d901c56392246ed45b30858.#####8Updated by Jim Nelson about 1 month agoBrendan, I've not been able to reproduce your problem, but I did findsomething very similar to it that I've patched. That, plus some other workthat's been performed this cycle, I'm hoping will solve your problem, if youcan try again.Additionally, I set the epoch to 1971 as you suggested, just for sanity'ssake.--- Bug imported by2013-11-21 20:21 UTC ---This bug was previously known as _bug_ 7325 atUnknown milestone "unknown in product geary. Setting to default milestone for this product, "---".Setting qa contact to the default for this product. This bug either had no qa contact or an invalid one.	***has been marked as a duplicate of this bug. ***A user has sent us a log with this problem, so re-opening.Mike, I've put a branch up at wip/713530-sync. Can you check if this helps your issues? At the least I'm hoping it won't thrash so hard and cause your system to be unusable. I've also added some code to spend less time synchronizing.If you could run this and send another redacted log to, that would help me greatly.Just sent the log through then.I've pushed to master (commit 1a41622) changes which should make background synchronization not work the CPU or the disk so hard. However, it appears from Mike's log that it's still not pulling in all the emails from certain folders, which is something that needs to be investigated further.The patch helped the problem but Mike reported that it's not completely resolved. He has three accounts configured and there's still too much I/O occurring as they synchronize. The background synchronizer should only be running on one account at a time. It also causes delays for him to view messages (I've seen this too), and that's something else that needs to be addressed.***has been marked as a duplicate of this bug. ***Using the additional log:I can see on my accounts that:- my personnal account is missing 3 emails in Sent folder. I think I found them:these are 3 emails that I have sent twice at the same time. Everything is the identical (timestamp, etc.) except the boundary and the Message-ID. Maybe Geary is skipping one of them because it thinks they are the same one?- my Gmail account is missing 2 emails in Important folder as well as 2 emails in "All emails", but I think the same emails are missing in both folders.However I found 4 missing emails yet that are all Google Calendar reminders from the same date/time (again!):But since I found 4 missing emails, there must be 2 invalid emails somewhere… it's probably another issue.Anyway if you have any idea where email might be skip due to "already in database", I'm listening!Here is the code responsible of NOT downloading what Geary thinks is a duplicate:Basically the same mail was sent twice by Gmail for whatever reason, but with different message IDs. And since Geary only checks for the same size and date, then it will ignores one of them...I workaround the problem by modifying the code as it:So basically checking that message IDs are the same before ignoring a mail - but since I am not sure why in the first place such a code exists, I cannot ensure that this is the right thing to do. Nevertheless, so far my mail are getting all downloaded but it's painfully slow. I'll update this once all my folders have been treated by Geary.Createdpatch proposal v1OK so there was a bug in my code, mails were being stored multiple times ;-). It's now much faster to get them all. Here is a proposal patch that should fix this issue! If review approves it, I'm not against some extra testing…!Note: this patch only fixes problem for the first 51 mails of the current opened folder. It does not fix the issue in background synchronization mode - I have to look at it again...Createdpatch proposal v2Finally was able to find the root cause (basically Message-ID not being fetched when background sync'ing). I added PROPERTIES as a mandatory field (as PROPERTIES already is), which does the trick :).Review of:Nice catch! This looks good, and I'll look at committing it as-is. Two questions though:- So with patch, are you seeing the debug statements you updated printing out "(already got m of n emails)", where m is actually equal to n? I'm still seeing for all of my folders m being less than n (in most cases by 10-20 messages), and that not changing after a sync. How have you been going about debugging this?::: src/engine/imap-db/imap-db-folder.vala@@ +1238,3 @@+ if (email.message_id != null)+ stmt.bind_string(2, email.message_id.to_string());+This is interesting, so have you found cases where there is a null message id here?If it is null, what does the DB query look like, "... AND message_id=null"?Well, I guess there is still some cleanup to do there.- Debug traces "alrgeady got m of n emails" (with m = n) should not appear more than once (eg. the first time background sync'ing is done). After that time, this trace should never appear again (since sync is done). But to have this first total sync, it may take a looong time (especially if you have more than 10K mails per folder).- Regarding your second question, the request is conditionnal:+ if (email.message_id != null)+ stmt = cx.prepare("SELECT id FROM MessageTable WHERE internaldate=? AND rfc822_size=? AND message_id=?");+ else+ stmt = cx.prepare("SELECT id FROM MessageTable WHERE internaldate=? AND rfc822_size=?");So if message_id is null, then we will not filter by message_id.Here are a few notes about cleanup now:- first, you are right: I should check if I still have some case when email.message_id is null. In any case I believe it should NOT, so yeah I'm going to remove this if/else condition anyway.- second, the patch does not fix actually all folders sync… I was a bit optimistic but it looks like there are still some emails missingOops, missclick. Anyway, for my accounts:- Gmail missing one "Important" and one in "All mails". This particular mail is the one that was sent twice at the same time with diffent ID: it is actually fetched and present, but in another folder (INBOX). I think my patch fixed the first part (fetching the 2 "identical" mails), but fails to fix the second. It should not be much difficult to fix though (hopefully!).- Personnal provider INBOX is stranger: Icedove downloaded 16366 mails. Geary tells me that server told it that there are 16370. And it fetched 16355… All other folders are fine though.Still some work to do on it. By the way, I'm attaching some debugging scripts I am using to compare missing mails between geary and icedove.CreateddisplayGearyDownloadProgression.shCreatedshowMissingGearyMails.shSeems like you're making some progress, but it strikes me as being a pretty difficult issue to debug. What's your feeling about it in general?It just occurred to me that when we fix, we won't be able to compare the server's Message-Id with the one in the database, since they might be different. So if we're going to rely on it here, we would need tofetch the Message-Id header instead of the IMAP Message-Id when requesting Geary.Email.Field.REFERENCES, or we'd need to store both in the db. I'll make a note of this over there.You know though, in the end I kind of wonder if we're making our lives hard by relying on only internaldate/size and maybe now Message-ID.It seems the suggested approach[0] is to rely purely on message UIDs, and if it changes (it can, but should be uncommon) then simply deal with it by downloading all messages again. That would suck, but maybe in that case there's a way to only re-sync some of the data to be able to stitch up the existing messages in the DB with their new UIDs.That's a /lot/ of work though, so maybe something to do only if we can't get these existing bugs ironed out.[0] -Yeah maybe relying on the message UID is the only thing to do reliably. I'll try to give these 2 last issues a shot, but actually I doubt we'll ever be able to solve it reliably. For at least one reason: Message-ID is not mandatory so you might end-up with my issue (twice the same mails except content boundaries changed…). I have many mails (thanks Apple) with no Message-ID at all. Plus ill-formated other ones…I wonder how Icedove is handling all of that.I was wondering that exact same thing. There's a few clues on their wiki: --Also, I just thought of a case that the background sync might not account for, when the following is true: - Geary is closed - A message gets delivered to a mailbox (sieve filter, another mail client is used to move a message, etc.) - The new message is newer than the oldest message in the mailbox - The oldest message is newer than the download epoch When geary is next opened and starts doing a background sync, it will hit the "Oldest local email in %s not old enough" condition, and start syncing from the oldest into the past. Since the new message is newer than the oldest, the new message won't get picked up, and the remote and local counts won't match afterwards.Does that sound plausible? To test this out, in the "Oldest local email" section, I simply nulled out oldest_local and oldest_local_id. The result was a full sync back to the epoch for each out-of-sync mailbox, but now at least a few more of my mailboxes are now actually in sync.Well nulling "Oldest local email" didn't help on my side but that was expected since I can reproduce the problem by wiping all Geary's data.Do you think it makes sense to try to fix these problems or should we consider using message UID and give up on this?Well, I'm not sure if the current approach is every going to perform particularly well, but switching to using UIDs might be a lot of work - that won't get done before 0.12. In the meantime there's definitely some issues that people are still reporting that could use getting fixed, where we're not picking up all/many messages in certain folders: e.g., and this issue you're seeing after a database wipe. Even if we can't get the performance fixed right away, it would be good to at least get it correct, if possible.Have you managed to track down what messages aren't being sync'ed even after you have deleted the db?Using current master and my patch, the situation today is much better:- for my gmail account, 100% of my emails are present. Yeah!- for my personnal account, 100% of non-INBOX emails are present. Yeah!- for my personnal account, it misses 15 emails in INBOX (14300 / 14315). For these 15 missing: - 1 email is present twice. Everything exactly the same, except the UID. No way to fix this yet since Geary does not handle UID, right? - the rest (14 emails) are emails that are duplicates, except the UID, X-DSPAM-SIGNATURE and id in "Received" field. They are all from the exact same host, so I believe this host was sending mails twice from 2 different servers at the same time? Again, I don't see any solution but relying on UID.The proposed patch definitively helps to increase the situation though. It would be great to have it for 0.12.0 release!Fair enough. I've rebased it off master and pushed as commit. Even with it I'm also still getting quite a few message missing, but also now have a bunch folders that are up to date.At least this improves things before we can switch to using UIDs. Ta!	25.0	id=752014	20	True	True	thiagossantos	1
id=567269	REOPENED	vala	Control Flow Statements	unspecified	Other All	Urgent blocker	Vala maintainers	2009-01-10 16:05 UTC by	ccadete	2017-02-20 19:15 UTC (	13 users	Please describe the problem:Should not be possible to use "this" before executing the base class constructorsSteps to reproduce:using GLib;public class ClassA : Object { public ClassA(ClassB param){ stdout.printf ("ClassA\n"); }}public class ClassB : ClassA { public ClassB(){ base(this); stdout.printf ("ClassB\n"); }/* NOTE: Using "this" in method, should not be possible too public ClassB(){ base(util(this)); stdout.printf ("ClassB\n"); } public static ClassB util (ClassB p){ return p; }*/ public static void main (string[] args) { new ClassB(); }}Actual results:critical warningExpected results:Does this happen every time?Other information:	The same problem occurs when calling instance methods of the class before base(), it compiles without warning and fails at run time.classC: Object { public classC() { someMethod(); base(); } someMethod() { ... }}***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***This shouldn't be hard to implement in the control flow check by checking for the "this" parameter being used before being initialized, right? Much like what we did for out parameters.CreatedFix is_chainup methodThe is_chainup method didn't accept all forms of chain-up calls. Now this(), base() and Object() are supported as wellRequired forCreatedReport error when using this before before chain-upFixesReview of:This looks quite safe thanks.::: vala/valaflowanalyzer.vala@@ +418,3 @@ // parameter+ if (used_var.name == "this") {+ Report.error (used_var.source_reference, "use of possibly unassigned local variable `%s'".printf (used_var.name));Here we need an error specifically for "this". Something like: can't reference "this" before chaining up, or something like that.::: vala/valamemberaccess.vala@@ +924,3 @@ if (local != null) { collection.add (local);+ } else if (param != null && (param.direction == ParameterDirection.OUT || param.name == "this" && param.parent_node is CreationMethod && ((CreationMethod)param.parent_node).chain_up)) {What if you use parent_symbol instead of parent_node?::: vala/valamethodcall.vala@@ +801,3 @@+ var this_parameter = call.symbol_reference as Parameter;+ if (this_parameter == null) {+ var stmt = parent_statement;You should be able to do (Block) parent_statement.parent_node; here. That I know, Block is the only container of statements.CreatedReport error when using this before before chain-upAddressed the mentioned issues:- Change error message to something more meaningful- use parent_symbol, no need to set parent_node for this_parameter- cast directly to BlockReview of:It seems you attached the same patch as before.Also, the patch seems to introduce a regression for structs:public struct Foo { int i; public Foo () { this.bar(); i=2; } public Foo.bar () { }}void main () {}With the patch it errors out, but it shouldn't.CreatedReport error when using this before before chain-upMy bad, here is the correct version. With this patch I could not reproduce the error you found. However, I found another bug related to fixing this one:struct Foo { public Foo () {} public Foo.foo () {} public Foo.bar () { this (); this (); this.foo (); }}Compiles without errors on master. The fix formight be related. There 'is_chainup' was added in order to only consider CreationMethods as chain-ups.Also currently my patch breaks Object chain-ups because is_chainup returns false for Object() calls.CreatedReport error when using this before before chain-upI was wrong in that the previous patch did indeed introduce a regression. Since chain-ups to named constructors of struct are replaced by ObjectCreationExpressions, those were not found in the MethodCall.get_defined_variables.What's now left are:- this() chain-up in structs: the semantic analyzer needs to find those as well.- Object() chain-up: not sure how I could find that from is_chainup. I'm not in the semantic analyzer pass anymore so I can't just compare with analyzer.object_type.this() chain up in structs work, what's the problem? this.foo() doesn't work, so don't bother about that now.Object(): CodeContext.get().analyzerAh sorry, I meant the flow check for this() chain-up in structs. this() for structs is not recorded with chain_up = true and so no error is reported for the following:public struct Foo { int i; public Foo () {} public Foo.foo () { i = 1; this (); }}void main () {}CreatedReport error when using this before before chain-upMake is_chainup recognize Object()Your new patch doesn't change is_chainup.CreatedReport error when using this before before chain-upRight, something went wrong with git format-patch. This should be the correct patch.CreatedReport error when using this before before chain-upChanges in this patch:* Changed the way check() looks for chain-ups. Should also fix.* is_chainup is now a property set by check(); also added a property 'struct_chainup' to ObjectCreationExpression as struct invocations are transformed.* Made sure lambda expressions in CreationMethods define 'this'Review of:Thanks for the patch. However, lambda expression do not define "this", but use "this".The following must be an error:class Foo : Object { int i; Foo () { SourceFunc foo = () => { return i++ == 0;}; base(); }}The following is fine:class Foo : Object { int i; Foo () { base(); SourceFunc foo = () => { return i++ == 0;}; }}Other than that, the patch looks fine overall.Lambdas at a whole must be threaten like any other "this" usage.Notice that lambdas may or may not capture "this". They use "this" only if "this" is captured, i.e. when the lambda is a closure.CreatedReport error when using this before before chain-up* don't define 'this' parameter, add to used variables of lambdaexpression.* Create new 'this' parameter for the generated method so we don't reference the creation methodFixesReview of:Thanks for the patch. Anyway, did you ever try using lambdas in creation methods? This must work:public class Bar { public Bar () { SourceFunc f = () => { return true; }; }}void main () {}::: vala/valaflowanalyzer.vala@@ +418,3 @@ // parameter+ if (used_var.name == "this") {+ Report.error (used_var.source_reference, "can't reference `this' before chaining up");Please issue a warning here, "possible reference to `this' before chaining up".@@ +454,3 @@ // parameter+ if (var_symbol.name == "this") {+ Report.error (node.source_reference, "can't reference `this' before chaining up");Warning here.::: vala/valalambdaexpression.vala@@ +255,3 @@+ if (captures_creation_method) {+ Symbol sym = (Block)parent_statement.parent_node;+ do {Is this necessary for this patch to work? And why?CreatedImprove constructor chain-up checksI decided to work on this once more and I think it is complete now. I split the changes into smaller patches to make them easier to understand.CreatedWarn when using this before chain upCreatedMake lambdas work in chain ups againCreatedAllow 'static' lambdas before chain upCreatedTest cases for valid/invalid chainupsThought I'd also share the test cases I used. With all patches applied, all tests should pass. Also contains negative tests (those must fail) so I can't add them to the official tests.Missing negative test cases in our compiler is very bad. Hope I can work on it soon. It's not trivial due to performance bottlenecks when using make check.Thanks for the patches will look at them.The following code says there are multiple constructor calls:class Foo : Object { public Foo () { var a = 2+3 == 5; if (a) { Object(); } else { Object(); } }}void main () {}It's the last standing in valamethodcall.vala---The following code must warn, because if the method is marked to chain up, it must chain up always:class Foo : Object { public Foo () { var a = 2+3 == 5; if (a) { Object(); } }}void main () {}This is fixable in the flowanalyzer, similar to out parameters by checking at the end of the method that "this" is being defined.To point it out, you are doing a really *great* work. Sorry for rejecting the patches as needs-work, however I'd like to fix this once for all and not think about it once again.CreatedAllow multiple chain-up calls in the constructorOk, how about this? I had the concern that this would allow reassignment to 'this', for example:class Foo : Object { public Foo () Object (); if (2 == 2) { Object(); // maybe already init'd } }}So I added a warning in cases like this. Another possibility is to unref 'this' before chainup (if not NULL).A warning is fine. We cannot first create then unref, as constructors may have side effects.Just saw that my 4th patch introduces a bug in combination with generics, will have to look at it later.CreatedAlso track instance access when using generic typesThis should fix the last bug. Variables with generic types implicitly need instance access in order to call the destroy/dup functions of the type parameter.Right. Good catch, will review.Review of:I'm not able to udnerstand the need of this patch, can you provide a quick test case of when is this needed?Ok, this is what I came up with. I guess it is a rather uncommon case but still:public class Test<G> : Object { public Test () { SourceFunc f = () => { G a = null; G b = a; return true; }; f (); Object (); } static void main () { }}In the generated function you can see that generic dup/free functions are accessed which require self to be initialized.Actually the example compiles just fine as 'a' is null. A better example would involve capturing a generic variable/parameter, which is prevented by.Comment onImprove constructor chain-up checkscommitAuthor: Simon Werbeck <>Date: Wed Nov 26 11:53:31 2014 +0100 Improve constructor chain-up checksIf this should be fixed by calling first base constructors, as should be, this should not be a bug but a programming error, following GObject construction rules. At the end Vala code is GObject, then you should know very well how it is working in order to avoid object construction errors.Set is as non-bug. Feel free to create a new one as enhancement on GObject construction checks, but tagged for Vala 2.0.Please this open.Please leave this open.(In reply to Daniel Espinosa from)This bug has significant work done on it. Maybe it is not a "bug" because you argue it is programmer error, but it is certainly an "enhancement" and with several patches being submitted. To close this report and ask for a new submission is counter-productive.I have looked over this recently and the comments suggest it is close to completion. It may also serve as a useful example of using the flow analyzer in Vala.has a zip file of test cases, both pass and fail. What would be really helpful would be to change those zipped tests into a patch that can be applied to /tests in Vala.The patches are staged here for some time.	48.0	id=713530	13	True	True	jim	1
id=757803	REOPENED	nautilus	Path Bar	3.18.x	Other Linux	High major	Nautilus Maintainers	2015-11-09 08:56 UTC by	Sunny Wong	2015-12-08 09:56 UTC (	2 users	Hi,this is a repost ofI couldn't reset the status to 'NEW' as requested so I decided to repost it. If this isn't the right way, it would be nice if you can reopen the referenced report with the correct status.That said, here are the steps ro reproduce and the stack trace:Steps to reproduce:- Open nautilus (Files) - Press [ctrl] + [L] and enter a slash [/]- hit [Enter] Key (Root directory will be displayed)- Press the keys [e][t][c] (like you would search for the directory)- the moment the first folder appears hit [enter]Stack trace:Program received signal SIGSEGV, Segmentation fault.0x00007ffff4fab338 in g_bit_lock () from /usr/lib/libglib-2.0.so.0(gdb) thread apply all btThanks for looking into it.	Thanks for taking the time to report this.Unfortunately, that stack trace is missing some elements that will help a lot to solve the problem, so it will be hard for the developers to fix that crash. Can you get us a stack trace with debugging symbols? Please seefor more information on how to do so and reopen this bug report. Thanks in advance!That's still an easy and can be reproduced on 3.18.2 stock using the instruction theresimilar reports on fedora onor Ubuntu onBacktrace from 3.18.1"#0 g_bit_lock (address=address@entry=0x20, lock_bit=lock_bit@entry=0) at gbitlock.c:214No locals.valgrind points an invalid read in nautilus_files_view_reset_view_menu()" view_action_group = nautilus_files_view_get_action_group (view); gtk_widget_set_visible (view->details->visible_columns, g_action_group_has_action (view_action_group, "visible-columns")); enable_sort = g_action_group_get_action_enabled (view_action_group, "sort"); show_sort_trash = show_sort_search = show_sort_modification = show_sort_access = FALSE; gtk_widget_set_visible (view->details->sort_menu, enable_sort); if (enable_sort) { variant = g_action_group_get_action_state_hint (view_action_group, "sort"); g_variant_iter_init (&iter, variant);"the g_variant_iter_init() line	3.0	id=757803	9	True	True	csoriano	1
id=109640	REOPENED	gnome-panel	workspace switcher	2.2.x	Other Linux	High normal	Panel Maintainers	2003-03-31 19:27 UTC by	Daniel Silverstone	2013-10-18 19:18 UTC (	5 users	Working with the gnome-panel workspace switcher is proving very frustratingfor me. Every time I load it up, it reverts to one row of workspaces, eventhough I repeatedly configure it to have 2.It appears that the 'set' call is getting to the gconfd-2 process, and fromthence to the filesystem (via whatever other stuff) and it being setproperly. However, if I quit and reload the applet, it reverts to one row.(This applies to log out/in also)It seems that it is being given a different UID for use in the/apps/panel/profiles/default/applets/.... namespace every time it is run.This seems rather wrong.I did my best to trace it, but got lost as the source of this key passedinto Bonobo (I don't yet understand bonobo enough to trace it further)Hopefully this is enough information for you to reproduce this. If there'sanything I can get for you, strace's ltrace's etc, let me know	Umm, it's version 2.2.1 of the panel (Debian package 2.2.1-1) (if thathelps at all)Ouch, does this happen for all applets ? e.g. if you change somepreferences for the clock applet and log out and back in again are youreverted back to the defaults ?The clock manages to retain settings across a login/logout, but if Iremove the clock from the panel and re-add it, it loses its settings.I'm just writing this comment to note that version 2.2.2-1 didn't fixthe issue, and it is really quite an urgent issue because I can'texpect to log into my machine and be able to use it without lots offiddling first.I could not simulate this problem. Just re-stating the steps so thati just got the problem right :)a) add workspace switcher to the panel.b) set the num of rows to 2c) logout and logind) the num of rows of the switcher is 1Is this right ?Well, perhaps simpler..1) open workspace switcher panel applet2) preferences3) set rows to 24) close preferences5) quit switcher applet6) open workspace switcher applet**Now you'll be back to one row**If it makes a difference, I have 10 workspaces, and they've all got names.Applets are per instance configurable. ie when multiple instances of the same applet exist, each of them can be configured differently.In the case of workspace switcher,the preferences can be classified asa) configure the number of workspaces and the names of the desktop. This data is not specific per instance. They are per displayb) configure the applet itself.ie how you would want your applet to appear on the panel. The number of rows,show only current workspace,show workspace names are per instance.***has been marked as a duplicate of this bug. ***a typo above.s/names of desktop/names of workspacesWell that's a bug in the classification of the row-count informationas a per-instance configurable then.It is plainly a global configuration option because it affects thenavigation around my workspaces.I have two rows of five workspaces. The top row labelled"email,irc,web,editor,misc" and the lower row labelled "below email,below irc......" This plainly makes no sense if the workspaces end upin a long line rather than as two rows.Now if that configuration goes away if I open the workspace switcherapplet again (or for that matter log out/back-in) then it's plainlylosing configuration which shouldn't be lost.What happens to how my desktop navigation works, if I have twoinstances of the switcher open with different row counts in each?Daniel: I understand your problem. But your are confusing things herea bit :)Does your workspace applet change settings after login and logout ?If you meant, "I add the applet, change prefs,remove the applet,logout, login, add the applet again,my prefs are gone", well, it's the same thing as removing the applet and adding itback again without logging out.However, on logging out if you had the applet on the panel with yourpreferences and then on logging in you see that the applet prefs arechanged for that instance, that's a bug.Calum,Seth,Mark: "setting row count global", your thoughts ?I've just tested it, and it seems that if I leave a switcher on thepanel and log out/in then it retains the two-rows setting.Sorry for muddying the waters with that.As a comment, having 'global row count' means that that value doesneed to be applied on login (however you do that) so that as Inavigate workspaces with the keyboard I get the rows as I want.Daniel: thanks for clarifying.ClosingArvind: I feel that closing with 'Not a bug' is kinda premature. Weneed to actually clarify the issue here.When I configure a workspace switcher applet to have two rows, itsignals to the windowmanager so that ctrl+alt+arrows move me aroundtwo rows of desktops.When I quit the applet, it doesn't reconfigure the window manager tohave only one row of desktops (as it was before the applet was loaded)If I log out/log in, then I only have one row of desktops (unless Ihave a 2-row applet installed on my panel wasting space all the time)I have a laptop, my laptop has limited screen real-estate -- I cannotwaste the room on the panel needed for a switcher applet because of myreduced screen resolution and the fact that I can't get the menu panelto auto-hide.Also, consider the following scenario:You have one workspace switcher open, you configure it to be two rows,your window manager agrees.Then you open another switcher applet, which configures itself (bydefault to one row) -- now what should your window manager do? Obeythe two-row configuration of the first applet, or the one-row of thesecond?Given this, it seems quite plain that any configuration item which soblatantly affects things outside of the applet instance's scope shouldbe shared between all instances, and more importantly, should besomething which gets remembered by everything affected by it.If this is actually a bug that metacity isn't remembering how manydesktops it was configured to have, then reassign the bug over tometacity, but don't just close it please.Daniel: okay, let me summarize what's left here, do correct if theyare off target.a) row details are not remembered on adding a new instance.(ie if it was changed by the user previously for another instance)b) when there are 2 pagers with different row combinations, metacity respects the row combination of the former while navigating workspaces through keyboard.(atleast that's what I see on my desktop)For (b) please file a bug against metacity. Havoc will surely let youknow his views.For (a), honestly, I don't have an opinion at the moment.Updating the summary to reflect the scope of this bug and reducing the priority.I'm reducing the severity. There is an obvious work-around.For me this comes down to the problem that as is currentlydesigned, the workspace layout is defined by the currentpager configuration rather than making the workspace layoutconfiguration a global setting and making the pager displaythe workspace layout according to the _NET_DESKTOP_LAYOUThint which would be Metacity.Its the only thing that makes sense to me. Havoc, what doyou think ?This is a window manager spec issue. Right now the layout comes fromthe pager, as the pager is the only thing that cares (the layout is purely a visual thing).My take on this bug is that it will be fixed when we close that other bug about taking the values for new applet instances from the last applet instance. i.e. add/remove of an applet shouldnot lose the applet prefs. I seem to remember a bug about that.Yeah, I'd imagine fixing the generic applet defaults bug would lessenthe effect of this bug but ...I don't understand why you think its "purely a visual thing". If Ihave a 2x2 grid of workspaces, switching between them without usingthe pager is completely different depending on the layout. i.e. thepager isn't the only place which cares about the layout - the windowmanager cares too for switching with the keyboard ...Yeah, that's true.I don't remember the wm-spec-list conversation in any detail.In any case, it's fairly hard to change at this point.Just because it's hard to change, doesn't mean we shouldn't. Ifthere's no chance of this being done before 2.4, then it *MUST* bescheduled for 2.5/2.6 -- this is a severe design issue and it's wrongto leave it uncorrected.There's no scheduling, this is an open source project.Things happen when they reach the top of the personal priority queue of an individual contributor.If you want to be sure it happens, become an individual contributorand put this at the top of your queue. ;-)Okay, so what we could do is move the "num_rows" key to metacity andmake the WM the owner of the selection. Then make the pager not display or change the preference if it doesn'town the selection.And finally, make sure the pager works okay even when it doesn't ownthe selection (i.e. it shows the layout from the property).I think the only issue we'll have is how to migrate the preference -but you could just release note it.yeah, a release-note would do. People would more than likely go "Oh,it forgot my preferences again, how irritating" then set it, and neverhave to worry again.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Mass changing: milestone 2.12.x => milestone 2.14.x***has been marked as a duplicate of this bug. ***	27.0	id=109640	18	True	True	dsilvers	1
id=778025	REOPENED	geary	client	master	Other Linux	High normal	Geary Maintainers	2017-02-01 13:00 UTC by	Michael Gratton	2017-02-23 04:33 UTC (	0 users	There's still some weirdness with the preferred height for web views after both the GTK/WK2 ports landed. Here's all the cases I know of right now: - Conversation message body is sometimes way too big - Conversation message body doesn't contract when content shrinks (e.g. when an image is loaded and it turns out to be smaller than the HTML thought) - May still being getting crashes for very long messagesSee also.	Just pushed commit d6ed3e to master that will help if not fix completely the problem.I haven't seen any further issues with the content height since pushing that, so closing this as fixed.Ugh, so of course as soon as I close this I get a "short message with way too big a height" showing up...	3.0	id=778025	11	True	False	mike	1
id=619014	REOPENED	f-spot	General	GIT	Other Linux	High normal	Paul Wellner Bou	2010-05-18 18:33 UTC by	Ruben Vermeersch	2010-07-13 14:03 UTC (	1 user	CopyRecursive needs improving:* Exceptions are only meant as an exceptional failure notifier (they have horrible performance). So the answer to the TODO is: check for directory.* I get critical GIO warnings (just enabled stack dumping of them)* Progress reporting is probably wrong, but I'm not sure if you can easily improve on it, except for walking the whole tree first (that would be the right solution, walk the tree and count the number of files, then walk again and copy them).* Log.Debug (String.Format (Catalog.GetString("Copying {0} -> {1}"), source_file.Path, target_file.Path)); this can be: Log.Debug (Catalog.GetString("Copying {0} -> {1}"), source_file.Path, target_file.Path); Log.Debug supports parameters.	CreatedAvoid use of exceptions, fix directory type comparisonCreatedFix critical GLib warning regarding canncellableProgress reporting (and the correct use of cancellable) should be fixed in FolderExport.The following fixes have been pushed:53bf478 Fix critical GLib warning regarding canncellable57f4a55 Avoid use of exceptions, fix directory type comparisonThanks for cleaning this up! One last notice: you can use extension methods asmember methods instead of static methods. So instead of: CopyRecursivei (source_file, target_file ...)You can write: source_file.CopyRecursive (target_file ...)Which is a bit nicer on the eye :-).CreatedFix critical GLib warning regarding canncellableCreatedAvoid use of exceptions, fix directory type comparisonOkay that didn't work out as planned, for some reason git-bz added new patches instead of marking the old ones as committed. Sorry for the noise!Reopening, progress reporting isn't right yet, we need something smarter. It currently reports progress for files, but that means we get non-monotonic reporting:Suppose we have two files A and B. It would report something like:(A) 33%(A) 66%(A) 100%(B) 33%(B) 66%(B) 100%What we really want is:(Starting) 0%(A done) 50%(B done) 100%That would require walking the directory first :-)========================================================Also, cancellable doesn't really work correctly: if I use the supplied cancellable to abort the copy, it won't really stop copying, it'll just abort some of the operations but still walk through the entire tree.It's probably better if you pass each of the suboperations a null cancellable and check the status of the cancellable inside CopyRecursive, breaking out of the loop / methods when cancelled. This is what I think causes the GIO errors, passing null should be allowed.CreatedUse CopyRecursive as extension methodComment onUse CopyRecursive as extension methodpushed as- Use CopyRecursive as extension methodI passed null as cancellable before, in the first call of CopyRecursive inFolderExport.cs. So null seems to cause the GLib warnings.But you're right, I should check if cancellable was cancelled and about thewalk through the tree. (But then we should add a Cancel button to theThreadProgressDialog.)To cancel it, may be we should use CopyAsync?CreatedMore cleanups and clearer dialog messagesCreatedNo need to check result as if result is false, an exception will be thrown before.CreatedMore cleanup, use Log.Debug and consistent dialog messagesReview of:Looks good, but please don't mark debug messages as translatable. They're not user visible anyway (and I don't want to be debugging chinese messages ;-)). We don't want to give our translators more work than needed.Review of:Looks good.Review of:Looks goodCreatedDon't mark debug output as translatable, logging errors to Log.ErrorCreatedCleanup, consistent debug and dialog messages, debug/error outputCreateddialog messages and clean upCreatedNo need to check result as if result is false, an exception will be thrown before.CreatedCleanup, consistent debug and dialog messages, debug/error outputpushed as- dialog messages and clean uppushed as- No need to check result as if result is false, an exception will be thrown before.pushed as- Cleanup, consistent debug and dialog messages, debug/error outputThanks!	23.0	id=619014	24	True	False	ruben	1
id=52225	REOPENED	libwnck	general	git master	Other other	High normal	libwnck maintainers	2001-03-17 19:29 UTC by		2007-11-10 15:20 UTC (	9 users	Package: gnome-coreSeverity: normalVersion: 1.3.0Synopsis: tasklist applet sortingBugzilla-Product: gnome-coreBugzilla-Component: tasklistDescription:The tasklist applet currently sorts by the name of the task. This is highly unintuitive,since I expect the tasklist to act like a stack. There should be an option to choosehow the tasklist sorts the tasks:- No sorting (act like a stack)- Sort by task nameI think this can be independent of grouping.------- Bug moved to this database by2001-03-17 14:29 -------The original reporter () of this bug does not have an account here.Reassigning to the exporter,.Reassigning to the default owner of the component,.	As people might also want a sorted list, the user should be able toselect whether or not the list is sorted or not.-> gnome-panelOkay, so they're sorted in libwnck, so we yould need the option there.Moving to libwnck because havoc is better at coming up with reasonswhy options like this are a bad idea :-)I originally intended it to work like a stack (the order that wnck_screen_get_windows() returns the windows will make it work this way). It's currently sorted in an arbitrary but fixed order, the only feature of the current order is that windows in the same app appear next to each other, and the order does not change over time.I don't think it should be an option, it should just be whatever user-tests best, or whatever Windows does, or some other reasonabledefault. To make it an option we'd need evidence that for some subset of users the default is significantly problematic or less goodthan an alternative.UI team input welcome.Any UI team input?***has been marked as a duplicate of this bug. ***#86185 has additional suggestions to look atOh, I like the suggestion on #86185 (group by workspace, and bystartup-time within a workspace). Unlike other suggestions, it is:a) not configurable (which in my mind is a bonus; making itconfigurable sounds to me like treating the symptoms, not the problemitself) b) simply, visibly mapped to a familiar concrete concept (workspaces) For whatever my blessing is worth, I give it for this idea. If you'dlike, Havoc, make a patch to have the task list work like this, andI'll run it through my testing lab at Ximian.Yeah, I kind of like the sound of that too. IIRC the Windoze tasklist orders from left-right (or top-bottom) in the order that windowswere opened as well... of course it doesn't have workspaces so I can'tcomment on how it handles those :)***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***See also.It looks like all dups are asking for order of creation as well, FWIW.is a little different in that it requests allow users to be able toeasily move the tasks around in the list (similar to tab reordering in epiphany).***has been marked as a duplicate of this bug. ***It may be worth considering using most-recently-used ordering (which can beaccomplished via the _NET_WM_USER_TIME property).Advantages: - It would also the current buggy grouping method to be disposed of and replaced by grouping the LRU (least recently used) windows. (See also) - It allows the user to be able to know exactly how many times they have to hit tab with the alt-tab popup to change to a given window - New windows with DEMANDS_ATTENTION set would be first in the tasklist, making them easier to notice (since DEMANDS_ATTENTION windows always appear at the front)Possible Disadvantage: - The tasklist order would by dynamic instead of static.Either way, both ordered-by-launch-time and ordered-by-most-recently-used timewould be a lot better than the current method.Federico pointed out the following on desktop-devel-list: A well-known Windows developer says they considered an MRU order for the Windows task bar, but people found it confusing that the order changed:So, perhaps my idea wasn't so great after all. :/ I guess that leavesordered-by-launch-time...Order by launch time shouldn't need to use USER_TIME because one of the lists ofwindows set on the root window by the WM is defined to be in map order IIRC.Yeah, you're right. _NET_CLIENT_LIST is defined to have initial mapping orderaccording to the EWMH. Cool.Hello all,Is there a patch which can be applied for the mentioned issue? I cannot find it.Can you please provide me a link?Thank you very much.No. As far as I know, no patch for this exists. (It certainly isn't referencedin this bug anyway.)Changing versionWow, no wonder everyone kept requesting this. I just coded it up, and it'sreally nice. :)My patch doesn't try to fix window grouping (as far as I'm concerned, it'sunfixable; there's tons of bugs on it and I don't even know anything that soundslike sane behavior), so I just punt and group windows the same as currently (andturn off grouping on my machine, as always).There is one thing that needs mentioning and fixing besides just mapping order,though. Current, libwnck sets things up in two rows (if possible), and orderswindows from left to right on the first row and then left to right on thesecond. Thus, we get an order like this: a b c d e fBut this sucks because new windows are added to a new column, which results inbig reshuffling. In this example, if we add a new window, the location of dchanges drastically: a b c d e f gSo, I instead order things like this: a c e b d fAnd when a new window is added, we get: a c e g b d fSince things go by mapping order (with the patch), one knows exactly where eachwindow in the tasklist is and can remember it instead of searching for it. Anyway, I'll attach the patch in a minute.CreatedFix ordering of windows in tasklistComment onFix ordering of windows in tasklistg_list_position (window_list, + g_list_find (window_list, task1->window));seems pretty crazy-slow to have in a sort function that could be called overand over.pos1 == pos2 is more of a g_assert (pos1 != pos2) type thing isn't it?Looks fine otherwise. Maybe WnckScreen could just store a sort key in theWnckWindow... ? this should be a pretty simple matter of ensuring each newwindow appended has a key higher than the previous window right?Createdstore a sort key in the WnckWindowWow, I didn't know wnck_task_compare was called so many times. For somereason, I was thinking that it would only be called when a new window wascreated or destroyed (I forgot about window grouping and so I figured that'd bethe only need to rearrange the tasks in the list), and was surprised to see itcalled upon something as simple as a focus change. So, yeah, this patch getsrid of the list searches.So, now windows are created with a sort key and that sort key is justincremented with each new window. The only trick is that I need new windowsadded in mapping order instead of stacking order (which required several smallchanges in update_client_list) so that if wnck-applet crashes and is restartedthen the task order doesn't change. This is probably not really that importantfor most users since it shouldn't crash, but is nice for those who might wantto write patches for libwnck or gnome-panel and thus manually restart them. ;-)Also, pos1 == pos2 wasn't more of a g_assert (pos1 != pos2) type thing. It canand will happen whenever the user has two applications that are starting up buthaven't been mapped yet. Since you asked about it, though, I added aclarifying comment in this version of the patch.Comment onstore a sort key in the WnckWindowLooks good to me.committed.***has been marked as a duplicate of this bug. ***Sorry for raising old issues, but I don't like the current method of sorting according to lunch time - its slightly better then arbitrary sorting, but not by much. I would really love to see a workspace grouping like suggested inand. I apologize ahead of time for mentioning forbidden words in the GNOME bugzilla, but my previous desktop was KDE which orders the task list just like that - order by workspace and lunch time in each workspace group. I understand that many people don't use "show windows from all workspaces", but with that setting enabled order by lunch time alone is very confusing - much more confusing then inserting new tasks in the middle. A simple example of the problem is like this: I usually put windows on workspaces according to the task they are used for (I understand this method is quite common) all mail goes on workspace 1, web is on 4, 3 is for terminals, 2 is for development and 5 is for office documents. File browsing and miscellaneous stuff usually go on workspace 6 but sometimes on other workspaces. Use case 1 deals with having a lot of short lived windows - I start working on a new email (or a few - I sometimes have more then one mail composer open, started at different times) it goes on workspace 1 but its task list entry could be anywhere. I usually have several new windows open to deal with a new email - file browsers, documents, maybe an image viewer/editor or few - its a real problem when I have several composers open and when I want to jump to one of them I have to scan the entire task list (usually with many similar icons) instead of focusing in one region where I know all my composers are (unlike looking for things on the workspace, I know where workspace 1 is, I don't need to look). The case with file browser windows that can be on any workspace is even more problematic - a file browser is on a specific workspace (and not the last) because its related to some task I'm doing on that workspace, so a file browser used to find something to attach to an email will usually be on the first workspace, but the task list doesn't hint at that - its just one file browser of many on the task bar and I have no idea where to look for.Use case 2 deals with long running applications: I always have one long running application to fulfill any of the 4 major tasks - email, development, terminal and web. If the tasks list was ordered by workspace, I would know immediately where about I would find my long running application: Evolution would be the most to the left, and Firefox would be the most to the right. But because these applications crash from time to time (especially Evolution and Firefox) and need to be restarted, the lunch time ordering of the task list shuffles them all over the place.I understand that there are several people that like lunch time based ordering, because it fits better with stack based task management (new tasks need to be completed before old tasks can be resumed), but such ordering wrecks havoc (no pun intended) with spatial based task management (several tasks are being worked on at any single time and workspaces are used to arrange tasks). For this specific feature I think that the approach of choosing a sane default and preventing customization fails because different people work best using different methodologies and optimizing the task list for one methodology to the detriment of other methodologies is not the right thing to do.Specifically for me, I don't mind if the customization is only available as a gconf setting, or even a different task list applet that needs to be installed instead of the default one - because I wouldn't mind doing that to get a much better (for me) behavior, but I think that adding another checkbox under the "show windows from all workspaces" radio button in the task list preference dialog (that is of course disabled until "all workspaces" is selected) wouldn't be much of a problem usability wise.(In reply to)Don't we have a separate open bug for that somewhere? I had intended that we implement that part at some point too, but thought we had a separate bug for it somewhere...Could someone do a search, and then feel free to reopen this bug if there isn't such a bug?I did search for it - that was, which was closed as a duplicate of this one.***has been marked as a duplicate of this bug. ***	33.0	id=52225	42	True	False	nicolas	1
id=584284	REOPENED	glib	gio	2.21.x	Other Linux	High normal	Allison Lortie (desrt)	2009-05-30 13:53 UTC by	Paul Pogonyshev	2012-09-16 17:25 UTC (	5 users	I just tried to wrap the function in PyGObject and in unit tests noticed the utterly confusing difference between sync and async versions. While first "eats" the stopping character out of stream (i.e. advances pointer past it), asynchronous version _doesn't_. I believe this is so confusing and just wrong (e.g. if you change your program from using synchronous to asynchronous version you need to adjust result handling), that it must be fixed even though this will break backwards compatibility.A little code from unit tests (I don't attach full code since the wrappers themselves are not pushed into the repository yet): self.assertEquals('sentence', self.data_stream.read_until('.!?')) self.assertEquals('end of line', self.data_stream.read_until('\n\r')) ... self.assertEquals('sentence', do_read_until_async('.!?')) self.assertEquals('.end of line', do_read_until_async('\n\r')) ^^^Note that in the first (synchronous) test dot (first stop character) is eaten out of the stream and so doesn't get into the second result. In the second test dot is not eaten and so appears in the second result.	I forgot to mention that in both tests the contents of the stream is 'sentence.end of line\nthe rest'.Python wrappers and unit tests are attached to. Python can be used to easily to test the described behavior.i wrote the _async version after the synchronous one already existed, so it's my fault that they are functionally different.on the other hand, the existing documentation for the synchronous function suggests that the _async() version does the right thing. specifically: there is absolutely no mention of the stop characters being consumed or 'skipped'.i agree that this should be resolved. i'm not certain which way to resolve it.Well, a change in the sync version would be a more significant compatibility break, since the function itself is older and because (just guessing) synchronous functions are more widely used.In either case, this should be done "now or never". The longer the problem remains unadressed, the larger the compatibility break will be.Createdchange the async versionfor what it's worth, here's an (untested) patch that changes the async version.i'm going to write to the ML for opinions. i don't feel comfortable breaking API without some backup.probably a change to the docs should also go in.CreatedpatchReview of:yes. this is pretty much exactly what i had in mind.missing gtk-doc symbol additions, plus small fusses noted.i'll update the patch accordingly.::: gio/gdatainputstream.c@@ +835,3 @@ { for (i = 0; checked < available && i < peeked; i++)+ stop_end = stop_chars + stop_chars_len;may as well lift this to save the compiler the trouble...@@ +862,3 @@+ *+ * function consumes the stop character (and does not return it).+ * Note that in contrast to g_data_input_stream_read_upto(), thisa note about future deprecation would be nice@@ +889,2 @@ checked = 0;+ while ((found_pos = scan_for_chars (stream, &checked, stop_chars, strlen (stop_chars))) == -1)strlen(stop_chars) here is scary.perhaps read_until() should be implemented by calling read_upto() and then consuming the separator character if it was found...@@ +1188,1 @@ g_return_if_fail (cancellable == NULL || G_IS_CANCELLABLE (cancellable));read_until_async should have pending-deprecation note too.Created[PATCH] Add g_data_input_stream_read_upto{,async,finish}I think this is OK.looks ok to mepunting to 2.26Ryan, Any news on this?Ya. This should have gone in ages ago.This change added a documentation comment that g_data_input_stream_read_until() should not be used and would be deprecated in a future version. I guess we've again missed the time to do that, but shouldn't we keep this bug open so we don't forget to do that?Sound good	14.0	id=630209	40	True	False	mmmasterluke	1
id=630209	REOPENED	banshee	Device - iPod	1.8.0	Other Linux	High normal	Banshee Maintainers	2010-09-20 22:05 UTC by	Carlos Moffat	2013-02-27 12:21 UTC (	15 users	Hi,I'm not sure if this is a libgpod or a banshee bug, but it seems like it'd be good to keep track of it here.The issue is that although I can successfully sync my ipod, podcasts show up in the main music library, not the podcast library, in the iPod. When I disconnect the iPod and connect it again, both programs show an empty podcast sections and the podcast files show up (as in the ipod) in the main music library.I'm using an updated version of libgpod (0.7.94) from the banshee-daily PPA, but I tried to downgrade to the version available in lucid (0.7.93) and got the same results with gtkpod. Three additional details:- to get aroundI'm using a patched version of libgpod-sharp (the patch is in this bug report)- this happens with gtkpod too- this problem is reported here too:Thanks.	I think this commit is likely to improve this situation.Hi David,I just compiled banshee and libgpod from git. The podcast now show up in the Podcast playlist in Banshee when I sync, but they still show up in the main music library in my ipod.Can we mark this bug confirmed?This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.This commit adds correct metadata corrections for supported iPod categories.Hi David,Thanks. I'll wait for the next version, although the patch you mention is already in the git version I compiled, which did not solve the problem.Best.My apologies, I misread your comment as confirmation of this being fixed. Manhandling Bugzilla back into its prior state.Bumping the importance on this. I didn't see it getting reopened so I thought this was fixed for 1.8.0. Whoops. We'll try get this fixed asap.Hi,Can we change the status of this bug to 'confirmed'?I'm having the same problem with Banshee 1.7.6 and an ipod 5g (16gb, blue). I'm running Ubuntu 10.10 with libgpod4 (0.7.95-1).looks very similar to this and has lots of debugging output.***has been marked as a duplicate of this bug. ***Could the affected parties please provide the information as requested on the following page?***has been marked as a duplicate of this bug. ***CreatedBanshee LogHi David,In my case, iPod Nano, Blue, 5th Generation (previous to the latest one)S/N YM02854272XModel: MC066LLFirmware: 1.0.2I'm attaching the rest.CheersCreatedgvfs-mount -list outputCreatedudevadm info --export-db outputThis works for me on my iPhone with banshee from git master and from what I recall it should also work with 1.8.0. Can you try the 1.8.0 release to verify that everything is ok with your device? If it works fine for you, could you mark this bug as resolved/closed? Otherwise, let me know :)Thanks!Hi Alan, I'have a 3rd generation iPod Touch (with iOS 4.1): podcasts and music are seen under Video section.Hi Alan,Sorry for the delay in answering.I am now using 1.8.0 from Ubuntu 10.10. The problem still persists in that version. all the best.Hi Alan,Just to add, this is the output when I connect the iPod and try to sync. Sometimes (like this one) old podcasts are not deleted from the Ipod, even though I have set 'sync entire library' and the podcasts in question are no longer in my library.[2 Debug 08:16:54.924] Refreshing any podcasts that haven't been updated in over an hour[3 Info 08:16:55.064] AppleDeviceSource is ignoring unmounted volume 107 GB Filesystem[3 Warn 08:16:55.110] Caught an exception - System.InvalidOperationException: Operation is not valid due to the current state of the object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceSource.DeviceInitialize (IDevice device) [0x0022e] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceSource.cs:118 at Banshee.Dap.DapService.FindDeviceSource (IDevice device) [0x00025] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap/Banshee.Dap/DapService.cs:162 [4 Debug 08:16:55.888] DAAP Proxy listening for connections on port 8089[1 Debug 08:16:55.933] Finished - Startup Job[3 Debug 08:16:57.376] Found DAP support (Banshee.Dap.AppleDevice.AppleDeviceSource) for device TocaDiscos and Uuid /devices/pci0000:00/0000:00:1d.7/usb1/1-2/1-2:1.0/host6/target6:0:0/6:0:0:0/block/sdb/sdb1** (Banshee:8314): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:8314): WARNING **: Unknown smart rule action at 4702310: 2000400. Trying to continue.** (Banshee:8314): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:8314): WARNING **: Unknown smart rule action at 4703622: 2000400. Trying to continue.** (Banshee:8314): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:8314): WARNING **: Unknown smart rule action at 4704938: 2000400. Trying to continue.** (Banshee:8314): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:8314): WARNING **: Unknown smart rule action at 4706248: 2000400. Trying to continue.[5 Warn 08:17:25.720] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [5 Warn 08:17:25.733] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [5 Warn 08:17:25.773] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [5 Warn 08:17:25.816] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [5 Warn 08:17:25.856] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [5 Warn 08:17:25.888] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [5 Warn 08:17:25.919] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /build/buildd/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [6 Debug 08:18:17.762] Starting DAP sync[6 Debug 08:18:18.649] Ending DAP sync[7 Debug 08:18:21.001] Starting AppleDevice sync thread cycle[7 Debug 08:18:21.005] Starting - Syncing iPod** (Banshee:8314): WARNING **: Unknown action type 33555456** (Banshee:8314): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:8314): WARNING **: Unknown action type 33555456** (Banshee:8314): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:8314): WARNING **: Unknown action type 33555456** (Banshee:8314): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:8314): WARNING **: Unknown action type 33555456** (Banshee:8314): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:8314): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failedlibitdbprep: itdb_sqlite_generate_itdbs called with file /media/TOCADISCOS/iPod_Control/iTunes/iTunesCDB and uuid 000A270020A85614itlp directory='/media/TOCADISCOS/iPod_Control/iTunes/iTunes Library.itlp'*.itdb files will be stored in '/media/TOCADISCOS/iPod_Control/iTunes/iTunes Library.itlp'[mk_Dynamic] Processing '/tmp/filekMBcB4/Dynamic.itdb'[mk_Dynamic] creating table structure[mk_Dynamic] - processing 2359 tracks[mk_Dynamic] - processing 4 playlists[mk_Dynamic] done.[mk_Extras] Processing '/tmp/filekMBcB4/Extras.itdb'[mk_Extras] re-building table structure[mk_Extras] done.[mk_Genius] Processing '/tmp/filekMBcB4/Genius.itdb'[mk_Genius] re-building table structure[mk_Genius] done.library_persistent_id = 0x30a276fc8233cc85[mk_Library] Processing '/tmp/filekMBcB4/Library.itdb'[mk_Library] building table structure[mk_Library] compiling SQL statements[mk_Library] - inserting into "version_info"[mk_Library] - inserting into "genre_map"[mk_Library] - inserting songs into "item_to_container"[mk_Library] - inserting playlist 'TocaDiscos' into "container"[mk_Library] - inserting songs into "item_to_container"[mk_Library] - inserting playlist 'Podcasts' into "container"[mk_Library] - inserting songs into "item_to_container"[mk_Library] - inserting playlist 'iPod' into "container"[mk_Library] - inserting songs into "item_to_container"[mk_Library] - inserting playlist 'Unheard' into "container"library_persistent_id = 0x30a276fc8233cc85device name = TocaDiscos[mk_Library] - inserting into "db_info"[mk_Library] - processing 2359 tracks[mk_Library] done.[mk_Locations] Processing '/tmp/filekMBcB4/Locations.itdb'[mk_Locations] re-building table structure[mk_Locations] Processing 2359 tracks...[mk_Locations] done.[run_post_process_commands] Getting SQL post process commands[run_post_process_commands] Running 88 post process commands now[run_post_process_commands] ERROR when executing 'CreateRentalExpiredColumn': duplicate column name: rental_expired[run_post_process_commands] 87 out of 88 post process commands successfully executed[run_post_process_commands] done.itdbprep: copying 'Dynamic.itdb'itdbprep: copying 'Extras.itdb'itdbprep: copying 'Genius.itdb'itdbprep: copying 'Library.itdb'itdbprep: copying 'Locations.itdb'itdbprep: copying 'Locations.itdb.cbk'[7 Info 08:18:29.650] Wrote iPod database[7 Debug 08:18:29.651] Finished - Syncing iPod[7 Debug 08:18:29.653] Ending AppleDevice sync thread cycleThis commit seems to indicate that this specific bug has been addressed:1.8.0 doesn't carry this though, so it would be great if you could try the banshee daily ppa and confirm if it is working correctly.Hi DavidThe daily build hasn't been working with my ipod for a while. I can't even sync music with it. Instead, I tried applying that commit to the version in maverick-updates. No luck, the podcasts went straight to music.to add, I still get a bunch of warnings:[14 Warn 02:04:36.313] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /home/cmoffat/Sandbox/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [14 Warn 02:04:36.326] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /home/cmoffat/Sandbox/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [14 Warn 02:04:36.345] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /home/cmoffat/Sandbox/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [14 Warn 02:04:36.359] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /home/cmoffat/Sandbox/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115 [14 Warn 02:04:36.372] Caught an exception - System.NullReferenceException: Object reference not set to an instance of an object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.LoadFromIpodTrack () [0x00007] in /home/cmoffat/Sandbox/banshee-1.8.0/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:115Hi Again,After a few more tries:- The daily ppa version doesn't work at all, it made a mess of my music & podcast collections in my ipod.- The maverick-updates version with the above commit didn't work. the podcasts *still* show up in the music library, but they don't even play.- The vanilla maverick-updates version has this bug.Weirdly, I had added a few podcasts in iTunes, and in Banshee they show up in the video section. Crazy stuff.Hi Again,Ok, need to correct that last post. I hadn't deleted ~/.config/banshee-1/addins-001 after I installed a new version. When I did that, the daily ppa version worked for music and podcasts, but the podcasts still show up in the music section of the ipod.Bummer.Hello,First, could we marked this bug as confirmed? It seems like there's enough info already.Also, looking at the gpodder source, it looks like those guys set *all* four flags (see Gabriel's patch linked above to see what I'm talking about) instead of just one. I tried (and failed) to do this myself with the Banshee source code, but it didn't work. Maybe that's the problem?Carlos(In reply to)It looks like you've given all of the requested information, and between the duplicates and the 9 people on the CC list, it's probably safe to assume that this is a real problem. ;) Setting the bug to NEW.This is a dupe of fixed*** This bug has been marked as a duplicate of***Gabriel,I'll try git again if needed, but as you can see from my previous comments to this bug, setting Flag4 did not fix the problem for me. Mine is a 5th Generation Nano.It should be fixed in 1.9.0 as well. Yes, please do test 1.9.0 -- it fixed the issue for me and at least one other person.Gabriel,Ok, I will. Although I'm afraid that if we're talking about this patch:I already tried, and didn't work. Cheers.Hi Gabriel,This is the output I get using Ubuntu's daily build from today when I try to sync my podcast library:Starting DAP sync[6 Debug 22:39:38.674] Starting[6 Debug 22:39:39.415] Initialized MediaProfileManager: 0.699398[6 Debug 22:39:39.502] GStreamer pipeline does not run: audioconvert ! novellaacenc bitrate=128000 profile=2 outputformat=0 ! novellqtmux[6 Debug 22:39:39.581] GStreamer pipeline does not run: audioconvert ! xingenc bitrate=128 ! id3v2mux[6 Debug 22:39:39.632] GStreamer pipeline does not run: audioconvert ! fluwmaenc bitrate=64000 vbr=false ! fluasfmux[6 Debug 22:40:00.309] Finished - Adding 5 of 5 to Vitrola[6 Debug 22:40:05.317] Ending DAP sync[7 Debug 22:40:06.723] Starting AppleDevice sync thread cycle[7 Debug 22:40:06.726] Starting - Syncing iPod** (Banshee:10472): CRITICAL **: itdb_cp_track_to_ipod: assertion `filename' failed[7 Warn 22:40:07.497] Cannot save track to iPod - System.NullReferenceException: Object reference not set to an instance of an object (in `libgpod-sharp') at GPod.ITDB.GetLocalPath (GPod.Device device, GPod.Track track) [0x00000] in <filename unknown>:0 at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.CommitToIpod (GPod.ITDB database) [0x00395] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:287 at Banshee.Dap.AppleDevice.AppleDeviceSource.PerformSyncThreadCycle () [0x000a2] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceSource.cs:530 ** (Banshee:10472): CRITICAL **: itdb_cp_track_to_ipod: assertion `filename' failed[7 Warn 22:40:07.500] Cannot save track to iPod - System.NullReferenceException: Object reference not set to an instance of an object (in `libgpod-sharp') at GPod.ITDB.GetLocalPath (GPod.Device device, GPod.Track track) [0x00000] in <filename unknown>:0 at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.CommitToIpod (GPod.ITDB database) [0x00395] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:287 at Banshee.Dap.AppleDevice.AppleDeviceSource.PerformSyncThreadCycle () [0x000a2] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceSource.cs:530 ** (Banshee:10472): CRITICAL **: itdb_cp_track_to_ipod: assertion `filename' failed[7 Warn 22:40:07.503] Cannot save track to iPod - System.NullReferenceException: Object reference not set to an instance of an object (in `libgpod-sharp') at GPod.ITDB.GetLocalPath (GPod.Device device, GPod.Track track) [0x00000] in <filename unknown>:0 at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.CommitToIpod (GPod.ITDB database) [0x00395] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:287 at Banshee.Dap.AppleDevice.AppleDeviceSource.PerformSyncThreadCycle () [0x000a2] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceSource.cs:530 ** (Banshee:10472): CRITICAL **: itdb_cp_track_to_ipod: assertion `filename' failed[7 Warn 22:40:07.507] Cannot save track to iPod - System.NullReferenceException: Object reference not set to an instance of an object (in `libgpod-sharp') at GPod.ITDB.GetLocalPath (GPod.Device device, GPod.Track track) [0x00000] in <filename unknown>:0 at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.CommitToIpod (GPod.ITDB database) [0x00395] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceTrackInfo.cs:287 at Banshee.Dap.AppleDevice.AppleDeviceSource.PerformSyncThreadCycle () [0x000a2] in /build/buildd/banshee-1.9.0+git20101122.r1.f300117/src/Dap/Banshee.Dap.AppleDevice/Banshee.Dap.AppleDevice/AppleDeviceSource.cs:530 ** (Banshee:10472): WARNING **: Unknown action type 33555456** (Banshee:10472): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:10472): WARNING **: Unknown action type 33555456** (Banshee:10472): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:10472): WARNING **: Unknown action type 33555456** (Banshee:10472): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:10472): WARNING **: Unknown action type 33555456** (Banshee:10472): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:10472): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failedlibitdbprep: itdb_sqlite_generate_itdbs called with file /media/VITROLA/iPod_Control/iTunes/iTunesCDB and uuid 000A270020A85614itlp directory='/media/VITROLA/iPod_Control/iTunes/iTunes Library.itlp'*.itdb files will be stored in '/media/VITROLA/iPod_Control/iTunes/iTunes Library.itlp'[mk_Dynamic] Processing '/tmp/filerSVezt/Dynamic.itdb'[mk_Dynamic] creating table structure[mk_Dynamic] - processing 2355 tracks[mk_Dynamic] - processing 1 playlists[mk_Dynamic] done.[mk_Extras] Processing '/tmp/filerSVezt/Extras.itdb'[mk_Extras] re-building table structure[mk_Extras] done.[mk_Genius] Processing '/tmp/filerSVezt/Genius.itdb'[mk_Genius] re-building table structure[mk_Genius] done.library_persistent_id = 0x84db1d49b8a399e6[mk_Library] Processing '/tmp/filerSVezt/Library.itdb'[mk_Library] building table structure[mk_Library] compiling SQL statements[mk_Library] - inserting into "version_info"[mk_Library] - inserting into "genre_map"[mk_Library] - inserting songs into "item_to_container"[mk_Library] - inserting playlist 'Vitrola' into "container"library_persistent_id = 0x84db1d49b8a399e6device name = Vitrola[mk_Library] - inserting into "db_info"[mk_Library] - processing 2355 tracks[mk_Library] done.[mk_Locations] Processing '/tmp/filerSVezt/Locations.itdb'[mk_Locations] re-building table structure[mk_Locations] Processing 2355 tracks...[mk_Locations] done.[run_post_process_commands] Getting SQL post process commands[run_post_process_commands] Running 88 post process commands now[run_post_process_commands] ERROR when executing 'CreateRentalExpiredColumn': duplicate column name: rental_expired[run_post_process_commands] 87 out of 88 post process commands successfully executed[run_post_process_commands] done.itdbprep: copying 'Dynamic.itdb'itdbprep: copying 'Extras.itdb'itdbprep: copying 'Genius.itdb'itdbprep: copying 'Library.itdb'itdbprep: copying 'Locations.itdb'itdbprep: copying 'Locations.itdb.cbk'[7 Info 22:40:25.467] Wrote iPod database[7 Debug 22:40:25.468] Finished - Syncing iPod[7 Debug 22:40:25.470] Ending AppleDevice sync thread cycleI can "fix it" by using gtkpod, which identifies the stuff that didn't get copies, but basically this version doesn't even copy the stuff over, music folder or not.I should point out that when I access the ipod with gtkpod *two* podcasts playlists show up. Maybe there's something different with the 5G nanos, but this is definitely not working. Best.The nano5g uses sqlite database similar to the ones used by iOS devices. I'm not sure podcast support was ever tested with such devices. Gabriel's fix should help the other ipod models.Hi Christophe,Aha. So it sounds like this bug should be reopened until it can be sorted out. I'm happy to help debug this issue. All the bestI'd rather have someone confirms whether it works on 4th nano or older and keep this bug closed if that's the case, and create a new bug for the 5th gen nano/iPhone/iPod Touch if that's not working for these devicesHi Christophe,Mmhh. Well, I am the bug reporter, and I have a nano 5g. This is the ipod I was using when I originally filed the bug. What happened is that Gabriel submitted a patch to fix #631172 and, because it looks similar, this bug was marked as a duplicate. But if, as you say, it is not a duplicate, we should unmark it as such and reopen it, don't you think?All the best.Ah, I didn't pay attention it was marked as a duplicate of another bug. Yeah, probably makes sense to reopen this bug if there is not a more appropriate one opened already. Would be interesting to know what happens with iOS devices.(In reply to)Hi Christophe, I have a 3rd generation iPod Touch with iOS 4.1, and the behaviour is similar, because podcasts (and music) are shown in the Video section. It can not be the same bug, perhaps.CreatedBanshee dbg output: Connect iPod, download Podcast, sync manually(In reply to)I'm affected. The main menu on the iPod has a Podcasts entry and pointing to it shows "12 podcasts", but clicking on the item doesn't allow me to access the files. I've attached the output while doing a manual sync of one podcast.It's a silver 160 GB Classic podcast. 5G, 4G, I wouldn't know, but if you tell me how to find out, I'll post that info.The model is MC293, firmware version 2.0.4 PC. The last three char of the serial number are 9ZS.I'll attach the output of the udevadm command as well -- it's kind of a lot. (No need to be root to run it, btw.) Here's the gvfs-mount --list output:$ gvfs-mount --listDrive(0): CD/DVD Drive Type: GProxyDrive (GProxyVolumeMonitorGdu)Drive(1): Apple iPod Type: GProxyDrive (GProxyVolumeMonitorGdu) Volume(0): Paul?s iPod Type: GProxyVolume (GProxyVolumeMonitorGdu) Mount(0): Paul?s iPod -> file:///media/PAUL'S%20IPOD Type: GProxyMount (GProxyVolumeMonitorGdu)Mount(0): ftp as pbalm on 192.168.1.2 ->Type: GDaemonMountMount(1): usbdisk2 on 192.168.1.2 -> smb://192.168.1.2/usbdisk2/ Type: GDaemonMountCreatedudevadmin with iPod connectedWeird: Using the search function, I can find and play the podcasts. But I can't enter the podcast menu, and I can't find the podcasts either in the Music menu (Artists, Albums or whatever), nor in Videos. One result in the search results says it's in album "BBC Radio", but this album doesn't appear in the Albums menu.iPod Classic belong toHello,I'm repeating myself a bit myself here, but I just want to point out that gpodder, which works well with my iPod, sets *4* flags and other things for each podcast. This is the relevant bit of the code:def set_podcast_flags(self, track, episode): try: # Set blue bullet for unplayed tracks on 5G iPods if episode.is_played: track.mark_unplayed = 0x01 if track.playcount == 0: track.playcount = 1 else: if track.playcount > 0 or track.bookmark_time > 0: #track is partially played so no blue bullet track.mark_unplayed = 0x01 else: #totally unplayed track.mark_unplayed = 0x02 # Set several flags for to podcast values track.remember_playback_position = 0x01 track.flag1 = 0x02 track.flag2 = 0x01 track.flag3 = 0x01 track.flag4 = 0x01 except: log('Seems like your python-gpod is out-of-date.', sender=self)Could it be that setting only flag #4 as Gabriel did with the patch that solvedis just not enough for the nano 5g?Oh, thanks for repeating this, I'm not following this thread closely enough (not a banshee dev). So this means that libgpod works well enough for podcasts and that there are indeed issues on banshee side.Hi Christophe,Yes, gtkpod and gpodder work for me, so it looks like the issue is on banshee (or the libgpod bindings, anyways). The problem is that gpodder and banshee don't play well together. Even if the podcasts are set to be managed manually, syncing music with Banshee will screw up the database, so that gpodder returns a "cannot open device" error. This is a bug triggered in gpodder when the podcast database is empty or something of the sort.In any case, the "solution" here is either (1) not use banshee at all (gtkpod+gpodder play well together) or (2) don't have the podcast show up in the right place.I'm going for (1) for now, as I mostly use my ipod to listen to podcast and it is a pain to find them among all the music, even if it means running 3 (!!!!) pieces of software to listen to music in my computer + syncing my ipod.Cheers.Looking at the libgpod python binding, I don't think flag1-3 exist. My guess is gpodder is setting them, and no error happens b/c Python will let you do about anything you want.libgpod's pythong binding has a set_podcast method of is identical to the flags we set except it sets skip_when_shuffling=1.Carlos, are you testing w/ audio podcasts? I noticed that I wasn't setting Flag4=1 for video podcasts.Hi Gabriel,Oh, I guess that clears that up. I can see flag1-3 in the 'gpod.py' file of the python bindings, but I can't tell what the references are about.You don't think the Apple "API" (har har) requires that extra flag to bet set for the podcast to show up on the menu, do you?I am only testing with audio podcasts (not into video podcasts myself). Cheers.The flag1-3 references are within Playlist, not Track.I don't know, maybe that SkipWhenShuffling flag is necessary.To retest, have you deleted the podcast files on your iPod and resynced them? Because simply upgrading Banshee and loading the iPod in it won't suffice, you need to add the podcast files anew.Carlos, I pushed to git master the SkipWhenShuffling=true change -- can you please test?Hi Gabriel,I guess the banshee-daily PPA will pick up your patch tomorrow? I'll test then.As for tests, yes, I usually totally wiped out the ipod with a windows machine, tried it empty, then wiped out again, but this time added a podcast, to make sure it was initialized, and then tried banshee. And every time I had a new version of banshee, I deleted everything but my database to make sure no addin files where not the latest ones.A clean test, I think :)Hi Gabriel,Sorry to say, but it didn't work. The podcasts still show up on music.Another couple of symptoms:- The music that I put in the ipod shows up in the video section *too*.- When there's a podcast already in the ipod (I put it there with iTunes) banshee shows is as *playlist* called Podcasts, but it shows nothing on the actual Podcasts section. Cheers.(In reply to)>I can confirm all of them.Hey guys, some NullReferenceExceptions you are getting may be because of another bug (AppleDevice addin not handling correctly invalid tracks -- tracks that are in the DB but which don't have a corresponding file in the device), which I filed as.Can some of you test the patch I posted in that bug to check if it improves your scenarios in any way (at least, it improved mine because it was preventing me completely from syncing my device).Thanks.The patch from the bugreport should be in the Banshee daily snapshot ppa now:live.gnome.org/Banshee/CommonQuestions/TestingOnUbuntuDoes this still happen now?Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!CreatedBanshee debugging outputThe problem persists with banshee 1.9.4+git20110224.r1.12e07c0-0ubuntu1+maverick and a 5g nano.Hi,This bug is still present. The following output is when trying to copy a single podcast to a wiped-out + 1 added podcast (using iTunes/Windows). I'm using banshee 1.9.4.[2 Debug 20:04:57.720] Refreshing any podcasts that haven't been updated in over an hour[3 Debug 20:04:58.522] DAAP Proxy listening for connections on port 8089[1 Debug 20:04:58.725] Finished - Startup Job** (Banshee:2299): CRITICAL **: itdb_playlist_is_audiobooks: assertion `pl->members' failed[4 Debug 20:05:29.659] Found DAP support (Banshee.Dap.AppleDevice.AppleDeviceSource) for device Razor and Uuid /devices/pci0000:00/0000:00:1d.7/usb1/1-3/1-3:1.0/host4/target4:0:0/4:0:0:0/block/sdb/sdb1[4 Info 20:05:29.667] AppleDeviceSource is ignoring unmounted volume 107 GB Filesystem[4 Warn 20:05:29.699] Caught an exception - System.InvalidOperationException: Operation is not valid due to the current state of the object (in `Banshee.Dap.AppleDevice') at Banshee.Dap.AppleDevice.AppleDeviceSource.DeviceInitialize (IDevice device) [0x00000] in <filename unknown>:0 at Banshee.Dap.DapService.FindDeviceSource (IDevice device) [0x00000] in <filename unknown>:0 ** (Banshee:2299): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:2299): WARNING **: Unknown smart rule action at 13703: 2000400. Trying to continue.** (Banshee:2299): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:2299): WARNING **: Unknown smart rule action at 15403: 2000400. Trying to continue.** (Banshee:2299): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:2299): WARNING **: Unknown smart rule action at 17107: 2000400. Trying to continue.** (Banshee:2299): WARNING **: Unknown action (0x2000400) in smart playlist will be ignored.** (Banshee:2299): WARNING **: Unknown smart rule action at 18805: 2000400. Trying to continue.[1 Debug 20:06:40.060] Creating Pango.Layout, configuring Cairo.Context[1 Debug 20:06:40.297] Creating Pango.Layout, configuring Cairo.Context[1 Debug 20:06:40.320] Creating Pango.Layout, configuring Cairo.Context[5 Debug 20:06:51.958] Starting[5 Debug 20:06:53.038] Initialized MediaProfileManager: 1.037317[5 Debug 20:06:53.136] GStreamer pipeline does not run: audioconvert ! novellaacenc bitrate=128000 profile=2 outputformat=0 ! novellqtmux[5 Debug 20:06:53.506] GStreamer pipeline does not run: audioconvert ! xingenc bitrate=128 ! id3v2mux[5 Debug 20:06:53.863] GStreamer pipeline does not run: audioconvert ! fluwmaenc bitrate=64000 vbr=false ! fluasfmux[5 Debug 20:07:07.116] Finished - Adding 1 of 1 to Razor[6 Debug 20:07:07.362] Starting AppleDevice sync thread cycle[6 Debug 20:07:07.373] Starting - Syncing iPod** (Banshee:2299): CRITICAL **: itdb_cp_track_to_ipod: assertion `filename' failed[6 Warn 20:07:07.497] Cannot save track to iPod - System.NullReferenceException: Object reference not set to an instance of an object (in `libgpod-sharp') at GPod.ITDB.GetLocalPath (GPod.Device device, GPod.Track track) [0x00000] in <filename unknown>:0 at Banshee.Dap.AppleDevice.AppleDeviceTrackInfo.CommitToIpod (GPod.ITDB database) [0x00000] in <filename unknown>:0 at Banshee.Dap.AppleDevice.AppleDeviceSource.PerformSyncThreadCycle () [0x00000] in <filename unknown>:0 ** (Banshee:2299): WARNING **: Unknown action type 33555456** (Banshee:2299): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:2299): WARNING **: Unknown action type 33555456** (Banshee:2299): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:2299): WARNING **: Unknown action type 33555456** (Banshee:2299): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:2299): WARNING **: Unknown action type 33555456** (Banshee:2299): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed** (Banshee:2299): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failedlibitdbprep: itdb_sqlite_generate_itdbs called with file /media/RAZOR/iPod_Control/iTunes/iTunesCDB and uuid 000A270020A85614itlp directory='/media/RAZOR/iPod_Control/iTunes/iTunes Library.itlp'*.itdb files will be stored in '/media/RAZOR/iPod_Control/iTunes/iTunes Library.itlp'[mk_Dynamic] Processing '/tmp/fileaEdwEy/Dynamic.itdb'[mk_Dynamic] creating table structure[mk_Dynamic] - processing 3 tracks[mk_Dynamic] - processing 2 playlists[mk_Dynamic] done.[mk_Extras] Processing '/tmp/fileaEdwEy/Extras.itdb'[mk_Extras] re-building table structure[mk_Extras] done.[mk_Genius] Processing '/tmp/fileaEdwEy/Genius.itdb'[mk_Genius] re-building table structure[mk_Genius] done.library_persistent_id = 0xeec4fa6ec8b1d53d[mk_Library] Processing '/tmp/fileaEdwEy/Library.itdb'[mk_Library] building table structure[mk_Library] compiling SQL statements[mk_Library] - inserting into "version_info"[mk_Library] - inserting into "genre_map"[mk_Library] - inserting songs into "item_to_container"[mk_Library] - inserting playlist 'Razor' into "container"[mk_Library] - inserting songs into "item_to_container"[mk_Library] - inserting playlist 'Podcasts' into "container"library_persistent_id = 0xeec4fa6ec8b1d53ddevice name = Razor[mk_Library] - inserting into "db_info"[mk_Library] - processing 3 tracks[mk_Library] done.[mk_Locations] Processing '/tmp/fileaEdwEy/Locations.itdb'[mk_Locations] re-building table structure[mk_Locations] Processing 3 tracks...[mk_Locations] done.[run_post_process_commands] Getting SQL post process commands[run_post_process_commands] Running 88 post process commands now[run_post_process_commands] ERROR when executing 'CreateRentalExpiredColumn': duplicate column name: rental_expired[run_post_process_commands] 87 out of 88 post process commands successfully executed[run_post_process_commands] done.itdbprep: copying 'Dynamic.itdb'itdbprep: copying 'Extras.itdb'itdbprep: copying 'Genius.itdb'itdbprep: copying 'Library.itdb'itdbprep: copying 'Locations.itdb'itdbprep: copying 'Locations.itdb.cbk'[6 Info 20:07:28.379] Wrote iPod database[6 Debug 20:07:28.381] Finished - Syncing iPod[6 Debug 20:07:28.383] Ending AppleDevice sync thread cycleAn additional comment:I should point out that a big tell (as a non-programmer user) is that gpodder can sync to my ipod with no major issues, and they show up correctly on the /Podcast section of my ipod. However, when I open it in banshee, the podcasts are under /VideosI can confirm Carlos statement. This is somehow strange, because - AFAIK - Banshee uses libgpod...like Gpodder does.Carlos, jacopo, what version of libgpod are you using?I'm using 0.8.0 version.Hi Gabriel,I'm using 0.8.0 from the banshee ppa (ubuntu maverick).Using banshee from the stable PPA (2.0.1) and libgpod from the main archives, the podcasts now show up in the right place for me. Syncing seems so be working fine too. No cover art or release dates, but good enough for me!I take it back. It worked for a couple of weeks with my ipod nano and my iphone, and now is back putting eveyrything under /musicThis is still a problem for banshee 2.6.0. I'm using a new iPodclassic 160 GB with FW 2.0.5 PC. I am running Ubuntu 12.04. $ dpkg -l |egrep banshee ii banshee 2.6.0-1ubuntu1~hyper1+precise Media Management and Playback application ii banshee-extension-lyrics 2.4.0-1ubuntu1 Lyrics extension for Banshee ii banshee-extension-soundmenu 2.6.0-1ubuntu1~hyper1+precise Media Management and Playback application - sound menu extension ii banshee-extensions-common 2.4.0-1ubuntu1 common files for banshee-community-extensions $ dpkg -l |egrep libgpod ii libgpod-common 0.8.2-6~hyper1+precise common files for libgpod ii libgpod4 0.8.2-6~hyper1+precise library to read and write songs and artwork to an iPodThe iPod is brand new, and I just sync'ed my music and podcasts.The podcasts show up in the Music menu on the iPod, and the Podcastmenu shows 0 podcasts.The bug persits. I'm using an iPod Classic 80GB on Ubuntu 12.04.$ dpkg -l *banshee* gives me:ii banshee 2.6.0-1ubuntu1~hyper1+precise Media Management and Playback applicationii banshee-extension-soundmenu 2.6.0-1ubuntu1~hyper1+precise Media Management and Playback application - sound menu extension$ dpkg -l |egrep libgpod gives me:ii libgpod-common 0.8.2-6~hyper1+precise common files for libgpodii libgpod-dev 0.8.2-6~hyper1+precise development files for libgpodii libgpod4 0.8.2-6~hyper1+precise library to read and write songs and artwork to an iPodWhat else do you need to work on this bug?	68.0	id=584284	20	True	False	desrt	1
id=713850	REOPENED	geary	accounts	master	Other All	High normal	Geary Maintainers	2013-11-05 12:15 UTC by	Jim Nelson	2016-07-14 02:51 UTC (	1 user	---- Reported by2013-11-04 16:15:00 -0800 ----Original Redmine bug id: 7672Original URL:Searchable id: yorba-bug-7672Original author: Jim NelsonOriginal description:Even though I consider myself a moderately sophisticated user, I routinely getconfused when adding a new account by the various fields. Nine times out often I'll type my email address or password in the wrong edit field. AdmittedlyI'm rushing through the steps (usually trying to test something out), butthat's a hint to me that this dialog is too much.I propose the Create Account dialog be limited to the following fields: * Service type (Gmail/Yahoo/Outlook.com) * Real name (which is always filled in with the user's real name, see #7671). * Email address * Password...and that's it. The Nickname defaults to the email address. The user canedit that in the Accounts Manager (along with the other fields). Note thatwhat I'm describing is how the Welcome dialog already works.The "Other" service type is, of course, more detailed, but I think can stillbe simplified by removing the Nickname field and defaulting to email address,as above.--- Bug imported by2013-11-21 20:23 UTC ---This bug was previously known as _bug_ 7672 atUnknown milestone "unknown in product geary. Setting to default milestone for this product, "---".Setting qa contact to the default for this product. This bug either had no qa contact or an invalid one.Resolution set on an open status. Dropping resolution	See alsoMarking as a dupe ofsince that's a bit more general.*** This bug has been marked as a duplicate of***Changing my mind about nicknames bit. Inaccounts are likely to get a "display_name" property - that can return the nickname if non-empty, else the primary email.That means that the nickname can indeed left out when creating additional accounts (per this bug), however also importantly in the account settings, it can also be made optional and left blank, rather than being prefilled with the primary email address. This avoids the confusion of having multiple otherwise unrelated fields with the same value.I'm adding a dependency onsince that's turning into a complete "Account Dialog redesign" ticket.	3.0	id=718901	8	False	False	jim	1
id=309364	REOPENED	evince	general	git master	Other Linux	High normal	Evince Maintainers	2005-07-03 09:26 UTC by	Crispin Flowerday (not receiving bugmail)	2014-03-01 14:47 UTC (	8 users	If you open a pdf that starts up in presentation mode, it is not at all obvioushow to get out of the presentation mode, possibly a right click menu offeringthe option to leave would be better, otherwise it seems you need to know thatEscape and F12 exit the mode.It is also slightly odd for it to open in presentation mode by default if youaren't expecting it.	We also have request for left button to move forward, right to move backward :) SeeonBryan?I can see the problem when the pdf opens up automatically into presentation mode. However I'd kind of like to see this solved in a different way than a rightclick menu. Like a splash screen that goes away quickly with a hint on hitting[ESC] to get out of presentation mode. Really the idea I like is a littledisplay the way Apple overlays the volume meter on the screen as thepresentation is opened and shows you how to interact with it. That's just offthe top of my head, not sure it's a good idea.I tend to think that the present behavior is preferable to either a splashscreen or right click option. Evince is consistent with acroread and kpdf,which counts for something. Once one has done more than zero presentationsusing a pdf viewer, escape is the natural choice for exiting presentation mode. Adding any splash screen increases the number of distractions the audience faces.One thought: when viewing a presentation in powerpoint, escape is the standardway of exiting the presentation unless you get to the last page. However, atthe end of the presentation powerpoint shows a blank page with the words "clickto exit" or something. Perhaps evince could have a little note either on thelast slide or on a black screen after the last slide indicating that clicking(or pagedown) exits presentation mode. A simplification of this would be to exit presentation mode if the "change slide" signal is recieved but we are at the end of the presentation.There's a note after the last page in presentation mode that tells you to hit escape to quit.I have an Openmoko Freerunner phone. Evince is a great PDF viewer for this device (love it on the lectures :) too but using the presentation mode one is trapped with the touch screen: It's not possible to press ESC to exit the presentation since no keyboard is visible.So I suggest that a mouse click (the only action you can do with a touch screen!) would make it possible to close the presentation mode.Now I only can SSH in the phone to kill evince or hold down the power button to shutdown.See also#c11.***has been marked as a duplicate of this bug. ***If you're going to makea duplicate of this bug, may I humbly suggest that you raise both the severity and the priority at the same time?An application that requires a reboot to undo a menu entry selection is not a minor problem.Sure Roger.As an aside, it would be nice if F5 could *toggle* presentation mode instead of just activating it. I just found myself entering presentation mode via F5 and then pressing F5 a few more times before I realized that I cannot exit this way. And it took me a short while to think of using Esc.A second suggestion would be to exit the presentation when the user keeps going forward after the last (black) page which says "End of presentation. Press Escape to exit.". This would provide users lacking a keyboard with a way of exiting by mouse. Maybe the text could be altered to "Click or press Escape to exit." or "Press Escape or step forward to exit." or something along these lines.Thanks for a very nice program, by the way!that sounds wise, F11 behaves that way for full screen in most applications, it should be a relatively unintrusive change. I hope the developers will consider this. something else to consider might be to autohide menus/controls (or even just a close button) and have it appear if the user moves to the edge or corner of the screen.Now (git master) it's possible to exit presentation by clicking on end page.CreatedHere is a patch that helps to toggle from presentation mode to exit it when F5 is pressed while in presentation mode.Is it a good idea to add a right-click menu to add "exit presentation" option? As right-click is presently being used for moving to the previous slide. Or a close button or maybe an auto hide close button at the top right corner sounds good?Review of:It makes sense, thanks.I think we can close this bug now.(In reply to)No, it does not because introduces a regression. In the past F5 used to toggle presentation mode, but it was disabled in 2008 because of:I'm sorry I had forgotten that bug, I'll revert the commit and add a comment in the code pointing to the bug, so that I won't forget again in 6 years.	18.0	id=713850	8	False	False	jim	1
id=726728	REOPENED	geary	server-support	0.6.x	Other Linux	High normal	Geary Maintainers	2014-03-19 17:32 UTC by	mock	2016-11-21 23:38 UTC (	6 users	Createdfrom one google mail accountwhen creating messages in geary for my added google mail account (mail through a google apps account), i can end up with draft copies of a message which only appear in my gmail app on my phone (nexus 5). i assume it might the autosave for drafts, but if the message takes a long time before i hit send then it can generate many of these drafts. (for one message a little bit ago, i ended up with 39 drafts dispersed throughout the "conversation.")these drafts are not in any draft folder: not geary, not my gmail account (web interface), not even the gmail app. they only exist within the conversation, usually between replies. in order to delete them, i cannot bulk select them. i must edit each one and choose discard from the menu to remove them.this has only happened when i use geary. i had problems in 0.4.x. i compiled 0.5.x which still demonstrated the same behavior. i compiled the 0.6.x version hoping this matter had been resolved, but it remains.i like geary, but the clean up of these drafts gets out of hand too quickly for it to make this worth using right now. i'm attaching a few screenshots of what i end up with when this happens.i'm running fedora 20 with gnome 3.10 and all the updates for my distro. my phone is a nexus 5 running android 4.4.2 (kitkat build KOT49H) and gmail app version 4.7.2 (967015).	Createdthe other google mail accountCreatednothing new in drafts folderCreatedverifying the empty drafts folder despite having drafts in my conversationsTo be clear, do you mean that they only exist within the conversation *on your phone*, not even in the conversation in gmail or in Geary?I don't have a modern android device, but in my old one, there is an option to re-sync with the server. What happens if you do that?yes, that's correct. only in my phone's gmail app/client. i had at one point planned to do the select many and delete in the web client, but they didn't even exist in the conversation there.in my experience, refreshing my mail client did not clear the messages. i had even let it spend time overnight to clear them. they didn't go away.There's a couple of things that would help us here.First, in your Gmail Settings under "Forwarding and POP/IMAP", there's two IMAP options that may be affecting this: "When I mark a message in IMAP as deleted:" and "When a message is marked as deleted and expunged from the last visible IMAP folder:". How do you have those configured?Second, are there any configuration settings on your Android Gmail app that might be of interest here? Anything related to Drafts, Trash, or deleting/expunging would be good to know about.Third, a network log would be helpful to see if the drafts are being trashed or not. If you could run Geary like this:$ geary --debug --log-network > geary.logReproduce the problem, then send that file to. You'll probably want to redact the log file of usernames, passwords, and any sensitive material.answers:1. the defaults for both these options are chosen. in order, "auto-expunge on" and "archive the message."2. there are no settings that effect the folder in a similar way as that of the web interface.3. i have emailed a redacted geary.log file to the address above.Those settings are what I use. The log file indicates the draft is properly deleted: Geary's issuing the commands, the server sends back OK for both as well as the IMAP notifications of it going away. So, I'm at a loss as to what's going on here.This is what I suspect is happening: one of Gmail's odd side-effects (from an IMAP perspective) is that if a message is deleted from Drafts, it's not actually deleted but moved to Trash. That's not true in other folders. For example, in Inbox, deleting a message merely removes it from the Inbox. It's still located in All Mail and whatever other labels you may have assigned to it.It looks to me that your mobile app is seeing these drafts in All Mail and threading them into the conversation. Alternately, the Gmail app is seeing them in the Trash and not blacklisting them. (Geary does this, for example, to prevent trashed messages from being included in a conversation.) I can't be certain, but it really sounds like a bug on your phone's client.One experiment you might try is deleting the drafts from your Trash folder (using Geary or the web interface), re-sync your client, and see if the problem persists for that conversation. If not, it sounds like the client is including trashed messages in the conversation.I can confirm this bug (I'm using Cyanogenmod 10.1.3, Android 4.2.2).I'll try upgrading and see if it's fixed.For the moment, the workaround is entering the trash folder and manually deleting the drafts.It seems that it's an old problem:(read)BTW, the same problem occurs using Icedove/Thunderbird 24.4.0ok, i see the drafts in the trash in all clients. (it's not possible to delete from the trash folder on the mobile gmail client...?)i guess deleting the drafts from the trash folder is the short term solution.i did test this process out in evolution using imap connections to my gmail accounts, and there are no drafts leftover in any of the folders like in geary. evolution is perhaps cleaning these up? dunno.Looking over the comments in the other reports (esp. the Thunderbird ticket), it looks like the problem is indeed the Gmail app threading in messages stored in the Trash. It also doesn't sound like Google is going to fix that any time soon.The ticket also made an interesting discovery: if the drafts stored in the Trash are marked with the \Deleted flag (but not expunged) they won't be included in the app's conversations. That's something we could consider as well, but in my mind it's a work-around, not really the solution.I'd have to take a closer look at Evolution, but I suspect it's storing its drafts in a local folder, not the server. (When I create a draft with my version of Evolution, it does not appear on the server.) Geary doesn't have a notion of a local-only folder yet (,).Just to let you know, I posted the issue on the Google product forum a week ago and got zero response:What Geary probably has to do is to delete the drafts from the trash, too, when talking to Gmail.***has been marked as a duplicate of this bug. ***There's been a follow-up from Google:"The problem would appear to be that you are saving drafts created in your IMAP client to the server. That entails multiple copies of the message you are composing being sent to the Gmail server. These are not actually the same type of file as Gmail's "Drafts" - because they are being sent as messages by your client to your Gmail account, so they have similar characteristics to ordinary messages, and when Trashed when a message is finally sent, will appear in Trash. Why your Gmail App is including them in the conversation view when Gmail in a browser does not I can only guess, but it could possibly be related to whether or not Geary removes the Inbox label when the messages get deleted after sending. Some clients do not, and whilst in the web interface, the Trash label always takes priority over any other label a message might have, it might lead to confusion in the Gmail App. The simple answer is probably to turn off Save Drafts to Server in your email client, and just have your drafts saved locally within the client till you are ready to send. "As a temporary workaround, could you consider the idea of add a preference to disable the autosave of drafts? Maybe as an (hidden) option to set in geary.ini, so it doesn't appear on the user interface?This problem is rather annoying and it's preventing me from using Geary with a Google account.Ok, I was getting ready to write a rather heated response, but I took the time to follow Jakob's link and see that the Google engineer did a little more homework and came to realize that the Gmail App was the problem here, not Geary (or Thunderbird, Outlook, or Apple Mail).I do think a master switch somewhere to turn this off would be useful. I'm renaming this ticket to reflect that.Geary now has a "Save drafts" checkbox in the Accounts dialog. Hopefully this helps work around these problems.Pushed to master, commit 9741f6Yup, it helps. Thanks!I can reproduce this problem with 0.8.0.This patch is merely about turning off saving drafts to workaround the problem. The real solution is for Google to fix their apps not to include messages in Trash in a conversation.A quick comment to let you know that Google didn't fix this problem in version 5.0 of Gmail, released yesterdayHey all, can anyone confirm if this is still a problem in Google's GMail apps?I'd like to remove the account pref if they have resolve it.	23.0	id=726728	17	True	False	chaz	1
id=85559	REOPENED	gnome-control-center	Network	git master	Other All	High normal	Control-Center Maintainers	2002-06-17 05:11 UTC by	Rashmi Agrawal	2013-04-23 13:30 UTC (	10 users	HTTP proxy password settings can get exposed if set through networkpreference capplet. Through this capplet, HTTP proxy user name and passwordcan be specified. This username and password is then stored in "/<user home directory>/.gconf/system/http-proxy/%gconf.xml"in CLEAR TEXT with read/write/exec permission to user only.This settings are then used by the applications like nautilus, gweatherstockticker etc.This is an issue in terms of privacy because of the following1. The root can see the password for user's http proxy settings.2. If the home directory is exported to other systems and then mounted nfs.In this case others can also see the password.Possible solutions:1. preliminary thoughts are encrypting the password before storing anddecrypting it at the point of retrieval.The fix is likely to affect the network preferences capplet and componentswhich retrieve the information.	Your preliminary thoughts do not solve anything.If you need to pass that password to the proxy then you need a pieceof code that takes that password and decrypts it, Rigth?Then ... if there is such piece of code that can take an cryptedpassword and generate a clean password, How are you going to avoidroot running that piece of code and decrypting it?I understand that root can still have access to password. While storing the password by user through capplet, user might not beaware that the password is getting stored in clear text and can beseen by root. At least user could be warned that the passwordinformation being stored can be seen by others. This is not being doneat present. In case, user is not willing to disclose his/her http proxy passwordto anybody and is not willing to store it through network cappletbecause of privacy issues, other applications(like nautilus etc)should prompt for password.In this case at least user would know that private information can beseen by others and have an option to not to store in his/her homedirectory.I am not saying that this could not happen, all I am saying is thatencrypting and decrypting the password changes nothing.Worse than that, root can see/steal ~/.ssh/identity and thus stealyour identity - is it even me that is typing this ? ;-)The issue was discussed in the community through desktop-devel-list.The link to the thread isThere is a consensus to at least encrypt the password and store itinto the disk. A patch to this will be provided soon. Along with it, password prompting feature is currently beingconsidered.No intermediate solution of encrypt and save to disk patch will beprovided to the community.Verified on HEAD as well. Can't we use the shiny new keyring manager for thiskind of pwd magic?regs, Chris***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Since trivial obfuscation (which doesn't increase security at all) definitely won't happen, repurposing this bug as a feature request for storing the proxy password in gnome-keyring instead.Aren't HTTP proxy passwords sent out in clear text over the network anyway?Dan, Stef, is this something we can implement? What about applications relying on libproxy directly?We could definitely have glib-networking pull the password out of the secret store rather than gsettings.Apps using libproxy would lose until libproxy got updated to use libsecret and distros got updated to use the new libproxy...(Hm... we should tweak the libproxy gnome plugin to try to just use GProxyResolverGnome...)	14.0	id=603510	11	False	False	Christian.Kirbach	1
id=603510	REOPENED	metacity	general	trunk	Other Linux	Normal blocker	Metacity maintainers list	2009-12-01 18:18 UTC by	Luca Ferretti	2012-01-05 15:07 UTC (	3 users	From jhbuild log:cc1: warnings being treated as errorscore/main.c: In function ‘sigterm_handler’:core/main.c:380: error: ignoring return value of ‘write’, declared with attribute warn_unused_result	I see this as wellCreatedfix the compiler warning, make use of the return valuegoogling I found this elegant solution of using the return value for something, thus bringing remedy for the compiler warning. Am I not sneaky? :)Not sure if you want this error logged or printed to stderr, as I did.gcc version 4.4.1Review of:Sorry for the ridiculously long delay. I'll try to do better in future.I actually found and fixed this bug independently, a month after you raised it (in commit 575f5):But I think your solution is better, so I'm adopting it instead.Checked into master:-> FIXEDHey,The commit mentioned inisn't actually valid. It's illegal (can lead to crashes or deadlocks) to call g_printerr in a signal handler.	6.0	id=85559	31	True	True	chema	1
id=764947	REOPENED	GStreamer	gst-plugins-bad	git master	Other Linux	Normal blocker	GStreamer Maintainers	2016-04-12 11:47 UTC by	Jakub Adam	2017-01-26 16:10 UTC (	5 users	Createdglimagesink: fix "prepare-window-handle" message with autovideosinkGstGLImageSink calls gst_video_overlay_prepare_window_handle() only once on initialization of its GL context. However, when autovideosink instantiates GL sink as its actual child sink element, that GL context creation happens while glimagesink is connected to a dummy GstBus, different from the bus of autosink's pipeline (see gst_auto_detect_find_best() in GstAutoDetect).Because application never receives the "prepare-window-handle" element message posted on dummy bus, it doesn't get a chance to set its own window for video display and thus glimagesink always creates a new one.Decoupling window handle assignment from GL context creation in this commit causes that "prepare-window-handle" message is resent whenever _ensure_gl_setup() is called with window_id unset, allowing the application to pick it up once autovideosink connects the glimagesink into its pipeline.	Review of:This unfortunately needs careful testing on all platforms to make sure everything still works.I'm pretty sure X11, android and possibly wayland are fine with setting the window handle after context initialization. I'm not entirely sure about the others.::: ext/gl/gstglimagesink.c@@ +825,3 @@+ gl_sink->window_id = gl_sink->new_window_id;+ GST_DEBUG_OBJECT (gl_sink, "Setting window handle on gl window");+ window = gst_gl_context_get_window (gl_sink->context);You don't unref this anywhere.Createdglimagesink: fix "prepare-window-handle" message with autovideosinkfix reference leak(In reply to Matthew Waters (ystreet00) from)I've found the same piece of code which changes handle on a window with an existing context also in gst_glimage_sink_expose() and gst_glimage_sink_prepare() (perhaps it could be factored out into a common function?). So if it has been working until now, I'd expect this change shouldn't break anything.Createdautodetect: bring the element state down after success.This fixes this issue specifically. Another option is to implement message filtering in autodetect and add the element to the bin like decodebin does.(In reply to Matthew Waters (ystreet00) from)Is this now the preferred solution? Comitted even?commit bbe88b190bbbbcf0c169b2e3909f5fc9c48b7cafAuthor: Matthew Waters <>Date: Fri Nov 11 14:31:03 2016 +1100 autodetect: bring the element state down after success Otherwise some messages that are emitted by the element on NULL->READY will not reach the application.I do not see this fix in 1.10 branchIt's here(In reply to Sebastian Dröge (slomo) from)This seems wrong to me. after 2 days of debugging. I had to comment out gst_element_set_state (el, GST_STATE_NULL); i am on OSX, with a pipe of rtspsrc debug=false timeout=0 location=%@ latency=%d ntp-sync=false drop-on-latency=false udp-reconnect=true do-retransmission=true max-rtcp-rtp-time-diff=-1 name=rtsp ! rtph264depay name=x2 ! h264parse name=x3 ! vtdec name=x4 ! autovideosink name=primwhen i set the pipe to ready. the element get set to ready, then this change sets back to null. setting the state to null closes and releases the element. So, i do not think you want to set the state back to null.I'm going to revert it for 1.10 for now then, this apparently needs further investigation(In reply to Sebastian Dröge (slomo) from)It seems like Jakub's original fix is the way to goJoakim, what specifically does it break for you other than changing the behaviour?Nothing, I am just using the pidgin-sipe SW Jakub has extended for Lync Desktopsharing. So far Jakub's change has NOT broken anything here tough.	13.0	id=171804	28	True	False	vuntz	1
id=771815	REOPENED	mutter	general	3.21.x	Other Linux	Normal blocker		2016-09-22 08:47 UTC by	Svetlin Zarev	2016-11-23 19:15 UTC (	9 users	with and without After the upgrade to 3.21 (91 and 92) and later to 3.22 the screen is constantly flickering. I experience the issue on IvyBridge HD4000, but people are reporting that they experience it with Radeon and NVidia propriatery drivers as well. The issue affects gnome classic as well as X11 and wayland modes.The issue is present on both X11 and Wayland. But on X it is so severe that the desktop is basically useless. There is no problem with 3D acceleration and video playback. Playing video with MPV is fine has no flicker. On the Driver side I tried with DRI2, DRI3 and NoAccel. Also with SNA (with and without TearFree) and UXA accel. There was no change in regards to the flickering.More information can be found here:	Intel Haswell HD 4400. Same here, tested on debian testing AND GNOME_next-live-CD, so bug is definitely upstream.(In reply to geha from)Well i tried tumbleweed today and the flickering is gone...(In reply to geha from)Interesting - as the GNOME_Next live CD basically IS a Tumbleweed install - but granted, slimmed down (the video driver selection is likely the cause then: G_Next live basically only comes with the modesetting driver, when you installed Tumbleweed, you likely got the 'native' intel driver).I just changed the meta package for the GNOME_Next live image to also include the -intel video driver - would be nice if you could retest the Live image once a new one is published - if this is then fine for you I'd say you have a good lead for Debian tooWhat do you mean by the "intel" driver ? If you mean xserver-xorg-video-intel, then why my wayland session is flickering as well (PS: I tried with and without it without any difference)? Also in the debian bug report several people complained about that issue with different video drivers including the proprietary nvidia ones.(In reply to Dominique Leuenberger from)I did not install tumbleweed but used the gnome-live-snapshot (20160921). The G_Next Build1.5 iso seems to be similar. Interesting though that one worked. Btw. i'm on debian/modesetting too, means no explicit intel ddx.Just tried G_Next Build 1.9 -> screen flickers again.The tumbleweed gnome-live-snapshot contains xf86-video-intel build around Sept 2nd, while the debian version is approx. 2 months old. Maybe the debian/intel ddx needs to be updated...thanks for the hint.Does the issue start reproducing in 3.21.91? As in, did it work in 3.21.1 to 3.21.4 and 3.21.90? What version of gobject-introspection is installed on the system where the issue reproduces?Hard to say as the first unstable version in debian testing was 3.21.91 and the version before that, 3.20, worked like a charm. If you know of live isos for these versions i'd gladly test them.gobject-introspection version: 1.49.1-2.xf86-video-intel or better the lack there of is not the culprit.As far as I can see[0][1], there were more versions in debian experimental. Any way to test those?[0][1](In reply to Jonas Ådahl from)(In reply to Andreas Henriksson from)With 3.21.90-1 the flickering is not gone but much better...Any way to try 3.21.3?FWIW, I've been trying to reproduce on a Debian system, running mutter/gnome-shell from jhbuild (3.22.0), but so far no flickering.Interesting for me so far is that as stated above the GNOME_Next Build 1.9 which contains mutter 3.22.0-364.2 flickers, while the opensuse-tumbleweed-snapshot (20160921) has mutter 3.22.0-1 and does not.(tested via live-iso-usb)Also the GNOME_Next-iso hangs at boot on VirtualBox while the other one works fine.(In reply to geha from)TW Live snapshot (0921) almost 100% runs an X-session for you - no waylandCould someone attach a strace log of gnome-shell when it reproduces?Rather big file, so sent via mail to you...(In reply to geha from)Thanks. Though, it seems it doesn't have any of the open("/path/to/some/library/libthatlibrary.so") calls (which were the one I'm interested in). How did you get the strace? You could probably get it by puttingXDG_SESSION_TYPE=x11 strace gnome-shell >& gnome-shell-strace.login ~/.xinitrc, switching to a VT, then run "startx". It'll be a fairly broken gnome-shell session (various stuff won't work due to the lack of a complete gnome-session), but at least you should be able to try to reproduce the issue.(In reply to Jonas Ådahl from)Well i'm no developer...started the desktop via gdm, then pgrep gnome-shell and strace -p # -o file.txtActually it works with "&>" , your command gives bad fd number errorWell i even get no X at all: Connection to x-server lost, no further warnings or errors...Another one withstartx /usr/bin/strace /usr/bin/gnome-shell &> file.txt sent...now with some .so calls as far as i can see. hope it helps.(In reply to geha from)Thanks. Things look correct to me, gnome-shell loads libmutter-clutter.so etc and not libclutter.so as it should.I just tried "GNOME_Next 1.9" on one two computers, one with an Intel GPU, the other with a Nvidia GPU, and I haven't been able to reproduce the issue.What I could see was a slight blurry-ness on the nvidia system when running Wayland on top of nouveau. Changing to using X11, the problem went away. AddingMUTTER_STAGE_VIEWS=0 to /etc/environment also made the problem go away on Wayland on top of nouveau.So, anyone who can reproduce this, does it reproduce both using Wayland and X11, or only X11? Does it reproduce on anything other than nouveau?As i added MUTTER_STAGE_VIEWS=0 to /etc/environment i noticed the following:CLUTTER_PAINT=disable-clipped-redraws:disable-cullingCLUTTER_VBLANK=True(entries already there)MUTTER_STAGE_VIEWS=0 did not help so i removed it. I tried # the first entry and noticed: yeah, the flicker is GONE under X11, but slightly present in GDM and Wayland.# both entries didn't help further.Any clues?(In reply to geha from)Could you describe "slightly present" and how you reproduce it? This is on an Intel GPU right?Nothing todo to reproduce, just load GDM or GNOME under Wayland-Session.Intel Haswell HD 4400. It's more of a slight jittering (aka "zittern" in german, don't know if my english translation is appropriate in this context) than a flickering...Just retested the live-image:It seems to be two different(?) issues: 1.) In GNOME_next build 1.9 theres no flickering but the jittering and the /etc/environment items are not present.2.) On Debian before #ing the line it looked like this:After that its more of a jittering as present in GNOME-next build 1.9, but much less than that.Yes, it reproduces under X and Wayland. Under X it is so severe that the desktop is basically unusable. On Wayland the flickering is more tolerable but is still present. I'll try the proposed workarounds after work.On my side it looks like a double buffering issue. One moment I see the GDM screen, the next I see my desktop. And it continues undefinitely unless the whole screen is repainted. Then it swaps between the desktop and some other applciation, or if I scroll some page in firefox - at one moment I see the top of the page and in thext - the bottom, then again the top ... etc.PS: I'll also try the live iso to check if it's the same issue thereI can test only with intel video but if you take a look at the debian bug report, then you;ll see people are complaining with NVIdia propriatery drivers as well.(In reply to geha from)Well i believe i found the culprit for the jittering: monitor-resolution in gnome-control-center doesn't let me apply 1920x1080 (16:9) but stays with 1920x1080i (16:9). In other DEs it works, hence no problems there.Regarding /etc/environment: Seems i got this "cruft" from older versions of debian since it seems not to be default anymore.thanks again for helping figuring me out how to get gnome running again.@ Jonas Ådahl Thank you for pointing me to the /etc/environment. MUTTER_STAGE_VIEWS=0 indeed improved the situation a lot under X11 but flickering still remained. While adding this property I noticed that I had CLUTTER_PAINT=disable-clipped-redraws:disable-culling there and removing it seems to have fixed the issue.The funny part is that I've added this property years ago as a workaround for gnome tearing, and now the cure has turned to a poison.Thanks,Svetlin(In reply to Svetlin Zarev from)Changing MUTTER_STAGE_VIEWS only affects the Wayland session (X11 only supports what value "0" represents, while Wayland supports both but defaults to what value "1" represents.Right. Reopening as disabling clipped redraws and culling shouldn't break rendering like it seems to be doing.(In reply to Jonas Ådahl from)Unless this can be fixed in mutter, maybe it could just ignore disable-clipped-redraws:disable-culling?I always enable the CLUTTER_PAINT hack when using DRI2 because this is the only way to get a real tear free experience. Without the hack, there is some tearing at the very top of the screen unless DRI3 is enabled. Usually hard to notice until you open a fullscreen app such as Firefox or VLC. Another way to visualize the tearing is to open Activities and drag a window thumbnail to the top of the screen. That's both on intel and radeonsi drivers. Please fix.***has been marked as a duplicate of this bug. ***	34.0	id=769639	6	False	False	felix	1
id=769639	REOPENED	tracker	Extractor	1.8.x	Other Linux	Normal blocker		2016-08-08 16:07 UTC by	Felix	2016-10-10 11:38 UTC (	2 users	I noticed that the Gnome overview search had stopped working, and discovered the following in my logs. I have tried doing a tracker reset --hard, followed by a tracker daemon --start, but after some thinking, tracker-extract crashes again. Not sure how to debug further.Running Arch Linux.tracker v1.8.0gnome-shell v3.20.317:00:53 systemd-coredum: Process 11629 (tracker-extract) of user 1000 dumped core.Stack trace of thread 11629:#0 0x00007f5fd222608f raise (libc.so.6)#1 0x00007f5fd22274ba abort (libc.so.6)#2 0x00007f5fbe260fc8 _ZN6PDFDoc21getDocInfoStringEntryEPKc (libpoppler.so.63)#3 0x00007f5fbe5bdaf0 poppler_document_get_author (libpoppler-glib.so.8)#4 0x00007f5fbe5bfb28 n/a (libpoppler-glib.so.8)#5 0x00007f5fd2ad4ae9 g_object_get_valist (libgobject-2.0.so.0)#6 0x00007f5fd2ad4f9c g_object_get (libgobject-2.0.so.0)#7 0x00007f5fca0af756 tracker_extract_get_metadata (libextract-pdf.so)#8 0x000000000040b106 n/a (tracker-extract)#9 0x000000000040b233 n/a (tracker-extract)#10 0x000000000040b470 n/a (tracker-extract)#11 0x00007f5fd27f7c8a g_main_context_dispatch (libglib-2.0.so.0)#12 0x00007f5fd27f8040 n/a (libglib-2.0.so.0)#13 0x00007f5fd27f8362 g_main_loop_run (libglib-2.0.so.0)#14 0x0000000000409b0e main (tracker-extract)#15 0x00007f5fd22132d1 __libc_start_main (libc.so.6)#16 0x0000000000409ba9 _start (tracker-extract)Stack trace of thread 11630:#0 0x00007f5fd22d24cd poll (libc.so.6)#1 0x00007f5fd27f7fd6 n/a (libglib-2.0.so.0)#2 0x00007f5fd27f80ec g_main_context_iteration (libglib-2.0.so.0)#3 0x00007f5fca4d74bd n/a (libdconfsettings.so)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11632:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11634:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11631:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11635:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11633:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11641:#0 0x00007f5fd22d24cd poll (libc.so.6)#1 0x00007f5fd27f7fd6 n/a (libglib-2.0.so.0)#2 0x00007f5fd27f80ec g_main_context_iteration (libglib-2.0.so.0)#3 0x00007f5fd27f8131 n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11636:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11637:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11640:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11643:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c2aa g_cond_wait_until (libglib-2.0.so.0)#2 0x00007f5fd27cca19 n/a (libglib-2.0.so.0)#3 0x00007f5fd281ec86 n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11638:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11639:#0 0x00007f5fd22d6f59 syscall (libc.so.6)#1 0x00007f5fd283c18f g_cond_wait (libglib-2.0.so.0)#2 0x00007f5fd27cca5b n/a (libglib-2.0.so.0)#3 0x00007f5fd281edfd n/a (libglib-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)Stack trace of thread 11642:#0 0x00007f5fd22d24cd poll (libc.so.6)#1 0x00007f5fd27f7fd6 n/a (libglib-2.0.so.0)#2 0x00007f5fd27f8362 g_main_loop_run (libglib-2.0.so.0)#3 0x00007f5fd344b726 n/a (libgio-2.0.so.0)#4 0x00007f5fd281e2b5 n/a (libglib-2.0.so.0)#5 0x00007f5fd2598474 start_thread (libpthread.so.0)#6 0x00007f5fd22db81f __clone (libc.so.6)	Hi, thanks for the bug report! The backtrace unfortunately doesn't shed much light, it does seem to be a libpoppler issue handling an specific PDF document.You could maybe know better which file is failing if you run tracker-extract on the terminal with extra verbosity:killall -15 tracker-extract && /usr/lib/tracker/tracker-extract -v 3This (amongst lots of other info) should tell the files that are being processed, you should get you a better idea of the file that is crashing tracker-extract.However, I don't think this is a Tracker problem per-se, this crash happens in fairly frequented code, and our usage of popper API there looks correct, so it seems more like an specific issue with this document.I encourage you to file a bug to(I'd advise starting with component: "glib frontend"), where you will maybe be asked for the document, you can maybe refer to this bug.As for a short term workaround, removing the file from indexed folders (or filtering it through config) should make it really sure that tracker-extract is able to continue.Thanks. That was helpful. Looks like I had a corrupt PDF that was killing the extractor. I'll open a bug with libpoppler.Ok, so even after resolving this issue, and removing the PDF, the search still appears to not work for the filesystem.systemd journal snippet after attempting to search for something in the overview:Aug 24 17:36:21 tzadkiel dbus-daemon[1899]: Activating service name='org.gnome.ControlCenter.SearchProvider'Aug 24 17:36:21 tzadkiel dbus-daemon[1899]: Activating via systemd: service name='org.gnome.Terminal' unit='gnome-terminal-server.service'Aug 24 17:36:21 tzadkiel dbus-daemon[1899]: Successfully activated service 'org.gnome.ControlCenter.SearchProvider'Aug 24 17:36:21 tzadkiel systemd[1863]: Starting GNOME Terminal Server...Aug 24 17:36:21 tzadkiel dbus-daemon[1899]: Successfully activated service 'org.gnome.Terminal'Aug 24 17:36:21 tzadkiel systemd[1863]: Started GNOME Terminal Server.Aug 24 17:36:46 tzadkiel org.gnome.Shell.desktop[1929]: Gjs-Message: JS LOG: Received error from DBus search provider org.gnome.Nautilus.desktop: Gio.IOErrorEnum: Timeout was reachedSorry for the late reply... the gnome-shell overview doesn't poke tracker directly, it does query these "search providers" that are implemented at a higher level by applications, some providers like eg. gnome-documents indirectly use Tracker to implement their functionality though.A more reliable method to try unrestricted Tracker search is the search UI in nautilus/file choosers, or the "tracker search" shell command, if those return nothing on obviously correct search terms, it would then be a bug in Tracker.Please try and feel free to close the bug if it works after all, otherwise I'd welcome the output of "tracker status --collect-debug-info".	4.0	id=764947	20	False	True	ystreet00	1
id=171804	REOPENED	libwnck	tasklist	2.10.x	Other All	High minor	libwnck maintainers	2005-03-27 18:14 UTC by	Peter Oliver	2014-12-18 19:03 UTC (	10 users	The window list sorts items in the order they were opened. Seems reasonable.Now, when a large number of windows are opened, it starts grouping relateditems. If someone has enough windows open to cause grouping, they probably havea lot of windows. It might be better to sort alphabetically within the groups. For example, I tend to open dozens of xterms across many different hosts. I putthe hostname in the window title, but even so, finding the one I want is tricky.Alphabetically sorting in general wouldn't be good because, for example, theuser wouldn't know where to expect a new item to appear in the window list, butby grouping windows you're already breaking this ordering. Changing the orderwithin the group wouldn't make much difference from this point of view.Other information:	***has been marked as a duplicate of this bug. ***Createdthat does the jobi'm comparing with g_ascii_strcasecmp() beacause I don't find something likeg_utf8_strcasecmp().priority=high because of the patchXavier: I think you need to use g_utf8_collate().Createdthanks VincentdoneThanks Xavier. I committed a slightly modified version (there was a leak ;-)).I turns out that this behaviour (sorting) is a real pain, because window titles change dynamically.My terminal title changes when I change directory (or perhaps if someone changes the topic in a text-based IRC client, or if I edit a file in an editor, or...).My Web browser window changes title if I switch tabs, or if the page reloads, or if there's JavaScript that sets the title.So now my windows move about in the grouped list, but not under my control, like wriggling maggots in a can, and I can't find the one I want. Worse, the only way I can find a browser tab that's not displayed is by remembering its position in the list. So now I have to go through all the windows until I find the one I need (or just open a new copy, which eventually crashes the browser).To make this work, it needs either to have a preference to enable/disable on a per-application basis (which I think is crack) or to number windows when created, or to let users edit the displayed title (also crack, but it would belong in the window manager).I've been trying to live with it, but it's really not working. I don't want to stop using gnome-terminal and tabbed browsing.I think it's best reverted.LiamReopening as per Liam's comments.I'm very in favour of alphabetic sorting because I use the same apps most of the time and no matter in which order I open them, they always appear in the same order in the Tasklist. (XChat always last for example)From my understanding it would be necessary to find a sorting algorithm that sorts windows the same all the time. So it would be necesary to sort by an immutable (ideally across sessions) property.Are there any useful immutable properties that could be sorted on? The best I can come up with right now is the name of the executable that created the window.I'm with Liam on this one. The order should be reverted to opening time, since IMHO it's the only sensible one. If I want to switch back to, say, the second Firefox window I opened, I expect to find it near the top of the window group list, etc. etc.***has been marked as a duplicate of this bug. ***In, Elijah mentioned he would probably revert this.It looks like both sortings are usefull depending on user approach. So to satisfy both groups it would be best to include both types and add option to switch between them (in gconf for start).From implementation point of view, if I understand it right, there is already working code for both sortings. What needs to be done is put both code pieces together in one revision and add code to decide acording to user setting which sorting will be used, right?I do not care which sorting will be set as default, as long as I can change it.:-)(In reply to)This sounds like exactly what I was asking for. If the selection can be done with a GUI, that's all the better. Otherwise I can settle for writing a value in some configuration file, as long as I don't have to recompile the actual Gnome Panel sources.So, has the ability to NOT sort alphabetically been added in any way? I just tried booting Gutsy (and I'm not sure how to tell which of the various patches to this might be in that release), and it has the following behavior:(a) No grouping, unless I find the relevant UI switch and throw it. I can live with that, by leaving the switch thrown. (I don't recall the name of that switch, since I booted a LiveCD a few days ago when I was playing with this.)(b) Windows are STILL sorted alphabetically! And I can't find any way to turn this off. I've been waiting for this alphabetical-sorting to be reverted for about two years now (it was okay in Hoary, and all Ubuntu releases since then have had the involuntary sorting), and I'd really love to stop waiting...Thanks!yep... now in Ubuntu Hardy, I decided that since I have about 50 windows up, I might as well group them -- but now that they're all sorted alphabetically per application, I can't find e.g. which Firefox window I need. progress, please? :-)***has been marked as a duplicate of this bug. ***For the love of god, can we PLEASE get this reverted back to the FOUR-YEAR-OLD behavior of NOT alphabetically sorting?I'm sorry to shout, but consider the history here:(a) Change made 4 years ago.(b) People affected 3-4 years ago as it came downstream. I and others complained at that time, in this and other bugs.(c) Agreement reached 2 years ago that this was a bad idea and should be reverted.Since then, NOTHING. Its priority is currently "High" but the reversion has not happened. I've been waiting patiently---probably too patiently---for someone to finally have the time to deal with this---should I have been sending a ping every 2 months instead?I am -weeping- with frustration over this issue. This issue, almost singlehandedly, has kept me running a four-year-old release (Hoary, 5.04) on my primary desktop, because having all of my windows sorted alphabetically is just intolerable. (I'm surviving by using forwarded X connections from newer releases to the old desktop.) Now, I -must- leave this ancient, ancient release, and am quite disappointed to find that even in the Ubuntu coming out in two days, the Gnome shipping with it still has this ill-advised change---which was marked for reversion two years ago!So, two requests:(a) Please, PLEASE revert the alphabetical sorting!(b) Since nothing you do can possibly trickle downstream to what I'm running for 6-12 months at this rate, some guidance on how to recompile wnck-applet and/or all of Gnome so I can kill this modification dead would be very, very appreciated. I -hate- the idea of having to run my own build of any part of the window system (since I'll have to pin that and won't be able to accept automatic updates---grrr), but it's better than the current behavior.Please?P.S. The actual patch that started all this is an attachment to this ticket, so if I can figure out what build-deps I need to make the minimally-intrusive recompilation to undo it on my machine, that'd be grand. Lots more discussion about this problem is in, which was marked as a duplicate of this bug.Thank you!Okay, I finally broke down and just made this patch for myself; it turned out to be -way- easier than I thought. (But this should still be reverted here! :)For the benefit of the others following this bug, here's what I did. This was in the Ubuntu Karmic beta on AMD64; you'll have to change the amd64 to i383 if that's your architecture, and make slight changes to version numbers, etc.apt-get install build-essential bzrapt-get build-dep libwncksudo apt-get build-dep libwnckbzr getapt-get source libwnckThen edit libwnck/tasklist.c (currently around lines 1552-3) to comment-out the class_group_task->windows = g_list_sort () stuff (you're reversing the effect of the patch in the attachment to this ticket, but not bothering to undefine the function; that'll give you a harmless compilation warning if you're paying attention).Then:debchange -v 1:2.28.0-0ubuntu1+nosortingdebuild -rfakeroot binarycd ..sudo dpkg -i libwnck-common_2.28.0-0ubuntu1+nosorting_all.deb libwnck22_2.28.0-0ubuntu1+nosorting_amd64.debkillall gnome-panelTo test:for x in $(seq 1 15); do xterm -n $x & doneand note how your window names are now in probably random numerical order (they'd be in numerical order if there was a sleep in there :), and not instead sorted 1 11 12 13 14 15 2 3 4 5 etc. (You'll have to turn on grouping of course by right-clicking in the little widget at the left of the taskbar, since that's what this is fixing).I haven't actually checked to see if the bzr call above contributed any source-code mods that weren't picked up in what I was doing.(The debchange will keep apt-get etc from bugging you about your private package.)Bliss!(Oops---watch out for the linewrap in the dpkg command above.)Createdtasklist: make sure windows in groups are sorted consistentlyRight now, they are sorted by age in some parts of the code andsorted alphabetically in other parts. The desired default(alphabetical ordering) always seems to "win", so we may want todrop the code that sorts it the other way entirely, but for nowat least make both places consistent.Createdtasklist: add new sort policy for windows in groupsRight now the tasklist always sorts grouped windowsalphabetically. This commit adds a new policy"by age" which sorts things in the same order theyshow up ungrouped.Createdwncklet: Add new sorting option for window list groupsRight now window list groups sort their windows alphabetically.This commit adds a new option to the panel preferencesto change the sorting behavior to the same behavior asungrouped windows.I talked to Vincent about this bug a few months ago and he said he was okay with adding a preference here (and I just now got an opportunity to work on it).We have a RHEL customer who's very interested in seeing this get changed. Of course, it may not be as relevant anymore in GNOME 3.(I just wanted to add that these patches are derived from some work initiated by Sean Lee <>)	25.0	id=756359	6	False	False	florian.muellner	1
id=750416	REOPENED	evolution-data-server	Calendar	3.20.x	Other Linux	Normal critical		2015-06-04 20:04 UTC by	Milan Crha	2016-06-27 06:26 UTC (	0 users	Moving this from a downstream bug report:Version-Release number of selected component:evolution-data-server-3.16.2-2.fc22Additional info:reporter: libreport-2.5.1backtrace_rating: 4cmdline: /usr/libexec/evolution-calendar-factory-subprocess --bus-name org.gnome.evolution.dataserver.Subprocess.Backend.Calendarx2539x3 --own-path /org/gnome/evolution/dataserver/Subprocess/Backend/Calendar/2539/3crash_function: g_mutex_clearexecutable: /usr/libexec/evolution-calendar-factory-subprocessglobal_pid: 2630kernel: 4.0.4-303.fc22.x86_64Core was generated by `/usr/libexec/evolution-calendar-factory-subprocess --bus-name org.gnome.evoluti'.Program terminated with signal SIGABRT, Aborted.	I'm not sure whether this change will help with the crash, but it might not hurt at least. I also dind't see any such crash myself yet, thus maybe it's just too rare to be properly debugged.Created commitin eds master (3.17.3+)Created commitin eds gnome-3-16 (3.16.3+)Reopening, the change didn't help, as the same crash was reported at:That means that the actual issue is somewhere else than I initially thought.And in 3.20.3:	3.0	id=776267	5	False	False	desrt	1
id=756359	REOPENED	polari	general	3.18.x	Other Linux	Normal blocker	Polari maintainers	2015-10-10 21:14 UTC by	Kat	2015-10-28 17:07 UTC (	1 user	The "copyright" notice in the polari About dialog currently lists "© 2013 Red Hat, Inc." as the sole copyright holder for the application. This is not true unless all developers have assigned their copyright to Red Hat. As GNOME does not partake in copyright assignment as a project, I hope that this is a simple mistake which will be fixed.All contributors who have made a non-trivial contribution to the project hold the copyright for their work. There are exceptions in some countries where the employer holds the copyright for the work done as part of the employment agreement (which is why I assume Red Hat appears there at all), but not all contributors are Red Hat employees.	The following fix has been pushed:b52d74b app: Update copyright property in AboutCreatedapp: Update copyright property in AboutNeither are all contributors employed by Red Hat anymore, nor is itstill 2013 - update the copyright accordingly.Hi Florian, thanks for looking at the issue!Unfortunately, "The Polari authors" is not a legal entity either so is equally wrong (although less aggregating).For documentation, we have everyone add themselves to the credits of each file and those are then shown in the copyright notice. For apps, an appropriate equivalent would be to scrape and collate the copyright notices from the headers in each file. I imagine that this can be partially scripted as they should be relatively consistent. The downside is that you'd be relying on people to declare their own claim on copyright.Alternatively, you could use git to get a list of committers, but this would be less accurate as some of those may have made trivial changes which are not copyrightable.Or, you could just give up on it altogether and go for "All contributions © 2013-2015 their respective authors, which can be found at"(In reply to Kat from)It's a pattern used by other GNOME apps though, including core apps.Feel free to provide a patch with a better phrasing for "everyone listed as author in the about dialog" ...(In reply to Florian Müllner from)Just because everyone else does it wrong, doesn't mean that polari needs to as well :) It's a legal issue because the copyright is mis-attributed right now.Where is this wording seen?(In reply to Kat from)Nowhere, it's what was meant by "Polari authors". I'm seeing that the list of contributors in the about dialog is updated at least for stable releases and contains everyone who arguably made a non-trivial contribution (it's erring heavily on the side of inclusion).Ah, I see what you mean. As you're making the entries manually anyway, why not instead of doing:Florian MüllnerWilliam Jon McCannCarlos Soriano…Do:Florian Müllner (© 2013–2015)William Jon McCann (© 2013)Carlos Soriano (© 2013–2014)…The copyright notice really should have dates and names, so that would be an ideal solution. I'd be happy to provide a patch for that. The downside is that, for example, an employer might technically hold the copyright for the code while the employee is the author. In those cases, we would need to do something which would look more like (just as an example, I don't know what your employment contract says :) ):Florian Müllner (2013–2015)Red Hat Inc. (© 2013–2015)But in that case, the other way to look at it is that they really are a financial contributor to the project as they're paying the developer.What do you think?(In reply to Kat from)Red Hat allows its employees to maintain the copyright on code they write during working hours, but it's common for employees to voluntarily assign copyright to Red Hat (I'm fine with that, as should be obvious from the original (outdated) copyright notice).Jon also was a Red Hat employee at the time of his contributions, so we'd need to ask him. I don't think Giovanni was at the time, and I'm not sure about Carlos Garnacho. Both Bastian and Carlos Soriano were unaffiliated, I don't know for Jonas and Kunaal (and Cody Welsh who will be added to the list)	8.0	id=771815	17	False	False	svetlin.zarev	1
id=718901	REOPENED	shotwell	ux	0.15.1	Other All	High normal	Shotwell Maintainers	2013-04-11 09:24 UTC by	Lucas Beeler	2014-04-23 19:54 UTC (	2 users	---- Reported by2013-04-11 14:24:00 -0700 ----Original Redmine bug id: 6803Original URL:Searchable id: yorba-bug-6803Original author: Lucas BeelerOriginal description:We expect the text to grow vertically to accomodate the special, RAW-onlyextended properties fields. But the text also shifts horizontally. The visualeffect is that the content of the Extended Information pane seems to "jump."This doesn't look good.---- Additional Comments From2013-10-13 07:10:00 -0700 ----### History#####1Updated by Jim Nelson 6 months ago * **Target version** deleted (<strike>_0.15.0_</strike>)#####2Updated by Joe Bylund about 1 month ago * **File** 6803.patch added * **Target version** set to _0.16.0_This wraps a couple of the longer properties & requests a minimum width forthe property labels.-Joe#####3Updated by Jim Nelson about 1 month ago * **Status** changed from _Open_ to _Review_Thanks, Joe!--- Bug imported by2013-11-25 21:58 UTC ---This bug was previously known as _bug_ 6803 atImported an attachment (id=262596)Unknown milestone "unknown in product shotwell. Setting to default milestone for this product, "---".Setting qa contact to the default for this product. This bug either had no qa contact or an invalid one.Resolution set on an open status. Dropping resolution CC memberdoes not have an account hereThe original submitter ofwas, but he doesn't have an account here. Reassigning to the person who moved it here:.	Joseph, I missed this patch in the move to GNOME. I can't reproduce the described problem with current master, so I can't see how this patch fixes anything. Can you tell me how to repro this so I can see how this patch helps?Never mind, Joseph, I figured out what's going on here. Will push your patch in a minute.Pushed to master, commit 7f6d4cJoseph, I had to revert this commit after all. It does solve the problem with the Extended Information window but introduces a bug in the Basic Information pane. All the text there is pushed to the right.	4.0	id=309364	19	True	True	mpgritti	1
id=638808	REOPENED	evolution	Mailer	3.10.x (obsolete)	Other Linux	Normal critical		2011-01-06 10:45 UTC by	Milan Crha	2014-02-24 09:34 UTC (	3 users	Moving this from a downstream bug report:abrt version: 1.1.14architecture: i686Attached file: backtracecmdline: evolutioncomponent: evolutioncrash_function: PK11_DestroySlotexecutable: /usr/bin/evolutionkernel: 2.6.35.10-72.fc14.i686.PAEpackage: evolution-2.32.1-1.fc14rating: 4reason: Process /usr/bin/evolution was killed by signal 11 (SIGSEGV)release: Fedora release 14 (Laughlin)time: 1293497778uid: 500How to reproduce-----1. Open Evolution2. Work for 10 hours3. Close Evolution and CrashCore was generated by `evolution'.Program terminated with signal 11, Segmentation fault.	After Dan Williams' investigation atit turned out that camel_shutdown() is called too early, which is causing crashes like this. See the downstream bug for more details.Createdevo patchfor evolution;Calls camel_shutdown() only after the EMailBackend is finalized, and actually frees backends on EShell finalize too, so this all can safely work.Created commitin evo master (2.91.6+)Created commitin evo gnome-2-32 (2.32.2+)A user from the downstream bug requested reopening this, because he sees the issue in 2.32.2, thus I'm doing so.And here is one from 3.2.2:libreport version: 2.0.7abrt_version: 2.0.6backtrace_rating: 4cmdline: evolutioncomment: I Closed Evolution? It seemed to have crashed on close.crash_function: pk11_Finalizeexecutable: /usr/bin/evolutionkernel: 3.1.2-1.fc16.x86_64pid: 2748reason: Process /usr/bin/evolution was killed by signal 11 (SIGSEGV)time: Thu 01 Dec 2011 11:05:09 AM ESTCore was generated by `evolution'.Program terminated with signal 11, Segmentation fault.Same as from 3.4.4:I've just got a duplicate from 3.10.4, atThinking of it, this might be fixed, as a side effect, by commits:which were done for 3.12.0.	7.0	id=767588	15	False	True	lmy441900	1
id=776529	REOPENED	gnome-shell	general	3.20.x	Other Linux	Normal critical		2016-12-27 20:55 UTC by	Cristian Aravena Romero	2017-02-08 00:56 UTC (	2 users	Open bug in Launchpad.net"Occurred during start-up, before I did anything special...1 Ubuntu Wily Werewolf (development branch) 15.102 3.16.3-1ubuntu63&4 not applicable"BackTrace:	Hi Cristian, Thanks for taking the time to report this bug.However, you are using version 3.16.x which is too old and not supported anymore by GNOME developers. GNOME developers are no longer working on that older version, so unfortunately there will not be any bug fixes by GNOME developers for the version that you use.By upgrading to a newer version of GNOME you could receive bug fixes and new functionality. You may need to upgrade your Linux distribution to obtain a newer version of GNOME.Please feel free to reopen this bug if the problem still occurs with a recent version of GNOME, or feel free to file a bug report in the bug tracking system of your Linux distribution if your distribution still supports your version 3.16.xPackage: gnome-shell 3.20.4-0ubuntu2~ubuntu16.04.1 [origin: LP-PPA-gnome3-team-gnome3-staging]@Cristian: Stacktrace looks like a duplicate of?also looks a little bit similar.Is there an updated stacktrace from 3.22 or 3.20 with symbols available? If so, can you please post it here?As this is likely Mutter and not gnome-shell, is there something relevant in the journal log?This looks like an XWayland crash. There are plans to reduce the dependency on XWayland in the future (see), but for now that's a fatal error I'm afraid ...	5.0	id=776529	7	False	False	a9016009	1
id=776267	REOPENED	glib	gdbus	2.50.x	Other Linux	Normal critical		2016-12-19 11:48 UTC by	Milan Crha	2017-01-02 12:12 UTC (	1 user	This is reported downstream as:Reading the backtrace there, it seems to me that the main thread is processing a D-Bus signal, while another thread is unreferencing the last reference to that same GDBusObjectManagerClient instance.I would suggest two things:a) the signal handler should reference the object manager for thread safetyb) the signal handler is disconnected early in the dispose(), instead of in the finalize(); this might make it ignore the signals early enoughBelow is the relevant part of the backtrace. Ignore thread numbers, this is from an ABRT bug report, where 'Thread 1' usually means the crashing thread, not the main thread.	You can't unref GObject objects in random threads. Unless the object is explicitly threadsafe (and this one definitely isn't) you should only be using it in the thread in which you created it.Specifically: because this object follows the standard GIO pattern of emitting callbacks into the per-thread default main context under which it was created, you can't just pass it between threads (or more specifically: between main contexts).Sure, why not. It's what the code does exactly. See the e_goa_password_based_lookup_sync() [1] which is called from a dedicated thread.The function creates a completely new GoaClient, then it gets out of it GoaAccount and some other objects, all referenced. The line of the crash is still inside this function, when the GoaClient is unreferenced.You can see that it's just the way you wanted it to be, no related GDBus object is transferred between any threads.I can see a little flaw in the code, the GoaClient is unreferenced before the objects taken out of it, though I think it's not the cause of the issue.[1]	2.0	id=638808	13	False	False	yann	1
id=673655	REOPENED	gtranslator	Parse engine	HEAD	Other Linux	Normal critical		2012-04-06 18:23 UTC by		2016-08-10 17:40 UTC (	4 users	If I translated an po before, it may be like this in it header# YunQiang Su <>, 2010, 2011.Then if I translate it now, it will be # YunQiang Su <>, 2010, 2011,2012.The format of po file is broken. :(	Weird, it should not add a \n there... With which version does this happen?2.90.8 ， the one in Debian Unstable.It also add an \n before the line# YunQiang Su <>, 2010,2011.# Zhang San <>, 2011.-------------->>>>>># Zhang San <>, 2011.# # YunQiang Su <>, 2010,2011,2012.This problem was reported against a version which is not supported anymore.Could you please check again if the issue you reported here still happens in a recent version of GNOME and update this report by adding a comment, adjusting the 'Version' field, and resetting the status of this bug report from NEEDINFO to its previous status?Without feedback this report might get closed as INCOMPLETE after a while.Again thank you for reporting this problem. We are sorry that it could not be fixed for the version that you originally used here.Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!I see PO files broken by gtranslator being committed to git all the time:	5.0	id=673655	12	False	False	nacho.resa	1
id=673912	REOPENED	grilo	plugins	git master	Other Linux	Normal critical		2012-04-11 14:44 UTC by	Bastien Nocera	2014-05-12 22:12 UTC (	3 users	Using git master. Looks like missing escaping.(grilo-test-ui:24869): Grilo-WARNING **: [metadata-store] grl-metadata-store.c:230: Failed to get metadata: unrecognized token: "' LIMIT 1"	The code needs to use sqlite3_bind_*()For example:3 plugins will need changes:$ git grep -l sqlite3_opensrc/media/bookmarks/grl-bookmarks.csrc/media/podcasts/grl-podcasts.csrc/metadata/metadata-store/grl-metadata-store.cCreatedmetadata-store: Fix GET SQL injectionNot sure whether that actually works.More documentation at:and:commit 2414933730ca17ffe08be68a5faec8ccec9b4630Author: Bastien Nocera <>Date: Thu Apr 12 15:58:19 2012 +0100 metadata-store: Fix GET SQL injectionsrc/metadata/metadata-store/grl-metadata-store.c | 14 +++++++------- 1 files changed, 7 insertions(+), 7 deletions(-)That's _1_ broken use. There's 2 more in the same plugin, and at least 2 more plugins to fix.Createdbookmarks: Use gom to access the databaseInstead of SQLite directly.gom is currently available at:Fixes:- No injection security holes- Easy DB extensionFunctional changes:- Boxes don't have a childcount anymore- Query has a different syntax which more closely matches the database names (as opposed to the undiscoverable names used in the queries)- Orphans are cleaned up on startup rather than when removing items2 things to note:- Storing a new bookmark throws an error about non of the keys being writable, but still creates the item- You'll need gom plus a few patches that Christian will commit shortlyPatch looks good. You might want to add a comment in the resource class about it not being okay to mutate local state while an async operation is pending. (thread-safety, etc). Since the save() operation will happen in the sqlite thread.We might want to do something like G{Input,Output}Stream to check if there are pending operations inside of GomResource to make debugging this situation easier.(In reply to)Actually, more worrying is the sync operations running in the main thread, while async runs in the SQLite thread. I'd rework the sync calls to go through the SQLite thread. The job would be pushed onto the SQLite thread using the queue, and we'd wait until it was finished using a condition (GCond).Isn't locking good enough?So, this:diff --git a/gom/gom-adapter.c b/gom/gom-adapter.cindex 367c466..a02d643 100644--- a/gom/gom-adapter.c+++ b/gom/gom-adapter.c@@ -50,6 +50,8 @@ gpointer gom_adapter_get_handle (GomAdapter *adapter) { g_return_val_if_fail(GOM_IS_ADAPTER(adapter), NULL);+ g_return_val_if_fail(adapter->priv->thread != NULL, NULL);+ g_assert (g_thread_self () == adapter->priv->thread); return adapter->priv->db; }And fix the bugs. That would also allow me to implement a sync open() and close() which would be useful for this particular plugin.Createdbookmarks: Use gom to access the databaseInstead of SQLite directly.gom is currently available at:Fixes:- No injection security holes- Easy DB extensionFunctional changes:- Boxes don't have a childcount anymore- Query has a different syntax which more closely matches the database names (as opposed to the undiscoverable names used in the queries)- Orphans are cleaned up on startup rather than when removing itemsCreatedbookmarks: Remove unused struct memberCreatedbookmarks: Don't use g_strconcat() to build pathsUse g_build_filename() instead.Createdbookmarks: Also save thumbnail URLCreatedcore: Don't try to store metadata if already savedWhen storing an item, don't try to call store_metadata() ifthere are no keys left to write.This fixes warnings in grilo-test-ui when trying to create a newbookmark as all the possible metadata we'd add will alreadybe handled.(In reply to)That's fixed by the patch to core above.Any idea if GOM will do a release soon?Comment oncore: Don't try to store metadata if already savedpushed as- core: Don't try to store metadata if already savedI've pushed my GOM patches toso that should be ready for testing and review.(In reply to)Does your repository contain all the required patches? Or some patch for the plugin that you didn't upload here?I've tried to build it using the above gom repository, and it is failing.For instance, complains about gom_repository_migrate_async() function (expected parameters doesn't fit with the signature).Createdbookmarks: Use gom to access the databaseInstead of SQLite directly.gom is currently available at:Fixes:- No injection security holes- Easy DB extensionFunctional changes:- Boxes don't have a childcount anymore- Query has a different syntax which more closely matches the database names (as opposed to the undiscoverable names used in the queries)- Orphans are cleaned up on startup rather than when removing itemsCreatedbookmarks: Also save thumbnail URLCreatedbookmarks: Use gom to access the databaseInstead of SQLite directly.gom is currently available at:Fixes:- No injection security holes- Easy DB extensionFunctional changes:- Boxes don't have a childcount anymore- Query has a different syntax which more closely matches the database names (as opposed to the undiscoverable names used in the queries)- Orphans are cleaned up on startup rather than when removing itemsCreatedbookmarks: Also save thumbnail URLpushed as- bookmarks: Remove unused struct memberpushed as- bookmarks: Don't use g_strconcat() to build pathspushed as- bookmarks: Use gom to access the databasepushed as- bookmarks: Also save thumbnail URLI'm using, and when building the bookmarks source I get this error:grl-bookmarks.c: In function `grl_bookmarks_source_init':grl-bookmarks.c:251:3: error: implicit declaration of function `gom_repository_automatic_migrate_async' [-Werror=implicit-function-declaration]Seems that function is not available in the current GOM repository. Do I miss something?On the other hand, what remains to close this bug?(In reply to)That's not the current gom repository. It lives in GNOME git:and:Fixing all the other plugins (podcasts, and metadata-store from the looks of it), or porting them to gom.	27.0	id=633048	18	False	False	dominik.mayer	1
id=747860	REOPENED	epiphany	General	3.16.x (obsolete)	Other Linux	Normal critical	Epiphany Maintainers	2015-04-14 15:20 UTC by	Andres Gomez	2016-10-07 22:38 UTC (	5 users	WKGTK 2.8.0 and Epiphany 3.16.0Epiphany is running with the dconf key:"process-model" = "shared-secondary-process"---In last epiphany versions I've noticed an annoying regression.Previously, when ephy would crash, I would know that my open tabs would be safely stored in $HOME/.config/epiphany/session_state.xmlIn the last months (at least since October 2014), I've noticed that the session_state.xml is not always saved correctly. Quite often, after a crash, the tabs that were not loaded during the session will be stored as about:blank.With "tabs that were not loaded during the session" I mean, in the simplest example:I run a clean epiphany session -> 1 window with 1 tab.I open a second tab in the window. The tab is loaded. I come back to the first tab. I closed epiphany completely.I open epiphany again -> 1 window with 2 tabs. The tab that I was visiting when I closed the previous session is the one focused and the one loaded. The other tab won't load until I visit it.Now, without having the second tab loaded, ephy crashes.I open epiphany again -> 1 window with 2 tabs. The tab that I didn't visit in the last crashed session and, hence, didn't load, has lost its bookmark and now points to about:blank.	Similar to, although not the same.Similar to, although not the same.Still happening in Epiphany 3.18.0 and WebKit 2.10.5Createdephy-session: Save the pending API request URL if EphyWebView address is about:blankReview of:Yay, this one had me stumped.pushed as- ephy-session: Save the pending API request URL if EphyWebView address is about:blank***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I didn't reopen at the time becausewas still open with a similar problem. Now that it has been closed as WONTFIX, it makes sense to reopen this one since it is the one that describer closely the problem.This is still reproducible in the latest versions of WKGTK+ and Ephy. The difference is that it just happens less often.Usually, a single crash will be recovered properly but, sometimes, if after a crash, we open again and we DO NOT reload every single tab by revisiting it, if it crashes again, then we lose those unloaded tabs for good. This is not reproducible 100% but it is not that difficult to reproduce either.	9.0	id=747860	13	False	True	mcatanzaro	1
id=633048	REOPENED	gthumb	general	2.12.x	Other Linux	Normal critical	Paolo Bacchilega	2010-10-24 18:38 UTC by	Dominik Mayer	2015-12-21 09:40 UTC (	4 users	Rotating an image in gThumb deletes most of the EXIF metadata.Before:$ exiftool 2010-06-21\ -\ 14-03-33.jpg ExifTool Version Number : 8.21File Name : 2010-06-21 - 14-03-33.jpgDirectory : .File Size : 1473 kBFile Modification Date/Time : 2010:06:21 08:03:34+02:00File Permissions : rw-r--r--File Type : JPEGMIME Type : image/jpegExif Byte Order : Little-endian (Intel, II)Make : FUJIFILMCamera Model Name : FinePix F31fdOrientation : Horizontal (normal)X Resolution : 72Y Resolution : 72Resolution Unit : inchesSoftware : Digital Camera FinePix F31fd Ver1.00Modify Date : 2010:06:21 14:03:33Y Cb Cr Positioning : Co-sitedCopyright : Exposure Time : 1/50F Number : 2.8Exposure Program : Program AEISO : 800Exif Version : 0220Date/Time Original : 2010:06:21 14:03:33Create Date : 2010:06:21 14:03:33Components Configuration : Y, Cb, Cr, -Compressed Bits Per Pixel : 2Shutter Speed Value : 1/49Aperture Value : 2.8Brightness Value : 0.53Exposure Compensation : 0Max Aperture Value : 2.8Metering Mode : Multi-segmentLight Source : UnknownFlash : Off, Did not fireFocal Length : 8.0 mmVersion : 0130Internal Serial Number : FC HA900214 592D31323732 2006:11:09 85A3301088B2Quality : NORMALWhite Balance : AutoSaturation : NormalFuji Flash Mode : OffFlash Exposure Comp : 0Macro : OffFocus Mode : AutoFocus Pixel : 1424 1068Slow Sync : OffPicture Mode : Program AEAuto Bracketing : OffSequence Number : 0Color Mode : StandardBlur Warning : Blur WarningFocus Warning : GoodExposure Warning : GoodDynamic Range : StandardFaces Detected : 0Flashpix Version : 0100Color Space : sRGBExif Image Width : 2848Exif Image Height : 2136Interoperability Index : R98 - DCF basic file (sRGB)Interoperability Version : 0100Focal Plane X Resolution : 3703Focal Plane Y Resolution : 3703Focal Plane Resolution Unit : cmSensing Method : One-chip color areaFile Source : Digital CameraScene Type : Directly photographedCustom Rendered : NormalExposure Mode : AutoScene Capture Type : StandardSharpness : NormalSubject Distance Range : UnknownPrintIM Version : 0250Compression : JPEG (old-style)Thumbnail Offset : 1434Thumbnail Length : 8664Image Width : 2848Image Height : 2136Encoding Process : Baseline DCT, Huffman codingBits Per Sample : 8Color Components : 3Y Cb Cr Sub Sampling : YCbCr4:2:2 (2 1)Aperture : 2.8Image Size : 2848x2136Scale Factor To 35 mm Equivalent: 4.5Shutter Speed : 1/50Thumbnail Image : (Binary data 8664 bytes, use -b option to extract)Circle Of Confusion : 0.007 mmField Of View : 53.1 degFocal Length : 8.0 mm (35 mm equivalent: 36.0 mm)Hyperfocal Distance : 3.42 mLight Value : 5.6After:$ exiftool 2010-06-21\ -\ 14-03-33.jpg ExifTool Version Number : 8.21File Name : 2010-06-21 - 14-03-33.jpgDirectory : .File Size : 1400 kBFile Modification Date/Time : 2010:10:24 20:31:42+02:00File Permissions : rw-r--r--File Type : JPEGMIME Type : image/jpegJFIF Version : 1.01Resolution Unit : NoneX Resolution : 1Y Resolution : 1Image Width : 2136Image Height : 2848Encoding Process : Baseline DCT, Huffman codingBits Per Sample : 8Color Components : 3Y Cb Cr Sub Sampling : YCbCr4:4:0 (1 2)Image Size : 2136x2848	Hi Dominik,I don't have the problem, using latest git master as of today (only a few commits after 2.12.0)To be precise I'm loosing 6 and gaining 2 fields (out of 153).Can you attach your image example for us to reproduce?Cheers,MatthiasHi Matthias,the image is to large to be attached. I uploaded it to Picasa Web Albums:.Cheers,DominikI did some more testing and it seems that for whatever reason the exif, iptc, xmp plugin was not enabled. If this is not the default setting and just happened to me, the bug can be marked as resolved.I consider the user should be informed that, since he/she hasn't the exif/iptc/xmp plugin(s) installed, he/she is going to loose the metadata.Until that information isn't provided, I consider this a serious bug, beeing a data loss one.I'm with Paolo. The user doesn't expect he/she will also lose metadata already stored in images once he/she disables the plugin.I would change the bug title to "Loosing exif data if exif/iptc/xmp plugin(s) not installed"If the exif plugin is disabled, exif metadata isn't saved. I don't think that is unexpected.The exif plugin is enabled by default, so exif data loss will only occur if the user explicitly disables this plugin.The original reporter was bitten by, probably, which prevented the the default plugins from actually being enabled. That was the real problem.Closing this bug as NOTABUG.- MikeI disagree. I'm not a gthumb developer, I'm an ordinary user. If I read "don't save exif metadata" I think that the tags or the description I add to a picture are not saved in the file. I do not expect that already existing metadata is deleted by rotating an image. Especially because this kind of jpeg rotation is usually lossless.I agree with Dominik. Suppose you inadvertently disable exif plugin, a thing that could pass to a newbie.From that moment, he would be loosing all exif data. Until he realizes he shouldn't have disabled that plugin!At least an advice of serious data loss should be shown on disabling the plugins that give data loss.And maybe also show a warning before performing the transformation. Rotating an image does usually not involve a second step where you can save or abandon the changes so there's no way to undo the damage.There are numerous use cases: Newbie disables plugin without knowing what it does (I'd argue that this could also happen to experienced users), someone else (family, spouse) uses the computer, ...I think this bug should be reopened, because the ordinary user could get an unexpected data loss without knowing it and without any simple mean to understand that it is happening.The user must receive at least a notice.@Dominik, please reopen itDone.	12.0	id=750416	5	False	False	mcrha	1
id=763531	REOPENED	gnome-shell	overview	3.20.x	Other Linux	Normal critical		2016-03-12 12:33 UTC by		2016-08-23 03:46 UTC (	2 users	I am in need of doing some diagnostics work with "xdiagnose", however when searching for it in the Activities Overview, and then clicking on it, absolutely nothing happens, when in the past it would ask me for my password so that I could run it as root.I looked further into the issue and when trying to run it through Terminal: xdiagnoseThis was the output I got: Error: Must run as superuserBut when running it in Terminal like so: pkexec xdiagnoseIt prompted for the password as it normally would and should (so pkexec is not the issue).There was also no output from the command: grep -r 'xdiagnose' ~/.local/share/applicationsAnd the output of this command "grep -r 'xdiagnose' /usr/share/applications" was: /usr/share/applications/xdiagnose.desktop:Name=xdiagnose /usr/share/applications/xdiagnose.desktop:Exec=pkexec xdiagnose /usr/share/applications/xdiagnose.desktop:Icon=/usr/share/xdiagnose/icons/microscope.svg /usr/share/applications/xdiagnose.desktop:X-Ubuntu-Gettext-Domain=xdiagnoseThe contents of the file is this: [Desktop Entry] Name=xdiagnose GenericName=Diagnose Graphics Issues Comment=X.org Diagnostic and Repair Utility Exec=pkexec xdiagnose Icon=/usr/share/xdiagnose/icons/microscope.svg Terminal=false Type=Application Categories=System;Settings; X-Ubuntu-Gettext-Domain=xdiagnoseI have reinstalled it with "sudo apt-get install --reinstall xdiagnose", however this seems to have made no difference at all to anything.I have also attempted to launch another application via the Activities Overview that uses 'pkexec' to start, and it works fine as normal.I initially experienced this issue on Ubuntu GNOME 15.04 with GNOME 3.16, then on Ubuntu GNOME 15.10 with GNOME 3.18, and now on Ubuntu GNOME 16.04 with GNOME 3.19. Though I remember a time when this issue wasn't present (probably when I was running Ubuntu GNOME 15.04 with GNOME 3.14 - I will test it and then update the report).I also initially report this issue here but thought I should also do so upstream:	Sorry, it seems that I am unable to get an Ubuntu GNOME 15.04 (EOL) version anywhere legit so I will be unable to test whether or not it works there with GNOME 3.14.I am still experiencing this issue on Ubuntu GNOME 16.04 with GNOME 3.20.I have tested this on Ubuntu Unity 16.04, and it works fine so this is most likely a GNOME issue.The fix in this bug report:Seemingly fixes the issue so I am closing this bug as it appears to have been a downstream issue even though strangely not affecting all and not affecting my Unity VM at the time.Just because it was worked around in Ubuntu and just because it doesn't affect Unity does not mean that it's a Ubuntu-specific issue. Someone will need to do more investigation to find out what made 'pkexec xdiagnose' stop working from GNOME Shell's Activities Overview since this may affect other apps that try to do that too. A wrapper script whose only contents is "pkexec xdiagnose' is just a workaround.A bug that affects gnome-shell in Ubuntu but not gnome-shell in Fedora or other distros might be a downstream bug if Ubuntu did something different in their gnome-shell packaging related to the bug. From your bug report, you haven't tested gnome-shell in other distros.	6.0	id=673912	22	False	False	bugzilla	1
id=736077	REOPENED	libxslt	general	unspecified	Other Linux	Normal critical	Daniel Veillard	2014-09-04 20:24 UTC by		2017-02-16 22:11 UTC (	6 users	When process some files, xsltproc met bus error on some architecture, include armhf, mips64el, i386 etc.This problem make lots of packages ftbfs on Debian.When try to use gdb or valgrind, we cannot get crash.With '--verbose', we can get crash, wish it be helpful.Seefor more details	Createdexample for bus errorCreatedexample for bus error 1Createdverbose log for xsltproc bus errorCreatedgdb backtrace of errorCan you please- Use gzip if you attach compressed files.- Try to reduce the problem to a short, self-contained test case.- If that's not possible, tell us at least which version of docbook.xsl produced the error.Hmm, the call trace is 5381 functions deep and definitely looks like a stack overflow from a recursive XSLT template. Your options are:- Increase stack size.- Isolate the recursive template that causes the error and ask the docbook-xsl maintainers whether they can replace it with a non-recursive version.***has been marked as a duplicate of this bug. ***See this thread for a patch to docbook-xsl that fixes the issue:SeeA few versions of the linux kernel around 3.19 and 4.0 laid out the memory inPIE executables on 32 bit machines in a way that gives the stack and heap very little room and they bang into each other.(In reply to Douglas Bagnall from)Well, it doesn't seem to be limited to 32-bit architectures. We're seeing this issue on sparc64 as well and apparently also on mips64el (although I don't know whether it has been fixed on this architecture already).Adrian(In reply to Douglas Bagnall from)Even kernel 4.3.3 does not make a difference on sparc64, unfortunately:So this is apparently a bug in xsltproc. It shouldn't segfault under any circumstances when churning input files.AdrianHello!Is there any chances that xsltproc is somehow improved? I don't agree that this isn't a bug in xsltproc as the application randomly segfaults on various platforms:It's really starting to become annoying as it hinders the porting efforts for Debian on sparc64 as well randomly lets packages to build from source on platforms like FreeBSD.AdrianThe root cause of the issue is excessive stack usage by recursive templates. A proper fix would require tail call optimization in libxslt which is unlikely to be implemented.***has been marked as a duplicate of this bug. ***	14.0	id=333071	27	False	False	nico.kaiser	1
id=162976	REOPENED	gnome-panel	panel	2.18.x	Other other	Normal critical	Panel Maintainers	2005-01-05 02:12 UTC by	Luis Villa	2009-07-24 17:38 UTC (	2 users	Distribution: Debian 3.1Package: gnome-panelSeverity: criticalVersion: GNOME2.9.3 2.9.xGnome-Distributor: UbuntuSynopsis: 'delete this panel' hangs panelBugzilla-Product: gnome-panelBugzilla-Component: PanelBugzilla-Version: 2.9.xDescription:Description of the crash:I did right-click->'delete this panel' and the panel hung. No idea ifthis is reproduceable or not.Debugging Information:Backtrace was generated from '/usr/bin/gnome-panel'(no debugging symbols found)Using host libthread_db library "/lib/tls/i686/cmov/libthread_db.so.1".(no debugging symbols found)`system-supplied DSO at 0xffffe000' has disappeared; keeping itssymbols.(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)[Thread debugging using libthread_db enabled][New Thread -1222954336 (LWP 6091)][New Thread -1226028112 (LWP 6181)][Thread debugging using libthread_db enabled][New Thread -1222954336 (LWP 6091)][New Thread -1226028112 (LWP 6181)](no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)(no debugging symbols found)0xffffe410 in __kernel_vsyscall ()------- Bug moved to this database by2005-01-04 21:12 -------Unknown platform unknown. Setting to default platform "Other".Unknown milestone "unknown" in product "gnome-panel". Setting to default milestone for this product, '---'Setting to default status "UNCONFIRMED".Setting qa contact to the default for this product. This bug either had no qa contact or an invalid one.	I can't reproduce.Luis: is it reproducable? If so, any chance we can have a better stack trace?I got this bug too. It happens when an applet is stuck and doesn't want to exit.Right now, the easiest way to reproduce is to have two battstat applets.I can't reproduce with Gnome 2.13no duplicates - marking OBSOLETEIt's still possible to reproduce. Just run an applet in gdb and set a breakpoint somewhere to block the applet.Updating version as per last comment.	6.0	id=736077	12	False	False	wzssyqa	1
id=333071	REOPENED	f-spot	Browsing	CVS	Other Linux	Normal critical	F-spot maintainers	2006-03-02 00:13 UTC by	Larry Ewing	2008-10-09 17:03 UTC (	18 users	people are reporting problems with getting Xlib: unexpected async reply (sequence 0x74ff1)during normal use. This typicall means a thread is making X calls but I haven't yet found a place where that could happen. The problem seems to happen much more often on SMP systems which would also point to a locking issue.has some details.	are the two of you still able to reproduve this? I can't on my dual opteron 64I am at least, but it doesn't seem to happen so often as before. Earlier it happened often just during normal usage. Now I have scrolled and scrolled and scrolled to reproduce it. I think it's way more seldom now. Which is good :)I get this a lot! I am using an SMP kernel on a CPU wit hyperthreading. It typically comes when I browse images (scrolling up/down I think). Should I keep an eye on something specific?Anders, can you do anything in specific to cause it? What version of f-spot are you using?I'm still using 0.1.10, so maybe this isn't the most updated information.I have just reproduced it by scrolling up and down, double clicking on a picture and made a fast double click to get back to browsing before the picture was completly updated (and I didn't get back).That's usually what I do as well when this happens, but I have no way to reliably reproduce it. Sometimes it happens just when scrolling, other times it happens when doing what Anders just said. But it seems very intermittent.Still the same for me. Ubuntu Dapper with P4 and HyperthreadingIs there anything I can provide to fix this bug? It's more than annoying not being able to use SMP only because of F-Spot...I found a comment on the Mono Gtk FAQ:As per the link in, it looks to be a call to Gtk+ that are done from outside the thread that invoked Application.RunHave you been able to come up with a step-by-step of how to reproduce it?There is not particular step-by-step of how to reproduce it because it does not happen everytime at the same time. "Start up F-Spot and scroll around a bit and/or view some images" would be the most accurate description, however this is not very detailed...It is also my experience that there is no step by step reproducing method to get the crash. When I use f-spot it happens within 5 minutes if I do something real that requires scrolling. It seems like fast operations with the scroll wheel increases the chance of an async, but that could simply be because it can happen a lot more places.The problem seems to have disappeard for me. Some days ago i shiftet profile in gentoo, and thought that it might be a good idea to recompile all packages where the flags have been changed.I have a list of recompiled packages. I think the following is the problem:dev-lang/mono-1.1.13.4 was not compiled with the nptl flag before but is now. nptl is Native POSIX threads library.I get this on FreeBSD since the first time I tried F-Spot. What should I do to debug?FreeBSD 6.1-STABLEMono JIT compiler version 1.1.13.6 TLS: normal GC: Included Boehm (with typed GC) SIGSEGV : altstackGnome f-spot 0.1.11***has been marked as a duplicate of this bug. ***As per,this does not seem to be the problem with Ubuntu (which already is compiled with --with-tls=__thread (which seems to have superseeded --with-nptl=yes).Still seeing this bug.The problem has reappeared for me. Either it was something else or I just had a lucky day.I've just commited a patch I hope might resolve this to cvs. Please test and provide feedback.Still there... It _might_ have gotten better, because it was really hard to reproduce tonight (but sometimes it is very hard to reproduce), but it's not gone, unfortunately :(Totally unrelated with this bug, but I got a crash with this message once as well:The program 'f-spot' received an X Window System error.This probably reflects a bug in the program.The error was 'BadRequest (invalid request code or no such operation)'. (Details: serial 608224 error_code 1 request_code 233 minor_code 0) (Note to programmers: normally, X errors are reported asynchronously; that is, you will receive the error a while after causing it. To debug your program, run it with the --sync command line option to change this behavior. You can then get a meaningful backtrace from your debugger if you break on the gdk_x_error() function.)with 0.3.0 I'm completely unable to reproduce this testing on a dual opteron. Can you still reproduce it? Have you gotten any closer to figuring out how to produce it?FWIW, i used to have this also, but it has been quite a while already since I last had this.I just got it again, with latest cvs from tonight. But it's became much more seldom lately. I have used it a couple of days for tagging a lot of new images, and it was just today I got the infamous message...I was thinking, this is a rather slow SMP system, could that be the reason none of you others are seeing it? Because your systems are way faster?I have also seen this. It has occurred twice during startup. F-spot draws one or two pictures in the browser then hangs. On the terminal I see the message about unexpected async reply.uname -a Linux apfitch2 2.6.18-1.2869.fc6 #1 SMP Wed Dec 20 14:51:19 EST 2006 i686 i686 i386 GNU/LinuxF-spot from cvs last night (3 jan 1:20 GMT)AlanHi there!I would like to continue this issue, because I started work on some dual core (i686) machines under linux 2.6. (basicaly debian stable) and run into severe problems with threads. I use python with thread support and trying hard to work correctly with thread_enter and thread_leave commands in my idle callbacks...It does not appear on single core machines and could be reproduced with gtk 2.8 and gtk 2.10.Are there any news to this bug?Still experience this as of svn r3207.0.3.5 under debian does this often on dualcore smp cpu.it seems to happen when i scroll while f-spot access the db in the back, at least it usually happens on console between open uri = ...entries. sometimes happens when i tag something and change back to browse mode too fast. almost always seem to be related to screen refresh while accessing the db, but i only guess.Keeping the other bug, as it has more recent activity.*** This bug has been marked as a duplicate of******has been marked as a duplicate of this bug. ***Thank you, Stephane! I really disagreed with Lorenzo's decision, but he have more bugzilla points than me :PI can confirm Peter's observation that it seems to always be related to screen refresh while accessing the db. Or something. It has nagged me for almost four years now.***has been marked as a duplicate of this bug. ***On Debian Sid, with f-spot from SVN, I can still reproduce. This is the best stack trace I could get:It clearly shows that thread5 sent a request to X, but unfortunately not where it did that.Got this now, by installing xcb debug symbols and breaking in xcb_send_request in all threads but 1:(gdb) btI can probably get more by rebuilding gtk-sharp with debug symbols, but maybe that's enough to figure out the problem?Johan, am not sure your issue is the same as the xlib async reply(In reply to)Hmm it sure looks very much like the same. Debian is now using xlib / xcb, but the assertion failing in xcb is precisely about sequence number mismatch in x messages.I'm getting this now, with 0.4.3.1. It's kinda sudden, and may be related to the gnome 2.23.9x that I have installed. It reliably happens to me when browsing pictures in the "big image with little thumnails on top" mode. Just hitting next for 5-10 times causes the hang.Update: It's hugely less likely to happen if I turn off the filmstrip. I had to browse several hundred pictures to get it to happen.I can confirm this is still happening with f-spot 0.5.0.2. Problem is however that it is quite hard to reproduce. I've got a feeling that it is highly more likely to happen when you are browsing around without waiting for each picture to be loaded completely. That is continue browsing when the current image is still blurred.If anybody has got any idea as to how I can try to debug this problem, or produce somehow useful debug output I'd be glad to help.	36.0	id=162976	12	False	False	aes	1
id=779123	REOPENED	glib	gio	unspecified	Other Linux	Normal major		2017-02-23 08:50 UTC by	Manfred Egger	2017-02-23 14:05 UTC (	3 users	CreatedScreenshot of file not beeing copied in nautilus ;-)I have many cifs mounts via fstab. After upgrading to kernel 4.9, it's not possible to copy or move files from those mounts in nautilus. The copied file is created, but it never receive the contents (so the file has 0 bytes file size) and the progress indicator never finishes. If the same share is mounted via gvfs, it is working. Also if i copy the files via other tools like the terminal. The error only occurs in nautilus.Example line from fstab://remote/www /directory cifs credentials=.credentials,uid=1000,gid=1000,nobrl,cache=none 0 0With kernel 4.8 (in fact latest tested and working kernel was 4.8.13) everything worked. With kernel 4.9 (tested with 4.9.6, 4.9.7, 4.9.11) the described problem occured.Tested this on my Arch Linux machine (gnome 3.22.2) as well as the latest openSuse Tumbleweed live dvd, which has the gnome 3.22.2 and kernel 4.9.10	and the nautilus version was the same with both kernels?can you try to copy with gvfs-copy in the terminal?Createdstrace output of gvfs-copyNautilus version was always the same, I only switched the kernel.If I use gvfs-copy to copy from the mounted location, then nothing happens, which means, the copy process never finishes, just an empty file is created and I have to kill the process. Also with --progress option nothing is shown.It also doesn't matter, if the remote share is a real Windows share, or a samba share on a Linux box.I don't know if it helps, but when I strace gvfs-copy then it seems it runs into an endless loop:...fstat(7, {st_mode=S_IFREG|0755, st_size=677, ...}) = 0splice(7, [0], 10, NULL, 65536, SPLICE_F_MORE) = 677splice(8, NULL, 9, [0], 677, SPLICE_F_MORE) = 0...The last line is repeated until I kill the process. I attached the full strace output. Everything was tested using the mentioned live dvd.cool, thanks for the debugging, that should be enough.Moving to gvfs to decide whether is the kernel's fault.(In reply to Carlos Soriano from)If it is mounted via the in-kernel Samba implementation, then GVfs might not be involved at all. GVfs' Samba backend uses the user-space implementation. See:$ ldd /usr/libexec/gvfsd-smb | grep samba$ ldd /usr/libexec/gvfsd-smb | grep smbTo confirm, could you please check the URI schemes used by the GFiles in question? Are they file:// or smb://?(In reply to Debarshi Ray from)I did a simple "gvfs-copy file-from-mount local-path" so in fact I guess it's file:// but I didn't add the scheme. Sorry if this was missleading, but I never used the gvfs-commands from cli.If I use gvfs-copy smb://remote-file, then gvfs-copy complains, that the location has to mounted first. And as mentioned in my original post, if I mount the share via gvfs, everything is working as expected (no matter if the mount is done via nautilus or gvfs-mount).GVfs isn't involved at all, generic glocalfile.c code from GLib is used in this case, but I don't think that there is anything wrong in GLib. It would be kernel/samba fault. Please file a bug onunder CifsVFS product and let us know the bug number.Ok. What's a bit confusing to me is, that this error only occurs with Nautilus and gvfs-cp (as far as I could test it). With a plain cp, rsync or even with KDE's Konqueror the problem doesn't occur. I've also tested Nemo (from Cinnamon project) and the same error occurs.I tried a few mount options and it seems, that the error only occurs with cache=none option.Are there any other tests I could do to track down the responsible project?Ok, you can see it with Nautilus/Nemo/gvfs-cp, because all of that uses GLib/GIO. It tries splice() before traditional read()-write(), which is the problematic part, which is not part of plain cp etc.:Consequently, the following while never ends, because n_written is 0 and n_read is 677 in your case:So it seems that splice() is broken somehow in recent kernel. I am not sure whether we can do something with it here... reopening, maybe somebody else will know...	9.0	id=779123	18	False	False	csoriano	1
id=125257	REOPENED	gnome-panel	notification area	unspecified	Other Linux	Normal critical	Panel Maintainers	2003-10-23 02:31 UTC by	Gregory Merchan	2008-02-03 15:58 UTC (	3 users	(Looking at CVS HEAD)I'm unable to find a screen check before gtk/gdk reparents a window.According to the manual, reparenting from another screen will resultin a BadMatch error. The Gtk+ API documentation does not mention thaterror will occur.The notification area code doesn't check the screen before callinggtk_socket_add_id(), and this is almost surely the cause of themulti-screen (non-Xinerama) errors that have been reported against it.Those reports also indicate mapping is occuring though reparentingwas unsuccessful, but I'm not sure Gtk+ is responsible.	I don't consider this a GTK+ problem. All GTK+ could conceivablydo would be to give a better warning message.Re-assigning to gnome-panel-maint. Apologies for the spam.What's the user effect here?is caused by this, at least in part.Can I close this bug ?Why do you want to close this bug?Any pointers to what's missing here? Is it just a function call or more involved?(In reply to)Well, this is marked as blocking. Whether that's correct or not I can't say, but if it is, that's a user effect.	8.0	id=777849	7	False	False	kai.willadsen	1
id=777849	REOPENED	meld	general	unspecified	Other Linux	Normal critical		2017-01-27 18:17 UTC by	banned	2017-02-06 16:14 UTC (	2 users	Createdscreenshot demonstrating the issueHere's a 3-way diff from meld (launched by TortoiseHG) after doing a merge with mercurial.Note the complete mess on the left.	The left file has, for some reason, been decoded as (probably) UTF-16LE or similar.You can work around this by setting the detect-encodings key to try whatever encoding the file is in first, e.g.,gsettings set org.gnome.meld detect-encodings "['utf-8']"(replacing 'utf-8' with whatever the encoding is). This just changes up the order of encodings that Meld uses to try to decode the text.I'm going to mark this bug as a dup of, since that's an existing feature request to allow manually selecting an encoding when things go wrong (as they have here).Thanks for your bug report.*** This bug has been marked as a duplicate of***This should NOT be marked as a duplicate. One thing is the perfectly legitimate feature request to be able to manually force an encoding; a different thing is the BUG that leads to the WRONG automatic detection. The file was encoded in utf-8, as were the other two files which were decoded correctly.What version of meld is on the screenshot?The guessing behaviour was hugely changed starting with meld 3.15.2 due to porting to GTKSourceView helpers.It has known guessing problem that fails distinguishing utf-8 from ascii-based single-byte-per-character encodings, but has NO known problems related to utf-16* encoding (like in screenshot), since they are very different from others.	3.0	id=763531	8	False	True	cooks.go.hungry	1
id=767588	REOPENED	gtk+	Widget: GtkNotebook	3.20.x	Other Linux	Normal critical		2016-06-13 09:04 UTC by	Jeff Bai	2017-01-16 19:20 UTC (	5 users	GNOME Terminal 3.20.2 will crash when:1. Using tabs to open "new windows" (as per the Preference says);2. Create some tabs;3. Using the mouse, drag the actual "tabs" onto the window area (a.k.a. the actual terminal);4. Run a command;... And the Terminal will crash (segfault on gnome-terminal-server), with a backtrace as follows.Sorry, but I don't have myself a debug binary handy at the moment. The backtrace will be updated.P.S. two of my friends was able to reproduce the same issue but without the step "4. Run a command;", I have told them to come over to confirm it - and of course, explain it a bit better.	I am a friend of Jeff Bai above. This problem was first discovered by his another friend Icenowy Zheng (also mine), yet only Jeff needs to run a command to trigger the crash of gnome-terminal.We have another way to reproduce it, first enter "Edit > Preferences" and set "New window opens at" to "Tab" (ignore this step if it's already so), then use "File > Open Terminal" to create another terminal in a new tab. Then, drag one of the tabs to the text field, and gnome-terminal will crash at once.This used to work just fine, likely a gtk regression from the DND or notebook changes in gtk 3.20.-> gtk+Thanks for taking the time to report this.This particular bug has already been reported into our bug tracking system, but we are happy to tell you that the problem has already been fixed in the code repository.*** This bug has been marked as a duplicate of***That commit did not solve the issue for me though. With GTK+ 3.20.7, the problem still persists.I don't think a rebuild would be necessary, would it?GTK+ 3.20.6, sorry.Well, I see this happening in mate-terminal (unlike gnome-terminal, we didn't disable tab detaching). It started only with 3.21 though. So currently I can reproduce it in Debian Testing with 3.22.1 but can't in Ubuntu 16.10 with 3.20.9.	6.0	id=317337	28	False	False	a9016009	1
id=317337	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other Linux	Normal major		2005-09-27 12:21 UTC by	Pablo Rodríguez	2012-08-14 13:43 UTC (	5 users	evolution 2.4 has a bug that prevents that drafts retain the correct identityfrom which the message will be sent.If a draft uses another identity than the default one, the message will have thedefault identity next time it will be opened.	confirming the bug, targetting to 2.4.1.it's very likely that drafts get openend once again (otherwise they were notsaved as drafts), and it could be pretty irritating to get an email by a totallydifferent mail address (e.g. the private instead of the work address).Createdproposed patchThis fixes the bug. The patch goes into evolution/composer. Rebuild mail orenitre evolution after applyin patch.patch has been committed to head and 2.4.x branch.Also forwarding messages don't have the right identity, but they have thedefault identity.right. it works when using "reply" but not when using "forward" (at least in 2.5.2).retargetting this to 2.4.3; changing summary.the forwarding issue seems to be fixed.i marked a message in my drafts folder and chose to forward it. in the upcoming composer window, the sender is the default one, which is totally okay since the drafts folder is part of my default identity.i send the message to myself and the attached/forwarded message kept the identity, nothing changed. so i would assume this is fixed.comments, anyone contradicting? :-)***has been marked as a duplicate of this bug. ***Both me and the duplicate I just filed are seeing this in 2.6...So I guess it isn't fixed after all...Karsten Bräckelmann wrote in a comment to that bug something that clarifies how this bug occurs:removing old target milestone, resetting from 2.4 to 2.6.harmonizing target milestones, sorry for the noise. (2.6.x -> 2.6)Any updates on this issue? I have four different accounts, each for a different role I play. All of them are IMAP accounts.Each time I forward a message, Evolution tries to send it from the default account, instead of from the account that received the message in the first place. Each time I forward a message I have to set the From field again to the right account.Instead, I would expect Evolution to behave as if the four accounts were four different people, so the one that receives the message, is the one that sends it forward.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	13.0	id=740397	8	False	False	mcatanzaro	1
id=740397	REOPENED	gnome-software	General	3.14.x	Other Linux	Normal major	GNOME Software maintainer(s)	2014-11-20 02:21 UTC by	Michael Catanzaro	2016-02-23 13:04 UTC (	1 user	Several times now, when downloading updates with Software, I've seen Software transition from downloading updates to "looking for new updates," which does not make any sense -- when I check for updates, Software should determine if there are new updates and then start downloading them, not the other way around.	*** This bug has been marked as a duplicate of***But this one's not fixed, I saw this in 3.18.3 today the first time I tested (simply by hitting the Refresh button). The state change was something like:Checking for updates -> downloading new updates -> looking for new updates -> downloading new updatesI think that is what happened, though I am not completely sure as it went by pretty fast.I am also confused by the distinction between "checking for updates" and "looking for updates".	2.0	id=768747	9	False	False	mclasen	1
id=768747	REOPENED	gtk+	.General	3.20.x	Other Linux	Normal major		2016-07-12 21:14 UTC by	Jonathon Jongsma	2016-07-13 18:42 UTC (	3 users	Createdtest caseThe attached test case shows that the behavior of gtk_window_resize() has changed between gtk 3.18.x and 3.20.xWhen run with 3.18, the window gets slightly larger every time the button is clicked. When run with 3.20, the window never gets resized.	I see the window growing here, with GTK+ masterSame result with 3.20Sorry for wasting your time. It turns out that I had been debugging a different issue and had some local changes to gtk+.although... there is still a behavior change here. On 3.18, the window grows by 10,10 every time. On 3.20, the window grows by 10 + the size of the CSD (62,109) every time you click the button.-----------------3.20:window_size_allocate: 207x133 @ (0, 0)window_size_allocate: 207x133 @ (0, 0)window_size_allocate: 207x133 @ (0, 0)window_size_allocate: 207x133 @ (0, 0)*** Resizing window 217x143 ***window_size_allocate: 269x242 @ (0, 0)*** Resizing window 279x252 ***window_size_allocate: 331x351 @ (0, 0)*** Resizing window 341x361 ***window_size_allocate: 393x460 @ (0, 0)-----------------3.18$ ./window-resize-bug window_size_allocate: 207x113 @ (0, 0)window_size_allocate: 207x113 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)window_size_allocate: 207x128 @ (0, 0)*** Resizing window 217x138 ***window_size_allocate: 217x138 @ (0, 0)window_size_allocate: 217x138 @ (0, 0)window_size_allocate: 217x138 @ (0, 0)*** Resizing window 227x148 ***window_size_allocate: 227x148 @ (0, 0)window_size_allocate: 227x148 @ (0, 0)window_size_allocate: 227x148 @ (0, 0)*** Resizing window 237x158 ***window_size_allocate: 237x158 @ (0, 0)window_size_allocate: 237x158 @ (0, 0)window_size_allocate: 237x158 @ (0, 0)*** Resizing window 247x168 ***window_size_allocate: 247x168 @ (0, 0)window_size_allocate: 247x168 @ (0, 0)window_size_allocate: 247x168 @ (0, 0)You have to use gtk_window_get_size to get the window size and not gtk_widget_get_allocation. Since 3.20 the window size no longer includes the client side decoration to match the server side decoration case.The fact remains that this behavior changed and is making it difficult for virt-viewer to use client-side decorations.In 3.18, all functions used the same 'size'. Now it seems that some functions assume that the size includes CSD measurements and some assume that the size does *not* include CSD.For example:assumes that size includes CSD:- gtk_widget_get_allocation()- gtk_widget_get_preferred_size()assumes that size excludes CSD:- gtk_window_resize()I tried to include a simplified test case above, but let me try to summarize the real-world situation we're dealing with here:virt-viewer is connected to a guest vm via spice and displaying it in a window. When the guest vm changes resolution, it sends a message to virt-viewer. The display widget updates its internal state so that its preferred size now matches the value sent up by the guest. It then queues a resize and we attempt to resize the GtkWindow to the size of the display. In the past, we could do this pretty simply by: gtk_widget_get_preferred_size(window, NULL, &nat); gtk_window_resize(GTK_WINDOW(window), nat.width, nat.height);However, now get_preferred_size() returns us the size of the window *including CSD measurements*. And gtk_window_resize() expects values without CSD. And I don't see any good way to programmatically get the sizes that are appropriate to pass to gtk_window_resize() here. One possible workaround is something like: GtkWidget *child = gtk_bin_get_child(GTK_BIN(window)); gtk_widget_get_preferred_size(child, NULL, &nat); gtk_window_resize(GTK_WINDOW(window), nat.width, nat.height);And that basically works, but it ignores the possibility that the GtkWindow might need some non-CSD size for itself (e.g. border-width). I could add some hacks to manually handle these situations but that is not very satisfying or future-proof.Another possibility is to use gtk_widget_set_size_request() instead of gtk_window_resize(), since gtk_widget_set_size_request() apparently expects values that include CSD. But that doesn't allow us to resize *smaller* than the current size.Why do you resize the window manually in the first place ? If you call gtk_window_set_resizable (window, FALSE), GTK+ will give the window the size it needs, without manual fiddling. Maybe I'm missing some detail about the desired user experience.Because the reverse works as well: if a user resizes the window, we automatically update the guests resolution to match the size of the window.I understand that this is not a very common use case, and not many other applications will need or want to do this. But this particular functionality is very important for virt-viewer and we need to keep supporting it.	8.0	id=576681	11	False	False	guilhem.bonnefille	1
id=576681	REOPENED	gitg	gitg	git master	Other All	Normal major		2009-03-25 09:50 UTC by	jessevdk@gmail.com	2013-06-15 07:14 UTC (	4 users	The search performance is rather poor at the moment for large repositories (it's just a linear search, the slowest thing possible).	The hash search can be improved by replacing strncmp+strlen by g_str_has_prefix.Please, take a look at:CreatedThe minor improveReview of:Makes sense this patch. Feel free to push.Not sure who is the recipient of this message.Personnaly, I do not have push access (nor gtk3 compatible system).Comment onThe minor improveSeems that jesse already fixed this part of the code in a different way. Thanks anywayCode is fixed. Please, close the bug.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.This is really not fixed. Sure the patch is good but that's not what this bug report is about. Fast searching requires indexing the history properly so we can quickly search and filter the history etc.	8.0	id=364103	13	False	False	tp	1
id=364103	REOPENED	website	wiki.gnome.org	current	Other All	Normal major	Wiki maintainers	2006-10-22 07:55 UTC by	Michael Zeising	2008-06-19 22:42 UTC (	5 users	Please describe the problem:I've just uploaded a new file to live.gnome.org/Gedit/LaTeXPlugin. When someone clicks on the link to download it again, he gets a 403 Forbidden.Steps to reproduce:1. 2. 3. Actual results:Expected results:Does this happen every time?YesOther information:	I can confirm that for this URL:attachment:LaTeXPlugin-20061021.tar.bz2I guess this is a question of ownership for that file.Can someone do something for this ?This is very disturbing when we want to give some useful files to users. I especially would like to give a c file for a tutorial (), or jhbuildrc files ready for my distro (), and copy/pasting the file is a pain in the ass.Sorry, all I can do is try to chase the live.gnome.org sysadmin or someone able to help:After just fixing the perms for someone else who reported a similar thing via our request tracker, I decided to see how many other files we'd got with unusual permissions: [root@label attachments]# find . -perm 600 -ls2144069 4 -rw------- 1 moin moin 3617 Nov 2 00:18 ./MairinDuffy/attachments/test.png2061958 100 -rw------- 1 moin moin 95711 Nov 9 15:12 ./Gedit(2f)LaTeXPlugin/attachments/LaTeXPlugin-20061109.tar.bz22062978 100 -rw------- 1 moin moin 96281 Nov 12 09:52 ./Gedit(2f)LaTeXPlugin/attachments/LaTeXPlugin-20061112.tar.bz21996941 44 -rw------- 1 moin moin 43049 Dec 17 12:31 ./GnomeMarketing/attachments/gmt-spreadtheword2.png2158949 4 -rw------- 1 moin moin 1770 Nov 29 14:23 ./GtkStatusIconTutorial/attachments/gtk-status-icon-test.c2143368 44 -rw------- 1 moin moin 41380 Oct 25 19:26 ./ThreePointZero(2f)CircularMenus/attachments/piemenu_ss.png2044457 12 -rw------- 1 moin moin 8494 Nov 21 10:19 ./GnomeArt(2f)Tutorials(2f)GtkThemes(2f)GtkNotebook/attachments/tab-geometry.png2079816 4 -rw------- 1 moin moin 2681 Nov 20 04:55 ./RichardRuhland(2f)Project/attachments/nuvola-yellow-1.1.tar.bz22080453 4 -rw------- 1 moin moin 2888 Nov 19 07:35 ./RichardRuhland(2f)Project/attachments/nuvola-yellow-1.3.tar.bz22060436 4 -rw------- 1 moin moin 2310 Dec 17 13:32 ./JhbuildDependencies(2f)MandrivaLinux/attachments/gnome218-jhbuildrc.py2158741 12 -rw------- 1 moin moin 9553 Nov 25 07:47 ./LarsClausen/attachments/2630867.jpg2143447 20 -rw------- 1 moin moin 19496 Oct 27 16:06 ./Tomboy(2f)NoteSharing(2f)ZeroConf/attachments/SharePrefsMockup.png2143449 68 -rw------- 1 moin moin 64503 Oct 27 16:10 ./Tomboy(2f)NoteSharing(2f)ZeroConf/attachments/MdnsRecordDiagram.png2143458 28 -rw------- 1 moin moin 26608 Oct 27 16:07 ./Tomboy(2f)NoteSharing(2f)ZeroConf/attachments/ShareBrowseMockup.png2158666 4 -rw------- 1 moin moin 3815 Nov 21 13:15 ./GnomeArt(2f)Tutorials(2f)GtkThemes(2f)GtkTreeView/attachments/screenshot.png2062992 60 -rw------- 1 moin moin 56302 Nov 19 14:16 ./BuildBrigade/attachments/content.xml2062004 4 -rw------- 1 moin moin 47 Nov 19 14:16 ./BuildBrigade/attachments/mimetype2061952 20 -rw------- 1 moin moin 17151 Nov 20 12:42 ./BuildBrigade/attachments/bb-meeting-nov-20-06.txt2062989 4 -rw------- 1 moin moin 1286 Nov 19 14:16 ./BuildBrigade/attachments/meta.xml2062990 12 -rw------- 1 moin moin 10436 Nov 19 14:16 ./BuildBrigade/attachments/settings.xml2062991 96 -rw------- 1 moin moin 91003 Nov 19 14:16 ./BuildBrigade/attachments/styles.xml2158470 284 -rw------- 1 moin moin 286522 Nov 17 16:44 ./LSR(2f)ScratchPad(2f)Magnifier/attachments/Screenshot.png2144952 12 -rw------- 1 moin moin 8329 Nov 14 08:59 ./Gedit(2f)Plugins(2f)Reindent/attachments/reindent.py2144953 4 -rw------- 1 moin moin 280 Nov 14 09:00 ./Gedit(2f)Plugins(2f)Reindent/attachments/reindent.gedit-plugin2144928 12 -rw------- 1 moin moin 11497 Nov 13 10:44 ./JhbuildDependencies(2f)Gentoo/attachments/gentoo-gnome-2.13.2-jhbuildrc.txt2144374 316 -rw------- 1 moin moin 316681 Nov 5 07:23 ./RealMarketing/attachments/market_segmentation.pdfI've changed the perms on these to 644, same as the rest so that should have fixed the problem. I have no idea why they were being created with the wrong perms in the first place.Also Apache needs a rule to be allowed to read this attachment directory maybe?It has also been creating some containing directories with the wrong perms.[root@label attachments]# find . -perm 770 -ls1979777 4 drwxrwx--- 3 moin moin 4096 Dec 17 12:31 ./GnomeMarketing1996351 4 drwxrwx--- 2 moin moin 4096 Dec 17 12:31 ./GnomeMarketing/attachments2162069 4 drwxrwx--- 3 moin moin 4096 Dec 17 13:35 ./GnomeEventsBox2162070 4 drwxrwx--- 2 moin moin 4096 Dec 17 13:35 ./GnomeEventsBox/attachments2162093 4 drwxrwx--- 3 moin moin 4096 Dec 17 14:37 ./GnomeEventsBox(2f)NAGnomeEventBox2162097 4 drwxrwx--- 2 moin moin 4096 Dec 17 14:37 ./GnomeEventsBox(2f)NAGnomeEventBox/attachmentsI changed these to 775.This is a problem from the server. This is still true for new sites. I also can not move attachments form old pages:Please reopen.Still valid. And kinda boring :-/Yeah still not working, see here:I confirm that the above link is now working. Close this bug?Just to get this fix, please look at this again:display and load display the url for me. can somebody check whats wrong now? Is the file still there?Also I have made some tests on my wiki page:I found that I cant remove attachments on my own page. But I could remove files of other people like on GconfTools. This should be targeted by some ACLs. One problem is that generally on Moin you can remove an attachment via a wiki page which you cant get back simply (its then still there but not attached to a page). So one option would be to only give a group of trusted users the ability to remove. I am not 100% sure that the "delete" right is bind to attachments also but I strongly believe thats the case.Still valid	12.0	id=775125	7	False	True	soloturn	1
id=775125	REOPENED	totem	Movie player	3.22.x	Other Linux	Normal major	General Totem maintainer(s)	2016-11-26 01:35 UTC by		2017-01-16 00:16 UTC (	1 user	when starting gnome wayland on the commandn line with:dbus-run-session -- gnome-shell --display-server --waylanddrog a film out of nautilus and drop it into totem does not work. (i guess this is only critical on wayland though ...)	not critical even in wayland.tested and this does generally not work. no matter if in X, wayland, with nemo or nautilus.You might want to explain your expectations, because I don't understand what it is that totem should do.it works, after i did right click - "open with another application"video" and typed totem. after this, on right click, "video" is in the right button menu. and, drag a file out of nautilus, and drop it on totem, opens and plays the file.(closing, as i cannot reproduce now. before it just did not open the file)there is a different behaviour if totem is started afresh or not.this does not work:1. drag a file out of nautilus, drop on totem --> it does not open and playthis then works:1. click a file with right mouse button, click "video" --> file opens and plays2. drag a different file onto totem --> file opens and plays	5.0	id=769106	5	False	False	csoriano	1
id=769106	REOPENED	nautilus	general	3.20.x	Other Linux	Normal major	Nautilus Maintainers	2016-07-23 08:46 UTC by		2016-07-28 22:43 UTC (	1 user	Createdtwo screenshots showing the bugAfter I start a long file operation, everything seems OK until I start a new instance of nautilus. Then the second one fires a third frozen window which has a file progress notification on the left side which cannot be closed. on s1.png (attached) you will see a normal progress of file operation, while this was running (so far so good). Then on s2.png I started a new nautilus window in my home folder (2nd tab) and it started this unnamed third window (with a stuck notification).If I switch to the first window that started a file operation and then close the notification, the third window completely disappears. This happens every time when I move/copy a file and lasts even for a short while after the operation finished (I guess until the file progress button is available). I guess this third window is somehow dedicated to the progress window itself.I'm using Arch Linux and I3 window manager, it might be due to the fact how tiled window managers detect this notification window and force its rendering even when it is finished and minimized.	This was fixed in gtk+ version 3.20.6 in.Feel free to reopen if you have this version or greater.Hi,I've just checked and I have 3.20.6 installed currently and the bug is there. Tell me if you need any further details on my environment. Vita	2.0	id=764444	11	False	False	bugzilla	1
id=764444	REOPENED	l10n	Russian [ru]	unspecified	Other Linux	Normal major	Russian Translations Maintainers	2016-04-01 06:18 UTC by	Anton Maklakov	2016-11-28 14:50 UTC (	1 user	CreatedSettings[ru] - cut off suffix in titlesSettings[ru] bugs in labelsDescription of problem:Russian localization turn on. Text labels are cut off on the end. Espessialy in "Lage text"-mode, but in normal-mode too.Gnome 3.20How reproducible:Steps to Reproduce:1. Settings -> Lage text ON.2. Settings -> Region & Language -> Русский (Российская федерация), Logout Login3. see Параметры (Settings) again!Конфиденц - КонфиденциальностьУведомлени - УведомленияЭлектропит - ЭлектропитаниеПодробност - ПодробностиПолзовате - ПользователиУниверсальны доступ - Униварсальный доступI have this bug (localized labels cutoff) in many other windows on gnome3-apps, w/o or with "Large text"-mode. For examle, "Keyboard"-settings	CreatedKeyboard-settings: In English version i have not bugCreatedKeyboard-settings: In Russian version i have BUG with cutoffYou're mixing separate bugs.The keyboard panel bug is:The icon bug is:Will mark as a duplicate of the GTK+ bug.*** This bug has been marked as a duplicate of***commit b3be07609a9bae43947ee3e59d8982a7715c9acfAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.	4.0	id=754954	41	False	True	quequotion	1
id=616761	REOPENED	doxygen	general	1.6.2	Other Windows	Normal major	Dimitri van Heesch	2010-04-25 11:31 UTC by	ahmed farid	2016-10-20 19:47 UTC (	1 user	CreatedTest .c and the generated call graphIf a function "func_1()" declares a local variable "intTest" of the same name as another function "intTest()", the generated call graph of function "func_1()" is generated as if it calls the other function "intTest()"Refer to the attached .c and call graph	Confirmed. Should be fixed in the next subversion update.This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.7.0. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional informationthat you think can be relevant.This problem is still present in the 1.8.12 version	3.0	id=616761	7	False	False	dimitri	1
id=754954	REOPENED	epiphany	Backend	3.16.x (obsolete)	Other Linux	Normal major	Epiphany Maintainers	2015-09-13 12:26 UTC by	Que Quotion	2016-12-26 23:00 UTC (	10 users	Epiphany does not play many videos on Youtube.It may be the case that Youtube's advertisements do something Epiphany is not compatible with, preventing the videos from playing. However, it may (also) be the case that Epiphany fails to do something required for the videos or advertisements to play. Either way, it is a serious problem for Epiphany's adoptability.Other browsers do not have this problem. Youtube offcially lists Google Chrome, Microsoft Internet Explorer, Firefox, Opera, and Apple Safari as compatible:Now that youtube is using HTML5 as default--and no longer offers an opt-out--it is time to fix this issue in Epiphany.To that end I am filing reports for both Youtube and GNOME. It is important to recognize that Epiphany is part of the problem and not put all of the blame Youtube, flash player, or another piece of software. Epiphany is the application having a problem, both from the user perspective and Youtube's (the site itself, not its developers). In order to resolve this issue as easily and quickly as possible, I reccommend that the two development teams communicate and cooperate.Here is an example of a Youtube video that will not play in Epiphany:Star Trek - RenegadesHere is an example of a Youtube video that does play in Epiphany:Gotye - Somebody That I Used To Know	Youtube topic:It is possible that the problem could be in the WebKit backend; this should also be investigated.This is a very old issue; present as long as Youtube has been offering HTML5.It has been suggested that youtube's advertisements are the problem:Why are the advertisements incompatible with Epiphany in particular?Another theory holds that spoofing Epiphany's useragent as Chrome will work around the problem and cause Youtube to offer a compatible video:Is this still relevant? Could we convince the Youtube devs to include recognition for Epiphany?Another suggested workaround is to use nspluginwrapper for flash, which somehow works around improperly encoded videos on youtube:Given that flash now works in Epiphany without nspluginwrapper, I find it unlikely that this solution is relevant. Is there still a problem with codecs? Is this what causes advertisements to fail, causing videos not to play? Why doesn't Epiphany play the advertisements with the flash plugin (flash works everywhere else) and switch to HTML5 for the videos?nspluginwrapper is not compatible with recent versions of flashplugin.sonspluginwrapper -i libflashplayer.sonspluginwrapper: libflashplayer.so is not a valid NPAPI pluginyaourt -Qo /usr/lib/mozilla/plugins/libflashplayer.so /usr/lib/mozilla/plugins/libflashplayer.so is owned by flashplugin 11.2.202.508-1(In reply to Que Quotion from)Bingo, good guess. If you turn off the adblocker in preferences, the video plays fine. It's possible the problem is with Epiphany's adblocker, but that is not very likely. More likely, either YouTube's scripts are broken (failure to expect the adblocker would block the ad, possibly, though that seems strange as surely they would be prepared to handle adblockers?), or there is some strange problem in WebKit that is only triggered by that error case (this seems most likely to me, but I have no clue what it might be :)I'm happy to work with the YouTube folks on this if we can figure out that changes in Epiphany or WebKit are needed, but we can't debug site-specific issues ourselves, due to the complexity of modern websites, js obfuscation, etc. We do fix WebKit bugs if someone is able to provide a reduction (a simple test case that demonstrates the issue), but this is hard to do, and it's quite rare that anyone other than one of the website developers is able to do so.(In reply to Que Quotion from)See also:No clue.I will test this after I post this comment, since it requires me to close my browser. WebKit already has infrastructure to fake the user agent on specific broken sites, for compatibility with those sites. I'm willing to add YouTube to that list in WebKit if need be. (We're not going to add any user-agent hacks at the Epiphany level.) But that bug report is quite old, and unlikely to still be relevant; I don't expect changing the user agent to make a difference. But I will test in a second and find out.Another quite old bug report. The reason to use nspluginwrapper was to be able to load Flash (a GTK+2 plugin) in a GTK+3 browser (Epiphany), which is impossible due to symbol conflicts. nspluginwrapper must be running the plugin in another process. Anyway, that's not needed anymore, because nowadays we have separate a separate compatibility plugin process to support GTK+ 2 plugins."Is there still a problem with codecs?" Depends. YouTube has been pretty good about hosting WebM videos, for the most part. But for some reason, a small subset of their videos are H.264-only. H.264 codecs cannot be legally distributed in the US and in most of the EU (actually, in most everywhere ;) without paying a royalty to MPEG, and no Linux distros pay that royalty. Distros without corporate sponsors ship that codec anyway and hope not to get sued, which distros with corporate sponsors normally do not ship the codec. If you're using Fedora or openSUSE or Ubuntu, you don't have an H.264 codec. Otherwise, you probably do."Is this what causes advertisements to fail, causing videos not to play?" No clue. I don't have Flash installed, nor am I willing to install it, because it is nonfree and I will not agree with its license agreement. If it's mandatory for adverts to play on YouTube, it might be a choice of YouTube to fail the video rather than let us get away with adblock.(In reply to Michael Catanzaro from)I tested with this user agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.0 Safari/537.36But the video did not play, so that's not a problem.(In reply to Michael Catanzaro from)Um, well the answer of course is "no," because the ads play fine if I disable the adblocker. ;)The one thing I forgot to check was the adblocker... (I just leave it on, like cruise control).How does the adblocker work? Is it subscribed to EasyList? I don't recall having this kind of problem using AdBlock+ in Firefox (I'd need to reinstall all of that to test).I'm sure Youtube sees their advertisements as madatory, in which case they should be saying something when the advertisements are blocked. Currently their player just sits there, blacked out at 00:00. It looks like something is broken; the buttons on the player respond to clicks but no video plays.Maybe I can convince them to put up a "don't block advertisements!" in place of the black screen.Or should Epiphany be able to block *and skip* the advertisements?(In reply to Que Quotion from)Yup.(In reply to Que Quotion from)That's up to the scripts on YouTube. Epiphany is going to block them from loading their advertisement... how they choose to handle that is up to them. :)I wonder how adblock+ (with EasyList+EasyPrivacy subscription) does this in Firefox; I recall that videos continued to play although the advertisements were blocked. Does it have a site-specific hack to tell Youtube the advertisement was "seen"? There's also the possibility that Youtube's advertising methods have changed in the months since I switched to Epiphany.How about a "click to show" feature in Epiphany's adblocker? (ala NoScript)The adblocker just blocks the resource from loading, as if there was a network error. It's very simple because we don't have to know anything about e.g. where the resource would be displayed on the page.ABP does some more work, like element hiding, in order to block more stuff than ours does.I don't have much time to work on this but a starting point would be to provide us a gst debug log:GST_DEBUG_NO_COLOR=1 GST_DEBUG=3,webkit*:5 epiphany ... 2> gst.logAnd attach the log file to this bug, please.(In reply to Philippe Normand from)There's nothing in the log (except unrelated warnings about deprecated GObject properties) for the video that doesn't play, so the GStreamer code is never hit. For the video that does play properly, the log gets filled up with GStreamer debug output. This is not unexpected to me, considering we're forcing a network failure.Marking NEEDINFO; we won't get anywhere without feedback from a YouTube developer.CCing some GNOME folks who work for Google in case they're possibly interested in prodding about this internally, since the YouTube developers ignored the bug report.The only thing I can think to change in Epiphany is to disable the adblocker on YouTube. Users are not going to like that, but it's better than breaking videos.***has been marked as a duplicate of this bug. ***For what is worth, it seems that the issue is not strictly limited to YouTube: with the AdBlocker enabled (tested with 3.18.0-11-ge76bc6717ae3) I can't load Metacafe videos[1] and Yahoo Screen[2] is broken too as clicking items in the "Must Watch" list or in the categories list on the left does nothing.Either we find the cause of the breakage or I guess disabling the adblocker would be a safer course of action. :([1][2]would be a safer course of action. :(I share in your :(Default adblocking is a /good/ thing, something epiphany has going for it (not only for minimizing annoyances, but simplification of interface and reduction of resources). My issues with ads are disruptive clutter and bandwidth hijacking; not to mention the occasional memory-leaking flash crasher. Epiphany does most of what Firefox with Adblock+ & NoScript did after lots of configuration*, without any configuration.Actually, I am delighted to see this much work getting done on it. I wasn't entirely surprised that Youtube didn't acknowledge my report. Thanks to everyone for taking an interest in this!Now that we have some other sites suffering the same problem, maybe we can triage. What do those sites ads have in common with Youtube's ads?*Sometimes I miss ElementHidingHelper and NoScript. Come to think of it, NoScript allowed filtered blacklisting and whitelisting of scripts by domain. I usually set this to allow scripts from the site itself (*.sitedomain.*) but not from third parties (*.ajaxdomain.*). I found myself frequently fiddling with this, temporarily allowing this script and that and reloading pages. I don't miss doing that, but it made me wonder if these sites share any outside scripting hosts?While investigating this I stumbled over what the Safari AdBlock Plus extension does: they use a new framework landed recently in WebCore, contentextensions, seeIt also handles hiding elements using CSS selectors and blocking cookies only and it may be interesting to look at it as an alternative route.Ok, this seems to be due to a bug in WebKit which has been fixed recently:(In reply to Emanuele Aina from)Haha, excellent sleuthing! Not often a major bug gets fixed before we figure out what was even wrong! I will put that on the list for a backport to 2.10.Thank you everyone for taking the time to look into this and making the effort to get to the bottom of it.The patch for webkit sounds promising:but the last comment on the bug report does not:Would it be sufficent to install upstream webkit (largest source code ever?) and then rebuild epiphany from source to test?Indeed, YouTube now seems to work fine even with the adblocker enabled, but both Metacafe[1] and Yahoo Screen[2] are still broken. :([1][2]Reopening.CreatedEphyUriTester: Ensure "||" rules are anchored at the startFilter rules beginning with "||" mean that the following expression must match (at least partially) the domain.This means that "||example.com/foo" should match "foo.example.com/foo" but not "fooexample.com/foo" nor "example.com/bar?redir=example.com/foo" while the current code will happily match all of them.This fixes the adblocker on Metacafe.Yahoo Screen is broken due to us lacking any implementation of the "@@" exclusion rules.Review of:Thanks! This is good for gnome-3-18 as well as master. Please just add a comment above the regex, since it's not very readable. Also, I'm not sure if you have a GNOME account or not, so let me know if you need me to push this for you.CreatedEphyUriTester: Ensure "||" rules are anchored at the startAdded a comment to describe the purpose of the regex. If you think that it'sclear enough I can push directly to git. :)Review of:Thanks!Would this be related to crunchyroll videos not loading when the ad blocker is enabled?Comment onEphyUriTester: Ensure "||" rules are anchored at the startpushed as- EphyUriTester: Ensure "||" rules are anchored at the startAlso pushed to the gnome-3-18 branch with a minor change due to the (Ephy)UriTester renaming.CreatedEphyUriTester: Escape '[' and ']' when converting patterns to regexpsCreatedEphyUriTester: Handle '@@' whitelisting exception rulesThe AdBlockPlus filter language has some special rules that start with'@@' and are meant to override some overly matching blocking rules bywhitelisting those which should succeed.CreatedEphyUriTester: Drop keys/signatures logicIt seems to be a performance optimization, but it seems to be quitepremature and resulted in some rules not being handled correctly: inparticularwas still broken as theexception/whitelisted rule was for some reason skipped by the codecomputing signatures.With these patches Metacafe and Yahoo Screen work even with the adblocker enabled.Unfortunately I haven't had much luck with Crunchyroll. :(Review of:ThanksReview of:Thanks, please fix these nits before pushing. Up to you whether to backport to gnome-3-18 or not.::: embed/web-extension/ephy-uri-tester.c@@ +316,3 @@ const char *req_uri,+ const char *page_uri,+ gboolean whitelist)Just line up the parameter names please (the w in whitelist under the p in page_uri)@@ +355,3 @@ while (g_hash_table_iter_next (&iter, &patt, &regex)) {+ if (ephy_uri_tester_check_rule(tester, regex, patt, req_uri, page_uri, whitelist))Missing space before opening parentheses here. (Yeah it was already missing, but since you're touching that line, it'd be good to fix it.)@@ +366,3 @@ const char *req_uri,+ const char *page_uri,+ gboolean whitelist)Same alignment problem here@@ +424,2 @@ {+ g_hash_table_insert (urlcache, g_strdup (req_uri), g_strdup("1"));Same nit about opening parentheses here...@@ +431,2 @@ {+ g_hash_table_insert (urlcache, g_strdup (req_uri), g_strdup("1"));...and here...@@ +434,3 @@ } + g_hash_table_insert (urlcache, g_strdup (req_uri), g_strdup("0"));...and here.Review of:Yes please!(In reply to Que Quotion from)Yeah, but it's a bit of a project if you haven't done it before, I wouldn't recommend it... easiest to wait until your distro has an updated package. I expect (but don't promise) that the fix will be in WebKitGTK+ 2.10.4.CreatedEphyUriTester: Escape '[' and ']' when converting patterns to regexpsCreatedEphyUriTester: Handle '@@' whitelisting exception rulesThe AdBlockPlus filter language has some special rules that start with'@@' and are meant to override some overly matching blocking rules bywhitelisting those which should succeed.CreatedEphyUriTester: Drop keys/signatures logicIt seems to be a performance optimization, but it seems to be quitepremature and resulted in some rules not being handled correctly: inparticularwas still broken as theexception/whitelisted rule was for some reason skipped by the codecomputing signatures.pushed as- EphyUriTester: Escape '[' and ']' when converting patterns to regexpspushed as- EphyUriTester: Handle '@@' whitelisting exception rulespushed as- EphyUriTester: Drop keys/signatures logicPushed to the gnome-3.18 branch as I had to backport them anyway.CreatedEphyUriTester: Avoid g_strdup() when a boolean is enoughIt bothered me too much, so I did a simple conversion to boolean valuesdirectly stored in pointers instead of g_strdup("1") and g_strdup("0").(In reply to Michael Catanzaro from)Unfortunately I have :) at one point I was attempting to package webkit-svn for multilib as part of a certain project... I was lucky enough to actually download the whole thing once, but svn rarely gets through that much data without some kind of breakage.(In reply to Emanuele Aina from)I reverted this for, until we have time to investigate this further. :/Any updates?	48.0	id=125257	12	False	False	otaylor	1
id=737015	REOPENED	glib	network	unspecified	Other Linux	Normal major		2014-09-20 10:12 UTC by	Rakesh	2015-01-20 13:08 UTC (	3 users	Running Geary 0.74, built from code on my Ubuntu 14.04 box. Had seen this on 0.6 too. It freezes once in a while (about once every 2 hours), remains in that state for 5-10 minutes and comes back to normal.Ubuntu changes the windows to 'gray-scale', when the application freezes. No user-interraction is possible.There's no specific set of steps that can instantly reproduce this issue. It happens even if Geary is left idle for some time. Or even when I'm typing an email or reading one, just sent one, all occasions.I highly suspect it has something to do with my network as I've noticed that it never happens when I'm using my home Internet. How can get more debug information and logs for you?	Run "geary --debug --log-network > geary.log". After a freeze happens, post the log here, along with the (approximate) time of the freeze.Note that the log may contain email addresses or other sensitive information. Feel free to excise them before posting it. Alternatively, you can send the log to.Thanks Robert. Just installed 0.8 and that too has this issue. BTW, I'm really happy with the where Geary is going. And I'd like to contribute back to it. If your developers are busy, I'd be really happy to dig deeper into this and get more info for you or probably even fix it.Here are the logs, hope that helps.[deb] 11:58:57 0.000143 [0000/69.89.31.118:143/GEARY_IMAP_CLIENT_CONNECTION_STATE_CONNECTED R] a161 OK Fetch completed. [deb] 11:59:04 7.333859 [0001/74.125.25.109:993/GEARY_IMAP_CLIENT_CONNECTION_STATE_CONNECTED S] a086 noop [deb] 11:59:04 0.254356 [0001/74.125.25.109:993/GEARY_IMAP_CLIENT_CONNECTION_STATE_CONNECTED R] a086 OK Success [deb] 11:59:27 22.745011 [0000/69.89.31.118:143/GEARY_IMAP_CLIENT_CONNECTION_STATE_CONNECTED S] a162 noop [deb] 11:59:27 0.296250 [0000/69.89.31.118:143/GEARY_IMAP_CLIENT_CONNECTION_STATE_CONNECTED R] a162 OK NOOP completed. [deb] 11:59:35 7.704505 [0001/74.125.25.109:993/GEARY_IMAP_CLIENT_CONNECTION_STATE_CONNECTED S] a087 noop [deb] 11:59:35 0.256248 [0001/74.125.25.109:993/GEARY_IMAP_CLIENT_CONNECTION_STATE_CONNECTED R] a087 OK Success [deb] 11:59:48 12.296953 app-email-store.vala:160: EmailStore Gmail:r*******running GearyAppListOperation on 1 emails [deb] 11:59:48 0.026556 geary-controller.vala:2421: Error checking for what operations are supported in the selected conversations: Async transaction cancelled [deb] 11:59:48 0.000610 app-email-store.vala:182: EmailStore opening Gmail:r*******:INBOX for GearyAppListOperation on 1 emails [deb] 11:59:48 0.000006 imap-engine-minimal-folder.vala:482: Not opening Gmail:r*******:INBOX: already open (open_count=3) [deb] 11:59:48 0.002138 app-email-store.vala:193: EmailStore closed Gmail:r*******:INBOX after GearyAppListOperation on 1 emails [deb] 11:59:48 0.000051 app-email-store.vala:219: EmailStore Gmail:r*******done running GearyAppListOpeThanks,Rakesh P GopalJim, does this give you enough information to work with, or do you need something else?This log isn't enough, I would need to see a full log of when it happens. This is the easiest way:$ geary --debug --log-network > geary.logI would say run Geary, and when it happens wait for Geary to respond again, exit immediately, and attach the log here (or, if it contains personal information, send to).CreatedThe network log, Geary killed just after it hung.Here you go, the entire log, from since Geary is launched to when it got hung. Attached.Unfortunately I don't see anything obvious in this log. There's some connection issues at the start of the trace but things seem to smooth out connection-wise towards the end. I'm not sure what to make of it.When Geary hangs (the window dims), have you tried to do an operation, like archiving or deleting a message or sending an email? Do you notice that a new message has been received, that is, you see a system notification of a new email before or after the hang? I'm suspecting the problem isn't in the engine but in the client somewhere, but I don't know where.When Geary hangs, it doesn't respond to user-actions (if that wasn't already obvious). So, it's not possible to do such operations on it. It takes anywhere between 5-15 minutes for it to return back to normal, if you leave it alone. So, usually I just kill the process and launch it back again.Have never observed any new emails showing-up, right after the hang or after you re-launch it (at-least I don't remember of anything like that happening). And I've also seen most of the times, emails come-in just fine, Geary shows a notification and plays a 'pop' sound. Works fine for incoming emails.Even tested it right-now. Re-started Geary after it got hung and didn't receive any new emails right after the restart.What I was asking if you were doing something like pressing Archive and then Geary froze. It sounds like it merely freezes on its own.However, I guess I didn't read your first comment close enough, that it was freezing for 5 - 15 *minutes*, which is way out of line, even for network hangs. There's something very wrong if the UI freezes for that amount of time (and can return later, i.e. it's not permanently hung).When it hangs, can you open System Monitor and see how much CPU it's using?Also, can you run Geary like this from the console:$ gdb gearyType "run" at the (gdb) prompt to start Geary. When it hangs, go to the console, press Ctrl+C, then type "thread apply all bt" at the gdb prompt. It would be useful to see what the stack traces look like when it's hung.Here you go.Program received signal SIGINT, Interrupt.0x00007ffff2169c6d in poll () at ../sysdeps/unix/syscall-template.S:8181 ../sysdeps/unix/syscall-template.S: No such file or directory.(gdb) thread apply all btRakesh, this is very useful, but it would be a great help if you could do this again. This time, if you could install the debug symbols for glib and glib-networking, that would be a huge help. Under Debian/Ubuntu, the packages are:libglib2.0-0-dbgglib-networking-dbgThey will be similarly named on other distros.With these installed, please re-run and post the trace again. Thanks!Glad to know that it helped. Here is the stack-trace with the debug-libs installed.Program received signal SIGINT, Interrupt.0x00007ffff2169c6d in poll () at ../sysdeps/unix/syscall-template.S:8181 ../sysdeps/unix/syscall-template.S: No such file or directory.(gdb) thread apply all btRakesh, could you post here what version of glib-networking you're using?glib maintainers, I don't *know* this is a bug with glib-networking but I'm at a loss as to what Geary is doing wrong otherwise.To summarize: after a period of time Geary will go unresponsive for this user (i.e. the window dims and accepts no input). It will stay unresponsive for 5 - 15 minutes. As Geary's stack is entirely asynchronous/non-blocking, this is troublesome.Looking at the last stack trace Rakesh provided, the main loop is hung waiting for a GTlsConnection to close. I see close is occurring for a GSource in the main loop:#3 g_socket_condition_timed_wait#4 g_socket_receive_with_blocking#5 g_tcp_connection_close#6 g_io_stream_close#7 g_tls_connection_gnutls_close#8 g_io_stream_close#9 g_io_stream_dispose#10 g_object_unref#11 gnutls_source_finalize#12 g_source_unref_internal#13 g_child_source_remove_internal#14 g_source_destroy_internal#15 g_main_dispatchGeary configures its IMAP connections with a ~5min timeout and to use graceful disconnects. This long timeout is due to how IMAP works, i.e. connections are stateful and intended to be held open, but no traffic may occur for indeterminate periods of time. It is not uncommon for the server to drop the connection without warning. Geary attempts to close_async() all connections regardless of how they're disconnected.Even if I were to reduce this timeout, the core problem is that the close is occurring in the main loop and not a background thread. I assume the GSource is being created inside the library, but I'm not sure why or how to avoid it.Any help would be greatly appreciated.Thanks Jim, is this the Bug you reported on glib-networking? You probably forgot to mention a link to the bug you've reported there, so that I can take it ahead.The trace shows that Geary itself no longer has any references to the connection (the GSource was holding the last ref), and yet the connection is still open, meaning that Geary dropped its last ref to the connection without closing it first. That seems like probably a Geary bug?But that said, we probably need to make the close-on-dispose guarantee that it never blocks, even if that means closing the connection uncleanly...(In reply to)Yes, that's a Geary bug. We go to some effort to avoid that, so obviously something slipped through. Let me go back and look at the trace and see if I can figure out where that might be happening.That would be helpful. Should I open a separate ticket for that? I'll leave this one assigned to glib-networking until we decide how to break this apart.I just built the latest version of Geary, 0.9. And I don't see this issue anymore.Thanks for fixing this issue. :)Presumably geary fixed the bug that was causing connections to be disposed while still connected, but we still ought to fix glib to never block on close-on-dispose.	17.0	id=737015	18	False	False	rschroll	1
id=740619	REOPENED	evolution	general	3.12.x (obsolete)	Other Linux	Normal major	Evolution Shell Maintainers Team	2014-11-24 12:23 UTC by		2016-01-13 04:46 UTC (	1 user	This may be one bug, or two. But I'm guessing it's really one bug.In mailer, scroll wheel is expected to scroll either the current email, or the list of emails. In calendar monthly view, it's supposed to scroll forward and backward in time. In the pop-up dialogue box asking where to move an email, it scrolls the list of mailbox folders.But sometime after starting the application, this stops working. I've tried clicking in various places to gain the focus, but no change.Also, double-clicking in the calendar is expected to create a new appointment, or to open an existing appointment. At the same time as the mouse wheel stops working, create a new appointment via double-click stops working. (But I can do this through right clicking and selecting the context menu item.)HOWEVER: double-clicking on an existing appointment still opens it!Now you're really confused, right? :)openSUSE 13.2, running Evo 3.12.7 under KDE.I have recently gone from openSUSE 12.2, and the corresponding 2 y.o. version of Evo, and this bug has appeared.When you use the mouse-wheel preferentially for all things, this bug is staggeringly annoying!	Thanks for a bug report.(In reply to)Yes, I am. :) Could you try to figure out consequences why the mouse stops working? Maybe if you run evolution from a terminal then it'll print there anything related. It doesn't make much sense why double-click or mouse wheel should not work spontaneously.KDE, hmm, I'm wondring how much it can be related to your set gtk theme in KDE. There is some trouble with recent oxygen-gtk theme (), though mousing wasn't spot yet. It worths to try to use a different theme, just in case.No updates here for 19 months.Hi Darren, I am closing this bug report as no updated information has been provided.Please feel free to reopen this bug if you can provide the information that was asked for in a previous comment and if this still happens in Evolution version 3.18. Thanks!Still present in 3.16.5. I have updated to openSUSE Leap 42.1, and allowed the desktop settings to start again from fresh install. I have, however, preserved my Evolution settings.I will see about answering the above.By the way, is there a source of RPM packages for later versions of Evolution that are built against the latest openSUSE? That's the main impediment against trying the latest version.	4.0	id=704816	15	False	False	a9016009	1
id=380048	REOPENED	gtk+	Widget: GtkTextView	unspecified	Other All	Normal major		2006-11-28 07:42 UTC by	Tim Miao	2009-10-25 22:57 UTC (	13 users	Please describe the problem:This is an a11y bug for ekiga.Steps to reproduce:1. Run orca and ekiga.2. Start a new conversation.3. Actual results:The conversation can be displayed in multiline text area but fail to be reported by orca.Expected results:The conversation should be reported to user with orca.Does this happen every time?Yes.Other information:No.	Sorry, but... Isn't ORCA use supposed to be transparent for user programs?If so, why is it reported as an Ekiga bug?It seems that ekiga changed some of multi-line text area properties, that makes user can not navigate focus into it. Or ekiga failed to fire some events orca requires.I don't really understand. Do you have a patch?Does orca do something with GtkTextBuffer or GtkTextView ? We have special implementations of those ; could it be that ?Custom implementations of components tend to cause problems with accessibility. I tried configuring ekiga, but it seems to hang on me somewhere in the setup wizard during/after the detection of the NAT type at page 5/10, so I'm not sure what might be the root cause of the problem. Nor do I even know what the suspect dialog looks like. :-( As Tim says, it may be that Orca is not getting the events it expects, and/or the user is unable to traverse to the given text area.What is the particular dialog in question doing? Is it some form of instant message? If so, Orca *might* be getting the events it needs. We may need to write a script similar to what we did for GAIM to present information that is being updated in an area that does not have focus.The hang you are seeing is 329454 but you probably already know that. Can you do the ekiga configuration with accessibility disabled?(In reply to)Aha! Yep. I can configure ekiga with a11y disabled. I'm now guessing that this report is related to the "chat window"? If so, I'm going to guess this is indeed something we may need to script for in Orca just like we did for GAIM. I have no known SIP addresses of anyone to chat with so I can test this out.If the ekiga folks, however, were able to make the chat area traversable (i.e., allow the user to tab into it and traverse it with the caret), it would help delay the urgency of us needing to provide custom behavior.Well, what exactly can disallow the user to "tab into it and traverse it with the caret" ?I mean, we just have a subclass of GtkTextBuffer/GtkTextView, so we must have set some property which breaks orca...The function gm_tw_build_tab calls gtk_text_view_set_editable (GTK_TEXT_VIEW (twp->conversation), FALSE)and gtk_text_view_set_cursor_visible (GTK_TEXT_VIEW (twp->conversation), FALSE);I have not looked at what gaim does but I assume that it is similar.We can unfortunately not make it editable... Is there an alternative?Making it editable is indeed bad. Orca should probably deal with uneditable text views, or it will have to add workarounds for any non-trivial program...(In reply to)Agreed and we have done this for GAIM. However, if one were able to make uneditable text views at least tab traversable and allow people to arrow around using normal caret navigation techniques, many users would get a win. For example, people with physical impairments who cannot use a mouse would be able to more easily cut/paste snippets of a conversation.@Willie: if you can explain me briefly how to do this in GTK+ with a GtkTextView, I'll gladly invest some time on it.How to make it uneditable and traversable? My guess is that it will requirework in gtk+. Once gtk+ supports it, all programs will follow automagically (including ekiga).(In reply to)This part is magic that I don't know how to do. I know that I've seen people allow labels to be traversable. so I'm hoping text areas allow this to do. I've been asking around in private e-mail to see if anyone knows if this is possible.Probably it is not possible without modifying GTK+, but I'm not sure. Thanks for asking!Perhaps we should move that bug to either "orca" or "gtk+" ?Darn - I keep on responding to bugs, but Firefox keeps crashing on me and my responses don't seem to get through. Argh. I added the following response hoping we might be able to try this before requiring special-casing in Orca (we generally want to fix accessibility problems at the source):It may be that calling:gtk_text_view_set_cursor_visible (GTK_TEXT_VIEW (twp->conversation), TRUE);might have the desired effect. I'm attempting to build ekiga with this change in each of the calls to gtk_text_view_set_cursor_visible (there are three of them), but I'm not really sure how to test this since I don't know of anyone else with an ekiga account I can talk to.BTW, I should also add that autogen'ing ekiga on my Ubuntu box is a bit of a struggle, so I'm not sure I can even test the changes. Sigh. I'm wondering if the Ekiga folks might try making such as simple change and giving it a quick check? If you could, the way you'd know it works is if you can tab into the chat area and arrow around in it.I don't understand... if you have a simple patch to test :$ apt-get source ekiga$ patch the sources$ make -f debian/rules build$ sudo make -f debian/rules binary$ sudo dpkg -i ekiga_something.deband it's done...(In reply to)Wish it were so simple. It's still a struggle for me - I think there must be a number of dependencies I need to build ekiga (I'm unfortunately not an ekiga user or developer). It may be a more efficient use of our time if someone with a working ekiga build environment were able to try this out. Otherwise, I fear we may be spending most of our time running down the "it's so easy" path trying to figure out why it's not so simple. I'll attach a patch and it would be great if you could try it out.CreatedPatch to pass TRUE to gtk_text_view_set_cursor_visibleIf an experienced ekiga developer with a working ekiga build environment could try this out, it would be great.Something like :$ sudo apt-get build-dep ekigawill install all needed build-dependancies.I'm very short on free time those days :-(Ah well...the make seemed to do OK. Here's the results of doing:$ sudo make -f debian/rules binary$ sudo dpkg -i ekiga_something.deb...dpkg-deb: building package `ekiga' in `../ekiga_2.0.3-0ubuntu3_i386.deb'.tar: -: file name read contains nul characterdpkg: error processing ekiga_something.deb (--install): cannot access archive: No such file or directoryErrors were encountered while processing: ekiga_something.debIs there some other way to install/test this?In addition, it seems as though you might spend less of your time applying the patch and doing a quick check instead of getting me going as an ekiga developer. Even if we eventually get this going, I still won't even be able to test because I don't know any other ekiga user to chat with. I'd estimate this check would take an ekiga developer less than 8 minutes, which is a fraction of the total time spent on this problem so far. If there is an ekiga developer with 8 minutes to help out here, it would be great.(In reply to)Damien - maybe you're the ekiga developer I'm hoping for. :-) Would you be able to try out the patch?The "ekiga_something.deb" was an example ; according to what you pasted, it really should be :$ sudo dpkg -i ../ekiga_2.0.3-0ubuntu3_i386.deb(In reply to)Thanks. I'll wait first to see if our friendly ekiga developer Damien might be able to give the patch a quick poke. As I mentioned before, even if I continue to invest time in this and manage to get it to build, I don't know any ekiga users that I can contact to even test it. My assumption here, of course, is that I cannot bring up the chat window unless I have someone to chat with.I don't have the impression to be that unfriendly, thank you.I wouldn't expect a "quick" poke from Damien either : he said "I'll gladly invest some time on it", but didn't say when.If you want, I can also tell you that I'll work on it :-)(In reply to)Oops! I didn't to imply that "All those not named Damien are unfriendly." Sorry you took the message way. My primary focus here is to make a better experience for users of your product and I'm trying to find the most efficient means to do so. My feeling so far is that the current means is rather inefficient.Success. The patch atworks. I still had no ekiga pals to chat with so I typed in an address of sip:, which is something I was able to dig up from a Google search somewhere. Even if I couldn't connect, it at least dumped an error in the chat window. I was able to tab to it and review the error with Orca. I'm going to toss this back to the ekiga folks. I'll be happy to spend the extra time to write the ChangeLog entry and commit the patch if the ekiga folks don't have time for that.Thanks for your patch and tests, I'll apply it probably tomorrow.I have tested the patch, and I must admit that I don't like it at all from the usability point of view.Indeed, if you take the general history, you can now move the cursor anywhere in the history, giving the feeling that you can start typing things inside the history.Would it be possible to only show the cursor if the person clicks in the history instead of showing it all the time?From the GTK+ doc :"A buffer with no editable text probably shouldn't have a visible cursor, so you may want to turn the cursor off."I'm sure there must be an alternative.Damien:The primary target users cannot click (as they are blind and cannot use the mouse).Putting a visible text caret in non-editable text is the standard technique for making such text accessible to blind users - see for instance the F7 "show text caret" technique in mozilla/firefox. I believe evolution and/or OpenOffice do likewise.Perhaps using F7 as a "turn text caret on/off" toggle makes sense here too, since orca users will be familiar with it, and it hides the (mis)feature from sighted users who might find the presence of a caret in readonly text odd.best regards,BillBTW that reminds me that someone should file a "caret browsing" RFE against Epiphany, which currently doesn't offer it.Bill, having it working the way you describe it makes sense. If someone can create a patch, I will apply it. Otherwise I will put it on my TODO list for next release.Yes, it looks more sensible like this.It just occurred to me that instead of having each and every program under the sun detect the F7 key to react and make the cursor visible in each and every GtkTextView, it would be better if the framework were doing the work behind the scene.Wouldn't that make more sense ?Yes. IMHO yes. Is it worth to reassign that to GTK itself?J.Let's do it. They're more knowledgeable about such things that we are.I think that in the meantime Ekiga should detect F7 and toggle the cursor, as do other apps.Moving this feature to gtk+ _may_ make sense but it would require coordination with the apps which are already implementing this themselves (i.e. gedit, mozilla/firefox, evolution, etc.)I haven't read all the way through this bug, but commenting on something that was said in one of the earlier comments: cursor visibility is independent of editability, as can easily be tested withthe testtext demo in gtk+/tests(In reply to)The patch proposed insets the visibility. I believe it is being rejected by the ekiga developers because it is believed that it may potentially cause confusion for some users: they might mistakenly think they can edit the area if they can see the caret. I don't agree with this, but my personal opinion should not outweigh those far more experienced in usability than myself.The ultimate solution is probably to do the F7 bit and also add a menu option to enable/disable caret navigation. Based upon the discussion in this bug, it seems as though it's going to be a bit of a resource struggle to get that done (nobody has the time to do it and everybody thinks it's someone else's problem). So...the message area and ekiga will have to remain inaccessible for now unless we can reach a short term compromise and turn the caret visibility on.If someone proposes a patch for Ekiga based on the F7 thing, I will apply it.If nobody does it, I will finally end up doing it myself.However, I think it should be fixed at the GTK+ level so that not all programs have to implement the same thing.(In reply to)Damien - I definitely appreciate your offers here. This is definitely one of those sticky situations where nobody has a lot of time on their hands. :-( As an interim solution, would you be willing to allow the proposed patch in until the F7 stuff is done?FWIW, there is precedent for showing a cursor in non-editable text areas without having to press F7 first: the selectable message text in any standard GNOME alert box. Assuming the text in question here is selectable too (which I'd hope is the case), it seems like an analagous situation to me, so I don't see much of an issue with it from a usability POV.I really don't like the idea of having a visible caret in a portion of a GtkTextView in which the user can not enter data.I'll investigate about a proper fix when I have the time.Hi Damien;You may not "like it" but having a visible caret in non-editable text, on user request, is standard practice. It's considered necessary for accessibility, since the text needs to be focussable and have a clear onscreen indication of focus (according to accessiblity standards such as the US section 508 rules).So I believe the proposed fix is both the best fix and the correct fix. Users don't need to use it if they don't like it, i.e. it's an opt-in/on-demand feature.best regards,Bill(added after the last comment): Damien I see from reading your previous comments that your "proper fix" probably is the F7 toggle as discussed, so we're probably in agreement about the solution. Thanks for having a look at it when you are able.Createda patchHere is a patch that adds a keybinding to make F7 toggle cursor visibility in GtkTextView. It is not quite clear to me if this is what is wanted here, or if this should be a more global thing.This seems like a good thing to me. We're having tons and tons of trouble trying to compile GKT+ on Ubuntu, though, so we're having a tough time trying to test this patch. I have a question, though:If the cursor visibility is not on, will someone still be able to tab to it and then press F7 to toggle visilbity (i.e., does cursor visbility impact tab traversal)?cursor visibility and focusability are independent, so that is possible.Hello Mathias, I've also been having trouble compiling gtk on ubuntu feisty. Looking at the intended functionality this seems like it would be a very useful feature for a screen reader user though.Matthias: I think what we're trying to say is "THANKS! This sounds wonderful, even if we cannot test it. Would you be able to check it in so we could pick it up from a distribution that has success in building GTK+?"Yeah, I'll check it in in a bit.2007-05-18 Matthias Clasen <> * gtk/gtktextview.c: Add a toggle-cursor-visibility keybinding signal, and bind F7 to it. (#380048, Tim Miao)Can someone tell why this funny shortcut is added to gtk? Does it really benefit all textview users? If it's one application, then perhaps the application should do it? Does it really make sense for editable textview? Here, for example, I finally found out why F7 isn't working as a shortcut and why sometimes cursor disappears, it was quite non-trivial! How about making F7 switch visibility only when textview is not editable?(In reply to)In general, F7 is reserved for enabling caret navigation and one should probably not change its meaning.Then it maybe makes sense to introduce GtkWidget::switch-caret-navigation and implement it properly. F7 turning off the cursor in a text editor is not a feature, it's a bug. It's not obvious that shortcut from mozilla (if you know about it) which turns on caret navigation in an html view also makes the cursor disappear in a textview. Even HIG says that F7 is a shortcut *in Yelp*, not something general-purpose.Matthias?I guess making F7 only toggle cursor-visibility on non-editable text viewswould be good enough, and would avoid the unexpected behaviour in editors.Would you be willing to do a patch for that ?Createdtrivial patchIt'd be nice to make the signal return a boolean, so that F7 would do nothing at all in an editable textview (and so F7 wouldn't be stolen for no useful purpose!), but that would be a break.Hello,Matthias (or any gtk+ devel), Could you review the Yevgen patch?Thank you!	63.0	id=778216	6	False	False	dboles	1
id=771145	REOPENED	gnome-builder	general	3.21.x	Other Linux	Normal major	GNOME Builder Maintainers	2016-09-10 01:44 UTC by	Mohammed Sadiq	2017-02-19 12:49 UTC (	4 users	The run button (C-F5), which is supposed to run the application does not work.This was tested with the inbuilt gnome application (in C) created using New Project.	I can't reproduce this anymore. Hopefully, it's fixed.Thanks.It seems like the issue is not resolved completely. It seems to happen randomly.The following issues are logged to terminal when run button is clicked. Different issues logged when on jhbuild and on system installed versions.In both cases I have used 'Host operating system' as runtime.From jhbuild (jhbuild run gnome-builder):19:11:58.0807 Ide[9683]: WARNING: Failed to locate build targetFrom system installed gnome-builder (Debian testing, version 3.22.1):19:06:14.0355 Ide[30637]: WARNING: A build is already in progressI wasn't able to bring up a way that can always reproduce this issue. Though the following method almost always brings up the issue:1. Build Some application (tested with inbuild GNOME template example in C)2. Run the application using the run button.3. Close the application, and try to run application again.Result:The application did not run the second time.Please let me know if more information is needed.Thanks.Please test with either git-master or 3.22.2. I believe it was fixed since 3.22.1.(In reply to Christian Hergert from)The jhbuild version was git master. Anyway I shall test 3.22.2 and inform once its packaged in Debian testing.Thanks.Debian tested has updated gnome-builder to version 3.22.2. And I can't reproduce this bug anymore.Marking as fixed.I still seems to have this problem. And I saw that this happened after uninstalling the packagekit package. Installing the packagekit package fixes the problem again (Though it sometimes doesn't run for some reason).I don't know why packagekit is required to run the program. Sorry, reopening again.Have you tested with 3.22.3 or git-master?We don't do anything with packagekit.This seems to work with me on 3.22.4(In reply to Christian Hergert from)Yup. For me too, but not always. Sometimes, run button never works. In some cases it works flawlessly for every click. I'm trying to find a way to reproduce this in a reliable way. But everything is just random now. Don't close this bug now. Thanks.I have this problem as well with 3.22.4 in Arch. The run button never does anything. I have tested with two different Meson projects.(They both have multiple executables though. Am I supposed to get a list of executables in that case? Should I file a separate bug?)(In reply to Martin Ejdestig from)It just uses the first executable it finds that is installed in the /bin dirBut looking at the plugin code it does targets.append() anyway, right?Also, would be nice to be able to choose what to run somehow (dropdown arrow next to run button?) if there are multiple executable targets. E.g. a project that is a library may have multiple examples and test executables (not meant to be installed).We already have a dropdown arrow next to the run button for what to run the project with (Run, Run with Profiler, eventually with Debugger, etc). But we might be able to use the submenu system with GtkPopoverMenu to make the equivalent of a submenu with the list of available targets.(In reply to Martin Ejdestig from)Yea Meson has the nice property of being trivial to extract every target so we just return the full list for when that is useful in the future. The Autotools plugin has to do more work and just extracts what it is specifically told to.Ah, right. But yes, some way to choose what to run would be nice. :)OK.I have never seen anything in "Run Output" when pressing the run button.Come to think of it, I actually have a Meson project that only builds a static library and a unit test executable that uses googletest. Test output is not printed. Just added a busy loop that never exits in one of the tests to see if the process was run at all. It is not. Running the executable in ~/.cache/gnome-builder from the terminal I can verify that it hangs forever.Any more information I can provide to help with this?(In reply to Martin Ejdestig from)Well you can't run libraries and tests are not included in the general target list nor are in they installed to /bin so they will not run.Meson has a tool to expose running tests and gathering output Builder just needs to add an interface to that and do the same for Autotools.I removed test() and just kept executable(). Still does not work.Hum, mesonintrospect --targets shows the executable regardless of wheter i removed test() or not. So I do not understand what you mean here. Anyway, did not work to remove it so does not really matter. :)(In reply to Martin Ejdestig from)Ah you are right, it shows the executables but the functionality for *running* tests is in `mesontest`. Anyway since the test executables are not installed they never make it to the point where builder would try to run them. This is all very basic stuff that needs to be expanded.Oh, so an executable _has_ to be installed to be runnable? I thought the logic in the plugin just prioritized executables put in /bin. Two things then:1) Should it be possible to run executables without requiring the build system to do install? Would be nice, I think.2) If there is nothing to run this should be reflected in the UI somehow, right?(In reply to Martin Ejdestig from)Yes. But by "runnable" we mean using the run button at the top. There is no reason we cannot provide alternate interfaces for things like unit tests. In fact, I'd like to see someone do a SoC project this year to add a unit testing panel and test runner abstraction that the build systems can implement.No. We do not want people to continue doing hacks to run out of tree. If we support this, it will be through a very specific abstraction designed for unit testing. And in the meson case, we would expect mesontest to handle that for us.That would be a nice improvement.Createdautotools: don't miss lines when parsing make outputNew targets where added only if the key doesn't end with "dir".So when parsing make output, if the end lines end with "dir" as keythey are not added to targets. This caused missing bin dirs.This commit allows to parse the whole output once, and update thetargets based on the output separately, which would reduce the issue(though some races are still present).I don't think this should be necessary.Is it possible that commitcould have been affecting it?I just tested a new project quick and it seems to be working.(In reply to Christian Hergert from)The issue is still present. I still don't exactly know why it is happening. I shall try to investigate further and report, if I find anything fishy.Until then, let the patch attached above be not committed (I can't mark it obsolete).Thanks.Createdautotools: don't parse empty variablesCreatedautotools: don't skip parsing the last lineNew targets where added only if the key doesn't end with "dir".So when parsing make output, if the end lines end with "dir" as keythey are not added to targets. This caused missing bin dirs.This commit makes makecache not skip the processing of last line.Review of:LGTMReview of:Nice, I like it. LGTMThanks for tracking this pesky one down!pushed as- autotools: don't parse empty variablespushed as- autotools: don't skip parsing the last lineCreatedautotools: guard against NULL valuesThis is against masterSorry. Due to some races, issues are still present. And on an average, this happens once every 10 runs, or so.A patch is incoming.ThanksCreatedautotools: fix finding installation targetsDue to some races, the interesting targets like bin_PROGRAM may beparsed first before bindir is parsed. This may cause failure in findinginstallation targets.This commit parses the make output twice, but only when there is chance for a miss,and tries to find the installation directory.Createdautotools: fix finding installation targetsDue to some races, the interesting targets like bin_PROGRAM may beparsed first before bindir is parsed. This may cause failure in findinginstallation targets.This commit parses the make output twice, but only when there is chance for a miss,and tries to find the installation directory.Createdautotools: fix finding installation targetsDue to some races, the interesting targets like bin_PROGRAM may beparsed first before bindir is parsed. This may cause failure in findinginstallation targets.This commit parses the make output twice, but only when there is chance for a miss,and tries to find the installation directory.A bit of µOptimization won't hurt. :)	34.0	id=771145	23	False	False	sadiq	1
id=704816	REOPENED	GIMP	General	2.8.14	Other All	Normal major	GIMP Bugs	2013-07-24 14:54 UTC by		2015-06-06 21:29 UTC (	2 users	Whenever I try to load up GIMP 2.8 on my Windows 7 Toshiba, it will load just fine after download, however, I recently uninstalled GIMP 2.6 because even though it was using the brushes/patterns/gradients, it wouldn't load any of the new things I tried to add, so I added them to my GIMP 2.8 folders, and since then, GIMP 2.8 will no longer load up passed the part that says "Updating Tag Cache". Normally, GIMP took a while for me to load and often would tell me that it was "No Longer Responding" or just "Not Responding" but would then correct that and load up just fine. However, this time, when it gets to "Not Responding" my PC says GIMP failed to open, it is checking the problem and it only gives me the option to close it, at this point it no longer makes any attempt to open and it's bothering me because I use GIMP for my artwork and a few other projects on sites such as IMVU. I sell my artwork and the stuff I do on IMVU makes an income for me, so I was wondering if you know what is causing this problem and if there is anything I can do to fix it? (I use 2.8 on my MacBook and it has no issues whatsoever it just takes forever to open up with all of my brushes/patterns/gradients, so I'm confused as to why these are giving me issue on my PC)	Thanks for taking the time to report this bug.This bug report isn't very useful because it doesn't describe the bug well. If you have time and can still reproduce the bug, please readand add a more useful description to this bug, especially *exact* version information.Version is the most recent 2.8.6 I believe.I have brushes and patterns that worked on all of the GIMP 2.6 versions I had, they also worked just fine on my mac. However, on my Toshiba, when I moved the brushes and patterns over into my Gimp 2.8 folders, I could not load GIMP. It would get as far as "Updating Tag Cache" (that's what it said on it's start up screen) and it would freeze and Windows would close it.I have had no problem using GIMP 2.6 on my Toshiba (Windows 7 OS) in the past and for my MacBook (Runs SnowLeopard OS 10.6 I think) I run GIMP 2.8.6 and it has also not had any issues with opening.I hope this helps a little more... I'm not sure what specific scripts and such are being run when GIMP tries to open but it doesn't like to run with any of the new brushes or patterns I've installed.Does this still happen in 2.8.10?Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!Happens on Windows 7 Pro SP1 x64 with a fresh GIMP 2.8.14 install. I am able to help provide some debugging information. Im not familiar with WinDBG though.***has been marked as a duplicate of this bug. ***	6.0	id=730360	29	False	True	karel.macha	1
id=730360	REOPENED	gnome-shell	login-screen	3.12.x	Other Linux	Normal major	Ray Strode [halfline]	2014-05-19 09:41 UTC by		2016-04-07 03:49 UTC (	17 users	When switching user (either via Gnome shell menu or from lock screen 'log in as another user' prompt), the user list often does not appear at the GDM screen, leaving just the default grey background. The expected behavior is to display the user list.The user list flashes up for a split-second if you repeatedly hit the return key. It appears as if the user list is still responding to keyboard commands, but is not visible (i.e. typing in your password and hitting return does allow you to enter a session, but you cannot actually see the user-list or the password field on-screen).Usually user switching exhibits the expected behavior for the first 1 or 2 user switches after a reboot. Subsequent attempts to switch user result in the above described behavior. Occasionally when switching users GDM fails to appear at all, leaving just a black screen.Using Gnome 3.12.2 on Fedora 20 64-bit via R. Hughes COPR	I have the same issues on Fedora 20 64-bit Using Gnome 3.12.2 via R. Hughes COPR.Usually the first 1-2 times I switch between users thngs works for me, but then I end up with default grey background without a user list. The behavior is identical with the one stated above.I switched to another tty with ctrl + alt + f2 and back and then the lock screen (the "curtain") appeared. I could then login normally.The journal displayed follwoing messages afterwards :kvě 18 23:42:16 bumbrlicek gdm-password][7653]: gkr-pam: couldn't unlock the login keyring.kvě 18 23:42:19 bumbrlicek gdm[761]: GLib-GObject: g_object_unref: assertion 'G_IS_OBJECT (object)' failedkvě 18 23:42:22 bumbrlicek gdm-password][7660]: The gnome keyring socket is not owned with the same credentials as the user login: /run/user/1000/keyring/controlkvě 18 23:42:22 bumbrlicek gdm-password][7660]: gkr-pam: couldn't unlock the login keyring.kvě 18 23:42:22 bumbrlicek gdm[761]: GLib-GObject: g_object_unref: assertion 'G_IS_OBJECT (object)' failedkvě 18 23:42:22 bumbrlicek gnome-session[1576]: Gjs-Message: JS LOG: loading user theme: /usr/share//themes/Ceti/gnome-shell/gnome-shell.csskvě 18 23:42:22 bumbrlicek gnome-session[1576]: Gjs-Message: JS LOG: fookvě 18 23:42:22 bumbrlicek gnome-session[1576]: ** (nautilus:1845): WARNING **: Can not determine workarea, guessing at layoutkvě 18 23:42:27 bumbrlicek gnome-session[1576]: (gnome-shell:1723): St-CRITICAL **: _st_create_shadow_material: assertion 'src_texture != COGL_INVALID_HANDLE' failedkvě 18 23:42:28 bumbrlicek gnome-session[1576]: (gnome-shell:1723): Gjs-WARNING **: JS ERROR: Error: Trying to remove invalid content: [object instance proxy GIName:Meta.Background jsobj@0x7f634fbb1790 native@0kvě 18 23:42:28 bumbrlicek gnome-session[1576]: BackgroundCache<._removeContent@resource:///org/gnome/shell/ui/background.js:117kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: BackgroundCache<.removeImageContent@resource:///org/gnome/shell/ui/background.js:132kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: Background<._destroy@resource:///org/gnome/shell/ui/background.js:369kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: BackgroundManager<.destroy@resource:///org/gnome/shell/ui/background.js:742kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: WorkspaceThumbnail<._onDestroy@resource:///org/gnome/shell/ui/workspaceThumbnail.js:493kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: WorkspaceThumbnail<.destroy@resource:///org/gnome/shell/ui/workspaceThumbnail.js:471kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: ThumbnailsBox<._destroyThumbnails@resource:///org/gnome/shell/ui/workspaceThumbnail.js:900kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: _emit@resource:///org/gnome/gjs/modules/signals.js:124kvě 18 23:42:28 bumbrlicek gnome-session[1576]: Overview<._hideDone@resource:///org/gnome/shell/ui/overview.js:665kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: _addHandler/params[name]@resource:///org/gnome/shell/ui/tweener.js:89kvě 18 23:42:28 bumbrlicek gnome-session[1576]: _callOnFunction@resource:///org/gnome/gjs/modules/tweener/tweener.js:203kvě 18 23:42:28 bumbrlicek gnome-session[1576]: _updateTweenByIndex@resource:///org/gnome/gjs/modules/tweener/tweener.js:333kvě 18 23:42:28 bumbrlicek gnome-session[1576]: _updateTweens@resource:///org/gnome/gjs/modules/tweener/tweener.js:345kvě 18 23:42:28 bumbrlicek gnome-session[1576]: _onEnterFrame@resource:///org/gnome/gjs/modules/tweener/tweener.js:360kvě 18 23:42:28 bumbrlicek gnome-session[1576]: _emit@resource:///org/gnome/gjs/modules/signals.js:124kvě 18 23:42:28 bumbrlicek gnome-session[1576]: ClutterFrameTicker<._onNewFrame@resource:///org/gnome/shell/ui/tweener.js:206kvě 18 23:42:28 bumbrlicek gnome-session[1576]: wrapper@resource:///org/gnome/gjs/modules/lang.js:169kvě 18 23:42:28 bumbrlicek gnome-session[1576]: ClutterFrameTicker<._init/<@resource:///org/gnome/shell/ui/tweener.js:181kvě 18 23:42:28 bumbrlicek gnome-session[1576]: Varování správce oken: Log level 16: AT-SPI: Error in GetItems, sender=org.freedesktop.DBus, error=The name :1.14 was not provided by any .service fileskvě 18 23:42:32 bumbrlicek fprintd[7345]: ** Message: No devices in use, exitkvě 18 23:42:34 bumbrlicek gnome-session[5478]: (gnome-settings-daemon:5578): GnomeDesktop-WARNING **: Failed to acquire idle monitor proxy: Časový limit vypršelSometimes - after a I switch to another user, my monitor goes dark as it would loose a signal from a grapic-card.Looked in the logs and found several appearances of :GnomeDesktop-WARNING **: Failed to acquire idle monitor proxy: TimeoutGnomeDesktop-WARNING **: Error setting property 'PowerSaveMode' on interface org.gnome.Mutter.DisplayConfig: Timeout (g-io-error-quark, 24)gdm-Xorg-:5[11406]: (II) AIGLX: Suspending AIGLX clients for VT switchgdm-Xorg-:1[5036]: (II) AIGLX: Resuming AIGLX clients after VT switchgdm-Xorg-:1[5036]: (II) intel(0): switch to modeon HDMI2 using pipe 0, position (0, 0), rotation normal, reflection noneI have exactly this problem in an up-to-date Arch Linux installation (gdm 3.12.2-1 for the record). In my case the problem occurs randomly, and sometimes gdm works as expected for a day or two; on average I get this once or twice a day. Despite my efforts I've not been able to reproduce it, it is really frustrating. This is a fairly recent install, and 3.12.2-1 is the only version of GDM that has been installed on my system, so I can't say whether or not this problem is specific to this version.The logs are unremarkable (if someone is interested I can upload some logs entries immediately before and after an episode). After I've set Enable=true in the [debug] section in /etc/gdm/custom.conf, the only meaningful error I've seen is:GLib-GObject: g_object_unref: assertion 'G_IS_OBJECT (object)' failedbut I don't think it is related since I see it even when GDM works normally. Sigh :( Now I'm waiting for more episodes to happen so I can collect logs. Probably not relevant, but I have an Intel integrated graphic card.Also Arch Linux (3.12.2-1) and also problems.First login after start is ok.Upon relogin after sleep or userchange gdm screen freezes with this log:nb gdm-password][20385]: The gnome keyring socket is not owned with the same credentials as the user login: /run/user/1000/keyring/controlnb gdm-password][20385]: gkr-pam: couldn't unlock the login keyring.nb gdm[406]: GLib-GObject: g_object_unref: assertion 'G_IS_OBJECT (object)' failedI've observed the same behavior. It's been intermittent with past versions of GDM and Gnome Shell on Archlinux for my PC. My PC includes and AMD processor and AMD video card. There is nothing intriguing in the logs (debug not enabled). Another interesting thing, the user list appears to be present with clicking of the mouse. It appears as if the background image is drawn on top of the user list. In fact, the user list appears to operate correctly, with selecting user, typing password and logging in the additional user. Is there a way to change the layering of the user list and background image as a test? Maybe change background image for a partly transparent image and see if problem ever occurs?Same problem here, and I have an nvidia card running Arch Linux (3.12.2-1). Using journalctl shows me these two log messages repeated about 800 times at the instant that the user list first fails to show:Aug 24 21:36:48 dan-desktop gnome-session[704]: (gnome-shell:846): St-CRITICAL **: _st_paint_shadow_with_opacity: assertion 'shadow_material != COGL_INVALID_HANDLE' failedAug 24 21:36:48 dan-desktop gnome-session[704]: (gnome-shell:846): Clutter-WARNING **: ./clutter-offscreen-effect.c:207: Unable to create an Offscreen buffer***has been marked as a duplicate of this bug. ***Demonstration:In that video, when I'm moving the mouse around in circles on the graybackground, it's just to indicate that the computer is not frozen. When I'mhitting keys on the upper-left corner, I'm actually doing ctrl+alt+F1/F2/F3.The way to reproduce this for me is to have two system user accounts, and to repeatedly try to "switch user" between them. You can also try doing a "logout" from the 2nd account for fun, as it can also trigger the bug sometimes, IIRC. Even "normal" use (ie not nekohayo "torture testing"), where you only switch accounts once or twice per day, can get you into this deadlock situation.Sometimes switching VTs (ctrl+alt+F1/F2/F3/etc.) allows you to go back to the previous user account (in which case you may see the password prompt and then the screen shield falling down), but not always. I recall having had to resort to complete reboots, more than once.This issue remains for me in 3.14, even with a new install. Any updates?I can reproduce it in 3.14 too. I simply switched users, logged back in, and when switching users again the user list is blank, and intermittently comes back when pressing any key.***has been marked as a duplicate of this bug. ***For me this issue started during this autumn, not sure when. Maybe after update to gnome 3.14. And it can be reproduced every time.Currently using 3.14.1-2 in ArchThis is quite annoying, we have 5 users using this same PC and currently we always need to reboot. Well, good side is that there is no need to swap with this "kind of single user gnome mode".(In reply to)Also using Arch. I observed this behaviour on GDM started right after upgrading Xorg to 1.16.xI have these exact same symptoms with CentOS 7 running its default Gnome 3.8.4.I've documented more details on how I can easily reproduce this problem in my CentOS 7 bug report here:One useful thing I've discovered is that running this command as root will remove the borked grey login screen:pkill -f pam/gdm-launch-environmentand let you use the Switch User login screen again. But this is only a weak workaround, the next time a login screen is abandoned the problem will recur.When I investigated this before, it seems like the SessionActive signal was being dropped on the floor sometimes, and I wasn't able to figure out why. I do wonder if we're leaking DBus signal connections -- I remember something about having too many open things causing NetworkManager to stop sending / receiving signals.I can reproduce it with a clean boot, so I wouldn't expect to have an abnormally large number of things open.I also forgot to mention that 'systemctl status gdm' is an easy way to view a list of your displays. You can use this command to verify that 'pkill -f pam/gdm-launch-environment' kills off the last display.This should be fixed now I think:I'm still seeing this (or something similar). I have ArchLinux with Gnome 3.14 and GDM 3.14.1. I installed this patch and recompiled / reinstalled. However, this issue persisted after a reboot. After several user switches and log-in / log-out, I had this issue. When it occurred, I had done the following:Power On (GDM - TTY1)Login User A (Gnome Shell - TTY1)Switch User (GDM - TTY2)Login User B (Gnome Shell - TTY2)Switch User (GDM - TTY3)Login User A (Gnome Shell - TTY1)Logout User A (GDM - TTY1)Login User C (Gnome-Shell - TTY1)Logut User C (GDM - TTY1)Login User C (Gnome-Shell TTY1)Switch User (GDM - TTY7)Login User B (Gnome-Shell - TTY2)Switch User (GDM - TTY7) --- GREY SCREENKinda of interesting that there was suddenly two GDM instances... Perhaps this is related?Ken Jernigan, the steps below will always reproduce the problem for me on CentOS 7. Do the same steps work for you?1. Boot up your PC to its login screen -You currently have only one graphical Display 0/TTY1 at CTRL-ALT-F1 -I.e. Display 0 is your login screen2. Login as user1 (or whatever your first username is) -At this point you still have only one graphical Display 0/TTY1 at CTRL-ALT-F1 -The login display is now user1's display3. From the Gnome3 username menu click "Switch User" -At this point you have a second graphical Display 1/TTY2, most likely at CTRL-ALT-F2 -This is a new login display4. Login as user1 again -At this point you still have a second (abandoned) graphical Display 1/TTY2 (most likely at CTRL-ALT-F2) that is now borked (you just don't realize it yet) -Login Display 1/TTY2 was not re-used for user1 since user1 already had an active display -Instead your PC switched to Display 0/TTY1 which is user1's pre-existing display (i.e. the user switch worked ok)5. From the Gnome3 username menu click "Switch User" -At this point you switch back to abandoned login graphical Display 1/TTY2 (most likely at CTRL-ALT-F2), but it's now a useless blank grey screenFor me the the problem only occurs when the login screen is not re-used as a user's screen (i.e. when the login screen is abandoned). The above steps are the simplest way for me to recreate it. AtI document the steps for a more realistic use case way to invoke the problem.I use 'systemctl status gdm' to view my list of displays and 'pkill -f pam/gdm-launch-environment' to kill the borked display (and restore Switch User functionality).Switching users is still completely unreliable with gdm 3.16.1 - switching users a couple of times blanks the screen completely, the users are still logged in but I must use CTRL-ALT-F$(display number) to access their sessions again.This is pretty easy to reproduce, but nowadays the user list always comes back after a few seconds. When I experienced this bug in the past, I believe the user list would not reappear.	21.0	id=380048	41	False	False	tim.miao	1
id=778216	REOPENED	gtk+	.General	3.22.x	Other All	Normal major		2017-02-05 20:07 UTC by		2017-02-19 23:04 UTC (	1 user	Createdtest caseI have been experiencing strange behavior with labels disappearing and reappearing. I've managed to generate a fairly simple test case that reproduces it reliably. Compile the attached application and execute it. Press the following arrow keys in the following order:down, down, right, upYou will observe that the label in the first row of the list box disappears. It will reappear if you select its row again or if you click away from the application window.	*** This bug has been marked as a duplicate of***Createdexpected outputCreatedactual outputUntil this bug gets fixed it can be suppressed with the following line of code:gtk_set_debug_flags(gtk_get_debug_flags() | GTK_DEBUG_NO_CSS_CACHE);However, this might incur a performance penalty.There appear to be a lot of bugs that are suppressed by disabling CSS caching. That doesn't mean they are all the same issue. Reopening this to get more eyes on it. Since there is a simple test case that reliably reproduces it this should be fairly easy to triage.	5.0	id=705395	49	True	True	rishi.is	1
id=772778	REOPENED	caribou	default	git master	Other Linux	Normal major		2016-10-11 21:30 UTC by		2017-02-10 16:38 UTC (	3 users	Turning off the on-screen keyboard "caribou" in the Universal Access settings doesn't do anything. The keyboard still pops up every time I tap on a terminal, gedit, or a text field with my touch screen. Tapping on a terminal from the expose view opens the keyboard up. It also doesn't go away when I start typing on my physical keyboard: it only goes away if I hit the button or start using my touch pad. I'm on a first gen Thinkpad Yoga, 4th gen intel i5. Fedora 24, latest updates.	Please note I think no Caribou developer is having touch screen machine to test such bugs. I afraid there will be no action happen on this bug.I suspect it's, where both physical keyboard and touch screen are present.(In reply to Parag AN from)The Caribou developers... don't have touch screen machines? If this is true, it's pretty bizarre, and I encourage them to buy a cheap old tablet laptop to test things out.(In reply to Daiki Ueno from)The bug you linked is not the problem I'm describing. I'm describing a problem where the onscreen keyboard pops up regardless of whether I have turned it off in the Universal Access settings.Don't you use ThinkPad Yoga[1], which has both physical keyboard and touch screen? In GNOME, there are two places which enable OSK: one is the accessibility setting you mentioned, and the other is gnome-settings-daemon which checks if any touch screen device is present. What I was suspecting is that the latter is interfering with the former.1.If you still think this is not, please reopen.*** This bug has been marked as a duplicate of***describes one of my complaints, but not the main bug I am describing. The bug I'm describing is that the GNOME Universal Access setting for turning the OSK on and off doesn't work. If I enable the OSK in Universal Access, it shows up. If I disable the OSK in Universal Access, the OSK still shows up. The OSK pops up when I tap on a terminal or text editor with my touch screen (though it doesn't pop up if I tap on a Firefox text field).only has to do with the OSK staying up onscreen while the physical keyboard is being used, so it doesn't cover this bug.Dupe of?	7.0	id=747154	7	False	False	tiagomatos	1
id=747154	REOPENED	gnome-shell	general	3.16.x	Other Linux	Normal major		2015-04-01 04:30 UTC by	Graham	2015-04-04 15:21 UTC (	1 user	Recently updated to 3.16 on an PC running arch linux and the gnome shell hangs for several minutes periodical (at least once / hr), when I log in using x11. The desktop does not crash, but is unusable. After waiting a few minutes ~3-4? I can continue using the desktop.I'm on kernel 3.19 using and the nouveau 1.0.11-3 video driver for a GF119 [GeForce GT 610] graphics card.Interesting I do not see hangs when I log in using wayland (delighted that wayland + gnome is very usable).	Check journalctl after this happensCreatedjournalctl output after gnome 3.16 freezeAttaching journalctl output after gnome 3.16 freeze. Freeze happened @ ~ 23:06(In reply to Graham from)Looks like a driver issue and the messages are very similar toso duping.*** This bug has been marked as a duplicate of***I'm finding similar but less frequent hangs with the close source nvidvia 346.47-11 driver also. Attaching journalctl log from last boot.Createdjournalctl log with nvidia 346.47-11 driver and gnone 3.16 hang	6.0	id=772778	7	False	False	panemade	1
id=753443	REOPENED	yelp	General	3.17.x	Other Linux	Normal major	Yelp maintainers	2015-08-10 10:38 UTC by	David King	2016-09-15 08:30 UTC (	8 users	Since the WebKit2 port, if I try to view a local path (such as with "yelp help/C" when running inside a git repository with some help), I get a plain (unstyled) page which says "URL cannot be shown".	We are not correctly handled documents with file:// uris. I'll try to fix this for .1CreatedBacktrace(In reply to David King from)I have a debug build, and I get an assertion failure.CreatedRestore ability to load local filesIt's still pretty buggy. Images are missing. You often have to click alink twice before it will work, and the back/forward list gets screweywhen that happens.Debugging notes:yelp-uri-builder changes the file URI to a bogus-file URI. Eventually that winds up being passed to WebKit unchanged, which isn't going to work. That's easy to fix by just returning early from build_network_uri(), or moving more code into the conditional there. Anyway, after that change, WebKit no longer crashes, and Yelp will load the directory the file is in, but not the file itself.Next, resolve_gfile() in yelp-uri.c inserts a rogue # character between the directory name and the basename of the file. That can be fixed in resolve_file_uri() by setting priv->fullurl right before the call to resolve_gfile(), which tells resolve_gfile() not to mangle the URI. (Don't do this though; see below for why.)Now Yelp will load the file properly, except it's loaded as plaintext. The remaining issue is that we don't have a custom URI scheme handler for file URIs as we do for the help URIs. The URI scheme handler in yelp-view.c is what's responsible for actually taking the URI and returning a data stream to WebKit, with an appropriate MIME type set, via webkit_uri_scheme_request_finish(). As far as I can tell, it's not possible to set a custom scheme handler for file URIs, since that's not really a custom protocol. So the thing to do is to send a bogus-file URI into WebKit after all, and handle it. The web extension takes care of converting it to a file URI. This means the only change needed in resolve_file_uri() is to add "file" to the list of special-cased URIs, otherwise the URI seen by the scheme request handler will have one slash too few, and somehow that causes the first component of the path to be stripped.Now, regarding original WebKit assertion: I haven't debugged why this is happening yet, but the problem is PageLoadState::didStartProvisionalLoad is called twice in a row (which is illegal), once with the URI file:///error/ and then again with the URI about:blank:didStartProvisionalLoad token=0x7fff0e6f6290 url=bogus-file:///home/mcatanzaro/jhbuild/checkout/gnome-nibbles/help/C/index.page unreachableURL=setUnreachableURL token=0x7fff0e6f6290 unreachableURL=didFailProvisionalLoad token=0x7fff0e6f6240setUnreachableURL token=0x7fff0e6f58f0 unreachableURL=bogus-file:///home/mcatanzaro/jhbuild/checkout/gnome-nibbles/help/C/index.pagedidStartProvisionalLoad token=0x7fff0e6f6290 url=file:///error/ unreachableURL=setUnreachableURL token=0x7fff0e6f6290 unreachableURL=didStartProvisionalLoad token=0x7fff0e6f6290 url=about:blank unreachableURL=bogus-file:///home/mcatanzaro/jhbuild/checkout/gnome-nibbles/help/C/index.pageASSERTION FAILED: m_uncommittedState.provisionalURL.isEmpty()I haven't forgotten this, but I haven't had enough time. I've started several times to work on this, but the yelp uri code is a bit messy. I'll try to find some more time soon.fyi, this has broken the anaconda help in Fedora(In reply to Matthias Clasen from)FYI: we noticed this very late because anaconda help is a new feature and there wasn't a test criterion for it until now. We've reverted to Yelp 3.17.2, since this is a tough bug and we needed a fix yesterday.Createdlibyelp: fix handling of documents using local pathsSorry again for the delay to fix this, it was indeed tricky. I think I'm handling all the cases supported before, but also man and info URIs should work now. So, you can use yelp /foo/bar for mallard (passing the directory or a page in the path), docbook (passing the xml file in the path), man and info. Passing the URIs with a full path is also supported, for example ghelp:/foo/bar, man:/foo/bar or info:/foo/bar. All other URI types don't support full paths (as before the wk2 port).David or Shaun, will you be able to review this soon? Anaconda user help is a Fedora release blocker.HTML files still show "URL cannot be shown". DocBook files just show an empty page.(In reply to Shaun McCance from)I didn't know we also supported any HTML file, I guess epiphany is more appropriate for that, but I'll look at it anyway. Regarding docbook, what documentation are you trying? and how? yelp /usr/share/gnome/help/gstreamer-properties/C/gstreamer-properties.xml that works for me here.Could someone confirm if this patch fixes the anaconda use case at least?Regarding DocBook, it actually does work with a local path to a .xml file, just not a local path to a .docbook file. And I think that might be an existing bug that predates the WK2 port.Comment onlibyelp: fix handling of documents using local pathsPushing this patch. Keeping bug open until HTML paths are fixed.The issue with .docbook files isUpon further testing, I seem to be getting a lot of crashes when clicking around. The first page always loads. The rest, not so much.(In reply to Shaun McCance from)Could you provide more information? what document are you trying? does it happen with a particular document? do you have a bt?If you could get a backtrace from ABRT or coredumpctl...?Anyway, this is fixed, let's open new bugs for crashes.HTML paths still don't work, so I don't consider this fixed.I could use some pointers on getting backtraces from out-of-process WebKit. All I get from gdb on the main process is that the main loop is spinning.(In reply to Shaun McCance from)OK.sudo gdb -p `pidof WebKitWebProcess`(if it's the only web process running)But really, it's much easier to just get it from coredumpctl: `sudo systemctl stop abrtd`, make it crash, then simply run `coredumpctl gdb`.FWIW, it works for me without crashing.[Removing outdated "GNOME target" value.]	21.0	id=641723	109	False	False	otaylor	1
id=604715	REOPENED	GIMP	General	git master	Other All	Normal major	GIMP Bugs	2009-12-16 12:56 UTC by	Ihave NoName	2017-02-07 17:35 UTC (	5 users	Createdxcf filehi,changing the layermode of a layer which is in a layer group (overlay, for example) doesn't really work.But when the layer is outside of a layergroup, it works.seems that the layergroup can't access the pixeldata below iti attached a xcf file which should explain it	I think that's the intended behavior. The whole point of layer groups is that the layers inside don't interact with the layers underneath.I can reproduce this and I'd say we need to fix this for 2.8.We will clearly not fix this because it is precisely how it is supposedto work. Layer trees are a hierarchical composition, so in order todo "overlay" on the tree below, the only way of doing this is settingthe group layer itself to overlay. Layer modes inside the group of coursehave no effect on the pixels outside the group.i don't think that the current way is useful. its useless that you only can set the whole group to layermode XYZ and not single layers. i personally use layergroups to get a better ordering and not creating completely "new objects" that can't affect the rest stuff.You can use layer modes inside a group, and they will affect the layersbelow *inside* the group.Groups in GIMP are true "sub-images", not just a means to organize andpartly hide away a large list of layers.I must have done something weird the first time, things work as I expect them to when I try again. So I agree with the resolution as NOTABUG.Ihave, it would be interesting though if you could show a composition where this feature would make sense to have.(In reply to Michael Natterer from)(And also to previous flow of the discussion)This is true, but... Imagine situation You are using Gimp for creating multilayered image.Lets say We do have the texture of female face(s) so beside several base textures of different faces (with normal filter, 100% opacity), You also need aditional alyers for diferent haircolours, makeups, facepaints/tattoos and so on.In case I would like to maintain variability to some kind, it is rather necessary to have option to stack various layers with different (pieces of) makeups, haircolours, facepaints. In that manner it is possible to create different versions of same base face with different makeup and or hairstyles, and also to reuse (if applicable) one on different face.In this manner it will be good to have not only stacking in the group, but also standard stacking from bellow. I am still able to nest groups one into another, but this is... Well what Should I do in case I need to turn off one type of layers (e.g. tattoos) to this particulary face texture? With the ability to stack both I jusm mannage to switch off the tattos layer, but in case of nested I do not only switch off the tattoos layer but also any other nested layers!!!So either I have to have everything on the heap (which is poorly managealable for layercount 20+) or use several xcf files and stack the semi-results (flattened or exported) into additional file (which is more or less the same - poorly manageable).Reopening, it seems we should have this after all.***has been marked as a duplicate of this bug. ***has a workaround patch that makes PSDs with such groupsdisplay properly.Er,is this very bug report you are commenting on, mitch :) Did you meanfrom? That said, we probably want a real solution. Would adding the pass-through mode break API/ABI?I think I need that too !If I understand right, it's the ability to have in one layer group, different blend mode for each layer.My use case is → expected result →But if drop-shadow is kept inside its layer group →( I use this drop-shadow filter →and this stroke filter →)So I have to re-arrange layers and delete emptied layer groups to get expected result.Text layer has grain fusion mode, drop-shadow has multiply mode and stroke has normal mode.If those 3 layers were in one layer group, I'd get this →where text loses its mode ( why ? ).I have no idea what these 3rd-party scripts are doing. Please create a*simple* XCF demonstrating the problem, without using any of theseadditional menu entries.Well just try to add a drop-shadow and a stroke to a text, put these 3 layers with 3 different modes in a layer group and the result will be the same.It's not related to filters, it's related to layer modes + layer group.Filters I use come from&They have the great advantage to let chose if effect is merged with original layer or drawn to a new layer.Such option is a must have with text layers.And they provide "classic" filters but with many options, missing from "basic" default filters in the Gimp ( basic default filters destroy text attribute ).Createdpassthrough compositing exampleLooks like passthrough groups in photoshop are more than just UI sugar. Take a look at this composition: Layer Mode Opacity + (group) Passthough 50% |- B Normal 100% |- G Lighten 100% R Normal 50%The blue layer blocks the green layer, while the green layer is still blended with the red layer.	16.0	id=753443	18	False	False	fpeters	1
id=775699	REOPENED	evolution-data-server	Tasks	3.22.x	Other Linux	Normal major		2016-12-06 11:51 UTC by	Antoine Saroufim	2017-01-24 06:47 UTC (	3 users	On openSUSE Tumbleweed and Archlinux gnome-todo and evolution can upload tasks to Google but cannot download the already existing Google tasks.	Steps to reproduce highly welcome.1 - Sign in to Google via gnome-online-accounts and grant GNOME full access2 - open gnome-todo3 - Add a task to the gmail task list4 - navigate through a browser to5 - Mark the task you entered through gnome-tasks as complete6 - Add several tasks7 - Check a 3rd party app to make sure that it's syncing properly8 - open gnome-todo and notice that the task you initially entered is not marked as complete and the several other tasks you have entered are also not there9 - Add another task from gnome-todo10 - Checkand 3rd party sync app and notice that the task added from gnome-todo and those added directly via web are there11 - open Evolution and navigate to Tasks tab and notice that it has the same exact content as gnome-todoNB: tasks that already existed before the initial sync are not downloaded to gnome-todo eitherThanks for a bug report and steps. Both gnome-todo and evolution are using the evolution-calendar-factory, which is provided by the evolution-data-server (eds), thus they share the same data. As far as I know, there is no good checking for changes implemented on the eds side, thus all the updates are done either manually, of periodically. You can set the refresh interval in the Properties of the task list (it can be found in the context menu of the task list). The same menu also offers a 'Refresh' item, which is used to initiate the refresh manually.That you do not see older tasks is weird. Maybe the initial update (check of available tasks) failed for some reason, or had been just stopped earlier). I cannot test it right now, due to "Daily Limit Exceeded" error returned by the Task List.I retried this and once the "Daily Limit Exceeded" error is gone the Tasks work just as expected with respect of the update itself.I also discarded my local cache and before that entered more than 100 tasks to the task list, when I realized that there are downloaded only the latest 100 tasks currently. I'll fix it.After some investigation, the problem is that the Google server changed something and defaults to max 100 results when "too large" number is used. The GTasks service implements a very different pagination, which is not covered in the current libgdata. I filled afor the libgdata part.I made this work with the changes proposed in the, but please note that they are unreleased yet (even not approved), thus the evolution-data-server tests in the build time whether it can use the code and when it's not available, then it fallbacks to the old behaviour. That also means that it's not enough to get a newer libgdata, but the evolution-data-server should be rebuilt against that newer libgdata, to take the changes into effect, because it's determined in the configure time whether the new code can be used or not.Created commitin eds master (3.23.3+)Created commitin eds gnome-3-22 (3.22.3+)Thank you for the amazingly fast support and continued contributions to the fantastic GNOME stack.***has been marked as a duplicate of this bug. ***I'm reopening this, because the change inwas not accepted (the changes I committed, see, require those changes proposed in). It means that this will be re-done once the libgdata bits are finished.	9.0	id=740619	6	False	False	mcrha	1
id=723922	REOPENED	gnome-software	General	3.10.x	Other Linux	Normal major	GNOME Software maintainer(s)	2014-02-08 20:39 UTC by	Michael Catanzaro	2016-02-25 09:10 UTC (	5 users	A user reported this in another bug:"nm-connection-editor is shown in Software, and isremovable; it removes in this case Control Center (silently), and that’s reallybad."Since this app is required by an uninstallable system app (gnome-control-center), it should itself be uninstallable.	apps should not require other apps. at the end of the day, thats a packaging error.I think the fix here is "hide nm-connection-editor from gnome-software", no?Maybe. Or perhaps better would be "hide any app that depends on another app" since that would eliminate this entire class of issues. I think it'd be good to be more robust in general with this: you can say it's a packaging error (and if so then I think we can hide it), but the fact is that it's going to happen (unless each downstream adopts some automated process to catch this situation).(Not clearing needinfo since I'm sure that's intended for Matthias.)The reason I cleared the NEEDINFO is that it gets "assigned" to the bug reporter (me), unlike some other Bugzillas, and there's nothing more for me to provide here, so setting back to unconfirmed.If nm-connection-editor is required by the control center, it is essentially a core app, and should be treated in the same way as the other core apps.Right, we don't show this now.I would consider it as fixed only if the app removal algorithm checked if some core system component requires the app about to be removed. See also:.I agree, I don't consider this fixed, and it's a distinct issue from. It's not hard to see some core system component, in Fedora and especially in other distributions, growing a inadvertent (or intentional!) dependency on some random app, and I expect removing that app would still destroy your system... right? This is too fragile.E.g. in Fedora, gtk-doc currently depends on the Links web browser, for whatever reason. Hard to imagine why, but it's true. Now, if gtk-doc can have such a crazy GUI dependency, then so could X (e.g. in Arch and various other distros, the X server actually depends on some GUI X testing tools); remove X and we have a big problem. GNOME Software should be robust to this case and not destroy my computer, instead of hoping that distros never make packaging errors.(In reply to Michael Catanzaro from)Not so different because from developer's point of view the only difference is thatwould display a text "Do you want to continue? [Yes][No]" and the user has a choice while this bug would display a text "You can't continue [OK]" and we would never continue.(In reply to Michael Catanzaro from)One can claim this is a packager's error but we should handle such errors rather than allowing a disaster.Keep in mind: gnome-software is not a package management UI. You are halfway down the slippery slope to full-on dependency madness here.Of course, we should display only the information which is valuable for the user (which means the information related with the apps, every single package) and only if otherwise an action would cause a big disaster.(In reply to Rafal Luzynski from)Sorry, a typo: I meant *not* every single package.	13.0	id=604715	15	False	False	blizzardpwnsyou	1
id=768215	REOPENED	glib	gobject	2.48.x	Other Linux	Normal major		2016-06-29 20:16 UTC by		2016-11-22 18:19 UTC (	3 users	gparted build with musl libc crashes with this error:GLib:ERROR:gquark.c:60:g_quark_init: assertion failed: (quark_seq_id == 0)backtrace:Core was generated by `/usr/sbin/gpartedbin'.Program terminated with signal SIGABRT, Aborted.So what happens is that there is a global initialization using g_quark_from_static_string in glibmm/gio/src/application.ccg()This call to g_quark_from_static_string will increase the quark_seq_id (via quark_new) and it happens before the glib_init ctor has called g_quark_init, so when glib_init tries to initialize quark, it will trigger the assert.This can be solved in various ways:- revert commit 2fe992 (Move quark initialization to a constructor)- call g_quark_init from quark_new (and have a static boolean to check that its only initialized once)- call g_quark_init from g_quark_from_static_string (with static boolean check)- say that its not allowed to use g_quark_from_static_string to initalize globals and tell glibmm to fix it other way.	Untested, possible fix:diff --git a/glib/gquark.c b/glib/gquark.cindex 9e51a92..978f9ef 100644--- a/glib/gquark.c+++ b/glib/gquark.c@@ -57,6 +57,11 @@ static gint quark_block_offset = 0; void g_quark_init (void) {+ static gboolean quark_initialized = FALSE;++ if (quark_initialized)+ return;+ g_assert (quark_seq_id == 0); quark_ht = g_hash_table_new (g_str_hash, g_str_equal); quarks = g_new (gchar*, QUARK_BLOCK_SIZE);@@ -280,6 +285,7 @@ quark_new (gchar *string) GQuark quark; gchar **quarks_new; + g_quark_init (); if (quark_seq_id % QUARK_BLOCK_SIZE == 0) { quarks_new = g_new (gchar*, quark_seq_id + QUARK_BLOCK_SIZE);there should of cource be an quark_initialized = TRUE;in there tooI don't see how this scenario can happen. Calling g_quark_from_static string before g_quark_init will run into an assertion when quark_from_string tries to look up the string quark_ht, which hasn't been created yet.Where is the assert in quark_from_string?In g_hash_table_lookup?gpointerg_hash_table_lookup (GHashTable *hash_table, gconstpointer key){ ... g_return_val_if_fail (hash_table != NULL, NULL); node_index = g_hash_table_lookup_node (hash_table, key, &node_hash); ...}g_hash_table_lookup_node seems to have an assert but unless i totally misunderstand the g_return_val_if_fail, it will return NULL if its uninitialized instead of assert?Createdgquark: make sure quark is initialized before create new quarkI think that this might be a possible solution if you insist on calling g_quark_init from glib ctor.Tested on my Alpine Linux desktop (using musl libc) and it works.g_return_val_if_fail is basically an assertion. All bets are off once you trigger one of those. Having that there does *not* mean passing NULL for the hash table is ok in any way.Review of:This defeats the entire purpose of moving quark initialization to a constructor. We do that precisely so we *don't* have to have this extra branch in every quark lookup(In reply to Matthias Clasen from)Understand. Do you have any benchmarking test program so I can try different alternatives? Do you have any numbers that show how big the difference is in practice? I assume the difference is big enough to justify the C++ breakage.So the alternatives that are left are:- forbid using quark functions for global/static vars in C++. For example:This means it just needs to be documented so next time something breaks we can just point the to the doc saying that its a feature, not a bug.- add a function for C++ constructors: g_quark_new_from_static_string or similarGQuarkg_quark_new_from_static_string (const gchar *string){ if (!quark_inited) { g_quark_init(); quark_inited = TRUE; } return q_guark_new_from_static_string(string);}Created0001-gquark-simplify-locking-code.patchThis patch only simplifies the codebase without fixing the issue.Created0002-gquark-move-string-check-to-quark_from_string.patchA second codebase simplification without any change in behavior. I decided to split it to make it easier to see what is going on.Created0003-gquark-fix-initialization-with-c-constructors.patchThis third patch fixes the issue at hand, but together with the 2 previous patches the final result will make codebase simpler.glib/gquark.c | 57 ++++++++++++--------------------------------------------1 file changed, 12 insertions(+), 45 deletions(-)(In reply to ncopa from)Sorry this is broken. We need protect the quarks[quark] with the global lock.Review of:Same comment as the previous patch: this defeats the purpose of moving to a constructor. It brings the branch back.What is the main motive to remove the branch? performance?I'm not sufficiently familiar with the code to write a patch at the moment, but on a high level the following approach should work with no runtime costs except a tiny constant number of branches during startup. It's not a hack but a canonical solution to the problem which is portable and clean.Add a call to g_quark_init to any ctor that depends on g_quark already being initialized. Only ctors need this special treatment; code called after all ctors have run can assume that g_quark's own ctor handled the issue.In g_quark_init, move all code out of the actual body to a new function g_quark_init_body and instead g_quark_init simply call pthread_once(&g_quark_init_once, g_quark_init_body).On the musl libc side we are not going to make a change whose sole purpose is to make code that's missing explicit initialization ordering (and thus broken with static linking) so that it works but only in a dynamic-linking environment. All that does is encourage the treatment of static linking as having second-class status.Supporting static linking is not a goal for GLib.And supporting intentionally broken software with hostile maintainers not a goal for musl.Alright; I think you can patch things on your side as you see fit, then.I'm not the one doing the patching; that's a burden you're putting on our mutual users (mainly distributions like Alpine since they're the ones who'll end up doing and maintaining the patches). I've already spent a great deal of time trying to address this bug constructively, and without impacting performance since I got the impression that the bug was introduced in the interest of avoiding branches at runtime.If there's really no interest in an upstream fix, I would recommend a minimally-invasive fix, just putting a pthread_once call to the init function in every externally visible function that's part of the g_quark API that depends on init having completed. This is trivial to maintain and does not involve introducing any new architectural complexity like cross-library init-function calls. And I strongly suspect it will not make any measurable performance difference either.Sure there is interest in code improvements. Just not in trading insults. But maybe we can get beyond that.I would suggest that an acceptable fix would either need to preserve the quality of keeping initialization out of the runtime calls or be an ifdef MUSL or ifdef NO_CONSTRUCTORS thing.I'd say:- say that its not allowed to use g_quark_from_static_string to initalize globals and tell glibmm to fix it other way.	21.0	id=775699	9	False	False	a9016009	1
id=749863	REOPENED	gnome-shell	general	3.14.x	Other Linux	Normal major		2015-05-25 19:10 UTC by		2015-06-05 20:09 UTC (	1 user	GUI actions experience a slight delay (around a half a second). Example actions are:Clicking on a menu itemButton clicks in dialogue boxes Some examples where this delay is visible:1. In eclipse, click on almost any menu item. The respective action will start after a delay. For example, if I click the Export menu from file menu, the export dialogue appears after this delay. Similarly, clicking next in this dialogue will experience the same delay before going to the next screen.2. Right click on desktop background to bring up the context menu. The menu appears without any delay. Now click somewhere else to dismiss the same. The dismissal encounters this delay. 3. Click close button of the terminal. Confirm close dialogue appears after the delay.4. Even intelli-sense windows in eclipse/android studio show this same delay during dismissal.Note that this delay only appears after using the laptop for 1 or two hours. It looks like the delay gets worsened gradually. If I restart X, the delay resets.This is observed in Fedora 21 with GNOME 3.14.This issue is not present in Mate desktop environment.My machine is Lenovo Z500 with 6GB RAM and i5 processor. It has two video cards and I am using bumble bee. In addition, when I move a window from one monitor to next, the movement is not smooth in the border of two monitors. This also gets worsened with time and disappears after X restarts.	Are you using the nvidia driver?Thanks for taking the time to report this.This bug report isn't very useful because it doesn't describe the bug well. If you have time and can still reproduce the bug, please readand add a more useful description to this bug. When providing a better description, please reset the status of this bug report from NEEDINFO to its previous status.I installed bumbble bee with nvidia drivers.This is the output of lspci -nnk | grep -i vga -A3 command.00:02.0 VGA compatible controller [0300]: Intel Corporation 3rd Gen Core processor Graphics Controller [8086:0166] (rev 09) Subsystem: Lenovo Device [17aa:3904] Kernel driver in use: i915 Kernel modules: i915--01:00.0 VGA compatible controller [0300]: NVIDIA Corporation GF108M [GeForce GT 635M] [10de:0de3] (rev ff) Kernel modules: nouveau, nvidia02:00.0 Ethernet controller [0200]: Realtek Semiconductor Co., Ltd. RTL8101E/RTL8102E PCI Express Fast Ethernet controller [10ec:8136] (rev 05) Subsystem: Lenovo Device [17aa:3977]Ok, your bug description is bit vague but it's likely to be.See also reports from other users at nvidia's forum:*** This bug has been marked as a duplicate of***I had a look in to both these cases and can confirm that these are not duplicates. I will record this scenario and provide a link to the video soon.Createdwindow_movement_delaythis screen cast shows the delay during window movement between screensThis is a video showing the delay with context menu.It looks like the delay goes away if you close all existing windows in your session. I will confirm this after more testing.I can confirm that the delay dis-appears when I close all existing windows.Are there any updates to this?	9.0	id=739178	136	False	False	tiagomatos	1
id=347958	REOPENED	evolution	Calendar	3.10.x (obsolete)	Other Linux	Normal major		2006-07-18 21:01 UTC by	André Klapper	2014-08-29 21:31 UTC (	3 users	have a calendar with a very dark background and a bright font. try to print an appointment in the day view. one cannot read the font, as it's black font on black background.guess this happened while fixing, so fix that... or just fix, perhaps it would also be a fix. :-)	Bumping version to a stable release.Still valid in 3.2.3.Backgrounds are not supported anymore. I think.Ah crap, still valid in 3.10. Printing. Yeah.	4.0	id=723922	15	False	False	mcatanzaro	1
id=641723	REOPENED	gnome-shell	message-tray	unspecified	Other Linux	Normal major		2011-02-07 13:56 UTC by	Guillaume Desmottes	2016-07-12 11:23 UTC (	74 users	Currently when you receive an incoming Telepathy message, the notification is displayed during a few seconds and then hidden at the bottom of the screen. The user has to move his mouse to the right down corner to see them.Those notifications are pretty important, and if the user missed it (because he was distracted or AFK) he may not notice that there are people trying to talk to him before a while. We got LOADS of feedback from people saying there are missing messages because of Ubuntu's indicator patch: just making a small icon turn green is not visible enough for them to notice they have messages; gnome-shell is making this even worst as those incoming messages are not visible at all on the desktop.	So, concretely, do you have suggestions for changes? I think the only real option we have within our current UI framework would be to make the "urgent" so they would pop up at the bottom of the screen until explicitly dismissed.Note that the messages aren't intended to vanish if you are idle (not sure how much of that is implemented), so the AFK case shouldn't happen.We have a patch infor keeping the message tray showing if the user is idle and there were new notifications, which is in my queue of patches to review. This should improve the situation with missing messages.We don't want the user to miss being aware of any new notifications in the tray, not just the chat ones. At the same time, making the chat notifications urgent and requiring the user to react to them as they show up would make the tray behavior not respectful of the user's focus. At most, we can make the first of the chat notifications from a particular person urgent.Showing notifications when coming back from away is nice but not enough. User could miss a notification because he's making a cup of tea or briefly chatting with a co-worker without reaching the time to automatically detect idleness.I think we should distinct 3 type of notifications here:- Important ones (text chat, incoming calls, incoming file transfers, etc) which have to be seen and answered ASAP because they may not stay valid for a long time.- Normal ones (new mails or new feeds to read, download finished, missed call, etc) which are an useful information to tell to the user but which are not critical for him to see ASAP. The current notification system works pretty well for those I think.- Volatile informative ones (song changed in rhythmbox, contact becoming online/offline) which are pure information which are nice to tell to the user when it happens because are not really worth being kept in the notification bar afterwards.We could probably use notification hints for that.I think this bug should be a GNOME 3 blocker. If we don't fix it I except loads of users will be really upset because they'll miss important messages. Trust me, we already experienced that with Ubuntu's indicator patch.(In reply to)All told, I've probably missed at least 30 new messages in the few months I've been running gnome-shell full-time.This is even with event sounds (which were only turned on for me due to a broken gsettings package or something). Now that that's fixed, I have a feeling I'll miss even more messages.Sohas been fixed making the tray show up after the user comes back from away.andwill implement showing a tray after a short period of inactivity if there are new notifications and highlighting the sources for these notifications. In combination with the fact that the tray is always visible in the overview, this should improve the user's awareness of the new notifications.Beyond that, we can keep chat sources highlighted as new until the user interacts with them and/or make the first of the chat notifications from a particular person urgent.From the code perspective, chat messages are already in category of there own and have HIGH urgency value. The messages that come through the notification daemon, have their own urgency value that can be LOW, NORMAL or CRITICAL. So there is no need for an additional hint. HIGH urgency is used it to push chat messages towards the top of the notification queue, just after CRITICAL, if there are multiple queued messages.The linked bugs are both marked important and should alleviate the problem. Not sure it is worth keeping this one open too.I'd keep it open until the 2 other bugs have been fixed so we'll have a chance to reconsider with the new behaviour.I'd keep it open until the 2 other bugs have been fixed so we'll have a chance to reconsider with the new behaviour.What about simply highlight the "message" icon in top panel (aside user's name)? Like it is in Unity (yeah, I know, its a competitor...). It is not disturbing and user always can see if there is some message waiting.I really like that I'm not disturbing by messages, but I also really hates that when I didn't spotted it, I don't know for long time that someone sends me something important...I think that this bug also breaks goal "remind for unseen messages" mentioned in(In reply to)I don't think that's a valid option - not because it's done by a competitor, but rather because it is entirely disconnected from the message tray. The natural reaction to an icon change like this is to click the icon - which will open the user status menu and not show waiting messages.(In reply to)It's true, I didn't think about it this way.So another approach could be highlighting the Activities button. When user click on it, in the Dash is visible message tray. Or it could re-appear notifications there.Only trying to help :) ThanksHi, I have this same problem, i miss messages in chat.I like this options:- highlighting the Activities button (hey, missing notifications is activities to do.)- ... or... simply highlight the "message" icon in top panel- have a queue of notifications in Dash.(In reply to)May be a border glow in button of screen like this animation:(In reply to)This seems to me like too much disturbing, which is exactly opposite of that we are trying to converge to - not disturb but give a clear way to inform about notifications ;)Florian had true argumentation why don't highlight message icon.Yeah, it was my suggestion, but I really like the idea of highlighting Activities button. Lets wait for reaction from someone inside Gnome :)See alsowhere an user is complaining he's missing a load of messages because of the Shell.(In reply to)I still miss a message for hours nearly every day for some of the same reasons described in that (and this) bug. And that's with relatively few incoming IMs. This is with Gnome Shell 3.0.0.2 (since it was brought into Debian experimental; earlier versions for months before that).Showing the Activities view after a long timeout helps a little, but I almost never see that when I come back to my computer after a long break (usually lunch).And though I often have new messages when I unlock my computer at the beginning of the day, I rarely notice them immediately. I could train myself to check for them, but that seems like excessive work on the user's part.I also think (as I predicted above) that part of the reason I'm missing new incoming messages is because I've turned off event sounds. (I don't think turning them back on is a solution, 1. because I want to deal with incoming messages on my own time schedule; 2. they tend to blend into whatever music I'm playing anyhow; and 3. if I do hear them, they annoy me).I think my usage pattern may be falling between 2 cases that are currently handled well:* zero incoming messages (moot point)* frequent incoming messages * these users likely know to check for messages as necessary and just want the slightest notification; they'll get around to it when they reach a natural break pointThe problem is that I get messages rarely enough that I'm not in the habit of checking for them when I hit a natural break point. But when I finally do notice them, it's usually been 1.5 to 4 hours since the original message was sent (and I've generally been at my computer, non-idle nearly the entire time). So it looks like I've been intentionally ignoring the message, not at my computer, etc.***has been marked as a duplicate of this bug. ***another bad experience here! :)from my point of view:1. i looked at gnome shell, clicked the date/time icon to see nice calendar.what i see there? the calendar of course and schedules for today and tomorrow, date time settings starter and ability to start full calendar application. simple and advanced enough.2. now... i expected to see the _message_ icon in top-right corner blinking when i have unread messages. instead i am being annoyed by message tray (even when empathy's chat tab/window is focused). it allows you to change visibility and access acounts, but there is no more messaging related information (i.e. in calendar i have schedules, then why no info/indication about unread messages here?)i have been using gajim for years and it just blinks its icon when there are unread messages. no balloons, poping up windows, etc. very simple notification mechanism, whenever you are actively sitting in front of your computer or you are just back from lunch. for sure _much_less_ annoying than message tray in gnome shell.imho, message tray would be great in activities view (still kinda duplicates with avatars in bottom-right corner?).this and related bugs are few months old now and several proposed solutions are more or less complex, so imho it would be good to have some simple solution at the begining:- display message tray only in activities view - checking for new messages is simple as pressing Alt-F1/win-key in such situation- provide gconf switch to enable blinking message icon in top-right corner when there are unread messages - if it is ok with UI concept, then enable this option by defaultabove proposal is quite simple, easy to implement, does not require any special behaviour algorithms (based on timeouts, screen saver settings, inactivity guessing, etc) and does not prevent you from implementing more advanced techniques in the future, imho.I totally agree with wrobell.My proposal is to put an icon in system status area for centralized notification notification handling (xchat icon is good example). When user click on this icon, list of all notifying items appears.User should be able to mark all items as read with one click andnotification icon turns to its inactive state and will be ready for newnotifications. This is needed, because some times you don't have time topay attention to everything and if you see that currently there is notso urgent apps requiring your attention, you can leave it as is andprepare notification area for new possibly more important notifications.If user click on an item, that asks for attention, action provided bysender application should be performed: mail client opens list of unreademails, chat client opens chat window, IRC client shows list of channelsthat are monitored for activity, etc.Also it would be great to blacklist some apps or some kinds ofnotifications in an app. This would be really useful if you see, that anapp is asking for your attention to often with not so important information.How about adding a slight glow or even a small icon in the message tray hot corner when there are new notifications? That way it's directly connected to the message tray, and shouldn't be too distracting.CreatedNotification exampleThis is my suggestion for notificationsWhen there is something to notify, an animated icon should clearly tell you, that there is something, that needs your attention.When you press that animated icon, list of all notifications are provided. You can mark all notifications as read, to make notifications area ready for new notifications, that you don't want to miss.while not perfect...***has been marked as a duplicate of this bug. ***This bug is several months old and still unconfirmed. Is there a chance to accept it as a bug... or is it invalid?could also help a little in this area.Once the Shell acks messages () we could tweak the message tray to keep the notification always displayed while there are unread messages.(In reply to)I would prefer this solution the most (in combination with the "new message" indicator being static, not flashing and showing the message count as in).(In reply to)imho, flashing icons vs. static with message count should be theme thing?We discussed this at the IM, Contacts & Social hackfest. See <> for fuller notes of the discussion. Here are three broadly orthogonal changes we came up with that could make it harder to miss messages:• Currently, any events that occur while you're set to Busy are shown when you switch back to Available are shown. This is great: we could extend it to also re-show notifications that you hadn't dealt with at the moment you switched to Busy. For instance: I'm writing an email, and Danni sends me an IM. I want to reply, but only once I've finished my mail. So I flip my status to Busy. When I finish the email, I go back to Available, and the shell reminds me about her message. (Currently, I forget about the message by the time I've finished my mail.)• Currently, notifications are shown for 5 seconds, and then disappear. We could change this to only count down while there is mouse and keyboard activity. So if the user looks away from their computer for 30 seconds (to talk to a colleague), notifications for messages they receive while not looking would still be on the screen when they look back. (Whereas currently, those notifications are hidden and the user has no idea that a message arrived.)• We could consider adding a ripple—like the ripple from the top-left hot corner—which shows every minute or so (possibly with some kind of backoff) to remind the user that they have pending notifications. This is more controversial than the above two: not nagging the user is a design goal. But there's a trade-off between allowing the user to continue their work uninterrupted, and not risking the user missing (or forgetting about) important messages for hours.(In reply to)[...]will be there a possiblity to switch off that as well? it raisesprivacy concerns (i.e. i am available to chat, but someone looksabove my shoulder,) and is quite annoying for somepeople ().[...](In reply to)Setting your desktop status to 'Busy' using the top right chooser will disable those.(In reply to)i know. but it will change empathy status to "busy" as well. i would like to be available for my friends but to not be distracted by message tray at the same time.(In reply to)I started to develop a habit of moving my mouse down the the bottom-right corner every few minutes after I missed a few urgent email notifications at work. This may really help.Just put a static ripple at the bottom-right when there are unread, non-volatile notifications after a moment, so that I only need to glance at the corner, no mouse movement needed.I guess it's less interrupting than ripple animation every few minutes.Thinking a bit more, I think my problem is that my work mails are expected to be read within a short period of time. So if I can set due time to some source (evolution for example), then when notifications go past that time unread, they are escalated to urgent (ie. won't disappear until I read them).That may help chat messages too (say due in 5 minutes). Anybody knows how hard to do this?The Shell now displays the number of unread messages in each Chat source () that should improve things a bit as we can now easily see if we have unread messages.I'd reiterate what's been said earlier, for my use case at work, it would be really beneficial to have the same type of indication for email as well.(In reply to)Given that Evolution uses one notification per message, the same indicator should work there as well.Otherwise, unless we implement a custom source for Evolution, I'm not sure it would work.(In reply to)I'd really like to see improvements in this area for 3.4.Design guys: what do you think of these suggestions?I want to get my solution heard:Why not just remove the bottom message-tray and instead add a new icon to the top black bar, called "Notifications"? You click the icon and get one of those black-with-white-borders-speech-bubble listing all trayed apps. If you have new notifications, the notifications-icon can flash from grey to white or like glow up or whatever. Thats minimalistic and clears up the bottom part of the screen for apps to use. (sometimes when I move my cursor to the bottom right I don't mean to show that message-tray but rather switch back from fullscreen on YouTube.)Kind of like Windows 7, but with class and style :D(In reply to)I like that border glow a lot. :Dsirex and I have a similar idea but my involes removing the message-tray and adding a speech-bubble at the top instead.I also agree with what wrobell is saying about all that nasty idle & timing algorithms you suggest. The simplest solution is often the best.I also don't like when people speak for others - speak for yourselves or refer to some kind of study - like what Mozilla does to find out usage patterns. It seems like everyone here has major epilepsy since flashing is always considered bad. I kind of like flashes, they can be slow and smooth. Windows 7 also does that. (I used to use Windows 7)Wrobel: in 3.2 IM status and desktop notifications are separated: we can be available and still disable notifications.My 2 cents here:* when we disable desktop notifications we are sure to miss them. In this case highlighting the status menu makes sense. Clicking on the menu should highlight the "notifications" switch which is disabled and reveal the message tray.* When notifications are not disabled, it gets harder to make a connection between the status menu and notifications, but having some visual feedback in the top panel still seems to be the most attractive way for me. Highlighting the bottom right hot corner also makes sense (but I do NOT want it to be highlighted if I decided to disable notifications).This should of course also depend on notifications hints.***has been marked as a duplicate of this bug. ***I'd like to tell my story about it too.I love the "not getting in the way" thing, I totally understand it and support it.Problem is, the "missing incoming messages" happens to me not only when I'm AFK or distracted, it also happens when I'm focused on my task. I see the notification, but I'm so focused on what I'm doing that I forget about it instantly. Which in the end equals missing it.I like the idea in thea lot. Please look into into it.Maybe it could, at least, exist as an extension.I also favor the suggestion in. The bottom notification bar doesn't make much sense to me. It's easy to inadvertently trigger when using the bottom right in an application. Why not just merge it's functionality into the top bar? There's tons of free space up there that is mostly wasted. My tweak is to allow users to make it more visible. Use a standard cutout-type icon that's a single color. Make it glow from black to a chosen color. User that don't want to be bothered can pick a darker "flash" color, so they're not distracted. Users like me, who want to be constantly notified about incoming messages, would pick something like red or yellow. Do a simple glow effect to transition between the two. I made a switch to Gnome-Shell (3.2) at work last week after rewriting several of our business applications to work properly in Linux. This week I'm back to OS X because of the message tray. I keep missing Empathy notifications. My coworkers are irritated at me and think that I'm ignoring them. I understand the desire to avoid nagging users, but some of us need that capability. Gnome-Shell stands apart from every DE that I've ever used on any operating system. There desperately needs to be some way to persistently show some notifications. A simple glowing icon on the top bar would do wonders for usability.***has been marked as a duplicate of this bug. ***Just missed a notification. In my case I'm on a multi-monitor display, and my attention wasn't any where the notification while it was up. It went down, I was never really idle, so it never came back. (At least I think this is what happened... I never saw the notification come up or go away so it's hard to be sure :) )You could also do something like Android / iOS and have the top bar dragged down for notifications. Hint, hint :PA bit of another "me too". I tend to be very focused at the task at hand, and being able to glance over at something now and then to see if something is waiting would be a very important feature to me.I agree it should be unobtrusive, so any major UI elements is out. Something in the bottom right corner seems sensible as that is where you actually get at the notifications. An animation seems unsuitable as movement is something our brain actively picks up on and hence can be very distracting. I'd rather see something static in the corner. Some composition of the relevant icons, or a general notification icon. A stilised white bell on a black gradient perhaps? Relevant, sober, and discrete.***has been marked as a duplicate of this bug. ***You already know the small visual effect you see when you move the mouse in the top-left part of the screen? I mean the small circles fading... well! You could display the same visual effect in the bottom-right part of the screen, until the user actually move the mouse in thatdirection.In this way the user doesn't risk to have unread messages for hours. The smallvisual effect is not intrusive.What do you think about?(In reply to)There is a huge difference between a short visual effect done in response to a user action (top corner) and an ongoing visual effect done until the user performs some action (proposed effect).(In reply to)Florian, what is the problem with the solution I just proposed? It would be a nice effect.. I really would like to have it. Why don't you make it optional/configurable if someone don't like it and prefer it quiet? Bu really... we cannot keep missing messages like this :\(In reply to)The Shell's philosophy is precisely against nagging the user until he performs an action. The effect could be shown once, but it you repeat it, you force people to react, and they may have reasons not to care.Making it configurable is not a solution either: you'd require users that don't care to go to some obscure control panel and disable this? We need a solution that works for everybody, or it will only be implemented as an extension.(In reply to)well.. you could do the contrary: add an option for people that want to enable this feature and keep it disabled by default.Or please someone implement this an extension, but please someone do it :SI think we might be getting lost in the details of specific proposals. What most users that are missing messages are contending that we need a persistent, static and unobstructive visual indication that there are unread messages waiting, but I don't see any developers agreeing with this sentiment. Whether that is a static ripple in the bottom-right corner, a highlighted activities button, or an envelope in the status area is largely irrelevant. Short of tracking the user's eye movements, it's simply impossible to guess whether the user has noticed a particular message.Frankly, the idea that the current implementation is less distracting than the alternatives is laughable: I've really tried giving this a chance, but now I find myself constantly interrupting my workflow to check if there are any messages waiting, yet I still frequently don't notice messages or emails until much later.And to add insult to injury, it looks like () the developers are trying to make it even harder to check the status of the message tray and leave keyboard, touchscreen and tablet pc users out in the cold.(In reply to)There are two reason why users may not act on a notification: (1) they missed it (2) they actively chose to not deal with it right nowYour proposal addresses (1) at the cost of (2) - nagging the user constantly until (s)he performs some action would mean that we could just keep the notification open in the first place.A proper solution would tie the hiding behavior to user activity, e.g. only hide the summary when mouse or keyboard activity indicates that the user has seen the notification, but does not want to deal with it right now (this probably includes detecting mouse movement towards the message tray)Adding an option is a poor workaround, as it forces people to choose whether (1) or (2) is more important to them, rather than working for both cases.(In reply to)the time the user in case (2) would spend simply moving the mouse in the bottom part is a fraction of the time the other users spend to constantly check the bottom tray because they suppose to have missed some messages. I'm spending lot of time moving the mouse down because I think "and if someone wrote me?".Once again: I could say that if the user doesn't want any notification he could set his status to OFF, but I propose again a simple setting "Blink bottom bar for unread notification" and set it OFF by default, so we'll spend just a minute to enable it and other users would not be bothered by unwanted blinking.that's it! The use simply move the mouse down and the notification stops blinking. Is it too hard to implement? Just like you show the traybar when the user move the mouse down, you can also call a stopBlinkingNotification() method.I don't think so.. and at least we would fix this problem. Better than nothing, isn't it?Anyway we must take a decision. I really don't care which implementation we're going to use, neither where you decide to show the notification, but please: show it somewhere.Thanks.The catch with this philosophy is that sometimes my computer is just betterthan me at knowing what I have to do. I program it with todo-lists andreminders. It knows when I have an important meeting coming up. It knows I havemessages queued up to deal with, and it knows which ones are important enoughto deserve my attention (either because I've designed filters to tell it whichevents qualify, or because it's learned from my behavior, as in Gmail's"important" flag).In this scenario, I for one *really do* want the shell nagging me until it'sconvinced that I've dealt with the notification.That's a great and lofty goal, but right now we're just not good at detecting whether or not a user has seen the notification. Until such time as we have really good intelligence to act on (either cues from mouse/keyboard response, or eyeball-tracking, or whatever), the only source of information the shell has to tell whether the user has dealth with the notification is simply whether or not the user has specifically told the shell it is so.(In reply to)There are just so many things wrong with this:1. It just won't work. No matter how smart your are trying to be, it's not possible to decide if a user has noticed a particular message. All you're going to accomplish by implementing some elaborate scheme to interpret user activity is to confuse users who now have no clue why the message (tray) stays open sometimes and sometimes doesn't.2. It raises privacy concerns to leave messages open indefinitely. When I'm, say, meeting with a student and the student happens to look in the direction of my screen the moment I receive a new message, that's obviously not a big deal, but if the message is there on my screen for the whole time of the meeting for everybody in the room to see, that's a different story.3. Without resorting to polling, it is not possible for a wm to detect mouse movements in X11.4. I don't know about you but I don't perceive the blue envelope that ubuntu/unity shows when new messages are waiting as 'nagging'.(In reply to)This case is already handled correctly: that's called "Urgent notifications", and they stay in the bottom of the screen until you click on them. In other cases, the computer doesn't know what you want to do with the notifications.(In reply to)No, it is not. Unless every "new message" notification that I have received is for some reason not considered urgent, no notification is persistently visible on the bottom of my screen. There must be an indication of its existence visible *at all times* until I confirm that I have seen it, with whatever method.(In reply to)What is your distribution and GNOME version?Fedora 15 x86_64, somewhere between GNOME 3.0.0 and 3.0.2 as I'm not which package version to check.(In reply to)you don't have to "guess" it, just consider this:moving the mouse in the botto-right part of the screen = I'm aware that there are new messagesyou don't have to keep the messages open: just "pulse" a graphic effect in the bottom-right corner, a very small graphic effect. That's it. Small, useful and nice to see. Non intrusive at all.how do you detect that mouse is in the bottom-right corner when you show the tray bar? Just call the stopPulsingNotify() or whatever too... easy.the blue envelop would not fit our situation, because if the user sees a blue notice in the top-right corner, he expects the notification to be there, instead it will be in the bottom-right.(In reply to)No it's not. I have a large screen and I do miss mail notifications because I focus (i.e. typing constantly) on the part of the screen that's far from the bottom edge. The proper solution would be eye focus tracking, if you could do that with regular computers.I really don't like idea, that gnome-shell are going to decide, what I want and what I don't...Now gnome-shell has user menu, where I can set if I'm busy or available. If busy option is selected, then I agree, that all notifications should be much less visible. But if I select, that right now I'm not busy, then I do want to see all notifications instantly, with some smooth animation, until I take attention to them.Let users decide for him self if they want be disturbed or not. There are too many cases to decide this for user.(In reply to)In this case (2), user should just turn off the notification switch.(In reply to)No: "You have new mail from foo-list" - I'll deal with it later "You have new mail from bar" - Oh, I'll read it right nowThe notification switch is an all-or-nothing solution, the decision to react on a notification now or later is not.I really think that if someone doesn't start coding an extension for this feature, we'll never see this bug fixed :\Let me see that this "I want it" vs. "I don't want it" is non sense. There should simply be an option for it, that's all. Then YOU decide which value must be the default one, and I can accept it and understand it, but the option there should exist.Again: a very small visual effect "pulsing" in the very bottom-right corner would not disturb anyone at all. You don't like it? Ok, give an option to enable/disable it.What's the problem?(In reply to)No problem. But what you call "options" in the Shell is implemented as extensions. The default experience only provides features that most users won't need to disable.You cannot satisfy everyone by default. It's not possible. I hate the nagging notification about inserted memory sticks. I diasbled it. I'm happy.Some kind of slow smooth pulsing is by far the best solution(if you are going to keep the current message tray).(In reply to)Andrea Grandi has some good opinions on pulsing.* When you get some kind of notification it starts to pulse.* If you want to ignore it you slide the cursor to the bottom right corner and it stops.* If you want to handle it you do the same but actually handles the notification by reading it or whatever.* If you don't want pulsing you either disable it in the system settings or set your status to busy.This is my opinion if you are going to keep the current message tray.Otherwise you could have a counter in the top bar displaying a total of all notifications and have it drop down to a bubble as described in(but with the flashing replaced by a static counter of total notifications."* If you want to ignore it you slide the cursor to the bottom right corner andit stops."That's not ignoring it, that's interacting with it. I think that's against what GNOME 3's design is aiming for when it comes to distraction-free computing.I am happy with the current design, if I go idle, then when I return the message tray pops up for a few seconds showing me any notifications I have missed.When I installed Ubuntu, the idle time for this feature was disabled, that may have been caused by my method of installation, or maybe it's a bug, somebody should check if they have the same issue with Ubuntu.The idle time should be set to 10 mins by default, but I needed to change it to 3 mins to be of any use. After changing that, I am quite pleased with the experience. If anybody else wants to change this value, open dconf-editor, then navigate to org/gnome/desktop/session, and change idle-delay to the number of seconds you want for it to consider you idle.Perhaps it might be an idea to reduce the default idle time though, I find 10 mins too long. If I just go to grab a drink or something taking 5 mins or less, then it obviously doesn't work. As I said, I've found 3 mins to be a good time.(In reply to)Except sometimes the communication (incoming IM messages) is the very point of computing. It's common for me to miss incoming messages while working with a remote team. These messages are a crucial part of what I do, not a mere distraction.What about the messages you miss while using the computer? I am rarely idle and I miss a large fraction of the messages. Even more since switching to a 1920×1080 display.A separate issue is working with maximized apps when trying to click near the bottom of the window causes you to accidentally dismiss the notifications.(In reply to)This is simply not a sufficient solution. If I look away for a second and a notification occurs, and I look back, I have no idea that I missed one because I did not go idle. If I do go idle and come back, but look away just after unlocking my screen, then I miss them. The simple fact is, these applications are designed to change their tray icon to indicate that new messages are waiting. This fact must be shown persistently, whether by displaying the icon and not hiding it, or by the envelope icon mentioned before (which I think is an acceptable compromise). There is no need for an animated indication, but since there is only one panel in GNOME 3 that is persistently visible, then as far as I can tell the notifications must be indicated here.(In reply to)You're missing the point here. People are missing notifications while they are NOT idle. That may sound crazy to you, but with a big screen, or with a big focus on another part of the screen, it's actually very easy to not see or to skip notifications popping up on the bottom of the screen.It also happens that I'm focussed on a task, I get a notification, I see it but I decide to ignore it because I'm in the middle of something important. 2 mins later, my important task is over, but the memory that I recieved this notification is also gone.I need something, that don't stand in my way, but also let me know at any time if I have a new message, without having to manually check.The waves waiting till interaction in the bottom right corner sounds fine for me.People have suggested about three kinds of solutions till now:1. Show some kind of static notification in the top panel.2. Show some kind of pulsing / highlighting / symbol to notify that you should look in the lower panel.3. Do some magic ninja algorithm to determine if the user is idle / is looking at the notification or whatever.The third solution is just silly. I saw some guy actually mentioning eyeball tracking. Seriously? Come on!The whole idea of having a lower panel that is not only hidden when you want to see it, but also is popping up and distracting when you don't want it is just a bad idea.(In reply to)It's not just me that find the bottom panel popping up when trying to click the lower part of a window.The second solution may work using pulsing or stuff but you obviously don't like that. The first solution is the only one that can be implemented without people being distracted. You can have a pulsing envelope, you can have a static envelope, you can have a static counter or you can have a drunken santa flashing his wiener. Whatever.I agree with a09alehu about auto-hide. I have always hated any UI element that auto-hides because:1. I can't see the information when I want to.2. When aiming for something nearby, overshooting causes it to pop up and hide what I am aiming for.3. When aiming for something on the autohide bar after making it visible, overshooting causes it to disappear again, and I have to repeat the entire process of making the bar visible, etc.I would be very happy if I could make the notification area always visible for those reasons, but it would also nicely solve the problem of missed notifications. No flashing or pulsing required, no UI element in the top bar when notifications are at the bottom, etc.If I'm stuck with auto-hide, then I want something that stays visible until I've dealt with the notification (not just acknowledged that it's there, or I'll forget to come back to it later). Anything that pulses or flashes would definitely distract me. I would prefer something static but always visible - icon in the top bar, whatever.(In reply to)forcing the visibility of the tray bar can be annoying for this reason (I will do just an example but you can find many): the tray bar covers the bottom part of the screen/application, if I've to press a button that is in the bottom part of the application I cannot do it. Suppose you're playing World of Warcraft in the mean time ;) (ok... very particular example, but you understand...)as you said, the top bar is not the proper place to show this, because we would have the notification on top and the message at the bottom: very very confusing!What I'd like to realize is a small extension that catches the arrive of a message and shows a very small visual effect in the bottom-right corner (a very little one). In this way, without touching mouse or keayboard, but just with a rapid look, you can see if there are any unread messages/events.The problem is: I've never written a Gnome Shell extension before... JavaScript doesn't scare me, but I don't know how to interact with Gnome parts and catch the events. I'll have to study this a bit. Any help is welcome!(In reply to)I've been investigating a little.Example ripple effect from the top left corner in: /usr/share/gnome-shell/js/ui/layout.jsNotifications are handled in /usr/share/gnome-shell/js/ui/notificationDaemon.jsIM Notifications are handled in /usr/share/gnome-shell/js/ui/telepathyClient.jsI'd say you'd have to declare the ripple effect in layout.js and trigger it in notificationDaemon.js or telepatyClient.js, depending on if you want to show the ripple effect only for IM or for all notifications.I don't have much more time to look further into it.Good luck!(In reply to)It's even easier than that: the MessageTray tray handles all notifications. You can get to it with Main.messageTray.(In reply to)even if it's correct, isn't the MessageTray part of the Gnome Shell core? From what I can read they don't want to include this feature in the core but implemented as extension, so we have to write it as an extension if we want to have a chance to make it work.(In reply to)If it didn't auto-hide, obviously it would not display over top of applications but rather reduce the space available for windows by the height of the panel. Just like the top panel does, or Gnome 2 panels.Hello everybody:While I'm mostly comfortable with the current notifications behaviour (and itis true that I have also missed some messages), as far as I remember, the gnomedevs said that the wanted to make the IM a "first class citizen", and since itseems that the only reason to change the notifications and message traybehaviour is the IM notifications, why not give them an actuall specialtreatment and made it (along with the IM a more important gnome-shell citizen).What I'm thinking of is to split the user menu in two: the icon for one partand the name for the other. the name would behave as it does nowadays, and theicon could have a counter (nothing blinking please), and when clicked, it couldsimply show who has talket to you, and how many messages he has sent to you,your status, and maybe also a very simplified version of the contact list(status and nick, for example).Here is the mandatory image:(Of course I think this is compatible with the inline chat notifications)What do you thik?For those looking for a quick (and dirty) extension, Marco wrote one:These notifications are a true issue:- We miss important messages (all my co-workers switched to XFCE because of this)- The messages bubbles are a privacy issue (and if I disable notifications, people stop to talk to me because I'm shown busy, there is no way to disable them while being shown available on 3.2 arch linux)- These notifications are disturbing my work because they are animated and hide a part of my window. They even show up when I'm using a full screen Totem!- I often open the tray accidently when I want to access some gtk widget at the bottom of my windowPlease stop ignoring these issues.I understand the philosophy of GNOME3, so I'm sure that these disturbing and unefficient IM notifications are a bug and the whole thing should be rethinked.Created. Variant of sirex's solution. No bottom panel.CreatedAnother, more touch oriented solution (I like this the most)(In reply to)I like it (I'd display a counter next to the Activities like the one on icons). Bonus points if people you chat with get separate icons in dock as well (and please, generate some temporary avatars for people who don't have one so we can tell them apart).(In reply to)Yes this is just a basic idea that could be modified in a number of ways. What I'm really trying to do is get rid of the bottom panel. That is one of the things I really hate about GNOME 3.Using the solution inwould mean the same number of gestures to complete a task. (slide cursor to upper left corner & click notification vs slide to bottom right & click notification)CreatedAnother, more touch oriented solution (I like this the most) #2Contacts should be top-level objects, not subobjects of Empathy. Overview shows them as first class citizens.Well, I think that's proposal is very interesting.Why do we need duplicated icons (in the dock and in the message tray) for a notification when only the dock can do it?(thinking on a new evolution mail, or the rhythmbox message icon, for example)(although , IMHO, the notification counter would be better placed near to the activities button, instead of in the right side of the top panel. And, even knowing that this has been discussed, I still think say that having notification counters on the icons in the Alt+TAB switcher would be an improvement (at least is another way of noticing a pending notification))CreatedTouch oriented solution (Ipad / Android) (#3)It's basically about merging the bottom panel to the dock and adding a static notification counter to the top bar. Everything is controlled from Activities.CreatedTouch oriented solution (Ipad / Android) (#4)Haha sorry for spamming this thread but I had to fix the icons :)Another option would be to make the bottom panel persistant like the top panel.(In reply to)Yes but then you will lose screen space. Also, it's ugly.I agree but it is the only solution I found so far to keep all the IM integration that is already coded and working, like for exemple the chat bubbles.With your proposal, all these features will have to be removed and be replaced with something more empathy oriented, isn't it?(In reply to)I thought about this and I don't believe you need to remove anything really. It depends on how they want it to work. What is the purpose of those chat bubbles? Is it only for quick respond (then you just respond at the bottom as usual when someone writes to you), or is it something like a second theme to the chat? It's not that hard to solve, just add some entry in the jump-list like "Open in bottom" or whatever. This is application specific really. How do the Empathy team want their client to work? Currently it opens up that shell-style-chat by clicking the chat session in the bottom panel. It doesn't have to be activated exactly like that. You can bring that shell-style-chat any other way really.Currently:Bottom right corner, click session, chat in shell-styleor:Bottom right corner, doubble click session, chat in the real windowThis can really be as simple as having a simple button in the chat window to switch between shell style and normal style. When you respond directly to the message it's shell style (as it's currently)It's all about thinking outside the sphere. It can be solved really in any way. Having two panels will surely solve it but then you are just going back to GNOME 2 and not evolving.Or just drag the chat window to stick it to the bottom and chat in shell-style. Whatever solution works.(In reply to)Notifications and stuff are a central piece of an GUI. My proposal is kind of a big change but I really think it can work in a great way once it matures. Look at KDE 4.0 and compare it to KDE 4.7. It takes time to form a masterpiece.* merge bottom panel to dock* add static counter to activities button* change some behaviour in Empathy and other apps to match this proposalHave an awesome GUI that saves screen space, looks tight, doesn't distract people yet gives them an obvious way of interacting with apps and it's notifications.:)In a previous message, you say "This is application specific really. How do the Empathy team want their client to work". But one of the big step of gnome3 is that IM is so integrated to the shell so far that you can even not have empathy installed or launched, the chat works anyway. The contacts and the chat bubbles have been taken out of empathy. How are you going to display your number in the dock if there is no empathy icon?(In reply to)Implementation is not a problem. Just display an icon if you want one. Empathy is just a Gtk3 app. Shell doesn't hande chat stuff. Thats all in Empathy using Gtk3. I'm no expert in GNOME code but I'm and expert programmer in general. Empathy is just an application.Re-read- with GNOME 3.2 you can do all the IM stuff (well, not group chats) without actually running Empathy.CreatedThis is my complete proposal. Touch, no tray. Static. Inspiration to the GNOME team.(In reply to)Well... actually... Gnome DOES handle chat stuff.I'm pretty sure you can delete empathy from your machine and still be able to chat through the shell.The shell reimplements a "full" IM client, with bubbles, notifications, the contacts app, and the ability to search contacts in the "Activities view" (How is this view called?)(In reply to)When a notification comes, how do I know it? Will the "activities" button flash or the dock show up (without bringing the whole overview mode)?What does "9" near "Activities" button mean? The number of unread notifications?(In reply to)Never seen. How does it work today? Inspiration, I don't have every possible answer you have to think for your self also. Look at Android and iOS. They does this stuff already and it works just fine.(In reply to)No. No pulsing. I have written about that before. You should read this thread, I have written about this stuff for some time.No.Yes.I'm not going to answer every possible question, I don't know. This is stuff that has to mature. You see, I just provided some inspiration. Get inspired. Android and iOS do this. Mac OS X have no tray, just a dock. Windows 7 have no tray just pulsing icons (there is a tray for compatibility ofc... but it's not really needed). Look at how Windows Live Messenger moved from the tray to being a big fat icon that pulses. Tray is so 90s. :)Hey!? I don't even understand what you mean. You are going way off topic.* What is normally placed in the bottom panel is placed in the dock - compatible? yes! (The dock IS the tray, 100% compatible)* A total of all notifications is shown near the Activities button - compatible? yes!* Individual icons in the dock gets a counter - compatible? yes! (and already implemented in gnome 3.2!)I don't see any sort of connection between moving the tray to the dock and some Empathy-in the bacakground-off topic stuff.What is normally in the tray, shows up in the dock. That stuff about dragging windows to the bottom is just some extra thing. You can do the exact same with menus if you prefer. Read the thread before commenting.(In reply to)It's not. Clicking on an icon in the dock shows the application. Clicking on an notification in the tray shows notification menu. Right click on an item on the dock and the tray (as systray implementation) are also different.I'm sorry I didn't want to bother you! Maybe what I said was not well expressed enought because my english is not very good.I read all the thread before commenting.Here is my question expressed differently:In your mockup, the number "3" is shown on an icon whowing a smile. This is the empathy icon, if I am right.This icon exists if you installed empathy, and is placed in your dock if you want.So to display this "3", you have to have empathy installed.However, it looks like gnome3 supports IM directly by itself, without the need of empathy being installed.So there may be a case where people have pending messages, without the right icon to display the number of messages next to it.Is it understandable now?I'm not here to work against you, but with you.And I would realy like to see some gnome3 active developpers reacting to all the recent proposals we made because the final result depends a lot of them.Okay so I got my brain all screwed back in place now. I know what I mean now, haha. I tend to come up with something and then forget it before I even can describe it and then I just write a lot of bullshit.This is what I really have been trying to say, from the beginning :D1. People (including me) don't seem to like the auto-hide behavior of the bottom panel (the "tray").2. People in this thread have talked a lot about a static counter of total notifications to be displayed in the top bar.What I would love to implement / suggest is two very simple and 100% backward compatible modifications to gnome-shell 3.2 to solve these two listed issues.1. We place that counter everyone have talked about, in the top panel. (enough already :P)2. The bottom panel is kept only in theory. In GNOME 3.2, developers have already implemented notification counters for notifications. When you have three unread messages in a chat session in Empathy (just an example), the bottom panel have that notification displayed with the number 3 drawn over the icon in question. This is already implemented.What could be done is to draw the contents of the bottom panel into the dock. The exact same content only with bigger icons (obviously). The exact same mouse clicks / touch events done on a notification in the dock calls the exact same it would if the notification was placed in the bottom panel. This way the dock IS the bottom panel, containing both icons representing programs And icons representing notifications. This way we get rid of the bottom panel and it's auto-hide behavior yet keeps an absolute 100% backward compatibility.A bit more clear now? It's actually two very small changes that can be tested as an extension first. If you'd like, I can draw one of those crappy images displaying the result (it's about the same as before but without all that bullcrap I wrote before);)In general: Can everybody please avoid forum-style conversation noise and keep things technical? Thanks in advance!CreatedYet another illustrationI've a suggestion.I really like how Guillaume describe the 3 kind of notifications inand I agree that the problem is only for urgent notification.My suggestion is, if there is an incoming notification waiting and hidden, to have a subtle glow, a kind of halo which would subtly highlight the corner.This would be subtle enough so you can ignore it on purpose but not too much so you cannot miss it.An example of implementation is Docky. If you have auto-hide enabled with Docky but that one application need focus, you will see a red glowing halo from the side of your screen when your Docky bar is. I find that really useful and I use it to not miss any notification in GNOME-shell.CreatedSimple, not animatet notifications indicator.What is wrong with this solution that was used for years?(In reply to)Pulsing has been shot down 9238462 times in this thread already.(In reply to)Great. Someone should implement this now because this bug report is just ridiculous.I'm doing fine since I use:This thread is long enough I'll keep it short:1. notifications are messages, why not treat them as such using an inbox-like system?2. not all users are interested in being notified about the same things or to get a pop up at all in some cases. Why not let the user manage subscriptions from that inbox (e.g. un-subscribe from Banshee notifications)?3. pop-ups should be distinguished from notification. Notification must be visible otherwise it is pointless4. the notification / popups should be centralised and clean (right now I need to tell each application separately whether or not it should send notifications and those clutter my tray).The existing Gmail extension could be a good example of how notifications could work imo.(In reply to)>>SeeWouldn't it be possible for someone to create an extension to show an animation in the lower right corner when a notification arrives? I mean something similar to the subtle ripple animation that is displayed in the upper left hot corner when you move your mouse there.That animation could keep on going until you hover the mouse over it which would mute it until a new notification arrives.(In reply to)The goal of this bug is find a proper solution, not a hack through an extension.Another extension has been mentioned earlier in this bug workarounding it for now.CreatedPropositoin of Status Menu(In reply to)Hello, I'm not a programmer or a developer but a long-time user of gnome. I love Gnome shell/3. Here is what I think would be a proper solution to the notificaiton area, that would be logic for me and totally unubstrusive. See the attachement. I see no need for permanent notifications, or blinking stuff.So I would put everything in the status menu, where I think it belongs. And I would remove everything from the status menu that I think has nothing to do with the status (like system settings and online accounts sttings). By the way, I would put all settings in the Activities pane. I could see in the Activities: Windows, Library, Applications and Settings.If there is something new to see in the status menu, one could only make the letters in a different color or make the icon different, or if it would be me, nothing at all.In the status menu, we should be able to change if we are busy, away, etc (see attachment on 2).. and change the text of our status. If the user writes that he is away, (see attachment on 3) the screen should appear to ask if her wants to do something (Lock screen, log off, etc...) That's how I think would be a good way to shut down or reboot the computer: completely integrated with the status. Of course, changing our status would also change the settings of notifications.In contacts, it would be indicated how many contacts are available for instant communication (via chat, videocalls or cellphone). Clicking on it would open the contacts application. From there, we would be able to do whatever we want with the contacts (IM, email, video, skype, facebook, etc...). With that kind of contact application, we don't need the empathy contact list any more.In Messages, shows unread email messages AND chat messages, clicking on it could open evolution to see these messages or compose a new message. However, evolution can not read instant messages, so for now, it could be another category. But I think that logically, chat messages and emails could both be treated only as messages.In Broadcasts, we would see how many notifications there is from twitter, facebook, and other social networking. Obviously, we would be able to set what get notified in the setttigns, kind of how Gwibber does. Clicking on it could open Gwibber.In News, we could see how many feeds or podcasts are unread. Clicking on it could open the feed reader of user's choice.I know, this could not be done for tomorrow, but that would be part of my ideal Gnome 3.I added the patch forthat shows the message tray that has new notifications when the user becomes active if the user was inactive while these notifications were originally shown. This will ensure that the user is always informed by the system about the existence of new notifications.To be clear, while that may help with the idle/afk case, it's not designed to help with the large-display/multi-monitor/just-too-distracted-by-something-else-to-notice cases, right?The patch forhas landed and it should help the users not miss notifications. Please try it out in 3.4 and reopen this bug if needed.It addresses idle/afk case, and doesn't address large-display, multi-monitor, just-too-distracted case. The goal of the notification system is to not be distractive and there is currently nothing in the design to make the notifications show up more permanently on the screen.I don't see any reason to try the patch then. I miss notifications several times a day, while I'm not idle or AFK, so this won't help anything.Until there is a permanently visible indication of new notifications (for new messages) this bug is not fixed.We already have a clock and date in the top bar, and also network, status, and volume indicators. They're taking space and I can see at them easily just with a small eye movement.I don't understand why these are more important than notifications. I like the idea of having them in the top bar, where I can notice it easily anytime without having to use the keyboard or move the mouse.It could be an alert effect over the status indicator, but if that would confuse someone, I like the idea of showing it in the Activities button, maybe with a notification counter added at the right.Getting notifications right is important to make them useful, and right now they're broken because they're lost too many times.Hopefully this 3.6 feature should improve things:The main problem of current implementation is that is designed to handle _synchronous_ events. I try to explain better what I mean:The current notification implementation works great if you can handle the event just when it arrives. In fact you receive a visual notification, or even a way to respond to chat messages in the moment the notification arrives. After that the user receive no other visual notification, and must actively check for new events making users losing their messages (as showed on this bug report thread).With other words: or you handle the notification event as soon as it arrives, or you can miss it, or worse forgot about it. But notification event are asynchronous and the user should be able to handle it just when they will. So the notification should be visible until the user don't make an action (default "do nothing" for some notification events should be used). This persistent visual notification must be as non-intrusive as possible, so popup message cannot be used for this. For example Apple do this putting a badge with the number of unhandled notification events on the application icon.In Windows ,Gnome 2, and other UI in the systray a new icon or a different icon show the needs of notification.As you can see, in all this interfaces notifications are always _visible_ to the user.For this reasons i think that the current "hide notifications" design is simply broken.In my opinion a good notification system should allow the user to discover new notification events and which application sent them with just a look. Otherwise the user is "forced" (let me pass the term) to handle the notification event, or he risk to forgot about it.As already proposed, i suggest to put an indicator that shows new events. However this solution is not optimal because don't allow to know which application sent a notification event without human action.I have tied many extensions and in my opinion, best solution is this:But, as extension author describes:there is no single API for message handling, so each application must be adapted manually.Well, at leas, the way, how user is notified about new messages is really efficient, informative and don't disturbing. Also you can turn notifications off, if you like.I think, this should be implemented in gnome-shell core and integrated with everything else more tightly.That's not saying that there's no single API -- in fact, there is a single API -- libnotify and the notification specification. The checkboxes are just for turning the access to that API in each application on.With 3.6 I'm not sure it improved, could even be worse...For example, when I'm working (mouse or keyboard activity) the notification briefly appear and gets hidden. When I'm done with what I was doing, nothing on the screen reminds me of the msg, and I just forget. Eventually 2h later I go to activities and maybe I'll see that msg there if I'm paying attention.In practice most of the time I see IM msg when I'm in firefox because facebook tab blinks, and I end up chatting on web page...Since extensions breaks every releases and it's a pain to wait for update, please consider merginginto the core of gnome-shell. That's exactly what's needed!I wonder if putting a small "you've got mail" icon on a corner of app icons in alt-tab helps, assuming users use alt-tab often and the relevant apps are open.(In reply to)It was considered, but sometimes there isn't really a match between the two. What should we put with gnome-shell for individiual chat notifications? Mail notifier if you don't have evolution open? Should alt-tab start evolution for you?(In reply to)I guess you already have an answer for this. For the record, what about the above for notifications that have matching applications and a generic "you've got notifications" fake app icon that would pull the notification tray up for those that are not attached to any running apps?How about a solution that does not rely on people pressing alt+tab? Even if that was a good place to show it (it's not), the idea of notification is to be non-invasive. When people go to switch apps they are clearly in the middle of something.What about changing the presence icon in the top bar (the one next to your name) to a red number indicating the number of unread IM messages? That would be a nice way to integrate Marco's very popular extension () which is a must have for people actually caring about their IM messages.(In reply to)Oh actually there is already another extension doing exactly that:It seems(Message Tray isn't easily discoverable (isn't shown in Activities Overview)) is related to this bugreport.Lots of users (including me) like GNOME 3.4 behavior, when notifications area/message tray is visible in activity overview, see this question for example:(In reply to)Not really, this bug was filed long before those changes and is as much about the behavior in 3.4 as the one in 3.10 ...(In reply to)Stuff like this (permanent reminder of notifications) really should be part of core Gnome, not some extension that may or may not be maintained in the next version of the shell.I came to this bug report via this page:Still no mention of users being able to select an option to have that permanent notification in the panel (which is an area that almost never gets obscured, ergo, can be _seen_ at all times). This is _basic_ stuff.Take a look at the "peeking into the drawer" on this page:If I have to _remember_ to look for notifications and then do something about it, it's not much of a notification system, now, is it?I second the previous poster, having a permanent indication of non-dismissed notifications seems like a natural and basic option for enhancing the "clock-text-area". As it is now, I have to click on that area to see if there are any notifications I forgot to deal with. A gentle little number next to the date would make me happy. :)(In reply to Erik Hedberg from)With 3.18, there's a dot next to the date when there's undealt notifications. I think that suffices and this bug can be closed? It's practically impossible to miss notifications now.The new notifications system is spot on, at least for me. It's gone a long way since the original report. Thanks for all the work!(In reply to Nirbheek Chauhan from)I tested the dot-functionality, and it works as described in, i.e. when there are three notifications queued up to be displayed any additional notifications get sent directly to notification list and the dot is displayed. So the dot doesn't help you to know if there are any unread notifications, except for notifications with urgency-level critical, they are always indicated by the dot.I would also suggest at least an option to replace the dot with the number of unread notifications (or put the number inside the dot), as that would allow me to see if any new notifications has arrived.Motivating example: I'm working focused on something and get two emails, I see the senders in the pop-up and know that they can wait. I look away from the screen for some time, when I look at the screen again I see there are now three unread notifications, so I check them and see there's now an urgent email.(In reply to Erik Hedberg from)Uhm - the presence of unread notifications is *exactly* what the dot is supposed to indicate.When a notification has been shown as banner, it is considered read - so at this point, the number of unread messages in your example is 0.Well, no. Another notification banner was shown, so there are now three read notifications in the list, but the number of unread notifications is still 0. However note that banners only time out when there is user activity, so unless your example is "look away from the screen for some time while moving the mouse or typing on the keyboard", the notification would still be on screen on your return.Thanks for clarifying, I see I should have used non-dismissed instead of unread. I guess what I would like to see is an option to let "read" equate "dismissed" instead of "displayed". Two things I've noticed are:- When I'm focused on my second monitor I don't always notice notifications on the primary monitor. - When I notice a notification while working , I often want to keep focus on what I'm doing and read them later, and would prefer not to have to remember that manually.I understand this is about preference, so I'd just like to put my voice in for an option. And thank you for your work!	156.0	id=749863	11	False	False	manusha1980	1
id=131127	REOPENED	conglomerate	Code - DTD Conformance	0.7.10	Other All	Normal major	conglomerate list	2004-01-10 22:25 UTC by		2004-12-22 21:47 UTC (	0 users	Where the doc type decl includes entities in an external file, Conglomerate modifies the entity decl by importing all data from the external resource into the doc type decl. Attached three files: original.xml - A Docbook XML Instance before opening in Conglomerate. global.ent - the entity database file. after_cong.xml - after open with Conglomerate and save operation.	Createddemo of problem described in after_cong.xmlWhat format is the attachment meant to be? Did you set this?tar.gz	3.0	id=347958	13	False	False	mbarnes	1
id=778768	RESOLVED FIXED	evolution-data-server	Contacts	3.18.x (obsolete)	Other Linux	Normal major		2017-02-16 15:17 UTC by	burivoy	2017-02-23 15:45 UTC (	1 user	CreatedScreenshotYandex have CalDAV and CardDAV servers and Evolution connects to them.The full connection links look like this:One can create meetings, tasks and contacts. But when one tries to modify an entry within meeting, task or contact Evolution returns an error with code 200 (OK) (sic!). Thats for the first time. For the second time it returns an error with code 409 (Conflict).Open CalDAV Synchronizer for MS Outlook available for downloads at Sourceforge.ne:had the very same behavior. One was allowed to create a meeting, appointment, task of contacts but was just unable to edit it later on. Upon conversation with developer of the project:Alexander Nimmervolit was advised by him to fill-in the check-box "break connection after each request". That solved the problem.Nevertheless DavDroid for Android and eMClient for Windows have no such a bug. Addressbook and Calendar entries once created are always awailable for edition at client side.Another idea is that addressbook, calendar and tasklists copied from server and stored locally are read-only, i.e. user have no sufficients rights to modify an entries once created.Could you please implement similar function of fix communication with Yandex CalDAV/CardDAV servers once and for ever?	Thanks for a bug report.(In reply to burivoy from)Why do you *think* it's the case, please? Do you have any evidence that it's not done by your somehow ancient evolution-data-server? [1][2] People told you on the evolution-list what to do and other useful things, but you still do not seem to listen.Maybe I would try to create an account on the yandex.ru site, but I cannot read that site, neither I see there whether it can be switched to something like English version.Anyway, if you are willing to help to find out what's really wrong here, could you try with a CardDAV address book these steps, please:a) open a terminalb) run these commands: $ export LANG=C $ export WEBDAV_DEBUG=all $ /usr/libexec/evolution-addressbook-factory -w &>log.txt The actual path for the binary can differ on your machine.c) open Evolution and switch to the Contacts viewd) repeat the steps to reproduce the errorClose Evolution, then stop the addressbook factory and check its end for any relevant output. I suppose it'll be around a PUT (really in capitals) request.[1][2]Maybe I would try to create an account on the yandex.ru site, but I cannot read that site, neither I see there whether it can be switched to something like English versionMilan, thanx for your help, Yandex has an English interface; it could be accessed here:Anyway, if you are willing to help to find out what's really wrong here, could you try with a CardDAV address book these steps, please:a) open a terminalb) run these commands: $ export LANG=C $ export WEBDAV_DEBUG=all $ /usr/libexec/evolution-addressbook-factory -w &>log.txt The actual path for the binary can differ on your machine.c) open Evolution and switch to the Contacts viewd) repeat the steps to reproduce the errorCurrently I don't have access to Linux computer; once I get back I'll try to follow these steps.Thanks, that helps. For whatever reason, I do not see a contact I made on the web site when accessing the address book within evolution, but I believe it's intentional by the server.The modification issue is that the evolution's WebDAV backend expected 201 or 204 response on the modification, but the server returned 200, which the backend evaluated as a failure, even the change had been properly saved and had been propagated in the evolution after the next start/refresh of the book. I fixed it with the below change.I was able to add a calendar, the correct URL ends with "events-default" (that was kind of fun, because the calendar interface is only in RU), the above is your personal URL, but I wasn't able to make the todos work with the same trick for whatever reason. Anyway, the calendar works as expected to me, thus it seems to be only an issue with the Contacts.Created commitin eds master (3.23.90+)(In reply to Milan Crha from)oops, 3.23.91+Milan, it looks like contact created on server side through web-interface goes to the Main address book. But contacts created by clients and synced with server are stored in another address book called Phone Contacts or whatsoever.So please created a contact on server side and check the additional addressbook on server through web-interface.That explains why success code 200 (Ok) is considered by Evolution as failure.Milan, calendar and tasks both could be connected; probably autodiscovery doesn't work well. You can create as many calendars and tasklists as you want. In order to figure out the certain path, link or sychronization line with certaine calendar/tasklist number you may type in the browser's addressline:Where login is Yandex login.This request will return you your addressbook, inbox, outbox, events and todos numbers so you would be able to reconstruct your full sychronization lines or paths which looks like this:Numbers here are fake ones.Right, their auto-discovery doesn't work well when doing the standard WebDAV lookup. I had been able to configure also my Tasks (with your help) and it works fine as well, thus is was only the address book part which didn't behave properly on edit.I decided to make one more 3.22.x release, thus:Created commitin eds gnome-3-22 (3.22.6+)Gents, there are two sound chinese email providers: 163.com and 126.com which try to provide an access not only to email but also to addressbok, calendar and tasks. Registering a chinese account is really a pain in the ass but full sync lines for those look like this:Evolution says that Addressbook is not actually an Addressbook. Calendar and Tasks could not be discovered at all.This guy:Posted this screenshot:Calendar includes tasks and tasks are synchronized by DavDroid for Anderoid with Open tasks.eMClient for Windows gets three phone numbers and three email addresses; the type of phone numbers and emails is kept. It would be nice to have it working with Evolution as well.Few links on the subject:Account registration:Do not take me wrong, please, but I'm not going to try to address issues with all random servers out there which try to be CalDAV/CardDAV capable, but has some internal tweaks which break things for the standard way which works with other 5+ implementations, within one single bug report. Please file other bug reports if needed.The problem with Yandex server was on the evolution-data-server side. I do not see any information about PUT responses in RFC 4918, thus it's possible the return code 200 is completely fine on an item modification, only none of the tested implementations were doing so.	9.0	id=766366	12	False	True	slomo	1
id=541469	REOPENED	banshee	Other Extensions	git master	Other Linux	Normal major	Banshee Maintainers	2008-07-03 22:49 UTC by	Sandy Armstrong	2009-03-10 12:43 UTC (	7 users	Steps to reproduce:0. Enable cover art fetching.1. Begin playing a track.2. While cover art extension indicates that it's still doing something, skip to next track.Expected result:Next track starts playing immediately.Actual result:Banshee UI hangs for awhile, old track keeps playing. After many seconds, next track finally begins to play.I can't quite nail this down...sometimes it works fine, but with the majority of my tracks it hangs. It seems to be related to whether or not they already have cover art. Disabling the cover art extension makes the problem go away.	Yeah I had to disable the fetcher, too, banshee hanged almost every time song changed (the fetcher seemed to hang earlier, too).I think the source of the problem is the SQL query used in the beginning of CoverArtJob.Run(). It takes 2s of CPU time to run on my system.It's used on every track change to check if it should try to fetch some cover art.***has been marked as a duplicate of this bug. ***Snorp committed a fix so that the cover art refresh isn't triggered by the play/skip count getting incremented or rating changed, and I committed two fixes, one to set the job as lowest priority, and another fixing a big performance regression I introduced ~ a week ago in a SQL query. Fixed!1. Tools->Cover Art->Download Cover Art2. Try to change to next trackHang.That being said, snorp's fix makes this bug much less likely to show up.(In reply to)Can anybody else reproduce this with r4254 or later?(In reply to)No. Even if I clear my album-art cache, the cover art fetcher is too damned fast. :P I don't even get any feedback that it's downloading anything.We identified the slow query in IRC today and Gabriel is working on a fix, last I checked.(In reply to)Can reproduce using 1.2 on Hardy.Hearing reports about this downstream:.I've noticed that "Downloading Cover Art" takes a long time when it is triggered by rescanning my library, even on recent SVN checkouts. Would --debug-sql output be useful here or is there otherwise any information others or I could provide to track this down?	11.0	id=131127	3	False	False	david	1
id=766366	REOPENED	GStreamer	cerbero	git master	Other Mac OS	Normal major	GStreamer Maintainers	2016-05-13 10:27 UTC by	Elvis Dowson	2016-11-03 09:32 UTC (	2 users	CreatedMissing libraries folder from installed GStreamer.Framework for iOS 9.3I built gstreamer-1.0 release 1.9.0.1 using the cross-ios-arm64.cbc configuration, on Mac OS X 10.11.4 using Xcode 7.3.0. When I run the gstreamer-1.0-devel-1.9.0.1-ios-arm64.pkg, it does not install the Libraries to the /User/elvis/Library/Developer/GStreamer.iPhone.sdk/GStreaner.framework When I try to build iOS Tutorial 3, it complains because it cannot find the required plugins in the iOS GStreamer.Framework.Undefined symbols for architecture arm64: "_gst_plugin_liveadder_register", referenced from: _gst_ios_init in gst_ios_init.old: symbol(s) not found for architecture arm64clang: error: linker command failed with exit code 1 (use -v to see invocation)	There's only the huge "GStreamer" static library that contains everything, you see it on your screenshot too.Also liveadder is not in 1.8 anymore as a plugin. You need to update your gst_ios_init.h/m files.Removing liveadder from Tutorial 3 allow the program to build and run correctly.However, Tutorial 4 has several linker problems as well:Undefined symbols for architecture arm64: "std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::append(std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)", referenced from: TagLib::String::operator+=(TagLib::String const&) in GStreamer(libtag_a_arm64_-tstring.cpp.o) operator+(TagLib::String const&, TagLib::String const&) in GStreamer(libtag_a_arm64_-tstring.cpp.o) operator+(char const*, TagLib::String const&) in GStreamer(libtag_a_arm64_-tstring.cpp.o) operator+(TagLib::String const&, char const*) in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::_Rep::_S_terminal", referenced from: TagLib::String::upper() const in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::operator+=(char) in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::operator+=(wchar_t) in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::basic_string(std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, unsigned long, unsigned long)", referenced from: TagLib::String::substr(unsigned int, unsigned int) const in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::assign(std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)", referenced from: TagLib::String::substr(unsigned int, unsigned int) const in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::string::assign(char const*, unsigned long)", referenced from: TagLib::String::to8Bit(bool) const in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::string::resize(unsigned long, char)", referenced from: TagLib::String::to8Bit(bool) const in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::find(wchar_t const*, unsigned long, unsigned long) const", referenced from: TagLib::String::find(TagLib::String const&, int) const in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::resize(unsigned long, wchar_t)", referenced from: TagLib::String::prepare(TagLib::String::Type) in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::String(char const*, TagLib::String::Type) in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::String(TagLib::ByteVector const&, TagLib::String::Type) in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::operator=(char const*) in GStreamer(libtag_a_arm64_-tstring.cpp.o) "std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::_Rep::_M_destroy(std::allocator<wchar_t> const&)", referenced from: TagLib::String::~String() in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::~String() in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::startsWith(TagLib::String const&) const in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::substr(unsigned int, unsigned int) const in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::upper() const in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::number(int) in GStreamer(libtag_a_arm64_-tstring.cpp.o) TagLib::String::operator=(TagLib::String const&) in GStreamer(libtag_a_arm64_-tstring.cpp.o) ...If you change the iOS target in XCode to 6.0 (or maybe 7.0 is enough) should fix that one. We should build the next binaries against the new C++ STL.I've managed to fix the build issues for iOS Tutorials 3 and 4 now. I will send across a pull request with the fixes. It would be better to create a branch for the git://people.freedesktop.org/~slomo/gst-sdk-tutorials repository.Against what element do you recommend that a branch be created?- gstreamer release version- Xcode release version- iOS SDK version ?Or do we track a combination e.g. gst-1.9-xcode-7.3 ?BTW, the solution for the C++ STL errors was to add libstdc++.6.0.9.tbd to the Build Phases > Link Binary with Libraries section.I also had to additionally modify the gst_ios_init.m file to remote the liveaddr and fragmented plugins, to get the project to build.diff --git a/gst-sdk/tutorials/xcode iOS/Tutorial 4/gst_ios_init.m b/gst-sdk/tutorials/xcode iOS/Tutorial 4/gst_ios_init.mindex 403f9f9..b8381db 100644--- a/gst-sdk/tutorials/xcode iOS/Tutorial 4/gst_ios_init.m +++ b/gst-sdk/tutorials/xcode iOS/Tutorial 4/gst_ios_init.m @@ -261,9 +261,6 @@ GST_PLUGIN_STATIC_DECLARE(interlace); #if defined(GST_IOS_PLUGIN_IVTC) || defined(GST_IOS_PLUGINS_EFFECTS) GST_PLUGIN_STATIC_DECLARE(ivtc); #endif-#if defined(GST_IOS_PLUGIN_LIVEADDER) || defined(GST_IOS_PLUGINS_EFFECTS)-GST_PLUGIN_STATIC_DECLARE(liveadder);-#endif #if defined(GST_IOS_PLUGIN_RAWPARSE) || defined(GST_IOS_PLUGINS_EFFECTS) GST_PLUGIN_STATIC_DECLARE(rawparse); #endif@@ -767,9 +764,6 @@ gst_ios_init (void) #if defined(GST_IOS_PLUGIN_IVTC) || defined(GST_IOS_PLUGINS_EFFECTS) GST_PLUGIN_STATIC_REGISTER(ivtc); #endif-#if defined(GST_IOS_PLUGIN_LIVEADDER) || defined(GST_IOS_PLUGINS_EFFECTS)- GST_PLUGIN_STATIC_REGISTER(liveadder);-#endif #if defined(GST_IOS_PLUGIN_RAWPARSE) || defined(GST_IOS_PLUGINS_EFFECTS) GST_PLUGIN_STATIC_REGISTER(rawparse); #endif@@ -890,9 +884,6 @@ gst_ios_init (void) #if defined(GST_IOS_PLUGIN_DVDSPU) || defined(GST_IOS_PLUGINS_CODECS) GST_PLUGIN_STATIC_REGISTER(dvdspu); #endif-#if defined(GST_IOS_PLUGIN_FRAGMENTED) || defined(GST_IOS_PLUGINS_CODECS)- GST_PLUGIN_STATIC_REGISTER(fragmented);-#endif #if defined(GST_IOS_PLUGIN_ID3TAG) || defined(GST_IOS_PLUGINS_CODECS) GST_PLUGIN_STATIC_REGISTER(id3tag); #endifThis one should also be solved now, probably by upgrading the minimum supported SDK version. It prevents usage of GStreamer with newer SDK versions and e.g. prevents usage of swift because of that.Let's make this not a blocker anymore. It needs someone to look into enabling the new STL, and we're late into 1.10 now.Something for 1.12 I guess.The problem seems to be that the taglib build links against libstdc++.I'm trying to locally bump the minimum iOS version to 7.0 (where libc++ is the default).Might need changes in the taglib cmake build system then, if just updating the minimum iOS version is not enough to make it all workThe minimum iOS version change was enough, but I'm still getting missing C++ symbols. Kind of stuck on this, so will take a re-look later.	10.0	id=778768	14	False	False	mcrha	1
id=746617	REOPENED	GStreamer	gst-plugins-base	git master	Other All	Normal major	GStreamer Maintainers	2015-03-22 19:05 UTC by	Ilya Konstantinov	2016-03-03 17:44 UTC (	5 users	opusenc is creating headers but they never get sent. Therefore opusdec resorts to fallback values, e.g. always 2 channels.(e.g. in OpenWebRTC this results in wasteful audioconverts)	CreatedPatch - Actually send headersReview of:Good catch :)::: ext/opus/gstopusenc.c@@ +984,3 @@ gst_tag_setter_get_tag_list (GST_TAG_SETTER (enc))); + gst_audio_encoder_set_headers (benc, enc->headers);This function takes ownership of the list of headers. The pointer is not valid anymore afterwards, so you would either need to deep-copy the list or set enc->headers to NULLOn a second thought... are the headers supposed to be in-stream? In all cases or only RTP (does this break Ogg muxing?)? The Opus RTP RFC seems to want headers in-stream, but that also seems stupid. You can lose the first packet with the headers and then would only be able to decode stereo again.It seems like the information from the SDP would be enough for the depayloader or the decoder to actually re-generate the headers or at least do something more sensible. Especially the SDP will contain the channel count. So I think the decoder or depayloader also needs some changes to handle the case without headers more gracefully.I agree. I also thought it strange that opusdec gives a single chance for the header to be present in the first packet, given that transport can be unreliable.In OpenWebRTC, GstRTPOpusDepay gets 'application/x-rtp; ... channels:1' but this information isn't forwarded to GstOpusDec in any way.Perhaps GstOpusDec should allow the fallback values to be configurable via properties?(In reply to Sebastian Dröge (slomo) from)I'll just set it to NULL and eliminate all of the unrefs.Also, what's with this "gst_audio_encoder_set_headers" thing? I'm merely "setting" the headers and then gst_audio_encoder decides when to send them?If so, does the 'enc->header_sent' member make sense? Shouldn't it be 'enc->header_set'?(In reply to Ilya Konstantinov from)(note that other codecs like h264 or even Vorbis put the headers into the SDP for that reason...)The SDP fields should become caps fields in application/x-rtp, which then are transformed by the depayloader in caps fields in audio/x-opus. Then the decoder can do something useful with them.It seems like the Opus payloader and depayloader completely ignore all the SDP fields mentioned in the RFC.I think the headers are also used to put them into the caps. They might still be needed.(In reply to Ilya Konstantinov from)The base class sends them right away before the next real buffer, and also whenever requested by downstream.Btw, see also the config-interval property on the payloaders (e.g. h264 and vorbis one).(In reply to Sebastian Dröge (slomo) from)The caps are also produced within gst_opus_enc_handle_frame, and no other code references 'enc->headers'. I can just make 'headers' a local variable within gst_opus_enc_handle_frame, pass it to gst_audio_encoder and forget about it.CreatedPatch - Actually send headersChanges:* Turn headers into a local variable -- no longer unrefing it ourselves(In reply to Sebastian Dröge (slomo) from)Thanks, your direction is extremely valuable.Let's land this fix and meanwhile I'll look at the payloader/depayloader.I'll check tomorrow if sending the headers in-stream is correct for Opus in all cases, or only for RTP. If it's only for RTP, we should just let the payloader grab them from the caps and put them into the stream, and the depayloader parse them from the stream and put them into the caps.In any case, this fix seems desirable. Perhaps gst_audio_encoder_set_headers should be conditional on a property, i.e. if (enc->inband_headers) { gst_audio_encoder_set_headers (benc, headers); } else { g_list_foreach (headers, (GFunc) gst_buffer_unref, NULL); g_list_free (headers); }This should work automatically without setting any properties from the application :)But if: - sending headers in-stream is forbidden only in RTP case, and - opusenc doesn't (want to) have intimate knowledge of who it's linked tohow would it know?Caps. We could make a new "stream-format" for this case... or simpler: the RTP payloader could just extract the header from the caps. See last part of.Ohh, you think it might be *only* for RTP! (I misread it the other way around.)So:- if it's not only for RTP, then gst_audio_encoder_set_headers is right- if it's only for RTP, then modify 1) gst_opus_header_create_caps 2) gst_opus_header_create_caps_from_headers to allow 'headers' argument to be NULL (or just eliminate this GList completely).Is opusenc intended for streams only, while e.g. file muxing is done by some other element? That's why you refer to the headers as "in-stream"?The comment in gstopusheader.c says: /* Opus streams in Ogg begin with two headers; the initial header (with most of the codec setup parameters) which is mandated by the Ogg bitstream spec. The second header holds any comment fields. */Isn't it more likely that in RTP you don't have to send headers in-stream, since there's SDP?certainly seems to indicate that SDP is the place for information like whether the Opus stream is stereo.I'll wait for your feedback tomorrow, as I get the feeling you know this subject much more intimately than I do.opusenc already puts the headers into the caps, there's nothing to change there in that case :)opusenc is intended for general Opus encoding, anything "container" specific should be done there. E.g. in WebM/Matroska and Ogg the headers are taken from the caps and placed in special places in the Matroska/Ogg headers.(In reply to Sebastian Dröge (slomo) from)I think we should then eliminate the 'enc->headers' member since it's misleading.Right now GstRtpOpusPay gets its caps from props (rate, channels). Ideally: 1) those props should be eliminated, and 2) it should learn to parse the "streamheader" structure (from sink caps), and configure its src caps purely from the Opus header. This will require duplicating some parsing code from opusdec.(In reply to Ilya Konstantinov from)Oops, I was wrong. GstRtpOpusPay has no such properties. Instead, it has fixed 48000 rate. In OpenWebRTC, the 'channels' value actually origins from the following send-rtp-capsfilter-2 -- the 'channels' aren't actually negotiated, it seems.Ideally, GstRtpOpusPay would provide its own 'channels' (based on parsing the "streamheader") so that actual negotiation can take place.The headers (and streamheader!) that we have there are for Ogg (and WebM apparently) only. They must not be in-stream, and for RTP we have to get the relevant info from the SDP and then put it into the caps. I'm going to fix that now :)commit 856bb027f993413494ed76ef9f282ead99812075Author: Sebastian Dröge <>Date: Mon Mar 23 12:24:55 2015 +0100 opus: Handle sprop-stereo and sprop-maxcapturerate RTP caps fieldscommitAuthor: Sebastian Dröge <>Date: Mon Mar 23 12:09:25 2015 +0100 opusdec: Take channels and sample rate from the caps if we have no stream headercommitAuthor: Sebastian Dröge <>Date: Mon Mar 23 12:07:52 2015 +0100 opusdec: Reset the decoder if the caps changecommitAuthor: Sebastian Dröge <>Date: Mon Mar 23 11:57:09 2015 +0100 opusdec: Take output sample rate from the stream headers too This way we let opusdec do the resampling if needed and don't carry around buffers with a too high sample rate if not required. While Opus always uses 48kHz internally, this information from the header specifies which frequencies are safe to drop.commitAuthor: Sebastian Dröge <>Date: Mon Mar 23 11:56:09 2015 +0100 opusheader: Put number of channels and sample rate into the capsI think setting the rate in the caps from the depayloader is incorrect, the rate is always 48khz for Opus. It's just a "hint", not a guarantee. Same for sprop-stereo, it just indicates that it can be safely downmixed, not that the data will never be stereo.Also, in section 7, the draft says "the number of channels MUST be 2". Ie, please read the RFC before doing patches, and please just revert all of this. Opus was carefully designed to be used without headers with RTP, so the mistakes of Vorbis were not repeated.(In reply to Olivier Crête from)Wouldn't it be still beneficial for opusenc to indicate 'channels' on its src pad, if only for the downstream rtpopuspay to ensure conformance to the RFC?You're right, it should indeed indicate it and negotiate it with up stream so that it is down mixed appropriately.(In reply to Olivier Crête from)What is the difference between "safely downmixed" (or "safely downsampled") and actually doing that?What do you suggest should we do here?I was reading the RFC and as you quote above it says you can safely downmix. That's what we do now to not produce useless data and cause unneeded processing overhead.Why would anything put the sprop- things into the SDP if it wanted to send stereo or higher sample rates? And what would anybody be supposed to do with those if they mean nothing?Right, and it also works without any headers and information from the SDP.The only difference now is that we actually put this information into the RTP caps in the payloader so someone can do something useful with them (whatever that may be), what is missing in the payloader is negotiation (to tell upstream to produce e.g. mono if downstream only wants mono). And in the depayloader we put this information in the caps again so that the decoder can do something with it.Also we now put the channels and original rate into the audio/x-opus caps now so that something like "opusenc ! opusdec" behaves like an identity for caps instead of resampling and upsamling. If the information from the SDP are supposed to be useless then the fix here would be to not have the depayloader translate them into caps fields for audio/x-opus.I'm sorry, I completely misread your patch :-( I'm not sure how it could ever produce useless data? You start with one or two channels, and you end up with 2 channels which may be the same.Also attaching some improvement patches, so we can forward the receipts preferences to the source, ie implement the "stereo" property for the sender.Createdrtpopuspay: Set the number of channels to 2 as per RFC draftCreatedrtpopuspay: Forward stereo preferences from caps upstreamCreatedrtpopusdepay: sprop-* are optional, no need for a WARNINGCreatedopusenc: Forward channel count preferences from downstream to sourceComment onrtpopuspay: Forward stereo preferences from caps upstreamMight also want to do something here with maxplaybackrate (that's a sample rate btw, even if it sounds different :) ).Comment onrtpopusdepay: sprop-* are optional, no need for a WARNINGThe warning should only be printed if the fields are there but contain something we don't understand. It seems like that's a good idea as we might then want to add support for whatever a new spec adds :)If the field is just not there it shouldn't print a warningComment onopusenc: Forward channel count preferences from downstream to sourcegst_audio_encoder_proxy_getcaps() should already do that, with less code.For the multistream stuff, it doesn't look like it's properly implemented currently. In the encoder it needs some better channel-layout handling (currently it just fails to handle any non-Vorbis channel layout but doesn't put that on the caps), in the decoder we don't have any multistream handling at all AFAIU. I would prefer to keep channels=[1,2] until that is fixed.Also I think we should put the channel mappings and other things (the stuff that is stored in the first Ogg header) into the audio/x-opus caps. They are needed by the decoder to properly decode multistream Opus (unless the caps contain the Ogg specific header).(In reply to Olivier Crête from)I just meant that with how I understood your comments, the sprop-* SDP fields would be completely useless data and couldn't be used for anything (as compared to the stereo and maxplaybackrate fields without the sprop- prefix, which are useful for negotiation).(In reply to Sebastian Dröge (slomo) from)And by "understood" I mean "misunderstood" :)Comment onrtpopuspay: Set the number of channels to 2 as per RFC draftTurns out we put the channels as a string, not an INT, fixed and committed.commitAuthor: Olivier Crête <>Date: Tue Mar 24 13:56:21 2015 -0400 rtpopuspay: Set the number of channels to 2 as per RFC draftComment onrtpopuspay: Forward stereo preferences from caps upstreamAlso pushed:commitAuthor: Olivier Crête <>Date: Tue Mar 24 13:57:54 2015 -0400 rtpopuspay: Forward stereo preferences from caps upstreamIf I understand correctly the "header" produced by opusenc is actually Ogg specific, so it should probably go into oggmux?Also, I don't think we have a way in Gst 1.x to express channel ordering in caps anymore? Should we just always encode in GStreame order and put the mask on the audio/x-opus caps ?(In reply to Olivier Crête from)opusenc cannot receive channels in any order but the GStreamer order, so why would it do anything else?If to judge by other audio sources, opusdec should reorder if needed, to output GStreamer order.(In reply to Olivier Crête from)Yes, having it in opusdec and opusenc is hurting my eyes :) But I think this header is also used by matroskamux/demux, needs to be checked. Which seems weird... but oh well.I think for the audio/x-opus caps we will need to express everything that goes into the Ogg header somehow. Meaning that we also need to express arbitrary channel orders. We can just use a GST_TYPE_ARRAY of integers for that, just like it is stored in the Ogg header and also expected by the Opus API.It's not nice but I think the best we can do.opusdec of course has to reorder channels into the GStreamer channel order then, and also opusenc should potentially reorder channels if downstream requests a different "Opus channel map".(In reply to Ilya Konstantinov from)All true, but see above. We need to be able to express other orders in the audio/x-opus caps, e.g. to handle multichannel streams coming from containers that define a different order (MPEGTS). opusenc/dec need to reorder then to make sure only the GStreamer order ever appears in audio/x-raw streams.Sebastian, is this still relevant after your opus multichannel work?	41.0	id=541469	13	False	False	michal	1
id=161209	REOPENED	GConf	XML backend	2.8.x	Other Linux	Normal major	GConf Maintainers	2004-12-13 22:40 UTC by	matt johnson	2011-08-25 23:47 UTC (	9 users	Distribution: Debian 3.1Package: GConfSeverity: majorVersion: GNOME2.8.1 2.8.xGnome-Distributor: DebianSynopsis: gconf error on login if user has whitespace in homedir pathBugzilla-Product: GConfBugzilla-Component: XML backendBugzilla-Version: 2.8.xDescription:Description of Problem:Under gnome 2.8, gnome apps cannot find user gconf database for storingkeys if username has *spaces* in (e.g. is authenticating via winbind/pamagainst nt usernames with whitespaces)All users with whitespaces fail to login succesfully. All users without spaces (authenticating via the same means) alwayssuccessful - no error.There was no error for any user in previous gnome (e.g. gnome 2.6 - allworked very well before gnome upgrade)Steps to reproduce the problem:1. setup a workstation to authenticate from an nt server that useswhitespace in username2. test logins work in gnome 2.6 (or earlier), then upgrade to gnome2.83. attempt gnome 2.8 login from (e.g. gdm)Actual Results:Error starting desktop gnome apps such as gnome panel etc.Gconf complains it cannot open database for storage - user does not getacceptable desktop (no panel, menus etc)Expected Results:Successful loginNo error - there was no problem using gnome 2.6 with usernames withwhitespacesHow often does this happen?Every timeAdditional Information:gnome 2.4, 2.6 login worksgnome 2.8 can get no login if user has whitespace	To prove this, one can simply put in a test location in /etc/gconf/2/path,replacing $(HOME)/gconf with something like /home/dirwith space/jsmith, andcreate a corresponding user and homedir.2.10 have the same issue.This looks like it was fixed:2005-10-18 Tor Lillqvist <> * gconf/gconf-backend.c (invalid_chars[]): Do allow space in configuration source addresses on Windows, as space is common in user names, and thus home directories (i.e., profile folders).It seems to me that the commit mentioned inonly removed SPACE from invalid_chars on the Windows operating system. The original report was for Debian though.There has been a report on the gnucash-user mailing list about being unable to save preferences because the user name contained an ampersand (&). Is it really necessary to forbid so many characters?Easy steps to reproduce:# mkdir "/mnt/home with space"# adduser --home "/mnt/home with space" sampleNow, try to login and you will get the error message:The application "gnome-panel" attempted to change an aspect of yourconfiguration that your system administrator or operating system vendor doesnot allow you to change. Some of the settings you have selected may not takeeffect, or may not be restored next time you use the application.As you can see, the homedir can have white spaces in linux, too.The update mentioned inmust be replicated to others operating systems...***has been marked as a duplicate of this bug. ***It's easy to remove the Windows special casing of this, but I wonder if we hit more problems down the road with this. Has anyone tried GNOME 3 on such a home dir btw? Does this problem hit us in dconf/gsettings too?The only restriction in both dconf and gsettings seems to be * @key must be a valid key (ie starting with a slash, not containing * '//', and not ending with a slash).	8.0	id=746617	24	False	False	ilya.konstantinov	1
id=739178	REOPENED	gnome-shell	drivers	3.14.x	Other Linux	Normal major		2014-10-25 18:13 UTC by		2016-12-19 13:43 UTC (	32 users	Createdcorrupted gnome shell backgroundon resume from suspend gnome-shell background and lock screen background are corrupted with random pixels.cf attachmentthis bug is open on archlinux bug tracker and debian bug trackerit seems to be nvidia proprietary driver related	***has been marked as a duplicate of this bug. ***Sorry, i forgot to mention :- Archlinux with kernel 3.17.1- Xorg server 1.16.1- nvidia binary driver 340.46nothing suspicious in logs and as said in the other report, atl-r + r restore the backgrounds.one more update. it seams that the background picture is literaly erased from memory and not restored.by using the nvidia-smi utility1- before sleep : memory usage 115MiB / 1023MiB2- after sleep : 45MiB / 1023MiB3- after sleep + reload shell : 97MiB / 1023MiBi've done this three steps a couple of time and the result is always the same a decrease of video memory consumption.Any chance for you to reproduce this with the nouveau driver?i will try.one workaround for the moment is having an animated wallpaper (default gnome one) so when a wakeup occured, the wallpapper will change if the wallpapper delay is reached :-)ok, so i installed nouveau and the background is not corrupted after wakeup. it's only with nvidia binary driver.i will give nouveau a try.conclusion, after three or four sleep/wakeup since i installed the nouveau driver i don't have any backgrounds corruption (in screen shield and gnome-shell).plus things is that wakeup is almost instantaneous with "nouveau" and performances for standard usage are decent.Closing this as not a gnome bug then. Thank you for testing.We usually leave bugs in the driver open until the underlying driver bug is fixed and released.Is it filed upstream? It's a common bug among nvidia blob users.***has been marked as a duplicate of this bug. ***here is the same question on nvidia forumThe nvidia forum post by sandipt mentions:"Our current software architecture doesn't preserve the contents of FBOs across modeswitches or power events. As a result, our implementation relies on applications re-rendering to their FBOs every frame. This is a fundamental limitation of our design that will be fixed in the future."Is is possible for gnome-shell to somehow work around this, by redrawing the background on resume from suspend?Also, this code path was working fine on 3.12, what changed on the gnome-shell side?***has been marked as a duplicate of this bug. ***I have the same probleme under Archlinux with AMD catalyst proprietary driver.And same probleme hereSame here, under SolydX with Gnome, after updating from Gnome Shell 3.12 to Gnome Shell 3.14.My graphic card is Nvidia, with propietary drivers.I ust had a report of the same case for openSUSE, where NVidia also chimed in(see)### quote ###My best guess would be that the desktop background picture is being stored as an OpenGL Frame Buffer Object (FBO), and that whatever program is responsible for drawing it is counting on the FBO's contents to be preserved across the suspend/resume cycle.FBO contents aren't guaranteed to persist across modeswitch events (suspend/resume will incur a VT switch away from X and back to it, and the VT switches in turn will incur modesets). If an FBO is being reused across a modeswitch, its contents need to be refreshed.### end quote ###I'm having this issue on Fedora 21 with NVIDIA driver, two monitors. From what I have read, it's clearly a GNOME bug.The whole reason we use an FBO is so that we don't have to repaint it on every frame. That's considerably expensive. We weren't expecting drivers to lose FBO contents at arbitrary points without a single way of letting us know that that was the case.If the NVIDIA driver team can give us a workaround other than "paint the FBO every frame", then I'd be fine to implement it.Wouldn't it be a simple fix to just repaint the FBO after resume?Well, mode switches, but we don't know when that happens.I have the same probleme under :-Distro: Fedora release 21 (Twenty One)-Display Server: Fedora X.org 116.3-Kernel: 3.18.7-200.fc21.x86_64-Desktop: Gnome 3.14.3-GLX Renderer: GeForce GT 330/PCIe/SSE2 GLX Version: 3.3.0 NVIDIA 340.76atl-r + r restore the backgrounds. Что за беда?***has been marked as a duplicate of this bug. ***Just to confirm that I have been experiencing the same issue with GeForce GTX 660 Ti, driver version 346.47 and Fedora 21.I have been experiencing this issue for some time and the only time I'm aware of having seen it is after a resume. Could I suggest building in a repaint of the buffer on resume as it is likely to resolve 99% of the issues people are experiencing.(In reply to mikey from)I'm in favor of this. It's a hack but a good one. My background is so depressing right now. Don't go allon this one, please - it's clearly broken.(In reply to Alex Hultman from)There's no polls here.It's also not possible. See.It's a bug in the NVidia driver. I would suggest you contact them and point them here instead of trying to get gnome-shell developers to implement bug fixes which really are work-arounds.As a suffering user that sentiment is discouraging and lowers my respect for the gnome community, despite knowing it holds truth.As far as i've understood it, the nvidia driver has always behaved that way, and it is gnome that made the change that broke things.I certainly appreciate all efforts to report the bug upstream to nvidia and push for them to fix it, but any temporary hack to address the worse aspect of the bug: refresh after resume; i'm betting would be hugely appreciated by all effected gnome users.Even a simple recipe that users can add to a resume event to force the refresh would be appreciated.(In reply to Mick Wever from)There are some contracts drawn up when you advertise particular OpenGL features. They're the only ones that don't implement them properly.We're waiting on NVidia to tell us what that work-around should be ().Refresh after resume still isn't possible to detect from the graphics stack (see, again).Use the nouveau drivers, they don't have that problem ().Would a custom hook in systemd be a possibility for users to add themselves? ref(In reply to Bastien Nocera from)I posted a link with a quote from NVIDIA's Aaron Plattner (). In case you haven't read it:This is a known interaction problem between the way GNOME stores its backgrounds and the fact that FBO contents are not preserved across suspend / resume cycles. In general, applications should avoid relying on FBO contents being preserved across mode switches or VT switches.----So the workaround is already out there, I have found similar answers from NVIDIA in other threads. Don't rely on FBO contents being preserved across mode switches.And no - nouveau is not an option, at all. GNOME 3.12 worked fine.(In reply to Alex Hultman from)I'd love to do that, but I don't know when modeswitches happen. If NVIDIA gives me a way to detect when modeswitches happen, even if it's super-specific to their architecture and driver, I will be more than delighted to write some code to repaint the FBO as a workaround.Keep in mind that this is a blatant violation of the OpenGL specification, who claim that FBOs should survive with valid contents for the duration of the FBO. But I understand that writing OpenGL drivers is legitimately hard, and I have a good understanding of why this happens in their architecture. I'd be more than happy to add a hack workaround once I have a way to do it.If there's anything I can do to help this out from the GNOME side, please let me know.GNOME 3.12 had major performance issues with certain background setups, which is why we went to using an FBO to store precached background pixels.Thanks Jasper for all the explanations. I’ll try to get in touch with nVidia through our hardware support.Createdmeta-background: Add a function to refresh all background instancesWe need to reload the FBOs under some circumstances, this adds a wayto easily do so.CreatedRefresh all background instances after suspend if neededNVIDIA drivers don't preserve FBO contents across suspend / resumecycles which results in broken backgrounds. We can work around that byforcing a refresh when coming out of suspend.--There, this hack works fine in my testing. Also, despite what AaronPlattner says, IME VT switching doesn't wipe the background and modeswitches are taken care of anyway since we already reload the FBOs onmonitors-changed.Review of:Sure.Review of:OK, I figured it was also on VT switches, which is why I hesitated a bit more. I don't have an NVIDIA machine to actually test with myself, but this looks fine from a blind review.I would add a comment above the hack with a link to this bug or the NVIDIA forums or something to let people know why we're doing this.CreatedRefresh all background instances after suspend if needed--Ok, added a reference to this bug in a comment to make it clear what'sgoing on.So, how do we want to deal with this? I can ask for a code freezebreak if it's deemed worth it and safe enough, otherwise it can gointo 3.16.1.This also applies cleanly to the 3.14 branches, so I'll push it thereas well if I get an ack.Review of:OK. Let's put this in 3.16.1.(In reply to Rui Matos from)You don't need an ack for 3.14 - as some stuff has accumulated on the stable branch lately, I'm planning to do a final release these days, so please push it there before 3.16.1.Review of:::: src/shell-util.c@@ +387,3 @@+ return FALSE;++ if (g_strcmp0 (get_gl_vendor (), "NVIDIA"))Aren't we missing a '== 0' here?CreatedRefresh all background instances after suspend if needed--(In reply to Debarshi Ray from)strcmp, The Deceiver, strikes again. And of course, this means thatthe vendor string was wrong too, is should be "NVIDIA Corporation".Thanks for catching it!Wouldn't it be better to always redraw the FBO on resumes, regardless if we are using NVIDIA or not. String comparison is maybe a little too specific and haxxy. I mean - a redraw per resume isn't that much of an overhead.That makes the patch a lot simpler too:14 const LoginManager = imports.misc.loginManager;253 // NVIDIA drivers don't preserve FBO contents across254 // suspend/resume, see255 //257 LoginManager.getLoginManager().connect('prepare-for-sleep',258 function(lm, suspending) {259 if (suspending)260 return;261 Meta.Background.refresh_all();262 });CreatedRefresh background on resume(In reply to Alex Hultman from)Why do more work than we need to?It's what everyone does, including game engines, etc.I'm not arguing. Your patch will be much welcomed to my workstation.But no - string comparison is not whats done in game engines or what "everyone" does (I'm most certainly not that kind of "everyone"). Anyhow - you know more GNOME than I do and this patch of yours works so lets just commit it and be happy.afaik when it comes to match driver vendors, that is done with string comparisons in the opengl world...Will push to master after 3.16 is out. 46d57bf..6b3be51 gnome-3-14 -> gnome-3-14pushed as- meta-background: Add a function to refresh all background instances4b0cbaf..d19e78a gnome-3-14 -> gnome-3-14pushed as- Refresh all background instances after suspend if neededComment onmeta-background: Add a function to refresh all background instancespushed as- meta-background: Add a function to refresh all background instancespushed as- Refresh all background instances after suspend if neededMy problem is solved[maxim@localhost ~]$ inxi -S -GSystem: Host: localhost.localdomain Kernel: 3.19.3-200.fc21.x86_64 x86_64 (64 bit) Desktop: Gnome 3.14.4 Distro: Fedora release 21 (Twenty One)Graphics: Card: NVIDIA G92 [GeForce GT 330] Display Server: Fedora X.org 116.3 driver: N/A Resolution:GLX Renderer: GeForce GT 330/PCIe/SSE2 GLX Version: 3.3.0 NVIDIA 340.76The patch for 3.14.4 does fix the problem for images as wallpapers, but for colors as wallpapers I'm still getting garbage. Just thought I'd throw that in here, I haven't looked into why or anything.works a charm. (also on an integrated 'Intel HD Graphics 5500', from which i suffered the same problem (which doesn't match the discussions above))(In reply to John Chadwick from)Commenting in closed bugs isn't a good way to attract attention.Anyway, I couldn't reproduce this. How are you setting the background color? Which GPU and driver version are you using?***has been marked as a duplicate of this bug. ***Can someone give instructions to apply the workaround patches and rebuild the gnome packages. Thanks.This appears to not work if I have 'systemctl hibernate' scheduled from a /etc/cron.d/hibernate-at-4am script. I still see the desktop corruption.However, if I alt-f2 then 'systemctl hibernate', I see no corruption.I upgraded my Debian from Wheezy to Jessie and the problem has gone withthe upgraded Gnome. Not sure the fix will be backportedFor your information, here are the Gnome Shell versions for Debian:Debian Wheezy : 3.4.2 (bug)Debian Jessie : 3.14.2 (fixed)Did the fix make it to 3.16.3 as well? I am seeing this again in Fedora 22.(In reply to Julian Sikorski from)Yes, 3.16.1 to be exact.(In reply to Florian Müllner from)Then it is still broken. I have to alt+f2 -> ror set a new background wallpaper after resuming from hibernate.(In reply to Hussam Al-Tayeb from)Does it work if instead of 'systemctl hibernate' you call the logind dbus interface? Something like:gdbus call --system --dest org.freedesktop.login1 --object-path /org/freedesktop/login1 --method org.freedesktop.login1.Manager.Hibernate falseYes. That worked. The background looked fine. The up arrow in thelockscreen looked fuzzy but after unlocking, the background lookedfine.Is this way of hibernating something I can use through a cron job in(/etc/cron.d/) without requiring my user is logged on?(In reply to Hussam Al-Tayeb from)I'm actually not sure. Try it?Anyway, at this point, we're getting offtopic. This is how systemd works. The API we use to know that we're resuming from suspend/hibernate is provided by logind and its docs[1] say:"Note that this will only be sent out for suspend/resume cycles done via logind, i.e. generally only for high-level user-induced suspend cycles, and not automatic, low-level kernel induced ones which might exist on certain devices with more aggressive power management."I don't know of any lower level API that we could use to know when the machine is resuming.[1](In reply to Florian Müllner from)For me it still happens with 3.16.3 - not every time, however. I suspend my laptop (suspend to RAM) either by closing the lid, or by letting it run until it suspends.Would it be possible to tell we resumed from hibernate when clock changes?For example, I hibernated at 11:55 and resumed at 12:55. The kernel is reporting a different date or time so redraw the background.yes, timerfd() will fire any time the system is resumed if the TFD_TIMER_CANCEL_ON_SET flag is used. Though, it's clearly cleaner to use the systemd apis (except I guess they don't cover all cases)Does only the user background get refreshed or the greeter one as well?Hi again. There is another place which needs to be refreshed upon resume from hibernate. The up-arrow in the lockscreen gets corrupted.Should I open a new bug report?Thank you!It doesn't work that well for me. I would re-open but I cannot. I see many corruptions in background and the login shield even when I haven't suspended. After the monitor blanks for a while I can get corruptions.My login shield is completely corrupted and won't update even if I pull it up and down and login and logout. I use 358.16 currently.Please report it to nvidia, especially if it worked with previous driver versions.(In reply to Rui Matos from)I think he is referring to the background in the gdm session. That one still doesn't get refreshed. Only the user session's backgrounds are refreshed.A new extension, NV_robustness_video_memory_purge, was designed and implemented by NVIDIA to notify applications of events where the contents of video memory were lost.This shall enable the use of a workaround as described in:"If NVIDIA gives me a way to detect when modeswitches happen, even if it's super-specific to their architecture and driver, I will be more than delighted to write some code to repaint the FBO as a workaround."This extension will be implemented in the upcoming r367 beta driver version (expected to be released within 2 weeks).The text of the extension is pending official publication by Khronos, and has been provided to RedHat through separate channels.-- Arthur HuilletNVIDIA Linux graphics(In reply to Arthur Huillet from)Perhaps nvidia can post a patch for mutter/gnome-shell to use the new function so users such as myself try it? :)(In reply to Arthur Huillet from)By the way, I tried the nvidia 367.18 driver on my nvidia 630 GT (a fermi GF108 card) and it was locking up with XID errors 5 minutes after booting. reverting to the 364.19 driver fixed it.But I did see the new extension in the release notes.[When replying, please avoid full quotes of previous comments for no reason, but instead only keep relevant lines. Thank you!]Createdcogl-winsys-glx: Allow creating a GL context with robustness enabledThis API allows callers to specify that they're able to handle a GLcontext with robustness enabled. We make this opt-in since robustnesscontexts change how glGetError() behaves.--The context creating bits aren't right according to the spec[0] yetbecause the currently available NVIDIA driver that implements thisdoesn't work like that yet. I'm told it will change to the spec'ed APIon a future release.I'm attaching this as is now for review of the general approach andfor anyone that wants to test with the 367.18 driver.[0]Createdcogl-context: Add a cogl_get_graphics_reset_status APIIf the driver supports the GL_ARB_robustness extension we can exposethe graphics reset status this way.Createdcogl: Ignore GL_CONTEXT_LOST when checking for GL errorsWhen using a context with robustness, glGetError() may returnGL_CONTEXT_LOST at any time and this error doesn't get cleared untilthe application calls glGetGraphicsResetStatus() . This means that ourerror checking can't call glGetError() in a loop without checking forthat return value and returning in that case.Createdcompositor: Handle GL context reset errorsEmit a signal so that interested parties can recreate their FBOs andqueue a full scene graph redraw to ensure we don't end up showinggraphical artifacts.This relies on the GL driver supporting the ARB_robustness extensionand cogl creating a suitable GL context. For now we only make use ofit with the X backend since the only driver with which this is usefulis NVIDIA.CreatedMetaBackground: invalidate contents on loss of graphics contextWe use FBOs so we need to cause them to be recreated if we get a GLcontext lost error.CreatedMetaSurfaceActorX11: invalidate the stex on loss of graphics contextMetaShapedTexture uses FBOs when mipmapping so we need to cause themto be recreated if we get a GL context lost error.CreatedRevert "meta-background: Add a function to refresh all background instances"We now handle GL context lost errors properly so we don't need thisanymore.This reverts commit.CreatedRevert "Refresh all background instances after suspend if needed"This is now handled entirely in cogl and mutter.This reverts commit.Createdmain: Reload theme on loss of graphics contextThe theme machinery uses FBOs in some cases (mainly for shadows) whichneed to be reloaded if we get a GL context lost error.Will those patches add a dependency on the new driver for people using nvidia cards?Pre-Fermi cards are on a legacy driver branch that is at feature freeze and won't get the new extension.Nvidia fixed my xorg driver crash. I will try those patches.Createdcogl-winsys-glx: Allow creating a GL context with robustness enabledThis API allows callers to specify that they're able to handle a GLcontext with robustness enabled. We make this opt-in since robustnesscontexts change how glGetError() behaves.Createdcogl-context: Add a cogl_get_graphics_reset_status APIIf the driver supports the GL_ARB_robustness extension we can exposethe graphics reset status this way.Createdcogl: Ignore GL_CONTEXT_LOST when checking for GL errorsWhen using a context with robustness, glGetError() may returnGL_CONTEXT_LOST at any time and this error doesn't get cleared untilthe application calls glGetGraphicsResetStatus() . This means that ourerror checking can't call glGetError() in a loop without checking forthat return value and returning in that case.Createdrestart: Make meta_restart() work without a messageIn some cases there's no meaningful message to show.Createdcompositor: Handle GL context reset errors--As discussed with Owen on irc, I changed this to restart the shell onany other robustness errors since there's isn't much we can doaccording to the spec as we can't easily tear down a GL context andcreate a new one.CreatedMetaBackground: invalidate contents on loss of graphics contextWe use FBOs so we need to cause them to be recreated if we get a GLcontext lost error.CreatedMetaSurfaceActorX11: invalidate the stex on loss of graphics contextMetaShapedTexture uses FBOs when mipmapping so we need to cause themto be recreated if we get a GL context lost error.Review of:let's keep this in for users who are stuck with older driversReview of:dittoOk, the 367.27 driver is out, complying with the spec, and these rebased patches now work with it.Ok, I tried the patches. The background refreshes after resuming.The floating arrow in the lock screen is still corrupted though.Can that be refreshed as well or is it a different issue?CreatedscreenShield: Stop using an offscreen buffer for the arrow actorThis isn't a performance critical actor and the NVIDIA driver discardsoffscreen buffers in some cases which would require us to go throughextra hoops to handle here which isn't worth it.--(In reply to Hussam Al-Tayeb from)Try adding this gnome-shell patch too.I applied that patch, restarted, and the floating arrow is still corrupted after resuming from hibernate. So this particular issue is still there.However, the refreshed background much faster now after resuming from hibernate.CreatedscreenShield: Make the arrow redraw on style-changedWe need to invalidate the underlying ClutterCanvas for it to re-createthe PBO and emit the draw signal.--Can you test with this one on top too?Note that I can't reproduce this particular issue here, but I can seewhy it's failing.Review of:Wait, StDrawingArea already does this on its style_changed() vfunc so this really shouldn't be needed(In reply to Rui Matos from)It did however fix my issue.CreatedscreenShield: Chain up Arrow's vfuncsStyle changes weren't reaching the drawing area widget. Paint wasbeing chained directly which works but the correct thing to do ischain up and let St.Widget's implementation do the propagation.--Thanks for testing. This should be the right fix.(In reply to Rui Matos from)I reverted the old patch in my local tree and applied this one. The arrow shows correctly after resuming from hibernate. Looks perfect!Review of:I don't think chaining up the paint is correct - if we look at st-widget.c, we see:static voidst_widget_paint (ClutterActor *actor){ st_widget_paint_background (ST_WIDGET (actor)); /* Chain up so we paint children. */ CLUTTER_ACTOR_CLASS (st_widget_parent_class)->paint (actor);}So if you chain up afterwards, you draw the background on *top* of whatever drawing you are doing. Compare st-label.c or st-icon.c - their paint implementations call st_widget_draw_background() as the first thing, then they do custom drawing, then they call paint on their child.Review of:Looks fineReview of:Should add (allow none) annotation to meta_restart(), good to commit with that.Review of:[ I mean allow-none with the dash ]Review of:::: src/compositor/compositor.c@@ +1103,3 @@ +static void+redraw_all_children (ClutterActor *actor)It would be quite useful to document why this rather than clutter_actor_queue_redraw(stage); - my thought is that this will cause all the FBO caches for offscreen effects to be redrawn - but that's not sufficient - the fbo's actually need to be destroyed and recreated which this won't cause.@@ +1149,3 @@+ since we don't enable robustness in that case. */+ g_assert (!meta_is_wayland_compositor ());+ meta_restart (NULL);Suggest a break; here - we typically use a break; on the last statement of the case, even if it's a default; statement that will stay last. (Without a break; it reads to me like meta_restart() is a non-returning function - and the restart is async.)::: src/core/display.c@@ +345,3 @@ + display_signals[GL_CONTEXT_LOST] =+ g_signal_new ("gl-context-lost",I think this name is now wrong, since it doesn't apply to a generic context that you have to recreate, it refers to a purged context that you can recover by following certain steps. Suggest gl-video-memory-purged since that describes what those who connect need to do. (gl-context-purged also would make sense in the context of the extension but is less descriptive.)Review of:I can't figure out why Giovanni added this in the first place - we already cache both the cairo drawing for the arrow and the shadow - so drawing this widget should be about as cheap as possible. As far as I can tell, things should work fine without, but just make sure that you've checked that the arroow shadow draws correctly now.Review of:::: src/compositor/meta-surface-actor-x11.c@@ +431,3 @@++ meta_shaped_texture_set_texture (stex, NULL);+ meta_shaped_texture_set_texture (stex, priv->texture);Conceptually, this at the wrong level - MetaSurfaceActorX11 doesn't "know" that MetaShapedTexture uses a MetaTextureTower or that MetaTextureTower uses a FBO. *With* a comment added here along the lines of: /* Setting the texture to NULL will cause all the FBO's cached by the * shaped texture's MetaTextureTower to be discarded and recreated. * I'm OK with this because we're really just working around something. If FBO's had this behavior per the GL spec then I think the callback would be best on CoglOffscreen or CoglContext and not on the MetaDisplay.Review of:::: cogl/cogl/cogl-glx.h@@ +78,3 @@ +void+cogl_glx_set_allow_robustness (CoglBool allow);This obviously is a low-overhead way of arranging things, and avoids patching Clutter, but I don't think it fits in well with how Cogl works - there are no similar global functions that affect the behavior.I'd expect cogl_[xlib?]_renderer_set_allow_robustness()or something like that.::: cogl/cogl/winsys/cogl-winsys-glx.c@@ +1042,3 @@+ GL_TRUE,+ GLX_CONTEXT_RESET_NOTIFICATION_STRATEGY_ARB,+ GLX_LOSE_CONTEXT_ON_RESET_ARB,Hmm, so this is going to X error unless *both* robustness and GL_NV_robustness_video_memory_purge are present and can be enabled. This makes the name set_allow_robustness() questionable. I'm a bit confused about whether enabling robustness is useful without the video_memory_purge() I'd suggest either: * Only request reset_video_memory_purge if the extension is available * Or rename enable_robustness to request_reset_on_video_memory_purge() - but then it's unclear why you get all the other context-loss notifications - so I like this less.In general, I think I'd rather see the code check for the robustness extension before trying to enable this stuff - generating an X error on every startup is harmless but ugly.Review of:::: cogl/cogl/cogl-context.c@@ +792,3 @@++CoglGraphicsResetStatus+cogl_get_graphics_reset_status (CoglContext *context)Needs some basic docs, at least to describe that this requires enabling the extension.::: cogl/cogl/cogl-context.h@@ +380,3 @@+ COGL_GRAPHICS_RESET_STATUS_INNOCENT_CONTEXT_RESET,+ COGL_GRAPHICS_RESET_STATUS_UNKNOWN_CONTEXT_RESET,+ COGL_GRAPHICS_RESET_STATUS_PURGED_CONTEXT_RESET,Needs docsCreatedcogl-winsys-glx: Add support for NV_robustness_video_memory_purgeThis adds API to allow callers to specify that they're interested invideo memory purge errors.--(In reply to Owen Taylor from)Ok, changed to something similarI was confused too and asked Arthur who clarified that indeed as ofthe latest spec version we don't need to enable robust bufferaccess. We only need to check for the availability of theGetGraphicsResetStatusARB api and enable bothGLX_CONTEXT_RESET_NOTIFICATION_STRATEGY_ARB andGLX_GENERATE_RESET_ON_VIDEO_MEMORY_PURGE_NV.>This is what I did here, and I also changed the cogl api as yousuggest to reflect the clarification above.Createdcogl-context: Add a cogl_get_graphics_reset_status APIIf the driver supports the GL_ARB_robustness extension we can exposethe graphics reset status this way.--Added documentationCreatedcogl: Ignore GL_CONTEXT_LOST when checking for GL errors--rebasedCreatedclutter/x11: Add API to request video memory purges to be reported--This is the clutter callCreatedrestart: Make meta_restart() work without a message--Added allow-noneCreatedcompositor: Handle GL video memory purged errors--(In reply to Owen Taylor from)>This was actually a leftover of an earlier version where I was stillexperimenting. I don't think it's needed and replaced it with a simplefull stage redraw.Also addressed your other points.CreatedMetaBackground: invalidate contents on video memory purged errors--rebasedCreatedMetaSurfaceActorX11: invalidate the stex on video memory purged errors--Added a comment as suggestedCreatedmain: Reload theme on video memory purge errors--rebasedCreatedscreenShield: Stop using an offscreen buffer for the arrow actor--(In reply to Owen Taylor from)Yes, it seems to work fine without this, including the shadow.CreatedscreenShield: Chain up Arrow's style_changed vfunc--(In reply to Owen Taylor from)>Right. Changed it to only chain up style_changed(In reply to Rui Matos from)Actually, after a closer look, the arrow shadows weren't being painted properly, see. It still works fine with this patch though.Review of:Looks goodReview of:Looks fine. (I shudder at the thought of doing more IO on resume from suspend, but it's nicely encapsulated to only NVIDIA driver versions that need it.)Review of:OKReview of:OKReview of:OKReview of:Looks fineReview of:Looks goodReview of:Looks goodReview of:Looks goodReview of:Looks good except for docs/comments::: cogl/cogl/cogl-xlib-renderer.h@@ +176,3 @@+void+cogl_xlib_renderer_request_reset_on_video_memory_purge (CoglRenderer *renderer,+ CoglBool enable);I'd like to see docs here. I think this is the proper place to explain: - that certain NVIDIA drivers lose frame buffer contents on suspend, etc. - that the NV_robustness_video_memory_purge extension allows getting notification - that if the extension isn't present, the driver doesn't have that issueANd also describe how you find out about the reset. If enabling this can causeother resets to be reported, that should be mentioned here as something thata user needs to be aware of.::: cogl/cogl/winsys/cogl-winsys-glx.c@@ +1031,3 @@ None };+ static const int attrib_list_reset_on_purge[] =I'd like a comment here that has a short explanation of the relationship between NV_robustness_video_memory_purge and the robustness extension - basically what you found out from ahuillet@@ +1050,3 @@ + if (display->renderer->xlib_want_reset_on_video_memory_purge &&+ strstr (glx_renderer->glXQueryExtensionsString (xlib_renderer->xdpy,Need to comment why you aren't using COGL_WINSYS_FEATURECreatedcogl-winsys-glx: Add support for NV_robustness_video_memory_purge--Added the requested docs and comments.(In reply to Rui Matos from)This one doesn't have the review flag yet, please don't forget about itReview of:Looks goodReview of:Looks goodpushed as- cogl-context: Add a cogl_get_graphics_reset_status APIpushed as- cogl: Ignore GL_CONTEXT_LOST when checking for GL errorspushed as- clutter/x11: Add API to request video memory purges to be reportedpushed as- restart: Make meta_restart() work without a messagepushed as- compositor: Handle GL video memory purged errorspushed as- MetaBackground: invalidate contents on video memory purged errorspushed as- MetaSurfaceActorX11: invalidate the stex on video memory purged errorspushed as- cogl-winsys-glx: Add support for NV_robustness_video_memory_purgepushed as- main: Reload theme on video memory purge errorspushed as- screenShield: Stop using an offscreen buffer for the arrow actorpushed as- screenShield: Chain up Arrow's style_changed vfuncI hate to mention bad news but this is broken again after today's mutter checkins.Background gets corrupted but floating arrow still renders correctly.Reopening given the previous comment.System: Host: Kernel: 3.16.0-4-amd64 x86_64 (64 bit) Desktop: Gnome 3.14.4 Distro: Debian GNU/Linux 8 Graphics: Card: NVIDIA GK107 [GeForce GTX 650] Display Server: X.Org 1.16.4 driver: nvidia Resolution:,GLX Renderer: GeForce GTX 650/PCIe/SSE2 GLX Version: 4.4.0 NVIDIA 340.96I have this problem. Any advice about the current status?Thanks in advance,AANVIDIA driver 375.10 seems to fix the corrupted background on switching VT.I tried like a dozen times already.The background corruption still happens however on resuming from hibernate.	149.0	id=161209	15	False	False	bdelaage	1
id=513917	REOPENED	gthumb	general	3.2.x	Other Linux	Normal major	Paolo Bacchilega	2008-02-02 17:08 UTC by	Márton Németh	2015-12-20 16:59 UTC (	1 user	There are images on a disk and the disk is full. When one of the images are rotated, there is not enough space to write the new image and the old image is overwritten, so it is lost.How to reproduce:1. The attached test.img was created with the following steps: $ dd if=/dev/zero of=test.img bs=1024 count=1024 $ /sbin/mkfs.ext2 test.img $ mkdir test $ su # mount test.img test/ -o loop # cp test1.png test/ # cp test2.png test/ # cp test2.png test/ # dd if=/dev/zero of=test/filler.dat bs=1 # umount test/ # rm -r test/ # exit2. Mount the test.img: $ mkdir test/ $ su # mount test.img test/ -o loop # exit3. Start "gthumb" 2.10.5 (the window would look like the attached 01_images_at_start.png): $ gthumb test/4. Select the test3.png, then the Tools/Rotate Images and rotate the image counterclockwise (see 02_rotate_image.png)5. Press "Apply" button.Current result:an error dialog appears: with the text:(-) Fatal error in PNG image file: Write Errorsee the 03_fatal_error.png . The image is corrupted, see 04_image_corrupted.png .Expected result: if the rotate is not possible do not try to rotate and notify the user about this fact. This could prevent data loss.	Createdtest.img.gzA "full disk".Created01_images_at_start.pngCreated02_rotate_image.pngCreated03_fatal_error.pngCreated04_corrupted_image.pngSee also.This bug is confirmed with ext branch.Marking as obsolete, as this was reported for a now-unsupported version and no recent activity has occurred. Please feel free to reopen this bug report if the problem still occurs with a current version of gThumb.Created"Saving images" window with 50% progress barI have tested the disk full condition with Tools/Rotate Right function with gThumb 3.2.8, with the following steps:1. The attached test.img was created with the following steps: $ dd if=/dev/zero of=test.img bs=1024 count=1024 $ /sbin/mkfs.ext2 test.img $ mkdir test $ su # mount test.img test/ -o loop # cp test1.png test/ # cp test2.png test/ # cp test2.png test/ # dd if=/dev/zero of=test/filler.dat bs=1 # umount test/ # rm -r test/ # exit2. Mount the test.img: $ mkdir test/ $ su # mount test.img test/ -o loop # exit3. Start "gthumb" 3.2.8: $ gthumb test/4. Select the test3.png, then the Tools/Rotate Right5. A window with "Saving images" appears with a progress bar at 50% (see the attached image titled ["Saving images" window with 50% progress bar]). This window can be closed with "Close" button, but when trying to exit from gThumb the window appears again. It is not possible to exit from gThumb cleanly. In the background a .goutputstream-{SOMETHING} file is created with zero size. The situation is a little bit better now because the original image is not corrupted, but the "disk full" condition is not reported to the user and gThumb seems to wait forever so that the new file can be created.The mounted "test" image looks like after executing the test: csuka@csuka-ubuntu:~$ ls -la test/total 952drwxr-xr-x 3 csuka csuka 1024 Dec 20 17:20 .drwxr-xr-x 6 csuka csuka 4096 Dec 20 17:16 ..-rw-r--r-- 1 csuka csuka 0 Dec 20 17:21 .goutputstream-FRX09X-rw-r--r-- 1 csuka csuka 932864 Feb 2 2008 filler.datdrwx------ 2 root root 12288 Feb 2 2008 lost+found-rw-r--r-- 1 csuka csuka 4697 Jan 30 2008 test1.png-rw-r--r-- 1 csuka csuka 7778 Jan 30 2008 test2.jpg-rw-r--r-- 1 csuka csuka 5766 Feb 2 2008 test3.pngcsuka@csuka-ubuntu:~$ gthumb --versiongthumb 3.2.8, Copyright © 2001-2010 Free Software Foundation, Inc.csuka@csuka-ubuntu:~$ lsb_release -aNo LSB modules are available.Distributor ID: UbuntuDescription: Ubuntu 15.10Release: 15.10Codename: wilycsuka@csuka-ubuntu:~$	10.0	id=513917	11	False	False	mjc	1
id=758373	REOPENED	gnome-settings-daemon	general	unspecified	Other Linux	Normal major		2015-11-20 00:39 UTC by	derek	2015-12-18 17:04 UTC (	1 user	This is a ubuntu15.10 gnome3 installation on laptop, no touchscreen, with normal daily use, browsers, office, and gimp running, and suddenly the cursor disappear, the mouse is still functioning if I move the mouse, or touchpad, and responds to button click, wheel scroll, but without showing cursor, I don't how to use the the mouse, this should be a major issueI don't know how to reproduce this problem, but I can tell it happens, for a long time since Ubuntu14, I made fresh install of latest stable Ubuntu or Fedora, with gnome3 GUI interface it happens pretty randomly, once or twice every month, and when it happens, I don't know how to fix, or work aroundI researched online from another computer, seems it happened in the past, since 2013 or earlier, in different Linux distros, so I don't think this is a distro packing problem, this problem should be unique to gnome3, and most probably in the settings-daemon,somebody suggested to set cursor active false, by `gsettings set` or `dconf write`$ gsettings set org.gnome.settings-daemon.plugins.cursor active false$ dconf read /org/gnome/settings-daemon/plugins/cursor/activefalse$ dconf write /org/gnome/settings-daemon/plugins/cursor/active true$ gsettings set org.gnome.settings-daemon.plugins.cursor active falseIn my case, this solution only works 1 time only, or may not work, because the cursor may suddenly comes back after sometime, after I tried all kinds fixes in above links, try set it true, set it false, write it true, set it false, or switch to console by (ctrl+alt+f2) and switch back, power suspend and resume, never know which one fixed the problem; but what's so bad is even I tried all these fixes it may still not work, mouse is still insiviblemore solutions like these may fix or may not fix$ killall gnome-settings-daemon$ gnome-settings-daemon --replace$ sudo service gdm restart$ # or even somebody suggested a rebootbut the problem is my desktop session got lost, I may have 10+ desktop applications running, I don't want to logout and re-login; neither reboot as the ultimate solution like a silly windows user; I am running the stable version of Gnome3 on stable Linux OS!could someone give me an effective workaround, tell gnome-settings-daemon not to do any fancy stuff on showing/hiding cursor logic at all?	there are some existing bug reports and fixes before, but I don't see anyone reported this happening globally, and randomly, I don't know which of my graphical application triggered the cursor invisible, every time it just happens at different scenarioswhen this cursor invisible problem happens, it's invisible globally, not some particular area of some applications, not the panel, not the window list, but invisible anywhere of the desktopso I think this deserves a new bug report and there is no duplicate, while if you think there is a duplicate, please mark itThis sounds like a problem with your display driver. The bugs you're referencing were, for half, a bug in gnome-settings-daemon/gnome-desktop/mutter, and the other half, people complaining that the bug wasn't fixed but really found a bug in their display driver.Given that the problem has been fixed for GNOME a couple of releases ago, this is more likely a bug in your display driver. If you use the NVidia drivers, try the nouveau drivers, and vice-versa. In any case, it's one for your distribution to root cause.no, you just close it? that's really not helpful, how do you approve it's in driver but not regression in gnome-settings-daemon?I do run the same driver with other DEs (mate/lxde/...), how do you explain why it's only reproducible in Gnome3 ?is there a command to verify that? is there a workaround command to tell gnome-settings-daemon not to do any fancy cursor showing/hiding logic?(In reply to derek from)Yes, because you need to check that the problem isn't in the display driver *before*.Because nobody else reported one.Because it does more with OpenGL and cursors than the other DEs.You've disabled the cursor plugin and still have the problem.I can't reproduce your problem, and from the bugs that were filed, neither has anyone else. So you should really try to see whether the bug Might also be a bug in X libraries caused by gtk+ and vte (gnome-terminal):Contact your distribution first, then reopen if the distribution has root caused it.Might also be:if it's gnome-terminal related.I have to re-open this because it reproduced on my desktop computer as well; and I am operating chrome browser in this gnome3 without a cursor, moving mouse to click a button or links by guessing its position is really hard;this bug is hard to reproduce, I don't know a certain way to stably reproduce it, but it just appeared once a month, I know if kill current gnome-session (and forced logout) and login back, the cursor will be back; but I want to find a workaround to not have to logout/login back, because I have tens of window (browser, terminal, gedit, file-manager, shotwell, ...) kept open, over a month or longer,I believe it's in gnome-settings because once I set `org.gnome.settings-daemon.plugins.cursor` to false and some minutes later when I read it again, something set it back to true, is there something changing it in background?it's not a reproduce of #725342 because the cursor invisible globally, not in terminal only or some particular window;	6.0	id=776117	16	False	False	pjpreilly	1
id=727296	REOPENED	GnuCash	General	2.6.2	Other Windows	Normal major		2014-03-29 14:38 UTC by	Fredrik Persson	2014-04-02 05:47 UTC (	3 users	CreatedGnucash file displaying the problemThis is a bit tricky to explain.1. Create a new gnucash file with standard accounts, standard currency SEK.2. Create an asset, mutual fund, new commodity, named "Somefund". Default values.3. Create an income accound in USD, called "Someincome".4. Open "Somefund", create a transaction where you get 10 shares at 10 SEK each, equalling 100 SEK.5. Open "Someincome". The account contains the transactions, but debit and credit columns are blank.6. If you try to manually enter a value, pressing "return" does not do anything.Attaching a gnucash file with the result of this.The behaviour is from Windows 2.6.2, but it is identical on Linux 2.4.11.	CreatedGnucash file displaying the problemSorry, forgot the mimetype on the attachement. Fixed.It would appear that you've committed at least 2 unnatural acts here:When you created the stock buy transaction, how did you do it? Which account register were you in, what view, what exactly did you enter in each field?I entered the stock buy transaction in the "Somefund" account register. I entered the name, "Income", the number of shares (10), the value (10) and had the total calculated for me.I'm adding a screencast mp4 to show exactly how to reproduce this bug:OK, I can replicate it, and it doesn't have anything to do with the unnatural acts (transfering directly from an income account to a stock account). No screencast required, but thanks anyway.When you start a transaction in the stock account, GnuCash sets the transaction currency to the book's default, in this case SEK. Having the transfer account is in some other currency/commodity forces a double conversion with two rates: Fund->SEK and SEK->USD. GnuCash doesn't know how to handle that automatically, nor is it smart enough to recognize that it should change the base currency when the transfer account is denominated in something other than the default.The work-around is to start the transaction in the currency account, in this case Income:Someincome. In that case GnuCash sets the transaction currency to the account currency and you're prompted for a single exchange rate, USD->Fund; you can instead enter the number of shares and GnuCash will calculate the exchange rate/price. To fix up your normal book, assuming that this is based on a practical experience and not just noodling around to find bugs, adjust the price in the stock account to be in SEK, then go to SomeIncome account, enter split view, and enter the cost in USD; you'll be prompted for an exchange rate between USD and SEK. Enter the amount that will cause the accounts to balance and accept the result. Move to the FUND line and adjust that value to match if it doesn't already; you'll get another transfer dialog box to set the SEK->Fund rate. Accept the result (it should be correct already if you got the rate right in the other split) and if everything balances, hit return.This works, thank you. (Although I don't understand what "adjust the price in thestock account to be in SEK" means but the numbers come out correctly now.)I realize that this may seem unnatural, but these transactions comes from the fact that I try to account for bitcoins in gnucash where I have set up a stock as BTC. As I understand it, this is one of the only ways to handle bitcoin in gnucash right now but let me tell you, it is a lot of work compared to what it would be like to have it as a proper currency.Plus, obviously, I cannot have income accounts in btc, but, as in this case, something like USD.OK.I realize that it doesn't affect you directly yet, but the US taxing authority published regulations last Wednesday requiring that Bitcoin be treated as a commodity rather than a currency. I suspect that other tax authorities will do likewise.GnuCash derives its definition of currency from ISO-4217. GnuCash won't create a Bitcoin currency until they do.That said, I think it's reasonable for GnuCash to support barter transactions and therefore to allow income and expense accounts denominated in commodities. That would be no sooner than the next major version and perhaps would have to wait until the one after that depending on how much we get done on higher-priority items in the next 30 months.The way we handle prices, which got you into this problem in the first place, isn't really acceptable; one should be able to enter foreign stock transactions correctly from either register. I'm reopening this to track fixing that part.Thank you for taking the time to clarify the issue, I appreciate that.There are 2 ways to get an commodity noted in a foreign currency:1. Start entering your first transaction in an account of the desired currency. After saving the transaction jump to the counter account and adjust the number of shares and the rate.In this case to avoid confusion you must not enter later a transaction with an earlier date in a third currency.2. On Creation your commodity account inherits the currency of its parent account. Create a placeholder account "Assets noted in USD" with currency USD and then your fund as a subaccount of this.In this case you should avoid to move the account later in another currency tree.Eventually we shoud add this to the documents.That is very valuable information, thank you.And yes, this should be in the documentation.	11.0	id=758373	9	False	False	bugzilla	1
id=776117	REOPENED	tracker	General	1.10.x	Other Linux	Normal major		2016-12-14 23:58 UTC by	Phil Reilly	2017-01-19 12:18 UTC (	6 users	CreatedCore DumpSystem disk is a USB. When I copy from another USB drive to the USB system disk core dumps repeatedly.	CreatedCore DumpCreatedCore DumpCreatedSystem startup core dump.This core dump happens at system start.Thanks for the bug report. It would be great if you could obtain the backtraces through:$ gdb /usr/libexec/tracker-extract ./core.tracker-extract...(gdb) t a a btAnd paste those here. I have neither your same version, dependencies nor architecture, so can't get much info of the coredump files you attached.This system disk is only 16gb with less than 4gb free. It this be a problem? Can I set preferences to consider this?CreatedGDB debug infoHere is one if u need more say so.CreatedTracker GDB StartupKnown dump from startup.Thanks, that was useful. Turns out your 32bit arch triggers false positives in the brand new extraction sandbox, so the process terminates with SIGSYS due to "invalid" syscalls being performed. I only have 64bit installs around, so didn't see this.I'm attaching/pushing a patch that whitelists syscalls that might be useful there, however the bug will remain open in the hope that you can confirm you no longer get crashes with the patch, if not I'll eventually setup a 32bit VM and try there myself.Createdlibtracker-common: Whitelist *64() stat/getdents syscallsThose variants may end up called depending on architecture and otherfactors, there's no reason for those to be blacklisted.Comment onlibtracker-common: Whitelist *64() stat/getdents syscallspushed as- libtracker-common: Whitelist *64() stat/getdents syscallsIf you want me to apply a patch you're gonna have to give me some guidance since I'm a noob when it comes to patching.Createdlibtracker-common: Whitelist more syscalls used on non-x86_64 archesThese ones were spotted after compiling Tracker on i686.Will I see this in the repository soon?....also launching the gnome-photos app causes repetitive core dumps.All fixes are now in git. This IMO warrants new Tracker releaseswhich I'll do tomorrow. I guess/hope your distro of choice shouldpick up those soon.As for the gnome-photos issue, that sounds entirely unrelated.This extractor sandbox is specific to the tracker-extract daemon.I suggest you file a separate bug addressed to gnome-photos.pushed as- libtracker-common: Whitelist more syscalls used on non-x86_64 archesIt may be related since gnome-photos seems to be indexing photos with Tracker? I'll wait to see if the update takes care of it before filing a bug report.Thanks for your prompt response to this issue, I'll test as soon as I get the update & post my results on this open bug report.(In reply to Phil Reilly from)What is crashing? Is gnome-photos itself crashing? Or is it causing a tracker process to crash?FWIW 1.10.3 and 1.8.2 are already out.(In reply to Debarshi Ray from)gnome-photos not dumping.Multiple triggers causing tracker core dumps probably not limited to:1. system startup/login2. usb file transfer to system3. launching gnome-photos as it indexes user's photos& I'm guessing there are more.I'm waiting to update before openening more bug reports.CreatedCore dump after patched 1Dump after new versions installed. Dumps keep coming & had to uninstall tracker.CreatedAnother dump after new versions installed.Dump after new versions installed. Dumps keep coming & had to uninstall tracker.Createdlibtracker-common: Whitelist gettimeofday() syscallComment onlibtracker-common: Whitelist gettimeofday() syscallpushed as- libtracker-common: Whitelist gettimeofday() syscallHi Phil,I think at this point it might be better if you tried compiling Tracker yourself, as it's going to be very spotty otherwise... You might (and seem to) hit some files that use plugins I don't run into with my testing data set, as soon as one of those plugins does a syscall that is not observed in the sandbox, this would keep happening.I would recommend jhbuild for the task, it's the helper script many gnome devs use to compile (parts of) the gnome platform, it will clone/update git repos to a directory in your home folder, compile orderly and install to another directory in your home folder. You can then run manually run things from that directory, and eventually delete it altogether without affecting your base install.There's instructions to set up jhbuild at, some more specific steps after you got it working are:1) Make sure you install -devel/-dev packages for some tracker dependencies, besides the basic dependencies listed in that wiki page, those would include: libjpeg, giflib, gstreamer1, poppler-glib, totem-pl-parser, icu, upower, sqlite.If you get those right, you might be able to build only tracker, doing: $ jhbuild buildone trackerOtherwise you might just compile most of these deps from git too doing: $ jhbuild build trackerThat should greatly reduce the number of -devel packages you need installed, but would take some more time.2) Additionally, install strace, it will give us in a clearer way the same info I've been deducing from your backtraces.3) Once tracker is built, it will be easier to reinstall tracker in your system and only run the tracker-extract executable from inside the jhbuild environment, you'd do in one terminal tab: $ tracker daemon -s $ killall -15 tracker-extract ; strace -f ~/jhbuild/install/libexec/tracker-extract 2>&1 | grep SIGSYS That will restart daemons, and replace the tracker-extract process with the one you just compiled, running through strace will produce a line similar to this whenever the process terminates due to this reason:[pid 5739] --- SIGSYS {si_signo=SIGSYS, si_code=SYS_SECCOMP, si_call_addr=0x7f507b685d37, si_syscall=__NR_gettimeofday, si_arch=AUDIT_ARCH_X86_64} ---4) Paste those lines here, I'll try to fix ASAP5) you again rebuild tracker with: $ jhbuild buildone tracker6) We repeat steps 3,4 and 5 till this is all finished.7) In order to make it dead sure that everything was fixed, you can reset tracker file info and reindex doing: $ tracker reset -f /path/to/configured/folder This will make tracker reindex the given directory as per the configuration, as if it first found it.I'm sorry for this burden, but it will allow fixing any remaining issue in a much tighter loop. I fixed this last one you reported, but there could be no more issues just like there could be 10 more, and I'd rather not involve further releases and extra work on distros to fix this for good.I'm doing this on Apricity so if someone puts this build into the AUR repository I can build it from there otherwise I can't commit.I am using fedora 25 so have no easy way to do that, you can perhaps download the arch PKGBUILD file for Tracker atAnd modify the source=... line to:source=("git+")After that running makepkg should give you the packages to replace your system's, compiled from the most recent tracker-1.10 branch changes.We also got this downstream bug report with 1.10.3Createdlibtracker-common: Handle mlock*/munlock* syscallsDisallow pinning memory on RAM, but make it softly fail with EPERM.Createdlibtracker-common: Allow querying process stats/limitsModifying those is not allowed though.Thanks for the info Michael :), I'll make yet another set of releases during the weekend with the accumulated patches. Hopefully we get closer to forgetting this ever happened...pushed as- libtracker-common: Handle mlock*/munlock* syscallspushed as- libtracker-common: Allow querying process stats/limitsCarlos, did you seeOops, I didn't, thanks for pointing it out Jeremy :). I however saw a ubuntu bug report linked at the debian bug in, which seems to be the same issue you forwarded there, the patch allowing getrusage() inhere should fix it.I'll mark as dup of this one, and during the weekend I'll cherry-pick the relevant patches in all branches and make another set of releases.***has been marked as a duplicate of this bug. ***Hi Carlos, how is the new release coming along?I see that the tracker-1.10 does not have all of the fixes from the master branch yet.saw a more detailed reply by Simon.You might also be interested in his idea at(can file a separate bug report for that)There are two more syscalls I needed to whitelist for Tracker >=1.11.2 to work on my system (Fedora 26).The first one is "getpid". Here is a backtrace of it being used by the gstreamer module:Thread 23 "single" received signal SIGSYS, Bad system call.I've just released 1.10.4 and 1.8.3, together with yesterday's 1.11.3. These all contain all the latest whitelisting fixes...(In reply to Sebastian Keller from)...except this one, which is included in 1.10/1.8, but didn't make it to 1.11.3. Would be great if you could downgrade to 1.10.4 when it's packaged and test further with it :).I just noticed bugzilla ate the rest of my comment after the trace. I already added getpid to the whitelist and then Tracker got stuck on wait4 when trying to call waitpid. This happened when indexing a gzipped PS file. After adding "wait4" to the whitelist, it was able to index all files again.Thread 26 "single" received signal SIGSYS, Bad system call.Ouch :), I just pushed the wait4 fix to all 3 branches, but that unfortunately means no release is up-to-date enough for you... I'll eventually roll another unstable tarball.On the plus side, you already have the files indexed, and shouldn't be reindexed unless they change, you should be able to run 1.11.3 without a hitch now (until some new file possibly triggers these or other false positives, that is)	40.0	id=727296	12	False	True	jralls	1
id=774567	REOPENED	evince	general	3.22.x	Other Linux	Normal major	Evince Maintainers	2016-11-16 16:11 UTC by		2016-12-15 23:54 UTC (	3 users	CreatedScreenshot of the opened documentUpon opening PDF document, the zoom level is set to nan%, selecting any other exact zoom level sets -nan% (see attached screenshot). Both settings blocks viewing of the document. The fit options and automatic level, sets the zoom to 0% and display the document as expected. Additionally, the zoom in and zoom out options does not work.	I also have the same issue in Ubuntu 16.04 with the default evince from the that version's Ubuntu.Evince version is: 3.18.2When I was seeking resolution, I've wrote the following help message on evince's irc channel:Ever since I've upgraded to Ubuntu 16.04, I can't change zoom in evince. When I change percentage by hand or choose from the zoom drop-down list, the zoom field changes to "-nan%". When I chose "auto", "by width" or "by document size", the field sets to "0%" value. But any way I change, it doesn't affect document zooming anyhow, except, when the field changes to -nan%, the ducument disappears from the view completely. ctrl+{Mouse wheel}, or ctrl++, ctrl+- also don't help.I have new findings. This issue has something to do with my current monitor setup and xrandr settings. This bug appears after I run:$ xrandr --output DisplayPort-1-1 --auto --primary --output DisplayPort-1-2 --auto --right-of DisplayPort-1-1 --output DisplayPort-0 --auto --left-of DisplayPort-1-1 --output DVI-0 --auto --left-of DisplayPort-0Seems like an issue in getting the correct resolution?Can you post the info of your monitors? like dpi with height etc? that you obtaind with xrandr or other tool.Sure. The funny thing is, I remember all worked few weeks ago, before I changed the setup slightly and swapped the analog output for the fourth monitor to digital one.$ lspci | grep VGA00:01.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Trinity [Radeon HD 7660D]01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Caicos [Radeon HD 6450/7450/8450 / R5 230 OEM]02:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Park [Mobility Radeon HD 5430]$ xrandrScreen 0: minimum 320 x 200, current 5120 x 1024, maximum 16384 x 16384DisplayPort-0 disconnected (normal left inverted right x axis y axis)VGA-0 disconnected (normal left inverted right x axis y axis)DVI-0 connected 1280x1024+0+0 (normal left inverted right x axis y axis) 338mm x 270mm 1280x1024 60.02*+HDMI-2-0 connected 1280x1024+1280+0 338mm x 270mm 1280x1024 60.02*+DVI-2-1 disconnectedVGA-2-1 disconnectedDisplayPort-1-1 connected primary 1280x1024+2560+0 338mm x 270mm 1280x1024 60.02*+DisplayPort-1-2 connected 1280x1024+3840+0 338mm x 270mm 1280x1024 60.02*+DVI-1-0 disconnected$ xdpyinfoname of display: :0version number: 11.0X.Org version: 1.18.4screen #0: dimensions: 5120x1024 pixels (0x0 millimeters) resolution: -2147483648x-2147483648 dots per inch depths (7): 24, 1, 4, 8, 15, 16, 32Wow. Thanks for the hint. The bug is solved! The resolution is incorrectly recognized. To get rid of the bug and restore the correct evince zoom function one need to run$ xrandr --dpi 96Personally, I think this is not an Evince bug.I think we still need to recognize that the DPI is wrong and then assume the DPI is 96 in evince. But at least we have a workaround. Thanks(In reply to José Aliste from)I hope, this is what you need (I just ran xrandr without parameters):Screen 0: minimum 320 x 200, current 4160 x 1024, maximum 16384 x 16384HDMI-0 disconnected (normal left inverted right x axis y axis)DVI-0 disconnected (normal left inverted right x axis y axis)VGA-0 connected 1440x900+1440+0 (normal left inverted right x axis y axis) 408mm x 255mm 1440x900 59.89 + 74.98* 1280x1024 75.02 60.02 1280x960 60.00 1152x864 75.00 1024x768 75.08 70.07 60.00 832x624 74.55 800x600 75.00 60.32 56.25 640x480 75.00 60.00 720x400 70.08 VGA-1-1 connected 1280x1024+2880+0 376mm x 301mm 1280x1024 60.02*+ 75.02 1280x960 60.00 1280x800 59.81 1152x864 75.00 1024x768 75.08 70.07 60.00 832x624 74.55 800x600 72.19 75.00 60.32 56.25 640x480 75.00 72.81 66.67 60.00 720x400 70.08 HDMI-1-1 disconnectedDVI-1-0 connected primary 1440x900+0+0 408mm x 255mm 1440x900 59.89*+ 74.98 1280x1024 75.02 60.02 1280x960 60.00 1152x864 75.00 1024x768 75.08 70.07 60.00 832x624 74.55 800x600 75.00 60.32 56.25 640x480 75.00 60.00 720x400 70.08 1280x1024 (0x45) 108.000MHz +HSync +VSync h: width 1280 start 1328 end 1440 total 1688 skew 0 clock 63.98KHz v: height 1024 start 1025 end 1028 total 1066 clock 60.02Hz 1280x1024 (0x46) 135.000MHz +HSync +VSync h: width 1280 start 1296 end 1440 total 1688 skew 0 clock 79.98KHz v: height 1024 start 1025 end 1028 total 1066 clock 75.02Hz 1280x960 (0x47) 108.000MHz +HSync +VSync h: width 1280 start 1376 end 1488 total 1800 skew 0 clock 60.00KHz v: height 960 start 961 end 964 total 1000 clock 60.00Hz 1152x864 (0x49) 108.000MHz +HSync +VSync h: width 1152 start 1216 end 1344 total 1600 skew 0 clock 67.50KHz v: height 864 start 865 end 868 total 900 clock 75.00Hz 1024x768 (0x4a) 78.800MHz +HSync +VSync h: width 1024 start 1040 end 1136 total 1312 skew 0 clock 60.06KHz v: height 768 start 769 end 772 total 800 clock 75.08Hz 1024x768 (0x4b) 75.000MHz -HSync -VSync h: width 1024 start 1048 end 1184 total 1328 skew 0 clock 56.48KHz v: height 768 start 771 end 777 total 806 clock 70.07Hz 1024x768 (0x4c) 65.000MHz -HSync -VSync h: width 1024 start 1048 end 1184 total 1344 skew 0 clock 48.36KHz v: height 768 start 771 end 777 total 806 clock 60.00Hz 832x624 (0x4d) 57.284MHz -HSync -VSync h: width 832 start 864 end 928 total 1152 skew 0 clock 49.73KHz v: height 624 start 625 end 628 total 667 clock 74.55Hz 800x600 (0x4f) 49.500MHz +HSync +VSync h: width 800 start 816 end 896 total 1056 skew 0 clock 46.88KHz v: height 600 start 601 end 604 total 625 clock 75.00Hz 800x600 (0x50) 40.000MHz +HSync +VSync h: width 800 start 840 end 968 total 1056 skew 0 clock 37.88KHz v: height 600 start 601 end 605 total 628 clock 60.32Hz 800x600 (0x51) 36.000MHz +HSync +VSync h: width 800 start 824 end 896 total 1024 skew 0 clock 35.16KHz v: height 600 start 601 end 603 total 625 clock 56.25Hz 640x480 (0x52) 31.500MHz -HSync -VSync h: width 640 start 656 end 720 total 840 skew 0 clock 37.50KHz v: height 480 start 481 end 484 total 500 clock 75.00Hz 640x480 (0x55) 25.200MHz -HSync -VSync h: width 640 start 656 end 752 total 800 skew 0 clock 31.50KHz v: height 480 start 490 end 492 total 525 clock 60.00Hz 720x400 (0x56) 28.320MHz -HSync +VSync h: width 720 start 738 end 846 total 900 skew 0 clock 31.47KHz v: height 400 start 412 end 414 total 449 clock 70.08Hz 1440x900 (0x57) 106.500MHz -HSync +VSync h: width 1440 start 1520 end 1672 total 1904 skew 0 clock 55.93KHz v: height 900 start 903 end 909 total 934 clock 59.89Hz 1440x900 (0x58) 136.750MHz -HSync +VSync h: width 1440 start 1536 end 1688 total 1936 skew 0 clock 70.64KHz v: height 900 start 903 end 909 total 942 clock 74.98Hz(In reply to José Aliste from)Yes, 'xrandr --dpi 96' worked and I agree, that error checking sould be done.	8.0	id=774567	7	False	False	igoryonya	1
id=776122	REOPENED	gnome-shell	general	3.22.x	Other Linux	Normal major		2016-12-15 07:41 UTC by	Mosaab Alzoubi	2016-12-20 16:49 UTC (	2 users	CreatedMenu of Firefox shown before hand overs !This bug explained in both Redhat and Mozilla bugzillas ::==================================================1 - Install Fedora 25 workstaion and Firefox 502 - Open Firefox3 - Try any key board shortcut with Alt like :* Alt+tab for changing window* Alt+shift for changing language Any thing start with Alt ...Firefox error catching Alt before hand overs.==================================================After many tries the result is :It just found in Gnome shell !!! (Gnome traditional not!!)	Should be fixed here:Tried the patch, Doesn't fix this bug :(***has been marked as a duplicate of this bug. ***	3.0	id=776122	6	False	False	a9016009	1
id=165503	REOPENED	doxygen	general	1.4.x	Other All	Normal normal	Dimitri van Heesch	2005-01-28 13:16 UTC by	INgo Rah	2005-03-30 08:04 UTC (	0 users	Please describe the problem:Structures are not included in the group for XML output (but for HTML it is ok)/** \addtogroup TEST Testing the doc. No details *//*@{*//** This service gets the configuration of the PCM interface. */#define GET_PCM_CONFIG _IO(IOC_MAGIC, 0x05)/** Structure for PCM configuration */typedef struct{ /** PCM timeslot for the receive direction */ unsigned long nTimeslotRX; /** PCM timeslot for the transmit direction */ unsigned long nTimeslotTX;} PCM_CONFIG;/*@}*/Steps to reproduce:1. Use example above2. Generate XML output3. Look at group group__TEST.xmlActual results:PCM_CONFIG is not listed, but GET_PCM_CONFIG isExpected results:I would expect a <memberdef kind="typedef" id="group__TEST_..." prot="public" static="no"> for PCM_CONFIGDoes this happen every time?YesOther information:No	You are right. This is not correct. Note however that since it is a typedef ofan anonymous struct, it will be listed in the group with an <innerclass...></innerclass> block.Should be fixed in 1.4.2.It seems that doxygen has problems with structures in groups and typedefs of anonymous structs.Example:Only MY_STRUCT2 will be documented/** \addtogroup TEST Testing the doc. No details *//*@{*//** my simple structure . Not working */struct MY_STRUCT{ /** one entry */ int first;};/** My second simple structure. Working */typedef struct _MY_STRUCT2{ /** second entry */ int second;} MY_STRUCT2;/** My third simple structure. not Working */typedef struct{ /** second entry */ int second;} MY_STRUCT3;/*@}*/	3.0	id=165503	6	False	False	dimitri	1
id=721509	REOPENED	gucharmap	general	git master	Other All	Normal normal	gucharmap maintainers	2014-01-05 05:17 UTC by	Andika Triwidada	2017-02-20 18:17 UTC (	4 users	These files contain license with obsolete FSF postal address:gucharmap/configure.ac:# 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/Makefile.am:## 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-block-chapters-model.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-block-chapters-model.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-block-codepoint-list.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-block-codepoint-list.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-chapters-model.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-chapters-model.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-chapters-view.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-chapters-view.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-charmap.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-charmap.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-chartable.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-chartable.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-codepoint-list.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-codepoint-list.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-init.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-menus.ui: Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02110-1301gucharmap/gucharmap/gucharmap-mini-fontsel.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-mini-fontsel.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-print-operation.c: * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.gucharmap/gucharmap/gucharmap-print-operation.h:* Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.gucharmap/gucharmap/gucharmap-private.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-script-chapters-model.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-script-chapters-model.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-script-codepoint-list.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-script-codepoint-list.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-search-dialog.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-search-dialog.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-settings.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-settings.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-unicode-info.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-unicode-info.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-window.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap-window.c: "59 Temple Place, Suite 330, Boston, MA 02110-1301 USA"),gucharmap/gucharmap/gucharmap-window.h: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/gucharmap.h.in: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/main.c: * 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/gucharmap/org.gnome.Charmap.gschema.xml: Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02110-1301gucharmap/gucharmap.nsi.in:; 59 Temple Place, Suite 330, Boston, MA 02110-1301 USAgucharmap/pixmaps/Makefile.am:## 59 Temple Place, Suite 330, Boston, MA 02110-1301 USA	This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.(In reply to Daniel Mustieles from)What development version? I looked at git master now which gave me the following results, so there are still quite a few lines using the old address:$ grep -r "Temple Place" . --exclude *.po | wc -l39Current address can be seen at:This patch was done with a script that obviously didn't work properly.I've reopened the bug, and will try to fix it these days.Thanks for notifying!Should just replace the postal address with the online one as per the canonical GPL3 notice.CreatedUpdate FSF postal addressThis patch should fix this issue. I used the following command sequence:for file in $(grep -r "Temple Place" . --exclude *.po | cut -d: -f1); do sed -e 's|59 Temple Place, Suite 330, Boston, MA.*|51 Franklin Street, Fifth Floor, Boston, MA 02110-1335 USA|' -i "$file"done	5.0	id=770842	7	False	False	schumaml	1
id=665884	REOPENED	libsoup	Misc	unspecified	Other Linux	Normal normal	libsoup-maint@gnome.bugs	2011-12-09 18:46 UTC by	Sergio Villar	2014-10-03 14:08 UTC (	5 users	Currently the message headers are stored in the cache index file. The reason is easy, the code is simpler. There are some drawbacks tough:* memory usage: all the resource headers are loaded in memory _always_ even if they are never used* cache load/dump times: we need to serialize/deserialize all the message headers to store the cache index file _always_	CreatedPatchComment onPatchCool. It basically looks good. I'm assuming you've tested. One thought:Maybe you should add some padding when you initially write the file, so that, eg, if the page comes with a slightly-larger cookie the next time, you don't need to rewrite the whole thing?CreatedNew patchThis new version uses GVariant's "maybe types" to implement a 64bit padding that will be appended to the headers data when first stored on disk to prevent future full rewrites of the cached resources. It also handles the case of SoupCache not generating correctly a conditional request (due to the impossibility of reading the headers for example)Actually the patch fromis wrong as it always replaces the whole file instead of overwriting it. I have a new patch working fine, but will wait for Dan's new streaming API to upload it.(In reply to)doneCreatedSoupCache: do not store message headers on cache indexSoupMessageHeaders should not be stored in the cache index file because wedo not want all of them permanently in memory. Instead, they're now storedin the resource cached files.CreatedForgot to add another fixComment onForgot to add another fixThis doesn't get used8 bytes is not really a lot of leeway. 64 sounded a lot better.You don't need to include the padding as part of the variant, if that would help...CreatedFixed size input streamNew fixed size input stream that reads data from a base stream up to a certain number of bytes.CreatedDo not store headers on indexDo not store headers on index but attached to the resource data.So, in order to simplify the original patch a little bit and to avoid races, I decided to append the headers to the resource data instead of prepending them. This way, whenever we have to update the headers (after a revalidation) we just need to modify the tail of the file, and we do not have to deal with paddings or complete file rewrites.This also means that when reading a resource from disk, we cannot just read the whole file until EOF, but instead, stop reading when the headers data is found. We achieve that by using a new type of GFilterInputStream (attached in a different patch). I had to code it for the new block-size storage () and I found it useful for this case too.Comment onFixed size input streamHm... this is *very* similar to SoupBodyInputStream with encoding=SOUP_ENCODING_CONTENT_LENGTH. Can we get rid of the duplication?From a quick look, it seems like the only real differences are that 1) SoupFixedSizeInputStream implements GSeekable and requires its base-stream to be a GSeekable 2) SoupBodyInputStream requires its base-stream to be a SoupFilterInputStreamBut we should be able to merge those together; move your GSeekable implementation into SoupBodyInputStream, but have can_seek() be return G_IS_SEEKABLE (base_stream) && g_seekable_can_seek (G_SEEKABLE (base_stream));And then change soup_body_input_stream_new() to take just a GInputStream, and only require it to be a SoupFilterInputStream if encoding is SOUP_ENCODING_CHUNKED (which is the only time we use SoupFilterInputStream methods).Note that I did a bunch of cleanups recently (f465016..d9db072) and in particular, reorganized all the existing files to put class_init and iface_init functions *after* the method implementations so that we don't need forward declarations everywhere. ()This implementation will only work with SOUP_ENCODING_CONTENT_LENGTH. Making it work with SOUP_ENCODING_EOF too is easy; for CHUNKED, you'd have to just fall back to calling the parent class implementation though.g_input_stream_skip() is defined to have the same effect as doing a g_input_stream_read() and throwing away the result. So if you can't skip @count bytes, just skip as many as you can.should be += skipped, not count.You can just return priv->pos here, right?That case is a programmer error. do g_return_val_if_reached (FALSE).(Ah, I see you copied this from gio... well, it's wrong there.)Comment onDo not store headers on indexAnother possibility here is to leave the headers unchanged, but store the sniffed content-type as a field in the cache index. (Though, as you note, this will be fixed by the stream filter rewrites later, so maybe it's not worth it.)This leaks headers_variant doesn't it? You want to use soup_buffer_new_with_owner().This assumes that if bytes_written is non-0 then it's entry->length; but you might have to do multiple writes.Also, g_output_stream_write() will never return 0; you want "if (bytes_written == -1)" there.Also, you need to close the iostream after writing.(In reply to)Yeah sure I can try. I think I implemented it last year and just decided to use it for this case. Thx for the quick review BTW.Right.Ah OK, I was not sure about that.AbsolutelyYep, makes no sense not to do itMaybe I don't remember the details :)(In reply to)Initially the headers_variant was passed as part of the writing fixture and freed in its free method, that's why STATIC was used here. Will change it.Good point will change it, don't know why I wrongly assumed that the write was a do or die.(In reply to)Haven't taken a detailed look at this but the body stream is pollable and the GLocalFileInputStream is not, wouldn't it require a lot of changes?oh right, I always forget files aren't pollable...You'll have to override can_poll() to check the pollability of the base stream, basically just like can_seek()CreatedMake SoupBodyInputStream seekableWith this refactoring we do not need the proposed SoupFixedSizeInputStream anymoreCreatedDo not store headers on index (new version)New version using the SoupBodyInputStreamComment onDo not store headers on index (new version)Removing this from the review queue as it needs a couple of changes.Comment onMake SoupBodyInputStream seekableew. Is it really valid c90 to put that there? Anyway, you don't need safe_count anyway; just re-use count.&& priv->encoding != SOUP_ENCODING_CHUNKEDAh... I see, you did a check for CHUNKED in new()... but still, we might make SoupFilterInputStream seekable in the future, so you should explicitly check priv->encoding here.That won't work for SOUP_ENCODING_EOF. I guess the easiest thing here is probably to make that non-seekable too. (And "non-seekable" implies "non-tell()able" too, so you can simplify read and skip to only keep track of pos for CONTENT_LENGTH.)This assumes that the base stream has the same origin and length as the SoupFilterInputStream does, but that's wrong. (Eg, if the base stream is a cache file, it will have header info at the end, and so if the caller seeks to type=G_SEEK_END, offset=-10 of the filter stream, you can't just pass that type and offset to the base_stream, because you'd end up near the end of the headers rather than near the end of the data.This should work: if (!g_seekable_seek (G_SEEKABLE (priv->base_stream), position - priv->pos, G_SEEK_CUR, cancellable, error)) return FALSE; priv->pos = position;(In reply to)I am not so sure about this. In the case you mentioned (the cache file) the one creating the SoupBodyInputStream will pass a GInputStream for the local file and just the length of the cached data (without including the headers). So the seek will return the proper position. Maybe I'm forgetting about some other special case...CreatedStore sniffed Content-Type in cache indexI finally decided to add the sniffed Content-Type to the cache index. We'll remove it in the future once the cache becomes part of the stream stack. Original headers will not be modified but the sniffed content type will still be accessible through soup_request_get_content_type()CreatedDo not store headers in cache indexThis new version uses a SoupBodyInputStream to read data instead of the old SoupFixedSizeInputStream.Say the cache file has 8000 bytes of data followed by 500 bytes of headers. The cache does: stream = soup_body_input_stream_new (file_stream, SOUP_ENCODING_CONTENT_LENGTH, 8000);Now, later, I take that stream and call g_seekable_seek (G_SEEKABLE (body_input_stream), -100, G_SEEK_END, ...);The semantics of that ought to be "seek to byte 7900", right? But the current code in your patch just passes the "offset" and "type" args directly to the base_stream seek implementation, so the file stream will seek to 100 bytes before *its* end, which is byte 8400, which isn't even supposed to be visible in the SoupBodyInputStream.Similarly, though not relevant in this particular case, if you had a SoupBodyInputStream that was created to represent just bytes 587-2349 of its underlying stream (ie, you'd already read the first 587 bytes of that stream before creating the body stream; maybe because the underlying stream represents a multipart response, and you want to parse each part separately), then G_SEEK_SET would mess up too, because if the user seeked to byte 0 of the SoupBodyInputStream, you'd want to seek to byte 587 of the underlying stream, not byte 0.But a G_SEEK_CUR will always do the right thing (assuming you made sure that the end position is in-bounds). So to make it work in all cases, just always translate to G_SEEK_CUR.(In reply to)Beh true, I just was ignoring that I was passing the type directly to the inner stream, yeah you're totally right, will rework it.CreatedMake SoupBodyInputStream seekableThis new approach does only allow content-length encoded streams to be seekable.Comment onStore sniffed Content-Type in cache indexlooks good, assuming it's not obsoleted by 682112Comment onMake SoupBodyInputStream seekablegreatComment onDo not store headers in cache indexlooks right... we really need test cases for the cache thoughReview of:Landed in master: f723ab8this was accidentally left open...I was not accidentally left open, I haven't committed changes yethm, i somehow read "accepted-commit_now" as "committed"(In reply to)any reason? Are there other cache file format changes pending and we want to make all the changes at once?(In reply to)I don't remember the exact details but I think it was a mixture of not being happy with the implementation and some bugs rewriting the headers IIRC.Comment onStore sniffed Content-Type in cache indexun-acn-ing per last commentCreatedStore headers in a separate DBThe old patch had many issues because the headers were stored in the same file as the resource data. The resource data is immutable but the headers could change, so that was leading to full file rewrites which brought new issues.I decided then to try storing the headers in a separate location (losing the locality advantages) and use a sqlite3 database (as we already have a dependency on it).This approach has a performance issue because each INSERT involves a transaction, something that is slow and blocking. That's why I decided to add some intermediate storage (a couple of hash tables) which collects modifications to the database and dump them in a single transaction once we have enough.If we go with this idea, we might even move the headers retrieval/storage logic to a different object (implementing some SoupCacheHeadersStorage interface for example).CreatedRefactored headers access code in SoupCacheHeadersStorage classI decided to split the changes in two patches. This is the first one which basically adds a new interface called SoupCacheHeadersStorage and a default implementation using sqlite3.This new interface defines the methods required to access and manipulate headers information (read/write/delete/update). The SoupCache will use that interface instead of having to implement all the headers persistence logic. This allows us to remove a lot of code that is not really part of the core of an HTTP cache.CreatedDo not store headers in cache indexThis second patch just contains the required changes to remove the headers from the cache index.Review of:So... I'm not sure the sqlite db ends up being a win overall (as opposed to just storing the body and headers in separate files in the cache dir, for instance). You end up needing a lot of code to work around the problems it creates...Although, an alternate possibility to deal with the slow/blocking thing would be to do the SQL stuff in a different thread, and write out all changes right away. (You can use a GAsyncQueue to pass data from the main thread to the sqlite thread.) Then you wouldn't need the hash tables and stuff.::: libsoup/soup-cache-headers-storage-db.c@@ +165,3 @@+ filename = g_build_filename (cache_dir, "headers.db", NULL);+ EXEC_SQL_ON_ERROR_RETURN_WITH_CODE (sqlite3_open (filename, &priv->headers_db), g_free (filename), result);+ g_free (cache_dir);leaks cache_dir in the error case; you can just move the g_free(cache_dir) to before the sql@@ +193,3 @@++ if (!headers_storage->priv->headers_db)+ if (!init_headers_db (headers_storage)){}s around the inner if statement@@ +245,3 @@++ if (!priv->headers_db)+ if (!init_headers_db (SOUP_CACHE_HEADERS_STORAGE_DB (headers_storage))){}s around the inner if statement@@ +259,3 @@+ headers_variant = (GVariant *) value;++ if ((SQLITE_OK == sqlite3_bind_int (prepared_stmt, 1, entry_key)) &&if ((sqlite3_bind_int (prepared_stmt, 1, entry_key) == SQLITE_OK) &&(likewise throughout)@@ +273,3 @@+ }+ sqlite3_finalize (prepared_stmt);+ g_hash_table_remove_all (priv->pending_header_writes);as a minor optimization, you can instead do "g_hash_table_iter_remove (&iter)" at the end of each loop iteration@@ +312,3 @@+ /* Trigger the flush if there is no much activity going on (no+ * pending caching operations) and there is a reasonable+ * amount of pending operations (100 for example).100 feels like a lot... how long does it take to reach that point in an ordinary browsing session?(And this would probably need to be configurable. Eg, I eventually want to make the GProxyResolver PAC-running code use a cache, but that would only ever be downloading a single file, which would almost never change. So we'd want to flush changes right away in that case.)@@ +351,3 @@+ in a hash table indexed by the entry key (only the last+ version will be inserted in the DB), and flush them once we+ have enought data. *//* comment * should be * like this */also, typo at the end ("enought")::: libsoup/soup-cache-private.h@@ +29,3 @@ G_BEGIN_DECLS +typedef struct _SoupCacheEntry {you need to remove this from soup-cache.c tooReview of:::: libsoup/soup-cache.c@@ +30,3 @@ #endif +#include <sqlite3.h>you don't need this here any more, right?@@ +35,2 @@ #include "soup-cache.h"+#include "soup-cache-private.h"you're already including soup-cache-private a few lines down(In reply to)I am not 100% convinced either, we'll probably need some benchmark in order to know how it behaves. Anyway that's the main reason why I decided to create the interface, because we could think about different implementations to fix the issue.Looks like a good idea, but I am not sure that it will be a huge win over batching operations, because the SELECTs will still have to wait for all the INSERTs to happen, because they lock the tables in the database.Looks like another possibility is to use what sqlite3 calls temporary tables. Transactions are not automatically flushed to disk so it seems writes are faster. The temporary table would then have to be flushed to the main table before the sqlite3_close.I thought that could invalidate the iter, I'll change it.Actually it is not a lot, after 4-5 websites you get a flush. The rationale behind using a figure like 100 is that, for a cache, it is better to lose some cached resources (in the event of a crash for example) than to have to wait too much for disk writes.That's a good point, maybe we could remove that condition and check only for "is not busy".(In reply to)Or we could also use the block files infrastructure, introduced in, and use the block files to store headers information. Chromium does something like this () and looks like it works for them. I'll try something like that.***has been marked as a duplicate of this bug. ***	45.0	id=721509	11	False	False	andika	1
id=758639	REOPENED	gvfs	gdu volume monitor	1.12.x	Other Linux	Normal normal		2015-11-25 09:52 UTC by	dupingping	2015-11-26 11:59 UTC (	3 users	When virtual Box's shared folder was mounted, it shows as "none /media/sf_sharedname" at /proc/mounts.Now I patched the virtual box to add it's own entry as "sharename /media/sf_sharedname" at /proc/mounts.After this patch, the gnome-vfs does not support it correctly.It shows the shared folder as a disk volume that ejectable at the nautilus's left sidebar.	I already have the patch to commit.Did you forget to attach the patch?Yes, let me attach patch now.Createdvirtualbox shared folder supportVirtual box is already modified.It's related to the modification.I attached the patch. And I did not know how to set the status.Please understand about this point.Thanks for your bug report.I wonder what distribution are you using, because AFAIK recent distributions are using udisks2volumemonitor...I wonder why it doesn't work correctly after you patched virtualbox... what is difference?JFYI we don't care about importance field, but importance of this bug isn't really critical.Review of:What happens if we unmount the share?Could you please create the patch using "git format-patch" with some meaningful description? Please see:Also the coding style is wrong. Declarations should be at the beginning and there are also whitespace mistakes, please see:::: ggdumount.c.orig@@ +273,3 @@+ if (mount->device_file){+ g_free (mount->name);+ mount->name = g_strdup (mount->device_file);Why we can't use mount->mount_entry_name as it is used for all other cases?I'm a Ubuntu Member. So I'm using Precise(Ubuntu12.04 LTS) and Trusty(Ubuntu14.04 LTS).And I'm also a Debian Virtualbox Team member.And at the virtualbox.org, I'm a contributor.Virtual box's shared folder is automatically mounted while the system is booting.And gvfs does not detect it correctly from /proc/mounts.Current gvfs shows me /media/sf_sharedname as sf_sharedname.And it is shown as ejectable. But could not ejected.So I made the patch.And I applied to become a GNOME member.I'll be happy if you can support me for this applicant?Best Regards.P.S.It's shown critical? Oh, I think that it's not critical.I'm a beginner to this. Please understand about this point.Yes, we could not use mount->mount_entry_nameIt will be <sf_sharedname> rather than <sharedname> because It comes from the function, g_unix_mount_guess_should_display.sf_sharedname is mountpoint name. And the mountpoint name is can be duplicated.device name is only one can be identified.Thank you and best regards.Because the virtualbox does not support device node to monitor, once we un-mount the shared folder, we could not find it after un-mount.And this is mounted by virtualbox automount process while booting, it could not be un-mounted by the gdu.Best Regards.Du Pingping.And i need to remake and upload this patch for the coding style again?BTW Ubuntu Trusty should be using udisks2volumemonitor already, does it work "correctly" with udisks2volumemonitor?Sorry, but I doubt about we need special hacks for virtualbox share folders. We should be consistent in names, so we should use mount_entry_name as it is used in other cases (even if it can be duplicated).. and also if unmount works I don't see any reason why we should disable unmounting (it is expected that the mount disappears)...CreatedStyled for git and GNU C coding style.I created this patch again for git format-patch HEAD^ and GNU C coding style.Stop changing the statuses of patches.I tested it on Ubuntu 12.04 with gvfs 1.12.x.Precise uses gdu-volume-monitor still.14.04 shows it as sf_<sharename> rather than real <sharename>.When i click eject button at there, it shows me an error message said that "Unable to unmount sf_<sharename>" and "umount: /media/sf_<sharename> is not in the fstab (and you are not root)."Createdvirtualbox shared folder patch for udisk2volumemonitorIt's a udisk2volumemonitor.patch for virtualbox shared folder.Comment onvirtualbox shared folder patch for udisk2volumemonitorIt was made on gvfs git master.Will you please stop changing the statuses of patches.It's really not needed? It's really a bug when running with virtualbox 5.0.x version's addition iso.You could not check it with virtualbox latest version.Please do not change bug status either in such way...I'm reopening the bug, because the _can_unmount flag might be determined in better way probably. I thought that it is possible to unmount the mount successfully from your previous comments, but it seems error is returned as per your recent comments. I don't want to add hacks for specific mounts, such as virtualbox, but we might want to use g_unix_mount_point_is_user_mountable to set _can_unmount flag for all mounts. It seems this function might do exactly what we need, but I have never tried. However it should be carefully tested to be sure we don't break anything...I'm changing bug title consequently, because virtualbox folder IS supported (i.e. you can see it in Nautilus and you might browse files)...As I said before, I would like to be consistent with other mounts. So I do not think it is bug that mount is named as "sf_sharename", device name might be better in this case, but it might be nonsense for other mounts... If you really think that the name should be different, then you should modify g_unix_mount_point_guess_name to be sure that same name is used also on other places. But I doubt about that the patch will be accepted.Review of:As per previous comment.	21.0	id=665884	35	False	False	danw	1
id=748717	REOPENED	gnome-characters	general	3.16.x	Other Linux	Normal normal	GNOME Characters maintainer(s)	2015-04-30 17:15 UTC by	Allan Day	2016-02-10 10:47 UTC (	1 user	The popover for selecting a font to filter by works great, but there are some visual issues that mean it is a bit untidy. * The list should have the same width as the search box, so they are aligned. * The list should have a border. Ideally, there should be separators between each line. * There needs to be more horizontal padding around the search box, so it isn't so close to the edges of the popover.	Thanks, that should be fixed now:CreatedscreenshotSome of these issues weren't fixed when I tested with GNOME Continuous yesterday. See the attached screenshot: * The search bar has a different width from the list. * Not enough padding on the left and right of the list. * Not enough padding around the row labels, and the rows aren't tall enough. feels quite squashed. * "Filter by font" doesn't look like a heading.Changes I'd suggest to fix this: * Add 12px left and right margin to menu-grid. * Give the search box the same width as the list below. * Increase the padding around the labels in each row of the list (maybe to 6px). This has the desirable effect of increasing the height of the rows. * Use header capitalization for "filter by font" (so it reads "Filter by Font"), and make it bold.Reopening.Thanks for reporting that (and the suggestions). I've pushed a fix:The padding issue seems to be a regression after recent CSS name changes in GTK+, to which I have adjusted the code.Looks much better - thanks Daiki!	5.0	id=597473	17	False	False	lakhil	1
id=597473	REOPENED	evolution	Mailer	2.26.x (obsolete)	Other Linux	Normal normal		2009-10-05 20:45 UTC by		2011-08-22 18:01 UTC (	6 users	Createdmessage which exhibits the bugMy email address is. My brother's is. Whenever IReply-All to a message of his, evolution always puts "To: Dave Hansen<>" and not "To: Mike Hansen <>". * Plain 'Reply' seems to work OK.* There are no Reply-To: headers. Just a normal From:* This only seems to happen with mails from this one person.* Other mail clients do not exhibit this behaviorIs there some heuristic that looks for similar email addresses in thereply-to-all code that could perhaps be getting our very similar emailaddresses confused?	Thanks for the bug report and test data. Very appreciated. I just tried with your message and "reply to all" works fine on 2.28.0, the To: field in a composer is filled with Mike, not Dave, for me.One thing I can think of: do you have set your brother's email account in evolution too, or only yours? Evolution is searching for the configured account, which belongs to the person from addresses, and it uses that account for From field, and removes the email from the list for To/Cc fields. So what is your From here?(In reply to)Heh. I do have my brother's mail account set up in evolution. It's way down in the list so I don't think about it much, but it is there. Is evolution confused about the account which is replying somehow?Yup, it seems it's confused because of that. I guess. Just one more clarification, your brother's account isn't set as a default account, is it?No,is the primary account.Createdproposed evo patchfor evolution;when the To: is not filled due some reasons, try to use the Reply-to/From first, is filled. I tried with this patch to do the opposite too, (I exchanged From: and To:) and it seems to work fine.Created commitin evo master (2.29.1+)I don't know if this is related to, but:Since 2.28, as I have 3 email address accounts in evolution, when someone writes to my 3rd one, and I hit reply, it tries to use my first one no matter what.In other words, I'm having to manually change the account/address every time I reply to an email.What can I do? I upgraded to 2.28.2 and the problem still exists.This one is about reply-to-all, for the reply itself it's ratherI had to revert this commit because it breaks a more important use case: clicking "Reply All" on a message in your Sent folder which you yourself wrote now includes your own email address in the recipients list, which is a regression from 2.28.(In reply to)Hrm, do you have any idea about better approach, to cover also Dave's case, where he has configured both sender's and recipient's addresses in evolution, but still wants to be able to reply to all with them? I do not have any, right now.I don't offhand but I haven't investigated this deeply. The case inshould be a regression test for whatever solution we come up with. Given, this is a rare corner case in comparison.What about check for duplicates and also do not add the address which will be used in a "From" of the new email? That should cover your case with a sent folder as well, shouldn't it?***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I just wanted to chime in here as an un-credentialed user about my own experience with this.In our company I "watch" the sales inbox, but most of the time I don't reply to anything there because we have a person who does that primarily. If that person cc's my own inbox (bdugan) in a message, I take that as a request for me to say something. If I simply "reply", it will go back to the sales inbox correctly. But if I reply-all it doesn't go to the sales inbox, or to my inbox, at all (presumably because I have both those accounts in my evolution setup).What I would prefer is for Evolution to be less clever about this: Even though I am monitoring an account, when I reply-all I would still like that account to receive messages when its in the original list of addresses.I don't even mind getting a copy to myself when I reply-all. Its a little redundant, but it would be a simple affirmation that all the addresses were replied to, including the sender's.	15.0	id=748717	5	False	False	dueno	1
id=683578	REOPENED	gnome-control-center	Sound	3.4.x	Other Linux	Normal normal	Control center sound maintainer(s)	2012-09-07 14:35 UTC by	Fabio Sasso	2015-02-14 10:35 UTC (	1 user	if the application name is very LONG the slider will be SHORT and viceversa.image:	It's not fixed. Fabio, in the future please attach screenshots to the bugs.I know that is not fixed.I've attacked a screenshot of the bug 3 years ago but now I've deleted my imageshack account so there is no need for this bugreport to remain opened.ps: I also don't remember what problem I've reported.	2.0	id=217806	18	True	True	fejj	1
id=217806	REOPENED	evolution	Mailer	unspecified	Other All	Normal normal		2001-12-21 20:00 UTC by	Dan Winship	2008-12-23 06:24 UTC (	2 users	Someone reported gettig mail from their sysadmin because of thehuge amount of pop traffic they were generating. He had "keep onserver" and "check for new messages every 5 minutes".If the server doesn't support UIDL, this will download all messageheaders every 5 minutes. This makes evolution a bad netizen in thiscase.A fix: for non-UIDL servers, keep track of the size of each messageon the server (this is easy to get). Next time you connect, find thefirst message that doesn't have the same size as it did last time.Call it message N. MD5sum message N-1. If it matches the old md5sum,assume that messages 1 to N-1 are unchanged, and messages N andhigher are new, so download them.(If the md5sum for message N-1 *doesn't* match, we have to fall backto the old behavior.)	ah, this is a good idea...ah, this is a good idea...we can't do this, some pop servers change the headers (ie, adding aStatus: header) after the first download.the user should just change the auto-check to 10 minutes or something.so then we have to download the full headers twice instead of once.it's still better than "always".also, do you know that there are pop servers that both a) don't support uidl AND b) frob Status headers?if so, that would imply that those users would have each messagedownloaded exactly twice, which is not a complaint I've heard.yes, and it's a complaint I've heard. The "plan" is to ignore Status:lines in the md5summing code.IMHO these people shouldn't be using keep on server, since it can't bedone properly.Agreed. That's part of why I'd wanted to move the keep-on-serverhandling entirely into the POP provider. Although I guess it'salready getting the param in its URL, so it could just check thatand return an exception to camel_service_connect or whatever ifkeep_on_server was set and it doesn't do UIDL.blah, guess we shouldn't ignore this.Is this a duplicate of 32469?Marking as duplicate tentatively. Please reopen if otherwise.*** This bug has been marked as a duplicate of***not a dup	10.0	id=768215	11	False	False	mclasen	1
id=727433	REOPENED	gnome-contacts	general	3.10.x	Other Linux	Normal normal	GNOME Contacts maintainer(s)	2014-04-01 12:59 UTC by	Allan Day	2014-04-07 21:13 UTC (	2 users	I just observed this in 3.10, and it has also been reported in(which has a trace).	doesn’t have a backtrace — all it has is a debug log, which is useful for debugging the linking problems, but not the crash.If you can reproduce the crash, could you please get a backtrace from gdb? Thanks!I'm unable to reproduce right now, for some reason. I'll keep my eyes open for this though.(In reply to)Sure. If you manage to reproduce it, please re-open this bug report.I know for sure it happens. I'll close when I'm sure.I better keep it open	4.0	id=772221	11	False	False	piotrdrag	1
id=761943	REOPENED	GStreamer	gst-plugins-base	git master	Other All	Normal normal	GStreamer Maintainers	2016-02-12 14:15 UTC by	Håvard Graff (hgr)	2016-05-16 08:19 UTC (	4 users	CreatedpatchA very common pipeline is feeding an encoder inheriting fromGstAudioEncoder into a payloader inheriting from GstRtpBasePayload.If this is the case, the rtp-timestamp will, if perfect_rtptime is TRUE,reflect the amount of bytes in each packet, and not (like it should)reflect the timestamp of the packets in the clock-rate domain.Example:20ms AAC packets with clock-rate of 90000, should have the rtp-timestampincrementing with 90000 * 20 / 1000 = 1800.Currently, because perfect_rtptime is default TRUE, the AAC-packetswill be incrementing with the buffer-size of the packets, which istypically 64000 * 20 / 1000 = 1280.In the case that bitrate and clock-rate are the same (like with ALAW andMULAW) it will work by chance, which is probably why it has not beendiscovered earlier.	Wim, any opinion?perfect-rtptime=TRUE seems wrong to me as default.Increasing by the buffer size is a bug here.. it should increase by the number of samples.. This sounds like a bug in the payloader.Createdrtpmpeg4pay: Don't produce timestamps based on byte countPerfect RTP time is only used for payloaders that support it, they do that bygiving the sample count in GST_BUFFER_OFFSET, rtpmp4gpay was just putting the byte count in there, explaining the effect your seeing!The GST_BUFFER_OFFSET of output buffers returned to GstRtpBasePayloadshould reflect the number of "samples" in the unit of the RTP clock in thisbuffer. If this is not true, then it shouldn't be set.Createdrtpmp4gpay: Don't produce timestamps based on byte countThe GST_BUFFER_OFFSET of output buffers returned to GstRtpBasePayloadshould reflect the number of "samples" in the unit of the RTP clock in thisbuffer. If this is not true, then it shouldn't be set.Fix committed to rtpmp4gpay, I think all of the other payloaders have the right behaviour.commitAuthor: Olivier Crête <>Date: Sun May 15 12:16:23 2016 +0200 rtpmp4gpay: Don't produce timestamps based on byte count The GST_BUFFER_OFFSET of output buffers returned to GstRtpBasePayload should reflect the number of "samples" in the unit of the RTP clock in this buffer. If this is not true, then it shouldn't be set.The reported issue did not involve rtpmp4gpay in any shape or form, but the fact the "perfect-rtptime" does not consider the clock-rate at all, making it completely useless IMHO. My point in the initial description was that this works "by accident" for any payloadtype that happens to have clock-rate == samplerate, but the whole concept is flawed and should be removed. (IMHO) :)For most audio codecs, it is explicitly defined that clock-rate=sample-rate, for those where it isn't, there is sometimes a direct mapping that can be obtained. Do you have any pipeline where it produces the wrong result? In theory, the code should do nothing if the subclass doesn't set GST_BUFFET_OFFSET() on the output buffer and it only does that on fixed bitrate codecs right now (those that use GstRtpBaseAudioPayload).	7.0	id=758639	23	False	True	dupingping86	1
id=260995	REOPENED	evolution	Mailer	2.28.x (obsolete)	Other All	Normal normal		2004-07-01 18:17 UTC by	Dagmar d'Surreal	2012-02-10 17:04 UTC (	9 users	Description of Problem:If an email has a Newsgroups: header in it (as isthe case with some mailing lists, in particularBeyond Linux From Scratch when someone posts tothe NNTP server and the post is then relayed outto the mailing list) when one clicks Reply for the_email_ Evolution will attempt to post an NNTPreply to an mbox: which just isn't going to work.Steps to reproduce the problem:1. Email yourself something with an emailcontaining the Newsgroups: header.2. Select it in the message list pane for yourinbox and try to reply to it.3. That's all.Actual Results:Instead of the email having a To: field, it willhave the Post-To: button with something like"mbox:/home/dagmar/.evolution/mail/local/blfs.support"as the value.Expected Results:It should attempt to reply to the sender.How often does this happen?All the time as far as I can tell.Additional Information:I'm currently recompiling 1.5.9.2 with--enable-nntp=no to make it explicit that itshouldn't have any NNTP support. I didn't specifyeither way at all for this compile, and theconfigure script help appears to indicate thedefault is to not enable it, so I would think itwouldn't even try to do this.	***has been marked as a duplicate of this bug. ***the way reply works doesn't depend on what folder type the messagelives in (in fact it can't depend on that because the folder types areall abstract so we can't tell the difference between nntp folders vsimap vs mbox vs maildir, etc)no idea how to solve this...says, emptying the Post-To: entry and readding To: would bea workaround. However, that doesn't work, this error alert box isdisplayed:"Cannot send message: no recipients defined.."retargetting from very ancient 2.1 milestones to just ancient 2.3 milestones.it just sucks to click several target milestone values.sorry for the noise.***has been marked as a duplicate of this bug. ***Please seefor some details, examples and discussion.*has anscreenshot, to see the result.*offers some details how to reproduce this issue with the snippet given in.Possible solution (see):There is a filter to filter on source-account. Use this. If the source account is not a NNTP account, we never ever should post the reply to the group -- unless specifically requested by "Post Reply".Inheriting Cc's from that duplicate, setting Version properly.Adding partha to Cc as well. Setting usability keyword.Vardhan: If not 2.5, then definitely 2.7 later, once it is available as a Target Milestone. This is not Future.Still happens in evolution 2.26.3. The value of the Post-To field creates strange folders that cannot be deleted as described in.In 2.28.x the situation is a little better. There is no Post-To and the To field is no longer greyed out, so one can manually add recipients.For more details about the current situation please take a look at my report in Red Hat bz:This is a violation of RFC 2076:"Followup-To:...In e-mail, this header may occur in a message which is sent to both e-mail and Usenet News, to show where follow-up in Usenet news is wanted. The header does not say anything about where follow-up in e-mail is to be sent."(In reply to)From what I understand this bug report it is fixed in actual stable, thus I'm closing this. Feel free to reopen if I misunderstood it. Thanks.Milan, it is not fixed in 2.28.2: Although the mail has a valid Reply-To, the To: field is empty when I choose reply. When I choose "Reply to all" I get the mailing list in the To: field but not the sender in CC as one would expect.To summarize:1. The nntp header should not make the mail being handled differently, this means that2. "Reply" should reply to Reply-To: and3. "Reply to all" should Reply to Reply-To: and to From: directly.Please reopen, I don't have sufficient privileges.OK, I firstly thought that empty To is a new thing, but thinking of it now you've right, it can be dealt with it in this bug report.	12.0	id=761943	9	False	False	havard.graff	1
id=770842	REOPENED	GIMP	General	2.8.18	Other OpenBSD	Normal normal	GIMP Bugs	2016-09-04 09:30 UTC by	Giovanni Bechis	2017-02-18 11:07 UTC (	0 users	CreatedGuard against printf("%s", NULL)On exit and on the open dialog printf("%s", ..) could have a NULL parameter.Attached patch. Giovanni	This patch protects against the identifier quark being 0, how can thishappen at all? Seems like this is safety against a bug happeningsomewhere else.Did this actually happen to you and did you figure why?Giovanni, can you answer the question in?It happens to me as well, I will try to debug it asap. GiovanniDid you figure out why this happens?Giovanni, any news?It seems to have disappeared after upgrading to some gtk+2 version, I am running with gtk+2.24.31 and there is no more warning. GiovanniThanks for checking!I was wrong, sorry.The warning is still there and us due to at least a glib function:	8.0	id=727433	10	False	False	allanpday	1
id=736495	REOPENED	gvfs	mtp backend	git master	Other Linux	Normal normal	Philip Langdale	2014-09-11 18:20 UTC by	Philip Langdale	2016-04-18 14:52 UTC (	3 users	When I originally verified Android's support for SendObject with > 4GB files on a Nexus 4, it seemed to work fine, but i've recently tested with a Nexus 7 and a Nexus 5 (Android 4.4) and it's significantly slower than for < 4GB files.On the Nexus 7, I see large files are sent at about 50% of the rate of a small file, and on the Nexus 5 it's 99.99% slower (yes, really - 20Kbps vs 20MBps).I don't know if this is a bug in Android 4.4 or in the hardware - my original Nexus 4 test was on Android 4.3 and I'm not in a position to reproduce it.So, my thought is simply to not use SendObject on Android. The Android direct I/O extensions allow file transfers to be done as normal file I/O and I've verified that the performance here is identical for large and small files (direct I/O is more CPU intensive but can still hit peak transfer rates).It doesn't seem worth trying to detect more specifically than that.	CreatedDon't use SendObject for large files if Direct I/O is availableReview of:Looks good, although I'm not in a position to verify the speeds.Hmm. I did more testing - both the Nexus 7 and the Nexus 4 (I managed to clear out enough space) seem to be able to transfer just fine - so this is looking like a Nexus 5 specific problem, so I should try and come up with a Nexus 5 specific solution. That will be interesting, given that the USB IDs are identical for all three devices...Hmm, any chance it's something particular with your device? It seems a bit nasty to start putting in workarounds for particular devices...I'm going to try and find someone with another Nexus 5 to try with, but I'd be surprised if it was device specific. The fact that it's linked to large files specifically means it's clearly software related - and I'm not sure how that could be device specific. But we'll see.I have two Android 4.4 devices and both seem to be about the same speed when using the extensions vs SendObject. However, the one device seems rather flaky using SendObject for large files so maybe it's a good idea to use the Android extensions for large files...I've finally had a chance to check with a different Nexus 5 and the behaviour is identical, so I'm pretty confident that this is Nexus 5 specific - though I couldn't tell you why.Ross, can you tell me what model(s) you tested with and what OS flavour they were running? (Stock, CyanogenMod, Samsung craziness, etc)? I'd like to just turn this on for all (google mtp stack) Android devices but I did see somewhat lower transfer rates on the Nexus 4 and 7, so I don't want to unnecessarily penalize anyone.The first device I tested was a iFive X3 tablet running a stock version of Android 4.4.2. Both methods seemed pretty similar speed-wise.The second device I tested was a Huawei Ascend G300 running CyanogenMod 11.0, based on Android 4.4.2. Both methods seemed pretty similar speed-wise, but using SendObject for > 4GB files did not work properly (it worked fine using the Android extensions).Good to know.Another related thought. Using Direct I/O has the additional advantages of allowing users to do other operations on the device (such as browsing around in Nautilus) and cancelling the file transfer. This is possible because the transfer is broken down into the small SendPartialObject calls which can be interleaved, and when you cancel, it just stops making the calls.SendObject (and GetObject) block the device completely for the duration, and cancelling them doesn't cancel them on the device, so it stays blocked until they complete (without visual feedback)(In reply to)Yes, that's a good point.You're probably hitting. With that patch applied, cancelling with SendObject works properly, the cancellation stops the transfer and I can immediately start transferring something else.Interestingly, I discovered that downloading files from the device to windows is super slow as well. I assume the windows mtp client code uses GetObject too, so that must mean there's a 'right way' and a 'wrong way' to use it, and we happen to use the right way. From that, one might conclude there's a right way to use SendObject as well, but obviously, we can't see the windows source to spot the differences.This patch actually seems necessary for uploading files larger than 4 GB to my ASUS TF701T (stock Asus ROM; Android 4.4.2).Initially, it looked like the SendObject approach works as well, but it turned out that this is due to libmtp 1.1.6 not signalling > 4 GB size properly (so it actually transferred only 3.4 GB of 7.2 GB file). With libmtp 1.1.8, SendObjectInfo fails immediately, same as when trying to transfer that file from Windows.Regarding the differences in Windows mtp client, perhaps those could be found by comparing USB traces during a large file transfer?Rok, does GetObject work on your device for large files?At this point, I'm feeling comfortable pushing this change - we're seeing enough bad behaviour with SendObject that it's reasonable to want to avoid it where possible. But I do want to get some sense about whether we need a matching change for GetObject.Yeah, GetObject does seem to work; I can download a large file from tablet without a problem.Actually, it seems I need to take a closer look at my problems with SendObject, because they do not seem to be entirely consistent between linux, my Windows VM and Windows laptop... Will check the timings for both download and upload while I am at it.Change pushed as is. If we need to expand usage of Direct I/O, we can down the line.I've now had a chance to test with Lollipop and it looks like they've fixed it. Not sure if we should react to that or not.The new Marshmallow devices (5x and 6p) definitely have this fixed. I don't have a nexus 5 or nexus 6 any more to check if marshallow is fixed on them. There is no way to detect versions at the mtp level, so we have to make a global decision on which path to use...CreatedUse a gsetting to control the workaroundSo, it seems like a gsetting toggle is the only way to accommodate devices with and without the bug. Neither MTP nor USB offer a way to detect the android version on the device.Ondrej, can you take a look at this.CreatedUse a gsetting to control the workaround v2Forgot to include the schema file in the first diffReview of:It will never be perfect and truly I don't like this approach at all. How many people is affected by this bug (i.e. how many people use files bigger than 4GB over MTP and have some of the problematic devices)? And how many people do you expect will use this gsettings option? I don't think this apply on many people. I think we have to choose one preferred solution, which works on the most devices (even though it is for example slower)...AFAIK libmtp has a database for devices and it uses different hacks for different devices. So I think this should be handled by the libmtp library itself, not by the clients of the libmtp library...I haven't found any way to distinguish the devices. The USB vid and pid are the same for all nexus devices (although the vendor/product strings are different) and the mtp level info is the same (always says android 1.0). So there's no way to know what version of android is installed, except in so far as we know what the oldest possible version is (based on what was on the phone when it was released).	22.0	id=683578	7	False	False	bugzilla	1
id=694325	REOPENED	gnome-control-center	general	unspecified	Other Linux	Normal normal	Control-Center Maintainers	2013-02-21 00:08 UTC by	William Jon McCann	2014-08-15 15:14 UTC (	5 users	So we can do nice resizes and stuff.	Createdshell: Use GdStack for switching panelsThis was a bug in gd-header-bar, fixed in libgd master.Pushed to gnome-3-8 and masterpushed as- shell: Use GdStack for switching panelsReopening, there's other places where we should be using GdStack.in 3.10, you should even be using GtkStack(In reply to)We are now. I've retitled the bug to match the new purpose of the bug. We would need clearer guidelines as to what parts of the UI should have a transition when switching content.Createdcc-editable-entry: use GtkStack instead of GtkNotebookIt also fixes following warnings:(gnome-control-center:32638): Gtk-WARNING **: GtkEntry 0x28bcef0 is mapped but not child_visible(gnome-control-center:32638): Gtk-WARNING **: GtkEntry 0x28bcef0 is mapped but visible=1 child_visible=0 parent GtkNotebook 0x2b86600 mapped=1Review of:::: shell/cc-editable-entry.c@@ +610,3 @@ /* Entry */ priv->entry = (GtkEntry*)gtk_entry_new ();+ gtk_container_add (GTK_CONTAINER (priv->stack), GTK_WIDGET (priv->entry));I'd rather you used gtk_stack_add_named(), and used gtk_stack_set_visible_child_name() to switch between stack children.Createdcc-editable-entry: use GtkStack instead of GtkNotebookThanks for the review. Named children are used now. In additional the mechanism of setting label padding had to be changed, because noneditable widget has wrong padding (size-allocate signal was not called on button).Createdum-editable-combo: use GtkStack instead of GtkNotebookAlso similar patch for um-editable-combo:The mechanism of setting label padding had to be changed consequently. It fixes following warnings:(gnome-control-center:32638): Gtk-WARNING **: GtkComboBox 0x28bcef0 is mapped but not child_visible(gnome-control-center:32638): Gtk-WARNING **: GtkComboBoy 0x28bcef0 is mapped but visible=1 child_visible=0 parent GtkNotebook 0x2b86600 mapped=1 The ugly hack to catch when combo is losing focus had to be also removed and notify::popup-shown is used instead. It fixes when GtkComboBox is wrongly shown instead of GtkButton due to escape is pressed or active item is selected.Review of:::: shell/cc-editable-entry.c@@ +514,3 @@ e->priv->in_stop_editing = TRUE;+ gtk_stack_set_visible_child_name (e->priv->stack, PAGE_BUTTON);+ gtk_widget_grab_focus (GTK_WIDGET (e->priv->button));Is grabbing the focus necessary here?@@ +525,3 @@ gtk_entry_set_text (e->priv->entry, cc_editable_entry_get_text (e));+ gtk_stack_set_visible_child_name (e->priv->stack, PAGE_BUTTON);+ gtk_widget_grab_focus (GTK_WIDGET (e->priv->button));Ditto.Review of:Does using the keyboard to edit the drop-down still work?With the GtkNotebook you can:- tab to the button- press the button using space- press escape or arrows and enter to choose a new entry- it turns back into a button after tabbing away::: panels/user-accounts/um-editable-combo.c@@ +307,3 @@ gtk_combo_box_get_active (combo->priv->combo));+ gtk_stack_set_visible_child_name (combo->priv->stack, PAGE_BUTTON);+ gtk_widget_grab_focus (GTK_WIDGET (combo->priv->button));Why do we need to grab the focus for the button again?@@ +318,3 @@ um_editable_combo_get_active (combo));+ gtk_stack_set_visible_child_name (combo->priv->stack, PAGE_BUTTON);+ gtk_widget_grab_focus (GTK_WIDGET (combo->priv->button));Ditto.(In reply to)Grabbing the focus is necessary to have same behavioral as before (as other widgets). The focus is lost when the GtkComboBox/GtkEntry is shown and escape/enter is pressed, but the GtkButton should have the focus instead. But I see the problem, with every gtk_combo_box_set_active_iter() etc. it grabs the focus which is wrong :-/ I can grab it only if gtk_widget_has_focus(), or do you have better idea how to fix it?(In reply to)Yes, it works.(In reply to)Adding a gtk_widget_has_focus() is fine by me.Great.Createdcc-editable-entry: use GtkStack instead of GtkNotebookCheck gtk_widget_has_focus() before grabbing it.Createdum-editable-combo: use GtkStack instead of GtkNotebookCheck focus before grabbing using new function...Review of:Looks good.Review of:Looks good otherwise.::: panels/user-accounts/um-editable-combo.c@@ +310,3 @@+ widget = gtk_window_get_focus (window);+ if (widget)+ {On the same line as the conditional.Comment oncc-editable-entry: use GtkStack instead of GtkNotebookcommitComment onum-editable-combo: use GtkStack instead of GtkNotebookcommitThanks for the reviews :-)Createdcc-editable-button: use GtkStack instead of GtkNotebookReview of:Looks good.Comment oncc-editable-button: use GtkStack instead of GtkNotebookThanks for the review :-)commit	24.0	id=260995	24	False	False	gerardo	1
id=774889	REOPENED	GStreamer	gst-plugins-good	git master	Other Linux	Normal normal	GStreamer Maintainers	2016-11-23 02:18 UTC by	Olivier Crête	2016-11-23 14:18 UTC (	0 users	- There are no unit tests- It doesn't do the base class- It's a format no one uses	After looking at the code, I think we should just delete it, seefor patch.	1.0	id=736495	15	False	False	gnomebugs.philipl	1
id=518315	REOPENED	Glom	data mode	1.6.x	Other Linux	Normal normal	Murray Cumming	2008-02-23 22:06 UTC by	Göran	2012-03-06 09:58 UTC (	2 users	glom 1.6.8ubuntu 7.10- copy/paste doesn't workdeveloper or operatorI have copied some text from another application.I click in text field in Detailview and try to paste the text with ctrl+v, the meny option and mouse middle button.The application I copied from is still open.Nothing is Pasted.If I instead paste in a *.txt document, the text is pasted so it works with other applications and the copy part has worked.Also I: as developerDeveloper/FieldsI highlight a text field and click open.Default formatingActivate Custom Choice ListClick +AddI write a word, 2click and Copy it and then hit Enter.Click +Add and I try to Paste in all the different ways as above but it doesn't paste anything.Also II: as developerDetailviewI click Add to add a new Post.I start to fill out different fields.I click on the back arrow to go to my Post before this one.I 3click to highlight all the text ina textfield.ctrl+cClick on the Forward arrow to go back to my new Post.I click in a text field and then ctrl+v, nothing gets pasted.I have tried using the menues or the middle button on the mouse but it doesn't work./Göran	I tested this with some text copied from gedit and then pasted into a description field in a Glom system created from the Music Collection example. It worked fine for me.Could you please try this with gedit?As long as the text is highlighted I can get it pasted with the middle mouse button. If it's not highlighted it doesn't work.ctrl+c and ctrl+v or the meny options doesn't work at all, if it's highlighted or not.It doesn't work between fields either.This problem with ctrl+c and ctrl+v not working in/between all applications (it works here in firefox) I have noticed before. Sometimes middle button works but not all the time. I don't know if this is a thing with my installation or as I thought before was how Ubuntu works.I can't reproduce this so there's not much I can do. Sorry. If anyone else has the same problem in future, please add a comment here.Are you using a "clipboard manager" such as klipper?No nothing like that.I do have the same problem. I think the problem is that the ctrl+c and ctrl+v commands are used by the accelerators from the UI manager. I temporarily removed the cut, copy and paste actions in bakery, and copy+pasting in entries worked again. Does glom actually use these actions?No, but it should, at least for doing copy/paste in the entries, but I don't know how to make them do that.***has been marked as a duplicate of this bug. ***Retitling because I believe that copy/pasting generally works, though you need to use the context menu. It's just that ctrl-c and ctrl-v don't work.Note that ctrl-c and ctrl-v work in /glom/utility_widgets/test_flowtable so this is not a general problem with the FlowTable widget used in the Details view.Note also that this is a problem in both the list view (in the treeview) and the details view (in the entry widgets in the FlowTable). It does seem to work in the various modal dialogs that can be opened via the Developer menu.(In reply to)As a GtkEntry is a GtkEditable, calling gtk_editable_copy_clipboard() (and the paste and cut variants) on the entry should work. It should be possible to use gtk_window_get_focus() to get the currently-focussed widget inside the handlers for the clipboard actions, then perform the requested action if the widget is a GtkEditable.(In reply to)Accelerator groups, such as the one created by GtkUIManager in the main window, are specific to a GtkWindow. The behaviour described in this bug seems to occur because the cut, copy and paste accelerators are swallowed by the main window before reaching the FlowTable.This is not a problem for a dialog, which does not have the GtkUIManager containing the actions.I guess that could be done, but I am surprised that this is necessary. You might try adding a GtkEntry or two to gtkmm-documentation/examples/book/menus_and_toolbars to see if it has the same problem.Createdpreliminary fix(In reply to)This approach worked, as can be tested with the attached preliminary patch. It needs a little bit of cleanup before it should get merged.OK, I will work on that next, then come back to this patch and tidy it up.Indeed, it seems that this is expected behaviour, as the following modification to the menus_and_toolbars gtkmm-documentation example acts in the same way, swallowing the keybindings for clipboard actions:diff --git a/examples/book/menus_and_toolbars/examplewindow.cc b/examples/book/menus_and_toolbars/examplewindow.ccindex 6b389de..14affd5 100644--- a/examples/book/menus_and_toolbars/examplewindow.cc+++ b/examples/book/menus_and_toolbars/examplewindow.cc@@ -103,6 +103,9 @@ ExampleWindow::ExampleWindow() //Add the MenuBar to the window: m_Box.pack_start(*pToolbar, Gtk::PACK_SHRINK); + Gtk::Entry *entry = manage(new Gtk::Entry());+ m_Box.pack_start(*entry);+ show_all_children(); }Review of:Just some comments about stuff that you probably already know.::: glom/bakery/app_withdoc_gtk.cc@@ -569,1 +569,5 @@ +void App_WithDoc_Gtk::on_edit_copy_activate()+{+ const Gtk::Widget* widget = this->get_focus();+ if (!widget)No space before the (, please.@@ -570,0 +570,7 @@+void App_WithDoc_Gtk::on_edit_copy_activate()+{+ const Gtk::Widget* widget = this->get_focus();... 4 more ...C++ should be fine here. Put the * next to the type, please.Please do clean up that patch and push it to master and glom-1-20, even if it's just a temporary solution.But I'm still a little surprised and I wonder that I have only encountered this problem in glom and regexxer, which both use gtkmm. Could you try a C test case, please?(In reply to)gedit would seem to be a good test case, and the developers took a similar approach to the clipboard actions:Epiphany, likewise:regexxer does a very similar thing too:I do not think that a separate test case is necessary, given the examples above. I will work on tidying up the patch according to the review comments in.Createdtidied patch to add simple clipboad handlersThanks.But other menu item signal handlers there have an on_menu*() prefix. Please change that and then commit to both branches.Comment ontidied patch to add simple clipboad handlersModified patch pushed to master and glom-1-20 branches as commits c3a42416dbbe0b83b65ab4974af909cd72fc7a6f and 1539ae43a1a7523fe7d747f5bfa5393cd454ce5c.The end result was unnecessarily strange. I fixed it:However, it still did not work for GtkTextViews (used for multi-line fields such as comments). This commit fixes that:It already worked for GtkTreeView (used for related records).We still need to enable/disable the paste menu depending on whether anything suitable is in the clipboard, so I will keep this bug open until that is fixed.We should also disable cut and copy if no text is selected. This is what gedit does.	21.0	id=694325	26	False	False	bugzilla	1
id=772221	REOPENED	glib	general	unspecified	Other Linux	Normal normal		2016-09-30 03:48 UTC by	Piotr Drąg	2016-10-24 18:36 UTC (	3 users	CreatedUse Unicode in translatable stringsAttached patch converts ASCII characters to Unicode, as recommended by <>.	Since these are all string channges, this needs to wait until we branch.Review of:.Comment onUse Unicode in translatable stringsPushed, thank you!I reverted the gmarkup changes, since they broke most of our gmarkup tests. This will need to be redone with the necessary fixes for the tests.(In reply to Matthias Clasen from)There's a partial patch on; I also ran out of time to get through all the test failures, but perhaps it could be a starting point for someone.	5.0	id=774889	4	False	False	olivier.crete	1
id=764035	REOPENED	nautilus	Tabs	3.19.x	Other Linux	Normal normal	Nautilus Maintainers	2016-03-22 17:22 UTC by	Bastian Ilsø	2016-05-02 18:39 UTC (	4 users	If I right-click a folder and choose "Open in new tab", the focus is switched away from the current tab. The same happens when I middle-click a folder (which, btw has to be middle-clicked twice to work, not sure if that's also a bug, it used to be that once was enough).It feels inconsistent to me because this does not happen with other tab-based applications such as firefox, chromium or epiphany. In these applications, the focus is not switched away from the current tab.	That is probably a design decision in nautilus long time ago.If it doesn't bring a big benefit on changing a workflow we prefer to not change it because that means changing how the users used to work.In this case I cannot see a big benefit, and I didn't see any bug report asking for this in the past, so I will close it as a not a bug.The requiring double click is a bug indeed, open a new one please.This is a regression, in 3.14 this was not like that.Createddo not switch focus to new tabsIn Nautilus, when a location is opened in a new tab, the new tab getsautomatically focused. This behavior is not consistent with other tab-basedapplications, such as browsers - Epiphany, Firefox, Chromium to name a few. Itis also a regression, since this behavior was not present in 3.14. In order tofix this, set a flag so the new tab is not made active.Review of:LGTM thanks!can you commit to master and gnome-3-20 pleasepushed as- do not switch focus to new tabsComment ondo not switch focus to new tabspushed as- do not switch focus to new tabs(In reply to Razvan Chitu from)Not really. In Chrome for example, when you open a new Tab or duplicate a Tab from Tab Store, it gives you focus. Maybe an association in nautilus would be:- No focus when open a Tab from main view- Focus when open a Tab from sidebarAfter that patch, it feels awkward when opening a new tab from sidebar and it doesn't give focus. You obviously open it to use it immediately, not for later use. Please consider to at least provide an option, in Nautilus preferences.Was just about to raise a bug about this, as master doesn't behave how I'd expect... Pretty much all tab based apps I've used switch to the new tab (Firefox, gedit, etc), so I thought the fact it wasn't switching now was a bug. Also we're being inconsistent at the moment: - Open in a New Tab - doesn't switch automatically- Ctrl+T/New Tab - switches to new tab	8.0	id=764035	10	False	False	csoriano	1
id=126697	REOPENED	libxml2	general	2.6.3	Other All	Normal normal	Daniel Veillard	2003-11-11 07:51 UTC by	Roumen Petrov	2004-12-22 21:47 UTC (	1 user	Bug with #125093 describe the problem, but only for P tag.Following test case will show that this is general problem.When we have text after/before a tag, after xsl transformation document hasnew line before/after this tag.Bug is with severity critical, because when we have br tag after/before litag output is without closing /li tag. When this problem is solved severitycan be reduced to enhancement.	Createdtest case. more about test case follow:files:- input.xml : input xml document - used for tests- test.xslt : trivial transformation - cause for problem- xml.xslt : trivial transformation - no problem- test-ok.xslt : extract from my transformations which work aroundsfor some html tags used in my documents.- tast-all.xslt : extended transformation - might can solve problem atall.make command always will create two files:- wrong.html : result after test.xslt. Take note for missing /li tag- fine.html : result after test-ok.xsltYou use xsl:output indent="yes" support. There can't be *ANY*garantee about the result for formatting blank nodes.If you want control over the blank space do *NOT* use indent="yes" !DanielWhich libxml2 version ? Bug does not depend of indent="yes" for 2.4.X. With or without indent="yes" probles exist. For 2.6.x I will check later.well the stylesheets in the test case had indent="yes"W.r.t. bug fixes, I never backport, so the probability to get2.4.X fixes are zero (unless you're ready to give a lot of moneyto Red Hat for custom work !)DanielCreatedtest case without ident="yes"Transformation without ident="yes" is not solution. Test case with id=22377 show that problem exist on latest stable releases. Output of "test.xslt" is in file "wrong.html". Work around for the problem is transformation in "test-all.xslt" with result in "fine.html", i.e.: - /li tag exist - no unexpected (extra) new lines ========================================================== $ xsltproc --version Using libxml 20603, libxslt 10101 and libexslt 801 xsltproc was compiled against libxml 20603, libxslt 10101 and libexslt 801 libxslt 10101 was compiled against libxml 20603 libexslt 801 was compiled against libxml 20603 ========================================================== About backport :-) ... it is not necessary. I know that problem exist in 2.4.x and I can test immediately. Test for 2.6.x i can perform in different environment. I would like to help with patch :-), not to complain :-(, but I don't have enought time :-(((((((((	7.0	id=776165	5	False	False	ystreet00	1
id=776165	REOPENED	GStreamer	don't know	git master	Other Linux	Normal normal	GStreamer Maintainers	2016-12-16 13:10 UTC by	Stuart Axon	2017-01-09 15:59 UTC (	1 user	Tested using glimagesink, gst-master on raspbian.I have a test program and files here that demonstrates this and other bugs.To reproRun python play-multi.py jpegs/*	This works now with the fix from*** This bug has been marked as a duplicate of***I don't think this is a dupe, jpegs still appear glitched, while pngs work now.Here is what it looks like (no idea why youtube classified this as comedy but there you go).Here is how to reproduce from the commandline, with raspi2png to capture output.This uses raspi2png [1] and an input file 1.jpg$ timeout 5s gst-launch-1.0 filesrc location=1.jpg ! decodebin ! imagefreeze ! glimagesink & sleep 1 && raspi2pngOutput goes to a file called snapshot.png (which is black in this case, but contains an image if a png is input).[1]I'm guessing you're using omxjpegdec here while I'm only using jpegdec at the moment.CreatedJpeg being displayedI had a look at the debug and I am using omxjpegdec - this is chosen by decodebin.For my own project I don't need this any more since, we switched to pngs, but still good to help provide info to help this be fixed.The log is 11mb, so I put it on dropbox:I've attached a picture of a jpeg being displayed on a Pi.It's interesting, that it starts out being displayed OK, but then the rest is glitched,	6.0	id=753101	6	False	False	mcatanzaro	1
id=754789	REOPENED	gnome-documents	general	3.17.x	Other All	Normal normal	GNOME documents maintainer(s)	2015-09-09 15:53 UTC by	Alessandro Bono	2015-10-19 23:03 UTC (	4 users	If we leave the pointer hovering the navigation controls, the controls disappear.	Createdpreview: Don't hide navigation controls when hoveringReview of:I wonder if this breaks when mixing touchpad/mouse use and touch. Looks fine otherwise.Review of:Let's get this in after freezeJust trying to understand what is going on here ...(In reply to Alessandro Bono from)Does this only happen if you are hovering over the GdNavBar? If you hover over the previous and next buttons then does it stop the overlaid widgets from getting hidden? Atleast that is what I am seeing.The existing code assumes that we will stop getting GtkOverlay::motion-notify-event once we enter an overlaid widget. This works for GtkButton::enter-notify-event, but not for GdNavBar::notify::hover. The patch makes it more explicit by introducing a new state tracking variable. I wonder if we should fix GdNavbar to behave more like GtkButton.Unrelated, but how about using a GtkRevealer instead of Tweener?Pushed an even simpler version of this that does not need the additional state.Debarshi, unfortunately it's not easy to fix GdNavBar to emit signals like that, and I think this patch makes sense as it is.pushed as- preview: Don't hide navigation controls when hovering(In reply to Cosimo Cecchi from)Ok, cool.There is a corner case not covered by the patch committed. If you hover and unhover quickly on the left/right arrows the function this._motionTimeout() is called while hovering, queuing the autohide. The original patch should fix it, but I don't know if it is the right approach. I'll attach a patch and a video to show the problem.Createdvideo showing the problemCreatedShow corner caseAlessandro, thanks for following up.Let's go with your original approach then. Could you prepare a patch for that?Createdpreview: Don't hide arrows in some cases	11.0	id=518315	18	False	False	murrayc	1
id=766873	REOPENED	gnome-boxes	general	3.20.x	Other Linux	Normal normal	GNOME Boxes maintainer(s)	2016-05-25 15:51 UTC by	Laurent Bigonville	2016-06-13 16:08 UTC (	2 users	Related toThe description when calling polkit to change the permission on the system VM images should be improved.IMHO, it should state clearly why and what it gonna do (change the permissions of the file on the filesystem)	So sorry, I guess you filed this before you got to read my follow-up comment:Well it's actually possible to do if you are creating a wrapper and adding a configuration for polkit, then you can define a message, see the manpage of pkexec(In reply to Laurent Bigonville from)I did and now I read again. It wasn't very specific about this for me. I guess it's time to learn. :)	3.0	id=126697	7	False	True	daniel	1
id=48344	REOPENED	nautilus	File and Folder Operations	2.14.x	Other Linux	Normal normal	Nautilus Maintainers	2001-06-15 05:05 UTC by		2010-07-30 23:08 UTC (	6 users	Deleting a directory pops up a progress dialog. This dialogcontains an indication of the number of files being deleted(like "12/36"). The total number of files does not includehidden files. Thus the displayed number is wrong (worst case:"Deleting: 20/0"). Backup files may also be affected by thisbug (not verified).* REPRODUCIBLE: Always* STEPS TO REPRODUCE:1. Select a directory containing visible as well as hidden files2. Select "Delete..." from its context menu (you may have to enable the trashcan bypass in the preferences to see it).3. Confirm the deletion.* ACTUAL RESULTS: The progress dialog that is displayed ignores the hidden files inits file count. Therefore, in a directory with only hidden files,the file count will be displayed as 0, even if all the files arebeing deleted.* EXPECTED RESULTS: Display the correct number of files being deleted.------- Additional Comments From2001-07-23 00:35:30 ----Taking bugs previously assigned to Pavel, assigning them to myself. Will parsethem out at my leisure , but many are GnomeVFS bugs we should look at for 2.0------- Bug moved to this database by2001-09-09 21:18 -------The original reporter () of this bug does not have an account here.Reassigning to the exporter,.	Changing to "old" target milestone for all bugs laying around with no milestone set.***has been marked as a duplicate of this bug. ***It works in Nautilus 2.1.1 and 2.1.2.CreatedScreenshot of Nautilus 2.14.1 misbehavior, using Gnome 2.14.2 on Ubuntu.Comment onScreenshot of Nautilus 2.14.1 misbehavior, using Gnome 2.14.2 on Ubuntu.It seems that I can reproduce this bug in Nautilus 2.14.1 (see). May somebody re-open this bug?reopen bug so***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I seen this bug last week on a GNOME v2.22 (so with gvfs), I was copying or deleting (I can't recall right now sorry) 1770 files and Nautilus counted around 3500....I would need someone to confirm before setting the version to 2.22 ...Anyone still have a problem with this? It might be that nautilus also count the folders to be deleted / copied - could that make sense? (It might also ignore hidden and backup files)	12.0	id=754789	11	False	False	abono	1
id=134563	REOPENED	gnome-panel	panel	2.30.x	Other Linux	Normal normal	Panel Maintainers	2004-02-16 21:31 UTC by	Leslie Saper	2013-10-18 19:17 UTC (	12 users	My panel (2.4.2) is at the bottom of the screen and is set to "auto-hide". When I click on an item in the panel that produces a pop-up menu andselect an item in the menu that does not lie above the panel, the desiredaction is performed and my mouse is left outside of the panel. However thepanel does not hide as expected. The panel will only hide if I bring themouse back inside the panel and then out again.For example, right click on the border of window list or clock. For me,the pop-up menu lies sufficiently high up so that the "About..." item doesnot lie above the panel. The panel remains open as I move up the menu to"About..." (as expected) but still remains open after I select "About..."and the menu disappears. The same occurs if windows are grouped in mywindow list and I select one from the pop-up menu.	This problem is not as consistently reproducible as I had firstreported. But I still find it occurs most of the time.Leslie: when you move your mouse on the panel to unhide it and thenmove it quickly out the panel (before the panel has finishedunhiding), does the panel stay unhidden?I can't reproduce using gnome-panel 2.4.2 and HEAD.Vincent: The problem you describe does not occur. That is, if I movemy mouse quickly to the edge where the panel is hidden and thenquickly away before the panel fully appears, the panel does indeed goback to being hidden. (I had this problem previously, before mysystem people upgraded to panel 2.4.2.)My problem as first described is different: after selecting from alarge menu that the panel created, the panel remained unhidden. Thisproblem occured consistenly for over a day before I reported it. Itthen dissapeared for a while and then reappeared. Sadly I cannot saywhy. I do have many windows, however (Mozilla, terminal, xdvi,acrobat reader, gnomecal, gpmail).I am using panel 2.4.2, tasklist 2.4.2, and Gnome 2.4.0.Thanks for your answer. I still can't reproduce with gnome-panel2.4.2. Weird. I'll ask someone to try to reproduce.I can't reproduce this with the latest panel. Please re-open if you canreproduce this with 2.8.0 or later. ThanksI am re-opening this because the problem still consistently occurs. I am nowusing gnome-panel 2.8.1 and window-list 2.8.1 as Mark McLoughlin suggested. (The version of gnome as a whole is 2.6 however and will not be upgraded to 2.8for some time.)My panel is at the bottom with size of 56 pizels. It is set to autohide; the"expand" and "show hide buttons" options are *not* selected. The window listapplet is set to "always group windows".I bring the mouse near the bottom of the screen and the panel appears. I clickon grouped item in the task-list and a menu appears which often does not overlapthe panel. When I select a window from such a menu, the window appears, themenu dissapears, but the panel remains unhidden.Leslie: I can not reproduce. Do you know when you'll be able to upgrade to anentire GNOME 2.8 desktop to test it again?Is it always reproducable with the steps you gave?Vincent: Here are the steps that seem to consistently reproduce it (but I have been fooled before about "consistently"). Create a session with no open windows and just a 56 pixel panel set to autohide, expand, and no buttons at the bottom of the screen. The panel contains Clock 2.8.1, WindowList 2.8.1 with always group windows set, a few launchers, and the main menu. Restart the X-server and login. Start Gnome terminal from the menu and iconify it. Start another Gnome terminal from the menu and iconify that. Now press the "terminal (2)" entry in the window list and select the terminal entry in the popup menu that comes first. The cursor should not be over the panel at this point. The terminal window appears and the panel does not hide. Currently we have Fedora Core 2 with GNOME 2.6, with Panel 2.8.1 installed.Our systems staff will probably not upgrade to GNOME 2.8 until March or April at the earliest with the Fedora Core 4 release. If necessary I can have them put up a single computer for testing with Fedora Core 3 and GNOME 2.8.I think I got a similar bug: my panel doesn't auto-hide if I lock/delete an applet.The problem is that we don't push/pop the autohide disabler with applet contextmenus (we do it for launchers).***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***This bug is still present in Panel 2.10.1 with Gnome 2.10.Still present in Panel 2.14.3 with Gnome 2.14.3 in Ubuntu 6.06. I find this highly annoying... actually my mind already makes me push the cursor to the panel automatically in regular intervals so it won't stay unhidden. :)Would be great if somebody fixed this.See also in Ubuntu:From"...I have the regular Ubuntu panels. I set both of them to autohide.However, they stay unhidden when I do the following:1. Move cursor over panel item2. right-click (or left-click, depending on item) to open a context menu3. Move cursor out of panel and context menu4. Click to close context menuWhat happens:Panel now stays unhidden until I push the cursor in and out again.What should happen:Panel should hide when the context menu closes...."Also reported against various gnome versions in Fedora:I would suggest that the panel should either listen for pointer movement until it hides again, or periodically poll for the position of the pointer, or somehow listen for close events of the menus of its applets.CreatedProposed patchThis patch adds a timeout call if INFERIOR type leave_notify event is emited. The problem for this bug relies on applet codes from what I understood. Clicking on the panel applet emits leave-notify signal. However that time, since pointer is in container, panel auto hide queue is not used. Since some applets don't propagate mouse clicks on menu items, gnome-panel does not receive another leave-notify signal. This patch, just adds one more timeout call for leave notify. It's not a total solution for this problem. But at least I'm having less unhid panels with this patch, so wanted to share it.Comment onProposed patchI found three bugs in this upstream tracker that describe the same problem:Maybe someone can have a look at them and decide wheter two are just duplicates. Thanks.I looked at all three bugs Martin listed. Using 2.24.1-0ubuntu2.1 (Ubuntu 8.10) I was unable to reproduce these two:But I could reproduceI don't /think/ they are duplicates. 302574 may be fixed as there have been no reports for a couple of years. The original reports for 529785 and 134563 seem to be distinct.in 529785 actually seems to be reproducing, not.To reproduce 134563:Set panel to auto-hide.Right-click on an applet (tried with power manager, network monitor and system monitor), then click on About, a background application, or the desktop.Result: menu disappears, panel stays visible.Expected result: menu disappears, panel hides.Slightly different way to reproduce 134563:Set panel to auto-hide.Open sufficient windows/applications that some are are grouped.Click on a group, select a window from the menu.Result: menu disappears, panel stays visible.Expected result: menu disappears, panel hides.Still happening in gnome-panel 2.26.0-0ubuntu4 in Ubuntu 9.04 Beta.***has been marked as a duplicate of this bug. ***Still happening in gnome-panel 2.30.0, GNOME 2.30.2, Fedora release 13	23.0	id=766873	6	False	False	zeeshanak	1
id=778006	REOPENED	gtk+	Widget: GtkGLArea	3.22.x	Other Linux	Normal normal		2017-01-31 22:56 UTC by	Lukas	2017-02-19 21:03 UTC (	2 users	Createdbroken renderingHow to reproduce: Run the OpenGL demo from gtk3-demo on X11 with llvmpipe and observe glitchy rendering. See attached screenshot on how it looks like. By moving the mouse and resizing the window, you can make various portions of the window appear and disappear.partial output from glxinfo:Extended renderer info (GLX_MESA_query_renderer): Vendor: VMware, Inc. (0xffffffff) Device: llvmpipe (LLVM 3.9, 256 bits) (0xffffffff) Version: 13.0.3 Accelerated: no Video memory: 493MB Unified memory: no Preferred profile: core (0x1) Max core profile version: 3.3 Max compat profile version: 3.0 Max GLES1 profile version: 1.1 Max GLES[23] profile version: 3.0OpenGL vendor string: VMware, Inc.OpenGL renderer string: Gallium 0.4 on llvmpipe (LLVM 3.9, 256 bits)OpenGL core profile version string: 3.3 (Core Profile) Mesa 13.0.3	Generally speaking, this looks like a driver issue.Aside from the GL renderer being llvmpipe, which GPU are you using?Uh, I forgot to mention that this is on a Digitalocean droplet over VNC. Their virtualisation solution provides a "Cirrus Logic GD 5446".The same issue happens on Ubuntu 16.04 (Gtk 3.18 on Virtualbox as well) That setup seems to use the modesetting driver.Probably the same issue also appears with a more complex applicationof mine. This time on an intel gpu.I'll try to provide a stripped-down version that makes it easier to pinpoint the issue.as ebassi said: driver issueI'm still not sure whether this really is a driver issue, I've narrowed down this bug toWhen doing the "blit swap", the glitches appear. Doing glXSwapBuffers is jus fine.	4.0	id=48344	18	False	False	jfleck.gnome	1
id=746927	REOPENED	gnome-calendar	User Interface	3.16.x	Other Linux	Normal normal	GNOME Calendar maintainers	2015-03-28 08:37 UTC by	Abderrahim Kitouni	2016-09-27 15:42 UTC (	3 users	Right now, in the year view, sunday is gray (while other days are black). The software shouldn't assume sunday is a special day.	(In reply to Abderrahim Kitouni from)How would you like us to let the user know which are the weeks days? This is by design. We have to choose a particular day, we chose Sunday. We'll stay like this.I think I wasn't clear enough. What I wanted to say is that Sunday is a work day where I live. The translator should be able to choose the "special day" according to the country (for me it would be Friday)(In reply to Abderrahim Kitouni from)Now, that's a different stuff, so, the problem is which day to mark? Do you have a work week with more than one day off? What does your locale data say?Yes, it's about which day to mark. I thought it would be clear from the title.Anyway, depending on where you work, you could have either Friday or Friday and Saturday.I don't know what the locale data say.This issue was solved inThe issue still isn't solved. gnome-calendar still marks sunday in gray, even though gnome-shell is correctly marking friday and saturday.CreatedScreenshot of the bug	7.0	id=134563	29	False	False	vuntz	1
id=756901	REOPENED	meld	general	3.15.x	Other Windows	Normal normal		2015-10-21 10:57 UTC by	Łukasz Grzesik	2016-08-18 12:21 UTC (	2 users	Environment:Windows 10 64b (I think it doesn't matter so much, all Windows might be affected)Locale: polishPython 2.7, Libs installed as on meldmerge wikiThe windows user contain a polish "Ł" character (probably other "national" characters will also cause this). Tried with Meld 3.14 installer (process was hanging on the process list), then moved to the src 3.15 release.Traceback (most recent call last):(eng: Wrong byte sequence on conversion input)Possible cause/hints for resolving the problem:Might be related to- problems with os.path.expanduser("~"). When I tried make meld to work (just need this tool, because its soo great) I set the default_path meld in meld\newdifftab.py:48 to a static path - then meld started to work (fine for me, but might be helpful for others)....# default_path = os.path.expanduser("~") default_path = "D:\Programs\meld\workdir"...HTHLukas	CreatedAvoid expanduser use for unicode issuesThanks for the excellent bug report and the pointers. I haven't tested this yet -- I'll get around to creating a Windows unicode-named user if needs be -- but I'm hopeful that this patch will fix the problem. There are a few other places where we use os.path.expanduser(), but I think they'll be less of an issue and are much more work to fix.I've pushed this patch. Please let me know if this doesn't fix the problem for you. Thanks again for the bug report.Unfortunately i get:C:\Users\Łukasz\Downloads\meld-3.15.1>python bin\meldCouldn't bind the translation domain. Some translations won't work.[Error 126] Nie można odnaleźć określonego modułuTraceback (most recent call last):Tested 3.14.2 win32 - didn't started, 3.15.1 as above.HtHLukas	3.0	id=655512	18	False	False	gdesmott	1
id=721655	REOPENED	GStreamer	gstreamer (core)	1.x	Other Linux	Normal normal	GStreamer Maintainers	2014-01-06 20:56 UTC by	Stefan Sauer (gstreamer, gtkdoc dev)	2014-01-09 15:18 UTC (	2 users	gst-launch-1.0 fakesrc can-activate-pull=false num-buffers=0 ! fakesink can-activate-pull=trueThis is a followup for the discussion after I submittedcommitAuthor: Stefan Sauer <>Date: Mon Jan 6 21:04:32 2014 +0100basesrc: demote error to warning This is not an error. A subclass returning FALSE for is_seekable() is one way ofsaying that we can't operate in pull mode.Here is a better patch. Main question is wheter we should end up calling start() before the pad is activated(). Previously I tried to make gst_base_src_activate_pull() fail if !gst_base_src_seekable(), but that code is not yet called at that moment.	Createddon't confuse GST_PAD_MODE_NONE and PULLComment ondon't confuse GST_PAD_MODE_NONE and PULLI think this looks good and makes sensewtay, any comments?I intentionally left this open, as I am not sure if we should even get there with unactivated pads in the first place ...Then let's reopen it :)How do we get there with unactivated pads?	5.0	id=756901	6	False	False	kai.willadsen	1
id=655512	REOPENED	empathy	Multi User Chat	3.1.x	Other Linux	Normal normal		2011-07-28 16:09 UTC by	Emilio Pozuelo Monfort	2015-02-09 21:35 UTC (	7 users	I am on an XMPP well named room, and my user appears twice in the room's participants list.This is with git master as of today and gabble 0.13.2	Did you invite someone to this room or did you get invited? I already observed this when testing invitations iirc.I got invited and hit this bug. Then I left by accident, and when I joined the room again by myself, I didn't hit it. So it definitely seems to be exclusive to invitations.Same thing happens when i'm invited in a gtalk room, my nickname appears twice.***has been marked as a duplicate of this bug. ***Looks like this bug has been fixed with my latest contact management refactoring. Please reopen if you can reproduce with Empathy 3.3.4 or newer.***has been marked as a duplicate of this bug. ***Still seeing this with 3.4.0CreatedscreenshotCreatedtest scriptDo you know how to reproduce this issue?Could you please check with this test script what are the members at the Telepathy level?None of the channels have any duplicate members, according to that script. Yet, the ui shows dupes (or triplets, etc) in some channels.I noticed that this happens for me when I have a few favorite channels on one server checked for auto-joining.When I start empathy and the fist channel window that pops up is #empathy, then I see duplicates for a given user A 'arriving' in the contact list of the #empathy tab each time a new channel is joined (tab opens) in which user A happens to be, too.(In reply to)Thanks for testing. So yeah that's definitely an Empathy bug.(In reply to)Any chance you could attach Empathy.Chat logs (help - debug) when reproducing this issue? Please specify the name and nick of the bugged contact.CreatedEmpathy log with duplicates of the users 'andre' and 'bandini' appearing in the #empathy contact list.I sometimes can reproduce it like this, too:In any chat room, say #room_A, choose a nick and do/whois nickif the nick is in a room that you're not in yet join this room:/join #room_BNotice that a new duplicate of the nick appears in the contact list of #room_A.I still didn't manage to reproduce this bug. If someone find a way to do so please let me know.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	18.0	id=746927	16	False	False	a.kitouni	1
id=165723	REOPENED	gtk+	Backend: Win32	2.6.x	Other Windows	Normal normal	gtk-win32 maintainers	2005-01-30 16:51 UTC by	Omi Azad	2016-11-25 19:37 UTC (	3 users	Please describe the problem:I cannot type Bangla (Indic language) texts in any GTK depended software. I cannot type Bangla directly in GAIM, GIMP. It shows me "????" only. But when Icopy and paste Bangla texts from another software, it becomes OK. So I think GTKhas some problem.Would anyone check the problem and add this input support it in the next releases?Steps to reproduce:1. When I changed my Keyboar layout and start Typing2. 3. Actual results:Expected results:Does this happen every time?YapOther information:Put Indic input support, Please...	***has been marked as a duplicate of this bug. ***Unfortunately I only have Windows 2000 (which doesn't have any Bangla inputlocale) currently, and cannot debug this.Hmm, but Windows 2000 does have input locales for Hindi and Tamil, for instance,and I can reproduce the problem with them. Fixing that will presumably fix itfor Bangla, too.Fix in HEAD and gtk-2-6:2005-02-01 Tor Lillqvist <> * gdk/win32/gdkkeys-win32.c (handle_special, set_shift_vks, reset_after_dead, handle_dead): New functions, code blocks refactored out of update_keymap(). No functionality change. (update_keymap): Use ToUnicodeEx() when available (on NT-based Windows) instead of ToAsciiEx(). Makes keyboard input work in Unicode-only input locales that don't have any ANSI codepage, for instance Hindi and Bengali. Use _gdk_input_codepage only on Win9x. (#165723) * gdk/win32/gdkevents-win32.c (gdk_event_translate): On WM_INPUTLANGCHANGE, use GetLocaleInfo() instead of TranslateCharsetInfo() to get the input locale's corresponding codepage, if any.Bangla, Hindi, Tamil, Telegu, Sanskrit all are Indic language. If you foundHindi working on Windows then other indics will work depending on Windows scriptprocessor.Why reopen? Yes, I know those are Indic languages. To the best of my knowledge,the fix works for them all. The fix affects only keyboard input of theselanguages, output has worked already since long ago. Why did you change thetarget milestone to win32-1.3? That refers to the so-calledgtk-1-3-win32-production branch, which is obsolete since long ago. Are youreally using that?[quote]Why did you change thetarget milestone to win32-1.3? That refers to the so-calledgtk-1-3-win32-production branch, which is obsolete since long ago. Are youreally using that?[/quote]Well, I got flu and didn't notice what exactly I am doing. If you have anysystem then please roll back and ignore what I post as win32-1.3. I'm not usingthat. Also I'm very new with bugzilla stuff, so it would take some time for meto understand.By the way, when we may expect for a fix for Indic Input?Developers,Is there any progress to sort out the issue I mentioned?To the best of my knowledge this bug has now been fixed (in the GTK+ sourcecode). The fix will be in the GTK+ 2.6.2 (source code) release. Hopefully I will be able to provide Windows binaries (in the form of zipfiles)of GTK+ 2.6.2 shortly after that. Some time after that there will be Windowsinstallers.I'm waiting for the ZIP files for Windows. :)Any ways. In Linux, most of the applications are depended on Pango for complexscript processing and in Windows, applications are depended on Uniscribe engine.I found a folder called Pango inside GTK folder. Well, I don't have muchknowledge on Pango, but what I want to know one thing. In win32, GTK outputdepends on Pango or the Windows Uniscribe Engine?Linux: GTK+ => Pango library => Pango layout modulesWindows: GTK+ => Pango library => UniscribeCool!!!Can't wait to meed the Win32 version of GTK 2.6.2 :)I just downloadedand afterextracting that I overwrite all the files inside "Program Files\CommonFiles\GTK\2.0" with the extracted ones. But when I went to start GAIM, I found 2errors.First one is:Entry Point Not FoundThe procedure entry point g_assert_warning could not be located in the dynamiclink library libglib-2.0-0.dll.Second one:error loading gaim.dll,Error: 127Something likes that. Is there any problem with the process I followed or thereare some errors actually?GTK+ 2.6.2 requires GLib 2.6.2, Atk 1.8.0 and Pango 1.9.0. You will have todownload and install them, too, in the same place where you installed GTK+ 2.6.2.("Install" here meaning just "unzip".)So Input of Indic language is quite OK now. But there is still one problem. Theinput does not understand DeadKey input. As my layout has DeadKey in it, butstill I cannot type the letters which is supplied be the dead key.I hope another update is needed.Sorry, but I don't know wat you mean with "dead key" in the context of Indiclanguages? As far as I can see from thepage, there aren'tany dead keys on the Indic keyboards like Bengali, Hindi or Gajarati? (Compareto Latin keyboard layouts like French or Finnsh, with several dead keys foraccents and other diacritics.)Bro,There are not deadkey in their default layouts, which are neither used by theIndians nor by the Bangladeshis. Bangladesh uses the typical customized layoutsfromand Ministry if IT (India)supplies layouts for theirs users. So there are deadkeys. :)Microsoft is Microsoft. They think you will eat only what they will supply. Thatis why people are switching towards alternate solutions these days. I think another update is needed.That sounds rather incredible. Why would Microsoft on purpose deliver keyboardlayouts that "nobody" uses? I think they explicitly say in some FAQ that foreach locale they want to use the most widely used keyboard layouts, includingofficial standards if there are such. Are you sure you aren't overestimating thepopularity of these 3rd-party layouts? (I.e., they might be popular among"hackers", but what about typical computer users, i.e. office workers?)That ekushey.org page claims that "the official Microsoft Bangla Layout is basedon the Indian INSCRIPT layout". However, the Microsoft keyboard layout page hastwo layouts for Bengali, "Bengali" and "Bengali (INSCRIPT)". (Which is the preferred form, BTW, Bengali or Bangla? Or are they separatelanguages?)Are these third-party keyboard layouts such that have more shift states than the"normal" shift and altgr? Those aren't supported yet in GTK+/Win32, see. Note that this affects also some European keyboard layouts, forinstance Czech.Well, I知 working on many Bangla computing and localization projects from a longtime and to be frank with you I知 also working with Microsoft on the officialBangla opentype font.I agree with you that Microsoft has 2 layouts on their site. But although theyhave 2 different names, both layouts are same. Please look at them carefully.Ekushey.org says what is right MS layout is based on Inscript but that is notpopular in India too. In India, people use Prabhat layout (you can find that inekushey.org page).The layouts ekushey.org is delivering is made with MSKLC() so there is no hacking.The deadkey feature is available from a long time back on Win32 (donno aboutLinux) and they works fine is all applications. I don稚 know why this is notworking with GTK and what problems you have to implement that practically.So,Can we expect any advance input support in future? Like DeadKey, AltGR etc. ?The more people working on this, the faster it will be fixed (hint, hint). Mostprobably, the right way to fix this is to rework the gdkkeys-win32.c filealtogether, see. You said that the two Bengali layouts on the Microsoft keyboard layouts pagewould be identical. They are definitely not. Look carefully yourself ;-) The"Bengali" one has arabic digits on the top row in the base state, the "Bengali -INSCRIPT" one has Bengali digits. The "Bengali" layout has AltGr (and theBengali digits are accessed through AltGr), the "Bengali - INSCRIPT" does nothave AltGr. Plus other differences.We don't use that layout in Bangladesh. The official Bangla layout forBangladesh iswhich hasDeadKey and AltGR keys. :(Sigh, I tried to install the keyboard layout from that page, but running thesetup.msi results in the error "The installer has encountered an unexpectederror installing this package. This may indiocate a problem with this package.The error code is 2103". This is on an English Windows 2000 machine.You must log-in as administrator or you should have administrator privilege toinstall the software. I think you don’t need to download and use the software,download the layout definition fromlocation.I did run is as Administrator. (Not logged in, but in a command prompt startedwith runas /user:administrator.) I'll try as logged-in administrator later. Yes, I do need to actually have the keyuboard layout installed to be able totest it. That pdf file is definitely not sufficient.The conversation is going longer and longer. Please mail me directly to omiazadat gmail.com then I can help you to understand the layoutOmiBut in order to fix GTK+ it isn't enough to just understand how to use thelayout, I need to actually use it while running GTK+ test programs. I don'tthink there is any problem in keeping this conversation here, that way it willbe archived for future reference.Any ways, tell me the progress with your installation and testing. If you faceany problem, then please feel free to let me know. Also you may need someUnicode Bangla fonts (as you are on Windows 2000, which doesn't have any Banglafonts in built with it). You can find some fonts in'sOTF Bangla fonts section.OmiWell, I now have a new machine with Windows XP, so the problem I had on Windows2000 is irrelevant... The installer worked fine on this box. I haven't trieddebugging this yet, though, it will take some time to set up a developmentenvironment on this machine (I don't wanti to simply copy all the historicalbaggage from the old machine).Hello Tor,You didn't say anything about dead key input. What is the progress so far?OmiAs Tor is not responding, can anyone else respond to this issue?One more thing that I checked the same layout made for m17n library and testedit with SCIM on Linux. But that is working fine in Linux. So I think the problemis with Windows only.I am looking at this now. I have the Bengali keyboard layout installed, and afont that covers Bengali (SolaimanLipi). Bengali input in WordPad seems to workas it should, if I try the stuff linked to from the ekushey webpages, or fromthe Unicode book.You can't compare "bare" GTK+ on Windows to SCIM+GTK+ on Linux. If you use SCIMon Linux, the corresponding thing on Windows would be to use an IME (such asthose used for Chinese, Japanese and Korean), I think.Comparing to WordPad, one thing that definitely doesn't work in GTK+ is whathappens if you type (I'm using the "normal" English key names here) for instanceJGJ or JGT (the first two entries in the lower table onI'll see if I can find some solution to this that wouldn't require a specialinput module for GTK+.Fixing this was surprisingly trivial, just a one-line change (effectively) togdkkeys-win32.c... Now the bengali virama works as it should. The change makeshandle_dead() by default return the keysym as such if it isn't one of thespecial cases that handle_dead() was written for (i.e. the ones where the keysymthat comes in isn't "dead", but we want to pass on the corresponding "dead" keysym).I.e. if only GDK lets the keysym corresponding to U+09CD through normally,things work as they should.Fixed in gtk-2-6 and HEAD.2005-05-23 Tor Lillqvist <> * gdk/win32/gdkkeys-win32.c (handle_dead): If the keysym isn't one of the special cases this function takes care of, use it as such. This takes care of for instance the Bengali Virama, see.Is there any place from where I can take the testing version and check if it isworking or not?Yes, you can build it yourself from source, from CVS. But that is not easy onWindows, where setting up a working build system can be hard, if one isn'taccustomed with the tools and "culture". (For instance, experience withMicrosoft's Visual C++ is mostly useless.) But certainly, it would be very niceif you would do this, what GTK+ on Win32 needs *is* more developers who canbuild and debug it themselves.Otherwise, not really. Distributing a snapshot build of the GDK DLL would meanthat I would have to put together a corresponding source snapshot, too. That isjust too much work for just one bug. Wait for GTK+ 2.6.8 and its Win32 build.I'll wait for the release. Then check for any problem...Sigh, there apparently still are problems after the above fix. The bug reporternow tells me that the sequences GH and GA for instance don't work. And I canconfirm that in WordPad. Why couldn't he give exact instructions what keys totype in the first place? Oh well.The situation with the JGJ (U+0995 U+09CD U+0995) or JGT (U+0995 U+09CD U+099F)-style sequences is very different from the GH (U+09CD U+09BE)sequene. TheU+0995 U+09CD U+0995 code points are stored in the text that has been input assuch, and it is then Uniscribe that takes care of doing its magic and presentingthem as a unique grapheme cluster (or whatever the correct term is). The GH key sequence is quite different. If I type that into WordPad, what getsstored in the text buffer is not U+09CD U+09BE, but the single code pointU+0986. Apparently it is Windows's common controls that does this? Anyway, the right place to do the same in GTK+ would be the gtk_compose_seqstable in gtkimcontextsimple.c, I presume. However, that table uses guint16values for GDK keysyms, and GDK keysyms cover only a small part of Unicode codepoints. Other keys are represented as their Unicode code point plus 0x0100000,i.e. they don't fit into a guint16. So in order to get the <U+09CD U+09BE> =>U+0986 mapping into that table, the type will have to be changed to guint32.Before doing this I would like input from Owen or Matthias, though. Will attacha suggested patch soon.It might be interesting to see what happens when you turn the IME supporton .. I think trying to copy what windows does for input methods exactlywithin the scope of gtkimcontextsimple.c is a losing battle ... in fact,I think for good Indic/Thai/etc. input methods simple composition isn'tgoing to be sufficient.Well, no IME is involved in Bengali input with this 3rd-party keyboard layout,anyway. Presumably not with the Microsoft-supplied keyboard layouts, or otherIndic languages either. Don't know about Thai.CreatedSuggested patchOK, so I didn't change the data types in the existing table, instead Iintroduced a new type of table with 32-bit data, and added such a table withjust the Bengali character sequences in question. (Omi, are there more two-keysequences than "GH" and "GA" that should get turned into a single Unicodecharacter?) I have a single U+09CD mapping into itself, too, in the table, sothat if it isn't followed by U+09BE or U+09C3 it will insert itself. Owen,would this patch be acceptable?BTW, has there been any enhancement request for ways to entering combiningdiacritical by themselves (other than the control+shift+hex way)? I noticedthat by simply adding rows to the gtk_compose_seqs table with for instanceGDK_dead_grave by itself mapping to U+0300, this would work. One can then addaccents to letters they normally don't occur with (and for which there is noprecomposed letter or sequence in the table). Of course, one then has to typethe accent after the letter with which it should combine, as this is howUnicode combining characters work, which is rather unatural if one isaccustomed to using the normal dead accents on Latin keyboards. Hmm, what about a hack like this: if a dead key is followed by a key thatdoesn't match any sequence, instead of beeping, the code would commit thesecond character followed by the combinig character corresponding to the deadkey? Then one could type things like <dead-acute, atsign> and get an atsignwith an acute accent... Very useful ;-) Just kidding, I guess.Let me explain how the layouts and DeadKey works with Microsoft. If you gothrough the source, you'll find this:KEYNAME_DEAD09cd "BENGALI SIGN VIRAMA" //This means 09CD is a dead key.DEADKEY 09cd09c7 098f // ে -> এ (Means: If you press deadkey then 09C7 then you'll get 098Fas output.09cb 0993 // ো -> ও (Means: If you press deadkey then 09CB then you'll get 0993as output.09c3 098b // ৃ -> ঋ (Means: If you press deadkey then 09C3 then you'll get 098Bas output.09be 0986 // া -> আ (Means: If you press deadkey then 09BE then you'll get 0986as output.09bf 0987 // ি -> ই09c1 0989 // ু -> উ09c8 0990 // ৈ -> ঐ09cc 0994 // ৌ -> ঔ09c0 098a // ী -> ঊ09c2 098a // ূ -> ঊ0020 09cd // -> ্Going through your post I found you went too deep. The deadkey has nothing to dowith IME. It's just a magic for older style layouts.Hmm, you should know that the Windows-specific part of GTK+ (gdk/win32) doesn'thandle dead keys itself. It passes the dead keys on to the platform-independentGTK+, which handles the combining. So those sequence will have to be added tothe table in gtkimcontextsimple.c.gdk/win32 does its keyboard handling at a rather low level, handling just theWM_KEYDOWN and WM_KEYUP messages resulting from individual keys being pressedand released. This is because GDK needs to generate separate events for keypress and release, and also because it's simpler, and matches the way X11 worksmore closely.What does that mean? What about those layouts who are not supported by X11? Wehave lots of Asian layouts supported by SCIM. But they works fine with GTK in Linux.What did you decide then?I guess I am waiting for Owen or Matthias to comment on the patch. Will it breaksomething or be against user expectation on X11, for instance?I'm really not at all comfortable with using gtkimcontextsimple.c as a placeto fix this problem. ... it sounds like this is something that is configurationin the keyboard layout ... different keyboard layouts could map the same combinations to different things, and GTK+ should be picking that up.GTK should not handle anything itself. It should depend on the system's defaultway, which could be anything.GTK should not handle anything itself. It should depend on the system's defaultway, which could be anything. But who's going to read it and make the step. It'snot about Gaim (when I wrote this bug, this was the only GTK dependedapplication I used), All product of Gnome office (though I don't know whyAbiWord doesn't depend on GTK/Pango) should depend on GTK.Well, no action so far. I think you need to have a look atUm, why? I don't see anything useful, like a patch, in there?The issue is 1 year+ old and I think it's my problem that I could not make the developer understand what steps should be taken. We can I do? GTK applications are not working well in Windows.Ask for your money back? Write a patch?I'm not a developer, I'm just a end user. So I cannot make a patch myself. I thought if the problem is fixed, Bangla speaking people may find GTK+ applications useful. If not.....Patch applies cleanly. Reviewing it would take a while.(Working on)Can't test this with Windows 10 Bengali keyboard layouts (any of them). That is, i can't find a single deadkey in these layouts. Unicode character composition - yes, that seems to be working. But none of the keys that i've tried seems to be working as a dead key.The layouts in question were mentioned in.	55.0	id=721655	11	False	False	slomo	1
id=728702	REOPENED	GStreamer	don't know	1.2.3	Other All	Normal normal	GStreamer Maintainers	2014-04-22 06:52 UTC by	Bastien Nocera	2016-04-18 15:09 UTC (	6 users	gstreamer1-plugins-fc-0.2-8.fc20.x86_64gstreamer1-plugins-bad-free-extras-1.2.3-1.fc20.x86_64gstreamer1-plugins-ugly-1.2.3-1.fc20.x86_64gstreamer1-plugins-base-tools-1.2.3-1.fc20.x86_64gstreamer1-plugins-base-debuginfo-1.2.3-1.fc20.x86_64gstreamer1-plugins-good-extras-1.2.3-2.fc20.x86_64gstreamer1-vaapi-0.5.8-3.fc20.x86_64gstreamer1-plugins-bad-free-1.2.3-1.fc20.x86_64gstreamer1-1.2.3-1.fc20.x86_64gstreamer1-libav-1.2.3-1.fc20.x86_64gstreamer1-plugins-good-1.2.3-2.fc20.x86_64gstreamer1-plugins-entrans-docs-1.0.0-2.fc20.noarchgstreamer1-plugins-bad-freeworld-1.2.3-1.fc20.x86_64gstreamer1-debuginfo-1.2.3-1.fc20.x86_64gstreamer1-plugins-base-1.2.3-1.fc20.x86_64gstreamer1-plugins-entrans-1.0.0-2.fc20.x86_64$ gst-play-1.0 /home/hadess/Projects/Peak/B2G/frameworks/base/data/sounds/testfiles/test.midNow playing /home/hadess/Projects/Peak/B2G/frameworks/base/data/sounds/testfiles/test.midMissing plugin: audio/x-midi-event decoderWARNING No decoder available for type 'audio/x-midi-event'.WARNING debug information: gsturidecodebin.c(930): unknown_type_cb (): /GstPlayBin:playbin/GstURIDecodeBin:uridecodebin0ERROR Your GStreamer installation is missing a plug-in. for file:///home/hadess/Projects/Peak/B2G/frameworks/base/data/sounds/testfiles/test.midERROR debug information: gstdecodebin2.c(3928): gst_decode_bin_expose (): /GstPlayBin:playbin/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0:no suitable plugins foundReached end of play list.$ gst-inspect-1.0 | grep midimidi: midiparse: MidiParsetypefindfunctions: audio/midi: mid, miditypefindfunctions: audio/riff-midi: mid, midifluidsynthmidi: fluiddec: Fluidsynthwildmidi: wildmidi: WildMidi	Is it because of missing soundfont?I have the same error (Mageia 4) and have the timidity freepats installed. But I don't know if they are in the location where GStreamer is looking for them.Can you attach the file? debug log?gst-play-1.0 from GStreamer 1.4 works for me with midi files.Bastien, can you test?Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!$ gst-play-1.0 "/home/hadess/Projects/Test files/Ebook thumbnailers/mobi-thumbnailer-hack/Characteristic_rock_drum_pattern.mid"Press 'k' to see a list of keyboard shortcuts.Now playing /home/hadess/Projects/Test files/Ebook thumbnailers/mobi-thumbnailer-hack/Characteristic_rock_drum_pattern.midWARNING No decoder available for type 'audio/x-midi-event'.WARNING debug information: gsturidecodebin.c(939): unknown_type_cb (): /GstPlayBin:playbin/GstURIDecodeBin:uridecodebin0ERROR Your GStreamer installation is missing a plug-in. for file:///home/hadess/Projects/Test%20files/Ebook%20thumbnailers/mobi-thumbnailer-hack/Characteristic_rock_drum_pattern.midERROR debug information: gsturidecodebin.c(1006): no_more_pads_full (): /GstPlayBin:playbin/GstURIDecodeBin:uridecodebin0:no suitable plugins found:gstdecodebin2.c(4555): gst_decode_bin_expose (): /GstPlayBin:playbin/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0:no suitable plugins found:Missing decoder: audio/x-midi-event (audio/x-midi-event)Reached end of play list.gstreamer1-plugins-bad-freeworld-1.6.2-1.fc23.x86_64gstreamer1-plugins-base-1.6.3-1.fc23.x86_64gstreamer1-1.6.2-1.fc23.x86_64gstreamer1-plugins-ugly-1.6.2-1.fc23.x86_64gstreamer1-plugins-bad-free-extras-1.6.3-2.fc23.x86_64gstreamer1-plugins-base-tools-1.6.3-1.fc23.x86_64gstreamer1-devel-1.6.2-1.fc23.x86_64gstreamer1-libav-1.6.2-1.fc23.x86_64gstreamer1-plugins-base-devel-1.6.3-1.fc23.x86_64gstreamer1-plugins-good-1.6.2-1.fc23.x86_64gstreamer1-plugins-bad-free-1.6.3-2.fc23.x86_64Createdbzipped2 gstreamer log(In reply to Wim Taymans from)If that's the case, I'd expect a better error message.Here where gst-play-1.0 works fine, it uses a pipeline equivalent to this one: gst-launch-1.0 filesrc location=out.mid ! midiparse ! fluiddec ! autoaudiosinkfluiddec is the element which can consume audio/x-midi-event data.from your log it looks like midiparse gets used but fluiddec (from libgstfluidsynthmidi.so in gst-plugins-bad) is not even available.Can this be a packaging issue?JFYI an alternative pipeline for midi files is this one: gst-launch-1.0 filesrc location=out.mid ! wildmidi ! autoaudiosinkI guess that it does not get picked up because midiparse has a greater priority than wildmidi? P.S. IMHO a log without colors is slightly better when you share it.I can repdroduce this.midiparse (primary) gets plugged, but nothing takes the audio/x-midi-event data data it creates. wildmidi is only secondary, but takes the original audio/midi (and kinda works when autoplugged if I removed the midiparse plugin, but spews various warnings that ought to be fixed too).Createdsend stream-start event before capsThis gets rid of the warnings when wildmidi gets autoplugged.As for the midiparse plugging, it'd seem easy to give a higher rank to elements that don' require another element, so that they are tried first. I'm not sure if it's possible/easy to remove already plugged elements when it turns out the chain can't be continued (ie, if we plugged midiparse, and we realize we have no element that can be plugged then, remove midiparse and continue).But then monkeying with the ranks feels like a bit of a hack. Opinions ?	12.0	id=165723	25	False	False	tml	1
id=88654	REOPENED	gnome-applets	multiload	git master	Other Linux	Normal normal	gnome-applets Maintainers	2002-07-19 21:00 UTC by	Brad Johnson	2012-02-02 11:25 UTC (	11 users	When the "network load" view is enabled, there is obviously no way ofautomatically determining what 100% bandwidth is, so the range isautomatically adjusted every time network usage exceeds what was previouslythought to be the maximum (at least, such is my understanding of how itworks). The problem with this is that occasional spikes can destroy therelations of everything. While downloading binaries from a newsgroup, I canget a consistent transfer rate of about 250 K/sec from my ISP's server...however, a spike may reach well over 500 K/sec, at which point 250K/sec(which is pretty much my maximum bandwidth) only shows up at about 50%usage until I quit and restart Gnome. Perhaps the program should ignorespikes that last less than a certain amount of time, or allow you to set avalue that represents 100% usage? (Even a menu option labelled "Reset todefaults" would be great)	***has been marked as a duplicate of this bug. ***Anyone a suggestion how we can solve this because it makes the networktraffic monitor within the multiload applet basicly useless.***has been marked as a duplicate of this bug. ***Just add a preference where the user can enter what their upstream bandwidth is. Assume that any spikes above that are LAN and not WAN and clip them.Also, the tooltip just says "Network: 1% in use". It might be more useful forit to say (in addition to percentage) what the current kbps in use is. At leastthen I'd have some idea what's going on even when the percentage is wrong.What is the status of this bug?***has been marked as a duplicate of this bug. ***It's still relevant. Bumping version.Fixed in CVS HEAD.I suppose this already hit the FTP archives (in form of a release), right?Comment from the Ubuntu bug ():The GNOME bug report has a comment from exactly a year ago today saying thatthis has been fixed "in CVS HEAD".A year later, the fix still hasn't made its way into dapper. There's still noway I can see to set the maximum, so the applet auto-scales and is thereforebasically useless.I'm on a 6Mbit link, and am currently transferring a steady 10Kb/s - that'saround 1% of capacity, but the applet is showing "100% in use".If I could tell the applet that 100% means 6Mbit/s then it would know that I'musing effecting no bandwidth.Has this bug been overlooked? It is marked as "RESOLVED FIXED".I'm running gnome-applets version 2.13.1-0ubuntu3.What do you want exactly : auto-scaling ? no scaling at all ? user set scale ?I take mutliload-applet as it : it give me info about network activity. If i want numeric output, i use netload. May be we could first of fall change multiload tooltip to display network speed instead of %"it give me info about network activity" - what info does it give you? It gives you a percentage "50% in use". What does that mean, when it doesn't tell you what scale it's using?The graph shows how much of the network is in use compared to a few seconds ago, but that's all. The only info it gives you is "the network is a bit busier than it used to be". With no scale information it's meaningless."use netspeed" :)so what's best ? display rates in the tooltip ? have a fixed scale to 100Mb or 1000Mb ? If it displayed a scale information, like '5,33Mb/s', would you be able to guess that this 10px spike means that network activity once reached 2,5Mb/s ?btw, now that system-monitor displays scales, i'll try to push a patch before UI freeze to display rates instead of %.Did you have luck with pushing the patch in?no sorry :/Did you push in the patch now?Createdshow sum rateHi, the patch from Benoît looks really nice, I'd love to see in the tooltip the rate instead of a meaningless percentage :-) Any hope to get it included?Also, to make the graph more useful, instead of using linear scale, you could use a logarithmic scale. Spikes would be less noticeable, and when the usage is low for a few seconds, the differences during this period could be seen more easily. It would still need auto-scaling, but it could be much less often, and the minimum for the high value could be bigger.CreatedShow rate in the network load tooltip instead of percentageHere is an update to Benoit's patch for the latest svn version. I've also enhanced it by separating the receive and sent rates, as well as using the standard g_format_size_for_display() instead of free coding it. The information and strings should now be completely consistent with gnome-system-monitor.Please apply :-)Patch applied with one minor change: The bandwidth reported before the buffer had been filled was the total number of bytes ever transfered through that interface since the older variable will be 0 in that case. I adjusted the condition in the if statement in netspeed_get to allow for this.I'm leaving the bug open since the main display still has an issue, but this problem is unlikely to be fixable with the current visualisation since available bandwidth is difficult to determine (and variable if you swap between networks with your laptop). A visualisation that was packet based would work better, since that is closer to what actually happens, but I don't have any good ideas about how to do that well.Thanks for committing, and catching this little bug!Could you explain more what you mean by "packet-based visualisation"? Or maybe you know a program which does this already?What I mean by packet-based visualisation is something similar to the flashing LED on a NIC or router. The LED gives a brief flash when a packet goes by meaning it gets brighter and less flickery when the number of packets per second increases. I don't think particular example translates very well to the netload applet and it doesn't allow for packet length.The simplest method I can think of is just to draw a vertical line when a packet comes in during the sampling interval, this wouldn't give any quantitative information about the bandwidth, but it would easily distinguish between no network activity, infrequent activity and high activity. Unfortunately on networks with a lot of broadcast packets in the background (like my workplace) this would render the applet useless since it would become a solid colour.If you want a properly quantitative approach, then a packet-based approach won't help the fundamental problem of scaling to an unknown peak value, but it may be suitable for giving a crude estimate that doesn't suffer from the spikes thatcomplained about.The scaling problem may also be helped by using a logarithmic scale, but that presents a lot of problems when explaining it to people who aren't used to reading such a scale.Can I suggest that the graph's present behaviour could be made to work, with a few adjustments?1) Ignore short spikes, to stop graph scaling up as often.2) Lengthen 'memory' of top speed reached, to stop it scaling down as often.3) When it does rescale, replot the whole graph, rather than just applying the new scale to whatever is plotted from then on, because it looks very incongruous when you start downloading something with a spike, and the graph ends up looking like traffic has dropped.I hope you can come up something anyway. Thanks.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Why did nothing ever happen with the rescaling issue?I think Mike Gentry's suggestions make very much sense, and I would like to add the following suggestion: add an option in preferences to select between the following:1) Continuous autoscaling, as it works today2) Never downscale, i.e., set the maximum on the scale to the highest peak seen so far. This peak could be subject to a short time average to avoid unrealistically high values.3) User-defined maxima, i.e., no rescaling.I'm using version 2.30.0-0ubuntu2.	27.0	id=88654	21	False	False	vincent.noel	1
id=598561	REOPENED	gvfs	metadata	unspecified	Other Linux	Normal normal		2009-10-15 14:13 UTC by	Bastien Nocera	2016-02-10 07:22 UTC (	13 users	Crashes about 30 seconds after startup.gvfs-1.4.0-3.fc12.x86_64Program terminated with signal 11, Segmentation fault.	And running under valgrind:==3488== Invalid read of size 4==3488== at 0x405736: copy_tree_to_builder (metatree.c:223)==3488== by 0x40616F: meta_tree_flush_locked (metatree.c:2344)==3488== by 0x406397: meta_tree_flush (metatree.c:2365)==3488== by 0x403AAC: writeout_timeout (meta-daemon.c:61)==3488== by 0x34CC43993A: g_timeout_dispatch (gmain.c:3396)==3488== by 0x34CC43922D: g_main_context_dispatch (gmain.c:1960)==3488== by 0x34CC43CC17: g_main_context_iterate (gmain.c:2591)==3488== by 0x34CC43D064: g_main_loop_run (gmain.c:2799)==3488== by 0x4049DC: main (meta-daemon.c:783)==3488== Address 0x8 is not stack'd, malloc'd or (recently) free'd==3488== ==3488== ==3488== Process terminating with default action of signal 11 (SIGSEGV): dumping core==3488== Access not within mapped region at address 0x8==3488== at 0x405736: copy_tree_to_builder (metatree.c:223)==3488== by 0x40616F: meta_tree_flush_locked (metatree.c:2344)==3488== by 0x406397: meta_tree_flush (metatree.c:2365)==3488== by 0x403AAC: writeout_timeout (meta-daemon.c:61)==3488== by 0x34CC43993A: g_timeout_dispatch (gmain.c:3396)==3488== by 0x34CC43922D: g_main_context_dispatch (gmain.c:1960)==3488== by 0x34CC43CC17: g_main_context_iterate (gmain.c:2591)==3488== by 0x34CC43D064: g_main_loop_run (gmain.c:2799)==3488== by 0x4049DC: main (meta-daemon.c:783)Createdhome.tar.gzThe files that caused the crash.Seems to work fine when those files are removed.***has been marked as a duplicate of this bug. ***To reproduce the issue with attached file: 1. create new user 'hadess' and copy the files to ~/.local/share/gvfs-metadata 2. open Nautilus, choose some file in your home directory, set an emblem 3. wait #define WRITEOUT_TIMEOUT_SECS 60 seconds, crashThe `home` file is missing #define MAGIC "\xda\x1ameta" at the beginning, file is malformed. That could have happened in two cases - filesystem error (e.g. xfs zeroing opened files) or invalid write from the daemon. The latter needs more investigation and we really need good repro steps leading to malformed file.Either way, we need to fix the daemon to drop the malformed data (users won't be happy!) and start with a clean file.As long as Alex is away, I will try to come up with a fix for at least the first part of the problem, namely that we don't detect corrupted metadata files at all.Wth happened to that file?The "meta" magic and version info is not at the top of the file but almost at the end, and all strings in the file seem partial. There is no table listing all the keys in use in the file (which is generally at the start of the file after the header). The strings look weird too, parts of full pathnames where generally only relative pathnames are used in these files (unless as stored values by some app), nor are they stored in blocks related to each directory as they normally are.No app maps the "home" file writable and its only written by gvfsd-metadata, and then quite carefully with fsyncs and whatnot. I have no idea what mangled this file. Did you have a system crash at some time before this?I don't know what happened to that file, and yes, there was a crash before the problem happened. If gvfsd-metadata could just detect that the file is damaged and ignore it, it would be a good start...Note that I saw something similar in another folder, without a system crash being necessary.CreatedCheck if MetaTree exists before flushing itAlso change meta_tree_clear () so it sets fd to -1; this will makemeta_tree_exists () work as expected..The attached patch will fix the crasher but will leave the render the specific metatree unusable (since we have neither file nor journal to write to).I guess we need a meta_tree_reset () or maybe meta_tree_recover () functions that will just truncate the file in case the magic header is broken. Since the data most likely is already lost at that point it shouldn't matter.CreatedNuke metadata file if magic blob is wrongThis is more a hack/proof of concept. It nukes a metadata file if the magic blob is wrong. Works ok here.I'm not sure nuking it is the best approach, maybe we can rename it, adding ".error" to the name or something.Interesting, the "home" file does have a fully correct, but empty of data, metadata file starting at offset 0x1121 until the end of the file. And the journal tag it refers to is the correct one of the attached journal file, which is also a correct empty journal file.I believe commitfixes the reason for the bugged file. However, we should get the robust handling of buggy files in anyway.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Stacktrace from #609594(gdb) bt fullI stumbled over this as well, in the report that I've got () it happens when starting the session with AT and orca.seems to be the same issue (tree->root == NULL), I'll dupe this. It has a patch, but I'm afraid I know too little about gvfs-metadata to say whether it's correct.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Createdmetadata: Handle failure if files are not readableIf the gvfs-metadata directory is not readable, handle thefailure by returning NULL if meta_tree_open fails.Note that failing to open a tree for reading is not anerror, but failing to open for writing is an error.Fix up several callers to handle a NULL tree withoutcrashing.The attach patch fixes the issue for me, tested by making gvfs-metadata unreadable and trying various combinations of gvfs-ls gvfs-info and gvfs-set-attribute on local and remote files.Thanks Ross, will look at the patch in next days (not feeling well today) and compare it with my draft how to fix it...has easy steps to reproduce the crash.Ok I made this patch before I saw you had a draft patch... anyway, get better soon :-)Review of:It looks good. Most of lines we fix in same way.::: client/gdaemonfile.c@@ +2658,3 @@+ g_set_error (error, G_IO_ERROR,+ G_IO_ERROR_FAILED,+ _("Error setting file metadata"));Maybe would be good to specify the error (also in other places), something like:_("Error setting file metadata: %s\n"),_("can't open metadata file")::: client/gdaemonvfs.c@@ +1346,3 @@+ g_free (tree_path);+ }+ }I hope there are changes only in indentation... unfortunately there isn't probably any nice way how to fix it without changing to many lines.::: metadata/metatree.c@@ +395,3 @@ } tree->fd = -1;+ return !tree->for_write;I'm not really sure if it is ok, I need to do more investigation... but makes sense.@@ +479,3 @@+ if (!meta_tree_init (tree))+ {+ g_free (tree);meta_tree_unref (tree)?@@ +480,3 @@+ {+ g_free (tree);+ return NULL;Why not use tree = NULL; to do it same as in other parts of the code...@@ +618,3 @@ meta_tree_clear (tree);++ /* XXX what happens if this fails? */I think we can handle it, see my patch...Createdmetadata: don't crash if meta_tree_init fails (draft)Also I have some debug outputs in meta_tree_init...Review of:::: client/gdaemonfile.c@@ +2658,3 @@+ g_set_error (error, G_IO_ERROR,+ G_IO_ERROR_FAILED,+ _("Error setting file metadata"));OK::: client/gdaemonvfs.c@@ +1346,3 @@+ g_free (tree_path);+ }+ }Yeah, it is just a change in indentation.::: metadata/metatree.c@@ +479,3 @@+ if (!meta_tree_init (tree))+ {+ g_free (tree);OK@@ +480,3 @@+ {+ g_free (tree);+ return NULL;OK@@ +618,3 @@ meta_tree_clear (tree);++ /* XXX what happens if this fails? */OK...Review of:As you said, this is pretty similar to the patch I submitted.However, it is missing the "return !tree->for_write" line which makes setting metadata fail if no metadata tree file exists.E.g. try rm ~/.local/share/gvfs-metadata/*; gvfs-set-attribute ...The following applied on top of your patch should fix it:diff --git a/metadata/metatree.c b/metadata/metatree.cindex 5c320f6..af72c1e 100644--- a/metadata/metatree.c+++ b/metadata/metatree.c@@ -376,9 +376,6 @@ meta_tree_init (MetaTree *tree) fd = safe_open (tree, tree->filename, O_RDONLY); if (fd == -1) {- errsv = errno;- g_warning ("can't init metadata tree %s: %s", tree->filename, g_strerror (errsv));- if (tree->for_write && !retried) { MetaBuilder *builder;@@ -397,9 +394,14 @@ meta_tree_init (MetaTree *tree) } meta_builder_free (builder); }+ else if (tree->for_write)+ {+ errsv = errno;+ g_warning ("can't init metadata tree %s: %s", tree->filename, g_strerror (errsv));+ } tree->fd = -1; - return FALSE;+ return !tree->for_write; } if (fstat (fd, &statbuf) != 0)::: metadata/metatree.c@@ +415,2 @@ {+ g_warning ("can't init metadata tree %s: %s", tree->filename, "wrong size");This would be simpler like:g_warning ("can't init metadata tree %s: wrong size", tree->filename);And same for the others below.(In reply to)Correct... :-) could you merge those patches and add comment, why we are returning !tree->for_write in this case?Maybe this patch could help us to find root cause, why it is crashing so frequently:Also maybe good time to resurrect.Createdmetadata: don't crash if meta_tree_init failsIt fails e.g. when gvfs-metadata dir isn't readable.Createdmetadata: don't crash if meta_tree_init failsThanks. I've been playing with metadata some time. It seems all meta_tree_init callers are handled properly. I've simplify those warnings also as you suggested and remove some whitespace. So I think it is ready for committing and we will see what happens, because the number of crashes wouldn't be due to wrong permissions...Review of:Looks good other than a minor comment::: metadata/metatree.c@@ +399,3 @@+ else if (tree->for_write || errsv != ENOENT)+ {+ g_warning ("can't init metadata tree %s: %s", tree->filename, g_strerror (errsv));Perhaps the message could give some indication of what failed (e.g. open) to differentiate from the other messages.@@ +411,3 @@+ {+ errsv = errno;+ g_warning ("can't init metadata tree %s: %s", tree->filename, g_strerror (errsv));Perhaps the message could give some indication of what failed (e.g. fstat) to differentiate from the other messages.@@ +429,3 @@ {+ errsv = errno;+ g_warning ("can't init metadata tree %s: %s", tree->filename, g_strerror (errsv));Perhaps the message could give some indication of what failed (e.g. mmap) to differentiate from the other messages.Review of:::: client/gdaemonfile.c@@ +2657,3 @@+ {+ g_set_error (error, G_IO_ERROR, G_IO_ERROR_FAILED,+ _("Error setting file metadata: %s\n"),Error messages like this shouldn't end with newlines...::: client/gdaemonvfs.c@@ +1284,3 @@+ {+ g_set_error (error, G_IO_ERROR, G_IO_ERROR_FAILED,+ _("Error setting file metadata: %s\n"),Error messages like this shouldn't end with new lines@@ +1286,3 @@+ _("Error setting file metadata: %s\n"),+ _("can't open metadata tree"));+ res = FALSE;For consistency with the rest of the function, add:error = NULL; /* Don't set further errors */Createdclient: Strip remote dbus error when setting metadata failsWithout this, if the function fails, the error presented to the user lookslike:GDBus.Error:org.gtk.GDBus.UnmappedGError.Quark._g_2dio_2derror_2dquark.Code1:Can't find metadata file /home/ross/.local/share/gvfs-metadata/homeReview of:Looks good.Createdmetadata: don't crash if meta_tree_init failsThanks for the review! Sorry for the delay, I was sick and then on vacation. There is fixed patch. Let's go in...Did you see?I saw it, what's wrong? I've double checked it now. Your notes should be addressed in the.Sorry, I meant, just to differentiate between a few of the error messages (open, fstat and mmap).Createdmetadata: don't crash if meta_tree_init failsAh, sorry, I saw it before, but I've forgotten on it now. That's good idea! There is modified version, hopefully last one :-DReview of:Looks good!Comment onmetadata: don't crash if meta_tree_init failscommitComment onclient: Strip remote dbus error when setting metadata failscommitAlso pushed for gnome-3-14, gnome-3-12, gnome-3-10. Hopefully we will reduce the enormous number of crashes:Thanks Ross for cooperation!Unfortunately this bug isn't still fixed, there are new downstream bugreports (same as before):I made some elaboration on the backtrace. Full bactrace is in the mentioned downstream report. There you can see:The dirent is NULL, so tree->root is NULL. I suspect that this could happen only if meta_tree_init failed (but I would really like to know why).So if e.g. meta-daemon.c:handle_set() is executed and meta_tree_set_string failed, we still execute tree_info_schedule_writeout. If meta_tree_set_string failed due to meta_tree_init (e.g. in meta_tree_refresh), the tree->root is NULL. So there is crash if writeout_timeout is executed. I don't know about different case, when tree->root could be NULL, do you?Unfortunately I don't have idea, how to reproduce the mentioned case. Playing with permissions doesn't work as I intended, because meta_builder_write has to success and consequential meta_tree_init in meta_tree_refresh has to fail...So I think we improved the behavioral by the previous patch, because handle_set() should return error in this case, however did not fix the crashing.Createdmetadata: don't shedule flush if operation failedThere is proposed solution which should remove invalid trees from tree_infos cache and don't allow tree_info_schedule_writeout to be executed.Also different metadata crasher appeared with lot of hits:Unfortunately there isn't much info, but we don't break it (either fix) by the previous patch according package versions...Review of:I've been playing with metadata daemon a bit. The crash with mentioned backtrace can be "reproduced", when I manually inject error in meta_tree_init (to cause what I mentioned before in). The provided patch fixes the crash, however meta_tree_exists doesn't work as intended, because meta_tree_clear sets fd = 0. So, currently if meta_tree_init fails once, metadata daemon doesn't try to read it again (because there is invalid tree in tree_infos cache) and just returns error. I intended to remove it from the cache and try it again next time initially. But hard to say what is better behavioral. It would be really useful to know reason, why it is crashing. If it is just fails when opening tree file due to e.g. lack of memory, or if there are some corrupted files. If there is corrupted file, meta_tree_init never succeeds, but it can succeed in other cases...However in all cases we should to fix at least the consequences to not crash the daemon. We have recently added warnings in meta_tree_init, so if it is crashing for somebody, he can provide the output to determine reason of crashes. Isn't possible to get those warnings from some logs? Or is only way how to get them to run the daemon manually? I can't find them anywhere unfortunately...(In reply to Ondrej Holy from)I answer myself, e.g.:journalctl _COMM=gnome-session | grep gvfsd-metadata > gvfsd-metadata.logCreatedmetadata: return if meta_tree_refresh failedThere is fix for bug which was introduced by the.G_UNLOCK is called twice if meta_tree_refresh fails and also concurrent access is possible on cached_trees. However this isn't problem currently, because meta_tree_lookup_by_name is always called with for_write=FALSE (except for meta-set testing utility), so this if statement is never issuedCreatedmetadata: don't shedule flush if operation failedThere is simplified version of the fix, which requiresto be committed also...Review of:Looks good to me.Maybe we're really seeing a use-after-free situation rather than init failing? meta_tree_unref() clears the MetaTree on last unref.Review of:Can't we just use meta_tree_exists() in writeout_timeout() instead?Although we'd have to change meta_tree_clear() to set fd to -1, not 0. This seems better in general, as there seems to be a risk that we close fd 0 if meta_tree_clear() is called twice.It would be nice to get some debug info back from users though, as this bug seems to indicate we're flushing a tree and creating an invalid file...::: metadata/meta-daemon.c@@ +125,3 @@ if (info)+ {+ if (meta_tree_refresh (info->tree))I'm not super fond of this. The daemon is the only thing that triggers the need for a refresh (when flushing), so this kind of "see if we need to refresh" call in the daemon is kind of weird.We should be able to have full knowledge of when the tree goes bad.@@ +214,3 @@ else {+ tree_info_schedule_writeout (info);This is not enough, is it?We may succeed in a write and schedule a timeout, but then a later set() call fails and makes the tree invalid.::: metadata/metatree.c@@ +644,3 @@ } +/* The tree is uninicialized if FALSE is returned! */uninitializedputting crashes on the blocker listThanks for looking at this...(In reply to Alexander Larsson from)That's another option, but I don't see where it could happen. Metadata daemon has own cache of trees. meta_tree_unref is called only in tree_info_free and tree_info_free is used only as argument of g_hash_table. It seems hash table isn't never destroyed, so only case when tree_info_free can be called is when g_hash_table_insert is called with already used filename. g_hash_table_insert is used only in tree_info_lookup, but tree_info_lookup is called from handle_ callbacks, which should be executed on with one context, so it can't be called concurrently... am I right?(In reply to Alexander Larsson from)>As I wrote before this patch requires[review], which does those changes and I think there isn't difference whether we use meta_tree_exists in meta_tree_flush_locked, or in writeout_timeout...But I don't think it is enough. We shouldn't return tree info with invalid tree from tree_info_lookup.It would be nice, but there is almost anything what we know about:There is over 70 users in CC, however nothing useful, and people doesn't respond - there are unanswered questions from Tomas and me...So what to do when e.g. meta_tree_flush failed due to meta_tree_init and we have uninitialized tree in tree_infos cache?This isn't enough, but doesn't make sense to schedule timeout if there is error...(In reply to Matthias Clasen from)Not sure it is real blocker since this bug is there for several releases (and years!)... We don't have reproducer and people don't responding on downstream bugzilla, probably because it occurs randomly and rarely.(In reply to Ondrej Holy from)Fair enough. I just saw it swim by in my bug stream and picked it up. Let me drop it again.Comment onmetadata: return if meta_tree_refresh failedcommit>This is the million dollar question is it not. When we failed to write out an updated tree last time we lost all the data in the previous tree. Now we crash when flushing out the new journal entries because of the NULL tree->root.Can't we just skip the copy_tree_to_builder() call if root is NULL and accept the fact that we lost the data. Delaying the writeout schedule is not going to bring back the data, but delaying it forever will lose the *new* data we've gotten since then.Patch to always clear fd to -1 was already pushed as:commitCreatedmetadata: don't crash if write out failedCreatedmetadata: don't crash if write out failedReview of:Looks good to meReview of:Looks good to me, but I don't know the code so well :-)::: metadata/metatree.c@@ +2365,3 @@+ {+ /* It shouldn't happen. We failed to write out an updated tree+ * probably, therefor all the data are lost. Backup the file andthereforeComment onmetadata: don't crash if write out failedI've pushed it only into master and let's see what will happen...commitComment onCheck if MetaTree exists before flushing itMarking as obsolete, because those changes are already in by another commits:commitcommitComment onNuke metadata file if magic blob is wrongMarking as obsolete, see.	69.0	id=728702	12	False	False	wim.taymans	1
id=683976	REOPENED	doxygen	general	1.8.1.2-SVN	Other Windows	Normal normal	Dimitri van Heesch	2012-09-13 17:13 UTC by	albert	2013-01-06 10:31 UTC (	0 users	HTML has the possibility to have metadata information tags. In Firefox this can be viewed with "View Page info" (right mouse button).It would be nice that Doxygen would show itself with its name and version number.	CreatedPATCH: added matadat with doxygen name and versionThis patch shows in the generated pages the metadata with name generator signaling that the page has been generated by Doxygen and it also gives the Doxygen version.Thanks, I'll include the patch in the next update.The problem is the same as with the implantation with the implementation of, the version written to the html header file should be the version that generated the html header file and not the current version of Doxygen. For the searchindex.xcpp the implementation is correct as here the versionString of the creating version is used.This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.8.3. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional informationthat you think can be relevant.See.	5.0	id=683976	5	False	False	dimitri	1
id=772379	REOPENED	gnome-calendar	Backend	unspecified	Other All	Normal normal	GNOME Calendar maintainers	2016-10-03 20:49 UTC by	Victor Toso	2016-10-14 06:30 UTC (	3 users	Cheers!	Createdwindow: Fix leak of event_creation_data structAnd also be sure to set its pointer to NULL by using g_clear_pointer()8,830 (24 direct, 8,806 indirect) bytes in 1 blocks aredefinitely lost in loss record 17,999 of 18,078 at 0x4C2FA50: calloc (vg_replace_malloc.c:711) by 0x99CE981: g_malloc0 (gmem.c:124) by 0x99CEC64: g_malloc0_n (gmem.c:355) by 0x44CD43: show_new_event_widget (gcal-window.c:731) by 0x976FC57: ffi_call_unix64 (in /usr/lib64/libffi.so.6.0.2) by 0x976F6B9: ffi_call (in /usr/lib64/libffi.so.6.0.2) by 0x952703B: g_cclosure_marshal_generic (gclosure.c:1490) by 0x95258B9: g_closure_invoke (gclosure.c:804) by 0x9541D25: signal_emit_unlocked_R (gsignal.c:3635) by 0x954105C: g_signal_emit_valist (gsignal.c:3391) by 0x954170B: g_signal_emit_by_name (gsignal.c:3487) by 0x4324D8: show_popover_for_position (gcal-month-view.c:305)Createde-cal-data-model: fix critical due invalid time rangelibecal-CRITICAL **: e_cal_recur_generate_instances_sync: assertion'icaltime_compare (interval_start, interval_end) < 0' failedpushed as- window: Fix leak of event_creation_data structpushed as- e-cal-data-model: fix critical due invalid time range(In reply to Georges Basile Stavracas Neto from)Did you share that last commit with eds maintainers? That code is from evolution itself.Hi Milan,As per, is there something to be cherry-picked here?Hi, if you meant commit, then it's only a workaround. Do you know how that happened and why the start is after the end? That's obviously a bug of the caller, not of the routine where you did the change (which is common with the evolution). Note that the start time is usually inclusive, while the end time is usually exclusive, thus if you specify 2016-10-13 - 2016-10-13, then it doesn't mean whole day, the whole day is 2016-10-13 - 2016-10-14.(In reply to Milan Crha from)Ah, indeed.Right. The whole ECalDataModel is local code. The warning was issued due both interval_start and interval_end being 0; Likely it was never set.So, even with the workaround, time (NULL) will not do what I expected it to do as it will not get the events of that day.Thanks for clarifying, I'll re-open this bug so we can fix it properly.It might take some time as this is not trivial to me :)(In reply to Victor Toso from)Just a note, that code is "shared with evolution" in a sense that it had been written for the evolution and then copied to the gnome-calendar. We try to keep them in sync, thus everyone can benefit from particular fixes.I see. Using <0,0> interval is forbidden since 3.20 or so, on the evolution-data-server side. It used to mean "give me everything", which is a problem for recurring events which recur forever. Once you'll find why the function is called with no time interval set (maybe it's called too early in the code), then you'll have proper fix for it. If it also means that you fire q request, which you discard shortly afterwards, then it can be a huge performance hit (consider the recurring events again). Just do not forget to revert the workaround commit, either separately, or at least when you'll have the right fix.	8.0	id=772379	9	False	False	georges.stavracas	1
id=762265	REOPENED	gnome-music	general	3.19.x	Other Linux	Normal normal		2016-02-18 14:39 UTC by	Jakub Steiner	2016-07-12 16:51 UTC (	6 users	Createdmedia controls on top serve a better purpose of information & control.With the new media control landing in the shell, Music no longer needs to duplicitly notify me of a track change.	Can I work on this? Although I have contributed to open source projects, this will be my first time contributing to something significant as GNOME or Linux.(In reply to Ashhar Hasan from)sure.I am more accustomed to the pull and merge concept. How do I generate a patch once I have committed my changes? And do I need to squash my commits into a single commit or can I add multiple commits.(In reply to Ashhar Hasan from)You can use git format-patch or git-bz (which I recommend).And do I need to squash my commitsAdd as much commits as necessary.Hi! I've a patch for this bug. Wondering if I should go ahead and submit it in case Ashhar is not working on it anymore.(In reply to Gaurav Narula from)Go ahead. I had some issues with setting up the dev environment behind a proxy.It'll take me time.Createdremove notification on track changeThe patch removes the listeners and handlers for track change events in notification.py.Review of:Thanks for your patch.I think this needs to be reopened/reworked.I don't think media controls equals notifications, they're two different things. With the current design we actually never get a (pop-up) notification on track change. The shell date/time (center) menu has no indication theres actually anything going on there in terms of music change/controls when it's closed.The only duplicity is the track being shown in the date/time MPRIS based media section and in the notification section of the date/time menu. I think that's something for the shell to handle (there seems to be no way around it afaics).If the notifications are gone and we want to keep it that way, then the whole class can be ditched. notification.py is non-functional code as it is right now.(In reply to Marinus Schraal from)I agree. I would like to hear what Allan Day thinks about it.(In reply to Felipe Borges from)I agree with Jakub's original bug report - I don't think we want duplication of the notifications in the shell's drop down. And I don't think that showing notifications for every track change is a good default behaviour - it's far too distracting.(In reply to Allan Day from)<snip>Well this is rather non-conforming behaviour then, all notifications have a corresponding entry in the gnome-shell drop down, except music: it is in the notification block, but it doesn't have a notification. The whole media control thing in a drop down is low discoverable, if you didn't know it was there you would never look for it. It's all rather odd.Personally I find it at times useful to know whats coming up, so I can skip or change music completely (think of shuffling lots of songs) . Yes, it can be distracting, but notifications can be disabled in gcc if need be.	12.0	id=598561	44	False	False	gicmo	1
id=750613	REOPENED	evince	general	3.16.x	Other Linux	Normal normal	Evince Maintainers	2015-06-09 05:47 UTC by	O.Martin	2016-05-24 00:39 UTC (	0 users	The Odd Pages Left option is grayed out when you are not viewing a document in Dual page mode. After switching to Dual, the option is still grayed out until you either change the zoom level or view a new page.When you switch from Dual to Single page view, the option is still available until you change the zoom level or view a new page.The option should be available immediately in Dual, and grayed out immediately in Single, or it should always be available, since it doesn't affect anything in Single page view.	In conjunction with thisthis means that in order to view a document in Dual mode, with odd pages on the right, you must:1. Open a document.2. Check Dual page option3. Zoom in (or page forward)4. Zoom out (or page back)5. Check Odd Pages Left option6. Uncheck Odd Pages Left optionNot seeing this anymore as of 3.18.2Marking as resolved.The related issue () still stands.This is back as of a more recent build of 3.18.2, from Fedora repo.Marking as reopened.	3.0	id=762265	15	False	False	jimmac	1
id=492974	REOPENED	DrWright	general	unspecified	Other Linux	Normal normal		2007-11-03 10:10 UTC by	Josselin Mouette	2013-11-28 15:43 UTC (	9 users	[ Forwarded fromby Karl Chen ]I have two monitors with two Screen definitions in my xorg.conf.When the typing break enforcement feature of gnome-typing-monitor locks the screen, it only locks one of the screens.	Can't recreate this issue with my two screen/two monitor, This might be fixed, need info from Karl Chen on details of his setup100% true. I use 2 screens with xrandr extension. Postpone button is out of the "locked" screen and another screen is totally functional: I can do anything on it.Another downstream report isI have not seen this in Fedora 8 in Zaphod mode (two separate screens, :0.0 and:0.1) - maybe theis from the Zaphod mode? The bug is present in Fedora 9 (control-center-2.22.1-4.fc9.x86_64) in xrandr mode (i.e. single virtual screen spanning over two physical monitors).Moreover, when the cursor is on the second screen, the typing monitor locks only this screen, but under the grey stripes there is a screenshot from the _first_ screen.I have not tested Fedora 8 with xrandr (I have no F8 with dual head anymore) nor Fedora 9 with Zaphod mode (the ATi driver in F9 does not work for me in Zaphod mode).I see this using nvidia TwinView, Debian testing with g-c-c 2.22.1. The unlocked screen responds to mouse input, but not keyboard.This bug is still present in gnome 2.24 (Fedora 10). Any chance of getting it fixed?I tried to blockwith this bug as Federico asked, but failed for lack of permissions.Still present in GNOME 2.28 (Fedora 12). Is anybody working on it?Createda patchI see this with multiple monitors and no compositing manager. What is happening is that the window has a size of 200x200 at the time the background pixmap is set, because the window manager doesn't respect the default size (I think). This patch gets the window manager out of the equation by making the window override-redirect, which is arguably more correct anyway.One thing that is still not handled here is correctly locking of dynamically appearing monitors, ie plug in a monitor while the typing break is active.Another improvement would be to repeat the 'typing break' message on all monitors, since the slightly grayed out appearance is not exactly obvious without the message.Oh, and it should show the controls on the primary monitor, not just on monitor 0.Comment ona patchIndentation is off once again, please commit with that fixed.Created[typing-break] Lock all the screensGray out all the monitors properly when the typing break is on.Comment on[typing-break] Lock all the screensCommitted to gnome-2-28 and masterI think this patch is broken: with the latest gtk you get:(gnome-typing-monitor:14132): GLib-GObject-WARNING **: IA__g_object_set_valist: construct property "type" for object `DrwBreakWindow' can't be set after constructionApparently in control-center-2.30.1-2.fc13.x86_64 (Fedora 13) the bug is back. As far as I can tell, it has disappeared in Fedora 12 (control-center-2.28), but reappeared in 2.30.In addition to that, in 2.30 it sometimes does not gray out _any_ screen, leaving the user confused. The only sign that typing break is in progress (apart from losing the keyboard input) is the notification-area applet, which is red non-blinking. I can use the mouse, but not the keyboard.Another problem (probably worth a separate bug report?) is that it does not count the time the screen has been locked: yesterday I left my computer locked (gnome-screensaver) with just few minutes remaining to the typing break, and the typing break occured today almost immediately after I unlocked the screen and started working. This is probably related to this downstream bug "Typing break does not count suspend time":***has been marked as a duplicate of this bug. ***Mass move to DrWright module. The code has been removed from the control-center, and put back in the drwright module as its interaction with the GNOME 3.x experience was not defined.SeeThis is still happening in version 3.5.0, gnome 3.10	17.0	id=492974	25	False	False	internet	1
id=736517	REOPENED	gobject-introspection	general	unspecified	Other Linux	Normal normal	gobject-introspection Maintainer(s)	2014-09-12 00:19 UTC by	Simon Feltman	2017-02-16 21:58 UTC (	6 users	A handful of leaks are showing up in pygi unittests when run through valgrind due to leaky tests in both gimarshallingtests.c and regress.c. Patches to follow.	Createdtests: Unref async result after adding to idle callbackg_simple_async_result_complete_in_idle() will add its own reference formanaging the async result. We need to unref the result after calling thisso we don't leak.Createdtests: Free input array in test_array_int_inout()Transfer is annotated as full so the function should free its input.Createdtests: Usage a single allocation for test_ghash_gvalue_returnUse a single static allocation for the hash created in regress_test_ghash_gvalue_return().This function is explicitly marked as returning the hash with transfer-noneand doesn't need to re-create the hash each call.Review of:okay.Review of:okay.Review of:::: tests/scanner/regress.c@@ +1258,1 @@+ if (hash == NULL) {coding style: new line before the curly brace.Createdtests: Free input string in regress_test_utf8_inout()Transfer is annotated as full so the function should free its inputafter testing and before output assignment.Review of:looks good.[Mass-moving gobject-introspection tickets to its own Bugzilla product - see. Mass-filter your bugmail for this message: introspection20150207 ]Fixed up the style issue, an pushed all 4 of these patches. Thanks!The "tests: Free input string in regress_test_utf8_inout()" patch breaks the "everythingBasic.js" test in GJS. Haven't yet looked whether this is a GJS bug or a gobject-introspection one though.Still an issue	12.0	id=750613	4	False	False	onmcommerce	1
id=695053	REOPENED	GIMP-manual	English	2.8	Other All	Normal normal	Alexandre Prokoudine	2013-03-03 13:51 UTC by	Michael Schumacher	2016-06-03 01:16 UTC (	2 users	In, the docs mix export back into a 'save' operation by trying to tell users that they choose export to save to different formats.This has to be avoided, the export operation should only be called export, and not save.Examples:"To save this image in a format other than XCF, you must use Export. ""Most of the file formats that GIMP can open, can also be used for saving."	Why did you introduce yet another term?"The Export command is now used to store images""store" is a more general term that replaces "save" or "export"."save" in GIMP is specific, reserved to XCF files. "Maybe, but we really want people think in terms of "save for XCF, export for anything else".In that case, "Save" is too ambiguous (and source of many recriminations from gimp users). You have to use a more specific term for this concept in the UI. With "Save-XCF" in GIMP's UI, there would be no problem."GIMP uses Save and Export to save images" is not possible, and "The Export command is now used to save images" also."GIMP uses Save-XCF and Export to save images" and "The Export command is now used to save images" are both possible.Maybe you are not aware ofReopening, I'll fix it.	6.0	id=736517	23	False	False	s.feltman	1
id=753101	REOPENED	epiphany	General	3.16.x (obsolete)	Other Linux	Normal normal	Epiphany Maintainers	2015-07-31 13:51 UTC by	Michael Catanzaro	2017-02-20 17:44 UTC (	0 users	The search provider lives forever after it's started; it's supposed to exit after one minute. InI attempted to fix this, but it didn't work.	Works fine in 3.22.3.23 has another problem:.Closing.(In reply to Michael Catanzaro from)Wrong. It *sometimes* quits after one minute, like it's supposed to, but *sometimes* it really does live forever. Today I noticed my Ephy 3.22.6 search provider had been running for over 20 minutes.	2.0	id=695053	12	False	False	roman	1
id=764275	REOPENED	gnome-shell	window-management	unspecified	Other Linux	Normal normal		2016-03-28 07:02 UTC by	Semyon Sadetsky	2016-05-19 15:42 UTC (	4 users	According to Extended Window Manager Hints specification:_NET_WM_STRUT_PARTIALBut I cannot found them in gnome3 desktop when Xinerama is used. Nevertheless the the space is reserved on the screen by gnome3's top bar.As result in OpenJDK project we cannot obtain screen insets in multi-monitor mode on RedHat and Oracle Linux which use gnome3 as a default desktop.Link to the code that we use:	No, _NET_WM_STRUT (and _NET_WM_STRUT_PARTIAL) are for clients to inform the window manager that they would like to reserve space. Clients themselves should not attempt to read _NET_WM_STRUT or _NET_WM_STRUT_PARTIAL, as the window manager might itself constrain windows in any way it chooses.Clients should read the _NET_WORKAREA property on the root window.In case of Xinerama usage there are only one "joint" root window which working area may not describe exact geometry of individual screens. How can we get individual screen insets in gnome3? In Unity with Xinerama _NET_WM_STRUT_PARTIAL works and let us to get reserved areas per each screen.(In reply to Jasper St. Pierre (not reading bugmail) from)Hi, JasperI ran into a similar issue as this one. The Gnome3 bar/panel at the top of the monitor does not have any STRUT property. This only occurs with Gnome3, not persists on Unity, Xubuntu-desktop and Gnome2. Due to this limitation, I cannot get the size & location of the panel. Attach the code that we use to examine the panel:#include <X11/Xlib.h>#include <X11/Xatom.h>#include <limits.h>#include <stdlib.h>#include <stdio.h>static Display* display;// looks for the maximum "docking height" of all children of this windowstatic int top_panel_height(Window window){ int height = 0; // maximum height Window w; Window* children; unsigned int n_children; XQueryTree(display, window, &w, &w, &children, &n_children); // looks for each one of the children int i; for(i=0; i<n_children; i++) { // this is the property we're looking for Atom strut = XInternAtom(display, "_NET_WM_STRUT_PARTIAL", False); Atom type_return; int actual_type; unsigned long nitems, bytes; unsigned char* data = NULL; // load window attributes (we only want to know about the // windows where y = 0) XWindowAttributes xwa; XGetWindowAttributes(display, window, &xwa); // load the property _NET_WM_STRUT_PARTIAL int s = XGetWindowProperty(display, window, strut, 0, LONG_MAX, False, XA_CARDINAL, &type_return, &actual_type, &nitems, &bytes, (unsigned char**)&data); if(s == Success) { Atom *state = (Atom *) data; // state[2] contains the "dock height" if(xwa.y == 0 && nitems > 0 && state[2]) { printf("can get property\n"); if(state[2] > height) height = state[2]; } } // recursively, traverse the tree of all children of children int children_max_height = top_panel_height(children[i]); if(children_max_height > height) height = children_max_height; } return height;}int main(){ display = XOpenDisplay(NULL); Window root = RootWindow(display, DefaultScreen(display)); printf("%d\n", top_panel_height(root)); return 0;}(In reply to Jasper St. Pierre (not reading bugmail) from)It only works for single monitor to read the _NET_WORKAREA property on the root window. If I have 2 monitors like: 222111111222111111222111111222 222the panel is at the top of monitor1, but the _NET_WORKAREA property shows the work area is: 111111222111111222111111222struts aren't a reliable way to know where the panels are, in general, either. consider two vertically stacked monitors with a panel in between them. There's no way to mark that panel with a strut. struts can only mark panels on the outside edges of the combined screen.(In reply to Ray Strode [halfline] from)Since struts aren't a reliable way to know the position of the panel for single monitor or multi monitor situation, we are still suffering from how to get the position of struts in Gnome3 with single(multi) monitor. Are there any alternative way to realize this ? This problem only occurs on Gnome3, struts seem reliable on unity, Gnome2, Xubuntu-desktop. Thanks(In reply to shiyufeng1990 from)What Ray was saying: if you have a panel at a shared monitor edge (for example: a monitor *above* the one with the top bar), then struts cannot be used to indicate the panel position without rendering an entire monitor unusable. So depending on the layout, the answer on *any* desktop might be "there are no panels, go ahead", when in fact the panels just aren't included in struts.There is simply no reliable available-area-for-monitor-x API. That is, besides maximizing your window and allow the WM/compositor to figure it out.	7.0	id=764275	8	False	False	jstpierre	1
id=317446	REOPENED	doxygen	documentation	1.4.x	Other Windows	Normal normal	Dimitri van Heesch	2005-09-28 15:47 UTC by	Ryan H Kawicki	2005-10-10 16:17 UTC (	0 users	Two member groups: Types and Accessors.Types contains documentation not at the source./** @name Types *///@{/** \enum CText::Alignment * \brief Brief * Description *//** \var CText::Alignment CText::LEFT * \brief Left * Description *///@}/** @name Accessors */\//@{/**\brief Returns the alignment.\return Alighment value.*/int CTest::Alignment( ) const{ return m_nAlignment;}//@}I would expect to see the enumeration in the grouping of 'Types' and thefunction to be in the grouping of 'Accessors', but the function gets moved outof 'Accessors' and placed into 'Types' and the enumeration is only associated to the defalut of 'Public Types'.	Hi Ryan, can you attach a more complete example (e.g. including the CTestclass)? Please also mention the version of doxygen you are using (doxygen--version from the command box).---------- In CTest.h ----------/**\brief A test classThis test class will be used to test member grouping in Doxygen.*/class CTest{public: // public enumeration enum Alignment { ENUM_1, ENUM_2, NUM_ENUM }; // returns a number int Alignment( ) const;};---------- In CTest.cpp ----------#include "CTest.h"/** @name types *///@{/**\enum CTest::Alignment\brief Alignment enum.Alignment enumeration.*//**\var CTest::Alignment CTest::ENUM_1\brief Enum 1.Alignment enumeration 1.*//**\var CTest::Alignment CTest::ENUM_2\brief Enum 2.Alignment enumeration 2.*//**\var CTest::Alignment CTest::NUM_ENUM\brief Max Enums.Maximum alignment enumerations.*///@}/** @name Accessors *///@{int CTest::Alignment( ) const{ return 0;}//@}---------- Generated In HTML ----------Types int Alignment( ) constPublic Types Accessors enum Alignment { ... }This is wrong. The function should be in the Accessors and the enumeration inthe Types.Doxygen version 1.4.4Copyright Dimitri van Heesch 1997-2005Confirmed. The problem was due to the use of Alignment as a function *and* anenum, while documenting the enum using \enum and having both items in a membergroup. Should be fixed in the next release.This bug was resolved to status "FIXED" as part of a group change. Please verifythat this bug is indeed fixed in doxygen version 1.4.5 (or later). If not thenplease reopen the bug, so it stays on my radar.Using the same test scenario from above, the generated HTML sets the enumerationcorrectly but drops the Accessors group completely, so the function that wouldbe apart of Accessors is not visible.	5.0	id=317446	7	False	False	dimitri	1
id=740424	REOPENED	mutter	general	3.13.x	Other Linux	Normal normal		2014-11-20 11:59 UTC by	Alexander Larsson	2015-12-21 21:19 UTC (	7 users	It seems that at some point the frame-clock synchronization broke.I'm attaching a patch that makes the alpha window test in testgtk draw really slowly (using the magic of sleep(1)) which makes this very visible. The windowis resizing once a second, but the actual window contents is lagging one frame.	CreatedTEST ONLY: Make alpha window testgtk test redraw slowlyTestcase forAny idea owen?I tried to bisect, but this seems to happen back to at least gtk 3.12.0Also tried with an older cairo (first snapshot with hidpi support), same results. Maybe we regressed in gnome-shell? (Using F21 here)alexl: Can this problem still be seen?Asking as this is set as a 3.16 "GNOME Target"...still happening, yesCreatedstandalone testcaseI'm attaching an standalone testcase that allows modifying the sleep() duration, local experimentation (changing the timer and resizing the window continuously) shown some things:- For "frequent" refresh values (below ~540ms here, this barrier is blurry though), frame sync seems to work alright, contents and window frame always match size, even on noticeable delays.- From there on, it is quite frequent here that window resizes start out of sync after I change the timer, but if I stop moving the pointer and let window size catch up, resizes come out in-sync after that.- I hit another behavior change at ~980ms, where frame sync becomes broken as described here.In these last 2 stages, I occasionally saw mutter temporarily allowing free resize of the frame, which seems to hint that it's fooled into thinking frame sync doesn't apply.Probably also worth mentioning, this doesn't happen on wayland, so seems something in x11 backends.So, the ~1s behavior barrier is apparently a timeout in mutter, blacklisting the window as "irresponsive". I'm however attaching a mutter patch that improves the behavior seen on step #2.As for the 1s timeout itself, we might perhaps just make it a bit longer, 1s delay is not something completely unreasonable on clients over the wire.Moving to mutter for the rest of discussion, it's all apparently fine in the GTK+ side.Createdx11: Cut some slack to clients doing slow draws/resizesThe timer to blacklist the window from frame sync is set at the time ofissuing the sync request, but not removed until the client replies tothe most recent wait serial.This means that if the client is slowly catching up, the timeout wouldfire up regardless of the client slowly updating the alarm to oldervalues.Fix this by ensuring the timeout is reset everytime the sync requestcounter is updated, to acknowledge the client is not irresponsive,just slow.Review of:Makes sense to mepushed as- x11: Cut some slack to clients doing slow draws/resizes(In reply to Carlos Garnacho from)This sounds off to me. The entire point of frame sync is to avoid "catch up" - there should be only *one* in-flight sync request at a time. I'm wondering if what you are *actually* doing is resetting the counter on the start of the frame - when GTK+ updates the counter to an odd value before redrawing the window. I don't think there's much justification for that.Maybe this is NOTABUG? or maybe there is some problem with the handling of "marked broken clients" that use extended frame sync - the idea is that once we mark a client broken we should be resizing the frame fluidly - not slowly but out of sync. (Of course, marking a CSD client as broken probably doesn't make sense.)I've reverted the patch, and reopening here. Something might still be off, as per case #2 on. It seemed to me as if 2 requests (accounting for more than 1s together) would accumulate. This case deserves some more investigation.Still, I don't think it is something to set back on the 3.16 target, this is after all a feature meant to trigger, just that it sometimes happens unintendedlymoving off targetPatch is still marked as ACN. I assume this should be rejected.	15.0	id=703181	20	False	False	dwmw2	1
id=776211	REOPENED	nautilus	Desktop	3.22.x	Other Linux	Normal normal	Nautilus Maintainers	2016-12-17 15:22 UTC by	Felix Schwarz	2016-12-20 15:29 UTC (	3 users	Since("files does not present the desktop when running under wayland") was fixed I now see desktop icons when using Wayland (Fedora 25). However I can not drag a desktop icon (AFAIU nautilus with xwayland) into another nautilus window (which should run with wayland). Instead it seems like the nautilus window would just not exist. The desktop icon is moved exactly where I dropped it but not in the nautilus window (= different folder) but it stays on the desktop.	After a reboot (+ a few fedora updates?) I can not reproduce this anymore.(In reply to Felix Schwarz from)I can still reproduce this on Debian testing, with nautilus git master (jhbuild).Can you please reopen, I shall do the follow up with csoriano.Thanks.(In reply to Mohammed Sadiq from)Are you sure your desktop binary is from jhbuild too?(In reply to Carlos Soriano from)Yup. I killed nautilus-desktop and ran 'jhbuild run nautilus-desktop'.But nautilus-desktop ran /usr/bin/nautilus behind my back. I removed the system installed nautilus, and tested again. I can no longer reproduce this bug.Sorry for you time.I just wanted to mention that I'm seeing the bug again. I'll leave the ticket closed as this seem to be fixed on master.I guess I could not reproduce this because I switched between Wayland/X.org without a full reboot. After a reboot I'm seeing exactly the same problems as described in my original report.(In reply to Felix Schwarz from)Sorry. This isn't fixed in master. I ran the test in X11. This is still present in wayland.	6.0	id=740424	18	False	False	alexl	1
id=703181	REOPENED	libsoup	HTTP Transport	2.44.x	Other Linux	Normal normal	libsoup-maint@gnome.bugs	2013-06-27 11:30 UTC by	David Woodhouse	2014-11-02 15:34 UTC (	2 users	I have automatic NTLM authentication working, via the /usr/bin/ntlm_auth helper (which normally comes with Samba/winbind and works when you log in using your domain credentials, but there's also a test hack atwhich you can compile with appropriate -D options and drop into /usr/bin/ntlm_auth instead for simple testing.)When Evolution starts up, it asks me for a password.I type "lyou do not need this" and hit enter. Then everything works perfectly fine.I'm a little confused by the authentication flow here. It looks like it *is* correctly hooking the 'authenticate' signal on the soup connection, but then it's asking for a password even before that signal is triggered? Why?	This gets even more fun when I torture it by giving the ntlm_auth helper a *wrong* password. In that situation, libsoup *does* emit the 'authenticate' signal to ask us for a better password. We ask the user again... and then don't actually bother to feed the resulting password back to libsoup to try with it.I don't really know how the authentication flow is *supposed* to work here, so it's hard for me to propose a fix.I wonder if it's right that libsoup invokes our 'authenticate' callback with 'retrying=1' when in fact it's only the SSO authentication attempt which failed. That makes us think that our own password was the one which didn't work, and forget it immediately.So we never actually *do* feed the user-entered password in to soup_auth_authenticate(), in our 'authenticate' signal handler.I tried hacking our signal handler (ews_connection_authenticate()) to behave as if retrying=0, and feed the user-entered password in anyway. It doesn't work; we just get called again immediately. That part might be a libsoup bug; I don't see why it's not using the password we gave it.(In reply to)That part is. However, even with my patch for that, libsoup is still emitting the *first* authenticate signal with 'retrying=TRUE', causing Evolution never to actually feed it a password.There's a loop in e_source_registry_authenticate_sync() which will repeatedly ask for a password and attempt to authenticate to the server with it.That loop seems to be wrong. It should attempt to authenticate to the server once *without* a password, for auth methods where that's appropriate (like NTLM).Let's forget EWS/libsoup for now. This looks to be broken even when the authentication is done with camel-sasl-ntlm.Evolution's mail_session_authenticate_sync() will actually check the result of camel_sasl_try_empty_password_sync(), and will not even *attempt* to call e_source_registry_authenticate_sync() if it returns TRUE. There's a comment complaining that …try_empty_password_sync() should return a CamelAuthenticationResult instead of a gboolean but I think that's because someone's missed the point. That function returns true if it's possible to *try* using automatic authentication. It doesn't mean it's actually tried it and it worked!So we need to fix that, and still call into the e_source_registry_authenticate_sync() loop even for camel-sasl-ntlm users when camel_sasl_try_empty_password_sync() is TRUE.And then we hit the same issue. The loop needs to try once *without* a password for sources which support that, and only start prompting for a password on the *second* time round the loop.Simple test case: FetchBuild it with *incorrect* password details: gcc -DTEST_HACK -DDOMAIN=foo -DUSERNAME=bar -DPASSWORD=fish $(pkg-config --cflags --libs glib-2.0) -o ntlm_auth ntlm_auth_v2.c Install it at /usr/bin/ntlm_auth Configure an IMAP account with NTLM authentication.Watch it not even *ask* you for a password, even though the automatic one is failing.In fact this new ESource authentication stuff is broken in IMAPX even if /usr/bin/ntlm_auth is *working*. Like EWS, it depends on camel_imapx_server_authenticate() being called.CreatedEMailSession patchThe docs should be clarified that try_empty_password() means *you* try, not the method will try, as the name is otherwise misleading.Here's roughly what I think needs to change in e-mail-session.c.Not yet tested. The rest is up to ews.If the patch fixes imapx+ntlm then we should be able to make ews work, sure.Thanks.Evolution patch pushed to master and gnome-3-8 with minor fixes; thanks.There was another failure with IMAPX, because the NTLM SASL mechanism wasn't even trying the ntlm_auth helper unless camel_sasl_try_empty_password_sync() had been called on that specific sasl instance. Fixed in:For EWS the fix looks something like this. But why is the auth-mechanism always NULL? It's always NULL when ews_auth_mech_to_use_ntlm() looks at it too. --- a/src/camel/camel-ews-store.c+++ b/src/camel/camel-ews-store.c@@ -496,6 +496,8 @@ ews_connect_sync (CamelService *service, EEwsConnection *connection; CamelEwsStore *ews_store; CamelSession *session;+ CamelSettings *settings;+ gchar *auth_mech; gboolean success; ews_store = CAMEL_EWS_STORE (service);@@ -510,12 +512,17 @@ ews_connect_sync (CamelService *service, } session = camel_service_ref_session (service);+ settings = camel_service_ref_settings (service); /* Try running an operation that requires authentication- * to make sure we have a valid password available. */+ * to make sure we have valid credentials available. */+ auth_mech = camel_network_settings_dup_auth_mechanism (+ CAMEL_NETWORK_SETTINGS (settings)); success = camel_session_authenticate_sync (- session, service, NULL, cancellable, error);+ session, service, auth_mech?:"NTLM", cancellable, error); + g_free (auth_mech);+ g_object_unref (settings); g_object_unref (session); if (success)@@ -966,14 +973,6 @@ ews_authenticate_sync (CamelService *service, password = camel_service_get_password (service); - if (password == NULL) {- g_set_error_literal (- error, CAMEL_SERVICE_ERROR,- CAMEL_SERVICE_ERROR_CANT_AUTHENTICATE,- _("Authentication password not available"));- return CAMEL_AUTHENTICATION_ERROR;- }- settings = camel_service_ref_settings (service); ews_settings = CAMEL_EWS_SETTINGS (settings);I also get password prompts as soon as I start evolution-source-registry. And when I open the account preferences.Current status: Evolution is half-fixed with the patch inalthough there are open questions about that, and it isn't committed.evolution-source-registry and probably the other factories are also still demanding passwords that they aren't going to use.Matt, any further enlightenment you could offer in this would be much appreciated; thanks.You don't have to really join a domain with samba/winbind; there's a simple test in. (Build it with a *real* user/password that works first time; let's not worry about the fallback case for now.)***has been marked as a duplicate of this bug. ***Createdproposed eds patchfor evolution-data-server;This adds a new virtual function ESourceAuthenticatorInterface::get_without_password plus a new D-Bus property org.gnome.evolution.dataserver.Authenticator::WithoutPassword (thus changes public API) which is used to determine whether the authenticator requires real password or not.The authentication_session_execute_sync() asks for the property and if the password is not required, then it tries to authenticate with an empty password (NULL is not allowed, and I didn't want to change this constraint). If it fails for whatever reason (except of cancelled), then the user is asked for the password and the authentication continues as before. Quite like Camel does it.Createdproposed eds patch ][for evolution-data-server;Err, I forgot to update the patch with increased API versions. The text from the above comment still applies.Createdproposed ews patchfor evolution-ews;Slightly painful to propagate the option to all the related places.Anyway, please note of added ews_connection_schedule_abort(), for some reason, libsoup failed to authenticate without this call when the ntlm_auth returned failure. I guess it can have side-effects, but I do not have anything better right now. Maybe it's the libsoup bug.It's a shame the libsoup package hasn't been fixed in Fedora yet. I have a scratch build atwhich fixes GNOMEandand should help.Did you manage to find time for the patch testing, please?Thanks for the patches. Yes, these appear to work.Some minor nitpicks: - I don't like having another strcmp("PLAIN") when we already have something similar in ews_auth_mech_to_use_ntlm(). That's too much of a hack to have it in more than one place, especially when we are hoping to add Kerberos support into the mix soon. Not immediately obvious how to avoid the duplication though, unless we do something like reading the "use-ntlm" property on the soup session. Which is also not ideal. - EWS shouldn't simply assume that it can try without a password for NTLM, should it? The SASL try_empty_password() call doesn't. It returns true only if ntlm_auth at least *appears* to be trying to talk to us. - What about other back ends, if they use SASL directly (which EWS doesn't). Can we make this work for them automatically according to the SASL mech that they use? Or is that not viable? Do other back ends even *use* SASL or is that only really for camel, which isn't factory-ised yet? - I really don't like having to bump the soname just for *adding* a method. Normally we ought to be able to keep the soname the same, and just add the new method with a new version. We'd have to add the new field to the *end* of the ESourceAuthenticatorInterface structure, and maybe some other compatibility issues. But it should be do-able. But that's probably something we need to discuss separately rather than as part of this patch. I would *really* like to get some version of this into gnome-3-8 though, as SSO *partly* works there and I consider it a bug when my users are asked for a password which I'm *trying* to teach them they should never have to type after logging in. Especially when it isn't even *used* :) - Even withfixed, the ews_connection_schedule_abort() is needed. Otherwise, we end up in ews_connection_try_password_sync() with the password '' even after I've typed the *correct* password into the prompt. I'd like to understand why...Aha, we need to abort because we are not using libsoup properly.We shouldn't *be* playing silly tricks to determine whether we can try with the empty password or not.The API is simple: We call libsoup. If it needs a password, it *asks* for one by invoking the 'authenticate' signal and we're supposed to call soup_auth_authenticate() with a password.In my test case I have the standard Samba ntlm_auth but winbind doesn't know my password so it's failing fast and the SASL NTLM try_empty_password() method would actually have returned FALSE. There is no SSO here (which is the common case for most users).But your EWS patch makes it try anyway. And libsoup wants a password, it so sends the authenticate signal. And ews_connection_authenticate() is called and is *expected* to call soup_auth_authenticate() with a password.But it doesn't, because it doesn't have one.So the code in soup-auth-ntlm.c just goes ahead and generates an NTLM request with the password hashes which are in its state structure, initialised to all zeroes. Which obviously doesn't work. And then when it fails, it sets its state to SOUP_NTLM_FAILED.We then try again, with our password ready to hand to libsoup. But libsoup already failed, and doesn't even *try* the NTLM handshake again. Its state machine is still waiting for us to call soup_auth_authenticate() and provide a password, as it requested.So I think the abort might be the right thing to do for now. Or maybe we should *freeze* the soup session, remember that it is awaiting a password, then return failure to the ->try_password_sync() caller. Next time we're invoked with an actual password, we can *immediately* call soup_session_authenticate() and unfreeze the session. Assuming we *are* called again, that is. The abort is probably simpler :)As we spoke on IRC, the points are not blocking the fixes, and they can be discussed in separate bug reports.Created commitin eds master (3.9.90+)Created commitin ews master (3.9.90+)Hrm, I reverted the ews part at commit. I see the abort is scheduled and even called before the next attempt for the password authentication (after ntlm_auth failed), but the soup session still avoids to continue properly and makes other sources unavailable. This is for the collection backend in evolution-source-registry module. Let's revisit this later, not immediately before the release. I left the eds part as is, it is no harm (except of the soname version bump).Hm, odd. With the abort it was working fine for me in gnome-3-8. Although I still wasn't *happy* with it, as described in. I'll attempt to rebuild the world so I can try to test master.What version of libsoup were you using, and isfixed in it?I had installed libsoup-2.42.2-1.fc19.x86_64, then updated to more recentlibsoup-2.42.2-2.fc19.x86_64, but still no joy. Your bug is not closed yet, thus I do not have its fix either.There's a scratch build 2.4.2-1x linked from, which also includes the fix that went into the -2 package despite appearing older.I wonder if we should also (at least for testing) patch libsoup to abort or complain viciously if you continue trying to use a session after failing to call soup_auth_authenticate() when you're asked to. Dan? (cf.)(In reply to)Never mind, I built it myself and the patch fromdidn't change anything here.It's not mandatory to be called, see documentation from "authenticate" signal:Createdproposed ews patch ][for evolution-ews;This makes it partially work. The partial part is that it checks whether /usr/bin/ntlm_auth has a password or not. If not, then it tries with password immediately. Obviously, the things will break once the password available in ntlm_auth will be incorrect/outdated.I also realized that the behaviour depends on Exchange server version. When I use Exchange 2010, then this works as expected even with no ntlm_auth password, with the initial patch, because the server returns 401 Unauthorised. Exchange 2007 server returns 403 Forbidden with the second message, and, interestingly, the "authenticate" callback is called twice with the first message, even no password was provided in the first round. I have a test application for Dan available, it shows this for Exchange 2007:where the 'no_pass:1' means the soup_auth_authenticate() was not called. The Exchange 2010 shows:(In reply to)This shouldn't happen; if libsoup needs a password, and you don't call soup_auth_authenticate() from authenticate, then it should just return the 401 error to the caller.This works with other auth types; it must be messed up with NTLM because of the is_authenticated() / is_connection_ready() split, and some confusion between the SSO and non-SSO cases.Dan, do you think it worth a bug in libsoup?David, I'd appreciate your opinion on ews patch, I'm fine to commit this for 3.12 and figure out libsoup part before the final 3.12 is out.CreatedSoupAuthNTLM: don't sent an NTLM_RESPONSE if we didn't get a passwordIf SoupAuthNTLM requested a password and didn't get it, it would sendthe NTLM_RESPONSE packet anyway, with the username and password zeroedout. Fix that and test it in ntlm-test.(In reply to)I think the attached patch should fix that... not sure what that means for the other patch here.Oops, so this is going to miss 3.12. Pity.Dan, did the libsoup patch get it into sources, and if so then when, please?The patch instill isn't quite doing the right thing, AFAICT.It does prevent us from sending the request with a bogusly-generated NTLM response calculated with an empty password. However, it doesn't prevent us from sending the request... we just send it again with *no* Authorization: header. Surely it should cause the request to fail immediately?It's worse than that.Not only are we sending the request again without any Authorization: header when the server expects the NTLM response so we know it'll fail, but we actually leave the connection *open*. We don't reset our own NTLM state so when we get the next WWW-Authenticate: NTLM we ends state SOUP_NTLM_FAILED, and even when we're *given* a password for a future request, we never bother trying again.Where you added that + if (priv->password_state == SOUP_NTLM_PASSWORD_NONE)+ break;We need to do something more. I tried the evil hack of adding soup_message_headers_replace(msg->request_headers, "Connection", "close");... which made soup_message_is_keepalive return FALSE and forced the connection to work. That worked, but was horrid.Another approach is to catch the "got-headers" signal on the message and use that trigger to reset our state to SOUP_NTLM_NEW. We can't do that immediately because of course that'd put us in an infinite loop on the same message:--- a/libsoup/soup-auth-ntlm.c+++ b/libsoup/soup-auth-ntlm.c@@ -445,6 +445,14 @@ soup_auth_ntlm_is_connection_ready (SoupConnectionAuth *auth, } static void+reset_failed_auth (SoupMessage *msg, gpointer data)+{+ SoupNTLMConnectionState *conn = data;++ conn->state = SOUP_NTLM_NEW;+}++static void got_final_auth_result (SoupMessage *msg, gpointer data) { SoupAuth *auth = data;@@ -493,6 +501,16 @@ soup_auth_ntlm_get_connection_authorization (SoupConnectionAuth *auth, conn->state = SOUP_NTLM_SENT_REQUEST; break; case SOUP_NTLM_RECEIVED_CHALLENGE:+ if (priv->password_state == SOUP_NTLM_PASSWORD_NONE) {+ /* This connection will probably be re-used, and we+ * need to reset our state so that it works for the+ * next message if we've been given a password.+ */+ g_signal_connect (msg, "got-headers",+ G_CALLBACK (reset_failed_auth),+ state);+ break;+ } if (conn->response_header) { header = conn->response_header; conn->response_header = NULL;That works too, but I'm only marginally happier with it than I was the Connection: close hack. We ought to be *cancelling* the destined-to-fail message.(In fact, why are we even sending the initial NTLM 'request' packet, when we have no username/password to complete a challenge. Can't we send the authenticate signal *then*, and only even *start* the NTLM exchange when we think we have what we need? That way we wouldn't *need* to suddenly decide half-way through that we can't continue.)Ok, so that fixes the case where the user initially provides *no* password and our request fails. But still we're broken in the case where the user provides an *incorrect* password. this 'fixes' that one... but again needs further thought:@@ -315,7 +324,7 @@ soup_auth_ntlm_update_connection (SoupConnectionAuth *auth, SoupMessage *msg, priv->password_state = SOUP_NTLM_PASSWORD_NONE; } else { #endif- conn->state = SOUP_NTLM_FAILED;+ conn->state = SOUP_NTLM_NEW; priv->password_state = SOUP_NTLM_PASSWORD_REJECTED; #ifdef USE_NTLM_AUTH }If the password is rejected, it puts us back in state SOUP_NTLM_NEW ready to start again when the user submits a new request. But is that the right thing to do, or does it put us into an endless loop in some circumstances?(In reply to)That assumes the message will be re-sent (and re-sent on the same connection). It might be better to set a flag on the SoupNTLMConnectionState to tell it to reset state when the next message is queued on it?You don't need to cancel it; just make sure it doesn't get requeued (ie, make sure soup_auth_ntlm_is_connection_ready() returns FALSE), and it will get returned to the caller with the 401 status.If NTLM is enabled then it sends an NTLM request on *every* new connection, before it knows whether the server even supports NTLM.(In reply to)I couldn't say...(In reply to)The message *is* being sent at this point, on this connection. This whole thing happens once the connection has been chosen and the per-connection authentication stuff is being invoked to add an Authorization: header which is appropriate for this connection.I don't actually *want* the message to be sent; when we fail to add an Authorization: header we *know* it's going to fail. But I can't see how to abort it. I'll settle for abusing the 'got-headers' signal on the inevitable failure :)That does seem cleaner; I'll see if I can make it work. Thanks.OK, this version seems to be working. Automatically start trying again (without SSO) if we are invoked in state SOUP_NTLM_FAILED.--- a/libsoup/soup-auth-ntlm.c+++ b/libsoup/soup-auth-ntlm.c@@ -489,10 +489,15 @@ soup_auth_ntlm_get_connection_authorization (SoupConnectionAuth *auth, * request handling process. */ #endif+ case SOUP_NTLM_FAILED: header = soup_ntlm_request (); conn->state = SOUP_NTLM_SENT_REQUEST; break; case SOUP_NTLM_RECEIVED_CHALLENGE:+ if (priv->password_state == SOUP_NTLM_PASSWORD_NONE) {+ conn->state = SOUP_NTLM_FAILED;+ break;+ } if (conn->response_header) { header = conn->response_header; conn->response_header = NULL;I've tested it with a 'broken' ntlm_auth helper which fails, causing us to fall back to manual auth. And with a wrong password entered in manual auth, causing us to try again. It seems to be doing the right thing.Now trying to interpret the output of tests/ntlm_test...Yay, and I think I have a viable workaround for EWS in the meantime too:--- a/src/server/e-ews-connection.c+++ b/src/server/e-ews-connection.c@@ -1933,9 +1933,15 @@ ews_connection_authenticate (SoupSession *sess, password = e_ews_connection_dup_password (cnc); - if (password != NULL)- soup_auth_authenticate (auth, user, password); + if (password && *password)+ soup_auth_authenticate (auth, user, password);+ else {+ /* libsoup doesn't cope very well when we fail to provide+ * a password. So cancel the message explicitly.*/+ soup_session_cancel_message(cnc->priv->soup_session,+ msg, SOUP_STATUS_UNAUTHORIZED);+ } g_free (password); g_free (user); }CreatedFix recovery, update tests.This fixes it. I've merged the tests you added in your patch () but had to change them slightly to cope with the fact that we *do* retry after the user declines to provide a password:@@ -399,12 +399,12 @@ do_ntlm_round (SoupURI *base_uri, gboolean use_ntlm, * get 401. Alice-via-NTLM is still authenticated, and so * won't get prompts, and Alice-via-Basic knows at this point * to send auth without it being requested, so also won't get- * prompts. Nobody and Bob-via-NTLM will try (and fail) to- * authenticate again.+ * prompts. Bob-via-NTLM will try (and fail) to authenticate again,+ * and Nobody will fail right away. */ do_message (session, base_uri, "/alice/404", have_auth,- !alice, use_ntlm && !alice,+ !alice, bob_via_ntlm, !alice, alice_via_basic, alice ? SOUP_STATUS_NOT_FOUND : SOUP_STATUS_UNAUTHORIZED);Fixed in EWS with a workaround for the libsoup bug:(workaround)(GSSAPI)(NTLM)And for 3.12:I have tested with the EWS workaround, with the real libsoup fix from, and with *both* of them, the following cases: - ntlm_auth helper working. - ntlm_auth helper using out-of-date creds, fall back to asking for password. - EWS expecting the ntlm_auth helper but soup not actually using it. - no ntlm_auth helper, asking for password.In each case where I'm asked for a password I've tried giving it a wrong password so it fails, then only giving it the correct password on a second (or later) attempt.Everything seems to be working correctly.Comment onFix recovery, update tests.ok, sounds like you've tested this thoroughly, so go ahead and commit it. (sorry for the delay)	43.0	id=637991	10	False	False	bertrand.lorentz	1
id=767087	REOPENED	GStreamer	gst-plugins-bad	unspecified	Other Linux	Normal normal	GStreamer Maintainers	2016-05-31 19:41 UTC by	Xavier Claessens	2016-06-02 11:35 UTC (	1 user	W/GStreamer+ahcsrc(23303): 0:00:45.427034311 0x64419e60 gstahcsrc.c:2355:gst_ahc_src_open:<ahcsrc0> error: Unable to open device '0'. W/GStreamer+ahcsrc(23303): 0:00:45.427188234 0x64419e60 gstahcsrc.c:2355:gst_ahc_src_open:<ahcsrc0> error: system error: Success	Hah. Let's try this:commitAuthor: Tim-Philipp Müller <>Date: Tue May 31 20:41:14 2016 +0100 androidmedia: fix error debug message when camera doesn't exist Makes no sense to include the system error here since errno will likely not be set and then it says 'system error: success' which is confusing.On second thought, let's re-open this. We should also mention what the problem is in this case, since the device number is valid.	2.0	id=549022	7	False	False	dimitri	1
id=637991	REOPENED	banshee	User Interface	git master	Other Linux	Normal normal	Banshee Maintainers	2010-12-25 08:35 UTC by	Misha Shnurapet	2012-04-12 02:54 UTC (	1 user	Createdbanshee.logThe icons for the sidebar items seem to be a little misplaced vertically. It can be seen when selecting, also on the screenshot attached. Along with this, I suppose that selection shall be one pixel higher so there is the same amount of pixels above and below a 16x16-pixel icon.	Createdscreenshot.pngThank you for your bug report.I can see the same thing, but only if I reduce the default font size from 11 to 10 or 9.I guess we should somehow align the icon vertically.CreatedFix vertical alignment calculationCould you check if this patch fixes the issue for you ?It improves the vertical positioning of the icons for me.As the result might depend on the font and other things, wider testing on various systems would be nice.Createdscreenshot2.pngCreatedscreenshot2-patched.pngIt looks better now.Comment onFix vertical alignment calculationFix committed to git masterThis problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Back in 2.4.	9.0	id=767087	7	False	False	t.i.m	1
id=754933	REOPENED	gnome-builder	general	unspecified	Other Linux	Normal normal	GNOME Builder Maintainers	2015-09-12 20:06 UTC by	Michael Catanzaro	2017-01-01 01:44 UTC (	1 user	I'd been using Builder 3.16.3 with autocompletion turned off. I turned it on today and remembered why I had it off: I have a 4.1 GB file tags.kD2ieJ in /tmp and no room left for other temporary files.Potentially-large files should be stored in /var/tmp instead of /tmp.	I think another big issue here is going to be that we rebuild the tags file for your entire project 10 seconds after any save.I think I want to move tags generation as a service the build system can provide. That way, we can just use `make tags` for automake.We now store tags in $XDG_CACHE_DIR/gnome-builder/tags.We also support `make tags` now when using autotools.I've been using Builder 3.22.3 for Epiphany development for a while. Today I tried it with WebKit. I tried to build it, but CMake failed with a very strange error:CMake Warning at Source/cmake/OptionsCommon.cmake:144 (message): GNU gold linker isn't available, using the default system linker.Call Stack (most recent call first): Source/cmake/WebKitCommon.cmake:41 (include) CMakeLists.txt:137 (include)CMake Error at Source/cmake/OptionsCommon.cmake:162 (message): Need GNU gold linker for Debug Fission supportCall Stack (most recent call first): Source/cmake/WebKitCommon.cmake:41 (include) CMakeLists.txt:137 (include)-- Configuring incomplete, errors occurred!At first I thought a Fedora update might have somehow removed ld.gold. So I ran 'ls -hal /usr/bin/ | grep ld', and found it's still there. I was very confused, so decided to clean my build directory, start over, and hope for the best. After typing a few characters of the name of my build directory, I hit tab and bash completion failed:$ rm -rf WebKitBuibash: cannot create temp file for here-document: No space left on devicebash: cannot create temp file for here-document: No space left on devicebash: cannot create temp file for here-document: No space left on devicebash: cannot create temp file for here-document: No space left on deviceI thought I had tons of disk space left, so I opened baobab and found that I do indeed. That's when I remembered this bug. Builder had completely filled my /tmp with ctags files again. I have eight tags.XXXXXX files saved in /tmp. Four of these files are 0 bytes, two are each 4.1 kB, one is 563.6 MB, and one is 7.8 GB. It's also leaking ctags processes. About ten minutes after closing Builder, I still have eight ctags processes eating my CPUs, and all of those tags files are still on disk. I have checked to ensure no gnome-builder process is still running; the processes are really leaked. Using PR_SET_PDEATHSIG from prctl(2) *should* avoid this on Linux, but see.(In reply to Christian Hergert from)I do see a WebKit.tags file in $XDG_CACHE_DIR/gnome-builder/tags, but it's 0 bytes and doesn't seem to be causing problems.What's that?(In reply to Michael Catanzaro from)We use g_subprocess_set_stdout_path() to redirect the ctags output to the cache file, so I'm not sure what is causing it to end up in tmpfs (if that is what is happening).WebKit is a huge project, and so building ctags as much and as often as we do is probably not going to work well. We should add an escape hatch to disable it or allow them to be more incremental.IdeSubprocess does in fact use PT_SET_PDEATHSIG on Linux, but it looks like we are using GSubprocess in the ctags plugin instead of IdeSubprocess. Simply changing that should fix the process leakage.If you run Builder with -vvvv (might also require a build with --enable-tracing, dont remember for sure) you'll see logging of process spawns which might help track things down. We rebuild index files 10 seconds after a buffer save.Automake has support for tag generation which allows us to avoid regenerating if dependent files have not changed (based on foo_SOURCES). It's much more efficient for us since we don't have to reparse all the files unless they changed.(In reply to Christian Hergert from)That's definitely what's happening.ctags(1) says: TMPDIR On Unix-like hosts where mkstemp() is available, the value of this variable specifies the directory in which to place tempo‐ rary files. This can be useful if the size of a temporary file becomes too large to fit on the partition holding the default temporary directory defined at compilation time. ctags creates temporary files only if either (1) an emacs-style tag file is being generated, (2) the tag file is being sent to standard output, or (3) the program was compiled to use an internal sort algorithm to sort the tag files instead of the the sort utility of the operating system. If the sort utility of the operating system is being used, it will generally observe this variable also. Note that if ctags is setuid, the value of TMPDIR will be ignored.Case (2) applies, so the tmp files are expected. Unfortunately ctags is probably wrong to respect that variable, since its output can be large, and large stuff should never be put in TMPDIR. But at least that leaves us an easy workaround.Still not sure why the ctags processes never quit, though. Even if using IdeSubprocess avoids them lingering after Builder is closed, I doubt it's really possible that ctags needs >10 minutes to operate...? WebKit is big but not THAT big.It looks like just opening my WebKit project is not enough to reproduce the bug. It definitely happened to me earlier today but I can't reproduce with 3.22.3 nor with master (compiled it with --enable-trace, but that doesn't do much good if I can't get it to misbehave again...)(In reply to Michael Catanzaro from)This seems easy enough to do. I just wish we could avoid the tmpfile name altogether so that we don't have to reap lingering files.Maybe ctags was spinning due to ENOSPC/EAGAIN or something like that?It looks like we removed our prctl() in 3.22.2 due to the threading semantics. Use of prctl(PR_SET_PDEATHSIG) is invalid if the thread for which does the fork()/execve() does not last the length of the process (as the signal will be sent when the thread exits, not the application).	7.0	id=744040	16	False	False	nicolas	1
id=549022	REOPENED	doxygen	general	1.5.9	Other Windows	Normal normal	Dimitri van Heesch	2008-08-22 15:38 UTC by	Ernst	2009-05-25 20:24 UTC (	0 users	In the HTML (as well as other formats) documentation of a parent class defining a function (method) the "Reimplemented in" part lists the link to the class(es) reimplementing the function several times.Here's an example taken from class "ConstArrayVisitor" from which the two classes "ConstAttributeFunctorArrayVisitor" and "ExpandIndexedArray" are derived:-------------------------------virtual void apply ( const UByteArray & ) [inline, virtual]Reimplemented in ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ExpandIndexedArray, ExpandIndexedArray, ExpandIndexedArray, ExpandIndexedArray, ExpandIndexedArray, and ExpandIndexedArray.------------------------------What I've observed is that one of the classes, "ExpandIndexedArray", is a template class while the other is not. And all classes are defined in one unit, i.e. in a header file and its corresponding implementation file. I've provided the header and source at the end of this post.This behaviour is reproducible and it also occurs in other files of same structure.RegardsErnst<code>======================================THE HEADER FILE/* -*-c++-*- OpenSceneGraph - Copyright (C) 1998-2006 Robert Osfield * * This library is open source and may be redistributed and/or modified under * the terms of the OpenSceneGraph Public License (OSGPL) version 0.0 or * (at your option) any later version. The full license is in LICENSE file * included with this distribution, and on the openscenegraph.org website. * * This library is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the * OpenSceneGraph Public License for more details.*/#ifndef OSG_ARRAY#define OSG_ARRAY 1#include <vector>#include <osg/Vec2>#include <osg/Vec3>#include <osg/Vec4>#include <osg/Vec2d>#include <osg/Vec3d>#include <osg/Vec4d>#include <osg/Vec4ub>#include <osg/Vec2s>#include <osg/Vec3s>#include <osg/Vec4s>#include <osg/Vec2b>#include <osg/Vec3b>#include <osg/Vec4b>#include <osg/BufferObject>#include <osg/Object>#include <osg/GL>namespace osg {class ArrayVisitor;class ConstArrayVisitor;class ValueVisitor;class ConstValueVisitor;class OSG_EXPORT Array : public Object{ public: enum Type { ArrayType = 0, ByteArrayType = 1, ShortArrayType = 2, IntArrayType = 3, UByteArrayType = 4, UShortArrayType = 5, UIntArrayType = 6, Vec4ubArrayType = 7, FloatArrayType = 8, Vec2ArrayType = 9, Vec3ArrayType = 10, Vec4ArrayType = 11, Vec2sArrayType = 12, Vec3sArrayType = 13, Vec4sArrayType = 14, Vec2bArrayType = 15, Vec3bArrayType = 16, Vec4bArrayType = 17, DoubleArrayType = 18, Vec2dArrayType = 19, Vec3dArrayType = 20, Vec4dArrayType = 21 }; Array(Type arrayType=ArrayType,GLint dataSize=0,GLenum dataType=0): _arrayType(arrayType), _dataSize(dataSize), _dataType(dataType), _modifiedCount(0), _vboOffset(0) {} Array(const Array& array,const CopyOp& copyop=CopyOp::SHALLOW_COPY): Object(array,copyop), _arrayType(array._arrayType), _dataSize(array._dataSize), _dataType(array._dataType), _modifiedCount(0), _vboOffset(0) {} virtual bool isSameKindAs(const Object* obj) const { return dynamic_cast<const Array*>(obj)!=NULL; } virtual const char* libraryName() const { return "osg"; } virtual const char* className() const; virtual void accept(ArrayVisitor&) = 0; virtual void accept(ConstArrayVisitor&) const = 0; virtual void accept(unsigned int index,ValueVisitor&) = 0; virtual void accept(unsigned int index,ConstValueVisitor&) const = 0; /** Return -1 if lhs element is less than rhs element, 0 if equal, * 1 if lhs element is greater than rhs element. */ virtual int compare(unsigned int lhs,unsigned int rhs) const = 0; Type getType() const { return _arrayType; } GLint getDataSize() const { return _dataSize; } GLenum getDataType() const { return _dataType; } virtual const GLvoid* getDataPointer() const = 0; virtual unsigned int getTotalDataSize() const = 0; virtual unsigned int getNumElements() const = 0; /** Frees unused space on this vector - i.e. the difference between size() and max_size() of the underlying vector.*/ virtual void trim() {} /** Dirty the primitive, which increments the modified count, to force buffer objects to update. */ inline void dirty() { ++_modifiedCount; if (_vbo.valid()) _vbo->dirty(); } /** Set the modified count value.*/ inline void setModifiedCount(unsigned int value) { _modifiedCount=value; } /** Get modified count value.*/ inline unsigned int getModifiedCount() const { return _modifiedCount; } /** Set the VertexBufferObject.*/ inline void setVertexBufferObject(osg::VertexBufferObject* vbo) { if (_vbo == vbo) return; if (_vbo.valid()) { _vbo->removeArray(this); } _vbo = vbo; if (_vbo.valid()) { _vbo->addArray(this); } } /** Get the VertexBufferObject. If no VBO is assigned returns NULL*/ inline osg::VertexBufferObject* getVertexBufferObject() { return _vbo.get(); } /** Get the const VertexBufferObject. If no VBO is assigned returns NULL*/ inline const osg::VertexBufferObject* getVertexBufferObject() const { return _vbo.get(); } /** Set the offset into the VertexBufferObject, if used.*/ void setVertexBufferObjectOffset(const GLvoid* offset ) const { _vboOffset = offset; } /** Get the offset into the VertexBufferObject, if used.*/ const GLvoid* getVertexBufferObjectOffset() const { return _vboOffset; } protected: virtual ~Array() { if (_vbo.valid()) { _vbo->removeArray(this); } } Type _arrayType; GLint _dataSize; GLenum _dataType; unsigned int _modifiedCount; osg::ref_ptr<osg::VertexBufferObject> _vbo; mutable const GLvoid* _vboOffset;};template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>class TemplateArray : public Array, public std::vector<T>{ public: TemplateArray() : Array(ARRAYTYPE,DataSize,DataType) {} TemplateArray(const TemplateArray& ta,const CopyOp& copyop=CopyOp::SHALLOW_COPY): Array(ta,copyop), std::vector<T>(ta) {} TemplateArray(unsigned int no) : Array(ARRAYTYPE,DataSize,DataType), std::vector<T>(no) {} TemplateArray(unsigned int no,T* ptr) : Array(ARRAYTYPE,DataSize,DataType), std::vector<T>(ptr,ptr+no) {} template <class InputIterator> TemplateArray(InputIterator first,InputIterator last) : Array(ARRAYTYPE,DataSize,DataType), std::vector<T>(first,last) {} TemplateArray& operator = (const TemplateArray& array) { if (this==&array) return *this; assign(array.begin(),array.end()); return *this; } virtual Object* cloneType() const { return new TemplateArray(); } virtual Object* clone(const CopyOp& copyop) const { return new TemplateArray(*this,copyop); } inline virtual void accept(ArrayVisitor& av); inline virtual void accept(ConstArrayVisitor& av) const; inline virtual void accept(unsigned int index,ValueVisitor& vv); inline virtual void accept(unsigned int index,ConstValueVisitor& vv) const; virtual int compare(unsigned int lhs,unsigned int rhs) const { const T& elem_lhs = (*this)[lhs]; const T& elem_rhs = (*this)[rhs]; if (elem_lhs<elem_rhs) return -1; if (elem_rhs<elem_lhs) return 1; return 0; } /** Frees unused space on this vector - i.e. the difference between size() and max_size() of the underlying vector.*/ virtual void trim() { std::vector<T>( *this ).swap( *this ); } virtual const GLvoid* getDataPointer() const { if (!this->empty()) return &this->front(); else return 0; } virtual unsigned int getTotalDataSize() const { return this->size()*sizeof(T); } virtual unsigned int getNumElements() const { return this->size(); } typedef T ElementDataType; // expose T protected: virtual ~TemplateArray() {}};class OSG_EXPORT IndexArray : public Array{ public: IndexArray(Type arrayType=ArrayType,GLint dataSize=0,GLenum dataType=0): Array(arrayType,dataSize,dataType) {} IndexArray(const Array& array,const CopyOp& copyop=CopyOp::SHALLOW_COPY): Array(array,copyop) {} virtual bool isSameKindAs(const Object* obj) const { return dynamic_cast<const IndexArray*>(obj)!=NULL; } virtual unsigned int index(unsigned int pos) const = 0; protected: virtual ~IndexArray() {}};template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>class TemplateIndexArray : public IndexArray, public std::vector<T>{ public: TemplateIndexArray() : IndexArray(ARRAYTYPE,DataSize,DataType) {} TemplateIndexArray(const TemplateIndexArray& ta,const CopyOp& copyop=CopyOp::SHALLOW_COPY): IndexArray(ta,copyop), std::vector<T>(ta) {} TemplateIndexArray(unsigned int no) : IndexArray(ARRAYTYPE,DataSize,DataType), std::vector<T>(no) {} TemplateIndexArray(unsigned int no,T* ptr) : IndexArray(ARRAYTYPE,DataSize,DataType), std::vector<T>(ptr,ptr+no) {} template <class InputIterator> TemplateIndexArray(InputIterator first,InputIterator last) : IndexArray(ARRAYTYPE,DataSize,DataType), std::vector<T>(first,last) {} TemplateIndexArray& operator = (const TemplateIndexArray& array) { if (this==&array) return *this; assign(array.begin(),array.end()); return *this; } virtual Object* cloneType() const { return new TemplateIndexArray(); } virtual Object* clone(const CopyOp& copyop) const { return new TemplateIndexArray(*this,copyop); } inline virtual void accept(ArrayVisitor& av); inline virtual void accept(ConstArrayVisitor& av) const; inline virtual void accept(unsigned int index,ValueVisitor& vv); inline virtual void accept(unsigned int index,ConstValueVisitor& vv) const; virtual int compare(unsigned int lhs,unsigned int rhs) const { const T& elem_lhs = (*this)[lhs]; const T& elem_rhs = (*this)[rhs]; if (elem_lhs<elem_rhs) return -1; if (elem_rhs<elem_lhs) return 1; return 0; } /** Frees unused space on this vector - i.e. the difference between size() and max_size() of the underlying vector.*/ virtual void trim() { std::vector<T>( *this ).swap( *this ); } virtual const GLvoid* getDataPointer() const { if (!this->empty()) return &this->front(); else return 0; } virtual unsigned int getTotalDataSize() const { return this->size()*sizeof(T); } virtual unsigned int getNumElements() const { return this->size(); } virtual unsigned int index(unsigned int pos) const { return (*this)[pos]; } typedef T ElementDataType; // expose T protected: virtual ~TemplateIndexArray() {}};typedef TemplateIndexArray<GLbyte,Array::ByteArrayType,1,GL_BYTE> ByteArray;typedef TemplateIndexArray<GLshort,Array::ShortArrayType,1,GL_SHORT> ShortArray;typedef TemplateIndexArray<GLint,Array::IntArrayType,1,GL_INT> IntArray;typedef TemplateIndexArray<GLubyte,Array::UByteArrayType,1,GL_UNSIGNED_BYTE> UByteArray;typedef TemplateIndexArray<GLushort,Array::UShortArrayType,1,GL_UNSIGNED_SHORT> UShortArray;typedef TemplateIndexArray<GLuint,Array::UIntArrayType,1,GL_UNSIGNED_INT> UIntArray;typedef TemplateArray<GLfloat,Array::FloatArrayType,1,GL_FLOAT> FloatArray;typedef TemplateArray<Vec2,Array::Vec2ArrayType,2,GL_FLOAT> Vec2Array;typedef TemplateArray<Vec3,Array::Vec3ArrayType,3,GL_FLOAT> Vec3Array;typedef TemplateArray<Vec4,Array::Vec4ArrayType,4,GL_FLOAT> Vec4Array;typedef TemplateArray<Vec4ub,Array::Vec4ubArrayType,4,GL_UNSIGNED_BYTE> Vec4ubArray;typedef TemplateArray<Vec2s,Array::Vec2sArrayType,2,GL_SHORT> Vec2sArray;typedef TemplateArray<Vec3s,Array::Vec3sArrayType,3,GL_SHORT> Vec3sArray;typedef TemplateArray<Vec4s,Array::Vec4sArrayType,4,GL_SHORT> Vec4sArray;typedef TemplateArray<Vec2b,Array::Vec2bArrayType,2,GL_BYTE> Vec2bArray;typedef TemplateArray<Vec3b,Array::Vec3bArrayType,3,GL_BYTE> Vec3bArray;typedef TemplateArray<Vec4b,Array::Vec4bArrayType,4,GL_BYTE> Vec4bArray;typedef TemplateArray<GLdouble,Array::DoubleArrayType,1,GL_DOUBLE> DoubleArray;typedef TemplateArray<Vec2d,Array::Vec2dArrayType,2,GL_DOUBLE> Vec2dArray;typedef TemplateArray<Vec3d,Array::Vec3dArrayType,3,GL_DOUBLE> Vec3dArray;typedef TemplateArray<Vec4d,Array::Vec4dArrayType,4,GL_DOUBLE> Vec4dArray;class ArrayVisitor{ public: ArrayVisitor() {} virtual ~ArrayVisitor() {} virtual void apply(Array&) {} virtual void apply(ByteArray&) {} virtual void apply(ShortArray&) {} virtual void apply(IntArray&) {} virtual void apply(UByteArray&) {} virtual void apply(UShortArray&) {} virtual void apply(UIntArray&) {} virtual void apply(FloatArray&) {} virtual void apply(DoubleArray&) {} virtual void apply(Vec2Array&) {} virtual void apply(Vec3Array&) {} virtual void apply(Vec4Array&) {} virtual void apply(Vec4ubArray&) {} virtual void apply(Vec2bArray&) {} virtual void apply(Vec3bArray&) {} virtual void apply(Vec4bArray&) {} virtual void apply(Vec2sArray&) {} virtual void apply(Vec3sArray&) {} virtual void apply(Vec4sArray&) {} virtual void apply(Vec2dArray&) {} virtual void apply(Vec3dArray&) {} virtual void apply(Vec4dArray&) {}};class ConstArrayVisitor{ public: ConstArrayVisitor() {} virtual ~ConstArrayVisitor() {} virtual void apply(const Array&) {} virtual void apply(const ByteArray&) {} virtual void apply(const ShortArray&) {} virtual void apply(const IntArray&) {} virtual void apply(const UByteArray&) {} virtual void apply(const UShortArray&) {} virtual void apply(const UIntArray&) {} virtual void apply(const FloatArray&) {} virtual void apply(const DoubleArray&) {} virtual void apply(const Vec2Array&) {} virtual void apply(const Vec3Array&) {} virtual void apply(const Vec4Array&) {} virtual void apply(const Vec4ubArray&) {} virtual void apply(const Vec2bArray&) {} virtual void apply(const Vec3bArray&) {} virtual void apply(const Vec4bArray&) {} virtual void apply(const Vec2sArray&) {} virtual void apply(const Vec3sArray&) {} virtual void apply(const Vec4sArray&) {} virtual void apply(const Vec2dArray&) {} virtual void apply(const Vec3dArray&) {} virtual void apply(const Vec4dArray&) {}};class ValueVisitor{ public: ValueVisitor() {} virtual ~ValueVisitor() {} virtual void apply(GLbyte&) {} virtual void apply(GLshort&) {} virtual void apply(GLint&) {} virtual void apply(GLushort&) {} virtual void apply(GLubyte&) {} virtual void apply(GLuint&) {} virtual void apply(GLfloat&) {} virtual void apply(GLdouble&) {} virtual void apply(Vec2&) {} virtual void apply(Vec3&) {} virtual void apply(Vec4&) {} virtual void apply(Vec4ub&) {} virtual void apply(Vec2b&) {} virtual void apply(Vec3b&) {} virtual void apply(Vec4b&) {} virtual void apply(Vec2s&) {} virtual void apply(Vec3s&) {} virtual void apply(Vec4s&) {} virtual void apply(Vec2d&) {} virtual void apply(Vec3d&) {} virtual void apply(Vec4d&) {}};class ConstValueVisitor{ public: ConstValueVisitor() {} virtual ~ConstValueVisitor() {} virtual void apply(const GLbyte&) {} virtual void apply(const GLshort&) {} virtual void apply(const GLint&) {} virtual void apply(const GLushort&) {} virtual void apply(const GLubyte&) {} virtual void apply(const GLuint&) {} virtual void apply(const GLfloat&) {} virtual void apply(const GLdouble&) {} virtual void apply(const Vec4ub&) {} virtual void apply(const Vec2&) {} virtual void apply(const Vec3&) {} virtual void apply(const Vec4&) {} virtual void apply(const Vec2b&) {} virtual void apply(const Vec3b&) {} virtual void apply(const Vec4b&) {} virtual void apply(const Vec2s&) {} virtual void apply(const Vec3s&) {} virtual void apply(const Vec4s&) {} virtual void apply(const Vec2d&) {} virtual void apply(const Vec3d&) {} virtual void apply(const Vec4d&) {}};template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateArray<T,ARRAYTYPE,DataSize,DataType>::accept(ArrayVisitor& av) { av.apply(*this); }template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateArray<T,ARRAYTYPE,DataSize,DataType>::accept(ConstArrayVisitor& av) const { av.apply(*this); }template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateArray<T,ARRAYTYPE,DataSize,DataType>::accept(unsigned int index,ValueVisitor& vv) { vv.apply( (*this)[index] ); }template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateArray<T,ARRAYTYPE,DataSize,DataType>::accept(unsigned int index,ConstValueVisitor& vv) const { vv.apply( (*this)[index] );}template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateIndexArray<T,ARRAYTYPE,DataSize,DataType>::accept(ArrayVisitor& av) { av.apply(*this); }template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateIndexArray<T,ARRAYTYPE,DataSize,DataType>::accept(ConstArrayVisitor& av) const { av.apply(*this); }template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateIndexArray<T,ARRAYTYPE,DataSize,DataType>::accept(unsigned int index,ValueVisitor& vv) { vv.apply( (*this)[index] ); }template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>inline void TemplateIndexArray<T,ARRAYTYPE,DataSize,DataType>::accept(unsigned int index,ConstValueVisitor& vv) const { vv.apply( (*this)[index] );}}#endif======================================THE IMPLEMENTATION FILE/* -*-c++-*- OpenSceneGraph - Copyright (C) 1998-2006 Robert Osfield * * This library is open source and may be redistributed and/or modified under * the terms of the OpenSceneGraph Public License (OSGPL) version 0.0 or * (at your option) any later version. The full license is in LICENSE file * included with this distribution, and on the openscenegraph.org website. * * This library is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the * OpenSceneGraph Public License for more details.*/#include <osg/Array>using namespace osg;static const char* s_ArrayNames[] ={ "Array", // 0 "ByteArray", // 1 "ShortArray", // 2 "IntArray", // 3 "UByteArray", // 4 "UShortArray", // 5 "UIntArray", // 6 "Vec4ubArray", // 7 "FloatArray", // 8 "Vec2Array", // 9 "Vec3Array", // 10 "Vec4Array", // 11 "Vec2sArray", // 12 "Vec3sArray", // 13 "Vec4sArray", // 14 "Vec2bArray", // 15 "Vec3bArray", // 16 "Vec4bArray", // 17 "DoubleArray", // 18 "Vec2dArray", // 19 "Vec3dArray", // 20 "Vec4dArray", // 21};const char* Array::className() const{ if (_arrayType>=ArrayType && _arrayType<=Vec4dArrayType) return s_ArrayNames[_arrayType]; else return "UnknownArray";}</code>	****************************************SUPPLEMENTAL INFOAfter looking a bit closer at the generated doc I see that the links in the "Reimplemented in" part all point to different functions in the classes reimplementing the function. Function names are the same but signature is different.For example, the two links to "ConstAttributeFunctorArrayVisitor" shown below from the parent class:------------------------virtual void apply ( const Vec3sArray & ) [inline, virtual]Reimplemented in ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor,------------------------actually link to these functions:------------------------virtual void apply ( const Vec4ubArray & array ) [inline, virtual]Reimplemented from ConstArrayVisitor.------------------------virtual void apply ( const FloatArray & array ) [inline, virtual]Reimplemented from ConstArrayVisitor.------------------------I could imagine that the fact that the data type "Vec3sArray" itself is a template type:template<typename T, Array::Type ARRAYTYPE, int DataSize, int DataType>class osg::TemplateArray< T, ARRAYTYPE, DataSize, DataType >lets Doxygen getting confused.If more info needed don't hesitate to contact me.ErnstCan you put the files in a zip along with the config file and attach that to this bug report? That's makes my life a little easier, since copy & pasting the above code is problematic due to automatically inserted newlines...CreatedCode and Config FilesFiles are there as requested (see above).To generate the doc do this after unzipping (for example on Windows):1.Open a command line window and go to directory "docgen".2.Enter:doxygen doxyfile\osg_core.doxyfileSee the results in directory "docgen\doc\html\osg"RegardsErnstConfirmed. This should be fixed in the next release.This bug was previously marked ASSIGNED, which means it should be fixed in doxygen version 1.5.7. Please verify if this is indeed the case and reopen the bug if you think it is not fixed (include any additional information that you think can be relevant).After a while sinc eI last used doxygen to verify this bug I installed Doxygen 1.5.9 recently and recreated a bunch of documentation allowing me to verify whether this bug is really solved.First of all: it looks much better now, very well done, thanks a lot!But there's still this little problem:--- Problem Description ---------There's the class "ConstArrayVisitor" which declares the method "apply" several times but with different argument types. Each of the "apply" methods get reimplemented in several sub-classes. The generated documentation for one of the "apply" methods with argument type "const Vec2dArray &" in class "ConstArrayVisitor" (in HTML and HTMLHELP format) looks like this:virtual void apply(const Vec2dArray &) [inline, virtual]Reimplemented in ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ConstAttributeFunctorArrayVisitor, ExpandIndexedArray, ExpandIndexedArray, ExpandIndexedArray, ExpandIndexedArray, and ExpandIndexedArray.Now clicking one of the links under "Reimplemented in" navigates to the appropriate sub-class documentation, but not to the method reimplementing from the parent class. For example clicking on "ConstAttributeFunctorArrayVisitor" navigates to the method descriptionvirtual void apply(const Vec4ubArray & array) [inline, virtual]Reimplemented from ConstArrayVisitor.in the documentation for class "ConstAttributeFunctorArrayVisitor".Also the link back to the parent class after "Reimplemented from" misses the expected target. In the example from above clicking on "ConstArrayVisitor" should navigate to the corresponding "apply(const Vec4ubArray &)" method but actually ends up showing the description for methodvirtual void apply(const FloatArray &) [inline, virtual]of class "ConstArrayVisitor".--- End of Problem Description ---------BTW: You can use the same sample files as provided earlier to reproduce this.RegardsErnst	7.0	id=776211	12	False	False	felix.schwarz	1
id=705395	REOPENED	glib	gio	unspecified	Other Linux	Normal major		2013-08-03 10:51 UTC by	Alban Browaeys	2016-05-02 11:45 UTC (	13 users	Createdmove cancelled handler code out to main contextThe following deadlock happens. Patch to fix it (based on alike evolutioncode) is attached. I moved more (ie the whole code inside the handler).	Interesting.For the record, here are the steps to reproduce this:- Run the goa-daemon under GDB.- Create a Kerberos account in GOA.- Delete the account from the panel.- Do a "thread apply all bt" in GDB and you will see that the daemon is deadlocked with this backtrace..Review of:Looks good, apart from a few minor issues and the bugzilla URL is missing from the commit message. Great work!::: src/goaidentity/goaalarm.c@@ +257,3 @@ } +Extra newline.@@ +265,3 @@+ clear_scheduled_wakeups (self);++ return FALSE;G_SOURCE_REMOVE is better because it is more readable.@@ +266,3 @@++ return FALSE;+}Missing a newline.@@ +282,3 @@+ async_alarm_cancel_idle_cb,+ g_object_ref (self),+ (GDestroyNotify) g_object_unref);This could have been in one line, and there is no need to cast g_object_unref.@@ +284,3 @@+ (GDestroyNotify) g_object_unref);+ g_source_attach (idle_source, main_context);+ g_source_unref (idle_source);You should use spaces, not tabs.Createdgoaidentity: Fix deadlock in goaalarm on_cancelledFixes the minor style issues in the previous patch.Many thanks for tracking this down.i think this patch isn't quite right. It will cause clear_scheduled_wakeups to get run from the main thread which I don't think it's set up to do.maybe we could nullify the timeout.source right away, but not unref until it hits the main thread. then check in the on_timeout_source_ready function if the source on the priv data is the same as the callback source before proceeding.or maybe we should fix glib not to deadlock ?So i talked to alex and we've come up with a plan to fix the deadlock in glib. I'm going to do a little confirmation that the plan will pan out and then write the patch and he's going to review it. I'd suggest we revertsince it's not correct.perhaps we should come up with a workaround for the stable branch of g-o-a though.(one last rapid fire message)Just to spell things out...the plan is to replace the cancelled_running boolean state variable with a cancelled_running_thread GThread * state variable. Then all cases where we do while (priv->cancelled_running)get changed to while (priv->cancelled_running_thread != NULL && priv->cancelled_running_thread != g_thread_self ())that way if the current thread gets to one of those code paths it will skip over it (which, we think, turns out to be the right thing to do)I think the solution inwill work, *if* gsignal guarantees that disconnecting a signal handler from an instance+signal that is currently being emitted guarantees that the disconnected signal handler will not be emitted. I *believe* this is true, but we need to verify that.Otherwise signal handler FOO could disconnect an unrelated signal handler BAR (which should be ok with the above) and have BAR be called after its been disconnected.I haven't had a chance to write a test case to confirm that behavior yet, but looking through the code it seemed to be the case.I'll attach the in progress patch i have laying around for now, just so it doesn't get lost.Createdgcancellable: allow g_cancellable_disconnect from "cancelled" handler on same threadg_cancellable_disconnect will wait until any pending "cancelled"handlers finish. This is useful because disconnecting a handler can have theside-effect of freeing data that the cancelled handler may rely on.Unfortunately, the code used to enforce this synchronization between"cancelled" handlers and g_cancellable_disconnect will also causedeadlock if the cancelled handler itself calls g_cancellable_disconect.Obviously, if g_cancellable_disconnect is explicitly called by a "cancelled"handler, then the "cancelled" handler is shouldering the responsibilityof not using any data that may be freed by disconnection.Also, g_cancellable_disconnect can be called in unexpected places bylower layers in the code (for instance as a result of g_source_destroy).In practice, this means it's easy for deadlocks to inadvertently cropup when using "cancelled" handlers.For these reasons, it would be good to fix the deadlock.This commit prevents the deadlock by allowing foregoing synchronization,if a pending "cancelled" handler is in the same thread as theg_cancellabale_disconnnect call.Quick update..I revertedlast weekend before the code freeze to be on the safe side.But, I started looking into this in a little more detail today. A few things I've found:-definitely prevents the deadlock-with a small tweak to use the proper context also prevents the deadlock and 100% cpu issueNext steps:1) I'm going to un-revert the patch, apply the small tweak to make it use the proper context, and push it to the gnome-3-8 branch. We're in hard code freeze now, so I won't push it to master.2) I'm going update the glib patch to have a test case and reattach it here. I'm hoping we can get that patch in before GLib's release on monday. GLib isn't held to hard code freeze like goa is, and fixing it in GLib is more "right" anyway, imo.(In reply to)I pushed this test to glib master:It demonstrates the behavior is indeed what we expectSo, I think we're in the clear. So doeslook good to go in?I've pushed the fix for the patch to gnome-3-8 here:Moving this bug to glib since all that's left is the glib patch.Review of:There is another possible deadlock in the case where you call g_cancellable_connect() on an already cancelled cancellable.We then call the callback directly with the mutex held. Should be easy to avoid though by just unlocking earlier.::: gio/gcancellable.c@@ +597,3 @@+ * Note, it is safe to call this function from a #GCancellable::cancelled+ * signal handler running in the same thread.+ *We should document that this is only safe since 2.38Createdgcancellable: allow g_cancellable_disconnect from "cancelled" handler on same threadg_cancellable_disconnect will wait until any pending "cancelled"handlers finish. This is useful because disconnecting a handler can have theside-effect of freeing data that the cancelled handler may rely on.Unfortunately, the code used to enforce this synchronization between"cancelled" handlers and g_cancellable_disconnect will also causedeadlock if the cancelled handler itself calls g_cancellable_disconect.Obviously, if g_cancellable_disconnect is explicitly called by a "cancelled"handler, then the "cancelled" handler is shouldering the responsibilityof not using any data that may be freed by disconnection.Also, g_cancellable_disconnect can be called in unexpected places bylower layers in the code (for instance as a result of g_source_destroy).In practice, this means it's easy for deadlocks to inadvertently cropup when using "cancelled" handlers.For these reasons, it would be good to fix the deadlock.This commit prevents the deadlock by allowing foregoing synchronization,if a pending "cancelled" handler is in the same thread as theg_cancellabale_disconnnect call.pushed as- gcancellable: allow g_cancellable_disconnect from "cancelled" handler on same threadpushed as- gcancellable: allow g_cancellable_disconnect from "cancelled" handler on same threadPushed a version with the doc changes and early unlock in g_cancellable_connect().Kinda nice how you landed this during hard code freeze on the day of the final tarballs due...My experience with this code in the past is that it's a maze of potential deadlocks. How sure are we that this change causes no regressions?After a long discussion on IRC I am convinced that this code will only modify behaviour in the case of existing deadlocks.There is one possible chance for a real regression here which is that it is now possible for two "cancel" handlers on the same cancellable to run at the same time (in different threads) as a result of _connect(), which was not possible before. I don't expect this to be a problem at all.What does concern me is the introduction of a new supported behaviour: that disconnect(), when called on a handler from itself, should succeed. This makes no sense at all to me and I'd actually prefer a deadlock here, but after studying our use of gsignal I don't think it's possible to make a distinction between disconnecting a handler from itself and from another handler (since once we call _emit, we have no idea which handler is running).This means that the nice guarantee currently in the docs that "Additionally, in the event that a signal handler is currently running, this call will block until the handler has finished." to "disconnect won't return while your handler is running, unless it's running on this thread, and also won't return if anyone else's handler is running", which is somewhat less nice as an API.I'm going to add some notes to the docs about what we consider to be supported and unsupported behaviour here. Specifically, disconnecting ones own handler from itself via the _disconnect API never makes sense, and should not be considered as being supported.In the future, we could theoretically add a gsignal API along the lines of "tell me the ID of the currently-emitting handler on the innermost emission of signal X on instance Y" or even "is handler X on instance Y currently running?" and use that to tell the difference between the two cases. We could even theoretically use this to make the blocking more fine-grained so that we only block if the user's handler is actually the one running, perhaps with a blocking g_signal_handler_disconnect() API.I take it all back. GClosure actually makes this all very easy.Okay. GClosure is a no-go because of the fact that people may mix their own g_signal_connect() with our g_cancellable_disconnect().Therefore I went for the "blocking disconnect" idea in. We'll get that committed early next cycle, and deprecate g_cancellable_disconnect(). That makes me feel a lot better about any weird behaviour that it currently has.but do you feel better about modifying this code the day before a .0 release?So given commen 24, ryan is reverting the GLIb fix.I've pushed the same g-o-a workaround i pushed to gnome-3-8 to master after getting release-team approval.Comment ongcancellable: allow g_cancellable_disconnect from "cancelled" handler on same threadAfter consulting with the release team we decided to fix this in g-o-a and revert the GLib changes.We now need to fix this next cycle (which starts now, I guess)...I still like the part of this patch that avoids holding the lock while calling the callback, but I think we no longer need the rest of it -- let's just deprecate g_cancellable_disconnect() and leave it as-is, implementation-wise.i think rather than leaving it as-is implementation wise, and rather than recommittingwe should make g_cancellable_disconnect be implemented in terms offromEven if g_signal_disconnect_sync() solves the race on disconnect we can't fully deprecatte the connect/disconnect pair unless we also have a story for g_cancellable_connect() races.I.E. unless you disconnect a handler you're supposed to get one (and only one) callback to your handler, even if the cancellable is already cancelled on connect time. External could could check for canceled before connecting, but that introduces a race condition where the signal may be emitted between checking and connecting.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***CreatedGCancellable: drop lock for callback during connect()Don't hold the lock when calling the user's callback duringg_cancellable_connect() for the case that the cancellable has alreadyfired.Taken from a patch by Alex Larsson.I think we should commit at least this patch to fix Colin's issue in.Review of:This looks simple and correct to me. But maybe also worth updating the docs to say e.g.:"Since GLib 2.40, it is now safe to invoke further functions such as g_cancellable_cancel() inside @callback. This lifts a restriction in place for earlier GLib versions which now makes it easier to write cleanup code that unconditionally invokes e.g. g_cancellable_cancel()."pushed as- GCancellable: drop lock for callback during connect()Not fixed yet. This was just one small part of it.	36.0	id=754933	4	False	False	christian	1
id=744040	REOPENED	GStreamer	gstreamer (core)	git master	Other Linux	Normal normal	GStreamer Maintainers	2015-02-05 13:19 UTC by	Jan Schmidt	2016-04-27 17:53 UTC (	3 users	Encountered a locking order problem while doing some playing around in the playback test app: A flush occuring during a step leads to a basesink deadlock.The sink element is posting STEP_DONE, holding the STREAM_LOCK. The app sends a new step event from the sync bus handler, which tries to take the STATE_LOCK.Meanwhile, the app has sent a flushing seek, which is holding the STATE_LOCK, and trying to acquire the STREAM_LOCK.It seems either basesink should drop the stream lock while sending the STEP_DONE message, or the app should not send the new step event from the sync bus message handler, I'm not sure which.	(Maybe somehow be realated to)CreatedTest leading to deaklockHere's a test program, not exactly the same scenario but the same deadlock point.Can also happen in the following scenario:1) streaming thread of some element is waiting on a pad probe (stream lock)2) gst_element_send_event() doing a SEEK, waiting for streaming thread to shut down (state lock -> stream lock)3) gst_element_set_state() (state lock)3) *would* unblock the pad, which would unblock the streaming thread and make everything happy... if there wasn't the state lock.Createdelement: Don't hold state lock all the time while sending an eventThis can cause various deadlocks, described inAny reason why this is not a good idea? :)It doesn't make gst-validate unhappy in any case.Any comments, ideas, ...? Should we just do this and see what happens? :)Nobody seems to see a reason why the lock is there at all.I'd guess the intent is to prevent the element from changing state while events are being processed - since state changes may cause unexpected deallocations and things. I think though, that anything that's sensitive to that sort of thing should already be protected with other mechanisms.That might be the reason but protecting for that in this place seems wrong and it should also be protected elsewhere then anyway.Let's go ahead with this patch then?pushed as- element: Don't hold state lock all the time while sending an eventLet's give it a try then, we can still revert it if it is causing other problems.The commit message now contains further informationcommitAuthor: Sebastian Dröge <>Date: Thu Dec 10 11:35:05 2015 +0200 element: Don't hold state lock all the time while sending an event This lock seems to exist only to prevent elements from changing states while events are being processed. However events are going to be processed nonetheless in those elements if sent directly via pads, so protection must already be implemented inside the elements for event handling if it is needed. As such having the lock here is not very useful and is actually causing various deadlocks in different situations as described incommit a0b3a7f65878a844b1f983441749afdd3512ee54Author: Sebastian Dröge <>Date: Wed Feb 17 16:41:02 2016 +0200 Revert "element: Don't hold state lock all the time while sending an event" This reverts commit. It breaks things that used to work before, even if the change by itself is correct and the previous code is just working around deeper bugs in the async state change code. Let's go back to what previously worked and then fix async state changes in general.	12.0	id=578123	7	False	False	nagappan	1
id=709746	REOPENED	jhbuild	general	unspecified	Other Windows	Normal normal	Jhbuild maintainers	2013-10-09 15:45 UTC by	Morten Welinder	2015-02-21 18:24 UTC (	2 users	jhbuild 3.5.91, linux mint 15 olivia. Build target is i586-mingw32msvc-g++These run natively using wine, so the build is not a cross build, just anon-default target./usr/share/jhbuild/triggers/pango.trigger contains essentially these threelines. I have issues with each one.# IfExecutable: pango-querymodules# REMatch: /lib.*/pango/.*/modules/.*\.sopango-querymodules > $JHBUILD_PREFIX/etc/pango/pango.modulesIssues:1. Testing for pango-querymodules is wrong because that is not what pango's build process creates. It should be something like pango-querymodules$(EXEEXT) Why do the check? Immediately before the check, jhbuild has already checked that pango has been installed. Not a big deal: one symlink later and I'm in business.2. The REMatch looks for ".so". Again, that's not what the build process creates. In my case it creates .dll files. This one I don't really see what to do about, other than perhaps dropping the check.3. The command -- missing $(EXEEXT) again -- dumps its output in "etc". That is a strange location given that the input is in "lib". "etc" is really "share"'s older cousin and should be architecture independent. Note, that "pango-querymodules --update-cache" uses "lib".I am guessing this all boils down to this: I would like to be able tooverride jhbuild's triggers or perhaps trigger directory somehow.I have similar problems with gdk-pixbuf.trigger. Interestingly enoughgtk+'s trigger actually works for me -- it runs the command for the wrongplatform, but its input and output are architecture independent.	I have no experience myself with using jhbuild for non-native builds; I didn't even consider it when adding the triggers mechanism.Open to patches here, but I have no offhand suggestions for what they would be.As for issue 1) - the rationale here was that we don't have a strong association between what triggers are run and what modules are installed; instead they should only run if they need to. This covers cases like "jhbuild buildone someapp" where someapp installs GSettings schemas, but you don't have glib built in your jhbuild root.We could probably change it to do just do what the gnome-continuous triggers do:i.e. use $(which).I've seen this as well -- just helped a coworker who had a GTK install with completely broken fonts and warnings about a missing pango cache. 'jhbuild postinst' fixed it.The pango trigger clearly needs to be run more often...Created[PATCH] triggers: patch regexp matchesA couple of triggers (most noticeably pango) had their triggers definedas a filename containing "/lib/" appearing in the manifest. Now thatthe manifest contains relative paths, this was failing to match the"lib/" that is now at the start of the line.Change the expression to use ^ instead of /.Created[PATCH] triggers: patch regexp matchesFix the share/ ones too.Review of:09:40 < fredp> desrt: oh, I thought I said yes already.09:40 < fredp> desrt: so, well, I say it now.Pushed as ceaa031.This doesn't look fixed. All three issues seem unaddressed.Morten: if you're going to reopen a bug, it helps to state the evidence that you have that convinces you that both the person writing the patch and the maintainer of the module were wrong...Ryan: eh?Let's see.Item 1: we still have "# IfExecutable: pango-querymodules" which failsto check for the right executable. That would involve using $(EXEEXT).Item 2: the patch still has # REMatch: ^lib.*/pango/.*/modules/.*\.sowhich clearly still looks for ".so" and not for whatever shared librariesare called on the system in question.Item 3: that does indeed appear to have been addressed by someone elsein the meantime. My bad.I'm sure the regexp patches solve a problem -- it just isn't the oneI filed this bug about.Indeed -- I failed to notice that the original report was clearly about Windows build issues. Thanks for pointing that out.Morten: Can you provide a bit more information about your setup here? I guess your wine setup is binfmt-based, but how does that work with shellscripts, precisely?For example, if pango.trigger runs: pango-querymodules --update-cacheis it your intention that that runs the cross-built pango-querymodules or that it will run the system version? I guess it wouldn't find the cross-build version unless we added .exe to that line in the script, right?fwiw, the IfExecutable part alone is correct, since it works via cmd.has_command() which contains this: # also check for cmd.exe on Windows if sys.platform.startswith('win') and os.path.exists(prog + ".exe"): return Truebut clearly this won't work for cross-builds, since 'sys.platform' will be 'linux'. Probably we need a fix there for identifying cross-builds as well (or just always check '.exe').As for the .so check, indeed, let's just drop the extension. It's no big deal if we end up running the trigger too often, but by looking in that dir, I don't think we're exactly getting a lot of non-.so files in there anyway...The real problem here is definitely the pango-querymodules system vs. jhbuilt issue, though. Running the system version is not likely to do very much with .dll files, so I assume that we need to run the jhbuilt one. Your "just symlink" approach fixed the real problem here by accident. Unless we always want to make that symlink, we're going to need to figure out how to solve it properly.Createdtriggers: drop '.so' from regexps for triggersDon't hardcode the assumption that we're going to be on a system thatuses *.so as library names.This will fix running of triggers on Mac OS and Windows builds.Createdjhbuild postinst: don't run uninstalled triggers'jhbuild postinst' will currently blindly run all triggers, even if theIfExecutable condition is not met.Make sure the condition is met before running each trigger.This patch is also important because a future patch will add the fullpath of the located 'IfExecutable' executable as an argument to thecommand to run, and this is impossible to do if we can't find thatexecutable.Createdtriggers: drop '.so' from regexps for triggersDon't hardcode the assumption that we're going to be on a system thatuses *.so as library names.This will fix running of triggers on Mac OS and Windows builds.Createdcmds: add find_command() helperAdd a utility function to find the full path of a program in $PATH,including the possibility that it ends with '.exe', based on the code ofthe old has_command() function.Reimplement has_command() as a wrapper around the new command.Createdcmds: always search for .exe filesWe may be doing cross-builds to Windows on non-Windows machines, soremove the check for Windows before looking for ".exe" files incmd.find_command(). This allows for binfmt-based execution of triggers.We still follow the $PATH order, and we still prefer the version without".exe" within each $PATH directory. This means that we will find a .exefile only if it is earlier in the PATH than a non-.exe version. Thiswill be exactly the case when crossbuilding.It's also highly unlikely that we would find any .exe files at all inthe PATH, on a Unix system, except during crossbuilds.Createdtriggers: pass executable path as first argumentIf a trigger has an IfExecutable condition, then pass the full path ofthe executable that we found as the first argument to the trigger, whenrunning it.Our searching for IfExecutable results includes support for appending".exe" to the end of a filename when searching in $PATH.This will allow triggers to use "$1" to run the correct executable.Createdtriggers: use "$1" for all triggersTake advantage of the new executable argument to trigger scripts.	17.0	id=756910	7	False	False	mclasen	1
id=578123	REOPENED	LDTP	ldtp	unspecified	Other Linux	Normal normal	LDTP maintainers	2009-04-06 11:02 UTC by	Javier Collado	2010-09-21 22:02 UTC (	1 user	ldtp.generatekeyevent function doesn't seem to generate the correct sequence for some characters such as slash or colon.For example, when testing firefox location bar:u'http\xd1--www.gnome.org'Could that be related to the current keyboard layout?Are there any escape sequence for those characters such as <slash> or <colon>?Please let me know if there's any place in which all those escape sequences are listed (ldtp.py doesn't point to any place).	This works in Ubuntu 8.10 atleast like this when I tried in ipython promptIn [3]: wait (2);generatekeyevent ("<ctrl>l");wait (1);generatekeyevent("<ctrl>lhttp://www.gnome.org");wait (1);gettextvalue("*Firefox", "txtLocation")Out[3]: 1Out[3]: 1---------------------------------------------------------------------------LdtpExecutionError Traceback (most recent call last)/home/nags/work/ldtp/<ipython console> in <module>()/usr/lib/python2.5/site-packages/ldtp.py in gettextvalue(windowName, componentName, startPosition, endPosition) 744 _responseStatus, _responseData = getresponse (_requestId) 745 if _responseStatus [0] != 0:--> 746 raise LdtpExecutionError (_responseStatus [1]) 747 return _responseData [1] 748 except LdtpExecutionError, msg:LdtpExecutionError: u'Unable to find object name in application map'ThanksHello,I'm afraid that in my machine your one line script it isn't working. As I pointed out in my previous comment, it might be related to using a different keyboard layout (spanish in my case).Regarding the escape sequences, I guess there are no escape sequences for slash or colon, right?Best regards, Javier(In reply to)Not sure, how to reproduce in my scenario. Any inputs will be highly appreciatedYes you are rightThanksHello,This is also happening in my virtual machines. It might take long time to setup the environment, but I would say that a regular installation with spanish keyboard would fail that way.Best regards, Javier(In reply to)Javier, If I set the keyboard input settings to Spanish is enough ? I can test it that way through Preferences->keyboard and in Keyboard Preferences application, Layouts tab. Correct me, if my assumption is wrong.ThanksHello,Yes, that should be enough. I've tried to switch my keyboard layout to UK and the generatekeyevent function has worked correctly so the problem is clearly related to the keyboard layout.Best regards, Javier(In reply to)Sorry for my delayed response. Today I tried with Spanish keyboard layout settings, it seems to work fine. After selecting it, I have just applied the settings to system wide and I haven't logged out / logged in. Will this effect !?!ThanksFixed in LDTP 1.7.0. Please verify the same.Thanks for the bug report.Hello Nagappan,Thanks for solving the problem. I'll certainly verify it.Best regards, JavierI'm afraid this isn't solved yet. I've tested it in both ldtp-1.7.1 and ldtp-2.0.1(In reply to)Javier, can I get a VM to reproduce this issue ?It was implemented with this -. Can you check that patch as well ?ThanksJavier, can you try with this and see if it works ?If this works, then we should fix LDTP, maybe copy the way they do ;-)Thanks	12.0	id=709746	12	False	False	walters	1
id=655840	REOPENED	l10n	Dutch [nl]	unspecified	Other Linux	Normal normal	NL translators	2011-08-02 20:23 UTC by		2016-04-07 14:14 UTC (	1 user	On a dutch version it show 'Systeeminformati' instead of the full string which is 'Systeeminformatie'.It seems to be caused by a limited string length that is allowed in the field.Could this be checked & fixed?	*** This bug has been marked as a duplicate of***commit b3be07609a9bae43947ee3e59d8982a7715c9acfAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.	2.0	id=746930	6	False	False	mclasen	1
id=722318	REOPENED	gnome-contacts	general	3.10.x	Other Linux	Normal normal	GNOME Contacts maintainer(s)	2014-01-16 10:58 UTC by	Vadim Rutkovsky	2015-04-23 16:27 UTC (	2 users	Description of problem:Emails set to 'Home' during contact create/import are displayed as 'Other'Version-Release number of selected component (if applicable):gnome-contacts-3.10.1-3.fc21.x86_64How reproducible:AlwaysSteps to Reproduce:1. Create a new contact and set Home Email to any value2. Check details for created contactActual results:Email is displayed as 'Other'Expected results:Email is displayed as 'Home' or 'Personal'Additional info:Email type is displayed correctly after editing contact and setting email type to 'Personal'	CreatedFix set type for email in new contact dialogThe typeset in pack_entry_combo call for emails to recive TypeSet.email. Also I've modified NewContactDialog.pack_entry_combo method to set to "PERSONAL" if the the typeset is for emails.Another way to fix it could be create an especific method for email pack_entry_combo, like pack_address_combo.best regardsFernando Fernandez- Software PeronistaFixed in masterPushed:Reopening as it still happens on evolution-data-server-3.16.0-1.fc23.x86_64gnome-contacts-3.16.0-1.fc23.x86_64***has been marked as a duplicate of this bug. ***Home emails solved in commit.There's still the problem of the Personal tag we set on email and Google addressbook doesn't allow it, so it set it back to Other, and we show it. For the use who set the email as Personal it's a bug, we should handle it.(In reply to Vadim Rutkovsky from)Fix pushed as commit. Can you test it on master and close the bug?	6.0	id=667390	7	False	False	davidsboogs	1
id=756910	REOPENED	gtk+	Backend: Wayland	unspecified	Other Linux	Normal normal		2015-10-21 13:19 UTC by	Marek Chalupa	2015-12-11 14:26 UTC (	4 users	CreatedscreenshotWhen I hover a menu item in firewall-config, the tooltip is displayed shifted down, see attachement.checkedandbut none of attached patches is working, so filing it as a new bug	firefox has its own tooltip implementation, afaik. So this is really a firefox bug.I believe stransky and ofourdain figured this out on irchuh? who talked about firefox? This is firewall-configCreatedPatch to make the menu demo in gtk3-demo reproduce the issueAttaching a small diff that makes the issue reproduce in the "Menu" demo in gtk3-demo. The issue seems to that tooltips of menu items are offset by something, and the further down the submenu, the more offset they are.oh, tooltips on menuitems :-( thats such a bad idea...Createdmake positioning of the tooltip relative to tooltip's widgetThis patch works for me. It should not change behavior under X in any visible way.Hmm, not sure this is entirely right. I see some erratic behavior in testtooltips, when moving over the tree and drawing area examples.Review of:.looks like it is because testtootltips does not set tip_area for the drawing area and that gtk_tooltip_position does not count with tip_area at all (hmm, how come that it worked under X without tip_area?)	9.0	id=93727	5	False	False	mark	1
id=667390	REOPENED	gthumb	general	unspecified	Other Linux	Normal normal	Paolo Bacchilega	2012-01-05 23:37 UTC by	David Grossberg	2015-12-20 05:12 UTC (	2 users	When MSI made my laptop, the keyboard layout team made a few decisions I'm not happy about, one of which is that Home and End don't have dedicated keys, but there is a numeric keypad, so I can get by just by making sure I don't ever turn numlock on. (I also had to set XKBOPTIONS="numpad:microsoft" in /etc/default/keyboard but I doubt that's related, it's just so I can use shift with the keypad nav keys without them becoming numbers)As a result I'm getting used to using the keypad nav keys everywhere, but have found they don't work in one place:When viewing images in gThumb, I expect the keypad PgUp and PgDn keys to work just like the other set, as well as Home, End, and -- when zoomed in -- the arrow keys. They don't, in fact they do nothing it seems.When not viewing an image, but a directory in gThumb, the keys behave as they should, going from file to file.Thanks - David	Createdxev output for my numeric keypad keys with numlock offIn case it might help, here's the xev output from each of my keypad keys with numlock off.The order I pressed them is in the top of the file.Marking as obsolete, as this was reported for a now-unsupported version and no recent activity has occurred. Please feel free to reopen this bug report if the problem still occurs with a current version of gThumb.Still repros on gthumb 3.2.8 in Kubuntu 15.04	3.0	id=771082	17	False	False	dboles	1
id=771082	REOPENED	adwaita-icon-theme	symbolic	git master	Other Linux	Normal normal	adwaita-icon-theme maintainer(s)	2016-09-08 21:28 UTC by	Marcus Lundblad	2016-09-21 13:30 UTC (	8 users	CreatedScreenshot of gtk3-icon-browserIt seems the icon "go-down-symbolic" has turned all blank.	Createdscreenshotconfirmed at all sizes, and i'm using 3.21.91 in debian unstable fwiwSeeing the same in openSUSE with 3.21.91So confirmed from here too.Createdsymbolic: re-render go-down- go-home and user-home had the bounding rectangle name go-down, thus the export script picked one of the blank rects to crop. somebody is being sloppy with the metadata! boo boopushed as- symbolic: re-render go-down(In reply to Jakub Steiner from)Hmm. isn't there a way to automatically check if the generated icons are, say not blank ?(In reply to Jakub Steiner from)Still seeing the same issue.Is src/symbolic/gnome-stencils.svg ( checkin ) relevant to this bug ?(In reply to vrishab from)I think "Adwaita/scalable/actions/go-down-symbolic.svg" is missing in this checkin.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Built a fresh checkout and go-down-symbolic is still blank.Createdsymbolic: go-down-symbolic- user-home had a stray go-down label on a group that might cause render issues.Not sure why, but gtk3-icon-browser still renders it blank, despite the exported icon rendering fine with eog.Createdinvisible icon(In reply to Jakub Steiner from)gtk3-icon-browser displays png entries ( not svg ), I guess. So, try after exporting to png and installing the icons in their respective locations.There were issues with stray rectangles named go-down-symbolic which made me think it was all that was to it. But when I build adwaita-icon-theme I see these things -- /opt/gnome/bin/gtk-encode-symbolic-svg /home/jimmac/checkout/gnome/adwaita-icon-theme/Adwaita/scalable/$file $size -o /opt/gnome/_jhbuild/root-adwaita-icon-theme/opt/gnome/share/icons/Adwaita/$size/$context; \ done \doneCan't load file: Error writingCan't load file: Error writingCan't load file: Error writingCan't load file: Error writingCan't load file: Error writingCan't load file: Error writingI don't fully grok the png fallback for the svgs, but I bet that's where the issue lies.All generated go-down-symbolic.symbolic.png sizes render fine as a black arrow in eog btw.Latest git works fine. Relevant git commit:Hi Jakub, wanted to mention a few things.1. From reading the bug report, I must say that I don't fully understand, what is this bug all about. Things like "stray rectangles named go-down-symbolic" sound totally clueless to me. Is there a way to make sure, this problem can be avoided in the future ?2. Build ( make ) should have failed when "" is encountered. How did the build get past that ?3. Do you think, having a sanity check script, which checks the svg and generated png images for filesize > 0 ( or something like that ), would be a good idea ? Maybe add the check to the build ( make ) script, so it would make your job easier next time.can't reproduce with 00e21c452e65a911b05195648b1212d12d76d576, the go-down-symbolic shows up as expected in the icon browser and go-down-symbolic.svg is correct here.	19.0	id=748921	5	False	False	mail	1
id=759308	REOPENED	gtk+	Printing	3.14.x	Other Linux	Normal normal	Felipe Borges	2015-12-10 15:23 UTC by	Frédéric Parrenin	2016-03-15 15:02 UTC (	2 users	Steps to reproduce:- open a pdf document with several pages- hit CTRL-P to open the printing dialog- go to the "copy" text field and enter "2" with the keyboard=> the small icon to illustrate the assembling of copies is not updated- now hit TAB=> now the icon is updatedThis is a minor bug but every detail matters!	This is normal spin button behavior - text editing changes are taking effect when you activate the entry (hit Enter), or on focus out.I disagree here.If you enter "2" with the keyboard in the text field, and hit TAB, the "Assemble" Checkbox *will* get activated *BUT* the icon is *not* updated.So the behavior is inconsistent.Moreover, this behavior is *not* intuitive. A beginner will not know he has to focus out for the entry to take effect. It should just work instantaneously (like instant search in google for example).sure. a patch would be welcome.	3.0	id=722318	8	False	False	erickpc	1
id=599872	REOPENED	bluefish	editor widget	development (SVN TRUNK)	Other Linux	Normal normal	Bluefish Maintainer(s)	2009-10-28 02:01 UTC by	alex bodnaru	2009-11-01 02:32 UTC (	1 user	for the purpose of undoing, certain editing actions should be considered as an atom, like paste text, or the actions done by one keystroke, like enter when autoindenting.	we already have atom-like undo, for example after a global search and replace. However there are two situations (or more) that have issues:1) autoindenting. some people like it that the enter and the indenting are separate actions, some people not2) gtk copy & paste: gtk creates separata signals for each bit of text with a different textstyle. this has been annoying me for years already, I don;t know how to fix this.both are now fixed in revision 5371.well, sorry, there's one more corner situation:please mark some text (highlighted in bf), copy it and paste (it should have been replaced by itself. undoing the action would take a few ctrl-z, probably because text was multi styled.i can't reproduce this myself.but after undo i suggest recoloring the text: try inserting a table by wizard on line 10 of a file, and undoing the table. see the red (tag matching) tags at queer position in the lines before the ones the table was on.now i can reproduce:stand on a line of text.mark part of it.write some text. that will delete the marked part and replace it.when you undo, it happens in these 2 steps, not in one.	5.0	id=599872	7	False	False	olivier	1
id=748921	REOPENED	rygel	general	unspecified	Other Linux	Normal normal		2015-05-05 00:10 UTC by	Jon Dufresne	2016-05-19 18:55 UTC (	1 user	For systemd users, please consider installing the systemd unit by default. The unit exists in the Rygel repository:But it is not installed to the correct directory by default. This means if a user wants to use systemd, they must copy this file to the correct location instead of simply "systemd enable rygel" as one would expect.If someone needs an altered version of this file, nothing will stop them copying it to a new unit file.	*** This bug has been marked as a duplicate of***	1.0	id=759308	7	False	False	mclasen	1
id=730031	REOPENED	gnome-mines	general	git master	Other Linux	Normal normal		2014-05-12 21:11 UTC by	Michael Catanzaro	2016-05-22 06:31 UTC (	2 users	Createdscreenshot when selecting a 16x16 minefieldPreviously, the window would resize when starting a medium or large game. Now we just see a portion of the minefield, with scrollbars. The scrollbars look like they'd be useful on small monitors, but mine has tons of space, so I would expect the window to resize to fit the larger board.	Indeed, that's a change intended for smaller screens/larger minefields, see.I have fixed that now in master, to only add the scrollbars in case the screen size is smaller than the size requested by the minefield (30 being the minimum size for a field, the requested size being 30*width_of_field, 30*height_of_field)This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Reproduced in version 3.16.1Which version is first fixed?(In reply tofrom)The first official one to include the fix was 3.14.0, could you please show a screenshot?CreatedScrollbar in new game 30x15CreatedScrollbars appear if wide is >= 30Ok, thanks, reopening for investigation.CreatedAnother strange defaul sizeingI am not sure if this belongs to this bug, or it is for another. This I found when I was explaring grid sizes.	7.0	id=730031	7	False	False	evfool	1
id=772548	REOPENED	NetworkManager	nm-applet	1.2.x	Other Linux	Normal normal	NetworkManager maintainer(s)	2016-10-07 06:27 UTC by	GB	2016-11-15 10:01 UTC (	2 users	My Specs:Slackware 14.2 x86_64nm-applet 1.2.4When I open the nm-connection-editor I get this message at the terminal;** Message: Cannot save connection due to error: Editor initializing...** Message: Connection validates and can be saved	Sorry forgot to ask, what's this error mean, and what is going?Bug?Hmmthe message is harmless.Anyway, it is correct to suppress it:Great thanks for the fast reply and fix!I'll apply the patch and let you know!I'm still getting the messages;** Message: Cannot save connection due to error: Editor initializing...** Message: Connection validates and can be savedSteps to Produce;1. Opened nm-connection-editor2. Clicked connection then EditThen then messages appeared...So no confusion, I meant that I clicked on and Highlighted my connection and then clicked the Edit button and the messages appeared...:)My bad, I'm compiling from a build script and I had the inccorect name in my build script for the patch.After correcting the name the patch failed...I get Hunk 1 failed at 180HmmSORRY call me stupid, I did the sin of copy and pasting for the patch, maybe something wrong when I did that, but I tried it over a few times and still no good...Hmm well I created the patch on my end and it worked.diff -Naur network-manager-applet-1.2.4.orig/src/connection-editor/nm-connection-editor.c network-manager-applet-1.2.4/src/connection-editor/nm-connection-editor.c--- network-manager-applet-1.2.4.orig/src/connection-editor/nm-connection-editor.c 2016-08-03 04:08:11.000000000 -1000+++ network-manager-applet-1.2.4/src/connection-editor/nm-connection-editor.c 2016-10-08 17:31:34.743708681 -1000@@ -180,12 +180,12 @@ { NMSettingConnection *s_con; GSList *iter;- char *validation_error = NULL;+ gs_free char *validation_error = NULL; GError *error = NULL; if (!editor_is_initialized (editor)) { validation_error = g_strdup (_("Editor initializing..."));- goto done;+ goto done_silent; } s_con = nm_connection_get_setting_connection (editor->connection);@@ -221,12 +221,12 @@ g_free (editor->last_validation_error); editor->last_validation_error = g_strdup (validation_error); }+ +done_silent: ce_polkit_button_set_validation_error (CE_POLKIT_BUTTON (editor->ok_button), validation_error); gtk_widget_set_sensitive (editor->export_button, !validation_error); update_sensitivity (editor);-- g_free (validation_error); } static voidI even downloaded it here;And it still failed saying;Hunk 1 failed at 180I noticed in 1.4.2, with the patch applied, when I opened up the nm-connection-editor for the first time the messages appeared.Afterwards the message doesn't appear...Hmm seems odd for the first time, they still appear.Reopen, for running the first time and still getting the message...I just installed the NetworkManager-openvpn plugin and when I ran it for the first time I also saw these messages;** Message: Cannot save connection due to error: Invalid setting VPN: remote** Message: Connection validates and can be savedThis message appeared twice;** Message: Cannot save connection due to error: Invalid setting VPN: remotethese messages are printed to help understanding why a connection does not validate, and why in turn the "Save" button of the dialog is disabled. In that case, you also see the same message as the tooltip of the disabled "Save" button.If you create a new openvpn connection, initially the "remote" field is unset, thus the connection is invalid and cannot be saved until you fix it.Thus, it prints "Cannot save connection due to error: Invalid setting VPN: remote". That is done on purpose.It's not clear why you say "This message appeared twice".It will not appear twice in a row, but it might appear as the connection changes from valid to invalid and back. Say, you start nm-connection-editor with a new openvpn connection, you see: ** Message: Cannot save connection due to error: Invalid setting VPN: remotethen you fill in the remote setting (and any other settings that are missing), until the connection is valid and the "Save" button becomes active. Then you see ** Message: Connection validates and can be savedif you now delete the text from the "remote" field again, you see again ** Message: Cannot save connection due to error: Invalid setting VPN: remoteI don't see anything wrong there.Patch 68dfd862da899a596ca78b4c8c8131b6cef63dca suppresses the message about "editor initializing", which indeed is a pointless message. But it's a harmless message.I'm saying the first time I installed the openvpn plugin and opened it to condfigure it I saw these messages;** Message: Cannot save connection due to error: Invalid setting VPN: remote** Message: Connection validates and can be savedThen later when I went back to the OpenVPN plugin to change something I saw this message again;** Message: Cannot save connection due to error: Invalid setting VPN: remoteSorry if I wasn't clear here, I'm trying to say, there is no error, nothing was done incorrectly, so this message should not be appearing.Where is this 'remote' filed you are referring to?(In reply to GB from)When you create a new (VPN) profile in the editor, it is not complete and you have to fill in some important fields. One of them is the 'remote' option, which is the 'Gateway:' entry in the editor.	14.0	id=772548	6	False	False	thaller	1
id=614161	REOPENED	empathy	Accounts	2.29.x	Other Linux	Normal normal		2010-03-28 09:54 UTC by	Felix Kaser	2015-02-09 21:35 UTC (	4 users	Since the accounts-dialog lives in its own process now, it stays open when empathy is closed.I think its very confusing for the user to open empathy, show the accounts-dialog and when empathy is closed the accounts-dialog stays alive. It should be hidden when empathy is closed.Another side effect (which maybe requires a new bug report) is that you can have more than one accounts-dialog open. If the accounts-dialog of the empathy instance you closed stays alive and you start empathy again and open the accounts dialog, you get two instances of the accounts-dialog.	Maybe we should close it when Empathy exists but only if the accounts dialog has been start by empathy. It would be silly to close it was manually started.This is easy enough to do. The spawning command returns the child PID and allows us to run a callback when the child exits (so the PID can be unset). Then on exit we can check whether the PID is set, and kill it if required.Since this looks like a fairly easy bug, I want to assign this bug to someone who asked how she could get involved with Empathy. So don't fix it :-PWe should do the same with the debug window btw.I thought the whole point with splitting out the debugger was people wanted to unchain its lifetime from Empathy.I have to agree with Danielle ;)It was quite confusing because I was used to the accounts dialog being closed when empathy was closed.closing as wont-fix...Wait, I think this should be fixed. I had just meant to leave it as a simple bug for someone who wanted one. That person has now vanished, so we should just fix it.So, this bug is still open for solving? Because this is exactly what I was looking for, as a Computer Science student: a simple bug I can try to solve, so I can see how it is to get involved in open-source development.	7.0	id=614161	11	False	False	gdesmott	1
id=93727	REOPENED	ORBit2	general	2.4.X	Other All	Normal normal	ORBit maintainers	2002-09-20 04:22 UTC by	James Henstridge	2004-12-22 21:47 UTC (	0 users	I noticed that "CORBA_Object__iinterface" is exposed in the headers, andused it to set up the standard CORBA.Object methods in my Python binding. However, when I try to invoke some of them (with theORBit_small_invoke_stub() function), I get a CORBA.BAD_OPERATION exception.I don't think there is any problems with how I marshalled the arguments, sois this a known issue? Or should I have just ignored CORBA_Object__iinterface?	Most of these methods aren't supposed to be able to be invokedremotely. The ones that are are only supposed to be invoked by the ORBAFAIK. So just ignore it, I'm not sure why we've made it public :-)Fair enough. It looked like a good short cut for writing the wrapperfor CORBA.Object (handle the CORBA.Object methods the same as forother interfaces I wrap).Hi James- you're exactly right.And this is the direction I'd like to take really; to ensure that byhook or by crook, we use the IInterface method to make all the'pseudo-objects' into real objects on which we can use the standardinvoke stuff; precisely to shrink the binding author's pain.Quite how we do that is an interesting question really; how we do thiscurrently is poa.c (ORBit_POAObject_handle_request) uses: if (!skel && !small_skel) small_skel = get_small_skel_CORBA_Object ( pobj->servant, opname, (gpointer *)&m_data, &imp);To do a fallback for (only) remote invocations to the CORBA_Objectspecial cases ( cf. ORBit2/src/orb/orb-core/corba-object.c ).I'd very much like to expand corba-object.c to handle all the methods:ref / unref etc. so we can use them in scripting bindings [ that bitshould be easy ].Actually, having chased that through I believe that's all you need todo; and it'd be great to have that.Of course - in future it'd be nice to have a similar scheme for otherlocal objects such as DynAny / ORB etc.How does that sound ?Of course; 1 last thing - we want to segregate the sinful remote/localoperations on CORBA_Object, so someone remote can't do stupid 'unref'setc. [ which would cause no end of grief ].	4.0	id=762473	6	False	False	jonas	1
id=762473	REOPENED	gnome-maps	general	git master	Other Linux	Normal normal		2016-02-22 16:39 UTC by	Andreas Nilsson	2016-02-23 07:28 UTC (	2 users	Createdscreenshot of NautilusNotifications in Maps are styled differently from other notifications in GNOME.In all other applications they have rounded corners. In Maps they are square.	Createdscreenshot of BoxesCreatedscreenshot of MapsThis is a limitation, we cannot have transparency over Clutter windows so we make the notifications have border-radius 0px in our application CSS.Jonas we have these rounded corners and transitions in popovers that are disabled due to limitations in X11. When do you think it's reasonable to ignore these limitations and enable them because they work fine under Wayland?Perhaps this bug should be reopened with a target version 3.22?(In reply to Hashem Nasarat from)I agree we can re-open. As for the question of when it is reasonable to ignore this and enable it because it works under Wayland. I would say maybe 5 years? Or so.Until then maybe we could do some checks? Right now the notification.ui adds the class 'app-notification' to get the styling. And then also adds the class 'maps-notification' to set the border-radius to 0px.We could remove the 'maps-notification' class from the UI and instead in the init-function of notification.js do something like:/* remove border-radius on X11 since we cannot do transparency */if (Clutter.check_windowing_backend('x11')) this.get_style_context().add_class('maps-notification');And we can add similar quirks where we deem necessary?(In reply to Jonas Danielsson from)5 years might me excessive but support for X11 will be there for quite a while, and with xdg-app more old X11 desktops can run newer maps. And then there is mir... not sure what the status there is, maybe the check above should be if (!Clutter.check_windowing_backend('wayland') instead?Createdapplication: Check if we are one waylandCreatednotification: Allow rounded corners on waylandHashem: What do you think of the above approach?	9.0	id=494646	27	False	False	hub	1
id=494646	REOPENED	gtk+	.General	3.16.x	Other All	Normal normal	Snark	2007-11-07 16:07 UTC by	Hubert Figuiere (:hub)	2015-08-17 17:39 UTC (	4 users	Got to the address bookSelect a contact and righ-click > PropertiesThe dialog appear, the contact name is selected. This cause the clipboard to be discarded and make it impossible to paste the SIP address in there.EXPECTED: the name shouldn't be selected and the clipboard content shouldn't be replaced.	In fact, we don't do anything about the focus (the problem is still present in the rewritten future-3.00 code!), so that must be something gtk+ does on our behalf...Do you have any idea how we can prevent that?I have no idea. Maybe not selecting the text? IMHO it is not Gtk behaviour to do that.Well, the point is : we don't select anything, so there's little we can do to stop it!I have no idea why that text gets selected... ideas welcome!Pushing to gtk+... let's see.If you don't want the name to be selected, put the focus on some other focusable element before mapping the dialog.Redirecting to original component instead.Matthias, I think this is a general GUI problem, not an ekiga one. FOr example, with libreoffice, Save as... also discards the current selection.The problem is not that the name is selected. The problem is that, in any application, when opening a dialog box some field gets the focus and its text gets selected, hence the clipboard is replaced.So what is the solution?Perhaps the user should first open the dialog box, and only afterwards select the text to copy.An alternative is that GTK do not select the text in the field which has the focus when a dialog box is opened.Note that this bug is about primary selection.(Redirecting to gtk again, sorry.)(In reply to Eugen Dedu from)>I would suggest to copy the text to the clipboard, with Ctrl-C. That is exactly what the clipboard is there for. The only thing that gets cleared when moving focus to an entry is the primary selection, which was always an X-only easter egg.You can also specify the focus widget when the dialog is mapped, so it's not a GtkEntry.	10.0	id=750615	7	False	False	nekohayo	1
id=750615	REOPENED	evolution	Composer	3.16.x (obsolete)	Other Linux	Normal normal	Tomas Popela	2015-06-09 09:10 UTC by	André Klapper	2015-08-06 12:46 UTC (	3 users	1. Import2. Reply (in plain text mode)3. Do not use any mouse pointer for the next steps4. use PageDown key to scroll down to very bottom5. Press Home key6. Press arrow up two times so you're in front of "-- " line7. Press Shift key and keep it pressed8. Press arrow up key to mark all lines above, except for the first two lines which are: On Mon, ... Brian Wolff ... > On 6/8/15, ... Andre Klapper ...9. Press Delete key10. Press Ctrl+Z11. See broken result: On Mon, ... Brian Wolff ... > OnOn Sat, ... Ricordisamoa ...12. Press Delete key again13. Press Ctrl+Z14. See broken result: On MOn Sat, ... Ricordisamoa ... ... On	Createdmbox testcase, to reply toFixed with following commits:commitin the master branch for Evolution 3.17.4+commitin the gnome-3-16 branch for Evolution 3.16.4+As I'm still not completely sure whether the undo/redo in quoted content is fixed, please feel free to reopen this report if necessary.Nope, still buggy in many cases... one of which I'll attach a screencast for. That's in HTML mode though.Shouldn't there be a bunch of test cases covering this automatically in both modes and in multiple levels of quoting, with typing, copy/cut/pasting, etc.?Createdscreencastbehavior in 3.16.4 when replying to this bug's mail in HTML	4.0	id=121547	7	False	False	dimitri	1
id=121547	REOPENED	doxygen	general	1.4.x	Other Windows	Normal normal	Dimitri van Heesch	2003-09-05 14:55 UTC by	John Sivak	2013-04-27 17:02 UTC (	2 users	I've got 1 file that declares and assigns a variable const char *pczMagic.A second file uses "extern const char *pczMagic;" to declare the variable.In the generated docuemntation the file that defined the pczMagic (SOCO_ADD.cpp) contains a link that points to the file (SOCODocStorage.cpp) that used the "extern" declaration. I don't think this is the desired behavior.I have a sample of the files + doxygen config that duplicates the problem.	CreatedZIP file containing C++ source and doxygen config file configured to replicate bugI haven't been able to reproduce this problem with version 1.4.0, so I assume itis fixed now.Nope, 1.4 doesn't fix it.The hyperlink in the "blue box" under heading "Variable Documentation" points tothe wrong file (still links to SOCODocStorage.cpp when it should link toSOCO_ADD.cpp docs).The definition hyperlinks are correct though.I have found that it is present on version 1.7.2, both on Windows and UNIX-like OS (Ubuntu and Debian).I tested the problem with version 1.8.3.1, the wrong link is gone but in the documentation of the file SOCODocStorage.cpp there is the reference to the file SOCO_ADD.cpp but it is not clear that the variable in file SOCODocStorage.cpp is extern.	5.0	id=519886	9	False	False	dimitri	1
id=736655	REOPENED	GStreamer	gstreamer (core)	1.4.1	Other Linux	Normal normal	GStreamer Maintainers	2014-09-15 03:14 UTC by	kevin	2015-05-04 16:35 UTC (	8 users	I have some clips which audio is shorter than video. The player can't change state from PLAYING to PAUSE state after audio is finish and video is playing. The root cause is audio sink hasn't received GAP event and can't finish preroll and video sink changed to PAUSE state.It is ok if send EOS when audio finish, but streamsynchronizer send GAP event. I haven't seem streamsynchronizer send GAP event when player change state from PLAYING to PAUSE state.Can give me some advice or do you need more information?	Below is my understand:o Change EOS event to GAP event is used to keep sink alive when one track is shorter than other. So can select another track and sink can work rightly.o Gststreamsynchronizer will send GAP event when one track reach EOS and another track still has data. And will send all tracks EOS when all track reach EOS.o The shorter track sink can’t get buffer for preroll as another track is prerolled and blocked on gst_pad_push() function. So can’t finish state change to PAUSE.My solution is send GAP when PLAYING to PAUSE in gststreamsynchronizer to let sink finish preroll. I will try it.All elements that don't sync to the clock have to handle PLAYING and PAUSED the same usually, so this seems wrong.(In reply to)Why is it blocked? Are you missing queues before the video input and audio input of streamsynchronizer and after it? Can you show a backtrace of all threads in that situation?I used playbin. below is the thread info.(gdb) info th Id Target Id Frame 13 Thread 0x6c2f3460 (LWP 13074) "aqueue:src" 0x76fa0c98 in __pthread_cond_wait (cond=0x74b487f8, mutex=0x0) at pthread_cond_wait.c:187 12 Thread 0x6cb42460 (LWP 13073) "vqueue:src" 0x76fa0c98 in __pthread_cond_wait (cond=0x1ba650, mutex=0x0) at pthread_cond_wait.c:187 11 Thread 0x6d342460 (LWP 13072) "compositor thre" 0x76fa0c98 in __pthread_cond_wait (cond=0x74b42848, mutex=0x0) at pthread_cond_wait.c:187 10 Thread 0x720d3460 (LWP 13068) "threaded-ml" 0x76f20c00 in poll () at ../sysdeps/unix/syscall-template.S:81 8 Thread 0x72afa460 (LWP 13065) "multiqueue0:src" 0x76fa0c98 in __pthread_cond_wait (cond=0x19f1a0, mutex=0x0) at pthread_cond_wait.c:187 7 Thread 0x738cd460 (LWP 13064) "multiqueue0:src" 0x76fa0c98 in __pthread_cond_wait (cond=0x74b453a0, mutex=0x0) at pthread_cond_wait.c:187 6 Thread 0x740cd460 (LWP 13063) "aiurdemux0:sink" 0x76fa0c98 in __pthread_cond_wait (cond=0x74200d98, mutex=0x0) at pthread_cond_wait.c:187 5 Thread 0x74aff460 (LWP 13062) "typefind:sink" 0x76fa0c98 in __pthread_cond_wait (cond=0x198bc8, mutex=0x0) at pthread_cond_wait.c:187 4 Thread 0x754ff460 (LWP 13061) "gplay-1.0" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x1c860, mutex=0x0, mutex@entry=0x1c834) at pthread_cond_wait.c:187 3 Thread 0x75eaa460 (LWP 13060) "gplay-1.0" 0x76fa4c10 in nanosleep () at ../sysdeps/unix/syscall-template.S:81 2 Thread 0x766aa460 (LWP 13059) "gplay-1.0" 0x76efab70 in nanosleep ()---Type <return> to continue, or q <return> to quit--- at ../sysdeps/unix/syscall-template.S:81* 1 Thread 0x76ff8000 (LWP 13055) "gplay-1.0" 0x76fa1050 in __pthread_cond_timedwait (cond=0x162fa0, mutex=0x0, abstime=0x7efff628) at pthread_cond_timedwait.c:194which thread back trace do you need or you need all thread back trace?Of all threads :) "thread apply all bt" in gdb(gdb) info th Id Target Id Frame 14 Thread 0x63b25460 (LWP 1223) "pool" 0x76fa1050 in __pthread_cond_timedwait (cond=cond@entry=0x26780, mutex=0x0, abstime=abstime@entry=0x63b24d98) at pthread_cond_timedwait.c:194 13 Thread 0x6c383460 (LWP 1222) "aqueue:src" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x74b499a8, mutex=0x0) at pthread_cond_wait.c:187 12 Thread 0x6cbd2460 (LWP 1221) "vqueue:src" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x11a8a0, mutex=0x0) at pthread_cond_wait.c:187 11 Thread 0x6d3d2460 (LWP 1220) "compositor thre" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x74b48800, mutex=0x0) at pthread_cond_wait.c:187 10 Thread 0x72163460 (LWP 1218) "threaded-ml" 0x76f20c00 in poll () at ../sysdeps/unix/syscall-template.S:81 8 Thread 0x72b95460 (LWP 1216) "multiqueue0:src" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x163988, mutex=0x0) at pthread_cond_wait.c:187 7 Thread 0x739b8460 (LWP 1215) "multiqueue0:src" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x74b465c8, mutex=0x0) at pthread_cond_wait.c:187 6 Thread 0x741cf460 (LWP 1214) "aiurdemux0:sink" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x74c00d98, mutex=0x0) at pthread_cond_wait.c:187 5 Thread 0x74aff460 (LWP 1213) "typefind:sink" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x136600, mutex=0x0) at pthread_cond_wait.c:187 4 Thread 0x754ff460 (LWP 1212) "gplay-1.0" 0x76fa0c98 in __pthread_cond_wait (cond=cond@entry=0x1c860, mutex=0x0, mutex@entry=0x1c834) at pthread_cond_wait.c:187---Type <return> to continue, or q <return> to quit--- 3 Thread 0x75eb5460 (LWP 1211) "gplay-1.0" 0x76fa4c10 in nanosleep () at ../sysdeps/unix/syscall-template.S:81 2 Thread 0x766b5460 (LWP 1210) "gplay-1.0" 0x76efab70 in nanosleep () at ../sysdeps/unix/syscall-template.S:81* 1 Thread 0x76ff8000 (LWP 1205) "gplay-1.0" 0x76fa1050 in __pthread_cond_timedwait (cond=cond@entry=0x10fc88, mutex=0x0, abstime=abstime@entry=0x7efff688) at pthread_cond_timedwait.c:194(gdb) t 14[Switching to thread 14 (Thread 0x63b25460 (LWP 1223))]The problem here seems that the videodecoder goes directly into the streamsynchronizer without a queue between them.I don't understand. Why queue between video decoder and streamsynchronizer can effect sink preroll?Actually you're right, it shouldn't. And I assume it doesn't make a difference?Where is the backtrace of the audio related threads? There should be one from the multiqueue through the decoder to streamsynchronizer, and another to the audio sink (and I only see one thread with a sink).What exactly is the situation at this point? I see that the video is trying to pre-roll but there is nothing from the audio anywhere. Did streamsynchronizer receive EOS for the audio already and that's why nothing is to be seen for the audio? If so it should've sent a GAP event to the audio sink, so the audio sink prerolls and the video sink can finish prerolling.The test clip is audio shorter than video. user pause the player when audio already EOS and video is playing.My understand is: 1. sink will finish pre-roll if received GAP event; 2. streamsynchronizer should send GAP event when PLAYING to PAUSE state as it is blocked by gst_pad_push() function in chain function and can't send GAP event;3. video already reach PAUSE state as video sink already received one buffer;Is my understand right?1) and 3) is correct, 2) is not. streamsynchronizer is not blocked anywhere for the audio pad, but it should've received the EOS event there before. As result of the EOS event it should've sent a GAP event downstream to pre-roll the audio sink.Any chance you could make the clip available that triggers this problem?(In reply to)Which element should send the GAP event and how?(In reply to)I found same issue on:maybe you can get test clip on that thread.(In reply to)streamsynchronizer, when it receives EOS on a stream without a buffer before that and when not forwarding EOS (because not all streams are EOS yet).streamsynchronizer already send the GAP event when received EOS and not forwarding EOS from the code.Then the question would be why the audio sink does not pre-roll because of that GAP event. Can you check what happens there?I can check it. But below is my concern:1) streamsynchronizer audio sink pad chain will never be called after audio reach EOS.2) streamsynchronizer will send GAP to audio sink after received video buffer and pushed to video sink.3) audio sink need GAP event to pre-roll every time when PLAYING to PAUSE. so streamersynchronizer should send GAP every time when PLAYING to PAUSE.4) streamersynchronizer video pad chain will be block after video sink received one buffer and changed to PAUSE state. the reason is video sink is PAUSED and queue between streamsynchronizer and video sink is full.Is it right? Can the GAP event send by streamsynchronizer when audio EOS cause audio sink pre-rolled all the time?I see your concern. Maybe streamsynchronizer really has to send a GAP event whenever going from PLAYING to PAUSED if a stream is at EOS but the others are not yet. Does this fix all the problems for you?I have tried it, but found audio sink till has issue. I will try to fix it in base sink and send out the patch for your review.Createdbasesink need call do_preroll when received GAP event.Createdstreamsynchronizer need send GAP event when state change from PLAYING to PAUSE.Some relevant discussion from IRC:<slomo_> wtay_:what do you think of these patches?<wtay_> slomo_, I think in general we agreed that a GAP event should preroll a sink and we can do that now because caps are not on the buffer so the sink should be negotiated and ready to go<wtay_> but audiosink should play silence for the GAP event, I doubt it does that now<slomo_> yes to both<slomo_> but sending the GAP event in PLAYING->PAUSED in streamsynchronizer? :)<wtay_> that does not seem right<slomo_> good, i agree ;) do you have another idea?<wtay_> I can only think of sending a gap event with unlimited duration, which should make basesink go to play<->paused without ASYNC<wtay_> theoretically, I doubt it does that currently<slomo_> and make it switch between those states forever without need for a further GAP event?<wtay_> I know audiosink goes to paused SYNC when it still has unplayed audio (unplayed as in not yet sent to the device)So the solution is like below:1) streamsynchronizer will send GAP event with unlimited duration when received short track EOS.2 ) basesink will treat the GAP event with unlimited duration specially and needn't pre-roll when change to PAUSE state.3 ) streamsynchronizer needn't send GAP event when process pad chain function for the short track.I checked the latest GST 1.x code, 1) is ready, 2) basesink hasn't set needn't pre-roll flag when received GAP event which has unlimited duration. 3) streamsynchronizer still send GAP in pad chain function when one track reach EOS.If your agree above method, I will generate patch to fix those issue.That sounds correct, yes. 2) also needs to go back into normal pre-rolling mode if receiving a buffer or finite GAP event.I checked gstaudiobasesink, the GAP event with unlimited duration and EOS have same handle code. So, if we use above method, streamsynchronizer send GAP event with unlimited duration is totally same with EOS event. Do we miss something? What is the reason of change EOS event to GAP event?Do your gays has any idea? I have environment to reproduce the issue and try any idea.What's the status here now and the summary of the situation? Also isn't this the same or closely related to?Will check it on Gstreamer 1.4.1 later and feedback.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I checked the code, propose below method to fix the issue. Please help to review:1. Audio sink will generate unlimited length mute audio when received GAP event with -1 duration and write audio device until flush, state change. gst_base_sink_wait_preroll() will call when interrupt and needn't preroll buffer to finish preroll.2. Video sink will enter GAP_EOS states after received GAP event with -1 duration and will call gst_base_sink_wait_preroll() when flush, state change, so needn't buffer to finish preroll.3. Streamersynchronizor needn't send GAP event in chain() function. Only need send GAP event when received EOS event.Is it reasonable? Will try the method and upload patch if the method is ok.No, that won't work unfortunately. A GAP event with duration=-1 is supposed to indicate a GAP of unknown length that will end at the timestamp of the next buffer or GAP event.My proposal also need end if buffer with timestamp or GAP event come.I think streamsynchronizor send GAP in chain() function has much limitation. We also has use case to send audio EOS when rewind. Can it support rewind?If the proposals all reject, can you give some suggestion?I don't see the relation between EOS and rewind. What exactly are you doing there?In your proposal you said that the audio sink will generate unlimited length silence audio if a GAP event with duration=-1 is received. However it should only generate silence until the timestamp of the next buffer or GAP event.Same goes for video, it should not change any state but continue showing the previous frame (or black if there was none) until the timestamp of the next buffer instead of forever.If one file has big gap in the middle of file, you can get the next valid audio packet. So you don't know the next valid audio time stamp.As I checked before, streamsynchroinzor can't send GAP event in chain() function when rewind after audio track send EOS and video is rewinding.For video sink change, the purpose is finish pre-roll when change to PAUSE state. Not actural change state.(In reply to)Yes, you only know it once it is there. Which is why I'm not sure yet what the correct solution here would be. If you just generate infinite amount of silence, you will never play anything after such a GAP event.(In reply to)What do you mean with rewind here?The infinite amount of silence should be interrupt by buffer or GAP event. Some thing like 20 ms one time. If still no buffer or GAP event, playback another 20 ms.Rewind case is our demux will send EOS to audio track when rewind. Video will only send key frame. I remember streamsynchronizer can't send GAP event to audio sink. Should be a bug.The root cause of the issue in the thread is audio sink can't finish pre-roll as GAP event can't be send as streamsynchronizer blocked on video push. And the GAP event send in chain function has many conditions (so it will can't be send). So is there more good resolution to handle this?(In reply to)That's what would automatically happen in GstAudioBaseSink if the ringbuffer is started. It would output silence all the time unless some real data is written into the ringbuffer.So there shouldn't be much necessary for this change, other than starting the ringbuffer and prerolling on GAP events (and EOS too, I remember seeing a bug about that in Bugzilla recently).I don't understand what you mean here.If audio is shorter and reach EOS, audio GAP event will send after video pad pushed video buffer in streamsynchronizer. Video pipeline should be full with data in normal playback. Video pad push will blocked when change to PAUSE state and audio GAP event can't be send out. Audio sink can't finish pre-roll. The attachment patch will send GAP event during PLAYING to PAUSE state change. But the patch reject. Can put send GAP event before video pad push?If one stream seek to only video part, audio will send Segment and EOS. But as audio decoder no output, so Segment can't send out of audio decoder. Below code in streamsynchronizer will bypass send GAP. How to handle this? if (!ostream->is_eos || ostream->segment.format != GST_FORMAT_TIME) continue;I have verified the issue on Gstreamer 1.4.1 and read whole thread to refresh my head.Still has the issue on Gstreamer 1.4.1. But the second attached patch can fix the issue, don't need the first patch any more. But the method has been reject base on. The root cause of the issue is video pad push buffer blocked when state change from PLAYING to PAUSE and can't send out audio GAP event in streamsynchronizer to finish audio sink pre-roll.Based onand #25. You agree below method.1) streamsynchronizer will send GAP event with unlimited duration when receivedshort track EOS.2 ) basesink will treat the GAP event with unlimited duration specially andneedn't pre-roll when change to PAUSE state. basesink will change to normal pre-roll after received buffer or GAP with duration or flush.3 ) streamsynchronizer needn't send GAP event when process pad chain functionfor the short track.Do you still think the method is ok? if so, I will try it and upload to review.1) yes2) GAP events should *always* preroll a sink3) what do you mean with that?The key point is audiosink can't received GAP to finish pre-roll. The root cause is video pad push has been blocked. Don't know how to fix it. Can you advice?Why can't the audiosink receive the GAP event because something in the video part of the pipeline is blocked?As talked on IM. EOS event will blocked on event function and will send GAP event after post one GCond and than block again. Should unblock after flush or shutdown. Should post GCond when change state from PLAYING to PAUSE.Do need post when PAUSE to PLAYING? sink hasn't any dependence when change state from PAUSE to PLAYING.Summary of IRC dicussion is to change streamsynchronizer to:a) Wait in the event function when EOS is received until all are EOS on a GCond, and forward EOS from there then (currently we send EOS from the event function of the last EOS pad)b) Change the GAP events that are currently sent from the chain function of a pad to all other pads that are late. They should be sent from the event function of that specific pad instead by waking up the GCond shortly.c) Send a new GAP event from the event function whenever going from PAUSED->PLAYING and PLAYING->PAUSED by shortly waking up the GCond.d) Wake up the GCond and forward the EOS event when either the last pad went EOS, or a flush-start event is received on that pad (or its corresponding srcpad), or the streamsynchronizer goes from PAUSED->READY.a) and b) also fix potential deadlocks.This bug is also related (or the same?) as.For b), do need add position and duration into the GAP event? How to get it? How to get it if no segment? Should it same as current code in chain function? Lag one second?Yes, the same values as are used right now. You need to pass them over to the other thread so it can be used after waking up from the GCond.I mentioned streamsynchronizer hasn't received segment when EOS is fixed by below commit. So should be not the concern.But I can't see same process in video decoder base. Do we need add send pending event when received EOS in video decoder base?commitAuthor: Mathieu Duponchelle <>Date: Fri Nov 28 15:06:27 2014 +0100 audiodecoder: Push pending events before sending EOS. Segments are added to the pending events, and pushing a segment is mandatory before sending EOS. + Adds a test.Element should send pending sticky events before send EOS event? Is it right? We have clips which has valid media information for audio track, but haven't any audio data, we can't get audio TAG information on playbin. Audio and video decoder base should send pending sticky events before send EOS event. This is another issue, should submit one ticket for it. But segment event must send before EOS, or streamsynchrinozer can't work.I think so, yes. Please file a separate bug for that.filed one bug with below link:Createdpatch to fix the issue.The patch haven't include below statement:b) Change the GAP events that are currently sent from the chain function of apad to all other pads that are late. They should be sent from the eventfunction of that specific pad instead by waking up the GCond shortly.Will do it later.Note:Will send eos immediately if not seen any data. As decoder can't get output caps if can't decode any valid audio data. Sink will report error (not negotiate) if send GAP event.CreatedPatch for item b)Createdupdate the patch for minor change.seen_data changed to mean received data in the whole time. not received data after seek.Createdupdate the patchWill write unit test for the case and upload patch later.Review of:I think in general you need to call gst_pad_get_element_private() again whenever you have unlocked the mutex and locked it again. in the meantime the application could've removed the pad from streamsynchronizer, and freed the stream.::: gst/playback/gststreamsynchronizer.c@@ +493,3 @@+ if (!seen_data) {+ /* no buffer form the pad anytime, not negotiate, send eos */+ stream->eos_sent = TRUE;Should probably also only be set when it happens below@@ +504,3 @@ timestamp = stream->segment.stop; + stream->segment.position = timestamp;Why?@@ +520,3 @@ GstStream *ostream = l->data; /* local snapshot of current pads */+ ostream->eos_sent = TRUE;Should probably be done when it actually happened, not before@@ +556,3 @@+ if (self->eos) {+ GST_DEBUG_OBJECT (pad, "send EOS event");+ ret = gst_pad_push_event (srcpad, gst_event_new_eos ());stream->eos_sent = TRUE now?@@ +561,3 @@+ /* send eos as sink can't handle if haven't negotiate */+ GST_DEBUG_OBJECT (pad, "send EOS event");+ ret = gst_pad_push_event (srcpad, gst_event_new_eos ());The problem here is that we can't preroll the sink again later here. So after you forwarded EOS, then went to PAUSED and the PLAYING again... nothing will ever be sent to that sink again. Not even an EOS. Maybe another EOS should be sent?Review of:::: gst/playback/gststreamsynchronizer.c@@ +229,3 @@ + event =+ gst_event_new_gap (stream->segment.position, stream->gap_duration);Access to GAP duration should probably be protected by the mutex too(In reply to)Will fix it in function gst_stream_synchronizer_wait(). Call gst_pad_get_element_private() in while loop.Will set it after pushed EOS event.Record current position and use the position when push GAP event. stream->segment.position also been updated in chain().will set it after pushed EOS event.Yes, get lock and set it as the lock has been released.This only will be happened when not received data in anytime. So the track is all corrupted. sink don't know how to initialize the sink device.Sink needn't preroll after received EOS. and streamsynchronizer can't send anything through pad after send EOS event. So pipeline can PAUSE again.Currently, we use one workaround for the issue. The workaround is send EOS immediately after received EOS. And not found issue with the workaround.Demux will send EOS again after seek. So seek is ok.(In reply to)Those code is in gst_stream_synchronizer_wait(). gst_stream_synchronizer_wait() is called in below code. gst_stream_synchronizer_wait() should be called with GST_STREAM_SYNCHRONIZER_LOCK.+ GST_STREAM_SYNCHRONIZER_LOCK (self);+ self->send_gap_event = TRUE;+ ret = gst_stream_synchronizer_wait (self, srcpad);+ GST_STREAM_SYNCHRONIZER_UNLOCK (self);(In reply to)Will fix it in function gst_stream_synchronizer_wait(). Callgst_pad_get_element_private() in while loop.Will set it after pushed EOS event.Record current position and use the position when push GAP event.stream->segment.position also been updated in chain().will set it after pushed EOS event.Yes, get lock and set it as the lock has been released.This only will be happened when haven't received data in anytime. So the track is all corrupted. sink don't know how to initialize the sink device.Sink needn't preroll after received EOS. So pipeline can PAUSE again.Demux will send EOS again after seek. So seek is ok.CreatedUpdated patch based on review.CreatedUpdated patch based on review.(In reply to)>This probably also has to be protected with a mutex thenNot sure I can follow :) You mean you have a custom workaround somewhere for the case of PLAYING->PAUSED->PLAYING if you get into this situation? But with just your patch it would never go to PLAYING again?(In reply to)But that means that you send the GAP event while holding that mutex. That's never a good idea :) Don't send any events, queries or buffers downstream while holding the mutex.(In reply to)And that it will only go to PLAYING again after a seek, but not when pausing without a seek?Summary of IRC talk:Should unlock before send GAP event and hold the lock again after send GAP event. Should call gst_pad_get_element_private() after take the lock after send GAP and EOS event.Unit test:1. Source pad should received GAP event after one track reach EOS.2. Source pad should received GAP event when state change from PLAYING to PAUSE after one track reach EOS.3. Source pad should received EOS event when one track haven't any data and reach EOS.CreatedUpdate based on IRC talk.CreatedUpdate based on IRC talk.Streamsynchronizer Unit Test:1. Streamsynchronizer sink pad should send GAP event after one track reach EOS when normal playing.2. Streamsynchronizer sink pad should send GAP event when state change from PLAYING to PAUSE after one track reach EOS.3. Streamsynchronizer sink pad should send EOS event when one track haven't any data and reach EOS.Is it ok?Also check for PLAYING->PAUSED->PLAYING, otherwise seems ok. Maybe also don't check for GAP or EOS events, but if a pipeline with a sink after streamsynchronizer works properly in these scenarios (i.e. it prerolls instead of waiting forever). That would seem more future-proof, and check for what we wanted to fix here instead of checking for the solution.So streamsynchronizer unit test should be below:A pipeline with a sink after streamsynchronizer can change state from PLAYING->PAUSED->PLAYING in below scenarios:1. One track reach EOS after pushed some buffers while another track still push buffer.2. One track reach EOS without buffer while another track still push buffer.After the pipeline test， do need below test?1. Streamsynchronizer sink pad should send GAP event after one track reach EOSwhen normal playing.2. Streamsynchronizer sink pad should send GAP event when state change fromPLAYING to PAUSE after one track reach EOS.3. Streamsynchronizer sink pad should send EOS event when one track haven't anydata and reach EOS.(In reply to)Yes, and not only test if PLAYING->PAUSED->PLAYING works but also if it prerolls when one track goes EOS immediately, while the other one produces dataNo, those are not needed IMHO. They are testing an implementation detail, not the actual behaviour we're interested in.CreatedUpdate based on IRC talk.CreatedUnit test for streamsynchronizer handle eos.Upload source code for review firstly.CreatedUpdate patch for patch formatCreatedUpdate patch for patch formatCreatedSend GAP event in event thread.CreatedDon't send GAP event in chain function.CreatedUnit test for streamsynchronizer handle eos.Ready for all patches. Please help to review. Thanks.Thanks, I'll try to go through all this later today :)Thanks, let me know if need improve the patch.Sorry for still not getting to this, I didn't forget about it :)My latest patches for audiobasesink inhelp with the prerolling here, but only up to a point - audiobasesink will process a GAP with timestamp & duration as if it were an audio buffer of the same time+duration and successfully go PLAYING->PAUSED->PLAYING.That means that streamsynchroniser needs to make sure to send a GAP (or GAPs) that fill the entire time range until it is ready to either start a new stream or send EOS.It looks like these patches will achieve that, but sending a new GAP when changing state in stream synchroniser, but wouldn't it be better to wake the streams that are looping on EOS every time data passes on another pad that 'moves time forward' and have them send another GAP event then?With the approach in these patches, new GAP events are only sent when streamsynchroniser changes state, on the presumption that that's also when the audio sinks change state. Maybe there's pipelines where that assumption isn't true?(In reply to)How about video sink? Do video sink need GAP event to finish pre-roll when PLAYING->PAUSED?streamsynchronizer will seng GAP with duration is GST_CLOCK_TIME_NONE. Do streamsychronizer need search all segment to get to biggest time range? Or audio sink can handle GST_CLOCK_TIME_NONE.streamsynchronizer will send GAP event in chain function. But pad push will be blocked when sink changed to PAUSED state and then can't send GAP event. So need send GAP event when state change in streamsynchronizer.(In reply to)The same thing applies to video sinks - they need a GAP to preroll too.Duration GST_CLOCK_TIME_NONE is handled as duration = 0 in the sink, so it willeffectively 'fill time' up to the start timestamp.If pad_push() is blocked, you can't send a GAP event downstream there anyway - the STREAM_LOCK() will be held by the pad_push(). That case should work. The one that is broken is where you sent a GAP downstream from teh EOS event handler, advancing time to some time 'timestamp', and then time advanced past that point, and your pad_push_event (pad, gap_event) returned - you need to either push a new gap, or push a buffer then.(In reply to)If video is shorter than audio, streamsynchronizer will send GAP event when received video EOS. How to set the GAP duration?If pipeline change state from PLAYING to PAUSED, do streamsynchronizer need send GAP event again to finish video pre-roll? do streamsynchronizer need send GAP event every time when pipeline change state from PLAYING to PAUSED?So streamsynchronizer should send GAP with duration is GST_CLOCK_TIME_NONE when received EOS for shorter track? and send GAP event for the shorter track to 'moves time forward' in other track chain function? And send all tracks EOS event after received all tracks EOS event.If pad_push() is blocked, streamsynchronizer can't send GAP event for shorter track in chain function. The shorter track is reach EOS, and no any buffer reach streamsynchronizer, so basesink can't finished pre-roll for the shorter track. The longer track is pro-rolled and blocked. So streamsynchronizer need send GAP event for shorter track when state change, and send the GAP event in event handle thread.(In reply to)The duration can be 0 or GST_CLOCK_TIME_NONE, it's fine - the key is that a pad that reaches EOS early should loop in EOS sending gap events downstream with advancing timestamps taken from the other non-EOS stream(s), to keep downstream updated on progress until everything reaches EOS.The gap events it sends should be based on the maximum position of the other stream(s) - buffer times + duration. The existing logic that calculates a start time for the gap event it sends now is probably fine.Yes, if I've understood what you're trying to say correctly.There are 2 threads / streams in stream synchroniser:* Short stream, has reached EOS. It pushes a gap downstream using gst_pad_push_event(), which won't return until the end time (timestamp + duration) of the gap event. Once that returns, it is free to push another gap event - or stop pushing them if it's time to switch to another input.* The longer stream, buffers are still passing, and can be used to set timestamps on the gap events being sent in the other thread.Is that clearer?Very clear. Thank you very much.Review of:Looks good, just some minor things that should be fast to update :) Then this should be ready to be merged::: gst/playback/gststreamsynchronizer.c@@ +207,3 @@+/* must be called with the STREAM_SYNCHRONIZER_LOCK */+static gboolean+gst_stream_synchronizer_wait (GstStreamSynchronizer * self, GstPad * pad)Can this function also be used for the g_cond_wait() in the SEGMENT event handler? I think it should be used there too for consistency (and modified to work in both cases).@@ +445,3 @@ GST_STREAM_SYNCHRONIZER_LOCK (self); stream = gst_pad_get_element_private (pad);+ stream->flushing = TRUE;See the "if (stream)" some lines below :) You need to check for NULL@@ +550,3 @@++ /* send eos if haven't seed data as sink can't handle if haven't negotiate */+ if (!seen_data || self->eos) {The only case when we get here and this is not true, is when we're flushing? Document that and maybe even add an assertion :)@@ +904,3 @@+ if (stream->is_eos && !stream->eos_sent) {+ self->send_gap_event = TRUE;+ g_cond_broadcast (&stream->stream_finish_cond);Please document in a comment here why a GAP event should be sent, also why not another one is required when going from PAUSED to PLAYINGReview of:::: gst/playback/gststreamsynchronizer.c@@ +909,3 @@ if (stream->is_eos && !stream->eos_sent) { self->send_gap_event = TRUE;+ stream->gap_duration = GST_CLOCK_TIME_NONE;This should probably also be reset in PAUSED->READY (where the segment is already reset currently).Review of:::: tests/check/pipelines/streamsynchronizer.c@@ +37,3 @@++ g_mutex_lock (&test_mutex);+ if (gst_event_parse_group_id (event, &group_id)) {This should always succeed here, just add an assertion instead of the else case@@ +126,3 @@+ GST_STATE_CHANGE_FAILURE);++ g_usleep (1 * G_USEC_PER_SEC);Why the sleeps?@@ +131,3 @@++ g_object_unref (bus);+ g_object_unref (G_OBJECT (pipeline));Use gst_object_unref() and gst_object_ref(), and the G_OBJECT() casts are not needed then@@ +144,3 @@+ run_streamsynchronizer_handle_eos ("videotestsrc name=videosrc ! "+ "streamsynchronizer name=streamsync audiotestsrc name=audiosrc num-buffers=0 ! "+ "streamsync. streamsync. ! fakesink sync=true streamsync. ! fakesink sync=true");Make a separate testcase for each of these pipelines. That will make the test runner output more informative :)@@ +156,3 @@++ suite_add_tcase (s, tc_chain);+ tcase_add_test (tc_chain, test_streamsynchronizer_handle_eos);Maybe we should also add some tests for the normal behaviour of streamsynchronizer while we're at it. Testing that it passes through data correctly, and especially aligns stream starts when they're switched to a new group.Thanks, I will updated based on the review comments and upload patch later.Do you think aligns stream starts when they're switched to a new grout has some link with:Maybe, but for normal streams that should currently work... and having tests for that would be good :)(In reply to Sebastian Dröge (slomo) from)Accept, will do it in another patch.Accept.Add more comments for seen_data.Add comments on why send GAP event. PAUSED to PLAYING needn't pre-roll, needn't send GAP event in change_state (). chain () will send GAP event in PLAYING state.(In reply to Sebastian Dröge (slomo) from)Do you mean set value to stream->gap_duration? The stream->gap_duration only used when self->send_gap_event is TRUE. So need set value to stream->gap_duration when set TRUE to self->send_gap_event.Not accept currently:)(In reply to Sebastian Dröge (slomo) from)Accepted.Don't need it. Removed.Accepted.Accepted.Maybe can add the test when fix segment start which from different source is different:)Createdstreamsynchronizer: Send GAP event to finish preroll when change state from PLAYING to PAUSEDCreatedstreamsynchronizer: Send GAP event in event process thread, not data threadCreatedstreamsynchronizer: Unit test for streamsynchronizer handle eosCreatedstreamsynchronizer: Optimize wait when handle SEGMENT eventI don't understand the group in streamsynchronizer. Don't know the scenarios which group used. Don't know when need wait in SEGMENT event. So not sure if the last patch is OK.Review of:::: gst/playback/gststreamsynchronizer.c@@ -403,3 @@- stream = gst_pad_get_element_private (pad);- if (stream)- stream->wait = FALSE;I think this code was backwards, and would be broken with your changes (and a bit broken before already).It probably should be something likewhile (stream->wait && !self->flushing) { g_cond_wait(...); stream = gst_pad_get_element_private (pad);}And the code that calls g_cond_broadcast() would set wait=FALSE before the broadcast. Can you fix that when moving the code?This waiting is used you gaplessly play multiple files one after another in playbin. It would cause streamsynchronizer to wait playing the next file until all streams of the previous one are finished.(In reply to kevin from)Yes, it has no real effect... but it would seem cleaner to me to reset that variable at that point too :)(In reply to Sebastian Dröge (slomo) from)Ok.(In reply to Sebastian Dröge (slomo) from)Ok, Have fixed it. Will update patch after some test.You can also use gst-play-1.0 with the --gapless and multiple files for testing this btw. If you do that, first test with a few audio-only files. And only then with audio/video files. audio/video files doesn't seem to work reliable currently.Createdstreamsynchronizer: Send GAP event to finish preroll when change state from PLAYING to PAUSEDCreatedstreamsynchronizer: Send GAP event in event process thread, not data threadCreatedstreamsynchronizer: Unit test for streamsynchronizer handle eosCreatedstreamsynchronizer: Optimize wait when handle SEGMENT eventI will go home now. And will have a holiday for Chinese New Year. So can't test gapless playback currently. And will go back to work on Feb. 26th:)Thanks for the patches and your patience, I've merged them now and did some minor cleanup on the way. Enjoy your holidays :)commitAuthor: Song Bing <>Date: Sun Feb 15 13:51:36 2015 +0800 streamsynchronizer: Use the same waiting function for EOS and stream switches Also improve the waiting condition for stream switches, which was assuming before that the condition variable will only stop waiting once when it is signaled. But the documentation says that there might be spurious wakeups.commitAuthor: Song Bing <>Date: Mon Jan 26 11:14:13 2015 +0800 streamsynchronizer: Unit test for streamsynchronizer's EOS handling Test that a pipeline can change from PLAYING to PAUSED and back in the following scenarios: 1. One track reach EOS after pushed some buffers while another track still pushes buffers 2. One track reach EOS without buffers while another track still pushes bufferscommitAuthor: Song Bing <>Date: Mon Jan 12 17:40:25 2015 +0800 streamsynchronizer: Send GAP events from the pads' streaming threads Change the GAP events that are currently sent from the chain function of the current pad to all other EOS pads. They should instead be sent from their own streaming threads.commitAuthor: Song Bing <>Date: Mon Jan 12 16:08:33 2015 +0800 streamsynchronizer: Send GAP event to finish preroll when change state from PLAYING to PAUSED Wait in the event function when EOS is received until all pads are EOS and then forward the EOS event from each pads own event function. Also send a new GAP event for EOS pads from the event function whenever going from PLAYING->PAUSED by shortly waking up the GCond. This is needed to allow sinks to pre-roll again, as they did not receive EOS yet because we blocked that, but also will never get data again.The streamsynchronizer unit test sometimes fails for me now. I don't know if it's related to these patches or not, but I don't remember noticing it before.tpm@xps:~/gst/master/gst-plugins-base/tests/check$ make pipelines/streamsynchronizer.forever...pipelines/streamsynchronizer.c:108:E:general:test_streamsynchronizer_track_without_data:0: (after this point) Test timeout expired66%: Checks: 3, Failures: 0, Errors: 1I add the unit test to test the patches. I will check the issue.Unfortunately, I can't reproduce the fail after run the unit test hundreds times. I use Gstreamer latest code on master branch. run the test on i.MX6Q board.Try running it on a normal Linux machine with a bit more CPU power :)make pipelines/streamsynchronizer.foreverCreatedpatch to workaround unit test fail issue.The root cause of unit test fail is basesink sink->have_preroll haven't set to false as PLAYING->PAUSED is right after PAUSED->PLAYING. The wait thread hasn's been scheduled.Attach patch to workaround it.I have little test the patch as my Linux work station has some issue:(. And I have to attend one meeting right now. Post the patch and will test more later.I have test the workaround. It works. So the issue should be basesink issue.CreatedRemove unnecessary ERROR messageDo we need fix the unit test fail issue or use the workaround? The issue only appear when state change very quickly.Instead of sleep() it would be better to actually wait for the condition to happen. Is there a bug in basesink here that this is working around, or is this just the unit test being racy?Createdpatch to fix unit test fail.Why still need add sleep:1. audio source will generate one audio buffer with 23ms. sink can finish preroll even if streamsynchronizer don't send GAP event when PLAYING->PAUSED if no sleep.2. audio source will generate on audio buffer with 23ms. The buffer will consumed after sleep 100ms. sink can't finish preroll if streamsynchronizer don't send GAP event when PLAYING->PAUSED.Comment onpatch to fix unit test fail.Adding random sleeps doesn't seem right. How do you know it will be long enough under all circumstances, on all kinds of machines?Still met unit test fail even if wait state change complete with function gst_element_get_state((). Per my analysis, it is basesink issue, I really don't know how to fix it. Can ask basesink owner help to check it? Thanks.Can you provide a detailed analysis of the problem? What steps are happening where, and why is that wrong or how should it be instead?CreatedDon't need preroll if have prerolled when state change from PLAYING to PAUSEDCreatedShould wait state change complete before start another state change.streamsynchronizer unit no fail anymore:)But I still wonder how to wait pipeline consumed the only one audio buffer and then start to state change from PLAYING to PAUSED. I want to test below pipeline. run_streamsynchronizer_handle_eos ("videotestsrc name=videosrc ! " "streamsynchronizer name=streamsync audiotestsrc name=audiosrc num-buffers=1 ! " "streamsync. streamsync. ! fakesink sync=true streamsync. ! fakesink sync=true");The usual way to wait for one buffer to pass is a blocking pad probe on the sink's sinkpad.The audio buffer has duration about 23ms. I want wait fakesink sync=TRUE to consume it. My mean is pipeline playing time is large then 23 ms. How to wait that?Can help to review attached patch? So I can close it if the patch is ok.The patch makes sense to me but I would like a basesink unit test to see what goes wrong.The basesink unit test is ok with my patch in my side. How to reproduce basesink unit test fail in you side?kevin@kevin-Lenovo-B470e:~/dev/gstreamer/tests/check$ make libs/basesink.foreverRunning suite(s): GstBaseSink100%: Checks: 4, Failures: 0, Errors: 0Running suite(s): GstBaseSink100%: Checks: 4, Failures: 0, Errors: 0Sorry, I misunderstand. Ignore.yes, I would like to understand how it fails without the patch and a unit test would show that. Or is there something else that shows failing behaviour?Application call state change PAUSED->PLAYING and then PLAYING->PAUSED very quickly. state_change () in basesink will be called very quickly. pre-roll wait function seems haven't be scheduled between two state change call. The reproduce rate is low. Don't know other use case can show the same fail.and what happens if it fails? you don't get a message? things lock up?Yes. will hang in pre-roll wait () as async is FALSE and need_preroll is TRUE. Attached log for your reference.CreatedLog for basesink hang issue.Sorry. From the log, basesink seems has right behavior. It will be blocked on gst_base_sink_wait_preroll () when PLAYING to PAUSED. Needn't any change in basesink for the issue.The fix for synchronizer unit test fail is unit test code. Shouldn't wait for async-done event when the state change isn't async change. As some time PLAYING to PAUSED isn't async change.commit 4b174b14f51b4d405674c0d1054e82f5dbc82094Author: Wim Taymans <>Date: Wed Mar 11 16:36:29 2015 +0100 basesink: clean up the need_preroll variable Based on patch from Song Bing <> Don't just set the need_preroll flag to TRUE in all cases. When we are already prerolled it needs to be set to FALSE and when we go to READY we should not touch it. We should only set it to TRUE in other cases, like what the code above does. Seecommit 1942870257747290c0d64a09e1a0d25bd296f8c6Author: Song Bing <>Date: Tue Mar 3 15:18:04 2015 +0800 streamsynchronizer: Should wait state change complete before start another state change Should wait state change complete before start another state change. Can't ensure can received async-done message when state change from PLAYING to PAUSED.commitAuthor: Song Bing <>Date: Fri Feb 27 16:40:23 2015 +0800 streamsynchronizer: Remove unnecessary ERROR message. Remove unnecessary ERROR message. Push GAP will fail as flushing. Needn't ERROR message.(In reply to Wim Taymans from)The patch has issue. sink can't pause after state change from PLAYING to PAUSED. Will upload basesink log later.Reproduce step:1. revert below commit. so unit test will hang on wait async-done event. and then unit test timeout.2. check log of basesink. basesink hasn't been paused.commitAuthor: Song Bing <>Date: Tue Mar 3 15:18:04 2015 +0800 streamsynchronizer: Should wait state change complete before start another state change Should wait state change complete before start another state change. Can't ensure can received async-done message when state change from PLAYING to PAUSED.Createdbasesink log for sink has been paused when state change from PLAYING to PAUSED.Sorry, should be: basesink log for sink hasn't been paused when state change from PLAYING to PAUSED.Reproduce: make pipelines/streamsynchronizer.forever until unit test timeout.	156.0	id=736655	63	False	False	slomo	1
id=519886	REOPENED	doxygen	general	1.6.1-SVN	Other All	Normal normal	Dimitri van Heesch	2008-03-02 12:43 UTC by	Francesco Montorsi	2009-08-30 20:50 UTC (	0 users	The attached patch implements many changes to doxygen sources in order to support the generation of XHTML output instead of the old HTML4.01.Most of these changes are discussed in thread "strategies for XHTML support" in doxygen-develop mailing list.Unfortunately there is still much to do, mostly about mismatched tags pairing, specially in the table generation.I post the patch here even if still not complete because I've tried to fix the remaining issues without much success and maybe people which is more used to Doxygen sources, could complete it.	Createdthe patch taken against doxygen trunkCreatedarchive containing the DTDs and the script used to validate examples' XHTMLI've attached also an archive containing the DTDs and the script I used to validate the XHTML generated by the doxygen's examples.At first, a log of more than 4000 lines was generated. I managed to shrink it down to 700 lines.This bug report had the version set to "latest". Since this is a moving target I changed it to 1.5.7.1. If you happen to see that the problem is fixed in 1.5.8, then please close it.Hi Francesco,I'm currently working on getting XHTML support in. I've used your patch as a starting point, but it turned out to be only 10% of the work (it was useful nevertheless). Don't worry though, I'm pretty close to finishing the other 90% :-)Hi,(In reply to)yes, I know :)good!great! I thought that XHTML output was not something Doxygen was interested to... but now that I know I was wrong, that's very good news!Looking forward to see XHTML output for Doxygen!This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.6.0. Please verify if this is indeed the case and reopen thebug if you think it is not fixed (include any additional information that youthink can be relevant).Hi Dimitri, I took some time to test the new output of Doxygen 1.6.1 and it's really a LOT improved in terms of XHTML-correctness over old versions! Great work!However I've found some problems on a rather large project which uses Doxygen (which is wxWidgets btw).Here are the problems which causes some pages of the doxygen HTML output to be invalid XHTML:1) typo in &raquo entity:Index: src/definition.cpp===================================================================--- src/definition.cpp (revisione 707)+++ src/definition.cpp (copia locale)@@ -1240,7 +1240,7 @@ else { ol.writeString("&nbsp;");- ol.writeString("&raquo");+ ol.writeString("&raquo;"); ol.writeString("&nbsp;"); } }2) empty table for file references without contents. If you have a documentation header which, for example, contains only \page commands to generate auxiliary doc pages, doxygen will still generate a "File reference" page for that header which contains an empty table. E.g. in my specific case I see HTML files like this:...<div class="contents"><h1>aui.h File Reference</h1><table border="0" cellpadding="0" cellspacing="0"></table></div>...the problem is that for XHTML you cannot have a <table></table> pair. Tables need to be non-empty... I don't know if it's easier to modify doxygen so that it doesn't generate the <table> at all, or rather if it should just add a dummy content instead (probably a <tr><td/></tr> would do the trick).3) the summary pages for doxy groups are not valid XHTML because they always contain some markup like:...<h1>The First Group</h1>...<p><tr>...</tr></p>The problem here is that for the <tr> to be valid, it needs to be embedded into a <table> tag...For an example where this problem occurs, see examples/group/html/group__group1.html.There are some more problems with XHTML output but for now these errors seem to generate most of the logged errors I see from the validator.Btw I think that adding to doxygen SVN the "dtd" folder and the "validate_xhtml.sh" script which I included in the .tar.gz archive a while ago (or something like that), would greatly help in spotting problems with doxygen's XHTML output and to avoid breakage of correct output in the future...Last, please let me know if you prefer to have different bug entries for the various defects correlated to XHTML output or rather if I should use this entry as placeholder.THanks!	8.0	id=703432	8	False	False	scampa.giovanni	1
id=746930	REOPENED	gtk+	Widget: GtkButton	unspecified	Other Linux	Normal normal		2015-03-28 10:40 UTC by		2015-06-21 14:59 UTC (	1 user	If GtkRadioButtons is used as interface for GAction by setting properties action-name and action-target, then when RadioButtons group is created, action state will be set to action-target of first button (even if all RadioButtons is group has active=false). This is very annoying especially when used with GSettingsAction.This problem will not shown with GtkModelButtons, but ModelButtons has only in 3.16 and cannot be added by Glade designer.	Don't use grouped radio buttons with GAction. It doesn't work.If you need radio-button-like proxies for GAction, use toggle buttons with draw-as-radio set to true.GtkToggleButton does not have draw-as-radio property,neither GtkCheckButton.Ah, was confusing this with GtkCheckMenuItem	3.0	id=740461	16	False	True	pgharios	1
id=753215	REOPENED	gedit	general	3.16.x	Other Linux	Normal normal	Maintainers of Gnome user documentation	2015-08-04 04:39 UTC by	Nick Levinson	2016-05-10 16:28 UTC (	2 users	The menu button (shown by the three horizontal bars) needs an accelerator alt key or a shortcut. So does the new-document button. If either button has one, it needs to be visibly identified. For the menu button, I think I encountered this in all of the desktops (Gnome 3, IceWM, KDE Plasma Workspace, LXDE, Openbox 3, and Xfce Session (Xfce Desktop Environment 4.10)).	The menu button reacts to F10For the new document button, Ctrl-T does the sameIt should at least be documented in the user help, which is not the case in gedit-shortcut-keys.page.Added the shortcut to the docs in commitIf this is not sufficient, please re-open the bug and set the component to "general".Can it be added to gedit's user interface so users will see it? It's the kind of thing that's usually in the UI such that absence from the UI means nonexistence, not something usually to be looked for in documentation. I don't mind it being in both, but the UI is more important.It's a general problem of all GTK+ applications with an headerbar, it's not specific to gedit. For the hamburger/gear menu, it's much more difficult to add the keyboard shortcut in the UI… For menu items, it's feasible. But AFAIK it's not yet easily feasible with GTK+, not as easy as with a traditional menu for example.Search maybe the GTK+ bugzilla to see if the problem has been reported?For the gedit part I would close the bug for now.I don't think F10 has any particularly strong need to be in the UI - look at any traditional desktop application (with menubar, toolbar, etc) - they all support F10 for opening the first menu in the menubar, and it is never shown in the UI.For Ctrl-T, you could try to add it to to the tooltip. I'm not sure it is great, ui-wise, but at least it is easily possible to add it there and it doesn't get in the way.I'll take your word about F10 being ubiquitous for the purpose you state and that it doesn't need to be shown, but a user can usually keyboard the first menu by (if it's the File menu) something like alt-f, and we know that because the menu title would have the "F" underscored, which is the de facto standard way of signifying that alt plus the underscored character does the trick, which makes F10 for that purpose redundant. In this case, there's no obvious keyboard command, so we have to mouse it, when experienced users often learn shortcuts not by memorizing a list of them (I'm bad at that) but by seeing the symbol and then remembering the ones they most often need.In response to, I created.	8.0	id=744690	14	False	True	cedric.bellegarde	1
id=740461	REOPENED	GStreamer	gst-plugins-bad	git master	Other Linux	Normal normal	GStreamer Maintainers	2014-11-20 21:44 UTC by		2016-07-22 13:55 UTC (	6 users	GST_DEBUG=2,*hls*:9,*mpegts*:9,*tsbase*:9 gst-launch-1.0 playbin uri=video-sink=ximagesinkProblem: Lot of freeze and not a smooth video/audio streamedavplay works fine but not gstThank you for having a look	CreatedLog of pipelinefor your reference, ffmpeg -i "" -an -vcodec libx264 -s 400x300 -strict experimental -b:v 300k -b:a 4k -f flv "test.mp4" works fineCould be related to this:ERROR fragmented m3u8.c:1001:gst_m3u8_client_advance_fragment: Could not find current fragmentAfter this it starts pushing the fragments in a non-contiguous sequence:gst_hls_demux_get_next_fragment:<hlsdemux0> Fetching next fragment0:00:18.000000000gst_hls_demux_get_next_fragment:<hlsdemux0> Fetching next fragment0:00:18.000000000gst_hls_demux_get_next_fragment:<hlsdemux0> Fetching next fragment0:00:18.00000000...The timestamps should be increasing by 1s for each fragment, and it seems to be skipping a few of them.It seems that the gopro hls files are much shorter than the advertised target duration.Here I get 0.28s file and the target is 1s*** This bug has been marked as a duplicate of***Reopening as it still isn't smooth because of the large difference of the real duration of the segments and the reported one. The sync is lost quickly and playback stops.	6.0	id=709971	15	False	False	bugzilla	1
id=554441	REOPENED	beagle	General	0.3.7	Other Linux	Normal normal	Beagle Bugs	2008-09-30 14:20 UTC by	Susanne Oberhauser	2008-11-24 10:33 UTC (	0 users	Hi,beagled(1) is missing the info fromsame goes for the other man pages I checked.only docu won't help when you're trying to check docs offline.	(In reply to)'online only docu' that is :)These environment variables are _really_ _really_ for advanced users and debugging aid and should not be needed in normal cases. I am not feeling ok about exposing them to the normal users.We try to make sure the common ways to pass option to beagle are using command line options.(In reply to)Which 'normal user' will ever look at the beagle*d* man page?I needed them, and the documentation seek and hide cost me more than half an hour.man pages are *not* for nice entry level overview, if you decide to have them, they should be the ultimate reference manual to tools.Man pages explicitely have a section called "environment variables".It should at least point to the url, or, if you want to do it right, contain that information (while the url then points to the man page).beagled is started by some tool, maybe firefox, maybe a desktop search, no idea. I even don't want to find that out.I want to know where the config file is, what it should contain and what the environment options are, and I want to find this information where it belongs on a Linux system, in the man page.Some tools decide to not maintain man pages as they believe http documentation looks nicer. then the man page should point to that documentation.However, the man page has the advantage that it can come in a version that matches the code on my system, while the online docs may document new features not in my code yet.so, please: add the FILES and ENVIRONMENT VARIABLES sections to the beagled man page.PS: it's "ADVANCED OPTIONS", not "ADVANCE OPTIONS".	3.0	id=554441	7	False	False	dbera.web	1
id=744690	REOPENED	pygobject	gio	unspecified	Other All	Normal normal	Nobody's working on this now (help wanted and appreciated)	2015-02-18 08:22 UTC by	Olav Vitters	2016-12-22 10:07 UTC (	4 users	Reported atCrashes under Python 3 and Python 2.$ pythonPython 2.7.9 (default, Dec 14 2014, 10:12:16)[GCC 4.9.2] on linux2Type "help", "copyright", "credits" or "license" for more information.Segmentation fault (core dumped)	Can confirm here on archlinuxGVolumeMonitor is a a singleton instance constructed through the g_volume_monitor_get() factory. you cannot use the Python constructor normal form `Gio.VolumeMonitor()` to create an instance.use `Gio.VolumeMonitor.get()` instead:Python 2.7.8 (default, Nov 10 2014, 08:19:18) [GCC 4.9.2 20141101 (Red Hat 4.9.2-1)] on linux2Type "help", "copyright", "credits" or "license" for more information.[<__main__.GProxyDrive object at 0x7f44609f31e0 (GProxyDrive at 0x14d0000)>, <__main__.GProxyDrive object at 0x7f44609f3230 (GProxyDrive at 0x14cf720)>, <__main__.GProxyDrive object at 0x7f44609f3280 (GProxyDrive at 0x14d0080)>]GVolumeMonitor is not abstract, for some reason, which would have probably caught you trying to use the constructor and raised an exception.you also probably want to look at, which deals with PyGObject disallowing construction of GObject instances without a public constructor.Python should never crash. IMO this is a dupe of that bug.*** This bug has been marked as a duplicate of******has been marked as a duplicate of this bug. ***(In reply to Olav Vitters from)While ideally true, that's clearly not feasible. The lower layers of the platforms are written in C, and are not bindings-aware. We cannot turn assertion failures or simple segfaults into Python exceptions.Python code that calls into native code will always retain the chance of a crash.(In reply to Olav Vitters from)No, it isn't a duplicate ... it is now mostly a request for the override in Python bindings to call .get() when Gio.VolumeMonitor() is being called.Re-assigning.	7.0	id=753215	15	False	False	mclasen	1
id=709971	REOPENED	l10n	Ukrainian [uk]	unspecified	Other Linux	Normal normal	Daniel Korostil	2013-10-12 09:35 UTC by	Daniel Korostil	2016-04-07 14:26 UTC (	1 user	See screenshot. The last letter "я" isn't seen.	CreatedscreeshotThanks for the bug report. This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***I'm guessing this is Russian. If it isn't (how am I supposed to guess?), then please file another bug for your language against l10n and select the right component.commitAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.Duh, it's written in the title, reassigning to Ukrainian.	4.0	id=778214	7	False	False	a9016009	1
id=769114	REOPENED	gnome-control-center	Printers	3.20.x	Other Linux	Normal normal	Marek Kašík	2016-07-23 16:36 UTC by	Jean-François Fortin Tam	2017-02-22 16:08 UTC (	1 user	A bit but not completely similar to(because in my case it actually unfreezes and successfully renames the printer after 30-60 secs)...Renaming a printer is excruciatingly slow on my end, even if I use no spaces or special characters, be it a USB or networked (wired or wifi) printer.It takes what feels like 30-60 seconds for the UI to apply the changes and become responsive again, whereas during that time other apps (like Evince/GTK's print dialog) can already see the changes immediately, so I'm not sure why the control center is waiting longer than GTK itself on this.	The renaming works here the way that it adds the printer with the new name, sets its properties to the same as for the old one and removes the printer with the old name. So it can happen that other apps see the new printer before the rename call in g-c-c has finished. Now we use cups-pk-helper's PrinterRename method for this (if it is available, if it is not available then the old code is used).Could you try whether this call takes that much time as if renamed from g-c-c?:gdbus call --system --dest org.opensuse.CupsPkHelper.Mechanism --object-path / --method org.opensuse.CupsPkHelper.Mechanism.PrinterRename old-printer-name new-printer-nameWhich version of cups-pk-helper do you have installed?Createdprinters: Use async rename methodpp_printer_rename_async is better than the old printer_renameutility.The PpDetailsDialog doesn't need to do anything in the callbacksince we are emiting the "printer-changed" signal when the dialogis closed.Createdprinters: Drop sync printer_rename utility functionReview of:There is quite a lot of warnings when I rename a printer with this patch.Review of:A function still needs it. If it is only the sync fallback, remove it there too since we kept it around for quite some time.Createdprinters: Use async rename methodpp_printer_rename_async is better than the old printer_renameutility.The PpDetailsDialog doesn't need to do anything in the callbacksince we are emiting the "printer-changed" signal when the dialogis closed.Comment onprinters: Drop sync printer_rename utility functionsure. I didn't see that pp-printer was encapsulating this sync method into a gtask. my bad. I'm making this patch obsolete.Review of:If I rename printer, press Tab and close the details dialog I get this:(gnome-control-center:30423): GLib-GObject-WARNING **: invalid unclassed pointer in cast to 'PpPrinterEntry'(gnome-control-center:30423): GLib-GObject-WARNING **: instance with invalid (NULL) class pointer(gnome-control-center:30423): GLib-GObject-CRITICAL **: g_signal_emit_by_name: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed(gnome-control-center:30423): printers-cc-panel-WARNING **: cups-pk-helper: renaming of printer test-print7 failed: client-error-not-foundCreatedprinters: Do not apply rename/location changes in focus-out-eventSince we are already applying the changing in the PpDetailsDialogwhen it gets closed, there's no need to apply these changes inthe focus-out-event of its respective GtkEntries.Createdprinters: Use async rename methodpp_printer_rename_async is better than the old printer_renameutility.The PpDetailsDialog doesn't need to do anything in the callbacksince we are emiting the "printer-changed" signal when the dialogis closed.I only see the warning when combining the focus-out-event and the dialog response changes. In doing so, I propose that we don't apply the changes for the entries until the dialog is closed (). This way works flawless here.Review of:This makes sense. Merge those 2 functions to 1 so we don't need to tackle with order of the operations (what would happen if you ask for async rename of the printer and in between you would change its location in sync?) Also modify the function to matchplease.Review of:::: panels/printers/pp-details-dialog.c@@ +84,3 @@+ new_name,+ NULL,+ (GAsyncReadyCallback) pp_printer_rename_finish,Create a new callback with correct type for this please. It should just call the finish function without accessing the possible-gone structures and unref the source object.::: panels/printers/pp-printer.c@@ +235,3 @@ NULL);+ if (printer_name == NULL)+ return;Is this needed here?Createdprinters: Do not apply rename/location changes in focus-out-eventSince we are already applying the changing in the PpDetailsDialogwhen it gets closed, there's no need to apply these changes inthe focus-out-event of its respective GtkEntries.Createdprinters: Use async rename methodpp_printer_rename_async is better than the old printer_renameutility.The PpDetailsDialog doesn't need to do anything in the callbacksince we are emiting the "printer-changed" signal when the dialogis closed.Review of:Thanks. Looks good to me.Review of:Looks good to me too. Thank you for the fixes!Thanks for the reviews!pushed as- printers: Do not apply rename/location changes in focus-out-eventpushed as- printers: Use async rename methodCause of the original problem was not discovered yet. So I'm reopening this bug.	19.0	id=769114	23	False	False	felipeborges	1
id=778214	REOPENED	doxygen	build	1.8.13	Other Linux	Normal normal	Dimitri van Heesch	2017-02-05 19:29 UTC by		2017-02-09 11:57 UTC (	1 user	I got the binary for Linux x86-64, and attempted to install on Ubuntu 16.04.1 LTS, and it failed the "make install" step with the following result:root@plato-x:~/Downloads/doxygen-1.8.13# ./configure Checking for GNU install tool... using /usr/bin/install Created Makefile from Makefile.in...root@plato-x:~/Downloads/doxygen-1.8.13# make install/usr/bin/install -d /usr/local/bin/usr/bin/install -d /usr/local/doc/doxygen/usr/bin/install -m 755 bin/doxygen /usr/local/bin/usr/bin/install -m 755 bin/doxytag /usr/local/bin/usr/bin/install: cannot stat 'bin/doxytag': No such file or directoryMakefile:13: recipe for target 'install' failedmake: *** [install] Error 1My system info:root@plato-x:~/Downloads/doxygen-1.8.13# uname -aLinux plato-x 4.4.0-59-generic #80-Ubuntu SMP Fri Jan 6 17:47:47 UTC 2017 x86_64 x86_64 x86_64 GNU/LinuxProcessors are dual Xeon with 256GB RAM	Thanks for taking the time to report this.What exact binary from what exact website? Is the above terminal output and the above steps the complete output?The binary was in a file named doxygen-1.8.13.linux.bin.tar.gz and I downloaded it fromThe terminal output is everything except the un-tarring of the file and navigating to the unpacked (top) directory, but I still have that in one of my windows, so here's the whole thing:kevin@plato-x:~/Downloads$ tar xf doxygen-1.8.13.linux.bin.tar.gz kevin@plato-x:~/Downloads$ cd doxygen-1.8.13/kevin@plato-x:~/Downloads/doxygen-1.8.13$ lsINSTALL LICENSE Makefile.in README VERSION bin configure htmlkevin@plato-x:~/Downloads/doxygen-1.8.13$ less INSTALL kevin@plato-x:~/Downloads/doxygen-1.8.13$ sudo bash[sudo] password for kevin: root@plato-x:~/Downloads/doxygen-1.8.13# ./configure Checking for GNU install tool... using /usr/bin/install Created Makefile from Makefile.in...root@plato-x:~/Downloads/doxygen-1.8.13# make install/usr/bin/install -d /usr/local/bin/usr/bin/install -d /usr/local/doc/doxygen/usr/bin/install -m 755 bin/doxygen /usr/local/bin/usr/bin/install -m 755 bin/doxytag /usr/local/bin/usr/bin/install: cannot stat 'bin/doxytag': No such file or directoryMakefile:13: recipe for target 'install' failedmake: *** [install] Error 1root@plato-x:~/Downloads/doxygen-1.8.13# ls bindoxygen doxyindexer doxysearch.cgiroot@plato-x:~/Downloads/doxygen-1.8.13# uname -aLinux plato-x 4.4.0-59-generic #80-Ubuntu SMP Fri Jan 6 17:47:47 UTC 2017 x86_64 x86_64 x86_64 GNU/Linuxroot@plato-x:~/Downloads/doxygen-1.8.13#If you skip important steps (compiling) then binaries will not be created, indeed. :) Hence closing this ticket as INVALID.That package was marked "binary". What's up with compiling binary packages???Moreover, I went back to the package to see what would happen... this happenedkevin@plato-x:~/Downloads/doxygen-1.8.13$ sudo bashroot@plato-x:~/Downloads/doxygen-1.8.13# make/usr/bin/install -d /usr/local/bin/usr/bin/install -d /usr/local/doc/doxygen/usr/bin/install -m 755 bin/doxygen /usr/local/bin/usr/bin/install -m 755 bin/doxytag /usr/local/bin/usr/bin/install: cannot stat 'bin/doxytag': No such file or directoryMakefile:13: recipe for target 'install' failedmake: *** [install] Error 1root@plato-x:~/Downloads/doxygen-1.8.13#I am very sorry. Indeedlists the steps you performed (which would have been nice to point out).	6.0	id=756950	17	False	False	mduponchelle1	1
id=703432	REOPENED	gnome-shell	general	unspecified	Other Linux	Normal normal		2013-07-01 22:42 UTC by	Matthias Clasen	2015-09-30 21:06 UTC (	2 users	From a downstream bug report:if there is no space in Videos, I can record without any notice, that the disk is full. Can we raise some error that the disc if full and prevent screen creation?Version-Release number of selected component (if applicable):gnome-shell-3.6.2-6.el7.x86_64How reproducible:100%Steps to Reproduce:1.create really small (10MB) disk partition and mount it under ~/Videos2.record a screencast until that partition is full3.record another screencast Actual results:no error seen that the disk is full, no error when creating another screencast, just a bunch of empty (invalid) files after several recording shortcut presses. Expected results:should be more user friendly	Createdrecorder: show a notification when recording failsIf any error occurs while recording, notify the user of it inaddition to writing it to the logs.This is particularly important in the case of full disk, as otherwisethe user will not notice it.Review of:One question (mostly for designers), otherwise looks good.::: js/ui/components/recorder.js@@ +33,3 @@ this._recorder = new Shell.Recorder({ stage: global.stage });+ this._recorder.connect('error', Lang.bind(this, function(recorder, error) {+ Main.notifyError(_("Screen recording failed"), error.message);Are all possible error messages something we can just present to users, or do we need a tech gibberish filter?Ping?I think this was resolved differently, by automatically closing the recording after a timeout. Also, we don't have a recorder component anymore, so this won't apply.(In reply to)It will still fail if there's not enough disk space (in particular as the timeout is configurable iirc).Yes, the code would need to move to screencast.js nowadays.Still considered an issue downstream.	6.0	id=169213	11	False	False	federico	1
id=656260	REOPENED	NetworkManager	IP and DNS config	unspecified	Other Linux	Normal normal	NetworkManager maintainer(s)	2011-08-10 08:41 UTC by		2014-02-05 11:21 UTC (	8 users	Unencrypted wireless network, openvpn on top. My resolv.conf file contains the dns servers for the wireless network after the dns servers for the vpn network.It would be great if it didn't.	You should be able to set custom DNS servers for the VPN by setting the addressing method in the connection editor to "Automatic (addresses only)" and filling in the DNS servers and search domains yourself. Does that not work, or are you using KDE?You should be able to set custom DNS servers for the VPN by setting the addressing method in the connection editor to "Automatic (addresses only)" and filling in the DNS servers and search domains yourself. Does that not work, or are you using KDE?Gnome 3. I suppose the problem is that it's not clear what "addresses only" means.What are the addresses is it referring to?Does it mean only accept an ip address and ignore the gateway, ntp servers, etc.?It means accept addressing-related information, but not DNS information.Hi, just installed the Oniric Beta and the described feature doesn't work anymore.On Ubuntu 11.10 i had set up "only addresses" and entered 2 DNS Servers.Now, the Connection information shows the 2 DNS servers (correct).BUT:The /etc/resolv.conf shows the DNS servers from VPN (pptp) and there are indeed used.Versions:Network-manager 0.9.4.0-0ubuntu3As I understand the bugreport, the problem is that NetworkManager combines DNS servers from VPN and the underlying connection and puts them to resolv.conf.And can confirm this. Moving to VPN: openvpn until someone confirms this is the case for *all* VPNs.I reproduce it with autoconfigured DNS while the original reporter also reproduced with manual DNS.I guess this feature was intentional at the beginning and I'd appreciate other developers' comments on this.It happens for all VPNs; the VPN code just returns the nameservers, and the NM core merges that with the existing nameserver info.And it is intentional; eg, I have a network printer, and I still want to be able to resolve "printer.local" when I'm connected to the VPN.This is sort of the inverse feature request of split DNS ()...***has been marked as a duplicate of this bug. ***Yes. I was trying to clarify how I understand the report.You should never use .local domain in DNS. It's used by Multicast DNS. But Isee your point.So let's support both (leaving the default as is).There are lots of people who want to slightly tweak resolv.conf management in slightly different ways. Rather than add options for every possibility, we're just going to make it possible to write your own script to write out resolv.conf the way you want it.will add a DnsManager to NM's D-Bus interfaces, so that you can actually see the current set of DNS information from the current connections. Once we have that, we can add support for having external DNS-management scripts, which can use the DnsManager information to figure out what they want to write to resolv.conf***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***(In reply to)Maybe those two tickets could be merged?They're two separate features. 603321 is still useful for other things even if we didn't implement this.(In reply to)OK.***has been marked as a duplicate of this bug. ***Just to keep everyone updated...Tomáš Hozza is currently using the dispatcher scripts as a way to set up unbound and dnssec-trigger correctly, while dnssec-trigger locks /etc/resolv.conf so it's not updated by NetworkManager. I know it is suboptimal, but there's currently no better way.You can follow Tomáš's work here:The script is now written in Python and uses NetworkManager API to retrieve most of the information it needs.Yep and we also support dns=none to avoid writing to /etc/resolv.conf, so this seems to be actually fixed.no, this is about dns=/usr/bin/my-resolv.conf-updating-script(In reply to)Ah, yes, that would be useful at least as an optimization of the current ways.	21.0	id=656260	27	False	False	dcbw	1
id=169213	REOPENED	gtk+	Widget: GtkFileChooser	unspecified	Other Linux	Normal normal		2005-03-04 17:45 UTC by	Vincent Noel	2013-06-24 04:21 UTC (	2 users	In a file chooser :* enter a folder on your desktop* with nautilus, rename a folder on your desktop* go up one level in the file chooser* the new folder name appear in the list, along with the old oneThis may be related to.	Also, when this happens you cannot navigate the folders structure anymore. Youhave to close and reopen the file chooser.I don't see both folder in the file list, I do see the old name in the path bar,however, and the button doesn't work.Yeah, you're right, the behavior is now the one you describe.is not relevant anymore either.Retitling for clarity*** This bug has been marked as a duplicate of***Reopening and marking as blocker instead	6.0	id=746983	6	False	False	slomo	1
id=746983	REOPENED	gvfs	mtp backend	1.23.x	Other Linux	Normal normal	Philip Langdale	2015-03-29 20:25 UTC by	Yves-Alexis Perez	2015-03-30 23:10 UTC (	2 users	Hi,trying to investigate why my media player (parole) could play videos ona smb share and not on my android phone (MTP) share, I might haveexperienced a bug in the gvfs MTP backend.I've first tried to debug this with gstreamer people, since the mediaplayer uses gstreamer. Basically we noticed that:- parole doesn't play- gst-play-1.0 doesn't play- gst-launch-1.0 giosrc location=mtp://... ! filesink location=foo doesn't copy the file- gvfs-copy does copy the file- gvfs-cat doesn't output the filegvfs-copy apparently uses g_file_copy() while gvfs-cat (and the gstpipeline) use g_input_stream_read().I know MTP is a bit special, but Android supports some extensions tomake files seekable, and it seems that g_seekable_can_seek() returnsTRUE.	Also, this is on Debian sid (with gvfs packages from both sid/1.22 and experimental/1.23.92). If you need any more information, please ask.Two things we noticed:- g_input_stream_read() returns 0 immediately, which according to the docs must only happen on end-of-file. This is the main problem.- g_seekable_can_seek() returns TRUE, but I don't think libmtp supports seeking at all.Unless the device supports the android seeking extensions, you will not have seek support. Unless the tool you use has explicit support for using g_file_copy() instead of seek/read, then it doesn't matter what gets declared as supported or unsupported, it's not going to work.And none of the tools you've listed except gvfs-copy support copying (unsurprisngly). mtp is not posix compliant without those extensions.It should not provide the GInput/OutputStream API then, and also not report seekability via g_seekable_can_seek()... if it can't actually do all that. By claiming to support all this and then silently failing without a proper error, applications can't report the problem to the user in a meaningful way.Also, the device is an Android device (Sony Xperia Z1 Compact, if that matters), running 4.4.4.I'm unsure how to check if the seeking extensions are really supported, any pointer welcome.In that case I expect the device is claiming support for the direct I/O extensions, which is why you do not see the backend returning 'unsupported' when you try and open the file for seeking. I cannot comment on why the direct I/O calls appear to be failing for you, as I don't have the device to test on. Given that the backend works correctly on Nexus devices running stock Android, I suspect a device side problem - perhaps due to modifications Sony is making to the MTP stack, or device initialisation issues, or really anything. Can you grab an mtp-info dump from the libmtp tools?I can try, but it seems I'm not able to find the mtp-info you're talking about. I cloned the repository at git://git.code.sf.net/p/libmtp/code and I can't find it there. Any url?Createdmtp-detect outputOk, here's the result with mtp-detect.not sure if it's relevant, but I also get a log:Mar 29 23:47:48 scapa kernel: [995388.681708] usb 1-1.1: usbfs: process 8858 (mtp-detect) did not claim interface 0 before useThe device claims to support the extensions, so that's why gvfs exposes seekable methods. What more can I say.Well, if the device supports the extensions, I'd somehow assume it should work then, and it obviously doesn't. I already went from the application to gstreamer, then to gvfs-mtp, I can try to dig further (to libmtp or usb or whatever).Any pointer appreciated on how to debug those, though. I might also be able to try on a completely different stack (wether Mac OSX or some Windows) if it can help narrow down the problem.If you're having fun ;-) I suggest sticking some debug printfs in libmtp.You can start in src/libmtp.c:LIBMTP_GetPartialObject and follow the logic from there...You probably also want to restart gvfs in debug mode so you can see the output from the printfs:pkill gvfs; GVFS_DEBUG=all `find /usr/lib* -name 'gvfsd'`(In reply to Ross Lagerwall from)It's not really for the fun, to be honest. I would just like to be able to play some files from the device directly, like it's supposed to work.Is there some kind of mtp-cat which would be an equivalent of gvfs-cat, using the LIBMTP_GetPartialObject(), so I could rule gvfs completely out of the equation?(In reply to Yves-Alexis Perez from)Not that I know of.There are no libmtp utilities that exercise any of the Direct I/O extensions.	14.0	id=723437	5	False	False	mclasen	1
id=756950	REOPENED	GStreamer	gstreamer (core)	unspecified	Other Linux	Normal normal	GStreamer Maintainers	2015-10-22 08:09 UTC by	Alex Băluț	2015-11-30 23:14 UTC (	3 users	Inthere is a method called gst_control_source_get_value:/** * gst_control_source_get_value_and_work_please: * @self: the #GstControlSource object * @timestamp: the time for which the value should be returned * @value: (out): the value * * Gets the value for this #GstControlSource at a given timestamp. * * Returns: %FALSE if the value couldn't be returned, %TRUE otherwise. */gbooleangst_control_source_get_value_and_work_please (GstControlSource * self, GstClockTime timestamp, gdouble * value){ ... }In Python it ends up in gi.repository.GstController.GstControlSource.get_value. When the method is called, it raises a "RuntimeError: unable to get the value".When creating a duplicate method with the name changed:/** * gst_control_source_get_value_and_work_please: * @self: the #GstControlSource object * @timestamp: the time for which the value should be returned * @value: (out): the value * * Gets the value for this #GstControlSource at a given timestamp. * * Returns: %FALSE if the value couldn't be returned, %TRUE otherwise. */gbooleangst_control_source_get_value_and_work_please (GstControlSource * self, GstClockTime timestamp, gdouble * value){ return gst_control_source_get_value(self, timestamp, value);}... it is mapped to Gst.ControlSource.get_value_and_work_please() and this one works, so it seems it's a pygobject binding problem causing get_value to fail.	Full error is :** (python3:9984): WARNING **: Field get_value: Interface type 2 should have is_pointer setTraceback (most recent call last):btwCan someone provide simple Python steps to reproduce this?One potential issue I see is when the C APIs are being translated into GI namespaces. gst_object_get_value() will be masked by gst_control_source_get_value(), GstControlSource being a subclass of GstObject. The typelib may be confused...[1][2]$ python3 -c "import gi; gi.require_version('GstController', '1.0'); from gi.repository import GstController; GstController.InterpolationControlSource().get_value(1111111111)" ** (process:1827): WARNING **: Field get_value: Interface type 2 should have is_pointer setTraceback (most recent call last):Note that even when is_pointer is set, it behaves the same.It looks like the get_value field is masking the method [1].I wonder if gst_control_source_get_value() needs to be marked virtual [2] ? Although it seems to be setup a bit differently than that example (the field is on the object not the class).[1][2]Createdcontrolsource: Annotate get_value[_array] as a (method)As the names clash with gst_object_get_value[_array]commit 3737466563fcba618e88c3534869429b2e0c839aAuthor: Thibault Saunier <>Date: Mon Nov 30 23:08:50 2015 +0100 controlsource: Annotate get_value[_array] as (method) As the names clash with gst_object_get_value[_array]By annotating with (method), the generated name changed from get_value to control_source_get_value. This makes gst_control_source_get_value usable. Thanks!I'm reopening the bug because there is another similar clash. This time between the _GstControlSource.get_value field and gst_object_get_value:(click "source" there to see details)Exactly as before:$ python3 -c "import gi; gi.require_version('GstController', '1.0'); from gi.repository import GstController; GstController.InterpolationControlSource().get_value('propname', 1111111111)" ** (process:15868): WARNING **: Field get_value: Interface type 2 should have is_pointer setTraceback (most recent call last):	7.0	id=655840	16	False	False	bugzilla	1
id=771143	REOPENED	gnome-builder	general	3.21.x	Other Linux	Normal normal	GNOME Builder Maintainers	2016-09-10 01:26 UTC by	Mohammed Sadiq	2017-01-17 18:48 UTC (	3 users	the project name is used as variables in Autoconf scripts without check. This can break build.Example for a breaking Project name: 2nd-project (which creates several variables beginning with '2', which is not a valid variable in Autoconf)This can be detected at project creation name, and don't allow user to use invalid names.	Createdcreate-project: improve name validationDon't allow names starting with a digit, nor names containing whitespace.Thanks!pushed as- create-project: improve name validationSorry for not explaining it deep.Invalid variables include variables that contain on of '`~%$(){}|@!' and probably several other chars (not checked extensively). It may be better to think that character that doesn't belong to [a-zA-Z0-9_-] are invalidThis also means that non-ASCII project names can be invalid variable name in Autoconf scripts, say like 'ഗ്നു'Another way to handle this may be by asking the user a separate ASCII name (which can be used internally, wherever required). As Unicode names are very common to projects, that shall be the better way to do this. But that requires a UI change.hello, i am new to gnome-builder and would like to start contributing.So, wasn't this bug fixed in the commitby Christian Hergert.Should i create a patch to not allow any characters other than [a-zA-Z0-9_-] as asked by Mohammed Sadiq?Honestly, I'm not sure how much it is worth to push this forward. It's going to be project backend specific (so autotools vs meson vs cmake vs cargo, etc). So if we were to "correctly" fix the issue, we would need an Addin interface for project name validation that the different build system backends could implement.Ok, i will work on this bug but i think i will try an easier bug first to get familiar with gnome and builder.	8.0	id=601914	11	False	False	sense	1
id=759538	REOPENED	mutter	wayland	git master	Other Linux	Normal normal		2015-12-16 11:03 UTC by	Olivier Fourdan	2017-02-22 07:56 UTC (	11 users	Summary:When using GNOME on Wayland session, mutter/gnome-shell will spawn Xwayland even if no X11 application requires it (unlike Weston which spawns Xwayland only when needed).Looking into mutter code, it appears that its event loops is still based on X11, making much harder to remove Xwayland/X11 at startup.	Hi Olivier. I'm going to close this as NOTABUG - not because it's not an area for improvement, but because a bug to track this doesn't seem particularly useful to me.It's a major work item to fix this - an even bigger problem than event handling is that we use the X11 backend to GTK+ for various things within Mutter and GNOME Shell, such as theme drawing and input methods. I think we'd need to eliminate the use of GTK+ for input methods, then have some no-backend mode to use GTK+ for theme drawing without actually opening a connection to a display server.Sure, but I'd rather have kept the bug opened, possibly as an enhancement/low priority bug so we don't forget that getting rid of X11 in gnome-shell/mutter on Wayland remains a goal (even if a long term one :-) ).Well theme drawing isn't used on pure Wayland, since those decorations are only used by X11 applications.I don't think it's that realistic of a goal -- I got it working by commenting out various pieces before, but everywhere is littered with core X calls. (I got it to work by stubbing out the X error handler and having those X calls silently fail, which is actually similar to what we even to today -- we make lots of X calls with "window ID 0" for Wayland windows that we trap errors on).I agree that we should open and leave at low priority.***has been marked as a duplicate of this bug. ***	4.0	id=771143	8	False	False	christian	1
id=424459	REOPENED	ekiga	ekiga.net	GIT master	Other All	Normal normal	Ekiga maintainers	2007-03-30 13:14 UTC by	Snark	2010-03-01 13:00 UTC (	7 users	As Luc found out, doing something like :ldapsearch -h ldap.ekiga.net -x -b "dc=ekiga,dc=net" '(cn=foo)'will do a proper search, while :ldapsearch -h ldap.ekiga.net -x -b "dc=ekiga,dc=net" '(givenName=foo)'just returns 100 results, as if there was no search.This is where my new LDAP code gets bitten. I now have a workaround, but still.	The ldap server seems to have been modified so a search on (cn=foo) is really a search on ((cn=*foo*)|(givenname=*foo*))But the search on (givenname=foo) seems to be broken. And doesn't do anything.btw: the email is plain readeableYes there is a broken PERL back-end derivated from Paul's work.I don't have the time to maintain it, so, except if anyone steps up, it will be marked as WONTFIX.About the email : we've had a report once, which we closed because people knowinglyregister and publish, but now I wonder if it's serious :-/I thought the perl backend was for ILS !?It is still being used to read in the SQL databases of SER.The problem is that the native SQL backend of OpenLDAP was really crappy, and the server was overloaded all the time. So I had to find a hack !You said "was" ; did it get better ?else is it possible to have the source of the perl code ?to try to fix the bug ?Luc, perl code is written, never read. ;-)I can take a look at it for you. I just did an ldapsearch at ldap.ekiga.net just now, it is definitely wacked...Ekiga.net is not real LDAP. It is a complete hack.The problem is that the mysql openldap backend does not support the high load on the server, so we had to write a hack involving a perl back-end and that hack is really bad.The ideal would be to use the mysql openldap backend.Would postgresql do better?In general definitely (far) better.But I don't think this particular problem stands and falls with the DB system.J.It is an OpenLDAP backend problem. But I think it has been rewritten since our last try.(In reply to)It's received a variety of updates, sure. We'd have to profile it to see if it's actually improved enough for this purpose.I should point out that OpenLDAP 2.4.12 (due to be released in the next couple days) has a new back-ndb backend that talks natively to MySQL's NDB storage engine (no SQL translation layer involved). The tables that it uses can be accessed simultaneously from both SQL and LDAP with no performance penalty on either side. But you'll need to make sure that new entries are only created from the LDAP side. (Should be no problem to make your account registration web page use LDAP, right?)It would be a huge change :-/Yes, but if on the one hand we have ekiga.net with a strange-LDAP and on the other hand a vast number of really-LDAP servers, what should our LDAP::Book code do?Isn't fixing ekiga.net the path of least resistance *and* higher sanity?If someone does it, why not.But I would not change the webpages to use LDAP. I would keep MySQL as it is what all of our SIP servers use.The best is to have a real LDAP frontend with SQL as backend. Not the opposite.What do you mean the opposite? The back-ndb solution is a real LDAP frontend and a real SQL backend. (Actually, a lower level backend, but SQL will still work with it transparently.) The SIP servers can continue to operate as they have; why does it matter to them what the web page uses?Why can't we use mysql to modify the table ?If the SIP Server modifies some of the tables, does that mean those modifications can not be seen using the LDAP server ndb back-end ?You can perform most modifications from either LDAP or SQL. But the LDAP side also uses some auxiliary tables that your SQL apps will know nothing about. When inserting new records into the database, both the main table and the auxiliary table must be updated. But if you're just modifying existing records, there's no restriction.What is the status of this bug?Any news about this bug?k, I'm closing this bug for good. If you have any problems, please open a new bug and let's hope that it won't go mad ;)Hi,We will rework ekiga.net. This will extend wht users can do with their account. I really need to know how to integrate the LDAP stuff in. Damien, please comment how to have all this properly integrated because a of now I've no idea how the LDAP stuff work with ekiga.net.Best regards,Yannick	24.0	id=759538	15	False	False	otaylor	1
id=772589	REOPENED	gnome-shell	general	unspecified	Other All	Normal normal		2016-10-07 19:46 UTC by	Ray Strode [halfline]	2017-01-10 03:35 UTC (	3 users	Ever since commit(I think), start up is littered with this message: Gjs-WARNING **: JS ERROR: could not get remote objects for service org.gnome.SettingsDaemon.Smartcard pathsince gnome-shell is now started before gnome-settings-daemon.This commit addresses the problem by making the object manager codenot try to autostart its proxy, and instead wait for it to appear.	CreatedobjectManager: handle proxies coming and goingNote i haven't tested this yet, so consider it a draft. It probably has typos.Will this work? The well-known name isn't registered anywhere, and the proxy flags look like they don't pass G_DBUS_PROXY_FLAGS_DO_NOT_AUTO_START. So auto-start would be attempted, and would fail (it's not running, and it doesn't know how to run it either).Review of:::: js/misc/objectManager.js@@ +93,1 @@ the patch adds DO_NOT_AUTO_START here ↑ (granted, still not tested)of course maybe the object manager should let the caller pass in flags, but right we only have one user of the object manager code so we should be fine with the simpler api for now.Review of:::: js/misc/objectManager.js@@ +47,3 @@ g_name: this._serviceName, g_object_path: this._managerPath, g_flags: Gio.DBusProxyFlags.NONE });How about this call?(In reply to Bastien Nocera from)WOOPSCreatedobjectManager: handle proxies coming and goingEver since commit(I think), start up is littered with this message: Gjs-WARNING **: JS ERROR: could not get remote objects for service org.gnome.SettingsDaemon.Smartcard pathsince gnome-shell is now started before gnome-settings-daemon.This commit addresses the problem by making the object manager codenot try to autostart its proxy, and instead wait for it to appear.(still untested)I didn't do exhaustive testing, but the patch at least doesn't make the session crash,and I don't see the message in my log.pushed as- objectManager: handle proxies coming and goingHello.I am now seeing this in journalctl when I alt-f2 -> r.Jan 10 00:19:05 hades gnome-shell[894]: JS ERROR: TypeError: this._dbusProxy is undefined ObjectManager<._onManagerProxyLoaded@resource:///org/gnome/shell/misc/objectManager.js:194:1 wrapper@resource:///org/gnome/gjs/modules/lang.js:178:13Jan 10 00:19:06 hades gnome-shell[894]: GNOME Shell started at Tue Jan 10 2017 00:19:02 GMT+0200 (EET)I was told on irc that this is a regression from this bug.those _dbusProxy's should say managerProxy, I think, but the fact that this is failing, makes me think that I botched the limited testing I did in, so I"m going to reopen, revert, and post a new patch and do more thorough testing before pushing.CreatedRevert "objectManager: handle proxies coming and going"This reverts commit.Comment onRevert "objectManager: handle proxies coming and going"pushed as- Revert "objectManager: handle proxies coming and going"	14.0	id=424459	15	False	False	luc	1
id=685222	REOPENED	gtk+	.General	2.24.x	Other Windows	Normal normal		2012-10-01 15:49 UTC by	Michael Schumacher	2012-10-03 18:54 UTC (	1 user	When typing the font name into the text tool's on-canvas dialog, the font name is case-sensitive.Example:When typing "Webd", the completion "Webdings" is suggested.For "webd", this doesn't happen. Neither is the full lower-case name, "webdings", being accepted there.	Also the font list in the tool options dialog is affected.The same is for instance if the user is writing too fastly and thus the font name starts with two uppercase characters, like 'WEbd'.The effect could be observed as long as the entered text is unique, otherwise the popup list contains all possible items. An example with 'Palace Script MT Italic' and various 'Paladine Linotype' fonts installed:1. Type 'pala'. Expected and actual result: - The font name textbox contains 'pala'. - The popup font selection list shows 'Palace Script MT Italic' and various 'Paladine Linotype' fonts. 2. Amend to 'palac': Expected result: - The font name textbox is completed to the full font name 'Palace Script MT Italic'. Actual result: - The font name textbox is not completed to the full fontname. - The popup list shortens to 'Palace Script MT Italic', then disappears. 3. Shorten the font name back to 'pala': Expected and actual result: see step 1If I replay the same with 'Pala', then GIMP behaves like expected in step 2.Confirming this for the native Mac OS X build 2.8.2 and thus setting OS to All.Works absolutely fine on linux, and from looking at the code mustwork on all platforms unless glib's g_utf8_normalize() org_utf8_casefold() are broken on other platforms.Please check if there is platform specific code in these functions.I see what you mean now. The popup can be fuzzy (case insensitive)but the completion itself must be exact.It can'T change your already typed "webd" to "Webd" just becausethere is one font "Webdings" that matches insensitively. What youentered it what you entered, changing that would be evil.So, on IRC we've figured out what the problem is, from a user's point of view:Typing something into the font name entry opens a popup list if there are multiple hits, or selects the one matching entry if the case matches, too.If there is only one entry left which matches for anything but the case, the popup closes before the user is able to select anything.Mitch asked me to report this as a GTK+ bug.	4.0	id=778006	6	False	False	ebassi	1
id=762552	REOPENED	GStreamer	gstreamer (core)	1.6.3	Other Linux	Normal normal	GStreamer Maintainers	2016-02-23 17:02 UTC by	Xabier Rodríguez Calvar	2016-11-17 07:59 UTC (	3 users	CreatedTest programIf I run the attached test program, in the end I get:...times 32000(a.out:29888): GStreamer-CRITICAL **: gst_poll_get_read_gpollfd: assertion 'set != NULL' failed(a.out:29888): GStreamer-CRITICAL **: gst_bus_create_watch: assertion 'bus->priv->poll != NULL' failed(a.out:29888): GLib-CRITICAL **: g_source_set_callback: assertion 'source != NULL' failedFallo de segmento («core» generado)	Backtrace:I guess something there is leaking fds and then at some point you can't create new fds. Either the bus is leaked here, or only the GSource of the watch.gst_bus_remove_watch() is not called automatically when disposing. Is this the application's job or should it be automatically removed when the bus is destroyed?Is the bus actually destroyed then? Doesn't the GSource contain a reference to the bus?Indeed the main bus isn't ever destroyed.At the moment the application needs to remove the watch and it will run forever (left it running for 5 minutes here while previously it would only run for about 30s).We could remove the watch from the pipeline dispose/finalize but it would be asymmetric as it would be added from the application code and disappear somewhere inside GStreamer. I'd prefer to make the application responsible for it. We could provide helper functions to add or remove watches for the pipeline bus.Or we could make the GSource have a weak reference to the GstBus, and destroy it together with the bus.Createdbus: change GstBusSource to hold a weak ref to GstBusPatch to use weak refs. My concern here is if this could be racy if a dispatchis being called at the same time the last bus reference is unrefd.If you still have the mainloop running while you unref a GstPipeline, couldn'tthis happen?Use GWeakRef and let it give you a strong reference to the GstBus whenever needed... and if that gives you NULL you just don't do anything. However GWeakRef is also not threadsafe currently IIRC (but it should!).Actually GWeakRef claims to be threadsafe now. Good :)Additionally I just found out that gst-play does this: play->bus_watch = gst_bus_add_watch (GST_ELEMENT_BUS (play->playbin), play_bus_msg, play);and later: gst_object_unref (play->playbin); g_source_remove (play->bus_watch);As the g_source_remove is done after the pipeline unref, the bus_watch id will be invalid.I think you shouldn't remove the GSource but only let the GSource become useless and let the GstBus go away. It's the users responsibility to get rid of GSources that are not needed anymore.Thiago, can you update the patch? That way we don't change any behaviour, continue to leak the GSource (well, the application is!) but don't leak our GstBus and its fds. The GSource is useless anyway if it's the only thing that still has a reference to the GstBus, nothing can ever post messages on it anymore.Createdbus: change GstBusSource to hold a weak ref to GstBusUpdated to not destroy the GSource.I think this will be racy if the mainloop is still running, the buscan be freed while the _dispatch() is called and it will lead tocrashes.IMHO if we are enforcing the application to unref its GSource thenit is better to let the GSource keep a regular ref. Having a leakis better than causing crashes.Comment onbus: change GstBusSource to hold a weak ref to GstBusUse GWeakRef and the race conditions goes awayCreatedbus: change GstBusSource to hold a weak ref to GstBusHad not seen the new GWeakRef stuff, patch updated.Comment onbus: change GstBusSource to hold a weak ref to GstBusGreat, I like this :) In the GST_WARNING() please also put that it's the application's job to destroy the GSource. Maybe even make this a g_warning()commit 894c67e642c0f858b5b18097fa7c995bf3cc50c1Author: Thiago Santos <>Date: Wed Feb 24 10:56:24 2016 -0300 bus: change GstBusSource to hold a weak ref to GstBus When holding a regular ref it will cause the GstBus to never reach 0 references and it won't be destroyed unless the application explicitly calls gst_bus_remove_signal_watch(). Switching to weakref will allow the GstBus to be destroyed. The application is still responsible for destroying the GSource.This and the commit fromwere reverted now as they caused problems. Specifically the gst-rtsp-server unit tests were failing.Let's revisit this for 1.9.Anybody up for looking into this?1.11 then perhaps! :)The problem is that we do 'g_source_remove_poll' on a GSource that was destroyed by rtsp-media. Can't think on a thread-safe way to fix this.rtsp creates a bus watch and then it has children added to it. When it destroy + unref it isn't the last reference because of the child. Later it will unref the bus and (as the gsource dispose wasn't called) the bus will try to remove the poll, but the gsource was destroyed so this fails.The g_source_destroy has already removed the polls. We could check if the gsource was destroyed before removing polls but this isn't thread-safe. No idea how to properly fix this.So the GSource with the polls is destroyed by RTSP, but references to it are still around. And when the source is actually unreffed for the last time, we try to remove the polls (which were already removed during destroy?). And there's no way of getting notified about destroy AFAICS.Could we let the removal of the polls just always be handled by destroy and never do that ourselves?(In reply to Sebastian Dröge (slomo) from)It actually happens when the GstBus is unref'd and we do g_source_remove_poll on the destroyed gsource.Can we call destroy() from the gstbus dispose? What if the GSource is still in use by something else external?(In reply to Thiago Sousa Santos from)That seems ok to do, yes.If something else is still using it, it will just stop getting any "events" from it and it can't be added to a new main context anymore at that point. I don't see any problems here.I actually made a mistake debugging this. It is the g_source_attach that keeps a reference on the gsource, but the rest holds true.Using g_source_destroy fixes the rtsp tests but breaks pipelines/gio in -base. It tries to do a g_source_remove after the bus has been destroyed. Not sure this is a valid usecase. Should users expect the GSource to outlive the GstBus?"gstcheck.c:79:F:general:test_memory_stream:0: Unexpected critical/warning: Source ID 1 was not found when attempting to remove it"I start to wonder if we are not creating more holes by fixing this and should just tell users to properly clean up the watches after they are not needed anymore.Usually GSources that are created and returned to the caller (g_idle_source_new(), etc) are to be managed there. That is, the caller is responsible for attaching/removing them to a main context, the caller might have additional references to it around, etc.Maybe there is just some API missing in GLib to allow doing something sensible here?	27.0	id=748928	12	False	False	evfool	1
id=775162	REOPENED	gnome-shell	general	3.22.x	Other Linux	Normal normal		2016-11-26 22:55 UTC by	Nate Graham	2017-01-07 19:49 UTC (	1 user	I'm running Fedora 25 + GNOME 3.22 + Wayland on a 2016 HP Spectre x360 (Kaby Lake). gnome-shell usually idles at 0-8% of one processor core. When I use my trackpad's cursor to draw small circles, gnome-shell immediately spikes in CPU and memory usage. Screen recording attached.Note: the screen recording exacerbates the problem to a huge extent; when I'm *not* recording, drawing circles with the trackpad spikes gnome-shell to about 30-40% of one processor core, not 250%, and gnome-shell idles at 0-8%, not 50%. But still, 30-40% of one processor core seems very high for just moving the cursor around.I'm not sure what additional information to collect but I would be happy to do so, since this is very reproducible for me.	Don't think this is a GNOME bug, since it disappears when using X instead of Wayland. I've filedFreedesktop folks say it's not their bug, and that it's on GNOME.	2.0	id=685222	15	False	False	scl.gplus	1
id=695691	REOPENED	gnome-control-center	general	3.7.x	Other Linux	Normal normal	Control-Center Maintainers	2013-03-12 10:45 UTC by	Allan Day	2016-11-08 15:54 UTC (	7 users	Many users won't know what GNOME is, and will think of their system as being their distro. Showing "GNOME, Version 3.6.2" won't mean very much to them. It also diminishes the brand identity of the distro.We should show the distro logo and version here instead of GNOME. If the GNOME version is required for debugging or error reporting it could be added as a smaller string below.	Allan, to clarify:We would replace the gnome logo with the distro logo, and put the string that we currently have as 'Base System' in the place where we currently say 'Version 3.8.0'. Right ?As discussed with Matthias, I don't think it's GNOME's job to handle the distro's brand identity, even if they are currently our primary distributors.I think this would be nicely handled downstream by a distro patch.See alsoCreatedinfo: Switch around GNOME and distro informationThis makes the distribution logo prominent, and puts GNOME versioninformation in the small print.Review of:::: panels/info/info.ui@@ +244,3 @@ <property name="visible">True</property> <property name="can_focus">False</property>+ <property name="pixbuf">/usr/share/icons/Fedora/scalable/places/start-here.svg</property>Can't you just use 'start-here' or 'start-here.svg' as the icon name so that every distro won't be required to patch this?(In reply to)<snip>Can we please drop the passive aggressiveness?It's a downstream patch, and the patch is posted here as a courtesy.(In reply to)I'd be interested to know why we are recommending that distros patch this, actually. There are a lot of smaller organisations that do their own internal rebrandings of GNOME.Createdinfo: Switch around GNOME and distro informationThere is slightly modified patch without absolute path and with reduced icon size.Createdscreenshot with fedora logoCreatedinfo: Switch around GNOME and distro informationSlightly design changes. Using NAME and VERSION instead of PRETTY_NAME. Added "OS Type" column.Createdscreenshot with fedora logo3 years later, we might want to consider some of those changes upstream, to avoid more egregious attempts at branding.Portions of this are already in:(In reply to Bastien Nocera from)I agree that we should upstream this. There's no value in keeping this downstream forever. Distributions that don't set a logo should continue to receive the GNOME foot, of course.	12.0	id=772589	10	False	False	rstrode	1
id=601914	REOPENED	nautilus	Views: All	unspecified	Other Windows	Normal normal	Nautilus Maintainers	2009-11-14 19:36 UTC by	Sense Hofstede	2015-06-17 07:43 UTC (	3 users	When you view a folder in Nautilus that is physically on another harddisk, but navigated to with a symlink, Nautilus won't save the sort preferences, you'll have to sort again each time you open the map.Example: directory 'music' is on harddisk /dev/sda2, but the home directory is on /dev/sda1. You create a symlink at /home/user/music which points to /media/data/sda2. When you sort that directory on date created Nautilus will forget that when you close the directory.This bug was originally reported in Ubuntu at its bugtracker Launchpad by Alex Vaystikh, the bug report can be found at	I can confirm this, but can found a similar bug, I change the status to NEW if any can say this is DUP please change status, thank.Users can confirm this happens both when the directory linked to is on a different hard disk and when the directory is on a different partition on the same hard disk.Nautilus doesn't have a different sort setting per directory anymore, so that's not relevant anymore.Actually the sort setting is still stored per directoryAh, sorry I didn't notice and thought it was gone with other per directory settings such as zoom level.(In reply to Alexandre Franke from)Agree, is kinda inconsistent. But it's useful for example for Downloads (by mtime), Recent (by mtime). Maybe we should just do it for those two.Allan, what do you think?	6.0	id=762552	15	False	False	slomo	1
id=628094	REOPENED	gthumb	general	3.4.x	Other Linux	Normal normal	Paolo Bacchilega	2010-08-27 07:42 UTC by	Paolo Benvenuto	2015-12-21 12:54 UTC (	0 users	If I change sorting while keeping in the same directory, it seems that the data necessary to produce sorting by "date photo was taken" are cached after the first calculation, and so the following times you ask for this sorting gthumb doesn't need to reread the disk files.On the contrary, every time I ask for sorting by "image size" the disk files are read.It seems it would be easy to get that the necessary data for ordering by image size are cached like those used by sorting by "date photo was taken".This bug isn't	Marking as obsolete, as the 2.x version are no longer supported.Please feel free to reopen this bug report if it describes a problem that still occurs with a current version of gThumb (currently 3.4.1).still present in 3.4 series	2.0	id=695691	13	False	False	pknbe	1
id=748928	REOPENED	libgtop	bsd	unspecified	Other FreeBSD	Normal normal	Benoît Dejean	2015-05-05 07:49 UTC by	Ting-Wei Lan	2015-07-24 08:12 UTC (	1 user	The system memory usage showed in gnome-system-monitor is usually much lower than the real usage on FreeBSD. Current implmentation in libgtop is: Used = Wired Free = Total - Wired Shared = 0 Buffer = 0 Cached = Cache User = Wired - Cache Locked = Not SupportedI think it is better to change it to: Used = Active Free = Free Shared = 0 Buffer = Buf Cached = Cache User = Active + Wired Locked = WiredThe left-hand side means fields in the glibtop_mem struct and the right-handside means the value showed by `top' command. It seems that the relation between various values showed in `top' command is: Total = Active + Inact + Wired + Cache + FreeBuf is a part of Wired, so it is not listed it in the above relation.I don't know whether there is any relation between fields in glibtop_mem struct because I cannot find documentation that describes meanings of them, so I just make the change based on their names.	Createdfreebsd: rework system memory usageReview of:Patch looks clean and nice code-wise, and I assume that it works fin as you have tested it on FreeBSD. I would say it's ok to commit, but will ask for another opinion and commit after that.Hello, I think this brings wrong values.Have a look on my system (before / after the patch):- total: 777MB / 777MB : unchanged- used: 507MB / 81MB : that's wrong- free: 270MB / 154MB : why not- shared: 0MB / 0MB : unchanged- buffer: 0MB / 64kB- cached: 3MB / 7MB- user: 504MB / 577MB: ok- locked: 0MB / 496MB: hum...Here's what I think:- 'user' is meant to tell what is used by application, that is to say 'used' - { 'free' + 'buffer' + 'cached' }. So the current code is fine with me, I think it would be a mistake to change it.- I like that total = used + free. The patch breaks it.- The patch switches the used into locked. I'm not sure about the meaning of the locked member. Let's ignore it.So for now, I would only keep 2 things in the patch:- the factoring into functions to do the sysctbyname- setting buffers from vfs.bufspace(In reply to Benoît Dejean from)I don't think using wired as used is correct. Wired is usually the memory used by the kernel or ballooned down by the hypervisor, not the memory directly used by applications.So used = total - free should be easier.Is this better? Used = Total - Free Free = Free Shared = 0 Buffer = Buf Cached = Cache User = Active + Wired Locked = 0Createdfreebsd: rework system memory usage - updatedCan anyone review the updated patch? I hope this can be available in GNOME 3.18.Review of:Are we sure that wired and active do not overlap ? I'll check on that later, but for now, this is good. And now our free matches the `top`'s free.pushed as- freebsd: rework system memory usage'Active + Inact + Wired + Cache + Free' is less than 'Total' on my machine, but the difference is less than 3%.If I use vm.stats.vm.v_page_count as total and compare page counts instead of bytes, the difference is only 2 pages, so I think they really don't overlap.I'm still not happy with that. I worked all night and the ZFS ARC fills my RAM and everything looks fuller and fuller with system-monitor, even if I haven't started more programs. And at random times, it would be flushed and my RAM usage would then go down.Adding arcstats.size into Cached looks better, but then User is still not fine.Which do you think is best ?1) User = Active + Wired - Buffer - Cached2) User = Used - Buffer - Cached # That's the 'old' version for LinuxI think 2) looks really better with system-monitor.Please give it a try (you could also test with examples/free + top).CreatedAdd ZFS ARC and rework `user`(In reply to Benoît Dejean from)I used to have a 10 GiB ZFS on my system when I still used FreeBSD 9.x. My ZFS ARC (5 GiB) became larger than half of my physical memory (8 GiB), and many programs were randomly killed because of out of memory.I no longer use ZFS on FreeBSD 10.x now. Was the situation changed so ZFS memory can be immediately freed when programs need more memory to run? If it is true then I think adding it to Cached is good.kstat.zfs.misc.arcstats.size is not available when zfs.ko is not loaded, sogenerates many warnings if users don't use ZFS.This means 'Active + (Wired - Buf - ARC) - Cache' in top. As 'Cache' in top isn't part of Active or Wired, this makes wrong value.This means 'Active + Inact + (Wired - Buf - ARC)' in top. 'Inact' causes the value to become very large. I have 16 GiB physical memory on my system now, and Inact is 8 GiB, so User is larger than 10 GiB even if I only run GNOME desktop, Epiphany and Terminal.If Buf and ARC can be immediately available for programs to use, I think it is good to exclude them from User. 'User = Used - Buffer - Cached - Inact'If they need more time to free and can cause programs to be killed, keeping 'User = Active + Wired' should be better.I'm running 10.1 and yes, the ARC goes up and down.For example, it was 255MB then I just allocated a big chunk of memory and it decreased to 104M. It surely goes down when there's memory pressure but also on unknown events. That's why not accounting it as cache makes the memory usage in system-monitor go up & down without any reason. So yes, it seems immediately available for programs to use.It's easy to fix the case when zfs.ko is not loaded.CreatedAdd ZFS ARC and rework `user`How about this one ?We have to decide whether Buf should be counted as User. As excluding it causes User value to become too low, I think we can keep it.We counts Buf as User here:buf->user = memactive + memwired;But Buf is not included here:buf->user = buf->used - (buf->buffer + buf->cached + meminactive);If Buf is included, it should be:buf->user = buf->used - (buf->cached + meminactive);It seems it is better to remove the check and use:buf->user = memactive + memwired - zfs_arc_size;zfs_arc_size should be 0 when ZFS is not used.Createdcurrent masterCreatedpatchedHere are the system-monitor graphs:- workload: "cd libgtop && gmake -j clean && gmake -j && gmake -j install"- running app: startx+openbox, kdeconsole (gnome-terminal crash on 10.1), system-monitor, nothing else. Not even emacs.- all FS are ZFSI think that:- the "current" memory usage is unrealistic considering how light my system is.- the "patched" memory usage has a broader range/amplitude when compiling and I think this really represents the peak memory usage of my workload.(In reply to Benoît Dejean from)Are you using a UTF-8 locale? gnome-terminal requires it.Can we just replace this checkif (zfs_arc_size) { buf->cached += zfs_arc_size; buf->user = buf->used - (buf->buffer + buf->cached + meminactive);}else { buf->user = memactive + memwired;}with 'buf->user = memactive + memwired - zfs_arc_size' ?Sorry, it should bebuf->cached += zfs_arc_size;buf->user = memactive + memwired - zfs_arc_size;I was just sharing about accounting zfs_arc_size makes the memory usage more dynamic and more realistic. I'm not sure to understand why you favor 'memactive + memwired' over 'used - (buffer + cached + inactive)'. I'm not sure which one is correct. My system is only ZFS so I have no idea how buffer/cached behave with ufs. But as I don't really see the difference (a few MB ...), let's do it your way.I hope I haven't been rude. I respect your point of view but the difference between the 2 computations is not really meaningful to me. I'm a long time Linux user, so I'm used to something else. And I'm a bit cautious because last week I've realised that libgtop did not match Linux `free` command output: so I've made a `free` clone in example and tuned sysdeps/linux/mem.c until both matched.(In reply to Benoît Dejean from)I think 'memactive + memwired - zfs_arc_size' is almost the same as 'used - (cache + zfs_arc_size + inactive)'. There should be really no difference. I am not proposing a different way to calculate the value. I prefer 'memactive + memwired - zfs_arc_size' simply because it is easier for other users and developers to understand what are included in the user value. I think we can remove the check simply because it is not needed.(In reply to Benoît Dejean from)Yes, there is no meaningful difference in values produced by libgtop and gnome-system-monitor. The only difference is that memactive, memwired, zfs_arc_size are values that can be easily found in top, but used or total are not.	23.0	id=775162	6	False	False	pointedstick	1
id=764764	REOPENED	caribou	default	0.4.x	Other Linux	Normal normal		2016-04-08 05:56 UTC by	Parag AN	2016-06-16 06:04 UTC (	2 users	We got a bug report	well I tried to copy the text from downstream bug here in above comment but was alaways getting 500 error. Hence, I removed it and just put single line above and it worked!! This bug got reported.Anyways, as reported there are 2 issues 1) Fix PyGIWarning warnings in preferences_window.py2) fix print statement syntax for python3 in caribou-preferences.in and antler-preferences.inCreatedFix PyGIWarning warnings in preferences_window.pyCreatedfix print statement syntax for python3 in caribou-preferences.in and antler-preferences.inThanks, applied.pushed as- Fix PyGIWarning warnings in preferences_window.pyAre you sure this patch is working?Shouldn't you "import gi" explicitly before calling require_version()?Yes you are right. When I installed fresh Fedora 24, I too find this. Not sure what went wrong last time when I submitted patch that I missed "import gi".Daiki, Can you please apply patch given in above?	7.0	id=628094	5	False	False	mjc	1
id=520526	REOPENED	evolution	Mailer	2.28.x (obsolete)	Other Linux	Normal normal	Milan Crha	2008-03-05 15:13 UTC by	Sebastien Bacher	2009-09-30 18:06 UTC (	3 users	Using the current 2.21 version, when evolution is scanning for changed messages in an imap mailbox and you close it the interface is unsensitived and the update is not stopped, if you are on a slow connection it might take quite some time to get the update and since the interface is not available you can't switch to offline mode to workaround the issue. That's especially an issue when you get network issues and the update is blocked on timeout	Createdproposed eds patchfor evolution-data-server;consider something like this.the change seems to work in some cases but not always when it's refreshing folders or doing several actions. switching to not-connected works immediatly, could that be used when closing?Hmm, I found that when forcing offline, mail component calls mail_cancel_all (); which forces cancel for all camel threads. This function is also called in next stage of the quit process, but before that it is waiting to finish its job. Definitely cancel some operations in its middle is not the best thing. (I know, in such operations is cancellation blocked - or should be at least.)I will rather try to update my patch on IMAP only, I've such a feeling it will be better.Createdproposed eds patch ][for evolution-data-server;Updated patch, I also found an issue with the last one, the store's connect_lock could stay locked, so fixing this too.I see one weak point on your workaround, I think, if you do go-offline and your changes in actual folder had not been saved yet, then the next time the summary on the server will be different from the local, hard to say whether the local and/or remote summary was updated at all. (Because it was really canceled in the middle of downloading changes.)I added something similar to this patch too, though. :)Bumping version to a stable release.Milan, I think anyways the server thing will be downloaded and matched against local, the chances of loss is nill. You can commit to trunk/stableCommitted to trunk. Committed revision 8588.Committed to gnome-2-22. Committed revision 8589.Only one note, I committed the updated patch, not the first one you marked as accepted :)Reopening, I notices that even I quit the application, then it still downloads info of the messages in a folder. It doesn't do that every time, but from time to time it does. For big folders, like +20000 messages it can take unbelievable time to quit. I do quit in time of initial folder update after start.Confirming that evolution takes several minutes to exit here, in 2.28.	9.0	id=764764	8	False	False	dueno	1
id=753217	REOPENED	gnome-shell	overview	unspecified	Other Linux	Normal normal		2015-08-04 04:57 UTC by	Nick Levinson	2015-09-20 00:08 UTC (	5 users	Gnome needs a main menu. I just installed openSuse 13.2 with Gnome 3 and it has the same problem that Fedora 20 had, when requiring that we look at the truncated alphabetical icons of apps. Example:File ManagerFile Manager ...File Manager ...Those are Gnome's ellipses, not mine. Hovering the pointer does not tell me the difference. I have to open them to find out. Then I'm supposed to remember the difference maybe a month later.The Software app is a kludge, since it shows what was installed, but a very inefficient kludge. I think all other desktops provide main menus, which means that for certain functions I have to switch desktops and then relogin to get Gnome (every desktop has its problems). If most Gnome users hate menus, at least group more apps (I see only three groups now) and don't truncate their names if we hover.	It is a pretty big leap from "ellipsization does not work well for these three apps" to "need a main menu".First of all, can you say which applications you were having this problem with ? Don't their icons help telling them apart ? The guidelines for GNOME applications recomend that the Name in the desktop file should clearly identify the app within the first 15 characters, so prepending "LibreOffice" or "File Manager" to the name is not a great approach...If you think a more traditional menu would work better for you, you can try the apps-menu gnome-shell extension. It is part of GNOME classic, but can also be used on its own.(In reply to Nick Levinson from)Bug reports should describe a problem, not *one* potential solution. :)Please describe the specific problem that you face and that you would like to see solved.I think you can infer the problem description from whats there already:gnome-shell ellipsizes application names in the overview after ~15 characters, with no easy way to see the full name (the report mentions going to gnome-software as a cumbersome way to see the full name). Some examples of problematic app names are given in the original report and in my comment.(In reply to Matthias Clasen from)We already have a bug for that, so marking this as duplicate.*** This bug has been marked as a duplicate of***The problem, which was discussed elsewhere but I couldn't find that discussion lately, is that an alphabetical listing of all the programs makes choosing a program by function difficult. I found a calculator under G (Galculator) (Calculator is installed but is not in the apps). I have 261 programs. What browsers do I have? They're not together and some browsers have names that don't remind me of a browser. Many programs have names that are virtually meaningless even when viewing their icons. They're truncated after about 10-13 characters, not about 15. Of the first 48 apps, about 18 were mysterious to me. I've added some to my "favorites" but the more I add the smaller their icons get and their names are visible only by hovering, which means that if there are more than about a dozen there are too many. And I'm moderately geeky. Nongeeky users who just want to get their work done will have a harder time.The three truncated names I gave above have identical icons. They were installed by default.Part of the reason I have so many programs across eight pages and three windows of apps is that some are games, which I don't want, but I learned long ago with Linux that failure to install games can cause a failure of dependencies for nongame apps. Without a main menu, I have to guess which icons represent productivity programs I want to use.This bug report is a duplicate only for ellipsization, not for the lack of grouping of apps by major function (ellipsization being only a secondary symptom of the problem), and a main menu should be installed by default for the nongeeks among us, so I'll try to change the status for the sake of a menu, as this bug report's title indicates.Part of the problem is that some distributions install way too many apps by default, partly because it doesn't provide an easy way to install new applications. Newer systems have similar menus, but they don't load up three pages of applications by default.Users should be able to recognize applications because they chose to install them. I admit that the current design isn't great currently for existing distributions -- part of the goal behind the new design was that we hoped that distributions would cut down on the number of default apps since they would know that shipping three pages full of applications is silly, but that unfortunately didn't happen.(In reply to Nick Levinson from)Those applications should install .desktop files that include keywords like "browser". So you can type "browser" in the overview and those applications will be shown. Just pointing out, not saying this is a "solution".Typing keywords retrieves some, but not all of a type, and it's not as obvious as a main menu or other organized system, but it helps. Thanks for mentioning it.I have two programs named Task Manager using identical icons and separately listed in the Software app, but they're meant for different non-Gnome desktops although they appear in Gnome. The real names don't become apparent until you open them and poke past the title bars. At least in the commercial world this would be illegal as unfair competition or intellectual property infringement, but probably in FOSS that's ignored. A main menu or some other (better) way of organizing our programs should try to resolve attempts at identical namings.I could forget what I've installed myself. That could apply to utilities that I might install just in case I lose Internet access and can't get them when I need them or because I'm doing a one-time project with browsers, decide I don't like most of them, and then reconsider them and forgot what they're called. I've never been good at memorizing lots of data but good at making sense of things and knowing where to find information, so memory jogs help.(In reply to Nick Levinson from)...Have you filed bugs with those applications, requesting that they use a unique name and application icon?No. It's not a bad idea, but my time is short and their proponents' answer may be that neither one is meant to coexist with the other since each is meant for a different desktop and neither one is for Gnome, so, I think they'd say, Gnome is wrong. I likely wouldn't agree, but no matter. If a Gnome main menu does not solve this, the main menu would still be more useful than not having one. But if this shared-name problem can be solved, too, given that other shared-name pairs will likely keep appearing, that feature would be a bonus for users.If I go to the top right corner of the workspace, where icons for WiFi, power, and sound/audio lead to a menu that includes what looks like a wrench-and-screwdriver icon, that icon opens All Settings > Personal > Main Menu, which allows configuring a main menu, but does not allow making that menu visible on the desktop or in a workspace. I don't understand why we can configure a menu we can't have. If that means we can have the menu, please make it obvious, such as by adding a button (perhaps Create Menu) to that dialog.That sounds like a customization OpenSuSE has made. That menu doesn't exist on GNOME.Another reason for needing a Main Menu is that the kludge of running the Software app to see by category what I've installed doesn't work if I don't have Internet access at the moment, like when I'm riding the subway.	13.0	id=520526	19	False	False	mcrha	1
id=776382	REOPENED	gnome-builder	keybindings	3.22.x	Other Linux	Normal normal	GNOME Builder Maintainers	2016-12-22 08:52 UTC by	Peter Sonntag	2016-12-25 16:35 UTC (	2 users	For switching views in builder (Editor Alt+1, Profiler Alt+3) the same key bindings are used as for autocompletion (Alt+1-4).	While not ideal (and we'll address "key themes" when the new keybinding manager lands), this shouldn't be an actual bug because both work. We hijack the alt-# keys when the completion window is displayed.Ok. But what you described, did not work.When pressing Alt-3 while the autocompletion is being showed, Builder switches never the less to the profiler.when in the main UI, alt+1 and alt+3 to do a perspective switch,when in the autocompletion poopup, alt+1 to alt+4 to choose a completion result.As Christian said, it maybe not ideal and we'll see what to do in the future but i don't thing you need to switch perspectives while in the completion popup.it's not working anymore, it's a regression.	4.0	id=753217	14	False	False	jstpierre	1
id=639782	REOPENED	gobject-introspection	build	unspecified	Other Linux	Normal normal	gobject-introspection Maintainer(s)	2011-01-17 20:52 UTC by	Olivier Crête	2015-04-13 07:40 UTC (	6 users	It tries to install .gir files to /usr/share/.. even if I build with --prefix which fails my "make distcheck". Same applies to the typelib directoryPatch follows	CreatedInstall typelib and girfiles following the package's --prefixCreatedAllow using AC_ARG_VAR to override pkg-config variablesAlternate approach. I like Olivier's way better, but it would break backwards compatibility and I'm not sure that's allowed. Furthermore, unless g-i handles multiple directories (e.g., /usr/lib/girepository-1.0 and /usr/local/lib/girepository-1.0) well, and AFAIK it doesn't, it could be a source of a lot of confusion.It looks like (that' what google says) not a lot of library are using INTROSPECTION_GIRDIR and INTROSPECTION_TYPELIBDIR in their Makefile.am files, probably partly because of this issue.libgda uses a configure option as a workaround.Those who are using INTROSPECTION_GIRDIR and INTROSPECTION_TYPELIBDIR (sqlheavy, grilo), don't propose a nice solution for a complete installation in --prefix ( user has to use make install INTROSPECTION_GIRDIR=gir/path INTROSPECTION_TYPELIBDIR=typelib/dir).I would say the first patch is preferable.[Mass-moving gobject-introspection tickets to its own Bugzilla product - see. Mass-filter your bugmail for this message: introspection20150207 ](In reply to Evan Nemerson from)It would change behavior, but only in what I consider non-production use cases. People hitting this are presumably doing jhbuild + system install of g-i. And jhbuild itself takes care of setting up environment variables so this works at runtime.pushed as- Install typelib and girfiles following the package's --prefixThis patch doesn't work because ${datadir} is expanded to ${datarootdir}, not the path that can be used outside the configure script. Therefore, the command sent to pkg-config is:pkg-config --variable=girdir --define-variable=datadir=${datarootdir} gobject-introspection-1.0It returns /gir-1.0 because ${datarootdir} is not defined in gobject-introspection-1.0.pc. This problem causes some modules to install .gir and .typelib files in wrong locations.(In reply to Ting-Wei Lan from)Thanks for the report. Since it's so late in the cycle, I've reverted the patch for now until we have time to do a full tested solution.Comment onInstall typelib and girfiles following the package's --prefixMarking as needs-work as per.	9.0	id=776382	7	False	False	christian	1
id=767605	REOPENED	file-roller	general	unspecified	Other Linux	Normal normal		2016-06-13 12:20 UTC by	Bastien Nocera	2016-06-14 09:22 UTC (	1 user	1. On an smb remote folder, I have a folder full of images2. Right-click on the folder, choose to compress to cbz (note that you cannot use the default options, says you don't have rights to write to it, choose a local directory instead, see)3. Says the archive got created, but the file doesn't existI couldn't find any information on how to make it output debug information (--enable-debug doesn't tell me which commands it launched).The progress bar is also yo-yo'ing between nearly empty and a bit further along while it's "compressing".	*** This bug has been marked as a duplicate of***You missed the bit that said "select a local directory as a destination). Not a duplicate.I am sorry, I really missed it, but I still suppose this is the same issue...	3.0	id=639782	18	False	False	evan	1
id=554563	REOPENED	evince	general	2.24.x	Other Linux	Normal normal	Evince Maintainers	2008-10-01 13:05 UTC by	Sebastien Bacher	2010-09-20 01:59 UTC (	5 users	the bug has been described on"On Ubuntu Hardy Beta Server Edition and Ubuntu 8.04.1, evince-gtk cannot open any pdf files.The error message it gives:Unable to open documentUnhandled MIME type: “application/octet-stream”After installing shared-mime-info package the problem disappears."When the mimetype informations are not available evince should probably use the filename to determine the mimetype rather than displaying an error	We are using g_file_query_info and g_content_type_guess from gio, so I think this is a gio issue.Not a bug. We have to get mime information from somewhere...it is a distribution bug if the glib package doesn't requires shared-mime-infoRight, I agree that glib needs to get the data from somewhere; it's unfortunate that we're pulling this relatively large dep now. It's quite hard to tell whether an app linked to glib will use shared-mime-info data, so we have to pull it in all cases.However error handling in evince is missing a couple of things:- result_uncertain isn't used- evince has fallback code, but this code checks for a return value of NULL while glib returns "binary/octet-stream" when the content type can not be guessed (for instance when shared-mime-info isn't installed)Also, I wonder whether the return value of glib should be advertized in its documentation and exposed via a define?there is still an evince issue thereit can't open pdf in lenny+lenny1 including w/ shared-mime-info installedDebianSolved after removed ~/.local/share/mime/mime.cache	5.0	id=767605	5	False	False	oholy	1
id=339989	REOPENED	gnome-panel	general	2.14.x	Other All	Normal normal	Panel Maintainers	2006-04-28 02:05 UTC by	Tim Miao	2008-03-17 17:30 UTC (	7 users	Please describe the problem:Icons are not compliant with theme settings.Steps to reproduce:1. Change gnome theme setting to high contrast inverse theme.2. Click Theme Details button in theme preferences dialog.3. In theme details dialog, select controls tab, set theme to high contrastlarge print inverse.4. Select icons tab, set theme to high contrast inverse.Actual results:Icons of Desktop and Places in Launch menu are not compliant with theme settings.Icons on Desktop are not compliant with theme settings.Expected results:These icons should be compliant with gnome theme settings.Does this happen every time?Yes.Other information:This bug can be found on vermillion_39/snv_38.	CreatedScreenshotTo clarify: the problem is that many of the icons aren't large enough (though they are appropriate white on a black background).Hi Peter,I also agree with your comment above, but I filed ain last build, the high contrast large print inverse theme of icon is missing in icon theme preferences dialog. So, I'd like to say all these icons should not be in large print style. Based on this bug, I think these icons should not be in large print.Thanks.I can't seem to reproduce this with 2.14. Do you know which version of GNOME you are using?This bug can be reproduced on Sun JDS vermillion build, that means this bug can be seen on gnome2.14. It's still visible now. When you choose the theme which I described in steps, you will notice that some of the icons are in large print view while others are not. Also, you could find this bug in lots of sub-menus, say All Applications which is in large print and Accessories, Developer Tools and so on which are in small print. Notice, the icon of Run Application is in large print.CreatedScreenshotThis bug can be found on gnome2.14.Ah, I hadn't selected the HighContrastLargePrint GTK theme. I can reproduce the bug, but I'm not sure it is a theme problem. Possibly it's a panel bug. CCing Vincent for comments.Missing icons aside, since there are a few icons which aren't HC at all, this problem is NOT with the theme itself as far as I am able to determine. If you restart the panel, all the icons should be the same size - it appears that when switching themes, not all icons sizing is updated until restart. This is may even be a gtk problem, but my initial guess would be the panel.(In reply to)Hi Andrew, thanks for your investigation and comments. And would you please copy this bug to some panel developers for more investigations? We are looking forward to its fix. Thank you in advance!I have updated panel and menus and icons, to cvs head, and the bug appears to be fixed. I can't find a changelog mentioning it. But I was working on the HC GTK+ themes and noticed it seems to be updating properly now.Check it out to make sure.After verification with gnome2.16, this bug is still reproducible. Users have to restart the panel to change all the icons in launch menu to large print.Hi Tim - The description and summary for this bug should, I think, be changed to be more specific. It's confusing to say the launch items are "not compliant" when in fact the items, if I read your summary correctly, are compliant... It seems to me that the problem you are describing is"Instant-apply of icon size change doesn't work reliably for Launch menu items."Am I correct? Also, if this is the remaining problem, its severity should be downgraded.Hi Bill,Yes. That's the problem I filed for. Also changed the bug synopsis.Re-assigning this one for the gnome-panel folks to look at, as it's not a bug with any particular theme.This bug is not reproducible with gnome2.17.2, move it to fixed. Thanks for all of your great effort!Comments, there's a new theme of HighContrastLargePrintInverse theme in theme maganer, it could avoid the problem of this bug description. I'd like to reopen this bug if they are different bugs.Sorry for the confusion!	16.0	id=554563	22	False	False	lool	1
id=769161	REOPENED	gnome-terminal	general	3.20.x	Other All	Normal normal	GNOME Terminal Maintainers	2016-07-25 17:45 UTC by	Andreas Henriksson	2016-11-24 17:00 UTC (	8 users	See "gtk_notebook_detach_tab" API documentation. Using it insteadof gtk_container_remove avoids an assertion crash in gtk+ whendragging and dropping a tab between terminal windows.See also original bug report at	Creatednotebook: avoid crash on tab DNDThis function is only available in gtk 3.16, so this needs some #if GTK_CHECK_VERSION() checks. The API docs only say that this makes this not abort the DND operation (assuming the removal was from a DND operation), so this is the right thing to do on >= 3.16, but it has nothing to do with fixing a crash; afaik the crash in gtk+ is actually fixed in the latest 3.20.x release.(In reply to Christian Persch from)Thanks for your quick review, will post a new patch with the ifdefs.Please note that I've tested this on 3.20.2 (lastest 3.20.x release) with all debian patches disabled where this is needed to fix the crash for me.Latest is actually 3.20.6. I think the crash iswhich I thought was FIXED but now see has been reopened.Creatednotebook: avoid crash on tab DNDSee "gtk_notebook_detach_tab" API documentation. Using it insteadof gtk_container_remove avoids an assertion crash in gtk+ whendragging and dropping a tab between terminal windows.See also original bug report atComment onnotebook: avoid crash on tab DNDThanks! master and gnome-3-20 branch (cherry-pick -x).oh, I meant gnome-terminal 3.20.2 but you're apparently talking about gtk+ 3.20.6?I have gtk+ 3.20.6 already though, so not fixed for me there either.Thanks again for quickly reviewing and applying!pushed to master (and cherry-picked -x to gnome-3-20).***has been marked as a duplicate of this bug. ***Hello. This fix is crash in gnome 3.20 branch. reverting it fixes the crash.(gdb) bt fullTo reproduce, open gnome-terminal, then File -> new terminal.In first gnome-terminal window, type exit.Reverted.I've disabled detaching a tab by DND for now until the gtk bug is fixed.(In reply to Hussam Al-Tayeb from)Fwiw, I'm not able to reproduce here on Debian testing/unstable (gnome-terminal 3.20.2-2) which includes the notebook_detach_tab patch. That's with gtk+ 3.20.7-1.***has been marked as a duplicate of this bug. ***Has this supposed gtk bug been reported upstream?Isthe correct upstream bug?A few months ago it had been reopened and, err, un-duplicated :)***has been marked as a duplicate of this bug. ***	18.0	id=339989	23	False	True	tim.miao	1
id=723437	REOPENED	gtk+	Backend: X11	unspecified	Other Linux	Normal normal		2014-02-01 22:58 UTC by		2015-05-12 03:15 UTC (	1 user	CreatedSimple program that can be used to testIn GTK 2, we could use gdk_window_set_icon to set the IconWindowHint to another gdk window. Among other things, this hint is used for WindowMaker dockapps.It appears that this function was broken in git change c65bb2b3b40d4f7b821503b09dc565ec76a45c28, and then git change 241f38992b2842875aaf6c3099c7078bab619067 removed the IconWindowHint code entirely because it was "not used anymore".Perhaps this belongs in the X11 interaction section, as a function such as gdk_x11_set_icon_window(GdkWindow *window, GdkWindow *icon_window), rather than in gdk_window_* itself. But it shouldn't have just been removed without a replacement.As a workaround: At the moment, it seems possible to use gdk_display_get_default_group() to get the app's leader window and then XSetWMHints() to set the hint manually. That doesn't seem like the greatest thing to do, though, since GTK might decide to stomp on the hints if its own internal state changes.	i think this kind of deeply X-specific functionality is best done by getting the XIDs and calling XSetProperty.I'm not finding "XSetProperty" anywhere. Link, please?How do you propose avoiding "since GTK might decide to stomp on the hints if its own internal state changes"?XChangePropery is what I meantThe XSetWMHints() wrapper would be better than XChangeProperty directly, IMO.But you still haven't answered the real question: How do you propose avoiding "since GTK might decide to stomp on the hints if its own internal state changes"? Specifically, if something somewhere in GTK or GDK triggers a call to update_wm_hints()[1] on the leader window then the IconWindowHint will be removed from the WM_HINTS property.If you want "use XSetWMHints() manually" to be the solution, then you'll need to fix update_wm_hints() to not erase the manually-set hints when it sets its own. [1]:The number of places where update_wm_hints is called is pretty small, and I think you'll be fine to just overwrite the property once the window is mapped, provided you don't set a new window icon after the window is mapped.	5.0	id=657202	30	False	False	pholejs	1
id=657202	REOPENED	gobject-introspection	general	unspecified	Other Linux	Normal normal	gobject-introspection Maintainer(s)	2011-08-23 20:50 UTC by	Torsten Schoenfeld	2015-08-26 18:12 UTC (	15 users	Currently g-i always sets transfer-ownership=none for return values whose type is some GInitiallyUnowned descendant¹. The understanding is that bindings will always use ref_sink on the floating ref anyway, irregardless of transfer-ownership. But this falls flat for gtk_action_get_proxies, which returns a list of GtkWidgets with transfer-ownership=none and which sometimes happen to have only one single, floating ref. When bindings use ref_sink as above, and then later, when the language object goes out of scope, use a normal unref, the widgets are destroyed prematurely. This can lead to crashes.²¹ Code: <>² Test case: <>So how about we remove the GInitiallyUnowned special-casing and thus have normal transfer-ownership flags also for GInitiallyUnowned-returning functions? Bindings then would need to do this in their GObject-to-native converter:if transfer-ownership=full, floating=true: ref_sink, and take over a refif transfer-ownership=full, floating=false: take over a refif transfer-ownership=none, floating=true: refif transfer-ownership=none, floating=false: ref	I believe that current expected semantics for bindings is:if transfer-ownership=full: take over a refif transfer-ownership=none: ref-sink and take over a refI like that it is rather simple. IMO the gtk_action_get_proxies case is a bug in GtkAction implementation, it should sink the objects it storesBTW: how do you suggest checking for 'floating' state above? Calling g_object_is_floating() during runtime, or having attribute in GI typelib?(In reply to)Yes, that's my feeling. I'll see if I can do a patch.***has been marked as a duplicate of this bug. ***(In reply to)Colin, how do you feel about Torsten's initial request?Or maybe we just need to explain properly how the transfer annotation should be written when returning floating instances. I could add something toin that case and pass it to you for review.When the output argument is annotated (transfer full), it means that callee *owns* the reference and passes it back to caller. But floating reference is (by definition) not owned by anyone. IMO that is why functions which return objects with only floating reference should be marked as (transfer none) -> they cannot transfer ownership to caller, because they simply don't have it.IMO current GoI handling of floating refs is OK, although maybe a bit surprising at the first glance. I agree that the documentation is painfully missing...(In reply to)>We can't really change how we handle floating values incompatibly at this point, so I think it's a case of fixing functions like gtk_action_get_proxies() to either always return floating refs, or never return them.Basically always (transfer none) if you make a new floating object. That's by far the most common case.***has been marked as a duplicate of this bug. ***IMO functions returning a new, floating reference should not be annotated with (transfer none). This would intuitively mean that the returned object is not owned by the caller and will only cause confusion when reading the docs.Instead I'd propose a new annotation like (transfer floating) for functions that return a new, floating reference.Adding a new alias floating for none would be fine. Should probably not extended the enum/girepository api though.It might also make sense to expose this in the g-i API. Bindings might want to use this information to know that they get a new floating reference from such function, instead of relying on runtime checks.I pushed a fix for this to gobject-introspection and updated the wiki page:commitAuthor: Johan Dahlin <>Date: 2011-11-25 12:09:51 -0200 Add a floating alias for none(In reply to)If I understand it right, the proposed semantics for bindings would be:1. if transfer-none: g_object_ref() returned value and store2. if transfer-floating: g_object_ref_sink() returned value and store3. if transfer-full: storeI don't see any advantage from current scheme, which is basically:1. transfer-none: g_object_ref_sink() returned value and store2. transfer-full: store.. given that floating refs are returned as transfer-none.BTW I think that scheme originally proposed in this bug thread isthread-unsafe, in case that some other thread sinks the object betweenis_floating() and ref_sink() operations. Currently valid scheme (eitherref_sink or nothing) is thread safe, given that ref_sink is atomic operation.If transfer-floating is added as an alias for none, does this mean that it's only available inside the code but not inside the typelib/gir files? In that case it's rather useless IMHO, it should be available from the typelib/gir files too to be able to be used by bindings.Also transfer-floating would not only be used for return values but also for functions that take ownership of a floating reference, e.g. gtk_container_add()/gtk_bin_add() and gst_bin_add().ping?(In reply to)So...what bindings do you see using this?But if we're saying that bindings should always ref_sink any floating values they see, it's not useful to add a (transfer floating) because by the time the object has gone out to a binding, it's not longer floating, and so you can't pass it to a different function which takes ownership.Erm, bindings have to ref_sink any floating objects. So they need to be able to check this and ideally they can know this from the annotations instead of checking the flag on the object.(In reply to)Why ideally? The annotations are just a set of flags too. We'd be replacing:if (g_object_is_floating(gobj)) { g_object_ref_sink(gobj);}with:if (g_type_info_is_floating(info)) { g_object_ref_sink(gobj);}What's the compelling advantage?I was thinking about bindings for static bindings for static languages. In that case it wouldn't be necessary to call anything at runtime to check if this object now needs special handling or not.For dynamic bindings you're right, there's no advantage.(In reply to)This might not be threadsafe, there is a race between test-for-floating and ref_sink calls.I still believe that even this is not needed. IMO bindings (both static and dynamic ones) don't need to inspect floating flag at all, they only have to act according to transfer flag. So:1) Binding 'consumes' transfer=none objects by _ref_sink(); this way, if the object was floating, it is not floating any more (and it is made in a thread-safe, atomic way).2) Binding 'consumes' transfer=full values by *no action*; IMO the binding does not have to care whether the object has floating reference; all it knows is that the caller promised that the object already has one valid (i.e. non-floating) reference and this reference is given (transferred) to the caller (i.e. binding).The end result is the same in both cases: binding owns one valid (non-floating) reference to the 'consumed' object, it can safely store the pointer to the object and when it is done with the object, it calls _unref() on it.This is how Lua dynamic binding works and I still haven't met any problem with this scheme.(In reply to)Would the race condition be a problem if this was only done directly after object creation?GObject *gobj = g_object_new(...)if (g_object_is_floating(gobj)) { g_object_ref_sink(gobj);}Generally nothing else would know about the object in order to cause a problem. Or are you talking about some sort of compiler optimization that would cause a problem?This might work in casual usage but breaks down during some vfunc and signal callbacks. For instance in, the developer was attempting to implement the Gtk.Action.create_tool_item vfunc. The issue is this vfunc specifies a return of transfer=none and the Python wrapper will free the GObject before it gets back to the caller. Furthermore, since we immediately sink the object being created, adding a ref to it before returning would then leak. What really needs to happen is the vfunc should be returning a floating reference.A simpler but still problematic example with sinking floating refs is with. In this case the developer was attaching a callback to the Gtk.CellRendererText "editing-started" signal (this is what started the thread on the gtk-devel-list). The problem is this signal is emitted before the "editable" widget passed to the callbacks is ever sunk by the gtk internals. So pygobject would sink the object and own the reference, once the callback and signal marshaling finish, the object will be finalized handing a bad object back to the gtk internals. The initial solution was to blindly add a new ref but this caused leaks in other areas of the code (). The right solution is just to keep the object floating as it passes through the python callback and we simply add a safety ref during the lifetime of the python wrapper.Sure but it is still possible for something which is marked as transfer=full to return a floating reference. So it isn't necessarily a bad idea to sink it if floating, otherwise leave it alone and let the wrapper steal the ref.You might want try out the examples inandand see if they cause problems. I added a bunch of test helpers to GIMarshalingTests for automated testing of these vfunc situations. They can also double as signal callback tests if your marshaling code is shared. Hopefully they can be helpful to other language binding maintainers:Python tests which make use if them:(In reply to)>>I don't think so. I think that race can happen only in the case when binding sinks this way any generic object it receives (typically as an return/outarg of any called function).Hmm. You are right. I wrote comments to this bug at the time when my binding did not support subclassing/vfunc overriding at all, so I was never hit by this problem. Recently I implemented subclassing feature and realised exactly the problem you are talking about. For now I solved it by adding an exception to the rule above: if the C->binding conversion happens for function input argument, use only plain g_object_ref() instead of g_object_ref_sink(). For now this solution works, although it makes my simple rule stated in comments above a bit more complex and ugly :-(Yep. You might sink the ref if you want. My point is that you don't have to, because transfer=full indicates that the caller is giving you at least one non-floating ref, so binding does not have to bother with floating one at all.Thanks a lot for the pointers, I'll definitely try this and add the tests to my testsuite.***has been marked as a duplicate of this bug. ***hey, just wanted to mention that this bug was describrd as a blocker for, which basically, leads to memleaks in GStreamer bindings in Vala.ugh I meantI know I'm beating a dead horse here, but just for the record: I realized that the constructors of GtkWindow and its descendants present a case arguing against always setting transfer-ownership=full for GInitiallyUnowned descendants. Their constructors return a non-floating object and do not transfer ownership (because gtk+ keeps an internal list of windows). Hence, the typelib correctly states that for, say, gtk_window_new we have transfer-ownership=none. But currently the typelib also states the same for, say, gtk_label_new. So the typelib does not account for the semantic difference between these two kinds of constructors. It does not tell me that l = gtk_label_new (...); g_object_unref (l);is legal, whereas w = gtk_window_new (...); g_object_unref (w);is not.(In reply to)It isn't legal to finalize a floating object.I've openedfor adding "transfer floating/transfer floating-full" aliases for args and returns. Seefor the details.I'd appreciate any input.argh.. I meant(In reply to)Well, gtk+ does emit a warning when you finalize a floating widget, so my examples were badly chosen. But as far as I can see, there is nothing in glib that frowns upon finalizing a floating object.(In reply to)Ah, indeed. I didn't know that this was a gtk+ only thing. GStreamer/GstElement also doesn't warn in this case.(In reply to)And having such a warning will break quite some code.[Mass-moving gobject-introspection tickets to its own Bugzilla product - see. Mass-filter your bugmail for this message: introspection20150207 ]	33.0	id=769161	15	False	False	andreas	1
id=169222	REOPENED	beagle	General	unspecified	Other Linux	Normal normal	Beagle Bugs	2005-03-04 18:56 UTC by	Wouter Bolsterlee (uws)	2008-09-17 22:58 UTC (	3 users	Beagle should filter out hits that are in .noindex directories. This situationarises when you decide to add a .noindex file to a directory after it wasindexed by beagle (because it has to many irrelevant hits, like a directorysomewhere lying around in your downloads tree containing dictionary files).Currently, Beagle doesn't remove those files from the index.Jon Trowbridge about this issue in #dashboard:19:32:21 < uws> Will beagle delete stuff from the index after adding a .noindexfile to a directory after that directory was indexed?19:45:03 < trow> uws: No, it won't. We really should filter out hits on.noindexed files at query-time... that would cause us to queue up a delete for thatindex item.19:45:20 < uws> trow: "should"19:45:26 < uws> trow: That means it's not implemented yet :(19:45:35 < trow> uws: Exactly. Could you file a bug about that?19:45:45 < trow> uws: It wouldn't really be that hard to do.19:45:54 < trow> uws: I'll just forget about it if it isn't in bugzilla.19:46:06 < uws> trow: But it involves querying the filesystem for each hit...19:47:10 < trow> We already have to query file filesystem for every (filesystem)hit, because we don't want to show hits for files that no longerexist. And we cache a lot of the .noindex information in memory, so I thinkwe can do the check pretty efficiently.Thanks.	I've had a go at this. The fix is relatively simple but it highlights a problemwith our caching. Will investigate more sometime soon!Just to update this bug with progress, me and Fredrik are working on producingsome sort of config file for configuring beagle, and dropping the .noindex /.neverindex functionality altogether to reduce complexity.Once you get the .noindex stuff revamped, feel free to tackle this if you haveany extra time.There are a number of situations that FSQ needs to handle appropriately. Here'sa list of things I've come up with so far.We need to be able to remove roots on-the-fly.If a root is removed we need to forget all the indexes on that root(Or do we just modify HitIsValid to check that a hit is within a root? I thinkthe former...)If we ignore a pattern, we need to forget all the indexes on affected files(Or, again, do we do this through HitIsValid? Not sure what is best here..)If we unignore a pattern, we need to recrawl stuff. How much? Everything?If a root is added, we need sanity checks, like:1. does it have EA's2. is it inside another root3. is another root inside itWhen removing a root, or adding an ignore pattern/path, we should immediatelydrop all indexes on matching hits. (This may be easiest to achieve by firing aspecial query, and letting HitIsValid do the hard work)When removing an ignore pattern, we should mark the entire tree as dirty.When removing an ignore path, we should mark the affected path as dirty.CreatedRoot droppingWhen we drop a root, immediatetly remove it from the indexes and remove thefile attributesWith regard to the root dropping patch, we decided that flooding the scheduleris a bad idea, we should create some sort of periodic optimization routine instead:<trow> yeah, just some regularly-scheduled index maintenance<dsd> so basically... go over every file in the index, check HitIsValid, removeif not valid<trow> Yeah, something like that.CreatedExclude pattern dropping- When we drop an exclude pattern, we need to recrawl the entire FS tree to pick up those files that we previously ignored- DirectoryPrivate.SetAllToUnknown_Unlocked needs to consider the situation where there are no children- When examining directory children, if ScanOne_Unlocked finds that we already know about the child, it should check the state of the child to see if it needs a scan anyway.- FSM.SetAllToUnknown should fire off a scan request so that everything gets rescanned/recrawledThe end result of this is that FSM.SetAllToUnknown now does the right thing,rather than not doing much at all - this means that inotify queue overflowswill now be handled correctly.CreatedHitIsValid on entire indexValidateContents should be invoked periodically when beagled isn't busy. Thisis untested. I'm not sure how to decide when ValidateContents should beinvoked.Something like this combats root dropping, exclude path adding, and excludepattern adding.(against branch)CreatedRecrawl all directories on exclude pattern removalCreatedRoot dropping fixFix the DirectoryModel.FullName exception that appeared when you queried forhits on a removed root.CreatedForget about newly excluded pathsCreatedExpire inotify watches when we drop a root or add an exclude pathCreatedNew watch dropping stuffRevamp of earlier work which only takes effect on exclude/remove (not rename)What's the state of this bug?Need to restart my efforts now that FSQ has become less of a moving target.Here's my list of cases we need to account for. Some are handled already, someare not.1. Add exclude patternRecursively drop matching internal directory references.Wait for ValidateContents to remove from index.2. Remove exclude patternMark entire fs as dirty, recrawl. 3. Add exclude pathRecursively drop internal directory references.Wait for ValidateContents to remove from index.4. Remove exclude pathInsert back into internal structure and mark for crawling.5. Add rootAdd to internal structure and crawl.6. Delete rootRecursively drop internal directory structure.Wait for ValidateContents to remove from index.7. Should not allow addition of root-inside-root8. Should handle new root which is parent of existingAnyone have any idea for status on any of this? looks pretty old...Reopening this bug; not sure why it was closed, but I just ran into it today. When roots are deleted, the files underneath the root are not removed from the index.***has been marked as a duplicate of this bug. ***is a pretty accurate state of things, I'm changing the summary of the bug to be "Remove files from index when a FSQ root is removed"Marking 405317 as duplicate in #19 leaves out the issues in beagle-search with the wrong calculation of the total matches. If an item is excluded it disappears almost instantly from beagle-search but even after implementing #16/3 the update of the total number of matches depends on the time to drop the directory references.This bug is quite old and perhaps obsolete. If so, please close this, maintainers.This is still an issue, unfortunately.	23.0	id=747012	9	False	False	jimmac	1
id=670745	REOPENED	empathy	VoIP	2.33.x	Other Linux	Normal normal		2012-02-24 13:46 UTC by	Guillaume Desmottes	2012-03-09 09:48 UTC (	1 user	- Start a call- Close the call and its windowA bunch of Gst* objects survives and so are leaked: - 0x23a0870, GstProxyPad: 1 refs - 0x23b8080, GstPad: 1 refs - 0x23b8200, GstPad: 1 refs - 0x263e120, GstPadTemplate: 2 refs - 0x23b8380, GstPad: 1 refs - 0x2be7b80, GstPadTemplate: 1 refs - 0x23b8500, GstPad: 1 refs - 0x27c8af0, GstPadTemplate: 1 refs - 0x23b8680, GstPad: 1 refs - 0x23503a0, GstPadTemplate: 3 refs - 0x2305e00, GstPadTemplate: 3 refs - 0x23b8800, GstPad: 1 refs - 0x2bee830, GstPad: 1 refs - 0x22916b0, GstPad: 1 refs - 0x23b8980, GstPad: 1 refs - 0x23b8b00, GstPad: 1 refs - 0x263e1b0, GstPadTemplate: 2 refs - 0x2305a10, GstPadTemplate: 3 refs - 0x22919b0, GstPad: 1 refs - 0x23b8c80, GstPad: 2 refs - 0x2bf1000, GstGhostPad: 1 refs - 0x2291b30, GstPad: 1 refs - 0x263e5a0, GstPadTemplate: 2 refs - 0x2350430, GstPadTemplate: 3 refs - 0x2291cb0, GstPad: 1 refs - 0x2305e90, GstPadTemplate: 2 refs - 0x2291e30, GstPad: 2 refs - 0x229d540, GstSystemClock: 3 refs - 0x2bee6b0, GstPad: 2 refs - 0x2291830, GstPad: 1 refs - 0x2350040, GstPadTemplate: 3 refs - 0x22bb380, GstGhostPad: 1 refs - 0x2305aa0, GstPadTemplate: 3 refs - 0x263e240, GstPadTemplate: 2 refs - 0x23504c0, GstPadTemplate: 3 refs - 0x2305f20, GstPadTemplate: 5 refs - 0x27c8820, GstPadTemplate: 2 refs - 0x23500d0, GstPadTemplate: 3 refs - 0x263e2d0, GstPadTemplate: 2 refs - 0x2305b30, GstPadTemplate: 5 refs - 0x2394930, GstCapsFilter: 2 refs - 0x27c77c0, GstPad: 2 refs - 0x27c8c10, GstPadTemplate: 2 refs - 0x27c7940, GstPad: 2 refs - 0x22bba80, GstGhostPad: 2 refs - 0x2350550, GstPadTemplate: 3 refs - 0x27c7dc0, GstPad: 1 refs - 0x21be970, GstAudioClock: 1 refs - 0x27c7ac0, GstPad: 1 refs - 0x2be5090, GstPad: 1 refs - 0x2350160, GstPadTemplate: 2 refs - 0x263e360, GstPadTemplate: 2 refs - 0x2305bc0, GstPadTemplate: 2 refs - 0x2be5390, GstPad: 2 refs - 0x2340950, GstValve: 2 refs - 0x23505e0, GstPadTemplate: 3 refs - 0x2be5210, GstPad: 1 refs - 0x27c8b80, GstPadTemplate: 1 refs - 0x27c8940, GstPadTemplate: 2 refs - 0x2305c50, GstPadTemplate: 3 refs - 0x27c88b0, GstPadTemplate: 3 refs - 0x27c7c40, GstPad: 1 refs - 0x22bb1c0, GstGhostPad: 2 refs - 0x27c89d0, GstPadTemplate: 1 refs - 0x263e480, GstPadTemplate: 3 refs - 0x21d2c10, GstProxyPad: 1 refs - 0x263e090, GstPadTemplate: 2 refs - 0x27c8dc0, GstPadTemplate: 2 refs - 0x23a0bd0, GstProxyPad: 1 refs - 0x22bbc40, GstGhostPad: 1 refs - 0x23a0000, GstProxyPad: 1 refs - 0x27c8a60, GstPadTemplate: 1 refs - 0x2350310, GstPadTemplate: 3 refs - 0x263e510, GstPadTemplate: 2 refs - 0x23a06c0, GstProxyPad: 1 refs	Createdaudio-sink: fix GstPad leaksgst_ghost_pad_new() doesn't take ownership of the target pad so we have tounref it ourself.The above patch doesn't really improve the situation but should be correct if I understand Gst's API correctly.***has been marked as a duplicate of this bug. ***Createdempathy_call_window_content_added_cb: fix pad leakboth patches are ++pushed as- audio-sink: fix GstPad leakspushed as- empathy_call_window_content_added_cb: fix pad leakThanks merged. I keep this bug open as all objects are not destroyed yet.Createdaudio-sink: don't unref subpadPart of my commitwas wrong.subpad is added to the bin so gst_element_add_pad() takes its reference.Comment onaudio-sink: don't unref subpadpushed as- audio-sink: don't unref subpadHere is the new list with those fixes: - 0x30d6f00, GstPadTemplate: 2 refs - 0x2d211c0, GstPadTemplate: 2 refs - 0x2d6c3d0, GstPadTemplate: 2 refs - 0x2d215b0, GstPadTemplate: 2 refs - 0x306b650, GstPadTemplate: 2 refs - 0x7ffb780b4ab0, GstPadTemplate: 2 refs - 0x7ffb780b4ea0, GstPadTemplate: 2 refs - 0x3631450, GstPadTemplate: 2 refs - 0x2c488e0, GstPadTemplate: 2 refs - 0x30799e0, GstPadTemplate: 2 refs - 0x2c48cd0, GstPadTemplate: 2 refs - 0x3079dd0, GstPadTemplate: 2 refs - 0x351dd30, GstPadTemplate: 2 refs - 0x2d212e0, GstPadTemplate: 2 refs - 0x2d6c100, GstPadTemplate: 3 refs - 0x2d216d0, GstPadTemplate: 2 refs - 0x7ffb780b4bd0, GstPadTemplate: 2 refs - 0x2d6c4f0, GstPadTemplate: 2 refs - 0x30d6960, GstPadTemplate: 2 refs - 0x2c48a00, GstPadTemplate: 2 refs - 0x3079b00, GstPadTemplate: 2 refs - 0x3079ef0, GstPadTemplate: 2 refs - 0x351de50, GstPadTemplate: 2 refs - 0x2d21400, GstPadTemplate: 2 refs - 0x2d6c610, GstPadTemplate: 2 refs - 0x7ffb780b4cf0, GstPadTemplate: 2 refs - 0x35062f0, GstPadTemplate: 2 refs - 0x3079830, GstPadTemplate: 2 refs - 0x2c48b20, GstPadTemplate: 2 refs - 0x30d6a80, GstPadTemplate: 2 refs - 0x2d6c340, GstPadTemplate: 2 refs - 0x7ffb780b4a20, GstPadTemplate: 2 refs - 0x7ffb780b4e10, GstPadTemplate: 2 refs - 0x36313c0, GstPadTemplate: 2 refs - 0x2c48850, GstPadTemplate: 2 refs - 0x30d6ba0, GstPadTemplate: 2 refs - 0x2c48c40, GstPadTemplate: 2 refs - 0x3079d40, GstPadTemplate: 2 refs - 0x2d6c070, GstPadTemplate: 2 refs - 0x2d21250, GstPadTemplate: 2 refs - 0x2d6c460, GstPadTemplate: 2 refs - 0x2d21640, GstPadTemplate: 2 refs - 0x306b6e0, GstPadTemplate: 2 refs - 0x7ffb780b4b40, GstPadTemplate: 2 refs - 0x3079950, GstPadTemplate: 2 refs - 0x2c48970, GstPadTemplate: 2 refs - 0x3079a70, GstPadTemplate: 2 refs - 0x2c48d60, GstPadTemplate: 2 refs - 0x351ddc0, GstPadTemplate: 2 refs - 0x2d6c190, GstPadTemplate: 2 refs - 0x2d21370, GstPadTemplate: 2 refs - 0x2cab600, GstPad: 1 refs - 0x2d6c580, GstPadTemplate: 2 refs - 0x2cb7540, GstSystemClock: 1 refs - 0x30d69f0, GstPadTemplate: 2 refs - 0x2c48a90, GstPadTemplate: 2 refs - 0x3079b90, GstPadTemplate: 2 refs - 0x351dee0, GstPadTemplate: 2 refs - 0x7ffb780b4990, GstPadTemplate: 2 refs - 0x306b530, GstPadTemplate: 2 refs - 0x7ffb780b4d80, GstPadTemplate: 2 refs - 0x3506380, GstPadTemplate: 2 refs - 0x30d6b10, GstPadTemplate: 2 refs - 0x2c48bb0, GstPadTemplate: 2 refs - 0x30798c0, GstPadTemplate: 2 refsCreatedvideo-widget: don't set priv->sink_pad twiceThe first value was never used and overrided a few lines below.pushed as- video-widget: don't set priv->sink_pad twice	12.0	id=96744	16	True	False	kmaraas	1
id=759797	REOPENED	website	blogs.gnome.org	current	Other Linux	Normal normal	Blogs Website Maintainers	2015-12-23 11:18 UTC by	Allan Day	2016-02-04 12:23 UTC (	0 users	When I try to upload images to my blog through the Wordpress dashboard, it fails, simply saying "An error occurred in the upload. Please try again later."This has been happening since yesterday.	This is no longer affecting me, so marking as fixed.Encountering it again today.	2.0	id=583429	20	False	False	carlosgc	1
id=747012	REOPENED	bijiben	general	3.16.x	Other Linux	Normal normal	Bijiben maintainer(s)	2015-03-30 11:11 UTC by	Jakub Steiner	2016-01-06 20:37 UTC (	4 users	Starting with GNOME 3.16 we streamlined how high contrast icons are managed. The attached patch includes a symbolic variant of the app icon that is used for HC theme and recolorable at runtime.Seefor more details.	Createdicon: provide a symbolic variant of the app iconSince 3.16 we are providing a symbolic variant of the appicon for covering the High Contrast theme use case.Cleaned up the naming to make it clear the source SVG is notactually being installed anywhere.Thanks!,pushed as- then 6588b6b8576bbe2c355bd033ac1412453e4467f4 because on my previous commit I forgot the renamingCreatedicon: provide a symbolic variant of the app iconSince 3.16 we are providing a symbolic variant of the appicon for covering the High Contrast theme use case.Cleaned up the naming to make it clear the source SVG is notactually being installed anywhere.The symbolic size has been introduced to hicolor to cope withthe nominal size of 16x16 rather than the backward compatible128x128.Hey Pierre-Yves, could we get this symbolic icon added as well ?What's up with this, did you change the icon? Or just trying to move it from hicolor/apps/scalable to hicolor/apps/symbolic?I think it was just the sizing issue (scalable->symbolic)We have tons of symbolic app icons installed under scalable; surely it doesn't matter where it gets installed? If it really matters, then we need to fix about 20 other apps.Anyway, it's obviously fine to move icons from scalable to symbolic. But your patch here doesn't apply on master since your original patch was pushed.	7.0	id=670745	13	False	False	olivier.crete	1
id=96744	REOPENED	gconf-editor	general	unspecified	Other All	Normal normal	Gconf Editor Maintainers	2002-10-24 20:15 UTC by	Hidetoshi Tajima	2005-08-15 01:53 UTC (	0 users	gnome-terminal or gconf, I'm not sure, but filinggnome-terminal as it's the module the problem canbe produced from.Run a gnome-terminal in ja_JP.eucJP locale, and createa new profile with a Japanese name, and save.cd to $(HOME)/.gconf/apps/gnome-terminal/profiles,a directory like @4294967267@@4294967169@@4294967170@has been created.Run a gconf-editor, and go to apps->gnome-terminal->profile, this @4294..appears.	The profile name still appears correctly in the GUI, right?The user-displayed profile name is stored separately.gconf keys can't be UTF-8, they are just an ASCII subset. The profile name there is what happens if you feed UTF-8 to gconf_escape_key().I think if we changed the gconf_escape_key() format it would probably be an incompatible change, so though the format is a little bit silly, I don't think we really want to change it.Yes, the profile name appears properly in gnome-terminal GUI.But in gconf-editor, it shows a garbled folder name, which does not look quite nice.Attaching a snapshot...Createdgarbled gnome-terminal profileCan gconf-editor restore a UTF-8 name backfrom the gconf_escape_key() format, then?Hmm, interesting question. gconf-editor could maybe take a guess. There's no way to know whether a key is escaped or not though.mmm... Then, can gconf-editor replace a holder name with any likely-visible gconf key entrywhen one can be found?But, I'm asking this without knowing if - gtk treeview has such handler or not - such gconf key entry is always possible or not [if only gnome-terminal, "visible_name" could be used, but wishing if any generic one...]Please advise...Havoc, Using gconf_unescape_key() when putting a new nodeinto gtk_tree and gconf_escape_key() when calling gconf_client seemsto fix the problem.A patch will be attached shortly.Will you please review the patch?Createdunescape gconf key for GUI and escape it again for gconf_clientAnd changing product to gconf-editor.Anders is really the right person to review, this is his code.Anders, okay to commit to the HEAD?anders, wake up ;)Could someone please look at this patch?Someone should really CC Anders on this one.The patch still applies cleanly.CommittedThis patch breaks tow things:* keys with "@" inside ()* keys with "." inside ()So I'm going to revert it and maybe we should try another patch for unescapingkeys with only "@" and numbers.Rverted now. I'll let the bug opened until we have a sane way to unescape keys(gconf_client_key_is_escaped new gconf function?)Comment onunescape gconf key for GUI and escape it again for gconf_clientThis patch will need more work, like doing some heuristics to guess if the keyshould be tried to escape	18.0	id=169222	25	False	False	bugzilla-gnome	1
id=433428	REOPENED	GnuCash	Business	git-master	Other All	Normal normal		2007-04-25 20:24 UTC by	Rolf Leggewie	2016-09-01 05:03 UTC (	7 users	Please describe the problem:Title says it all. I have also reportedand 369637 on SKR04. I believe SKR04 could use an update and I am willing to spend some time on it. This bug report should document what needs fixing and progress on doing it.1) Include the enhanced version from Frank Ellenberger at2) fix the sorting3) check general sanity and suitability for general public4) reflect changes in VAT (page 17 in 432235)the list is open to suggestions.Steps to reproduce:Actual results:Expected results:Does this happen every time?Other information:	(In reply to)that, of course was meant to read as page 17 in1. As mentioned init is free for use.2. Known bugs and flaws: a) I fear, I copied the branch (may be more?) below "A. Eigenkapital:a) Personengsellschaften:x. Privat" from Vollhafter to Teilhafter by Texteditor, so the accounts there will have the same GUIDs. This would mainly be a problem if running a KG, where both are used, but should be fixed. b) In my used accounts I renumbered Aktiva:x. Ausstehende Einlagen and "Aufwendungen für die Ingangsetzung..." to 0.x because they are normaly not used and according HGB §§ 271 ffshould only be shown, if used. c) I am not always shure, if acoount no. XYZa, a = 1..9 is a subaccount of XYZ0.3. ad: It uses usual GUV groups " 1." to "22." in the account NAMES, not account NUMBERS. The account numbers are defined by DATEV as four digits.4. I confirmas a very good useable source for changes in VAT5. I suggest, to put it in SVN for collaborate reworking.6. Further questions: Is it possible, to put standard tax table definitions and in future tax report relations in the file, too? This would save the user also much work.I should write a short howto...I forgot:2.d) according tothere is the question, if "Eigenkapital" should have account type "Passiva", which in reality is liability, or "Eigenkapital"(equity).The first leads always to red numbers, the second cannot be part of "Passiva".So, my suggestion would be, firstshould get the workaround, as mentioned by cstim. Then we should take the first.SKR04 is quite large. Would it make sense to break this down into modules? I am still fairly inexperienced with real-world accounting. But I assume a Personengesellschaft would not need the same accounts as a Kapitalgesellschaft. Same goes for EÜR vs. Bilanzierung. Can this be broken down? If so, what makes sense?Looking at the accounts it seems that there are some in there which will not be of general use but need to be configured individually. Example accounts are the "ich" and "mein Partner" account under 2000 (Passive - Eigenkapital - I. Kapital Vollhafter - Festkapital).Furthermore, I don't understand the motivation of creating a hierarchy with just one sub-entry. Take a look at 3. Andere aktivierte Eigenleistungen for an example.€ in description of account 4185 comes out as ¤ instead(In reply to)Maybe I understood this wrong. But "grep guid /usr/share/gnucash/accounts/de_DE/acctchrt_skr04-05.gnucash-xea |grep -v parent|uniq -d" does not return any results and thus it seems this is not a problem.(In reply to)do you have commit rights?Annotation:It was developed under gnucash 1.8.x, so it should be coded primary inISO-8859-15, some visible umlauts I HTML-quoted &xxx;my sources:ingewerbl_Kontpl_IBM.zip andPlaces, where we possible could get some help:A simliar project like this bug thread is, but the lx-office - for nongerman readers: the german fork of SQL-ledger -account frame is incomplete. lx-office in my eyes is more a "WWS" than a "FiBu"and lacks documentation.Modularisation would be fine, but also bring up some complications. I think,this is SKR04 like published by datev to their members. After opening it, youcan adjust it to your belongings by hiding or deleting unused branches. I wouldonly hide. Who knows what next year will be: a new partner field of activity?"Andere aktivierte Eigenleistungen" is different from "Bestandsveränderungen"and by any german law to be shown separatly in pofit & loss. The intention is,"Bestandsveränderungen" you can count or measure, this not. So this positionis more weak. BTW. Account with numbers of one or more ending "0" are classes, types,subtypes. The real accounts are usualy ending with 1, 2 ... - as demonstratedwith the example accounts below.You also should open description and annotation of the fields. Sometimes youwill find the corresponding §§ or intentions.As writen in the mail, "ich", "mein Partner", WG "Marmor", "Stein" und "Eisen"are example accounts.In editor I see <act:id type="guid">..., but i think, there is a tool. Does ushelp this gnucash-make-guids? Or is recreating with copy and paste more quick?(if I had commit right, I would do instead of ask)some very nice information there. Thank you Frank. I believe it would be best to leave out all sample accounts. It is better to write a doc on how to use the SKR with gnucash than having unnecessary accounts IMHO. I see this as a real bare-bone, uncustomized starting point.has an attachment which nicely lists the changes DATEV made for 2007.I don't believe SKR04 is Business-specific ... please smack me around if wrong.has some information relevant for Umsatzsteuervoranmeldung. Might be that this information is already present in some of the other links here.(In reply to)From an implementation POV: No, it isn't business-related; it's only an account template. From a user POV: totally. Only [German] business users are interested in that template.@Rolf et al.: As soon as you or anyone else attaches some patch(es) here, we will happily apply them to SVN. I would encourage you to submit even small changes right now, and keep those that still need further discussion for a later point in time.CreatedFrank's SKR04Hi Christian,thank you for your comment. Funnily enough, I was on the verge to propose the same (release early and often, incremental steps). Just did not get around to it in the last few days.Now, I did. That way, I found out that a diff from Frank's work and the current file is about the same size as Frank's latest file. Thus, I refer back to my original report, number 1 in the list. Onceis in SVN, I can attach my diffs for it here. I have already removed a few glitches from it. Please apply Frank's work. Thank you.RegardsRolfWould it be possible to put Frank's file in SVN and grant him and me SVN write access to only that file?I dont know how technically feasible it would be to grant write access only to a single file. It's certainly possible to grant write access only to the 'accounts/de_DE' subtree, but the question remains: which branch? Trunk? branches/2.2 (which doesn't exist yet)? I dont know if the ACL regex engine would support something like: gnucash/*/accounts/de_DE/...(In reply to)reported as(In reply to)Thanks for the clarification. I've committed Frank's account template as a replacement of the previous accounts/de_DE/acctchrt_skr04.gnucash-xea file, according to its description. I hope this is what you expected to happen.As for SVN write access: I don't think this is really necessary. As soon as you add a file or a diff here with the clear label "Please apply this to SVN", one of the developers should react on this soon enough (and Frank and you can also download those patches/files yourself as well).(In reply to)Thank you.Essentially, yes, this is what I was asking for. It might be necessary to revisit that decision since the account template is likely to change every year. Praise the Lord for our overly competent government.Well, sorry, but I disagree. I don't think it is practical to copy the original file, make the change, create a diff, open a bug and attach the diff every time I find a spelling mistake of "Unternhmen" instead of "Unternehmen". I don't think I as a contributor should or will put up with this.PS: The spelling mistake does indeed exist. There are a few more minor such errors. It is likely nobody will ever fix them, unless they can fix it on the spot.(In reply to)All a moot point by now :-)*did* exist until r16488current status(In reply to)donedoneI will use the account chart and fix anything that I come across. Consider it done for the purpose of bugzilla.(In reply to)(In reply to)todo(In reply to)See above. Don't think this is a valid issue.done. Please open a new bug and block this one if you still experience this.OK. done.I will fix this if I encounter it.done.Done.yes, it seems possible. I will try to include it soon.(In reply to)Decision postponed until I am more familiar with this stuff.consider done for now. Please open a new bug for discussion if you are interested in this.to be removed.(In reply to)fixed.(In reply to)fixed in r16495would solve the problem, to implement in account class 9000 statistical data like working days.for all practical purposes, this bug should be read-only now. If there is a task that needs to be done and involves SKR04, please report it as a separate issue and make it block this bug.Or we all want be able to keep our sanity ;-)(In reply to)^^^^won'tSorry. I was cleaning up but should have checked with you before changing the status.This bug has a target of 2.3.0, which has now been released. Do you want to change it to 2.3.X, marking that it will be ready in the 2.3.X/2.4.0 timeframe (August) or remove the target milestone?This is more of a meta-bug. The work is ongoing and I'm not sure this bug can ever be considered fixed.(In reply to)Uh, no. That's not how to manage bugs. If you want to submit more patches, open a new bug.(In reply to)Don't do that. Do it this way:(In reply to)No such thing in Bugzilla. Even a verified-fixed bug can still get comments.Hi John,while many of the comments are outdated, Rolf seems since years inactive,there was some technical progress, ...I think, this bug should kept open, because it is the link betweenand a whole bunch of other bugs (see dependencies).I hope, one day we can say GnuCash with this template conform with most german laws and EU directives. That will be as all depends-on-bugs are fixed.As we have no specific german/european business component here in bugzilla, I can offer to take over this 2 metabugs, if it is too annoying to have them assigned to.Frank,The assignment to gnucash-general-maint just drives email. If there's no activity, there's no email. No email, no annoyance.Leggewie is long gone and you haven't found time to touch the German account templates for 3 years. Christian made a change last year and then changed his mind and reverted it. All of these bugs are very old and stale. Most of them are sort of thinking-out-loud from Leggewie about how he might like to restructure the templates. That isn't going to happen. I'm in favor of closing all of them.It the templates are actually wrong, especially if they'd lead users to break the law, or if you and Christian aren't going to make it a priority to keep them up to date, they should either be trimmed back to what is correct and basic or removed altogether until someone comes along who will maintain them. In any case it would be more useful to write new bugs explicitly stating the problems than to keep these rather vague and speculative things open.Hello Frank, John et al,Is there demand for these German/EU business templates to be developed and maintained? Sounds like there's certainly no capacity in the team to do so as it would be a huge task? I certainly don't have the skills required, but perhaps I could assist to facilitate? If readers of this would like this facilitated, please drop me a line here.Cheers,Paul.	32.0	id=762646	5	False	False	jstpierre	1
id=583429	REOPENED	evince	printing	git master	Other All	Normal normal	Evince Maintainers	2009-05-21 10:39 UTC by	Bartek Kostrzewa	2009-10-29 22:09 UTC (	3 users	Please describe the problem:Note, this patch is against the git master branch but I couldn't test it with a running copy of the master branch because this is a production system and i can't run the dev version of gnome here.I have tested it on ubuntu against evince_2.26.1-0ubuntu1 and submitted a downstream patch on launchpad. ()This patch fixes the bugs people are experiencing when printing:* multiple pages per sheet (lp107025)* even and odd sheets (lp107025)* multiple collated copies + multiple pages per sheet (lp282659)In this context it is important to know that it behaves likes lpr with n-up and even/odd options passed:if you have a document with 5 pages and want to print 2 pages per sheet, MANUAL duplexprint odd sheets:{1,2} , {5}flip sheets and print even sheets:{3,4}IE: you need to make sure to remove the sheet with page 5 from the stack, evince will not produce empty sheets to fully automate the process. This would be nice, but it would mess with other things. Besides, it is the way multipage even & odd printing works on other platforms and the native GtkPrintOperation.------------------It does NOT solve bugs related to:* multiple pages per sheet + reverse order (lp377102)* the weird ordering of pages when pages_per_sheet = 6 (related to: lp328143)as that would require a complete rethinking of the way the output is assembled for printing.------------------It MAY solve:* evince prints multiple (collated) copies as one job* weird stapling behaviour with multiple copiesie: lp258364I'm not sure about this because as far as I can tell the multiple copies are still sent as one print job, but by solving lp282659 we introduce blank spaces on sheets so the two copies are clearly separated, it depends on how the driver treats this.----------------Steps to reproduce:/Actual results:/Expected results:/Does this happen every time?/Other information:It would be great if a developer could take a look at it and comment. It would also be great if someone could enlighten me if the changes going into EvPrintOperation to transition to GtkPrintOperation will solve these bugs in the future. The reverse multipage printing functionality bug is especially nasty.	Createdpatch to fix a number of multipage printing issuesI just realized that my printer (samsung ml-2010) has a duplex functionality (for instance: collated, copies=2, print all pages, long edge, pages per sheet=2) where the printer itself splits the job in two and waits for the user to reinsert the pages and push a button. I can confirm that this functionality is NOT broken by the patch and would therefore assume that fully automatic duplex printers are not broken either.Comment onpatch to fix a number of multipage printing issuesHi Bartek, thank you very much for the patch. This patch would also fix, right?Some comments about the patch below,please, do not use C++ comments, use /* */ instead.so, fixingjust by adding the missing parantheses, together with this patch (with this code uncommented) would fix everything, right?You don't need this, the whole EvPrintOperationExport structure is initialized to 0 when allocated.Hi Carlos,thanks for your reply. Sorry about the comment style. I only included the comments to clarify what I did to the code. I think they should be more succinct anyway.When I fix, in addition to my changes OR just on its own, I get 1 blank sheet added to the end of the printout when more than one page per sheet and an EVEN number of copies are printed. From the many tests I've done it appears that it is simply unnecessary. (I believe it is unnecessary because there is an end_page in export_job_finished which is called constantly)Initialization to zero: thanks, good to know.I'll clean it up a bit and rename skipped to blank I think, makes more sense.Oh, about, yes, that's the equivalent of lp107025, which in turn was the reason I wanted to fix this in the first place. I then realized that there we still things going awry with multiple multipage copies bleeding into eachother.I made the patch specifically for ubuntu at first because there's little chance that we'll see a new version using GtkPrintOperation added to 9.04Createdpatch to fix a number of multipage printing issues v2I'm happy with this now, although the comment in the code is still quite lengthy.Thank you very much, I've just applied the patch to both master and gnome-2-26 branches.***has been marked as a duplicate of this bug. ***Hi Carlos,I think we need to consider retracting the patch. I made some really silly thought mistakes and the patch fails to fix the following combination of settings: "custom ranges, multiple pages per sheet, multiple collated copies". I forgot to test ranges which didn't include the last page...I still think it improves upon the previous situation though.I'm not sure how to fix the problems short of making a few changes to the way the pages are assembled for printout. Essentially I'd like to add a guint to the export struct which tracks the sheet number.Sorry about this...I'll provide a proposition ASAP.(In reply to)I didn't test ranges either...yes, absolutely.take a look at gtk+ code, we might use most of the current gtk+ implementationno problemgreat, thank you very much.Creatednew attempt to fix even / odd multipage issuesHow about this? It leaves the structure of ev-print-operation largely intact and introduces only two new variables to the struct (while removing the blank counter). On the flipside, the added logic is UGLY. It uses the fact that all pages of all ranges are traversed anyway (in inc_page) and counts the total page number (those that are in the current sheet set, those that are not and blanks) to do end_page and begin_page and odd/even selection.It relies only on being provided with correct ranges, which is ensured by clamp_ranges.With reference to the ugly logic in the patch: What speaks against an implementation which builds a model of ALL sheets before starting exportation? ( dynamically allocate a GPtrArray for the printout with GArrays of gints for the individual sheets, blank pages introduced at the end of a copy are set to "-1" )This way all the jumping around to select the correct page for inclusion into the printout becomes unnecessary. (as all the logic is in one place)The actual exporting reduces to traversing the model by (odd/even/all) sheet, and each sheet by page. No special checks for when to do "begin_page" and "end_page" are necessary.The logic fits into two chunks ( one for collated, one for uncollated ) of about 60 lines each in a "build_sheets" function which is called after "clamp_ranges" in the dialog_response callback. ( I've done that, but I haven't implemented the actual export yet )This approach would remove export_print_inc_page and bring all the "begin_page" and "end_page" into export_print_page. Of course, it would still export one page at a time to be non-blocking.Again, can we have a unit test?Hi Nickolay,I'll try to cook something up using dogtail and two test documents (one with an odd number of pages, the other one with an even number of pages). Will probably be useful for the future.I've never used it or written anything in python, so it might take a while.-BartekHi Bartek.Actually there is no need to use either dogtail or python. It would be nice just to have a C test that will be linked with evince files, call function and check results. Though if it could be done with python easily it would be even greater.I just think that it would be very useful to fix the desired behaviour and check it, otherwise we'll never approach it.Thanks for amazing contribution btw! :)I see, hmm, what about the signalling which happens here?I can certainly build a custom "export" struct and imitate the callback to the dialog response signal in starting the export operation, but I don't know how to supply it with content.(In reply to)Ok, this shouldn't be too hard using dogtail. However, there are 288 combinations in these couple of print options:copies = [1,2,3,4]collate = [0, 1]reverse = [0, 1]pages_per_side = [1,2,4,6,9,16]only_print = ["All sheets","Even sheets","Odd sheets"]Looking through those will be a lot of work! Keeping in mind that there will actually be 2x288 because proper testing needs to include a document with an even number of pages and one with an odd number of pages.I don't see any other way of testing this other than actually generating all the output because the placement of end_page and begin_page must be just right (otherwise you get blank sheets where there shouldn't be any, or pages print on top of eachother, and so on). If you know a way to automate it throw me a hint please.-B.Hm, you certainly don't need to test all combinations, just a few common ones. Likecollate 0 1copies 1 3pages 1 4even/allthat would be only 16 variants. Probably some of them aren't useful as well. Anyhow it was just an idea, there is no strict preference.No you need to test more combinations. But I agree, testing a subset is sufficient if the test files and range-sets are chosen wisely.I've openedfor inclusion of my test suite/case into git.(In reply to)Sorry for the late reply, I've been quite busy these days. A few comments on your patch: - There are still coding style issues, for example:+ if( export->collate ) {should be+ if (export->collate) {do not leave spaces there, please. - Commented code: + /* in the way this currently works, there's not harm in an extra begin_page */+ //ev_file_exporter_begin_page (EV_FILE_EXPORTER (op->document));is this intentional or did you forget it? should it be uncommented or just removed?Thanks for the patch :-)Hi Carlos,Don't worry about the timeframes, I'm well aware of the effort developer-maintainers like you put into keeping a project running! Commented stuff: Indeed, I forgot to remove that. Coding style: Is there a document describing proper gnome coding style? (or evince coding style for that matter) The documents I found on developer.gnome.org didn't mention specifics about spacing.As for the patch, I was wondering what you and others thought about revamping ev-print-operation to dynamically build a model of the forward printout before starting exportation. That way, all the ugly conditionals are kept in one place and the only conditional to be added would be in inc_page. This would add a short delay but the non-blocking behaviour of the actual export would not be affected.Another question I had (probably the wrong place to ask) is whether you were aware of there are any plans upstream to rename the enums for GTK_PAGE_SET_XXX into GTK_SHEET_SET_XXX to be consistent with the actual meaning and the user interface?I'm currently quite busy with some other projects so it might take me a week or so to apply the coding style changes.Creatednew attempt to fix even / odd multipage issues V2Ok, I hope I've caught all style problems. This comment is more verbose than I had hoped.The patch seems to work alright judging by the test-case, except for printing in reverse where it produces blanks (as it inserts blank pages when the last "page range to be printed" is reached) Note that if the pages were provided in the correct order for multipage reverse printing, it would work properly.See the next attachment for an example of what I mean.Another (very) minor issue is that if one is printing say a 4-page document with 4 pages per sheet and one chooses to print "even sheets only", a blank page will be printed. This is a user interface problem as the UI should not allow "even sheets" to be selected if there are none. (the same is true if you print "even sheets" in a single-page document at one-page per sheet)Again, both problems would have an easy fix by building a model of the printout: the UI could then be informed about the options which are to be disabled and reverse printing would work "for free".Createdbroken reverse multipage which is NOT fixed by this patchThis is the example referred to in the above comment.Did someone have the time to check whetheris OK to go in, then?-BartekI've applied it to git master, I'll leave the bug open for the minor pending issues. Thank you very much Bartek.***has been marked as a duplicate of this bug. ***Answer to:"2.27.4Try to print using the FILE printer, and save a PDF with multiple pages persheet enabled (using 2 or 4 always triggers the issue, I didn't try more).The result file has some empty pages between the normal pages."Oops, that's my fault I'm afraid, I must've messed something up! (although I'm surprised because I did some extensive testing...)Nicolò, does it happen with every PDF or just a particular one?-BartekBartek, yes, it happens with all files I try to printHmm, are you printing in reverse? I know that causes blanks, printing forward shouldn't but I can't be sure. I'm building the git branch to check the problem out, but it might take a while.I'm normally printing forward.this is my evince version: 2.27.4-0ubuntu2Do you need a PDF input and the output?I'm sorry I can't confirm the problem, pdf output works correctly for me. Maybe we have a problem with terminology. (the difference between sheets and pages) It would be nice if you could either attach the output here or send it to my e-mail address.-B.Hi Nicolò, thanks for the documents.The bug appears to have been introduced via Gtk+ (or some other library used by evince). I can confirm that both the ubuntu package (run as usual) and the git master branch (run via LD_LIBRARY_PATH=/usr/local/lib /usr/local/bin/evince ) suffer from the bug you describe with output completely garbled and pages missing.As pointed out above (), the git master branch produces correct output on jaunty.My guess is - and a someone more familiar with the subject matter will probably have to correct me - that the GtkPrintOperation in karmic supports printing to file (and advertises itself as such to evince) but it's simply broken, hence the broken output.I currently don't know how to fix this I'm afraid and don't have time right now to look into it more deeply.-BartekI think I should open a bug to GTK soOk, this is the second to last comment from me for today. My guess was wrong. I compiled a version of evince from before I started working on this (2.26.0) on karmic and that prints fine for Nicolò's specific usage scenario, but it obviously has the problems concerning the combination of multiple pages per sheet and odd/even.Something appears to be introducing more blanks than necessary, unfortunately I don't know whether it's my code, gtk+ or one of the other components in evince. I'll try a gdb run and see when the relevant functions are called.It appears as though my initial guess was somewhat right after all ;) None of the export_* functions in EvPrintOperation are being called during printing, and those are the only ones that I've modified. It seems that the whole printing is done via gtk+.Interestingly, it also broke the progress updater which remains at "Preparing to print..." during the whole operation. (ev_print_operation_get_progress is called only twice during the whole print operation)(In reply to)when GTK+ version is >= 2.17.1 we use GtkPrinOperation because it's supposed to fix all of these issues. So the rule is: gtk+ < 2.17.1 evince bug, otherwise GTK+ bug.yes, see.(In reply to)Ah I see, thanks Carlos. The #ifdef did not exist in 2.26.0 which is why that prints fine.CreatedEVINCE_2_26_2 tag branch backportHi Carlos & co. I completely forgot to backport the patch to 2.26.x which is the version most affected by this bug. If you want I can make one for 2.24.x too. (Don't know whether that will work though, haven't looked at the differences yet!)Thanks Bartek, but there won't be more releases on the stable branch this cycle, so I don't think it's worth to backport it.Ok, thanks for your response. Maybe distributions which continue to package 2.26 will happen across this bug and pick up the patch.This seems to fix a bug for me in 2.26 where printing with:- pages-per-side set to 2 (possibly any value > 1)and- 'Only print' set to oddwould print (where numbers refer to original pages):{1,3},{5,7}rather than the desired:{1,2},{5,6}I.e. the "Only print odd pages" was being applied /before/ the pages-per-side, when the desired outcome is that "only odd" should apply to /post/ pages-per-side.Same story with it set to even, and guess similar happens with higher values of pages-per-side.Thanks v much!	42.0	id=750660	8	False	False	iotapi322	1
id=685340	REOPENED	l10n	Greek [el]	unspecified	Other Linux	Normal normal	Hellenic (Greek) I18n mailling list for Free Software	2012-10-02 22:12 UTC by	Tom Tryfonidis	2016-04-07 14:18 UTC (	3 users	In Greek translation, the following messages don't fit in the label boxes.Brightness and LockKeyboardDetails	CreatedScreenshotThanks for the bug report. This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***commit b3be07609a9bae43947ee3e59d8982a7715c9acfAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.***has been marked as a duplicate of this bug. ***	4.0	id=748968	10	False	False	doctorjellyface	1
id=748968	REOPENED	mutter	wayland	3.20.x	Other Linux	Normal normal		2015-05-05 16:56 UTC by	Juraj Fiala	2016-03-26 06:38 UTC (	2 users	There are only two ways to dismiss them right now:1. Click on an entry in it2. Press escapeArch Linux, fully updated, GNOME 3.16.1.Thanks.	Not an issue anymore in 3.20, I think this can be closed.OK turns out it _isn't_ fixed, it's just a different bug than I thought. (sorry) When I tested a moment ago firefox (in XWayland) was maximized underneath and everything worked fine. However if the desktop is underneath all sorts of weird things happen. The context menus cannot be closed, you can create multiple ones, sometimes they are wrongly positioned.Also turns out this happens everywhere, not just in the tray.	3.0	id=685340	14	False	False	a9016009	1
id=762646	REOPENED	gnome-shell	general	unspecified	Other Linux	Normal normal		2016-02-24 20:58 UTC by	Alex Hultman	2016-02-24 21:49 UTC (	1 user	I'm on 3.16.2 so I haven't updated to the latest GNOME but I noticed that Talos Principle on Vulkan seems to be composited. It has input lag and I cannot get more than 60 fps and there is no flickering when I change the volume. Everything points towards it not being unredirected.	mutter doesn't particularly care what graphics tech is used, as long as the app does 100 fullscreen damages.Aha. So maybe it is just very slow? I thought mutter used some kind of OpenGL specific stuff but I remember it wrong then.Well, that doesn't mean there isn't a bug here, but I doubt it would be specific to Vulkan.	3.0	id=433428	48	False	False	frank.h.ellenberger	1
id=738057	REOPENED	orca	speech	3.14.x	Other Linux	Normal normal	Orca Maintainers	2014-10-07 06:14 UTC by	Hammer Attila	2015-12-21 21:42 UTC (	2 users	CreatedDebug file with shows possible why happening this issueDear Joanie,When I using GNOME Files application and presents a folder or a file related properties dialog, Orca doesn't read some importanter labels values when the caret land this labels (for example the size, place, type, etc). With my braille display correct presents Orca both the label and containing text.Easy reproducable testcase:1. Goto your home folder.2. Select a file or a folder, and present properties dialog (press for example the ALT+ENTER keystroke). This situation the properties dialog presents the screen, and you land first the name text.3. Press a TAB key. This situation you see the screen with the type related information.Expected result this step:Orca need speaks the type related label, the filled text, selection state and rolename related informations.Actual result:I hear only the type related label, the selected state message and the label rolename.Where am I output feature affected too.My environment related informations:OS: Ubuntu 14.04Orca version: latest master branchAffected Orca branches: master, gnome-3-14Files application version: 3.10 series.I attaching a debug.out file.Attila	CreatedFix patch for this bugI attaching a patch with me correct resolve this issue.When I now repeat the wrote testcase, Orca correct announce all importanter informations in GNOME Files application file properties dialog (the file size, file type, file place, access time).Where am I output command announce too right this informations.I do a minimal change in src/orca/formatting.py source file (I using labelAndName directive with focused, unfocused and basic where am I parts with pyatspi.role_label rolename related).If this fix is safe your openion the default formatting related source file, please commit this fix both master and gnome-3-14 branch. Without this change Orca me not announce this importanter informations a file or a folder related, only possible reading the values with flatreview feature (except if the user not using a braille display).AttilaCreatedThe good working method related debug.out fileThis debug.out shows final how need working the bug fix if need doing other fix method.I repeated the wrote testcase after I applyed my previous comment attached patch. Clear see the debug.out file Orca announce all importanter informations, and where am I output command doing this task perfect too.AttilaThis issue related not only the Files application affected, for example the gnome-control-center details preference pane producing similar simptomns.Testcase:1. Launch gnome-control-center preference tool.2. In personal page click Details button.3. The default focused owerview pane jump between labels with TAB and SHIFT+TAB keys.Expected result:Orca need speak and present braille with the widget label and the content (what type your processor, what your video card type, etc).Actual result:Braille Orca producing the expected result, but in speech Orca speaks only the widget label (memory selected label, processor selected label, etc).If I applying my attached patch, gnome-control-center details pane is full accessible, both speech and braille Orca producing expected result.AttilaHi Joanie,If you have a little time, can you review my patch this bug related?If my patch is good, need committing this patch both Orca master branch and gnome-3-14 branch to this fix lands the Orca 3.14.3 future maintenance release.AttilaCommitted to both master and the 3.14 branch. Thanks!It worked fine in my environment.I have a small observation.When I set verbosity level to brief, orca reads the word label after read the content of the label.For example:"file type folder selected label".This is not a problem, but in my opinion the word label could be suppressed if the verbosity level is set to brief.Great job.Hi José,I think I understanding you what would like, but please confirm:If you using brief verbosity setting, you would like hide the rolename and selection state related informations?This situation I think you requested output is following if the speech verbosity setting is brief and you request property dialog a folder related:Type: file type folderOrca this situation not examining now the verbosity setting, but this is an easy thing I think in formatting.py before set the pyatspi.role_Label rolename related formatting values.Joanie, your openion have risk if I try handling josé request this situation with other applications speech output related?This change affecting only the pyatspi.role_Label formatting values.Now, Orca use following formatting values with pyatspi.role_Label related, independent if the verbosity setting is verbose or brief: 'focused': 'labelAndName + allTextSelection + roleName', 'unfocused': 'labelAndName + allTextSelection + roleName', 'basicWhereAmI': 'labelAndName + allTextSelection + roleName'If the verbosity setting is brief, we need sending I think only the 'labelAndName formatting value.Now my machine building a live system, but I will looking this change and reporting the result experiences with brief verbosity setting this day.Attila(In reply to Hammer Attila from)Hi Attila.In my opinion only rolename should be omitted.Selection state is important and should be announced. If I know that an information is selected, I can copy it to clipboard.As I said before this is not a problem.Hi José,This is possible with you would like. If I remove the rolename part in the quoted code part, Orca not announce rolename information in Files property dialog, except the name related widget, with containing the filename.This widget at-spi or ATK identifying with an edit box, this situation Orca using different formatting value setting. If you type different text in Files property dialog the name text box and click the close button, you rename the selected item. This is true only if you previous selected one file or one folder and request the selected folder properties.This bug affected previous only the label rolename with src/orca/formatting.py related, so if I remove the rolename part if the verbosity setting is brief with affected code part, you only hear difference the pyatspi.role_Label widget speech output when you using brief verbosity setting.If all or more rolenames related you would like this change, need determining I think in Orca list how many users not would like hear rolenames if the verbosity setting is brief, and what rolenames need changing this working method with brief verbosity setting related.For example with web elements I think both two speech verbosity settings need hear the rolenames, a text box related need known you land a text box, etc.With braille verbosity setting I think when the verbosity setting is brief, Orca not send braille display the rolename related informations, except if the rolename not have a braille indicator, but I am not full sure this. Oldest time Orca have defined exceptions this working method related, but I don't no now what the case.Joanie, what your openion? I do this change only with pyatspi.role_Label rolename related if the speech verbosity setting is brief, or we keep the now used method both two speech verbosity settings?AttilaBefore you do it based on verbosity, I think it might be worth considering if there are some type of labels where the role should be spoken and other types of labels where the role should not be spoken. For instance, if you are in a Gtk+ message box and tab to a label in which it is possible to use caret navigation to move within and optionally select a portion of the text, should the role be spoken?Since apparently this bug is not yet fixed, I'll reopen it. :)Hi Joanie,I tested a message dialog now with Zenity, I used zenity --info command.When Orca reading dialog content, Orca not announced the rolename and selection state first time when the OK button get focus, this is right.When I press a TAB key, the focus jumps the message label, this situation Orca announce label content, selection state and rolename.Default this situation entire message label content is selected, and possible copying to clipboard the label content.Testcase:Simple try zenity --info, zenity --error commands, press a TAB key and press CTRL+C keystroke. In clipboard you have entire message label content.If in message label I using selection operations, during selection Orca not spokening right with rolename related informations. So, if I press HOME key in the label and try selecting two words from the message label, the selection announcement works right and possible copying only two words to the clipboard.Now, because not defined detailed where am I formatting value with pyatspi.role_Label rolename related (similar with oldest Orca releases), Orca repeating entire message label content when the message label is focused and the user doing a where am I operation. This is the default working method with where am I operation with labels related the oldest Orca releases too.Testcase:1. Launch zenity --info, zenity --error commands.2. Press TAB key.3. Press home, and select one or two words.4. Use where am I operation. You hear entire message label content, selected state and rolename, similar with oldest Orca releases.If not selected entire the message label content, where am I operation says only the label content and rolename.What the next step? what need changing?Attila	11.0	id=738057	9	False	False	hammera	1
id=764849	REOPENED	glib	general	unspecified	Other Linux	Normal normal		2016-04-10 15:13 UTC by		2016-09-25 10:22 UTC (	3 users	Please describe the problem:Opening nautilus in a wayland session will keep showing the loading indicator in the status bar. Wile the loading status is on the app does not appear in the alt+tab menuSteps to reproduce:1. open nautilus2. press alt+tab, you will see the app is not there3. wait for loading to finish4. press alt+tab the app is shows in the menu	Can you run it from the terminal and see if it displays some error?First kill all instances with "killall nautilus".This is strange when I start it from terminal all works as expected, starting it from the dash seems to work.The only error I get is:(nautilus:4695): Gtk-WARNING **: Theme parsing error: <broken file>:1:0: Failed to import: The resource at '/org/gnome/libgd/tagged-entry/default.css' does not existBut alt+tab works. I can't say the same thing about the terminal.Will attach some screenshoots.CreatedMissing terminal in alt+tabThe head kernel 4.6 solved the problem,I've tried to use it some more now, I can ignore most of the issues (touch working bad, icons getting small randomly) but from time to time I get logged out.I can reproduce it by dragging a tab from firefox in a new window but it happens randomly from time to time.So I think the original bug was just something unrelated and we can close this right?Feel free to reopen if not.Looks like it, thank you for your helpI had to revert to kernel 4.5 and I have the same issue again, anyway this can get fixed on 4.5 also.Maybe starting the apps from the gnome dash adds some extra command line params, can I see that anywhere?I can reproduce this bug. But in my case at least it is not only on Nautilus.When opening apps from the Dash (or the overview) with the wayland backend, it takes a while before they are available on alt+tab. And there is this "loading" animation for ~20 secons or so. This doesn't happen for apps using x-wayland.I can reproduce this 100% of the time for nautilus, gedit and gnome-terminal.The problem doesn't happen when launching from the terminal.Gnome Shell 3.20, Debian testing.Through some trial and error, I found out a way to avoid the problem, although I don't know what other implications this can have.The bug is not present if one removes the line "StartupNotify=true" from the .desktop files. Maybe this gives a hint as to what is going on...Any progress on this one, I can help with testing a potential fix.As perthis is fixed in kernel 4.6, feel free to reopen if that's not the caseuname -r prints 4.7.2-2-defaultAnd the issue still persists, runing Open Suse TumbleweedMoving to glib then, I believe is the application dbus activation that it's failing.With gnome 3.22 wayland become default and I still have this issue,It only manifests for gnome apps, like files or terminal, when I start firefox or chrome this does not happen.	14.0	id=764849	19	False	False	csoriano	1
id=753400	REOPENED	pango	general	1.37.x	Other Linux	Normal normal		2015-08-08 18:46 UTC by	Mikael Magnusson	2015-08-12 20:50 UTC (	1 user	For example with firefox onthe ゛ on the ケ is rendered on top of the ハ instead. Copying the text to a terminal and back into firefox renders it correctly, because my terminal converts it to NFC. The bug is not specific to firefox; Openbox also uses pango and renders the title of the window of that same url in the same way, with the ゛ on the wrong character.(The characters in the artist part in the same title is already NFC on youtube and are therefore rendered correctly).	CreatedscreenshotHumm. Can you reproduce in gedit?! What's the text, and what's the font?I just realized I have an extension in firefox to show the fonts in my selection, and it's supposed to be Sazanami Gothic, but when the selection includes the stray ゛, then it also includes IPAGothic. So I guess that's where my problem is... I'll come back if I can reproduce the problem without this mysterious font loaded.Well, removing that font from the search path just causes "Fixed ja" to pop up instead, I suppose my main font just doesn't contain the compositing characters at all? It's very rare to see them so it's not a big problem though.So, is this happening in Firefox content area, or the tab labels? If content area, it has nothing to do with Pango, and what you are seeing is this bug:I'm not trying to sound rude, but did you read the original report? I've written that the bug occurs in three separate programs (Openbox, uses pango directly, firefox, god knows what they do, a simple gtk+ program with only a gtktextbox). There's a screenshot attached that shows the bug in the Openbox titlebar, a firefox tab, and firefox content area.(In reply to Mikael Magnusson from)Do you think I read Japanese?If you don't know what Firefox does, then don't report it to me, report it to Firefox.Next time I ask if it happens in gedit, do me a favor and answer that question. I don't know what Openbox uses or what Openbox is to begin with....Not being grumpy though. Thanks for not being rude. :)I can't reproduce it in gedit because gedit has 12049212 dependencies that I don't want to install. I've included firefox in this report as one of three separate instances where I could reproduce the bug, since more datapoints usually do not hurt. I also included what I think is a fairly clear description of the problem even to someone who doesn't read japanese. (I also did think you did read it, since you named your software after a japanese word and your logo has japanese text in it). Openbox is a window manager, so it is the program rendering the text in the titlebar shown in the screenshot.I did forget to say what the actual font I want to use is called though, it's Sazanami Gothic, and it's used for everything except for the misplaced accent mark.Looking in gucharmap, U+309B KATAKANA-HIRAGANA VOICED SOUND MARK is available in Sazanami Gothic, but U+3099 COMBINING KATAKANA-HIRAGANA VOICED SOUND MARK is not.In NFC, these marks are precombined into separate codepoints, whereas in NFD, the base character and the mark are separate codepoints. For example ぼ is precomposed and should render identically to ぼ (it's possible that something along the way will convert this to NFC too...).Arguably (?) these should be precomposed at some stage of the rendering, even if the font doesn't have the glyph for the composing character. For example じ and ぐ have the mark rendered slightly lower than other characters. I'm not sure at which step of the way this is meant to happen in the pango-xft-freetype chain.I hope this clears up some things. (and sorry for messing with the bug status, but I changed my mind about being sure it is invalid, to being unsure what should happen).Yes, it's valid bug then.I didn't originally write Pango; Owen Taylor did, and he understands some Japanese. It's very easy for people reading a script to think their explanation should be understandable to even people not reading the script :).At any rate, yes. Lets keep this open to implement grapheme-based font selection.I found that calling g_utf8_normalize(data, -1, G_NORMALIZE_NFC); on my text before rendering it, makes it render correctly with Pango (which is expected). Maybe an approach like this would be good in Pango itself?	10.0	id=698726	19	False	False	mbarnes	1
id=322096	REOPENED	Gnumeric	import/export MS Excel (tm)	git master	Other All	Normal normal	Jody Goldberg	2005-11-22 04:49 UTC by	Titus Winters	2009-08-27 05:06 UTC (	4 users	Please describe the problem:It looks like there is some incompatibility between Excel and Gnumeric whenusing (at least some forms of) the CTRL+Shift+Enter functions. Such functionswill work properly in Gnumeric, but when converting / exporting back to Excelthey will only show up as #VALUE. Re-accepting the equation by selecting thecell(s) in Excel and hitting CTRL+Shift+Enter again fixes it. Fairly minor, but some gnumeric related applications I've been developing woulddefinitely benefit if this didn't happen.Steps to reproduce:1. Download2. View in Excel, notice cells are properly formatted.3. Convert to and from gnumeric (ssconvert to gnumeric, ssconvert to xls)4. View in Excel, notice cells are improperly displayed.Actual results:These matrix formula cells render only as #VALUE.Expected results:The correct value should still be displayed.Does this happen every time?Yes.Other information:	confirmed.I've got a simple patch that can be back ported, but I'd like to do some research today to confirm that this will not cause other problems.It appears that this was fixed some time ago.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Unfortunately this has not been fixed. The algorithm for selecting which class of op code to use is undocumented and we're still working to improve things.How does this report differ from?***has been marked as a duplicate of this bug. ***	5.0	id=775463	14	False	False	bugzilla	1
id=741121	REOPENED	gnome-user-docs	sysadmin-guide	3.13.x	Other Linux	Normal normal	Jana Svarova	2014-12-04 17:32 UTC by	Jana Svarova	2015-05-18 09:37 UTC (	3 users	Createda new page on disabling logout Hello,I've created a new page on disabling logout (lockdown section on the sysadmin guide).Feel free to review.Thank you for your time!	Review of:Can you make this more topic/task oriented as opposed to a description of the keys?You are duplicating a lot of existing strings here and the page looks quite different from other help pages. Please make it more consistent with other reviewed pages, see desktop-lockscreen.page for an example.Creatednew page describing how to lock down logoutHello Kat,Thank you very much for the valuable feedback.I've applied your suggestions and I'm coming up with a new patch.Any more comments are warmly welcome!JanaReview of:Looks good to me. Thank you.Thank you Petr.Pushed to master, commit:Closing the bug as fixed.commit: 9916cd4cb6ac23382544b99f744d3e55b997fc0cThere was no link to Bugzilla in the commit message (so I had to search through bugzilla to find this bug, which was frustrating).The applied patch has validation errors:system-admin-guide/C/lockdown-logout.page:10: element item: validity error : ID dconf-profile-user already definedsystem-admin-guide/C/lockdown-logout.page:21: element item: validity error : ID dconf-profile-user-dir already definedsystem-admin-guide/C/lockdown-logout.page:39: element item: validity error : ID dconf-update already definedsystem-admin-guide/C/lockdown-logout.page:43: element item: validity error : ID dconf-logoutin already definedPetr, I think it is time that you stopped reviewing patches for gnome-user-docs if you are going to continue to be slapdash in your review comments. This patch was not ready to be accepted and merged.(In reply to David King from)Dear David,Before I uploaded the patch, I made sure the "git apply --check <patch>" command did not return any error. When I applied the patch before committing to master I ensured the whole book builds by executing "yelp-check validate *.page", and again no error message was returned.When I tested the patch again today, I can see no error whatsoever, and the book builds as it is supposed to. The list of id errors you copy-pasted in your comment suggest that your git settings(?) refuse using dconf snippets twice in the same document, which is not harmful for the book IMHO. Petr obviously did not encounter any of the aforementioned errors as well; otherwise he would not approve of the patch.This issue raises a few questions:* What do you think I should have done differently?* How come Petr's and my git/yelp do not return the errors you mention when applying the patch?* Could anybody else test out the validity of the patch to find out the root cause?Concerning the documentation content:* Do you find the new page improved compared to my first draft?* Do you believe users can find it helpful?* Does the addition of the new page enhance our guide? Thank you very much for answering my questions and your time,jana(In reply to Jana Svarova from)Thanks for your explanation, Jana. I can only confirm what you say. Also, the applied patch validates for me, so I think we can close this bug.(In reply to Petr Kovar from)Mallard is validated using yelp-tools, specifically "yelp-check validate". I checked the validation after applying the patch to master, and I see the same errors as Dave mentioned in.XML validation is not related to git settings. It is purely testing whether the page complies with the Mallard schema.Petr, we have a strict "must be valid XML" policy for docs. This has been the case for longer than I have been contributing and it is the reviewer's responsibility to make sure that patches validate. Patches which do not have valid XML must be fixed before they can be accepted.Apart from the validation issue, there are other improvements that should have been made to the patch so it should not have been approved for committing.I will review this patch tomorrow so that we can go through the review properly instead of compromising on quality. This patch has already delayed the 3.16.2 release, which is quite a serious issue.Review of:I have reverted this patch in commit.You need to fix up general indentation before you resubmit the patch and make sure that it validates. Have you tested the instructions?::: system-admin-guide/C/lockdown-logout.page@@ +7,3 @@+ <link type="guide" xref="user-settings#lockdown"/>+ <link type="seealso" xref="dconf-lockdown" />+ <revision pkgversion="3.14" date="2014-05-04" status="draft"/>Is this page actually a draft or is it ready for review?@@ +23,3 @@+ <section id="user-logout">+ <title>Disable user logout</title>+ <p>Follow these steps to prevent the user from logging out.</p>Why would I want to do this? Present a usecase.@@ +28,3 @@+ can thwart system administrator's intentions. That is the reason why it is+ recommended to disable "user switching" as well to prevent this scenario+ from occurring. See <link xref="#user-switch"/> for details.</p>Use simpler English@@ +51,3 @@+ <file>/etc/dconf/db/local.d/locks/lockdown</file>:</p>+<screen>+# Lock this key to disable user logout"Lock user logout": it's simpler and shorter, also matches the style on other pages.@@ +88,3 @@+ <file>/etc/dconf/db/local.d/locks/lockdown</file>:</p>+<screen>+# Lock this key to disable user switchingAs above	10.0	id=322096	12	False	True	jody	1
id=775463	REOPENED	mutter	general	3.22.x	Other Linux	Normal normal		2016-12-01 12:39 UTC by	Kamil Páral	2016-12-14 13:00 UTC (	4 users	If you have "org.gnome.SessionManager auto-save-session" set to true (which can be a remnant of past GNOME releases, where you could have configured this setting in a GUI), every second login fails (this is almost precise).This can be trivially reproduced with a clean installation (I tested in a Fedora 25 VM), or even using a Live image (like Fedora 25 Workstation Live).The problem has been described in length in here:It also contains a backtrace and logs.	<mcatanzaro> kparal: So the bad news is there are actually two separate bugs there, and the bug we have a stacktrace for is only a consequence of some other gnome-session bug<mcatanzaro> kparal: That's a crash in gnome-session-failed... which only gets run if gnome-session has to quit unexpectedlyBacktrace:[New LWP 25146][Thread debugging using libthread_db enabled]Using host libthread_db library "/lib64/libthread_db.so.1".Core was generated by `/usr/libexec/gnome-session-failed --allow-logout'.Program terminated with signal SIGSEGV, Segmentation fault.Thanks for taking the time to report this.This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***Reopening as the bug was opened specifically about the setting not working. The backtrace is the consequence of gnome-shell or gnome-session going away. Can you please check in your journal logs which it is, and if there's any relevant information?I don't really care about the setting working or not, but I don't want every second login attempt failed :-)The journal during login attempts is here:Thanks to hadess's help, we found that .config/gnome-session/saved-session/ is populated on logout, and it causes the next login to fail. When the login fails, it clears the state. Which explains why every *second* login fails.In my clean F25 VM where I can easily reproduce the issue, only one item is created on logout:$ ls .config/gnome-session/saved-session/org.gnome.Shell.desktopThe file contents is:[Desktop Entry]Name=gnome-shellComment=Client 1030f58b5049d29ca3148059935334560800000032530000 which was automatically savedIcon=system-runType=ApplicationStartupNotify=trueX-GNOME-Autostart-startup-id=1030f58b5049d29ca3148059935334560800000032530000Exec=gnome-shell --sm-client-id 1030f58b5049d29ca3148059935334560800000032530000X-GNOME-Autostart-discard-exec=rm -f /home/kparal/.config/mutter/sessions/1030f58b5049d29ca3148059935334560800000032530000.msRetitling the bug and reassigning.Either gnome-session needs not to save it, or gnome-shell (mutter in this case) needs to not offer xsmp client support.Mutter maintainers?err why?to be clear, is mutter crashing when trying to restore state ? window manager performs a special role in the whole xsmp dance, without it other xsmp clients won't restore correctly.(In reply to Ray Strode [halfline] from)Mutter/gnome-shell is crashing during the session restoration. I'm really not sure this plays well with a Wayland session, and the different ordering.Anyway, I don't have great knowledge of XSMP on the server side, so I shouldn't be advising particular solutions to this problem. The problem is that gnome-settings-daemon is started, as per the session file, even though gnome-shell isn't started (yet?). This only happens when gnome-shell is saved in the session.The missing comment (in another tab...):lis 28 20:47:30 kraken gnome-settings-[6706]: Unable to initialize GTK+lis 28 20:47:30 kraken gnome-session[6686]: gnome-session-binary[6686]: WARNING: App 'gnome-settings-daemon.desktop' exited with code 1lis 28 20:47:30 kraken gnome-session-binary[6686]: WARNING: App 'gnome-settings-daemon.desktop' exited with code 1gnome-settings-daemon can't init GTK+. I think that's because gnome-session is trying to start the applications in the saved state too early (earlier than gnome-shell).	11.0	id=741121	14	False	False	kittykat3756	1
id=128063	REOPENED	doxygen	general	1.3.x	Other Windows	Normal normal	Dimitri van Heesch	2003-11-27 15:50 UTC by		2013-08-01 16:52 UTC (	1 user	A single backslash in a <pre> fragment causes the rest of the line to beignored. The backslash must be doubled to work properly.	Tried to reproduce the problem with version 1.8.3.1, 1.3.1 and 1.2.18 with the following source file:/** * docu of f * * <pre> * Pre section with now \ single backslash * and at end of line \ * rest of pre section * </pre> */void f(){}but without success.Cannot reproduce problem.Please reopen this bug if you can attach a self-contained example (source+config file in a tar or zip) that allows reproduction of the problem.CreatedTestcase forArchive contains source and generated outputAfter some digging I was able to the code which triggers the bug.Thank you for the answer.In the <pre> section the \ followed by the characters until the first space are seen as a command.Apparently the \commands are processed when inside a <pre> section, I could not find any conformation in the documentation about this though.The problem can be overcome by using a \verbatim block (resulting in a boxed and colored section in the output).Another option is to escape the \ by another backslash, but this is not nice for ASCII art.	5.0	id=753400	6	False	False	behdad	1
id=750660	REOPENED	GStreamer	gst-plugins-bad	1.4.4	Other Linux	Normal normal	GStreamer Maintainers	2015-06-09 19:41 UTC by		2015-06-15 18:18 UTC (	3 users	CreatedDoes not work example logI’m having a problem with the mpegtspacketizer.c implementation of mpegts_packetizer_pts_to_tsI have a HLS demuxer ( not the open source version that is available, but a home grown one that I am working on open sourcing) that pushes TS files into the pipeline. On actual Set top box hardware this implementation autoplugs and works fine. The problem comes when I try to run it on a PC with the tsdemux in gst-plugins-bad.When I send the TS stream to the tsdemux, the tsdemux does actually parse and find the correct PTS and DTS however since I don’t have calculate_skew nor calculate_offset set to TRUE the code flow in mpegts_packetizer_pts_to_ts always reports back that Not enough information to calculate proper timestamp. Now with the exact same stream I do a filesrc autoplugged pipeline and load the first transport stream segment into playbin and because this is a pull src the pipeline and the tsdemux can correctly parse and set the timestamps PTS/ DTS and play the stream. I’m stuck with how to actually fix this function. I have attached two logs, one working ( the pull source I noted from above) and the HLS demux that is a push source that doesn’t work.I have referencedHowever I have the same issue with the 1.4.4 release. Even though my demux element sends a segment event (which should theoretically turn on calculate_skew) it seems the tsdemux is throwing this segment information away and calculate_skew never gets turned on.0:00:00.185801239 20235 0x1552ca0 DEBUG tsdemux gbuild/src/gst-plugins-bad-1.4.4/gst/mpegtsdemux/tsdemux.c:890:push_event:<tsdemux0> Ignoring segment event (recreated later)I've tried commenting out the above with no change in behavior.Any suggestions on how to proceed would be greatly appreciated. I’m also happy to provide any code or libraries.Thanks,Matt	CreatedThis is an example of the code working with a push sourceDoes it work with a pushfile:// uri? This will trigger filesrc under push mode.Does your hls element push a TIME segment?Hello,Yes it does work with pushfile://uri, however the baseFormat is not GST_FORMAT_TIME, where as my HLS Demux is indeed setting the segment with the GST_FORMAT_TIME parameter. I should have mentioned this earlier.Here is my segment code that I send on new streams and after a flush stop:GstEvent *segmentEvent = NULL;#if GST_CHECK_VERSION(1,0,0) GstSegment segment; gst_segment_init(&segment,GST_FORMAT_TIME); segment.rate = 1.0; segment.applied_rate = 1.0; segment.format = GST_FORMAT_TIME; segment.position = demux->seekpos; //seekpos in a new stream is 0 segment.start = 0;// demux->seekpos; //start; segment.stop = gst_cisco_hls_get_duration(demux); // duration of the HLS VOD asset segment.flags = GST_SEGMENT_FLAG_RESET; GST_WARNING(" Sending NewSegment message with flag set to reset, setting:\n new position to %u (ms) \n start %"G_GINT64_FORMAT" \n stop %"G_GINT64_FORMAT"\n" ,demux->seekpos/ GST_MSECOND,segment.start, segment.stop); segmentEvent = gst_event_new_segment (&segment);Is this what you meant by saying a "TIME segment"?Thanks,That failing log makes no sense. Are you sure you have no other patches applied to mpegtsdemux ?Does it work with 1.4.5 or 1.5.1 ?If not, please provide a more complete log (GST_DEBUG=2,*ts*:8 and let it run for a bit longer than you did).I have not tried with 1.4.5 or 1.5.1, I can attempt to do that next. I have created a log and let it run for quite a long time with a virgin copy of 1.4.4. I have removed all my prints. I have also set the log levels to what you requested Edward.the Log is virgin_log.txtCreatedVirgin log of 1.4.4 tsdemuxI had to compress this text file as a tarball because it was too big.Do you set a timestamp on the first buffer you push out ? If you don't, the whole skew calculation system won't be activated.I have tried setting the buffer timestamp to none GST_BUFFER_TIMESTAMP (buf) =GST_CLOCK_TIME_NONE;with no change in behavior, however when I changed the code to this:GST_BUFFER_TIMESTAMP (buf) =demux->seekpos;Where demux->seekpos is the stream start or the seek position in nano seconds than the demux is able to parse and play back content. Which I guess resolves this bug. However querying for position always returns the running time not the actual stream position time. For example if I seek to 80 seconds into the stream and query for position it returns that the position is 0 and increments from there.Part of that could be the fact that when I do a flush event = gst_event_new_flush_stop (TRUE); I send in a hard reset, if I do not and leave this as false the video freezes and nothing occurs when I do a seek.Ok, so it's not an issue in GStreamer. Please move your questions to the gst-devel mailing-list. Bugzilla is for tracking bugs in GStreamer.I have to reopen this bug because I'm seeing the exact same behavior when I do a seek 600 seconds or larger into the playback stream. When I do the seek forward only 100 or 400 sec the seek works fine.My code for the buffers ( for the first buffer and any seeks) looks like this: GstSegment segment; gst_segment_init(&segment,GST_FORMAT_TIME); segment.rate = 1.0; segment.applied_rate = 1.0; segment.format = GST_FORMAT_TIME; segment.position =0; segment.start = demux->seekpos; segment.stop = gst_cisco_hls_get_duration(demux); segment.flags = GST_SEGMENT_FLAG_RESET; segment.time = demux->seekpos; GST_WARNING(" Sending NewSegment message with flag set to reset, setting:\n new position to %u (ms) \n start %"G_GINT64_FORMAT" \n stop %"G_GINT64_FORMAT"\n" ,demux->seekpos/ GST_MSECOND,segment.start, segment.stop); GST_BUFFER_TIMESTAMP (buf) = demux->seekpos; segmentEvent = gst_event_new_segment (&segment);I've collected several logs placed in the seek_logs.tgz file:compare.log: trimmed log that shows the start of the stream playing then after the seek (line 45)seek.log: full log that goes with the compare.log file.The interesting thing in the working cases is that I will always get the gst_ts_demux_parse_pes_header "Got pts/dts update, rechecking all streams" However in the none working case I never see this print.Happy to collect more logs or discuss how I should set the timestamp in the buffers more than what I'm already doing. ( I actually only timestamp the initial buffer after start and after a seek).CreatedLog files that show failure of tsdemux finding PTS /DTS values after a seek.CreatedResolves the problem with tsdemux not playing back after seek in TSThe TS file that I was seeking through had PCR value that would gradually get way off. So when you did a seek the values where more than 15 seconds off. Well there is a check for this in mpegtspacketizer but it only allows for a 15 second variance. I increased it to half the max value.	12.0	id=776438	6	False	False	notverysmart	1
id=555560	REOPENED	gtk+	Widget: GtkComboBox	unspecified	Other Linux	Normal normal		2008-10-08 14:52 UTC by	Christian Dywan	2011-09-29 02:34 UTC (	4 users	The function gtk_combo_box_set_active produces warnings if the model is unset, because it tries to work with a NULL model.This results in an 'object' test failing.It would seem that _set_active should just do nothing if there is no model.	CreatedBail out if the model is unsetThis patch implements a check whether the model is NULL, and to return early in that case.(In reply to)Hm, a better fix here would be to store the index internally and set it again once the model is set, so the ::model and ::active properties can be truely set out of order. But still, the attached patch at least avoids a bogus warning.CreatedStore the index in case the model is set afterwardsThis patch implements, as suggested, saving the index in the case where the model is not *yet* set and applies it when the model is set.Incidentally I foundwhich should be fixed with this patch.CreatedA standalone testcaseThis testcase creats a combo box, sets the active item and creates and sets a model afterwards. Without the above patch it outputs "active: 1 == -1", with the patch it will actually output "active: 1 == 1" regardless of when the index is set.2008-12-13 Matthias Clasen <>– gtk_combo_box_set_active fails with no model * gtk/gtkcombobox.c: Allow out-of-order setting of model and active. Patch by Christian DywanThis patch is bogus. I'm going to revert it unless someone cries very loudly and with good reasons.The patch is bogus for the following reasons:1) Setting the active row is supposed to work on the _current_ model.2) Setting the active row and then setting the model fails if there is already a model set.3) gtk_combo_box_get_active() does not return the value set by this function.4) This function does not fix a real-world problem.Oh yeah:5) No other API in GTK behaves like this.	7.0	id=128063	5	False	False	albert.tests	1
id=776438	REOPENED	rhythmbox	general	HEAD	Other Linux	Normal normal	RhythmBox Maintainers	2016-12-23 12:23 UTC by		2016-12-24 09:38 UTC (	2 users	peas_extension_call has been deprecated since version 1.2 and should not be used in newly-written code. Use the interface directly instead.	Please don't file bugs about deprecated function use unless you're also going to fix them.Createdshell: Replace deprecated peas_extension_call with direct peas activatable calls	2.0	id=555560	9	False	False	christian	1
id=767867	REOPENED	mutter	general	3.18.x	Other Linux	Normal normal		2016-06-20 10:51 UTC by	Ben Scholzen	2016-06-20 13:42 UTC (	2 users	Since my upgrade to Gnome-Shell 3.18 (from 3.10), any fullscreen window like video player or games, which get unredirected, will flicker to black for a split-second when an OSD window pops up and disappears, or any other action which causes the fullscreen window to get redirected and unredirected again.I don't know if this is NVidia-related (using the proprietary driver), or if it happens with any other graphics card.Steps to reproduce:- Open a game which window gets unredirected- Change volume with a hotkey, so the OSD comes up- Game will flicker to blackI'm currently working around this bug by using the following extension, which disables unredirecting completely, but of course that has a small performance impact:	*** This bug has been marked as a duplicate of***Rui, are you sure that this is a duplicate of the linked bug? It seems like a different behaviour.I remembered some comments (by you, in fact) a few days ago about this there so I assumed that's what that bug was about but now I see it's not.It'd be helpful you could at least find out on which gnome version this started happening. Also, can you check with older driver versions too?FWIW, I can't reproduce this here on gnome 3.18 with driver version 340.96 which is the latest I can use.	4.0	id=767867	10	False	False	mail	1
id=745068	REOPENED	glib	gobject	unspecified	Other Linux	Normal normal		2015-02-24 08:44 UTC by	Marc-Antoine Perennou	2016-10-04 21:39 UTC (	5 users	The recent G_DECLARE_* macros replace the old #define boilerplate.This is cool, but introduce a small "regression".Before, passing a const pointer to FOO_IS_A_BAR was fine. Now that it's a function, it prints a lot of warnings and I'm not convinced casting as non-const is a proper solution here.Change these functions to take const parameters instead.Btw, do the same for *_get_instance_private	Createdthe G_DECLARE_* partCreatedthe *_get_instance_private partReview of:To be perfectly honest, and a bit blunt, nobody really writes getters with a const GObject instance in the G* platform.I get that, but is there any drawback in supporting it?I don't see any drawback here...Review of:Looks fine (although I do question the style of any code that would depend on these changes).Review of:Also fine.Review of:commited as 52f23db74ad58b822bafb0fdcac106489d864f8cReview of:commited as a3a9664ed202303b899ca55625877542309d1a1fThe drawback is that now G++ and GCC with -Wcast-qual warn because of the mismatched constness between the inline functions and the underlying GType API, which does not use const pointers.See bug: 748631.Either we revert this and we don't allow passing const pointers — which, to me, is perfectly acceptable; const GObject instances barely make sense — or we constify the GType API, which will likely generate more warnings.***has been marked as a duplicate of this bug. ***I've pushed the reverts to GLib master.If we want to constify arguments we'll have to figure some other way to do it, and ensure that C++ compilers won't break.I'll leave the bug open in the meantime.I don't think reverting the patches was the best way to solve the issue. Now, we're not able to make self-explanatory, clean API using Glib.The problem I'm hitting right now, is that I can't compile following code without warnings:void method(const SomeType *my_instance){ G_TYPE_CHECK_INSTANCE_TYPE (my_instance, some_type_get_type()); // Warning: discard const qualifier}So now I have to either explicitly cast my_instance to (SomeType*), what is very inconvenient, or remove "const" from the method's declaration, what is unacceptable(it makes my API non-self-explanatory).Maybe we should rather spend more time on fixing GType API, and systematically fix the warnings.If you agree, I can work on it as a volunteer and provide some patches.(In reply to Marcin Kolny (IRC: loganek) from)The patches broke perfectly valid code, by introducing warnings all over the place. Since you're the only person that opened a bug to introduce constness annotations to the macros, reverting the patches was the obvious choice.This code is not common in any project using GObject. Accessors that do not modify the instance are rare, and they usually come with side effects anyway. What happens if the accessor does not modify the instance state but still has to emit a signal? Or notify a read-only property? Anything that may take a temporary reference within the method will need a non-const pointer, even if the instance itself won't be modified.Or maybe you should *not* use `const`, like everybody else.I don't particularly agree; I think it's not worth the aggravation to handle `const` at the C level on GObject.I am not the maintainer of GLib, though, so if Allison agrees to have every function in GTypeInstance take a const then you can start working on it.I'd like to point out that adding const annotations to the GTypeInstance API may very well end up generating more warnings.***has been marked as a duplicate of this bug. ***	15.0	id=710986	53	False	False	jeffery.to	1
id=710986	REOPENED	gvfs	general	1.18.x	Other Linux	Normal normal		2013-10-28 05:54 UTC by	Jeffery To	2014-11-12 14:16 UTC (	3 users	I recently upgraded to Ubuntu 13.10 and started experiencing this issue. (The original reporter on Launchpad appears to be using gvfs 1.17 at the time, whereas I currently have 1.18 installed.)I can reproduce this issue with the following steps:1. Open a Nautilus window. (It defaults to my home directory.)2. Open a new tab or window. (This also opens to my home directory.)3. In the new tab/window, navigate to a Samba share. (I have one bookmarked so I click on the bookmark in the left side panel.) A new entry for the share appears under Network in the left side panel.4. Close the new tab/window.5. In the left side panel, under Network, click the unmount icon next to Samba share entry.At this point, gvfsd-smb crashes. I also get two alert boxes (I believe from Nautilus):1. Oops! Something went wrong. Unhandled error message: The connection is closed2. Unable to unmount <share name> The connection is closedThe Launchpad bug report is atPlease let me know if more information is needed. Thanks!	Thanks.I have seen this before and it seems to be because an unmount and a query_info operation are issued at the same time by Nautilus causing the unmount to fail with "The connection is closed" (which is wrong).This causes in some cases also SIGSEGV. There are several bugs for it downstream:Possible solution is block new jobs and wait until other jobs are finished before executing unmount. However it can wait forever if there is hanging some job...commit 510a6dcfc74bd412ce478d3a458ddcbbd40f2c2cAuthor: Ondrej Holy <>Date: Thu Feb 13 16:22:39 2014 +0100 smb: set context to NULL after it has been freeddiff --git a/daemon/gvfsbackendsmb.c b/daemon/gvfsbackendsmb.cindex 6065912..a673c59 100644--- a/daemon/gvfsbackendsmb.c+++ b/daemon/gvfsbackendsmb.c@@ -751,6 +751,7 @@ do_unmount (GVfsBackend *backend, /* shutdown_ctx = TRUE, "all connections and files will be closed even if they are busy" */ res = smbc_free_context (op_backend->smb_context, TRUE);+ op_backend->smb_context = NULL; if (res != 0) { g_vfs_job_failed_from_errno (G_VFS_JOB (job), errno);Createdconsider all jobs excepting unmount as blocking processesUser can wait to finish all jobs (not only jobs with opened channel) before unmount to avoid potential crashes...Review of:Seems good, as long as the pid = -1 doesn't cause trouble anywhere. This will however prevent backend with stuck jobs being unmounted. Think of a stuck QueryInfo on lost network connection.Works like intended, however it blocks session as in.Createdconsider all jobs excepting unmount as blocking processesDoes the same thing as previous one, however without faking pids.Still this doesn't solve race conditions, however it is good way to avoid them.Review of:Apart from the (important) issue found it looks good.::: daemon/gvfsdaemon.c@@ +1077,3 @@+ if (!G_VFS_IS_JOB_UNMOUNT (l->data))+ {+ return TRUE;Missed mutex unlock.I gave the patch a test and it didn't work for me (after fixing Tomas's issue). I was still able to cause a SIGSEGV in the backend daemon. I haven't yet had a chance to figure out why because I got distracted with another unmount race:Seefor the unmount race. I'd appreciate if Tomas, as master of the GDBus port, could take a look :-)Createdtest programAttached is the test program I used to cause the SIGSEGV and some sample output:"""$ ./unmount2 smb://localhost/tmpmount startingmount finishingmount finishedfinding enclosing mountfinding enclosing mount finishedunmount startingquery info startingquery info finishingquery error: Backend currently unmounting /// this worked correctlyquery info finishedunmount finishingunmount finished /// this worked correctlymount startingmount finishingmount finishedfinding enclosing mountfinding enclosing mount finishedunmount startingquery info startingunmount finishingunmount error: The connection is closed /// this segfaultedunmount finishedquery info finishingquery error: The connection is closed /// this segfaultedquery info finished..."""Unfortunately it doesn't cover all cases. It doesn't work in your case probably, because you just simply ignore GMountOperation. GMountOperation asks you if you want to cancel or unmount anyway. However we can't wait by default, because some operation can be stucked...Createdconsider all jobs excepting unmount as blocking processesThanks for review, again with mutex unlock :-)Review of:Looks good, but you also need the following:diff --git a/daemon/gvfsjobunmount.c b/daemon/gvfsjobunmount.cindex 416fb35..205407c 100644--- a/daemon/gvfsjobunmount.c+++ b/daemon/gvfsjobunmount.c@@ -188,7 +188,7 @@ job_finish_immediately_if_possible (GVfsJobUnmount *op_job) if (class->try_unmount != NULL || class->unmount != NULL) return FALSE; - is_busy = g_vfs_backend_has_blocking_processes (backend);+ is_busy = g_vfs_daemon_has_blocking_processes (g_vfs_backend_get_daemon (backend)); force_unmount = op_job->flags & G_MOUNT_UNMOUNT_FORCE; if (is_busy && ! force_unmount)Please commit with this change.Thank you for the review, but I don't see what I should to fix. Are you forget to write the change or have I overlooked something?(In reply to)In job_finish_immediately_if_possible() in gvfsjobunmount.c, you need to change the g_vfs_backend_has_blocking_processes() call to g_vfs_daemon_has_blocking_processes() for it to compile correctly.Sorry, I'm blind... will fix it and commit, thanks :-)Comment onconsider all jobs excepting unmount as blocking processescommitI closed it by mistake, we need to make unmount procedure more robust to cover all cases, so reopen...Can you say what the remaining cases are that still need to be fixed? (There's also(partially been fixed) which is an unmount race on the client side.)The title of this bug and the component should be probably be updated since I don't think these races are specific to the smb backend.I see several problems with the unmount procedure:1) There is check for blocking processes before execution unmount operation. Blocking process is any type of job now (see attached patch). However in case of force unmount or unhandled show-processes signal, unmount can be executed in parallel with other jobs. We should to avoid this situation. It can be improved by canceling running jobs and wait some time before executing the unmount operation.2) New jobs are blocked and mount is unregistered after successful unmount. However new jobs can be executed after the check for blocking process and before successful unmount. We should to block new jobs before the unmount operation.So I am changing the bug title and will attach patches to improve unmount procedure later.Createdgvfsjobunmount: set error as per user interactionIf the dialog about blocking processes was cancelled, G_IO_ERROR_FAILED_HANDLED will be returned. If it wasn't interacted and there were outstanding jobs, G_IO_ERROR_BUSY will be returned.Createdgvfs-mount: allow specifying G_MOUNT_UNMOUNT_FORCECreatedgvfsjobunmount: block new requests before unmountJobs are block after successful unmount. However new jobs can be executed after check for blocking process and before successful unmount. We should to avoid running another jobs concurrently with unmount operation. This patch blocks new request before unmount (do not block existing channel requests).So this should solve second issue from the...Createdclient: increase dbus proxy timeout for unmountDefault timeout is too short and error "Timeout was reached" could be shown if user don't interact with unmount dialog. The patch sets the timeout to 30 minutes as it is set on server side.Review of:Looks good, with minor comments.::: man/gvfs-mount.xml@@ +115,3 @@+ <term><option>-f</option>, <option>--force</option></term>++ <listitem><para>Ignore outstanding file operations.</para></listitem>Probably good to indicate that it applies to unmounting: "Ignore outstanding file operations when unmounting or ejecting."::: programs/gvfs-mount.c@@ +63,3 @@ { "eject", 'e', 0, G_OPTION_ARG_NONE, &mount_eject, N_("Eject"), NULL}, { "unmount-scheme", 's', 0, G_OPTION_ARG_STRING, &unmount_scheme, N_("Unmount all mounts with the given scheme"), N_("SCHEME") },+ { "force", 'f', 0, G_OPTION_ARG_NONE, &force, N_("Ignore outstanding file operations"), NULL },Agai, probably good to indicate that it applies to unmounting: "Ignore outstanding file operations when unmounting or ejecting"Review of:The overall approach looks OK. I'm not sure what you mean by "it wasn't interacted" and when the G_IO_ERROR_BUSY error is returned.Additionally, I think that if the client program does not pass in a GMountOperation, instead of just force unmounting, it should return G_IO_ERROR_BUSY unless the force_unmount flag is given. Something like:diff --git a/daemon/gvfsjobunmount.c b/daemon/gvfsjobunmount.cindex bf3cc42..9d60751 100644--- a/daemon/gvfsjobunmount.c+++ b/daemon/gvfsjobunmount.c@@ -253,13 +254,17 @@ try (GVfsJob *job) is_busy = g_vfs_daemon_has_blocking_processes (g_vfs_backend_get_daemon (backend)); force_unmount = op_job->flags & G_MOUNT_UNMOUNT_FORCE; - if (is_busy && ! force_unmount- && ! g_mount_source_is_dummy (op_job->mount_source))+ if (is_busy && ! force_unmount) {- g_vfs_backend_unmount_with_operation (backend,- op_job->mount_source,- (GAsyncReadyCallback) unmount_cb,- op_job);+ if (g_mount_source_is_dummy (op_job->mount_source))+ g_vfs_job_failed_literal (G_VFS_JOB (op_job),+ G_IO_ERROR, G_IO_ERROR_BUSY,+ _("File system is busy"));+ else+ g_vfs_backend_unmount_with_operation (backend,+ op_job->mount_source,+ (GAsyncReadyCallback) unmount_cb,+ op_job); return TRUE; }::: daemon/gvfsbackend.c@@ +825,3 @@+ g_simple_async_result_set_error (simple, G_IO_ERROR, G_IO_ERROR_BUSY,+ _("File system is busy"));+ ret = FALSE;In what situations is branch taken? The only way I could find was if the dbus operation got an error (e.g. the client program disappeared).@@ +910,3 @@+ * If the operation was cancelled, G_IO_ERROR_FAILED_HANDLED will be returned.+ * If the operation wasn't interacted and there were outstanding jobs,+ * G_IO_ERROR_BUSY will be returned.How can I test the G_IO_ERROR_BUSY error?Review of:Looks good!Createdgvfs-mount: allow specifying G_MOUNT_UNMOUNT_FORCE(In reply to)Good point, fixed :-)Createdgvfsjobunmount: set error as per client interaction(In reply to)It means when GMountOperation is passed in, but "show-processes" signal isn't handled. I reworded it in the attached patch. There are use cases for unmounting when g_vfs_daemon_has_blocking_processes is TRUE:force = TRUE => do/tryforce = FALSE & is_dummy = TRUE => G_IO_ERROR_BUSYforce = FALSE & is_dummy = FALSE & UNHANDLED => G_IO_ERROR_BUSYforce = FALSE & is_dummy = FALSE & ABORTED => G_IO_ERROR_FAILED_HANDLEDforce = FALSE & is_dummy = FALSE & HANDLED (Cancel) => G_IO_ERROR_FAILED_HANDLEDforce = FALSE & is_dummy = FALSE & HANDLED (Force unmount) => do/trySee:You can test it e.g. this way:$ gvfs-mount localtest://$ gvfs-cat localtest:///dev/random > /dev/null $ gvfs-mount -u localtest://Error unmounting mount: File system is busyThat's right, I missed that use case firstly...Review of:Looks good!Review of:Yes, that looks good. I like your enumeration of all the different cases :-)Review of:Why shouldn't new channel jobs be blocked as well? Otherwise you could have the following sequence:Begin unmountCheck for blocking processes -> falseStart executing backend unmount code in a thread--> client does a read on an existing channelThis sequence could easily cause a segfault because the backend is unmounted while a read is in progress.Secondly, I think we should only block requests when we're actually going to unmount the backend. Otherwise, requests may be blocked for a long time (while waiting for the user to make a decision) or unnecessarily (if force is needed but not specified). In the case of backends that implement try_unmount(), this is easy since all the job handling code is executed in the main thread so it already works by just blocking requests in send_reply. Only when the backend implements unmount() in a thread do need to block requests before calling the method.Createdgvfsjobunmount: Block new requests before calling unmount() on a threadBlock new requests before calling unmount() on a separate thread toprevent a race where new jobs are received and processed while theunmount() is being executed.This is not necessary for try_unmount() because all the job handling isdone on the same thread as the try_unmount() method and requests areblocked when the try_unmount() method completes.Createdmtp: Remove fail-during-unmount workaroundSince jobs should now fail properly when an unmount is in progress,remove the mtp backend-specific implementation.***has been marked as a duplicate of this bug. ***Review of:I think this supersedes.Createdmtp: Remove fail-during-unmount workaroundSince jobs should now fail properly when an unmount is in progress,remove the mtp backend-specific implementation.Createddaemon: Don't abort if jobs != NULL when finalizingDon't abort if there are outstanding jobs when finalizing. This mayhappen if the backend is force unmounted. Use a warning instead.Comment onclient: increase dbus proxy timeout for unmountcommit(In reply to)That's true, my fault (don't know why I've thought open channel is blocking process)...I don't think it is problem while the unmount dialog is system model (at least for nautilus). It's better to block jobs as soon as possible to avoid concurrent run in case of force unmount.But this could be problem for some applications probably (allowing channel requests isn't enough probably).Review of:Hmm, it is probably the best, what we can do if we can't block new jobs before g_vfs_backend_unmount_with_operation, but I'm afraid this doesn't solve the second problem I've mentioned in the...Review of:Would be good to make a comment that this could happen in a case of force unmount, otherwise looks good.Review of:Looks good to me, however it should be committed after the problems from thewill be fixed.(In reply to)It does solve the problem because the check for blocking processes is always done before the unmount() method is called, and it is always done on the daemon's main thread, the thread that accepts new jobs. So there is no way that a concurrent race could happen because it is all done in a single thread.The only way that a new job could be processed during an unmount is when the unmount() method is executed in a thread pool. This patch fixes that case by blocking new jobs just before running the unmount() method on a thread pool.Even if this happens via complete_unmount_with_op(), it is still executed on the main thread, and so the same logic applies.You can test this out by putting sleep(10); in a backend's unmount() method or various places in the unmount code (e.g. just after checking for blocking processes in gvfsjobunmount.c). Any concurrent job issued should fail with "Backend currently unmounting".Comment ongvfsjobunmount: Block new requests before calling unmount() on a threadI thought executing new jobs when the unmount dialog is shown, but we can't block it during the time as you wrote before...Createddaemon: add has-blocking-processes property with notify supportOnly running jobs are used to decide there are blocking processes currently, consider open channels as blocking processes also. Add has-blocking-processes property to be possible track changes by notify signals.Createdgvfsjobunmount: wait for blocking jobsBackend may crash if unmount is executed and there are running another jobs. Wait some time to finish jobs before unmount if force close is executed to avoid potentional crashes.Those patches are draft for fixing the first issue from the. It is just partial fix, because I am afraid we can fix it fully in case of force unmount. It has to be more tested. I have foundduring the testing already, so I have filed new bug report, because there is a quite a lot of patches and comments. What are you thinking about?Actually I have another idea how to fix it. We can just call g_vfs_job_succeeded() without calling unmount operation of the backend. Something like g_vfs_backend_force_unmount(). But I'm afraid it could cause another failures if the device isn't unmounted properly (especially for mtp, ptp etc.).Review of:If all jobs are blocking, should not g_vfs_daemon_get_blocking_processes() return the pids of those too?Also, is this right for the case where one daemon process handles multiple backends? Don't we need to pass the backend we're unmounting to has_blocking_processes().Review of:I wonder if we should not in some sense treat open fds channels differently than executing jobs.Yes, they are a source of possible incomming jobs, however we can easily and safely block that,and we can completely safely terminate the channels in the force-unmount case (by just closingthe fd if nothing else). That is not the case for outstanding i/o operations, we can'treally safely terminate those but instead have to wait a bit and if nothing happens we force terminatethe process, hoping things are "ok".::: daemon/gvfsdaemon.c@@ +422,3 @@+ daemon->blocking_sources_count--;+ if (daemon->blocking_sources_count == 0)+ g_object_notify (G_OBJECT (daemon), "has-blocking-processes");Its pretty risky to do callouts like this with the lock held.It can very easily lead to deadlocks.Review of:::: daemon/gvfsbackend.c@@ +59,3 @@ #include <gvfsdbus.h> +#define WAIT_FOR_PROCESSES_TIMEOUT_IN_SECONDS 15This seems a bit long for a *forced* unmount.I'd say 5 seconds or so at the most.@@ +1096,3 @@+ data->user_data = user_data;++ if (g_vfs_daemon_has_blocking_processes (daemon))I don't think this is quite right.If we're actively in a force-unmount there is no need to wait for open channels to be closed. We can safely close those.We should only wait for open i/o ops.Review of:Also, we should probably send an error to the client for all outstanding operations, and then when we get the real operation result we just ignore that.Review of:::: daemon/gvfsbackend.c@@ +1096,3 @@+ data->user_data = user_data;++ if (g_vfs_daemon_has_blocking_processes (daemon))Especially considering the fact that there is a high probability that an open file will not be closed immediately, so just waiting will not get you anywhere.(In reply to)Definitely it would be better, we have to extend d-bus api for it. Filed separate bug for it,.This isn't right if it is possible. When this could happen?Comment ondaemon: Don't abort if jobs != NULL when finalizingPushed to master as 9f2651129d86c4d926e7e186813922d2ed5d2e23 (with a comment). Thanks for the review.(In reply to)This happens with http backends. A single process handles all the http backends.From the developer docs:"When talking about backends, let's see how objects are organized. A daemon instance represents the process itself. Daemon can handle one or more mounts (this is actually determined by the master gvfs daemon, the backend daemon infrastructure is generally always able to handle multiple mounts) and maintains list of job sources. Default job source is created for every single mount (GVfsBackend instance), additional job sources are created for each opened file (both for reading and writing, GVfsChannel). Job source (GVfsJobSource) is an interface implemented by GVfsBackend and GVfsChannel."Comment ongvfs-mount: allow specifying G_MOUNT_UNMOUNT_FORCEcommitComment ongvfsjobunmount: set error as per client interactioncommitIn this case it is wrong, so I've filed separate.Comment ongvfsjobunmount: Block new requests before calling unmount() on a threadPushed to master as 5904c6d9614b48311217faac66b4e2f57174ba9d. Thanks for the review!Comment onmtp: Remove fail-during-unmount workaroundPushed to master as 0dedf40fec26e793692d8e4d2911a157ba7203a4. Thanks for the review!Createddaemon: add blocking-processes-count property with notify support- added blocking_processes_count property (However usage of word JOBS instead of PROCESSES would be more accurately, because one process could handle multiple jobs. But I let this this name to correspond with g_vfs_daemon_*_blocking_processes functions.)- notify isn't sent under the lock- it counts only jobs (not channels)Createdgvfsjobunmount: wait for blocking jobs- timeout decreased to 5 seconds- we don't wait for closing the channels (there are force closed on send_replay)Createdgvfsjobunmount: send error for unfinished jobs before unmountReview of:Have found some issues by tests, so marking as needs-work before uploading fixed version...Createdgvfsjobunmount: wait for blocking jobsFixed and rebased version to master to wait before unmount...However I've just realized (because I tested it before with localtest) that smb and lot of other backends has set MAX_JOB_THREADS=1. So there isn't possible the case 1 from the(multiple jobs are running concurrently) and unmount job is executed after previous jobs are finished. So for most of backends should be crashing fixed by theand the patch for waiting before unmount doesn't make sense a lot. But probably this could be still issue for the rest of backends e.g. afc, afp, and backends using try_ methods, since we haven't already bug reports for them...Comment ongvfsjobunmount: send error for unfinished jobs before unmountSending error for unfinished jobs isn't pretty good idea since there is only one thread in most cases and we are waiting for finishing previous jobs...(also this version of the patch causes deadlock)Comment ongvfsjobunmount: Block new requests before calling unmount() on a threadWould be good to backport this patch for gnome-3-14 also...Comment ongvfsjobunmount: Block new requests before calling unmount() on a threadpushed for gnome-3-14 as commit	74.0	id=657473	19	False	False	bugzilla	1
id=778219	REOPENED	glibmm	documentation	2.50.x	Other All	Normal normal	gtkmm-forge	2017-02-06 00:08 UTC by	Daniel Boles	2017-02-23 11:29 UTC (	2 users	Created[PATCH 1/3] Glib::Variant—Cosmetically tweak braces & newlines[PATCH 1/3]	Created[PATCH 2/3] Glib::Variant—Improve documentation of get_maybe()Created[PATCH 3/3] Glib::Variant—Explain how to create “maybe” typesHopefully I'm not the only person who would ever get confused by this...All three patches look fine. I just find the first (cosmetic) one somewhatunnecessary, but if you think it's worth doing, it's fine for me.Just one comment: When a patch has been discussed in a bug, it's fine to havethe bug number in the commit message. Not that important in these simplepatches, but generally it's nice to be able to easily find more informationabout a commit, if there is any.These patches won't change ABI or API. You can push them to both the masterbranch and the glibmm-2-50 branch, if you like.Thanks as always for the reviews! Pushed to both.Also, good point about the URL: I normally keep the first post patch-free specifically so that I can get the URL before doing git format-patch, but I didn't do that this time for some reason. I fixed that before pushing.Created[PATCH 1/2] Variant: Add another usage hint for maybe Variantsget_n_children() can be used to check if the current value is nothing.Created[PATCH 2/2] Variant: Copy maybe docs to Variant< Variant<T> >The paragraph from Variant<VariantBase> is equally applicable here.Hm, maybe not. I expected that an alternative way to check/get the child of a maybe-typed Variant, e.g. Variant< Variant<int> > was * do get_n_children() * and if the result is 1, do Variant< Variant<T> >::get()i.e. I expected that the more specific Variant< Variant<T> > would let us get() the Variant<T> from it, after checking it's not nothing.But I get a bunch of type warnings doing that.So until I'm confident that I've figured out what Variant< Variant<T> > is useful for, and whether that includes maybe types, I'd leave these commits out. Currently, it looks like Variant<VariantBase> already has the useful stuff for dealing with maybe types (once you figure out how that's done) and Variant< Variant<T> > does not offer anything more there. But I'm probably wrong...(In reply to Daniel Boles from)You can instead follow get_n_children() by get_child(), if the former returned 1, since get_child() unlike get() is not type-checked. But this returns a VariantBase, so it's no closer to the goal of getting a Variant<int> or whatever without having to cast ourselves.Doing get_maybe(VariantBase&) is actually preferable here in that it achieves the same thing in less code, while also letting the target really be a more derived type. What I do is to declare a Variant<int>, try get_maybe() with that passed in, and if it returns true, directly do get() on the Variant<int> to get the int.Have you seen? It's also about "maybe" types in Glib::Variant.Review of:If we really want to change this then we should make the change in our clang-format file:Otherwise, I'd prefer to avoid these minor changes.Thanks.	10.0	id=769457	8	False	False	chris.good	1
id=657473	REOPENED	gnome-control-center	Date and Time	git master	Other Linux	Normal normal	Control-Center Maintainers	2011-08-26 20:20 UTC by	Bastien Nocera	2013-08-24 19:51 UTC (	11 users	+++ This bug was initially created as a clone of+++The switched we had beforewas causing problems because for many locales, there's no "opposite" to 24h time display:When the opposite of 24h can be effectively displayed, we can use a GtkSwitch again:	I agree. for ex. I live in France, my City is set to Paris: we use 24h format, no reason to user-define time format.If my timezone city was set to London, there is no reason to change a default format from AM/PM.(In reply to)People can live in different countries from where they were born you know.you mean.. like me?I've already switched my timezone, even if I didn't need to switch hour format accordingly - not thanks to an automatically geolocation service. Turning AM/PM//24H switch into "Use geolocaiton" ON/OFF would be much more valuable, isn't it?Here in France teatime is not at 5PM, but at 17. Actually it's apero time. :o)(In reply to)>Sorry, I assumed wrong :)Date and time formats are a localisation preference and should be kept.I hate the AM/PM format and live in England where that's mostly used (but not exclusively).<rant>The 24 hour clock is obviously superior.</rant> :)Createddatetime: Do not offer the 12 hr clock in locales without AM/PMShould we sanity check the GSettings key for cases where it has been set to the 12 hr clock in non-12 hr locales?(In reply to)That's not what this bug is about. There are locales where AM/PM isn't used but people would still want 12h time. The bug will stay open until we can get a switch that can show the opposite values, as per mockup.(In reply to)I misunderstood that this is related to:While it might be technically correct to show each of the possible settings in this case, I'm not convinced that it's that big of a deal. Using a switch with an appropriate label should give a user the context that they need, and it's easy to experiment with the setting to see what it does. (Also, using the locale to determine the default should get us most of the way towards a good solution anyway.)The mockups for the Date & Time redesign use a switch:That should be OK, so I'm closing this as not a bug.That said, if there is a strong feeling that a switch isn't OK, we could use a combobox instead - just reopen the bug in that case, or make comments.Either way, I don't think that we need to wait for improvements to the switch widget for this.I didn't like the switch then, didn't like the switch now. There's no "opposite" to 24-hour format, so using a switch for that is wrong. I think we should something like the "switch with icons":24h [O=] 12hBastien's idea is along the same lines as my- great minds think alike? ;) I'm not entirely sure whether that's considered a GTK bug or the theme's responsibility.Looking at the new designs, a switch with labels on either side won't work in terms of layout. A combobox would:+-----------------------------------------+| || +-------------+ || Time Format | AM / PM V | || +-------------+ || |+-----------------------------------------+I can update the mockups to use this.A combobox with 2 items? At this rate, we might just as well keep the radio buttons :)Now that the date & time panel redesign landed last week, we've switched to using a combobox for choosing between 12h and 24h formats.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Reopening, the combo boxes aren't liked either :)The blocker bugs show what kind of widgets we'd use instead.	14.0	id=778219	14	False	False	dboles	1
id=385260	REOPENED	at-spi	registry	unspecified	Other All	Normal normal	At-spi maintainer(s)	2006-12-12 23:53 UTC by	Samuel Thibault	2014-11-16 23:31 UTC (	3 users	Is there a reason for keysym_mod_mask() not to try Mod4Mask, Mod5Mask and Mod5Mask | ShiftMask?At least french keyboards need Mod5Mask and Mod5Mask | ShiftMask for typing some characters like @, À.	[Resetting QA Contact to newly introduced "". Reason: So far it was impossible to watch changes in at-spi bug reports without following all the specific persons (Li Yuan, Bill Haneman, Jeff Wai, ...) and also their activity outside of at-spi reports.IMPORTANT: Anyone interested in following all bug activity (including all maintainers) must watch the "" dummy user by adding it to the 'Users to watch' list under Preferences->Email preferences. This is also the default procedure nowadays in GNOME when setting up new products.][Mass-resetting default assignee, see. Please reclaim this bug report by setting the assignee to yourself if you still plan to work on this. Thanks!]I'm going to go ahead and close this because it concerns a very old version.Feel free to open a new bug if the problem persists.Reading the keysym_mod_mask functions shows that the bug is still there.(In reply to)Thanks for the update.	5.0	id=757196	8	False	False	jckeerthan	1
id=757196	REOPENED	glib	general	2.45.x	Other Linux	Normal normal		2015-10-27 15:52 UTC by		2015-11-04 12:28 UTC (	3 users	CreatedbacktraceSynopsys design compiler (proprietary software) segfaults when current versions of glib2 are installed. The last known working glib2 version is 2.44.1I've attached the backtrace of the coredump.	You should open a bug against the compiler, since we cannot test it and we're definitely not segfaulting in the compilers we can (and, indeed, do) test.The program I mentioned is not a C compiler, it is an EDA program. I installed glib2 from my distro's(Archlinux) repositories.already fixed in master and will be in 2.46.2*** This bug has been marked as a duplicate of***It looks like the Archlinux package already has the fix mentioned in the other bug. However, Synopsys DC still segfaults. I face this problem even with glib-git.Still broken with glib2-git-2.47.1.15.g236e804	5.0	id=385260	12	False	False	haiplu+gnome	1
id=769457	REOPENED	GnuCash	Documentation	2.6.11	Other All	Normal normal		2016-08-03 07:13 UTC by	David	2016-11-16 08:08 UTC (	5 users	Per discussion on gnucash-user, recommend adding a note to the guide at section 4.3 informing users that a single transaction can appear in an account register more than one time, if the transaction has more than one split assigned to that account. Suggested text:the Transfer column heading disappears, and there is no account name listed in that field. This line shows you only a summary of the transaction’s effect on the current account. For more detailed information, you need to look at the individual splits that make up the transaction./* NEW TEXT HERENote: An account register displays a transaction when that transaction has a split assigned to the account. If a given transaction has more than one split assigned to the account, then that transaction will display in the register one time for each split./* END NEW TEXTThe partial lines below the transaction line are the split lines, and they are separated by gray lines.	Hi David,Thanks for raising this and providing suggested text.I intend to do this documentation update shortly.I'll do some screendumps when I get a Linux vm setup with the required theme.Regards, Chris GoodQuestion: How about suggesting, to switch now or later, as advanced user, to the Journal View, which avoids this confusion?...and probably add a comparing screenshot in the other mode.Frank: Those are probably good suggestions. Screenshots sound like a good idea. As for the first part, how about changing the note text to the following:Note: An account register displays a transaction when that transaction has a split assigned to the account. If a given transaction has more than one split assigned to a single account, then in Basic and Auto-Split view modes that transaction will appear in the register one time for each split assigned to that account. In Transaction Journal mode, such a transaction will only appear once in the register.Nice words thanks David!Thanks for your suggestions also Frank.David T has added text to guide/C/ch_txns.xml incommitted to Gnucash/gnucash-docs maint 16 Sep 2016.Hi David,I still intend to add screendumps. Can you please reopen?	6.0	id=745068	14	False	False	Marc-Antoine	1
id=747146	REOPENED	glib	gio	unspecified	Other Mac OS	Normal normal		2015-03-31 23:16 UTC by	Patrick Griffis (tingping)	2016-12-18 22:38 UTC (	6 users	CreatedImplement GNotification on OSXThis should support nearly everything.	Review of:See the inline comments.::: gio/gcocoanotificationbackend.c@@ +79,3 @@+ else+ {+ g_warning ("This icon type is not handled for Notifications\n");no need for \n@@ +92,3 @@+ if (!g_str_has_prefix (action, "app."))+ {+ g_warning ("Notification action does not have \"app.\" prefix.\n");the same no need for \n@@ +215,3 @@+ /* NOTE: There is no priority */++ NSUserNotification *userNotification = [NSUserNotification new];The declaration should be at the top I guess@@ +223,3 @@+ add_actions_to_notification (userNotification, notification);++ NSUserNotificationCenter *center = [NSUserNotificationCenter defaultUserNotificationCenter];same here::: gio/gnotificationbackend.c@@ +56,3 @@ backend->application = application; + backend->dbus_connection = g_application_get_dbus_connection (application);this change sounds like something that should go in a different patchCreatedImplement GNotification on OSX(In reply to Ignacio Casal Quinteiro (nacho) from)The NULL check on `backend->dbus_connection` is just to silence a critical warning on systems that don't dbus.. I'm not sure who thought it was a good idea to put that in the backend instead of actual implementations that do require dbus.Review of:Hi, just a couple quick comments for now, I still need to figure out how to test it properly...Do you know if there a way to specify in configure.ac that the minimum Mac OS version required is 10.8 with this change?::: gio/gcocoanotificationbackend.c@@ +53,3 @@+ return nil;++ return [[NSString alloc] initWithUTF8String:cstr];It might be better to use [NSString stringWithUTF8String:(const char *)bytes] here (and not call release everywhere else) since the function name doesn't indicate that it's owned by the caller.@@ +70,3 @@+ {+ NSString *str_path = nsstring_from_cstr (path);+ image = [[NSImage alloc] initByReferencingFile:str_path];Same with this. The function name doesn't indicate the caller owns the NSImage, so might be better to autorelease it right here.@@ +217,3 @@+ /* NOTE: There is no priority */++ userNotification = [NSUserNotification new];I think the userNotification created here should be released after it's delivered.@@ +226,3 @@++ center = [NSUserNotificationCenter defaultUserNotificationCenter];+ center.delegate = [[GNotificationCenterDelegate alloc] init];It's better to create only one global GNotificationCenterDelegate instead of creating a new one for each notification sent.Review of:Can you tell me how you tested your code? I can't seem to get the gio/tests/gnotification test to deliver any NSUserNotifications.Also, I run into an abort due to the g_warning() in nsimage_from_gicon function. I had to comment it out to continue testing.Also, the Mac OS version required I guess is 10.9 because of the usage of the identifier property of NSUserNotification.::: gio/gcocoanotificationbackend.c@@ +131,3 @@++static gboolean+g_cocoa_notification_backend_is_supported (void)Also, is there a reason we check for a bundle identifier here? Why can't we just return TRUE?(In reply to William Hua from)>It was on my todo list, will look into it.Ok.Well it has to be in a bundle. Here was my very simple hack of a bundle (it doesn't actually bundle any libs so depends onrunning inside of jhbuild, you can even just call ./main directly as long as the bundle layout is intact).>Well it won't work without a bundle but there is no harm in it saying its always supported, it just wont do anything.Ok, thanks, I didn't know that. I ended up using this swizzle patch to get the notifications working:(but the gio/tests/gnotification test is still failing even though it delivers notifications properly now).Ok, please keep checking for the bundle identifier then, it looks good as is.Actually, these two comments I made, please disregard. I don't know if autoreleasing is a good idea any more because I'm not sure if we will get an autorelease pool in general.(In reply to William Hua from)I admit I don't know a ton about obj-c, but I attempted to use an autorelease pool previously and it did not appear to work, where as I am certain manual releases do work.CreatedRequire OSX 10.9CreatedImplement GNotification on OSXDone.Done.Can't reproduce, it warns and works as expected here.(In reply to tingping from)Hi, sorry I don't see those changes in this attachment, can you please try uploading it again?Also, I was thinking, sorry about this, maybe it's better to leave the required version at 10.7, and conditionally compile the notification backend if the version is at least 10.9? What do you think?CreatedImplement GNotification on OSXOops.My understanding is the current state of OSX support is "Some users are stuck on 10.6 so lets try to support that" but the reality is there are almost no developers on OSX even remotely testing that. I have a handful of commits to improve GLib on OSX and I certainly am not able to test 10.6. I think the goal of pushing the required version to 10.8 (which is already unsupported by Apple afaik) or even 10.9 entirely is actually good for this project as it allows for reasonable improvements just as they are dropping support for XP now.That all said since this is a fairly self contained patch it would not be hard to support everything we currently do if thats what glib wants.Review of:This works.Review of:Sorry I couldn't get around to this till now. But this looks good now, thanks!I actually think the OSX version check is not sufficient since you can target older releases and we aren't checking that.What do you mean? The identifier of NSUserNotification is only available since Mac OS 10.9.(In reply to William Hua from)You can build with things like -mmacosx-version-min=10.6 or target a specific SDK directory even if you are building on 10.10. When I get a chance I'll prob just have it try to build a snippet of code as the test. I also think I will make the identifier field optional to keep 10.8.Just to clarify, you want to keep the minimum version of Mac OS for building as 10.9 and the minimum version for running as 10.8 with a runtime check then? That sounds good, I think your configure.ac patch is still ok as is.pushed as- Implement GNotification on OSXI'm a manager of the MacPorts package management system and the maintainer of our glib2 ports. MacPorts currently runs on Mac OS X 10.4 and later, and glib2 compiles fine on 10.4. Changing the minimum build version to 10.9 will mean that I probably will not want to update glib2 to any newer versions, for several years, until 10.8 and earlier are no longer used. I would ask you to restore support for building on 10.4 and later.(In reply to Ryan Schmidt from)Commenting on a closed bug won't bring this matter to the attention of the maintainers. I strongly encourage you to send an email toinstead, and at least discuss this on the public mailing list.The fact that GLib compiled fine on a 10 years old, unsupported version of MacOS does not imply that it will continue to do so forever. GLib is not a dead project: new functionality is added in every cycle, and that functionality has minimum requirements. We can implement fall back paths, and try to paper over differences in implementation, but that does not mean that we don't have minimum requirements — especially when it comes to platform support.User base of MacOS as of January 2015:We could probably lower the build requirement to 10.8, which is used by 8% of the user base (with 10.9 used by 28%, and 10.10 used by 45% of the user base). That would bring us to cover 80% of the installed user base. Considering that less than 2% is using versions prior to 10.6, I think the requirement to support 10.4 is not really feasible, both in terms of resources spent and results.On one hand I understand the issue of supporting an unsupported operating system on an unsupported architecture like PPC — after all the people that bought a Mac 10 years ago couldn't possibly know what would happen; on the other hand, though, I don't think GLib is targeting the retro-computing scene, and considering that GLib is still getting new API, new features, and new requirements, it gets more and more infeasible to extend the support backwards.Sure: GLib may *build* on MacOS 10.4, but how does it run? What portion of the API is even exercised by applications using it?In this specific case: we could detect at configure-time that the version of MacOS is too old and simply disable the GNotification backend; after all, it's a backend; the points I raised still remain, and I'm sure we'll have this discussion once again down the line, once we add a new feature in GLib that maps to MacOS API. That's why I'd rather have this discussion on gtk-devel-list than on Bugzilla.The configure check looks at the version of OSX on which it's running, which isn't what's important. What's important is the SDK in use. I routinely build with the 10.5 SDK on a Mac running the latest release. That passes the configure check but fails the build because the 10.5 SDK lacks the NSUserNotification protocol.(In reply to John Ralls from)Yea we discussed that on IRC but a patch was never made. If you had the time to make one that would be great, I don't really have the setup or knowledge for it atm.Just for reference, the discussion on gtk-devel-list starts here:(In reply to Emmanuele Bassi (:ebassi) from)Bit late for that thread but I also implemented a growl backend a while ago:I just don't think that should be maintained in glib, it is very specific to a subset of outdated osx users.CreatedFix the configure check so that it looks for what we're actually building.CreatedBypass building gcocoanotification if the OS X version is < 10.9.Either of the two patches I've just attached resolves the problem I identified in. I prefer the second one because it restores the ability to use GLib on older versions of OS X, albeit without notification support. Please let's decide quickly so that the change can make it into 2.46.Sorry, s/2.46/2.48/CreatedBypass building gcocoanotification if the OS X version is < 10.9.Replaced the second patch after discovering that I'd neglected to remove references to g_cocoa_notification_backend_get_type().CreatedBypass building gcocoanotification if mac_os_x_min_version_required < 10.9Update the bypass patch to fix an error noted in.CreatedBypass building gcocoanotification if mac_os_x_min_version_required < 10.9Sigh. Got the inequality backwards.	33.0	id=747146	24	False	False	tingping	1
id=698726	REOPENED	evolution-data-server	general	3.10.x (obsolete)	Other Linux	Normal normal	Evolution Shell Maintainers Team	2013-04-24 12:00 UTC by	Xavier Claessens	2013-10-04 17:33 UTC (	6 users	When goa-daemon crash, EDS removes my google addressbook, and when it is restarted EDS creates a new google addressbook. That means that the ESource's UID is not persistent.Paragraph 4 of GDBusObjectManagerClient's doc[1] says how to distinguish between account removed, and service leaving.I'm not sure if this should be fixed in GOA or in EDS's GOA backend. I don't know how both work together.[1]	EDS just responds to "account-added" and "account-removed" signals from GoaClient, so my guess is it needs to be fixed in GoaClient.ESourceRegistry in EDS suffers a similar problem: it unconditionally emits "source-added" and "source-removed" signals in response to "object-added" and "object-removed" signals from its GDBusObjectManagerClient without checking the "name-owner" property. Until today I wasn't even aware we were supposed to.Quoting from:"Applications must not destroy data if an account object is removed (e.g. when the "account-removed" signal is emitted) - for example, if the goa-daemon program crashes or is restarted on software upgrade, account objects will be removed only to be added back the next time goa-daemon is started."That paragraph was written by davidz, who also wrote GDBus, so I will let him respond here.I did not read the code, so I'm not 100% sure, but GDBusObjectManagerClient gives an hint to distinguish between account-removed and service-exit (see link above), but GoaClient does not give that hint the apps. Is that correct?s/hint the apps/hint to apps/The tricky part is GOA exposes the raw GDBusObjects generated by GDBusObjectManagerClient (as GoaObjects), and so it does need to swap out one set of GDBusObjects for another when the goa-daemon restarts, but somehow manage the signal emissions so that applications don't blow away their own GOA-linked accounts in the process.This is a total brainstorm, and probably a bad idea, but the only thing I can think of at the moment is when the goa-daemon restarts, pair the old and new GoaObjects with identical account IDs into a new "account-swapped" signal, which would replace separate "account-added" and "account-removed" signal emissions for those equivalent objects. Then you'd be left with the old GoaObjects which were legitimately removed and the new GoaObjects which were legitimately added.To clarify -- the "account-swapped" signal would have a signature of: void (*account_swapped) (GoaClient *client, GoaObject *old_object, GoaObject *new_object)The objects would be different incarnations of the same "online account" (in particular, same account ID) -- one from the previous goa-daemon session, one from the newly started session.This would allow applications to update their own data structures without doing anything destructive to their accounts -- like update a hash table entry to replace old_object with new_object.I don't think it's a good idea to add a new signal. Instead, I think we should just rework the docs to say that GOA applications need to be extraordinarily careful before acting on the ::account-removed signal and then include an example app that does this. For example, like this (untested) static void on_account_removed (GoaClient *client, GoaObject *object, gpointer user_data) { GDBusObjectManagerClient *object_manager; gchar *name_owner; /* Never delete account data in response to GOA daemon restarts / crashes */ object_manager = G_DBUS_OBJECT_MANAGER_CLIENT (goa_client_get_object_manager(client))); name_owner = g_dbus_object_manager_client_get_name_owner (object_manager); if (name_owner != NULL) { delete_account_data(..) } g_free (name_owner); }Of course, this is untested, but it should work...The thing is the slew of "account-removed" signals will be followed by a slew of "account-added" signals when the goa-daemon restarts, so GOA applications will have to distinguish not only between "account-removed" and "account-removed-but-not-really" events, but also between "account-added" and "account-added-but-not-really" events so as not to end up with a bunch of duplicate accounts.I think it's a bad idea to give the signals double meanings like this.Downstream bug report with evolution-data-server 3.8:(In reply to)No, there's no double meaning here. The point of the accounts-added and accounts-removed signals are _only_ to inform applications that the local cache of objects has changed. Which enables the application to update its own databases, e.g. models for list views, configuration data on the side etc. etc.So I think your interpretation of accounts-added/accounts-removed is wrong - you think it's about the user adding/removing the account manually while it's really just a way to inform that the local object cache has changed. That's why GOA is careful to state the tip that Debarshi posted in.It's fairly simple, though, for your application to figure out when a user adds/remove an account -is one way... but there are many other (and better) ways to do this. For example, your application could just quit if goa-daemon crashes (and refuse to start if it can't be activated, e.g. no name owner). That's definitely the easiest solution and, I'd argue, it's also the right solution as goa-daemon is never restarted. It's annoying when working on goa-daemon though.. and since it's not a lot of extra work to make your code DTRT across goa-daemon restarts, I would suggest just doing it.That's exactly the same semantics as GDBusObjectManager, so it leaves me wondering what's the point of GoaClient?I had assumed GoaClient was there to shield applications from these kinds of implementation details within GOA, but it seems to be just an extremely thin wrapper for GDBusObjectManager, offering little benefit over just listening to GDBusObjectManager signals directly.I still think it's pushing too much work on to applications, but I'll comply anyway.(In reply to)Well, the point of GoaClient was to add more stuff to it, client-side utility stuff that applications typically use [1]. Maybe it would make sense to add a ::account-deleted signal that fires exactly when the conditions inare true? Maybe also a ::account-created that is similar?[1] : For comparison, this is what udisks is doing, see e.g.where there's a bunch of useful utilities that udisks applications (mostly Disks and gvfs) are using to make their life simpler.I ended up just writing my own GDBusObjectManager wrapper as a replacement for GoaClient. Mine implements, and reserves its "account-added" and "account-removed" signals to follow the more intuitive definition.Closing this as FIXED since it was filed specifically for EDS's behavior, but really all GOA-integrated apps need to watch out for this.Fixed for E-D-S 3.9.1 and 3.8.2:Note that we probably need similar fix in the MissionControl plugin, it would be sad to duplicate that wrapper code...I also think the wrapper has an issue in this case:1) goa-daemon crash2) eds restarts3) goa-daemon startsBecause in step 2 EDS lose its orphans table and in step 3 you get the accounts-added signal and duplicate the accounts. I rekon those steps are unlikely.I really think GoaClient/GoaAccount are wrong, the account lifecycle should not be bound to the dbus object lifecycle. Also exposing generated code in public API seems to be a bad idea to me. I would really advise to make wrapper objects that hide the dbus proxies internally. And service restart should be totally transparent to API users. account-swapper signal is really just an awful hack, IMHO.Reportedfor the MC plugin (code is in empathy source tree).(In reply to)Actually I think we're okay, because step 2 should activate the goa-daemon and we'll just match GOA account IDs to EDS accounts as normal. EDS won't destroy its own accounts during that sequence.But it got me thinking -- if step 2 fails to activate the goa-daemon then EGoaClient instantiation will fail. And if the goa-daemon starts up sometime later, EDS won't see it (because we only try to create an EGoaClient once) and EDS will be disconnected from GOA until EDS is restarted again.Perhaps a further improvement is to have EGoaClient *not* be GInitable, and instead create its GDBusObjectManager from a "bus name appeared" callback. That way, even if the online accounts service is not available immediately, EGoaClient will automatically "come online", so to speak, if and when the bus name does appear.So that's another thing GoaClient could be doing for applications to make life easier, instead of forcing applications to watch the bus name themselves.(In reply to)I think that's pretty short-sighted and likely to cause problems in the future, or at least maintenance-burden when someone who is not you is trying to fix your code. Yes, the D-Bus API is intended to be public but, really, you are supposed to use the C library. It's a bit anti-social.(In reply to)I decided GoaClient is too trivial to argue over, but I deliberately wrote my own wrapper class such that the improvements could easily be merged back into GoaClient if Rishi chooses to. Consider it a fork of that class.Except that it doesn't actually work.I can get evolution-data-server to crash by running:/usr/libexec/goa-daemon --replaceon a GNOME 3.10/Fedora 20 machine.gvfs-goa and telepathy-mission-control also crashes under similar circumstances.	19.0	id=671503	20	False	False	afranke	1
id=671503	REOPENED	epiphany	Bookmarks	git master	Other Linux	Normal normal	Epiphany Maintainers	2012-03-06 22:12 UTC by	Xan Lopez	2017-01-26 03:24 UTC (	6 users	Right now we just use a very simple 'most visited' sorting.See:	***has been marked as a duplicate of this bug. ***Hi, the bookmarks code has been rewritten from scratch. When you have a convenient opportunity to test the new version of the code (which will be present in Epiphany 3.23.1) please check to see if your issue is still a problem, and reply here. Thanks!Hi, this is a mass close of all bugs in the NEEDINFO state. If you think this bug was closed improperly, just leave a comment, thanks!Closed in error (I believe).Bug has potential fix, just requires testing using 3.23.1 which won't be released for a couple of weeks yet.(In reply to erusan from)Really? I dunno if there were any changes to the sorting.We used to have ephy-frecency-store, a couple years ago, but it doesn't exist anymore.Perhaps I'm not understanding. You posted a comment Sept 28 2016:(In reply to erusan from)Ah, that was a mass bug update, I posted it in every bookmarks bug. :)By the way, there is a FIXME for this in ephy-location-completion.c, so it should be clear where the code to modify is.Is this bug still existing ?I could not find any ephy-location-completion.c file.(In reply to cedlemo from)Yeah!It would help if I got the filename right! It is src/ephy-completion-model.c. (The -model suffix means it's the M in MVC.) The FIXME is here:static intget_relevance (const char *location, int visit_count, gboolean is_bookmark){ /* FIXME: use frecency. */ int relevance = 0; /* We have three ordered groups: history's base addresses, bookmarks, deep history addresses. */ if (is_bookmark) relevance = 1 << 5; else { visit_count = MIN (visit_count, (1 << 5) - 1); if (is_base_address (location)) relevance = visit_count << 10; else relevance = visit_count; } return relevance;}frecency is just a smarter algorithm for ordering the results (see the first comment) instead of always putting bookmarks on top. Note: visit type is saved in the history service.Createdimplement ephy_search_service_find_visitsThis is the first step before implementing the "frecency" method.This function will allow to get the visit type for an url.I will just have to modify the definition of add_to_potential_rows (ephy-completion-model.c:358).add_to_potential_rows function is used in the function query_completed_cb (ephy-completion-model.c:404)l.432 ------------------------------------ if (!ephy_bookmark_is_smart (bookmark) && should_add_bookmark_to_model (model, user_data->search_string, title, url)) { list = add_to_potential_rows (list, title, url, NULL, 0, TRUE, FALSE); } } /* History */ page_visits = (GList *)result_data; for (p = page_visits; p != NULL; p = p->next) { EphyHistoryPageVisit *page_visit = (EphyHistoryPageVisit *)p->data; EphyHistoryURL *url = page_visit->url; list = add_to_potential_rows (list, url->title, url->url, NULL, url->visit_count, FALSE, TRUE); }l.446 ------------------------------------After that I will be able (I guess) to modify the function get_relevance in order to compute the frecency.Review of:OK, looks good, just a couple of nits. Looking forward to part two. :)::: lib/history/ephy-history-service.c@@ +1339,3 @@+void+ephy_history_service_find_visits (EphyHistoryService *self,+ gint64 from, gint64 to,OK, I see that this file does not follow GNOME style for parameter declarations. So it's fine here, but something we can change in the future....@@ +1362,3 @@++ ephy_history_service_query_visits (self,+ query, cancellable,Looks like the whitespace is messed up here. The s in self should be aligned with the q in query and the c in callback.::: src/ephy-completion-model.c@@ +408,3 @@ { EphyCompletionModel *model = user_data->model;+ GList *p, *page_visits;Same feedback as in the other bug: declare this on two lines, please.@@ +583,1 @@ 0, 0,Be sure to realign the parameters here as well, since _find_visits is longer than _find_urls.Createdimplements ephy_history_service_find_visitsSo for you it looks like a reasonable approach for the problem, great!declarations. So it's fine here, but something we can change in the futureMaybe add it as a bug, it could be good for me to format this file in order to learn the GNOME style.Review of:Forgot about this! It looks good, I would just add some justification to the commit message regarding why the new function is needed (to get the visit type).Could we agree on an algorithm for Epiphany ? The EphyHistoryPageVisitType values come from Chromium and the algorithm I have to adapt comes from Mozilla.Frequency calculation process :bonus for type : EPHY_PAGE_VISIT_LINK, --> 120 EPHY_PAGE_VISIT_BOOKMARK, --> 140 EPHY_PAGE_VISIT_TYPED, --> 200 EPHY_PAGE_VISIT_NONE, --> 0 EPHY_PAGE_VISIT_MANUAL_SUBFRAME,--> 0 EPHY_PAGE_VISIT_AUTO_SUBFRAME, --> 0 EPHY_PAGE_VISIT_STARTUP, --> 0 EPHY_PAGE_VISIT_FORM_SUBMISSION,--> 0 EPHY_PAGE_VISIT_FORM_RELOAD, --> 0 EPHY_PAGE_VISIT_HOMEPAGE --> 0weight based on how recent the url have been visited 0 < r <= 4 days --> 100 4 < r <= 14 days --> 70 14 < r <= 31 days --> 50 31 < r <= 90 days --> 30 r > 90 days --> 10points (for each visit) = (bonus / 100) * weightAfter that, the frecency will be calculed like this :for an url, get all the visit count : full_countIt seems that we need to specify a parameter : the sample size (10 max for example) The sample is the 10 most recent visit for an url. For each element in the sample, an url we compute the pointsThen the frecency will be : full_count *((somme of points for the sample)/sample size)Sounds good to me, at least for now. We can always tweak it later. I might want to weight bookmarks more than Firefox does, for instance, but let's see how well this works first.Note: some of those EphyHistoryPageVisitType values are completely unused, but we can't remove them without breaking the history database. :/	16.0	id=760056	9	False	False	llandwerlin	1
id=760056	REOPENED	gobject-introspection	general	unspecified	Other All	Normal normal	gobject-introspection Maintainer(s)	2016-01-01 23:35 UTC by	Lionel Landwerlin	2017-01-23 19:50 UTC (	2 users	This is to provide a test case for a gjs crash.	Createdtests: Add a hidden fundamental classWe could have a fundamental type A derived by a subclass B. Class A happensto be introspected, but B isn't. This can cause some issues in Gjs.Review of:I forgot to comment on this one! In any case, I've had it in my tree for a while, and we landed the GJS patch, so let's land this one.Review of:Pushed to master.This broke pygobject and anything that uses regress.c with compiler warnings enabled, because the get_type() function does not have a prototype — seeWhat's the purpose of this test? Is the fundamental sub-type public? Should the get_type() function be visible?The fundamental sub-type is not meant to be public, it's an analogy of ClutterRootNode or ClutterDummyNode according to Lionel's description in.	5.0	id=748982	11	False	False	jimmac	1
id=748982	REOPENED	adwaita-icon-theme	general	unspecified	Other Linux	Normal normal	adwaita-icon-theme maintainer(s)	2015-05-05 23:08 UTC by	Matthias Clasen	2016-08-17 00:23 UTC (	2 users	The css3 spec has a reasonable set of defined cursors.SeeorHere's a list of the gaps we have, compared to that list:vertical-text (flipped ibeam)move (arrow-tipped crosshair)all-scroll (similar)zoom-in zoom-outgrab (open hand)	I think 'hand1' in the existing theme is what 'grab' is supposed to be.Createdadd missing cursor equivalents to the CSS3 specCreatedadd missing cursor equivalents to the CSS3 specCreatedprovide grab cursor, unbreak symlink override of hand1Createdall-scroll cursorCreatedadd missing cursor equivalents to the CSS3 spec- zoom in, zoom out, move (rename move to pointer-move)- fix broken symlink override for hand1- provide grab cursor- all-scroll- vertical-textpushed as- add missing cursor equivalents to the CSS3 specI forgot one: context-menuAnd, btw: I added a cursors demo in gtk3-demo that shows the css cursors.(In reply to Jakub Steiner from)It seems like the grab cursor became the same as the pointer cursor with this push.See here:It seems like hand1 and hand2 are the same icon actually: /opt/gnome/share/icons/Adwaita/cursors $ sha256sum hand* fe607bdeb7f98b37bd0fa992280b709d0988c9323594fd153554e855f6fd3806 hand fe607bdeb7f98b37bd0fa992280b709d0988c9323594fd153554e855f6fd3806 hand1 fe607bdeb7f98b37bd0fa992280b709d0988c9323594fd153554e855f6fd3806 hand2After digging around a bit more it looks like we're storing the built theme together with its sources inside the same repo and that the theme is simply not in sync with its sources. When I run a jhbuild make it doesn't seem to regenerate the theme either.Look at this: ~/Code/gnome/src/adwaita-icon-theme/Adwaita/cursors (master) $ ls -lah hand* lrwxrwxrwx 1 mattiasb mattiasb 5 16 aug 22.22 hand -> hand2 lrwxrwxrwx 1 mattiasb mattiasb 5 16 aug 22.22 hand1 -> hand2 -rw-rw-r-- 1 mattiasb mattiasb 68K 17 aug 01.36 hand2hand1 should be its own cursor made from hand1.pngI have no idea how to regenerate the theme though but I hope this was helpful. :)If I just wiped the adwaita-icon-theme/Adwaita/cursors/ directory and re-ran make.sh and then did a "jhbuild make" it worked fine and the correct hand1 turned up in the cursor theme.From a git status afterwards it seems like the watch and the copy cursor also is outdated.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	14.0	id=113203	13	False	False	nlevitt	1
id=113203	REOPENED	glib	general	unspecified	Other Linux	Normal normal		2003-05-18 02:45 UTC by	Noah Levitt	2013-07-17 22:49 UTC (	2 users	This function in glist.c isn't used:static GList* g_list_sort2 (GList *list, GCompareFunc compare_func)Let's get rid of it!	See:For an earlier unanswered query about the function.It seems to have been accidentally committed by me on December 2 1998. What the code looks like is a rewrite of the list sort codeto be non-recursive and to reuse existing in-order runsin the code. I'm pretty darn positive that it isn't mycode (too well commented, for one thing), though I can't dig up any reference in the GTK+ mailing lists, Google,or the old archives of GTK+ patches.While it does actually look like it contains good ideasand might be better than the current implementation, Isuppose if reason to get of it, if we don't know wherethe code comes from, that's an excellent reason to get rid of it.So, I think it's OK to go ahead and remove it from glib-2-2and HEAD.* glib/glist.c: Remove unused function g_list_sort2 ().That's my code.g_list_sort has issues.Re-opening...g_list_sort is a textbook implementation of merge sort.Unfortunately, it is a beginner's textbook.g_list_sort properties...* min/avg/worst time: O(n log n).* Stable [does not swap equal elements]* Essentially in-place [extra space needed independent of n] [Well, it uses O(log n) space, but that's ok.]g_list_sort2 properties...* avg/worst time: O(n log n).* min time: O(n)* Stable.* Not in-place.Linear min time for the near-sorted case is an important property,IMHO, often the difference between scaling and not scaling inpractice.g_list_sort2 was a proof of concept I sent to Owen way back when.It could be better, and in fact it should be. The issue is thatit is not in-place -- in fact this particular version can requirequite a lot of extra memory. There are ways around that.Also it should not only accept increasing runs. Decreasing runsshould be accepted (and inverted, of course). That way no runswould be shorter that two elements, except possibly one at theend.So there. I suggest...1. We resintate g_list_sort2.2. We improve it.3. We have it replace g_list_sort (under that name).Does anyone read this?I believe there's also a bug in the static function g_list_sort_real(). This isa merge sort algorithm which uses divide and conquare. It takes in 'list' andsplits it into 'l1' and 'l2' then it does the recursion: return g_list_sort_merge (g_list_sort_real (list, compare_func, use_data,user_data), g_list_sort_real (l2, compare_func, use_data, user_data), compare_func, use_data, user_data);What? It calls one of the recursion with the original list instead of l1?I believe it should be:return g_list_sort_merge (g_list_sort_real (l1, compare_func, use_data, user_data), g_list_sort_real (l2, compare_func, use_data, user_data), compare_func, use_data, user_data);The sorting could also be further improved by checking size, and then break intoan insertion sort for short lists. We could also consider quicksorting.-Øystein"list" is right there. "l1" is just a one-element list at that point.We cannot use quick sort here as (1) it really requires random-accessto the pivot element, or else it degenerates trivially and (2) it wouldmake the sorting non-stable, i.e., equal elements might be swapped.Yes! Now I see. I also see that we can't use quick sort now.Do you think we might be able to improve things by checking the number ofelements in the list (can be counted in the while-loop) and cut off to aninsertion sort or selection sort for shorter lists?Morten, would you mind attaching a patch of your old work?I don't have that, but a "cvs diff -D... -D..." should hand it to you.Createdg_list_sort2This is the g_list_sort2 function that was removed	10.0	id=685742	15	False	False	chpe	1
id=772916	REOPENED	evolution	Composer	3.22.x	Other Linux	Normal normal	Tomas Popela	2016-10-14 06:50 UTC by	Robert Munteanu	2016-10-21 12:29 UTC (	1 user	Running Evolution 3.22.0 on openSUSE Tumbleweed, Gnome 3.22.0 .I sometimes reply to message snippets instead of using the full text. I have the message preview open, select a part of the text and press Ctrl-R. At this point, even though the message is plain text with no attachments, Evolution asks me to confirm if I want to switch to plain text mode.If I confirm, everything is ok. If I don't, the reply will be composed as HTML.	(In reply to Robert Munteanu from)Actually not, it is a HTML not the plain text (even that it looks like it is plain text). We had a workaround for it Evo < 3.22, but it probably was removed when we were cleaning the code base from various hacks while porting to WebKit2. So basically I can confirm this and I will look whether we could improve the situation without adding another hack into the code base.Actually we are relying on WebKit to give us what is currently selected. And we prefer HTML over text there (as we really don't know what is inside the selection). And even when it is just the text WebKit will return us a string that will contain BR elements as a line separators. We could probably ignore the BR elements, but is it not a general solution as what to do in example with DIVs, SPANs and others that will just contain the text, but won't be styled at all. I don't see a general solution there.Is there no way of knowing from the message being previewed that we should be in a text/plain 'context'?(In reply to Robert Munteanu from)That's true, there is a way how to know that. In the beginning I was thinking about a general solution that could work for plain text inside the HTML content, but I think it is enough to ask for plain text content whether the current message in preview is a plain text one.Fixed with the following commits:- Composer incorrectly warns about switching from HTML to text when a message snippet is selected Don't always try to get the currently selected content as text/html, but if the currently displayed message is a plain text one then get it as text/plain.commitin the master branch for Evolution 3.23.1+commitin the gnome-3-22 for Evolution 3.22.2+Great, thanks a lot for the quick fix!Reopening, regression noticed. I've a selection in the message preview (below the message list) and when I reply (Ctrl+R) the newly opened composer is with the whole message text, not with the selection. I'm not asked for the format change. When I revert this particular patch, then the same steps lead to the question, where I choose "Lose formatting" and the message is filled with the selected text from the preview panel only.	7.0	id=772916	5	False	False	tpopela	1
id=685742	REOPENED	gnome-terminal	general	unspecified	Other Linux	Normal normal	GNOME Terminal Maintainers	2012-10-08 17:57 UTC by	Giovanni Campagna	2015-10-19 14:14 UTC (	4 users	In current git master (future 3.8), the window class of terminals is Gnome-terminal-server, but gnome-shell expects Gnome-terminal to correctly associate desktop files.A simple fix is to call gdk_set_program_class after GTK is initalized (i.e. in GtkApplication->startup). Alternatively, you can call g_set_prgrname before option parsing, but that would affect --help and the default log handler, so it's better to avoid it.	I'd prefer using gdk_set_program_class(). While the g_set_prgname() wouldn't matter for the options (the server is autostarted from dbus and should never be called manually), that would affect e.g. debug output.(It's not quite established yet that master will be 3.8, btw.)Fixed on master; please verify.Yes, this bug is fixed now. Thanks!This fix is 'too much' because it sets the class even if --class is explicitly given on the commandline.Besides: probably the best thing to do is to rename the desktop file to org.gnome.Terminal and set the wmclass to the same thing as the appid.Note: I am not blocked on this because gnome-shell takes _GTK_APPLICATION_ID in preference to WMCLASS anyway. This is more of a theoretical complaint: if --class is given, we shouldn't stomp on it.The patch also sets the class to "gnome-terminal" even when --app-id is given. Setting it to the application id in that case is preferable, so that window managers treat terminal windows with different app ids differently.In general, I think it's unreasonable that gnome-terminal has to call gtk_init_with_args() just to parse the --app-id option. One of the main points of GtkApplication is that users don't need to call gtk_init() anymore. Thus, I've added support for --app-id in GApplication (see) and ported gnome-terminal to that.Setting WM_CLASS to the app's id is a good idea for all applications, so I've attached a patch to the same bug that makes GtkApplication do that. We can remove the call to gdk_set_program_class() in gnome-terminal.These patches are blocked on.Createdserver.c: don't call g_application_register()g_application_run() will call it anyway and return with the same errorwhen an instance already exists.Createdserver: use GApplication's --app-id supportSo that we don't have to handle that option in server.c by callinggtk_init_with_args(). gtk_init() is called in GtkApplication anyway.CreatedTerminalApp: don't call gdk_set_program_class()GtkApplication now calls it with the application's id. That makes moresense than always setting it to "gnome-terminal", as window managersshould distinguish between terminals which were started with different--app-ids.(In reply to)So just changing this /* Need to set the WM class () */ gdk_set_program_class("Gnome-terminal");to this /* Set the WM class to the app ID (see) */ gdk_set_program_class(g_application_get_application_id(application));will work today, with no glib/gtk changes required as in? If so, let's just go with that instead of this patch series.(In reply to)Yes, that will achieve the same effect right now (it still doesn't handle the --class problem, but my patches don't, either).Ryan has been thinking about adding --app-id support to GApplication for a while. When stumbling across this bug because a friend's terminal profiles files were breaking on unity, I took the occasion and finally added support for that in GApplication.So no, the glib and gtk+ patches aren't strictly necessary to solve this bug, but they'll greatly simplify terminal's code and make the same functionality available to other apps.Btw, the first patch is only marginally related and can be applied anyways. It just removes some unnecessary lines.I've committed the first patch and the change from.Reopening. The change (6c91fa9) breaks the Unity bar's contents in two different ways.Previously, "Terminal" was displayed in bold when the menu was not opened, and was displayed twice next to each other (actually a total of 3 times which is not ideal) after pressing Alt or hovering with the mouse.Now the application name is the title of the active tab from the first opened gnome-terminal window (that is: not necessarily the currently focused window). And the second label becomes "Unknown Application Name".Screenshots follow. (Note: my title is the tty number.)CreatedBeforeCreatedAfter(In reply to Egmont Koblinger from)>Unity uses WM_CLASS to look up the desktop file for an application. It cannot find the desktop file anymore because after this patch WM_CLASS is set to 'org.gnome.Terminal', but the desktop file is still called 'gnome-terminal.desktop'.The same happens in GNOME Shell.We should either revert this patch or rename the desktop file to org.gnome.Terminal.desktop. Renaming will probably cause quite a few migration problems. I recommend doing that at the start of a cycle.(In reply to Lars Uebernickel from)Thanks for your input. I agree, let's revert now and figure out the proper way of doing this in the early 0.41 days.ChPe?(In reply to Lars Uebernickel from)I have a patch to rename the desktop file to org.gnome.Terminal.desktop inReverted for now.(In reply to Debarshi Ray from)I've tried that patch, it suffers from the exact same problem under Ubuntu's Unity than the one we reverted here for the same reason.It's not just a visual problem, I also had problems with the launcher icon. I removed the launcher icon from the left-hand launcher bar, then started g-t manually from xterm. The icon appeared in the left-hand bar, and I locked it to the launcher. Quit g-t, and clicked on this icon: it was not able to start g-t.(In reply to Egmont Koblinger from)*shrug*I don't see the same problem in gnome-shell. In fact I have been running gnome-terminal with org.gnome.Terminal.desktop on my systems for a while now, and every Fedora 22 system is going to do the same. Haven't heard any complaints so far.gnome-shell does get confused when desktop files are renamed. That is why it keeps a table to map the old name to the new.(In reply to Debarshi Ray from)I'm glad there are no problems in F22 gnome-shell. But you've heard me: there are problems under Ubuntu Utopic's Unity.It's not about renaming. I've ran a "make uninstall" with the old code, patched it, compiled and installed, and tried out with a brand new user. Same problem as above.For reference, I'm attaching the output of "find /etc /usr -name '*erminal*' -mmin +15 | fgrep nome > g-t-old-files". I haven't found any leftover files that could potentially cause harm, but please take a look, maybe you find something. Of course it can be a problem with my system only and not with a fresh install, but at this moment I find it unlikely.I would have rather expected a reaction along the lines of "ouch, that's a problem, egmont could you please help me debug the issue and find a fix that also works on Unity?"CreatedPotential leftover files after an uninstall && patch && install	23.0	id=762912	25	False	False	benesv	1
id=502580	REOPENED	empathy	Multi User Chat	2.29.x	Other Linux	Normal normal		2007-12-08 22:43 UTC by	Björn Martensen	2015-02-09 21:34 UTC (	7 users	everytime i open a new muc tab or window (using -idle at the moment), the list of the people in that chat room almost completely filled with dots instead of names. i have to resize it, to see the names properly. (unfortunately the size of the side bar with the names is tab specific, so you have to resize every tab again.......)the strange thing however is, that the names in the side bar are ellipsized, although there is quite some whitespace left to show the full name.i made a screenshot to show the white space right to the names.	Createdscreenshot of people sidebarVote +1I can't reproduce using 0.22.1. Could you try with this version please?i just tried it with 0.22.1 and svn 932. in both of them the names are ellipsized at the point an avatar would sit, if there was one. i guess it's ok but looks kinda bad when you don't see any avatars.btw, avatars are shown in muc contact lists even if you disable avatars in the preferences.That throws me. Not only would I expect MUC to not show avatars if the preference says not to, I'd expect transports that don't use avatars to not reserve the space.(Possibly code so that avatars use space only if they exist? That would let users with long names but no avatar show well as a side-effect, even when Avatars are enabled)(In reply to)that would be possible if column size for avatars was shrinked to fit its content (ie. none in case transport doesn't support it)that wouldn't work. Currently avatars are part of a gtktreeview and columns' content are not allowed to overlap on next column.On debian lenny where empathy is still 0.23.3, people that have avatars in my contact list are not always well reflected in MUC but I guess this is another bug and it might as well be a problem with clients of my buddies than a real empathy bug (solvable by meta-contacts maybe).***has been marked as a duplicate of this bug. ***I'm pretty sure it's possible to extend the text column for rows that don't have an avatar. GtkTreeView are complex but everything is possible, it's just a matter of finding to good formula :)I'll see if I can find how to do that.For the record, as I mentioned in #575679, Pidgin's buddy list is a TreeView which does this.could very well be that the put "two cell renderers in the same column" but this has some downsides if you want to do advanced stuff with the icon.Seefor some explanations about these limitations.This works fine for me with master. Could you retry using 2.27.91 please?CreatedNo it doesn't.Yes, still happening in 2.27.92.Still happening in 2.28.1.1Hi, the behavior in 3.4 seems correct (or at least, better), so I'll close this.(In reply to)I hate to be a stuck record (cf.) but this is not fixed. In fact, the behaviour is *even worse* in 3.4.There is still a huge empty space beside contacts' names (this is on IRC, where there are no avatars), as before. But now, the names no longer get ellipsised when there's not enough space left over—instead, the widget just gets pushed out of the way, obscuring the scrollbar!Screenshot to follow.CreatedScreenshot of the even worse behaviour in 3.4This shows the side pane resized just past the point where contact names would previously start (prematurely) ellipsising. Look at how the right-hand scrollbar is just unceremoniously cut in half!I bet someone disabled ellipsizing in the widget, tested on a room with not enough contacts to trigger a scrollbar, and assumed the bug was fixed when the contacts' names didn't get ellipsised. :)Haha. Apparently I actually got rid of the empty space for avatars for 3.5:.So I'm retitling for this truncation issue.(In reply to)Ugh. No, I didn't. That was in the chat themes. Sorry for the noise.	19.0	id=502580	25	False	False	aredridel	1
id=750977	REOPENED	shotwell	general	0.22.x	Other Linux	Normal normal	Shotwell Maintainers	2015-06-15 07:42 UTC by	Peter Eckersley	2017-02-10 00:59 UTC (	1 user	I recently noticed that Shotwell was requiring re-authorisation every time I try to upload photos to flickr, even if the two uploads are in immediate succession. It also seems to lose configuration set through Edit->Preferences, though that only occurs after a restart.-- System Information:Debian Release: jessie/sid APT prefers unstable APT policy: (500, 'unstable'), (1, 'experimeArchitecture: amd64 (x86_64)Foreign Architectures: i386Kernel: Linux 3.17-1-amd64 (SMP w/4 CPU cores)Locale: LANG=en_US.UTF-8, LC_CTYPE=en_US.UTF-8Shell: /bin/sh linked to /bin/dashVersions of packages shotwell depends on:ii dbus-x11 1.8.16-1ii dconf-cli 0.22.0-1ii libatk1.0-0 2.14.0-1ii libc6 2.19-15ii libcairo-gobject2 1.14.0-2.1ii libcairo2 1.14.0-2.1ii libexif12 0.6.21-2ii libgdk-pixbuf2.0-0 2.31.1-2+bii libgee-0.8-2 0.16.1-1ii libgexiv2-2 0.10.1-1ii libglib2.0-0 2.42.1-1ii libgomp1 4.9.2-10ii libgphoto2-6 2.5.4-1.1+ii libgphoto2-port12 2.5.7-5ii libgstreamer-plugins-base1.0-0 1.4.4-2ii libgstreamer1.0-0 1.4.4-2ii libgtk-3-0 3.14.4-2ii libgudev-1.0-0 215-5+b1ii libjavascriptcoregtk-3.0-0 2.4.7-2ii libjson-glib-1.0-0 1.0.2-1ii liblcms2-2 2.6-3+b3ii libpango-1.0-0 1.36.8-2ii libpangocairo-1.0-0 1.36.8-2ii libraw10 0.16.2-1ii librest-0.7-0 0.7.92-2ii librsvg2-common 2.40.5-1ii libsoup2.4-1 2.48.0-1ii libsqlite3-0 3.8.10-1ii libstdc++6 4.9.2-10ii libwebkitgtk-3.0-0 2.4.7-2ii libx11-6 2:1.6.2-3ii libxml2 2.9.2+dfsgii shotwell-common 0.22.0-2	Can you check whether dconf-gsettings-backend is installed?Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!Hi Jens!Sorry I missed the request for more information. I do indeed have dconf-gsettings-backend installed (version 0.22.0-1), and this bug is still present in Debian's shotwell 0.25.4-0.1. I see the following console output during a run where I publish a photo to flickr, then try to publish a second one and hit the auth step again:BROWSER=flickrchrome shotwell(shotwell:24276): Gtk-WARNING **: Failed to get the GNOME session proxy: The name org.gnome.SessionManager is not owned(shotwell:24276): Gtk-WARNING **: Failed to get the Xfce session proxy: The name org.xfce.SessionManager is not owned(shotwell:24276): Gtk-WARNING **: Failed to get an inhibit portal proxy: The name org.freedesktop.portal.Desktop is not ownedGtk-Message: GtkDialog mapped without a transient parent. This is discouraged.(shotwell:24276): Gdk-CRITICAL **: gdk_window_get_window_type: assertion 'GDK_IS_WINDOW (window)' failed(shotwell:24276): Gdk-CRITICAL **: gdk_window_get_window_type: assertion 'GDK_IS_WINDOW (window)' failedGtk-Message: GtkDialog mapped without a transient parent. This is discouraged.(shotwell:24276): Gdk-CRITICAL **: gdk_window_get_window_type: assertion 'GDK_IS_WINDOW (window)' failedThe issue with preferences not persisting across restarts is also still present.	4.0	id=750977	6	False	False	mail	1
id=762912	REOPENED	gnome-boxes	tests	3.19.x	Other Linux	Normal normal	GNOME Boxes maintainer(s)	2016-03-01 09:27 UTC by	vladimir benes	2016-09-20 08:15 UTC (	2 users	All these changes are now used in CI and were heavily tested. Tests are slower but more stable. More reporting is used here and there and some new UI changes are reflected as well.New Core-7 (aka Core-current) iso is used instead of older 5.x.	Createdtests: use pexpect for command output checksUse pexpect for command output checks. Repeat these checks 5 timesin 1 second frequency to prevent timing issues.Createdtests: focus window via 'Actions' buttonFocus window via 'Actions' button when more windows are present.Createdtests: wait for new window frames up to 5 secondsOpening several windows may take some time but it doesn't have to.Waiting upto 5 seconds for opening should be sufficient even forslow setups.Createdtests: remove useless sleeps after click()Action delay is now set to 1 second for better stability even onslower machines. These sleeps after clicks are not needed anymore.Createdtests: use new widget names for buttonsUse new 'Back' and 'Send key combinations' buttons names.Use slowerget_showing_node_name function for 'Back' button click to bring someextra stability to slower machines if called just after entering a VM.Createdtests: use Dogtail's way to do top bar actionsUse Dogtail's built-in methods for operating top bar menus.Createdtests: wait 10s after direct box startDirect box start from console needs more time on slower machines.Createdtests: 5 attempts to locate box in overviewWait up to 5 seconds for box to be present or not in overview.Createdtests: use 'Return' as enter in xdotoolXdotool in new version do accept only 'Return' as enter not '\n'.Createdtests: new step for getting reachable VM IPIntroduce new step to get the IP of reachable VM. This step istwice slower than the one already present as it does additionalcheck for reachability of the VM. To be used just for expressinstallation tests.Createdtests: use reachable IP step in express installsExpress installation tests need to check if VM is reachable as thesame MAC address may have several different IPs assigned in arp tableafter installation.Createdtests: press Return 3 times during bootPress Return 3 times to go over boot prompt during livecd boot tostart as early as possible. This will make boot very fast withpowerfull machines but will provide enough time to do so even onslower ones as well.Createdtests: press Return 3 times during bootPress Return 3 times to go over boot prompt during livecd boot tostart as early as possible. This will make boot very fast withpowerfull machines but will provide enough time to do so even onslower ones as well.Createdtests: use get_showing_node_name for install VMsUse get_showing_node_name method at a few places where delays mayoccur. This method waits for widget appearance and makes tests morestable on slower machines.Whatever happened to?I'm assuming you simply forgot that you had already uploaded part of this effort and I had reviewed some of the patches, I'm closing this as duplicate.*** This bug has been marked as a duplicate of***Createdtests: new style isRunning methodQuick check if application is running or not. Additional checkperformed if exception occured.Createdtests: move screencast limit to 600sMove limit of screencast from default 30 seconds to 600.Createdtests: don't ask for isRunning before app startDogtail's root.application() itself checks if app is running or not.Createdtests: use shortcut step in 'quit via shortcut''Quit Boxes' step uses Ctrl+Q shortcut to quit Boxes.Createdtests: use 64 bit iso in "download iso http" testUsing different arch of iso in this test.Createdtests: use Core-current imagePort all tests to use Core-current image that will be updated byupstream and is based on 7.x version not 5.x.Createdtests: delete VMs via BoxesSelect all VMs, press delete and close warning before closing app.Another delete of possible existing residuals is preserved in casesomething went wrong.Createdtests: attach video, stdout and stderr with captionAttach stderr, stdout and video (if present) with correct caption inBehave's HTML report.Createdtests: record screencast for each testRecord each test via GNOME screencast. Videos are attached to HTMLreport.Createdtests: use Core-current imagePort all tests to use Core-current image that will be updated byupstream and is based on 7.x version not 5.x.Createdtests: wait 5s after import from system brokerWait a 5 seconds more after 'import from system broker' is pressed.Createdtests: download images multiple timesIf Core-current is unavailable Core-7.0 is used instead. If any ofneeded images are not available download is tried next time again.Createdtests: GNOME idle turn off warning improvementDone or Warning is showed in logs accoringly to GNOME screensaverturn off attempt.Createdtests: unify typing stepsUse just xdotool based type and remove Dogtail's typeText.Createdtests: unify typing methodsUse just xdotool based type and remove Dogtail's typeText.Createdtests: unify typing methodsUse just xdotool based type and remove Dogtail's typeText.Createdtests: download iso from working locationUse ibiblio to download 64bit Core Linux. The original repo is gone.***has been marked as a duplicate of this bug. ***Review of:* Why switch to pexpect?* What has the timing changes to do with switching to pexpect?::: tests/steps/utils.py@@ +5,3 @@ from dogtail.rawinput import typeText, pressKey, keyCombo from time import sleep from subprocess import call, check_output, CalledProcessError, STDOUTsince check_out will no longer be used, we'll want to stop importing it here.Review of:Log gives the wrong impression that window is being focused using 'Actions' button, while the change is only to simplify the search for the window, using the 'Actions' button label.Review of:So instead of waiting 3 full seconds before looking for any window, we now wait 1-5 seconds for each window individually. Firstly that's two changes and secondly, why are we switching to waiting for individual windows now.Review of:So we are replacing individual sleep calls with a global action delay? If so, the commit log (especially shortlog) needs improvement. Shortlog is giving impression that change is simply dropping sleep calls.Review of:The log seems not to nicely summarize the change. Existing code was not using button's names at all so use of new names, is not what's happening here.Oh and space missing at " names.Use ".Review of:Looks good.::: tests/steps/general.py@@ +233,3 @@+ gs = GnomeShell()+ buttons = gs.getApplicationMenuList()+ sleep(0.5)why the sleep now?Review of:Really not happy with us changing the amount of time we sleep randomly like this, based on which machine you (or anyone) last ran the tests on. If you can come up with some systematic way of handling this, that would be lovely. I'm guessing this is very generic issue and all GNOME apps face this?Review of:ackReview of:::: tests/steps/general.py@@ +91,3 @@+ call("xdotool key 'Return'", shell=True)+ call("xdotool type --delay 150 'tce-load -i %s'" %pkg.split('/')[-1], shell=True)+ call("xdotool key 'Return'", shell=True)What's the rationale for adding more lines?Review of:"new step" is very vague, please summarize how it's different than existing step and also why we need this slower one for express install?Review of:Well now that we have two "reachable IP" steps (reminder: Use quotes for easier readability), which one is shortlog referring to? I'd really like to have just one step for this.Review of:ackReview of:* "install VMs" -> "VM installs"?* I'm a bit confused. The method is being used to find the "New" button. Why would that button take time to appear?* I think praises of the new get_showing_node_name() method should go into the log of patch that introduces it. :)* "stable" -> "reliable"?Review of:* Shortlog isn't saying anything to me. Description isn't much better either. Could you please summarize better what the code was doing and what you changed it to and why?* "Quick" -> "Quickly"	48.0	id=738167	8	False	True	sandbox+gnome	1
id=122331	REOPENED	gnome-panel	panel	2.4.x	Other Linux	Normal normal	Panel Maintainers	2003-09-15 11:28 UTC by	Olivier Blin	2005-11-09 13:31 UTC (	2 users	Summary:gnome-panel transparency should use desktop background color if gnomedesktop background picture is not foundTo reproduce:- set a picture as gnome desktop background- set color style to transparent in panel background preferences- move or remove the picture previously set as gnome desktop backgroundExpected results:Since there is no valid picture background anymore and gnome-panel istransparent, gnome-panel should use desktop background color as gnome-panelcolor.Actual results:gnome-panel isn't transparent anymore	I can't simulate this problem with the above steps. Or probably I ammissing something here.Did you use the gnome-background-properties to "no picture" ?Anyone else seeing this problem ? Vincent, Newren ?No, I didn't use gnome-background-properties to change background type.The problem occurs when background type is "stretched" and thebackground image can't be found.Well, this bug can be a little hard to duplicate :1/in gconf database, put a background file name which doesn't exist :this can happen when it is defined in schema but file is missing (thisis how we found it..)2/set gnome-panel to use transparent background : it will try to usefile background, it will fail (of course) but instead of usingbackground color (which is nautilus desktop behaviour), it usesgnome-panel default background color..***has been marked as a duplicate of this bug. ***Should have been reopened.Stupid question : what should be done when the desktop color is agradient ?You could just make the panel fully translucent ...	7.0	id=764869	9	False	False	schumaml	1
id=632440	REOPENED	tomboy	General	unspecified	Other Mac OS	Normal normal	Stefan Schweizer	2010-10-18 09:57 UTC by	Stefan Schweizer	2010-10-20 14:15 UTC (	1 user	CreatedAdd menu item for opening online helpCurrently it is not possible to open the online help from the mac help menu.I am attaching a patch to fix this. It also opens the specific version of the online help. We could do this in the WindowsApplication and GnomeApplication classes too.	Review of:yesDoes yes only mean that the patch is ok or that we also should change the DisplayHelp method in the application classes for the other platforms to open a specific help version?The version change would only work in WindowsApplication. If you want to make the change there, too, go for it.This can all make today's release.Review of:I just pushed the changes of the patch and the additional modifications for the WindowsApplication.Just noticed that after applying the changes the tools menu is now gone.Hmm, unfortunate. I'm not sure how to edit the Help menu properly. I wonder if checking out MonoDevelop's code would help us:Commit reverted in git.I tried copying the Tools/Sync menu/menuitem from SyncManager.Initialize, but the Help menuitem didn't show up when I did that. So, not sure what's up.I think you reverted the wrong commit. The problem is the one with the addition to the menu xml in commit. Sorry for the confusion and my only half-working patches.Sigh, why didn't I notice this comment *before* I tagged and uploaded a tarball and a Mac binary? :-PI still have not found the right way to do that. I do not understand why it is necessary at all because UIManagerLayout.xml already has a HelpMenu defined with an item for ShowHelpAction.	10.0	id=122331	5	False	False	arvind.samptur	1
id=525574	REOPENED	gnome-keyring	general	git master	Other Linux	Normal normal	Stef Walter	2008-04-01 15:59 UTC by	Sebastien Bacher	2016-12-12 13:00 UTC (	14 users	The bug has been opened on"The ssh-agent honors adding constrained identities -- where such constraints may be either: * Require confirmation each time the agent allows the identity to be used. * A maximum lifetime for the identity.The gnome-keyring-daemon is a replacement for the ssh-agent in Hardy Heron, but does not support those constraints. If the user issues: ssh-add -cor ssh-add -t <time value>The identities will be added without those constraints.This is especially important in some uses of the ssh-agent, such as ssh-agent forwarding, where the usage of the agent can not be considered secure without the confirmation constraint."	As a workaround, you can revert to using ssh-agent:Launch gconf-editor, apps/gnome-keyring/daemon-components, uncheck ssh. Restart X. ssh-agent should start.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***is another downstream bug that talks about missing handling of constraints:"ssh-add -c should, according to the man page, require confirmation before usingthe cached key. This works in RHEL5, but not in rawhide."Stef: looking at this. I don't know the code well, so I guess I need help :-) How do you think it should be implemented: + add some attributes to the GP11Object key objects via gp11_object_set() and retrieve the attributes when needed. We'd need to define new attributes in pkcs11/pkcs11g.h. + maintain a simple list of keys for each constraint in the agent session, and check that list when needed.(so the question is: do we embed the constraint data in the object or do we want to keep it external?)I don't know how you want to implement the constraint internally, but:Any code which acts as an ssh-agent is a component in a serious security toolkit. In any serious security toolkit, if the current implementation cannot support (or understand) a requested constraint associated with sensitive material (e.g. secret key material) from the user, it should *not* silently ignore the constraint and proceed to import the sensitive material. If the implementation is at all in doubt, it should securely discard any associated sensitive material and indicate failure.The fact that this bug has been open for over a year without this basic precaution really makes me worry about GNOME's commitment to providing its users with reliably secure tools.Please implement the basic sane response to unimplemented requests first, then try to figure out how to support various requests later. There are real users relying on your code today who are currently vulnerable.Daniel: when I do "ssh-add -c" or "ssh-add -t 1000", then I get SSH_AGENT_FAILURE printed. This sounds like it works fine. And then the identity gets added (which is probably what's wrong in your opinion).ssh-add does this: if (ssh_add_identity_constrained(ac, private, comment, lifetime, confirm)) { fprintf(stderr, "Identity added: %s (%s)\n", filename, comment); ret = 0; if (lifetime != 0) fprintf(stderr, "Lifetime set to %d seconds\n", lifetime); if (confirm != 0) fprintf(stderr, "The user has to confirm each use of the key\n"); } else if (ssh_add_identity(ac, private, comment)) { fprintf(stderr, "Identity added: %s (%s)\n", filename, comment); ret = 0; } else { fprintf(stderr, "Could not add identity: %s\n", filename); }Thererfore, if adding the identity with a constraint doesn't work, ssh-add blindly goes on to add the identity without a constraint (probably because the constraint stuff is not part of the RFC).So please file a bug against openssh if you think this is wrong.Ah, i hadn't realized that was what was happening, Vincent. Thank you for clarifying what is actually going on.I feel better about gnome's ssh-agent implementation now, and a bit embarrassed that i hadn't figured this out myself! Sorry for my mistaken bad impression.I will definitely take the matter up with the openssh team.Daniel, I agree with what you said above about indicating failure in a case where we cannot support constraints. If you find other cases where gnome-keyring fails at this in some way, please bring it to our attention. We need as many eyes on the code as possible. Vincent, I believe that the constraint data should be an internal thing. Some work has been done in this direction already. There would be two parts, it's unclear if they're related: * Support time based constraints on keys loaded with constraints via ssh-add. This is probably simpler to implement, as the key actually goes away after the time period elapses. We could think of this as a self-destruct. UI for this method, is via the -c argument of ssh-add. Some custom code in ssh-agent component. Maybe that component would do the actual destruction? * Support time based constraints on unlocking of keys originating from within gnome-keyring (including auto loaded id_rsa, id_dsa etc...). Not sure if this is related to the above, as we don't actually want to delete the keys, just relock them, so the user gets prompted again. UI for this method might be in the unlock prompt. More on this below. Not sure where the actual relocking would occur. It'd be cool if there was a way to combine the two concepts above.I've been thinking of a redesign of the unlock prompt, so that it has an expander, hiding options like: * Unlock for X minutes * Unlock for this application only. * Unlock whenever I'm logged in, etc...CreatedConstrained identities + auto destruct + thread timersHere's a patch which adds a new type of PKCS#11 object: An auto destruct object is like a ticking time bomb, which points to another PKCS#11 object. When the time elapses, it destroys both itself and the other object.The auto destruct object can in the future be used to implement timed locking of keys. Since the unlock state is a separate PKCS#11 object, it can be destroyed by the auto destruct object, essentially locking the key.The ssh-agent in the patch uses this new type of object to implement lifetime constrained identities.Also included is a thread based timer callback mechanism which isn't dependent on a main loop (since PKCS#11 modules don't have a main loop). Not tested yet, and need to build some unit tests for some of the stuff. But thought I'd post my progress here.CreatedConstrained lifetime SSH identities, auto destruct objects, thread timersCommitted.Took a bit of a different approach with an optional auto-destruct attribute on each object, rather than seperate auto-destruct objects. gck/Makefile.am | 1 gck/gck-attributes.c | 97 +++++++++++++++ gck/gck-attributes.h | 8 + gck/gck-module-ep.h | 4 gck/gck-module.c | 32 ++++ gck/gck-module.h | 6 gck/gck-object.c | 120 ++++++++++++++++++ gck/gck-object.h | 8 + gck/gck-session.c | 32 ++++ gck/gck-session.h | 5 gck/gck-timer.c | 225 +++++++++++++++++++++++++++++++++++ gck/gck-timer.h | 43 ++++++ gck/gck-types.h | 1 gck/tests/Makefile.am | 2 gck/tests/test-module.c | 70 ++++++++++ gck/tests/test-module.h | 41 ++++++ gck/tests/unit-test-timer.c | 159 ++++++++++++++++++++++++ pkcs11g.h | 6 ssh-agent/gck-ssh-agent-ops.c | 74 ++++++++++- ssh-agent/gck-ssh-agent-standalone.c | 2 20 files changed, 923 insertions(+), 13 deletions(-)commitMerge: 92251a5... d69fdd3...Author: Stef Walter <>Date: Sat Jul 18 18:35:22 2009 +0000 Merge branch 'auto-destruct'commitAuthor: Stef Walter <>Date: Sat Jul 18 18:32:45 2009 +0000 Add support for lifetime constrained identities. We don't support prompt constrained identities, as security wise this is incompatible with the current X11 desktop. And currently amounts to 'security theater'.commitAuthor: Stef Walter <>Date: Sat Jul 18 18:32:27 2009 +0000 Make standalone socket in a directory we know exists: /tmpcommitAuthor: Stef Walter <>Date: Sat Jul 18 18:31:48 2009 +0000 Add support for auto destructing session objects. These destroy themselves after a certain amount of lifetime controlled by the CKA_GNOME_AUTO_DESTRUCT attribute.commitAuthor: Stef Walter <>Date: Sat Jul 18 18:30:53 2009 +0000 Add support for parsing and storing time attributes. These time attributes follow the PKCS#11 clock format. That is: YYYYmmddHHMMSS00 16 charscommitAuthor: Stef Walter <>Date: Sat Jul 18 18:25:48 2009 +0000 Add support for thread timers. We can't use mainloop timers from PKCS#11 modules, since no mainloop runs in those modules. Thread timers all share a single thread and callback into the module at the given time.Anyone interested, please test that this works as expected, and report any problems as separate bugs.Is this really closed? the bug report refers to two different flavors of constraint: time limitations, and confirmation prompts.the comments in the referenced changelogs here seem to refer to the time limitation, but i see nothing about confirmation prompts.I haven't tested the new version yet to see if it handles confirmation prompts, but it doesn't sound like this concern has been addressed."Click OK to Continue" prompts when done on a vanilla X desktop are a good example of 'security theater'. They make people feel good, but don't actually add any security. (ie: click events can be synthesized by any application on the X desktop, thus prompts do nothing to prevent an application from using the key).Please read this the following [1]. After that if you'd like to contribute a solid + secure way to do per-use prompts, then join us on[1]All the best!Whoops, I meant: 'contribute *towards* a solid + secure way...'***has been marked as a duplicate of this bug. ***says:That's not true in all cases.Considering the case of 2 machines, where machine A running gnome-keyring is SSH'ing to machine B, yes, I can see your point.However, in the case where machine A running gnome-keyring is SSH'ing to machine B and performing ssh-agent forwarding, and then machine B SSH's to machine C using a key obtained from the SSH agent, then there is definitely a point to the Y/N prompting. A root user (admin or cracker) on machine B can trivially "attach" to the forwarded SSH agent connection on machine B, and hence can illicitly use the agent to connect to machine C. Prompting on machine A for confirmation generally prevents this, unless the admin/cracker of machine B has compromised machine A too, and spoofs the click, which is somewhat harder (especially if no X forwarding was used, or -X was used instead of -Y).Hence, I request this to be reopened. If it's not, I'll have to unmarkas being a duplicate, since an open bug needs to exist to register the RFE.Good use case. Reopened.***has been marked as a duplicate of this bug. ***gnome-keyring should just wrap stock ssh-agent to solve this problem:	20.0	id=759797	4	False	False	allanpday	1
id=641497	REOPENED	gnome-control-center	Universal Access	2.91.x	Other Linux	Normal normal	Control-Center Maintainers	2011-02-04 14:59 UTC by	Cosimo Cecchi	2016-09-08 15:52 UTC (	4 users	It's hard to set the right value for the Delay and Speed values without a test entry directly in the settings panel. We should add one, in a similar way the mouse settings panel does.	I noticed this too, and missed the entry. There used to be one.***has been marked as a duplicate of this bug. ***I don't think that repeat keys has a future, so this probably isn't worth bothering with. See.Reopen if I've got this wrong, of course.(In reply to)It's not going to go away, if only for accessibility purposes.	4.0	id=632440	11	False	False	steve.schweizer	1
id=705546	REOPENED	gnome-control-center	Network	unspecified	Other Linux	Normal normal	Control-Center Maintainers	2013-08-06 08:42 UTC by	Bastien Nocera	2017-02-22 12:41 UTC (	2 users	Once created, the name of the hotspot never changes. The network shows up in the network panel, and isn't removable.	Creatednetwork: Re-set the SSID when enabling the HotspotInstead of expecting the hostname to stay the same.Review of:looks finepushed as- network: Re-set the SSID when enabling the HotspotCreatedRevert "network: Re-set the SSID when enabling the Hotspot"Re-setting the SSID may be sensible. But that would involvea call to nm_remote_connection_commit_changes_async() to changethe connection profile. Just setting the SSID before callingnm_client_activate_connection_async() is wrong as this onlychanges the local cache of the server-side objects.This reverts commit.The patch e824868 is wrong, and will not fix the original issue.Changing the SSID involves first calling nm_remote_connection_commit_changes_async()	5.0	id=741207	36	False	False	bugzilla	1
id=738167	REOPENED	doxygen	general	1.8.8	Other Windows	Normal normal	Dimitri van Heesch	2014-10-08 17:35 UTC by	Carl Reinke	2015-01-08 10:42 UTC (	1 user	Given the following documentation comment (which is valid according to whatever tool Visual Studio invokes to produce a documentation XML file from C# code), /// <summary> /// Translates an <see cref="IDictionary&lt;K, V&gt;"/> to a ... /// <summary>doxygen produces HMTL documentation such that the HMTL document contains <p>Translates an IDictionary&amp;lt;K, V&amp;gt; to a ...</p>which renders as Translates an IDictionary&lt;K, V&gt; to a ...	Sorry about the typos -- that should be a closing summary tag at the end of the documentation comment and "HTML" rather than "HMTL".+1 for this - it's a really serious bug and is making it very difficult for usto use doxygen. The whole point of the C# XML input format is that it's validXML, and Visual Studio will complain or even fail to compile in some cases ifit isn't, so it's important that doxygen can cope with &lt; &gt; entityreferences to specify the < and > characters in code snippets like this. It should be pretty simple to implement a find-replace preprocessor step forkey XML entities such as < and > (and it could be a configurable option ifneeded for backwards compatibility reasons)inside cref it is easy to add support for &lt; and &gt;So I'll add that as well (next to the more readable { and })This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.8.9. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional information that you think can be relevant (preferrably in the form of a self-contained example).Thanks. This is partly fixed, but also partly worse in 1.8.9 than 1.8.8:- in 1.8.9 <T>, &lt;T&gtT; and {T} are all now transformed to <T> which is great- but unlike 1.8.8, in 1.8.9 references to generic TYPES/classes are no longer transformed into links (whichever syntax is used, and regardless of AUTOLINK_SUPPORT setting). i.e. cref="MyGenericMethod{T}(MyGenericType{T})" is correctly transformed to a link to , but cref="MyGenericType{T}" is not transformed to a link (just to the text MyGenericType<T>). So there is an important regression from the previous release. It's close though! :)Does it work if you use cref="MyGenericType" instead of cref="MyGenericType{T}"? (not saying that is a good solution, but that may gives me a hint where to look).It doesn't make a different in 1.8.8, but yes in 1.8.9 the link is generated if you specify cref="MyGenericType" without the {T} argument. (btw in some parts of our code we have both a generic and a non generic type with the same name - which is allowed by .NET, and are treated as separate types - so this wouldn't be a workaround for us. But note I'm seeing the problem even for simpler cases)Here's the code: public class Foo<T> { } /// <summary> /// Represents the name and type of a field in an <see cref="EventType"/>. /// </summary> /// <remarks> /// a <see cref="Foo&lt;T&gt"/> /// b <see cref="Foo{T}"/> /// c <see cref="Foo"/> /// d <see cref="Foo<T>"/> /// </remarks> public class Bar { }On 1.8.8, only (d) gets made into a link, in 1.8.9 only (c) gets made into a link. What I expect is for a/b/d (but not c) to be made into links.	7.0	id=641497	14	False	False	gabriel.burt	1
id=555777	REOPENED	GIMP	Windows Installer	2.6.1	Other Windows	Normal normal	GIMP Bugs	2008-10-10 10:10 UTC by	Larsen	2016-12-07 21:16 UTC (	11 users	Steps to reproduce:1. Save file as mng (I hope I can attach 4mb)2. Choose "Save as animation"3. Click on "Export"4. Use default options5. Click on "Save"6. Crash =)Stack trace:As this is Windows the instructions for installing the debugging symbols didn´t fit. I also couldn´t figure out where to get Bug Buddy.If there´s anything I can do, please tell me.Other information:After the windows error dialogs shows up, a GIMP error dialog shows up:GIMP MessagePlug-in crashed: "file-mng.exe"(C:\Programme\GIMP-2.0\lib\gimp\2.0\plug-ins\file-mng.exe)The dying plug-in may have messed up GIMP's internal state. You may want to save your images and restart GIMP to be on the safe side.GIMP MessageSaving 'C:\1temp\anim.mng' failed:Procedure 'file-mng-save' returned no return values	CreatedFile that causes the plugin to crashreduced to only two layers, error still shows upHi and thanks for the bug report! I'm not able to reproduce this on Linux.Works fine here as well. Could be a problem with the version of libmng bundled with the installer.I and one of my buddies can confirm that bug. We both use Gimp PL 2.6.4 for Windows and we get such error while trying to save animation (or static image) to mng format. Crash occur after specifing export parameters and clicking 'Save' button, just like Lars Monsees mentioned.It sometimes gives me that error:'GLib-ERROR **:gmem.c:136: failed to allocate 1615249527 bytes, aborting...'and crash.Confirmed with 32bit Windows version. I'll look into it.I also have the same problem under Windows. I would like to save a paletted (2 unique colors) image with 2 layers in MNG, but it crash when saving.CreatedSave it as MNG crash GIMPIIRC there has never been any version of libmng that has been usable on Windows.Createdproposed patchWhen saving the file attached toon linux,valgrind reports a number of invalid read, though the operation is completed successfully.Looking at the code of libmng-1.0.10 it is evident that 'mng_putchunk_plte' and 'mng_putchunk_trns' both copy the array passed in as if it was full size even whenit is only partly used. The attached patch wraps their calls passing the arrays dimensioned correctly.In function 'respin_cmap': when 'find_unused_ia_colour' returns as an index suitable for transparency the numberof colors in the colormap, the following loop accessesthree values beyond the end of the array 'before'.Finally there's a typo in a call to mng_putchunk_text.The attached patch is against file 'plug-ins/common/file-mng.c' of release 2.6.6.You are working faster than we apply patches, we'll never get GIMP 2.6.7 out! :)Applied to both branches and pushed. Thanks for the fix.commitAuthor: Massimo Valentini <>Date: Mon Jul 20 22:55:43 2009 +0200– Export to MNG animation fails 'mng_putchunk_plte' and 'mng_putchunk_trns' both copy the array passed in as if it was full size even when it is only partly used. This commit wraps their calls passing the arrays dimensioned correctly. In function 'respin_cmap', when 'find_unused_ia_colour' returns an index suitable for transparency the number of colors in the colormap, the following loop used to access three values beyond the end of the array 'before'. Finally fix a typo in a call to mng_putchunk_text(). plug-ins/common/file-mng.c | 61 +++++++++++++++++++++++++++++++++---------- 1 files changed, 47 insertions(+), 14 deletions(-)Crash occurs again with version 2.6.9 on Windows XP SP3. I tested with the image from.Larsen, can you reproduce this with 2.6.11?Still crashes with 2.6.11. Tested with images fromandI tried at work, and I also get a crash, but it is not a normal crash. Before the normal crash dialog box, I getData Execution PreventionTo help protect your computer, Windows has closed this programName: file-mngLooking at the stack with DrMinGW, it looks corrupt.Do you get the same kind of crash as me?No, I don´t get a DEP error message. As I have MS Visual Studio installed, I get a message about an unhandled exception in file-mng.exe.***has been marked as a duplicate of this bug. ***Please try GIMP 2.7.4 and report back, we won't fix 2.6 bugs any longer.That's working as expected for me with GIMP 2.7.4 under Windows :) So it doesn't crash anymore with my test case. Thanks and good job !Thanks for checking -> FIXED :)Still crashing for me with the example attachment:"plug-in 'file-mng.exe' aborted before sending its procedure return values"GIMP 2.7.4 Windows XP SP3Installer from gimp-win.sf.netI tried to export to MNG with file fromand it works too under Windows 7 x64 using GIMP 2.7.4 fromIt seems like this package provides both x86 and x64 builds and the version I tested is the x64 version.It crashes for me on 32 bit Windows XP with 2.7.4.2.6 -> 2.8Still crashes with Gimp 2.8.2 and Windows Vista 32 bit with error in descriptionUpdate bug statusWindows Version: 8.1 x64 up-to-dateGIMP Version: 2.8.14-x64 currentCommands: File > Export as > MNG (default options)Result: correct file creation, no crashesStatus: can't not reproduceNo crash with GIMP 2.8.8, Windows 7 64-bit.Would be interesting to see if this also applies to 32-bit Windows.I have tested this on win 10 with 64bit also. Can't reproduce.Using a test image for windows 7 I can reproduce this on 32bit. This seems however just related to 32bit.Has anyone tested with GIMP master (2.9.x) on Windows 32 bit?	30.0	id=755372	6	False	False	gnome	1
id=755372	REOPENED	evolution	Mailer	unspecified	Other Linux	Normal normal		2015-09-21 20:47 UTC by	Ángel	2015-11-04 23:35 UTC (	1 user	Currently, evolution doesn't allow to send a mail encrypted with gpg to a key not trusted. However, sending an email encrypted to a MITM key is still better than not encrypting the content at all, and should be allowed.Use case:Alice needs to send an email to Bob. She hasn't exchanged keys with him (perhaps not even met him in person), but she has found a key for him on an old mail / his website / a keyserver. She doesn't trust that key in order to sign it, but she would prefer to send the message encrypted with PGP rather than relying just on the mailservers.With the normal settings, evolution won't be able to do that (gpg would show an interactive prompt, but as it's run in batch mode, it has to fail). If she had “trust-model always” on her gpg config, then it will send. But email verifying will no longer use the WoT, and all messages will be shown "yellow".Continuously changing the gpg config file during the session would "work", but be completely cumbersome.Expected:evolution would show a warning: The key ABCDEF may not belong to Bob Doe <>. There's no trusted signature for this key. Encrypt with this key and send anyway Return to the composer¹If Alice chose to send it anyway, would rerun gpg with the additional arguments "--trust-model always" in the command line.¹ Maybe even allow a third option “Assume that this key was right for this user” that stored that preference in the address book.	Thanks for a bug report.(In reply to Ángel from)I do not agree with this. The idea of encryption is to avoid exposure of the content to any Man In The Middle, which your statement clearly violates.Right, this scenario makes sense.True, but still makes more sense than allow users to send to keys they do not trust. Evolution isn't an application to manage your GPG keys, there's either the GPG command for it, or the Seahorse application, where you can temporarily trust the key, just for the time to send the encrypted message using it, and then unset the trust. After that use it only when you verify you speak to the right person, since then also the Evolution will work flawlessly.While your request makes sense for the initial exchange, it's not that useful otherwise, thus I'd rather not do this and rely on Seahorse or other GPG key managers.Searching address books is an expensive operation.(In reply to Milan Crha from)It was intended as an explanation of the below scenario, which made sense for you. Maybe it's clearer in.If it's not possible not to expose it to anyone (people didn't meet and there's no trusted third party), it's still better to only expose it to just one potential MITM adversary than to everyone (it's still slightly better than that, as it requires an active MITM and would be detectable in the future more easily).AFAIK that would require you to eithera) sign the key, then revoke it. Not really the best approachb) trust completely anything signed by this key (this works because pgp keys sign themselves). This will work, as long as you don't forget to immediately untrust it again, as otherwise you have broken your whole keyring trust.As long as you can attest that just after the first message :)That's why I mentioned the possibility of storing the fingerprint in the address book as a way for TOFU. We can focus on the main request, though.Per above, I don't see a good way to handle this (currently). This is more of a problem with the GPG way of key managing keys IMHO, but it's what we have to work with.***has been marked as a duplicate of this bug. ***	3.0	id=705546	8	False	False	bugzilla	1
id=741207	REOPENED	grilo	plugins	unspecified	Other All	Normal normal		2014-12-07 00:40 UTC by	Victor Toso	2016-06-12 13:44 UTC (	4 users	- local-metadata source is setting empty string as title which makes further requests with other sources to fail.- thetvb is making a g_ascii_strncasecmp with always return true;	Createdthetvdb: failing to compare episode titles.Using g_ascii_strncasecmp with 0 as number of chars to compare alwaysreturn 0.Createdlocal-metadata: Do not set empty title/shownameReview of:That doesn't seem right to me. We do set the show name, and if we set the show name, the title is supposed to contain the episode name, not the show name (again). Instead, thetvdb should be able to use either the show name or the title when the show name isn't available.Or we'll need to add a new episode name metadata key.Review of:Yes!(In reply to)I don't really understand. local-metadata is setting an empty string as title. If this is not a bug in the source, should be in the core for me.What happened next in my application (totem-shows) is that I request GRL_METADATA_KEY_TITLE which is currently working as episode title. This key is *not* really requested to grl-thetvdb as it is already set (with an empty string). Possible bug here.This would fix the problem, indeed.Comment onthetvdb: failing to compare episode titles.pushed as- thetvdb: failing to compare episode titles.(In reply to)local-metadata should unset the title, eg. set it as NULL, so it can be filled in by somebody else instead. I have an untested patch for that. Let me know what you think.Createdlocal-metadata: Don't set title to an empty stringWhen we detect a TV show, don't set the title to an empty string,making grilo core think that the title is already set, but unset itinstead.Createdcore: Allow removing metadata keys in GrlDataIt doesn't quite work with those 2 changes though. Probably missing something in thetvdb, or in the core.Createdthetvdb: Always set title if unsetWhen the title of the media is unset (which would happen if a"show name" was detected and no episode title was present), set it evenif the key was not requested.grilo compiles the list of required keys once, before each source whichcould provide this information is called. When calling thelocal-metadata plugin and a TV show is detected, we set the show nameand unset the title, as the title is now supposed to be the episodetitle. This means that grilo core won't ask us for a title, but that itis needed nonetheless.Adding an "episode-title" key would remove the need forand.Review of:ok!Createdcore: add GRL_METADATA_KEY_EPISODE_TITLETitle of show's episode.Createdcore: add GRL_METADATA_KEY_EPISODE_TITLETitle of show's episode.Createdlocal-metadata: Add support for EPISODE_TITLE metadataCreatedthetvdb: Add support for EPISODE_TITLE metadataReview of:Looks good otherwise.::: src/data/grl-media-video.c@@ +180,3 @@+ * grl_media_video_set_episode_title:+ * @video: the media instance+ * @show: the episode's show title"the episode's title" or "the title of the episode"@@ +190,3 @@+ const gchar *episode_title)+{+ grl_data_set_string (GRL_DATA (video),g_return_if_fail (GRL_IS_DATA(video));@@ +290,3 @@+const gchar *+grl_media_video_get_episode_title (GrlMediaVideo *video)+{g_return_val_if_fail (GRL_IS_DATA (video));Createdlocal-metadata: tests using EPISODE_TITLE metadataCreatedthetvdb: tests using EPISODE_TITLE metadataReview of:tested and working wellReview of:tested and working wellComment oncore: add GRL_METADATA_KEY_EPISODE_TITLEPushed with the recommended changespushed as- core: add GRL_METADATA_KEY_EPISODE_TITLEComment oncore: Allow removing metadata keys in GrlDatapushed as- core: Allow removing metadata keys in GrlDatapushed as- local-metadata: Add support for EPISODE_TITLE metadatapushed as- thetvdb: Add support for EPISODE_TITLE metadatapushed as- local-metadata: tests using EPISODE_TITLE metadatapushed as- thetvdb: tests using EPISODE_TITLE metadataReview of:This breaks lastfm-albumart plugin tests.CreatedRevert "core: Allow removing metadata keys in GrlData"This reverts commit.This patch broke adding empty strings as related keys, as thelastfm-albumart plugin tests showed.pushed as- Revert "core: Allow removing metadata keys in GrlData"Createdcore: Don't try to add related keys for an empty value.This last patch allows reapplying "core: Allow removing metadata keys in GrlData", it fixes the lastfm tests.Review of:Can you merge it into the previous patch? No point in applying one without the other.Createdcore: Allow removing metadata keys in GrlDataReview of:That looks fine to me, as long as the tests still pass. Leaving it to Juan to poke holes into it.Comment onlocal-metadata: Don't set title to an empty stringRejecting, the grl-local-metadata plugin doesn't do title parsing any more.	34.0	id=340963	24	False	False	friemann	1
id=340963	REOPENED	eog	image viewer	3.6.x	Other Linux	Normal normal	EOG Maintainers	2006-05-07 22:22 UTC by	Sebastien Bacher	2014-12-10 08:12 UTC (	11 users	That bug has been opened on"EOG crashes on SVG images created with OpenOffice.org Draw. As I understand,the problem is that OpenOffice.org SVG export plugin uses plain huge integerdimensions, not centimeters, inches or something relavant. EOG just fails toallocate memory for an "über"-sized image then.I guess that from the following output:GLib-ERROR **: gmem.c:154: failed to allocate 2412898400 bytesaborting...Program received signal SIGABRT, Aborted.[Switching to Thread -1239532624 (LWP 11914)]0xffffe410 in __kernel_vsyscall ()(gdb)Personally Im not sure which side requires fixing, maybe both. OpeOffice shouldexport in sane dimensions, and EOG should automatically reduce images or dosomething but not crash.Both Firefox and Inkscape load the image correctly.Crashes with SIGABRT"I've forwarded the issue to librsvg first which is, comment from the maintainer:"When the SVG provides no size (and the size can't be computed by finding theimage's bounding box), we have no choice but to assume that the viewboxrepresents units in user-space. In this case, that's 21590x27940 pixels. Wedutifully report the image's width&height in pixels, as well as the X&Y DPIs,as required by the spec. The calling application then has a duty to "sanitize"those values. In EOG's case, that might mean restricting the image's size tothe size of the visible window."	Createdscale really huge images to fit on the screen(In reply to)Although the patch works around the problem, it is not fully correct. The problem is that every picture which is by a certain factor larger than my desktop is scaled down.This makes every image transformation except lossless JPEG tranform useless as they are applied to the scaled image. A picture taken with 7 megapixel camera could trigger that on a 1024x768 desktop.I am not sure if it is sufficient to set a different factor or if we should apply this only to SVG images (or both?).***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***The patch is incorrect even for SVG images. For example, SVG may contain small details that user may want to zoom and inspect, that is what zoom function is for.My suggestion is - render SVG images on the fly, to the window size. When window is resized, render new bitmap from SVG to the new window size in the background, and while it is working, produce the previous bitmap scaled [with no filters for max speed] to the new size for coarse preview.Is there any news on this issue? Thanks.***has been marked as a duplicate of this bug. ***This bug was reported against a version which is not supported any more. Developers are no longer working on this version so there will not be any bug fixes for it.Can you please check again if the issue you reported here still happens in a recent version of GNOME and update this report by adding a comment and adjusting the 'Version' field?Again thank you for reporting this and sorry that it could not be fixed for the version you originally used here.Without feedback this report will be closed as INCOMPLETE after 6 weeks.Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!Reopening, as I can reproduce this using EOG 3.6.0. and the crash.svg file from the description [1]. gdb session running eog with the given file gives the following:Starting program: /usr/bin/eog eog crash.svg[Thread debugging using libthread_db enabled]Using host libthread_db library "/lib/i386-linux-gnu/libthread_db.so.1".[New Thread 0xb65b9b40 (LWP 6303)][New Thread 0xb5bffb40 (LWP 6304)][New Thread 0xb51ffb40 (LWP 6305)][New Thread 0xae832b40 (LWP 6306)](eog:6299): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_has_alpha: assertion `GDK_IS_PIXBUF (pixbuf)' failed(eog:6299): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed(eog:6299): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failedProgram received signal SIGSEGV, Segmentation fault.[1]Attempting to test to this from duplicate bugfailed, as eog notes:Could not load image 'CodigoGray4Bits2.svg'.Image loading failed.Is SVG 1.1 still supported in eog, or would this be a bug in this version of eog?lsb_release -rd && apt-cache policy eogDescription: Ubuntu 14.04.1 LTSRelease: 14.04eog: Installed: 3.10.2-0ubuntu5 Candidate: 3.10.2-0ubuntu5 Version table: *** 3.10.2-0ubuntu5 0 500trusty/main amd64 Packages 100 /var/lib/dpkg/status	11.0	id=555777	39	False	True	enselic	1
id=764869	REOPENED	GIMP	Tools	2.8.16	Other All	Normal normal	GIMP Bugs	2016-04-10 22:53 UTC by	Kernel Sanic	2016-04-28 14:50 UTC (	0 users	Createda screenshot of the bugAll the fonts appear thin and squashed together when they are typed onto a particular image file I'm editing. They will also not justify center properly in the text box. This did not go away when I used a new version of Gimp (2.8.16) to open it but the problem does not exist if I create a new file. Is there a font setting specific to this file that I may have unknowingly changed or is this a bug? This has happened before and there seems to be no way around it.	What are the image's x and y PPI settings?(In reply to Michael Schumacher from)Where do I find this information?(In reply to Michael Schumacher from)it says width 203 hight 136, X resolution 151 Y resolution 300.Does the font look ok if you disable view -> dot for dot? This showsthe image in its real size and aspect ratio.(In reply to Michael Natterer from)Yes, but now the image is flattened.I just tried myself, fixed text box mode gets the text vs. box sizewrong when xresolution != yresolution.Yes, a squashed image is to be expected when you work at xres != yres.Is there anything that I can do to solve the issue?You can change the resolution to be the same on both axes, thenre-edit your text layers.(In reply to Michael Natterer from)Thank you, this solved it.This is not fixed, the text box is still wrong when edited manually.	12.0	id=143701	22	False	False	chpe	1
id=657592	REOPENED	goocanvas	general	svn trunk	Other Linux	Normal normal		2011-08-29 07:44 UTC by	Murray Cumming	2012-02-16 20:23 UTC (	1 user	Createdtest_goocanvas_image.cThis test shows that an image appears scaled up when the canvas has GTK_UNITS_MM units. Presumably GooCanvasImage thinks that the image's size is in millimeters rather than pixels.	Createdtest.jpgThis is a 400x600 JPG for testing.Yes, I think you're right.You can set the "width", "height" and "scale-to-fit" properties to avoid the bug.Createdcairo_image_surface_get_widthThis patch at least fixes the size of the GooCanvasItem, though it crops the scaled-up image. Should we scale the CairoPattern too in that utility function, a bit like the code already does for scale-to-fit=TRUE?Also, I don't know how to get the GooCanvas from a GooCanvasImageModel, so we can convert the pixels for it too.The model objects can't access a GooCanvas (as they may be used by 2 canvas widgets at the same time).Since using a model is sort of deprecated, we could just document the issue and workaround and ignore it.Or to make it work we could leave the internal width and height settings at -1,and calculate them when they are needed in update()/get_item_at()/paint().This is easy to do, but may break old code that depends on the old "width" and "height" property behaviour.Also, I don't think you can use goo_canvas_convert_from_pixels(). A new function like goo_canvas_convert_pixels_to_canvas_units() is needed.(In reply to)Sounds fine to me, though we should really deprecate that model API.What's the difference?(In reply to)goo_canvas_convert_from_pixels() depends on the current canvas scale setting.It is used for things like converting mouse positions to canvas coordinates.Created0001-GooCanvasImage-Correct-the-size-when-using-units-oth.patchOK. This patch adds new conversion functions and uses them. However, I still don't know how best to scale the image.I've applied the patch, with minor changes.To scale the image to fit the specified width/height people can set"scale-to-fit".Does it need anything else?Thanks, but there are a couple of problems with that:1. The item should really have the correct width/height without me having set a sensible size.2. scale-to-fit does not keep the aspect ratio.For my own purposes, it would probably be enough to have a keep-aspect-ratio property, but I think fixing the default size would be more generally correct.Created0001-GooCanvasImage-Correct-the-image-appearance-when-usi.patchThis patch (which can be applied with git am) seems to fix it.I'm not sure about the position of this call in goo_canvas_image_new(): goo_canvas_image_convert_pixbuf_sizes (item, image_data);It is now after the varargs are processed, which means it could be after "pattern", "width", and "height" properties are set.But it should only be called when "pixbuf" is used, shouldn't it?Created0001-GooCanvasImage-Correct-the-image-appearance-when-usi3.patchYes, you are right. How about this one? I have moved some things in the _new() function to earlier. It works in my test case.We already respond to the pixbuf property setting. In fact, we could just choose to provide everything in one g_object_new() call, avoiding some duplication, but I guess you are concerned about performance.Damon, what do you think? It would be great to get this in and then have a tarball version that Glom could depend on.This change looks wrong:- item = g_object_new (GOO_TYPE_CANVAS_IMAGE, NULL);+ item = g_object_new (GOO_TYPE_CANVAS_IMAGE, "pixbuf", NULL);This should probably be removed too:+ g_print("scale_to_units=%f\n", priv->scale_to_units);Other than that you can commit if you want.Thanks for catching them. Pushed. Thanks.We still have the problem that the pixbuf cannot be scaled properly if the pixbuf is set before it is added (indirectly) to a canvas, and there is nothing that triggers a rescale when the CanvasImage is eventually in a canvas, so that goo_canvas_item_get_canvas() would succeed.We can override CanvasItem::set_parent(), but that still doesn't help if the parent is not in a canvas yet either.I feel like I need some way to know when goo_canvas_item_get_canvas() would start to return non-null. Unfortunately, it's not a property and it would be lots of work to make it a property.I suppose all the goo_canvas_image_convert_pixbuf_sizes() stuff should bedone in the update() function. But only if a pixbuf is being used and "width" and "height" haven't been set explicitly.Though to be honest this code isn't perfect anyway, as it assumes pixbufs are sized in pixels, whereas they may have any resolution. How much of that should GooCanvas try to handle? (I can't see a way to get the resolution from GdkPixbuf so that may be impossible anyway.)If you are using units like mm or points I doubt you would want the image sized in pixels anyway, as it wouldn't fit in with the rest of the canvas, which is resolution-independent. (i.e. it will be a different size on different resolution displays.)So I don't know what we should do here. Maybe just pick an arbitrary default resolution like 96dpi and scale to that. I think the developer will almost certainly be setting the width and height explicitly anyway, so it isn't too important.	18.0	id=657592	9	False	False	damon	1
id=143701	REOPENED	gtk+	Widget: GtkComboBox	2.12.x	Other Linux	Normal normal		2004-06-04 10:32 UTC by	Linus G Larsson	2008-02-11 12:22 UTC (	2 users	When I enter an URL in the location/address bar, if the list of URLs and smartbookmarks is too long to fit on my screen, it will draw the list of URLs upwardsinstead of downwards, causing me to see _even fewer_ URLs (actually, I just seethe four last smart bookmarks).This makes the feature virtually unusable to me.One solution is to use a dropdown box with a horizontal scrollbar, as Firefoxdoes. That way, the visible list will always be X entries long. Preferably, thesmart bookmarks would not be affected by this but would instead be attachedunder the dropdown box.	Reproducible in testentrycompletion, re-assigning to gtk+Steps to reproduce:0) Apply the attached patch to testentrycompletion.c, build and run1) Move the window to about the middle of the screen2) Type "am" into the middle entryExpected results:The completion list pops up, and is contained within the screen.Actual results:The completion list pops up (to the top), but is partially outside of the screen.Createdtestcase as patch against testentrycompletion.cHmm, I guess Kris didn't have use cases with lots of action items in mind whenhe designed the entry completion popup to scroll for the completions, but notfor the action items...How would you expect this to work, Christian ? Having two vertical scrollbars,one for the completions and one for the actions, doesn't seem to reasonable to me...Now it works the best way possible, I think. The "top part", with thecompletions, now has a vertical scrollbar. Under that is the actions tacked on,and it works beautifully. Thanks!Please don't close GTK+ bugs unless you have fixed them. This issue is stillunresolved.***has been marked as a duplicate of this bug. ***Looks like this wasn't propertly reopened; doing that now.I can still reproduce this.chpe, could you check if #143701 is still valid, please<Zeus> gtk+: REOPENED: GtkEntryCompletion doesn't work with many actions<chpe> reinouts: yes it is still valid	9.0	id=778271	5	False	False	rishi.is	1
id=778271	REOPENED	GEGL	gegl binary	git master	Other Linux	Normal normal	Default Gegl Component Owner	2017-02-07 10:17 UTC by		2017-02-14 20:29 UTC (	1 user	CreatedLD_DEBUG outputgegl builds and installs fine but I noticed when called from the gimp build it segfaults.Further testing showed that 'gegl --list-all' will segfault too.When running with valgrind to look for memory faults the program runs without error.Running the same command in gdb runs without errorstrace also reports no error.Adding some g_message() lines in a few places allowed me to see that the program segfaults in g_module_open() in gegl_module_open() when trying to open svg-load.soThe attached file gives output from running 'LD_DEBUG=libs gegl --list-all' indicating a problem looking for pthread_setname_np after loading libGL.I'm using v 375_26 of the proprietary nvidia drivers.I rebooted using the nouveau driver and the problem simply went away	Solution to the problem is to preload the libraried in the light order:export LD_PRELOAD="/path-to/libpthread-2.22.so /path-to/libGL.so"then run geglIt's hardly a "fix" to require everybody setting LD_PRELOAD.	2.0	id=757212	10	False	False	diogocamposwd	1
id=386569	REOPENED	gtk+	Widget: GtkFileChooser	2.10.x	Other Linux	Normal normal	Federico Mena Quintero	2006-12-16 18:44 UTC by	Yevgen Muntyan	2014-02-26 23:33 UTC (	3 users	Steps to reproduce:1) Hit Ctrl-O in something and look at the filename entry;2) If the entry is not visible, click the Editor button, do open some file, and repeat step 1 (so you hit Ctrl-O and see the entry).Actual result:the entry contains name of the first file in the list.Expected result:empty entry, so you can enter filename using keyboard.	You need a directory without subdirectories to reproduce it. If there are subdirectories, then the first item in the list is a directory, and doesn't enter its name into the entry.I can confirm. Using Ubuntu 12.10.Very annoying to have a file name filled in, it really slows down opening a file!CreatedGtkFileChooser: Don't always fill location entryWhen using the file chooser to open files, the file name of the firstfile in the tree view was selected each time you changed the currentfolder. This was OK for the case that the chooser only showed the pathbar, but very inconvenient when you used the location entry fornavigation and choosing files, because the selection-changed signalfrom the view caused the location entry to be filled with the name ofthe first file in the list.Notice: This problem only occurred when the first file in the listwasn't a folder or the chooser was set to open folders instead offiles.To avoid this behavior make sure to *not* select the first row in thetree view after loading the content when the location entry isvisible. Once the location entry is hidden again, make sure to selectthe first item in the tree view again, if it has no selection yet, sothat for the path-bar-only case the first item is always selectedautomatically, like it was before this patch.(In reply to)This is a quick go at this, I didn't test a lot. I thought just not selecting the first row at all in the case the location entry is visible is less complicated that blocking signals and what not. I'm sure there are still issues with this fix ...Comment onGtkFileChooser: Don't always fill location entrySometimes it can be convenient to just press enter, and open the first selected folder, even if the entry is empty. So not selecting anything isn't a good idea ...CreatedGtkFileChooser: Don't always fill location_entryOnly fill the location entry with the file name of the tree view'sselected file when the selection was done by the user.When the file chooser action is GTK_FILE_CHOOSER_ACTION_OPEN, itselects the first file in the tree view once loading has finished. Forthis case we don't want it to insert the file name in the locationentry, as it hinders efficient navigation using the location bar. Toachieve this, use a priv variable to keep track of whether theselection-changed signal was caused by a user action or by the filechooser itself.CreatedGtkFileChooser: Don't always fill location_entryOnly fill the location entry with the file name of the tree view'sselected file when the selection was done by the user.When the file chooser's action is GTK_FILE_CHOOSER_ACTION_OPEN, itselects the first file in the tree view once loading has finished. Forthis case we don't want it to insert the file name in the locationentry, as it hinders efficient navigation using the location bar. Toachieve this, use a priv flag to keep track of whether theselection-changed signal was caused by a user action or by the filechooser itself.CreatedCorrected commit message, sorry for spamming this bug :)Very nice patch. I like the idea of keeping a flag for this, at least untilis fixed.I'll include your patch with a few modifications, as the following fails:1. Create a little hierarchy like foo/ foo/somefile.txt foo/bar/ foo/bar/blah.txt2. Go into foo/ and click on somefile.txt.3. Double-click on bar/At that point the location entry should be cleared, but it isn't. I think we just need to check for your priv->auto_selecting *inside* update_chooser_entry() instead of outside, as that function is also responsible for clearing the entry when switching folders.Pushed to gtk-3-10 as 31da6d5d5, and to master as 70eb35d569.I just tested, but the problem you describe here is not fixed, even with the change you made. We need to explicitly clear the entry.CreatedGtkFileChooser: Explicitly clear entry after loadingCommitassured that in caseof the GTK_FILE_CHOOSER_ACTION_OPEN action we don't fill the locationentry with the automatically selected first row's file name when themodel has finished loading. But that is not enough, we must alsoexplicitly clear the entry case it was not empty before changing thedirectory.CreatedGtkFileChooser: Explicitly clear entry after loadingCommitassured that in caseof the GTK_FILE_CHOOSER_ACTION_OPEN action we don't fill the locationentry with the automatically selected first row's file name when themodel has finished loading. But that is not enough, we must alsoexplicitly clear the entry for the case that it was not empty beforechanging the directory.I wonder if we should clear the entry when navigating to the parent folder, too. (Only talking about GTK_FILE_CHOOSER_ACTION_OPEN again). Currently, when the entry contains a string that is not the filename of the last selected file, and you go to the parent folder with the pathbar, the 'custom' entry text will stay unchanged.The whole issue with clearing the entry or not when changing folders is a bit tricky at the moment. It seems that some things work 'by accident' here and there, for example: when you are in folder B and go up one folder to folder A, you get a pending selection of folder B, which gets selected after the folder A's model has loaded, but the location entry is *not* (and that is right!) set to the name of folder B because B is a folder, not because B was a pending selection.That this is more 'working by accident' becomes clear when you look at the select folder mode: when you go up from folder B to A, you end up with 'B' filled in the location entry, which is not desirable.***has been marked as a duplicate of this bug. ***	16.0	id=745380	8	False	False	ragnese	1
id=170800	REOPENED	metacity	general	unspecified	Other Linux	Normal normal	Metacity maintainers list	2005-03-18 14:14 UTC by	Reinout van Schouwen	2007-07-25 07:52 UTC (	5 users	Distribution/Version: Mandrake CookerIn several themes, (Smokey Blue and Glider are affected and possibly more), thewindow icon of a child dialogue (like Find in Epiphany) is wrongly inheritedfrom the parent. Epiphany explicitly sets the window icon for the dialogue.This is especially important in Epiphany because the window icon is equal to thefavicon of a website, if a favicon is set.	CreatedEpiphany Find dialogue using geek.com favicon***has been marked as a duplicate of this bug. ***I think this must be a Metacity or Epiphany bug because I don't think the theme has any control over what window icon is actually drawn. Does it occur in any other applications?Epiphany is just using gtk_window_set_icon_name, so this must be metacity then. The weird thing is that it's apparently theme-dependent....Wpiphany no longer has a find window, and I can't seem to reproduce this bug with any other dialouge windows (Personal Data, Toolbars). Can you confirm this if is still a problem for you.Dupsays this happened with the about dialogue too.I can still reproduce this with the about dialogue.Definitely a Metacity issue.We no longer change Epiphany's window icon, closing as OBSOLETE.Reopening, this is a metacity bug regardless of whether we change the window icon in epiphany or not.	10.0	id=757242	6	False	False	tristan	1
id=771369	REOPENED	nautilus	File and Folder Operations	3.21.x	Other Linux	Normal normal	Nautilus Maintainers	2016-09-13 16:05 UTC by	Mohammed Sadiq	2016-09-13 21:24 UTC (	1 user	In nautilus search results, if the selection for batch rename contains both files and containing parent folder, the rename may fail. This probably happens because Folders are renamed first, thus the containing files cannot be found anymore.How to reproduce:1. Create some folders test1, test2, test3.2. Create files within those folders with filename 'test' in it.3. Search for the word 'test' in Nautilus.4. Select all the results and rename.Result:The folders get renamed, but the content within the folders may not.Expected result:The files and folders should be renamed.	*** This bug has been marked as a duplicate of***Sorry. The bug is not about segfault after fail. But Its about the actual rename is not happening for the selection, which it is supposed to, and have no reason to fail if renamed in the right order (File first, then folders).ah right, I missunderstood it. We do already some handling and reordering to avoid some fake positives on conflicts. This would be just another reordering to take into account.	3.0	id=386569	14	False	False	scott.vivian	1
id=724096	REOPENED	gtk+	.General	unspecified	Other All	Normal normal		2014-02-11 04:47 UTC by	William Jon McCann	2016-05-13 18:24 UTC (	7 users	Apps that use a searchbar have a spurious border visible whenthe searchbar isn't revealed. You can see this in devhelp orin gtk demo.	Createdsearch-bar: don't show the widget until we're ready to revealOtherwise we leave a border visible.After debugging a little, the problem here is that we enforce the allocation of visible widgets to be at least 1x1. This is a historic relic from when every widget had a window (X11 windows must be at least 1x1).The real fix here is to take out that restriction. The core of GTK+ should not have any assumptions about minimum widget size, and window widgets should just request a suitable minimum size.This problem has 4 duplicates in totem's repo. Could we use Jon's hack until we really fix it?***has been marked as a duplicate of this bug. ***This commit does not work for me. I still get search bar border leak. I made a patch for this.CreatedOnly add search-bar style class when revealedCreatedScreenshotThe patch is not perfect. Need better solution.I'm confused about the status of this bug.1. The status is fixed, but I don't see any committed patches, and Trinh Anh Ngoc is apparently still working on it. Is it fixed or not?2. The screenshot indoesn't seem to actually show the search bar or the problem as reported (since the problem is only apparent when the search bar is supposed to be hidden).Allan. That screenshot was taken after applying my patch.Matthias Clasen with his commit:But it didn't solve the problem.***has been marked as a duplicate of this bug. ***	11.0	id=170800	16	False	False	chpe	1
id=745380	REOPENED	mutter	wayland	unspecified	Other Linux	Normal normal		2015-03-01 18:59 UTC by	Daniel Stone	2016-11-09 12:24 UTC (	4 users	SSIA. Running Shell's Wayland session on F22, pressing Alt-Tab repeatedly between gnome-terminal (Wayland native) and Chrome (XWayland), sometimes it will restack the windows but fail to actually switch focus. Moving the pointer (I have FFM enabled) will actually fix the focus.mutter 3.15.90-1	Still present in 3.18.0.And in latter versions as well. As a fun datapoint, with the current setup:eDP-1 (internal panel, primary): Chrome fullscreenDP-1 (external): terminal part-screenIf I have my cursor over Chrome, Alt-Tab usually works fine. But sometimes not. If I have my cursor over the terminal, Alt-Tab basically always fails, and focus reverts to the terminal.This sound liketooIt does sound like it, except I'm using an XWayland which forces CLOCK_MONOTONIC after discussing it with Jasper ... still no luck.I have the same problem with mutter 3.20.2 on Arch linux. I've applied CLOCK_MONOTONIC the patches fromto mutter and xwayland but the problem is still there.	5.0	id=724096	14	False	False	mclasen	1
id=603954	REOPENED	totem	Movie player	unspecified	Other Linux	Normal normal	General Totem maintainer(s)	2009-12-07 08:59 UTC by	Philippe Normand	2011-03-29 13:01 UTC (	2 users	Follow up on... The player should be able to play the SMIL linksfrom that bug.	*** This bug has been marked as a duplicate of***One needs to look at components before closing as dupe...	2.0	id=771369	6	False	False	csoriano	1
id=749188	REOPENED	Pan	general	pre-1.0 betas	Other Linux	Normal normal		2015-05-10 10:00 UTC by	Dominique Dumont	2016-03-30 15:46 UTC (	3 users	HelloA Debian user reported the following problem:=====When "Show Matching Articles' Threads" is set, sometimes some articles(and their whole threads) are missing from the headers pane. Selecting"Show Matching Articles" (or "Show Matching Articles' subthreads") andthen "Show Matching Articles' Threads" again sometimes help.I've been able to reproduce it on specific articles. What was"special" about these articles is that they were in newsgroup A, buthad references (in the References header) to articles in anothernewsgroup B.In pan/data-impl/my-tree.cc (see attached patch for exact place), theassumption is made that, for each article N: thread of N == thread of parent of NThis is true only if the parent of N is known! If the parent of N isnot in the current newsgroup (or not in the downloaded headers), then"thread of parent of N" is empty, because "parent of N" does notexist.The attached patch fixes this.====The patch isOriginal Debian bug:I'm going to apply this patch to Debian's version of Pan 0.139All the best	may be related toThanks for your bug report. This has been fixed in:Closing.The proposed patch can also be applied on pan 0.140 around lines 300 of the same file.I can't say if this indicates a potential bug or not.Possibly. It would be great to confirm with the original reporter who was seeing the bug.I'm the original reporter. My patch originally applied to function apply_filter, which is now "around lines 300". Commitapplies it to function apply_rules. When I wrote my patch, that is against version 0.133, apply_rules did not exist. I'm not aware of what apply_rules does vs what apply_filter does.Can someone explain to me rules vs filter?I mean, my gut feeling is that my patch should be applied to both functions apply_rules and apply_filter, but maybe the explanation will make me change my mind :)Many thanks for your comment, Lionel.It really looks like the patch should be applied in both places. Would you be able to test Pan from git if I apply the patch?Hi Heinrich, I believe you wrote that code originally, do you still remember what apply_rules does vs what apply_filter does? Please see the above comments for details. Thanks!	7.0	id=525574	27	False	False	stefw	1
id=731244	REOPENED	california	ux	master	Other Linux	Normal normal	California Maintainers	2014-06-05 00:14 UTC by	Jim Nelson	2015-02-05 01:49 UTC (	1 user	Keypad plus, minus, and star adjust the display font size, but the "regular" versions of those keys are currently unbound.	Yes, please.Pushed to master, commit 540c64I had to revert this due to. Fixing that will require more work than I'm comfortable with this close to release.	3.0	id=603954	9	False	False	bugzilla	1
id=686628	REOPENED	rygel	librygel-renderer	git master	Other Linux	Normal normal		2012-10-22 11:45 UTC by	Jens Georg	2013-12-21 10:18 UTC (	1 user	I suppose this was done to get maximum compatibility but UPnP-wise that's just wrong, see AVTransport:2 spec, Section 2.4.13	CreatedFix seeking behavior when using REL_TIMEAttached patch fixes behavior of 'Seek', so that relative seek is always done relative to current time. No value checking is done, thus calling player's seek with negative time is possible.Committed with minor style fixI think the fix isn't correct. The relative is not from the current time but from the current track.see AVTransport:2 spec, Section 2.4.13 :"For example, if theRelativeTimePosition state variable contains the value “00:05:30” before the Seek() action, thenSeek(InstanceID, “REL_TIME”, “00:00:10”) will move the current position to 10 seconds from thebeginning of the track and the RelativeTimePosition state variable will contain the value “00:00:10” afterthe Seek() action is completed."With this fix we have 00:05:40 instead of 00:00:10.I think the previous code was less wrong.Oh.Still, reverting this makes UPnP or DLNA CTT fail IIRC, so this might need some investigation.	5.0	id=760291	5	False	False	mitch	1
id=760291	REOPENED	GIMP	User Interface	git master	Other Linux	Normal normal	GIMP Bugs	2016-01-07 20:04 UTC by	Kevin Cozens	2016-10-17 14:48 UTC (	0 users	Open the preferences dialog box. Selecting any option category in the column on the left or selecting settings from the large area on their right makes the text of selected entry disappear as it is shown as white text on a white background. It makes it impossible to see read what has been selected.Possibly related is another change in appearance of the Preferences dialog box. The buttons in the bottom right corner just show as text instead of buttons as they do in 2.8.10.I'm running an up-to-date version of Linux Mint 17.2.	Please attach a screenshot. The buttons are unrelated, that's a globalGTK+ setting.CreatedPreferences dialog box showing selected options as white on whiteAnd this is the Default theme again?Please try with the default theme.I mean the default system theme...Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!CreatedPreferences dialog box showing selected theme "System"I have attached an image showing the theme selection section of the Preferences dialog box. On the right hand side I have selected the theme called System. You can't see the entry that is selected because it is shown as white text on a white background. Notice also that the word "Theme" in the column of the left is also being shown as white on white.	7.0	id=749188	8	False	False	pknbe	1
id=773096	REOPENED	GStreamer	gstreamer (core)	unspecified	Other All	Normal normal	GStreamer Maintainers	2016-10-17 12:27 UTC by	Stian Selnes (stianse)	2016-10-21 12:23 UTC (	2 users	On the first buffer, it's possible that sink_segment is set butsrc_segment has not been set yet. If this is the case, we should notcalculate cur_level.time since sink_segment.position may be large andsrc_segment.position default is 0, with the resulting diff being largerthan max-size-time, causing the queue to start leaking (ifleaky=downstream).One potential consequence of this is that the segment event may bestored on the srcpad before the caps event is pushed downstream, causinga g_warning ("Sticky event misordering, got 'segment' before 'caps'").	Createdqueue: Fix race when calculating cur_level.timepushed as- queue: Fix race when calculating cur_level.timecommit cfdb97a135ab17b93fd0ff694763868794b14014Author: Sebastian Dröge <>Date: Fri Oct 21 15:22:28 2016 +0300 Revert "queue: Fix race when calculating cur_level.time" This reverts commit. It breaks the unit test, although it ensures that only correct values are used for calculations. Needs to be fixed up.Comment onqueue: Fix race when calculating cur_level.timeRunning suite(s): queue81%: Checks: 11, Failures: 2, Errors: 0elements/queue.c:537:F:general:test_time_level:0: Failure 'time != GST_SECOND' occurredelements/queue.c:645:F:general:test_time_level_task_not_started:0: Failure 'time != 4 * GST_SECOND' occurred	4.0	id=686628	6	False	False	mail	1
id=503392	REOPENED	Gnumeric	GUI	git master	Other All	Normal normal	Jody Goldberg	2007-12-13 10:54 UTC by	Jody Goldberg	2008-01-25 00:06 UTC (	2 users	Several small problems with cell comments and merged cells.1) undoing a merge did not redraw the merged region2) undoing a merge with a comment would create two comment markers3) after a merge we could no longer edit the commentAttached patch fixes things at the expense of repositioning all objects when cols are resized.Please review.	CreatedRemove hack of having view change anchorlooks good to me!Something is still up:1. Add comment "Testing" to A1.2. Merge A1:C3.3. Undo.My comment is gone. This is independent of the fix for.	3.0	id=773096	11	False	False	stian.selnes	1
id=738467	REOPENED	system-monitor	general	unspecified	Other Linux	Normal normal	System-monitor maintainers	2014-10-13 15:26 UTC by	Matthias Clasen	2017-01-25 02:27 UTC (	6 users	+++ This bug was initially created as a clone of+++Created an attachment (id=288374)screenshotSummary describes the problem completely. I attach the screenshot of geary mail client but it is not the only application where the problem appears. For example it appears in the app chooser dialog in the nautilus and even in the gnome-system-monitor (in the process list).	CreatedEnsure icons are at the right sizeGTK+ will no longer force-scale icons that are not available inthe right size, unless it is told to do so.***has been marked as a duplicate of this bug. ***Thanks Matthias for the fix, I have read about the GTK changes causing this, but still did not have the time to investigate/ask around how to fix it. Checked the code, so if I see it in another app, will propose patches.This problem has been fixed in our software repository. The fix will go into the next software release. Thank you for your bug report.I thinkis related but might be a bug in gnome-tweak-tool.Createdscreenshot of gnome-system-monitor 3.18.0.1Looks like this regressed, because this is what I see on 3.18.0.1.don't comment on bugs without reopening them.if you want a response, that is...Strange, I have 3.18.0.1, have installed xchat-gnome, but the xchat-gnome icon is of standard size, just like all the others. The difference between the screenshot and my setup is the language, but that should not influence icon sizes, as far as I know.I cannot reproduce with jhbuild-built gnome-system-monitor 3.18.0.1 either.I see the bug with gnome-system-monitor 3.18.0.1-1~wily1 from the GNOME 3 Staging PPA for Ubuntu 15.10.One difference that I notice between my build and the Ubuntu package is that Ubuntu's g-s-m is built with --enable-wnck. I'll try to figure out how to tell jhbuild to provide that flag and see if it makes a difference.If I build gnome-system-monitor with --enable-wnck, I can reproduce the large xchat icon with git master.NB: I don't know if this could possibly matter, but for full disclosure I feel I should mention that I have a ~/.local/share/applications/xchat-gnome.desktop, that differs from the system one in the Exec line only (I launch an ssh process to establish a tunnel to my ZNC before starting the GUI):--- /usr/share/applications/xchat-gnome.desktop 2014-11-18 11:47:16.000000000 +0200+++ /home/mg/.local/share/applications/xchat-gnome.desktop 2012-09-26 09:24:44.503283290 +0300@@ -3,7 +3,7 @@ GenericName=IRC Chat X-GNOME-FullName=XChat-GNOME IRC Chat Comment=Chat with people using IRC-Exec=xchat-gnome+Exec=sh -c 'irc-tunnel & xchat-gnome' Icon=xchat-gnome Terminal=false StartupNotify=trueThanks for the investigation, it makes sense, and --enable-wnck alone could be enough to cause this, as we have a WNCK application icon lookup too, and I'm not running with wnck enabled. Will try this and see if I can come up with something.I have this problem too. Screenshot:Linux Mint 18.1 Cinnamon. Gnome System Monitor 3.18.2-1ubuntu1	11.0	id=731244	8	False	False	jim	1
id=446355	REOPENED	pango	general	1.12.x	Other All	Normal normal		2007-06-11 13:08 UTC by	Mehmet YASAR	2007-09-07 19:06 UTC (	2 users	Please describe the problem:Using some slighly different markup string, pango_parse_markup produces different result.Steps to reproduce:Actual results:Expected results:Does this happen every time?yesOther information:	Createdtest applicationusing the test application with input string :"<i>Hello</i><span font_desc="20"><i>world</i></span>"we get :range: 0-5desc = Italicrange: 5-10desc = Normal 20range: 10-2147483647desc = Normalthe word "World" should be in italicIf I add a character (for example X) between <i> and <span we get a correct result:"<i>Hello</i>X<span font_desc="20"><i>world</i></span>"range: 0-5desc = Italicrange: 5-6desc = Normalrange: 6-11desc = Italic 20range: 11-2147483647desc = NormalTested with the following version of Pango- Pango 1.12.3 with glib 2.10.3 (with linux, Ubuntu dapper 6.06)- Pango 1.14.5 with glib 2.12.4 (under win32)This happens because markup parser uses pango_attr_list_change() to add parsed attributes and so causes the two <i> tags to be merged.I'm simply changing it to a pango_attr_list_insert(). I can't imagine any serious undesired effect. Owen?2007-06-11 Behdad Esfahbod <>– the parsing with pango_parse_markup is not coherent * pango/pango-markup.c (pango_parse_markup): Use pango_attr_list_insert() instead of pango_attr_list_change() as merging adjacent attributes of the same kind is not a safe operation and can change the derived font of a segment in an unexpected and incorrect way.A) You are basically saying "pango_attr_list_change() doesn't work, let's not use it" => FIXED :-). Obviously delving into the innards of pango_attr_list_change() is never an appealing prospect, but I don't think we should just say that it doesn't work any more since we added font merging.B) I can't *offhand* think of any downsides to using insert() in this case other than we'll produce inefficient attribute lists. Note that pango-markup.c is not trying at all for efficient attribute lists since it assumes that change() will do that for it.(it's hard for me to guess whether there is much of an overallwin from producing more efficient lists for markup ... obviously therewill less memory usage and PangoAttrIterator will do less work, but you do more work to produce the lists...)(In reply to)My line of thought was that _change() is not needed here because we are appending attributes at the end of the list mostly, and one attribute per one markup tag. But I see your point about fixing _change(). The problem is that pango_attr_list_change() is documented in doing the merge. So, changing its behavior is a slight API change. The semantic change here of course is to consider all attributes affecting the font of the *same type* for merging purposes. Do you think that's fine?From what I understand, it generates exactly one attribute per markup tag. So, I don't see any reason to try to merge them.may be relevant.OK, I didn't look at the markup code close enough; it does look like theresulting attributes should be fairly efficient in most cases even withinsert.The docs for pango_attr_list_change() have an implied caveat thatthe merging and replacing is not supposed to change the end effect of the resulting list over what insert() would produce. That's not even closeto right for fonts these days. There are various approaches that could be taken:1) Make change() do the font description merging so that there is only ever one font attribute for any position the text.2) Make change() sensitive to when identical (*) font description attributes can be merged and when one font description attribute can replace another without changing meaning.3) Just never do any merging of font description attributes at all.3) is easiest to implement but breaks the basic idea of change() -that you can apply an identical attribute in a loop and not havethe list grow without bound. 2) breaks the current logic of change()and would require some significant rewriting. 1) is, I think, quite a bit easier, since the basic idea of the logic in change()"one attribute of each type on each segment" is preserved. 1) does, however, come close to an API change, though I'd considerit within reason. It might be good to get Morten's feedback on whetherit would cause problems for gnumeric ... I know gnumeric was usingattribute lists in somewhat advanced ways, though I don't know ifthey are using change() or not.(*) One obvious breakage is that pango_font_description_equal() doesn't look at the mask at all, so it is unsuitable for use in pango_attr_font_desc_equal(); not the principal problem here, butneeds to be fixed.Hmm, 1) does produce differences that are quite different from insert(),though not that different from the current (broken) behavior of change(). ------------------ italic ----------- bold -------------- style=normal, weight=normalIf those three are inserted with insert() in that order, then theresulting list will have the three runs of different fonts: IIIINNNBBBBBBBBBBBBut if we make change() merge font descriptions, then the effect is different: you get: IIIINNNNNNNNNNNNNNSince the information that the bold is a "later" attribute thanitalic is lost. Now, actually, the proposed behavior is more inline to what someone might expect than trying to copy the effect ofinsert(), so I think it's OK.Before digesting all your comments, lemme say that what makes it a lot more complicated code-wise is that we have lots of attributes playing here, not only font desc. There are separate attributes for style, size, weight, stretch, etc...2007-06-12 Behdad Esfahbod <> * pango/pango-attributes.c (pango_attr_font_desc_equal): Compare set fields of two font descriptions for equality too, as pango_font_description_equal() doesn't check the mask.For markup I actually prefer inserting. That better reflects what the user asked for in eg. "<i>...<span font_desc="Normal">...<i>...</i>...</span>...</i>". With _insert, you get exactly three attributes that reflect the tags.As for option 1) generating different results, I agree that the overriding is what the user expects. I'll see if I can hack that.	12.0	id=446355	10	False	False	myasar	1
id=527272	REOPENED	ghex	general	2.21.x	Other Linux	Normal normal	Jaka Mocnik	2008-04-10 03:13 UTC by	Jonathon Jongsma	2008-08-13 04:24 UTC (	1 user	In Nemiver, I am using the GtkHex widget to display memory values. The widget itself is in a Notbook inside an HPaned widget. If I pack the widget into a ScrolledWindow, it will behave itself, but if I don't put it into a scrolled window and just pack it directly into the notebook container, it floats above the rest of the window at 0,0. Screenshot attached.	Createdscreenshot of the floating GtkHex widgetCreated[PATCH] Fix 'floating' GtkHex widget issue () * src/gtkhex.c (draw_shadow, gtk_hex_size_allocate): Fix the allocation code to allocate the child widgets relative to the GtkHex allocation.x and allocation.y coordinates instead of (0,0). Fixes--- ChangeLog | 6 ++++++ src/gtkhex.c | 19 +++++++++++-------- 2 files changed, 17 insertions(+), 8 deletions(-)Looks good. Please commit to trunk and gnome-2-22 branch. Thanks!committed as r1203re-opening this because this seems to have caused ghex2 to render the hex widget at the wrong location	5.0	id=738467	10	False	False	mclasen	1
id=757212	REOPENED	epiphany	Interface	3.20.x	Other Linux	Normal normal	Epiphany Maintainers	2015-10-27 19:40 UTC by	Julián Unrrein	2016-08-21 20:27 UTC (	3 users	CreatedHighlighted entry in dropdown menu.In a highlighted dropdown element, the second line of text (the URL) is hard to see because the contrast because of the grey color of the text and the blue background.See attachment.	Are you really using 3.18? I thought we fixed this for 3.18. :/ I know it's broken in master again due to theme changes....Running "epiphany --version" in console outputs "Web 3.18.0".I'm using OpenSUSE Tumbleweed by the way.Also using Gtk 3.18.1.This one's fixed.I'm sorry if it's bad practice to comment on closed reports, but this bug isn't fixed in Epiphany 3.20.3. See attachment.CreatedHighlighted entry in dropdown menu (3.20.3 version)CreatedHighlighted entry (3.20.3) (correct version)(In reply to Julián Unrrein from)No, that's fine.It should really use white text rather than dark gray. In 3.18 and prior it used light gray, which was even worse to read.This is not a simple fix as we have to dig into GdTwoLinesRenderer. There are hardcoded color values there, which is wrong, but apparently we don't get reasonable theme colors from GTK+ anymore.	8.0	id=503392	9	False	False	aguelzow	1
id=750994	REOPENED	gtk+	Backend: X11	3.16.x	Other Linux	Normal normal		2015-06-15 12:57 UTC by	Kamil Páral	2017-01-05 01:05 UTC (	6 users	On X11, if you do a right mouse button click, the first mouse wheel event is ignored. The same happens when you press Alt+Tab, Win key or probably some other keys. Please see the attached video.This does not happen on Wayland.It happens only with gtk3 apps, tested with gedit and firefox (using gtk3 on Fedora 22). It does not happen with gtk2 apps (empathy, zim) or qt apps.Reproducer:1. Open gedit, populate it with some text2. Verify that scrolling works as expected3. Do a right mouse click, either inside gedit, on its toolbar, or completely outside of its window, it doesn't matter4. You can do some more right or left mouse button clicks to cancel any context menus, etc5. Scroll up or down a single time (one notch) in gedit window - see that nothing happens6. Try to scroll again - this time it scrolls properlyI found this in Firefox, because I have a gesture mapped to right mouse click held + wheel up or down. And the first time I use this it never works, I have to repeat scrolling, which is quite confusing.gtk3-3.16.3-1.fc22.x86_64gnome-shell-3.16.2-1.fc22.x86_64libinput-0.17.0-2.fc22.x86_64xorg-x11-drv-libinput-0.10.0-5.fc22.x86_64Fedora 22	I can't attach the video, the size limits are too strict. It's available here:Createdlist of installed packagesHere's a Firefox bug report where people seem to be affected by this bug:This is due to xi2 protocol deficiencies around valuators. I'm sure we have a bug with more of the backstory somewhere, but I can't find it right now.(In reply to Matthias Clasen from)There's a more recent recap of this in. I'm not really thrilled by the choices here, I guess we'll eventually have to go down the "XIQueryDevice on everything" path.Patch coming.Createdx11: Query pointer devices' scroll valuators on toplevel enter eventsWe used to "invalidate" scroll valuators, so the next scroll event couldbe used as the base for the next scroll deltas. This has the inconveniencethat it invariably consumes the first event received after enter and,due to interactions with WM overeager passive button grabs, there's apossibility we don't scroll at all if we receive interleaved "smoothscroll" XI_Motion events and XI_Enter events (Normally triggered by regularscroll wheels in mice).In order to fix this, and at the expense of some sync-call overhead onXI_Enter events (one XIQueryDevice call per slave device), query thecurrent scroll valuator state for all the slaves of the entered pointer,so we do know beforehand the right base values. If new devices are pluggedwhile the pointer is on top of the client, the initialized scroll valueswill match the valuators'.pushed as- x11: Query pointer devices' scroll valuators on toplevel enter eventsThis patch has been reverted as it broke a number of other scenarios, which brings again the behavior described in this bug. I'm reopening this bug, just to leave it dry up in bugzilla as a recipient for possible dups. It's not that I don't consider it a huge trait of smooth scrolling implementation in GTK+/X11, but at this point I consider nothing can be done anywhere in the stack to get rid of it, So I'll start considering this as "per design".So the options here are 1) Wait for wayland or 2) live with it, sorry for that.That's unfortunate. Thank you for explanation. Hopefully Wayland it not that far away.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Chromium faces this problem as well. SeeThe attempted solution was to use a heuristic to determine if a device has a mousewheel and to fall back to xinput1 for those devices.It seemed to work, but the heuristic is broken (it is wrong differently with both Xwayland and xorg-x11-drv-libinput).Does this solution seem viable for gtk if we can update the input drivers to report mousewheels directly and not rely on heuristics?	13.0	id=750994	11	False	False	mclasen	1
id=776663	REOPENED	nautilus	general	unspecified	Other Linux	Normal normal	Nautilus Maintainers	2016-12-31 23:53 UTC by		2017-01-04 08:43 UTC (	1 user	I like to give my directories fairly long and informative names. That results in big path buttons at the top. Since nautilus draws its own window decorations, there's often very little space between the large path buttons and the buttons on the right, and that's really the only place to click and grab the window to move it. (Several gnome apps have this problem and it's been bugging me for a long time.) Please find a way to leave more space somewhere in that top toolbar.	you can drag the window by any button in the headerbar. closing as invalid.Nope. Grab a path button and you drag a URL, doesn't move the window.That's also a bizarre user interface feature. Buttons don't work this way under normal circumstances.oh yes, that seems an old feature. I agree it's kinda bizarre, I will remove it so you can grab from any button in the headerbar.	3.0	id=123152	5	False	False	stappers	1
id=741524	REOPENED	gnome-software	General	3.14.x	Other Linux	Normal normal	GNOME Software maintainer(s)	2014-12-14 19:34 UTC by	Antoine Saroufim	2016-02-23 09:44 UTC (	2 users	When installing an app or an addon through gnome-software, gnome-software stops display any data related to available apps or installed apps until packagekit finishes installing. In my opinion, this should not be the case, the user should be able to queue several apps for installation. If that is not possible, then gnome-software should tell the user to wait before searching for other potential apps or it should just dim its windows so the user can comprehend that he/she has to wait.	I saw that as well yesterday when installing a rather huge game after installing F23.PackageKit can't currently cope with more than one thing performing operations at one time. We tried, but there are so many threadsafety issues with the libraries concerned we turned it off by default (I spent months of my life trying to make it work). If you use xdg-app undles (the future) you can view, update and install all at the same time 'Live'.Reopening because that's really not good enough. At the very least, a link to the "upstream" (PackageKit) bug would be needed to close this as NOTGNOME.	3.0	id=775642	15	False	False	slaf66	1
id=123152	REOPENED	conglomerate	Code	CVS	Other All	Normal normal	conglomerate list	2003-09-24 23:26 UTC by	David Malcolm	2005-05-08 22:45 UTC (	0 users	Conglomerate currently tries to collapse unnecessary whitespace in the maineditor view, similar to the way an HTML browser works.This should be made a per-element boolean property in the dispspec(defaulting to compression being on).Various verbatim tags should have this DocBook <progamlisting>, for exampleThe "Clean XML Source" tool should respect this setting	looks like accidently closed, reopened.( spent a few words on it when closing it again ( or confirm that it needs love ))	1.0	id=741524	6	False	False	bugzilla	1
id=755418	REOPENED	evolution	Mailer	3.18.x (obsolete)	Other Linux	Normal normal		2015-09-22 14:43 UTC by	Bastien Nocera	2015-11-19 07:42 UTC (	4 users	Createdios screenshotThe "Remote content download had been blocked for this message." info bar is too distracting with its blue colour, and the amount of space it takes.The same functionality in GMail, and in the iOS mailer is using the same colour chrome as the rest of the message.GMail example:iOS example as attachment (although the positioning of the label at the bottom of the mail probably isn't the most judicious).	Thanks for a bug report.The first part, the color, it's defined in the theme. This is the standard GtkInforbar. I agree the blue background doesn't look nice, but that's what you get when you use the theme you use.The second part, the amount of space it takes, it's less percentage than the attached screen shot from the iOS, but more than the GMail - seems to me. It's due to the more information being shown there, with a try to explain possibilities.You shouldn't be using an info bar here, normal chrome should do. I've added the ui-review keyword so that designers can comment as well.(In reply to Milan Crha from)It's the wrong widget because it's a widget that brings attention. It shouldn't.The iOS one is at the bottom of the mail, it doesn't encroach on my preview.(In reply to Bastien Nocera from)That's question of a personal preference, I'm afraid. For me, it should bring attention, because:a) there is some reason why the message doesn't look correct (missing images)b) there's a hint what there can be done to make it look correctc) the bar clearly looks like not being part of the messageI find the bar quite distracting myself.This is amplified by the fact that I only seem to be able to whitelist sites/messages for which to load remote content by default, but there doesn't seem to be an option that says 'Never load remote content from xyz', so I basically get this bar popping up (animated, with a short delay!) for most mails I receive, unless I give in and whitelist sites just to make it stop.I added org.gnome.evolution.mail.notify-remote-content=true into preferences, thus users whom do not like the change can easily disable it. There's a UI in Preferences and also the drop down in the notification has "Do not show this message again" option. The idea about "never offer load" seems fine, but may make the UI too complicated, which I'd like to avoid. Thus the option was added. There are new strings added and change UI, thus only the development version has the fix.Created commitin evo master (3.19.2+)This absolutely isn't what I requested. I need new configuration options like I need a hole in the head :(Out of curiosity: Will there still be a way to download remote content for selected mails, e.g. via the right-click context menu?Example: I generally don't want to download remote content, but e.g. might want to print my (html) airline booking confirmation or hotel reservation or such and download the remote resources to make that show up correctly.Or is it an always-or-never choice and if I say 'Don't show this message again' then I also won't be able to properly render html mails that I do want to see?It looks to me like the new option doesn't really cater for this.All you both claim about is the notification that the message possibly doesn't render properly, because some content is remote, which is not downloaded yet, because the user has disabled download for the remote content. There was a request to have such notification, so it's there.You do not like it. Okay. I do not like offered options to "solve" it, thus I added the configuration option to get back to the previous behaviour, which is 'do not notify about missing remote content'. The configuration option is a lame way of dealing with you, I agree, but as I said, the other options doesn't work for me. We can fight about personal opinions, no doubt, but I'd prefer not to do it.As this is only about the notification, which, by the way, makes it easier to manage remote content for senders/sites, there wasn't removed any functionality regarding manual remote content download. The menu item View->Load Images (Ctrl+I), is still there, regardless this notification being shown or not.I thought Evolution was a GNOME application and you would at least listen to the GNOME designers, which is why I requested the help of designers (with the ui-review keyword). I even tried to do prior art research for you. I'm disappointed...(In reply to Milan Crha from)...No, it's really not. Design is not a matter of subjective opinion. There is good design and there is bad design. Designs can be tested to see how effective they are, and there are established techniques and principles for doing good rather than bad design.I'm glad to see some justifications here, that's a good start. There's nothing here to indicate what the level of visibility should be, though. All a and b mean is "we have some information to display": they don't indicate how or when the information should be displayed.Reason c is wrong for a few reasons. First, because it is better to show the missing image prompt as if it is part of the message itself: this removes the distance between the prompt and where the image would appear, and correspondingly makes it easier to understand because it is in context. Second, whether or not you download the image will typically be dependent on the subject and sender of the message. By placing the info bar above the message header and making it so prominent, you are distracting from the information the user needs to see first. In effect you're screwing with the natural order in which the view will be read.Something closer to what Gmail does seems superior for these reasons.I don't understand why an option was added here: who do you expect to use this hidden gsettings key? How do you expect them to find it?(In reply to Allan Day from)Even I mentioned it as "missing image", in practice it's not only about images, it can be anything what the user placed inline as a remote reference, including CSS styles, thus the message can completely look odd until the CSS is downloaded.I partly agree with the rest. I only prefer to be able to distinguish between what the sender wrote and what the application added to the message on its own. Placing the information bar below the headers and making it look similar like the rest of the message would make things harder for me.As I wrote in, I made it close to what Thunderbird does. I guess they have also designers, and they are not totally off.It's not hidden, it's in Edit->Preferences->Mail Preferences->HTML Messages tab and in the dropdown of that notice itself.There's plenty of white space on the right of the header information, in the preview pane, where a button to load remote images (and other remote data) could be shown, perhaps even the same button that was in the info bar.Not always. The place is used for sender's photo, if available. There also couldn't be much of the descriptive text as in the info bar (I hope it is a bit descriptive, at least). Or do you all think that having there a button "Load remote content" with a drop down arrow would be enough for average users to understand what that is good for without any further clarification?Do not take me wrong, I'm willing to change this, even get rid of the new (useless) option, I only do not see any good solution right now.(In reply to Milan Crha from)Just how many emails that use remote images also have photos added through gravatar or in the contacts? Genuinely curious.Given that you'd only see this drop-down if you disabled loading remote images (it's enabled by default, right?) then I don't think it needs much more information than what's currently in the button + drop-down menu.Do we reopen this bug, or start a new one?(In reply to Bastien Nocera from)... or in the Face header.I do not have any idea how real users use the client and what they send. There are rumours that a significant part likes HTML, while I do not that much.Nope, it's disabled by default - the safer option.We can stay here. If I'd do anything here, I revert the previous change (added option) first.To summarize, the idea is to drop the info bar about not-loaded remote content and replace it with the simple combo [ Load remote content | v ] combo box without any explanation what it is good for and why it is shown, placed on the right (or the left in RTL) of the headers (which can be collapsed (one line only) or expanded).Tomas, the headers are part of an HTML page. Would that be a problem in the webkit2 port, considering they dropped Gtk plugins in WebKit2? Maybe using a real HTML combo box with certain DOM callbacks? Such DOM callbacks might be on the extension side (the other process), right?(In reply to Milan Crha from)Exactly as you are saying. Also we should not implement it as a Gtk widget even for the current WebKit1 port, to save some work later.	17.0	id=776663	6	False	False	csoriano	1
id=757242	REOPENED	glade	general	git master	Other Linux	Normal normal	Glade 3 Maintainers	2015-10-28 11:12 UTC by	Bastien Nocera	2016-02-01 18:33 UTC (	1 user	Createdgnome-mouse-properties.uiWhen loading the attached .ui file, I can see the UI, but none of the widgets show up in the widget tree, and clicking on any widget throws:(glade:21735): GladeUI-CRITICAL **: glade_project_selection_set: assertion 'glade_project_has_object (project, object)' failed	This file could not have been created with Glade.The file works quite fine after inserting a GtkViewport in the scrolled window before as a parent of the GtkBox which is, in this file directly to the scrolled window.Glade cannot really handle a case where gtk_container_add() results in a widget who's parent is not the container you added it to.Can't it have a better error message for this? It would certainly help when GtkBuilder can handle those types of UI files and glade can't.(In reply to Bastien Nocera from)Certainly you're right.Sorry to close it that quickly whilst running through the list, I updated the bug title to reflect that more accurately.	3.0	id=768067	8	False	False	csoriano	1
id=775642	REOPENED	gnome-builder	editor	Flatpak Nightly Channel	Other Linux	Normal normal	GNOME Builder Maintainers	2016-12-05 14:41 UTC by	Felix Schwarz	2016-12-18 00:19 UTC (	3 users	The build output panel always scrolls down when new output was received so I can't read previous output while the build is still running. It would be nice to have some kind of "scroll on output" setting or "just" replicate the behavior of gnome-terminal.	CreatedDisable 'scroll-on-output' in build log panelCurrently, the build log panel is bound to scroll to end whenever new outputis added to the buffer using gtk_text_view_scroll_to_mark. In order to disablethis auto-scrolling I added horizontal and vertical GtkAdjustments. With theseadjustments I check if the user has scrolled back or right manually.expression1: value >= upper - page_size - offsetThis expression returns true if the user has not scrolled vertically back.The 'offset' is set at 30 (may need further tweaking).Detection of horizontal scrolling is done byexpression2: value <= 3.03.0 is selected because the left-margin of text_view is set at 3.if (expression1 && expression2) then set the vertical adjustment to upper - page_size apply this adjustment to the containerHi, This is my first patch so please guide me how I can improve this further.ThanksReview of:::: plugins/build-tools/gbp-build-log-panel.c@@ +41,3 @@++ GtkAdjustment *hadjustment;+ GtkAdjustment *vadjustment;you need to align params with previous fields here@@ +125,3 @@+ gtk_adjustment_get_upper (self->vadjustment) -+ gtk_adjustment_get_page_size (self->vadjustment) - 30.0 &&+ gtk_adjustment_get_value(self->hadjustment) <= 3.0 )Don't use *magic numbers* in the code (30.0, 3.0), use #define for this with a meaningful nameUse a well-named temporary variable to simplify the condition,it'll ease the understanding of what is done for people reading/working on the code later.@@ +135,1 @@ }you don't need to get and re-set the adjustment, just set_value is enoughand if you use a temp var to compute get_upper - get_page_size previously, you can re-use it here.CreatedDisable 'scroll-on-output' in build log panelCurrently, the build log panel is bound to scroll to end whenever new outputis added to the buffer using gtk_text_view_scroll_to_mark. In order to disablethis auto-scrolling I added horizontal and vertical GtkAdjustments. Theseadjustments are initialised in gbp_build_log_panel_init(). They point tothe adjustments of GtkScrolledWindow scroller. With these adjustments I checkif the user has scrolled back or right manually.expression1: value >= upper - page_size - offsetThis expression returns true if the user has not scrolled vertically back.The 'offset' is defined as VERTICAL_AUTOSCROLL_TOLERENCE - this means thelimit upto which scroll-on-output will still work even if the user hasmanually scrolled.Similarly HORIZONTAL_AUTOSCROLL_TOLERENCE is defined.Detection of horizontal scrolling is done byexpression2: value <= HORIZONTAL_AUTOSCROLL_TOLERENCEHORIZONTAL_AUTOSCROLL_TOLERENCE is set to 3 because the left-margin of text_view is also set at 3.if (expression1 && expression2) then set the vertical adjustment to upper - page_size apply this adjustment to the containerReview of:::: plugins/build-tools/gbp-build-log-panel.c@@ +107,3 @@+ gtk_adjustment_get_page_size (self->vadjustment) -+ VERTICAL_AUTOSCROLL_TOLERENCE;+most of the time we try to not mix variables declaration and affection, so do:gboolean h_scroll_left;then after the asserts:h_scroll_left = ....Also i was thinking about doing:gdouble last_page_pos;....last_page_top = gtk_adjustment_get_upper (self->vadjustment) - gtk_adjustment_get_page_size (self->vadjustment)so that we can re-use the result in the upcoming block (l132). minor optimization of course.@@ +133,3 @@+ gtk_adjustment_set_value (self->vadjustment,+ gtk_adjustment_get_upper (self->vadjustment) -+ gtk_adjustment_get_page_size (self->vadjustment));and here we can re-use your last_page_top@@ +134,3 @@+ gtk_adjustment_get_upper (self->vadjustment) -+ gtk_adjustment_get_page_size (self->vadjustment));+ gtk_scrolled_window_set_vadjustment (self->scroller, self->vadjustment);no need to affect the adjustment to the scroller again,unless we need to change it (itself, not its value), it stay the same for the lifetime of the scroller.@@ +135,3 @@+ gtk_adjustment_get_page_size (self->vadjustment));+ gtk_scrolled_window_set_vadjustment (self->scroller, self->vadjustment);+ }as the block is now: gtk_adjustment_set_value (self->adjustment, last_page_top);we can even skip the block definition and use a one-liner like:if (v_scroll_bottom && h_scroll_left) gtk_adjustment_set_value (self->adjustment, last_page_top);(In reply to sébastien lafargue from)Thank you very much for your guidance. About the minor optimization that you are suggesting. The message is added to buffer and then we need get_upper(). We cannot re-use the get_upper() - get_page_size() because get_upper() is updated after the buffer is updated and we need the updated get_upper().Please correct me if I have this wrong.hmm, maybe but playing with adjustment can be tricky, a lot is done async via signals, and as we add line by line, it's probably still working in both cases. want to test the values with a few printf ?yes, it is also working. that is probably working only because the lines are being added one at a time.So i will make the other changes now.CreatedDisable 'scroll-on-output' in build log panelCurrently, the build log panel is bound to scroll to end whenever new outputis added to the buffer using gtk_text_view_scroll_to_mark. In order to disablethis auto-scrolling I added horizontal and vertical GtkAdjustments. Theseadjustments are initialised in gbp_build_log_panel_init(). They point tothe adjustments of GtkScrolledWindow scroller. With these adjustments I checkif the user has scrolled back or right manually.expression1: value >= upper - page_size - offsetThis expression returns true if the user has not scrolled vertically back.The 'offset' is defined as VERTICAL_AUTOSCROLL_TOLERENCE - this means thelimit upto which scroll-on-output will still work even if the user hasmanually scrolled.Similarly HORIZONTAL_AUTOSCROLL_TOLERENCE is defined.Detection of horizontal scrolling is done byexpression2: value <= HORIZONTAL_AUTOSCROLL_TOLERENCEHORIZONTAL_AUTOSCROLL_TOLERENCE is set to 3 because the left-margin of text_view is also set at 3.if (expression1 && expression2) then set the vertical adjustment to upper - page_size apply this adjustment to the containerpushed as- Disable 'scroll-on-output' in build log panelKritarth: Thank you very much for implementing this :-)Hmm, somehow the feature doesn't work as expected. When looking at the builder output I see wild jumps.I created a short screen cast to illustrate what I'm seeing:At 0:04 I scroll down to the bottom. At 0:09 there is some new output but you can see that the vertical scroll bar is not at the bottom. This is only one of several effects I observed. Sometimes I also see horizontal jumps and when there is a lot of output it is hardly possible to scroll up (wild jumping up and down).Should I open a new bug?I think the minor optimization as mentioned in the comments above is causing the issue.Could you please test another patch that i will upload next?CreatedCorrection in patch for disabling scroll-on-output in build log panelInstead of reusing the old value for vadjustment, now value afterbuffer update is used.Felix, can you try with the Kritarth new patch ?I'd love to but currently my Builder builds fail - see posting on the builder mailing list.I reverted the patches associated with these because they break the normal scroll-on-output case.It's really tricky to get that right (I'm not actually sure it's possible to get it right currently, due to the internal animation sequences that textview performs on the adjustments).What we probably need to do (for 3.24 timeframe) is switch from textview to using VteTerminal (like we do for run output) but without a PTY. Simply use the "feed" API to the terminal to push data from the build log to the terminal widget.That will probably be dependent on me landing the wip/chergert/pipeline branch, because that will drastically simplify the logging system.then we can use:vte_terminal_set_scroll_on_outputand add a contextual menu entry with an accelerator.I keep this bug opened.	18.0	id=527272	9	False	False	jonathon	1
id=657854	REOPENED	l10n	French [fr]	unspecified	Other Linux	Normal normal	French Translator Team	2011-08-31 18:45 UTC by	Jean-Philippe Fleury	2016-04-07 14:13 UTC (	1 user	CreatedScreenshot of the bugOn the main window of gnome-control-center, I have an applet whose label is truncated and icon not centered. See the attached screenshot.Instead of seeing this: ICON PilotessupplémentairesI'm seeing this: ICON Pilotessupplémenta"Pilotes supplémentaires" is for "Additional Drivers" in French.	Thanks for the bug report. This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***commit b3be07609a9bae43947ee3e59d8982a7715c9acfAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.	2.0	id=755418	14	False	False	mcrha	1
id=778279	REOPENED	GStreamer	gst-devtools	unspecified	Other Linux	Normal normal	GStreamer Maintainers	2017-02-07 11:52 UTC by	Guillaume Desmottes	2017-02-09 11:00 UTC (	2 users	With those fixes all the meson tests are passing with the leaks tracer!	Createdvalidate: pad-monitor: fix caps leaksThese caps were not released when disposing the pad monitor.Createdvalidate: fix leaks in pad monitor test- monitors were never released- reports were leaked- GstValidateMediaDescriptor was leaked- caps were leaked: gst_check_setup_events_with_stream_id() and gst_event_new_caps() don't consume the caps- srcpad were never releasedCreatedvalidate: fix leak in overrides testThe runner was never released.Createdvaldate: fix element leak in overide-registryThe elements were never released once created.Review of:OKpushed as- validate: pad-monitor: fix caps leakspushed as- validate: fix leaks in pad monitor testpushed as- validate: fix leak in overrides testpushed as- valdate: fix element leak in overide-registryI am still getting: 1 ================= Test name: check.gst-devtools.validate.padmonitor.eos_without_segmentCommand: '/home/thiblahute/devel/gstreamer/gst-build/build/subprojects/gst-devtools/validate/tests/check/validate/padmonitor'=================Running suite(s): padmonitor 0%: Checks: 1, Failures: 1, Errors: 0 ../subprojects/gst-devtools/validate/tests/check/validate/padmonitor.c:49:F:padmonitor:eos_without_segment:0: bin (0x5654990980b0) refcount is 2 instead of 1Unexpected critical/warning: Leaks detected ../subprojects/gstreamer/libs/gst/check/libcheck/check_msg.c:79: No messaging setup~Humm weird, it's all fine here:$ GST_DEBUG="GST_TRACER:7" GST_TRACERS="leaks" /home/cassidy/dev/meson/mesontest.py -C build --suite gst-devtools ninja: Entering directory `/home/cassidy/dev/gst/master/gst-build/build'ninja: no work to do.1/5 gst-devtools / validate/padmonitor OK 7.81 s2/5 gst-devtools / validate/monitoring OK 2.03 s3/5 gst-devtools / validate/reporting OK 4.96 s4/5 gst-devtools / validate/overrides OK 2.17 s5/5 gst-devtools / validate/launcher_tests OK 1.12 sOK: 5FAIL: 0SKIP: 0TIMEOUT: 0(In reply to Guillaume Desmottes from)It is racy it seems.	9.0	id=778279	12	False	False	gdesmott	1
id=585916	REOPENED	empathy	Chat	2.27.x	Other Linux	Normal normal		2009-06-15 21:24 UTC by	Asif Youssuff	2015-02-09 21:31 UTC (	3 users	What happensThe nicks on chat window tabs are smaller than the configured gnome font sizes. I have already configured my fonts to be as small as can comfortably read -- when viewing nicks on Empathy chat window tabs, they look ugly and do not fit in with the rest of the environment. Expected behaviorEmpathy should use the standard gnome font sizes as configured by the appearance control panel.	Could you please attach a screenshot containing an Empathy tab and a Epiphany one?Createdscreenshot showing the smaller sizeCreatedepiphany tabs	3.0	id=657854	15	False	False	bugzilla	1
id=769683	REOPENED	gnome-maps	map view	git master	Other Linux	Normal normal		2016-08-09 18:54 UTC by	Yosef Or Boczko	2016-08-10 03:35 UTC (	2 users	CreatedScreenshotAs I reported inthe strings in the maps appear in English.However, I see a few strings in Hebrew - but they are reverted.See the screenshot.	The Map is from Mapbox. A bug should be filed there.Amisha: is this a known issue?In mapbox.com I see the streets's names in Hebrew (and not reverted).(In reply to Yosef Or Boczko from)Probably not the same tileset though, do you have a link for me to look at?(In reply to Jonas Danielsson from)Yeah Jonas, that's being worked upon. Similar bug:	4.0	id=585916	10	False	False	william.jon.mccann	1
id=586167	REOPENED	gnome-panel	clock	2.26.x	Other Linux	Normal normal	Panel Maintainers	2009-06-17 19:48 UTC by	Hubert Figuiere (:hub)	2010-08-06 07:08 UTC (	4 users	Sunday I have had a long internet outtage (dead ADSL modem).This has caused the weather in the clock to not update since. (we are Wednesday)	Confirming, this happens to me from time to time after my laptop is used offlineClock applet bugs are handled by the gnome-panel product, not the gnome-applets product. Not that there is any easy way to figure this out.In any event the bug has already been reported - complete with patch.*** This bug has been marked as a duplicate of***Comments in 579092 suggest this is not a duplicate of that bug. Reopening and assigning to the correct product.***has been marked as a duplicate of this bug. ***It should be easy to fix. Simply remember the time when the weather information was last downloaded, and do not display weather information if it is older than a few hours. There might be a problem if the system clock is changed by a large amount. This could cause the weather information to be removed prematurely if the clock is set forward, but this at least would not cause out-of-date weather information to be displayed. It could cause the weather information to be displayed for too long if the clock is set backward, although this problem could be minimized by always checking if the time of last weather download is past the current time, and setting it to the current time if it is.I'd like to try to fix this. What would I do to get and build the source on Fedora 13? I tried looking through the documentation at gnome.org, but it doesn't seem to mention how to get the source and write patches.I was finally able to find the source code atandIt seems that the problem is that libgweather effectively implements a cache of weather information, but does not have a policy for expiring out-of-date cache information (such as a DNS cache or browser cache). It maybe possible to implement the expiration policy I detail above by adding a field to store the time the weather information was retrieved to the _WeatherInfo struct, checking the time in the weather_info_is_valid method, and using that method instead of the valid field to check if the weather iformation is valid. This should fix the problem in all applications that use libgweather.Now to figure out how to build and run libgweather...I think I fixed this. Some info about building this to test would be greatly appreciated!	7.0	id=586167	15	False	False	gnome	1
id=724193	REOPENED	gnome-control-center	User Accounts	unspecified	Other All	Normal normal	Control-Center Maintainers	2014-02-11 23:44 UTC by	Allison Lortie (desrt)	2017-01-02 08:32 UTC (	4 users	um-utils.c in the user-accounts panel makes use of this header and this constantThe value from Linux is 32. I think it would make sense to fallback to this as a reasonable constant if we can't find the header.	Createduser-accounts: use POSIX for max login name lengthUse the POSIX-specified way of determining the maximum length of a validusername on this system.The way this works is that the system will define LOGIN_NAME_MAX if the value is statically known. If it is not defined, then you're supposed to use sysconf(). I think in all cases where the value is statically defined, sysconf() will return that value.I've seen some advice around, however (HP-UX) that you should avoid the static path and always use the dynamic one, presumably because some people were hard-depending on the static macro existing and they were afraid to remove it, but wanted to dynamically change the max username length in the future. I'm not really sure if we should care about that, but on the other hand, it would simplify the code a bit to always use the dynamic route (at the cost of an extremely small performance hit).Your call...Review of:looks fine to mepushed as- user-accounts: use POSIX for max login name lengthIt doesn't work. glibc's LOGIN_NAME_MAX is 256, but useradd limits us to 32. See.I think the initial reasoning inwas faulty. According to comments in /usr/include/bits/local_lim.h, LOGIN_NAME_MAX is the "Minimum guaranteed maximum value" for the sysconf value.shadow-utils does this:/* Maximum length of usernames */#ifdef HAVE_UTMPX_H# include <utmpx.h># define USER_NAME_MAX_LENGTH (sizeof (((struct utmpx *)NULL)->ut_user))#else# include <utmp.h># ifdef HAVE_STRUCT_UTMP_UT_USER# define USER_NAME_MAX_LENGTH (sizeof (((struct utmp *)NULL)->ut_user))# else# ifdef HAVE_STRUCT_UTMP_UT_NAME# define USER_NAME_MAX_LENGTH (sizeof (((struct utmp *)NULL)->ut_name))# else# define USER_NAME_MAX_LENGTH 32# endif# endif#endifAll of the above evaluate to 32 with glibc.It makes sense. Even if the kernel allows larger usernames, it doesn't make sense to create usernames too large to be tracked by utmp. Note that while struct utmp and utmp.h are nonstandard, struct utmpx and utmpx.h are both specified by POSIX, but in XSI (i.e. they're optional). There is no specified constant for the length of the struct, hence the nasty workaround to find the size, rather than relying on nonstandard UT_NAMESIZE.Createduser-accounts: Fix definition of MAXNAMELENI'm not sure this makes sense, as it implies that LOGIN_NAME_MAX is useless for all practical purposes, but I don't see any other way to make this reliable.All of these ancient interfaces (utmp, wtmp, utmpx...) are really shitty, broken and inconsistent.Note we're shipping this in Endless, because we don't expose usernames at all and can't have account creation fail due to invalid usernames.	11.0	id=747540	15	False	False	keke	1
id=448585	REOPENED	gthumb	general	2.10.x	Other Linux	Normal normal	Paolo Bacchilega	2007-06-17 20:36 UTC by	Paolo Benvenuto	2015-12-26 10:16 UTC (	2 users	If you select various images and the rename it (F2), effectively renaming the images, after the rename process gthumb doesn't mantain the selection on the renamed images.	Somthing related to this bug is when after selecting the images you moves them to another directory.You expect that the cursor (in the thumbnails pane) remain on the following image, while on the contrary it goes to some image different from the one you'd think.The first issue is fixed in trunk (as of today).The second issue is still present.- Mikemodifying the summary so that it reflects the situation of the second issue.The general problem is that the selection status is strange after any directory change.After switching to a different directory, the cursor should always go to the first image in the list (using gth_browser_show_first_image?).If there are no images in the directory, the preview image (Ctrl+1) should be blank, instead of showing the last image. Indeed, if you switch to an empty directory and press "f", it will show the last image in the fullscreen mode. That's not good.(When moving images between directories, it is probably to complicated to preserve the selection status. The cursor should just go to the first image. However, if someone does know how to preserve the selection status, please submit a patch!).- MikeI think the should be used like this:- after moving one image or more contiguous images, select the image whose md5 follows the last moved image; if on the contrary many non contiguos images are moved, select the 1st image in the dirHow to make it happen? create an image index, 1.. n, according to the current ordering option. When moving the images, it's simple to know what image to select.Excuse me, correcting the 2nd paragraph:- after moving one image or more contiguous images, select the image thatfollows the last moved image; if on the contrary many non contiguous images aremoved, select the 1st image in the dirThe bug is to be flagged new.***has been marked as a duplicate of this bug. ***Marking as obsolete, as this was reported for a now-unsupported version and no recent activity has occurred. Please feel free to reopen this bug report if the problem still occurs with a current version of gThumb.The behavious is weird, because after moving the images no image is selected, but if the user uses the arrows, the "cursor" moves as if the right image was selected.	9.0	id=724193	12	False	False	mclasen	1
id=747540	REOPENED	glib	gio	unspecified	Other Linux	Normal normal		2015-04-09 01:24 UTC by	Matthias Clasen	2016-11-07 12:34 UTC (	7 users	Originally filed here:g_unix_mounts_get() ignores btrfs subvolumesThis causes some misbehaviors like nautilus or 'gvfs-ls trash://' fails to listtrashed files. (e.g.)I think the culprit is the following portion of _g_get_unix_mounts() fromgio/gunixmounts.c:| /* ignore any mnt_fsname that is repeated and begins with a '/'| *| * We do this to avoid being fooled by --bind mounts, since| * these have the same device as the location they bind to.| * It's not an ideal solution to the problem, but it's likely that| * the most important mountpoint is first and the --bind ones after| * that aren't as important. So it should work.| *| * The '/' is to handle procfs, tmpfs and other no device mounts.| */| if (mntent->mnt_fsname != NULL &&| mntent->mnt_fsname[0] == '/' &&| g_hash_table_lookup (mounts_hash, mntent->mnt_fsname))| continue;The code is not aware of the btrfs subvolumes.	I have similar problem with virtio block device, which is probably caused by the mentioned code. gvfsd-trash crashes on assert using gnome-continuous image, because GUnixMountPoint is missing for "/". /proc/mounts contains following entries:/dev/vda3 /sysroot/dev/vda3 //dev/vda3 /usr/dev/vda3 /varhowever g_unix_mounts_get returns only the first one:/dev/vda3 /sysrootThe mentioned code should avoid bind mounts. Wouldn't be a solution to check for "bind" in mnttent->mnt_opts?See also:for using libmount instead of our homegrown hack.Yep, it seems that the recently added libmount support () fixes this bug. Are there any plans setting libmount as default?***has been marked as a duplicate of this bug. ***It should be already fixed thanks to the libmount support, which is currently set as default.***has been marked as a duplicate of this bug. ***The idea that the libmount support fixes doesn't seem to be right - at least for the bind mounts - I have no idea about btrfs subvolumes.The code in _g_get_unix_mounts() ignores bind mounts in an inelegant way - it does: if (!mnt_table_is_fs_mounted (table, fs)) continue;But mnt_table_is_fs_mounted() is really only meant to be called on /etc/fstab entries and chokes on bind mounts. After all, anything found in /proc/self/mountinfo is by definition mounted!So questions are: * Do we actually want to return bind mounts out of _g_get_unix_mounts() - possibly breaking existing code that doesn't expect that. And if so, should g_get_unix_mount_points(), which explicitly ignores bind mounts, be modified? * If not, how should this be fixed - should there be new api to return a larger list of bind mounts? Should glib have a higher level function to do what gvfs is trying to do? (get the g_unix_mount_get_fs_type() result for a directory.)Short term fix for gvfs would be to assume that if the volume lookup logic fails, the file is *not* on NFS - instead of an assertion failure.Hmm, I've not seen the libmount code in GLib in detail, however I see GUnixMountEntries for bind mounts and brtfs subvolumes in the output of g_unix_mounts_get with --enable-libmount and do not see them with --disable-libmount...Createdtrash: Do not crash if home mount isn't foundMount entry might not be found e.g. for bind mounts, btrfs subvolumes.Let's assume that the home trash is on filesystem with trustednotifications.CreatedTest libmount behaviorThe testing I did yesterday to make sure my diagnosis in gdb was right was using the attached program. If you run it:$ mkdir /tmp/xxx$ sudo mount --bind /home/otaylor/ /tmp/m$ ./test-libmount | grep xxx/dev/mapper/fedora-home /tmp/xxx 0The '0' there indicates mnt_table_is_fs_mounted() returned 0 for that entry. There are *some* circumstances where a bind mount will be returned - in particular, if you bind mount the root of a filesystem. (Try the above with / instead of $HOME)Hmm, I've tried gnome-continuous image again and the result is still same as it is in. You are right, some bind mounts are shown and some not... not sure what is right way to fix. It would be nice to have a comment from msanchez...Review of:::: daemon/trashlib/trashwatcher.c@@ +73,3 @@+ */+ if (mount == NULL)+ return is_home_trash ? TRASH_WATCHER_TRUSTED : TRASH_WATCHER_NO_WATCH;Do you think it makes sense to special case the homedir here? Does something horrible happens if we try to watch a read-only filesystem, or do we just waste a watch?@@ +126,3 @@+ {+ pathname = g_file_get_path (file);+ g_warning ("Mount entry was not found for %s", pathname);What action do you expect someone to take when seeing: *WARNING*: gvfsd-trash: Mount entry was not found for /home/otaylorin the journal?@@ +127,3 @@+ pathname = g_file_get_path (file);+ g_warning ("Mount entry was not found for %s", pathname);+ g_free (pathname);Double free of pathnameI remember there were some issues with bind mounts when I was working on this, but I don't remember the exact details right now, might need some time to wrap my head around this once again...That said, I do remember having the issue mentioned below downstream, although I'd swear using libmount got rid of the issue when I wrote that patch, but maybe I dreamed of it...(In reply to Ondrej Holy from)The problem I experienced back in the day, if I recall correctly, was that the hack currently in place (see [1]) would never actually check "/" if "/sysroot" was checkd first, and then "/" would be reported as not-mounted, which was wrong.We applied locally (downstream) the following two patches (the first one had a bug, fixed in the second one):Perhaps we should apply these patches/hack upstream too, but I'm not 100% sure that would fix the issue reported.Ondrej, would you be able to apply those two patches locally and do a quick test run?[1](In reply to Mario Sánchez Prada from)These patches look like they are for the *non-libmount* getmntent code. glib now builds by default with the libmount code. I think in terms of effect, they will fix the crash by making the code return / and not /sysroot for ostree. And something similar could be done in the libmount case - removing the malfunctioning check for "mounted" and adding this sort of logic.But I really think that it's not fundamentally very sound. / => /dev/sda1 /foo => nfs,/ /home => nfs,/subdir (bind)will look like /bar is part of the root filesystem, which would confuse the gvfsd code.Note that it's perfectly possible, if unusual, to have: / => /dev/sda1 /foo => /dev/sda2,/subdir1 /bar => /dev/sda2,/subdir2With / mounted nowhere, so I think the only sound thing to do in glib is to consider bind mounts mounts. I just don't know what that does to arbitrary current users. Would it confuse nautilus in some way? It would definitely have to be a devel-version only change.(In reply to Owen Taylor from)You're right, those patches are for the non-libmount code, sorry for the confusion.Yeah, I don't think either. It was a hack we took but never was meant to be a long term solution, that's why I actually worked on the libmount patches after all.I think that's probably the best approach too. I have no idea either what will break by doing that but getting rid of the hack sounds like the best proposition to me too, so a devel version would probably make sense.Thanks for the review!(In reply to Owen Taylor from)I've just wanted to cover all cases, but it is true that the following condition should never happen: (mount == NULL && is_home_trash == FALSE)...(Seeabout monitoring read only filesystems...)I expect that somebody will file a bug report, because this shouldn't really happen. It is not uncommon that home dir is on NFS, then it will be useful for debugging...This is a still workaround, we can't remove the assert and tell it is ok now...I don't think so, there are two g_file_get_path and two g_free, or am I wrong?(In reply to Ondrej Holy from)Ah, OK, I agree it's impossible to have this condition, but then I'd expect the code to either a) just always return TRUSTED, or b) assert() - not c) return something different for the impossible case.Or maybe the workaround hould live in the caller, and decide_watch_type() should only be used for mount != NULL? Basically just style - whatever you think is appropriate.But we don't want a bug report from everybody using an ostree system, do we? I think people are pretty conditioned to ignoring scary WARNING in their system logs, but that's not a good thing. We really shouldn't be putting out a warning unless we actually think that it's telling the user that something went wrong in a way they should know about or we should know about.(The absence of the warning doesn't mean that we got the mount point detection right - it just means that we found a mount point for /)Up to you.Oops, yes, you are right.Createdtrash: Do not crash if home mount isn't foundI have slightly modified the patch, however, I didn't remove the warning, because this is just a workaround and it has to be fixed in a different way. We can't simply remove the assert and tell it is ok...Comment ontrash: Do not crash if home mount isn't foundpushed as- trash: Do not crash if home mount isn't found	20.0	id=448585	8	False	False	mjc	1
id=749367	REOPENED	california	backing	0.4.x	Other Linux	Normal normal	California Maintainers	2015-05-14 11:24 UTC by	Jay Strict	2015-05-24 22:16 UTC (	1 user	Just yesterday the TLS / SSL certificate of one of my calendars "On The Web" expired.The result is that california does not display that calendar anymore.However there is no indication to the user that there is a problem with one of the calendars. So the user might miss this entirely and thus might miss an appointment.	I have crossposted this bugreport- for gnome-shell calendar ()- for gnome-calendar ()as for them, the same problem occurs.This is an EDS issue, not California. At this moment, California doesn't communicate directly with a server via TLS/SSL.IMHO this is a California issue.Evolution does not communicate directly with a server either.It does so via EDS, right?But Evolution can handle this use case. California can't.So in my opinion California just lacks the user interface to handle such an error. If you do not agree, could you please elaborate, how exactly EDS could help fixing this bug?Ok, I see what's being ticketed here -- not that California needs to deal with the cert issue, but that it should notify the user when the calendar is unavailable or cannot be opened. Yes, that's something that needs to happen.	4.0	id=749367	5	False	False	jim	1
id=768067	REOPENED	gnome-shell	general	unspecified	Other Linux	Normal normal	Nautilus Maintainers	2016-06-26 13:24 UTC by	Richard B. Kreckel	2016-09-30 19:36 UTC (	1 user	It used to be conveniently possible to move the mouse to the bottom border of the screen, open the tray, and click on an USB icon to unmount a device. This very useful functionality seems to have disappeared.The documentation says that the way to unmount a device is to go through Files' sidebar. But having to open Files first is cumbersome.Can we have this functionality back, please? (In 3.14, it was there, and it was one of the few uses of the tray. I don't know when it was removed, but in 3.20, it is gone.)	Not sure where exactly you mean by "bottom border of the screen". Can you attach a screenshot or try to explain with different words?CreatedScreenshot of tray (Gnome 3.14)Hoping the screenshot is clear enough. Please respond if it isn't.oh yeah now it's clear, thanks.This is gnome-shell, not nautilus. The design was changed because the bottom bar had several UX issues.Although this case was good, it was more problematic than anything for the other cases :/So closing as wontfix.(In reply to Carlos Soriano from)Oops, sorry for misassigning.Hmm, I don't understand what the "cases" are. Maybe there is a reference of the UX discussion?I do not see why the redesigned / reduced bottom bar cannot accommodate an unmount thingie.Having to go through Files for cleanly unmounting a device is a hassle for a significant number of users. (Especially for casual users who have learned to "safely remove" an USB device before pulling it and who upgrade from old versions of Gnome or come from other OSes where the bottom bar offers such a helpful feature.)Yeah, I don't recall where though. I think it's in the wiki of gnome-shell at wiki.gnome.org. You can ask on #gnome-design or #gnome-shell at irc.gnome.orgThere is no bottom bar anymore.For what it worth it makes sense to me, you handle files and devices on the file manager, not anywhere else.I'm not sure why would you have a device but never open the file manager to do anything with it...CreatedScreenshot of bottom bar in Gnome 3.20(In reply to Carlos Soriano from)Hmm, but what do you call the thingie in the bottom left corner then? (See my screenshot.)Oh, watching my son, his friends, and my wife using Gnome, I am seeing that most of the time it makes perfect sense to attach removable devices without going through the file manager. Here are just three use cases:a) Import pictures using shotwell or a similar program. (They don't usually let you safely unmount the device.) Note that these programs do write the device (erasing pictures e.g.), hence the need for a clean unmount.b) Using a web browser for downloading things from the internet to your removable device.c) Using any office program and just going through the "file open", "file save" to manage the files on the removable device.Having to open the file manager in any of these cases is a little bit more cumbersome than necessary and, worse, it is unintuitive for the casual user.Ah yeah, that's kind of hacky thing.That makes sense.I edited the bug tittle to something that fits more what we want here, allowing to manage external devices from the shell.Supposedly we want less and less file manager management, so makes sense to allow extraction of external devices from somewhere else than the file manager for cases like gnome-photos or so.I just discovered this:IMHO, it is too useful to be not installed by default. ;-)	11.0	id=243998	21	True	True	sbrabec	1
id=243998	REOPENED	evolution	Contacts	3.2.x (obsolete)	Other All	Normal normal		2003-06-01 13:21 UTC by	Petr Tomasek	2012-02-10 21:28 UTC (	2 users	VCards encoded in encoding other than iso-8859-1 won't import properly:1) If I try to import vCard 3.0 (as described in RFC2425), it alwaysassumes it is in iso-8859-1. The same happens even if I send the vCard in amail message with correctly specified encoding in MIME headers.=> I suggest, when importing vCard v3.0 (i.e. without the "CHARSET="properties), to honour the encoding as specified in the MIME-headers, orwhen not possible (importing from a file) use the default encoding forcurrent locale or ask user.2) If I add "CHARSET=" properties to the vCard (as specified in the vCard2.1 specs), the vCard is imported several times with various combinationsof fields being encoded in either encoding specified by the "CHARSET=" oriso-8859-1.=> I suggest, that if a vCard contains any "CHARSET=" properies, it shouldbe imported _only once_ honouring the specified charset.	I can confirm these problems for importing from both kaddressbook andgnome-pim.Suggested solution (use current locale encoding) is not sufficient,because for example kaddressbook VCard uses UTF-8 also in ISO-8859-2locales.The best solution for import from file is "ask user".In case of import all settings, program can guess (gnome-pim -locale-specific, kaddressbook-3 - UTF-8).as discussed on irc marking this as a part ofwhich is about support of vcard 3.0.*** This bug has been marked as a duplicate of***this bug should be a dep of 40756, not a duplicate.removing old target milestoneIsn't this obsolete? My impression was that when CHARSET is missing it is considered UTF-8. Also see.As report andsay, such simple assumption does not work:Import RFC2425 vCard 3.0: CHARSET is missing => needs ISO-8859-1.Import from gnome-pim: CHARSET is missing => needs locale-specific value, e. g. ISO-8859-2.Import from kaddressbook-3: CHARSET is missing => needs UTF-8.: Yes, see RFC2445, sec. 4.1.4.See also.Anybody having a testcase that could be attached here (without confidential data included)?CreatedGnomeCard.gcrdVcard file, as it was created by GnomeCard. (Who remembers it?) No information about encoding was provided.Createdlinka3.vntExample of Vnote file with a very obscure encoding. The text charset is UTF-7, the result was then encoded by quoted-printable encoding.(I know, that Evolution does not support Vnote format yet, but you can use it as a cut/paste source for, say, address.)This example was generated by the SE T630 mobile phone.(In reply to)Even gedit fails, considering it ISO-8859-15:It displays zkou¹ka instead of zkouška. :-/No, gedit does not fail. This file does not contain any charset hint. GnomeCard used Vcard file that always used charset equal to the locale charset.There is no way to discriminate between ISO-8859-1 and ISO-8859-2. If you add ISO-8859-2 to and remove ISO-8859-1 from gedit list of charsets, it will open it properly.Was to import such file:- Ask user.- Use contents based heuristics (e. g. ENCA) for initial guess. (But still needs to ask user - names are not easy to identify.)	12.0	id=731685	13	False	False	a9016009	1
id=731685	REOPENED	website	planet.gnome.org	current	Other Linux	Normal normal	Planet GNOME maintainers	2014-06-15 11:37 UTC by	Andrei M	2016-09-07 11:19 UTC (	4 users	Hi,I am Andrei Macavei and I'm a gsoc student. Could you please add my blog to PGO, here are the links:blog:rss feed:irc name: andreimacI am trying to get a good picture so I can make a hackergotchi from it. When I will have it I will post a comment with it here.Thanks,~Andrei M.	What are you working on? I cannot tell from your blog. :)Oh sorry, I was waiting to be added before I'd publish my post :). I am working on Geysigning project:Hello,I have posted my first report for GSoC. You can check it here:I know I'm not experienced in blogging, but I am trying to do my best.Do tell me if something is wrong.Thanks,Andrei M.Hi Andrei,You blog has now been added to PGO. Please don not forget to include a hackergotchi. I'll kee this bug open, until we have it. If you need some help to create it, do not hesitate to ask us for it!Welcome and enjoy :)Hey Andrei! Could you create hackergotchi? If you need help, we can help you ;)Cheers!Createdcropped headHi,Yes I could use some help with it if someone has time. Thank youThanks Andrei, we'll try to have it in the following daysCheers!Hey!We're cleaning up things and while I was going to do your Hackergotchi I saw the photo you submitted has the top of the hair cut and the left side of your cheek has someone else hair on it. Would you by any change have a better photo to submit?Thanks.Createda better pictureThanks for help with this , I'm noob with GIMP :)	10.0	id=686812	11	False	False	evfool	1
id=686812	REOPENED	system-monitor	general	git master	Other Linux	Normal normal	System-monitor maintainers	2012-10-24 16:31 UTC by	Pavel Vasin	2013-02-24 03:53 UTC (	2 users	see patches	Createdprettytable: fix leak in get_icon_from_gio()Createdutil: fix leak in format_network()Createdsysinfo: fix leak in get_os_type()Createdprocman-app: fix leak in color_changed_cb()Createdprocman-app: fix leak in get_tree_state()Createdprocman-app: fix leaks in apply_cpu_color_settings()Thanks for the proposed patches, these do fix some memory leaks, thanks for spotting them. How did you find them? Just by reading the code or with some special memory analysis tool?I will commit these to both the stable and the development versions.(In reply to)With valgrind, seeThanks for the info, I did experiment with it (paired with KCacheGrind), but I was merely checking for performance bottlenecks (CPU time) rather then memory leaks.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.The "util: fix leak in format_network()" part did not get committed — was that intentional? Also, will you backport this to stable?My wrong, it *was* committed, sorry. I'll now backport it to Ubuntu.Quoting from:Unfortunately it's not fixed. I've left it running for the night and this morning it was using more than 1GB of RAM:I'm using the latest version 3.7.90-0ubuntu1Also, I've noticed the GNOME System Monitor memory usage increasing rapidly when upgrading a lot of packages using Synaptic Package Manager, maybe someone could check that out...? I'll try to reproduce it when I have lots of updates...Reopening, as we still have some leaks.Createdprocman-app: plug small leaksReview of:Thanks again, committed.	16.0	id=769683	6	False	False	jonas	1
id=773296	REOPENED	gtk+	Scene Graph	unspecified	Other Linux	Normal normal		2016-10-21 05:42 UTC by	Arnaud B.	2017-02-18 16:38 UTC (	4 users	I have no idea of what I’m doing, but that patch fixes the rendering in dconf-editor. That’s inspired by GtkOverlay conversion[1].[1]	CreatedConvert GtkEventBox to indirect rendering.Review of:Thanks; this is a good start, but it's not complete.::: gtk/gtkeventbox.c@@ +597,2 @@ {+ GskRenderNode *res = gtk_widget_create_render_node (widget, renderer, G_OBJECT_TYPE_NAME (widget));This is missing the background and frame rendering that GtkEventBox uses when it has a window and it's not marked as app-paintable.It think it's worth reopening this, because AFAICT, using indirect rendering means that CSS margins, etc are not applied to the gadget, so intuitive selectors don't work if the target happens to be an EventBox (which shouldn't matter, as it's only there to add input capabilities).To make margins work for EventBoxes, I currently must select on .give-me-margins > :not(widget), .give-me-margins > widget > *widget is the default CSS node name, and this will probably end up catching some widgets I don't want it to later and screwing things up.I'm working on a patch; it now applies the CSS margins, but clips the widget by them... still, not terrible for my first attempt at gadget magic.CreatedEventBox: Improve the documentation descriptionmainly: just saying “window” is pretty ambiguous in a library of thisscale, so make it clear which kind of window is being referred to.CreatedEventBox: Convert to indirect renderingThis is as far as I got. It SEEMS OK, now that I stuck in a call to gtk_container_get_children_clip(), which seems to stop the margins eating into the child. I have no idea what I'm doing, though!Review of:Nope, still doesn't work. It applies the margin as a shift but does not increase the size request to match.Review of:Nope, still doesn't work. It applies the margin as a shift but does not increase the size request to match.Created[gtk-3-22] EventBox: Convert to indirect renderingThis is more like it - margins work now, and everything else looks OK - but I might've still missed something.I just realised I probably made a mistake basing on gtk-3-22, but then I don't know enough about the GTK+ 4 drawing model yet anyway. Now's the time to learn...Created[master] EventBox: Convert to indirect renderingmaster version, again _seems_ fine, but tell me all the stupid things I did!Created[gtk-3-22] EventBox: Convert to indirect renderingfixed a compiler warning/brainfart	10.0	id=773296	15	False	False	arnaud.bonatti	1
id=620851	REOPENED	gnome-power-manager	general	unspecified	Other Linux	Normal normal	GNOME Power Manager Maintainer(s)	2010-06-07 15:13 UTC by	David Zeuthen (not reading bugmail)	2010-06-08 12:20 UTC (	4 users	Currently the same icon is used for these two situations - 100% charged, not charging, plugged into the wall - 100% charged, not plugged into the wallThis is very unfortunate. I just spent a couple of minutes physically checking 1. the cable was plugged into my laptop; 2. the cable was attached to the power brick; 3. the cable from the power brick was attached to the wall; 4. the connector on the wall was set to the ON positionso I *think* things are OK. I mean, I can't really tell 100% because a. the power brick itself may not be working; b. or there may be an power outage; c. cables may not be working; d. anything reallyso I'm still left speculating what is going on. However, if gnome-power-manager conveyed whether I'm plugged in or not (more precise: whether power is being delivered from the wall), all this wouldn't be a problem and I wouldn't have to speculate.Saw this is with gnome-power-manager-2.31.1-1.fc14.x86_64.	(added Jakub to cc)I guess we could use battery-full-charging symbolic when full and not actually charging, although that seems kinda unclean. Ideally we want some sort of "powered, but not charging" icon, maybe something like battery-full-chargedMaybe the icon just wants to disappear in this case, although that might leave David scratching his head a little too.Also, an interesting not is that some broken batteries can stop charging at things like 40% -- so it might make sense to allow people to have icons battery-good-charged-symbolic, although this seems like a wacky use case, and probably not worth the pain of drawing extra icons.I don't think the broken battery case deserves a special icons. Even if the capacity of that battery is considerably lower, I would just go with showing 100%.As for the other situation, I agree the case David describes is relevant. I am not opposed to creating a special icon for the "100%, in the wall, but not charging" state. I would probably just make the lightning emblem semi-opaque rather than introducing a new emblem (plug?). How does battery-full-plugged-in sound?(In reply to)Sure, fine for me. This is what we currently do.Being plugged in isn't a property of the battery device, it's a property of the system. I still think battery-full-charged is the best name, as it indicates the battery is in the charged state, not the charging state.But your idea about being semi-opaque seems fine to me, thannks.battery-full-charged it is.Added to git master.(In reply to)Cool, thanks. We probably also need this in gnome-icon-theme as well, in the non-symbolic form.I've added this to g-p-m just now:commitAuthor: Richard Hughes <>Date: Tue Jun 8 09:34:22 2010 +0100 Use the new battery-full-charged icon from the shared icon specification. Fixes #620851Thanks.added to gnome-icon-theme trunk as well.	8.0	id=620851	9	False	False	zeuthen	1
id=711807	REOPENED	glib	gdbus	unspecified	Other All	Normal normal	David Zeuthen (not reading bugmail)	2013-11-10 21:18 UTC by	Stef Walter	2016-08-15 15:18 UTC (	9 users	g_test_dbus_down() following a g_test_dbus_stop() just hangs until a timeout. This a documented sequence of calls. Patch fixes the issue. May be a better way to accomplish this?	Createdgtestdbus: Properly close server connectionsOtherwise g_test_dbus_down() following a g_test_dbus_stop()will hang until it times out.This is causing a few tests to fail. dbus-appinfo was failing before I startedmy cleanup work, but now more are failing that they try to shutdown properly.Review of:It's a little unusual to call g_object_run_dispose(), but this API looks like it's explicitly trying to accomplish that effect.This patch misses the mark.Calling g_object_run_dispose() here is just about the worst possible thing that we can do. We're using weak notifies to wait for the last reference to drop, but those will also be fired in response to dispose().In effect, this patch always makes g_test_dbus_down() exit more or less immediately.CreatedWork around test failure in gdbus-namesThis is caused by g_test_dbus_down() returning too soon.Add a sleep for now.pushed as- Work around test failure in gdbus-namesPushing this so I can do a release.We should revert it once we have a proper fix for this bug.If I revert both Stef's and Ryan's patches, while true; do ./gdbus-names; done works perfectly well even if I do background work to change the load.I don't understand what was the initial issue. Maybe already fixed in another way?(In reply to)The original issue was that it leaks the GDBusConnection and worker. See the blocker bug.(In reply to)It appears that GDBusConnection is designed to survive use-after-dispose in a semi-graceful way. If anything that was not yet torn down still has a ref to the GDBusConnection, and tries to send a message after it was disposed, we'll get a segfault by trying to send a message to a NULL GDBusWorker. I've seen this in a version of Folks patched to work with Evolution 3.8 (long story), and a version of telepathy-glib patched to use GDBus instead of dbus-glib.I realise that this is not necessarily considered to be a bug, because g_test_dbus_down() is already effectively an assertion that there are no more refs to the GDBusConnection, unless your tests run with non-fatal warnings and you don't mind a 30-second delay.The traceback below is from Folks, for instance:Program received signal SIGSEGV, Segmentation fault._g_dbus_worker_send_message (worker=0x0, message=message@entry=0x2aaabc03aca0, blob=blob@entry=0x6634b0 "l\001", blob_len=168) at /build/glib2.0-V5GbKs/glib2.0-2.39.92/./gio/gdbusprivate.c:16261626 /build/glib2.0-V5GbKs/glib2.0-2.39.92/./gio/gdbusprivate.c: No such file or directory.(gdb) bt(In reply to)Sorry, that should say "... is *not* designed to..."The equivalent of this patch might be worthwhile:See alsoCreatedRevert "gtestdbus: Properly close server connections"This reverts commit.GDBusConnection isn't ready to have its connections disposed,they just crash. See comments here:I agree with Ryan, lets revert this for now.The glib tests still fail for me due to the unrelated #727920 test problem.Shouldn't this patch be reverted now?	15.0	id=504954	19	False	False	thagg	1
id=504954	REOPENED	GnuCash	Business	2.2.x	Other All	Normal normal	Derek Atkins	2007-12-21 22:59 UTC by	Thomas Weber	2014-02-21 15:57 UTC (	7 users	The setup of GnuCash uses the SKR04 data frame. By entering a bill with a lot entries the resulting TAX value is wrong. The TAX value is set to 19% (German TAX value). The following bill:.. Description ... Amount | Unit Price | ... | Amount | 1. Entry 20 | 0.95 | | 19.00 | 2. Entry 10 | 0.35 | | 3.50 | 3. Entry 50 | 0.151 | | 7.55 | 4. Entry 57 | 0.101 | | 5.76 | 5. Entry 57 | 0.101 | | 5.76 | 6. Entry 20 | 1.55 | | 31.00 | 7. Entry 100 | 0.22 | | 22.00 |results in Total: 112.52; Subtotal: 94.57; TAX: 17.95But 94.57 * 0.19 = 17.9683 which should be 17.97 so there is a difference of 0.02. Sometimes the calculation is correct and sometime not. I guess that the calculation of TAX is done for each row first and then each of the single TAX values are added to the result. I think it must be done at the end after adding the sum of each row. Maybe the heading of the table is wrong, but I work with the german version and translated the heading to english.The problem happens also with version 2.2.1 and with the linux version.Thomas Weber	Yes, each row is calculated and then they are summed. Changing this would be... challenging. Keep in mind that each row could have a different tax table, so you still need to perform a sum ( row * taxtable ) operation.Perhaps the problem is that we're not rounding at the correct time? I'd have to look at the code to figure out when we're rounding and when we're not, but I suspect that we're NOT rounding on each row computation where we should be (or maybe we are when we shouldn't be)?You should save rounding until the total gst amount is calculated. By rounding each line item gst amount you are creating rounding errors.***has been marked as a duplicate of this bug. ***This is still an issue with GnuCash 2.3.15, and not only on Windows, so changing the OS to All.I traced this back to r14531. Due to some of the changes in this revision, the function gncEntryGetValue returns rounded values although the function's documentation explicitly say it shouldn't.I have corrected this in r19475, this fix will first appear in GnuCash 2.3.16. Thank you for reporting this.Unfortunately I had to revert this fix as it introduced another rounding error, which was reported in.I have looked a bit deeper into this, but it looks I'm hitting a design limitation I'm not sure will be easy to solve.This report () suggests invoice total and tax should be calculated from unrounded entry values.on the other hand posits the exact opposite: the German import tax invoice requires invoice total and tax to be calculated from rounded entry values.To be honest, I have seen both methods applied here in Belgium, although I believe the official way is indeed to calculate taxes from unrounded values.So presuming both methods are valid depending on the country you live in, we should have a way for the user to select his preference.But unfortunately that's not the end of it. Suppose the preference is set to round each entry. Then as in the example of, what happens is this:In the invoice window, the total of the entries is calculated from the *unrounded* entry values, but at the same time the entries themselves are shown on screen *rounded* to 1ct. So if you sum the entries as you see them on screen this will give a different result from the calculation GnuCash uses internally.Next when you post this invoice, a transaction is added to the corresponding AP/AR account. This transaction will have the invoice's total in one split (the total as calculated from the *unrounded* invoice entries) and all the invoice's entries in the other splits. These splits are *always* automatically rounded to the currency's accuracy. So for this transaction the sum of the splits will not be zero, and hence GnuCash adds a balancing split automatically.This problem is inherent to the current design of the register. I'm not sure at this point how this can be solved properly. I'm sorry.I have done some research as to which method should be considered correct (round per line or round on the total amount). The summary is, we should support both. I found a Dutch law text that explicitly allows both methods although you should choose one and apply it to all invoices you create consistently [1].This means the code should be amended to cater for both possibilities and the GUI should allow to choose one. It should probably be set up as a. an option per vendor (since each vendor should use one consistent scheme) andb. an business preference on book level (the assumption here is that each book is for one company, and a company should use consistent rules for all invoices it sends).[1] See article 3.5.5 on this Dutch law:The page is also avialable in English if you like (there's a button on top).I found the following, when we discussed, but here is the proper place:To explain "sum save rounding" (Summenerhaltendes Runden): If you sell to consumers in the EC, you must show them the all tax included price.An invoice of tax included prices is a matrix of the formn1 + t1 = g1n2 + t2 = g2:nm + tm = gm------------sum(ni) + sum(ti) = sum(gi)withn: net amount = round (g * 100 / (100 + taxrate))t: tax amount = round (g * taxrate / (100 + taxrate))g: gross amounti = 1..mbut because of the rounding the sum line sometimes violates at least onecondition. To avoid this, there are different rounding algorithms, which dosome "error diffussion".More details are inand links.When I last checked in the UK it is acceptable for VAT to be calculated on either a per line basis or from net. Perhaps there should be an option to select the preferred method.Any updates on this? I just ran into this problem, as well, with an incoming bill that has 4 entries of the same product with a different description.If I enter these 4 items separate from each other, the total amount of VAT calculated is €0,01 off. If I just enter on entry and set the amount to 4, the total amount of VAT is correct.This workaround will do for now, but a fix or a setting would be nice.The problem with VAT is that it can be calculated in different ways depending on the country the VAT is being calculated in. In the UK, for example, VAT can be calculated using one of the following:1. Vat calculated per unit, then summed2. Vat per line (quantity * units), then summed or3. Vat of total cost per transaction.When calculating using the different methods there is an inherent rounding error depending on which way you go around. This is why there is the 0,01 Euro error. To solve this I think it would be best to add a set of radio options in the preferences page and use the to determine the calculation to use.If another developer can add the radio options with the appropriate flags I will try to re-arrange the calculations ready for the next available release. Any other developers able to do this?I am a programmer, but have never worked on GnuCash (or even looked at the source code) before, so I'm probably not the best person to do this on a relatively short notice.If I have some spare time in the following time, I may have a look at it, but I wouldn't count on that happening in the next weeks.Hi Alex and Egbert. Thank you for offering to help here. I will certainly consider any patches attached here.Keep in mind though that these patches will not be used for 2.6. Adding radio buttons adds new translatable strings. Since we are currently in string freeze those will have to wait until we reopen the development tree after the 2.6 release.You don't have to wait that long to work on this though. As for the radio options themselves: since VAT can be calculated in all three ways in the UK alone, I'm tempted to work with two sets of radio buttons:- one set in the business preferences (found under "File->Properties"). These are settings per file. And I think each file should be allowed to have its own rounding defaults.- one set per vendor. Each vendor may use a different preference. This per vendor preference can either be set to use the global file preference, or override it.When you fix this, you may also have a look atfor a related problem that can only occur, when you use the option "tax included".Provided that the smallest fraction of the currency used is 1/100, then all tax rates which are an odd multiple of 0.16% (0.16%, 0.48%, 0.80%, 1.12%, ...) can cause the problem described there. Relevant examples of such tax rates are 4%, 8%, and 20%.IMHO, a fix for both bugs would be easier, if the option "tax included" became a per-invoice option, instead of a per-row option.	14.0	id=305407	15	False	False	a9016009	1
id=305407	REOPENED	evolution	Mailer	2.6.x (obsolete)	Other other	Normal normal		2005-05-25 09:04 UTC by	Lorenzo Iannuzzi	2012-02-13 15:11 UTC (	0 users	Distribution: Debian 3.1Package: EvolutionSeverity: normalVersion: unspecifiedSynopsis: Evolution doesn't follow RFC-3156Bugzilla-Product: EvolutionBugzilla-Component: MailerBugzilla-Version: unspecifiedDescription:Evolution 2.0.4 suffers from problem reported there:The page describe steps to verify the problem.------- Bug moved to this database by2005-05-25 09:04 UTC -------	so this is about "GnuPG 1.4.0 and PGP/MIME signatures".adding security keyword.upgrade and reconfirm & provide some actual test dataverified with Evolution version 2.6.3 from Debian.The problem is the same:- set the "no-rfc2440-text" option for gpg (the workaround for client not following the standard);- sign a message with some blank space at the end of a line;- unset the previous option and set "rfc2440-text" option;- verify message.The message doesn't verify correctly.	3.0	id=738474	10	False	False	nekohayo	1
id=738474	REOPENED	gtk+	Themes	3.14.x	Other Linux	Normal normal		2014-10-13 18:16 UTC by	Jean-François Fortin Tam	2015-11-03 12:56 UTC (	6 users	CreatedscreenshotAs the attached screenshot demonstrates, inline toolbars have an incorrect style when oriented vertically. This used to work in earlier GTK releases, as you can see on this screenshot taken with 3.12:(or the older)	adding Lapo to CC.Vertical inline toolbars are not styled, but vertically linking buttons should work, I'll check that out.Jean-François I tried to have a look, but F21 packaged version doesn't work and the git version built via jhbuild shouts me an the following error:Traceback (most recent call last):Hi folks, does gnome's jhbuild include/build gst-python? It's needed because introspection can't deal with everything; see alsoAnd yeah, the packaged (0.93) version is broken in Fedora 21 due to(fixed for the next release).I'm pretty sure I have gst-python built via jhbuildlets get a vertical inline toolbar example into widget-factory, maybe ?It's not really a pattern I'd like to have used around, I implemented that in the old adwaita just for pitivi basically.there's more things in widget-factory that we probably don't want to have 'used around', but still want to keep working, theme-wise.Sure, I think this is one of the cases (not sure yet since pitivi is not working for me) where the inline toolbar is built with GtkToolItems with buttons inside which greatly messes up the scss code, I'd have no problems having vertical inlines made of GtkToolButtons btw.I've added some vertical examples to the widget factoryI think this can be closed now ?Pitivi's vertical toolbar is composed of GtkToolButtons, but still looks bad. The buttons are missing the right edge in Adwaita. Please reopen the bug.You can notice the problem in widget-factory if you add "inline-toolbar" to Style Classes for the vertical GtkToolbar on the 3rd page.Reopenning as asked by Alex.	14.0	id=699382	25	False	False	olivier.crete	1
id=633566	REOPENED	gnome-panel	clock	2.32.x	Other Linux	Normal normal	Panel Maintainers	2010-10-30 16:53 UTC by	Ville-Pekka Vainio	2015-02-06 23:43 UTC (	7 users	I'm using gnome-panel-2.32.0.2-2.fc14.x86_64 and evolution-2.32.0-2.fc14.x86_64 from Fedora 14. None of my appointments in Evolution's local Personal calendar show up in the clock's appointment list like they used to in Fedora 13. The days with appointments are bold in the calendar, but clicking on them doesn't bring up the list.I asked about this on Fedora's testing list and got a couple of answers (). I quote Kåre Fiedler Christiansen, as he has been able to test this with remote calendars as well:"I tested a little, and my appointments from Google Calendar show up in the applet, but the ones in calendars on this computer do not. The days with appointments are marked with bold, but they do not show up in the list of appointments."	Is this anyhow about recurring events which recur for ever? If so, then it's.No, this is all appointments in my local calendar, be they recurring or not. In fact, I just tested a bit more, and in my current setup I have four calendars: Two remote Google calendars. Both work and show appointments One Local calendar (the default calendar): No appointments are shown, although the days are marked with bold One remote Exchange calendar connected with MAPI: Same behavious as the local calendar (no appointments are shown)I would be happy to provide any requested information.Ah, then might be related to the migration not done properly. When you open in GConf:/apps/evolution/calendar/sources(and similar for tasks and memos), then one row should be with an "On This Computer" group, which should have "base_uri" set to "local:". There used to be a problem that this one was kept to "file:///home/<user>/..." which is apparently wrong.The other issue might be with the source under this group as well. Does it contain a "uri="file://..." key? If so, then please remove it, it might not be there.(I know it's pretty hard to edit these keys, but it's doable with an external editor or something.)All changes to this should be done with evolution and e-calendar-factory closed.I also recall fixes to the evolution-data-server in 2.32.1, though in fedora is also built evolution-data-server-2.32.1-2 (in updates testing) with another fix, which might be related as well. It's about.Createdproposed gp patchfor gnome-panel;Nah, even when everything is as expected from the above mentioned then it doesn't work, because eds renamed local sources to "local:system" from "file:///home/.../system", which filtered them out. This patch fixes appointments issue in the clock applet.If you wonder, the other chunk is about a white-space after the backslash, there was a warning from autotools shown to me, thus I fixed it as well.I rebuilt the gnome-panel package in Fedora 14 with the patch from, I had to remove the Makefile chunk, though, since it didn't apply. The calendar-window.c patch works here. Thanks, Milan.CreatedUpdated proposed patch that also displays MAPI eventsThe proposed patch works just fine for local calendars, thanks.However, to make my events from my MAPI calendar connected from Exchange 2007 also work, I had to also add a line for mapi URLs.I have added a new patch with this line included.I don't know if this makes the list exhaustive, though.The patch works here too with gnome-panel 2.32.1-2Thanks, committed to master!CreatedMore general fixThis patch takes a different approach, since this problem occurred again for the Exchange Web Services back end.For now, it simply assumes that all back ends other than "weather" and "contacts" are to be treated as appointments. So it won't just silently leave *any* of them out.But more generally, it moves that horrid incestuous knowledge about the names of the various back ends... from the filter function itself, to the code which obtains the information about the esources in the first place. We store the *type* in the gtk_tree_model, not the base uri.In future, this could be further improved by removing the horrid name comparisons altogether, perhaps using e_source_has_extension() to see the capabilities of each source?Re-opening, since this really is the same bug in a slightly different form.Comment onMore general fixPlease commit, looks good.Thanks!To ssh://git.gnome.org/git/gnome-panel 8cda45d..7ebee9d master -> masterLeaving open and assigning to mbarnes, who is working on the esource API and should be able to eliminate the knowledge about special names altogether.I've modified the patch (id=182260) to be applied with any junk to 2.32.1 source.Createdclock-app-show-ews-HEAD.patchComment onMore general fix[Setting patch status to committed as per]	15.0	id=633566	21	False	False	gnome	1
id=699382	REOPENED	GStreamer	gst-plugins-good	git master	Other Linux	Normal normal	GStreamer Maintainers	2013-05-01 13:43 UTC by	Sebastian Dröge (slomo)	2016-01-05 20:09 UTC (	11 users	+++ This bug was initially created as a clone of+++The whole DMABUF code is currently broken.V4L2_MEMORY_DMABUF is an alternative to V4L2_MEMORY_USERPTR that can be used to queue other DMABUF file descriptors. To create new DMABUF file descriptors V4L2_MEMORY_MMAP + VIDIOC_EXPBUF must be used. The two modes cannot be mixed.Right now QBUF fails because the device is configured for MMAP and a DMABUF buffer is queued.	I've been thinking about this. It shouldn't be too difficult to use EXPBUF and the dmabuf allocator in the MMAP use-case, and fall back to the current mmap if EXPBUF fails. I'd think this can be done unconditionally, or are there reasons to make this optional?V4L2_MEMORY_DMABUF is something else. GstV4l2BufferPool currently mixes the gstreamer buffer pool stuff with v4l2 buffer handling. So working with buffers from another pool is not easy to implement.This bug has been introduce by my patch because I have done an error while back porting v4l2 dmabuf from kernel 3.9 to 3.4.... sorry for that.My goal was (is) to make X sink and v4l2src share dmabuf buffers. When X sink will be able to export a pool of dmabuf buffers, v4l2src will only have to queue/dequeue V4L2_MEMORY_DMABUF buffers, no needs of V4L2_MEMORY_MMAP + VIDIOC_EXPBUF is this case.Any news on this?To be sure to correctly implemented/test it this time, I would like to have a downstream element able to provide buffers from a dmabuf allocator. A first step was to have a way to test allocator type:I'm working on waylandsink to add support of wayland DRM protocol and make it aware of dmabuf allocator. I hope it will be enough to test pool negotiation with v4l2src.Are the dmabuf buffers coming from the waylandsink linked in their lifetime to the duration of the connection to the wayland compositor? In v4l2src, as long as a single dmabuf allocated buffer from the v4l2 device is alive, one can't change the REQBUFS.Any progress here, what can we do about this?Adding some thought, note that even if you negotiated everything correctly, the dmabuf you get from upstream might still not be usable for your device driver. V4L2 driver may use different memory model, e.g. UVC could (if it was implement, I think Hans has a branch), import any dmabuf with supported alignment and stride, because it's using the vmalloc allocator. Though, most driver use the contiguous allocator, for which a vmalloc dmabuf (e.g. exported by UVC) would not work. So, just like we are doing in the USERPTR experimental branch, we need all appropriate fallback.Final note, v4l2 really need to track it's memory, since it can't detach from it. I'm working on an allocator for that, but I have the impression that the dmabuf allocator will be unusable in that context since we still have to track our buffers, something the dmabuf allocator don't do (it also don't allocate anything, as allocating dmabuf is a per-driver action). Anything I'm missing ? Was this considered in this attempt to provide an allocator ?Linaro is working on a "central dma-buf allocator".One of the goal of this allocator is to solve the problem of memory you describe by implementing "delayed allocation" feature. The devices have to attach themselves and their memory constraints to the buffer with a call to dma_buf_attach. The buffer allocation will be done only at the first call of dma_buf_map_attachement, at this time all the devices memory constraints should have been collected and the "central allocator" could select an allocator (vmalloc, dma-coherent ...) that match with those constraints.The big question is when, and if Linaro will port all the existing drivers (something that never happened in the v4l2 space). It's good to know, but nothing we can use at the moment, and the current dmabuf allocator is still useless because it prevents the elements from tracking memory by the driver (hence prevent verifying they are reclaimed before changing format, or shutting down)."delayed allocation" does not really help with gstreamer and v4l2. By the time the sink can call dma_buf_attach the buffer was already written if the source provides the buffer. To handle this, it must also be possible to migrate the buffer when attaching with incompatible memory constraints.I think we're much further now. Though still need a mechanic or options to correctly advertise dmabuf and automatically use it when possible. For v4l2 we could always export, I didn't notice any performance difference here.As Benjamin mention on IRC, we can play with the presence of the dmabuf allocator in the query. To decide to export, for upstream pool (decide_allocation), we'd look if the allocator is proposed in the list of allocators, if so export (using that allocator). For downstream pool, we'd offer our own allocator and the dmabuf allocator, and decide to export base on what has been configured on the pool.For the import case there is two scenario. When importing from downstream pool (decide allocator), we would try and find a dmabuf allocator, if we find it, we'd set that in the config and then import. When buffers comes from upstream, we can't do that in advance, so we'll have to make the decision on first buffer. Though, on first frame it's fine to try and fallback, later it will probably be harder to switch.Note that code like v4l2 that ignore downstream pool in certain cases will need to be reviewed, as normally the proposed allocator might be specialised, and only usable with the associated pool. The allocator with custom allocation method (unless known) will need to be skipped.Createdallow use of dmabufWith this patch I get my video decoder exporting dmabuf file descriptors but it doesn't set in the query that the pool have a dmabuf allocator.I need your opinion to be sure I going in the good direction.Review of:::: sys/v4l2/gstv4l2object.c@@ +2290,3 @@+ if (v4l2object->req_mode == GST_V4L2_IO_AUTO) {+ GstV4l2BufferPool *vpool = GST_V4L2_BUFFER_POOL_CAST(v4l2object->pool);+ if (GST_OBJECT_FLAG_IS_SET(vpool->vallocator, GST_V4L2_ALLOCATOR_FLAG_DMABUF_REQBUFS))I would prefer if you use the marco:GST_V4L2_ALLOCATOR_CAN_REQUEST (vpool->allocator, DMABUF)@@ -2296,6 +2307,0 @@- /* Map the buffers */- GST_LOG_OBJECT (v4l2object->element, "initiating buffer pool");-... 3 more ...I'm not sure I understand this part, why would setup_pool() not setup the pool anymore ?The only I have found to know if the driver support DMABUF is to test the allocator flags so I have to create the pool before select the mode.If we don't want the sequence a solution could be to call gst_v4l2_allocator_new() to get a temporary allocator, test the flags and release the allocator.We can probably move the probing outside of the allocator.I have split the patch in two parts: one to move vb queue probing in to v4l2object instead of v4l2allocator. The flags propagate from v4l2object to v4l2bufferpool and then v4l2allocator.The second patch allow to select dmabuf (export) if the vb queue support it.Createdchange probingCreatedallow use of dmabufReview of:That actually seems like a good idea. One small detail, after what I'm all happy with it.::: sys/v4l2/gstv4l2object.c@@ +2268,3 @@++static guint32+gst_v4l2_object_probe (GstV4l2Object * v4l2object, guint32 memory,Small fix required here, probe is too generic name now, we probe a lot more stuff in v4l2 object.Review of:::: sys/v4l2/gstv4l2object.c@@ +3378,3 @@+ if (allocator)+ gst_object_unref (allocator);+ allocator = gst_object_ref (GST_V4L2_BUFFER_POOL (obj->pool)->allocator);This part should be removed. You can't really do that, since in this particular case, the buffer pool ignores the config and use a DMA buf allocator, and as set_config() has not been called, it not yet the allocator that will be used.I suppose you would like to see the DMABUF allocator in the pool config for when you receive the buffer downstream (I think you should peek the memories, but both way works). If that is the case, you should simply add code in set_config() of the pool to also update the allocator. I just didn't thought about it, so there is no code yet.Createdchange probingCreatedallow use of dmabufReview of:All good.Review of:Good.These patch don't apply against git master, would it be possible to rebase/resubmit ?Ok, I understood these where written for 1.4 and manage to handle it. Please, provide patch on top of git master next time. Also, we don't use the Signed-off notation in this project, but we do cross reference of bugs. So instead of your signed off next time add a line with the complete bug URIobjectname: Short titleLong description.Comment onchange probingcommitAuthor: Benjamin Gaignard <>Date: Fri Nov 21 16:13:05 2014 +0100 v4l2: move vb_queue probing from allocator to v4l2object The goal is to make those information available in v4l2_object to be able later to select the best allocation method for the poolComment onallow use of dmabufcommitAuthor: Benjamin Gaignard <>Date: Fri Nov 21 16:36:15 2014 +0100 v4l2object: allow to automatic selection of dmabuf If the v4l2 queue support dmabuf select this buffer pool mode and update the query with allocator. This patch only concern exporting dmabuf and not importing dmabuf fd from downstream element.And this one, to fix the build.commitAuthor: Nicolas Dufresne <>Date: Fri Nov 21 11:44:24 2014 -0500 v4l2allocator: Remove unused variable this was introduced by commit ec6b8b https://bugzilla.gnome.org/show_bug.cgi?id=6993Next step would be the importation part, I guess I will create new bugs for that.- Import from downstream pool (v4l2src, m2m capture)- Import from upstream (v4l2sink, m2m output)(In reply to)This one breaks "v4l2src ! xvimagesink" or "v4l2src ! fakesink"0:00:00.067722042 26721 0x2147680 ERROR v4l2allocator gstv4l2allocator.c:679:gst_v4l2_allocator_start:<v4l2src0:pool:src:allocator> error requesting 3 buffers: Invalid argument0:00:00.067745145 26721 0x2147680 ERROR v4l2 gstv4l2bufferpool.c:774:gst_v4l2_buffer_pool_start:<v4l2src0:pool:src> we received 0 buffer from device '/dev/video0', we want at least 20:00:00.067753620 26721 0x2147680 ERROR bufferpool gstbufferpool.c:533:gboolean gst_buffer_pool_set_active(GstBufferPool *, gboolean):<v4l2src0:pool:src> start failedThis is with a Logitech c920 and Linux 3.16 btwWas taking too much time to figure-out so:commitAuthor: Nicolas Dufresne <>Date: Mon Nov 24 10:36:54 2014 -0500 Revert "v4l2allocator: Remove unused variable" This reverts commit.commitAuthor: Nicolas Dufresne <>Date: Mon Nov 24 10:36:30 2014 -0500 Revert "v4l2: move vb_queue probing from allocator to v4l2object" This reverts commit.commitAuthor: Nicolas Dufresne <>Date: Mon Nov 24 10:33:29 2014 -0500 Revert "v4l2object: allow to automatic selection of dmabuf" This reverts commit.This need further debugging. While doing short investigation, I at least spotted 1 thing wrong, we check if we can import DMABUF in order to default to exporting DMABUF, that is wrong of course. The only way to check if we can export DMABUF is to actually export DMABUF, limitation of V4L2 API.With current kernels we could probably call EXPBUF before REQBUFS. We should get ENOTTY if it's not supported and EINVAL otherwise. I'm not sure how older kernels would handle this though.But I think it would be better if we talk to the kernel guys. Maybe we can get a flag for this.Few patches have just been pushed in v4l2 dev tree to support exportbufs for more memory type:(In reply to)Seems like a fair suggestion. I'll have a chat with them at least, to know if this has any change to work long enough (and work on older drivers).Ok, had to scratch my head a little on why the "moving probe" patch was wrong. Turns out the reason is that GstV4l2Object isn't not a GstObject, neither is it is a GObject. Using GST_OBJECT_FLAG_SET() won't do here.	38.0	id=764981	14	False	False	csoriano	1
id=528815	REOPENED	doxygen	general	1.5.5	Other All	Normal normal	Dimitri van Heesch	2008-04-18 20:21 UTC by	Thomas	2011-10-26 04:46 UTC (	2 users	Please describe the problem:If constants are defined using PHP's define(...) syntax, the first constant is missing if its definition is preceeded by an if or switch statement.Steps to reproduce:1. Create a new config file using the wizard.2. Select to include all entities and cross-ref'd source code3. Output HTML only4. Leave all other settings at their defaults.5. Have the following script documented:<?phpif ( true ) {}define( 'CONST1', 'Constant 1' );define( 'CONST2', 'Constant 2' );define( 'CONST3', 'Constant 3' );?>Actual results:The documentation reads: * CONST2 : doxytest.php * CONST3 : doxytest.php (CONST1 is missing from the documentation) Expected results:The documentation reads: * CONST1 : doxytest.php * CONST2 : doxytest.php * CONST3 : doxytest.php Does this happen every time?This seems to happen whenever the define statements are preceeded by an if or switch statement. It also happens if the define statements are inside an if-block.Other information:	Confirmed. Should be fixed in the next subversion update.This bug was marked as assigned, which means it should be fixed in doxygen release 1.5.6. Please verify if the bug is indeed fixed. If not then reopen it and provide additional information if possible.Sorry, but the bug is only partly fixed:---<?phpif ( true ){ define( 'CONST1', 1 ); define( 'CONST2', 2 );}else{} define( 'CONST3', 3 );define( 'CONST4', 4 );?>---(Config as in my original report, this time using version 1.5.6)The above will document only CONST4. Removing the "else {}" causes CONST3 and CONST4 to be documented. In either case, CONST1 and CONST2 are not documented. While "else {}" was not explicitly mentioned in my original bug report (hadn't noticed then), I assumed that the fix would cover it as well. Contrary to version 1.5.5, the constants defined inside the if(){} are now completely ignored. I would expect them to be documented as well. Greetings,ThomasI'm using Doxygen version 1.7.4 on Ubuntu 11.10. I'm having the same sort of problems reported here (in Doxygen). Basically, Doxygen's PHP parser seems blind to conditional PHP logic (although this may be true only outside of enclosing class/method or function contexts - TBD). This problem is easy to reproduce. Below is a small test.php file. After that I'll append my latest, all-too exhaustive doxyfile. I've been trying and trying and trying ... to get Doxygen to see either of the conditionally defined, alternative class definitions below. So far, no luck. I certainly would appreciate any help (or any clues/tips) - from any quarters. Up to this point, I've used Doxygen with so many languages, that I more-than-hate the thought of giving up on Doxygen for PHP. I really appreciate Doxygen. Of course, just now, I just happen to be stuck with the psychedelic hypertext pulverizer (PHP ;-) - so I'm major bummed:==============================================================================<?php/** @file test.php This is a PHP test file. It is used for experiments *//** @brief define(ALL_IMPORTANT_TOGGLE_VARIABLE) This will sweep in loads of development-time instrumentation, that depends upon a fat, rich run-time environment or or exlcude it, say for production, on a slim and trim run-time environment. */ define('VMD_THASA', true, true);if (defined('VMD_THASA')) { require_once('Log.php'); // Pear Log:// Doxygen just won't seem to do anything with this URL :-( /** @brief Instrumentation Manager Class. Do this and that to centrally manage development instrumentation */ class instrumentation_mgr { private static $instance; //!<@brief A singleton's static self-reference private static $logger; //!<@brief The user record logger private function __construct(){ //constructor } public static function singleton(){ if (!isset(self::$instance)){ $className = __CLASS__; self::$instance = new $className(); } return self::$instance; } public function __clone(){ trigger_error( 'Clone is not allowed for singletons.', E_USER_ERROR); } public function __wakeup(){ trigger_error('Unserializing is not allowed for singletons.', E_USER_ERROR); } public function __destruct(){ // destructor } public function log($msg){ // end-user oriented logging. error_log("This is the rich logging function: ".$msg); } public function diag(){ } }} else { class instrumentation_mgr { private static $instance; private function __construct(){ // constructor } public static function singleton(){ if (!isset(self::$instance)){ $className = __CLASS__; self::$instance = new $className; } return self::$instance; } public function __clone(){ trigger_error( 'Clone is not allowed for singletons.', E_USER_ERROR); } public function __wakeup(){ trigger_error('Unserializing is not allowed for singletons.', E_USER_ERROR); } public function __destruct(){ // destructor } public function log($log_string){ error_log($log_string); } }} $logMgr = instrumentation_mgr::singleton(); $t = 'Foobarsky' ; $logMgr->log($t);?>========================================================================================================# test.doxyfile## Project specific options#################################PROJECT_NAME = testPROJECT_NUMBER = 0.1OUTPUT_DIRECTORY = /var/www/dox/testINPUT = /home/shulegaa/public_htmlFILE_PATTERNS = *.php *.incEXTENSION_MAPPING = inc=PHPINCLUDE_PATH = INCLUDE_FILE_PATTERNS = DOT_GRAPH_MAX_NODES = 80DOTFILE_DIRS = # WARN_IF_UNDOCUMENTED should be YES, but ... # So sometimes, you just have to ingore the obvious ;-)WARN_IF_UNDOCUMENTED = YES################################# Project specific preprocessing options# Many of these may not apply (much if, at all?) to PHP source################################# Bizarre to enable propreprocessing in PHP # but Drupal did this ... hmm ... what gives?ENABLE_PREPROCESSING = YES #EXPAND_AS_DEFINED = EXPAND_AS_DEFINED = VMD_THASA#EXPAND_ONLY_PREDEF = NOEXPAND_ONLY_PREDEF = YES#PREDEFINED = #PREDEFINED = VMD_THASA = 1PREDEFINED = VMD_THASA = true# MACRO_EXPANSION tends to complement ENABLE_PREPROCESSINGMACRO_EXPANSION = YES################################# Generally peferred, non-project-specific options# Many of these may not apply (much if at all) to PHP source################################ALPHABETICAL_INDEX = YESBRIEF_MEMBER_DESC = YESCALL_GRAPH = YESCALLER_GRAPH = YESCLASS_DIAGRAMS = YESCOLLABORATION_GRAPH = YESCOLS_IN_ALPHA_INDEX = 4CREATE_SUBDIRS = YESDIRECTORY_GRAPH = YES# Others suggest that this is a source of problems. See## So, be sure to set DOT_CLEANUP = NO. I've confirmed that this is # a source of problems - that can crash Doxygen after long runs!DOT_CLEANUP = NODOT_FONTSIZE = 12DOT_IMAGE_FORMAT = png# Let DOT choose the number of threads based on # CPUs/coresDOT_MULTI_TARGETS = YES DOT_NUM_THREADS = 0DOT_PATH = DOT_TRANSPARENT = NOENABLED_SECTIONS = YESENUM_VALUES_PER_LINE = 1# merge_* files are often left around by emacs ediffEXCLUDE_PATTERNS = merge_* EXCLUDE_SYMLINKS = NOEXTRACT_ALL = YESEXTRACT_PRIVATE = YESEXTRACT_STATIC = YESEXTRACT_LOCAL_CLASSES = YES#FILE_VERSION_FILTER = <some appropriate git command?>FILTER_SOURCE_FILES = NOFULL_PATH_NAMES = NOGENERATE_AUTOGEN_DEF = NOGENERATE_BUGLIST = YESGENERATE_CHI = NOGENERATE_DEPRECATEDLIST = YESGENERATE_DOCSET = NOGENERATE_ECLIPSEHELP = NOGENERATE_HTML = YESGENERATE_HTMLHELP = NOGENERATE_LATEX = NOGENERATE_LEGEND = YESGENERATE_MAN = NOGENERATE_PERLMOD = NOGENERATE_RTF = NOGENERATE_TESTLIST = YESGENERATE_TODOLIST = YESGENERATE_TREEVIEW = YESGENERATE_XML = NOGRAPHICAL_HIERARCHY = YESGROUP_GRAPHS = YESHAVE_DOT = YESHIDE_FRIEND_COMPOUNDS = NOHIDE_IN_BODY_DOCS = NOHIDE_SCOPE_NAMES = NOHIDE_UNDOC_CLASSES = NOHIDE_UNDOC_MEMBERS = NOHIDE_UNDOC_RELATIONS = NOHTML_ALIGN_MEMBERS = YESHTML_DYNAMIC_SECTIONS = YESHTML_FILE_EXTENSION = .htmlHTML_FOOTER = HTML_HEADER =HTML_OUTPUT = htmlHTML_STYLESHEET =HTML_TIMESTAMP = YESINCLUDE_GRAPH = YESINCLUDED_BY_GRAPH = YESINHERIT_DOCS = YESINLINE_INFO = YESINLINE_SOURCES = NOINTERNAL_DOCS = NO# Unlimited max dot graph depth ... MAX_DOT_GRAPH_DEPTH = 0# Use a zero value for MAX_INITIALIZER_LINES to hide all initializersMAX_INITIALIZER_LINES = 8OUTPUT_LANGUAGE = EnglishQUIET = NORECURSIVE = YESREFERENCED_BY_RELATION = YESREFERENCES_RELATION = YESREFERENCES_LINK_SOURCE = NOREPEAT_BRIEF = NOSEARCHENGINE = YESSERVER_BASED_SEARCH = YES SHORT_NAMES = NOSHOW_DIRECTORIES = YESSHOW_FILES = YESSHOW_INCLUDE_FILES = YESSHOW_NAMESPACES = YESSHOW_USED_FILES = YESSKIP_FUNCTION_MACROS = NOSORT_MEMBER_DOCS = YESSOURCE_BROWSER = YESSTRIP_CODE_COMMENTS = YESTEMPLATE_RELATIONS = YESTREEVIEW_WIDTH = 250# Try UML_LOOK = YES at some pointUML_LOOK = NOUSE_HTAGS = NOUSE_INLINE_TREES = YESVERBATIM_HEADERS = YESWARN_FORMAT = "$file:$line: $text"WARN_IF_DOC_ERROR = YES# Leave WARN_LOGFILE blank for stderr usageWARN_LOGFILE =WARN_NO_PARAMDOC = YESWARNINGS = YES========================================================================	4.0	id=324823	6	False	False	dimitri	1
id=764981	REOPENED	nautilus	File Search Interface	3.22.x	Other Linux	Normal normal	Nautilus Maintainers	2016-04-13 08:48 UTC by	Peter	2016-11-29 10:42 UTC (	5 users	Hello!The new Typeahead (Search in Subfolder -> never) or Find in Nautilus is awesome. A problem occurs if a search result it directly selected from the prompt with enter, the Location Bar stays in the search mode. So the user can't see what is the current working-directory (CWD).Assume you are in your home-directory (~) and you want change into the subdirectory 'Pictures':1. Just type 'pictures' # the directory 'Pictures' should be marked2. Hit 'Enter' # don't tab to the grid/list and 'enter' or use the mouse3. Nautilus now jumps into the directory 'Pictures', but the Location Bar stays in search-mode.I already tried to bypass this behaviour with toggling 'Ctrl + f' afterwards, but the Location Bar stays in search-mode. If I open the context-menu (key or right click with mouse) I can select "Open in terminal" and it will open a terminal in the previously selected directory, so the current-working-directory is rightly modified.Thank you for your workPeter	Createdscreencast, first just hitting enter and in the second time tabbing into the result-grid and hitting enterHollywood like! Oscar-Achivement unlocked ;)***has been marked as a duplicate of this bug. ***Createdwindow-slot: fix condition for disconnecting old viewWe were checking for the new view instead of the old view...Needless to say that's wrong, and we were not disconnecting at all.It was not crashing because the view is disconnected when is going to bedestroyed, so no more signals are done.However, when we were destroying the view, the view signals theend-loading signal, which forces the slot to free any change data, inmiddle of a change."Luckely" thanks to all the safe checks in window slot, this was notcrashing, but just misbehaving and not updating the window with the newview data.pushed as- window-slot: fix condition for disconnecting old viewThanks for your fix.In the very first place your description sound weird (I guess this my fault) to me. Because it bases upon a series of changes from the last days I used jhbuild to use the current master-branch (as you told me):with this settings:repos['git.gnome.org'] = '' # behind a company proxyautogenargs = '--disable-selinux' # turn it off, because not on Fedoraand this command:$ jhbuild buildone nautilusAnyway still libgd is required, but git clone failed here for some uknown reasion. I downloaded it manually.Finally the compilation succeded, so I have done this:$ killall nautilus # Iassume the working nautilus binary shouldn't run$ /home/peter/jhbuild/install/bin/nautilusThe 'Location Bar' is still in the 'Search-Mode' after selecting a directory. I attached a screenshot.Createdbuild from master with jhbuild(In reply to Peter from)I'm confused here.... what in the commit messages it says it bases the changes in previous changes?jhbuild build nautilus to build all the necessary dependencies.Looks like you did it correctly (missing dependencies, but if it compiled, it shouldn't affect the result in this specific case)hm it works for me... no idea what can be now. Is it always reproducible by you?I don't mean 'rebase' in sense of git, i mean this fixes:window-slot: fix condition for disconnecting old viewwindow-slot: fix formattingwindow-slot: remove all dependencies to desktopwindow-slot: use inheritance for disabling actionswindow-slot: use inheritance for other locations viewwindow-slot: remove unneeded code special casing desktopwindow-slot: use action state instead of special casing the searchwindow-slot: allow overriding the creation of viewswindow-slot: make it derivable classThose changes are unrelated to this issue. This patch should work as it is, and can be backported to 3.20.It might be that there is another issue in the code.Yes. I share your opinion, but the very first one is your patch for this issue!?(In reply to Carlos Soriano from)Just a stupid guess. Is this the actual patch for the issue?(In reply to Peter from)ah! The patch is attached here in the bug report.So onI attached the patch, and onI put the link to the repo commit with "035cd2d" which is the numbers of the commit id.Hi!I tried it with just this patch on nautilus-3.20.0Nothing changed. But I noticed the following behaviour (with and without the patch):If I change to the root-directory "/" and just type "dev" and "Enter" the location-bar is updated. This seems to work for every directory one level below "/", for the subdirectories it doesn't update the location-bar.Furthermore I noticed another or releated bug:The plain selection with "Enter" leads to a segfault if the list-view is used for the search. This doesn't happen with the icon-view/grid-view. I can provide you with a strace of it. If you wish.I'm trying to test this in the next days again with JHBuild, maybe something nasty happened or I'm just stupid.All of those issues were fixed in master and will be backported when it's time. Yeah please try with jhbuild and master (then follow up your insights here :) )Hello!I was on a trip for the last days and didn't managed therefore to use jhbuild/master again, luckily I saw that 3.20.1 was release including the fix(es).Good news:This is fixed for the list-view and the crash in the list-view is also fixed! Well done!Bad news (You will hate me, I'm so sorry):This is not fixed for the grid-view. To be more exactly this depends on the layout which is used during Type-Ahead/Find. If during Type-Ahead "list" is used, it it fixed! If the grid is used, it is not fixed.I will try to attach a small video.Thank for your patience :)Hello!I was on a trip for the last days and didn't managed therefore to use jhbuild/master again, luckily I saw that 3.20.1 was release including the fix(es).Good news:This is fixed for the list-view and the crash in the list-view is also fixed! Well done!Bad news (You will hate me, I'm so sorry):This is not fixed for the grid-view. To be more exactly this depends on the layout which is used during Type-Ahead/Find. If during Type-Ahead "list" is used, it it fixed! If the grid is used, it is not fixed.I will try to attach a small video.Thanks for your patience :)(In reply to Peter from)aaaagh you are right... :/ No worries about the video, I will try to fix it.Createdsuperfluous video, which shows the different behaviourFine. Your just too fast! I tried so hard to make it nice ;)This no longer happens with 3.20.3 afaics :)Createdshows the differences between grid/list-view for browse and searchHi Carlos!I'm really sorry, but it doesn't work. I'm now pretty close to the issue, probably. It works under two different conditions:a) If the selected item is not selected by merely pressing "enter", but using "tab+tab+enter" or "curserdown+enter"b) Using grid-view for browsing and list-view for search. It doesn't matter if this setup was select previously or during searchingitself. So it doesn't look like a pure focus/listener related problem?I attached a video showing case b). You will notice, that selecting the same view for browse and search will not work. I just pressed "enter" after typing my search-term, noting more.btw.I'm the guy who missed our second jogging on sunday at GUADEC, I got anyway sick (not caused by alcohol). So you are lucky that you didn't listend on me to start earlier, but sadly I mist the chance to show you that live on my laptop. I have should done this on saturday :-(ThanksOh! This is you! You missed a great jogging :D Next GUADEC we will do the same :PThanks for the video an the report, I will reopen and try to reproduce again. Sadly I cannot reproduce with your steps, but this is an area I want to make sure it works flawlessly. So let's try to fix for 3.20.4.***has been marked as a duplicate of this bug. ***I'm running into this with 3.22.0, as well.	23.0	id=741666	22	False	False	jstpierre	1
id=129832	REOPENED	conglomerate	Code	CVS	Other Linux	Normal normal	conglomerate list	2003-12-22 11:06 UTC by	Oleg Paraschenko	2004-12-22 21:47 UTC (	0 users	----- <test.xml><?xml version="1.0"?><document> &#xA0; &#xA0;</document>----- </test.xml>When I open this document in Conglomerate, I get on console----- <screen>** Message: cong_editor_widget3_finalize** Message: Searching for a match against top-level tag <document>** (conglomerate:22687): WARNING **: unable to convert attribute end index 6** (conglomerate:22687): WARNING **: unable to convert attribute end index 6----- </screen>Problems:1) Only one space is displayed in edit mode.2) "Save as..." works correctly, saving non-breaking space as entity'&#xA0;'. But "View Source" displays only spaces (although spaces arecorrect (it is good)).	Looking at problem (1): it's normalising the whitespace in the editor. This is on by default, but can be disabled on a per-element basis inthe dispspec. So I believe this is NOTABUGLooking at (2): is this a problem? Does it behave similarly for othernumbered character entities?Well, I have not tried to use dispspec yet. DocBook dispspec yet doesnot know about elements lile LiteralLayout, so I can't check.I want to note that in text processors (for example, inFrameMaker+SGML or in Web browser), non-breakable spaces are not likespaces, but like usual letters. They are not collapsed. Anyway, if youdecide that it is NOTABUG, I don't against.I prefer to point to message:<screen>** (conglomerate:22687): WARNING **: unable to convert attribute endindex 6** (conglomerate:22687): WARNING **: unable to convert attribute endindex 6----- </screen>I don't know if it is an error or not, but it will be good if you lookat it.(2)Yes, exactly.Somewhere I seen a assertion: what you save to file and what you seein view source are exactly the same. If this assertion is correct,then it is a problem. Otherwise it is not a problem.	2.0	id=129832	2	False	False	david	1
id=753507	REOPENED	damned-lies	general	unspecified	Other Linux	Normal normal	damned-lies Maintainer(s)	2015-08-11 12:56 UTC by		2015-08-13 13:47 UTC (	2 users	There are a few tests that fail when running `python manage.py test` (patch comming)	CreatedFix test suiteThis fixes most of the tests that didn't pass.There is one test that I didn't manage to fix. I'm not shure it can pass andI marked it as skipped for now.Any idea?Thanks, I've pushed the patches (amended) related to people and teams.Now for the stats test failures, could you provide me with the current test failures in your instance?Createdtest resultsHere are the test output from current master (d3e2bc5)test_insert_locale_in_linguas was a failure that I introduced with the previous commit (now fixed).test_action_ut is probably due to remaining files leftover from previous test failures (we should probably improve test cleaning).test_branch_exists should now be solved (it was previously depending on a local SCRATCHDIR containing a gnome-hello checkout)."OperationalError: no such table: release" is due to a weakness of SQLite when you access the test db with different threads. It does not cause test failure and should not happen with other databases.I consider this issue fixed, but feel free to report remaining issues.(In reply to Claude Paroz from)Thanks. All the failing test seem to work now (using a fresh clone from the gnome repo). But I get a new failure:======================================================================FAIL: test_branch_stats (stats.tests.tests.ModuleTestCase)----------------------------------------------------------------------Traceback (most recent call last):----------------------------------------------------------------------I saw that the test is still recorded as a success. My original patch included a bit that was mocking the faulty method so that the test result wouldn't include the long stack trace.What is your "itstool --version"?2.0.2 from fedora repoSame here, so itstool is not the culprit. What about "xgettext --version"?(In reply to Claude Paroz from)xgettext (GNU gettext-tools) 0.19.4 (also from fedora repos)	9.0	id=705895	13	False	True	gwidion	1
id=741666	REOPENED	gnome-shell	general	unspecified	Other Linux	Normal normal		2014-12-17 17:30 UTC by	Ray Strode [halfline]	2016-08-29 09:16 UTC (	4 users	this will require 4 things as i understand it1) renaming gnome-shell.desktop to org.gnome.Shell.desktop2) adding DBusActivatable=true3) Dropping gnome-shell-classic.desktop (already done see)4) Dropping gnome-shell-wayland.desktop . This requires "doing the right thing" based on the logind session type (seefor the GDM work that was required)	Why?For more details see:tl;dr the plan is to make all gnome components dbus activatable, then use the glib APIs for activating those components instead of spawning them directly. They'll get run inside the systemd user session this way and we'll be one step closer to our utopian future of flying cars.i need to test these, but here's my first draft...Createdcore: move backend setting to helper functionThis paves the way for making the backend settingbe more automatic.Createdcore: start as wayland display server if run when there's a wayland session registeredThis commit makes gets rid of the need for --display-server and--wayland when mutter detects that a wayland session is registered.Createddata: drop mutter-wayland.desktopIt's not needed anymore, now that we can automatically figure things outbased on logind.Createddata: drop gnome-shell-wayland.desktopWe can autodetect what to do, based on the user session, so dropthe separate desktop fileReview of:::: data/gnome-shell-wayland.desktop.in.in@@ -11,3 @@-OnlyShowIn=GNOME;-NoDisplay=true-X-GNOME-Autostart-Phase=DisplayServerSo one problem is gnome-shell.desktop uses the Autostart-Phase=WindowManager not DisplayServer.Given we already start the window manager before the initialization phase in wayland, i guess it's probably okay to start the window manager before the initialization phase in X too (since any ordering problems would crop up in wayland as well), so we can probably use DisplayServer for both.another idea is we could have two bus names... org.gnome.DisplayServer and org.gnome.Shell. the former would be required for the wayland session definition and the latter would be required by the non-wayland session definition.Review of:::: src/core/main.c@@ +303,3 @@+ char **sessions = NULL;+ char *session_id = NULL;+ int result, i;I usually use "ret" for this variable. Style preference.@@ +307,3 @@+ result = sd_pid_get_session (0, &session_id);++ if (result == 0 && session_id != NULL)I usually prefer: if (ret < 0) goto out;@@ +354,3 @@+ }++ free (sessions);g_strfreev ?@@ +369,3 @@++#ifdef HAVE_NATIVE_BACKEND+ session_id = find_logind_session (&session_type);Do we actually need both the session ID and the session type? You could make find_logind_session much simpler if you don't.@@ +376,3 @@+ is_wayland = g_strcmp0 (session_type, "wayland") == 0;+ free (session_id);+ free (session_type);You should free in every case, in case it's possible to fill in the session type without filling in the session ID.@@ +389,3 @@++#if defined(HAVE_WAYLAND) && defined(HAVE_NATIVE_BACKEND)+ session_type_is_wayland = check_for_wayland_session_type ();Hm. This is guarded with HAVE_WAYLAND && HAVE_NATIVE_BACKEND, but check_for_wayland_session_type(); is only guarded with HAVE_WAYLAND_BACKEND, leading to an unused warning in one case.You should be able to simplify by using the same guards in both places.Review of:::: src/core/main.c@@ +305,3 @@+ meta_set_is_wayland_compositor (opt_wayland);+#endif+Extra whitespace.(In reply to)sure, I actually usually use ret too, and even wrote ret this time and changed it to result at the last minute...not sure why.This isn't actually a case of "if fail, quit". the code first looks if you're in a session and if so uses it. Otherwise, if you're running outside of a logind session (as would be the case with systemd --user) then it looks for the session. what i could do isif (ret == 0) goto out;and then do the sd_session_get_type code in the out: path.systemd doesn't use g_malloc. not that it matters in practice, since g_malloc by default calls malloc, but we generally try to pretend like it matters.we need the session id to get the session type. We don't need to return the session id. I can stop doing that. I'm a little worried we're going to need the session id down the line and this hairy code will get duplicated, but we can cross that bridge when we get to it.That would be non-conventional. most apis that have out args, leave those out args "undefined" if the call fails.Of course this is all moot, since i'm going to change it tosession_type = find_logind_session_type ();Createdui: disable GL in gdk backendinitializing GL leads to deadlock, since it calls into xwayland,which calls back into mutter.This commit disables it. Longer term we should probably stop usinggtk inside mutter.Createdcore: move backend setting to helper functionThis paves the way for making the backend settingbe more automatic.Createdcore: start as wayland display server if run when there's a wayland session registeredThis commit makes gets rid of the need for --display-server and--wayland when mutter detects that a wayland session is registered.Createddata: drop mutter-wayland.desktopIt's not needed since we can automatically figure things outbased on logind.Createddata: merge gnome-shell.desktop and gnome-shell-wayland.desktop into one fileWe can autodetect what to do based on the user's session, so dropthe separate desktop files.This, along with some future changes, will enable us to be busactivatable.(In reply to Ray Strode [halfline] from)So there actually are some ordering issues with wayland that we need to tackle. seeComment onui: disable GL in gdk backendthis was committed some time ago.Comment oncore: move backend setting to helper function(getting this one in now because it's just a refactor)pushed as- core: move backend setting to helper functionCreateddata: rename gnome-shell required component to org.gnome.Shellgnome-shell and gnome-shell-wayland have been consolidated, andnow get dbus activated. The new name is org.gnome.Shell.This commit changes the session files to reference org.gnome.Shell.unless there's any complaints in the next couple days I'll probably push these out on monday sometimepushed as- core: start as wayland display server if run when there's a wayland session registeredpushed as- data: drop mutter-wayland.desktopComment ondata: merge gnome-shell.desktop and gnome-shell-wayland.desktop into one filepushed as- data: merge gnome-shell.desktop and gnome-shell-wayland.desktop into one filepushed as- data: rename gnome-shell required component to org.gnome.ShellA patch from this series caused a regression. A filed it as.It seems that this changes the way to start gnome-shell wayland from the command line? What's the new way?So I never actually did 2) in.Reopening.note it's not enough to merely do 2) from. We have a few dependencies on $XDG_SESSION_ID in mutter and gnome-shellReview of:::: data/gnome-shell.desktop.in.in@@ +11,3 @@ OnlyShowIn=GNOME; NoDisplay=true+X-GNOME-Autostart-Phase=DisplayServerThis caused a HiDpi regression on X. See	31.0	id=768077	7	False	False	tiagomatos	1
id=705895	REOPENED	GIMP	Plugins	2.8.18	Other Windows	Normal normal	GIMP Bugs	2013-08-13 11:48 UTC by	Max	2016-10-07 09:33 UTC (	1 user	CreatedLosing layers groups when export to PSDWhen I export project with groups of layers, I lose all data about single layers in this groups (1 group becomes 1 layer). But when I open an original Photoshop project, GIMP see all the groups. (2.8/2.82/2.84/2.86)	Most likely true for all GIMP versions, including master, but I can't verify.Thus bug, however, is not "critical" to GIMP's working - let's leave it as normal until someone dealing with PSD files come along to the issue.We have improved PSD support in a SoC git branch.Layer groups now export and import fine in master.Problem still exists (at Windows versions at least). I've tried 2.8.18 now and nightly build of newest 2.9 branch.Well, it's not surprising that 2.8 still has it - new features go into the development branch. Can you attach a PSD file exported from the 2.9 you're using?Can't attach it because of size limit, so uploaded it to google drive:Original XCF was created in 2.8 version. Then I've tried to create new 2.9 project with 2-3 simple layer groups and export it to PSD. Result is same.Thank you for fast response!If you create a new XCF file anyway, you can create one that is small enough to attach.err, PSD fileThis 2.9 build is kinda portable, so is it possible that it takes some settings from installed 2.8 version? Don't have a possibility to run it on clear OS.Attaching the file to topicCreatedPSD export (2.9 version used)	10.0	id=755472	10	False	False	walters	1
id=324823	REOPENED	doxygen	general	1.4.x	Other Windows	Normal normal	Dimitri van Heesch	2005-12-22 17:29 UTC by	Sascha Ruppert	2006-01-05 11:52 UTC (	0 users	Doxygen does not find the definitions of many C++ methods, or at least can't relate them to their declarations.Indication 1: In the generated XML, the file/line location of those method's definition is missing; the location tag does not contain the attributes "bodyfile", "bodystart", "bodyend", but only "file" and "line" (as you would expect for abstract methods).Indication 2: The references relation is also broken for those methods.Unfortunately I can't see any relevant differences in the code between methods with and without the full location information. I also can't find information about possible problems when reading the respective definition files in the doxygen log file.In our source files, Doxygen finds approx. 170k methods but does not see the definitions of 50k methods.The problem can be reproduced by running doxygen on its own source files (1.4.5 src distribution). I picked some example methods for which the information is missing (and a method for which it works as expected):All declarations in src/config.h, definitions in src/config.cpp; line numbers: Config::substituteEnvironmentVars, decl 523, def 2554-2562 Config::parseString, decl 537, def 4574-4589 Config::create, decl 548, def 2943-4514(Config::getInt, decl 397, def 742-756 )The xml location tags of the above methods in class_config.xml look like : <location file="...src/config.h" line="523"/> <location file="...src/config.h" line="537"/> <location file="...src/config.h" line="548"/>(<location file="...src/config.h" line="397" bodyfile="...src/config.cpp" bodystart="742" bodyend="756"/>)	CreateddoxyfileThis is the doxyfile for reproducing. The input to doxygen (1.4.5) was the src dir of the 1.4.5 src distribution of doxygen.I found something that causes doxygen's code parser get off-track. It fixes the problems seen in the config.cpp file (which was generated from config.l by the way). If you have an easy way to check this on all of doxygen's sources that let me know (you apparently did this and I assume not by hand ;)I'll include my fix in the next CVS update.This bug had the status ASSIGNED (which meant it was fixed, but not officially released), so now doxygen release 1.4.6 is out I've given it the status FIXED. Nevertheless, I would like to ask you to verify that this bug is indeed fixed in release 1.4.6. If not, then please reopen the bug.The problem is still there in doxygen 1.4.6 (1.4.6-NO). In the same source files, doxygen 1.4.6 misses/finds exactly the same function definitions as 1.4.5 did.	4.0	id=745602	9	False	False	bugzilla-gnome	1
id=755472	REOPENED	gobject-introspection	libgirepository	unspecified	Other Linux	Normal normal	gobject-introspection Maintainer(s)	2015-09-23 15:23 UTC by	Florian Weimer	2016-05-09 14:07 UTC (	1 user	As a safety measure against use from SUID/SGID processes, secure_getenv should be used in girepository/girepository.c to obtain the value of the GI_TYPELIB_PATH environment variable (and not g_getenv).Alternatively, the library could refuse to work if getauxval(AT_SECURE) is true.	I assume you're filing this because there does exist a setuid application using g-i - what one is it?The last time this came up for me was in the context of libdbus and X.org being setuid. I argued then that is the responsibility of setuid apps to audit their dependencies.See:No, I'm just moving the remaining unfixed downstream bugs upstream. This one corresponds to:The general situation has not changed at all. It's just a hardening proposal worth considering (in my humble opinion).Ah right, now I remember that. Thanks.I also checked for SUID users (again), and did not find any.Created0001-libgirepository-Refuse-to-run-in-setuid-applications.patchFlorian, want to review this?Review of:Maybe use _exit instead of exit, to avoid running cleanup routines?You could add a test case, but it's not straightforward. It would not have to run as root if you use an SGID binary and a supplementary group.Changed to use _exit.I did test this manually (with two local users). But any other kind of test (even the setgid one) can't run in traditional non-root rpm %check type setups as we can't know we'll have a supplementary group. It would need to be an external container/VM test, living outside of this repo.Florian, before I forget - if we continue farther down this path of modifying libraries to abort when AT_SECURE, note at least:```$ rpm -q gnome-keyringgnome-keyring-3.14.0-1.el7.x86_64$ getcap /usr/bin/gnome-keyring-daemon /usr/bin/gnome-keyring-daemon = cap_ipc_lock+ep$ ldd /usr/bin/gnome-keyring-daemon linux-vdso.so.1 => (0x00007ffd90140000) libgcr-base-3.so.1 => /lib64/libgcr-base-3.so.1 (0x00007faa3142a000) libgck-1.so.0 => /lib64/libgck-1.so.0 (0x00007faa311f3000) libgio-2.0.so.0 => /lib64/libgio-2.0.so.0 (0x00007faa30e7c000) libp11-kit.so.0 => /lib64/libp11-kit.so.0 (0x00007faa30c36000) libgobject-2.0.so.0 => /lib64/libgobject-2.0.so.0 (0x00007faa309e6000) libglib-2.0.so.0 => /lib64/libglib-2.0.so.0 (0x00007faa306ae000) libdbus-1.so.3 => /lib64/libdbus-1.so.3 (0x00007faa30466000) libgcrypt.so.11 => /lib64/libgcrypt.so.11 (0x00007faa301e5000) libdl.so.2 => /lib64/libdl.so.2 (0x00007faa2ffe0000) libgpg-error.so.0 => /lib64/libgpg-error.so.0 (0x00007faa2fddb000) libcap-ng.so.0 => /lib64/libcap-ng.so.0 (0x00007faa2fbd5000) libpthread.so.0 => /lib64/libpthread.so.0 (0x00007faa2f9b8000) libc.so.6 => /lib64/libc.so.6 (0x00007faa2f5f7000) libgmodule-2.0.so.0 => /lib64/libgmodule-2.0.so.0 (0x00007faa2f3f3000) libgthread-2.0.so.0 => /lib64/libgthread-2.0.so.0 (0x00007faa2f1f0000) libffi.so.6 => /lib64/libffi.so.6 (0x00007faa2efe8000) libz.so.1 => /lib64/libz.so.1 (0x00007faa2edd2000) libselinux.so.1 => /lib64/libselinux.so.1 (0x00007faa2ebac000) libresolv.so.2 => /lib64/libresolv.so.2 (0x00007faa2e992000) librt.so.1 => /lib64/librt.so.1 (0x00007faa2e78a000) /lib64/ld-linux-x86-64.so.2 (0x00007faa319da000) libpcre.so.1 => /lib64/libpcre.so.1 (0x00007faa2e528000) liblzma.so.5 => /lib64/liblzma.so.5 (0x00007faa2e303000)$```In the dbus commit above, changing it to use getauxval(AT_SECURE) instead of doing a uid != euid check would break gnome-keyring.Which dbus commit?I agree that applying the same thing to libraries such as glib can be tricky.gnome-keyring could probably use kernel keyrings to avoid CAP_IPC_LOCK privilege.For dbus, seeI see, dbus still appears to have issues with fscaps and SELinux transitions, then. Thanks.Downstream regression discussion:I backed this outFlorian, if you have any thoughts on this let me know. Maybe there's a way to teach the dbus setuid launcher to sanitize things, but long term I think our best bet is to simply stop using setuid binaries entirely.We're slowly getting closer with Xorg not being setuid anymore etc.AT_SECURE is also set for SELinux trust transitions. To make those transitions safe, girepository needs to be hardened in a similar way to SUID programs, e.g., use secure_getenv where applicable, treat certain file system paths as suspect, and so on.See. It turned out libgirepository needs hardening against untrusted environment variables, and using secure_getenv is appropriate.The domain transition here was from the system bus to an app - in practice if the system bus is compromised we're in a pretty bad place anyways.To rephrase, I don't think that downstream regression shows there's an important security issue. Do you?In the broader picture - I'm still worried about the potential side effects of a campaign to use secure_getenv given how often domain transitions occur.	18.0	id=776671	10	False	True	yetoohappy	1
id=745602	REOPENED	bugzilla.gnome.org	email	unspecified	Other Windows	Normal normal	Bugzilla Maintainers	2015-03-04 14:08 UTC by	Dieter Verfaillie	2015-03-23 21:03 UTC (	3 users	|Matthias Clasen changed|What Removed Added|status none reviewed||onfrom Matthias Clasen||Review of[review]: ^^^^^^^^^Review links sent by mail (like the one above) have been broken for a while.In the above case, it points toinstead of	Your email client doesn't understand: <base href="" />Which email client do you use?Ah, indeed. I see the issue with Roundcube Webmail 1.0.4 (browsing to that with Firefox 36.0) but not with K-9 Mail on my android phone.I don't see anything to fix here on the Bugzilla side. Closing as WONTFIX.Extract from message source:<pre>Review of <span class=""><a href="attachment.cgi?id=298415&amp;action=diff" name="attach_298415" title="Update bugzilla product/component"></a><a href="attachment.cgi?id=298415&amp;action=edit" title="Update bugzilla product/component">[details]</a></span><a href='/review?bug=745498&amp;attachment=298415'>[review]</a>:All links are correctly rendered except the review one. I'm going to assume it is due to the leading slash in href='/review?...', which the working links do not have. No idea if that is something that can or cannot be fixed on the Bugzilla side, that's up to you :)Uh, sorry, I wasn't aware the problem is only that one single link.Thanks for clarifying. Reopening then.***has been marked as a duplicate of this bug. ***FWIW, I think I changed review to show "review". Not sure if it worked.ok, this is a problem in geary 0.9.1, which uses libwebkitgtk-3.0.so.0seems ok in firefox 36 / gmailseems ok in evolution 3.12.11, using both:libwebkitgtk-3.0.so.0libgtkhtml-4.0.so.0seems ok in thunderbird 31.5.0For Geary, seeThere's an upstream bug to change everything to full links. But it'll take some time, won't make Bugzilla 5.0.(In reply to Olav Vitters from)Just noticed the review links now work in Roundcube Webmail 1.0.4They indeed no longer contain the leading slash.Thank you!	14.0	id=64994	11	False	False	otaylor	1
id=776671	REOPENED	gnome-photos	general	3.23.x	Other All	Normal normal	GNOME photos maintainer(s)	2017-01-01 05:36 UTC by	Scott Cohen	2017-01-07 19:32 UTC (	1 user	I am trying to build this application from source in my git cloned directory of the master branch and I have come across this make error:photos-tracker-change-monitor.c:95:1: error: packed attribute is unnecessary for ‘_TrackerResourcesEvent’ [-Werror=packed] } __attribute__ ((packed));Full make is located here:	Here is an archived version of the link in case the original becomes dead:Short term solution is to use --disable-Werror with autogen.sh or configure when building from git. When building from a released tarball, warnings are not treated as fatal, so those should be fine.Today we can remove most of the code in src/photos-tracker-change-monitor.[ch] by using TrackerNotifier. See. One could argue that we can just drop the __attribute__, but I haven't done that so far because it is not clear to me that it is really not needed across all possible architectures.I forgot to ask. Would you be interested in porting the code to use TrackerNotifier?(In reply to Debarshi Ray from)I can try but I wouldn't expect reliable results if I were you, let alone reaching dead line. I'm very new to this whole bug process and I'm still learning. But for the sake of knowledge, what would porting code of this calibre entail?(In reply to Scott Cohen from)That's ok. I tagged this bug as 'newcomer' because it is ideal for new contributors.First, you need to know some C because that's what the code is written in. Second, you will need to build and install tracker from git master. TrackerNotifier was added in 1.11.0.You can look at other instances where the GraphUpdated handler was replaced with TrackerNotifier. There is one example in tracker itself. See src/libtracker-miner/tracker-decorator.c, run git log on it and you will find it.The TrackerNotifier API lives in src/libtracker-sparql/tracker-notifier.[ch]. You can look at it for documentation. In case you built tracker to generate the documentation, they will also show up in devhelp.If you need help, you can find me in #photos and #tracker on GIMPNet, or send email.Reopening. Did you close it by mistake?(In reply to Debarshi Ray from)It seemed like there was a solution to the bug. Are workarounds not considered solutions?(In reply to Scott Cohen from)Well, since we already started discussing, I re-titled it to cover the port to TrackerNotifier. So, let's keep it open for that.	8.0	id=659326	21	False	False	danw	1
id=778307	REOPENED	GIMP	User Interface	2.8.20	Other Windows	Normal normal	GIMP Bugs	2017-02-07 20:10 UTC by		2017-02-10 13:44 UTC (	1 user	CreatedSimple stacktrace for crash.Environment: Windows 10 RS Korean localeTitle symptom occurs always when using text tool.Alphabet has no problem, only Hangeul(Korean letter) does crash.Consonants and vowels must be composed to make Hangeul syllable, Hangeul Windows IME has a state which compose them. There's no problem when not composing, even with composing state exit with enter or esc key is fine.Request any information if necessary to solve this bug. I just attached a stacktrace because I can't find windows debug symbol for gimp, and dump is too large.	What version is this?2.8.20 on Official site.Sorry I missed version information.This is basically a duplicate of, which has never been cherry-picked, mostly because I changed the IME behavior quite deeply (UI update, etc.). With 2.10 hopefully coming soon, not sure that's worth spending too much time on this.But we can decide we should actually backport all the text tool commits related to IME into 2.8.Anyway I propose to close this as duplicate. Schumaml, if you think we should just backport the whole UI change over to 2.8, tell me and I will.I personally didn't want to completely change the GUI for text input in a minor release but it's true that fixing crashes is also an important fix. So we may do an exception. So please reopen if you think this should be done.*** This bug has been marked as a duplicate of***Proposing to resolve a bug as a duplicate and asking for whether we may want to backport, but then resolving it as a duplicate in one go ensures that we won't look at it again.Ok. In any case, I won't spend any time finding a bug fix which does not require UI change because I have higher priorities. So the question is whether we would accept to backport a feature to 2.8 doing deep UI changes.	7.0	id=778307	9	False	False	schumaml	1
id=64994	REOPENED	glib	gobject	1.3.x	Other Linux	Normal normal		2001-11-21 00:16 UTC by	Damon Chaplin	2015-09-15 21:42 UTC (	4 users	In Glade, g_type_from_name() is returning 0 fairly often, eventhough the type has been explicitly initialized with a _get_type() call.	Can you provide a test case or more details?CreatedTest appgtk_color_selection_get_type() is __attribute__((const)) soGCC thinks is can discard calls to it if they aren't usedanywhere. try volatile GType type;I think the that the potential optimization from elimininatingrepeated get_type() calls is probably worth the oddity, but it is certainly a gotcha that a lot of people are runninginto.Yes, that does fix it.Though I don't like the use of G_GNUC_CONST here.Unless it really does have significant performance advantages,I'd take it out. It's not really correct.(In reply to)That's right, we've been Doing It Wrong.From the GCC manual:`const' Many functions do not examine any values except their arguments, and have no effects except the return value. Basically this is just slightly more strict class than the `pure' attribute below, since function is not allowed to read global memory.But _get_type() functions obviously *do* read global memory, so it's wrong forus to annotate them as const. What we really mean is "pure":`pure' Many functions have no effects except the return value and their return value depends only on the parameters and/or global variables. Such a function can be subject to common subexpression elimination and loop optimization just as an arithmetic operator would be.***has been marked as a duplicate of this bug. ***The first call to a _get_type() function is neither const nor pure, because it has side effects. What we really want is __attribute__((idempotent)), which was suggested upstream a long time ago () but never went anywhere.Calls to a _get_type() function after the first one can be called 'const' as legitimately as they can be called 'pure', because the static variable that the _get_type() function looks at never changes after the first call, so the optimizer doesn't need to worry about it.(Marking _get_type() functions 'pure' instead of 'const' would basically be a no-op [relative to not marking them at all], because in code like: gtk_button_do_this (GTK_BUTTON (widget)); gtk_button_do_that (GTK_BUTTON (widget));you'd need to call gtk_button_get_type() both times if it was marked 'pure', because gtk_button_do_this() might have changed global memory. If it's marked 'const', you only need to call it the first time.)(In reply to)True. The obvious long term thing we want is for the compiler to be aware of the type hierarchy...a gcc gobject-introspection plugin. Though there are also obvious issues with that owing to the fact that one has to compile the code to get the type data =/More medium term, yes - Behdad's suggestion of 'idempotent' makes a lot of sense. It's probably not hard to implement at all.But this bug should remain open until we ship correct annotations on our _get_type() functions; telling people to use volatile to subvert the optimizer is not a good long term situation.(In reply to)FWIW in my code, I tend to hoist GObject-style casts manually. I.e.:GtkWidget *mywidget;GtkButton *mywidget_button;mywidget = foo_widget_new ();mywidget_button = GTK_BUTTON (mywidget);gtk_button_do_this (mywidget_button);gtk_button_do_that (mywidget_button);Because it also avoids grabbing a process-global mutex at every function call.(Well actually, more often I say "screw that shit" and just use C casts, but sadly we rely too much on GObject casts in our ecosystem due to a lack of testing)(In reply to)see alsogdbus-codegen has this bug too.I think at this point, we might as well declare that using G_GNUC_CONST on type functions is allowed/encouraged, and g_type_ensure() is the only supported way to force a type to be registered without creating actually an object of that type.(In reply to Dan Winship from)Probably, but if we recommend this, G_DECLARE_*_TYPE should then be changed to use G_GNUC_CONST. Best do that *now* before applications start relying on the opposite behavior.This works *now* with the current GCC version, but what if a new optimization is added in the future that takes advantage of const functions and that breaks the whole g platform? For example interprocedural optimizations coupled with bundling…It's safer to rely only on the API of GCC, that is, the interface, what is documented, not how it is currently used internally.	14.0	id=586379	12	False	False	patrys	1
id=659326	REOPENED	glib	gio	unspecified	Other Windows	Normal normal		2011-09-17 16:29 UTC by	Allison Lortie (desrt)	2012-08-06 15:24 UTC (	4 users	We currently do two things a lot in GLib these days: - make lots of worker threads - call gettext() in themThe second happens for seemingly innocent reasons like accessing a type macro for the first time, causing a class_init function to be called which uses _() on its property strings.gettext is not threadsafe. In particular, _() can indirectly result in calls to getenv() which is not threadsafe. We're starting to see some crash traces showing up on this codepath.We need to take a look at what we do in GLib (and probably other libraries) to avoid calling gettext from any of our worker threads.	(In reply to)got any bug numbers?That seems like a complete non-starter. Eg, this would basically mean you couldn't throw GErrors in worker threads. And forbidding all uses of getenv() in other threads is even worse. I think we need to treat this as an upstream bug (in getenv, not gettext). And/or, figure out why people are calling setenv, and make them stop, since they're probably creating other race conditions as well.One thing we _could_ do to mitigate the problem is to make g_[gs]etenv threadsafe, and have the glib_gettext wrappers take the same lock. That would probably largely solve the problem in core glib, but, of course, people can and will use direct libc calls, so the problem remains.is the stacktrace that started this discussionWe may have to audit all of our code for setenv() calls not early in main(). One example that pops up is:gdk/tests/display.c: g_setenv ("DISPLAY", "poo", TRUE);Annotate shows:fe687e76 (Matthias Clasen 2011-01-18 09:36:24 -0500 42) g_setenv ("DISPLAY", "poo", TRUE);So we know who to blame =)Right, I think we just need to outlaw setenv(), basically.There is no thread-safety issue with getenv() in the absence of setenv calls.CompareCreatedAdd thread-safety warnings to the g_setenv() and g_unsetenv() docs======we could potentially also make g_thread_create() set some global flagindicating that there is at least one other thread now, and haveg_setenv()/g_unsetenv() check that and do a g_warning()...(Also,is an example of this problem. Epiphany crashes onstartup maybe 1 time in 20 or so.)Review of:::: glib/gutils.c@@ +1338,3 @@+ * the very start of your program, before creating any other threads+ * (or creating objects that create worker threads of their own).+ * </para></warning>Might be good to also point out that some widely used APIs such as gettext() use getenv() under the covers.Createdgutils: warn on g_setenv/g_unsetenv after threads are created=====so, here's that. "G_DEBUG=fatal-warnings make check" passes.The pthread_atfork() is needed so you don't get warnings when settingup the child environment in g_spawn().I made the warning only happen on UNIX, since on Windows, the g_spawnchild setup stuff happens in-process, so it would trigger the warningsotherwise. (And it's probably all thread-safe on Windows anyway, sothe g_spawn code isn't a bug in that case.)Review of:note: we already have a pthread_atfork() in gmain.c to detect forking after the main context has been created. Not sure if it makes sense to tie-in there or not.so, trying to fixcompletely turns out to be tricky, and we might want to think about adding some new API...g_unsetenv (EPHY_UUID_ENVVAR); command_line = g_strdup_printf ("gvfs-open %s", uri); g_spawn_command_line_async (command_line, &error);to fix this, they'd have to use the much more complicated g_spawn_async() instead, and either pass a complete environment, or use a child_setup callback.And in:they do an unsetenv() followed (indirectly) by g_app_info_launch(), which doesn't provide any way to modify the environment at all... maybe there could be some new API in GAppLaunchContext for that?(Actually, that could be used in the previous case as well, using gio functions instead of spawning gvfs-open, which is really kind of lame anyway...)What would the api look like ?g_app_launch_context_setenv (GAppLaunchContext *c, const gchar *variable, const gchar *value)?of coursecommand_line = g_strdup_printf ("env -u %s gvfs-open %s", EPHI_UUID_ENVVAR, uri);will work too, and is not much more awful then launching gvfs-open is in the first place...CreatedAdd g_launch_context_set_child_setup_func()Calling setenv() or unsetenv() in a multithreaded process is unsafe,so add a way to set a GSpawnChildSetupFunc when using GAppInfo so thatthe caller can modify the environment of the child safely.====This is what I was thinking of.BTW, it turns out that it's in theory not safe to callsetenv()/unsetenv() from a GSpawnChildSetupFunc, since they're notasync-signal-safe...I think the proscription against non-async-signal-safe code from the setup function is pretty arbitrary -- more like a way of saying "try not to cause too much damage here". We could probably be more precise.(In reply to)diff --git a/glib/gspawn.h b/glib/gspawn.hindex c9da1a8..70bb3cb 100644--- a/glib/gspawn.h+++ b/glib/gspawn.h@@ -102,9 +102,13 @@ typedef enum * to perform but before calling exec(). On POSIX actions taken in this * function will thus only affect the child, not the parent. *- * Note that POSIX allows only async-signal-safe functions (see signal(7))- * to be called in the child between fork() and exec(), which drastically- * limits the usefulness of child setup functions.+ * Note that any mutexes that were held by other threads in the parent+ * process at the time of the fork() will still be locked in the child+ * process, and they will never be unlocked (since the threads that+ * held them don't exist in the child). Therefore, it is not safe to+ * call functions that may try to acquire mutexes from a+ * #GSpawnChildSetupFunc. POSIX only guarantees that async-signal-safe+ * functions (see signal(7)) can be called successfully. * * Also note that modifying the environment from the child setup functionBut setenv() is still unsafe, because it may need to realloc(), and it's possible that some malloc-related lock was held at the time when you forked.It seems that the only really safe way to modify the child environment is to pass in a complete and pre-modified envp[].I think I would prefer a simple setenv/unsetenv over allowing arbitrary child_setup functions that have hard-to-explain restrictions.Createdgutils: Add functions for working with environment arrays.When spawning a child process, it is not safe to call setenv() beforethe fork() (because setenv() isn't thread-safe), but it's also notsafe to call it after the fork() (because it's not async-signal-safe).So the only safe way to alter the environment for a child process froma threaded program is to pass a fully-formed envp array toexec*/g_spawn*/etc.So, add g_environ_getenv(), g_environ_setenv(), andg_environ_unsetenv(), which act like their namesakes, but work onarbitrary arrays rather than working directly on the environment.CreatedGAppLaunchContext: add environment-manipulating functionsAdd functions for manipulating the environment under which aGAppLaunchContext will launch its children, to avoid thread-relatedbugs with using setenv() directly.FIXME: win32 side isn't implemented yetReview of:Do we still want this one if we can't actually use it to call setenv()?Review of:::: glib/gspawn.h@@ +122,3 @@+ * drastically limits the usefulness of child setup functions.+ *+ * In particular, it is not safe to modify environment variables fromI would say "In particular note it is not safe to call any function which may call malloc(), which includes POSIX functions such as setenv()."::: glib/gutils.c@@ +1701,3 @@+ * @envp to @value. Both the variable's name and value should be in+ * the GLib file name encoding. On UNIX, this means that they can be+ * any sequence of bytes. On Windows, they should be in UTF-8.Let's use the term "byte string", like g_file_get_basename(), because it *does* have to be NUL terminated.@@ +1735,3 @@++ memcpy (new_envp, envp, length * sizeof (gchar *));+ g_free (envp);Why not g_realloc()?::: glib/gutils.h@@ +274,3 @@+gchar ** g_get_environ (void);+const gchar * g_environ_getenv (gchar **envp,+ const gchar *variable);How about g_environ_list_get_value () or something? Some name that makes it a bit more obvious we're operating on a temporary, and doesn't contain a substring "getenv" so you know it's different.(Not a strong feeling, just a possibility)@@ +280,3 @@+ gboolean overwrite) G_GNUC_WARN_UNUSED_RESULT;+gchar ** g_environ_unsetenv (gchar **envp,+ const gchar *variable) G_GNUC_WARN_UNUSED_RESULT;We could accept NULL for value and not expose _unsetenv().::: glib/tests/cond@@ +2,3 @@++# cond - temporary wrapper script for .libs/cond+# Generated by libtool (GNU libtool) 2.4You seem to have attached the libtool wrappers =)(In reply to)ok, I just copied the docs from g_getenv/g_setenv/g_unsetenv, but we can fix it there too.huh. no clue. :)Note that g_get_environ() already exists. I chose the other names to sort of match it. And I felt that including getenv/setenv/unsetenv in the names was a feature, not a bug.we could, but we could have done that in g_setenv() too...Comment onAdd g_launch_context_set_child_setup_func()yeah, this is just trading one race condition for anotherReview of:::: gio/gdesktopappinfo.c@@ +1130,3 @@+ for (i--; i >= 0; i--)+ *(data->pid_envvar++) = buf[i];+ *data->pid_envvar = '\0';This kind of hack makes me think more about implementing some alloca() based functions. I have g_build_filename_alloca() already. We could consider g_vprintf_alloca() too, though that one would be hard.@@ +1270,3 @@+ envp = g_environ_setenv (envp,+ "GIO_LAUNCHED_DESKTOP_FILE_PID",+ "XXXXXXXXXXXXXXXXXXXX",Could use a comment like /* Filled in in child_setup function */@@ +1272,3 @@+ "XXXXXXXXXXXXXXXXXXXX",+ TRUE);+ data.pid_envvar = (char *)g_environ_getenv (envp, "GIO_LAUNCHED_DESKTOP_FILE_PID");Ug...you just wrote these functions and we're already playing evil tricks with them =/Can't you call g_environ_getenv() inside the child_setup so we at least don't mysteriously explode if someone adds a g_environ_setenv() call after this?While thinking about this more, while it's true that the POSIX spec limits what you can call, in *reality* glibc has hooks that on Linux, ensure malloc is at least somewhat usable after fork() time - from my reading of the code, it unlocks the mutex at least.Otherwise really we'd be deadlocking all over the place - Python exposes both threads and child setup functions (and I bet it calls malloc() while interpreting the child setup inside the forked process too).So we definitely have issues with unsynchronized getenv()/setenv() pairs, it's not immediately necessary for GNOME/Linux to clean all of our child_setup functions of calls to malloc() .(In reply to)Yes, but...That's backwards actually. If we don't pass pid_envvar, then we have to pass the envp as a whole, but then if someone adds another g_environ_setenv() after that, it will break, because that will (likely) realloc the array, leaving the old data.envp dangling. Whereas g_environ_getenv() documents that the returned pointer only becomes invalid if you change *that variable* (since each element of the envp is allocated separately).(In reply to)Yes, it appears that it locks the mutexes before fork(), and unlocks them in both processes afterward. Makes sense. We could say that glib only supports platforms that do this, since it's not even that hard to implement...Yeah, I just figured better safe than sorry. We don't want to be here again in a few years.Review of:Committed with some cleanups, taking Colins comments into account.Review of:Committed, with some cleanups and fixes.reopening because:(In reply to)(Windows presumably doesn't have the same thread-safety issues, but we at least need to make the API work the same way.)retitle for clarity	29.0	id=724200	5	False	False	a9016009	1
id=768077	REOPENED	gdm	general	3.20.x	Other Linux	Normal normal	GDM maintainers	2016-06-27 00:26 UTC by		2016-07-30 00:31 UTC (	2 users	At the moment there is no easy way to set the time format for gdm on the login screen.	You can do that by changing the system-wide formats setting which can be achieved either by using localectl directly or inside your gnome user session, in the region&language settings panel.(In reply to Rui Matos from)Sorry for taking up your time. Thanks for the help. I did not see that setting.I just tried that and it seems like you cant change it from the region and language panel. I set the region to United States and it does not change it whatsoever.While setting it for the login screen on there it does show that the time should be 12 hours with the United States locale, but it has no effect.	4.0	id=769827	7	False	False	tiagomatos	1
id=769827	REOPENED	gnome-shell	general	3.20.x	Other Linux	Normal normal		2016-08-13 11:10 UTC by		2016-10-11 21:40 UTC (	2 users	CreatedGnome shell errors in journalctlMy Gnome shell is dying pretty often in the last time. Part of it is apparently an intel gpu driver bug, but I think that's not all. When looking in journalctl, I find a lot of recurring critical errors on gnome shell. Might one of them be a reason for the gnome shell dying on me?My hardware is a Thinkpad x240 with a Intel Core i5-4300UMy software: A current arch linux with Linux 4.4.16-1-lts and Gnome Shell 3.20.3-1.Do you need any more information?	Do you use gnome-shell extensions? Can you find a set of steps that trigger those error messages?Steps that trigger it: Well it shows two short sections of it when coming back from suspend, but it also happens a lot when the laptop is running. So I don't really know how to produce it.I have the following Extensions enabled:* Dash to Dock* Dynamic Top Bar* No Topleft Hot Corner* Refresh Wifi ConnectionsPlease try without extensions - at least the st_widget_get_theme() errors look like they are caused by the dash-to-dock extension.Alright, I had a new look into the current journalctl. The st_widget_get_theme() errors are gone (even without deactivating the extension, don't know what changed). But the "(gnome-shell:916): CRITICAL" messages are still there.They appear at least in the following two situations:* opening the Gnome Shell overview (pressing super key)* deactivating the screen (e.g. by locking it and waiting for a few seconds) and coming back(In reply to marius from)So you still have the extensions enabled when reproducing the issue? Because I don't see a single of those CRITICAL messages in the journal, and I obviously use the overview or lock the screen.Please try the following steps: (1) Disable all extensions and restart the shell (Alt+F2 r); see if you can reproduce the issue (2) a. If you can, try find a better reproducer (tweaked settings, themes, unusual monitor setup, ...) (2) b. If you can't, try locating the culprit by enabling extensions one-by-one until the errors show upOh, sorry, my mistake. I actually tried out deactivating the extensions (even though it didn't really come out of my description) but I didn't restart Gnome Shell. I did the 1by1 activation and found out it's the "Dynamic Top Bar" extension. I filed a new bug report here:Thanks for the help!Hi,I'm reopening this since I did some further research into the gnome shell extension and found out that the command that produces the error in the extension does also produce that error without the extension installed (just by trying it out individually):Reproduce:* Open looking glass* Choose with the "element chooser" (button on upper left corner of looking glass) the gnome panel* click on the resulting object and there on the element '_delegate'* get this element into the shell by clicking 'Insert'* saving it via 'panel = it'* execute panel.actor.set_style('background-color:transparent;')=> Result:* good: the panel is correctly set transparent* bad: in journalctl -xe, the error in question is being reported:Okt 11 23:20:02 sunflower org.gnome.Shell.desktop[673]: ** (gnome-shell:673): CRITICAL **: cr_parser_new_from_buf: assertion 'a_buf && a_len' failedOkt 11 23:20:02 sunflower org.gnome.Shell.desktop[673]: ** (gnome-shell:673): CRITICAL **: cr_declaration_parse_list_from_buf: assertion 'parser' failedThis also happens with the other panel stylings used by the extension and leads to my systemlog being full of errors.Other stylings that also produce this error:Is this a problem of gnome-shell or somehow a misuse of set_style? (even though it works correctly?)	7.0	id=711807	19	False	False	stefw	1
id=586379	REOPENED	empathy	Chat themes	unspecified	Other Linux	Normal normal		2009-06-19 13:06 UTC by	Xavier Claessens	2015-02-09 21:31 UTC (	3 users	Atm we do not use the header and footer html files if provided by the theme.	CreatedPartial fixFirst part of the fix is to implement naive footer support. Most of the themesonly sue Footer.html to load custom JS files so until we add header supportthis should be enough to make most themes happy.I think you can save memory by not keeping footer_html in priv struct. You only need it for initial loading ;)CreatedUpdated patchUpdated according to reviewSeems good :)Closing the bug as the patch has been merged.Uh, we only have naive support for footers, no header support and no macro support. That's hardly "fixed" :)	6.0	id=103770	14	False	False	nalin	1
id=724200	REOPENED	gtk+	.General	3.10.x	Other Linux	Normal normal		2014-02-12 01:23 UTC by	Pierre Fortin	2015-09-24 13:35 UTC (	1 user	I have no idea what component to file this bug against...My system (Mageia 4) has two versions of gtk+ installed:$ rpm -qa | grep gtk\+gtk+3.0-3.10.6-4.mga4lib64gtk+3.0-devel-3.10.6-4.mga4gtk+2.0-2.24.22-3.mga4lib64gtk+2.0-devel-2.24.22-3.mga4lib64gtk+2.0_0-2.24.22-3.mga4lib64gtk+3_0-3.10.6-4.mga4lib64gtk+-x11-2.0_0-2.24.22-3.mga4The problem is random and affects individual windows, not all the windows of an application. I've been experiencing it for months in both Mageia2 and Mageia4 (skipped 3).This has been reported to Mageia and KDE:(early report)(more recent & succinct report)The latter pointed me here.Restarting an affected window restores normal operation -- either a single window in the case of firefox, or the entire application in the case of gkrellm. Other applications are rarely affected; but I can't say any application is immune.	Having this problem on several emacs windows today.GNU Emacs 24.3.1 (x86_64-mageia-linux-gnu, GTK+ Version 3.10.6) of 2014-05-30 on ecosse.mageia.org, modified by MageiaNeeding a place to start to further debug this, attached strace to one each windows (with and without bug triggered). Tried scrolling window with mouse wheel and nothing would happen until I moved the mouse out/in window; then screen updated to where it should be. Unless it happened too fast to see, no "scrolling" of the window was visible -- only the last and new were displayed.Examined both strace files and found these notable differences:Window with bug NOT triggered contains many block/unblock sequences (always paired):rt_sigprocmask(SIG_BLOCK, [WINCH IO], NULL, 8) = 0rt_sigprocmask(SIG_UNBLOCK, [WINCH IO], NULL, 8) = 0Presuming WINCH means "window change"..(?)In addition to above paired sequences, window with bug triggered (mouse must exit/enter to resume) contains many items between some block/unblock pairs:rt_sigprocmask(SIG_BLOCK, [WINCH IO], NULL, 8) = 0poll([{fd=7, events=POLLIN|POLLOUT}], 1, 4294967295) = 1 ([{fd=7, revents=POLLOUT}])writev(7, [{"\177\0\1\0;\0\5\0\232\0@\v\0\0\0\0\n\0\0\0\7\0\16\0[\0\4\0 \0\0\0"..., 40}, {NULL, 0}, {"", 0}], 3) = 40poll([{fd=7, events=POLLIN}], 1, 4294967295) = 1 ([{fd=7, revents=POLLIN}])recvfrom(7, "\1\0\253\235\4\0\0\0\2\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 4096, 0, NULL, NULL) = 48recvfrom(7, 0xc3dcf4, 4096, 0, 0, 0) = -1 EAGAIN (Resource temporarily unavailable)recvfrom(7, 0xc3dcf4, 4096, 0, 0, 0) = -1 EAGAIN (Resource temporarily unavailable)poll([{fd=7, events=POLLIN|POLLOUT}], 1, 4294967295) = 1 ([{fd=7, revents=POLLOUT}])writev(7, [{"\214\32\7\0\1\0\5\0\307\0@\v\377\377\0\0\0\0\377\377\n\0\0\0\7\0\16\0\214\27\n\0"..., 104}, {NULL, 0}, {"", 0}], 3) = 104poll([{fd=7, events=POLLIN}], 1, 4294967295) = 1 ([{fd=7, revents=POLLIN}])recvfrom(7, "\1\0\257\235\4\0\0\0\2\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 4096, 0, NULL, NULL) = 48recvfrom(7, 0xc3dcf4, 4096, 0, 0, 0) = -1 EAGAIN (Resource temporarily unavailable)recvfrom(7, 0xc3dcf4, 4096, 0, 0, 0) = -1 EAGAIN (Resource temporarily unavailable)rt_sigprocmask(SIG_UNBLOCK, [WINCH IO], NULL, 8) = 0--- SIGIO {si_signo=SIGIO, si_code=SI_TKILL, si_pid=9931, si_uid=500} ---rt_sigreturn() = 0[...]rt_sigprocmask(SIG_BLOCK, [WINCH IO], NULL, 8) = 0poll([{fd=7, events=POLLIN|POLLOUT}], 1, 4294967295) = 1 ([{fd=7, revents=POLLOUT}])writev(7, [{";\0\5\0\232\0@\v\0\0\0\0\n\0\0\0\7\0\16\0[\6\4\0 \0\0\0\0\0\0\0"..., 36}, {NULL, 0}, {"", 0}], 3) = 36poll([{fd=7, events=POLLIN}], 1, 4294967295) = 1 ([{fd=7, revents=POLLIN}])recvfrom(7, "\1\0\303\235\4\0\0\0\2\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 4096, 0, NULL, NULL) = 48recvfrom(7, 0xc3dcf4, 4096, 0, 0, 0) = -1 EAGAIN (Resource temporarily unavailable)poll([{fd=7, events=POLLIN|POLLOUT}], 1, 4294967295) = 1 ([{fd=7, revents=POLLOUT}])writev(7, [{"\214\32\7\0\1\0@\v\307\0@\v\377\377\0\0\0\0\377\377\n\0\0\0\7\0\16\0\214\27\n\0"..., 104}, {NULL, 0}, {"", 0}], 3) = 104poll([{fd=7, events=POLLIN}], 1, 4294967295) = 1 ([{fd=7, revents=POLLIN}])recvfrom(7, "\1\0\307\235\4\0\0\0\2\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 4096, 0, NULL, NULL) = 48recvfrom(7, 0xc3dcf4, 4096, 0, 0, 0) = -1 EAGAIN (Resource temporarily unavailable)recvfrom(7, 0xc3dcf4, 4096, 0, 0, 0) = -1 EAGAIN (Resource temporarily unavailable)rt_sigprocmask(SIG_UNBLOCK, [WINCH IO], NULL, 8) = 0--- SIGIO {si_signo=SIGIO, si_code=SI_TKILL, si_pid=9931, si_uid=500} ---rt_sigreturn() = 0Also, these LARGE [-]values are only seen on the window with the bug triggered:--- SIGIO {si_signo=SIGIO, si_code=SI_KERNEL} ---rt_sigreturn() = 1--- SIGIO {si_signo=SIGIO, si_code=SI_TKILL, si_pid=9931, si_uid=500} ---rt_sigreturn() = 12828768[...]--- SIGIO {si_signo=SIGIO, si_code=SI_KERNEL} ---rt_sigreturn() = 41625176recvfrom(7, "\10\0\217\304\345\370\n\0\273\2\0\0\227\0@\v\0\0\0\0\261\3\360\1\201\0\212\1\20\10\1\2"..., 4096, 0, NULL, NULL) = 64--- SIGIO {si_signo=SIGIO, si_code=SI_TKILL, si_pid=9931, si_uid=500} ---rt_sigreturn() = -28518012This bug appears to kick in after about 1 week. Restart affected gkrellm, and it stops updating about a week later...1. Playing with settings:- change gkrellm updates per second -- impacts the number of updates that occur when mouse crosses window boundary, and on Alt+left click on gkrellm titlebar:- change KDE Window Behavior->Window Actions[Alt+left button] -- some settings cause N updates for a fraction of a second; others fewer updates. Yet others, no updates2. I run two instances of claws-mail. At the moment, one instance works fine when clicking online/offline icon (lower-right of app window) -- notification trayicon switches instantly. The other instance of claws-mail, online/offline notifications to the trayicon are totally ignored when this bug kicks in.3a. Running multiple emacs sessions grouped in one window (grouping is just a choice -- bug happens without grouping). One emacs session stops updating... that is:- scroll mouse = nothing. Move mouse out of window and scroll occurs- type = nothing. Move mouse out of window and characters appearPretty much any action is "queued" until mouse leaves/enters window.3b. Ditto for firefox; though bug affects one tab within one of several windows which I run grouped into a single window.4. clock updates stop. Moving mouse into or out of clock area causes one update. Rarely, a tooltip appears -- moving out does not update clock and tooltip remains. Move mouse back to clock; tooltip disappears. Clock will not update at all unless mouse moved over it -OR- when raising app windows. With focus-follows-mouse, moving from one window to another does not cause an update; only when raising...In summary, this bug appears after a few days. Affected windows remain affected until they are restarted which clears up that one window. Logging out and back in clears everything for a few days... then... :(Re item 2 in: if I click online/offline button on claws-mail, nothing happens; but raising another window, or lowering claws-mail does update the trayicon to the current status.not seeing this after 13 days on Mageia 5ARGH!! Seeing this again after 32 days on Mageia 5...claws-mail tray icon not being updated unless I switch desktops. Clock not updating unless I mouse over it; update occurs at same time as "Current Time" popup displays. gkrellm not updating unless I mouse in|out -- moving mouse inside gkrellm window does nothing.Logout/login (no reboot) clears it all up. Will update ~next month. Anyone have a clue where I should look?Started happening again last night... New data: just noticed that if the mouse hovers over a claws-mail trayicon, the new-mail flag will correct itself as the tool tip pops up.Logout/login 2015-08-30 resolved the issue until this morning. The clock also updates only when the tooltip pops up or disappears -- so display/hide tooltips forces updates once the bug is triggered.	9.0	id=606090	30	False	False	carlosgc	1
id=103770	REOPENED	vte	general	0.10.x	Other other	Normal normal	VTE Maintainers	2003-01-17 19:52 UTC by	Jordi Mallach	2011-08-26 05:55 UTC (	4 users	In GNOME-Mud, we have the following dilemma:We want to get rid our incomplete, buggy terminal handling code and have aterminal library like vte handle all of it.For a mud client, Gtk+'s split screen feature is also very attractive, sowe now have to chose between our crappy terminal support or no split screen.It'd be nice if vte could have similar stuff as Gtk2's text widget, thatallows a terminal to be split in multiple ways.It wouldn't be useful just for us. Others have pointed out that it'd bevery nice to have this in Gnome-Terminal itself too.	Is there a reason you can't just use two widgets? To split the screenproperly for applications, the widget would need to control andrespond to two pseudo-terminals, which would complicate the internalsfurther.Hi Nalin,The point of this request is to use two viewports of the same data,not two distinct terminals.The idea is that gnome-mud's user presses Page Up, and his GnomeMudterminal splits: the upper one holds frozen past text (so he can checkhow he killed a monster, or what was said by someone) while the lowerpart of the screen still is in motion, getting the normal input fromthe game. This is common in advanced MUD clients. I could attach somescreenshot of a client that supports this, if you wish, but I hope youget the idea.This would be a nice feature to have also in IRC clients, and evenregular terminals. Imagine scrolling up your terminal to locate somedocumentation that's scrolled and being able to see the command line youare editing...That requires a model/view split in vte first, but such an split will greatly help to do all kind of cool stuff, like his other request: display-independent persistent terminals, that you can detach from and attach to later (like screen does, but at gnome-terminal/vte level.)I looked into this a bit tonight. Doesn't look bad at all. All we need to do is: - Make VteTerminal not subclass GtkWidget. Add a VteTerminalView object that subclasses GtkWidget and references a VteTerminal. - Move the font stuff, scroll_delta, and invalidated region stuff into View.Then the terminal simply needs to dispatch a few things to views connected to it: - invalidate_cells - invalidate_all - scroll_to_cursorThe view, depending on its mode (readonly or readwrite) sends back keystrokes and mouse events to the Terminal.Not sure I'll code it all, but I'm playing with it right now.This of course breaks API very harshly. One way to avoid that is to make VteTerminal actually subclass VteTerminalView. So the first terminal you make has a default view. Additional views can be created separately.Communication between view and terminal can be done using signals, but I'm more inclined to open-code it instead. Not sure.krh has a use case for using VteTerminal with non-gtk views. The split should accommodate that. In fact, maybe we should split into vte and vte-gtk. A vte-cairo view is also possible. It will push all updates to a cairo_t directly. Things to keep in mind.	6.0	id=771630	8	False	False	csoriano	1
id=771630	REOPENED	nautilus	File Search Interface	3.20.x	Other Linux	Normal normal	Nautilus Maintainers	2016-09-18 18:03 UTC by	Bijan Binaee	2016-10-30 16:16 UTC (	2 users	Description:Yesterday, I changed tracker preference to not index file contents ( to speed up indexing process and decrease size ) and suddenly after re-indexing, nautilus gnome-shell search-provider stop working. After looking in the source code I found that the culprit is following lineg_string_append_printf (sparql, " fts:match '\"%s*\"'", search_text);inwhich will eventually filter files indexed with no contents.though commenting that line solve the problem for me, it seems like it probably need a better fix.Steps to reporoduce:1. open tracker-preferences - go to controll tab - untick "Index content of files found" and "Index numbers"2. run "tracker reset --hard;tracker daemon -f"Tested onNautilus 3.20.3Arch Linux x86_64 Linux 4.4.15-1-lts	*** This bug has been marked as a duplicate of***Hi,After I upgraded to 3.22 (Arch Linux). The problem still exist.Althoughis targeting the same line in the source code, it's not a duplicate of this bug.The patch provided inside, still need the files to have contents. So if "Index content of files" is disabled in tracker preferences, nautilus won't find any file no matter what you type(prefix or fullname). The only solution as I mentioned above is to remvove content matching filter or g_string_append_printf (sparql, " fts:match '\"%s*\"'", search_text);inin the case that file have no contentWe cannot do that in practice, as it would require reading the content.Not sure what a good fix would be for this...A better solution probably is check whether file have any content avalible or notIf there isn't any, then the filter should not be based on the file content, else check the content,I have some free time this weekend so If you don't mind I could create a patch around this(In reply to Bijan Binaee from)I my previous comment I said this is not doable in practice, since it requires to read the content. We cannot do that for performance.Aha....Still other alternative solutions may put into action.Solution 1: 1. Query for the suggestion using content based filter2. If nothing shows up query again without content filter. * This probably not affect performance at all (it is O(1) solution).Solution 2: 1. Check tracker preferences in GSetting for "Index content of files found"2. If it's enabled then skip content filtering* Altough this may create confustion not affect performance at all	6.0	id=760400	5	False	False	ebassi	1
id=606090	REOPENED	evince	general	3.8.x	Other Linux	Normal normal	Evince Maintainers	2010-01-05 10:16 UTC by	Tobias Wolf	2014-04-11 15:25 UTC (	18 users	Evince used to remember the state of the sidebar – on or off.Now it always starts with an open sidebar, which is unfortunate.	Do you mean for the same document? or by default for new documents?When I re-open a document in which I had disabled the sidebar before closing Evince starts with a sidebar momentarily and then hides it (within about 100-200ms).But that it displays the sidebar by default is the problem. I think sidebar or not should not be document dependent. It should be a user specified toggle, like in Nautilus and EOG. I rarely use sidebar at all. I find horizontal resolution tremendously more important to get readable text than gimmicky table of contents or thumbnails. What for is a miniature thumbnail for plain document pages anyway?Maybe is good idea to set the default state of the sidebar (for new documents) as the state without any document.Does it sounds sensible or is a usability ugly hack ?This a regression caused by the new metadata system. I would fix it as soon as we migrate from gconf to gsettings.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***the bug is not going to be fixed in the current GNOME version and users will have to deal with this being broken for one cycle or several if you consider distributions as Debian which will ship the current version in their stableI was thinking about implementing a workaround for 2.30.1I've just pushed a workaround to gnome-2-30 branch. However, not all settings we used to save are saved now, only toolbar and sidebar visibility and window size are used as default values for new documents. I'll fix it in master too by using gsettings.Thank you, Carlos, for implementing a temporary workaround for this issue. It's a huge time saver for people that open lots of PDFs off of the web, and don't have to resize the Evince windows every time.May I suggest that the "maximized" setting is saved as well? Even though with commitapplied new windows will start almost full sized, a few more pixels can be gained when the window is maximized. :>The sidebar still momentarily flashes when a document is opened. Is this intentional?Wouldn’t it be better if the sidebar were off by default for an empty window?(In reply to)Yes, fixed now, thanks :-)This is a pretty huge annoyance for people who spend a lot of time reading science papers, etc. I always want them to open fullscreen, dual-view, no sidebar or toolbar. Could you make a workaround by adding command-line options to evince? There's already -f for fullscreen, but if you add options for dual-view and sidebar I could just replace the evince symlink with a script that calls it with those options set.I've just fixed it in git master too.It seems this bug is still present in 2.32.0 (with default evince on ubuntu maverick).Even explicitly selecting "save current settings as default" from the menu, some of the new documents have sidebars, different window sizes and fullscreen states.As far as I recall, there is a way to save settings in a pdf, are they used by evince? It seems as if some new documents use the default while others don't. It would be best if all new files open with the same default and not someone elses preferences.This bug should be reopened, because it doesn't work.1. open evince w/ no PDF2. resize the windows3. quit4. one of: a. open evince w/ no PDF b. open a never-before-opened PDFexpected result:window size and location is the same as the no-document window's last setactual result:window doesn't remember user-set size or location; no-document windows' size is different than document-holding windows' sizeEdit->Save Current Settings As Defaultstill does not seem to do anything as of version 3.4.0 (in Ubuntu 12.04).REPRO: 1. Open a pdf (seemingly always opens a small window at 70% scaling).2. Resize the window larger and set scaling to 100%3. Edit->Save Current Settings As Default4. Close5. Re-open the same docResults: The doc is opened in the small window at70% again.Expected Results: Should open at large size and 100% scale.Would someone who has permissions please re-open this (not really fixed) bug? Thanks.I agree, it's not fixed. It no longer shows a sidebar every time, but it still doesn't remember window size. I don't know if Save Current Settings As Default would help, because when I tried that, it crashed my X server. Evince 3.4.0 on Ubuntu pangolin.As of this writing, this bug still exists. “Save Current Settings as Default” does nothing; every document is opened with the same completely unusable defaults — tiny window, sidebar on, continuous, fit width. So my PDF-reading routine is: open the file, resize the window, close the sidebar, use the toolbar drop-down to choose “best fit”, disable continuous, and then depending on the nature of the document, possibly enable Dual. It's very painful.(In reply to)That's not very helpful; please specify the exact *version* of evince used.Sorry. I'm a little frustrated because this bug is really basic and embarrassing, and it's been there for years. I have reproduced it on 3.6.1 (Ubuntu 13.04) and 3.8.2 (Ubuntu 13.04 with Gnome3 PPA). I attempted both opening the same document where I had “saved” my settings, and a different document. I have “saved” the settings with 3.8.2 before I closed and reopened evince to verify the bug. (Of course in 3.8.2 it's no longer called “Best fit” but rather the more clear “Fit page”.) If there's any additional information about my system and setup you imagine could be useful, please feel free to ask.(In reply to)It sounds like a problem with dconf or gvfs. If you run evince from a terminal, what do you see?I also see this, running master (I last compiled 4021e53643bcbfda9a0e129c).strace(8) shows that nothing happens when selecting save as defaults from the drop-down menu, other than the expected X11 traffic. It also shows that evince doesn’t try to load defaults from anywhere at startup.It does update recent files, though, via ${HOME}/.local/share/recently-used.xbelI run gentoo with USE=-gnome, and use their ebuild, so the configure call is:./configure --prefix=/usr --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --libdir=/usr/lib64 --disable-silent-rules --disable-dependency-tracking --disable-schemas-compile --disable-maintainer-mode --disable-gtk-doc --disable-static --disable-tests --enable-pdf --enable-comics --enable-thumbnailer --with-smclient=xsmp --with-platform=gnome --enable-dbus --enable-djvu --enable-dvi --without-keyring --enable-introspection --disable-nautilus --enable-ps --enable-t1lib --enable-tiff --enable-xpsI only run evince from bash. With this compile, evince does not send anything to STDOUT or STDERR when run.The dconf and gvfs packages are installed, and something started /usr/libexec/dconf-service. strace(8)ing that shows some activity when trying to save defaults (which updated ${HOME}/.config/dconf/user), but none when evince first starts.So perhaps the bug isn’t that it doesn’t save the defaults, but just that it never *reads* them.This, and the insistence on calling chdir(2) at startup are the only big annoyances now. (When I open a pdf to edit, I want to be able to save it in the same dir w/o having to root through the filesystem to get back where I started. I also don’t want the dialog to load in a large(!) directory like $HOME every time; gtk+ is particularly inefficient at doing that, compared to ls(1) or the like.)Otherwise, evince has come a *long* way.SUCCESS! Thank you. It turns out my home dir is not under /home. A little googling and I found this:— now it works correctly, all aspects: sidebar, view mode (continuous, dual, etc), window size. So as far as I can see I can confirm the bug fixed, at least on 3.8, and leave this comment as a tip for other people who still have the issue.(In reply to)>evince uses gsettings for that, which is done via IPC.Evince reads the defaults. You can try changing a value, for instance:$ gsettings get org.gnome.Evince.Default fullscreenfalse$ gsettings set org.gnome.Evince.Default fullscreen true(or the opposite depending of what you get first).and open a new pdf with no evince metadata (you can check that with `gvfs-info filename`).This should be filed as a different bug.***has been marked as a duplicate of this bug. ***After: :; gsettings set org.gnome.Evince.Default fullscreen true :; gsettings get org.gnome.Evince.Default fullscreen trueevince still opens just as before. No fullscreen. I even picked a file I previously had never opened in evince.The dconf-service daemon it not contacted at all when evince starts, only when I tell evince to save default settings.And the recent files info must have been done by evince, not via ipc, else it wouldn't have shown up in an strace of evince. (And an strace w/o -f or -ff at that.)(My side-comment complaint already has a bug.)(In reply to)That's because gsettings *reads* are direct, never through the dconf demon.Or because the gsettings memory backend is used instead for some reason?In 3.6.1 (Ubuntu 13.04), the settings seem to be working inconsistently. Evince always opens with a small window -- I haven't found any way to get it to change the default window size. Initially it was using "fit page width), but I tried changing it to 100% and resizing the window larger, then doing "Save current settings as default". When I quit and restarted on the same document, it opened at 70% (and the same small window size). I was able to it back to "fit page width", though.This is under openbox, no Gnome, with dconf but no gvfs, and when I quit after trying to save settings, I get two errors on stderr:(evince:6806): GLib-GObject-WARNING **: /build/buildd/glib2.0-2.36.0/./gobject/gsignal.c:2593: instance `0xb901fa00' has no handler with id `2073'(evince:6806): GLib-GObject-WARNING **: /build/buildd/glib2.0-2.36.0/./gobject/gsignal.c:2593: instance `0xb901fa00' has no handler with id `2074'	35.0	id=732184	23	False	False	desrt	1
id=114935	REOPENED	gnome-panel	clock	unspecified	Other Linux	Normal normal	Panel Maintainers	2003-06-11 14:12 UTC by	Dave Bordoley [Not Reading Bug Mail]	2006-03-07 09:16 UTC (	3 users	If the clock's calendar loses focus it should close.	I think I looked at this before and came to the conclusion Havoc didit this way so that you open the calender to figure out some date orsomething and can go back to your email or whatever while looking backand forth at the calender ... maybe that was another dream, though :-)Havoc: ?Is there a reason this was marked against gnome-panel 1.5.x?I didn't do it the way it is for any good reason. It's clearly a bit hosed at the moment if you are using multiple workspaces.I was thinking it should be override redirect like a popup menu, butthat is kind of lame since it doesn't let you move through the monthsor anything. Plus in future we probably want clicking a day to say open the addressbook for that day.So just hiding on focus out probably is worth a try.CreatedPatch to close the calendar on focus out.This is a proposed patch to do this. I was not sure if I should reusedelete_event as a callback or create a new one, so I just created anew one. But now I think it's better to reuse delete_event.Anyone to review this patch ?I tested the patch a bit more and it doesn't work well if the calendarhas the focus and I click on the clock. I'll try to find a solution :-)Another approach would be to just try and fix it to work as itcurrently does, e.g. adding skip tasklist hint, making it on allworkspaces that have the panel, etc.Comment onPatch to close the calendar on focus out.Marking as needs-work as per Vincents commentI like the sticky behaviour. I was (pleasantly) surprised when I first usedcalendar and it didn't disappear when flipping between applications. I vote toleave it in or at least add "sticky" preference if this functionality is removed.Currently, when you open the calendar, it is not displayed in the task list, andappears on all workspaces. This agrees with Havoc's comments in.You often have to check a calendar ie when making hotel/flight reservation onthe internet, and with the sticky behavior you can keep the calendar openedwhile doing that in the browser window.I've seen lots of people on windows double-clicking on the clock, opening the"Clock settings" windows just to get a calendar. The sticky calendar clockapplet is a very valuable feature of gnome in this regard (see)After thinking about it, I think the sticky behaviour is a good thing too.Marking as WONTFIX.Sticky behaviour is OK except that there is no obvious way to _close_ calendarwindow for novice user (which I observed). Calender needs "close" button.Sticky behaviour is OK except that there is no obvious way to _close_ calendarwindow for novice user (which I observed). Calender needs "close" button.Adding a close button might indeed help. Not sure it'll look pretty, though ;-)Full supportand. Although I had to think about it for half a second when I first noticed this long ago, it really makes sense to me."Make closing the calendar more obvious" is a different issue than this one is about...	15.0	id=114935	11	False	False	mark	1
id=732184	REOPENED	glib	gobject	unspecified	Other All	Normal normal		2014-06-24 20:18 UTC by	Allison Lortie (desrt)	2015-06-26 16:51 UTC (	8 users	By default G_PARAM_DEPRECATED means absolutely nothing. We only emit awarning if G_ENABLE_DIAGNOSTIC is set to '1' and then, only on sets.Turn the logic on its head: emit the warning by default, unlessG_ENABLE_DIAGNOSTIC is set to 0. In order to avoid a torrent of output, onlyemit a warning once per property name.	CreatedGObject: warn on use of deprecated propertiesReview of:Looks ok to me.pushed as- GObject: warn on use of deprecated propertiesCreatedGObject: tweak property deprecation warningsDon't emit property deprecation warnings for construct properties thatare being set to their default value during construction, but _do_ emitthem in all cases when the property was explicitly given tog_object_new().Review of:looks goodComment onGObject: tweak property deprecation warningspushed as- GObject: tweak property deprecation warningsThis caused some installedtests failures:clutter:ostree:I think what would be ideal here is some way to use -DGLIB_VERSION_MAX_ALLOWED to only warn if my app is using properties that are deprecated in a newer version. Unfortunately I can't think of a way to do that, since properties are runtime, not compile time.There's also the aspect that libraries like clutter want to be able to test their own deprecated properties.For now I'll fix ostree.I've been thinking about this a bit more and it's not something that I feel totally comfortable just dismissing.I think we need a better policy about the meaning/purpose of error/critical/warning/message/debug in GLib, along with some ground rules.I'd say something like: error: always fatal critical: programmer error -- by definition, addition of a new critical is a new restraint on the programmer and therefore should be considered an API change warning: an error outside of the control of the program and therefore to be expected at any time. as such, we can add new warnings as we please. message: ?? debug: not shown by defaultWe should couple this with the ability to ignore all warnings in gtest.Maybe another approach here is that these sort of deprecation messages should be in the (vastly underused) g_message() category and we ignore those in testcases....I like the idea of moving it to message, although we should add some structure around it so that tools can see that the message is deprecation.Could be as low tech as g_message ("[deprecated] ...") or so.Maybe [deprecated property] for more structure.Incidentally, I can't (easily) fix ostree because the new soup_server_listen() API is in a newer version of libsoup than I can depend on. I could detect the max allowed version at compile time and use #ifdef I guess.(In reply to)I added G_ENABLE_DIAGNOSTIC=0 to the conformance tests, but I didn't think of the installed tests. Matthias put `env G_ENABLE_DIAGNOSTIC=0` in the installed test launcher, so I should probably do the same. it'd be nice if the installed tests launcher would allow this to happen automatically unless overridden.Not a huge fan of hardcoding glib environment variables in g-d-t-r; while it does start with "gnome-desktop" it's conceptually independent - it's a reference/demo implementation of the InstalledTests spec.So I think that leaves us with per-component usage of G_ENABLE_DIAGNOSTIC, or something else.(In reply to)we could add a new key to the .test file, `TestEnvironment`: [Test] Type=session TestEnvironment=G_ENABLE_DIAGNOSTIC=0;CLUTTER_ENABLE_DIAGNOSTIC=0; Exec=/usr/libexec/installed-tests/clutter/actor-anchorthis would allow you to control the execution environment of the tests for other use cases as well.Createdrunner: Allow overriding test environmentIn the fallout oftests exercising deprecated properties are now failing.When running under `make check`, we can change the environment of a testby using the TEST_ENVIRONMENT variable. The .test file that we use todescribe a test should have the same facility: a `TestEnvironment` keythat contains a list of key=value pairs that get set in the environmentprior to execution.gnome-desktop-testing does not have a bugzilla product, so I attached the patch here. it would be good if somebody could review it.Review of:Two minor things, otherwise looks fine and please commit.::: src/gnome-desktop-testing-runner.c@@ +136,3 @@ const char *test_path;+ char **env_key = NULL;+ GError *internal_error;= NULL please, per the rest of the code style.@@ +174,3 @@ }++ internal_error = NULL;(And not here)@@ +180,3 @@+ internal_error->code == G_KEY_FILE_ERROR_KEY_NOT_FOUND))+ goto out;+ elseg_clear_error (&internal_error);Comment onrunner: Allow overriding test environmentpushed, with the changes as instructed.For ostree, I chose not to use the environment variable approach, and instead did:Why should this be on by default?The message is directed at developers, not users, and doesn't representa bug. Users, in fact, really cannot do anything useful with a scary-looking message like that.What really happens here is that application writers lose control overtheir stderr.Is should stress that this includes command line utilities that happen touse glib/gobject. Gnumeric's "ssconvert" is one such utility.Having subsequently installed versions of glib/gobject/gtk+/etc. startspewing error messages because something else got deprecated is reallyupsetting.I'm finding this to be pretty ugly and painful too.The thing is that GLib is quite good now about deprecations with the compile-time min/max version stuff - love that change. These runtime warnings don't respect what compile-time options I used when building my app, and end up being shown to users and admins, who just don't care.What was the rationale behind this? What deprecated properties did we want people to see? Can we have this only on for Continuous, or only on during devel cycles?It was the schema / schema_id change in GSettings that prompted this warning.I think it's fine to say that it's only on in dev cycles, but even then, it's pretty shit -- anything that does any bit of introspection like the GTK+ inspector or GJS will hit this a lot.I'd rather just disable it globally.I'll throw in another voice in support of the idea that we shouldn't nag our users to nag our developers to fix deprecations :-) In general, if users see warnings in logs or standard out they expect they represent problems; a deprecation is specifically *not* a problem - we're retaining some old way of working for compatibility. (And I don't mean to say that users would think differently if they were "messages" rather than "warnings".)If we tagged property deprecations with version, then we could think of some way of checking deprecations against a declared version at compile time - since we don't, I think diagnostics about them have to be dependent on some sort of "debug mode", which I think G_ENABLE_DIAGNOSTIC was meant to be.One idea I have is that we have a one-time message about enabling G_ENABLE_DIAGNOSTIC in your ~/.bashrc that we print out the first time there's a critical warning if G_ENABLE_DIAGNOSTIC is set (and stdin is a tty?). It wouldn't *actually* be because the diagnostic would help to figure out the critical warning - it would be that developers inevitably hit critical warnings and try to track them down.Re-opening to get back on Ryan's and Matthias' radars.You're a bit late to the party. This is already fixed since last week on the stable branch:Still doesn't fix the "open GtkInspector, see giant spam of warnings" issue, nor does it fix code that validly uses the max-version / min-version defines or the IGNORE_DEPRECATIONS macros.***has been marked as a duplicate of this bug. ***	26.0	id=687659	17	False	False	danw	1
id=687659	REOPENED	glib	gobject	unspecified	Other All	Normal normal		2012-11-05 15:44 UTC by	Allison Lortie (desrt)	2013-08-31 15:13 UTC (	8 users	We want to drop the (unused?) feature for adding interfaces to classes after the class_init has run.Step 1: make sure nobody is using it.	Createdgtype: disallow adding interfaces after the factAdd a check to prevent adding an interface to a class that has alreadyhad its class_init done.This is an incompatible change but it is suspected that there are notmany users of this functionality.Once we confirm that nobody is using this functionality we can remove arather large amount of code for dealing with this case.fyi,pushed as- gtype: disallow adding interfaces after the factgjs uses this to implement subclassing GObjects:I'm not sure how much work it will be to statically analyze the given class and add the interfaces statically.Dia is using this as well, seefor the analysis. Given that the DiaGdkRenderer would have to be deprecated for gtk-3-0 anyway, maybe I should start thinking about deprecating GObject for Dia as well ;)This has broken any custom interface implementation using gtkmm, such as custom GtkTreeModels. Can this please at least be just a warning until we figure out how, if at all, we can fix this?This seems to have got into the stable glib 2.36.0 release, which is a disaster for gtkmm apps that use custom TreeModels, such as Glom.Here is a typical backtrace at that warning to help gtkmm people understand what is happening:.NET bindings are also affected by this regression:If this is not going to be reverted, there's a docs bug, as [1] mentions this limitation, but [2] doesn't.[1][2]This looks pretty much impossible to do in gtkmm without breaking API and ABI.CreatedProposed patch(In reply to)So, Ryan: what happened with Step 1?(In reply to)I just implemented Murray's suggestion in this patch. Please review.If you want to further discuss this, there is "prior art", for example:, quote: "To help with the transition, the enforcement is not turned on by default..."So, helping with transitions is a GoodThing(TM). Just saying...Ryan has posted a proposed fix, but in the wrong bug report. I think he's aware that we are already looking for a permanent solution. This is his post:(In reply to)Just checked out that patch and is GlibMM specific, when this is affecting more consumers.Createdgtype: interface-after-init exception for gtk#C# also has a problem with the new interface-after-init restriction thatnobody noticed until now. Add an exception for them as well so thatthey have a cycle or so to sort things out.Comment ongtype: interface-after-init exception for gtk#Looks good, just nitpick about the commit msg: it would be ".NET" (many languages), not just "C#".ThanksComment ongtype: interface-after-init exception for gtk#pushed as- gtype: interface-after-init exception for gtk#Ryan, I've found a problem implementing a fix for this in gtk# bindings, and I think it is potentially a chicken&egg problem with GObject interfaces, please correct me if I'm wrong.It boils down to the following question: when the GInterface includes properties, g_type_add_interface_static expects that, when calling the interface_init function of the GInterfaceInfo, this sets them up via g_object_class_override_property, however this function receives a GObjectClass (not a GType), which AFAIU can only be obtained via g_type_class_ref (gtype), which in turn calls class_init!If I'm right that this is certainly a chicken&egg problem, isn't this bug requesting a restriction that is impossible to meet if the GInterface to implement needs properties?More details inThanksThere is not currently a restriction on not adding properties after g_type_class_ref()... only interfaces, and all of those should be added from the _get_type() function, which is called before class_init. The class_init and interface init functions are not called until later, when the class is actually being initialised. This doesn't happen when you call _get_type() -- you must actually call g_type_class_ref().It's currently possible that iface_init functions get called (long) after class_init. This happens now when adding an interface to a class that has already been initialised -- you have to setup the iface immediately since some instances could already exist.Once we have completely removed the possibility of addition of interfaces after g_type_class_ref() returns then we will also lose this possibility that g_type_add_interface_static() will have to do the 'work' immediately. This means that the class_init() and all iface init functions will be called at the same time and all properties will be setup at this time. After that's locked down (with no exceptions) I intend to remove the ability to add properties later (ie: after g_type_class_ref() has returned).This removal of the possibility that g_type_add_interface_static() might have to init the interface itself is really the gist of why this work is important. When this could be called at any stage during class initialisation, from any thread, the state tracking for "who is responsible for calling base_init on this iface vtable?" and "who is responsible for calling init on this iface vtable?" is rather complex and requires a lot of locking.In short, setting up a class should look like this:Step 1: _get_type() function: - register the type with GType - add all interfaces from here... at this point we have GType, but no GTypeClass ...... someone calls g_type_class_ref() ...Step 2: class/iface_init functions: - fill in vtables - add properties... now we have GTypeClass.TL;DR: by the time you're in an iface_init function, someone has _already_ called g_type_class_ref(), so no harm doing it again yourself.Thanks for your prompt response Ryan.(In reply to)Just did a proof of concept patch [1] based on this feedback, and this is not the behaviour that I'm seeing. In particular, after I added the interfaces, but before adding the properties of those interfaces, I call g_type_class_ref() and I'm getting these CRITICALs when doing it:(custom-scrollable:12345): GLib-GObject-CRITICAL **: Object class __gtksharp_1_CustomScrollableWidget+601+5b+5bSystem_String+2c+20mscorlib+2c+20Version+3d2_0_0_0+2c+20Culture+3dneutral+2c+20PublicKeyToken+3db77a5c561934e089+5d+5d doesn't implement property 'vscroll-policy' from interface 'GtkScrollable'(custom-scrollable:12345): GLib-GObject-CRITICAL **: Object class __gtksharp_1_CustomScrollableWidget+601+5b+5bSystem_String+2c+20mscorlib+2c+20Version+3d2_0_0_0+2c+20Culture+3dneutral+2c+20PublicKeyToken+3db77a5c561934e089+5d+5d doesn't implement property 'vadjustment' from interface 'GtkScrollable'So I'm wondering: do you mean that this restriction has been removed in newer glib, or that it has never been there? If it's the former, it would make sense, because I'm testing now with v.2.34, but then we would need different code to register interfaces in gtk# depending on the glib version used, which will get really hairy :(If you want that we stop spamming this bug, you may want to CC yourself in the bugzilla.xamarin bug?Thanks[1]Replying to myself: I think I know now what the problem is:- Calling g_object_class_override_property before class_init is impossible.- Calling g_object_class_override_property after class_init is impossible.- Therefore I need to call g_object_class_override_property inside class_init.I got to this conclusion after seeing this example:I'll try this approach and report back.(In reply to)This may be the example since every class I know does it this way, but I'd be surprised to find out that it _must_ be class_init and could not be one of the iface_init functions...I guess iface_init is only for setting up the vtable, then.Could we have a glib 2.36.1 release, please, so that glibmm can do a release that depends on it?Ryan, do you still plan to disable this again in git master for glib 2.37/38? If you are going to do it, sooner would be better than later, please.It's already disabled except for the exceptions I added for C# and C++. Are you asking me to remove the C++ exception?Ryan, I understood that you would disable it even for C++ (glibmm/gtkmm) during this release cycle. I just want to know if you still plan to do that, please.I do plan to do that and I told you that I'd wait until you were ready. Does this mean that you're ready?No, we are still not found a way to adapt to the change without breaking our own ABI, and we still don't expect to. I'm just asking because, if you had decided not to do it in this cycle, we could start making glibmm releases for this cycle with confidence that they would ever be able to reach stable .0 releases.So you would like for the exception to remain for one more cycle? That's fine with me.I'd want to remove it at the start of next cycle, though (ie: GLib 2.39.1).OK. Thanks for extending our reprieve.(In reply to)I run into this bug while invastigating how to implement optimization for Vala (). One of the ways I've discovered is to add interface during base_init run (see attach proof-of-concept to bug). Short look on the code indicated that the code could be removed also when the interface adding is during base_init as, IIUC, it deals in case when the interfaces are not yet added. Would it be problematic if the interface could be added before base_init instead of class_init (I've filledseparately)?	31.0	id=621480	9	False	False	bertrand.lorentz	1
id=621480	REOPENED	banshee	general	git master	Other All	Normal normal	Banshee Maintainers	2010-06-13 19:27 UTC by	Honza Strnad	2010-06-19 10:01 UTC (	2 users	Banshee should remember playlist from Play Queue - however it doesn't. I found out that this playlist is saved with localizated name, but is load with unlocalisted.	I'm not sure I understand the problem you're having.Do you mean that the playlist selected as the source of tracks for the play queue (the one in the from: list) is not remembered between restart ?Could you please provide specific steps to reproduce the problem ?Ok, let's say I have selected some tracks in music library and I added them to play queue. Now, I restart Banshee and play queue is empty. But as I said before, this problem occurs only when I'm using localizated version.Confirmed, it only happens if I start banshee in the FR locale (LANG=fr_FR.utf8), not if I use the default locale.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Bertrand, I don't think your patch is a good idea. If the user runs Banshee in one language, then changes language and starts it again, they'll lose their play queue (assuming the translation differs). Am I missing something?Good catch, there's still an issue. But my patch improved things : the issue now only affects polyglots, and not all non-english speakers ;)I think we need a better way to identify the PlayQueue amongst other playlists. Adding a column to CorePlaylists just for that seems overkill. Maybe storing the DbId in CoreConfiguration ?	6.0	id=753507	6	False	False	gregoire	1
id=763170	REOPENED	polari	general	3.19.x	Other Linux	Normal normal	Polari maintainers	2016-03-06 10:30 UTC by	Arnaud B.	2016-03-06 16:57 UTC (	3 users	CreatedScreenshot. See “Properties”.When using a long connection name, the connectionPopover displays it on multiple lines, but doesn’t grow to display its content correctly, giving a weird result (and hard to use when the “big text” accessibility feature, or probably when more than two lines).	Is this on master? Can't reproduce.(In reply to Kunaal Jain from)Me neither. This sounds like a GTK+ issue that has been fixed, at least I'm not seeing it with today's master.Any chance you can test with an updated GTK+ version?I’m on master gtk+/Polari, using Rawhide’s Wayland session.(In reply to Arnaud B. from)Sounds GTK+ bug on wayland to me. Particularly in screenshot the connectionPopover is not extending to the right sidebar.Closed by mistake.	5.0	id=763170	9	False	False	kunaalus	1
id=760400	REOPENED	gtk+	Widget: Other	3.16.x	Other Linux	Normal normal		2016-01-10 16:40 UTC by	Mike Cornelison	2016-01-11 11:38 UTC (	1 user	This happens in libgtk-3 3.16.7 (Ubuntu 15.10) but not in prior releases of Ubuntu with prior libgtk versions.What I am doing: gtk drawing area connected to "draw" signal.If the drawing area vertical size is <= the actual window size, the following strangeness happens: If a mouse motion happens in any area of the window, a draw event is sent and the window redraws, even though there is no need. A second or two after this initial draw event, 20-30 more draw events are received in rapid succession. The window redraws (unchanged) each time. If however the drawing area is set to the window height + 1, no draw events are sent. Drawing area code for 'draw' event: xwinW = gtk_widget_get_allocated_width(Gscroll); // drawing window size xwinH = gtk_widget_get_allocated_height(Gscroll); (calculate size needed for drawing window) if (drwingH <= xwinH) drwingH = xwinH + 1; // at least window size + 1 16.02 gtk_widget_get_size_request(drwin,&ww,&hh); // current size if (ww != drwingW || hh != drwingH) gtk_widget_set_size_request(drwin,-1,drwingH); // needs to change	This code is wrong, and it's always has been.You're getting the allocated size, which is the size the widget is currently drawn with; then you're getting its minimum size request and changing it - which causes a resize cycle, which will cause a redraw cycle. In short: the toolkit is doing precisely what you just told it to.It would be best to understand what it is that you're trying to achieve. In general, if you want to affect the size of a widget you should subclass it and override the get_preferred_* virtual functions.Sorry, but I fail to understand.Why does changing the requested drawing window size by +1 make the problem go away?Why are there 30 redundant draw events within one second when nothing is being done?Why does this cascade of draw events start 1-2 seconds after the mouse move?Why does this happen with gtk 3.16 but not with earlier releases?thanksMikeI made one mistake in filing this bug report. The code shown above actually works perfectly. To make the weirdness happen, the "+1" needs to be removed. The code below is the code that fails. Drawing area code for 'draw' event: xwinW = gtk_widget_get_allocated_width(Gscroll); xwinH = gtk_widget_get_allocated_height(Gscroll); (calculate size needed for drawing window) if (drwingH <= xwinH) drwingH = xwinH; <<< add +1 to make it work OK gtk_widget_get_size_request(drwin,&ww,&hh); if (ww != drwingW || hh != drwingH) gtk_widget_set_size_request(drwin,-1,drwingH);	3.0	id=751451	5	False	False	i.gnatenko.brain	1
id=751451	REOPENED	file-roller	general	3.16.x	Other Linux	Normal normal		2015-06-24 17:24 UTC by	ni shengyue	2015-07-07 14:43 UTC (	1 user	Createdthe zip file compressed in MS Windows1.compressed a file in MS Windows, with its file name contains Chinese charactors2.uncompress it in Debian ,find the uncompressed file and folder are out of order, not real Chinese charactors	I think this is not a bug in file-roller, it's bug in unzip.For example, look atThanks for taking the time to report this.no,the unzip I'm using is 6.0-17, and I can uncompress the file by unzip ok, but I use the file-roller to uncompress this file, the file will not decoded well, so it's not a unzip issue.	2.0	id=124662	14	True	True	fherrera	1
id=124662	REOPENED	gconf-editor	general	2.4.x	Other Linux	Normal normal	Gconf Editor Maintainers	2003-10-15 13:55 UTC by	Muktha	2007-08-27 13:42 UTC (	3 users	Running gconf-editor, do the following:- Right-click on the right-side pane and select 'New Key' to add a new key.- The new key dialog appears, Key path is '/'.- Type "part1/part2" for the Key name.- Type "123" for the Key value.- Click OK button to create the new key.- Refresh the keypath tree on the left-side pane by collapsing andexpanding it.- Select the key node "part2", right-click to delete it.- Refresh the keypath tree on the left-side pane by collapsing andexpanding it.gconf-editor segmentation faults at this point. Below is the stack trace:0x08059d55 in gconf_tree_model_ref_node (tree_model=0x80b5808,iter=0xbffff170) at gconf-tree-model.c:419419 node->ref_count += 1;(gdb) where	***has been marked as a duplicate of this bug. ***Fixed on HEAD by Sanjiv.We should backport this to gnome-2-4.Is it okey to commit to 2-4 and close?Sure, go ahead. Fernando, if you want you can release a new version for 2.4 as well. Ithink Kjartan is working on 2.4.2, ccing him.Fernando: given that this only has one dup, TARGET2.6.0 was probablynot appropriate. Anyway, since it is fixed in HEAD, removing thekeyword and setting GNOMEVER2.4. Fernando, Muktha, if either of youhas a patch you'd like for the backport, please attach and reopen, butI believe Kjartan has said that 2.4.2 was the last 2.4 release.Sanjiv's patch is incorrect, I'm afraid. It goes:+++ gconf-tree-model.c 3 Feb 2004 06:32:22 -0000 1.16@@ -458,7 +458,7 @@ if (node->ref_count == 0) { if ((node->parent != NULL) && (node->parent->children == node))- node->parent->children = node->next;+ node->parent->children = node->children;You can't just "move up" the children of node! This will also leak the oldsiblings of node.You may want to look at gtk+/gtk/gtkfilesystemmodel.c as a reference for how toimplement ref_node and unref_node.CreatedProposed fixFederico, can you take a look at this? ThanksThe call to clear_node in unref() should be free_node instead. Otherwise you'llbe keeping a node around with a zero refcount until its parent frees it.Humm doing that makes gtk_tree_view entering in an infite loop withgtk_cell_renderer_renderPatch applied, bescause it's better to fix the two crashing bugs and remain alittle semi-leak. Should investigate more this.Changing to _clear_node there gives me backtraces with memory corruption before gconf-editor even starts up.	10.0	id=699731	12	False	False	albert.tests	1
id=699731	REOPENED	doxygen	build	1.8.3.1	Other Linux	Normal normal	Dimitri van Heesch	2013-05-05 23:54 UTC by	Leo Carreon	2013-05-20 12:15 UTC (	1 user	I am building my documentation on Fedora 18 which generates a PDF file. I have noticed that one of the classes in the resulting PDF file have gone beyond the footer. (Please see page 65 in the attached PDF file.)	Thank you for reporting this problem, but can you please attach the promised attachment as well as the used configuration file (Doxyfile).When possible please make a small self contained example and add this as an attachment so it is possible to reproduce the problem.Sorry, my original attachment was rejected due to its size. I will try to reproduce the problem with a smaller set of files and will supply the attachments then.CreatedDoxygen config fileSorry, I was unable to reproduce the same problem with a smaller set of files. I'm also unable to attach the original PDF file because of its size.What is the size of the (compressed) filesIs it possible to make the files available on a ftp server?The size of the zipped up PDF file is 1.81 MB. I can make the file available on an ftp server if you have one. Sorry, I don't have a publicly available ftp server.BTW, I have recently made some minor changes to the documentation in the source and the problem has moved to different pages in the resulting PDF file. Another observation is that the problem always happens on a parameter box. It happened on 7 pages of the most recent PDF file.The problem may still happen on a smaller set of my source files but I have to experiment which combination of source files I can make it happen on.OK, I was finally able to reproduce the problem with a smaller set of my source files and I am attaching them now.CreatedZIP file containing doxygen config file and resulting PDF fileCreatedArchive containing source files usedThe example shows the problem on (a.o.) page 28 (routine mvSetDate), page 47 (routine smvPutNumber), page 73 (routine smvPutTzName).Problem still occurs in SVN version 846 (1.8.3.1-20130402)Looks like the \vspace{-40pt}'s in doxygen.sty were causing this. Reducing this to \vspace{-25pt} keeps the tables above the margin.Looked at the results with SVN version 848 (Doxygen 1.8.3.1 20130512) and foundon page 75 still a problem.At the same time I think that the extra space between the word Parameters andthe top of the table is a bit large, especially when we compare it with othertable items (like Exceptions, Template parameters, return values).Yes, I see that my change doesn't really work and causes the extra spacing, so I'll revert it. So far I haven't found a generic way to prevent LaTeX from occasionally overflowing the footer :-(I have better luck using the supertabular package instead of the longtable package, so I'll use that instead.CreatedReplacement stylesheet using supertabular packagePlease try this replace style file and let me know if it solves the problem.I've tested the new doxygen.sty.- I've not seen that a table is going into the footer- a number of small tables are split over pages (e.g. page 36/37, 55/56, 70/71, 71/72, 96/97, 99/100, 138/139, 142/143, 154/155)- the word parameters is separated from the actual table (e.g. page 38/39)- the words "Parameters", "Template parameters", "Return values" and "Exceptions" are now boxed as well. I'm personally not in favor of it.- the text inside the boxes is quite close to the top of the box, nearly hitting the line on top. The spacing above the text is smaller that the spacing below the text- on page 51, 73, 85, 87, 134, 151 there is quite a bit of white space on the top of the page before the paragraph starts- quite a bit of white space on page 57, 69, 101, 129, 140This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.8.4. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional informationthat you think can be relevant.Tested with 1.8.4, some problems are still present (just listing an occurrence once):- page 13/14: header "Template Parameters" separated from the table (box is gone from header)- page 17/18 lot of white space, table fits on page 17- page 107/108 table split over pages	18.0	id=775710	6	False	False	mcatanzaro	1
id=775710	REOPENED	epiphany	Interface	3.22.x	Other Linux	Normal normal	Epiphany Maintainers	2016-12-06 13:54 UTC by	Harshad	2017-01-14 03:16 UTC (	3 users	Hello all, On my laptop with a 13.3" 3200x1600 high DPI screen, the Epiphany progress indicator is difficult to see. This is compounded by the fact that the highlighted tab is indicated with a blue bar that is nearly identical and adjacent. I think the progress bar needs to be moved or resized. I am not sure if this is because of the DPI on my screen.Possible options include:1. Increasing the thickness2. Progressively shading the the URL box3. Progressively shading the tab4. Ditching the progress bar all together and switching to a simple per tab spinner ala Chromium. Perhaps with a % indicatorPersonally, I like #4 the most :)I am on 3.23.3 on Arch Linux.	I'm thinking we should go with #4, unless anyone wants to improve the style of the progress bar to mitigate this issue. This is far from the first time I've seen complaints about it, so I think the progress bar in its current form has got to go. My only hesitation with #4 is there's not currently any way to see if the page is still loading when there's only one tab open.P.S. Another disadvantage of the progress bar is it indicates that slow nonessential subresources are still loading after the rest of the page is present, which makes users think we are slower than other browsers.Createdembed: Remove the progress barIt does nothing except make us look slower than other browsers, and hasserious style issues.Excellent! Thank you. The stop/refresh button already indicates when the page is loading / done loading. This might be sufficient in the 1 tab case. If not, perhaps the stop symbol could be changed to a 'spinner'.(In reply to Harshad from)Oh yeah, good point. So that was my only hesitation to removing the progress bar. I'll still leave this open for a day or two to give others a chance to object before landing.I'm not a great fan of that progressbar as well, I don't like having different baheviours if there are tabs or not though.pushed as- embed: Remove the progress bar(In reply to Harshad from)Yeah we're going to need a spinner somewhere, reverting this. :(	7.0	id=633704	15	False	False	bugs	1
id=633704	REOPENED	epiphany	Interface	git master	Other Linux	Normal normal	Epiphany Maintainers	2010-11-01 14:43 UTC by	Jean-François Fortin Tam	2014-02-13 15:08 UTC (	5 users	If Evolution (haven't tried other mail clients) is already running, using Epiphany's "File>Send link by email" menu item doesn't do anything.It only works if Evolution is not already running.	the bug exists in 2.30.6Still present in master. Sending a link by mail crashed eds.I'll look into that.We no longer have this item.We do, it's in the context menu.You'd be surprised how useful this feature is for non-computer litterate users. I heartily suggest you keep it, and perhaps that you even add it to the new "app menu".Works for me. You can still access it by right-click at any blank spot in the page.No crashes in evolution, both sending and clicking a mailto: work. Although the startup notification seems to be a bit silly and keep the cursor as busy (we start this things with gtk_show_uri)Should we add it to the gear menu? I can agree with Jean's reason of making it easy to discover link sharing.Seems that it works and it's about discovery, so re-titling.	7.0	id=765092	6	False	False	tpopela	1
id=765092	REOPENED	evolution	Composer	3.20.x	Other Linux	Normal normal	Tomas Popela	2016-04-15 10:18 UTC by	Andres Gomez	2016-08-11 15:08 UTC (	1 user	With the new composer, in plain text mode, when you reply an email the tex may be now cut in a very bad way, not having the proper flow.For example, for an email with Normal format of the type.<mail>Lorem Ipsum is simply dummy text of the printing and typesettingindustry. Lorem Ipsum has been the industry's standard dummy textever since the 1500s, when an unknown printer took a galley oftype and scrambled it to make a type specimen book. It hassurvived not only five centuries, but also the leap intoelectronic typesetting, remaining essentially unchanged. It waspopularised in the 1960s with the release of Letraset sheetscontaining Lorem Ipsum passages, and more recently with desktoppublishing software like Aldus PageMaker including versions ofLorem Ipsum.</mail>Before the new composer, the Reply would appear like:<mail></mail>With the new composer, it appears like:<mail></mail>Reproduced with Evo 3.18.5.1 in Debian Testing	*** This bug has been marked as a duplicate of***This is not a DUPLICATED of. That bug, only adds an option to automatically wrap text (use Normal format) or not wrap text (use Preformatted format).Obviously, with "Preformatted" we won't have these cuts in the lines ... but the lines won't be wrapped.With "Normal" we have the lines wrapped but cut in a very bad way which is a *regression* from the previous composer, as shown in.Hence, reopening.FTR, I can still reproduce this in Debian Testing 3.20.3-1	3.0	id=530856	20	False	False	sanfordarmstrong	1
id=530856	REOPENED	tomboy	General	0.10.x	Other Linux	Normal normal	Tomboy Maintainers	2008-05-01 08:28 UTC by	W. Netzberg	2010-03-28 23:46 UTC (	3 users	I've just upgraded to Ubuntu 8 (Hardy Heron) and started using new Tomboy Notes 0.10.1. I immediately noticed that the Fixed Width text formatting which used to ignore unrecognized words/spelling and which I used for code formatting are now spell-checked and all my code is underlined with red lines. Is this an intended behavior and how can I work around it with code snippets in my Tomboy notes?	Actually, I've just realized that by selecting the text and hitting Text -> "Fixed Width" twice fixes the problem. Therefore it seems to me that the new Tomboy is confused about the fixed width format in the notes created with an older version of Tomboy...Having said that, if I "fix" a note as inabove and then restart tomboy, the spelling highlighting returns, so it's something in the memory vs. file that's out of sync.Here are simple steps to reproduce this:Create new note called Spelland enter the following words:Spellling mistakeA red underline will appear under the word Spellling.Now, select the word Spellling and make it "Fixed Width" (Text -> Fixed Width) which will make the underline go away.Restart Tomboy and go back to the Spell note. The red underline is BACK even though the word Spellling is formatted as Fixed WidthConfirming in 0.11.0. I'm not sure what the desired behavior is, but clearly Tomboy is confused here.Probably we should ignore spelling mistakes on words set to fixed-width.I also think that spelling mistakes should be ignored in fixed width text. The current implementation tries to do that but there is a problem at startup.The NoteSpellChecker addin registers for TagApplied events to remove spelling mistakes if tags are applied that should not be spell checked. I think the problem is in Attach (), where the TagApplied event is registered after the spell checking is started.Patch follows.CreatedRegister for TagApplied events before spell checking is startedStefan, your patch seems to help, please commit. However, the bug is not ready to be closed because if I take the text "spellling mistake", make it fixed width, and then make it normal, it does not regain the red underline.(In reply to)You are right, the patch only fixes the problem with restarting.CreatedRecheck if a tag is removedThis patch should fix the remaining problem. Because the red line is removed in TagApplied() and the information of a spelling error is then lost, the note is now rechecked when a tag (e.g. fixed width) is removed.Awesome Stefan, this seems to fix it. Please commit and close this bug.Committed in revision 2077.Reopening. With spell checking enabled I now get a lot of delay when typing in larger notes. Tomboy crashed on me when disabling spell checking. I'll update with more info later (meeting now).Okay, I can't reproduce the crash. But I can verify that the slowdowns began after the patches for this bug were committed.Specifically, it's second patch, comitted in r2077.Apparently tags are much more often removed than I assumed. When creating a new note and inserting a single letter, lots of tags are removed (note-title, link:internal, link:url,...). Maybe there is also some interaction between the TagApplied and the TagRemoved events: When a spelling error is found, a tag is applied. In TagApplied the tag is removed because of fixed width, TagRemoved triggers rechecking and TagApplied is called again...Should I undo the second patch? Though I have no other idea to fix it.Yeah, if you're not sure how to fix it right now, please revert the second patch (and mark it as "needs work" in this bug). Maybe it can be fixed by doing a few more checks on the Gtk.TagRemovedArgs? As usual I just have no time to look into it right now. :-)Reverted second patch.Stefan, are you still looking into this? This is now 6 month in the past. If you are able to fix this that would be great, otherwise I'd appreciate a "no time, sorry" response so that someone else might chime in and try to fix this issue.No, I am not working on this. Feel free to take over.Thanks for the update. I'll look into it for the next release.	20.0	id=528815	8	False	False	tomtomatic	1
id=648157	REOPENED	pango	general	1.28.x	Other Linux	Normal normal		2011-04-18 21:27 UTC by	Alexandre Prokoudine	2016-06-03 21:50 UTC (	2 users	Createdexample of broken ligature coloringWhen I try to apply a different color to a text selection that is connected to another letter via a ligature from left border, the character before selection gets recolored too.See attached image for a sample, where instead of two selected characters three get recolored.It does not happen with all ligatures though, as far as I can see.The font in question is here:I have a suspicion that newly filedhas something to do with it, but it's not my job to decide :)	This is the markup:<markup><span font=\"Lobster 1.4,\">simple e<span foreground="#00aeff">xa</span>mple</span></markup>So clearly no a GIMP problem.And not my job to decide either :) -> pangoCompletely unescaped markup:<markup><span font="Lobster 1.4,">simple e<span foreground="#00aeff">xa</span>mple</span></markup>I think I kinda found a solution for this. For multi-color ligatures we can use a cairo gradient with sharp transition to do multi-color without having to fall back to clipping.It was clearly a mistake on my part to report this as a bug. Ligatures are ligatures.Actually no, this *is* a bug.	6.0	id=768111	8	False	False	gnome	1
id=346415	REOPENED	GnuCash	Reports	2.6.5	Other All	Normal normal	Chris Lyttle	2006-07-02 20:20 UTC by	John Young	2015-04-04 18:34 UTC (	3 users	Please describe the problem:I set up my accounts using version 1.8.12 and installed 1.9.8. My income accounts are GBP but most of my expenses are EURO.The report currency for a Cash Flow report for 1/1/06 - to current date is GBP.Several of the accounts set up as GBP(I have identified a couple of simple ones, Income Tax, and Tax Exempt Interest)are reported as though the accounts were EURO - i.e the amount shown is 0.6916 of the correct value. If you change the currency to EURO, the figure reported is the GBP figure.The same error occurs in version 1.8.12Steps to reproduce:1. 2. 3. Actual results:Expected results:Does this happen every time?YesOther information:	still a problem in the latest gnucash version 2.2.5?Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!I've run into same problem in 2.6.5 so I presume this is the same bug.	3.0	id=705910	14	False	False	dimitri	1
id=755909	REOPENED	evolution-data-server	Calendar	3.20.x	Other Linux	Normal normal		2015-10-01 01:31 UTC by	Bastien Nocera	2016-07-08 08:35 UTC (	2 users	I have "Holidays in the United Kingdom" as one of my calendars in Google Calendar. Seeing as I can't write to it, I shouldn't be able to make it the default in the Calendar Settings.	(In reply to Bastien Nocera from)Tracked down, and found is Google fault so far. We'll see if we can find a workaround.Got references to that, or some details?(In reply to Bastien Nocera from)We query Google calendar using CalDAV protocol, and turns out that the server respond it allows PUT method which is using in CalDAV for writing. Also, keep in mind that the preferred method of accessing Google calendar is, as stated by Google itself, using GData API, not CalDAV (who said big corp need to respect standards). The problem with using GData API in eds is and quote: "that requires to have an interface which translates from iCalendar to GDAta and back, which is just more code on the eds side", which I perfectly understand.I'll try and search for some way of letting Google know of this, and I'll try and find a workaround as well.If the fault is really from Google not using the CalDAV protocol correctly, then I'm marking this issue as NOTGNOME.Feel free to reopen it if needed.	4.0	id=755909	13	False	False	erickpc	1
id=778458	REOPENED	gnome-control-center	User Accounts	git master	Other Linux	Normal normal	Control-Center Maintainers	2017-02-10 16:28 UTC by	Allan Day	2017-02-14 08:18 UTC (	3 users	Some miscellaneous issues I spotted when reviewing the updated user accounts panel: • Sometimes, when there are two accounts, switching between accounts causes the controls to move up/down and left/right -• The button for changing the profile picture has a little arrow in the corner, which doesn't look great. It would probably be better to drop the arrow and give the button a raised appearance. This will be more noticeable too. • We say "Add User" but "Remove Account" - the latter should probably be "Remove User" to match.	Createduser-accounts: Drop the user photo selector arrowCreateduser-accounts: Remove button label to "Remove User""Remove User" matches better to "Add User" than "Remove Account".Createduser-accounts: Save vertical space in the alignment of widgetsCompensate border-width changes with respective margins.Createduser-account: Use a stack in user-icon to keep the same sizeThis fixes the undesired jumps (resizes) while switching between"Your Account" and any other account.Createduser-accounts: Re-label "Remove Account" button to "Remove User""Remove User" matches better to "Add User" than "Remove Account".Review of:Looks good to me!Review of:::: panels/user-accounts/data/user-accounts-dialog.ui@@ +436,3 @@ <property name="valign">GTK_ALIGN_END</property>+ <property name="margin_bottom">20</property>+ <property name="margin_end">20</property>I think we should use margin top here also, because the button is too close to the other options if font-scale is bigger than 1 (so the height_request is not enough).Review of:Looks good to me!Review of:Looks good to me!Review of:Just please change "user-account:" to "user-accounts:" before pushing...pushed as- user-accounts: Drop the user photo selector arrowpushed as- user-account: Use a stack in user-icon to keep the same sizepushed as- user-accounts: Re-label "Remove Account" button to "Remove User"pushed as- user-accounts: Save vertical space in the alignment of widgetsCreatedpatchSimple spacing patchCreatedpatch - give the user image a raised appearanceIt would also be nice to make the button image bigger - say 96px - but I couldn't figure out how to do that without also increasing the size of the image in the carousel.Review of:cool.Review of:alright. designer and hacker :DCreateduser-accounts: Make user icon biggerUser icon should be bigger as per mockup.Review of:thanks!pushed as- user-accounts: Make user icon biggerCreateduser-accounts: Handle pixel-size changesCommitintroduced pixel-size handling for user icon, however,the icon is not resized on each pixel-size change as it should. Thisis not problem currently, but might be problem in the future...Createduser-accounts: Simplify scale-factor handlingRemove redundant on_scale_factor_changed function and call render_imagefunction directly.	21.0	id=745603	12	False	False	tiagomatos	1
id=768111	REOPENED	gtk+	Backend: Wayland	3.20.x	Other All	Normal normal		2016-06-27 19:46 UTC by	Christian Stadelmann	2017-02-15 20:55 UTC (	4 users	With Gtk+ 3.x applications running with a wayland Gdk backend I recently discovered an issue which exits applications in rare cases. They happen while/after showing a menu. Right before the application exits, it prints this warningGdk-WARNING **: Error 71 (Protocol error) dispatching to Wayland display.from gdk/wayland/gdkeventsource.c:197. There are 2 cases I can reproduce:1. In LibreOffice Impress, when using the "View" menu, in some cases it just exits after printing the warning added above.Bug report:Backtrace:2. Firefox builds with Wayland Gdk backend behave similiar on showing any menu (!)Bug report:Backtrace:Note that this doesn't work with default Firefox builds because they enforce using x11 as Gdk backend on linux. You have to use the builds frominstead. See this mailing list thread for details:I'm reporting this here because it happens in 2 very different applications and because a LibreOffice developer commented this would be an issue in Gtk+ inDespite using gnome+wayland heavily, this bug hasn't occurred to me anywhere else before so I guess it is either recently introduced or due to the special way how Firefox and LibreOffice use Gtk+.	This could be related incorrect usage of xdg_shell. Could you attach the stderr output when reproducing while having the WAYLAND_DEBUG=1 environmental variable set?CreatedOutput of $ LC_ALL=C WAYLAND_DEBUG=1 libreofficeI've attached the requested output of libreoffice with WAYLAND_DEBUG=1. Note that I had to click the menu several times (ca. 12) until the issue could be reproduced.As far as I can tell what is happening is that:1. a popup is created with the toplevel window as parent2. another popup is created while the previous popup is still mapped, also with the toplevel window as parentThis is not allowed, as the compositor wouldn't know what to dismiss when the popup grab is broken.I'm guessing that either libreoffice is 1) missing to destroy an old menu, or 2) using the wrong parent for a child menu, or 3) it accidentally creates two popups when it meant to create only one.CreatedOutput of $ LC_ALL=C WAYLAND_DEBUG=1 firefoxSame log file for firefox (Build 47.0-8.wayland.fc24.x86_64, see).Firefox does the same; it tries to create two popups on top of the same toplevel, which isn't allowed. Maybe we should add debug messages and let gtk+ simply ignore such requests.(In reply to Jonas Ådahl from)Ok, so it is a downstream issue. Debug messages + ignoring these requests is probably the better way, since a library should not simply exit an application.The same bug also affects evolution-3.22.3-1.fc25.x86_64. Evolution crashes when I write an email address, and more precisely when auto-completes the email address through the address book.This bug is gone with Nightly builds for wayland, 52.0a1, BuildID 20170215004354, downloaded from(created with build scripts from)Sorry, I did mean to close a different bug.	9.0	id=778458	24	False	False	felipeborges	1
id=661114	REOPENED	l10n	Canadian English [en_CA]	unspecified	Other Linux	Normal normal	Adam Weinberger	2011-10-06 18:59 UTC by	Jean-François Fortin Tam	2016-04-07 14:12 UTC (	1 user	CreatedscreenshotAs you can see in the attached screenshot, if you bump up gnome's font size settings to 2x, gnome-control-center breaks up pretty badly :)Big font sizes like that are necessary for visually impaired users or for media center use cases.	The maximum available in the UI is 1.5, and visually impaired users that would need "bigger" text would most likely use the magnifier.Createdscreenshot at 1.2xWell, it also breaks at 1.2x (when turning on the accessibility menu's "Big text" switch), as you can see with this new screenshot. It's just a bit less obvious so I forgot to report it before ;)I'm guessing the icon grid uses a fixed width? Perhaps it would be possible to multiply the width of the cells by a factor depending on the font scale?The clipping is GtkIconView's fault.*** This bug has been marked as a duplicate of***Fixed in master for English, will need en_* translations if we want to see this in GNOME 3.20 or older.commitAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.	4.0	id=661114	14	False	False	nekohayo	1
id=770107	REOPENED	GStreamer	gst-plugins-good	git master	Other Linux	Normal normal	GStreamer Maintainers	2016-08-18 17:50 UTC by	Xabier Rodríguez Calvar	2017-01-27 13:31 UTC (	6 users	Imagine a file that is encrypted with more than one encryption system, say Widevine, PlayReady and Clearkey. We have decryptors for two of them available. Qtdemux will select the first factory that can provide a decryptor that the stream reported it is encrypted with (this happens in gst_protection_select_system).In some cases it can be a bad idea because even when the file claims that it supports three encryption systems, the user should be who decides with which of those systems it wants to decrypt, meaning that the stream should provide caps with three structures, one of each stream if those can be used.How I found that this is a problem: YouTube EME tests. Many files used in those tests are encrypted for the three systems I mentioned above and used indistinctly in different tests for different key systems. It can happen that the same file is used for PlayReady and ClearKey tests, for example. If we always select ClearKey decryptor because we select the first that matches and the PlayReady test won't provide a key for it, we are screwed :)As I said, I think the solution is providing more than one structure at the caps for the outgoing stream. This will be a nightmare in WebKit too, but life sucks sometimes ;)	I'm not sure how you envision "providing more than one structure at the caps for the outgoing stream" will work.The way this works was a design decision and done on purpose.We may have to add some way to query whether a key is available then or something when selecting the system.I presume the version was supposed to be 1.8.0?The idea was that qtdemux checks for which DRM schemes a decryptor exists, and exposes caps according to the highest-ranked one. This could probably be extended via some magic with GstContext to allow the application to give its own preferences per pipeline.Why is it always exposing the first for you? You have decryptors for all 3, but only one is going to work?(In reply to Tim-Philipp Müller from)Mixed caps :)(In reply to Sebastian Dröge (slomo) from)Is there any docs on mixed caps yet? I never looked at how it is supposed to work and handle intersections and similar operations we do in caps.We could use a GstContext... or a bus sync message. Isn't a GstContext just like the order of the element ranks? Except that it would be per-pipeline rather than system wide. The message would be stream specific and seems more direct to the point IMHO.(In reply to Tim-Philipp Müller from)Caps can have more than one structure, right? Usually people access only the first, meaning index 0.My proposal would be to duplicate the structure for all the usable decryption systems. Pardon my ignorance if this is not possible or it does more harm than good.I am trying with 1.8.2.(In reply to Sebastian Dröge (slomo) from)According to this function that is used in qtdemux, it seems to use the first or am I wrong?:const gchar *gst_protection_select_system (const gchar ** system_identifiers){ GList *decryptors, *walk; const gchar *retval = NULL; decryptors = gst_element_factory_list_get_elements (GST_ELEMENT_FACTORY_TYPE_DECRYPTOR, GST_RANK_MARGINAL); for (walk = decryptors; !retval && walk; walk = g_list_next (walk)) { GstElementFactory *fact = (GstElementFactory *) walk->data; retval = gst_protection_factory_check (fact, system_identifiers); } gst_plugin_feature_list_free (decryptors); return retval;}We have for two, but it is a combination of JS app and WebKit that decides which one should be used (I didn't check yet how that can be handled).Caps describing an actual output media format (sent downstream as CAPS event) must be fixed caps, which implies one structure.(In reply to Tim-Philipp Müller from)I was afraid of this :)So I guess a message answered thru the sync handler could be an option, or at least a list of possible alternative decryptors in another element of the structure that wouldn't break ABI.Ok, my plans are:* Creating and interface that will allow other demuxers to follow the same approach. This interface will have a method to set the preferred system id.* qtdemux will implement this interface and at the moment of selecting the decryptor, it will send a message to the bus that shall be answered in the sync handler. If we don't get a satisfactory answer, we proceed as we do now, if not, we select the handler specified by the user. Of course, the interface will provide a helper to send that message.How does this sound? If I don't get an answer I will begin with this.Sounds like a job for GstContext to me, if you want to implement something like your plan. It has all the pieces you need for that already.Alternatively this could be implemented with mixed-caps, but then someone would have to finish the design and implementation of those first.Created1/1 gst-plugins-goodI am uploading this patch cause I had already cooked it but it is useless for the use case I explained. The patch checks for a preferred system id when it is going to configure the protected caps and if it is not available it will ask for the context. After that, if there is that preferred system, it will use it and if not it will use the other path.Why do I say this is useless?In our test case:1. The stream is injected.2. qtdemux detects the protection system ids, generates events for them and keeps them until the streams are set up.3. It selects the system system (with or without my patch) and creates the protected caps.4. The streams are set up and the events are emitted.For us and according to the spec (the old one and I haven't checked the new one thoroughly but I bet it would be similar, you only have to see the diagram atto realize that it is always the media system telling the upper layers if the media is encrypted or not) we cannot know in advance if the stream is encrypted and there is no [old] spec to see what happens when you find more than one encryption system (if you fire the needkey events and so on).Summing up, I will close this bug for now and leave the patch there in case you find it is interesting now or in the future.Created1/1 gst-plugins-good qtdemux patchI got this patch working with WebKit for ARM and thanks to it I manage to pass some more YouTube tests.The good thing is that this patch does not modify any API/ABI so it won't make other implementations stop working.Created2/2 gstreamerI had forgotten to add this patch that would be also needed for GStreamer core.Created2/2 gstreamer(In reply to Xabier Rodríguez Calvar from)I was about to put these patches into WebKit internal jhbuild and realized that the patch was duplicated and incorrectly labeled. Now both are ok.	15.0	id=770107	15	False	False	t.i.m	1
id=389656	REOPENED	doxygen	general	1.5.1	Other All	Normal normal	Dimitri van Heesch	2006-12-26 05:34 UTC by		2013-05-18 14:39 UTC (	2 users	Please describe the problem:This applies to Csharp (C#) code documentation of enumerations (enum). When two enumerations share some members having the same name, documentation for both members appears with both enumeration documentations.PLEASE SEE SIMPLE EXAMPLE IN OTHER INFORMATION BELOW.Steps to reproduce:1. Create a C# program with two global enumerations (not nested in a class, but can be in a namespace) and nothing else.2. Make some of the members of the enumerations have the same names.3. Run doxygen with enough flags set so you get enums documented.Actual results:You get duplicate entries in the documentation. One for the member that is actually in the enumeration, another for the member with the same name in the other enumeration.Expected results:Only members of an enumeration should be documented with the enumeration. Documentation should not include members of other enumerations.Does this happen every time?YesOther information:-----------------------------------------------This is the sample program-----------------------------------------------using System;/// <summary>/// This is an enumeration./// </summary>public enum List1{ Folder, //!< This is item 1 in enumeration 1 Compilation, //!< This is item 2 in enumeration 1 Directory, //!< This is item 3 in enumeration 1 Label //!< This is item 4 in enumeration 1}/// <summary>/// This is another enumeration./// </summary>public enum List2{ Horse, //!< This is item 1 in enumeration 2 Compilation, //!< This is item 2 in enumeration 2 Dog, //!< This is item 3 in enumeration 2 Label, //!< This is item 4 in enumeration 2 Cat //!< This is item 5 in enumeration 2}---------------------------------------This is some of the documentation (a CHM file)---------------------------------------enum List1 This is an enumeration. Enumerator: Folder This is item 1 in enumeration 1. Compilation This is item 2 in enumeration 1. Compilation This is item 2 in enumeration 2. Directory This is item 3 in enumeration 1. Label This is item 4 in enumeration 1. Label This is item 4 in enumeration 2. Definition at line 6 of file sample.cs. enum List2 This is another enumeration. Enumerator: Horse This is item 1 in enumeration 2. Compilation This is item 2 in enumeration 1. Compilation This is item 2 in enumeration 2. Dog This is item 3 in enumeration 2. Label This is item 4 in enumeration 1. Label This is item 4 in enumeration 2. Cat This is item 5 in enumeration 2. Definition at line 17 of file sample.cs.	Confirmed. This is due to the difference in the way enum values are handled in C# and C++. In C++ enum values are accessible outside the enums scope, where-as in C# they require explicit qualification. I'll add some specific treatment for C# in the next CVS update, so the output is at least correct in both cases.The exact same problem occurs in D.Will the solution you have in mind break documentation in languages other than C# and D? Otherwise, I don't see any need for language-specific treatment rather than putting it into the basic algorithm.This bug was marked "assigned" by me some time ago, which means it should befixed in version 1.5.2 and is hereby marked as such. I would kindly request youto check if this version indeed fixes the problem and reopen the bug reportshould you still see the same problem.The bug is still there. Please reopen.CreatedD testcaseProblem is in 1.8.3.1 (20130512 / svn 848) still present for the language D; for c# the problem is not present anymore.	6.0	id=389656	9	False	False	dimitri	1
id=747880	REOPENED	clutter-gtk	GtkClutterEmbed	unspecified	Other Linux	Normal normal	clutter-gtk maintainer(s)	2015-04-15 00:37 UTC by	Jason Gerecke	2015-10-19 18:30 UTC (	3 users	When the tablet calibration utility tries to exit (e.g. by pressing Escape or waiting for the timeout to expire), the UI freezes with the calibration window left open. The 'test-calibrator' tool works properly, though exhibits the same behavior if its call to 'calib_area_free' occurs prior to 'gtk_main_quit'.Backtrace (pressed Escape to exit [frame #30]):	I just noticed that the freeze does *NOT* seem to occur if you use ALT+TAB or click on another window (on another monitor) to change focus. I find this especially interesting considering that 'gtk_window_set_focus' appears in the stack trace above...Also interesting to note: Having "CLUTTER_BACKEND=x11" set in the environment prior to running gnome-control-center appears to make this problem disappear.Createdgdk: Use the GdkDevice id for our input devices if availableOn X11, some apps assume that the ClutterDevice id matches theunderlying XInput device id. We can keep that working on the GDKbackend by getting the device-id property from the GdkDevice if itexists.--Does this clutter patch help?Review of:::: clutter/gdk/clutter-input-device-gdk.c@@ +153,2 @@ name = gdk_device_get_name (device);+ g_object_get (device, "device-id", &device_id, NULL);That's gonna throw an error when the GDK backend is Wayland.if (g_object_class_find_property (G_OBJECT_CLASS (device), "device-id"))would probably fix that.Reassigning to clutter, as the patch is against that.Review of:::: clutter/gdk/clutter-input-device-gdk.c@@ +153,2 @@ name = gdk_device_get_name (device);+ g_object_get (device, "device-id", &device_id, NULL);"device-id" is a XInput2-only property, so you cannot use it unconditionally.I already have a patch for this in.Actually, the whole bug looks like a dupe of 747951.*** This bug has been marked as a duplicate of***I think that the patch might be in the wrong bug... Reopening, and reassigning to gnome-control-center. Sorry about that.(In reply to Emmanuele Bassi (:ebassi) from)We even have gdk_x11_device_get_id() these days :), although might not help much about non-conditional code here.I pushed the patch inwhich does the right thing.This bug persists even withfixed, so it's definitely not a dupe. The calibration screen does exit properly when all targets have been clicked, but it still freezes in the "abort" scenarios originally listed (i.e., timeout or escape key). It looks like Emmanuele's fix for 747951 does the same thing thattries to accomplish, so perhaps the issue lies elsewhere?I see what goes on here:- clutter_master_clock_gdk_update() is called, it acquires the clutter lock and goes on to processing pending events on the stage (the Esc key CLUTTER_KEY_RELEASE event at that moment)- This triggers destruction of the calibration area, the stage, and the toplevel GtkWindow- Along GtkWindow destruction, the focus is set to NULL, which triggers gtk_widget_send_focus_change() to be sent- That function makes the widget process immediately the event through gtk_widget_event(), which gets processed by gtk_clutter_embed_event(), and clutter_gtk_handle_event() ultimately.- That last function tries to acquire the lock again, which was already taken by clutter_master_clock_gdk_update() in the first step.I'm not sure what's the best approach tbh, I guess we might hold off the gtk_widget_send_focus_change() if the window is being destroyed anyway, but every focus change might potentially trigger this.Moving to clutter-gtk for further discussion.	13.0	id=747880	20	False	False	tiagomatos	1
id=745603	REOPENED	gnome-control-center	Region & Language	git master	Other Linux	Normal normal	Control-Center Maintainers	2015-03-04 14:14 UTC by	Vadim Rutkovsky	2016-03-11 12:21 UTC (	5 users	CreatedScreenshotDefault Language dialog size is too small. This happens on both Xorg and Wayland sessions.Continuous 20150304.35gnome-control-center c43042955948485572a40fd556f5b21554fc8ba4	I'm unable to reproduce this with gtk+, g-c-c and mutter master. Can you reproduce outside of continuous?Can't reproduce on rawhide's control-center-3.15.91-1.fc23.x86_64, closingI've come across the same issue when testing with continuous, and was in the process of filing a bug when I found this one.It would be good to have this issue fixed in continuous.I also met this issue in 3.18.2-1, and I can't add a new language in this dialog.CreatedScreen shot in 3.18.2	5.0	id=606382	44	True	True	wim.taymans	1
id=749722	REOPENED	totem	general	unspecified	Other All	Normal normal	General Totem maintainer(s)	2015-05-22 11:01 UTC by	Lars Uebernickel	2016-03-11 19:11 UTC (	1 user	Totem writes to the active-plugins key multiple times on startup, once for eachbuiltin plugin that is not listed in the default for that key.Changing the default to include all plugins would solve this. That means thatwe'd need to take care to always update the default. Also, when we ever turn abuiltin plugin off by default in the future, it will still be enabled forpeople that used that upgraded from an older version ("active-plugins" willstill contain the plugin).I think not listing builtin plugins in that key makes the most sense. Theattached patch does that.Peas doesn't provide a list of loaded plugins that are not builtin, so thispatch needs to merge/filter the list when writing/reading the key. I'll open abug against peas as well.	CreatedDon't save builtin plugins to gsettingsBuiltin plugins are not meant to be disabled by users and are thus notpart of user settings.Do this by filtering out builtin plugins before writing and insertingthem when reading from the settings key.This also stops Totem from writing to gsettings on startup. The list ofbuiltin plugins was not in sync with the default value of theactive-plugins gsettings key.Filed for peas at.I changed the description a tad, and committed. Thanks!Turns out this was utterly broken.If you run:gsettings reset org.gnome.totem active-pluginsYou'll end with none of the builtin plugins being loaded, and if you force load them, they'll get unloaded.I couldn't figure out what the problem is, so reverted that patch, as we're really close to release.(FWIW, I saw this problem after trying to write a new plugin, which didn't work. Turns out my plugin was instantly unloaded)commitAuthor: Bastien Nocera <>Date: Fri Mar 11 20:03:07 2016 +0100 Revert "plugins: Don't save builtin plugins to GSettings" This reverts commit. It caused builtin plugins not to get loaded. See	4.0	id=749722	7	False	False	bugzilla	1
id=606382	REOPENED	GStreamer	gst-plugins-base	git master	Other Linux	Normal normal	GStreamer Maintainers	2010-01-08 09:03 UTC by	Tim-Philipp Müller	2015-11-16 07:13 UTC (	7 users	Take attachement #151008 of. This is a chained ogg file with a new chain starting at position 17s. Seeking beyong the 17s boundary causes a decoder error.	oggdemux needs to cache the headers of the chains and push them right after activating the new chains.This commit does not completely fix it but makes it mostly work. I think there is a race left in playbin2 when it actually switches chains, which makes it fail sometimes.commitAuthor: Wim Taymans <>Date: Fri Jan 8 16:57:40 2010 +0100 oggdemux: push headers when activating chains Keep a list of headers for each stream of a chain. When a chain is activated, push the headers before pushing the data so that decoders can sync. Fix seeking in chains, take the chain start time into account when comparing timestamps. See #606382It a problem in decodebin2 somewhere. It seems that it doesn't mark chains and groups, that got a new pad after no_more_pads, as pending/incomplete/unexposed.(In reply to)Why are there new pads after no-more-pads at all? Adding a new pad after no-more-pads will make decodebin2 add that new pad to the next/a new group. How should it detect that this new pad belongs to the currently active group?There are two types of pad groups 1) unclosed groups: pads are added to an element but at no time is there ever a no-more-pads signal emited. The demuxer usualy has no idea when all pads are added. Decodebin2 should assume that when more pads are added, they belong to the current group of pads. A similar thing when pads are removed. Decodebin2 also uses the multiqueues to decide when enough data is processed so that a reasonable amount of pads are added to the group and begin playback. This is usually the case for mpeg(ts)demux. 2) closed groups: pads are added to an element and when they are all added, a no-more-pads signal is emited. In this situation a new group can be started by first adding the new pads (they go to a new group because the previous group was closed), removing the old pads and then signaling no-more-pads. This is common for chained oggs (from live radio or local streams) and chained asf currently. In this case, decodebin2 uses the no-more-pads signal to remove the old group and activate a new group. No multiqueue overrun is needed to decide when playback can start.Yes, this is exactly what is implemented in decodebin2. But you said: "It seems that it doesn't mark chains and groups, that got a new pad after no_more_pads, as pending/incomplete/unexposed." That would be against 2) because new pads that are added after no-more-pads should open a new group.What I saw in debug logs is that the no-more-pads did somehow not expose the new group, leaving the new pads unlinked and erroring out.Either I'm looking at something wrong or I have a different behavior here. I'm using totem and if I seek beyond 17secs I see that the new pads are exposed on the logs, the position bar keeps moving but no audio is played. And lots of pulsering overflow happening.And that happens everytime.Ok for me something completely different happens every time :)Seeking after 17s sometimes works but most of the time playback continues at some position before 17s. And seeking in general is not very accurate.Oh, and is this actually a regression? I would be surprised if seeking to another chain had worked at some pointI don't think it's a regression. I would also be surprised if it ever worked before at any point, but it would still be nice to get this fixed up. It feels like we're really close to a fix, but I might be wrong of course :)A thing I just noticed. When I seek to 22 secs it goes to 5 secs. When I seeked to 31, it went to 13.22 = 17 + 531 ~ 17 + 13(In reply to)Oh, good catch. It's the same for me. So somewhere the chain start timestamp is getting substracted or something.When reverting the begintime chunk of 0201326db12ac1dfd224385789ae36bbe62f052e the reported timestamps (as reported by totem) are more correct but there's no sound.The commit below fixes the position reporting, but still no sound.Module: gst-plugins-baseBranch: masterCommit: 125f7dfdb058888a4f2ba0e837259be1e1a2ff2bURL:Author: Thiago Santos <>Date: Mon Jan 18 15:22:52 2010 -0300oggdemux: granulepos is relative to its chainWhen performing seeks, the granulepos should be offset byits chain start time to avoid using wrong values toupdate segment's last_stop. A sample file is indicated onOk, this seems to do fix the seeking, but wtay still has errors with decodebin2.Module: gst-plugins-baseBranch: masterCommit: 4b771bff7a224d179c67cdf8ab105f12079b3286URL:Author: Thiago Santos <>Date: Tue Jan 19 08:39:14 2010 -0300oggdemux: No need to subtract begin timeLast stop is already based on the chain start and there is no needto subtract the chain start as it may lead to a negative overflow.This was causing seeking issues when the target chain was notthe first one (that has chain start = 0)Fixes #606382Createddeadlock traceI'm getting this deadlock when seeking around the chain switch (17 secs)Createdpatch for the deadlockThis patch fixes the deadlock, but I still see lots of "seek failed" when using seek.c example.Dunno if the locking is optimal, but at least it works.(In reply to)You attached the backtrace again :)CreatedPatch for the deadlockOops. Now the real patch.Createddebug log that leads to "seek failed"This is a part of the debug log showing why "seek failed" error happens on seek.c, the seek events flows upstream until the multiqueue that has already been unlinked due to the chain switching.Comment ondebug log that leads to "seek failed"bah, copying and paste fail.Createddebug log that leads to "seek failed"The seek event fails because of the chain switch.It goes upstream up to multiqueue that is already unlinked from the demuxer, so it fails.What seems to happen is that :* oggdemux detects a new chain therefore * oggdemux emits no-more-pads * current decodebin group is marked as closed, but data is still going out (multiqueue isn't empty) * oggdemux removes the old source pads * current decodebin group isn't linked to anything upstream anymore * oggdemux adds new pads * decodebin creates a new group with multiqueue/decoder. * oggdemux pushes data from the second chain * the data goes into the new decodebin2 group which will only be exposed when the first group is drained.The problem is that:* the first group is still pushing out data, but isn't linked to oggdemux anymore* the second group (i.e. where we want to seek) isn't exposed yetThe seek arrives through the first group... which isn't linked anymore... and therefore oggdemux never gets the seek :(So basically... we need to have a way for upstream events (SEEK but also QOS would be good) coming from outside decodebin2 to make their way up to the demuxer.I'll think about how this can be fix... but feels quite tricky.Reminder: There's still a patch for oggdemux's deadlock on chain seeking pending reviewSorry, completely forgot about that. Bit late to put it in now for the next pre-release though, need to look at it again with a clear head. Not entirely sure about the possibility of a locking order problem with the stream lock and chain lock.Comment onPatch for the deadlockI think Wim was also not convinced the locking/locking order is entirely right here.Unsetting blocker status: while a deadlock is quiet bad, it should only happen in corner cases (who has chained oggs as local files? heavy scrubbing/seeking) and I don't think we'll have a solution for this until the release. And it's not really a regression.Still fails in current git, but in slightly different ways.How does it fail now?This has become more evident with adaptive demuxers where group switches are frequent. The smaller the fragments, the more it happens.Here is an idea I had for implementation:Keep the removed group around and attach probes to the sink pads, then push a dummy custom upstream event/query to flow through the branch and only remove the group after it has reached the probe.Events received in this probe should be forwarded to the new groupWe've just stumbled across this problem as well, when streaming over HLS. We often experience variant switches at the start of playback, and therefore seeking early in the piece is not terribly reliable, as the seek events often get lost.A question; if we implement a solution along the lines that Thiago has described, does anyone know how decodebin2 will behave when it receives a FLUSH_START event from the upstream element which has now received the SEEK event? I think we would want it to destroy the new groups (which are not yet linked downstream), and push the event into the old linked group (which is linked downstream).(In reply to Thiago Sousa Santos from)I'm a bit confused as to what you mean by "removed group". If it's still got data (i.e. EOS hasn't been seen on the source pads of that group), then it needs to stay around. If it received EOS and there's a pending group... there's no reason to keep it around ?Having probes on the sink pads is definitely something we need to not "lose" events/queries that are travelling upstream. But I'd say we should put those immediately before unlinking the demuxer source pads (i.e. to handle events/queries travelling upstream between the moment we unlink from demuxer and the moment we un-expose that group).At what moment do you intend to push that custom upstream event ? When un-exposing the group ?(In reply to Duncan Palmer from)Until now this bug was looking at not losing events/queries coming from downstream, But you are indeed right that there is some special handling required for events coming from upstream. In the case of FLUSH_START I would propose the following: In group event probes (whether linked or unlinked) if we see a FLUSH_START we should forward that to *all* other groups. The rationale behind this is that upstream (the demuxer) asked us to flush, therefore we should flush everything downstream from that... which includes all the groups. By doing so we: 1) Ensure all groups are flushed 2) Downstream of decodebin gets the FLUSH_START event (there is at least one group exposed which will push that through decodebin's current source pads) Once that is done, we should also expose the latest group (which is the one currently linked to the demuxer) and remove the previous ones.Assigning it to myself since I plan to fix it !(In reply to Edward Hervey from)Would there be any problems if upstream did a variant switch after FLUSH_STOP, and before pushing any data into the exposed group? I don't think there would be, as the exposed group (now flushed) would receive an EOS, and things would proceed in the way they usually do for a variant switch.(In reply to Duncan Palmer from)Not that I can think of (for the reason you stated). I'll start giving it a go today.CreatedWIP:decodebin2: Forward event/queries for unlinked groupsWhen upstream events/queries reach sinkpads of unlinked groups (i.e.no longer linked to the upstream demuxer), this patch attempts to findthe linked group and forward it upstream of that group.This is done by adding upstream event/query probes on new group sinkpadsand then:* Checking if the pad is linked or not (has a peer or not)* If there is a peer, just let the event/query follow through normally* If there is no peer, we find a pad to which to proxy it and return GST_PROBE_HANDLED if it succeeded (allowing the event/query to be properly returned to the initial called)Note that this is definitely not thread-safe for the time beingWith the above patch, the various queries/events do end up in the upstream elements even if the group isn't linked.The next phase I'm working on is ensuring some action is take on downstream events, such as on FLUSH_START where we drain/remove all non-last groups and switch the last group to be the active one.Createddecodebin2: Forward event/queries for unlinked groupsWhen upstream events/queries reach sinkpads of unlinked groups (i.e.no longer linked to the upstream demuxer), this patch attempts to findthe linked group and forward it upstream of that group.This is done by adding upstream event/query probes on new group sinkpadsand then:* Checking if the pad is linked or not (has a peer or not)* If there is a peer, just let the event/query follow through normally* If there is no peer, we find a pad to which to proxy it and return GST_PROBE_HANDLED if it succeeded (allowing the event/query to be properly returned to the initial called)Note that this is definitely not thread-safe for the time beingCreateddecodebin2: Handle flushing with multiple decode groupsWhen an upstream element wants to flush downstream, we need to takeall chains/groups into consideration.To that effect, when a FLUSH_START event is seen, after having itsent downstream we mark all those chains/groups as "drained" (as ifthey had seen a EOS event on the endpads).When a FLUSH_STOP event is received, we check if we need to switch groups.This is done by checking if there are next groups. If so, we will switchover to the latest next_group. The actual switch will be done whenthat group is blocked.Createddecodebin2: Forward event/queries for unlinked groupsWhen upstream events/queries reach sinkpads of unlinked groups (i.e.no longer linked to the upstream demuxer), this patch attempts to findthe linked group and forward it upstream of that group.This is done by adding upstream event/query probes on new group sinkpadsand then:* Checking if the pad is linked or not (has a peer or not)* If there is a peer, just let the event/query follow through normally* If there is no peer, we find a pad to which to proxy it and return GST_PROBE_HANDLED if it succeeded (allowing the event/query to be properly returned to the initial called)Note that this is definitely not thread-safe for the time beingCreateddecodebin2: Handle flushing with multiple decode groupsWhen an upstream element wants to flush downstream, we need to takeall chains/groups into consideration.To that effect, when a FLUSH_START event is seen, after having itsent downstream we mark all those chains/groups as "drained" (as ifthey had seen a EOS event on the endpads).When a FLUSH_STOP event is received, we check if we need to switch groups.This is done by checking if there are next groups. If so, we will switchover to the latest next_group. The actual switch will be done whenthat group is blocked.Createddecodebin2: Forward event/queries for unlinked groupsWhen upstream events/queries reach sinkpads of unlinked groups (i.e.no longer linked to the upstream demuxer), this patch attempts to findthe linked group and forward it upstream of that group.This is done by adding upstream event/query probes on new group sinkpadsand then:* Checking if the pad is linked or not (has a peer or not)* If there is a peer, just let the event/query follow through normally* If there is no peer, we find a pad to which to proxy it and return GST_PROBE_HANDLED if it succeeded (allowing the event/query to be properly returned to the initial called)Note that this is definitely not thread-safe for the time beingCreateddecodebin2: Handle flushing with multiple decode groupsWhen an upstream element wants to flush downstream, we need to takeall chains/groups into consideration.To that effect, when a FLUSH_START event is seen, after having itsent downstream we mark all those chains/groups as "drained" (as ifthey had seen a EOS event on the endpads).When a FLUSH_STOP event is received, we check if we need to switch groups.This is done by checking if there are next groups. If so, we will switchover to the latest next_group. The actual switch will be done whenthat group is blocked.commit eaf9ca90c7000f5c7156d13969b9135f7273fa79Author: Edward Hervey <>Date: Mon May 4 11:19:28 2015 +0200 decodebin2: Handle flushing with multiple decode groups When an upstream element wants to flush downstream, we need to take all chains/groups into consideration. To that effect, when a FLUSH_START event is seen, after having it sent downstream we mark all those chains/groups as "drained" (as if they had seen a EOS event on the endpads). When a FLUSH_STOP event is received, we check if we need to switch groups. This is done by checking if there are next groups. If so, we will switch over to the latest next_group. The actual switch will be done when that group is blocked.commitAuthor: Edward Hervey <>Date: Wed Apr 29 15:56:39 2015 +0200 decodebin2: Forward event/queries for unlinked groups When upstream events/queries reach sinkpads of unlinked groups (i.e. no longer linked to the upstream demuxer), this patch attempts to find the linked group and forward it upstream of that group. This is done by adding upstream event/query probes on new group sinkpads and then: * Checking if the pad is linked or not (has a peer or not) * If there is a peer, just let the event/query follow through normally * If there is no peer, we find a pad to which to proxy it and return GST_PROBE_HANDLED if it succeeded (allowing the event/query to be properly returned to the initial called) Note that this is definitely not thread-safe for the time beingThis is still a problem, you can easily reproduce it with the HLS seek tests in gst-validate:The seek events are returning FALSE, although the seek handler in hlsdemux returns TRUE.The problem here is that hlsdemux switches to a new bitrate at the same time as we send a seek. So the seek event goes to hlsdemux, returns TRUE, goes up to playbin. Playbin sees that elements changed, gst_iterator_resync(), send event again. But this time the streamsynchronizer pad at playsink is not linked because the bitrate switch is currently happening.Related to this is alsocommitAuthor: Sebastian Dröge <>Date: Fri Oct 23 12:02:28 2015 +0300 playbin: Send upstream events directly to playsink Send event directly to playsink instead of letting GstBin iterate over all sink elements. The latter might send the event multiple times in case the SEEK causes a reconfiguration of the pipeline, as can easily happen with adaptive streaming demuxers. What would then happen is that the iterator would be reset, we send the event again, and on the second time it will fail in the majority of cases because the pipeline is still being reconfiguredDoesn't fix it, but makes it better.This fixes things even more, enough to enable the HLS seeking tests in gst-validate again.commitAuthor: Sebastian Dröge <>Date: Tue Oct 27 15:44:06 2015 +0200 decodebin: Send SEEK events directly to adaptive streaming demuxers This makes sure that they will always get SEEK events, even if we're currently in the middle of a group switch (i.e. switching to another representation/bitrate/etc).Createdlogs showing hang on seekI'm currently seeing a problem where gst_element_seek_simple(decodebin) is not returning. log.2 shows that hlsdemux receives the seek event fine, but that flush-start is not propogated to any groups within the decodebin. This is because hlsdemux has just switched bitrates, and the src pad probe has yet to be put in place by hlsdemux. A quick hack to workaround this is for hlsdemux to ensure the streaming thread is stopped before sending flush-start downstream.With the quick hack in place, I can the produce the scenario in log.3. Search for WARNING and CRITICAL. In this case, flush-start is making it's way into a group which is in the process of being created, and causing grief.I'm not sure why either scenario causes a hang, but in any case it's obviously wrong.Any suggestions?I don't think this can be fixed in any meaningful and reliable way in the existing decodebin design. There are already ideas how to solve it with a new design, see Edward's talk from the GStreamer Conference this year :)Bummer... I've put in a bit of a hack to try and avoid the issue. Seems to be working so far. What I try and do is avoid sending a seek in whilst decodebin is creating a new group as a result of a bitrate switch.The way I've done this is to add a new signal to decodebin, which I've called pad-activated. It fires after gst_decode_pad_activate() is called. I can know how many pads I expect to be 'activated' (it's the same as the number of src pads created by the tsdemux), so I can know when the new group has been built by counting the number of times pad-activated has fired.hlsdemux emits a message to indicate when it's switching to a new playlist.So, between these two things, I almost have a slightly fragile mechanism of detecting when the decodebin is busy creating a new decode group. There is a still a race with hlsdemux - the streaming thread needs to be paused before sending the seek event so we're not racing with the beginning of a bitrate switch.This is a bit horrible, but is the best I can think of, seeing as not allowing seek isn't an option for me.Another avenue I haven't investigated it to determine why a seek request can hang at the moment. If it instead failed cleanly, that's something I could deal with.If anyone has any suggestions for a nicer workaround, I'd be grateful ;)The hang might happen because we're flushing a decode group that is currently draining. With that, it would never go EOS anymore and we would wait forever for it to drain before switching to the next group. There's a pad probe that should prevent it, but maybe that's broken.	54.0	id=115584	28	False	False	kmaraas	1
id=115584	REOPENED	metacity	general	unspecified	Other All	Normal normal	Metacity maintainers list	2003-06-20 06:32 UTC by	Narayana Pattipati	2010-05-08 21:44 UTC (	7 users	gnome-keybinding-properties allows only 12 keybindings to be associated toswitch between workspaces, whereas user can add more workspaces.To reproduce:- Add workspace switcher applet to panel and select 20 workspaces from thepreferences dialog. - Now open gnome-keybinding-properties dialog and check the keybindingentries for workspace switchingUser is allowed to associate only 12 keybindings to the workspaces. Inother words, user can bind keys to switch to 12 workspaces only.There should not be limitation in keybindings when user is allowed to addmore workspaces? It impacts the users using more workspaces across monitors(multihead setup)	Some customers are specifically asking for more than 12 keybindings. Also, when I decrease number of workspaces from(say 10 to 4), thegnome-keybinding-properties shows the descreased number of keybindings. But when I increase the workspaces(say from 4 to 14), the number ofkeybindings shown increases till 12 only. There is an inconsistency inthis behaviour.Any comments ? Should I submit a patch?A patch would probably be a good idea to get discussion going :)I have worked out one for Solaris. I will have to work out a similarone for Linux CVS HEAD and submit. I will do it soon.The code changes are falling into metacity as well asgnome-control-center. The metacity patch looks really big as I amadding schemas for the keybindings from 13 to 36. The changes arerepititive. I have just cut-pasted the existing code for adding akeybinding. I will attach both the patches.Createdproposed changes to gnome-control-centerCreatedproposed changes for metacityI'm happy to apply this to the control-center, but not until themetacity bit is applied first. Havoc, are you happy with moving thatout to 20? If so, I can apply either/both.Filed a bug dep against metacity so it's more likely to be seen by therelevant people.Of course, metacity currently only allows up to 32 total keybindings,so having 36 keybindings for just workspaces seems somewhat silly.I had proposed before to add support for an arbitrary number ofkeybindings but we decided at that time to just limit it to 32. Currently metacity only installs schemas for the first 12 though, eventhough it supports up to 32.Can we just consolidate all the schemas, so we apply one schema to 32keys instead of having 32 schemas?I guess that makes the control center UI break.A GNOME 2.6 issue in any case.As metacity now ships its own keybindings definition, punting to metacity.So here's my idea:We continue to support the 12 keys we always have, but we deprecate them.We add new keys window_keybindings/move_to_workspace global_keybindings/switch_to_workspace workspace_names/name (or possibly general/workspace_names)Either we allow each of these to be a list of strings of the form <natural number>+"="+<string>, or alternatively we allow them to be a semicolon-separated list of such strings.Note that the attached patches are broken because they * rename the key for the name of the 12th workspace to namee12 * introduce new run-commands even though that wasn't specified * and replicate keys pointlessly, but we've covered that.(Sorry, the paragraph about their type was unclear. I meant they could be a list thus: window_keybindings/move_to_workspace (LIST): * 1=Super-1 * 2=Super-2or a string thus: window_keybindings/move_to_workspace (STRING): 1=Super-1;2=Super-2The first one allows you to have arbitrary characters in the value (after the equals sign) but the second one is probably easier for people using gconf-editor to add and edit.I don't see the purpose of causing the user pain of deprecating the old keys, or the developer pain of writing that new code. There is no need to support N keybindings. 12 is fine, imo. But even if we satisfy the extremists of the world, 32 is fine. There is no way in hell we need 64 - anyone with 64 workspaces does not need per-workspace keybindings, and if they really, really want them they can do something custom with libwnck or devil's pie or another WM. We _definitely_ don't need N, since even 64 is ludicrous.So just KISS, do the simplest thing that can possibly work, choose your cliche... it's simple to just change the current 12 to a higher number and not do anything else.(as a side note, cramming all the bindings in a single gconf key makes the control center part a big pain to implement, and introduces a very theoretical race condition since you have to read-modify-write the setting)Well, the simplest *possible* thing is to change this bug to WONTFIX and wash our hands of it. It's pretty trivial for the (very) few people who want to bind more than twelve keybindings to patch it downstream (or, as you say, use devil's pie or something else).I'm actually wondering now what kind of keyboard someone with 64 keybound workspaces would have. I am thinking something like this:WONTFIX, then?Sounds good to me. :-) Though maybe notgnome (i.e. can be done in devilspie or separate add-on, so it's not really won't-be-fixed, just a won't-be-fixed-by-changing-metacity.)okay, notgnome.***has been marked as a duplicate of this bug. ***(In reply to)12 may be fine for you, but not neccessarily for others. for people using more workspaces (personally i use 16, like also mac osx leopard has it for instance), the missing abilitiy to assign key bindings to the last 4 workspaces is a significant usability issue.KISS for the developer or for the user? fact is, the current limitation does *not* work for users with more than 12 workspaces, so you can keep things simple *after* you've made them work ;)even links to a patch to extend the current range, because someone was bothered enough to actually dive into the code.(In reply to)i can't really believe that patch-it-downstream is considered a suitable answer to a window manager usability bug. in case this is not clear, most metacity users can *not* patch the binaries they are running. possibly many people do want more than 12 workspaces though, e.g. poeple used to 16 workspaces from OS X. not all of those are developers, so "patching" is not a solution, it's part of the problem.reopening, because fixing this bug was requested by multiple parties now.(In reply to)Tim: You might want to respond in the light of <>; in particular"Please don't assume that the key issue for accepting a feature is whether there's a patch. It isn't.""Bad rationales which apply to all possible features include: Some (unknown number of) people might like it (for some unknown reason).""...Some other operating system had the feature."The patch as it was given just adds more keys to the schemas. This isn't the way to do it. You should patch the keybindings capplet to recognise keys lists, and use them in metacity instead.I don't think the read/write race is really something that would be a problem though.(In reply to)if you are really interested in a more general treatment of feature additions from my part, you can read up on that here:i don't, i maintain enough projects myself to know that. presence of patches shows that someone was motivated enough to bother though.this is a mis-argument, for every feature you can find *someone* who doesn't want it, and without clairvoyance you can always claim vagueness about the number of requesters. one bug being filed already raises "unknown number" to 1, dups add up to that.and the reasons have been presented for this particular bug.which is not a counterargument. it can indeed indicate that the particular feature might be very relevant. and it allmost always can be a significant usability argument in terms of consistency (which doesn't imply that one desktop aproach should copy the other blindly).there is no canonical reasoning for all bug reports, and for every argument a counter argument can be found, so this sort of generic arguing is leading nowhere. it doesn't change the fact that some people suffer from a usability problem and will be happy if it is fixed.when a developer starts optimizing towards reducing usability problems and making users happy, development is on the right track and evaluating the specifics of each report will come naturally that way.As a new user, I would like to offer input on this feature request.I've switched over from Enlightenment, where I used 24 workspaces, which did support creating shortcuts for accessing more than 12 workspaces.I keep more than 12 applications or shells open. It's a handy feature to be able to switch quickly to the application or shell that I want to access. I always keep applications running in the same workspace... using workspaces this way makes me more efficient and productive, and certainly keeps me from 'hunting' around for the right window, and keeps my use of the mouse way down. Alt-tab does not work very well for me. Ctrl-Alt-up/down/right/left is the work around that I currently use, but it's still too slow.CreatedUpdated patch for Metacity 2.22.0This is an update of the previous patch (from 2003) for Metacity 2.22.0. However, it does not increase the maximum number of keybindings that Metacity supports, since I'm not sure what the appropriate value would be.Review of:I still think this is solving the wrong problem. We support switching between "n" workspaces, each effectively a special case. This patch increases "n". I would rather see a generalised way that "n" could be specified, if we're going to attack this problem at all (which is still not a settled issue).This bug just needs to put up or shut up. It's over 9 years old. Those of us who believe this is functionality that improves the utility of metacity have put up.To reiterate an old argument without providing code is merely deflecting the problem.If someone could summarize what would be entailed in implementing a generalized approach, I'd be willing to do some grunt work on this, but a generalized approach sounds like a lot of work to fix something that's already been fixed.What exactly is the argument against increasing n?	26.0	id=688434	75	False	True	allanpday	1
id=688434	REOPENED	gnome-shell	general	3.18.x	Other Linux	Normal normal		2012-11-16 02:47 UTC by	Adam Williamson	2017-02-11 21:45 UTC (	51 users	(with apologies to the ragecomics community)This is similar to, but it's the general case - this can happen with _any_ case of the Shell password entry dialog, it's not limited to that specific NM case.GNOME 3's password entry prompt blocks access to anything else, which is presumably for Security and stuff. Great. Except I keep all my passwords in a password manager (Revelation). It's great fun to be sitting looking at a password prompt, with my password manager visible right behind it, from which I could get the password the fricking prompt wants me to enter if only it would let me *click on it*.Milan writes in:"I guess the use case is that the first time you enter a password/key, you'dlike to copy it from a text file? But in that case, you can still copy itbeforehand, and then connect to the network, get the dialog and paste it. Thismeans you need to know what you're doing, but typically if you're copying thepassword/key, you do."Which is all very sensible, except I am a stupid squishy human with a fallible squishy human brain and I can tell you that this is _reliably_ not the case. I almost never remember to go and get the password before the prompt for me to enter it pops up. On almost every login session, reliable as clockwork, I run 'git pull' on some Fedora-related repository, see the password prompt come up, and gnash my teeth because I didn't copy the bloody Fedora ssh key passphrase before running the command. So I hit esc, go to revelation, copy the password, go back to the terminal, hit up and then enter, and finally enter the password.This costs me about ten seconds, but it's every damn session, and it annoys me without fail every time.I am not smart enough to come up with a design that would allow this without just making password prompts normal windows, but surely someone else is. A special class for password management apps that lets you access them when the password prompt is active, perhaps?	In some respects, this seems like a general issue with modal dialogs. I don't know how we are going to get around that.One obvious thing we could try and do is make sure that passwords of this nature are remembered rather than you having to enter it each time.well, the security policies on ssh passphrases are pretty standard. if you have it remembered permanently it's barely a security measure at all.I do kinda like the idea I tossed off yesterday, though obviously it might be considerable work for someone who is not me :) imagine a really shiny interface where there's a password manager that integrates with GNOME's password dialogs cleanly and tightly, that'd be kind of awesome.I really don't get the point about Revelation. Is it reinventing gnome-keyring? Why? If you accept that a password manager stores your passwords somewhere, I really don't see why you would prefer copy/pasting them from an external app rather than having your apps automatically retrieving them from the keyring...That said, there's indeed a more general problem with modal dialogs when you need to copy the password from somewhere else.Milan: I use my passwords from multiple devices, including non-GNOME devices. A proper password manager has import/export capabilities to facilitate this. I don't believe gnome-keyring even has the ability to share my passwords between GNOME systems, far less anything else. Password managers can generate the password for you with multiple options, store associated data like usernames and URLs, and save passwords for websites (which is mostly what I use it for). The app re-locks after a short timeout, which improves security - even if you happen to steal my laptop while it's unlocked, chances are decent that the password manager is locked. I can't do any of that easily/at all with gnome-keyring AFAIK.If gnome-keyring/seahorse could grow full-fledged convenient generic password management capabilities that'd be awesome, but I don't believe they currently do.OK, I see now. But since Revelation specifically targets GNOME, I think they should be able to integrate with gnome-keyring/seahorse/libsecret, or merge with it, as the GNOME philosophy mandates, to get the best user experience. Anyway, manually copying passwords is clearly suboptimal from their POV.revelation isn't under terribly heavy development at present, I don't think. I'm not at all tied to revelation as such, I just need a decent password manager, and revelation happens to fit the bill for me atm. as I said, if GNOME wants to grow good native generic password management capabilities via a rejuvenated revelation or any other way, that would be awesome.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Here's the case I run into all the time: I use Google's 2-phase authentication. It's awesome. You get the perfect something-you-have+something-you-know authentication. For applications that don't support it, you get to generate long per-application passwords that can be individually revoked. You just go into your account settings in your browser, log in with the 2-phase authentication, and generate a password. Awesome.Except that you can't do this once an application has asked for a password. Evolution's got an incorrect password, and prompts for a new one every time I log in, but I have no way of getting the new password while it's asking for it.jeremy: damn you, give me back my ragecomic summary! :)I appreciated the sentiment... but searching bugzilla is bad enough without joke titles. (which is why I filed a dupe...)(In reply to)We all have to make sacrifices sometimes...***has been marked as a duplicate of this bug. ***Any workarounds available? Any way to make it non-modal, temporarily orotherwise?my workaround is still "swear, smack the desk, hit Esc, copy the password, then do it again", sadly.***has been marked as a duplicate of this bug. ***Here's a (quite stupid) workaround I came up with. I often work at locations where there may be people peeking over my shoulder, so I don't want to type the password, or have the password visible on screen at any point. I keep my passwords at another system so I wrote a small wrapper script.#!/bin/bash(sleep 1;my_script.sh key_id)&# now do something that might trigger a gnome password promptmy_script.sh retrieves the keyring password from another system and copies it to the clipboard using xsel (and clears the clipboard after another delay). Subshell is used, because using a small delay seems to be necessary for the paste function to work.***has been marked as a duplicate of this bug. ***I have an idea how to solve this and a related problem (people will insert garbage into password prompt if they type):make password prompts to notifications. And let them flash up on click or if ecplicitly triggered by userand there should be a possibility to push it back in the notification area***has been marked as a duplicate of this bug. ***+1, to which I'd add, for the specific case of wifi network passwords, that they should not be obfuscated ().Just to keep the momentum rolling, it's 8 months since I filed the bug and this still happens to me _every day_. The 'train yourself to remember to copy the password before doing the action that triggers the prompt' thing is _not happening_.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Any action on this? I have hundreds of passwords in my password safe, accumulated across years of logging into many, many systems. And now the upgrade to Gnome 3 has forced this modal dialog on me, while at the same time (it seems) that Evolution regularly decides the remembered password must be wrong if some temporary network failure occurs with my ISP.I really can't remember five different 20-random-character e-mail account passwords! And then remember them all again for outbound SMTP as well :-(Then if I "Cancel" on the dialog so I can open my password safe, I can't seem to get it back except by quitting Evolution and restarting it! Convoluted indeed.Here's another issue: application-specific passwords. Google is now using these with two-factor authentication. The passwords are long, random, and intended to be copied+pasted into the application that needs it.Evolution currently has an awful workflow for this unless you copy the password to your clipboard at the perfect time, knowing the modal is about to come up.(In reply to)Please file a bug against Evolution. This will at least mitigate the problem.(In reply to)is marked as a dup of this one.(In reply to)Yeah, but this is wrong, at least for the first part of the report. Evo should not ask for the password when there are network problems, and it should only ask for it in response to user action, so that you can predict when you will need the password.Please file a new bug against Evolution, asis already old.I should note that this problem is certainly not limited to Evolution. Gnome-shell/NetworkManager will also spotonaneously pop up a password dialog in some situations of intermittent connection problems. (Just hit this a minute ago on Fedora 19, gnome-shell 3.8.4.(In reply to)Yeah, but please also file a bug. Even if password dialogs weren't modal, popping them out of the blue is never a good design.To get more sane password prompts, as a workaround, edit your sessionMode.js (I have it at /usr/share/gnome-shell/js/ui/) and delete from there 'keyring' string from components of 'user' session (together with its corresponding comma) - there is only one such string. Then restart gnome-shell.This way, you get the password prompt, which can be minimized (if you miss the icon on the title bar, then use the right-mouse button above the title bar to get the context menu), but the most importantly, you can interact with the session and copy passwords from any other application (which allows copying it, of course). Enjoy.(In reply to)It's worth noting that this stopped working in 3.10 (removing 'keyring' means 'no keyring dialog', not 'fallback keyring dialog').(In reply to)Well, I tested the change in Fedora 20, with gnome-shell-3.10.1-2 gcr-3.10.0-1 gnome-keyring-3.10.0-1if any further update makes this "fallback" dialog dropped, then I agree, bad luck, though it would be too surprising to see gcr rely on custom implementations for each single desktop environment for gcr-prompt/er.Ah right, you found a hole in the logic - the keyring dialog has to be enabled at least once to start working like this. So looks like you are safe for the time being :-)(Note however that in 3.12, you will no longer be able to edit the source file directly)(In reply to)Milan, would you be willing to create a gnome-shell extension?(In reply to)I do not code JavaScript, neither use gnome-shell, I'm sorry.The discuession is really intriguingDid someone "solve" the from a usability point of view, quite harmful system modal password entrering dialog?It is quite a show stopper for me.For me, these dialog boxes have started to pop up randomly (probably triggered by Empathy), so I cannot even prepare by copying the password beforehand.***has been marked as a duplicate of this bug. ***design proposal:make the password dialog to a notification popup wherein you can type(or copy) the password something like the empathy chat.If the user opens the password dialog intentionally (e.g. connects to a new network), slide the passworddialog from the middle of the screen to the corner.This should help newbies to find the new password dialog.^newbies: beginners. Sorry wrong wordI really hate blocking-modal-dialog from the time it appeared in GNOME, because it has no use, has no sense. why implementing blocking-modal-dialogs?According to GNOME Usability Project and having Heuristic Evaluation in mind, blocking-modal-dialog is simply a mistake:- Is it obvious what's happening at each point?Is it obvious to block the user session when asking him for a password? even when the user use an external application to store/generate/manage his password? Not only the session password, not only the GNOME apps passwords, even no only the internet/web user accounts passwords.Seahorse is not designed to manage passwords, It is heavily designed to store passwords, to store gnome-compatible applications password, of course, you can store all kind of passwords you want, but it's not implement to easily use the password in non-gnome-compatible applications e.g by auto typing the password inside the application, or the web page, or whatever. And when Seahorse fails, when the application witch uses seahorse fails, and you need to introduce the password by your self... A blocking-modal-dialog comes to remember you that you can't even open Seahorse to copy your password.- Is the system efficient to use?There is no efficiency in canceling the password request, copying you password to the clip board, and trying to trigger the event witch requests the password (it takes not only 3 steps), some times you don't even know where the request comes from, or why.- Is it visually attractive?Well, as a modal dialog, it's attractive, it's clear and makes you focus on it. but when you realize that is blocking all your desktop until you click accept, or cancel, It becomes annoying.As you can see, I'm talking about modal dialog focusing on its blocking attribute and in particular focusing on the modal password dialog. but I think its applicable to the whole of its uses.At this point I realize that there is not interest from the gnome developers to change this issue, and always says: "Why don't you use keyring (Seahorse) to manage your passwords?" and I ask you: Why can't I decide if using keyring or use another password manager?, why can't I switch an option to make modals passwords non blocking?I think this is not only my opinion, I think there are most people with the same problem... I hope this post makes you think about it...However entertaining this discussion is, it would be helpful if something helpful would come out of it.Suggestions:1) Why is the dialog modal? There is no reason for a password entry screen to be system modal, application modal yes, but system modal?2) If other keyrings would be supported this would be swell. I have to switch between a Nix and a MS system frequently (as I need MS Office) so I use Keepass as keyring. 3) Visually attractive? Pulease. it should work! first! than look at whatever look, blows you skirt. Less ideal:4) Import existing keyrings (kdb(x)) into the keyring.less as it will make a snapshot.Btw the whole Evolution password thing is something else that should (it really should, guys, I mean, come on!) by the Evolution team and is related to gnome but nothing more than that.However entertaining this discussion is, it would be helpful if something helpful would come out of it.Suggestions:1) Why is the dialog modal? There is no reason for a password entry screen to be system modal, application modal yes, but system modal?2) If other keyrings would be supported this would be swell. I have to switch between a Nix and a MS system frequently (as I need MS Office) so I use Keepass as keyring. 3) Visually attractive? Pulease. it should work! first! than look at whatever look, blows you skirt. Less ideal:4) Import existing keyrings (kdb(x)) into the keyring.less as it will make a snapshot.Btw the whole Evolution password thing is something else that should (it really should, guys, I mean, come on!) by the Evolution team and is related to gnome but nothing more than that.Mywas closed as a duplicate of this one, like 8 other bugs. This one exists for 1.5 years for now. Is there any progress?Blocking entire user session by system-wide modal dialog is obviously a mistake and should be fixed or, at least workarounded ASAP.(In reply to)One workaround can be found at, but, if you keep reading, then it may not always be the right thing.***has been marked as a duplicate of this bug. ***I hate to be anal but this is a show stopper for me.Again: if someone could explain compellingly what is the reason behind a system modal password dialog I'm happy to accept the facts of life. If not, why is it system modal. (There seem to be a number of users with the same problem, considering the number of duplicates. Solve this and solve at least a dozen-or-so problems. How's that for incentive?)***has been marked as a duplicate of this bug. ***There are a number reasons to use a modal dialog that I can think of:1. To ensure that the user passes through a required step before proceeding further - imagine cases where an app is literally waiting for a password in order to do something.2. So that important steps are not lost. This follows on from the previous point - if the dialog is floating, it could be placed behind other windows, even though it is blocking an app from doing something.3. To make it clear what owns the dialog - this ensures that it is clear what is generating the dialog in the first place (in this case, it is the OS that is spawning the dialog), as well as what will use the information that is entered. This is particularly important with security information, since it makes you more feel more confident/secure if you are certain about where your password is going.In these terms, we are doing better than in the GNOME 2 days.With regards to this specific bug, having to close the dialog and try again doesn't seem terrible if it is a very infrequent event. The problem is when you have to battle it on a regular basis.I can't help but think that there must be a solution out there, other than returning to the old floating-dialog-with-no-clear-owner model. Could we make Seahorse secure/featureful enough to store these passwords, perhaps with a way to select a stored password from the dialog? Perhaps there could be a way to slide the dialog out of the way, while keeping it partially in view?(In reply to)We have three such modal dialogs.* Network agent. This is for network secrets, like passwords, although there maybe others. This is validly part of the OS.* Keyring agent. This is for arbitrary requests to the Secrets Service. Applications can make these requests.* Polkit agent. This is for PolicyKit authentication requests. Applications can make these requests as well.In two of the three cases, the password request is likely coming from an application, rather than the system. Unfortunately, we don't have enough context in either of these APIs to tell which application the request is coming from. It could be that with application sandboxing, we'll have a non-spoofable way of figuring out the application container and thus the correct .desktop file, so we can show the application in the prompt.But don't think that the only valid case for these password dialogs to show up is by a request from the OS.Allan: we already did the 'I don't see the big deal' go round nearly two years ago, in the first dozen or so comments. Can we please skip doing that rodeo twice?"Could we make Seahorse secure/featureful enough to store these passwords, perhaps with a way to select a stored password from the dialog?"Not unless you're going to build and manage a hosted service backend for it (or at *least* give it support for some kind of remote sync protocol), no. Anyone who's used Lastpass or 1Password is never going to go back to non-synced password storage."3. To make it clear what owns the dialog - this ensures that it is clear whatis generating the dialog in the first place (in this case, it is the OS that isspawning the dialog)"I asked about that on IRC yesterday, and someone said that any running app can quite trivially cause Shell to generate such a dialog. It provides no security."I can't help but think that there must be a solution out there, other than returning to the old floating-dialog-with-no-clear-owner model."It's certainly possible, it's just a question of whether someone wants to do the work. The thing to do would be to build integration with password managers in general in some way; I don't think you're going to get away with only integrating with Seahorse unless you make Seahorse *really* good.(In reply to)Sandboxed applications should never be able to trigger system-modal dialogs. I don't like system-modal dialogs in general where not absolutely required (screen lock), however, for (sandboxed) applications I don't think it's even debatable. A malicious or buggy application could continuously trigger an authentication request and thus render the system unusable. Also, forced interruption when another application is active is already unacceptable.Making the authentication dialog application-modal and showing a notification, if the application is inactive, makes a lot of sense to me.(In reply to)...asked for an explanation for the use of modal dialogs, which I provided. Give me a break.(In reply to)In general, that makes sense if the dialog blocked the application's window, not necessarily if the dialog blocked my entire ability to switch to another window in my desktop environment.But Jasper listed the valid situations inwhen such dialogs are "gnome-shell-wide".I quit using Evolution a year ago because the system-modal password dialog is worse than malware.AFAIK a normal transient+modal GTK dialog does exactly that; it is attached to the window and blocks the application, and the window in the background gets dimmed in quite an obvious way. Why not use that?Applications can wait. Nobody's gonna die.Wouldn't it be better to simply have your system (or GTK) call a gtk_window_set_urgency_hint() on those newly created app-modal password prompts, therefore triggering GNOME Shell to show up a notification saying "hey, this window needs your attention"? I think that would solve the problem.(In reply to)Alan, could you please elaborate why that is not ensured perfectly by application-modal dialogs, instead of system-modal dialogs?Because application-modal dialogs have these benefits over system-modal ones:1. They don't block you from using *any* password manager2. They don't block your other tasks and break your workflow3. They are more secure, because you clearly see what application requests the password. That is not the case for system-modal dialogs - someone on #fedora-desktop recently demonstrated to me and Adam that any process can spawn a system-modal dialog and there's no way to identify who its owner is.4. They are less confusing, because those dialogs can't pop out of nowhere, like in(it's not fixed, appeared again in#6).So, these are the benefits and I don't see any drawbacks. Why exactly does GNOME prefer system-modal to application-modal? I believe this is the major question. I'm sorry if I have overlooked the answer somewhere among all the comments.(In reply to)System-modal dialogs would work a lot better if we only allowed them for the focused app, but unfortunately we cannot know reliably which application requested the dialog. That problem does not magically go away by not using system-modal dialogs - application-modal dialogs are not an option if we don't know the application in the first place. As things stand right now, the only alternative are GNOME2-style dialogs not associated with any application, which have exactly the problems pointed out by Allan in.Can you please expand this? I thought that application-modal dialogs are fully controlled by the applications themselves, therefore no intervention by GNOME is needed. So Evolution and similar GNOME apps could be patched to use application-modal dialogs instead of system-modal, and manually request focus in case they are not currently focused. That (focus requesting) would most probably work just for those applications which implemented it this way, not in general. Is this your point, would you like to somehow detect application-modal dialogs in GNOME Shell and request focus for them automatically? Or would you like to modify all application-modal dialogs' appearance to look like "shell dialogs", and that's not currently possible to achieve? Or was the point something completely different? Thanks for clarification.(In reply to)+1! Personally - I don't see any valid use case (on my desktop) for system-modal dialogs. No application (even not the highly integrated ones like the network manager) should ever block the whole desktop. (But this is an interesting discussion since apparently there are users that like those dialogs…)(In reply to)As I understand it, the system model dialogs pop up if an application needs a system service that requires a password. To take the evolution case as an example, it can use accounts managed by gnome-online-accounts. If it tries to access such an account, it is gnome-online-accounts that wants the user to enter a password. Evolution has no knowledge of this. The same is true for the three cases mentioned in. There, it is the agent that decides to show a dialog (or not if it is not needed).(In reply to)Yes. But the dialogs in question are not opened directly by applications, but by gnome-keyring-daemon and polkitd in response to some DBus requests. We don't have any reliable way to map a DBus address to an application/window, so all we really know is "something asked gnome-keyring-daemon/polkitd for a password/authentification". The fact that in some cases the actual request is not done by any application, but by another background service (evolution-data-server) doesn't make it any easier ...(In reply to)This sounds like an excellent idea.I had a chat with Stef Walters today about which systems are generating the dialogs, and what the plan is for the future. According to Stef, there are four places where these dialogs come from: 1. Network Manager - for wifi/VPN passwords, etc. 2. Polkit - for admin/user passwords to unlock permissions. 3. GNOME Keyring - for unlocking GPG/SSH keys (according to Stef, the keyring doesn't actually throw up generic password dialogs). 4. Gcr - used by Evolution Data Server and GOA-agent to ask for passwords. [1]Stef agrees that shared application passwords don't make sense for sandboxed applications, and there's a plan to enable applications to securely store their own passwords [2] (this needs a developer though). Being able to have passwords encrypted on disk might well help with some of these cases.According to my understanding, 1-3 are system password prompts: 1. It's the OS that handles your networking. It's the OS that needs your password. 2. The OS is guarding access to a restricted ability, and it needs to confirm your identity. 3. The OS is guarding access to your keys, and needs the password to unlock them on a system-wide basis.4 is a bit different. You could argue that both Evolution Data Server and GOA are OS subsystems, and are therefore appropriate to use a system modal dialog. However, it really depends on how these dialogs are being used - a modal dialog of any kind should never pop up unexpectedly. I'm rather sceptical about the need for EDS or GOA to use these password dialogs.Stef also suggested the possibility of re-examining 3. The GPG and SSH agents need some reworking anyway, apparently.I realise that this information doesn't necessary identify a fix for the bug - just wanted to post my research so far.[1]#[2][from slide 37]FWIW, case #3 is the one I run into all the time that makes me want to throw my laptop through a window.What if your Wi-Fi password is in a password manager? Or, as I encountered at GUADEC, in an email I received? Cancelling and restarting was a bit annoying.I would propose a new widget for gtk+, an authorisation dialog and a state bit in all gtk+ widgets signaling if the are running with root rights (to disable dangerous functionality, like preview of pictures with root rights; also for not polluting the root home folder with config files).The authorisation dialog should lock up only the associated window and only if in the keyring is a wrong or no password.Also it should show the reason why it is shown (e.g. wrong password, no password in keyring, no response) and for what functionality it is shown (set by the application itself)disadvantage: how should menu entries be handled?Going through the dupes for this bug, to see what is causing the most annoyance:- not actually a shell issue?- not clear. Possibly GOA?- GPG (therefore GNOME keyring).- seems to be a spontaneous request, probably Evolution Data Server.- Evolution.- Evolution/EDS.- EDS.- EDS.- GParted (probably a Polkit request).I suspect the numbers are somewhat skewed in 'favour' of Evolution by the bug that seems to cause it to forget/lose the authentication for Google accounts periodically, FWIW.Another case: The system is looking for a passphrase to unlock a ring/private-key. (Keyrings and ssh keys both apply here). The passphrase required is stored in a password manager. You must be able to unfocus the system-modal prompt in order to access the password manager, in order to satisfy what the system-modal prompt is looking for. Seems to me that's a pretty standard deadlock issue, except in UI multitasking instead of multi-threaded application programming.I've been looking into the possibility of using a GTK+ dialog for SSH/GPG passphrase requests, but it seems difficult/impossible to make such dialogs modal to the window that made the request. Any ideas here would be welcome.(In reply to)If there even is a window - in case of GPG, the request could come from a CLI utility running in some terminal (or even the alt-f2 run dialog) ...Would it make sense to convert all system-modal dialogs to notification bubbles sliding up from the bottom edge? There would be a text field asking for the password. I believe this approach used to be in place when you connected an encrypted external drive, but I'm not sure whether it's still used or not.As for EDS and GOA background processes, it seems to me that the least confusing approach would be to spawn a system notification saying "Your Google password is invalid [Fix password]" which would open Evolution/GOA configuration dialog where you would provide the password the usual way. Which seems to be along the lines of what Allan says, IIUIC - the system password dialogs should never appear out of the blue, but rather you should be notified that something is wrong and you should be directed to the correct place to fix it. Therefore you would know which password you're giving (with Google's application passwords, you can have different passwords for different applications) to which application (you see it in front of you) and why.***has been marked as a duplicate of this bug. ***(In reply to)My bug report was not only complaining about the modal dialogue, it was also noting that the dialogue provides no information about which application is requesting the password and for which account. As I wrote in my report, the only hint the prompt provides is the e-mail address associated with the account, but in my case I count about five different accounts with whom my e-mail is associated, so it is total guesswork which password I am supposed to enter.(BTW: I think that ultimately gnome-shell was asking for my facebook password, but since something about facebook and G-O-A is b0rken, see, even entering the correct password did not help, so I could enter passwords all day and not get the slightest hint or idea what is causing all these prompts and what to do about them. This really needs to be settled.I had three of these pop up during a presentation, it was rather embarrassing. Two came from GOA (I think), one from NetworkManager. Kamil Páral's suggestion in #76 would be a huge improvement (even if all the related problems remained unfixed).Marking as a duplicate of the older.The "Evolution makes Google accounts pop up passwords" problem was fixed in.*** This bug has been marked as a duplicate of***(In reply to)I'm running evolution-data-server 3.12.7.1 and I still get several of these popups per day.I really don't like that this bug was marked as a duplicate and closed. This bug actually has some useful information, use-case examples proving the problem is serious, and even suggestions about improvements.But 660293 is a wasteland of shrugs and "oh well nothing to be done". Plus, that bug is specifically about NetworkManager, which is a relatively straightforward case, while this bug is about all sorts of modal password prompts.Personally I don't care at all about NetworkManager, my problem is Evolution. It wants to get passwords to my email accounts and calendars, and it asks for these passwords when it tries to connect to the remote accounts which happens completely asynchronously. Of course, all my accounts use randomized, long passwords. Basically there's no way for me to get my password when Evolution asks me for it, so I just have to hit cancel. I've not been able to connect to my calendar for months and months because of this.If anything, I thinkshould be closed as a duplicate of THIS bug.It's sad that there seems to be no interest in solving this problem. "Distraction-free computing", remember? The multiple system-modal dialogs I had to deal with every day were the most distracting and intrusive thing I've ever encountered in a DE.My first workaround was to quit using Evolution and disable all online accounts. Then I realized that these were really the main reason I'd still been using Gnome in the first place. So my current workaround is to use Cinnamon and Thunderbird instead. So long.As several reporters suggested, I'm un-duping this. I explicitly acknowledged 660293 and explained why I was filing a new bug when reporting this:"This is similar to, but it'sthe general case - this can happen with _any_ case of the Shell password entrydialog, it's not limited to that specific NM case."#660293 is still set as a report specific to NM.(In reply to)Fixed for evolution 3.13.90, more info at [1].[1]moving off the tracker***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***(In reply to Milan Crha from)Modal password boxes preventing users from looking up passwords isn't just a problem for Evolution, though. Try connecting to an SFTP account in Nautilus -- it's the same situation. The bugs which have been marked as duplicates of this one touch on various applications, but they share a problem with the the modal password popup.And this is still a problem in GNOME 3.18.***has been marked as a duplicate of this bug. ***Hi, I have the same problem, but worse. Not only does the SSH password prompt prevent me from using my password manager, but it also *prevents me from pasting*. This means that even if I copy my password before getting the password prompt, I can't use it. AT ALL.Even if you consider the original problem of this bug as a minor inconvenience (which it is not), this is a real blocking bug that prevents users from using password managers, and forces them to use the antiquated strategy of remembering all their passwords, which leads to significantly weaker security.Given that using a password manager to improve security is more and more recommended, the fact that this bug is still open after ALMOST FOUR YEARS is just ridiculous. Put this prompt in a notification, so that this no more annoys users while you're thinking of a better solution.That's a different bug. Are you using Wayland?How about making the password box always on top, but still have it possible to focus different applications?	93.0	id=773666	13	False	False	slomo	1
id=773666	REOPENED	GStreamer	gstreamer (core)	git master	Other Linux	Normal normal	GStreamer Maintainers	2016-10-29 10:25 UTC by	Tim-Philipp Müller	2017-02-18 18:20 UTC (	1 user	Createdbaseparse: fix draining with less data than min frame size availableCame across this when debugging some issues with rawvideoparse in a not-negotiated flow error scenario:gst-launch-1.0 fakesrc sizetype=random ! queue ! rawvideoparse format=rgb ! appsink caps=video/x-raw,format=I420First it would not return the flow error properly. After fixing that it would hit an assert in rawvideoparsegstrawbaseparse.c:519:gst_raw_base_parse_handle_frame: assertion failed: (in_size >= frame_size)Reason is that basesrc sends an EOS in response to the flow error, which makes basesrc drain, and the draining code passes less than the configured minimum framesize to the rawvideoparse subclass, which is unexpected.Not tested the patch a lot, so saving it for now.	Createdtests: rawvideoparse: add test for flow error handlingComment onbaseparse: fix draining with less data than min frame size availablepushed as- baseparse: fix draining with less data than min frame size availablepushed as- tests: rawvideoparse: add test for flow error handlingThis breaks the aacparse and amrparse unit testsWill have a look. Told you I didn't test it beyond rawparse ;)I think this has to be come a setting. Various audio parsers assume currently to get any data left at EOS and pass them onwards. Reverting for now and then we can add a property :)So have to add a setting here and use it in all the parsers where it makes sense. However I'm not sure if it makes sense how aacparse for example is using it. It will output incomplete AAC frames.commit 63e280df22073f06dc35a5cab03dad5d509eca71Author: Sebastian Dröge <>Date: Sat Feb 18 20:18:50 2017 +0200 rawbaseparse: Drop incomplete frames at EOS SeeThis would ideally be solved in baseparse but that requires further thought at this point, and in the meantime it would be good to have rawbaseparse not assert on this but handle it gracefully instead.	8.0	id=622991	32	False	False	chpe	1
id=622991	REOPENED	glib	general	2.29.x	Other All	Normal normal		2010-06-28 01:57 UTC by	Javier Jardón (IRC: jjardon)	2016-03-14 02:07 UTC (	11 users	Patch following	CreatedUse upstream gettextI can't fully test the patch as make distcheck currently fails in /gsettings/l10n testCreatedUse upstream gettext instead the Glib one.v2Updated patch against current masterCreatedUse upstream gettext instead the Glib one.v3Updated patch against current masterCreatedUse upstream gettext instead the Glib one.v4Updated patch agains current masterI don't want to use upstream gettext as long as it causes 'unclean tree' disease.CreatedUse upstream gettext instead the Glib one.v5New patch, now with a solution for the 'unclean tree' disease.I'm not a big fan of this gross hack... What advantages do we gain by switching to 'upstream' gettext, anyway?CreatedUse upstream gettext instead the Glib one.v6This is the good one.Advantages? Maybe use a po/Makefile.in.in file that is actively maintained by the gettext developers for example.Hi!Only to keep the people up-to-date in case anyone is interested:This was the proposal from gettext developers:BTW, now reading the previous comment I realize I sounded a bit harsh, sorry about that, It was not my intention!***has been marked as a duplicate of this bug. ***FYIW, the new gettext 0.19 finally support adjust the behavior of updating PO files on demand:"* The po/Makevars file has a couple of new options PO_DEPENDS_ON_POT and DIST_DEPENDS_ON_UPDATE_PO, that can be used to adjust the behavior of updating PO files on demand."I will update the previous patch as soon as possible to use the new functionalityCreatedUse upstream gettext instead the Glib one.v7This patch uses upstream gettext but avoid the 'unclean tree' disease using the new gettext options: PO_DEPENDS_ON_POT and DIST_DEPENDS_ON_UPDATE_POCreatedUse upstream gettext.v8Review of:::: autogen.sh@@ +31,1 @@ gtkdocize --copy || exit 1So we don't need gettexttize at all anymore ?::: configure.ac@@ +188,2 @@ # i18n stuff+AM_GNU_GETTEXT_VERSION([0.19.6])0.19.6 is very recent (September 2015)::: po/Makevars@@ +52,3 @@+# package uses functions taking also a message context, like pgettext(), or+# if in $(XGETTEXT_OPTIONS) you define keywords with a context argument.+USE_MSGCTXT = noThis is wrong - glib/gdatetime.c uses C_()Review of:::: autogen.sh@@ +31,1 @@ gtkdocize --copy || exit 1So we don't need gettexttize at all anymore ?::: configure.ac@@ +188,2 @@ # i18n stuff+AM_GNU_GETTEXT_VERSION([0.19.6])0.19.6 is very recent (September 2015)::: po/Makevars@@ +52,3 @@+# package uses functions taking also a message context, like pgettext(), or+# if in $(XGETTEXT_OPTIONS) you define keywords with a context argument.+USE_MSGCTXT = noThis is wrong - glib/gdatetime.c uses C_()(In reply to Matthias Clasen from)No, autoreconf will call 'autopoint' if needed to generate the required files (po/Makefile.in.in and others)Agree, only 0.19.2 is needed; Sorry, somehow I managed to send a patch for a different module, will attach the correct one nextCorrectedCreatedUse upstream gettext.v9Review of:I'm not super happy that this adds more shell and m4 crap (config.rpath and nls.m4 and its ilk), but what can you do...Review of:Thanks for the review; committed in e5c752371c7fb1343eff27b5f1d0bcbef4e333b9breaks glib --enable-gtk-doc build on FreeBSD:gmake[4]: Entering directory '/home/lantw44/gnome/source/glib/docs/reference/gobject' DOC Scanning header files DOC Introspecting gobjects../../../glib/.libs/libglib-2.0.so: undefined reference to `libintl_dngettext'../../../glib/.libs/libglib-2.0.so: undefined reference to `libintl_textdomain'../../../glib/.libs/libglib-2.0.so: undefined reference to `libintl_dcgettext'../../../glib/.libs/libglib-2.0.so: undefined reference to `libintl_bindtextdomain'../../../glib/.libs/libglib-2.0.so: undefined reference to `libintl_dgettext'../../../glib/.libs/libglib-2.0.so: undefined reference to `libintl_gettext'clang: error: linker command failed with exit code 1 (use -v to see invocation)Linking of scanner failed: Makefile:861: recipe for target 'scan-build.stamp' failedgmake[4]: *** [scan-build.stamp] Error 1libglib-2.0.so contains undefined symbols from libintl, but it doesn't list libintl.so.8 in NEEDED.I've tagged glib in gnome-continuous:It looks like we stopped installing glib-gettextize or so?Yeah, looks like we need at least this hunk:- if test "$(PACKAGE)" = "glib"; then \- $(MKINSTALLDIRS) $(DESTDIR)$(gettextsrcdir); \- $(INSTALL_DATA) $(srcdir)/Makefile.in.in \- $(DESTDIR)$(gettextsrcdir)/Makefile.in.in; \- else \(In reply to Colin Walters from)yes, seems so:seems the po/Makefile.in.in that used to be part of glib has a modification to install stuff in /usr/share/glib-2.0/gettext:. Compare with upstream gettext:So I think glib will no be able to use upstream gettext because packages that are still using the AM_GLIB_GNU_GETTEXT macro in configure.ac will expect stuff in /usr/share/glib-2.0/gettext (is hardcoded in)Maybe we could fix this including the po/Makefile.in.in file in the glib tree and modifying it to install the files in /usr/share/glib-2.0/gettext as well, but maybe the best solution is to revert this for now. Thoughts?(In reply to Javier Jardón (IRC: jjardon) from)If we're not going to fix this today, I think revert and try again later is the right thing to do.(In reply to Colin Walters from)Keeping po/Makefile.in.in in tree and modify it is not an option because it gets overwrite by autopoint. In lack of ideas for a solution I decided to revert the patch in commit	25.0	id=763179	8	False	False	stanciumarius94	1
id=763179	REOPENED	gnome-maps	map view	git master	Other Linux	Normal normal		2016-03-06 18:11 UTC by	Marius Stanciu	2016-03-14 11:47 UTC (	3 users	Hi, new around here!Popping any modal dialog ( then closing it ) while keeping the mouse inside the main window makes the map view ignore all the mouse events ( such as clicks, drags, right-click context menus etc ).Here's a gif depicting it on my (Fedora) system:After a lot of trial and error and research I figured out it was a Clutter bug ( might report it later on their bug thingie), specifically, the interaction between Clutter and Gdk.I have found a workaround/fix by changing the clutter's windowing backend to X11(the default is Gdk ) but I am not really sure about the implications of such a change ( although everything seems to be fine on my machine ).I will attach a patch containing my hotfix.	Created[clutter-backend] Modal dialogs break the mapView mouse eventsThx! This is known! I had a similar fix commited but reverted it becouse it will break wayland.*** This bug has been marked as a duplicate of***Had a look at the bug you mentioned and I can't see how they are duplicates. That bug is about map view not redrawing properly after popovers so visual artifacts remain. This one is about map view freezing after popping the "About" dialog ( and other Modal dialogs ), more specifically not responding to mouse events. Coincidentally, the proposed fix seems to solve both of them. Hope i'm not missing something!(In reply to Marius Stanciu from)Both are caused by running the GDK backend of clutter. The fix will make wayland crash since x11 is not a possible backend there. Re-opening but linking them.Either fixes needs to go into the GDK backend or we need a way of setting X11 backend on X11 but not on wayland.***has been marked as a duplicate of this bug. ***The fix atpractically made the dialog unmodal. ( look:)Should I apply the same fix/workaround to the other dialogs that freeze the mapView? ( About and Shortcuts dialogs )This should only be a temporary fix until Clutter's GDK back-end is fixed. ( that's the real cause of both this bug and)	6.0	id=751477	7	False	False	swilmet	1
id=751477	REOPENED	gedit	Plugins	3.10.x	Other Linux	Normal normal	Gedit maintainers	2015-06-25 06:15 UTC by	joe	2016-09-12 21:42 UTC (	1 user	The shortcut Ctrl+S does not trigger my script defined in the external tool plugin after restarting gedit. I first have to assign another shortcut and then reassign Ctrl+S to make it work. This was reproducable everytime I tried. I deactivated all third-party plugins, but the behaviour stays the same.	Ctrl+S is already used by gedit for the file saving.Does the bug occur with a keyboard shortcut not used by gedit?Also, the 3.10 version is old and no longer supported. Does the bug occur with a recent version of gedit (currently 3.14 or 3.16)?Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!I would like to extend the functionality of the Ctrl+s shortcut of gedit.I updated to the new versions 3.18.3 and 3.20.2, but now using Ctrl+s as a shortcut for an external tool does not work at all. Pressing the shortcut has no effect whatsoever.Should I add a feature request? Would you consider to reenable Ctrl+s as a shortcut?	3.0	id=308126	16	False	False	leio	1
id=308126	REOPENED	pango	general	unspecified	Other All	Normal normal		2005-06-17 21:29 UTC by	Eduardo M Kalinowski	2007-03-31 21:41 UTC (	4 users	Please describe the problem:In a GtkTextView in GTK_WRAP_WORD_CHAR mode, contained in a GtkScrolledWindow,if there is a line with many "?" characters in sequence, with no space betweenthem, so many that the line does not fit the width, the line is not broken andthe horizontal scroll bar must be used to view the entire line.Steps to reproduce:1. I'll attach a small program showing the bug.Actual results:The line is not wrapped, being wider than the GtkTextView width.Expected results:The line should be broken even in the middle of the "word", I believe theGTK_WRAP_WORD_CHAR mode means that lines will be broken even inside words ifnecessary, so that horizontal scrolling is never necessary.Does this happen every time?Yes.Other information:	CreatedThis small program shows the bug.Confirming on pango/gtk+ CVS HEAD.I'm experiencing this problem in one of my applications as well. Pretty annoying if you want to be ensured that no horizontal scrollbar appears, but it still does.I suspect the big row of question marks (or period marks, or quite some others) is considered one whole grapheme by pango?*** This bug has been marked as a duplicate of***To me, this isn't the same issue as 131625; 131625 is mostly aboutwhite space and contains considerably discussion of the WRAP_WORDcase as well.This bug is more simple ... the question is; does WRAP_CHAR mean: A) Break anywhereOr B) Allow breaks inside words (in other words, use Asian-style line breaking for all languages.)Apparently it means B), but I'm not sure when that's useful. Ifit is useful, then we might want WRAP_ANYWHERE or something likethat as an API addition.Owen hit the core of my problem with his question. I'd like to add a specific use-case concerning the chosen answer.I'm attaching my test-case program and a diagram of my bug demonstrated with the test-case program.Compile the test-case program with: gcc `pkg-config --cflags --libs gtk+-2.0` main.cThe test-case program uses a monospace font with PANGO_WRAP_CHAR to layout the entire paragraph of text.Steps to recreate bug: 1. This bug is easily produced using the first line of text. Any line lower makes this more difficult. 2. Resize the window so the first line ends with a period. Many other punctuation marks reproduce this bug as well, but not all. 3. Now, resize the window so the period's checker cell is partially obscured. This will force the period to the next line. The bug occurs when the period drags the single character before it to the next line, leaving an empty space at the end of the previous line.CreatedDiagram of character wrap bugDiagram demonstrates bug using subsequently attached test-case program.CreatedTest-case programTest-case program of PANGO_WRAP_CHAR bug.Moving to Pango	8.0	id=130081	15	False	False	bdejean	1
id=705910	REOPENED	doxygen	general	1.8.6-GIT	Other All	Normal normal	Dimitri van Heesch	2013-08-13 13:24 UTC by	Suzumizaki-Kimitaka	2013-12-27 05:41 UTC (	0 users	Createdfix indexing and built-in searching for non ASCII identifiersI made the patch already, please just apply it.The details and notes about regression test are below.Details:a1) Because the indices make groups against first byte(octet) of UTF-8, the entries are wrong grouped when the names start with non ASCII characters. Like U+0080 - U+00BF go to the group 0xC2 and U+0800 - U+0FFF go to the group 0xE0. Ofcourse they should go same as ASCII characters, like 'A' to 'A', 'B' to 'B'.a2) The appearance of index group header "- A -", "- B -", "- C -", ... are correctly shown with ASCII ONLY. For non ASCII characters, all headers are shown like "- <?> -". Because 0xC0-0xFF that are NOT followed by 0x80-0xBF are all invalid sequence as UTF-8. b1) Builtin javascript search doesn't work with non-ASCII entries. The entries on database are escaped as UTF-8, but the entered words from the search box are escaped as (broken) UTF-16. For now, Javascript/ECMAscript can treat unicode directly. We don't have to escape but except to name the files in the "search" folder. Their name has the hexadecimal tail that represents the common first character of the entries. My patch makes them depends on unicode codepoints instead of UTF-8 header byte.b2) Built-in PHP search deletes non-ASCII characters in searchbox every time.To fix these problems,1) Some new functions added to utils.h/cpp.2) For indexing, index.cpp is fixed.3) For searching, search_js.h, search.js, search_functions.php, search_functions_php.h and searchindex.cpp are fixed.Note for regression test on Microsoft Windows:Sorry to say about my patch posted before () didn't pass the regression test.I could not run the tests before, because I couldn't run xmllint easily.The binary distribution of xmllint doesn't work, it requires old (and looks 'correct') version of iconv.dll. I have to build it from source code of libxml2. Even now I can only build some of libxml2 but I can get xmllint.exe for now.Today Git SHA-1: 83fc120e5575446b1161e9ffb8168d55c423f7ac fails test 12. And my patch here doesn't fail another tests I believe.Regards,Suzumizaki-Kimitaka	Thanks for your patch, but I think it requires more thought.I now see some loops like these in the code: for (p=0;p<=MAX_UNICODE_CODEPOINT;p++)where MAX_UNICODE_CODEPOINT is 0x10FFFFPerformance wise, this is not good, especially since in 99,9% of the iterations nothing will be done other than checking if something needs to be done. If you already use a hash/map then it is better to just iterate over it.Do you want to make an improved patch? or do you want me to improve it myself?I'm sorry but I would like you to improve it, because I don't know which qtools class I should use. As you say, over some of the cases we should simply use iterator, but the others we seem to need to ensure iterating by codepoint-order.Regards,Suzumizaki-KimitakaHello, have you started to improve the loop problem to iterators?If not yet, I'll try to.Tell me I should try or just wait your work.(I want to make the patch to another issue, but before that, it seems better to resolve this problem first.)Regards,Suzumizaki-KimitakaCreatedThe updated and fixed patchHello.I found the bug likewith previous patch, andI have fixed the iterator problem blamed here.I made the new patch against SHA-1: 1e373422387e8c1131f887efb47cf3da6459e2ac.Previous one is expired.Please apply the new one.Regards,Suzumizaki-KimitakaThanks, I've just pushed a somewhat reworked version of your patch to GitHub.CreatedThe html documents pair, to show official fix (on the git) cannot solve the problem.Sorry to say, Dimitri, your workaround (as you said at) breaks some functionalities.Please read the html document contained in the attachment with this comment, and tell me how do you plan to do.The failed_html is made on your work, and the correct_html is on mine.Regards,Suzumizaki-KimitakaCreatedThe new patch against current origin/HEADOkay, I made a new patch. You have another choice now.The new patch targets SHA-1: 74815268dd88f2cfb4473462cef3c33eebd5516aNote that I found one more bug and also fixed with this patch.The doxygen on current origin/HEAD distinguish upper/lowercase of identifiers.I'll make new sample project zip like I posted before.Regards,Suzumizaki-KimitakaCreatedUpdate sample projectThe update version of html documents pair, to show official fix (on the git) cannot solve the problem(seeand 7).This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.8.6. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional information that you think can be relevant (preferrably in the form of a self-contained example).CreatedUpdated patch for 1.8.6 releaseAs I told before, the work against this issue is not finished.(Note again this is NOT my fault! The rework told atIS failed.)Here's updated patch, but in fact, only the line of the target files are fixed.Regards,Suzumizaki-Kimitaka	10.0	id=634962	8	False	False	dimitri	1
id=533492	REOPENED	gtk+	Widget: GtkMenu	2.16.x	Other All	Normal normal		2008-05-16 21:19 UTC by	Philippe Chaintreuil	2014-07-24 11:05 UTC (	4 users	Please describe the problem:The 'activate' signal will not emit on mouse click of a menu item in a submenu in PyGTK.Pressing ENTER while the submenu is highlighted *will* activate the menuitem.Clicking on the parent menu item of the sub menu twice (to make the submenu disappear and reappear) will make the mouse click of the submenu's menu item emit the activate signal.Steps to reproduce:See Attached examples.Actual results:Expected results:Does this happen every time?Yes.Other information:	CreatedPython example showing the issue.CreatedC example which exhibits the bug.The Python code is commented better than the C code, I started getting sick of writing this example over and over again.I hope the C code shows that this must be a PyGTK problem.Additionally there appear to be other people that have seen this in the past:Someone has also pointed out that connecting to the 'button-press-event' does not exhibit this bug behavior. (ie, that supplies a work-around if you're experiencing this issue and no one has fixed this bug yet.)Hi Philippe,the python code works properly here (ubuntu Hardy)What version of Python, PyGTK, & GTK+ are you running on Hardy?I'm running Gentoo with Python 2.4.4, PyGTK 2.12.0, & GTK+ 2.12.8.I can also reproduce it on a CentOS 4.6 box (have to comment out the label.set_width_chars(40) line). Python 2.3.4, PyGTK 2.4.0, & GTK+ 2.4.13.Additionally able to reproduce on Fedora Core 8. Python 2.5.1, PyGTK 2.12.0, & GTK+ 2.12.5.I just downloaded and tried the python script on Ubuntu on the LiveCD.It was random whether it happened or not, but of the ~40 times I tried, it only printed like it was supposed to about 5 times. I couldn't figure out what I was doing different those times.So, Gian, I'd urge you to try it again and even if it works right off for you, try a handful more times to make sure you can't reproduce it. And make sure you're not clicking on the "parent" item when you're on your way to the "child" item.Philippe,I've experimented a bit on Ubuntu Hardy, Fedora 9 and Windows.They all behave the same, the problem is not random, if you click with the "left" mouse button on the window it works properly, if you click on the window with the "right" mouse button, Child is never printed on screen.Okay, yes, I see that left-click vs. right-click behavior here too on my original Gentoo box. Sorry, popup == right-click is so ingrained in my head that I never even thought that the text didn't specify it.So you are able to reproduce the bug now?I can still reproduce the bug with in Ubuntu Jaunty pygtk 2.15.2-0ubuntu1.Finally, the bug seems to be solved in Ubuntu Karmic, pygtk 2.16.0 (tried ~50 times without being able to reproduce).I'm closing the bug as fixed, but please reopen it if you discover I was just lucky.I still see this on PyGTK 2.16.0 (GTK 2.16.6 & Python 2.6.2) on Gentoo. Pietro, are you **RIGHT-CLICKING** to get the initial pop-up dialog? (See.)CreatedUpdated Python example showing the issue (warns against left-clicking and shows version info.)Here, I've updated the test example to warn on the console when you left-click (since that seems to be common), it also explicitly says you should right-click. I also output the GTK, PyGTK, & Python versions so I don't have to hunt around for them. ;)As a footnote, the bug also happens if you middle-click.I was plain wrong, thanks for reopening.Okay, I did a little more digging and have a clarification.Basically, if you click with any button to bring up the initial popup menu, going to child and clicking with any button other than the initial button will not be registered. (Unless you make the child menu disappear and reappear.)So it's not a left-click vs right-click thing, it's a initial-click-button != child-click-button thing.Can someone confirm if the C test-app I posted actually *does* or *does not* exhibit the bug?Compilation line: gcc -o test `pkg-config --cflags --libs gtk+-2.0` test.cRun: ./testIt *does*!For sake of clarity:./textright-clickcursor on "Parent"click on "Child"result: NO message in console.So it's not a pygtk problem!Thanks Pietro. That's what I just found myself.It just goes to show, never trust the bug submitter. ;)I must have done the whole left-click thing that you and Gian did before when I was testing my own C version.I feel like such a fool![Moving to GTK.]P.S. Thanks to all the PyGTK guys! Sorry about making you tear your hair out about this one.Howdy GTK fellas,This is a bug that I originally though was in PyGTK, but later found was actually in GTK (after first thinking it was not in GTK).You start with a popup menu with a sub-menu and a child item in it. You display on mouse button *release* (button == N). If you try to select the child submenu item with any mouse button other than N, the activation will not happen.So if you right-click to get the pop-up menu, and then attempt to left-click on the child submenu item, nothing will happen.If you explicitly hide and reshow the child menu by interacting with it's menu item in the original popup, everything will work as expected.If you popup the menu on mouse button press, this bug does not happen.There are both Python and C examples that illustrate the bug attached.Seems to be an old bug, but still presenting itself in 2014... I am experiencing it with indicator menus in Ubuntu 14.04. The bug presents itself even in official indicators like the network manager.We have: "Indicator menu / Submenu / Submenu item".These combinations work: "Left-click indicator / Just hover to open submenu / Left-click submenu item", "Right-click indicator/ hover to open submenu / right-click submenu item", "Any-click indicator / Explicitly any-click to open submenu / Any-click submenu item" work.Anything else doesn't work, for example: "Left-click indicator / Just hover to open submenu / Right-click submenu item".	22.0	id=775770	6	False	False	mcatanzaro	1
id=754115	REOPENED	gtk+	Debugging	unspecified	Other All	Normal normal		2015-08-26 12:19 UTC by	Chris Morgan	2015-09-14 20:03 UTC (	3 users	CreatedPatch changing the enable-inspector-keybinding default to falseBy default, the enable-inspector-keybinding key in the org.gtk.Settings.Debug schema is set to true. This hijacks Ctrl+Shift+D and Ctrl+Shift+I which is an extremely bad idea. In Firefox Nightly, for example, it means that Ctrl+Shift+I, rather than just opening the Firefox developer tools, opens the GTK+ Inspector as well, which *no one* (for some impressively-close-to-zero value of “no one”) is going to care about. In Inkscape, should it upgrade from GTK+ 2 to 3, I imagine it would mean that Ctrl+Shift+D would start opening a GTK+ Inspector as well as or instead of the Document Settings panel. Again, *no one* (for some not-quite-zero-but-oh-so-all-but value of “no one”) is going to care about that.If someone is wanting to develop and debug GTK applications, let them enable the inspector keybindings themselves, or add "inspect" to the GTK_DEBUG environment variable. Normal people should not have two good keyboard shortcuts which are used by some programs stolen away from them. GTK+ is not just a tool for GTK+ developers (I hope)—Real People want to use GTK+ applications too, and Real People will be utterly confused by things like the GTK+ Inspector, and confusion is bad. The default value of enable-inspector-keybinding should be changed to false. A default of true is a default of confusion, even more angry users, sorrow and poor usability.Workaround:$ gsettings set org.gtk.Settings.Debug enable-inspector-keybinding falseI believe this would apply to 3.14.x and later.	It doesn't here, in this firefox 40.0 gtk3 build. If your nightly build behaves differently, then something must have changed for the worse in firefox, and you should go and complain to them.@Matthias Clasen: it depends slightly on what is focused when you press it. It’s true of all applications, however; I maintain that such a debug keyboard shortcut simply shouldn’t exist for normal people, let alone *two*.(In reply to Chris Morgan from)Not exactly a convincing argument, considering that you complain about exactly such a debug keyboard shortcut not working (firefox's).It’s a matter of how many people will want to do a thing. GTK+ application debugging is going to be comparatively rare, while web debugging is somewhat more useful and common, though still somewhat restricted in its audience. There’s also the difference in layer; Firefox is an application, while GTK+ is the framework. The framework should not tend to reserve key bindings beyond perhaps standard ones like Ctrl+Q. (I have tended to feel that the keyboard shortcuts should not be enabled in Firefox until someone has enabled it, but as I’ve indicated, I believe it’s a more reasonable thing there than in GTK+. And “they do it, so why shouldn’t we?” is typically a fairly weak argument in itself.)Consider also my example of things like Inkscape. Ctrl+Shift+I and Ctrl+Shift+D are not *enormously* common keyboard shortcuts, but they are both ones which are used, and ones which people may accidentally press, and having such a developer-oriented thing shown to the hapless, unsuspecting user is inherently undesirable.commit 9326f1a57c52cc991b5756d1811155a25fe6623cAuthor: Matthias Clasen <>Date: Mon Aug 31 11:08:25 2015 -0400 Turn off inspector keybindings by default This is a 'developer mode' feature, and it can and does interfere with preexisting key bindings in some applications, so keep it off by default in stable releases, at least.The inspector is an important feature to show developers. It should be possible for any developer potentially using GTK to open the inspector without first toggling weird settings.In recent times the inspector has in fact been one of the main selling points for why GTK is awesome - many people have used it in forums, on IRC or in real life - and so from a marketing perspective turning off the inspector is one of the worst things we can do if we want to attract new developers.Inkscape would also work fine because Inkscape would register another Ctrl-Shift-D shortcut that would override GTK's. You can easily see that in gnome-terminal, which does do that already. (I just closed my tab, dammit! Now my history is gone!)And I certainly don't buy the differentiation between framework and application because Firefox is a framework for web applications that has happily hijacked all sorts of keybindings, including the developer console.I don't care if it's a keybinding or different way (like a button in the about box or an entry in the window decorations right-click menu) to open the inspector, but I do care ver much that it is available in a running GTK application by default (ie without having to toggle settings elsewhere).I definitely can see the argument for both.Occasionally I do outreach at universities and meetups and have the unique pleasure of introducing people to GNOME. These are mostly people that have an interest towards becoming a developer or computer engineer of some sort.Showing the inspector is one of the most captivating parts of our interactions. Peoples eyes light up when they have the ability to "dive into the system" and learn how, what they feel is the operating system, works.I do think it is useful to be able to trigger this feature without having to remember GTK_DEBUG=inspector and relaunch the program.On the other hand, I see the desired to not have it conflict with, say FireFox.Can we add API to disable internal keybindings? And then applications using Gtk3 for theming, such as FireFox and perhaps Libre Office can just call that function to disable it?	7.0	id=533492	23	False	False	gianmt	1
id=130504	REOPENED	conglomerate	Code	CVS	Other All	Normal normal	conglomerate list	2004-01-04 10:26 UTC by	Geert Stappers	2004-12-22 21:47 UTC (	0 users	The "Tools" function "Clean the XML source"changes '&quot;' into '"',but it should not touch such special codes.	I would like to see is in 0.8.0, the version for the large audience.It works for me. Please can you isolate a case where it fails andattach the XML file to this bug?Createdreduced version of the FAQ&amp; &lt; and &gt; work fine.&quot; becomes "(I curious how bugzilla handles the above)	4.0	id=754115	7	False	False	mclasen	1
id=634962	REOPENED	doxygen	general	1.7.2	Other Windows	Normal normal	Dimitri van Heesch	2010-11-16 01:59 UTC by	Albert Castillo	2013-08-24 13:56 UTC (	2 users	CreatedDoxygen configuration fileUsing Doxygen for Windows: v1.7.2Windows XP, SP3I have a source file which includes these files (excerpt from the included and source files in the generated documentation):00036 #include "../hw_ints.h"00037 #include "../hw_memmap.h"00038 #include "../hw_nvic.h"00039 #include "../hw_sysctl.h"00040 #include "../hw_types.h"00041 #include "cpu.h"00042 #include "debug.h"00043 #include "interrupt.h"00044 #include "sysctl.h"Problem: For lines #41-44, the file names are actually hotlinks in the HTML files so that I can just click on them to go to the source code. But, for the included files which start with "../", the file names are not hotlinked. I cannot click on the file name to go to the source file.In the actual documentation, the include files which start with "../" are correctly parsed and documented though. Just the hot links to these files does not work. These hot links are great and save time moving around the source code. Please fix this as it is an important and useful feature....	Confirmed. Should be fixed in the next subversion update.This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.7.3. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional informationthat you think can be relevant.In current Version 1.7.6.1 the bug is present again.CreatedExample source code showing the problemThe problem, non hyperlinked ../hw_ints.h in source code, is still present.The problem can be seen in the source code of file s1.c.Tested the following versions:1.7.2, 1.7.4, 1.7.6.1 and 1.8.5 problem present1.7.3 problem not present	4.0	id=130504	3	False	False	stappers	1
id=707053	REOPENED	rygel	librygel-renderer	git master	Other Linux	Normal normal		2013-08-29 14:18 UTC by	Jens Georg	2013-10-29 15:22 UTC (	0 users	The function call and the state variable return different values.	This seems to be related to issues with LPCM or JPEG rendering, works fine when renderer is in "video-only" modeFixed by*** This bug has been marked as a duplicate of***No, this is something different, it's still broken with images.Seems to work with master	4.0	id=707053	4	False	False	mail	1
id=775770	REOPENED	jhbuild	general	unspecified	Other Linux	Normal normal	Jhbuild maintainers	2016-12-07 19:56 UTC by	Philip Chimento	2016-12-08 20:30 UTC (	2 users	I have to include the following line in my .jhbuildrc if I want any GIO modules installed by code under JHbuild: os.environ['GIO_EXTRA_MODULES'] = os.path.join(prefix, 'lib', 'gio', 'modules')I'm not sure what standard components this affects but I think glib-networking might be one thing.	Hmmmm, is it a macOS problem? It works automatically here. An obvious test is to try signing into Google with gnome-online-accounts, or loading an https:// page in Ephy, anything that uses https:// would fail otherwise.Not a mac thing. I think everything will work find if you are also building glib into your jhbuild.But if you want to use a system installed glib with custom jhbuild gio modules, things will not work with the environment variable set.Sorry, will not work *without* the environment variable set.(In reply to Matt Watson from)I don't think we want to support doing that, so you can just set the environment variable if that's really what you want to do, right?All the gio modules must necessarily depend on glib. I checked glib-networking and dconf and both have that dependency.Yeah, I'm not too picky about whether this gets supported by default or not.Personally, trying to build everything from the standard modulesets into jhbuild was a huge time sink. I usually just build only the software I'm currently working on into my jhbuild prefix. If that's a workflow we care about supporting somewhat from the jhbuild maintenance perspective, might be nice to set GIO_EXTRA_MODULES by default. Assuming that wouldn't interfere with setups where glib is actually built into the prefix.But get that this is well off the beaten path of a usual setup, so if its not something worth sticking in by default that's fine too.I'm going to WONTFIX this. I think you really ought to build GLib if you're working on Gio modules with JHBuild.I'm reopening it because I don't think what Matt said is correct, as I have indeed built GLib.That said, I'll try to get a clear case to reproduce this without any funky self-built GIO modules.	7.0	id=755925	5	False	False	arnaud.bonatti	1
id=755925	REOPENED	dconf-editor	general	git master	Other Linux	Normal normal	dconf-editor maintainer(s)	2015-10-01 09:13 UTC by	Christian Persch	2015-10-07 12:47 UTC (	1 user	With the recent change to use gsettings_schema_list_keys, dconf-editor is now unable to edit the gnome-terminal profile settings.Steps:Navigate to /org/gnome/terminal/legacy/profiles:/:$UUID Actual results:Cannot edit any value in the directory; clicking just brings up a 'No Schema, cannot edit value.' dialogue.The reason is because due to deficiencies in gsettings (), gnome-terminal's profile settings have an unusual setup with the profile itself having a relocatable schema (org.gnome.Terminal.Legacy.Profile) but without those profiles (the paths ofwhich cannot be enumerated at schema installation time) being in the global schema as child schemas.	Dconf Editor (in its development “master” branch) doesn’t use GSettings to list/access keys, but as previously the Dconf client. It uses GSettingsSchema to get schemas infos instead of its own parser as before, and doesn’t get relocatable schemas infos for now (and looks like it will be hard, but I’ll try), but that wasn’t the case also in 3.18 and previous releases.I may have missed something, but I’m quite sure this bug is “just” about adding back a way to edit keys even if there’s no understood schema for it. I’ll have a look, It shouldn’t take much time.If I correctly understood the problem, it’s solved. Thanks for reporting the bug, and don’t hesitate to reopen if I missed something. The current UI, with probably some more change, will be available for the 3.20 release in six monthes.Yes, that works now, thanks!Actually, it needs more work: while now you can edit the keys that already have dconf values, it's impossible to edit a value that's in the schema but has not yet been set to dconf, since there's no way to *add* a new key in the directory.To test this, use gnome-terminal's Preferences->Profiles->New to add a new profile, then navigate in dconf-editor to this profile; most keys of the schema won't be set in dconf and thus can't be edited.That’s basically a limitation of relocatable schemas, from both dconf and glib: you cannot know from a given path what’s the schema that applied to it. And as all the informations are known either from the schemas, or from the modified keys…I’ll let the bug open, but that needs work in the libraries before.	5.0	id=347776	9	False	False	kevin	1
id=347776	REOPENED	beagle	General	0.2.7	Other Linux	Normal normal	Kevin Kubasik	2006-07-17 13:15 UTC by	Andreas Heinz	2007-02-14 22:27 UTC (	1 user	i have symlinked my gaim logs to a nfs share.now when the gaim backende tries to index this files i get the following output:060717 1509332625 23745 Beagle ERROR: Couldn't write attributes for /home/crash/.gaim/logs/icq/22013956/152365260/2005-06-21.121444.txtdata is indexed, but it seems to try to add EAs but of course this isn't possible with a nfs share / symlink.	As followed up on the list, the data is indexed fine, but the error message is a little scary, since it seems like extended attributes should work (the home directory being on an xattr-able file system).This might be a WONTFIX (usually being unable to set xattrs should be a pretty serious problem), or perhaps the message in the logs should be dropped from error level ERROR to WARN.CreatedDrop from Error to Warn.Ok, This one was actually a discrepancy, everywhere else we can't write an xattr, we just leave a warning, but here it was an error. Heres a one liner to fix it, I committed it, but its just here for reference.Ok, I've marked this as resolved...(In reply to)Upon looking at the patch, I dont think the bug can be ignored or fixed trivially. Couple of points (from a brief look at the source, I didnt test if these cases actually occur):1) Like some other backends (esp. mail backends), Gaim should start using extended-attributes to determine if any log file is up-to date. This is necessary during the first scan or if there is no inotify. Otherwise, Gaim backend will end up indexing up-to date files over and over again.2) Consider a home directory as mentioned in this bug and a backend requiring extended attributes:/home/foo => local/home/foo/.../backend_using_xattr => symlinked to nfsThe problem will occur for this backend also. Ignoring this error wont cause any data loss as such, but all the files will be indexed repeatedly.3) FileSystemQueryable is smart and tries to use an xattr-based and sqlite-based attribute store simultaneously. Just to avoid issues like this where some parts of the file system tree doesnt support xattr. IMO, other backends should start using that too... in fact, make that the default in LuceneQueryable. Or if thats an overkill (there might be some backend which doesnt need to check up-to date status upon first scan) then at least use a mixed attributestore for the other backends (e.g. gaim).Joe, your call :).It would be nice to fall back to a "mixed" FA store like the FSQ; I'm not entirely sure why we don't do this for all backends.	5.0	id=715059	11	False	False	jim	1
id=715059	REOPENED	website	wiki.gnome.org	current	Other Linux	Normal normal	Wiki maintainers	2013-11-23 10:42 UTC by	Kat	2016-11-05 14:33 UTC (	5 users	The new wiki stylesheet does not have the navigation for the viewed page by default. This makes it considerably more difficult to get the links to specific sections.	I would very much like to see this added soon. Even a simple breadcrumb-style list of links would be a huge improvement.This is also annoying when trying to get back to current version of a page from a version diff.***has been marked as a duplicate of this bug. ***We now have a breadcrumb list in the navigation bar at the top. Can we mark this as OBSOLETE?We're still missing the (clickable) breadcrumb when viewing a diff. Seefor instance.	5.0	id=778495	7	False	False	mcatanzaro	1
id=778495	REOPENED	epiphany	Build	3.20.x	Other Linux	Normal normal	Epiphany Maintainers	2017-02-11 14:42 UTC by	Pacho Ramos	2017-02-12 01:38 UTC (	3 users	This is a regression over 3.20.6x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -I../lib -I./history -DSHARE_DIR=\"/usr/share/epiphany\" -DGETTEXT_PACKAGE=\"epiphany\" -DLOCALEDIR=\"/usr/share/locale\" -pthread -D_REENTRANT -I/usr/include/gtk-3.0/unix-print -I/usr/include/libwnck-3.0 -I/usr/include/startup-notification-1.0 -I/usr/include/webkitgtk-4.0 -I/usr/include/libsoup-2.4 -I/usr/include/libxml2 -I/usr/include/libsecret-1 -I/usr/include/gnome-desktop-3.0 -I/usr/include/gcr-3 -I/usr/include/gtk-3.0 -I/usr/include/at-spi2-atk/2.0 -I/usr/include/at-spi-2.0 -I/usr/include/dbus-1.0 -I/usr/lib64/dbus-1.0/include -I/usr/include/gtk-3.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libdrm -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng16 -I/usr/include/gcr-3 -I/usr/include/gck-1 -I/usr/include/p11-kit-1 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/gsettings-desktop-schemas -fno-strict-aliasing -Wall -Wextra -Wundef -Wnested-externs -Wwrite-strings -Wpointer-arith -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wredundant-decls -Wno-unused-parameter -Wno-missing-field-initializers -Wdeclaration-after-statement -Wformat=2 -Wold-style-definition -Wcast-align -Wformat-nonliteral -Wformat-security -Wsign-compare -Wstrict-aliasing -Wshadow -Winline -Wpacked -Wmissing-format-attribute -Wmissing-noreturn -Winit-self -Wmissing-include-dirs -Wunused-but-set-variable -Warray-bounds -Wimplicit-function-declaration -Wreturn-type -Wswitch-enum -Wswitch-default -Wno-deprecated-declarations -Wno-error=unused-parameter -Wno-error=missing-field-initializers -Wno-error=deprecated-declarations -march=native -pipe -O2 -ggdb -c -o ephy_profile_migrator-ephy-profile-migrator.o `test -f 'ephy-profile-migrator.c' || echo './'`ephy-profile-migrator.cephy-profile-migrator.c: In function 'migrate_insecure_passwords':ephy-profile-migrator.c:1076:3: error: 'for' loop initial declarations are only allowed in C99 or C11 mode for (GList *l = items; l != NULL; l = l->next) ^ephy-profile-migrator.c:1076:3: note: use option -std=c99, -std=gnu99, -std=c11 or -std=gnu11 to compile your codemake[4]: *** [Makefile:923: ephy_profile_migrator-ephy-profile-migrator.o] Error 1make[4]: Leaving directory '/var/tmp/portage/www-client/epiphany-3.20.7/work/epiphany-3.20.7/lib'make[3]: *** [Makefile:959: all-recursive] Error 1make[3]: Leaving directory '/var/tmp/portage/www-client/epiphany-3.20.7/work/epiphany-3.20.7/lib'make[2]: *** [Makefile:579: all] Error 2make[2]: Leaving directory '/var/tmp/portage/www-client/epiphany-3.20.7/work/epiphany-3.20.7/lib'make[1]: *** [Makefile:487: all-recursive] Error 1make[1]: Leaving directory '/var/tmp/portage/www-client/epiphany-3.20.7/work/epiphany-3.20.7'make: *** [Makefile:419: all] Error 2	Good to know, thanks for reporting. You'll have to build it with CFLAGS="--std=gnu11". I know it's a bit awkward that this isn't handled by the build system. If someone wants to add an AX_C_COMPILE_STDC_* series of macros to autoconf-archive and m4-common to parallel the AX_CXX_COMPILE_STDCXX_* series, then we could set it directly in the build system, but I don't want to keep custom autoconf goo around to do that just for the benefit of GCC 4.9.Well, then this bug should still be valid and not WONTFIX, just it happens to need build system fixes, not code changes to not use C99 features.As you are saying, relying on implicit -std= set by GCC version is wrong.There is AC_PROG_CC_C99, which shouldn't need any autoconf-archive/m4-common additions.I'm not going to use AC_PROG_CC_C99. I only test Epiphany using C11.	3.0	id=72877	10	False	False	raphael	1
id=72877	REOPENED	GIMP	Plugins	1.x	Other All	Normal normal	GIMP Bugs	2002-02-27 17:37 UTC by	Raphaël Quinet	2017-01-04 15:07 UTC (	1 user	If two pixels have different opacity values (alpha channel), then theircolors are not averaged correctly by the Map->Warp plug-in.It looks like the RGB channels are resampled without taking the opacityinto account. As a result, the (invisible) color of a transparent pixelcan bleed into an opaque pixel. The resulting image is incorrect.Seefor some test images and a longer description of theproblem. This problem affects many other tools and plug-ins.	Changed target milestone of several bugs to 2.0 - these are not features, anddon't look to me like blockers for a pre-release, but they have to be addressedbefore 2.0.Dave.Bumping the milestone for this bug, and all that depend on it, to 2.2.In the absence of someone actively working on this, there is no point keeping iton the 2.0 milestone.If someone wants to work on this, fixes to this family would also be accepted onthe stable branch.Dave.To use Dave's famous words: In the absence of someone actively working on this,there is no point keeping it on the 2.2 milestone.Making this change would introduce a bug. The currentbehavior is correct for many users; the alpha channelis used to hide parts of the image. Hidden parts haveperfectly valid data.So, if you "fix" this "bug", be sure to allow for thoseof us that work with images that have fully valid datain the transparent and semi-transparent areas.Since the proposed change kills performance and causesdata loss, it needs to be disabled by default. (with anappropriately hidden option to enable it)If you want to make some parts of an image transparent while still keeping thecolor data then you should use a layer mask, not the alpha channel. Using amask ensures that the RGB channels will not be modified. But if a pixel isfully transparent (alpha channel = 0), then the contents of the RGB channelsbecome unspecified: some operations may keep the color intact while some otheroperations may destroy it. There are examples of both in the GIMP and the GIMPdoes not make any promises that the current behaviour of some operations will notchange in the future. As the color of these pixels is unspecified, using them inany operation is a bug. There has been a lot of debate about masks, alphachannels and transparency. So before you argue about this, I suggest that youread the related bug reports and the archives of the gimp-developer mailing list.One is strongly led to use alpha, not layer masks.a. when I create a new image, RGBA (not what, RGBM?) is a choiceb. when I load a PNG, RGBA is usedc. the PNG spec uses the term "alpha"d. non-gimp documentation uses the term "alpha"e. when I save a masked image as PNG, gimp whines about itf. masked images can not be rotated (maybe fixed in CVS?)It looks to me like you've invented a new term ("mask") andabused a traditional term ("alpha") for some other purpose.Hence the confusion and awkwardness.Pre-multiplied alpha is a rare and evil beast from the past.It's not something that normal users should ever bump into.I suggest that you take this discussion to the gimp-developer mailing list ifyou have strong feelings about it. However, as I mentioned in, youshould also take a look at the PNG specification ()which notes that the alpha channel can be used for different purposes and evenrecommends clearing the color of transparent pixels in some cases (in order toachieve better compression).I also recommend that you look at the previous discussions on the gimp-developermailing list (archives:) about thedifference between pixels that are fully transparent (undefined RGB, alpha = 0)and those that are simply hidden (well-defined RGB, mask = 0).You also seem to be confusing pre-multiplied alpha (which is usually a fileformat issue) with the necessity to have RGB colors weighted by their opacity inany compositing operations. If that was not done correctly, then the GIMP wouldnot even be able to display partially transparent layers on top of each other.This bug is resolved, since he introduction of the GEGL based warp tool uses RaGaBaA for resampling.Unfortunately, the warp tool replaces the IWarp plug-in, not the wrap plug-in.Was about to close this bug myself a couple of times...	9.0	id=661221	10	False	False	csoriano	1
id=661221	REOPENED	gnome-shell	message-tray	unspecified	Other Linux	Normal normal		2011-10-07 19:14 UTC by	William Jon McCann	2015-03-02 21:52 UTC (	4 users	Currently when we post a notification that a new chat has arrived we immediately update it if an even newer line of dialog comes in.So something like:[new notification]"Nancy Grace farted on dancing with the stars!"[updated by]"haha"Currently we very quickly flash the original message and replace it almost immediately with "haha". This is pretty annoying since you can't see what you started to see and then it is overwritten with something that references what you didn't see. This compells you to go into the notification or worse into the summary area - and this is precisely what we don't want.	I just finished a patch for it.I'm testing right now, because there's some issues that I don't know if they are already in master branch. So I hope in one or two days I can push it.Also, do you think 1'5 seconds for timeout between each message is enough?Well, in 1 hour I saw the issues I was having but in the master branch, so the patch is not doing these issues. I push it to review.Please, take into account that it is my first "long" code patch (the other is not reviewed yet). So sure it has some naming mistakes or manners mistakes. Review carefully please. I tried to follow gnome-shell guidelines, but some things are not specified.CreatedMessageTray: Add some timeout between chat notificationsUntil now when a user talks to you many times in no time thenotifications are overrided by the newest notification, not allowingthe user to follow the conversation. Adding some timeout between eachchat notification fix it.Review of:Sorry for taking this long to review.After testing, I found a problem: if you expand the chat notification, the queue is not drained, so you only get the messages displayed up that point. Furthermore, the timeout appears to be stopped, so you actually lose messages until the notification is next hidden.I think you need to override expand() and add all messages from there.obsolete yay!(In reply to Carlos Soriano from)Are you sure? I don't see how the new notifications would address this ...(In reply to Florian Müllner from)Notifications are not longer replaced immediately if another came while one is shown no? at least is what I can see...As far as I can tell, this was never about another notification coming in, but about updates to an existing notification. That's still supposed to work as before (there's, but that's really just that - a bug ...)(In reply to Florian Müllner from)oh ok.	9.0	id=591746	22	False	False	bugzilla	1
id=757845	REOPENED	gnome-shell	lock-screen	3.18.x	Other Linux	Normal normal		2015-11-09 18:56 UTC by	Victor Porton	2015-11-09 20:25 UTC (	0 users	I execute this shell command:dbus-monitor --session "type='signal',interface='org.gnome.ScreenSaver',member='ActiveChanged'"It printssignal time=1447094506.410099 sender=:1.21 -> destination=(null destination) serial=466 path=/org/gnome/ScreenSaver; interface=org.gnome.ScreenSaver; member=ActiveChanged boolean truesignal time=1447094507.353641 sender=:1.21 -> destination=(null destination) serial=497 path=/org/gnome/ScreenSaver; interface=org.gnome.ScreenSaver; member=ActiveChanged boolean falsewhen I activate screensaver with `gnome-screensaver-command -a` or by timeout. But it produces no message when I lock screen using Gnome GUI interface.These messages should be produced also when I lock and unlock back.I need some way to track not only activating screensaver but also when the user unlocks.	Weird, now it works.I haven't updated the system. I remember it didn't work previously.It does not work again.It is just not a repeatable bug.Maybe screensaver events are not detected when I unlock quickly after screen lock?	3.0	id=757845	4	False	False	porton	1
id=724756	REOPENED	epiphany	General	3.11.x	Other Linux	Normal normal	Epiphany Maintainers	2014-02-20 00:47 UTC by	Asif Ali Rizvan	2015-09-27 22:01 UTC (	2 users	please visit this; and do open link with new tab; when the link opens in a new tab, it freezes epiphany and all it's processes; for some seconds.please open this youtube video in a new tab: it also causes freeze for a second or soThanks.	Is this still a problem with WebKitGTK+ 2.10?(Please respond after your distro ships the 2.10 update.)just installed 2.10 fromnow the freezing is gone.Awesome, thanks!Epiphany still freezes for me when a tab is loading (running webkit2gtk 2.10.0 and epiphany 3.18.0 on Arch). Could this bug be reopened? Is there anything I can do to debug this?(In reply to Ian from)On what page does it freeze?(In reply to Michael Catanzaro from)It actually happens with any page. For example, if I have Google opened and ctrl+click the "Images" link the browser will freeze until the tab is loaded.I would try to attach to the epiphany process using gdb -p `pidof epiphany` to and hope against hope that the backtrace shows what's going on....(In reply to Michael Catanzaro from)So, trying that outputs some errors about reading symbols and Epiphany turns unresponsive and I have to close it.1:	9.0	id=747893	17	False	False	mailbox	1
id=747893	REOPENED	geary	accounts	0.10.x	Other Linux	Normal normal	Geary Maintainers	2015-04-15 08:18 UTC by		2016-07-25 00:45 UTC (	8 users	I would like to be able to set a default emailaddress when multiple addresses are available for an account. So that when i choose to write a new email, the default address is selected.	Geary's current design to is default to the account email address of whatever folder you're currently viewing. Since people are "in that world" when looking at a folder w/ that account, we feel that makes the most sense. For example, if I'm looking at's Inbox and I select "New message", it rarely makes sense for the composer window to default to my home email address.I'm closing, but if you want to make a more thorough case, feel free to re-open and explain why you think a single default mail address makes sense.I understand your point, and how geary's design is. And i don't need an overall default mail adress, but the option to set a default emailaddress for each account (which has multiple addresses available).I hoe you will reconsider this option.You're right -- this would be a sensible thing to add. I misread the bug in the same way as Jim, so I've edited the title to make this clear it's a per-account setting.***has been marked as a duplicate of this bug. ***CreatedScreenshot showing the UII've got a *very* dirty branch up on.It's far from being functionally complete, but I'd like to know if that kind of approach would conceptually be good.I've introduced a "preferred_email" field in geary.ini which is optional, if it doesn't exist then the account would default to its primary/default email address.I also took the liberty to implement alternate address editing through a popover, would that be cool with everybody? IMHO it looks cool and gives us a cleaner UI, without actually removing functionality. The "add" button would be the last row, a remove button would be present in every row to delete an account (except of course the primary account).This does not alter the UI elsewhere though at the moment, ideally the composer window would also be hooked up to this stuff.Thoughts? Opinions? :-)To be more precise, clicking on a row would then assign the associated email address to be the preferred one. This is immediately reflected in the UI (checkbox in the row and the button's label).Sorry for the extra email.To actually test this out, one should manually add a line in geary.ini as follows:preferred_email=<email>where <email> is one of the alternative email addresses already added to the alternative addresses list. There is no add functionality at the moment...Oh, this is almost exactly what I had in mind, thanks!So, a few things to address with the UI, based on the screenshot, would be:1. In the account UI, there needs to be some way of indicating that additional addresses can also be added, and maybe also that if any have been added that they exist. At the moment the UI looks like the button is just for modifying the primary address.One approach would be to changing the label in front to "Email addresses". It's a bit weird that a button has a second label however.Perhaps the button should just continue to have static text, say "Email Addresses", since per the UI mockup in, the plan is to put the primary email address in the HeaderBar for the settings anyway - hence using it as the button's inner label may end up being redundant.I'm open to other suggestions, but do keep the UI mockup inin mind.Also, I assume the "Email" text entry would be removed, right? The email button should probably be moved up above the checkbox options to replace it.2. About the popover itself, I would use either the tick mark, or the "Primary Address" label, but not both. The latter is probably the one to keep, since it could be ambiguous about what the former means.Also, what are you thoughts for when the user clicks the "+" button? I'd be inclined to avoid popping up yet another window/popover, so maybe adding new entry to the ListBox with a text entry and accept cancel buttons would work?1. What about- we indeed replace the email entry with the button, the dimmed label on its left would still be something to the effect of "Preferred addresses"- if no additional addresses are configured, then the button's label would be similar to what we have now ("Additional email addresses..."). If the user has selected a preferred address, then that would be shown as the button's label.It still leaves us with the question of what to do if there's more than one address and the user still has its primary address selected as the "preferred" one.2. The GNOME HIG actually prefers to use a subwindow for editing lists, would it be useful to explore this? I find it a bit overkill for what we're trying to do, an account usually does not have many additionall addresses configures. Though with a subwindow we could use a popover in the list for entering the new address. Even though I'd also lean myself towards the popover for subjective reasons.I'm trying to find some real world examples in GNOME where there'd be a situation where a list could be edited (inline and not in a popover with a text entry a'la recent Nautilus) and a "default" item be selected, there does not seem to be any..We also could put this stuff in a section (tab) on its own, then we get the added benefit of having a logical place for future settings in there, if any, say an "append a Reply-To: field" (I'm inventing here, but I know Evolution does that for example).Oh, I missed the primary/preferred distinction. Wouldn't it be best to avoid having that extra notion? That is when the user changes their preferred address, it's the primary address in the account info that gets updated. That's pretty much the whole motivation for. It might be that some more work needs to be done on that bug to prevent things exploding when the primary address does change (the GMail login used, for example), but that's well worth doing. I'll have a look at it.Anyway, the reason why I was favouring simply using "Email addresses" as the button label was that it captures both changing the primary/preferred use case and adding additional addresses use case at once - it's just where you go to change your email addresses, and users don't need to know or understand what the difference between primary/secondary/additional addresses are.I'd rather not add additional tabs to the accounts dialog - we want to keep it to 3-4 max so that a horizontal tab bar can still be used for consistency with other GNOME app's prefs. Hence using auxiliary dialogs/popovers for secondary functions like this is the way to go.Maybe another solution is to use a text label instead of the button (text in parens would be dimmed): Email address:(+3 additional) [ Edit addresses ]But again, taking into account the fact that the Accounts dialog will likely end up displaying the primary/preferred address email in the HeaderBar title, repeating it here again, either as a plain text label or in the button's label is redundant.For adding a new address in the popover, there is the vaguely similar case in the Language Selector of the Region & Language control panel - clicking the vertical dots reveals a search bar, but that feels a bit klunky. It might still work though if entry and associated buttons were added to the list as its own row, rather than below it?I'm not a fan of using a subwindow for adding addresses either, but perhaps worth exploring if the above doesn't work well? I'm thinking of something more like the modal dialog that appears when adding a new directory in Nautilus, rather than the popover used to change a file name.If neither inline or subwindow works well, it might be the case that the popover needs to be converted to a dialog instead, so allowing a popover to be used for adding new address.I use my university id (a semi-random number) to connect to its email servers, and my email address there is of the form oskar.viljasaar@. If we change the primary email field in the account's config, would we have a way to retrieve the original email address? I'm just thinking it might still be worth keeping around, just in case it would still be needed somewhere else in Geary's code.To that effect, I was thinking it might be best that in the config there would be:- the "primary_email" field which would not change throughout the account's lifecycle- an optional "preferred_email" field pointing to one of the addresses in the alternate_emails fieldThat's the difference between your IMAP/SMTP login and your account's email address. On services like GMail and others the login and email address are the same, but more traditional or single-domain services often use different values here - E.g. "joe" and "". Geary already supports this distinction however, so it's not a problem.It might be a bit weird changing the primary email address when it also gets used for the login, but hey - if that's what the user would like to do then we should let them.Anyway check out the patches I just added to. It replaces the AccountInformation::email property with ::primary_email, which can indeed now be changed*.[*] - Claim completely untested, patches may explode when poked.Hmm, one other thing that might be good to fix here, or at least keep in mind, is that Geary should allow specifying alternate display names for alternate addresses, as well as just the address itself.So my primary email might be "Michael Gratton <>", but I might also want to be able to send email as "Example.com Support <>".The same basic display ListBox approach can still be used, but this would mean that when adding addresses, two text entries would needed - name (prefilled from the account info's real_name) and address.In that case we'll have to find a way to write those alternative names in geary.ini.Maybe something to the light of having a second list in geary.ini, exactly as long as the "alternate_emails" list would be, with every name in the list going together with the address at the same position in the alternate_emails list?I had a thought on how to present this to the user in the edit pane: we could just keep all of the UI we have right now, the only change would be to make the email address field editable.That way, we could add and remove mailboxes through the "Additional email addresses..." popover, presenting a list of mailboxes with the primary one having a checkbox next to it. Editing the selected/primary mailbox's name and email address could then be done in the add/edit pane without having to open the popover.This actually simplifies the interface: if the user doesn't want to use his default email address at all, he can directly replace it with another one without having to go through the process of adding an alternative email address.CreatedScreenshot showing the UII think this looks better!Deleting the selected/primary account would set the next account as the primary one. If there's only one account, the delete button would not be shown.I guess adding a new mailbox in the popover would result in something similar as what happens in the region & language panel, because we'd have to show two entries if we also want the name to be set per mailbox. I think it would be a bit more complicated to get it to look good if we want to do it in the list (transforming the add button into two entries). I can try to do it anyway, to see how that would look like.CreatedMockup - also show the name if possibleThe good news is that since AccountInfo is already using RFC822.MailboxAddresses for the alternative addresses - so if the names are set on them they should already be getting saved and loaded.Hmm, I do like this idea of just continuing to manage the primary email directly in the account UI. However now I'm also wondering if something like your original suggestion is better - use a labelled button, but using the "flat" style class (like in Contacts) so only on mouse over does it fill out and look like a button.Since there's still a few design issues to be resolved, I'd like to do a bit more work on the UI mockup SVG inso the UI changes can get nailed down once and for all and and we can then just implement it.Specifically we need to be able to compare the two approaches above (edit primary in add/edit pane and separate button for alternatives vs. having a flat button and doing it all from the popup), and also comparing using a Popover vs. a Dialog. These then can then be evaluated against the use cases we have and compliance to the HIG and common GNOME app conventions to see what the best approach will be.These are the use cases I have in mind:1. Change primary name & address to a new address2. Add an alternative3. Remove an alternative4. Edit an existing alternative name & address5. Set an existing alternative as the primary6. Edit primary's email to be the same as an existing alternate email7. Edit alternative's email to be the same as the primary email1-3 would be required, 4 & 5 are optional but would be good to have, and 6 & 7 are undesirable and should not be possible. Have I missed any?If you want to take a stab at the SVG for this before I get around to it next week, feel free. The gnome-mockups-resources Git repo has some handy templates.I've just created a new wip/ux branch in git, with a WIP mockup for this is available in the ux/accounts directory of that branch, or here:There's a little bit more work to do on it, but so far Option 3 seems like the way to go, since there's only one level of nesting of dialogs. Use case #4 and #5 is handled fine, and #6 and #7 aren't possible, which is good.Option 1 either suffers from two levels of nesting, or #4 is not possible, it does not handle #5 and anti-use cases 6 & 7 are a problem.Option 2 also suffers from two levels of nesting to make #4 is possible, use case #5 is solved for the Popup editor at least, and anti-use cases 6 & 7 are a no problem.On general, using a Dialog for editing (Option A's) instead of Popups (Option B's) means we can easily add avatar and signature editing in the future, however they need some work to handle use case #5 still.What do you think? Feel free to update the SVG in ux/accounts with other options if I have missed anything out.Just FYI I just discovered the HIG has some guidance for using a popover for this, under Custom Values at	22.0	id=724756	7	False	False	mcatanzaro	1
id=677552	REOPENED	rygel	GstPlaybin plugin	git master	Other Linux	Normal normal		2012-06-06 13:36 UTC by	Jens Georg	2013-09-16 17:33 UTC (	0 users	Set mute via UPnP, shut down rygel. If you restart rygel, the state of the pulse sink is still mute, but UPnP says its not.Also the mute state cannot be unset via upnp, only via the sound panel.	This has changed a bit, mute state can be unset using UPnP but it's still not reflected properly. In the RenderingControl, mute default is set to false.Createdrenderer: Initialize mute state from playerpushed as- renderer: Initialize mute state from playerThis needs more fixing, the patch only enables to get the mute state from the player; the playbin player still does not reflect this.	4.0	id=771740	12	False	False	oholy	1
id=770203	REOPENED	nautilus	File and Folder Operations	3.20.x	Other Linux	Normal normal	Nautilus Maintainers	2016-08-21 15:10 UTC by	Strangiato	2017-02-23 16:46 UTC (	3 users	open nautilus and create a new folderpress ctrl+z to undoResult: nautilus asks if I want delete the new folderI think this question is unnecessary and confuse. Delete a folder and undo folder creation are different tasks.	You still delete a folder, which is dangerous in case you put some files in there from another app.I guess it's a matter of is better being careful than say sorry. Closing as wontfix now, but it worth to check with design team (feel free to ask in #gnome-design IRC at irc.gnome.org)(In reply to Carlos Soriano from)Good point. I think the correct/better behaviour in this case is nautilus to show the question only if the just created folder is NOT empty.That's a good idea, reopening.-> also good for newcomersCreatedunnecessary question when undo folder creationCurrently, when we want to undo a folder creation we always receive aconfirmation question for deleting the folder.The problem is that undoing a folder creation and deleting a folder aredifferent operations. We need a confirmation question only when we undofolder creation after we have added another file/folders inside therecently created folder.The fix involves modifing the API function for file-operations-delete byadding a boolean parameter that differentiates between undo operationsand regular delete operations. After that, when performing the deletetask, we verify if we have an undo operation and directly delete thefolder if it is empty.Review of:Hey Lavinia,Good progress on the patch, the API and the code is starting to look good :)However it needs a little more work, let's try to go point by point.::: src/nautilus-file-operations.c@@ +106,3 @@ NautilusDeleteCallback done_callback; gpointer done_callback_data;+ gboolean confirmation;I think we can call this ask_confirmation_if_necessary, and the same for the function parameter.@@ +2448,3 @@ gboolean must_confirm_delete_in_trash; gboolean must_confirm_delete;+ gboolean undo_operation;This is not necessary (explained below)@@ +2460,3 @@ must_confirm_delete_in_trash = FALSE; must_confirm_delete = FALSE;+ undo_operation = FALSE;This won't be necessary (explained below in a another comment)@@ +2467,3 @@+ /* undo folder creation */+ GError *error = NULL;+ g_file_read (job->files->data, NULL, &error);Why reading the file? You don't need to know the contents of the file for knowing the metadata associated with it, like the file type. For that, take a look at the g_file_info around.Also here, you are reading and deleting just one file. You need to do this for every file, in the loop just under this.@@ +2477,3 @@+ }++ if (!undo_operation)The delete task shouldn't be aware of what the parent operation is. Rather, you have a boolean indicating if it should ask for explicit confirmation or not.@@ +2490,2 @@ }+ else if (can_delete_without_confirm (file))I believe here is the only place that really needs a change. If you put either can_delete_withouth_confirm() || !ask_confirmation_if_required) should be enough for all the cases. no?@@ +2554,3 @@ NautilusDeleteCallback done_callback,+ gpointer done_callback_data,+ gboolean confirmation)Alignment is wrong.Also would be good to add a docs comment explaining the function parameters, since the "confirmation" can be misleading.@@ +2597,3 @@ trash_or_delete_internal (files, parent_window, TRUE,+ done_callback, done_callback_data, TRUE);actually you will need to do the same support as nautilus_file_operations_delete does for consistency.@@ +2609,3 @@ trash_or_delete_internal (files, parent_window, FALSE,+ done_callback, done_callback_data, confirmation);you can put the confirmation boolean in a new line.The pattern I usually try to follow is:- Everything in one line if possible- If not, split in multiple lines, and if the arguments have the same context and they fit in one lines, then put them in one line.- If following the previous pattern, one of the lines cannot hold all the arguments with the same context, split all the arguments in new lines.- If following the previous pattern the number of lines is > 4, don't do any smart split except for reaching the line limit.::: src/nautilus-file-operations.h@@ +93,3 @@ NautilusDeleteCallback done_callback,+ gpointer done_callback_data,+ gboolean confirmation);alignment is wrong.::: src/nautilus-files-view.c@@ +1511,3 @@ locations = g_list_reverse (locations); + nautilus_file_operations_delete (locations, nautilus_files_view_get_containing_window (view), NULL, NULL, TRUE);I believe this line is too longCreatedunnecessary question when undo folder creationCurrently, when we want to undo a folder creation we always receive aconfirmation question for deleting the folder.The problem is that undoing a folder creation and deleting a folder aredifferent operations. We need a confirmation question only when we undofolder creation after we have added another file/folders inside therecently created folder.The fix involves modifing the API function for file-operations-delete byadding a boolean parameter that differentiates between undo operationsand regular delete operations. After that, when performing the deletetask, we verify if we have an undo operation and directly delete thefolder if it is empty.Review of:Good progress on this! I didn't notice about reviewing one important part, and I though I expressed clearly the idea, but I didn't :(One thing to note is that the patches shouldn't have spurious changes, that means style changes etc. are better done in a separate patch.Here's the review:::: src/nautilus-file-operations.c@@ +2448,2 @@ gboolean must_confirm_delete;+ gboolean must_confirm_delete_in_trash;why this change? (if it's because it looks better, create a new patch with this).@@ +2482,3 @@+ if (type == G_FILE_TYPE_DIRECTORY)+ {+ if (!g_file_delete (file, NULL, NULL))oh I didn't notice this before. This code shouldn't delete a file here, just prepend files to the to_delete_files.But also, we are checking if the file is a directory if we shouldn't ask for confirmation? Doesn't sounds correct.Instead, the user of this function should check the files and decide whether it should ask for confirmation or not. So this "checking if there is an empty directory" should be done, in this case, in the undo-operation that calls this function.Then here the code will be straightforward, in the:else if (can_delete_without_confirm (file))you will haveelse if (can_delete_without_confirm (file) || !job->ask_confirmation_if_required)And that's it I believe.Then in undo-operations that calls this function you will check for all the files, and ensure that all of them are directories and that they are empty (not with g_file_delete, but actually enumerating the children and checking whether there is some or not.). Then if all of them are directories and empty, you will set the ask_confirmation_if_required to FALSE.One drawback about this is that you can have one directory with content and another empty in the list of files, and the code will ask for confirmation to both. But that's fine, since we only want to apply this "not asking for confirmation" only when a folder or multiple folders are created, and that applies to this condition.@@ +2539,3 @@++ g_list_free (to_trash_files);+ g_list_free (to_delete_files);why this change? (although it looks better, is not related to the bug report. You could create a new patch for that).Createdunnecessary question when undo folder creationCurrently, when we want to undo a folder creation we always receive aconfirmation question for deleting the folder.The problem is that undoing a folder creation and deleting a folder aredifferent operations. We need a confirmation question only when we undofolder creation after we have added another file/folders inside therecently created folder.The fix involves modifing the API function for file-operations-delete byadding a boolean parameter that differentiates between undo operationsand regular delete operations. After that, when performing the deletetask, we verify if we have an undo operation and directly delete thefolder if it is empty. Added a function inside the file-undo-operantionsfile to check if the files on which we apply the undo command arerepresented by a list that contains only one directory with no childrenat all.I hope this is what you were trying to explain to me with the previous reviews.Review of:Hey! Good progress! You got the idea right.Still needs some work.As a general comment, please test the patch and review your changes before attaching here.In this case, the patch doesn't work with more than one directory, and there are some unrelated changes, apart of the ones I pointed in the previous review that seems they weren't removed.Here's the review:::: src/nautilus-file-operations.c@@ +2448,2 @@ gboolean must_confirm_delete;+ gboolean must_confirm_delete_in_trash;unrelated change, as said in the previous review you can put them in a different patch if it's a matter of style.@@ +2458,2 @@ must_confirm_delete = FALSE;+ must_confirm_delete_in_trash = FALSE;unrelated change@@ +2525,3 @@ job->user_cancel = TRUE; }+unrelated change::: src/nautilus-file-undo-operations.c@@ +66,3 @@ +static gboolean+is_empty_directory (GList *files)In general, this functions shouldn't be here, we have the NautilusFile and NautilusDirectory classes that can be used from here (not from file-operations, since that one is not using the cache of nautilus). But actually, the most important thing that is wrong in this function is that the code is doing I/O in the main thread. Did you see the g_task_run_in_thread in file-operations? those move the function to a new thread, not blocking the UI, here the code doesn't do that. Luckily, NautilusFile and NautilusDirectory API already does the async thread creation for you.For that you can enumerate the children with nautilus_directory_call_when_ready with the wait_for_all_files set to TRUE.Since you need to do this for a list of files, you will have to wait until all of those async operations are done. You can do this creating a small struct that keeps the count of directories you have checked.@@ +68,3 @@+is_empty_directory (GList *files)+{+ gboolean ask_confirmation_if_required = TRUE;here you are just checking if the directory is empty, in this function "ask_confirmation_if_required" doesn't make sense.You can call it directory_is_empty.Also I can see you are sending a list of files, but this only checks for one file of those.Either check all of them and modify the function name, or the parameter should be just one file, and you will need to create another function (maybe called are_empty_directories()) for a list of files.@@ +83,3 @@+ GFileInfo *next_file;++ GFileType type;(this part of the review is obsoleted when you will use NautilusDirectory API, but I though it worth to mention) why *? I don't think you need all attributes. This makes the I/O call much more slower than what is required.@@ +84,3 @@++ enumerator = g_file_enumerate_children (file, "*", 0, NULL, NULL);+(this part of the review is obsoleted when you will use NautilusDirectory API, but I though it worth to mention) The docs of g_file_enumerate_children says that it can return NULL in case of error. You have to handle that (you can check how this is done in nautilus-file-operations.c@@ +91,3 @@+ }++(this part of the review is obsoleted when you will use NautilusDirectory API, but I though it worth to mention) this is not needed, docs say "This will be automatically called when the last reference is dropped" which is what you do in the next line@@ +679,3 @@ ++unrelated change@@ +943,2 @@ files = g_list_append (files, g_object_ref (self->priv->target_file));+unrelated changeI hope this doesn't discourage you, as I said previously this patch is really a different level. I'm actually quite impressed you are able to figure out some things :)Createdunnecessary question when undo folder creationCurrently, when we want to undo a folder creation we always receive aconfirmation question for deleting the folder.The problem is that undoing a folder creation and deleting a folder aredifferent operations. We need a confirmation question only when we undofolder creation after we have added another file/folders inside therecently created folder.The fix involves modifing the API function for file-operations-delete byadding a boolean parameter that differentiates between undo operationsand regular delete operations. After that, when performing the deletetask, we verify if we have an undo operation and directly delete thefolder if it is empty.Convert all the files (in this situation the list contains the folder on whichwe wanted to undo create) received as a GList of GFile to a list of NautilusFileon which we use nautilus_file_list_call_when_ready. On the callback go throughall the files and check if they are empty directories. If every directory isempty then when we execute the undo command without a question.There is still a problem with this patch. I cannot understand why count remains 0 when the folder is not empty.Review of:This is a weird predicament we are in. You have been working with Carlos on this, so I did not follow this bug too closely, but here goes…::: src/nautilus-file-undo-operations.c@@ +644,3 @@ ++Try to avoid these.@@ +950,3 @@+ {+ files = g_list_prepend (files, nautilus_file_get (l->data));+ }Could you explain this to me? You append the target file to the list and then prepend the corresponding NautilusFile? The locations list contains a single item, so the loop is throwing me off.@@ +958,3 @@++ nautilus_file_list_call_when_ready (files,+ NAUTILUS_FILE_ATTRIBUTE_INFO,Bugzilla might say I am a Nautilus developer, but the actual file code is still a dark forest to me. Do you not, perchance, want NAUTILUS_FILE_ATTRIBUTE_DIRECTORY_ITEM_COUNT or somesuch as well if your item count comes up as zero?@@ +2272,3 @@+ GList *files = NULL;++ files = g_list_prepend (files, self->priv->outputs);This goes unused, right?Thanks Ernestas for reviewing and Lavinia for the work!Ernestas review is correct, you need to request to count. That would apply for any attributes you would like to fetch from the disk, but in this case just the count.As always feel free to ping any of us in IRC or telegram if you have any question or need more help :)	16.0	id=770203	19	False	False	csoriano	1
id=591746	REOPENED	gnome-control-center	Sound	3.0.x	Other Linux	Normal normal	Control center sound maintainer(s)	2009-08-13 21:00 UTC by	Pedro Villavicencio	2013-11-14 10:25 UTC (	6 users	this report has been filed here:gnome-media version is: 2.27.5-0ubuntu1"I'm on Ubuntu Karmic alpha with all updates to date. I'm on a second-generation MacBook. My sound worked perfectly under Jaunty and Karmic until the recent Pulse Audio updates. Now many of my applications are hit and miss - youtube won't play sound but games under wine will play sound. But I'm not complaining about that in this bug report.If I look at my processes under System Monitor, I have about 30 instances of "aplay", each of which is using 800, 804 or 808 kbytes of RAM and currently sleeping. I presume that these are sounds that were supposed to play but have failed to do so given the new audio architecture changes. I can kill them manually or using "pulseaudio -k".I have selected "Sound" from my System->Preferences menu to see if I can fix it. It is misbehaving. The sound preferences window has no title and no "X" in the close button's area. The window is about 3 screens high and cannot be resized. If I select the tabs, the screen is only partially drawn - it's as though it wants to spend about a minute redrawing the screen but it never actually gets there.I realize that the underlying problem is with Pulse Audio, but still Sound Preferences shouldn't behave like this. Screenshots should explain."	The only problem that's relevant to gnome-volume-control here is that it sucks when there are loads of applications (which there usually isn't).The 40-odd aplay instances aren't started by PulseAudio or gnome-volume-control. I'd check your third-party apps if I were you.***has been marked as a duplicate of this bug. ***Is there any plan to fix it ???Yes, that's why the bug is still opened.***has been marked as a duplicate of this bug. ***commit c02b6b74e7c41e0360c10604ae6b1ac28e5c2c21Author: Bastien Nocera <>Date: Wed Sep 8 16:51:03 2010 +0100 Use ellipsise in the application bars So as to avoid the width of the dialogue changing when streams with really long names come in.We didn't fix the height problem though...***has been marked as a duplicate of this bug. ***Mass reassign, sorry for the noise.***has been marked as a duplicate of this bug. ***	10.0	id=749762	7	False	False	mcrha	1
id=246224	REOPENED	evolution	general	3.2.x (obsolete)	Other other	Normal normal	Evolution Shell Maintainers Team	2003-07-13 21:37 UTC by	Eugene O'Connor	2012-06-26 22:02 UTC (	6 users	This is a tracking bug.	Setting a target milestoneRetargetting all 2.0 reports for 1.5.xPlease set new milestone if needed.Retargeting 1.5.2 bug reports to 1.5.3. Sorry for the spamRetargeting 1.5.3->1.5.4 bug reports. Sorry for the spam.None of these are scheduled for 1.5, and we are closing the book onthe UI soon. PuntingApologies for any spam... cc'ing usability-maint on all Evolution usabilitybugs. Filter on EVO-USABILITY-SPAM to ignore.punting to 2.5removing 2.5 milestone, we're under UI and string freeze.changing to 2.7.Closing as OBSOLETE since I don't see anything being tracked here.D'oh, my mistake. Didn't see the dependencies below.	10.0	id=246224	33	False	True	eugene.oconnor	1
id=771740	REOPENED	gvfs	udisks2 volume monitor	1.22.x	Other Linux	Normal normal		2016-09-20 20:24 UTC by	Bjørn Forsman	2016-10-17 06:49 UTC (	2 users	I have an autofs + sshfs mount set up in /etc/fstab (requires systemd): /path/to/sshfs#:/ /home/user/mnt/host.local fuse noauto,_netdev,allow_other,x-systemd.automount,ssh_command=/path/to/ssh_as_user 0 2where "/path/to/ssh_as_user" is: #!/bin/sh exec "/path/to/sudo" -i -u "user" "/path/to/ssh" "$@"The problem is that gvfs-udisks2-volume-monitor continuously activates the autofs mountpoint: systemd[1]: Set up automount home-bfo-mnt-ul30a.local.automount. systemd[1]: home-bfo-mnt-ul30a.local.automount: Got automount request for /home/bfo/mnt/ul30a.local, triggered by 2225 (gvfs-udisks2-vo) systemd[1]: home-bfo-mnt-ul30a.local.automount: Got automount request for /home/bfo/mnt/ul30a.local, triggered by 2225 (gvfs-udisks2-vo) systemd[1]: home-bfo-mnt-ul30a.local.automount: Got automount request for /home/bfo/mnt/ul30a.local, triggered by 2225 (gvfs-udisks2-vo) systemd[1]: home-bfo-mnt-ul30a.local.automount: Got automount request for /home/bfo/mnt/ul30a.local, triggered by 2225 (gvfs-udisks2-vo) systemd[1]: home-bfo-mnt-ul30a.local.automount: Got automount request for /home/bfo/mnt/ul30a.local, triggered by 2225 (gvfs-udisks2-vo) systemd[1]: home-bfo-mnt-ul30a.local.automount: Got automount request for /home/bfo/mnt/ul30a.local, triggered by 2225 (gvfs-udisks2-vo) systemd[1]: home-bfo-mnt-ul30a.local.automount: Unit entered failed state.This is undesirable.On the GVFS mailing list I was informed about the "x-gvfs-hide" mount option, or to put the autofs mountpoint somewhere else, where GVFS doesn't consider to auto-mount. But still it seems like a bad idea to have the current behaviour as default.(Also, for native systemd .mount and .automount units, the "x-gvfs-hide" mount option doesn't work, presumably because GVFS only looks in /etc/fstab and not in the systemd units.)Best regards,Bjørn Forsman	Thanks for your bug report.The following code determines which mounts are shown and which are not:There is a logic, which tries to determine which mount points are user interesting and which are not. User interersting mounts are usually in "/media", "/run/media/$USER", "$HOME", or has "x-gvfs-show" option. Different paths cause that mounts aren't considered as interesting, same for "x-gvfs-hide" option.User interesting mounts are usualy automounted by gnome-shell, if "noauto" option is not specified. See "should_automount" property in "gvfs-mount -li" output. I don't think that we can just generally ignore all autofs mounts, it could be handy to have some of them in Nautilus sidebar, however we have to be sure that GVfs doesn't cause automounting/activating of them...Let's imagine your /home/user/mnt/host.local mount point. This mount isn't hidden, because the mount point is considered as user interesting (this is intended). I think this is right and you can change it by "x-gvfs-hide". It should not be also automounted by the gnome-shell, because "noauto" is used. I wonder why you see the following (this isn't intended):systemd[1]: home-bfo-mnt-ul30a.local.automount: Got automount request for /home/bfo/mnt/ul30a.local, triggered by 2225 (gvfs-udisks2-vo)I configured one nfs mount with "x-systemd.automount" option and one using the ordinary "/etc/auto.master" file, I can see them in the UI, however they are not automounted. I see only the following automounts, but it seems they are not caused by GVfs:systemd[1]: media-test.automount: Got automount request for /media/test, triggered by 3900 (pool)Can you please attach output from "gvfs-mount -li" and "/etc/mtab"?(GVfs is not looking only in "/etc/fstab", it uses GLib for listing available mounts, I think it is based on "/etc/mtab" at this point. Therefor, GVfs should see mount options specified by "Options=" directive in the unit file... can you please attach your unit file and output from "/etc/mtab" if it doesn't work for you?)Right. I cannot reproduce the bug at the moment, presumably I did a mistake earlier. "Options=x-gvfs-hide" works in the .unit file now.(I'll create the attachments now.)CreatedOutput of "gvfs-mount -li"CreatedCopy of /etc/mtabI am finally able to reproduce it and see what is wrong with autofs. The difference with autofs in comparison with ordinary mounts is that the mount always exists (you can see it in "/etc/mtab"), but do not have to be really mounted. However, gvfs-udisks2-volume-monitor thinks that it is really mounted if the mount exists... Consequently, the following code is called which looks for some files on that mounts (e.g. autorun.inf, .xdg-volume-info), which causes the unwanted automounts for autofs...Hmmmm, we can skip this functionality for autofs, but maybe the right solution is really to ignore all the autofs mounts :-/I guess that's the problem right there. It shouldn't consider an autofs mountpoint as a "mount". It should wait until the real filesystem is mounted:$ mount | grep ab9.localsystemd-1 on /home/bfo/mnt/ab9.local type autofs (rw,relatime,fd=32,pgrp=1,timeout=0,minproto=5,maxproto=5,direct)$ ls -l /home/bfo/mnt/ab9.localtotal 64drwxr-xr-x 1 root root 4096 sep. 18 15:17 bin[...]$ mount | grep ab9.localsystemd-1 on /home/bfo/mnt/ab9.local type autofs (rw,relatime,fd=32,pgrp=1,timeout=0,minproto=5,maxproto=5,direct):/ on /home/bfo/mnt/ab9.local type fuse.sshfs (rw,nosuid,nodev,relatime,user_id=0,group_id=0,allow_other)Createdudisks2: Use device path to match mount points alsoMount path is used to match mount points currently, however devicepath should be used also in order to be sure it is really correspondingmount point. Same mount path can be used for multiple mount entries(it is also used e.g. for autofs).$ mount | grep /media/testsystemd-1 on /media/test type autofs ...localhost:/home/oholy on /media/test type nfs4 ...Createdudisks2: Filter out system mountsSystem mounts (i.e. autofs) can be considered as user interestingcurrently if mount paths are user interesting. However, we shouldnot handle those mounts as GMounts, because consequently redundantmounts are offered by volume monitor. It also causes automounts ofautofs filesystems.$ mount | grep /media/testsystemd-1 on /media/test type autofs ...localhost:/home/oholy on /media/test type nfs4 ...pushed as- udisks2: Use device path to match mount points alsopushed as- udisks2: Filter out system mountsOndrej, thank you!The above commit from this issue seems to be causing regressions as seen in these two gvfs bug reports:Yes, you are right, unfortunately. I've already reverted the patches causing various issues (,,).Review of:should_include() is never called and thus x-gvfs-show is not handled...Review of:It doesn't work with LABEL=, UUID=...	14.0	id=688975	9	False	False	swilmet	1
id=733791	REOPENED	glib	gsettings	unspecified	Other All	Normal normal	Allison Lortie (desrt)	2014-07-26 15:48 UTC by	Allison Lortie (desrt)	2015-09-01 15:02 UTC (	11 users	GSettings objects begin watching for changes as soon as they are createdin order that they can emit the "changed" signal.In the case of dconf, if we want to be able to emit the changed signal,we need to go on the bus and add some match rules. This requirescreating the dconf helper thread and also requires initialising GDBus(which creates another thread).Some users of GSettings are never interested in the "changed" signal.One of these users is the glib-networking code that gets run every timea new network connection is created.Some users are reporting that they are annoyed that simply establishinga network connection would spawn two extra threads and create a D-Busconnection.In order to avoid doing unnecessary work for these simple uses, delaythe subscription until we know that we will actually need to do it.We do this in a simple way, using a simple argument: in order for theuser to care that a value changed then they must have: 1) watched for a change signal; and then 2) actually read a valueIf the user didn't actually read a value then they cannot possibly beinterested in if the value changed or not (since they never knew the oldvalue to begin with and therefore would be unable to observe that itever changed, since they have nothing to compare the new value with).This really is a behaviour change, however, and it does impact at leastone user: the 'monitor' functionality of the GSettings commandline tool,which is interested in reporting changes without ever having known theoriginal values. We add a workaround to the commandline tool in orderto ensure that it continues to function properly.It's also possible to argue that it is completely valid to have read avalue and _then_ established a change signal connection under the(correct) assumption that it would not have been possible to miss achange signal by virtue of not having returned to the mainloop.Although this argument is true, this pattern is extremely non-idiomatic,and the problem is easily avoided by doing things in the usual order.We never really talked about change notification in the overviewdocumentation for GSettings, so it seems like now is a good time to addsome discussion, including the new rules for when one can expect changesignals to be emitted.	CreatedGSettings: delay backend subscriptionReview of:Interesting. Thanks.pushed as- GSettings: delay backend subscription***has been marked as a duplicate of this bug. ***This made Alberto sad.Let's see if we can do a better job by fixing.Hello,Unfortunately commitalso gave me a :| as well, as this broke the registry GSettings backend (the one used on Windows). This caused GTK+3.x demos that retrieved GSettings items crash due to an Access Violation. I openedfor that.With blessings, thank you!(In reply to)I don't think this is true...and you actually found a counterexample yourself a few lines later!(In reply to)Reviews welcome onin order to facilitate my abandoning my weak arguments :)A little late... but this troubles me a bit... so to get change signals, you have to really want it now, and you have to perform multiple steps in a particular order, or else there's no guarantee you'll get those callbacks.What about the many many programs out there that group _connects together for readability - this first section if my _init function is for reading my settings and initializing widgets or whatever, and at the end let's connect all our callbacks at once (it looks more organized, particularly when you look at _dispose or _finalize and the signal disconnects are all grouped together as well.Also, and perhaps a bit of over-caution/superstition on my part, I tend to want to set up my object *first* before listening for changes that may affect it, to make sure things are in a good state to receive those changes (which could occur outside the current thread.) I'd prefer not to add an extra superfluous read just to say 'Yes, I really really want this callback to work.'Couldn't we keep the old behavior as default, and offer a property that can be set on GSettings to enable the new behavior for the cases where it is an issue? It just seems that this new behavior opens huge regression potential for unsuspecting programs, particularly if the developer doesn't stay on top of glib changes.ThanksI'll add that I don't see any reason why you have to wait for the user to read a value before starting to listen. If someone connects to the signal, then I'm pretty sure they want to connect. This additional check is completely unintuitive and prone to causing trouble.Okay sorry I see that GObject doesn't provide a way to know when users are connecting to a signal. But I'll concur with mtwebster that this behaviour should be opt-in instead of default since it is not intuitive and not everyone is going to read through the long gsettings documentation (and it breaks backwards compatibility).One last argument.. (sorry!)Everything we do here is about events and responses to those events. I know if I want to be notified something has changed, I connect to the appropriate signal and can count on being told about it. I can look at code I'm completely unfamiliar with, but if it uses GObject, I will have an immediate partial understanding, and a huge head start on figuring out what's going on. I can trust in this behavior - I can take this stuff to the bank.But now we've introduced a case where some of our assumptions are potentially invalid, depending potentially on how we've organized our program, or whether we made sure we were *really* interested in this signal. If I'm the guy coming into a project, seeing unfamiliar code, I can no longer assume that if I connect to a signal, I can count on my callback being run.I know I'm drawing it out to a slight extreme, but it just doesn't "fit."I'll admit I only read through the first post here for a description of the reason for this change, but if at all possible I think this should be some new api or subclass of GSettings - GSettingsStatic maybe... without change event handling, you can only set or get (or define that by a constructor argument.)Ok ok I'll shut up now - thank you!Correction to above suggestion - I suppose you'd have to make GSettings the subclass or else you're inheriting signals (and the assumption of inherited behavior behaving), or simply create a new class for this simpler behavior.It's a very bad decision.After connected signals and run g_main_loop, We should be able received signals. If this convention has been broken, what else can be guaranteed? Especially, there hasn't any explain in document and gsettings monitor is workable! The gsettings can be used to share configuration datas. This meanings some programs many only do actions when configuration has been changed.There has many "gsettings monitor" code style, we have at least two weird bug caused by this. And thanks you guys has explained this in commit messages. But many application developer can't find this.Hi,Sorry to comment so late on this.This change can potentially break any application using gsettings in very random ways. Nobody is ever going to review all that code in so many apps so if we let it in, we could be exposed to regressions in many places and it could take years to match feedback from novice users with the actual cause of the issue. We'll have no choice but to patch Glib to avoid that.We're also reluctant to "fix" this downstream and in isolation for the software we maintain while thousands of other packages might potentially be affected as well. We'll be directing bug reports here instead since this is indeed a regression in Glib.I hope the case fixed by Ryan can be fixed some other way and without impacting the existing functionality (we rightly assume connect() to always actually connect, if a particular case needs a different behaviour why not introduce a new function in the interface?).(In reply to Clement Lefebvre from)The problem that we are trying to solve here is that every g_settings_new() call causes quite a bit of overhead, including installing dbus filters, etc. Adding new API is not an effective way to address that.(In reply to Matthias Clasen from)How about a new constructor function that doesn't connect? Say g_settings_new_static()?This overhead is incurred at g_settings_backend_subscribe() which tells the backend we're interested in changes.Why not an opt-out constructor (as mentioned, new_static()) which skips the subscription?Pros:- simpler change than the original patch- backward compatible- opt-in behaviorCons:- nothing is preventing anything from still connecting to these signals - they'll just never do anything. Though, if you opted in to this behavior, you're already aware of this.- is a bit hackish since we now have a class with two different types of behavior possible (though still way better than having a class that doesn't obey the accepted GObject principles..)Createdrough/incomplete patch proposalComment onrough/incomplete patch proposalNote this diff is with the original patch (and a subsequent fix) already revertedSeeI am under the impression that a majority of the use case of gsettings is interested in listening to value changes, and most of the time the overhead caused by listening is insignificant compared to everything else that is going on. In performance-critical situations, they can opt in to use the new constructor. I believe this is a superior solution than breaking every application using gsettings out there.Okay, what about a different approach.. you're now using g_settings_get as a way of knowing someone's interested in these signals. What if GObject had a new overridable method could notify that someone is interested? if (class->notify_handler_added) class->notify_handler_added()).Then, the actual connecting that signal could trigger the backend subscription, instead of requiring an additional step from the client.This has the potential to be useful in many other situations I would imagine.(In reply to dalcde from)I agree with this. We can clearly change the glib-networking code to use this.(Although of course - any time one is retrieving a gsetting but *not* listening for changes, you have to ask "why not"? In this case of course I doubt users would expect existing network connections to break and restart when the proxy is changed...but one could imagine a future in which you can say your connection is stateless and handle it)(In reply to Michael Webster from)It's not trivial (otherwise we would have already had it); there are various subtle race conditions lurking there, alongside a bunch of locking nightmares. It's not a simple job. See also:(In reply to Matthias Clasen from)I talked to the MATE Gentoo maintainer today. Their settings daemon no longer react to theme changes.On our sides I think we've seen 5 different issues in Cinnamon alone.The problem you solved is a problem we never heard users complain about. Yet the solution brought here creates real problems all over the place.It's easy to workaround this glib regression by artificially reading gsettings values we don't need, or by re-factoring code slightly to meet the demands of a now more-fussy and less-reliable API. I'm worried this just contributes to hiding a real issue here though.Once we fixed the most obvious breakages caused in MATE and Cinnamon, who's to say how long it might take until user feedback highlights other affected areas? and what about other projects where maintainers/developers are less active or less prone to understand the link between what looks like an application bug and this regression in glib?It doesn't seem worth the gain at all.Would you considering reverting this change until you find a way to fix that overhead without creating such regressions?We've been refusing issues and pull requests for workarounds so far in the hope that this gets fixed upstream, and recommending maintainers patch glib instead to have a functional system until a resolution is found.I've been ignored for more than a month, so I guess it's time for me to be pragmatic.In Cinnamon we'll start accepting PRs and implement changes to make gsettings' connect() work again for users of other distributions.In Mint, if we want to be rigorous, we should patch and revert your change to avoid this regression hitting software that hasn't been "fixed" a posteriori. I guess we'll see how this affects other distributions first.Long term, you need to respect backward compatibility and existing code. If you want to change something that breaks the current ecosystem, then please bump the API/lib/version of what you're doing so that it doesn't impact what's already there.We're faced with numerous critical bugs, you're merely optimizing things and yet you don't seem to care about the regressions this is causing. Downstream we don't have much choice. Everything has to work. We can't rely on something which design doesn't take us into consideration. What are we to do when you don't react to feedback?My preference is to revert and add a new API.I concurI've reverted these changes for now. We can try again next cycle, either with snooping on signal connections, or by adding explicit notification-free api.+1 on the signal thing. No extra API here please.It's worth noting that I plan for GSettings to get a bit more clever about change notifications in the future and it will very much be in the direction of this patch. For example, when we do 'dconf update' and "/" changes, we emit changes for all of the things, even if they didn't actually change....This "/ changed" business also happens if we race the async establishment of a watch against a change happening to the database, since we have no idea what the change was. This sometimes happens on login (due to unfortunate login-time writes that we can never seem to get rid of for good). In this case we'd only emit the change signal if the change actually impacted one of the watched keys.Many thanks Matthias & Colin.Desrt, we noticed random change signals during the login sequence for values which hadn't changed. To prevent this from causing issues and/or crashing components, we're very careful not to connect to changes "too early" in the session :)	32.0	id=773691	8	False	False	gnome.vrb	1
id=688975	REOPENED	website	git.gnome.org	current	Other Linux	Normal normal	GNOME Web maintainers	2012-11-24 13:51 UTC by	Andreas Nilsson	2017-01-26 19:17 UTC (	3 users	We have a Owner column on git.gnome.org, but it's empty.	Now the owner column shows the programming language…This was changed to the programming language a while ago. That's intentional to make contributing easier.Don't you think there is a little problem with the column title…?(In reply to Olav Vitters from)Yes, and I think that is a great change.However, while the content was changed from Owner to Language, the header still says Owner. The header needs to be changed from Owner -> Language.(In reply to Sébastien Wilmet from)(In reply to Andreas Nilsson from)Please show me the configuration option and I'll happily change it!Sounds great, I'll take a look.Correct me if i'm wrong, but this can't be changed without patching cgit. "Owner" header is hardcoded on the code [1], and there's no config option to change it.[1]Does git.gnome.org use cgit vanilla?Standard RHEL package. Critical as we automatically get security patches, etc.$ rpm -q cgit -iName : cgit Relocations: (not relocatable)Version : 0.12 Vendor: Fedora ProjectRelease : 1.el6 Build Date: Sat 16 Jan 2016 05:19:34 PM UTCInstall Date: Tue 02 Feb 2016 04:12:17 AM UTC Build Host: buildvm-05-nfs.phx2.fedoraproject.orgGroup : Development/Tools Source RPM: cgit-0.12-1.el6.src.rpmSize : 1128620 License: GPLv2Signature : RSA/8, Sun 17 Jan 2016 02:32:55 PM UTC, Key ID 3b49df2a0608b895Packager : Fedora ProjectURL :Summary : A fast web interface for gitDescription :Cgit is a fast web interface for git. It uses caching to increase performance.	9.0	id=739424	19	False	False	ajacoutot	1
id=773691	REOPENED	gtk+	.General	3.22.x	Other Linux	Normal normal		2016-10-30 07:24 UTC by		2016-12-18 18:05 UTC (	2 users	(gdb) bt	without some more information, there's not much that we can do with thisA different stack trace. But, with the same program and circumstances and on the same widget "GtkScrollbar".Core was generated by `/home/dev/source/git/rhythmbox/shell/.libs/rhythmbox'.Program terminated with signal SIGSEGV, Segmentation fault.The crash is 100% reproducible with the following rhythmbox plugin.Install and enable plugin in rhythmbox. Selecting 'Radio Browser' in rhythmbox side pane should generate the crash.(In reply to vrishab from)dev@unstable:~/source/git/rhythmbox$ shell/rhythmbox sys:1: Warning: g_param_value_set_default: assertion 'G_IS_VALUE (value)' failedsys:1: Warning: /build/glib2.0-m2w47E/glib2.0-2.50.2/./gobject/gtype.c:4264: type id '0' is invalidsys:1: Warning: can't peek value table for type '<invalid>' which is not currently referencedSegmentation fault (core dumped)Another similar crash:(gdb) bt(In reply to vrishab from)Selecting should rather be "Doubling Clicking"	6.0	id=733791	19	False	False	lars	1
id=739424	REOPENED	glib	gio	2.43.x	Other FreeBSD	Normal normal		2014-10-30 19:41 UTC by	Ting-Wei Lan	2016-03-02 23:33 UTC (	9 users	gnome-shell and other GNOME apps, such as evolution, crashes when any files are added, deleted, or modified in $(prefix)/share/applications. This is very annoying because I often get a gnome-session-failed when the package manager or JHBuild is running.GLib version: 2.43.0-2-gb3e3ed7 (git describe --long)I find this bug on FreeBSD 10.1, but I think it is not specific to FreeBSD because I also get a lot of crashes when running yum in Fedora 20. An OpenBSD GNOME package maintainer also told me he always upgrade packages in the text console because of this problem.After trying to debug gnome-shell, I guess this problem may come from GAppInfoMonitor. To ease the debugging of this problem, I wrote a very simple problem to reproduce the bug:#include <glib.h>#include <gio/gio.h>int main (int argc, char *argv[]) { GMainLoop *loop = g_main_loop_new (NULL, TRUE); GList *apps = g_app_info_get_all (); GAppInfoMonitor *monitor = g_app_info_monitor_get (); g_main_loop_run (loop); return 0;}This program also crashes when anything under $(prefix)/share/applications is modified. It may crashes with Bus error or Abort trap. I guess it is caused by a GFileMonitor which is used after it has been freed.When it crashes with Bus error in g_file_monitor_emit_event, the value of monitor is:{parent_instance = {g_type_instance = {g_class = 0xaaaaaaaaaaaaaaaa}, ref_count = 2863311530, qdata = 0xaaaaaaaaaaaaaaaa}, priv = 0xaaaaaaaaaaaaaaaa}When it crashes with Abort trap in g_mutex_lock, I see this message on my terminal:GLib (gthread-posix.c): Unexpected error from C library during 'pthread_mutex_lock': Invalid argument.The invalid argument error comes from pthread library because the mutex passed in pthread_mutex_lock equals THR_MUTEX_DESTROYED. Source code is available here:(line 305, macro CHECK_AND_INIT_MUTEX)Therefore, I set a watchpoint on (*((GObject*)monitor)->ref_count) to get notified when g_object_ref or g_object_unref is called. The following backtraces are obtained when the ref_count of the GFileMonitor is changed.ref_count: 0 -> 1 ()The GFileMonitor object is created and kept inside gdesktopappinfo.c with global static variable.To test the problem, I create and remove an empty file in $(prefix)/share/applications:$ touch /home/lantw44/gnome/devinstall/share/applications/abc$ rm /home/lantw44/gnome/devinstall/share/applications/abcref_count: 1 -> 2 ()The reference is explicitly increased by emit_cb.ref_count: 2 -> 3 ()The reference is increased by g_signal_emit.ref_count: 3 -> 2 ()The reference is decreased by desktop_file_dir_reset, so gdesktopappinfo.c no longer holds a reference now.ref_count: 2 -> 1 ()The reference is decreased by g_signal_emit.ref_count: 1 -> 2 ()ref_count: 2 -> 1 ()ref_count: 1 -> 0 ()The last reference is removed by emit_cb. The object is freed now.ref_count: 0 -> 2863311530Program terminated with signal SIGBUS, Bus error.It seems something still hold a reference to the GFileMonitor ...	That would be me and yes, I can confirm this issue with GNOME 3.14.1 on OpenBSD.I've also seen this on Fedora 20 with GNOME 3.12 but can't reproduce it with the above program. Maybe it's more reproducible when using the underlying file monitor used on FreeBSD and OpenBSD?(In reply to)Yes, I know it is not always reproducible. It is always reproducible on my desktop computer, but it is less reproducible on my virtual machine although the version of GNOME and FreeBSD are the same.It seems g_app_info_monitor_get() is not needed. Calling g_app_info_get_all() can cause it to crash.Can anyone get a backtrace?I try to find where emit_cb and the monitor are added into a GSource.Here is the backtrace I find out by searching the source code and using GDB:One thing to note: GDesktopAppInfo has the monitor fire its events in the GLib worker thread (whereas most users of file monitors have their events go to the main thread). Perhaps the kqueue file monitoring backend is not safe with respect to this.I dug into this a bit more and the situation is pretty bad. The file notification backends have more or less never been threadsafe (despite the API giving the appearance that it was intended to be used from multiple threads).In essence, if someone destroys a monitor just as an event is arriving, you can end up trying to emit a signal on an object that has been finalized (which is what we are seeing here).In the inotify case we get lucky most of the time because inotify does all of its work from the worker thread and that's where GDesktopAppInfo is also freeing things, so there is no race. It could race with other threads, though.In the FreeBSD case we are not so lucky: it notifies from the main thread and GDesktopAppInfo destroys from the worker thread. Trouble comes easy in this case.The only good solution here is to move the backends to make use of GWeakRef with respect to signal dispatches.Seems that this broke back withwhen the concept of a thread-default main context was first introduced. GFileMonitor was updated to dispatch to different threads but the backend code was never cleaned up to actually be threadsafe...***has been marked as a duplicate of this bug. ***Let's reuse this for some more adjustments after the new file monitors landed (since things are still quite broken on FreeBSD).Createdgpollfilemonitor: don't emit after cancellationGPollFileMonitor emits CHANGES_DONE_HINT after CHANGED signals, but itdoesn't check to ensure that the file monitor wasn't cancelled before itdoes that.If the original signal caused the monitor to be unreffed, cancelled anddestroyed, we would still end up emitting an extra signal on it.Avoid that by checking first for cancellation.Createdgpollfilemonitor: send 'changes done' for createsThe new rules of GFileMonitor says that users should expect to see aCHANGES_DONE_HINT following a CREATED as well as CHANGED.Createdkqueue: add a bit of extra paranoia on cancelCancellation of GPollFileMonitor is now handled correctly (in the sensethat no further signals will follow) but let's be extra paranoid anddisconnect our handler anyway, for good measure.There is still some trouble here: the polling file monitor will be created in the default main context in effect at whatever point the monitor was created. This will not be right for monitors started in other contexts (as is the case with the appinfo monitor in the worker thread, for example).There is also a race there: we check for the initial state asynchronously. By the time that returns, a change could already have occurred, and we would miss it.I think it might be reasonable to use g_main_context_invoke() here, but we actually don't have access to the main context from the backend because we don't attach the source until after the start() vfunc returns.Another possibility may be to always use the worker and dispatch events via the source like usual (so that they end up in the correct thread).A final solution is to entirely avoid chaining to the poll file monitor from kqueue and implement the functionality in-place. kqueue already has to scan in order to figure out what changes occurred, so this would not be a substantial growth of that functionality...Not just FreeBSD.OpenBSD and NetBSD suffers from the same issue.Review of:This looks right, as far as cancellation is concerned. But I'm not sure I fully grok the commit message: We seem to be holding our own ref on the poll_monitor all the way from poll_file_timeout to the end of got_new_info, so how could the poll monitor be destroyed before we're done ?Review of:okReview of:looks good to me.(In reply to Antoine Jacoutot from)I have also seen the same (or very similar) issue on OpenIndiana and the latest Solaris.pushed as- gpollfilemonitor: don't emit after cancellationpushed as- gpollfilemonitor: send 'changes done' for createspushed as- kqueue: add a bit of extra paranoia on cancelGood show! Thank you so much! :DThere are still issues not solved by attached patches. I have used the patches since it was posted, but gnome-shell, gnome-software, gnome-terminal, evolution, epiphany, firefox still crash with similar backtraces.$ gnome-shell --versionGNOME Shell 3.18.3$ uname -aOpenBSD bofh.internal 5.9 GENERIC.MP#1870 amd64This bug still affects us here on OpenBSD, doing a pkg_add that touches $(prefix)/share/applications still causes gnome-shell to have an anxiety attack and restart itself.gnome-terminal thankfully does /not/ close from this action, my last gnome3+openbsd test run a year or so ago had me quit using gnome-terminal entirely in favor of urxvt, as losing every open terminal at once was a bit painful. We don't have gnome-software here, evolution is not something I like and epiphany is strangely always otherworldly magnitudes of slower compared to both chrome or firefox so I haven't run it long enough to observe that kind of issue.Cheers!	24.0	id=125250	26	False	False	otaylor	1
id=749762	REOPENED	evolution	Mailer	3.18.x (obsolete)	Other Linux	Normal normal		2015-05-23 09:42 UTC by	Milan Bouchet-Valat	2016-02-15 13:46 UTC (	1 user	I've seen several times Evo restore e-mails that had been sent correctly several hours before it crashed. It looks like the list of e-mails to restore is not cleaned correctly right after sending the e-mail. That's confusing and could prompt people to send the message several times.This is with 3.12.11 on Fedora 21, but it's been that way for some time.	Thanks for a bug report. This is related to a memory leak of the composer, because the autosaved messages are deleted when the composer is freed. I was trying to reproduce this recently, but I failed in it. I guess it is also related to the 3.16.x changes in the composer. I'll appreciate if you could retest with 3.16.2 at least, once you update your Fedora, and report back if you manage to reproduce it.I'm closing this for now, in favor of 3.16.2, but I'll reopen if you find it broken in that version too (then I'll appreciate any steps or details). For easier testing, the autosaved messages are saved as: ~/.local/share/evolution/.evolution-composer.autosave-*files, thus if you finish your message either by sending or by discarding it, the autosave file should be gone.OK, thanks, I'll report back if I see it again.Unfortunately I've just seen it on 3.16.3. I don't have a way of reproducing it, though...If I recall correctly, then it can be that the composer window isn't properly freed. It is for example when some part of the code references it, but doesn't dereference, causing reference count imbalance. The auto-save files are deleted when the composer window is being freed. I wasn't able to identify what I should do to call (and thus identify) the code which adds the reference, but doesn't remove it.I still see this systematically after a crash with Evo 3.18.4.	5.0	id=700338	19	False	False	jstpierre	1
id=125250	REOPENED	gtk+	Widget: GtkNotebook	unspecified	Other Windows	Normal normal		2003-10-22 23:53 UTC by	Tim Van Wassenhove	2012-05-06 21:17 UTC (	12 users	I noticed this while using Gaim. I decided to have all my conversations to be added to the same window. Every time a conversation is started, a tabbed window is added. And i can navigate with the < and > buttons at the end of that tablist.However, if a tab has such a long name, that it is longer than the containing window, the < and > buttons aren't visible anymore.Placing those < and > buttons before the tabnames, would be more usable.	GTK 2.4 allows this via style properties that control the number andplacement of the arrows.Moving the arrows isn't the right solution. Better to ellipsizethe huge label and make things fit. See long discussion in.I'm going to retitle and leave this open becauseis a sprawling mess of a bug.Sorry, those references were meant to be.I'd recommend adding a GtkEllipsizeType enum and an "ellipsize-mode" enumproperty to GtkLabel (and GtkCellRendererText/Progress, IMO), as this behavioris useful outside of GtkNotebook.GtkEllipsizeType { GTK_ELLIPSIZE_NONE, GTK_ELLIPSIZE_START, GTK_ELLIPSIZE_MIDDLE, GTK_ELLIPSIZE_END, GTK_ELLIPSIZE_CUSTOM /* calls a user-supplied function, fallback to NONE */}Doing that nicely (the comments in EEL indicate that EelEllipsizingLabeldoesn't) sounds like the tricky part.CreatedPatch to implement an "ellipsize" property on GtkLabel, using the PangoLayout "ellipsize" property.Is it really necessary to add an extra enum? PangoEllipsizeMode already exists,and GtkLabel already exposes Pango API in gtk_label_set_attributes for example.The patch above uses PangoEllipsizeMode directly, no extra enums. I was simplycommenting on what a possible ellipsization enum would entail.The label property doesn't resolve the notebook issue at all, since GTK+doesn't currently have any code to reduce the allocation of notebooktabs on overflow.Hmm, what did you make the size request reported for the ellipsizedGtkLabel be?It's currently approximate_char_width() * 3.That does in fact not work very well. If I turn on ellipsization on the labelsin the testgtk notebook tabs, the tabs all shrink to "..." even though there isenough space ... We probably need to extend the size allocation algorithm todiscriminate between "requested size" and "minimal size"I think the request-width-chars property should make this work much better.***has been marked as a duplicate of this bug. ***I just used Bugzilla's search function and read this bug -- which is marked as a duplicate of this bug.I think as well that it is extremely annoying behavior in Epiphany that when you have more that 7 tabs open that you have to scroll with < and > to see the other tabs. This way tab browsing is badly usable, scrolling is annoying, I can't see if I opened a new tab if I have a lot of tabs open... so please let GTK shrink tabs and disable the scrolling through tabs.In my opinion this is a very serious issue, please fix this developers.What do you think of applying a solution similar to the one I'm proposing for Evolution's express mode in GtkNotebook itself? Here's the bug:We would make sure the requested size for the tab label is not bigger than a proportion of the allocation of the notebook, set the request appropriately, and set the label to ellipsisize.	14.0	id=775869	14	False	False	dboles	1
id=700338	REOPENED	gobject-introspection	libgirepository	unspecified	Other All	Normal normal	gobject-introspection Maintainer(s)	2013-05-14 20:03 UTC by	Giovanni Campagna	2016-10-23 17:42 UTC (	5 users	Field blobs can be optionally followed by a inline callback blob.While this is horrible (because now field offset computation islinear time), we can't change it now to avoid breaking backwardcompatibility, so change all locations using n * header->field_blob_sizeto use the new field offset helper.	Createdgirepository: fix offset computation with callback fieldsReview of:Hmm. Ugh =( I wish we could go back and do something like synthesize types at the toplevel. This is really an artifact of the fact that the typelib doesn't nest.Anyways, this is another patch where it'd be *very* useful for me to know what program actually broke. Was it that some library added an anonymous callback to a structure and all of a sudden things started crashing because we were looking at invalid field offsets? If it's that kind of thing, what structure, what change?Hmm. Also it's not just that we're making field offset computation linear, we're also making *method* lookups linear in the number of fields since they come after fields. Eww =/ Not your fault though.So...just marking this as reviewed, let's keep talking about it.::: girepository/girnode.c@@ +817,3 @@ size += _g_ir_node_get_full_size_internal (node, (GIrNode *)field->callback);+ else+ size += - sizeof (SimpleTypeBlob) +The subtraction here looked really strange/wrong to me until I saw we're doing it elsewhere, in e.g. the FIELD case of _g_ir_node_build_typelib(). So...let's keep this as is I guess.This broke in my face when I was debugging, which adds support for g_object_class_* in gjs.It would call g_struct_info_find_method (not g_struct_info_get_method, used by g-ir-generate) on GObjectClass, which is a struct with plenty of callbacks.I don't know if this would bite us should(or a pygobject equivalent) not land, but to me it looks like an incident waiting to happen, especially with structure types. It is less of a problem with GObject types, because usually you just have parent_instance and priv.***has been marked as a duplicate of this bug. ***I am working on making pygobject use lazy resolution of methods. This involves using g_struct_info_find_method() at some points.I haven't finished this work yet, as I haven't got the testsuite passing yet. But I'm making progress. One of the issues that was in the way was a crash, didn't happen every time and could be influenced by meaningless print statements. Running under gdb found it right away though, the bug found here was causing a strcmp() of bad addresses.Please do apply this patch...Blah. Okay, I shouldn't have sat on this one so long. Now we're here at .90. This patch from last I looked was probably correct, but two things make me nervous:1) There's no test coverage of this inside g-i itself2) There can't be test coverage inside the bindings yet since they'd crashI can take a look at doing #1.So I just committed a very similar change in(I should have searched for similar bugs first). The commit did not however change the code for g_struct_info_find_method. Out of curiosity what was the problem with updating g_struct_info_find_method anyhow?FWIW I like Giovanni's approach to sharing _g_base_info_get_field_offset better than what I did. I'd be happy to incorporate that as a refactoring pass if others agree.In terms of linear time for the computation, we could grab one of a 16 bit reserved values on the blob and start writing out "n_field_callbacks" as the number of fields which are also callbacks. Then the computation becomes:// n_fields includes n_field_callbacks (unsure if we'd want this)(n_fields - n_field_callbacks) * sizeof(FieldBlob) + n_field_callbacks * (sizeof(FieldBlob) + sizeof(CallbackBlob))That would at least allow a constant time skip over the fields section for ObjectBlobs when accessing anything after fields. This could work now in a compatible way since callback fields crashed the compiler prior tobeing fixed anyhow...Createdgirepository: Use constant time calculation for sections after Object fieldsAdd "n_field_callbacks" to ObjectBlob which represents the number of objectfields which are also callbacks. This a allows a constant time computationfor accessing sections after fields. Track writing of this field by passingan extra argument through the girnode writers recursive call structure. Thisessentally reverts a portion of commitwhich added a lineartime computation for accessing sections after fields.Update typelib validator to also ensure n_field_callbacks is properly set.Notes:I verified the PyGObject test suite works well with this: Regress.TestObj is heavily relied on and problems here causes everything to break. Still if this approach seems ok, it would be a good idea to add more callback fields to TestObj which are also interleaved with regular fields to be more thorough.[Mass-moving gobject-introspection tickets to its own Bugzilla product - see. Mass-filter your bugmail for this message: introspection20150207 ]Review of:(Sorry I never got around to review this, in more than one year...)I think this makes sense to me.Review of:::: girepository/giobjectinfo.c@@ -77,3 @@- if (field_blob->has_embedded_type)- offset += header->callback_blob_size;- }Can we preserve this function, just make it constant time again? Would reduce the diff noise.Actually nevermind, that previous comment doesn't really make sense.But...we aren't handling the case where there are intermixed fields and callbacks, right?struct foo { guint x; void (*foo) (void); guint y;}?There's not really a good reason to do this. I suspect it exists though. Could possibly query gir files for this.Review of:OK, I reworked this patch to preserve the get_field_offset() for field lookups, but return everything else to constant time.(In reply to Colin Walters from)Indeed this was a bug, nice catch.At this point the patch may cause a compatibility problem. Note from:"This could work now in a compatible way since callback fields crashed the compiler prior tobeing fixed anyhow..."That statement is no longer true since over a year has passed. typelib files created between then and now with field callbacks will have n_field_callbacks set to zero. Skipping over the fields section worked due to the linear search for fields with "has_embedded_type". With this removed, the typelibs will not be compatible with new versions of gi which are expecting n_field_callbacks to be correct.Sorry for not giving a clearer warning in the original patch. Does this need to be backed out or can we bump the typelib version and add backwards compatibility?(In reply to Simon Feltman from)Oh, ugh. Maybe we can support both typelib formats, and increment the minor version?We don't have any really good way to test this stuff at the moment =/ Maybe --format-version=4.0 for g-ir-compiler?Simon, do you want to take this? I can take a look possibly if not.(In reply to Colin Walters from)Sure, I can take a look. Is idea with "--format-version" that we would be able to write out the earlier version in our test suite, then verify it loads and offset calculations work correctly?(In reply to Simon Feltman from)Something like that; we don't necessarily have to do this now, it could be tested by hand (old copy of g-ir-compiler).It looks like g_struct_info_find_method is still broken for class structs due to the problems described here. For example, it crashes when you try to find "find_style_property" on GtkWidgetClass. I attach a patch that fixes the problem for me by mimicing what g_struct_info_get_method does (calling g_struct_get_field_offset). But I don't know if this a complete fix; in particular, I don't have a clear understanding of the backwards compatibility concerns you discussed.Createdg_struct_info_find_method: fix offset computation	21.0	id=754149	19	False	False	abono	1
id=775869	REOPENED	gnome-session	general	3.22.x	Other Linux	Normal normal	Session Maintainers	2016-12-09 09:49 UTC by	Alexander Korsunsky	2017-01-19 17:21 UTC (	2 users	Pressing Control-Alt-Delete (default gnome shortcut) launches the shutdown dialog and focuses the Shutdown entry. That's convenient, since I have to only press the enter key to initiate shutdown.But 2 seconds later, another identical dialog pops up *under* it, which draws the focus away from the top dialog, and requires me to use the mouse.Furthermore, I have to click the cancel button twice in order for the dialog to go away.This happens with the following applications: * Chrome * Firefox * Dropbox * VLC (but also closes it)It does NOT happen with most applications, including these: * gnome-control-center * Nautilus * Rhythmbox * LibreOffice Writer, Impress, Calc * geditHow reproducible:Every timeSteps to Reproduce:1. Open Firefox or Chrome or one of the other programs mentioned above2. Press Control-Alt-Delete3. Wait 2 seconds4. Observe a brief flicker and that the focus goes away5. Click "Cancel"Actual results:Two shutdown dialogs on top of each other are shown. The brief flicker in between the dialogs is the expanded dialog with the message: "Some applications are busy or have unsaved work", this can only be seen by stopping the screen recording at the right time.Expected results:Only one dialog is shown, focus is on the Shutdown button.Additional info:Note that this happens only with the default GNOME keyboard binding.Only one dialog is shown when: - I run `gnome-session-quit --power-off` a terminal or from the Alt-F2 prompt - From the gnome menu shutdown buttonA workaround is to unbind the Ctrl-Alt-Delete shortcut, create a custom shortcut that runs `gnome-session-quit --power-off` and bind Ctrl-Alt-Delete to that.	CreatedScreen recording of the behaviour after pressing control-alt-deleteThis is presumably related to Joanmarie's accessibility problem noted here:I'm adding the accessibility keyword because, like that, this report sounds like it could seriously hinder users for whom mouse is not a option.This was tracked down to gnome-session and supposedly fixed in 3.22. If it still happens for you under some circumstances, it's still highly unlikely that it's now a gnome-shell issue.*** This bug has been marked as a duplicate of***(In reply to Florian Müllner from)Yes, it still happens to me under GNOME Version 3.22.2. It happens under clearly defined circumstances (described above), under a fresh install of Fedora 25 in a VM, 100 % of the time.Well, if it's not a gnome-shell issue, then what is it? The keyboard handling is in gnome-shell, the shutdown code is also in gnome-shell, isn't it? Anyway, feel free to reassign the component if you are sure that the bug is not in gnome-shell.Not quite sure why, though. On the other bug, you commented:Doesn't that mean that this (#775869) bug is separate from the other one (#728151), according to you?Sorry, I'm a bit confused right now.(In reply to Alexander Korsunsky from)It's complicated:gnome-settings-daemon asks gnome-shell to grab the key combinationgnome-shell signals to gnome-settings-daemon when the key combination is activatedgnome-settings-daemon calls gnome-session's Shutdown methodgnome-session asks gnome-shell to display the end session dialoggnome-shell reports the user's response back to gnome-sessionSo gnome-shell is clearly involved here, but not the only possible source of bugs - unless gnome-shell signals to gnome-settings-daemon that the shortcut was activated a 2nd time after the shortcut was actually activated (unlikely in response to the end-session dialog plus some delay), or gnome-shell shows the end session dialog without having been asked to do so, the bug is elsewhere.Init turned out that gnome-session was actually asking for a second dialog after the first one was dismissed. It's much more likely that this bug wasn't entirely fixed than having a different bug in gnome-shell with identical symptoms, so I reopened the old bug. It's still a guess though, so if you run "dbus-monitor path=/org/gnome/SessionManager/EndSessionDialog" when reproducing the issue and only see a single call to "Open", then the guess was wrong and this bug should be reopened instead.originally reported three issues (a keynav issue, a delay between activating the shortcut and seeing the dialog, and the dialog appearing twice). The bug that was supposedly fixed was the last issue, and Michael suggested to file separate bugs for the other ones in case people can still reproduce them. But this bug is about the dialog being shown twice, which is precisely the one issue thatended up being about ...(In reply to Florian Müllner from)That is indeed complicated. Mind you that I am a mere end-user, have no idea about GNOME project structure, and was just trying to help. Bugzilla asked a component from me, so I guessed and put in a component that seemed sensible. That's why I was kind of hoping that you, having more insight, would reassign the bug to the component that's more appropriate.Here is my output:dbus-monitor path=/org/gnome/SessionManager/EndSessionDialogsignal time=1481305857.619364 sender=org.freedesktop.DBus -> destination=:1.94 serial=2 path=/org/freedesktop/DBus; interface=org.freedesktop.DBus; member=NameAcquired string ":1.94"signal time=1481305857.619403 sender=org.freedesktop.DBus -> destination=:1.94 serial=4 path=/org/freedesktop/DBus; interface=org.freedesktop.DBus; member=NameLost string ":1.94"method call time=1481305859.946122 sender=:1.9 -> destination=:1.14 serial=231 path=/org/gnome/SessionManager/EndSessionDialog; interface=org.gnome.SessionManager.EndSessionDialog; member=Open uint32 1 uint32 0 uint32 60 array [ ]method call time=1481305861.560728 sender=:1.9 -> destination=:1.14 serial=235 path=/org/gnome/SessionManager/EndSessionDialog; interface=org.gnome.SessionManager.EndSessionDialog; member=Open uint32 1 uint32 0 uint32 60 array [ object path "/org/gnome/SessionManager/Inhibitor7" ]So no, it's not a single one, it's two. Not sure what exactly that means, but I hope it helps in debugging.Which is exactly what this bug was supposed to be. I can still reproduce it, so I filed a new, separate one, so I don't quite get why you closed it as duplicate, when people were specifically instructed to create a new bug if the issue persists.Or to quote Michael from(In reply to Michael Catanzaro from)(In reply to Alexander Korsunsky from)It means that gnome-shell is showing two dialogs because gnome-session requests two dialogs. Or in other words: Showing the dialog when asked to is not a bug, gnome-session requesting a dialog when it shouldn't is.Has anyone from the gnome-session had a chance to ponder this?Whereas I couldn't replicate the accessibility problem that Joanmarie mentioned before - after the subsequent attempt to fix this, I now can confirm it: There are still 2 dialogs, and the 2nd is not keyboard accessible.And at the risk of making this even more of a dupe of the closed one, I'm attempting to make the title more inclusive of the various issues here.	9.0	id=742244	10	False	False	jim	1
id=754149	REOPENED	gnome-documents	general	3.17.x	Other All	Normal normal	GNOME documents maintainer(s)	2015-08-26 23:10 UTC by	Alessandro Bono	2015-12-09 11:49 UTC (	4 users	In the properties dialog, the link label isn't aligned with the other text.	Createdproperties: Align the source labelSince GtkLinkButton is a button, it has some extra padding.Using a GtkLabel with markup we have the same functionalitywithout the extra paddingLooks good, pushed to master.pushed as- properties: Align the source labelReopening.While this fixes the horizontal alignment issue (thanks for that!), it introduces a vertical size issue. Property dialogs that don't have a GtkEntry (eg., remote items) have thinner rows now.CreatedRevert "properties: Align the source label"This reverts commit.Createdstyle: Align the source labelInstead of using a GtkLabel with markup, remove the extrapadding with css(In reply to Debarshi Ray from)Could that be fixed with a vertical size group instead of reverting to buttons?(In reply to Cosimo Cecchi from)A vertical size group might work, but it would need a hack. Since we want to retain the height of the rows across all kinds of dialogs (with and without GtkEntries), we have to always add a row with a hidden entry for that.Got it; feel free to revert to buttons then :-)I think you should remove padding from both sides though, or RTL might break.Createdproperties: Port to templatesCreatedproperties: Make all rows with the same heightCreatedproperties: Port to templatesReview of:Thanks for the port, Alessandro.There is one unsolved problem in dialogs that have an entry, but not a creation date. eg., a local collection. There is too much space between the rows. I think something is causing the GtkGrid to expand vertically.::: data/ui/properties-dialog.ui@@ +45,3 @@+ <property name="orientation">vertical</property>+ <property name="row_spacing">6</property>+ <property name="column_spacing">24</property>I would suggest setting row-homogeneous to TRUE here. Otherwise, even dialogs with a GtkEntry become shorter. Actually, the way you have arranged the widgets, I think, making the rows homogeneous is enough to ensure that rows have the same height with or without the GtkEntry.Removing the column-homogenous is OK, because I do not know how it worked the way it did till now and it looks better without it. Even then, we should mention it in the commit message.@@ +184,3 @@+ <property name="visible">True</property>+ <property name="can_focus">False</property>+ <property name="orientation">vertical</property>The GtkGrid needs to have valign=center. Otherwise, titleEntry/titleLabel won't be aligned in dialogs without a creation date.@@ +192,3 @@+ <property name="valign">center</property>+ <property name="hexpand">True</property>+ <property name="vexpand">True</property>Don't set the valign and vexpand here.@@ +206,3 @@+ <property name="no_show_all">True</property>+ <property name="valign">center</property>+ <property name="vexpand">True</property>Ditto.::: po/POTFILES.in@@ +10,3 @@ [type: gettext/glade]data/ui/preview-context-menu.ui [type: gettext/glade]data/ui/preview-menu.ui+[type: gettext/glade]data/ui/properties-dialog.uiAnd we can remove src/properties.js.::: src/properties.js@@ +54,2 @@ let toplevel = Application.application.get_windows()[0];+ this.parent({ transient_for: toplevel, use_header_bar: 1 });'true', not '1'@@ +89,3 @@+ this._author.show()+ this._authorData.show();+ this._authorData.set_text(doc.author);We usually call show after setting the text.@@ +140,3 @@+ this._dateCreatedData.set_text(dateCreated.format('%c'));+ this._dateCreatedData.show();+ this._dateCreated.show();This is missing from InternalChildren.Createdproperties: Port to templatesI addressed the above issues, but we still need to figure out why things are expanding vertically for local collections.Createdproperties: Port to templatesColumns are no longer set to homogeneous because we don't want the leftcolumn to be as wide as the right. Earlier, we had a gutter of emptyspace on the left edge, which becomes even wider when used withtemplates.Rows aren't set to homogeneous as well because in some dialog there istoo much space between them. The right visual effect will be obtainedusing a GtkSizeGroupCreatedproperties: Make all rows with the same heightCreatedproperties: Make all rows with the same height(In reply to Bastien Nocera from)This stops the rows being overly big if there's no text entry in the panel.	17.0	id=130581	5	False	False	parrenin.frederic	1
id=742244	REOPENED	geary	ux	master	Other Linux	Normal normal	Geary Maintainers	2015-01-02 22:46 UTC by	Jim Nelson	2016-04-21 04:35 UTC (	4 users	As pointed out in(and elsewhere), "Notify of new mail at startup" is not the best explanation for what that option does (i.e. starts Geary at login with a hidden window so it can notify of new mail).Some kind of better text explanation, possibly with a tooltip, would be welcome here. I would like to avoid the technical-sounding "Run Geary in the background".	Suggestion: "Notify of new mail when Geary is not open"?I'll admit that I didn't know what this option did. I assumed "startup"referred to Geary, not the system. The simplest change would be to say "Notifyof new mail at system startup". But maybe something like "Watch for new mailat login" would be better.I like the positive-action of Robert's suggestion. How about "Watch for new mail when logged in"?I think my suggestion is more clear ("logged in to what?"), but Robert's is a big improvement over the current text so +1 from me FWIW.I didn't like the login term either...I think that's why we went with "startup" originally.Two new proposals from me:"Notify of new mail when closed" with the tooltip "Geary will run in the background and watch for new mail" The hope here is if the primary text isn't sufficient, the tooltip will answer the question. This is Michael's text but trimmed a bit and avoiding the negative.If we're comfortable with people understanding "background" in this context, my other proposal is "Run in the background and notify of new mail" with no tooltip.I made a command decision and went this this:"Always watch for new mail"with the tooltip:"Geary will run in the background and notify of new mail"More than happy to keep discussing this, but I'm closing this for now.Pushed to master, commit acd3f0***has been marked as a duplicate of this bug. ***hi Jimthx for the best email client on linux!when i saw "Always watch for new mail" in the Preferences dialog it's purpose was very unclear to me. i thought, "of course i want to always watch for new mail! What else?"So i activated it. Later i noticed geary was launching on system boot. I found this very annoying, as i do not appreciate non-system apps which start on system boot without my knowledge or permission. Your verbiage "Always watch for new mail" did not communicate to me that it really means "launch geary on system boot." As a user, this seems at best like a completely inaccurate and unclear choice of words, or at worst an attempt by the developers to trick users to launch gear at system boot. Please change "Always watch for new mail" in the Preferences dialog to "Automatically start geary on operating-system startup." I cannot speak for other users, but i really appreciate alert messages which say what they mean. thx!also, as a result of geary starting without my permission, i had to come here to the bug reporter to say "hey guys, geary is starting without my permission, please don't do that, provide an option in preferences to start on boot". thxI see two problems with "Automatically start geary on operating-system startup."1) Users may interpret this to mean that the geary window will be started and feel it is broken that they still have to "launch Geary" to see their mail.2) This option also keeps Geary from exiting when the main window is closed."Always watch for new mail" is a good description; we just have to figure out how to emphasize that "always" really means "always".Did you notice the tooltip on this option when you first played with it? I wonder if a longer description there would be of any help or not.i need to state this more firmly, so the devs understand how strong i feel about this (and i believe other users will too): i object to an extreme degree to software which loads on boot without my knowledge or permission. I'm not talking about core OS libraries and such. Geary is not a core OS lib. as far as i am concerned, user-software which loads without my permission or knowledge is treating me with DISRESPECT. And i believe a lot of linux users (unlike windows users) will feel the same. the reason i HATE windows is because it is loaded with lots of that kind of JUNK. I'm not saying geary should not run on boot-- only that the users have a right to know. The verbiage you are suggesting is not just "user-friendly"-- it's MISLEADING and DISHONEST. Maybe you don't intend that, but it is. Any software that MISLEADS me about what it is doing is UNTRUSTWORTHY. What else are you lying to me about? Harvesting my contacts for spam? Installing malware on my computer?Until geary tells me HONESTLY what it is doing in the background of MY operating system, i will express myself on this topic. Robert Schroll [geary developer] wrote:"Users may interpret this to mean that the geary window will be started and feel it is broken that they still have to "launch Geary" to see their mail." --- Then you can say "Run geary in the background on system boot, to alert you on new emails?" In which case, geary SHOULD display an icon in the system tray. Robert Schroll [geary developer] wrote:"This option also keeps Geary from exiting when the main window is closed." --- No it doesn't. Saying something in a dialog box does not make geary do anything. It's just a user-message. However, geary will keep running in the background, if that's how you program (REGARDLESS of what verbiage you use in preferences). What i think users would appreciate is an additional preference: "Keep geary running in taskbar on close yes/no", like Outlook and other clients do. Respectfully.and thank you again for your emphasis on performance and simplicity!sorry for strong language in last post, my bad :/hii think i would prefer 2 separate options:- launch on start (yes/no)- run in system tray on start/close (yes/no)invisible seems undesirable in any scenario.thx!(sorry again for strong expression above)fyi, eM client installer asks "start eM when you start windows?" yes/no	15.0	id=707054	5	False	False	mail	1
id=130581	REOPENED	Gnumeric	GUI Expression Entry Widget	1.2.x	Other Linux	Normal normal	Jody Goldberg	2004-01-05 14:47 UTC by	Frederic Parrenin	2004-12-22 21:47 UTC (	0 users	When we use an intra-cell line-break, the expression entry formula is halfhidden.(The best would be to have an expression entry widget extending on severallines like in XL. Meanwhile, it would be nice to fix this small bug.)	CreatedThis is a screenshot showing the problemThis bug has been fixed, isn't it ?The behaviour is different in 1.2.12.The final aim would be to have an expression entry widget able to extend onseveral lines, but that is another story.This has not changed. The edit line still does not expand as necessaryOK. It was not exactly my first bug report, and thus I change the title.(Perhaps the difference on my mdk box comes from a fix in gtk.)	4.0	id=777137	9	False	False	philipp.raich	1
id=707054	REOPENED	rygel	librygel-renderer	git master	Other Linux	Normal normal		2013-08-29 14:33 UTC by	Jens Georg	2013-10-09 13:38 UTC (	0 users	Might be due to unplayable tracks, needs investigation	KIL 1493, if test 7.3.106.1 is run after 7.3.30.1 it fails.Again, needs investigation whether this is the KIL issue or something different.Seems that this test always tries to render a set of images which of course fails currently due toandIf we switch the testing profile to include images and use a renderer that is capable of doing so, it seems that the playlist is in auto-repeat mode and starts at the beginning.With the GStreamer renderer,interferes in the state handling.Createdrenderer: Don't loop on image playlistspushed as- renderer: Don't loop on image playlistsThis is of course not fixed with this patch only	7.0	id=650082	6	False	False	mortenw	1
id=777137	REOPENED	evince	User documentation	3.18.x	Other Linux	Normal normal	Maintainers of Gnome user documentation	2017-01-11 14:15 UTC by	Thomas U.	2017-01-17 15:06 UTC (	2 users	CreatedSelecting the "annotations" sidebar does not allow me to add annotationsI'm using Evince 3.18.2 under Xubuntu 16.04. I am unable to add annotations to any document.Following the guide under, I need to select "Annotations" on the sidebar and then there two tabs "lists" and "add" should appear. However, they do not. Instead, I only see the text "Document contains no annotations" (see the attached screenshot). This happens on every document I have tried this with (the screenshot was made with www.ctex.org/documents/shredder/src/example.pdf ).Workarounds I have tried (but didn't help):* deleting my ~/.config/evince folder (in case I had weird settings that deactivated it)* Making sure the packages `poppler-data` and `poppler-utils` were installed (this was recommended in some thread of someone who has the same problems)	CreatedScreenshot for "Add Annotation" button and toolbar(In reply to Thomas U. from)It seems the guide you mention is outdated - annotations are added by enabling the annotations toolbar via the "Add annotation" button in the headerbar (see attached screenshot, the button to the right).If you cannot see the button, there is another issue.Ahh... yes, you are right, I totally did not see that button! Sorry for overlooking it, there was no option in the menus and both the online-documentation as well as the in-app did not mention it.Thanks!Re-opened as the documentation needs to be updated.	3.0	id=768224	6	False	False	vahey	1
id=650082	REOPENED	Gnumeric	import/export MS Excel (tm)	git master	Other All	Normal normal	Jody Goldberg	2011-05-13 06:54 UTC by	Morten Welinder	2011-05-27 12:00 UTC (	0 users	More warnings than you can shake a stick at. First warning is...** (/home/welinder/gnome/gnumeric/src/.libs/gnumeric:21870): WARNING **: c8 : expected len 6 not 8Opcode 0xcd length 23 malloced? 0Data: 0 | 14 00 00 53 54 55 46 46 4c 45 42 45 41 4d 2c 20 | ...STUFFLEBEAM,. 10 | 44 57 41 49 4e 20 48 XX XX XX XX XX XX XX XX XX | DWAIN.H*********	First warning:** (/home/welinder/gnome/gnumeric/src/.libs/gnumeric:22005): WARNING **: unknown index type 0 for field 'Taxon2' (#2)First warning:** (/home/welinder/gnome/gnumeric/src/.libs/gnumeric:22082): WARNING **: 100 : expected >= len 12 (0xc) not 10 (0xa)cap2b.xls fix is simple (name is not part of XL96 export), I'll commit with other pivot fixes.Insurer required support for 2byte indexed valuescap2b was failing due to: 1) it was not 1 vs 2 for index type, it was 1 vs 0 2) thinko that used GINT8 in place of GUINT8 when reading 1 byte index values.patch when I merge the ongoing slicer workIn the previous comment I meant Prioritize_SGCN_Species_011808 not cap2bcommitAuthor: Jody Goldberg <>Date: Thu May 26 22:33:33 2011 -0400 [xls] support indexed fields with > 255 items - read and write the short flags for fields - store the -field_id when reading to flag 2byte index NOTE : only read was testedI don't see the commit. Forgot to push?local commit onlyThere are other pivot related patches pending. Full patch is bocking on a glib changes.	7.0	id=568442	20	False	False	john.stowers	1
id=768224	REOPENED	file-roller	general	3.20.x	Other Linux	Normal normal		2016-06-30 05:12 UTC by	Andrea Antolini	2016-11-18 20:34 UTC (	2 users	Createdfileroller 3.20.2 extract progress barGtk 3.20.6 & file-roller 3.20.2Just an annoying bug..During extract operation, progressbar,displayed on progress dialog, doesn't show progress..it seems stuck on 0%btw, extract operation is always completed successfully.attached a short video as visual bug reportRegardsAndrea	After some quick tests, it seems that the issue occured only when you extract ZIP files : with tar.* archive (xz, bz2, ...), progress bar works as expected..RegardsAndreaThank you for reporting this bug! We downloaded a 117 MB file and saw the progress bar quickly go from 0 to 50% to complete.Closing as OBSOLETE as per last comment -- please reopen if you can still reproduce.I still can reproduce the issue also with file-roller 3.22.2 :maybe initial bug description was not clear but issue occured only when you:1) open , with file-roller, a big .ZIP file with a lot of small files inside it2) drag and drop the zip content into a folder 3) progress dialog appear but progressbar don't show the extraction progressAs I told, i can see the issue only with ZIP files: with tar.* archive progressbar works.icon-theme files downloaded from github like paper-icon-theme* or papirus-icon-theme** are good test file...***RegardsAndreaCreatedsame issue with file-roller 3.22.2I see, thanks for following up Andrea. Reopening in this case.	6.0	id=746035	7	False	False	nirbheek.chauhan	1
id=568442	REOPENED	conduit	GUI	0.3.x	Other All	Normal normal	conduit-maint@gnome.bugs	2009-01-20 15:43 UTC by	Jorge González	2009-07-12 10:49 UTC (	3 users	There are many strings not marked for translation that should be, for example:"Files and folders""What Do You Want to Synchronize?""Drag and Drop a Data Provider on the Canvas""Show me"and many, many others. Please, make them translatable.Thank you.	***has been marked as a duplicate of this bug. ***note: The config rewrite introduces a shedload of new strings, must mark for translation.Patches welcomeCreatedMake UI strings translatablePlease find attached a patch which makes the most visible strings translatable.It is not exhaustive, since as I say I've focused on the most visible ones on the UI and left out some related to errors, for which I do not have more time today.In its current form the patch already provides an improvement in localisation, so if the review is positive, it could directly be committed. But even in case it is committed, please leave the report open, as I am intending to look for all non-translatable strings and mark them as translatable as soon as I have more time.A last question, though. Can/should the following strings be marked for translation? photouri = str(properties['Uri']) tags = str(properties['Tags']).split(',')[...] f.set_caption(str(properties['Description']))(In reply to)Thanks, but this patch was obviously not tested - many of the files modified were missing gettext imports, so just caused Conduit to crash. Please addfrom gettext import gettext as _To the start of files if you are going to be using translations from them, and they have not yet imported gettextCool. Please see my other comment for a quick review of the patch. Thanks for your work on this, it is much appreciated.Im not sure where you are referring, but I think these are strings returned from FSpot.Comment onMake UI strings translatablePlease do not translate log messagesPlease do not translate log messagesThis string is not shown in the UI, and also the GoogleModule has not yet been converted to the new config system, at which time ....The following will go away......Please don't translate log messagesPlease don't translate log messagesPlease don't translate log messagesPlease don't translate log messagesWill move to the new config system in the next week.Do not translate this string. In general, so not translate strings if you are not sure that they will be seen in the UIPlease don't translate log messagesgettext not imported, crashesgettext not imported, crashesShould add note so that translators do not translate %defaultdont translate log messagesCreatedMake UI strings translatablePlease find attached a new version of the patch addressing the issues mentioned in the last two comments.Yes, I apologise for that. It shows me again that there is no such thing as a trivial patch>I still have not fixed this, since I have to find out how extracted comments from Python files can make it to the POT template. Does xgettext handle those?Thanks for the thorough review, please let me know if there is anything else left to correct.CreatedMake UI strings translatableUpdated the patch against head. Not committed yet because I am still unsure what to do about_("<span foreground="red">Failed to connect.</span>") And I have not finished reviewing and testing it yet.I havent tried the patch extensively, but I didnt had problems so far.Maybe we could use: '<span foreground="red">' + _('Failed to connect.') + '</span>'Or '<span foreground="red">%s</span>' % _('Failed to connect.')Or we could remove the red color entirely, I dont think it's HIG-compliant, and may even interfere with theme colors.And another thing, should this be translated?- raise Exceptions.SyncronizeError("Error creating contact")+ raise Exceptions.SyncronizeError(_("Error creating contact"))Some other exceptions had this problem as well. I dont think filling the translation files with exception messages are useful. It would just make the translation more difficult.CreatedMake UI strings translatablePlease find attached a new patch ported to git.Comments:* Regarding comments #5 and #6 (writing a comment so that translators do not translate %default): the string is already marked as 'python-format' in the POT file when extracted, in the same way as %s, %d variables are marked as 'c-format' in C. Translators usually know what that means. Furthermore, 'msgfmt -c' checks for those as well. In any case, if necessary, I can add the comments in a separate patch.* Regarding(how to mark _("<span foreground="red">Failed to connect.</span>") for translation): I've used the first of Alexandre's suggestions in* Regarding(translation of exception messages): I believe they should be translated if they are presented to the user. In any case, I have not marked any for translation now. I'd like to hear what you think and I'd then send an additional patch taking care of the exception messages.* I still have not figured out how to:** Properly mark the strings in the data providers pane for translation. They are extracted and appear in the POT file, but gettext does not show the translations at runtime. Reference [1]** The data provider statuses' translations from DataProvider.py are also not shown at runtime. I think I could just simply enclose every instance of STATUS_* in _(), but I did not dare to do that, since I do not quite understand its effects (the strings there are not only used to be shown in the UI, but also in the program).[1]Did anyone have a chance to look at the patch?Thanks.Yeah, sorry I forgot to get back to you. I have applied it and pushed toI am waiting for Alexandre to finish the config branch stuff, and then it can go into master. That way the translators can deal with all the new strings at once.JohnThanks a lot for commiting this, John.Please let me know when this is commited to the master branch, and then I'll try to deal with the pending issues I mentioned in.(In reply to)Hi David, I commited the pending config changes, it probably conflicts with your patch. I made some changes on the translation strings as well, but I've not yet committed them, so I could wait for your answer.Could you update your patch with the latest code?Thanks(In reply to)I applied your patch in my computer to the master branch, and it applies cleanly. It's probably missing the Google changes, but I already fixed that. Here are a few comments about the patch:* From, you said you did not put dataproviders status for translation, but for some reason they were marked for translation before, however you removed it and marked with N_, I didnt understand why.* You also marked other things as N_ in several other modules. Is there a reason?* You marked the TestModule for translation, however I do not think that is necessary. The test dataproviders only appears when running uninstalled and is only a developer feature. It will only distract translators from what is more important. That's my opinion anyway.* In line 294 of Module.py, you marked _(comment), shouldnt we mark strings in Knowledge.py instead? You did something similar on UI.py* On the Flickr dataprovider you marked "None", however that should not be translated, that value is used in the settings serialization. In the image dataprovider there is also a "None" string which should be translated for now, but that is a bug we should fix later.* Some of the changes in the patch are only about whitespaces, probably because of your editor or something. It makes it harder to evaluate your patch. That is my personal opinion tough.Thanks for your hard work, it looks great. Looking forward for commiting it.Hi Alexandre,I will not have time until next week to address all the points you are mentioning, but I'll quickly comment on a couple of them:[...]This is due to the way the variables are defined, which requires using deferred translations [1].[1]CreatedMake UI strings translatableHi Alexandre,Please find a new patch against the current git HEAD addressing the issues pointed out on your last comment.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Will push to master later todayHaving a look at git.gnome.org, this still hasn't been committed. Could someone please commit it, as per the previous reviews and last comment?I would also like to ask you to leave the bug as opened. The two issues mentioned at the end ofare still not solved in the patch, but I'd like to have the patch committed as it is before I start looking into that. I'd prefer that the patch does not bigger and then concentrate on those separately.(In reply to)Yes, I am an idiot and forgot to push. Done now.Re-opened accordingly.	19.0	id=148184	18	False	False	jody	1
id=746035	REOPENED	GStreamer	gst-plugins-good	git master	Other Linux	Normal normal	GStreamer Maintainers	2015-03-11 14:17 UTC by	Nirbheek Chauhan	2015-03-23 09:13 UTC (	1 user	CreatedSample rtsp audio stream which yields duplicate timestamps with rtpjitterbufferWhen the attached gdp-payloaded file is run through rtpjitterbuffer, with mode=slave (the default), the output audio has buffers with duplicate pts, but not with mode=buffer/synced/none. Those buffers all seem to contain silence (see).Bad:gst-launch-1.0 filesrc location=output-gdp-audio.bin ! gdpdepay ! rtpjitterbuffer ! rtpmp4adepay ! decodebin ! ...Good:gst-launch-1.0 filesrc location=output-gdp-audio.bin ! gdpdepay ! rtpjitterbuffer mode=buffer ! rtpmp4adepay ! decodebin ! ...gst-launch-1.0 filesrc location=output-gdp-audio.bin ! gdpdepay ! rtpjitterbuffer mode=synced ! rtpmp4adepay ! decodebin ! ...gst-launch-1.0 filesrc location=output-gdp-audio.bin ! gdpdepay ! rtpjitterbuffer mode=none ! rtpmp4adepay ! decodebin ! ...All the incoming packets are sequential and evenly-spaced (captured from gst-rtsp-server over a link-local network), so in theory there shouldn't be a "discontinuity" like that.	CreatedSample rtsp audio stream which yields duplicate timestamps with rtpjitterbufferI attached the wrong file, sorry. :)The problem here is:0:00:00.073105731 19667 0x1721450 DEBUG rtpjitterbuffer rtpjitterbuffer.c:601:calculate_skew: backwards timestamps, using previous timebut I fail to understand the calculations that lead to this currently. All timestamps I see are monotonically increasing :)The bug here is that we have two jitterbuffers, the second one becoming completely confused because of the first.rtspsrc ! gdppay ! filesink (one jitterbuffer in rtspsrc)filesrc ! gdpdepay ! rtpjitterbuffer ! ... (second jitterbuffer).As discussed on IRC, the bug does happen even without gdp(de)pay. I'm attaching a full pcap capture (RTP, TCP, RTSP/SDP) as requested by Sebastian.The file is too big for bugzilla even with `xz`, so I've put it on my server:The problem here is that we get a burst of data in the beginning.The way to handle this is a bit complicated :)- The jitterbuffer has to check when it first filled up to $latency amount of RTP timestamps- If the slope is >> 1.0 then (i.e. we received all these buffers much faster than real time), the real latency of the jitterbuffer is the time it took to fill up the buffer and this should be used in the replies to the LATENCY query- Once the slope goes back to normal, i.e. close to 1.0, we skew once- Whenever the slope is much bigger than 1.0 (also later), we won't skew until the slope goes back to normal. Skewing would just completely break everything :)As an end result, we would start playback faster (i.e. GStreamer latency is small) but the sender-to-receiver latency would have the latency value configured on the jitterbuffer.	7.0	id=661589	19	False	False	gdesmott	1
id=148184	REOPENED	gtk+	Printing	unspecified	Other Linux	Normal normal		2004-07-22 15:41 UTC by	Andreas J. Guelzow	2015-10-01 16:27 UTC (	5 users	If a user configured a second (or third or ...) instance for a printer, only oneinstance appears in the print dialog. (For a while the other instances werevisible as alternative settings, but that appears to have disappeared again.)	Any thoughts on how to display a printer with multiple instancesShould the parent appear as well as the instances ? or just the instances ?Different instances of the same printer differ only in the settings, so I hadthought that they should appear as differnet settings. Currently every printerin gnome-print has a single setting called default. I think the "default"setting should be setting for the parent printer (Instance==NULL). The otherinstances should be shown as other instances. (As they were just prior toturning the print dialog into a print manager. I guess the UNIX idea ofseparating different functions has gone out of the window.)Interesting. I had a rather different perspective on the function of instances. I'd always seen them as specific printers in a pool.PS The new printer selector seems like an improvement from the old static list. We don't want a full on printer manager in there, but having the list includethe number of outstanding jobs is an improvement in my eyes.Cups also has the concept of classes, that are a pool of printers to which youcan send a print job and then cups figures out which printer to use.Of course I have no idea how they are reflected in the new dialog if at all.They are really more important than to see how busy an individual printer is. Ifseveral printers could be used for the same purpose then a class should havebeen configured, rather than having the user look at the number of jobs pendingfor each printer.Has there been any progress on this issue since last year? For now, I can get byusing xpp to see my instances but I'd really like to be able to select them fromthe gnome print dialog. There's some commented-out code for instances inlibgnomeprint/modules/cups/gnome-print-cups.c but that doesn't compile when thecomments are removed.The commented-out code used to support instances. Then, when a-synchronousaccess was introduced the code was commented out, and support for instances lapsed.I currently work around the limitation by creating duplicate printers withdifferent defaults rather than setting up instances. Perhaps that may be asolution for you too.I noticed that printing has recently been committed to gtk - does that have any bearing on this bug? In particular, is libgnomeprint slated to be removed? If so, maybe it'd be good to try to get support for instances into the gtk printing while people are still actively hacking on it.Yeah, new features should definitely go into gtk+ at this point.Moving to gtk+Seems to be working correctly for me. Please reopen if this is still a problem.Hi Timothy,I don't see the instances in the print dialog. Which version of Gtk+ and CUPS do you have? How have you created the instances?(In reply to Marek Kašík from)I also cannot see CUPS printer instances in a recent master build of GTK+. It would be great if this bug could therefore be reopened.I don't have time to look at this right now but I've reopened the bug.I have worked on an implementation that treats each CUPS printer instance as a GtkPrinter.I attach the 3 patches that add support for printer instances.The first two patches do some refactoring to avoid that the implementation introduces a lot of duplicate code.The 3rd patch contains the "actual implementation" of printer instances.Please let me know whether the approach taken in that implementation is OK in general and which things I should improve to get this accepted. (I am not a very experienced C programmer, particularly when it comes to C89 and the Gtk+ coding style.)Createdfirst patch with refactoring to avoid duplicate codeCreatedsecond patch with refactoring to avoid duplicate codeCreatedpatch that adds support for CUPS printer instances	17.0	id=770388	8	False	False	gnome.vrb	1
id=661589	REOPENED	folks	Telepathy backend	git master	Other Linux	Normal normal		2011-10-12 20:37 UTC by	Nicolas Dufresne (stormer)	2015-03-31 14:02 UTC (	4 users	Step to reproduce:1. Open account window and change one of the account name2. Go back to buddy list and right click on a buddy list (one that has multiple boddy linked)3. The menu contains a list of links in form (boddy_id (account name)).Expected:Account name to reflect the latest nameResult:The account name is not refreshed, displaying the old name.	We get this string from folks_persona_store_get_display_name() so I guess that's Folks missing the name changes.This is an icky one which I think will require folks to break ABI. This is because the Folks.PersonaStore.display_name property is not declared as abstract, and is declared read-only. Consequently, the Tpf.PersonaStore subclass cannot change the display_name property after construction time.Unless I've missed something, fixing this will require us to make Folks.PersonaStore.display_name an abstract property (which is probably what it should've been in the first place), which will add another few entries to the FolksPersonaStoreClass struct and break ABI.Since it's not a major bug, I'd be inclined to leave this until we next want to break API/ABI. Travis?(Also, Empathy will need changes to listen to notify signals for Folks.PersonaStore.display_name, but those can be done later.)(In reply to)Another option is to add "display_name_2" and deprecate display_name in the same way we've done with IndividualAggregator.individuals_changed(-detailed).Of course, it's harder to come up with a reasonable name, since this would essentially be display_name_(fixed). Maybe display_name_dynamic?I agree it would be nice not to break ABI again, but in this case the item is dynamic, so having a "dynamic" version is a bit of a hack.Btw, why all this isn't properties with a notify signal (like any other GObject base stuff) ?(In reply to)Forget that, I think I understand Philip's comment now.(In reply to)Right - I agree it's ugly. But slightly ugly > ABI/API breaks at this point.This bug isn't that critical, so if I have to wait for the next folks major version that's fine for me (assuming it won't happen in 2 years :)I don't think this will ever happen anyway.(In reply to Nicolas Dufresne (stormer) from)That's for the folks maintainers to decide. :-)	9.0	id=757934	16	False	False	bugzilla	1
id=770388	REOPENED	gtk+	.General	3.21.x	Other Linux	Normal normal		2016-08-25 12:59 UTC by	Christoph Reiter (lazka)	2016-09-30 18:41 UTC (	3 users	I get lots of warnings with gtk+ master.The warning can be reproduced using gtk3-demo:$ gtk3-demo --run=tree_store(gtk3-demo:6100): Gtk-WARNING **: gtk_widget_size_allocate(): attempt to underallocate GtkButton's child GtkBox 0x1d59430. Allocation is 37x24, but minimum required size is 41x14.(gtk3-demo:6100): Gtk-WARNING **: gtk_widget_size_allocate(): attempt to underallocate GtkTreeView's child GtkButton 0x1bc0340. Allocation is 50x25, but minimum required size is 55x25.(gtk3-demo:6100): Gtk-WARNING **: gtk_widget_size_allocate(): attempt to underallocate GtkTreeView's child GtkButton 0x1dbd180. Allocation is 50x25, but minimum required size is 54x25.	They are too many of these in many gtk apps. Is there a way to disable them for now ?The warning in gtk3-demo --run=tree_store were caused by fixed column widths. I've fixed that now.My application uses fixed column widths. This was just meant as a way to reproduce.Can this warning be disabled for the stable release?Getting multiple pages of warnings on each redraw is annoying.Createdtreeview: Don't underallocate drag buttonCreatedtreeviewcolumn: don't underallocate column headersCan you apply those patches and still reproduce? They are just fixing some obvious problems. I usually don't do treeviews.Thanks. With both patches applied the warning is gone.But the right hand side borders of the columns are gone now when the label widget is truncated.Yeah, dunno what to do about that, the borders are drawn by the button and that just has a minimum size... unless we set the minimum width of the column to that of the button of course, but I guess that's not an option.I guess the border could be drawn by the next column?I just noticed that the above patches break things in RTL modeCreatedwidget: Don't print underallocation warnings by defaultSee similar changes:Comment onwidget: Don't print underallocation warnings by defaultpushed as- widget: Don't print underallocation warnings by default	12.0	id=106257	8	False	False	vincent.noel	1
id=757934	REOPENED	gobject-introspection	g-ir-scanner	unspecified	Other Linux	Normal normal	gobject-introspection Maintainer(s)	2015-11-11 10:17 UTC by	Thomas Haller	2016-03-01 22:55 UTC (	7 users	g-ir-scanner invokes the CC compiler with both the CFLAGS and the flags from the python installation. These flags can conflict and g-ir-scanner should only rely on the externally passed in CFLAGS.This is easily reproducible when building NetworkManager from source (on Fedora23): export CFLAGS='-O0' ./autogen.sh makethis will call g-ir-scanner via Makefile.introspection like:CPPFLAGS="" \CFLAGS="[] -O0 [...]" \LDFLAGS="[...]" CC="" \/usr/bin/g-ir-scanner [...]g-ir-scanner then will eventually call:gcc -fno-strict-aliasing -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -Wall -std=gnu89 -Werror -Wshadow -Wmissing-declarations -Wmissing-prototypes -Wdeclaration-after-statement -Wformat-security -Wfloat-equal -Wno-unused-parameter -Wno-sign-compare -fno-strict-aliasing -Wno-unused-but-set-variable -Wundef -Wimplicit-function-declaration -Wpointer-arith -Winit-self -Wmissing-include-dirs -Wno-pragmas -O0 -DNMTST_TEST_QUICK=TRUE -Warray-bounds -Wunused-value -fPIC -DNMTST_TEST_QUICK=TRUE -I/usr/include/gudev-1.0 -I/usr/include/gio-unix-2.0 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/gudev-1.0 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -c /data/src/NetworkManager/libnm/tmp-introspectQKWvRm/NM-1.0.c -o tmp-introspectQKWvRm/data/src/NetworkManager/libnm/tmp-introspectQKWvRm/NM-1.0.o -Wno-deprecated-declarations -pthreadNote that this effectively specifies "-D_FORTIFY_SOURCE=2 ... -O0", which leads to a compiler error:/usr/include/features.h:328:4: error: #warning _FORTIFY_SOURCE requires compiling with optimization (-O) [-Werror=cpp] # warning _FORTIFY_SOURCE requires compiling with optimization (-O)cc1: all warnings being treated as errorsCaught exception: <class 'distutils.errors.CompileError'> CompileError(DistutilsExecError("command 'gcc' failed with exit status 1",),)-> raise CompileError, msg(Pdb) bt /usr/bin/g-ir-scanner(58)<module>()-> sys.exit(scanner_main(sys.argv)) /usr/lib64/gobject-introspection/giscanner/scannermain.py(530)scanner_main()-> shlibs = create_binary(transformer, options, args) /usr/lib64/gobject-introspection/giscanner/scannermain.py(412)create_binary()-> gdump_parser.get_error_quark_functions()) /usr/lib64/gobject-introspection/giscanner/dumper.py(321)compile_introspection_binary()-> return dc.run() /usr/lib64/gobject-introspection/giscanner/dumper.py(162)run()-> introspection_obj = self._compile(c_path) /usr/lib64/gobject-introspection/giscanner/dumper.py(201)_compile()-> self._options.init_sections) /usr/lib64/gobject-introspection/giscanner/ccompiler.py(239)compile()-> source_str.rfind(os.sep)]) /usr/lib64/python2.7/distutils/ccompiler.py(574)compile()-> self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)-> raise CompileError, msgBut the problem is, that g-ir-scanner uses the CFLAGS from ccompiler.py which are are incompatible with what we want to specify and there is no way to turn that off.Currently, we worked around this via:	Createdgiscanner: Disable warnings arising from -D_FORTIFY_SOURCE -O0Using distutils.ccompiler means that we are forced to use the CFLAGSfrom the system’s Python installation, which may contain-D_FORTIFY_SOURCE. The user’s environment-provided CFLAGS may contain-O0 (because they are a developer). These two flags cause a warning whenused together. Silence that warning by passing -Wno-cpp to disablewarnings from #warning preprocessor statements in the generated C code.It doesn’t seem to be possible to selectively undefine _FORTIFY_SOURCEor to stop using the compiler flags from distutils.sysconfig,unfortunately.Review of:This is really a distutils bug, and has bit me elsewhere - it totally breaks when distutils was built with a cross-compiler and you want to use it natively for example.Anyways...it's quite unfortunate to turn off all warnings for a *non-default* case (using jhbuild). It means "real" builds won't get any C preprocessor warnings.I can't think of a fix that doesn't involve patching distutils though.(In reply to Colin Walters from)I don’t think it’s quite as bad as that, since this only affects compilation of the generated code for the GIR, which in practice means the set of #warning directives in that code and the headers it pulls in. I don’t think this will result in any legitimate warnings being squashed (unless you know of some which will?).But yes, it’s not a great fix. :-(pushed as- giscanner: Disable warnings arising from -D_FORTIFY_SOURCE -O0This breaks ibus-anthy build when using clang because clang doesn't support -Wno-cpp.error: unknown warning option '-Wno-cpp' [-Werror,-Wunknown-warning-option]Traceback (most recent call last):Hmm, that’s a pain. I’ve reverted it until I can come up with a better solution. Do you have any suggestions?c2f0c7b Revert "giscanner: Disable warnings arising from -D_FORTIFY_SOURCE -O0"(In reply to Philip Withnall from)The only fix I can think of is adding an API to distutils to turn off the CFLAGS inheritance from its build.doesn't seem like target list material to me, dropping	8.0	id=608474	25	False	False	bugs	1
id=106257	REOPENED	nautilus	Views: Icon View	unspecified	Other All	Normal normal	Nautilus Maintainers	2003-02-16 21:59 UTC by	Seth Nickell	2012-08-12 12:54 UTC (	4 users	Currently Nautilus displays an iconic representation of icons during a moveoperation rather than moving the icons themselves as you drag. The neteffect is producing a conceptual model of dragging as giving the computer acommand rather than directly manipulating the objects. Moving objectsduring a drag also provides a more obvious and natural mechanism than the"+" of illustrating the difference between a move and a copy.Advantages: * Makes the user feel like they are directly manipulating objects ratherthan giving commands through a proxy * Makes it easier to position icons on the desktop because completefeedback as to how the end result will look is givenThis is a very old usability quirk inherited from Windows/MacOS (probablyoriginally done for very legitimate, at the time, performance reasons), andone that we can fix with very minimal confusion and good gains in howtangible the system feels.	Oh, forgot to mention this... There is a drawback to this as opposedto the current "norm", which is cancels aren't as obviously nice.However, I should emphasize that cancelling drags is *not* thestandard use case (in fact, I wonder how many people in the real worldknow they can press esc during a drag), and that the same behavior canbe mimicked in the new system even if its not quite as well fit.Recent versions of nautilus (at least 2.7) now show the icon being draggedduring a move operation. The only exception is during the move of several files: all icons except the one being directly dragged are shown as boxes. Is thatclose enough to close this bug ?I'm not sure what behavior change you are describing, but Nautilus 2.7 seriesdoesn't, AFAICT, do what this bug is talking about.Maybe I don't understand what you are asking for...When I drag an icon in nautilus (ie a DOC file icon or a .tar.gz) I see the iconitself being dragged, and I don't see an "iconic representation".Seth : can you explain more please ? Right now when I drag an icon (eg a foldericon) in nautilus, I actually move the icon. Do you refer to multi-icons dragging ?Vincent: But another instance of the same icon still remains at the originallocation.Oh, ok, I understand now :DMaybe we could make the source icons a little transparent as we do when cutting files (in 2.31.something)?I guess the desired effect these days would be something like the iOS 'rearrange icons' mode (but without the jiggling!):As always, very prescient of Seth to be demanding this many years before Apple "thought" of it :)(Though o(In reply to)Though admittedly, the problem with doing this in Nautilus is that you don't know whether the source file is being moved or copied until the file is dropped... and it would probably be a bit weird to have the source icon disappear during the drag only to reappear if the operation turned out to be a copy.	10.0	id=677552	5	False	False	mail	1
id=608474	REOPENED	empathy	Chat	2.32.x	Other Linux	Normal normal		2010-01-29 18:26 UTC by	Joe Barnett	2015-02-09 21:31 UTC (	9 users	For long running IM conversations, empathy helpfully displays a timestamp every so often. unfortunately, does not respect the configured-elsewhere-in-gnome/locale date/time format, and displays, for example "16:05" instead of "4:05 PM".	work fine for me in empathy 2.29.6If I config for "16:05" for gnome-locale config, empathy show "16:05"Joe: Which version are you using? Could you try with 2.29.6 please?I have only tried 2.28.1.1, and it doesn't work.E.g., "env LC_TIME=en_US.UTF-8 empathy" makes empathy show "16:05" instead of "04:05:00 PM" (whereas "env LC_TIME=en_US.UTF-8 date -d '16:05' +%X" displays "04:05:00 PM" as it should).in empathy 2.29.91, i see:- Wednesday February 24 2010, 13:28 -(instead of 1:28PM)looks like libempathy-gtk/empathy-chat-text-view.c does: tmp = empathy_time_to_string_local (timestamp, EMPATHY_TIME_FORMAT_DISPLAY_SHORT);where libempathy/empathy-time.h defines: #define EMPATHY_TIME_FORMAT_DISPLAY_SHORT "%H:%M"would changing chat-text-view.c to: tmp = empathy_time_to_string_local (timestamp, _(EMPATHY_TIME_FORMAT_DISPLAY_SHORT));work? ... not sure how these things are usually localized, and just randomly guessing .......(also, to clarify, I'm expecting 12-hour (1:28PM) time format with en_US.UTF-8 locale.)this bug is still reproduce?yeswhat is version? -> empathy2.30.0Could you try with 2.31.92 (or the upcoming 2.32.0) plese? We change a few things in this code to improve localisation.I am using 2.32.0 and I get inconsistent timestamp formats. Here's an example:madLyfe has joined the room 16:21 ZykoticK9_ 10/11/2010 04:20:59 PM!puregnome | CuervoIgnoring the fact that the two events seem misordered -- I cut-and-pasted them as they arrived -- I would like to make the 'from a message' timestamp format the same as the 'join/quit' timestamp. How do I do that?***has been marked as a duplicate of this bug. ***Createdempathy-time: port to TP coding styleCreatedUse org.gnome.system.locale.region when displaying datesCreatedstop translating date/time formatsWe don't have to any more as we respect GNOME's region setting.If that's how it is supposed to be used, then +1I may be missing something here, but how is %H:%M supposed to change to %I.%M?Comment onempathy-time: port to TP coding stylepushed as- empathy-time: port to TP coding styleReview of:That's not the right approach. gnome-settings-daemon set this variable for us, we just have to make sure all our formats are localized.(In reply to)You're right, the right fix is to use a localized string. As there is no equivalent () we'll have to use %X for now.CreatedUse a localized format when displaying timesUnfortunatelly there is no localized format displaying only the hour andminutes () so we'll have to use %X for now which also display theseconds.EMPATHY_DATE_FORMAT_DISPLAY_SHORT was already localized so this one is fine.That also means we don't have to translate those formats any more as we'lljust rely on the system env.Looks better to me :)+1Createdtest scriptFor the record, here is the small script I wrote to test formats.pushed as- Use a localized format when displaying timesSo the format will change when I use the 12/24 hour switch in the Date and Time settings panel, right?(In reply to)We rely on the system localization of the "%X" format which depends of the local settings (like LC_TIME). Those locales can be configured using gnome-control-center's language panel. Not sure if that's the same as the 12/24 setting.That isn't the same iirc. It needs to follow the 12/24 setting.Why do we have 2 settings for this? Isn't the point of the region panel to configure exactly that?Jon: I don't mind you re-opening the bug but please clarifiy the different settings as well.We have at least 2 settings here:"org.gnome.system.locale region" which is set in the "Region and Language / Formats" panel.gnome-session reads this setting and set LC_TIME accordingly. Once set, localized strftime formats are automatically localized."org.gnome.desktop.interface clock-format" which is set in the "Date and Time" panel and seems specific to gnome-shell's clock.From my understanding, the former is more general and should be the one app should rely on. Actually, one may claim that the latter should be implicit and derivated from the former.Sorry, I have no idea about the dconf settings. From the user's perspective the times used on the system should follow the 12/24 switch in the Date and Time settings panel.I imagine the locale would provide the default setting for the 12/24 switch and the user would be able to change it as needed.The point is that the preference should override the locale-provided data. You will display the time (or more likely, date) in a particular language.The user wants to be able to choose whether to use 12 or 24 hour format. That's independent of the locale.It's also very important for some locales where the usage is very dependent on the person's role, or upbringing.(In reply to)So yeah, the current situation is pretty confusing; I opened	32.0	id=760885	7	False	False	jjardon	1
id=760885	REOPENED	ostree	general	unspecified	Other Linux	Normal normal	OSTree maintainer(s)	2016-01-20 13:14 UTC by	Javier Jardón (IRC: jjardon)	2016-08-16 10:58 UTC (	2 users	Patch attached	CreatedUse AX_COMPILER_FLAGS instead custom flagsReview of:Don't we need to add m4-common or something? I get:./configure: line 5668: syntax error near unexpected token `WARN_CFLAGS,WARN_LDFLAGS'./configure: line 5668: `AX_COMPILER_FLAGS(WARN_CFLAGS,WARN_LDFLAGS)'(In reply to Colin Walters from)You have to have installed the autoconf-archive packageThis will be automatically done if you are building with jhbuild, as we will add m4-common as a dependency and it will pull in themMore info here:This was done.	4.0	id=461545	26	False	True	sven	1
id=461545	REOPENED	GIMP	Script-Fu	git master	Other All	Normal normal	GIMP Bugs	2007-07-29 17:02 UTC by		2016-11-16 14:50 UTC (	1 user	Please describe the problem:I was working on my first GIMP script last night (using WordPad), so it was not much surprise that I encountered a few problems....After registering the script, GIMP displayed a parse error ("end of file while inside list") because I had not nested my parentheses properly. I carefully combed over my script (in WordPad) and ultimately located and addressed the problem, however when I tried to save the file Windows denied me access, saying "the file is in use by another application".Steps to reproduce:0. Start GIMP.1. Open any script for editing (I use Wordpad).2. Add or remove a parentheses (to induce a parsing error).3. Refresh all GIMP scripts - naturally, it should display an error that the script could not be parsed.4. Return to the script, remove the bug and save the script file again.Actual results:On step #4, WordPad tells me the file is "in use by another application" (i.e. GIMP) and "cannot be accessed", and I am unable to save my changes or fix the parse error.Expected results:I should, of course, have been able to save my changes and refresh the scripts with the new version.Does this happen every time?Unfortunately, no. I was on some occasions able to save changes to my script file and properly refresh the scripts, but once the error occured, I had to shut down GIMP before I could save any further changes to my script, and then restart GIMP to see if those changes had any effect. Turns out my script had several parse errors (last night was quite the crash course in script-fu), and I ultimately must have rebooted GIMP a dozen times before all the parse errors were finally nailed and I could actually run the script file on my image (to discover, of course, that I had yet more script errors to debug).Other information:	Script-Fu has been mostly reimplemented for GIMP 2.4. Could you try a recent GIMP 2.3 development release and check if you can still reproduce this problem there?According to lsof this is handled correctly in GIMP 2.3. Closing as OBSOLETE. Please reopen if you have reason to believe that GIMP 2.3 is still affected.CreatedSimplified example of a script that generates this bugGIMP 2.4 for the most part addresses this bug, but I've discovered at least one scenario where it still occurs, and is easily replicable. Previous attachment is an (overly simplified) example of the bug: an unmatched closing parentheses causes GIMP to issue a "Syntax error: Illegal token" message, and the file handle is left open -- GIMP must be shut down before the error can be corrected using an external editor.The main problem here is that your operating system is a piece of crap not allowing several applications to use one file at the time. But we should try to fix this in Script-Fu nevertheless.I think this is only a problem of wordpad, as I did never encounter this problem with emacs, vi, notepad++ or other - real - editors.Preferences about operating systems aside, when a Windows app opens a file it is the application's responsibility to specify whether the file should remain accessible by other programs while the handle is open. And it doesn't take a code monkey to figure out why most programs don't like to share write access to files they have opened for input.At least GIMP still allows other aplications to READ files it has opened, some programs (here's to you, MS Word) are known for completely locking down a file while it is open and not releasing the handle until the corresponding window has been killed.I have also been using PSPad lately for code editing, it has the same issue (but a far more generic error message, "Error saving file" instead of "The file is in use by another application and cannot be accessed").The open file handle can be verified on Linux with lsof.A number of bug fixes to the Script-Fu backported from the official TinyScheme sources changed the load operation and the Eval cycle. I do not see the open file problem. If no one reports still seeing this issue I will close the report as OBSOLETE.I have downloaded a fresh copy of GIMP 2.6.10 but can still generate this error virtually on command.A test script with an unmatched closing parentheses generated "unmatched parentheses: 2", but the file handle was properly released and I was able to fix the problem immediately via external editor.A test script with an unmatched opening parentheses (the original attached example, in fact!) generated "invalid token: 1" and the file handle was NOT released. Closing GIMP was required in order to save any changes to the script file.EDIT - Looks like I got my wording backwards in the previous comment. Unmatched opening parenthesis results in "unmatched parentheses" and a released file handle. Unmatched closing parenthesis results in "illegal token" and a locked file handle.I can reproduce the problem using the attached script in GIMP 2.6.7 (the most recent version for my Linux distro) but not in GIMP 2.7.2. The difference between the behaviour of the 2.6 and 2.7 versions of GIMP will help in tracking down the problem.Closing, because this is fixed in 2.7, and we don't fix 2.6 bugs any longer.I have recently encountered this problem - again - in the win32 build of GIMP 2.8.0-RC1 . I am attaching two testcases that are able to generate it on command.The first script error was "Error: script-fu-register: toggle default must be an integer value" (because I should have typed SF-OPTION instead of SF-TOGGLE).The second script error was "Error: eval: unbound variable: bar" (because I forgot a set of parentheses in my define statement).On a hunch, I tried disabling the scripts folder (specifically, the one containing my script files) in my GIMP preferences to see if that yielded an acceptable workaround, but this had no effect on the problem - still had to shut GIMP off entirely before I could fix the problems in my script.CreatedTestcase #2 (mistyped SF-OPTION instead of SF-TOGGLE during script-fu-register)Testcase: Mistyped SF-OPTION instead of SF-TOGGLE during script-fu-registerCreatedTestcase #3 (forgot parentheses during define)PS: The original testcase still applies too.I am able to reproduce this in current git master.Kevin, any news on this one?	19.0	id=734469	20	False	False	simon.mcvittie	1
id=734469	REOPENED	glib	docs	2.40.x	Other Linux	Normal normal		2014-08-08 08:58 UTC by	Simon McVittie	2015-11-07 09:42 UTC (	4 users	When GLib is built with srcdir != builddir, the API documentation is incomplete:* the contents of generated headers such as glibconfig.h are not scanned, so e.g. gintptr is entirely undocumented* the various places that still XInclude source code as examples (as opposed to using an external link) get an XInclude error because the xi:include appears in XML in the builddir, so it is interpreted relative to the builddir, not the srcdir(This is <>)	CreatedDocumentation: scan builddir where necessaryPreviously, the contents of glibconfig.h and other generated headerswere not scanned in srcdir != builddir builds, leading to thingslike gintptr and G_GOFFSET_MODIFIER being undocumented.(In reply to)This is much less visible in 2.40 and master than it was when the Debian bug was filed. docs/reference/gio/migrating-gdbus.xml fails to XInclude three files:../../../../gio/tests/gdbus-object-manager-example/gdbus-example-objectmanager.xml../../../../gio/tests/gdbus-example-objectmanager-server.c../../../../gio/tests/gdbus-example-objectmanager-client.cThe easiest way to resolve this is probably for the build to just copy those files from $(top_srcdir)/gio/tests/ into either $(top_builddir)/gio/tests/ or $(top_builddir)/docs/reference/gio/xml/. Any preference?***has been marked as a duplicate of this bug. ***(In reply to Simon McVittie from)This still applies, and seems to work. It won't fix the remaining uses of XInclude, but it solves half the problem. May I apply it?Review of:Still apply and works fine in both srcdir==buildir and srcdir!=buildir cases.CreatedDoc: copy included example filesThis fix missing files when src_dir != build_dir.CreatedDoc: copy included example filesThis fix missing files when src_dir != build_dir.Review of:I'm not really part of the GLib cabal, but this looks good to me.Review of:::: docs/reference/gio/Makefile.am@@ +152,3 @@+$(example_files):+ cp $< $@+Shouldn't $(example_files) be added to CLEANFILES as well? Otherwise they'll stick around and distcheck will likely fail.CreatedDoc: copy included example filesThis fix missing files when src_dir != build_dir.Review of:Looks good to meReview of:The commit message doesn't say anything about what you're doing to fix this.::: docs/reference/glib/Makefile.am@@ +26,3 @@ HFILE_GLOB=$(top_srcdir)/glib/*.h $(top_srcdir)/gmodule/*.h+if !SRCDIR_EQ_BUILDDIR+HFILE_GLOB += $(top_builddir)/glib/*.h $(top_builddir)/gmodule/*.hCan you just list the explicit files here?Review of:This looks ugly and un-auto-esque. Why not just always scan both locations ?I don't understand why you need to SRCDIR_EQ_BUILDDIR hack at all. Can't you just glob $(top_builddir) unconditionally? I assume gtk-doc is not going to go through the files twice if they have the exact same path (read: I already do this in the modules I maintain, and have not seen any issue with it).Comment onDoc: copy included example filespushed as- Doc: copy included example filesCreatedDoc: Fix missing glibconfig.h when builddir!=srcdirCurrently the doc is incomplete when builddir!=srcdir(e.g. debian package) because glibconfig.h is generared fromconfigure.ac and is thus missing from srcdir. This leads tomissing doc for symbols like G_GINT64_FORMAT.(In reply to Emmanuele Bassi (:ebassi) from)Yes if you're happy to rely on gtk-doc's current behaviour as essentially being API.For DOC_SOURCE_DIR, according to its source code, # do not read files twice; checking it here permits to give both srcdir and# builddir as --source-dir without fear of duplicitiesso it looks as though that's, if not exactly documented, then at least deliberate.For the globs, scan-build.stamp depends on $(HFILE_GLOB) $(CFILE_GLOB), so duplicates have no practical effect.The only documentation for these variables seems to be the comments in the example Makefile.am, which doesn't make any mention of what would happen if ${srcdir} and ${builddir} differ, or if they contain duplicates:# Directories containing the source code.# gtk-doc will search all .c and .h files beneath these paths# for inline comments documenting functions and macros.# e.g. DOC_SOURCE_DIR=$(top_srcdir)/gtk $(top_srcdir)/gdkDOC_SOURCE_DIR=# Used for dependencies. The docs will be rebuilt if any of these change.# e.g. HFILE_GLOB=$(top_srcdir)/gtk/*.h# e.g. CFILE_GLOB=$(top_srcdir)/gtk/*.cHFILE_GLOB=CFILE_GLOB=Review of:this looks ok to meThanks !CreatedBuild gdbus-example-objectmanager-server againIt was removed, apparently accidentally, in commit.This had the side-effect that it wasn't included in tarball releases,which means that commitdoesn't work when building a package.---ab7b4be =Review of:Oops, sorry about that.Comment onBuild gdbus-example-objectmanager-server againCommitted9fa97b3 glib-2-46 (for 2.46.2)236e804 master (for 2.47.2)CreatedFix distcheck failure when building gio's docI don't understand why those files already exists in the destination location when doing distcheck, but they are read-only so 'cp' command fails to override them. This is a workaround, but I don't know autotools enough to understand the root cause.I think I just realised the problem. The file is probably readonly because it was copied from the readonly srcdir earlier and the for some reason, we try to copy it again...Createdbuild: fix a ridiculous distcheck issueI prefer this solution because it means that we don't end up withread-only files in builddir (nor are we trying to delete a file whichisn't there to begin with).Comment onDocumentation: scan builddir where necessaryobsoleted by one of Xavier's patchesReview of:::: docs/reference/gio/Makefile.am@@ +142,3 @@ gdbus-example-objectmanager-generated-org.gtk.GDBus.Example.ObjectManager.Cat.xml: %: $(top_builddir)/gio/tests/gdbus-object-manager-example/% $(example_files):+ dd if=$< of=$@dd seems like the wrong tool for general file-copying, and also seems like the sort of thing that might be missing on niche platforms."cat < $< > $@" (closer to this patch), or "cp -f" (closer to Xavier's)? cp and cat are ubiquitous, and cp -f is in POSIX, so it's probably safe-ish.	28.0	id=117223	5	False	False	pawsa	1
id=117223	REOPENED	balsa	general	unspecified	Other Linux	Normal normal	Balsa Maintainers	2003-07-11 17:13 UTC by	Noah Levitt	2010-10-27 07:07 UTC (	1 user	Balsa seems frozen while it reads the contents of ~/mail at startup. Itshould do this incrementally, without blocking other operations. (Soerentalked about this at guadec... you can use g_timeout stuff.)	*** This bug has been marked as a duplicate of***Incorrectly marked as a duplicate. Reopening.Can't you do this in a separate thread?	3.0	id=689099	11	False	False	aruiz	1
id=689099	REOPENED	NetworkManager	API	0.9.x	Other Linux	Normal normal	NetworkManager maintainer(s)	2012-11-26 17:59 UTC by	Alberto Ruiz	2016-09-07 12:58 UTC (	2 users	Even though NMRemoteSettings has a synchronous constructor, it is not possible to list connections synchronously which can be inconvenient in cases where blocking is not an issue.I suggest we add a nm_remote_settings_list_connection_sync call (though it seems a bit inconsistemt, as most times is the asnyc call the one that is explicit in the name, like new_async).	CreatedGets NMRemoteConnection objects synchronously when NMRemoteSettings is built synchronouslyCreatedGets NMRemoteConnection objects synchronously when NMRemoteSettings is built synchronouslyI wasn't sure the GPtrArray the dbus call returned had a destroy function, we explicitly free each string and then we just destroy the GPtrArray structure.CreatedGets NMRemoteConnection objects synchronously when NMRemoteSettings is built synchronouslyPass around cancellable parameter from init_sync onto every connectionReview of:So I think this will block anything that uses the old API now, right? Could we just add another GObject property that controls whether or not connections are read on startup, that apps that don't care about blocking could set? Then the app could create the initable and init it, or we could add nm_remote_settings_new_sync() like you suggested earlier.Also two testcases in test/test-remote-settings-client.c would be good; the fake service in tools/test-networkmanager-service.py that gets spawned by that testcase could simply export a few connections (maybe it does already?) and the first testcase would do the existing codepaths (non-blocking, wait for connections-read) and after calling nm_remote_settings_new() would ensure nm_remote_settings_list_connections() == NULL, while the second would call nm_remote_settings_new_sync() and ensure that after doing that, nm_remote_settings_list_connections() == > 0.::: libnm-glib/nm-remote-settings.c@@ +1275,3 @@++ for (i = 0; i < connections->len; i++) {+ gchar *path = g_ptr_array_index (connections, i);Let's #include "gsystem-local-alloc.h" and then you can do:gs_free char *path = ...;and not worry about when to g_free() it.@@ +1276,3 @@+ for (i = 0; i < connections->len; i++) {+ gchar *path = g_ptr_array_index (connections, i);+ NMRemoteConnection *conn;Blank line after declarations please!@@ +1283,3 @@+ if (conn == NULL) {+ g_warning ("Could not create connection with DBus path %s: %s",+ path, (*error)->message);I'm not sure we're always guaranteed to have error != NULL here, so lets protect this.@@ +1288,3 @@+ }++ move_connection (settings, conn, NULL, priv->connections);I think this will actually expose half-initalized connections too early. Don't we need to init each connection before moving it to priv->connections?@@ +1293,3 @@+ g_object_unref (conn);+ g_free (path);+ }These two lines here use spaces instead of real tabs.(In reply to Dan Williams from)This is init_sync we're talking about, it's expected to block and it's already blocking, for example this call to dbus_g_proxy_call:This modification does not have any regressions or side effects that was not expected already by API users.But that'd be highly redundant with the fact that this class implements GInitable and GAsyncInitable already, that's what those interfaces are for. Pluse the documentation in _new and _new_async is already very clear as to what's expected blocking-wise in both cases.(I didn't have the full picture when I made that suggestion, I was not familiar with G*Initable at all)Will write the test case, the suggestions below all seem reasonable to me, will do the modifications as well and send a proposal as soon as I find some time to work on this.(In reply to Dan Williams from)Sorry missed this earlier, I checked this, this is exactly why I use g_initable_new to create those connections, that's the synchronous version and the connections are guaranteed to be there with the drawback that it blocks, but since this is init_sync that's not an issue.Any further feedback? Is any of my addressing comments mislead or wrong? Should I just go ahead and propose a new patch with the test cases?(In reply to Alberto Ruiz from)I'm not sure this is true. The question is whether, if we make this change, any behavior of existing users of this API changes. Existing users that call nm_remote_settings_new() and previously did not block for connections to be loaded, now will block due to _nm_remote_settings_ensure_inited(), which calls g_initable_init(). And that would break their existing expectations that initialzation does not load connections, but that 'connections-read' is fired some time after startup.The problem is that when this API was written, there wasn't GInitable at all, and it wasn't implemented with GInitable. We changed the implementation under the hood in a backwards compatible way to use GInitable, but I'm pretty wary about changing the behavior now to better conform to GInitable semantics, since existing users may not expect those at all.Another problem is that now, since init is sync, the connections-loaded call is emitted during iniitalization before the object pointer has been returned to the caller of nm_remote_settings_new(). So callers now have no way to attach to and receive that signal before it is emitted, and may not know that there are any connections at all.It might work to just defer emitting the connections-read signal to an idle handler that only gets scheduled in the init_sync() paths. But then we still have the issue that nm_remote_connection_new() will now take much longer than it did before...Yes, that's what those interfaces are for, but as described above this was an internal plumbing change and the existing API doesn't necessarily match up with GInitable semantics in this specific case :( I get what you're trying to do, and I agree with it 100%, except for the issue of backwards compatibility. I'd much rather have it be opt-in on the part of the client. Also note that libnm-glib is on life-support so that's even more reason to make sure we don't hose it... ideally apps would start porting over to libnm which actually has well-formed sync/async semantics :)Ok, thanks!(In reply to Dan Williams from)Now I see your point, I was not aware of the historical baggage. I think a delayed (idled) signal would cut it. The function has always been expected to block (whether it blocks for longer or not can be arbitrary from the API consumer POV). I do see a backwards-compat problem with the lack of signal emision.Thanks for the clarification. If libnm-glib is in life support (which I didn't know) then I think there is no much point in moving forward with this. So much for me attempting a meaningful contribution to NM :-)Does being in life-support has anything to do with the gdbus port?Anyway, I'm closing as WONTFIX. Thanks a lot for the review!Oh, I wasn't trying to be too discouraging but I probably came across that way. I'd entertain the patch that does the idle-triggered signal, and then we could just see how much time it takes for a large number of connections? I didn't mean that we had to close this bug entirely...By "life support" I just meant we won't be adding huge new additions or reworking the internal structure of libnm-glib a lot. We obviously must fix bugs and provide minimal new functionality that NM itself exposes.Yes, gdbus is one reason. There are some issues that would be very difficult to fix in libnm-glib (like dbus + kdbus pending connection limits and large numbers of NMConnections) that we can certainly fix in libnm.But anyway, if you don't mind re-doing the patch to ensure the idle signal is emitted after connections are loaded, lets take a look at that.Oh, I see, August is going to be a bit complicated for me so I won't be able to revisit the patch in the near term, but prolly I'll find some time in September. I do want to finish it, I just want to let you know I won't do it immediately.I'm reopening the bug to keep track of things. Again, thanks a lot for your comments. Will get back at this as soon as I can.at this point, "libnm-glib" is rather deprecated, and I don't think we add such features there anymore.On the other hand, "libnm" will make use of object-manager (not yet). I think that will affect this BZ.	12.0	id=774384	8	False	False	aperez	1
id=774384	REOPENED	epiphany	Interface	3.22.x	Other Linux	Normal normal	Epiphany Maintainers	2016-11-14 07:07 UTC by	Que Quotion	2016-12-15 15:25 UTC (	2 users	This website uses Javascript to create infinite popup dialogs. There's no way to close the tab or browser window they appear in except "kill -9 $(pgrep epiphany)". I'm not sure what--if anything--can be done about it, but it would be great to have a solution that covers the exploit rather than just the site itself.Warning: Set "org.gnome.epiphany.restore-session-policy" to "never" before viewing this site! If epiphany restores the page when it reopens, the interface will immediately be locked out again. Since the default setting is "always", this would cause epiphany to appear permanently unusable for a user who is unaware of dconf.The dialogs are in Japanese and the site plays a loud, annoying alarm. Not that it really matters what they say, but the gist of it is "windows security compromised, click here or else!" (security scam; clicking "ok" probably does something even more nasty to internet explorer that doesn't appear work on epiphany).This site appears occasionally as a popup advertisement from video streaming sites and other spam-riddled places of the internet.Do not click lightly:	Firefox has this feature which, after two or three popup dialogs have beenshown, they come with a checkbox that reads “Prevent this website from openingmore popup dialogs” (or something similar to that). Maybe Epiphany could dosomething similar.(In reply to Adrian Perez from)Yes, this is exactly what we need to do. All other browsers have had this for years. It needs to be fixed in WebKit, though:Thanks for taking the time to report this.This issue is most likely a bug in WebKit. Please report the bug toincluding a link to this bug report and noting the version of WebKitGTK+ that you have installed. When reporting the WebKit bug, be sure to include the prefix '[GTK]' in the bug summary and select the 'WebKit Gtk' component.(In reply to Michael Catanzaro from)Epiphany is already handling the WebKitWebView::script-dialog signal, andit could as well prevent dialogs after the N-th one... a different story iswhether it would be more efficient (and/or better architected) to have somesupport for this in WebKit[GTK+] — that makes sense, and probably is what youmeant, right? But even in that case, it may need changes in Epiphany dependingon how the WebKit[GTK+] part is done, so it may be a bit premature to closethis issue... dunno.I think we need new API in WebKitGTK+ to indicate that no further dialogs should be created for the page, right?I guess we could try to hack something up at the Epiphany level....Reported to webkit:Just my opinion, but the deeper the fix the better. If that's going to take a while however, an interim fix in epiphany is also a good idea.I suspect that is what apple did for their safari browser after finding this 2008 report of the same issue:	6.0	id=623734	17	False	True	alexiadeath	1
id=623734	REOPENED	GIMP	Tools	2.8.10	Other All	Normal normal	GIMP Bugs	2010-07-07 08:45 UTC by	kore	2016-09-21 17:32 UTC (	6 users	Setting brush dynamics to change size with pressure makes brush outline disappear when stylus is not touching tablet surface. Once you start drawing, the outline appears.Reproduce:- Choose any brush, custom or not;- In mapping matrix check the 'pressure'/'size' box.Expected result:When hovering stylus over the tablet, outline of maximum brush size is shown.Actual result:No indication of pointer location and size at all.	The expectation is wrong. The point of the outline is to show a preview of the pixels. It shows accurately that no pixels are modified.. The outline appears when you apply the pressure and there are pixels that will be changed.Why do you think that full size outline would be correct? It would totally void the point of a preview.But it did work like that in previous versions (including 2.7.0).Judging by the size of the outline, one can roughly estimate the outcome of applying pressure - now (without outline) I can't even see where I'm going to draw, thus I have to turn on pointer / crosshair, and it proved to by totally inconvenient.I'll try installing GIMP on a Windows machine today to see if this issue appears there too.It's a feature and its not OS dependent. I added a lot of code to make the outline respect dynamics. Its value is most seen when you use angle mapings and lets you predict how your stamp lands.It is mildly inconvinent in size mapings, but showing a full size stamp while hovering is out of the question. Would some threshold work for you, so a tiny stamp is shown IT will not be correct for the current state of prsssure, witch is zero, but might alleviate the inconveience.BTW, are you using your tablet in window mode? Normally you have the system cursor, if outline disappears.Yes, adding threshold will be most convenient. The feature in itself is very nice, the only problem is to know the location of the cursor.As for the tablet modes, I checked the window mode, and it really has some sort of pointer when stylus doesn't touch the tablet; alas, for me personally this mode is rather uncomfortable.Thanks for the fast response, guess this bugreport can be closed now.I'd like to add a consideration, since I have this frustrated me as well.Many of the "preview" values that affect the size/shape of the brush are actually taken from the current input device properties (direction, pressure, velocity) _during_ the drawing process, i.e., when the brush is down. These properties, being undefined when the brush is up, shouldn't factor into the calculation, IMHO, but should default to reasonable values. "Reasonable" here meaning "so that I don't have to guess where my cursor is going." It really is blindingly irritating.Actually, an argument for defaulting to max size is that I know that hard as I may press, this is the biggest this brush is going to get on the current settings, so I know that once I start the stroke, I have an upper limit in mind. This is actually much more valuable to me than a preview that becomes irrelevant as soon as I start to draw _anyway_.I would have at least liked to see a configuration option for trading off some of this accuracy for a bit more stable pointer indicator.I agree with Meshash here. IMO we should start a discussion about this on the gimp-developer list.I'm starting to think that the problem is specific to pressure and that showing a pressure=1 outline if pressure is 0 would cover most needs without breaking the stamp prediction, so I'm going to implement that now, and then we can see what else is problematic.There are a lot of things relating to dynamics I don't know what to do about actually, like interaction with settings in GIH brushes, so by all means, please feel free to start a thread.***has been marked as a duplicate of this bug. ***The real brush size should be shown at least when using [ and ] to change brush size. Otherwise there's no visual cue for how large the brush is.This fixes the case of "no cursor shown at all" in both master and gimp-2-8:commitAuthor: Michael Natterer <>Date: Wed Apr 9 14:30:46 2014 +0200 app: don't create a fallback crosshair in gimp_brush_tool_create_outline() Instead, draw the crosshair in gimp_brush_tool_draw() if create_outline() didn't return an item *and* if there is no brush tool cursor. In gimp_source_tool_draw(), don't add an additional crosshair if create_outline() returned an item. This fixes both "no cursor at all" and "both outline and crosshair shown" for certain prefs settings conbinations (). (cherry picked from commit) app/tools/gimpbrushtool.c | 26 +++++++++++++------------- app/tools/gimpbrushtool.h | 3 +-- app/tools/gimpsourcetool.c | 45 ++++++++++++++++++++++++++++----------------- 3 files changed, 42 insertions(+), 32 deletions(-)This should fix the issue in master:commitAuthor: Michael Natterer <>Date: Sat Apr 12 01:13:11 2014 +0200- No brush outline with dynamics set to 'size' on 'pressure' Improve the logic in gimp_brush_tool_draw() and draw a brush-sized circle if the actual brush outline got scaled away by dynamics. app/tools/gimpbrushtool.c | 67 +++++++++++++++++++++++++++++++++++++++++++++++++------------------ 1 file changed, 49 insertions(+), 18 deletions(-)***has been marked as a duplicate of this bug. ***I'm also very affected by this “feature” of not to be able to see the outline of maximum brush size. I think that is not changed in the last stable version (GIMP 2.8.14 ). ¿Is there in any beta version? I would like to try.Thank you very much for the, otherwise, excellent work with the program.There is the unstable development version. If you are on Windowsyou can use the nightly builds atI’ve tried the last stable version of Gimp and the behavior of the outline of the brush is the same. In the meantime, after my last entry (a year and half ago) I discovered Krita and I’ve been working with it until now, but it’s a pity not to paint and draw also with Gimp when it has almost everything to do it even better. So I’ve decided to try to explain again, even with my deficient english, the point of view of some users that perhaps are, as me, professional illustrators.It seems to be a conception problem: the issue appears when is used a pressure sensitive tablet (a cintiq in my case) and a brush with the pressure-size option on. Alexia Death said:“The point of the outline is to show a preview of the pixels.”“The outline appears when you apply the pressure and there are pixels that will be changed.”In my opininon, there is a temporal incoherence in this last sentence: apply the pressure (present) VS will be changed (future). What actually happens now is that when you apply the pressure, you see pixels being changed AND, over it, the outline of the brush changing in real time. Before to apply the pressure you see nothing (or just a position indicator). That is: or redundant feedback or almost no feedback at all.As I see it, the point of a preview is, literally, to view what will be, in this case, to be predictable. I understand, as Alexia said: "I added a lot of code to make the outline respect dynamics." and I hardly can imagine how much work it means to implement this function: for me to be able to develop a digital program as Gimp or a feature for it is like a matter of witchcraft and I admire it a lot, but with this configuration I lost completely the feeling of the size of the brush. I’ve been trying to find an alternative way of painting and also try to work as is, but always with the same result: it’s irritating. While painting, I use to change continuously the brush size and the zoom, and to know the parametric size of the brush is not enough: I need to feel it. Along the years, not only with Gimp, to see the full size of the brush has demonstrated to be, for a lot of users, intuitive and effective.So, I only ask for one thing: to have the choice to by-pass that function. It could be in preferences, for example checking “Show always full size outline”. I hope to have been clear enough to explain why I think the status of this theme is not resolved or fixed. If is not, please, say it. Thanks!Reopening so we can look into this again.	17.0	id=509603	7	False	False	zeuthen	1
id=509603	REOPENED	gvfs	daemon	unspecified	Other Linux	Normal normal		2008-01-15 11:34 UTC by	Alexander Larsson	2008-03-05 20:52 UTC (	2 users	Most backends generate file icons via mimetypes. Right now each backend has this code duplicated (or not at all), it should be shared.	I believe this was fixed with this commitSort of, we'd like to use it in gvfs too, and handle the inode/* stuff etc.Yeah. I closed the bug because I actually use it in the gphoto2 vfs backend. But I didn't think about the inode/* stuff. That's a good point.	3.0	id=751857	29	False	False	bugzilla	1
id=311195	REOPENED	doxygen	documentation	1.4.x	Other Windows	Normal normal	Dimitri van Heesch	2005-07-21 22:03 UTC by	Randy Merkel	2005-10-05 17:14 UTC (	0 users	Version details: 1.4.4Distribution/Version: XPSupply a default value in a function defination in a header file, e.g.,UINT32 RmsBackup (const STRING& inBackupLocation, bool inFullBackup = true);Document the function declaration in the body file, e.g., /** * ... * * @param inBackupLocation ... * @param inFullBackup ... * * @return The ordinal value of a JobManResult */UINT32 RmsBackup (const STRING& inBackupLocation, bool inFullBackup) { ... }Run doxygen and check the HTML output; inFullBackup is not documentated ashaving a default value.Following is my doxyfile:# Doxyfile 1.4.4#---------------------------------------------------------------------------# Project related configuration options#---------------------------------------------------------------------------PROJECT_NAME = JobManPROJECT_NUMBER = OUTPUT_DIRECTORY = DocsCREATE_SUBDIRS = NOOUTPUT_LANGUAGE = EnglishUSE_WINDOWS_ENCODING = YESBRIEF_MEMBER_DESC = YESREPEAT_BRIEF = YESABBREVIATE_BRIEF = ALWAYS_DETAILED_SEC = NOINLINE_INHERITED_MEMB = NOFULL_PATH_NAMES = NOSTRIP_FROM_PATH = STRIP_FROM_INC_PATH = SHORT_NAMES = NOJAVADOC_AUTOBRIEF = NOMULTILINE_CPP_IS_BRIEF = NODETAILS_AT_TOP = NOINHERIT_DOCS = YESDISTRIBUTE_GROUP_DOC = NOSEPARATE_MEMBER_PAGES = NOTAB_SIZE = 4ALIASES = OPTIMIZE_OUTPUT_FOR_C = NOOPTIMIZE_OUTPUT_JAVA = NOSUBGROUPING = YES#---------------------------------------------------------------------------# Build related configuration options#---------------------------------------------------------------------------EXTRACT_ALL = NOEXTRACT_PRIVATE = NOEXTRACT_STATIC = YESEXTRACT_LOCAL_CLASSES = YESEXTRACT_LOCAL_METHODS = NOHIDE_UNDOC_MEMBERS = NOHIDE_UNDOC_CLASSES = NOHIDE_FRIEND_COMPOUNDS = NOHIDE_IN_BODY_DOCS = NOINTERNAL_DOCS = NOCASE_SENSE_NAMES = YESHIDE_SCOPE_NAMES = NOSHOW_INCLUDE_FILES = YESINLINE_INFO = YESSORT_MEMBER_DOCS = YESSORT_BRIEF_DOCS = NOSORT_BY_SCOPE_NAME = NOGENERATE_TODOLIST = YESGENERATE_TESTLIST = YESGENERATE_BUGLIST = YESGENERATE_DEPRECATEDLIST= YESENABLED_SECTIONS = MAX_INITIALIZER_LINES = 30SHOW_USED_FILES = YESSHOW_DIRECTORIES = YESFILE_VERSION_FILTER = #---------------------------------------------------------------------------# configuration options related to warning and progress messages#---------------------------------------------------------------------------QUIET = NOWARNINGS = YESWARN_IF_UNDOCUMENTED = YESWARN_IF_DOC_ERROR = YESWARN_NO_PARAMDOC = NOWARN_FORMAT = WARN_LOGFILE = #---------------------------------------------------------------------------# configuration options related to the input files#---------------------------------------------------------------------------INPUT = . \ includeFILE_PATTERNS = *.c \ *.cpp \ *.hRECURSIVE = NOEXCLUDE = CVS \ Include\CVS \ xJobMan\CVS \ GenerateSchema \ SmokeToASAEXCLUDE_SYMLINKS = NOEXCLUDE_PATTERNS = EXAMPLE_PATH = EXAMPLE_PATTERNS = EXAMPLE_RECURSIVE = NOIMAGE_PATH = INPUT_FILTER = FILTER_PATTERNS = FILTER_SOURCE_FILES = NO#---------------------------------------------------------------------------# configuration options related to source browsing#---------------------------------------------------------------------------SOURCE_BROWSER = NOINLINE_SOURCES = NOSTRIP_CODE_COMMENTS = YESREFERENCED_BY_RELATION = YESREFERENCES_RELATION = YESUSE_HTAGS = NOVERBATIM_HEADERS = YES#---------------------------------------------------------------------------# configuration options related to the alphabetical class index#---------------------------------------------------------------------------ALPHABETICAL_INDEX = YESCOLS_IN_ALPHA_INDEX = 5IGNORE_PREFIX = #---------------------------------------------------------------------------# configuration options related to the HTML output#---------------------------------------------------------------------------GENERATE_HTML = YESHTML_OUTPUT = HTML_FILE_EXTENSION = .htmlHTML_HEADER = HTML_FOOTER = HTML_STYLESHEET = HTML_ALIGN_MEMBERS = YESGENERATE_HTMLHELP = NOCHM_FILE = HHC_LOCATION = GENERATE_CHI = NOBINARY_TOC = NOTOC_EXPAND = NODISABLE_INDEX = NOENUM_VALUES_PER_LINE = 4GENERATE_TREEVIEW = YESTREEVIEW_WIDTH = 250#---------------------------------------------------------------------------# configuration options related to the LaTeX output#---------------------------------------------------------------------------GENERATE_LATEX = NOLATEX_OUTPUT = LATEX_CMD_NAME = latexMAKEINDEX_CMD_NAME = makeindexCOMPACT_LATEX = NOPAPER_TYPE = a4wideEXTRA_PACKAGES = LATEX_HEADER = PDF_HYPERLINKS = NOUSE_PDFLATEX = NOLATEX_BATCHMODE = NOLATEX_HIDE_INDICES = NO#---------------------------------------------------------------------------# configuration options related to the RTF output#---------------------------------------------------------------------------GENERATE_RTF = NORTF_OUTPUT = COMPACT_RTF = NORTF_HYPERLINKS = NORTF_STYLESHEET_FILE = RTF_EXTENSIONS_FILE = #---------------------------------------------------------------------------# configuration options related to the man page output#---------------------------------------------------------------------------GENERATE_MAN = NOMAN_OUTPUT = MAN_EXTENSION = MAN_LINKS = NO#---------------------------------------------------------------------------# configuration options related to the XML output#---------------------------------------------------------------------------GENERATE_XML = NOXML_OUTPUT = xmlXML_SCHEMA = XML_DTD = XML_PROGRAMLISTING = YES#---------------------------------------------------------------------------# configuration options for the AutoGen Definitions output#---------------------------------------------------------------------------GENERATE_AUTOGEN_DEF = NO#---------------------------------------------------------------------------# configuration options related to the Perl module output#---------------------------------------------------------------------------GENERATE_PERLMOD = NOPERLMOD_LATEX = NOPERLMOD_PRETTY = YESPERLMOD_MAKEVAR_PREFIX = #---------------------------------------------------------------------------# Configuration options related to the preprocessor #---------------------------------------------------------------------------ENABLE_PREPROCESSING = YESMACRO_EXPANSION = NOEXPAND_ONLY_PREDEF = NOSEARCH_INCLUDES = YESINCLUDE_PATH = INCLUDE_FILE_PATTERNS = PREDEFINED = EXPAND_AS_DEFINED = SKIP_FUNCTION_MACROS = YES#---------------------------------------------------------------------------# Configuration::additions related to external references #---------------------------------------------------------------------------TAGFILES = GENERATE_TAGFILE = ALLEXTERNALS = NOEXTERNAL_GROUPS = YESPERL_PATH = #---------------------------------------------------------------------------# Configuration options related to the dot tool #---------------------------------------------------------------------------CLASS_DIAGRAMS = YESHIDE_UNDOC_RELATIONS = YESHAVE_DOT = YESCLASS_GRAPH = YESCOLLABORATION_GRAPH = YESGROUP_GRAPHS = YESUML_LOOK = YESTEMPLATE_RELATIONS = NOINCLUDE_GRAPH = YESINCLUDED_BY_GRAPH = YESCALL_GRAPH = NOGRAPHICAL_HIERARCHY = YESDIRECTORY_GRAPH = YESDOT_IMAGE_FORMAT = pngDOT_PATH = DOTFILE_DIRS = MAX_DOT_GRAPH_WIDTH = 1024MAX_DOT_GRAPH_HEIGHT = 1024MAX_DOT_GRAPH_DEPTH = 0DOT_TRANSPARENT = NODOT_MULTI_TARGETS = NOGENERATE_LEGEND = YESDOT_CLEANUP = YES#---------------------------------------------------------------------------# Configuration::additions related to the search engine #---------------------------------------------------------------------------SEARCHENGINE = NO	Confirmed. Should be fixed in the next CVS update.This bug was resolved to status "FIXED" as part of a group change. Please verifythat this bug is indeed fixed in doxygen version 1.4.5 (or later). If not thenplease reopen the bug, so it stays on my radar.Appears to only be partially fixed in 1.4.5. The default value for afunciton/utility only shows up in the brief description, e.g.; UINT32 RmsBackup (const STRING &inBackupLocation, bool inFullBackup=true) Backup the database. But not in the detailed description: UINT32 RmsBackup ( const STRING & inBackupLocation, bool inFullBackup ) Backup the database. Creates a backup image of the database in the location named byinBackupLocation, overwriting the previous image, if any... Parameters: inBackupLocation Specifies the location of the new backup image. inFullBackup Set true to make a full backup image, false for anincremental. Returns: The ordinal value of a JobManResult I expected the detailed documentation to show the default as well, e.g.,; UINT32 RmsBackup ( const STRING & inBackupLocation, bool inFullBackup = true ) ...However defaults in class member functions appear to work okay, that is thedefualt shows up in both the brief and the detailed descriptions.	3.0	id=311195	6	False	False	dimitri	1
id=751857	REOPENED	mutter	general	unspecified	Other All	Normal normal		2015-07-02 17:57 UTC by	Jasper St. Pierre (not reading bugmail)	2017-01-06 22:21 UTC (	24 users	This is a first pass of things that came out of the West CoastHackfest. The goals here were to support additional tiling modes/ "zones", and to make it so that tiled apps can be resized.The Elementary guys were particularly excited about this. I chose toimplement the semantics they want (in respect to having separate tiledvs. maximized states), but I definitely think it makes sense forbehavior like the tiling zones in `update_move` to be shell-definedeventually.I'm attaching this mostly to get review and feedback from Florian,who wrote the original tiling code I'm deleting here.Goals, eventually, are to support split-resizing for applications thatare close enough in terms of borders (e.g. if I split left and rightand click in the middle border, I resize both applications at the sametime).It has had some limited testing over the last few days, but additionaltesting would always be appreciated, of course.The next phase of this would be patches here to expose the constrainedcorners to GTK+ to have it respect the proper constrained edges.Patches are also in the wip/tiling branch of mutter.	Createdwindow: Remove old tiling codeWe'll soon replace this with a better schemeCreatedAdd "size states" which save window size informationCreatedwindow: Add new tiling codeThe new tiling code, instead of based around "tiling states", is insteadbased around constrained edges. This allows us to have windows that havethree constrained edges, but keep one free-floating, e.g. a window tiledto the left has the left, top, and bottom edges constrained, but theright edge can be left resizable.This system also is easily extended to support corner tiling. We also,using the new "size state" system, also keep normal, tiled, andmaximized sizes independently, allowing the maximize button to bouncebetween maximized and tiled states without reverting to normal inbetween. Dragging from the top will always restore the normal state,though.Createdframe: Don't allow resizing of edges that are constrained(In reply to Jasper St. Pierre from)I'm all for making tiling more flexible, but there are cases where I expect it to at least appear as window state to the user - namely the multiple monitor behavior has seriously regressed with those patches:If two windows are tiled side-by-side and moved to another monitor (via shortcuts, the overview, or by unplugging their monitor), I expect them to remain tiled side-by-side without gaps or overlap. I don't think that's a crazy expectation, or that it's impossible to add more flexibility without breaking what we have.(In reply to Florian Müllner from)Well, I did write them at a hackfest with a laptop with one monitor. I'm aware things like multimonitor broke, along with keybindings (this isn't a completed patchset, but to present the approach make sure I don't waste my time further). I'll look into multimonitor support. Do you have any other comments on the behavior or code?Will I see any review here before I fix multimonitor behavior, or should I work on fixing that first?I think you should probably go ahead and look at multimonitor behavior.Jasper are you still working on this?I'm still waiting for feedback that doesn't involve "improve multimonitor first". If I won't get such feedback, then I suppose I'm not working on it.(In reply to Jasper St. Pierre from)I'm not entirely sure what kind of feedback you are hoping for to be honest. In its current form, it is unclear what behavior the patches try to implement (apart from adding quarter-tiling support, which looks fine to me), so I cannot comment on whether the redesigned tiling behavior makes sense to me, nor whether I think the code is a good way to implement it.Fair enough. I developed this model with the Elementary designers since they were at the West Coast Hackfest, and they seemed interested and eager in the feature, and there were otherwise no GNOME designers there I could design the feature with.The model we have developed together is that windows are attached to monitor edges instead of having explicit tiling zones. Dragging a window into a tiling zone constrains it to those edges, and leaves the remaining edge hanging, but with a default value.For instance, if you right-tile a window, it constrains the top, bottom, and right edges of the window to the monitor edges, but leaves the left edge free-floating and free to resize.If you quarter-tile a window, you get two edges free-floating, and such.Besides this, we cleaned up the state management for the window, so the window now saves three states. If you have a window, tile it, and then maximize it, pressing the maximize button will move it back to tiled mode, and if you drag it from the top, it will remember the size it started with -- something that today's mutter gets wrong (try left-tiling a window, then pressing Super+Down -- it resizes to the minimum size possible).We thought this model was flexible and worked in most scenarios we cared about.(In reply to Jasper St. Pierre from)So resizing two side-by-side tiled windows is essentially:- tile window left- resize- tile window left- fiddle to get a matching sizeThat doesn't sound much more convenient than moving the windows to opposite corners and resizing them by grabbing the window corner. At the very least I'd expect two side-by-side windows to be resizable together, and ideally tiling a second window would take up the remaining monitor area (instead of half) when there's already a tiled window on the opposite edge. I think that's what we settled on inat least.That sounds like the original tiling behavior we had, but we changed it in.We designed a model for resizing multiple windows at the same time, but I decided not to implement it so I could get feedback on this model first.The model we designed was that when you have opposite edges or corners in close proximity that are visible, you can drag them together.Well? Is that enough? Will I get any other feedback?Now that the only way to resize a snapped window has been removed () I would certainly appreciate an alternative way of doing it.Jasper, I can compile and test patches if that helps! I can dig out a second monitor, too.The old way was equivalent to untiling the window from the side and then resizing it. It didn't actually keep the window tiled. You can continue to untile the window and then resize it -- that should still work.I'm not blocked on testing. I'm blocked on review from another core team member.Yes, that still works. It's a minor annoyance but I guess I'll get used to it.Pushed.(In reply to Florian Müllner from)Looking at this, we already have code to adjust the window to the new monitor's size, so this should work mostly perfectly. I tested it and I was comfortable with the behavior on my machine. If it doesn't, please tell me your setup and I'll try to fix it up as best I can.(In reply to Jasper St. Pierre from)Reverted. I want to have a chat with Lapo about the desired behavior first, but only came back from vacations on Thursday.From trying it out a bit: - tiled windows are still resized one-by-one; without that it's hard to judge whether a whole new implementation is better than something like the patches in- keyboard shortcuts are messed up - no way to get out of tiling, after maximizing/unmaximizing the normal window size is messed up, ... - no, windows are *not* resized on monitor/resolution changes: windows keep the width they had on the previous monitor, rather than preserving the occupied monitor area (half, third, ...)As mentioned, I'll need to have a talk with Lapo; however the last point makes me think that constraints are a more logical approach to tiling than treating it as a move+resize operation. Tiling as a window state where the window covers a particular part of the monitor is a well-established definition by now (and doesn't exclude resizing at all), I don't think the same is true for the sticking to a corner/edge approach. There are definitively parts in the "old" tiling code that I dislike (mostly the confusing semantics of tile-mode being used for requested and actual mode), but I don't see how those cannot be changed without changing the definition of tiling altogether.I'm livid.Next time, after working on this code for nearly a year, not being contacted about it, and not answering my questions, or hearing any contact after repeated inquires, could you at the very least, *include me* on these discussions with Lapo instead of having them in private, without me?You know my email address. You know my GChat. You know my IRC handle. Any of those would have sufficed.I'm going to fix the remaining issues and re-push the new branch. I didn't catch the keyboard shortcuts one -- thanks for noticing. As for multimonitor, we do do rescaling. I tested it, and it works fine. If it's not working on your setup, we need to figure out why.Oh, sorry, I misread your comment -- I thought you had already talked with lapo about desired behavior. My bad. So yeah, when you do talk with lapo, I'd prefer to be invited. I also won't re-push my branch to master until after we've had that discussion, though I will keep wip/tiling up-to-date.--When I previously talked to lapo, his desired approach was a model that was completely different from everyone else's I've heard. Basically, you have a grid of four corner slots, and when you resize all four slots.So if you have windows stacked top-left A, maximized B, bottom-right C. Clicking-and-dragging A would also resize C. Seemed like a bizarre and unintuitive approach to me, which we all agreed on.--Also, while this first patch land isn't going to have multi-edge dragging, that could be fairly complicated to get right. But it does add corner-tiling, tiling resizing, and a few other features. I'd prefer for those to be judged independently of multi-edge, because they, alone, are a *massively* improved feature set, in my opinion. (I did wake up to three emails this morning from people saying they were happy I landed improved tiling features)Elementary has said they might want something like ChromeOS's dragging, where hovering over two close window edges shows a grip which gives you the option. That would mean giving edge information and such to the compositor, and having it show UI elements which could start multi-edge drags. I have a plan (and some extremely hacky WIP code) to do multi-edge dragging, but it could take another month or so.(In reply to Jasper St. Pierre from)Sorry, but the feedback you were asking for is hard, considering that it is largely about *unwritten* code (combined resizing, automatic size adjustments). Those were issues when I marked the patch as needs-work, and they are *still* issues with the patches you pushed. The very least is that those are fixed *before* landing them (that's what "needs-work" means really).And no, I didn't have sneaky chats with Lapo - I *want* to discuss tiling with him, but we haven't done so yet. Let's include you in the discussion from the get-go then.Please don't. I don't see any code that does automatic resizing on multimonitor(*), and adding code to handle it in monitor_changed() or similar would be conceptually odd when we don't change the handling of maximization at the same time. This starts to look very much like a disagreement about the definition of tiling, which should be resolved in discussion and *not* by a push-revert war.(*) reproducer: left-tile one window, right-tile another one, move both to another monitor using <super><shift>left/right - they keep the width they had on the original monitor, which is not the correct behviorI'm currently not at a place where I can test multimonitor support -- my laptop only has a DisplayPort connector and none of the monitors I have here have DisplayPort. I tested it at the office.However, when we move windows across monitors, like we do on keyboard shortcut or on automatic hotplug, we do indeed use move_between_rectangles which should adjust the scale of both of them. This has been standard behavior, even with unmaximized or untiled windows (have a window be about 80% of the screen? It should resize to be about 80% of the screen once moved to a monitor half the size).This feature worked fine for me when I tested it at the office. If it's not working for you, can you see if it happens for you in untiled cases as well, and look into why the code isn't working. We do do this size adjustment on monitor handling -- see move_to_monitor calling move_between_rectangles.It could be that a feature I added or a small cleanup I made before I pushed it broke it for everyone, but all of the stuff I touched was in the toggle-tiled keybindings code, so I doubt that.(In reply to Jasper St. Pierre from)"We all" apparently didn't include me there, but yeah, I tend to agree there. I think the main difference is: (1) tiling is a window state that limits the window to x% of the monitor width (currently 50%, but having that user-adjustable still fits the concept (see again), as does quarter-tiling) (2) tiling as a move-resize operation: a window is stuck to an edge/corner and resized to some part of the monitor area, after that the user may resize it using the "free" edges/corners - I don't think making resizing *only* a user operation is right, and recomputing the area on monitor changes and applying the new size seems like an after-thoughtWell, yes - that's whyhas a lengthy discussion. However I don't think resizing tiled windows makes sense without that.What other features? From what I see, the patch set: (1) adds corner tiling (2) adds rudimentary resizing with the hard parts left out (3) regresses in several areas the old implementation got rightFor (2) we already have a patch set that could be picked up that includes the hard parts, which leaves the question why (1) requires a completely different concept rather than extending the existing implementation?(In reply to Jasper St. Pierre from)No, move_between_rects() updates the window position to reflect the relative position on the old monitor. It doesn't touch the size at all, which is the expected behavior for normal windows. The size of maximized windows is handled by a constraint, as did the old tiling code for tiled windows.Looking forward to seeing this getting in. I hope that discussions with Lapo come out with something that would see some good improvement in this area. Let me know if there is something you'd like me to help with..Have there been any updates here on the design side?I am also interested. We are close to UI freeze so I would be interested to seeing this in this upcoming cycle.(In reply to Jasper St. Pierre from)No. For what it's worth, I don't consider tiling changes subject to any freezes except for hard code freeze, and there are still some UI changes pending on the shell side. Still, let's try to have the talk later this week.The code is now on the wip/tiling-2 branch.I've given it a try after todays discussion. My observations:1) Keybindings feel incomplete without a way to go to the quarter tiling states via keyboard2) The heuristics for maximizing almost screen-filling windows still work3) There is no obvious way to tile to the top half of the screen, since dragging up is for maximizing4) While the resizing of constrained windows works nicely in isolation, without the ability to resize tiled neighbors, it feels cumbersome. Maybe it would feel better if you could at least 'snap into the remaining space' (ie half-tile window 1, adjust its size, then half-tile window 2 to the other side and have it take up the remaining space.5) Changing screen resolution with tiled windows leads to overlaps or gaps, which is not greatI think the following would be needed to make this feel natural:- When windows are tiled next to each other (either left/right or neighboring quarters), the shared edge should not be unconstrained but resize both windows at the same time. Should probably use a different cursor to make that obvious (the ones we use on pane splitters). Maybe this is the "hard parts" that Florian alluded to in?- Constraining shared edges like that should also take care of the move-between-monoitors and change-resolution situations. Extra wrinkle here: when the constraints can't be satisified in these cases, we need to give up tiling, while we should simply refuse to resize any further when the user is dragging the shared edge.- We should add keybindings to move between the quarter and half-tiled states. Could just extend the current Super-arrow bindings to roam between all tiling states in some fashion.(In reply to Matthias Clasen from)<snip>What's the use case for quarter tiling, when we already have trouble with some applications being able to tile to half of the screen (especially in hidpi), and there are at least 2 tiling terminals available for GNOME[1]?Half-tiles with 2/3 1/3 splits would probably be more generally useful (it's what iOS and Windows allow in recent versions).[1]: Terminix:Terminator:(In reply to Bastien Nocera from)Funny, I found this discussion after trying to find out how to split screen by other ratio than 50%.It probably needs to be configurable, because I would not want to have 1/3-screen terminal to only have 70 columns. So either a way to specify width of the "left half" of the screen or implement multiple sizes to toggle through with super-right.Thanks. :-)(In reply to Jan Dvořák from)No, because you'd use a tiling terminal emulator, where the constraints aren't the same as in managing multiple windows on the one screen.(In reply to Bastien Nocera from)I joined the gnome bug tracker just so I can give some input here.As a student, I constantly reference many things, be it a website, a book, a pdf, an article, an assignment spec, etc. And also have many windows open, usually a terminal, a note taker (like cherrytree or zim), an editor for code, spreadsheets, graphing, anything really.Plain vertical half tiling mostly works fine, but often I find the need to have at least 4 windows open at once and refer between them. Alt-Tabbing is a p-i-t-a, so is switching between virtual desktops. In this case, quarter tiling is my only option to maintain a decent workflow.I used to use a tiling window manager like i3 or awesome (I even made an easy theme switcher for awesome using environment vars), but I got fed up with losing too many conveniences; things like not remembering the name of an app and needing to browse a menu to find it, where just clunky in a tiling wm. And I liked having the easy access to a calendar and notifications in gnome (important for managing my study).My point of all this, is this;*Not everyone is going to use quarter/adjustable tiling to run multiple terminals**There are many more use cases for quarter tiling than you think*As an example;Tiling terminal application won't help me with browser/terminal or evince/terminal split I tend to use very frequently.Hi everyone! Just noticed this bug report and also want to help as much as I can :)I've tried to compile wip/tiling-2 by merging it to the master branch but I've got a compile error. Before I investigate more, just wanted to check if someone got it currently working?When Cinnamon introduced quarter tiling it broke many key bindings for me. Please let the following bindings still work:Floating window: Super + Up -> Maximize window (NOT tile top)Tiled window: Super + Up -> Maximize window (NOT quarter tile)Tiled window: Super + Down -> "Untile" window (NOT quarter tile)I suggest these new keybindings for the new tiling modes:Super + (two arrow keys at the same time) -> Quarter TileMaximized window: Super + Up -> Tile topFloating window: Super + Down -> Tile bottomThis could be fixed by adding a maximize button to every window and have dragging up tile to the top. IMHO this would be a lot more consistent and intuitive, but on the other hand maximizing is a far more important operation than top-tiling. So I think it might be okay if top-tiling is only accessible via the key bindings for power users.Hi all. Is `wip/tiling-2` going to receive attention in any near future type of thing?Hardcoded 50/50 is just plain unoptimal for a number of usability reasons. Simple baseline reasoning is that 50/50 ruins both windows, whereas other ratios tilt at least one of the windows towards a usability win. For example, in a "left-to-right" environment it makes more sense to do a 1/3 + 2/3 split or similar, so for a center-positioned user could gain a more enjoyable standard F attention pattern (most critical info is top-left) for the 2/3 window.50/50 split feels like a person's two eyes are constantly dragged into separate directions.It would be nice if a dconf parameter would allow specifying tiling % ratios, so we could more accurately experiment and study the situation, what works what doesn't. Patching ratio calculation settings seems like a useful, low hanging fruit step to take, that could be achieved quicker than 2017+.I'm on Gentoo, and would be able to easily user-patch my mutter installation, but client work makes it unlikely I can familiarize myself with mutter codebase to come up with a patch on my own for at least a few months from today.IMO Super + Up is not intuitive for Maximize. Especially since: 1) Super + Down is not Minimize. 2) Super + Left is already Tile Left. 3) Super + Right is already Tile Right 4) Super + Down would be Tile Bottom. 5) Alt + F10 is already Maximize toggle.If you need maximize with mouse you already have double click on the title.Simple question: I don not want to sound disrespectful, but you are not serious, are you? Every major Linux IDE (e.g. Unity 7/8, KDE and EVEN XFCE) has a quarter tiling functionality. People do not care, whether you come up with the most intuitive and powerful implementation in the first release of tiling support. Please just include the code again and let people enjoy the taste of quarter tiling!This comment may sound technically not thought through, but speaking as a technician myself, technicians mostly tend to solve non-existing problems; call it one of our habits ;) Just concentrate on the basic flow for now; include the other fancy stuff at a later point in time. Who knows what future might bring us...Please stick to the following: There is a considerably large userbase that wants to enjoy the possibility of (even standard) quarter tiling in Gnome IDE. Just deliver; very soon! Thank you in advance!(In reply to christian.ohrfandl from)The implementation is incomplete and thus broken. We're not going to merge it.You also confuse desktop environments (DE) and integrated development environments (IDE).The bugs exist in that first pass implementation. And the mutter developers certainly know what habits "technicians" would have.All in all, this is not a useful comment. Unless somebody fixes the corner-cases in the existing patch, this will need to be implemented another way.Please don't post any more comments of that sort, they're not helping fix the problem.(In reply to Bastien Nocera from)Was a typo, of course I meant desktop environment (DE) and not IDE; why would you even think of an integrated development environment in that context? Wee bit fussy, ey?What are the current priorities of the mutter developers? Is this issue among them? The wip/tiling-2 branch did not receive much attention lately...As I pointed out in my post, I did not want to sound disrespectful. All I wanted to say is that the lacking of this feature is a major usability issue in Gnome Shell (or Mutter) and to be honest, as Gnome Shell is one of the major DEs on Linux, this circumstance ist quite a bit of a shame. Gnome Shell should pay attention to perform the forerunner role in innovative features like the mentioned one. Of course, this should include Mutter aswell.If you find these kind of comments, directly comming from your userbase, "not very useful", you probably lost your connection to the userbase. Just think about that a little longer, before you start "classifying" the usefulness of comments.OK, now we're talking ;) As asked earlier: What are the current priorities of the mutter team? Are there any ressources left the tackle the CORRECT implementation of this feature. Could you (or Florian Müller?) assign this feature request to a dev that has the time to implement the upcoming time?I'll do my best, if you encourage mutter devs to start working on this feature again (maybe Japer St. Pierre?) ;) Generally speaking, this was sort of an outcry, having the intention to make this feature relevant again. I mean come on; this discussion started about 1.5 years ago...Nevertheless, thank you for the quick reply!Just so you know, I was the one who wanted to implement this and I got the OK from mutter developers. Jasper was kind of enough to take over it as he felt that the solution was going require effort that would be beyond my experience. Of which he was quite correct!Do not construe the lack of progress as a denial that mutter developers don't want this feature, it just lower priority than other things that need to be worked on. If you think this might be a fun project to work on, you should dive in.I might look at this again, given what has been done so far and see it can go anywhere. It will be a fun project to do, I reckon as I soon as figure out what needs to happen to get accepted.	44.0	id=739480	12	False	False	florian.muellner	1
id=739480	REOPENED	gnome-shell	extensions	3.10.x	Other Linux	Normal normal		2014-11-01 05:51 UTC by	LambdaFox	2015-05-21 20:03 UTC (	5 users	I am using Ubuntu GNOME 14.04 LTS [amd64]. I am using Alacarte 3.10.0-1ubuntu2 to edit my applications menu. When I add a subfolder to a category in the menu, it does not show in the Applications Menu. Instead, all items in the child folder appear in the parent folder.	I'm afraid not supporting subfolders is intentional[0], not only in the app picker, but as well in the application menu.[0]***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***The link seems to have changed and is now found at:The article argues that instead of submenus you should use headers.That is a reasonable argument.Then I argue that we should follow the suggestion of the article and separate the submenus into headers instead of submenus.(In reply to Moo from)Not supporting submenus is intentional, so this is likely still a WONTFIX, but fine, let's get another design opinion with that suggestion.For what it's worth, the history on that link is not "oh, headers are a so much better way to express nested menus", but more like: me: We don't want to support nested menus, do we? designers: Nooooooooooo! me: Ok, do we have a reference on that I can cite? designers: not really, didn't google turn up anything? me:maybe? designers: sure, whateverSo I wouldn't keep my hopes up too much about submenu support (in any form) ...I see.One of the reasons the above article argues against submenus is that they can when placed on the right side of the screen make the submenu appear to the left, which is rather strange.However, the app-menu is GNOME is *always* in the top-left corner. Hence that can never happen. Hence the argument in the article does not apply to this particular use case.Right now the app-menu has no support for subgroups whatsoever in any form (be it through headers or submenus or anything else).I would like to get the UI team to investigate this and get feedback on which design choice they favor.Maybe we could get a implementation going if we get consensus how its to be done?(In reply to Moo from)The design choice they favored so far is: don't support nested menus. So before looking into *how* to best support submenus, you first need to convince the design team on the question of *whether* to support nested menus.How is a menu with 50+ items more usable than having proper sub-menus?Would it be possible to support nested menus and have it deactivated by default?Kali Linux relies on nested menus (see picture in this article for example:) and we might be willing to sponsor this feature if it helps. Florian, do you think this would be a reasonable solution?The Debian menu also had this interesting concept of declaring menu entries in a relatively deep structure but collating those sub-menus together as long as you don't go over X (let's say 10) entries in the menu.So if you have 200 games installed, you get a structure like "Games > Arcade", "Games > FPS" etc but if you only have 5 games installed then you get everything below "Games".This could also make a good compromise here, don't you think so?There's a reason we developed the shell overview as a better way to select applications. A menu with 50 items is as unusable as a deep menu hierarchy.I would say: if you want to have deep menus, write your own extension.That's not really helpful. Here were are in a bug about apps-menu extension and there's no reason to discuss the merits of a menu vs the shell overview.Then if you have many packages installed, you have many packages installed, it's a fact and you can't change anything about it. But the apps-menu can be made smarter to better deal with those... and this is what this bug is about.I have made a concrete suggestion that avoids sub-menus when they don't bring anything and that still respect them when they are defined and when the menu would be too large. What's the drawback of my suggestion?If that enhancement can be merged in the extension, Kali is ready to fund its development. If anyone reading this wants to implement this, feel free to send a quotation to me. We can obviously fork the extension but it's not in the interest of anyone. We don't need multiple menu implementations.CreatedShow subfolders in applications menu extensionI looked at this and came up with the attached patch, developed against 3.14 but tested against gnome-shell 3.14 and 3.16.The main changes are:- in _display() and _loadCategory(), we load non-toplevel categories, keeping the tree structure. sub-categories are implemented using submenus.- in _createLayout(), the scroll view is implemented in a custom PopupMenu.PopupMenuSection subclass so that the submenus work properly.- some hacks are removed, such as scrollToCatButton() or _onMotionEvent() for categories, as those were causing issues- One thing that I didn't manage to fix in a nice way is setting the categories box width to a value suitable for the sub-categories. There is a failed attempt at doing that, _menuContainerGetPreferredWidth().I'm sure some things could be done better, e.g. having CategoryMenuItem and ParentCategoryMenuItem share some code. But I think this is a good start and works fairly well, and we can polish it if there is interest in merging this feature.Review of:We don't want submenus, so marking it as such to get it off the review listI would really love to have submenus.Now the menus are all messy with unrelated entries grouped together.Having hierarchal submenus would logically group related applications into their own submenus. This would increase usability and make things easier and faster to find.On menus with many entries scrolling is currently required, this is highly undesirable.(In reply to Moo from)This is debatable, considering that the grouping is generally done according to someone else's logic - or rather: many different people's logics - that may or may not match the user's expectations. Yes, stuff like games are usually pretty clear-cut, but already something as simple as a mail program can be found in "Internet" or "Office", depending on the program - and making that "Internet/Mail", "Internet/Communications" or "Office/Productivity" doesn't improve that problem.In other words:(1) Locating a particular item in a menu is easier when there are not too many items(2) Finding a particular menu is easier when there are not too many menusCategories do help with (1), but they come at the cost of (2) - as always, there's a balance to hit. You think the balance should be shifted a bit more towards (1) by adding one or two additional levels - fair enough, that's certainly a valid opinion. But that doesn't make our opinion of stressing (2) a bit more by keeping the menu hierarchy flat invalid ...(In reply to Florian Müllner from)Fair enough.But then i think something should be done to avoid having to scroll.The menus should have more height, to fit more entries in them, so the user can quickly see the item, without have to scroll to find what he is looking for.	16.0	id=700651	18	False	False	dcbw	1
id=776042	REOPENED	geary	engine	master	Other Linux	Normal normal	Geary Maintainers	2016-12-13 12:10 UTC by	Gautier Pelloux-Prayer	2017-02-07 14:28 UTC (	2 users	Creatednetwork-change minimal listenerI can see dozen of these in logs:This is because of imap-client-session-manager.vala which connects to network monitor "network changed" signal.However, this signal is actually invoked every time *any* property of the network change, and in my case for some reasons the signal strength of the wifi connection change every second or less, leading to a tons of "reachability checking" in Geary.I think that something must be done here, but I am unsure what:1. Either use "bool available" signal's argument and store the previous value in the class. If no change, don't do anything.2. Use some delay between 2 consecutive checks (30 sec or …).1. would be cleaner but maybe there are cases where network change signal requires to check again the server reachibility (route change, etc.)?	I'm not really sure if this is something we want.First of all, if we look at the description of the network_changed signal:That means that if we get the network_changed-signal is fired and available is true, that a server still might have become (un-)reachable. One use case I might think of is setting up or exiting a VPN which restricts what websites you might go to.Second, I do think that we should keep this for debugging purposes, especially when people attach their log here in Bugzilla and we need to find out whether something is buggy in our code.Now, maybe we can find a middle ground and add a --no-network-log option to not output these messages? That could also come in handy if we are debugging a log that we are sure has nothing to do with networking code.Yeah, looking at the docs for network-changed: "If available is TRUE, then [...] others that were reachable before may no longer be reachable". So it seems we may still need to do a check here.On the other hand, the fact that signal is being fired so often is problematic, and this has been noticed by at least one other user ().Gautier, if it is being fired on signal-strength change then that may be a bug. Can you have a look and see if there is an existing bug about that against glib-networking, and if not file it and reference this one?Maybe having some period of quiescence between network changes is a compromise? It doesn't seem like a bad idea in any case, since if the network is being flaky, we don't want Geary taking connections up and down like a yo-yo. So maybe when network-changed is emitted, we should set a short (1s? 2s?) timeout before checking reachability, and if another is received within that time, the timeout is reset, up to some max (30s?), so that changes are eventually actually picked up in the face many notifications due to fluctuating signal strength.A few other points:- It may well be worth doing the same for network-available, for the same reason- In ::check_endpoint_reachable_async(), the if clause at the end will call adjust_session_pool.begin() even if the network was previously already reachable. This should perhaps check to see if it has instead changed to become reachable before calling that method, which may save some CPU cycles.- In 0.13, if we can start depending on GLib 2.44 we should also start using NetworkMonitor.get_connectivity(), and only decide to be up once full connectivity is reportedNiels, the problem is not the logs spam here, I genuinely think their is a bigger problem underneath. Basically Geary is never going to idle, it is pinging imap servers every 6 secs. I did not make a benchmark but I guess it is not that good for (at least) battery ;).Michael, I checked and the problem happens on 3 laptops on 3 totally different Wifis. I assume you also encounter the same behavior if your are on wifi (try running "sudo dbus-monitor --system | grep Strength -B 3 -A 1" - you should see 2 Strength signals emitted every 6 seconds).I am not not sure where should I report this "bug" (intended behavior?) since I could not find the code that is actually responsible of firing this signal - is it glib project, network category?BTW this does NOT happens for network-available. Probably because the network availability does not change while network properties does all the time?(In reply to Gautier Pelloux-Prayer from)Hmm, yeah if I run that, I do see an update every 4-5s. However, after coming up with a trivial program that only hooks up to network-changed, I only see that signal firing when the network changes, e.g. if I disconnect/reconnect to wifi. I'll attach that program here so you can check as well.This might be a dumb question, but are you 100% sure it is the network-changed hander that is causing check_endpoint_reachable to be called? It might be worth setting a gdb breakpoint or some debug logging to confirm.Probably a good place to start, yep. The glib source gio/gnetworkmonitorbase.c contains an abstract implementation of GNetworkMonitor that causes network-changed to be emitted if a network is added or removed. The source gio/gnetworkmonitornetlink.c is a concrete implementation that uses linux's netlink subsystem to detect when that happens. I don't know if that's what your system is using though.Oh wait, you already attached a minimal test case. Whoops! AFter getting that to compile, I'm still only seeing network-changed emitted when the network changes:Waited ~10s here, then disabled wifi:Waited ~5s, then renabled it:Waited ~20s, then:Creatednetwork-change minimal listener v2Fixing Compilation.I am not sure what is going on exactly here; but indeed today I get only a few periodic callbacks (every 50sec or so), except for network up/down where it goes to 10 in a few seconds. I think yesterday something was going wrong. If you don't mind I'd like to monitor it a bit more to see if that is reproducible (maybe it was due to heavy network load, or high CPU usage or…).(In reply to Gautier Pelloux-Prayer from)Yeah, no problem.After a bit of searching, I found this in an older Ubuntu bug::There's also some good advice there: using `sudo ip monitor` might let you see the same netlink messages that gnetworkmonitornetlink.c sees. Maybe worth running that in parallel with the test case, so you know what is causing changes?I cannot reproduce this issue for now, so I'll close it. I'm still monitoring it so if it happens again I'll reopen it.Creatednetwork-change minimal listener v3Just a minor update to the monitoring tool in case someone need it in the future…Interesting: I'm back at home and the problem starts appearing again. This is SSID specific and has to do with my Internet access provider for sure - anyone living in France with Orange might see the problem.Anyway, I'm reopening this issue and will try to fix it.I posted a bug in glib to check if this is something on this side:.	12.0	id=776042	8	False	False	nielsdegraef	1
id=700651	REOPENED	NetworkManager	general	unspecified	Other Linux	Normal normal	NetworkManager maintainer(s)	2013-05-19 18:15 UTC by	Pavel Simerda	2015-03-12 20:50 UTC (	4 users	NetworkManager should draw a line between booting and full operation in order to properly support onboot connections (e.g. ONBOOT=yes in Fedora legacy network initscript configuration).It could work in the following steps:1) NetworkManager process is launched and goes to 'booting' phaseIt reads the configuration, reads information about interfaces from kernel and udev, checks which interfaces are ready and checks which connections are marked for use at the booting phase.I think that runtime autoconnect and onboot autoconnect could be handled separately. Then some connections could be marked as autoconnect but not critical for boot to avoid unnecessary delay. The meaning of ONBOOT would be altered to better match the initscript behavior, while a new keyword (e.g. AUTO) would default to the value of ONBOOT but could be turned on (or off, if that makes sense) separately.All of this should be still optional to allow for real fastboot if the administrator knows all his daemons are well configured. And this could even be the default upstream, while keeping RHEL more conservative (while potentially slower to boot by default).2) When finished with onboot stuff, transition to 'running'NetworkManager would notify the init system (e.g. systemd) that it's running properly and start accepting requests from configuration tools. Also, it would start handling runtime/autoconnect connections that are not onboot/autoconnect, taking its time to handle non-critical.Advantages:* Separation of decision and implementation. If this feature was present, the decision only applies to the default configuration in RHEL. Other distributions could do their own decisions, administrators could alter the decisions, etc.* We would get rid of the 90-sec delay (!) as we would only wait for NetworkManager to process all onboot connections, which can be an empty list. If there were no onboot connections at all, we can continue (almost) immediately.Upstream bug report:* The possibility to make educated choice between being safe and booting fast.I think that Michal's idea leads to an optimal solution to the problem.	s/upstream/downstream/ :)I don't see a compelling use-case for having an interface automatically started at boot time, but not automatically started after boot. Likewise, I'm not sure why you'd have an interface to be automatically started after boot, but not at boot.In any case, if you enable wait-online, NM blocks until at least one interface has connectivity. Are you suggesting that a user may have two interfaces, one for a private network, and one for an upstrea network, and that wait-online should only wait for the upstream network or something? If that's the case, there are better ways to make that happen (and it's already handled if the user sets the private network as never-default=true).The only case where splitting onboot from autoconnect would speed up booting would be if *no* interfaces had connectivity at boot time, but you still wanted them to autoconnect after boot. Otherwise, this is already handled by NM AFAICT.(In reply to)This case is not the prominent one, but there still may be use cases at the administrator's discretion. Usually, when a setup is expected to succeed at boot, you don't care about it later.The typical onboot=yes connection would stick with the default (auto same as onboot).That's another story.* An ethernet DHCP configuration that isn't necessary for basic system services (e.g. when the administrator knows that all services either bind to wildcard address, or can cope with dynamic changes).* A USB ethernet device that isn't (or may not) be connected at boot time.* A wireless connection that needs scanning and shouldn't delay your boot time.* Other removable network interfaces.Basically any connection that you want autoconnected but that shouldn't block the boot process.This is one of the many use cases. The whole idea is about properly supporting the ifcfg's ONBOOT=yes and equivalents. Currently we don't support blocking the /etc/init.d/network or network.service until *all* ONBOOT=yes connections are up and running, failed or timed out. Therefore we effectively violate backwards compatibility with ifcfg.This is about network dependencies, not about default interface selection, that's another topic that could see improvements but...Not limited to that at all.My view on this is very simple. The former ifcfg scripts guarantee that all ONBOOT=yes connections are connected or failed trying. NetworkManager doesn't fulfil that guarantee and should be modified to be able to do that.The current nm-wait-online waits for the *first* AUTO connection. The original behavior was to wait for *all* ONBOOT connections. This difference is fatal. As ifcfg's ONBOOT=yes specifies a set of connections that are guaranteed to be tried (and often expected to succeed) and this set can have zero, one or multiple member connections, nm-wait-online simply fails to provide this behavior.There may be some specifics I don't know about even in the old ifcfg scripts and I can stand corrected. But the basic idea comes from Michal Schmidt and I very much agree with it:Yes, agreed that NM-wait-online doesn't exactly duplicate the old ONBOOT/sysv initscript behavior. We can change that, but we should also try to figure out what people actually use the boot-time behavior for, and if they really do a lot of complicated stuff with it.I'm also of the opinion that things that require network connectivity should actually specify *what* they require, instead of saying "hey I want a network". If you bind to * then yes you want something, but you're not saying *what* you want and that doesn't help make the system smarter. eg, if apache wants some IP address, then there should be a mechanism for the startup scripts to say "I need 192.168.1.1" instead of "I need a network", since then you can guarantee that apache will fail if it doesn't get what it wants. But I digress, back to the actual topic...I'm thinking more about complexity versus gain here. If we can do this in a way that gives most of the behavior that people actually use when they want network interfaces up on boot, but we don't have to add new properties or new "startup modes", that's a win, both in code and in terms of complexity of configuring NM for users. Which is why I'm interested in how people actually use ONBOOT.One option is to simply modify nm-wait-online to be more like what people want, possibly with some configuration of its own that it looks at to be smarter about what blocks and what doesn't, like allowing the administrator to specify that nm-wait-online should block only for eth0 but not for wlan0.In the end, NM doesn't know or care much about startup, because it might be executed in many different contexts, and not just at startup time. The auxiliary services like nm-wait-online and other initscripts are much more suited to make these sorts of policy decisions than NetworkManager is. NM can help facilitate that, possibly by exposing passthrough type properties so that configuration is still done the same way, but I'm not sure it should actually apply policy based on system boot states or anything like that.(In reply to)Change that or replace the whole thing.Actually, my proposal follows directly from the specified needs. People want to use their old & stupid daemons. Those daemons only work with network already set up. Administrators are sane enough to know which configurations are required for their services.They don't actually do *any* complicated stuff, they just want to have all of their *required* connections either successfully set up or failed with a good reason before the old daemons are started.We all are of that opinion, but let's face the reality. We're talking specifically about services which say: “Hey, I want network, as it is specified by the administrator.”This bug report is not about solving the smart case but about solving the dumb case. The smart case is already more or less handled by the D-Bus signalling.Agreed. That would be nice. You can do that with Apache e.g. by parsing its configuration file (or Apache itself could be modified). But this is more about software that either can't be modified, or whose modification is highly impractical for us. And I'm afraid such software will be still here during the next decade.Good.Feel free to ask them. But actually, on servers, this is pretty clear. They use it to mark connections that are required at startup. Whether a network service waits for the network itself or whether the launcher waits before starting a dumb service, that can be specified in the unit file.I didn't test whether ONBOOT is consistent across all network types. But I'm pretty much sure 'auto' is not a good match for 'ONBOOT' in the server context.Possibly yes. But it will still be a workaround. AFAIK what administrators want is that the network service guarantees selected connections to be *considered* when booting (that doesn't mean they have to succeed) and, if possible, connected before network.target (or network-online.target) takes place to control the ordering.The same applied to the network scripts. Both are handled by the launcher (systemd in most cases) and thus the launcher can handle the external dependencies both at startup and at runtime.Possibly. But then, for compatibility, they should be able to know whether the connection is marked as onboot or not (in /etc/sysconfig/network when on Fedora). Conceptually, *onboot* usually implies *auto* but not the other way round. If the services wait for an auxiliary wifi connection when the main connection is already running, then there's something wrong.This is more of an implementation detail. In my opinion, it will be a bit more difficult with an external tool, as it also needs to keep track of failed connections since NetworkManager start, but I'm currently more interested in having at least a basic notion of a solution, not the implementation itself.I described possible NetworkManager starting process. The dependency was the exact opposite. The system (the launcher) waits for NetworkManager, while NetworkManager doesn't care about the system. Why should it, after all?Also, after seeing danw's wait-online branch, it might be OK to start all auto/onboot connections at once but only make nm-online (or similar) tool wait for onboot ones. Currently, danw is improving nm-online to [roughly] wait for all auto connections without the possibility to distinguish those not required for to finish during booting time."nm-online -s" does the right thing now. I don't think there's any compelling use case for splitting apart autoconnect and ONBOOT.WONTFIX?Yeah...(In reply to)The manual page explicitly says that -s isn't there to wait for establishing a connection. That means it's entirely unrelated to this issue.Createdman: clarify the meaning of "nm-online --wait-for-startup"Sounds good.Or maybe one sentence, that once NM reaches "startup complete", it will not go back to this state again?That's what I was aiming for with "this is generally only useful at boot time" but maybe it could be more explicit. How about: Wait for NetworkManager startup to complete. Startup is considered complete once NetworkManager has activated (or attempted to activate) every auto-activate connection which is available given the current network state. (This is generally only useful at boot time; after startup has completed, "nm-online -s" will just return immediately, regardless of the current network state.)(In reply to)Sounds good!!Comment onman: clarify the meaning of "nm-online --wait-for-startup"pushed asThis bug report is about supporting onboot connections. With the current versions of systemd, that means blocking network-online.target until all onboot connections are attempted and either successfully connected or failed.I consider the distinction between 'onboot' and 'auto' part of a proposal from May 2013 on how to solve this, not really as a goal of this feature request.(In reply to)From these docs, I see that this bug can now be resolved by using 'nm-online -s' in NetworkManager-wait-online and I *now* even see that this solution has been used in the upstream git. Therefore I believe this feature request should be closed as RESOLVED/FIXED instead, as it now seems to have been fully implemented.In my opinion, the support for auto connections that are not onboot (distinction between auto and onboot) wasn't part of the feature request but rather of a proposal on *how* to implement the feature (the part after "It could work in the following steps").Could you please verify this (reopening)? I'm testing it with a fairly recent git build and it won't work as described:mole ~ # nm-online -sConnecting.. 26sAt the time of running the command, NetworkManager is running and connected to one wireless connection and one VPN (OpenVPN). I will provide more information as requested. Reopening.nm-online -s works as expected, it's just that there's some bug on pavel's machine causing startup to never complete (which is a separate bug)Steps to reproduce:1) Start your system, wait for NM to connect2) Run: ip link add testbridge type bridge3) Run: nm-online -sReopening so it doesn't get lost, please close if a separate bugreport gets started.adding a bridge after startup completes won't do anything; the problem is that startup isn't completing in the first place for youIndeed. More testing proved that it wasn't the new bridge that caused it. Will file a new bug report when I get more information but that would be about a corner case. Under normal circumstances, 'nm-online -s' seems to work correctly. And NetworkManager-wait-online.target seems to work as well. In my opinion this is a great improvement to NetworkManager. Thanks for cooperation.I'm looking at the following bug:In my opinion it suggest that my original proposal might have been a better solution to the issue. In the original design, onboot and auto were two distinct properties.Typical use cases: * onboot=yes auto=yes -> Connection is attempted at NetworkManager startup and the attempt blocks network-online.target. When, for some reason, it is not active, it can be automatically connected later. A typical connection required at boot time. * onboot=no auto=yes -> Connection can be automatically connected at any time but never blocks network-online.target. A typical connection not required at boot time but still automatically connected. * onboot=no auto=no -> Connection can be manually started. A typical connection for occasional use or special purpose.Not so typical: * onboot=yes auto=no -> Almost like the first case except that it is only ever connected at NetworkManager startup or manually.As seen above, all cases may be useful. Of course specific applications may wait for specific connection like Android apps do for example. But this proposal was designed to allow the system administrator to choose a single set of connections that are required at startup and that block services waiting on network-online.target.Reopening:there is also downstream bugto quote myself:networkd's wait-online supports (multiple) --interface options to specify which interfaces to wait for [1]. That might be a useful and nice feature...OTOH, waiting for NM-wait-online is not encouraged, so it might not be worth investing in such a feature.[1]This distinction between autoconnect and onboot () is not only relevant for wait-online.Actually, implementing onboot as suggested is only one way to do it. For example networkd is more flexible in that you can explicitly state: systemd-networkd-wait-online -i em1In fact, I would prefer this flexibility instead of configuring per connection whether you want nm-online to wait for it.But the onboot condition above is a good default if the user omits the nm-online -i arguments. An onboot distinction is anyway useful. Since NetworkManager 0.9.10, NM tries to assume a connection. At startup, the user might forcefully want to autoactivate a connection. For example, see(In reply to Thomas Haller from)I think that "nm-online -i" would be pretty easy except that "-i" stands for interfaces and NM usually operates rather on connections. You could also have "-c" for connections or just a subset of the possibilities.I might just share my view on the possibility of "onboot" connections in the context of our IRC discussion to keep it here in bugzilla.The basic purpose of an "onboot" connection as known from /etc/network/interfaces and similar tools is (in my opinion) generally to acquire connectivity at (system) startup and keep over the whole (system) uptime.In NetworkManager I would expect that:1) At (NetworkManager) startup, the desired connection should be attempted whether or not the device is configured. When the device was already configured as expected, NetworkManager should be able to take over gracefully. When the device is configured otherwise, NetworkManager should fix it.2) At (NetworkManager) exit, an "onboot" connection should be kept if applicable. Applicable means that it communication can continue without NetworkManager or any related daemons running.Notice the shift between system startup/shutdown and NetworkManager startup/exit. Those most often happen in relation to each other, where restarting NetworkManager is a notable exception.Also notice that the definition is "practical" (or from sysadmin's point of view). Enforcing a connection over an already configured interface and bootup connections are technically two distinct behaviors but they happen to be useful in the same use cases.One last note is that I don't generally expect to see "onboot" connections on a user's laptop (with connectivity provided via various wireless or wired networks connected at any time) as much as I don't generally expect to see "non-onboot" "auto" connections on a server with permanent physical connection. Those are (proposed) tools for entirely different use cases.	24.0	id=635499	20	False	False	otte	1
id=635499	REOPENED	gtk+	Widget: GtkEntry	unspecified	Other Linux	Normal normal		2010-11-22 09:20 UTC by	Jasper St. Pierre (not reading bugmail)	2014-03-03 11:04 UTC (	6 users	Simple testcase attached.Type "f" in the box, click the button, watch them multiply.Even weirder, setting the "text-column" property doesn'tcall the method, so it doesn't cause the duplication.	CreatedSimple Python test case.Yeah, we should (at least for gtk3) make sure g_object_set ("text-column") and entry_completion_set_text_column() don't do different stuff. Guess we shouldn't do that for GTK2, because the docs explicitly mention it's broken.CreatedMake text column setting in GtkEntryCompletion consistentUsing the function should behave the same as using the property.No additional renderers should be added if any exist already. I changed the comment to refer to GtkCellLayout for complex use cases.I don't like this behavior, because the following code will not do what you'd expect:gtk_entry_completion_set_text_column (completion, 0);gtk_entry_completion_set_text_column (completion, 1);It will still use column 0.I'd prefer it if the code would remove _all_ cell renderers and add one new renderer displaying the text.(Fwiw, I'd also prefer if text-column was set to -1 whenever a renderer was added or removed. So text-column != -1 means there's exactly one renderer and it displays the given column. But I guess that'd be a different bug.)(In reply to)I think it is somewhat unexpected for it to destroy your renderers, if all you want is set the column used for completion.Though if in doubt I would second your approach, it does sound reasonable.Createdgtk_entry_completion_set_text_column: reuse old renderergtk_entry_completion_set_text_column() always added a cell renderer,regardless of whether there was an existing one already installed. Thispatch reuses an old renderer if it exists, but only if it was added by aprevious call to this function.To avoid conflicts, all renderers that were added manually are removedwhen calling this function. Also, the renderer added by this function isremoved when manually adding new renderers. This effectively givesGtkEntryCompletion two modes (managed and manual cell renderers) andallows seamless switching between the two.This is a minor API break. However, this shouldn't be an issue inpractice as applications couldn't call set_text_column() more than oncebecause of this bug. Also, it is unlikely that many applications mixset_text_column() and custom cell renderers. The interaction between thetwo modes was erratic and not documented well.Review of:Patch looks good.Only thing I'm wondering: Should we also gtk_entry_completion_clear_text_column_renderer() in the other GtkCellLayout functions (like clear() or set_cell_data_func()) or is that overkill?Createdgtk_entry_completion_set_text_column: reuse old rendererThanks for the review. I've amended the patch to also clear the automaticallyset up renderer when calling gtk_cell_layout_clear().I didn't do the same for set_cell_data_func(). The renderer that is passed intothis function would be deleted right after the call. I think we should justconsider poking into the layout to get the renderer that was automatically setup to result in undefined.Createdgtk_entry_completion_set_text_column: reuse old rendererDon't expose the internal GtkCellRendererText from gtk_cell_layout_get_cells().Thank you Benjamin for the tip.Comment ongtk_entry_completion_set_text_column: reuse old rendererWeeeeI think these commits (3c2829713463228094d66170564a4d6d7c31c245 / f6a0debdd9d4f90b9d6b54c263b10926ba530c7e) somehow broke the auto completion in another way. With current gtk+ master, as soon as the file chooser should insert the unique match into the entry, the popup with matches disappears, but the the match is not inserted into the entry.9761a966d8ffda724226a21022a42ce40932b443 was the last commit with a working auto completion in the GtkFileChooser.Can anyone confirm?The last commit with regard to the file gtk/gtkentrycompletion.c I should say.With git master, when I run$ git checkout 9761a966d8ffda724226a21022a42ce40932b443 gtk/gtkentrycompletion.cand compile again, I have the working completion back.Yup, can confirm. The inline completion uses the text column so the changes in here that clear the text column break inline completion.Createdgtk_entry_completion_set_text_column: don't remove renderersSecond try at fixing this :)Instead of removing all renderers when setting text-column, introduce a flagthat signifies whether an internal renderer is being used.I'm not convinced this whole trickery is worth it. You've added how many lines of code now to gain essentially nothing?Could we just revert this and WONTFIX it?We have such great APIs.I would actually welcome deprecating this API and adding a new one, which is what I argued a bit with Lars on IRC. But somebody would need to write the patches. *hint*Might be better, indeedIncluding the latest patch that is not yet committed, there have been 186 insertions and 70 deletions related to this issue. 116 lines added to fix two bugs, one of which is visible enough to already have a duplicate.WONTFIX obviously wrong behavior? You can't use entry completions from glade and calling a setter twice has weird side effects. I'd consider both of those severe.I agree that a less complex API is valuable, but we could help quite a few people out right now if we just fixed what we have.Yes, the API is obviously really bad and should go away asap, but I'm not convinced that forcing two different APIs to do the same thing - and the setter and the property are different because they do vastly different things - is the way to go.I'd rather have new and different APIs for those things.Yelp's completion for the search field is completely broken right now with GTK+ master. I don't have an opinion on the right solution, but I really don't think we should break existing applications.I've now reverted all the commits that were made for this bug.We can try again next cycle to sort this out.We cannot ship 3.12 with broken completion all over the place.	22.0	id=754213	12	False	False	mcatanzaro	1
id=754213	REOPENED	gnome-initial-setup	general	3.17.x	Other Linux	Normal normal	GNOME Initial Setup maintainer(s)	2015-08-28 01:31 UTC by	Michael Catanzaro	2015-09-23 20:20 UTC (	2 users	The Fedora Workstation WG has agreed to enforce password strength in g-i-s. FESCo is about to mandate the same thing, with the system password policy. What is left undefined is the rules for password strength. Those we do not bother with here: they are left up to pwquality and specifically pwquality.conf. Distros can choose to make the policy extremely lenient, fairly lenient (the upstream default), or fairly strict by modifying this file.This will unify the behavior of g-i-s and g-c-c.	CreatedRevert "password: don't set a checkmark in the first password entry"This reverts commit.CreatedRevert "Don't hard-enforce strong passwords"This reverts commit.(In reply to Michael Catanzaro from)But you do realize that this is exactly the problem that leads to the terrible user experience, right ?These rules basically define the user exerience of setting passwords. Either it is ok, or it is just broken. And leaving this up whoever maintains some deep-in-the-stack library or some committee is just a recipe for bad UX.pushed as- Revert "password: don't set a checkmark in the first password entry"pushed as- Revert "Don't hard-enforce strong passwords"At least now, we can have a centralized policy that will be consistently respected by GNOME. If you are running an enterprise and want employees to have 20 character passwords, or if you're building a distro and want there to be no enforcement at all, now you can change pwquality and GNOME will obey. Well, g-c-c already obeyed, but now g-i-s does too.Or, is that exactly what you did not want?Anyway, if you want to change the default policy in Workstation to be "allow everything," we can still do that!Reopened because we need to revert the revert (of the revert?), at least in Fedora, as FESCo has ruled we must not enforce the password strength, which I somehow missed.I haven't done the revert for g-i-s yet because we need to change g-c-c as well, and that requires changes in Fedora's PAM stack.Closing because I totally misunderstood the policy... we're doing the "right" thing (for Fedora) now.For reference:Well, maybe we don't know what it means."root / admin users should be able to override quality checks (for purposes of this, the installing user is root/admin)"I think that means g-i-s and g-c-c must enforce password strength for non-admin user accounts but not for admin accounts (so it would never be enforced when installing a system). That probably makes sense....	8.0	id=742324	7	False	False	damien.lespiau	1
id=742324	REOPENED	gnome-builder	editor	unspecified	Other Linux	Normal normal	GNOME Builder Maintainers	2015-01-04 15:05 UTC by	Carlos Soriano	2015-10-15 13:50 UTC (	2 users	cw in the last word of a line makes the next line to move up next to the current line.Expected behaviour is to not eat the carriage return in that case and keep lines ordering.	This seems to be fixed in master. Please do re-open if I somehow got that wrong.It still happensAh! I managed to reproduce it. The trigger seems to be cw on the last character of the line, not anywhere in the last word.for dw it's anywhere in the last word tho. Maybe I should open anew bug for that...What makes these operations even harder is trying to handle the case of "end of file".We can perhaps add a new "movement" that is designed to handle these, since it's easier to get it right in C, compared to css.(In reply to Christian Hergert from)fwiw neovim maps cw to ce (is how I fixed it for the previous vim implementation of gnome-builder) and for dw it just classifies the carriage return as something different than space, so it doesn't eat it except when the line is empty (it has a specific check for that).	6.0	id=708633	28	False	False	slomo	1
id=708633	REOPENED	GStreamer	gst-plugins-bad	git master	Other Linux	Normal normal	Mathieu Duponchelle	2013-09-23 14:57 UTC by	Mathieu Duponchelle	2016-10-06 15:00 UTC (	4 users	Createdfixes the reported issueIt can cause negotiation to fail.	Review of:::: gst/adder/gstadder.c@@ +293,3 @@++ s = gst_caps_get_structure (result, i);+ if (gst_structure_get_int (s, "channels", &channels))This could be a range or list, not necessarily an int@@ +348,3 @@++ n = gst_caps_get_size (caps);+ for (i = 0; i < n; i++) {In setcaps the size should always be 1, no?@@ +352,3 @@++ s = gst_caps_get_structure (caps, i);+ if (gst_structure_get_int (s, "channels", &channels))And here it should be always an intAnd with 2 channels the channel mask is important, only with 1 channel it can be omitted (=> mono).CreatedReview fixes.I think if it's a range we can assume channel-mask should either not be set or not matter here ?True, fixedOK, but may'be it's still better to check in case it hasn't been set at all ? I know channels is mandatory but some elements might not respect it ?Shouldn't gst_audio_info_from_caps just ignore the channel mask if the channels={1,2} ? For the setcaps part ?I think audio_info_is_equal could ignore it in fact, but that's a more intrusive change than the one proposed in my opinion, not sure we want to do that just before release.CreatedThis patch makes sure we remove the channel mask even if the "channels" field is a range or a list.Review of:Looks good to meAfter 1.2.0commit f330c014121590a5fad01fd06aef1273812b3315Author: MathieuDuponchelle <>Date: Sun Sep 15 21:48:43 2013 +0200 adder: Don't take channel mask in consideration in mono or stereo This could cause negotiation to fail.Actually this is not correct AFAIU. This would allow mixing two or one channels that are not stereo or mono (i.e. just the rear right channel) with mono.Mathieu, would have been nice if you had followed up on this...After 3 years it probably doesn't make sense to revert this anymore now, so let's just close this again and point anyone to audiomixer.Same code was used in audiomixer apparently, so re-open and retitle, since it seems more likely anyone is going to look at that for audiomixer.Test case would probably be helpful.	12.0	id=777315	14	False	False	bugzilla	1
id=777315	REOPENED	gdk-pixbuf	general	unspecified	Other All	Normal normal		2017-01-16 10:20 UTC by	Philip Withnall	2017-02-17 09:08 UTC (	2 users	One main patch attached, and two smaller ones which I noticed while fixing it.	Createdgdk-pixbuf: Fix overflow check in gdk_pixbuf_new()The recommended way to do an overflow check is to check against thelimit you have in mind, rather than doing the calculation and seeing ifit failed.Createdio-bmp: Add overflow checks to BMP image saverReturn an error if the image width or height are too big to fit in theBMP size fields.Createdthumbnailer: Add version checks around g_type_init() callg_type_init() was deprecated (made unnecessary) in GLib 2.36.0, so don’tcall it if we are compiled against a new enough version of GLib.Createdio-bmp: Add overflow checks to BMP image saverReturn an error if the image width or height are too big to fit in theBMP size fields.This bumps our GLib dependency to 2.48.0, as it usesg_uint_checked_mul().Coverity ID: 1388532Review of:FWIW, took me a while to realise that you're not checking against the limit per se, you're shifting one of the operands to the other side to check the limit in a way that can't overflow.Can you think of a better explanation?Review of:I've added this patch to gnome-thumbnailer-skeleton, can you please retitle this as "Update from gnome-thumbnailer-skeleton"?Review of:That looks good, but I'm not sure about bumping the glib dependency, making it harder to backport that fix.I'd say commit it, and add a mention to the commit message saying that backports, for platforms using gcc, should use __builtin_umul_overflow() directly.Committed with the requested changes, which all make sense. Thanks.pushed as- gdk-pixbuf: Fix overflow check in gdk_pixbuf_new()pushed as- io-bmp: Add overflow checks to BMP image saverhrm. I think I cannot review the patch anymore after it has been committed.I am reopening, because the check checks for GUINT_MAX, but the resulting rowstride is a (signed) gint. afl produced a file that upset pixbuf:➜ mat>gdb --args /tmp//pixbuf-read /tmp/crash ...Type "apropos word" to search for commands related to "word"...Reading symbols from /tmp//pixbuf-read...done.(gdb) rStarting program: /tmp//pixbuf-read /tmp/crash[Thread debugging using libthread_db enabled]Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1"./tmp/crash (process:2180): GLib-GObject-WARNING **: value "-1073741816" of type 'gint' is invalid or out of range for property 'rowstride' of type 'gint'Program received signal SIGTRAP, Trace/breakpoint trap.0x00007ffff7896a5b in g_logv () from /lib/x86_64-linux-gnu/libglib-2.0.so.0(gdb) btcolorspace=colorspace@entry=GDK_COLORSPACE_RGB, has_alpha=has_alpha@entry=0, bits_per_sample=<optimised out>, width=1073741826, height=1) at gdk-pixbuf.c:468468 return gdk_pixbuf_new_from_data (buf, colorspace, has_alpha, bits_per_sample,(gdb) p rowstride $1 = 3221225480(gdb) p channels $2 = 3(gdb)Createdpatchwith this patch, pixbuf-read does not complain anymore. I hope it doesn't break other stuff.Createdtest fileReview of:Cripes, good catch.::: gdk-pixbuf/gdk-pixbuf.c@@ +455,3 @@ channels = has_alpha ? 4 : 3; + /* Overflow of rowstride (signed int property of PixBuf)? */I’d leave it as “Overflow of rowstride?” and change the declaration above to `int rowstride` so it matches the declaration of gdk_pixbuf_new_from_data(), which we pass it to.	12.0	id=768230	11	False	False	walters	1
id=768230	REOPENED	glib	mainloop	unspecified	Other Linux	Normal normal		2016-06-30 06:59 UTC by	Sebastian Dröge (slomo)	2016-12-15 18:50 UTC (	6 users	Currently it seems impossible to define a new custom GSource without having it provide a fd and having it thread-safe.Consider a GSource that at some random point in time becomes ready to be dispatched and we know that from some thread. We now could look at the context stored in the GSource and call g_main_context_wakeup() on it, the main context would then go through prepare(), dispatch(), etc again and all would be good.However there is nothing that allows to get the GMainContext in a threadsafe way. It might already be on the way to destruction in g_main_context_unref() when we get it from the GSource, but not set to NULL in the GSource yet.Is there any plan, any ideas to provide some kind of thread-safe g_source_wakeup() or similar that could be used for this kind of stuff? Handling fds as an alternative would work of course, but is rather non-trivial in a platform independent way (see e.g. gwakeup.c).	Couldn't you just pass around a reference to the main context instead and have callers do g_main_context_wakeup()?There's no plan, because this problem hadn't been noticed before...I don't think "thread-safe g_source_wakeup()" is the right approach because then we'd just run into some other problem later with needing the GMainContext for some other call.We need an API that atomically fetches and refs the source's GMainContext, or else returns NULL if the context is already being destroyed. "g_source_ref_context()"? I feel like there are other functions in glib that have these semantics but I can't think of what they are...(In reply to Colin Walters from)The problem is that as an implementor of the GSource you don't have a way to get the context in a safe way. Some API like Dan suggests is missing, or a callback in GSourceFuns that notifies when it is attached/detached to/from a context.(In reply to Dan Winship from)That's the other option yes, would also work for me. I could implement that if you think that's the way to go. It will require some minor shuffling around of code in gmain.c but should be fairly trivial to implement otherwise.Yeah, I think something like g_source_ref_context() is the right way to go. With the docs in g_source_get_context() updated to clarify more when it is and isn't safe to use.In terms of naming, I guess the other API I was thinking of is g_weak_ref_get(), but I don't think there's a good way to give this API a name similar to that one. It would be nice to have a name that more clearly indicated atomicity / thread-safety / weak-reference-strengthening or something though (without making the name too ugly).g_source_get_and_ref_context()? I have no good ideas for the name. But if you decide that this is the way to go forward, I can make a patch and then we can decide on a name later and do search & replace ;)Prior art would point to g_source_dup_context(), similarly to the GValue API.And g_value_dup_*() and others. It doesn't seem right though, but I'll go with that one then for now ;) Thanks for the suggestions, expect a patch soon.CreatedGSource – Add g_source_dup_context() to get the main context in a thread-safe wayg_source_get_context() will give invalid memory and no way to protectagainst that when called on a source where the context is currentlybeing destroyed in another thread.To get around this, we ensure that the context is still in the list ofvalid main contexts and also still has a reference count higher than 0,and then return a new reference.This allows this function to be used in a thread-safe way inside GSourceimplementations to wake up the main context whenever the source wants tobe polled again, without having to provide its own file descriptor forthat.Ping? :)The correct way to do this is g_source_set_ready_time(source, 0);. This is thread-safe.Good, then let's close this. Seems like this needs some more advertisement somehow if Dan and Colin also were not thinking of that one, and I also didn't find it in the docs when searching for this ;)That doesn't do anything about the race condition. It just moves the "We now could look at the context stored in the GSource and call g_main_context_wakeup() on it" from user code to glib code. It's still trying to act on an object that the source doesn't have a ref on, which might also be being acted on from another thread.Although, we could make it work without adding new public API if we wanted... (Essentially, just add "g_source_dup_context()" as a private function and use it from g_source_set_ready_time().)	12.0	id=756244	7	False	False	marejde	1
id=756244	REOPENED	jhbuild	general	unspecified	Other Linux	Normal normal	Jhbuild maintainers	2015-10-08 13:47 UTC by	Bastien Nocera	2016-09-26 15:19 UTC (	3 users	As used in	Though this would requireto be fixed first.I just pushed a first working prototype. It buildsbut in my environment I get an error with gnome-twitch ("Could not generate cargs for clutter-gst-3.0", after fixing a meson bug).commitAuthor: Frédéric Péters <>Date: Sat Aug 13 15:44:36 2016 +0200 Add support for Meson build systemIt was caused by a local issue (but there's still a meson bug when it tries to display that message). gnome-twitch builds fine.modulesets/moduleset.dtd and modulesets/moduleset.rnc were not updated to allow element meson, which causes modulesets validation error when running 'make check'.modulesets/gnome-suites-core-deps-3.24.modules:635: element meson: validity error : No declaration for element mesonmodulesets/gnome-suites-core-deps-3.24.modules:635: element meson: validity error : No declaration for attribute id of element mesonmodulesets/gnome-suites-core-deps-3.24.modules:635: element meson: validity error : No declaration for attribute autogenargs of element mesonDocument modulesets/gnome-suites-core-deps-3.24.modules does not validate against modulesets/moduleset.dtd	5.0	id=746201	6	False	False	otte	1
id=746201	REOPENED	seahorse	general	3.15.x	Other Linux	Normal normal	Seahorse Maintainer	2015-03-14 09:53 UTC by	Arnaud B.	2015-03-21 03:05 UTC (	2 users	When using the HighContrast theme, the icons in the sidebar (when showing keys “By Keyring”) are displayed black on black –both the left ones (“folder”, “home”… – except “system”) and right ones (“locked” and “unlocked”).	It seems that this was due to seahorse not setting the follow-state propertyon its pixbuf cell renderers.I fixed that in GTK by getting rid of that property and instead making GTK dothe right thing by default.Worked for the left icons (“folder”, “system”[1], “home”…), but not for the right ones (“locked” and “unlocked”).[1] special case	2.0	id=81041	32	True	True	luis	1
id=662367	REOPENED	system-monitor	general	3.2.x	Other Linux	Normal normal	System-monitor maintainers	2011-10-21 06:12 UTC by	Alex Hultman	2015-12-04 13:36 UTC (	5 users	In GNOME 3.0 the pie charts have the same background color as the background but in 3.2 it doesn't match. If it's a theming issue you should draw the pie charts with no background at all.	CreatedScreenshotI can't reproduce this. Can you give me more information; which distro, version of system-monitor, gtk+, etc.Fedora 16 stock & updated. Might be a Fedora specific error. What distro did you try? I can come back with more info later.(In reply to)I'm running Fedora 15.Actually, I just tried this on a colleagues Fedora 16 install and got what you got. I'll change the status to new. Thanks.Ya the Fedora 15 uses gnome 3.0.x. You see it's not just the charts but also the receiving / sending images that have the wrong background color.Also, Nautilus "Files" have the same error when displaying charts about remaining hdd space so it's kind of system wide for all charts and symbols, since the change from grey to white background.Can this be solved by drawing with a transparent background so that it won't happen again when the theme changes?(In reply to)I didn't write that code so I need to check what's happening there. But, yeah, this is what one would think.***has been marked as a duplicate of this bug. ***CreatedTentative patchUntil the transparent CSS color is supported in gtk, I've added a custom CSS file to set the color in the default and backdrop states.Also, I removed the hardcoded white background for the graphs, as itlooks way better in backdrop state and dark themes.I've ported the other gtkstyle calls to the GtkStyleContext API along the way, but it still uses the notebook as a style reference.Since we are not notified of the :backdrop state change, I kept the last bgcolor and the background cairo surface is only destroyed if the color is changed, to keep the current redraw behavior, which certainly can be considered a hack :)CreatedDefault state - beforeCreatedDefault state - afterCreatedBackdrop state - beforeCreatedBackdrop state - afterping? couldn't we get this before the UI freeze?Unfortunately the patch no longer applies cleanly. Could you update?CreatedPatch updated to masterUntil the transparent CSS color is supported in gtk, I've added a custom CSSfile to set the color in the default and backdrop states.Also, I removed the hardcoded white background for the graphs, as itlooks way better in backdrop state and dark themes.I've ported the other gtkstyle calls to the GtkStyleContext API along the way,but it still uses the notebook as a style reference.Since we are not notified of the :backdrop state change, I kept the lastbgcolor and the background cairo surface is only destroyed if the color ischanged, to keep the current redraw behavior, which certainly can be considereda hack :)This problem is visible since 3.2 and ruins the visual coherence of the wonderful theming of gnome 3.x.It would be awesome to make a UI freeze break request to the release team.Looks good in Fedora 18. Only thing is the cpu and memory graphs have wrong background color when system monitor is not the active window. Closing this bug.CreatedBackdrop state - currentThe situation is better with recent gtk changes. The backdrop state is still not looking good indeed. Just attaching a screenshot to show what it looks like. Anyway there should be a new system monitor soon.Regressed back in gnome 3.10. The Swap pie chart has wrong background color, while the Memory pie chart has correct background.CreatedSwap pie chart has wrong backgrounddisplays correctly (all reported problems fixed) in 3.14, this bug should be closed?This still happens with some GTK themes, so the drawing code still has some issues. Example theme to check this with is the Paper GTK theme (). When the window is focused, the colors are fine, but when switching focus to another app the unfocused color changes, and the background of the pie chart becomes visible.IMO the whole System Monitor should be tossed in the garbage. It has so many bugs and is just garbage quality in every aspect.1. If you select a process and the list updates, the selection does not update. I have closed the wrong process many times.2. This issue is never fixed because the "fix" is always to change the color. The real fix is to never draw a color, aka transparency.3. The graphs are drawn with some kind of rounding error just as if the size of the graphs were calculated with integers. It jumps around and is not pleasant.4. Closing and opening the app is slow as a snail./rant	24.0	id=662367	14	False	False	a9016009	1
id=81041	REOPENED	gnome-panel	panel	2.2.x	Other All	Normal normal	Panel Maintainers	2002-05-07 13:52 UTC by	Calum Benson	2006-04-26 17:08 UTC (	6 users	When a hidden panel receives focus (e.g. when you've cycled to it by usingCtrl-Alt-Tab in Metacity, or whatever you've set up in Sawfish), it oughtto unhide itself, you shouldn't have to press the 'show' button. In thewindow cycling case, if you continue to cycle past a hidden panel, itshould hide itself again automatically if it was hidden before. Especially right now when all panels have the same name, this is reallyneeded as there's no way to distinguish panels when you're cycling throughthem other than being able to see what's on them. Whatever happened tothat 'user defined panel names' feature, or at least generating distinctdefault names for each new panel....?Now that I've written this it sounds like it's more likely to be the windowmanager's job, but I'll let somebody who actually knows decide that andassign it to Metacity and Sawfish as appropriate :)	Calum: friendly reminder to add the GNOME2 keyword when you aresubmitting bugs. :)Fixed in CVS. We just autoshow it when it receives focus.Turns out Mark only implemented this for auto-hiding panels-- itshould also work for panels that have been explicitly hidden using thepanel's hide buttons.Re-opening at Mark's request.If I am ctl+alt+tabbing around, the panel only unhides if I stop onit. It seems like this would be more useful if it unhid when Ictl+alt+tabbed to it, whether or not I 'stopped' on it. [I realizethis is completely unclear, but I'm not quite sure of the rightterminology to use here...]Indeed, that's the behaviour I'd expect as well... I hadn't been ableto test it as the build I'm running is from before mark's patch. Installing a newer one as we speak...Ideal behaviour should be to unhide the panel as you 'land' on itwhile cycling, and hide it again only if you decide to cycle past it. (This does sound like it could be tricky to implement/non-intuitivefor autohiding panels, though, as if you cycle to one, you presumablythen have to physically move the mouse into it and back out to make itdisappear again).Calum: I'm also not sure that metacity really supports this behavior;it is one of my personal irritations with metacity that instead ofbringing window-to-front on cycle it just does that focus indicationline. Not sure, though- there may be a way to force it.Havoc: you're input would be useful on two things in this1) I tried auto showing a hidden panel when we get a FocusIn. Butunfortunately Metacity seems to provoke a FocusIn event when the panelalready has focus and you hit ctrl-alt-tab. What happens (I think) isthat Metacity does a grab and we get a FocusIn with mode=NotifyGrab.gdk doesn't ingore this anymore and hence a GdkEventFocus is generated.Have a look at the comment in gnome-panel/basep-widget.c(basep_widget_focus_in_event)2) I'm right in saying there's no way for the panel to receivenotification when the user is ctrl-alt-tabbing around the panelwindows, right ? i.e. we can't do this auto-showing until the useractually drops focus onto the panel ?1) is a metacity bug, I'm not sure why I have it working that way. display.c:meta_display_begin_grab_op() should probably grab on the display->no_focus_window when the grab isn't an operation on a specific client. I'm not sure why it works the way it does, I must have writtenit at 3am.Anyway you could work around it by just ignoring focus in withNotifyGrab, assuming GDK exports that, maybe it doesn't.2) Yes, if you want to raise/unhide the panels as you're going throughthem, you would probably need a window manager feature. The simplething is that metacity could actually activate/focus/raise windows as they were selected in alt-tab, then you'd get focus in; but ifmetacity just raised them, we'd probably need a way to send the panelan "unhide" message. The raise-all-windows-as-you-cycle thing still seems to create areally jumpy and unstable interface to me though, all kinds of stuffflying around your screen while you're just trying to move forward tothe only window with a certain icon, or something... I dunno.Just thinking about this last night, maybe the behaviour you currentlyget when cycling windows would work just as well (if not better) forpanels, without trying to do any fancy panel show/hide tricks-- i.e.just show the black outline of the panel you would end up on if youstopped cycling. Obviously that way you wouldn't get any clues about what's on a hiddenpanel unless you actually released Ctrl-Alt-Tab and gave it focus...but I'd guess most people probably only use two or three panels andarrange their contents according to their position, so just seeing theframe's position would probably be a good enough cue in most cases.Similarly, if a drawer is closed you do not get any visual indicationthat the drawer will be focused. Also, the drawer is not opened whenit is focused.Havoc: no, gdk doesn't export XFocusChangeEvent:mode ...Calum: a conclusion, as always, would be nice :-) I have no clue what to do about drawes :/ Maybe setting the windowicon to be that of the drawer, and setting the title to drawer wouldbe at least some way useful to the user.mark: yes, conclusions would be nice, but unfortunately it's hard todraw any before somebody prototypes any of the suggestions so we canplay with them and find out why they either a) can't be implemented orb) actually suck in practice :)For consistency, I'd be happy enough to see my last suggestionimplemented: panel/drawer outlines being shown as you tabbed throughthem. If the panel/drawer is hidden, though, the outline of theunhidden panel/drawer needs to be shown, not just a line drawn aroundits hide button. I'm not sufficiently clued-up to work out whetherthat's feasible or not from Havoc's comments, though.Your suggestion about the icon/name shown in the cycling popup is alsogood and should be implemented too, if possible. Though we're stillreally missing the ability for the user to choose panel names so theydon't all show up as "panel" (or "drawer", in this case) :/Not on bill's list; punting to 2.0.2.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Havoc, what's the feasibility level on my last suggestion here? Thatis, drawing the "as they will appear if you unhide it" outline ofhidden panels as you Ctrl+Alt+Tab through them, rather than justoutlining its hide button (if it even has one) as you do now?Okay, we're back to square one with this. My original solution was farto simplistic. See #83476 fo for problems thrown up and good dialog onhow to for about fixing this properly.I know this bug was originally about explicitly hidden panels, but ithas since moved to just talking about auto hidden panels. I'mre-titling, but I'll log another for explicitly hidden panels. Notethis will be dependant on another gtk+ bug I'll log that either gtk+should ignore FocusChanges with NotifyGrab or provide a way for theapplication to ignore them.2002-07-27 Mark McLoughlin <> * basep-widget.c: (basep_widget_focus_in_event): remove bogus autoshowing on focus that was supposed to fix #81041. Ths solution for this needs a lot more consideration - see #83476 for issues.Status? We need to know what to plan for here.Updating status_whiteboard field to reflect A11Y team's assessment of accessibility impact.Apologies for spam... marking as GNOMEVER2.3 so it appears on the official GNOMEbug list :)Gnome Panel 2.6, Fedora 2, Sawfish 1.3: auto-hidden panels should be always ontop, so that they shows up when focused.Not sure if this is be the same bug, the the behavior of Gnome Panel 2.4 wasthat; for 2.6, the Panel stays bellow other windows until you click them.This is actually fixed in 2.8.0 as far as I can make outNot quite; for me at least, in 2.8.0 auto-hidden panels still don't unhide whileyou're cycling, but only if you happen to land on one at the end of your cycle. That was specified in my original report: "In the window cycling case, if youcontinue to cycle past a hidden panel, it should hide itself again automaticallyif it was hidden before."Nor has the alternative (if not quite so good) proposal been implemented:drawing the focus outline where the panel *would* unhide to, rather thanactually unhiding it only to have to re-hide it when the user immediatelypressed Ctrl-Alt-Tab again.You might consider this not worth bothering about, but in that case I'd rathersee the bug closed for that reason rather than saying it's fixed when it's not :)Apologies for spam-- ensuring Sun a11y team are cc'ed on all current a11y bugs. Filter on "SUN A11Y SPAM" to ignore.Calum: I don't think we can do anything without metacity help since the panel isnot aware of the Ctrl-Alt-Tab stuff. So here's the choice: * close the bug * bribe the metacity people so they add some magic for the panelWhat do you think is better? (I don't have any money to bribe the metacity people)My suggestion is: - wait for a compositing manager window manager - at that point we can redo what alt+tab looks like, including this - the panel might have to set a hint so the compositing WM knows to treat it this way (or the WM could even handle the hiding in the WM itself)This could be prototyped with luminocity or metacity+ssp-patches today, andhopefully will be production quality in a year or two.If we think it's important enough the short-term approach would be for the WM toset a hint like "_NET_UNDER_FOCUS_CONSIDERATION" as each window is being cycledpast.It's less of an issue now that all panels have sensible default names that showup while you're Ctrl-Alt-Tabbing. Would still be nice to revisit at some point,though.Apologies for spam... ensuring Sun a11y folks are cc'ed on all current accessibility bugs.	28.0	id=770403	4	False	False	murrayc	1
id=770403	REOPENED	Glom	general	1.28.x	Other Mac OS	Normal normal	Murray Cumming	2016-08-25 16:29 UTC by		2016-10-03 08:24 UTC (	0 users	Glom try to get the language settings and locales by Glibc and path /usr/share/i18n/locales for Glibc into Glom to access translations. On Mac OS X, the path is /usr/share/localeI tried to set the environment variable to export I18NPATH="/usr/share/locale" but glom will still force using /usr/share/i18n/locales for GlibcDEBUG: User=glom_default_developer_user _is_ in the developer group on the server.Glib::ustring Glom::IsoCodes::get_locale_name(const Glib::ustring &): Could not open (or read) glibc locales directory: /usr/share/i18n/locales/Error: Error opening directory '/usr/share/i18n/locales/': No such file or directoryvoid Glom::ComboBox_Locale::set_selected_locale(const Glib::ustring &): locale not found in list: fr_FR, list size=0Glib::ustring Glom::IsoCodes::get_locale_name(const Glib::ustring &): Could not open (or read) glibc locales directory: /usr/share/i18n/locales/Error: Error opening directory '/usr/share/i18n/locales/': No such file or directoryGlib::ustring Glom::IsoCodes::get_locale_name(const Glib::ustring &): Could not open (or read) glibc locales directory: /usr/share/i18n/locales/Error: Error opening directory '/usr/share/i18n/locales/': No such file or directoryvoid Glom::ComboBox_Locale::set_selected_locale(const Glib::ustring &): locale not found in list: fr_FR, list size=0Dialog_IdentifyOriginal::load_from_documentGlib::ustring Glom::IsoCodes::get_locale_name(const Glib::ustring &): Could not open (or read) glibc locales directory: /usr/share/i18n/locales/Error: Error opening directory '/usr/share/i18n/locales/': No such file or directoryvoid Glom::ComboBox_Locale::set_selected_locale(const Glib::ustring &): locale not found in list: fr_FR, list size=0	Indeed. /usr/share/i18n/locales was hard coded in the source code, which should never have happened.Did the test_iso_codes test work for you, during make check? That should have caught this problem. It does need some other locales (German, for instance) to be installed.This commit should fix it:Actually, I reverted that because that would get a different path: /usr/share/locale.Does this cause an actual problem in the application? For instance, when choosing "Translations" from the "Developer" menu, do you see a list of languages in the "Target Language" combo box?By the way, your /usr/share/locale on MacOS is not what we are looking for. We want the actual locale files for the whole system, not just the translations for an application. For instance, this is what we want on Linux:$ more /usr/share/i18n/locales/en_US escape_char /comment_char %% Locale for English locale in the USA% Contributed by Ulrich Drepper <>, 2000LC_IDENTIFICATIONtitle "English locale for the USA"source "Free Software Foundation, Inc."address ""I do wonder if we really need to check for the installed locales at all.Yes it's a problem because the language cannot be recognized and the locales settings are not working well because of this, like the translations for example. The thousands separator is not working and the currency symbol is not set correctly. In French for example, the thousands are separated by a space and the currency symbol is placed after the amount.CreatedTranslation settings unavailable.CreatedLocales settings not working well on numbersThe locale should be French.- The coma is OK.- No thousands separators.- Wrong position for the currency symbol.On Mac OS X the locales are managed by softwares in a ~.lproj folder, not by the whole system./usr/share/locale on MacOS is the equivalent of the $LANG variable settings that can handle the previous described wrong behavior.Which value do you need? I will see if there is an equivalent one.(In reply to m.rick.mac from)This message should indeed cause that problem. We need the equivalent of /usr/share/i18n/locales/ .Do you get a different result on Ubuntu Linux? This is really a separate issue.Yes it does work on Linux with the same version.CreatedLanguage auto-detection in Xubuntu 15.04But the locales settings aren't working better in my best.Createdentering a number before the formatting is appliedCreatedThe same number with de formatting appliedThe number format is all wrong:There should have spaces for thousands separators instead of comas. But the coma is right for decimals. As a result, I entered 3 decimals, we don't know they are decimals, they appear like thousands.The currency symbol should be at the end.(In reply to m.rick.mac from)Is this on Ubuntu Linux or MacOS? If the numeric formatting seems wrong on all platforms, then that's a different issue. Please file a separate bug about that.If the translations window is not working, only on MacOS, let's use this bug for that issue.	14.0	id=757961	21	False	True	slomo	1
id=757961	REOPENED	GStreamer	gst-plugins-good	unspecified	Other Linux	Normal normal	GStreamer Maintainers	2015-11-11 19:06 UTC by	Thibault Saunier	2016-01-20 11:21 UTC (	4 users	Test cases: $ wget --user="" --password="pitivisamples"$ gst-launch-1.0 uridecodebin uri=file:///$PWD/00159.MTS name=d ! \ queue ! videoconvert ! videoscale ! videoconvert ! videorate ! \ jpegenc quality=100 ! matroskamux name=m ! queue ! filesink \ location=/tmp/test.bad.mkv d. ! queue ! audioconvert ! \ flacenc ! flacparse ! m.now: $ gst-launch-1.0 playbin uri=file:///tmp/test.bad.mkv-> Fails to preroll $ gst-launch-1.0 uridecodebin uri=file:///$PWD/00159.MTS name=d ! \ queue ! videoconvert ! videoscale ! videoconvert ! videorate ! \ jpegenc quality=100 ! matroskamux name=m ! queue ! filesink \ location=/tmp/test.good.no.flacparse.mkv d. ! queue ! audioconvert ! \ flacenc ! m.then: $ gst-launch-1.0 playbin uri=file:///tmp/test.good.no.flacparse.mkvWorksand: $ gst-launch-1.0 uridecodebin uri=file:///$PWD/00159.MTS name=d ! \ queue ! videoconvert ! videoscale ! videoconvert ! videorate ! \ jpegenc quality=85 ! matroskamux name=m ! queue ! filesink \ location=/tmp/test.good.quality85.mkv d. ! queue ! audioconvert ! \ flacenc ! flacparse ! m.Then: $ gst-launch-1.0 playbin uri=file:///tmp/test.good.quality85.mkvworks.	Not sure why but with flacparse it seems that the file gets poorly interleaved and it stalls on prerolling because video queues get full.flacparse probably breaks timestamps somehowCreatedcollectpads: handle buffer with dts-only when mapping to running timeflacparse does some bad timestamping by putting dts on a headerbuffer and then collect pads does not help by using the times on thosevalues wrongly. This fixes the issue but we also need to fix flacparse.The bug in flacparse is actually in baseparse.When it receives a segment it sets the 'next_dts' to segment.start. Then it overwrites the first buffers DTS with this value. As the first few buffers are headers they don't have pts and dts but get the dts set from the base class, leading to an unusual scenario.Createdbaseparse: do not overwrite header buffer timestampsI remember there was a bug about baseparse retimestampingbehavior but I coudln't find it.Anyway, this is a fix specific to this scenario of header buffers timestampingcommit 42d45a0f4031478d1043f8b096f4cedba4fd562fAuthor: Thiago Santos <>Date: Fri Nov 13 20:44:57 2015 -0300 collectpads: handle buffer with dts-only when mapping to running time Otherwise the buffer was left with the original values and later would be compared with other buffers that were converted to runninn time, leading to bad interleaving of multiple streams.commitAuthor: Thiago Santos <>Date: Fri Nov 13 16:31:06 2015 -0300 baseparse: do not overwrite header buffer timestamps baseparse tries to preserve timestamps from upstream if it is running on a time segment and write that to output buffers. It assumes the first DTS is going to be segment.start and sets that to the first buffers. In case the buffer is a header buffer, it had no timestamps and will have only the DTS set due to this mechanism. This patch prevents this by skipping this behavior for header buffers.Review of:::: libs/gst/base/gstcollectpads.c@@ +518,3 @@+ if (GST_CLOCK_TIME_IS_VALID (time)) {+ time =+ gst_segment_to_running_time (&cdata->segment, GST_FORMAT_TIME, time);DTS_OR_PTS returns DTS first. If you clip on DTS you are doing it wrong, and breaking H264 stream with B-Frames again.Review of:::: libs/gst/base/gstcollectpads.c@@ +518,3 @@+ if (GST_CLOCK_TIME_IS_VALID (time)) {+ time =+ gst_segment_to_running_time (&cdata->segment, GST_FORMAT_TIME, time);Ok, nevermind, I miss-read.Thiago, I think this should also go into 1.6.2 :)Thanks for that thiagos :)Merged to 1.6commitAuthor: Thiago Santos <>Date: Fri Nov 13 20:44:57 2015 -0300 collectpads: handle buffer with dts-only when mapping to running time Otherwise the buffer was left with the original values and later would be compared with other buffers that were converted to runninn time, leading to bad interleaving of multiple streams.commitAuthor: Thiago Santos <>Date: Fri Nov 13 16:31:06 2015 -0300 baseparse: do not overwrite header buffer timestamps baseparse tries to preserve timestamps from upstream if it is running on a time segment and write that to output buffers. It assumes the first DTS is going to be segment.start and sets that to the first buffers. In case the buffer is a header buffer, it had no timestamps and will have only the DTS set due to this mechanism. This patch prevents this by skipping this behavior for header buffers.this patch seems to break my app, please take a look to these logs0:00:00.157222961 15683 0x277a400 LOG baseparse gstbaseparse.c:1994:gst_base_parse_prepare_frame:<video_muxer_parser> preparing frame at offset 18446744073709551615 (0xffffffffffffffff) of size 169810:00:00.157255415 15683 0x277a400 DEBUG baseparse gstbaseparse.c:789:gst_base_parse_update_frame:<video_muxer_parser> marking DISCONT0:00:00.157276147 15683 0x277a400 LOG baseparse gstbaseparse.c:794:gst_base_parse_update_frame:<video_muxer_parser> marking as new frame0:00:00.157417421 15683 0x277a400 DEBUG baseparse gstbaseparse.c:3710:gst_base_parse_set_frame_rate:<video_muxer_parser> invalid fps (0/1), ignoring parameters0:00:00.157452776 15683 0x277a400 LOG baseparse gstbaseparse.c:3732:gst_base_parse_set_frame_rate:<video_muxer_parser> set fps: 0/0 => duration: 18446744073709 ms0:00:00.157476917 15683 0x277a400 LOG baseparse gstbaseparse.c:3736:gst_base_parse_set_frame_rate:<video_muxer_parser> set lead in: 0 frames = 0 ms, lead out: 0 frames = 0 ms0:00:00.157585896 15683 0x277a400 LOG baseparse gstbaseparse.c:2505:gst_base_parse_finish_frame:<video_muxer_parser> finished frame at offset 0, flushing size 169810:00:00.157649401 15683 0x277a400 DEBUG baseparse gstbaseparse.c:1871:gst_base_parse_check_seekability:<video_muxer_parser> seeking query failed0:00:00.157675616 15683 0x277a400 DEBUG baseparse gstbaseparse.c:1912:gst_base_parse_check_seekability:<video_muxer_parser> seekable: 0 (18446744073709551615 - 18446744073709551615)0:00:00.157706211 15683 0x277a400 DEBUG baseparse gstbaseparse.c:1916:gst_base_parse_check_seekability:<video_muxer_parser> idx_interval: 0ms0:00:00.157748558 15683 0x277a400 DEBUG baseparse gstbaseparse.c:1935:gst_base_parse_check_upstream:<video_muxer_parser> upstream_has_duration: 00:00:00.157778256 15683 0x277a400 DEBUG baseparse gstbaseparse.c:2211:gst_base_parse_handle_and_push_frame:<video_muxer_parser> no next fallback timestamp0:00:00.157803564 15683 0x277a400 LOG baseparse gstbaseparse.c:2270:gst_base_parse_push_frame:<video_muxer_parser> processing buffer of size 16981 with dts 99:99:99.999999999, pts 99:99:99.999999999, duration 99:99:99.9999999990:00:00.157861822 15683 0x277a400 DEBUG baseparse gstbaseparse.c:1958:gst_base_parse_check_media:<video_muxer_parser> media is video: 1as you can see there is a frame of size 16981 (first keyframe) that enter with a valid pts and is pushed with invalid timestamp. In my app this frame is passed to matroskamux that drop it since has no pts/dts set and so the resulting video miss the first keyframe.I'll do some more investigations later today and try to reproduce with gst-launchThis should probably be reverted in 1.6 given all the problems, unless we find a better fix.please download the file here:and try this pipeline:gst-launch-1.0 -v filesrc location=/tmp/2015_11_17_09_52_03_432.mkv ! matroskademux ! h264parse ! fakesink silent=falseyou have something like this for the first frame:/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = chain ******* (fakesink0:sink) (16981 bytes, dts: none, pts: none, duration: none, offset: 0, offset_end: -1, flags: 00000440 discont header ) 0x7f6084013b30if you revert the changes you get this:/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = chain ******* (fakesink0:sink) (16981 bytes, dts: 24:43:55.673000000, pts: 24:43:55.673000000, duration: none, offset: 0, offset_end: -1, flags: 00000440 discont header ) 0x7fdb58013aa0please fix,thanksNicolathe first keyframe seems to have the header flagyes, h264parse seems to mark a lot of things as headers. We've been discussing if it is possible to fix the original bug in some other way.The original bug:1) flacparse receives a header buffer with dts=none, pts=none2) baseparse has next-dts and next-pts variables that it gets from the incoming buffers and tries to preserve them on the output. next-dts is initialized as segment.start. As the first buffer has no dts, the next-dts is kept as segment.start3) the output from flacparse (the header buffer) has its dts set to segment.start and is pushedThis was confusing collectpads interleaving (now fixed)The patch was to ignore this re-timestamping done by baseparse on the hope that header buffers would keep their timestamp=None from upstream.But this introduced a regression because h264parse uses the header flag on buffers that have timestamps (SPS/PPS/SEI) and the new behavior of skipping retimestamping of header buffers breaks the whole stream timestamping.I agree with Tim that we should revert this for 1.6 and keep only the collectpads one that also fixes the issue with flacparse. For master I'm unsure of what to do until now. I think the original behavior of having header buffers with dts=segment.start or next-dts is better than the current one, considering what it made h264parse do.We should also revisit h264parse header flag usage to make sure it isn't marking too much as headers.Ok so these two commits should be revertedI can confirm that my the test file I provided works as expected in this way. Can you please push to 1.6? thanksReverted in master and 1.6.The original bug is still fixed in collectpads so the use case works. We can now try again to figure out how to sanely fix this in baseparse, h264parse and flacparse at the same time.	19.0	id=398100	17	False	False	aaronleventhal	1
id=398100	REOPENED	at-spi	api	unspecified	Other Linux	Normal normal	At-spi maintainer(s)	2007-01-18 18:34 UTC by	David Bolter	2014-11-20 14:48 UTC (	8 users	The issue of whether the state armed is useful has been raised. We should consider deprecating API for this state. Note a corresponding ATK bug has not yet being filed so discussion can happen here for now.	IMO if it doesn't have any known use case then it should be deprecated so as not to cause future AT and app developers extra work. It will simply cause misunderstandings.Agreed. If indeed there are no good use cases.FWIW here is the JFC use of armed:"In details, the state model for buttons works as follows when used with the mouse:Pressing the mouse on top of a button makes the model both armed and pressed. As long as the mouse remains down, the model remains pressed, even if the mouse moves outside the button. On the contrary, the model is only armed while the mouse remains pressed within the bounds of the button (it can move in or out of the button, but the model is only armed during the portion of time spent within the button). A button is triggered, and an ActionEvent is fired, when the mouse is released while the model is armed - meaning when it is released over top of the button after the mouse has previously been pressed on that button (and not already released). Upon mouse release, the model becomes unarmed and unpressed."(from)Ping.Orca is currently using the ARMED state in the script for the Java platform. The comment around the use of the ARMED state is this: # This is a workaround for a java-access-bridge bug () # where popup menu events are not sent to Orca. # # When a root pane gets focus, a popup menu may have been invoked. # If there is a popup menu, give locus of focus to the armed menu # item. #If a fix forcan help eliminate the use of ARMED for Orca, then I would not object to deprecating the ARMED state.OK, I would markblocks this one.[Resetting QA Contact to newly introduced "". Reason: So far it was impossible to watch changes in at-spi bug reports without following all the specific persons (Li Yuan, Bill Haneman, Jeff Wai, ...) and also their activity outside of at-spi reports.IMPORTANT: Anyone interested in following all bug activity (including all maintainers) must watch the "" dummy user by adding it to the 'Users to watch' list under Preferences->Email preferences. This is also the default procedure nowadays in GNOME when setting up new products.][Mass-resetting default assignee, see. Please reclaim this bug report by setting the assignee to yourself if you still plan to work on this. Thanks!]I'm going to go ahead and close this because it concerns a very old version.Feel free to open a new bug if the problem persists.STATE_ARMED is useless. And getting state-changed signals for it doubly so. Reopening.Thanks for the update.CreatedProposed patchThis documents that the state is now deprecated. Similar documentation was added to ATK.	11.0	id=748293	10	False	False	lars	1
id=748293	REOPENED	gnome-terminal	Profiles	unspecified	Other Linux	Normal normal	GNOME Terminal Maintainers	2015-04-22 11:26 UTC by	Allison Lortie (desrt)	2017-01-23 16:05 UTC (	5 users	This bug is essentially requesting the revert of(or adding some other workaround).I'm not sure what the logic for this change was (and there is no linked bug report with background information) but this breaks my use case.In particular, I have a terminal that runs 'jhbuild shell' as a custom command. When I open a new window of that, I want it to be in the same directory as the old window, just as much as a normal shell.	I totally agree. Chpe?I don't agree, obviously :-) since I made that change. The 'cwd' is just a string that the running terminal application has sent us, so using it for the pwd of the new tab might be insecure if the command isn't a shell. I've thought about allowing this if the custom command is a shell (as defined by /etc/shells), but that wouldn't help with your case… maybe need a pref?Also, has something changed recently that exposed this problem for you? This commit has been in since before 3.8.0…So are you worried about security-like issue? E.g. a malicious app emitting this escape seq causing you to open a new tab in an undesired directory?Well, on one hand, it might equally happen if the terminal launches a shell; who knows what commands you start from that shell. On the other hand, the worst that can happen is that you recognize the new tab is not in the directory you wished for.Shells are not the only apps that can benefit from the new way of setting the cwd. That's one of the greatest advantages over the old method, at least for me. E.g. I use my mc with a relevant patch (), and it's reasonable for each file manager to also tell the directory to the terminal.The current UI option tells g-t to launch something other than the shell; but there's absolutely no sign that the behavior will differ in other aspects too, and it's really counterintuitive.IMO it's way too insignificant issue to have a pref (even if it's in dconf only without UI), and it'd be hard to understand.I don't have any profile with a "custom command". If I had, e.g. with mc, I'd wish to see Ryan's preferred behavior. (Also: even if the custom app doesn't change the directory, I'd like that to be preserved when I open yet another tab from there.)It's not new that we keep discovering bugs that have been in g-t since 3.8 or even way before that :PI'd be fine with a pref that lets you set the initial working dir. There'd probably be a three-state chooser: previous tab's dir, home dir, or custom with a text entry for the path. But it should be independent from whether a custom command is run. There's plenty of room on the Command tab of profile prefs to implement this.I guess I mixed up the old and the new tabs (which ones has a custom command).In certain situations (e.g. when the "custom app" is something that seldom uses the cwd, e.g. a web browser which offers to save files in cwd by default, or just coredumps there if crashes :)) running it from the home dir is probably better. In some others (e.g. when the "custom app" is a file manager) inheriting the cwd might be preferred.(In reply to Christian Persch from)Nothing has changed. It has been bothering me for a long time but I didn't file a bug about it until now.This seems to be a duplicate of.Let's use the other bug since it has patches attached to it.*** This bug has been marked as a duplicate of***Not a duplicate.is just a bug, while this is more a design issue.I'm not sure about the security risks of copying the working directory from one tab to another, but I find it hard to justify ignoring the `--working-directory` argument just because the default profile has a custom command (regardless of whether it's a shell or not).I'm using a .desktop file launching a terminal with 4 tabs, each with its own working directory. I was quite surprised when I set fish as a custom command and all my tabs started up in the home directory.Createdscreen: Add settings for initial working directoryI'm attaching two patches to implement the suggestions from. I've also added a "default" setting which preserves the current behavior of only inheriting the working directory if no custom command is specified.Changing this setting to "inherit" also fixes.Createdprofile: Expose settings for initial working directoryReview of:This patch looks good, and it would fix the issue for me.as an aside: I think it's particularly weird that we ignore working directory in non-OSC7 cases. The original change was made because we might be receiving escapes from non-trusted programs, but in the case that the user specifies the working directory explicitly (for example, on the commandline), we should *always* honour that. Perhaps it makes more sense to do the filtering in terminal_screen_get_current_dir() or even in action_new_terminal_cb() in terminal-window.c.::: src/org.gnome.Terminal.gschema.xml@@ +247,3 @@+ <default>'default'</default>+ <summary>Whether to inherit the working directory or use a fixed one</summary>+ <description>Possible values are "default" to use "home" for custom commands and "inherit without custom commands, "inherit" to inherit the working directory from other tabs or nautilus when launched this way, "home" to set the working directory to the home directory, and "custom" to specify a custom working directory</description>You have an unbalanced quote here around "inherit	13.0	id=725921	14	False	False	jstpierre	1
id=725921	REOPENED	ostree	general	unspecified	Other Linux	Normal normal	OSTree maintainer(s)	2014-03-07 22:45 UTC by	Colin Walters	2014-06-05 13:12 UTC (	2 users	All they'd need to do is just keep returning content from a pull.We could fix this by recording the total uncompressed size of all objects per commit, and verifying that we're not exceeding it during a pull.	This is split into metadata and data. For metadata, we should define some reasonable upper limit like say 10MB.If we look at:They pretty consistently use the pair of (checksum, size) in referring to content. Which in hindsight I should have done as well. We can still do this for static deltas.But I don't see any limits they define for snapshot.json? For us, refs are a fixed size, so that's easy to limit. Commit objects are variable, but I think we could still reasonably enforce 10MB there.Createdfetcher: Unref pending result when completingOtherwise we were just leaking it.CreatedLimit metadata to 10 MiBIf fetching GPG-signed commits over plain HTTP, a MitM attacker canfill up the drive of targets by simply returning an enormous streamfor the commit object.Related to this, an attacker can also cause OSTree to perform largememory allocations by returning enormous GVariants in the metadata.This helps close that attack by limiting all metadata objects to 10MiB, so the initial fetch will be truncated.But now the attack is only slightly more difficult as the attackerwill have to return a correctly formed commit object, then return alarge stream of < 10 MiB dirmeta/dirtree objects.Review of:OK.Review of:::: src/libostree/ostree-repo-commit.c@@ +554,3 @@+ if (OSTREE_OBJECT_TYPE_IS_META (objtype))+ {+ if (file_object_length > (gsize)((OSTREE_MAX_METADATA_SIZE) * 0.8))The *0.8 is quite missable. Either we have a separate define for OSTREE_WARN_METADATA_SIZE, or we have a comment saying "warn when we get close".@@ +558,3 @@+ gs_free char *metasize = g_format_size (file_object_length);+ gs_free char *maxsize = g_format_size (OSTREE_MAX_METADATA_SIZE);+ g_warning ("warning: metadata object %s is %s bytes, maximum metadata size is %s",g_warning already adds a "WARNING:", no?Doesn't g_format_size give us something like "1GB"? So this would be "metadata object foo is 1GB bytes"?This also isn't a very actionable warning. It just says spews some info. I'd put something like: "Metadata object foo is %s, nearing maximum size %s. Please double-check that your metadata won't grow too large".@@ +1071,3 @@+ {+ g_set_error (error, G_IO_ERROR, G_IO_ERROR_FAILED,+ "Metadata object exceeds maximum size of %" G_GUINT64_FORMAT " bytes",You should probably give the name and size of the too-large metadata here as well for debugging purposes.Comment onfetcher: Unref pending result when completingpushed as- fetcher: Unref pending result when completingCreatedLimit metadata to 10 MiBUpdate for review commentsReview of:::: src/libostree/ostree-core.h@@ +35,3 @@ */+#define OSTREE_MAX_METADATA_SIZE (10 * 1024 * 1024)+/**Missing whitespace?@@ +41,3 @@+ * will be emitted.+ */+#define OSTREE_MAX_METADATA_WARN_SIZE (7 * 1024 * 1024)I would have also been fine with (OSTREE_MAX_METADATA_SIZE * 0.8), but whatever.::: src/libostree/ostree-repo-commit.c@@ +559,3 @@+ gs_free char *warnsize = g_format_size (OSTREE_MAX_METADATA_WARN_SIZE);+ gs_free char *maxsize = g_format_size (OSTREE_MAX_METADATA_SIZE);+ g_warning ("metadata object %s is %s bytes, which is larger than the warning threshold of %s bytes." \Still has "1GB bytes".@@ +1073,3 @@+ {+ g_set_error (error, G_IO_ERROR, G_IO_ERROR_FAILED,+ "Metadata object exceeds maximum size of %" G_GUINT64_FORMAT " bytes",Still doesn't have the name/size.(In reply to)The thing is it doesn't have a *name* until it's committed. I could checksum it by hand in the error path I guess, but practically speaking the people hitting this are going to be trying to "ostree commit" with --add-metadata-string=<megs of data> or the like. And in that case the error message should be clear.CreatedLimit metadata to 10 MiBA few more review fixesReview of:OK.pushed as- Limit metadata to 10 MiBThis isn't fixed yet, this patch is just the start.One approach for addressing this would be similar to my comment on the "sizes" work ().We don't need the exact byte count per object - something approximate would be OK as long as we bound the error. If we know both the total number of objects and the size of each individual object, we could compute a perfect hash of[checksum] -> [approximate size], where the goal is that [approximate size] is shared between many objects. Say that we have 1000 metadata objects that all fit under 1KiB - we can just hash all their checksums to the 1KiB entry. The error bound would be just ~1MiB which is likely fine for many deployments.	14.0	id=106671	21	True	True	warlord	1
id=106671	REOPENED	GnuCash	Register	git-master	Other Linux	Normal normal	Derek Atkins	2003-02-21 03:28 UTC by		2016-03-24 20:45 UTC (	9 users	I started gnucash 1.8 and when it read my datafile written by 1.6 many ofthe splits were wrong.gnucash 1.8.1, gnucash-1.8.1-1.RH7.3.i386.rpmMany of them were unbalanced.I see many instances of this in the console:Warning: PrintAmountInternal: Bad numeric.andError: gnc_split_register_get_con...(): Cannot convert transaction -- nosplits with proper conversion ratioFor instance, a split which should be 350166100166 782instead shows up as156.6574.3044.7674.30 350(in the 782 account)However, the splits appear correct in other account windows.	You must have a multi-currency transaction..GnuCash handles multi-currency transactions very differently than 1.6. In particular, it converts all values and displays them in the "localcurrency" of whatever register you have open. So, if you have anaccount in USD, all numbers are displayed in USD. If you have anotheraccount in GBP, all values are displayed in GBP.The PrintAmountInternal generally means that there was an error in themath, probably trying to compute the "local value". The "cannotconvert transaction" means that you are trying to display atransaction in a register (generally a GL) where none of thecommodities match the display commodity. I thought I had fixed thisbefore 1.8.1, but I might have missed a case.So, can you answer the following questions:- What locale are you in?- What default currencies do you have set in your preferences?- What are the commodities of the source and destination accounts whenyou get this particular message?- What kind of register are you using when you get this message (i.e.,what did you do to open the specific register where you noticed thisproblem)?- Also, is there any chance you can supply the XML (either from 1.6 or1.8 -- the XML should be equivalent) of the "offending" transactions?My locale is almost certainly english. I'm in the US.$ env | grep -i langLANG=en_USDefault currency is US dollars.First account: type=Bank, commodity=USDSecond account: type=Cash, commodity=IDSXX (a cash management fund atmy broker) That cash/IDSXX seems a little weird. I wonder if I should changeit to a "Mutual Fund". It's generally pegged at $1/share because itis cash management. I will leave it as is until you fully understandthe problem.I originally noticed the wackiness when I tried the new (to me) Jumpbutton to go from the checking account to the cash management account. However, I can also see the problems when I bring up the account bydouble-clicking on it in the accounts tree.I could probably supply the XML if I knew how to track it down. I'llsee if I can figure out how to read the file and find the specifictransaction.I wonder if there are any other accounts that will have this sort ofproblem.Working with Derek I think there is a problem with GNUcash's handlingof autocompleted transaction quantities when the two accounts use adifferent currency.He says that autocompletion pulls hidden entries, so if you change thevisible field, other hidden parameters are not adjusted.Consider a recurring transfer from checking (bank, USD) to a brokeragecash management account (cash, CMF01). The cash management fund isfixed at $1/share.If you start out with monthly transfers of $250, then switch to $350,I think the autocompletion will screw things up because you will pull$350 from checking, and it will translate into 250 shares of CMF01,because you were not given the option of editing the share quantityfor the other account.I guess this is not a problem when both accounts are in the samecurrency because a discrepancy in the quantities shows up as animbalance, not an exchange rate.short term: auto-completion should not ocurr when one of the accountsis a different "currency" and its ledger display doesn't display aprice or exchange rate. In the case where the ledger DOES display aprice or exchange rate, the user typically has to enter that ledger toadjust quantity anyway, so it is a mere annoyance.long term: Someone should come up with a refinement to the userinterface to allow all parameters of the autocompletion to be edited,so that this problem does not go unnoticed in the future.If possible, I would like the ability to edit the price/shares/valueof each element of the split, even if the current ledger doesn'tdisplay price/shares. I have several recurring transactions of thistype (regular investment transfers into up to 4 different mutualfunds). I suspect this would be tricky to code.Well, this was certainly true in 1.6; I don't know if it's still truein 1.8. At least, I _thought_ I handled this case in 1.8...Can you actually (in 1.8) use the autofill function for amulti-commodity transaction and have it NOT bring up the exchange-ratedialog?fixed the summary to be more accurate.Reopened bug.***has been marked as a duplicate of this bug. ***Note to self: this also works in reverse. Autocompletion should justcompletely reset the rate-cell information to zero, which should bringup the exchange-rate dialog in the right cases, and not in others (ala)Confirmed, this bug is still in 1.9.2.Changing to register component.I think that the transfer dialog should _always_ come up when remembering an entered multi-currency transaction. Even if the register amount is the same as before, the exchange-rate may not be.Um, yeah, that was sort of the point, which I said in-- whenever you autocomplete a multi-currency txn it should always raise the exch-rate dialog.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***In r22735 which I checked in back in January, 2013, I changed things so you get an exchange rate prompt for an autofilled transaction if the debit or credit cell is changed after it is autofilled. If you autofill a transaction and then accept it without any change then you don't get a prompt. This isn't exactly what is asked for here, but perhaps it's close enough.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	16.0	id=679860	17	False	False	danw	1
id=679860	REOPENED	gnome-keyring	gcr	git master	Other Linux	Normal normal	GNOME keyring maintainer(s)	2012-07-13 14:01 UTC by	David Woodhouse	2016-06-09 08:14 UTC (	6 users	The back end can now handle PKCS#11 URLs instead of just filenames for SSL certificate and key. The UI doesn't let us configure it that way, so users have to edit the config file manually. This is suboptimal...	(cc:ing Stef since this is probably going to involve gcr and gio changes)I think we want the UI to support three possibilities (for each of "CA certificate", "User certificate", and "Private key"): 1. Pick a file in the filesystem (and then we'll pass that filename to openconnect) 2. Pick a file in the filesystem, import it into the keyring, maybe optionally delete the original (and then we'll pass a pkcs11 URI to openconnect) 3. Pick an existing item from the user's keyring (and then we'll pass a pkcs11 URI to openconnect)For #1, we need a GtkFileChooserDialog with a bit of extra smarts attached to it (eg, to validate that files are in the correct format). We have that in nm-connection-editor for WPA/802.1x, and each of the VPN plugins has a copy+paste of it, which is lame. I think we probably want to push this into libgcr. It should have a method to say what type of object you're looking for (CA / client cert / private key), and a method to say what formats you can accept (pkcs1, pkcs8, pkcs12, etc) since different external apps support different formats. And maybe it should even be able to convert between formats if needed? It would definitely be spiffy to have code to do that *somewhere*...#2 would look mostly like #1, plus a GcrImportButton or something.For #3, we probably want a dialog with a GcrListSelector, but we need an appropriate GcrCollection to display in it. My first thought was that we could have a GcrCollection that displays an appropriate subset of a GTlsDatabase, but there are a few problems with that. First, GTlsDatabase doesn't currently have API for iterating it. Second, and more importantly, there's technically no guarantee that the default GTlsDatabase is PKCS#11-based (and not even any way to query if it is). Do we want to say that it has to be? It seems to me that it would be really weird to have certificates that were visible to openconnect via PKCS#11 that *aren't* visible in the default GTlsDatabase. Right? So... the default GTlsDatabase is always PKCS#11-based? (Well... unless gnome-keyring isn't installed... So maybe we need some API to verify that it's PKCS#11-based and not provide the "pick from keyring" option if it's not.)Alternatively, there could be a GcrPkcs11Collection in gcr that used PKCS#11 "directly" (via gck and p11-kit). (But it still seems like we want to say that if any pkcs11 URIs exist on the system, then the default GTlsDatabase can resolve them...)So, how do you represent "either #1 or #2 or #3" in one (sane) UI?Having a single button (like the GtkFileChooserButton in the current UI) is very clean-looking in the "idle" state. Maybe have a button where clicking on it could pop down a menu where you can choose "Select a file on disk..." / "Select a [certificate|key] from the keyring..." / "Import a file into the keyring...". ? And if so, does that combined button belong in libgcr too? (It seems like you'd want basically the same thing when configuring a client-cert-based account in evolution, right?)(In reply to)Whatever we do, I think it definitely lives in gcr. There's *nothing* here that is specific to OpenConnect; there should be a widget that Just Works™.As you say, #1 looks a lot like #2. So perhaps just the same dialog with separate 'use directly from file' and an 'import to keyring' buttons. Or a checkbox for 'Import to keyring and use from there', with a single action button.We probably want a 'preview' window in the file dialog, with a GcrKeyWidget and/or GcrCertificateWidget.And do we want to get the user PIN when selecting/previewing key files? I suspect so, so that we can ensure that they're valid. That gets fun for OpenConnect where we have the optional magic hack of "key passphrase is the UUID of the file system on which it was stored", which is used by $EMPLOYER to approximate the 'tied to this computer' security offered by the Windows certificate store.I'm definitely happy to limit ourselves to PKCS#11 URIs that are configured properly (in /etc/pkcs11/modules/ or ~/.pkcs11/modules) and can be resolved by the default GTlsDatabase. Although as a prerequisite for that, we *will* also want a nice UI way for a user to add a new PKCS#11 module to their own configuration, and we'll want distros to ship with 'user-config: merge' in /etc/pkcs11/pkcs11.conf as default. But that's a separate discussion.So I'm imagining a 'choose cert' dialog window which perhaps has tabs for 'Choose from file' for your ##1,2, vs. 'Choose from database/token' for #3. Or some other selection mechanism which makes the guts of the dialog change from a file dialog to whatever we do for #3, if you don't like tabs.For #3 do we just use the GTlsDatabase? Or have a way to select different PKCS#11 slots from a list, and view the certificates in each one? If I plug in a USB token, I imagine the best UI for that would be to select the token from the list of slots, then choose the correct certificate from it. I don't want to even *see* all the stuff that's in gnome-keyring.Ideally we'll also want to limit ourselves to 'certs which have matching keys', perhaps. But that's hard when we need a module PIN in order to even *see* a key...*** This bug has been marked as a duplicate of***I'm reassigning this to GCR and reopening it to cover the (lack of) GUI widget which actually allows the user to choose a certificate/key pair. I have a GSoC candidate who is interested in working on this part.Createdmockup of file/pkcs11 chooser UIFor now I am not planning to ask the GSoC candidate to cope with *importing* from files to certificates. In the first instance, the GcrCertificateChooser dialog would only support selecting certs/keys from files and/or PKCS#11.It would look a bit like the GtkFileChooser, with additional locations for the PKCS#11 tokens available through p11-kit, something like the attached mockup.When you've selected a PKCS#11 token in the left-hand side, the main part of the dialog (where the file list usually goes) would probably change to be a GcrTreeSelector or GcrListSelector.If the token is locked, then as well as the little lock icon that Seahorse shows in its list of tokens, there should be an additional button at the bottom of the Gcr{Tree,List}Selector which says "Unlock token to show more...". It's more obvious for the user that way, if the object you're looking for isn't visible until the token is unlocked.If a PKCS#12 file is chosen, the user may be asked for its passphrase.Once the certificate is chosen, its details should be shown in a GcrCertificateWidget in the dialog box and we should next start looking for the corresponding private key....First we check if the private key is in the *same* location (which is possible for PKCS#12 and PEM files, and also for PKCS#11). If so, we may only need to prompt for a passphrase/PIN for it (if we haven't got that already).If the private key isn't there, then we need to continue with the file/pkcs11 chooser functionality, making it clear to the user that we are now asking them to select the *key*. Again it can come from file or PKCS#11 (independently of where the cert came from), and they might be asked for a passphrase or PIN.When we've finally found a certificate *and* its corresponding private key, and actually *checked* that they match, we can the 'OK button will stop being greyed out, and the dialog can complete. It returns four pieces of information to its caller: - Private key URI (file://… or pkcs11:…) - Private key passphrase/PIN (if needed). - Certificate URI (file://… or pkcs11:…) - Certificate passphrase/PIN (if needed).As a future extension, we can implement feature flags so that callers can indicate what kinds of certificate/key they can support — they may not support PKCS#12 files, or PKCS#8 files, or legacy non-PKCS#8 OpenSSL-encrypted files, or *separate* files for key+cert, or PKCS#11.As noted, I am also prepared to leave the task of *importing* certs/keys into PKCS#11 for later. Perhaps it would be implemented by having an 'Import...' button alongside the 'OK' button. And/or renaming the 'OK' button to something like 'Use from here'. Either way, *later*.Are there use cases where we'd want to permit selecting *just* a certificate, without corresponding private key? That's mostly for trust... and I'd really like to discourage that.In the VPN case, I was considering *removing* the option to add a 'CA cert' for the servers. Fix your system-wide trust database if your server isn't in it. And for OpenConnect at least, the UI will pop up an untrusted certificate and allow you to manually accept it.. and then remember that decision. So I'm content with a use flow which *never* makes you add a trusted cert just for one *specific* service, and thus with a GcrCertificateChooser which isn't used for cert-only selection.If we *do* implement cert-only selection, can we at *least* have a strongly worded note that people shouldn't be using it for that purpose; that trust should be handled differently?CreatedDevconf user study(Citing an email from Nikos, to ensure this is archived)On devconf 2016 we performed a user study on the NetworkManageropenconnect UI with the purpose of improving the networkmanager VPN interface. I attach the results and some recommendationswith the purpose of improving that interface. The study, the resultsand the recommendations were compiled by Lenka Horakova who specializesin user interfaces.Lubomir, you may want to take a look since some of the results apply tothe main interface of NetworkManager, and possibly to the other VPNplugins of network manager.A short summary about the tasks (see openconnect-devconf-testing.pdf):1. Task: connect to VPN server using Username + Password2. Task: connect to VPN server using Certificate3. Task: Suggest mock interfaces for smart card support and check userinteraction (this is David's suggestion due to [this bug])The 3 colored pdfs apply to the 3rd task.CreatedBlue studyCreatedGreen studyCreatedYellow study	10.0	id=609185	23	False	False	bunk	1
id=609185	REOPENED	gdk-pixbuf	general	git master	Other Linux	Normal normal		2010-02-06 19:55 UTC by	Adrian Bunk	2016-12-15 10:34 UTC (	6 users	Createdinstall logThis install failure of libpixbufloader-png.so seems to be the mixture of "make -j4 install" and bad luck/timing.It seems it is not ensured that libgdk_pixbuf-2.0.so is installed before any loaders get installed?	*** This bug has been marked as a duplicate of***(In reply to)It's not a duplicate of this.is about the BUILD_GDIPLUS_LOADERS case, and I've not enabled that.I've also verified that I dtill get this error occasionally with the fix forapplied.Also reported downstream at:Does this still happen?(In reply to Bastien Nocera from)Yes, this still happens. Seen with The relevant build log is available in, which is still NEW. Suggest reopen this bug and mark 711571 duplicate.Downstream bugs:My build+install log:When building gdk-pixbuf on a Gentoo system *without gdk-pixbuf installed* the build can fail with parallel make. Some reports need -j7, others -j5.This happens with gdk-pixbuf 2.26, 2.28 and 2.36.Sorry that I haven't pushed this upstream for so long.This is what I've found in the logs:When linking libpixbufloader-png.la there's `libgdk_pixbuf-2.0.la` on the libtool link command line, which turns into `./.libs/libgdk_pixbuf-2.0.so` for gcc. That .so file was already built so this works.But when relinking libpixbufloader-png.la then the `libgdk_pixbuf-2.0.la` on the libtool command line turns into something like `-L$DESTDIR/usr/lib -lgdk_pixbuf-2.0` for gcc, and when running make -j$many_enough then there isn't yet a libgdk_pixbuf-2.0.so for gcc to pick up, resulting in:/usr/lib/gcc/i486-pc-linux-gnu/4.6.3/../../../../i486-pc-linux-gnu/bin/ld: cannot find -lgdk_pixbuf-2.0Maybe you will say that this a libtool problem, but I guess it also depends on how gdk-pixbuf uses libtool, because the problem only ever happens with gdk-pixbuf.Thanks!Still happens on 2.36.1 (in Gentoo)***has been marked as a duplicate of this bug. ***Somebody will have to figure it out, because there's nothing obvious in the Makefile.am, such as using "-lgdk_pixbuf..." directly instead of the ".la".	8.0	id=750182	14	False	False	mclasen	1
id=750182	REOPENED	glib	gio	unspecified	Other Linux	Normal normal		2015-05-31 19:30 UTC by	Psy[H[]	2015-06-04 19:21 UTC (	5 users	$HOME/.cache is a logical place for applications to place user-level mountpoints such as FUSE filesystems. Those should be visible in GtkFIleChooser.Right now it seems to exclude all hidden dirs in $HOME from mountpoint search. $HOME/.cache should be whitelisted.	No. XDG_CACHE_DIR has defined semantics that don't match mounting things.I realize that GTK development is effectively dead for non-Gnome projects, but you may wish to consider that several widely used XFCE and LXDE file managers which use GTK, such as Thunar and PCManFM, as well as other programs, do mount fuse and network filesystems in XDG_CACHE_DIR, and have done so for years. This is common usage, and not every GTK project follows Freedesktop specs to the letter (specs which are poorly maintained and often incorrectly documented and implemented). fuse filesystems are mounted in a user-writable directory, usually somewhere $HOME, and it's poor form to create non-hidden directories in the user's home. The file chooser as it stands apparently ignores all hidden directories, which doesn't leave good options.Since the GTK File Chooser does discovery of mounted volumes, and since the .cache location has been commonly used for this for years, it would be helpful to the general set of software which uses GTK if the chooser listed volumes mounted in these common locations as well as those used by Gnome/Freedesktop. Otherwise it is blind to them and fairly useless outside of Gnome.Just quoting the specs and ignoring common usage to avoid updating it just makes the file chooser irrelevant for real uses. Is GTK now documented as a Freedesktop/Gnome-only project? You have several non-Gnome file managers using GTK, so perhaps supporting their uses as well as Gnome would be appropriate.The file chooser does not do any mountpoint search at all. We rely on gvfs to provide this information.GTK development for non-gnome projects depends on developers from those projects participating and making their needs heard.That is not true.Then how is it that the GTK file chooser still finds volumes even when gvfs is not installed? (In case you didn't know, GTK can be and is used without gvfs.)We are doing so here, and as usual, those needs are summarily dismissed if not coming from Red Hat.Perhaps you can clarify, since the file chooser documentation says nothing.I can confirm that I do not have any gvfs package in my system, but GtkFileChooser still successfully finds mountpoints in /media, /run/media/$USER, $HOME/ (excluding hidden dirs).Is there any standardized place for user-level mounts that won't noticeably interfere with user's home dir but GtkFileChooser would find?(In reply to Psy[H[] from)GIO has code to find mounts. I don't know if it avoids hidden directories.I'll move this bug to glib - I'm not 100% sure what heuristics gunixmounts.c applies when looking for mounts.(In reply to Psy[H[] from)Non-system wide FUSE mount points should really go in the user's XDG_RUNTIME_DIR; using XDG_CACHE_DIR is a known fallback used in the past when XDG_RUNTIME_DIR did not exist — but should really be ignored (e.g. GVFS will fall back to $HOME/.gvfs instead if it finds out that XDG_RUNTIME_DIR is XDG_CACHE_HOME, since it's where GVFS mounts FUSE file systems).The strong suggestion is for file managers willing to interoperate with the system and various toolkits to follow the basedir specification; if the spec is unclear, asking on xdg-list yields timely replies.(In reply to Matthias Clasen from)g_unix_mount_guess_should_display() will discard system directories (like /proc or /sys), but only uses user-accessible mount points under /media and /run/media/$USER. The check for '/run' is hard-coded, which is not right: it should get the XDG_RUNTIME_DIR environment variable instead.Thanks for comments!GtkFIleChooser does not find mount in $XDG_RUNTIME_DIR/mountpoint (3.14.5-1).(In reply to Psy[H[] from)It won't, as I said in.If no GVFS is present, the fallback code will list the Unix mounts coming from /proc/mounts or /etc/mtab; each mount point will be checked via g_unix_mount_guess_should_display(), which will return TRUE for user-accessible mount points under /media, /run/media/$USER, or directly under $HOME.If you want your mount points to be visible in the GTK file chooser and you don't have GVFS running, you should mount them under "/run/media/$USER".The bug in GIO is that the code doing the check hardcodes /run instead of using XDG_RUNTIME_DIR. If XDG_RUNTIME_DIR is unset, it should fallback to XDG_CACHE_DIR (which is what g_get_user_runtime_dir() does), but that would mean that the FUSE mount points would go under XDG_CACHE_DIR/media/$USER, which is a bit ridiculous.Hence my suggestion is to set XDG_RUNTIME_DIR to /run and create the /run directory at system start up, and remove it at system shutdown, following the basedir specification recommendation./run/media/ AFAIK is usually created by udisks, and here are two difficulties: - udisks moved mounts to /media/$USER/- udisks is not installed on every system.Since /run is not user-writable, there could be no tool to create /run/media/$USER in the system.According to spec, $XDG_RUNTIME_DIR should be owned by user, it can not be set to /run.As far as I can tell, $XDG_RUNTIME_DIR is typically resolved into /run/user/$UID700 permissions are mandatory by the spec./run/user/$UID is a tmpfs mount by itself. Maybe that is why GtkFileChooser does not see other mounts inside, despite it looks into /run. If that is so, then search logic should be changed to search through tmpfs mounts for user's mounts in case of $XDG_RUNTIME_DIRBased on traditional use, gio should look in XDG_CACHE_HOME for mounts, regardless of the current specs. For example, file managers traditionally mount fuse to ~/.cache/program-name/mount-point. This makes some sense since XDG_RUNTIME_DIR used to (or does?) fall back to a cache dir.The point here is not to design a spec from scratch (yet again), but to realize that there are already many GTK apps using that location for mounts (with users trying to find mounts in that location), based on traditional use. If you merely support a new spec then the file chooser still won't show mounts created by most file managers in use. In other words, it won't have practical value, no matter how spec-compliant. It seems like the only exception you support is gvfs's ~/.gvfs, ignoring traditional use of fuse.Arguing what's theoretically best while ignoring what's already in use and established is not of any practical value. This means GTK's file chooser will continue to be blind and useless for finding mounts, unless it searches XDG_CACHE_HOME to a reasonable depth.Also, "XDG_CACHE_DIR" isn't even in the spec, you apparently mean XDG_CACHE_HOME, so it's not helping clarity by referring to non-existent variables. egI would also appreciate XDG_CACHE_HOME being consulted for mounted filesystems.Why should it "really be ignored", when it "is a known fallback used in the past" (iow it is still widely used)? That is the real source of this bug - that gio included a gvfs-specific hack, breaking Freedesktop. If g_get_user_runtime_dir() falls back to XDG_CACHE_HOME, then that is what should be searched. Nowhere in Freedeskop does it mention "~/.gvfs", and I doubt glib suggests ignoring g_get_user_runtime_dir().Most glib apps will not read XDG_RUNTIME_DIR directly, they will use g_get_user_runtime_dir() - that's what it's for. It does indeed fallback to "~/.cache" on Debian at least. In fact this is probably why mounts have been placed there for years by many file managers, and why the chooser is blind to those mounts - it's not looking in XDG_RUNTIME_DIR or its glib fallback and predecessor, XDG_CACHE_HOME.No, it would generally mean mounts are placed beneath XDG_CACHE_HOME, such as XDG_CACHE_DIR/Thunar/mount-point (which is exactly the case). Apps can use the cache as they please. Discovery should be reasonably general, not specific to just gvfs behavior and hacks.So the question is, why does gio switch to a gvfs hack instead of searching for mount points in g_get_user_runtime_dir() ? If you want to include gvfs hacks in gio's discovery, so be it, but you should not break existing apps that are using g_get_user_runtime_dir() without such hacks.So I think the proper behavior is to search g_get_user_runtime_dir(), at least down to a few subdirs. That will fix this bug and also preserve discovery of common mount points (which will continue to be created in ~/.cache for years in practice, even if you now change the spec to match gvfs hacks). For even better discovery, it should look expressly in ~/.cache in addition to XDG_RUNTIME_DIR/XDG_CACHE_HOME, since that location is commonly used. The whole point of mount point discovery is convenience, not contrived spec compliance (and hacks) to the point where it only works with a small subset of systems. That's why the file chooser is blind - you're basing it on theory rather than actual practices, which isn't much good for discovery.Also, you may want to consider that the reason /run was hardcoded is that XDG_RUNTIME_DIR may rarely be set. It isn't in Debian, and g_get_user_runtime_dir() returns "/home/user/.cache".Also, if XDG_RUNTIME_DIR defaults to /run/media/$USER on some systems, that may not be appropriate for fuse mounts. And /run does not allow the user to write to it, again no good for fuse mounts. XDG_RUNTIME_DIR is also sometimes set to /tmp, which may have noexec and other restrictions. These are reasons why file managers may use XDG_CACHE_HOME as a more reasonable default, and why the chooser should search all locations. Personally, I've never seen such mounts in /run, except by root daemons such as the old udisks2 behavior (which was eventually deemed non-FHS compliant and moved elsewhere).All of that said, for practical discovery, it would be smart to search /run (hardcoded), XDG_RUNTIME_DIR, XDG_CACHE_HOME, AND $HOME/.cache, if they differ.(In reply to OmegaPhil from)I would gladly review a patch that added that to the checks inside g_unix_mount_guess_should_display(). I'm not a GIO maintainer, though, so you will need somebody else's ACK for it.(In reply to Psy[H[] from)To be absolutely blunt, not installing components and then complaining that things are broken is not really cool. It's not like we want to duplicate the logic everywhere: we put it inside some component for a *reason*. GIO depends on GVFS on Linux, and GVFS depends on udisks. If you're using some other OS, the chain of dependencies is different, but we kind of treat the stack as a stack, not as a pick and mix bowl of "may be nice to have". The reason the dependency is "soft" (i.e. we don't make GIO depend some libraries) is mostly a case of 1. historical accidents; 2. a convenience for integrators to avoid dependency cycles; and 3. because on Windows, *BSD, or MacOS, the dependencies are fairly different.In any case, there's nothing that says that udisks *must* be the component creating the /run/media/$USER directory.Finally, /media is also another location that is checked when going through the list of mount points.Anything that creates /run can also create /run/media/$USER when the user session starts; since it's going to be a privileged user, it can change the directory's permissions as well.Anyway, I'll stand by what I wrote at the top: I'll gladly review a patch that adds a check for a user-accessible mount point under XDG_CACHE_HOME.I also disagree, GTK has nothing to do with with udisks. Only gvfs-daemons has dependency on udisks, and we are not touching that here.Plus, udisks does not use /run/media/$USER anymore anyway. And /media/* is not user-owned, so it's no good for fuse.$XDG_RUNTIME_DIR also seem to be only maintained by systemd-related components which is not universal. So, fallback to $XDG_CACHE_HOME or $HOME/.cache seems reasonable.There are no non-homedir user-owned locations that do not depend on optional overengieered stuff like udisks, gvfs, systemd, etc.$XDG_CACHE_HOME or $HOME/.cache is the only 100% backwards compatible fallback.(In reply to IgnorantGuru from)This will be the only time I reply to one of your comments, and it's also your final warning. Bugzilla is under the code of conduct of GNOME, and you have been consistently rude, dismissive, and flat out insulting in every single interaction with the developers.Either you stop, or you get your account revoked.(In reply to Psy[H[] from)As you may have noticed, it does.GIO has a soft-dependency on GVFS; the reason why GIO does not implement the functionality of GVFS directly inside its code base is one of expedience and historical reasons; GVFS had to be implemented as a separate code base to avoid adding dependencies to GLib. Nevertheless, on Linux, GIO is pretty much dependent on the functionality provided by GVFS, and it falls back to internal implementations, but the fall backs are not heavily tested.Nevertheless, /run/media/$USER is what modern Linux uses for user-accessible mount points — including FUSE.At no point I've said that FUSE mount points should go under /media; I've just listed /media as another location used.It should be universal, and it's not systemd-related; that's why it's in the basedir specification on fd.o.XDG_RUNTIME_DIR was introduced because XDG_CACHE_HOME is not a good place for storing session-related files in a secure way. Please, read the discussion that led to the creation of XDG_RUNTIME_DIR:As I said (and I won't say it again), I'd gladly review a patch that adds this; you'll have to also convince a GLib/GIO maintainer. You should join the #gtk+ channel on irc.gnome.org.Please, refrain from making comments like these in the future. The reason why things like GVFS or udisks are complex systems is because they solve real problems. If you decide to not use them because your requirements are simple or unchanging it does not invalidate the problems and requirements of people actually using them.Psy[H[]: Seeand read. Thanks.GtkFileChooser can successfully look for mounts without udisks and gvfs installed. The sole purpose of this bug report is to tweak existing behavior.At least to look into $XDG_RUNTIME_DIR according to basedir spec.just like Emmanuele Bassi said:As for $XDG_CACHE_HOME, I've asked about proper XDG_RUNTIME_DIR fallbacks on XDG mailing list, waiting for reply.Responding as I was quoted here - sorry but I'm not the maintainer, I have my own projects I'm struggling with (feeling the pain of C++...) so I won't be working on a patch (ha, at least currently with my progression I doubt I could make such a patch and have it pass muster). The problem is simply occassionally annoying for me, its not a big deal.I see IG's post has been deleted, censorship is unacceptable (for the record I have no interest in a 'code of conduct', if you see shit you call it out, although currently I don't have any personal grudge here). This is the correct place to discuss and hash out problems and presumably should act as the public record, so I've summarised IG's points here without his anger at least (to preempt things, just because you don't like this doesn't mean the information is not useful for others coming to this ticket):o GTK is not supposed to be dependent at all on GVFS.o In recent times, Red Hat developers have attempted to make it dependent (e.g. the 'soft dependency' mentioned previously).o This broke a lot of things, thus a more serious dependency had to be backtracked.o With the current situation and this bug, it looks like the maintainers don't care to be compatible/accessible with client software that already has well-established behaviour, and is not involved with the GNOME software stack.Basically hes very concerned that with this and other issues, important core software is being stolen away from normal non-GNOME usage.(In reply to OmegaPhil from)Nothing has been deleted; he removed himself from the Cc: of this bug. Stop spreading false accusations.It does not matter if you have no interest: the code of conduct for GNOME services exists, and it's enforced on Bugzilla.No, it does not work that way.You behave like a decent human being, and you afford some level of courtesy to the people that work on the stack that you use. You assume people mean well, and you treat them like intelligent people that are trying to solve problems and work on an open, volunteer-driven project.While GTK does not depend on GVFS, GTK depends on a set of functionality that is *implemented* by GVFS. If nothing implements it, then GTK simply will fall back to a subset of that functionality.Red Hat does not enter in the picture; I'm not a Red Hat employee. You can leave you conspiracy theories at the door.This has broken nothing. Not showing FUSE mount points from random, unspecified locations that just so happen to be used by some project is not a break in functionality.I've said *multiple* times that I'll gladly review a patch; I also said that, while I routinely work on the G* core platform, I'm also not a GIO maintainer, thus I cannot guarantee that the patch I review will be integrated. You can try and convince a GIO maintainer — join IRC and state your case.What I'm not going to do is write the patch for you, since I don't have any issue with the current stack, and I also have other projects — as well as work — that I maintain and have to care about.Since the people in this bug use applications that do not conform to the basedir specification it's entirely up to them to pursue a fix in GIO.Honestly, if 1% of the energy spent finger-pointing, complaining, and resorting to rude and unfounded accusations were instead spent writing the patch in question, we could have closed this bug already.Take a look at the page here:You quoted his post that has been removed - I searched the page for 'history' and found his post had gone - thats all.Literally, I don't have strong feelings for this, I have just posted his points and you have responded, which is fine.[offtopic](In reply to OmegaPhil from)Your interpretation of "censorship" is incorrect. SeeIn the GNOME community, the GNOME Code of Conduct applies.(And technically, I have hidden two postings from being shown to non-admins.)GNOME Bugzilla is indeed the correct place to discuss and hash out problems and your input is very welcome IF you stick to technical aspects instead of personal attacks.In gunixmounts.c:2235, we have this: /* Hide mounts within a dot path, suppose it was a purpose to hide this mount */ if (g_strstr_len (mount_path, -1, "/.") != NULL) return FALSE;You are basically asking for us to remove that check, I guess.Or, possibly, to add an explicit XDG_CACHE_DIR check, for people that decide to change that.I do not think removing check for dot paths is wise, there is no need to look for mounts in all possible obscure places.The best way is to add explicit check for $XDG_CACHE_HOME (with fallback to $HOME/.cache) and $XDG_RUNTIME_DIRThe answer from XDG for now is that there is no guaranteed fallback for $XDG_RUNTIME_DIRSince $XDG_CACHE_DIR was used for the purpose of mounting by more than one app, I see no reason why not to include it. It would not break anything, but would come handy.Sorry, I meant $XDG_CACHE_HOME instead $XDG_CACHE_DIR. That misspell is catchy.The check is not about limiting the amount of places to look for mounts - we get all the mounts, by calling getmntent, and then we filter out the ones we consider not worthy showing - thats where the ./ check comes in.Thanks for clarification, the notion can be changed to this then: there is no need to show mounts for all possible obscure places. What priority does 'ignore_fs' list have? As far as I can tell, it does not show mounts in $XDG_RUNTIME_DIR (/run/user/$UID) even if it is supbath of /run because it is a tmpfs mount itself. Am I right? ...although I do not see references to /run hereOops, wrong link from google.I see some /run stuff now,I do not see '/run' check that was mentioned earlier, only '/run/media/'.Anyway, as I said, adding explicit check for $XDG_RUNTIME_DIR (with subdirs) and $XDG_CACHE_HOME (with fallback to $HOME/.cache) would solve the issue.	36.0	id=735198	8	False	False	albert.tests	1
id=735198	REOPENED	doxygen	general	1.8.8	Other Windows	Normal normal	Dimitri van Heesch	2014-08-21 22:11 UTC by	Dean Nelson	2015-09-17 07:53 UTC (	2 users	When using the "make.bat" right out of the box with plantUML installed, Latex will halt in the section "\includegraphics{fooFile}. Somehow it expects Latex to know that fooFile is fooFile.eps, but it doesn't. To work around this issue, add "epstopdf" to the EXTRA_PACKAGES.1. Best case is to automatically add epstopdf if plantUML is used.2. If not, add that info to the docs.	Just pushed a proposed solution to github (pull request 223)Thanks, I've pulled in the changes.This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.8.9. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional information that you think can be relevant (preferrably in the form of a self-contained example).The problem still exist in 1.8.9.1Update: doxywizard output shows "error: Problems running epstopdf. Check your TeX installation! Exit code: 1" but the make.bat works correctly - converts *.eps to *.pdf and adds those in the refman.pdfThis does not work running 1.8.10 From the log:Running PlantUML on generated file D:/source/pcds/driver/doc/doxygen/html/inline_umlgraph_1.puRunning PlantUML on generated file D:/source/pcds/driver/doc/doxygen/latex/inline_umlgraph_2.puepstopdf: The input file does not exist.then later on:error: Problems running PlantUML. Verify that the command 'java -jar "D:/source/pcds/driver/doc/plantuml\plantuml.jar" -h' works from the command line. Exit code: 2error: Problems running PlantUML. Verify that the command 'java -jar "D:/source/pcds/driver/doc/plantuml\plantuml.jar" -h' works from the command line. Exit code: 2error: Problems running epstopdf. Check your TeX installation! Exit code: 1And that command in the error line works on the command line.I can confirm that 1.8.10 broke it. But the problem is 1.8.10 can't operate with plantuml and java 8. With 1.8.9.1 was possible to make plantuml run with hardlink to java.exe in c:\programdata\oracle\java and java.cmd in doxygen folder.	7.0	id=117418	5	False	False	jordi	1
id=117418	REOPENED	gtetrinet	general	0.7.x	Other Linux	Normal normal	Gtetrinet Hackers	2003-07-14 21:07 UTC by	Holger Leskien	2008-09-01 10:47 UTC (	1 user	This is what happens when I connect to tetrinet.ch, where I have aregistered nick:*** Connected to server*** Gekko has joined the game*** Gekko is alone*** Gekko is the moderator<Server> Your nick is registered. Please enter your password:<Server> Invalid Password*** Disconnected from serverI suspect GTetrinet (7.3) sending some data, without noticing that apassword should be entered. Paradoxically it worked yesterday on mysid/unstable-only system with exactly the same version.	You probably want to disable the channel list on this server then.Did the server introduce that password thing very recently?Closing the bug for now, if you consider this is a bug please reopen.Ok, this works. The server (using Perl TetriNET Server v0.20) existssince june.And what if I want to use the channel list feature? Deactivating andactivating it on every connect? I believe this could be solved byparsing the server messages. A string like "passw" should be sufficient.ok, there are two things here:Each tetrinet server sends the channel list (this is what you see whenyou do a /list) however it wants. There is no standard format, and thecode that parses those strings it's a mess. So the channel list worksfor some servers, and does weird things for the rest. The parser codehas to be rewritten to be able to parse more different formats.Also, this server sends the private message in a special way, thatcauses those --- MARK --- messages to be seen in the partyline. That'spretty ugly, but again, each server sends the private message inwhatever format it wants, and so we also need a parser for the privatemessages. That sucks.I'm thinking in just dumping the channel list, because I don't see a*right* way to do all the parsing, and expect it to *just work* withall the servers out there. Maybe we need to write a standard forTetrinet Server messages :DHowever, this doesn't answer why you get disconnected when you log in.This shouldn't be happening, but maybe your server doesn't likesending private messages while unregistered, or something, I don'tknow. As I said each server does whatever it wants :(The channel list has apparently given us more problems than anythingelse. Bocata, more than dumping it, I guess we could switch it off bydefault, so it doesn't hit anyone who doesn't know about it.Hmm. is the channel list UI shown in the partyline tab when it's off?Maybe it could be hidden if it's off.we've disabled the channel list by default, but we haven't support yetfor that server (IIRC)The best way to fetch the channel list is to use the query protocol. Just open another connexion on the port 31457, send 'listchan' and you get a list that is easy to parse and consistent across servers.	6.0	id=624314	13	False	False	a9016009	1
id=774404	REOPENED	chronojump	chronojump	unspecified	Other Linux	Normal normal	Xavier de Blas	2016-11-14 12:46 UTC by	Piotr Drąg	2016-11-22 09:23 UTC (	2 users	As you can see on <>, intltool-update currently fails, but I don't know why. I get this when running intltool-update -m:Unmatched ( in regex; marked by <-- HERE in m/^chronojump-m4_esyscmd_s( <-- HERE gitdescribe/.*$/ at /usr/bin/intltool-update line 320, <FILE> line 160.	Fixed in b4d33d9ee56d97aa39cd67355dacdfdaa7bf7d0a, thank you.Thanks - Sadly I had to revert the fix because it caused problems on the OSX machine.For now I've added a fixed intltool-update in the Chronojump's po/ directory. I'll see in the near future if I can think of a solution that doesn't involve this intltool-update or if intltool-update will accept the patch ()intltool is very much inactive upstream. The current good practice in GNOME is to port from it to just using gettext:	3.0	id=509699	19	False	False	a9016009	1
id=509699	REOPENED	libepc	general	0.3.x	Other Linux	Normal normal	libepc maintainers	2008-01-15 17:13 UTC by	Dan Winship	2012-04-04 10:23 UTC (	5 users	libsoup 2.3.0 will be merged to svn head and released later today, to become a part of GNOME 2.22. This is an API-breaking release, so everything that uses libsoup needs to be ported to the new release.I'm attaching patches for libepc. The consumer side is pretty simple, thepublisher side vastly more complicated, because (a) SoupServer was much moreheavily rewritten than SoupSession, and (b) you're using almost every singlefeature of SoupServer. :)When I run the tests with libsoup 2.4 and the patches, I get 6 of 16 testsfailing. But I get exactly the same failures with libsoup 2.2 and no patches:test-dispatcher-local-collision, test-dispatcher-rename, test-dispatcher-reset,test-dispatcher-unique, test-publisher-change-name, and test-publisher-uniqueall fail with "Test #N passed a second time, which was not expected" for one oftheir tests.	Createdpatch for libepc for libsoup 2.4Thanks for your work Dan. Nearly finished conversion of your patch into something, that supports libsoup 2.2 and 2.4.Created[PATCH] WIP: Support both libsoup 2.2 and 2.4 configure.ac | 22 +++- libepc/consumer.c | 80 +++++++++- libepc/publisher.c | 426 ++++++++++++++++++++++++++++++++++++++++++---------- 3 files changed, 444 insertions(+), 84 deletions(-)Dan, what are the reasons for SoupAuthDomainDigestAuthCallback returning a password string, instead of a simple boolean?I absolutely do not like that API: - it exposes far too much implementation details to users of libsoup - it adds memory management issues without any need - it requires the users of libsoup to implement heavy state management - it requires dramatically different code paths for Basic and Digest authenticationThe wild hacks you needed to simpulate soup_server_auth_check_passwd() should have shown you, that your current digest authentication API is wrong in some way.IMHO the old soup_server_auth_check_passwd, which allowed one single code path for all kinds of authentication methods, was one of the better parts of libsoup-2.2 authentication.If you care about plain text passwords let the successor of soup_server_auth_check_passwd() accept only passwords, which have been encrypted before.BTW: I believe your assumtions regarding plain text passwords are somewhat right regarding Server usage, but wrong in the context of Desktop applications: Someone who can read the plain text password from some mode 0700 file, also can use techniques like LD_PRELOAD to override soup_auth_domain_digest_encode_password(). Also we have to use plain text passwords in the context of Glom for instance, as we want to use the same password for protecting Glom meta data, and for accessing the backing Postgresql server.(In reply to)That's unfortunately inherent to the nature of Digest auth."without any need" is begging the question.The original API took advantage of the fact that the encoded password isalways the same size, and just passed the callback a char[33] to write into.But that's not language-bindable.I doesn't really. In the normal case, if you really want to keep a plaintextpassword database, then all you have to do is:static char *digest_auth_callback (SoupAuthDomain *auth_domain, SoupMessage *msg, const char *username, gpointer data){ return soup_auth_domain_digest_encode_password ( username, soup_auth_domain_get_realm (auth_domain) lookup_plaintext_password_for_user (username));}And if you keep encoded passwords, it's return g_strdup (lookup_encoded_password (username));Yes. This is true, and sucks, but it seems fairly standard. Apache has completely separate Basic and Digest configuration, for example.Also, FWIW, you already *had* two different code paths (epc_auth_context_get_password vs epc_auth_context_check_password). There is only so much an API can do to hide the differences between the two types.Well, no, it just shows that the current API is not like the old one. If youaccept that the old one was a bad API, then it's not surprising that youneed wild hacks to reimplement it in terms of a good API.The problem is that Digest auth can *only* work with Digest-encoded passwords, but other proposed HTTP auth types can *only* work with passwords encoded in other ways.Yeah...Anyway, I'd pondered having a generic SoupAuthDomain authenticate callback that you could provide in lieu of (or in addition to) the SoupAuthDomainBasic andSoupAuthDomainDigest ones. Guess I'll add that. Stay tuned.Createdpossible SoupAuthDomain changeSo here's an implementation of a generic SoupAuthDomain auth callback. (It needs "generic" in its name because the basic and digest ones are both just "auth-callback", so it would conflict otherwise.)This would let you implement epc_auth_context_check_password with a singlecodepath, although now it's trickier to implement epc_auth_context_get_password again, because you can get *either* the generic callback without the password, *or* the basic-specific callback with the password. But Basic auth is trivial enough that you can work around that, either by using the basic-specific callback and then implementing check_password yourself in that case, or by using only the generic callback, and base64-decoding the password yourself from get_password().Does this work for you?Will look at it, when coming back from fencing.Created[PATCH] Support libsoup 2.4, which will be part of GNOME 2.22 (#509699).Original patch by Dan Winship.* configure.ac: Also check for libsoup 2.4.Define HAVE_LIBSOUP22, when still building for libsoup 2.2.* libepc/consumer.c, libepc/publisher.c: Update for libsoup 2.4.--- ChangeLog | 9 + configure.ac | 22 +++- libepc/consumer.c | 80 ++++++++++- libepc/publisher.c | 413 ++++++++++++++++++++++++++++++++++++++++++---------- 4 files changed, 440 insertions(+), 84 deletions(-)Things seem to work, after applying your generic authentication callback (), and the patch from().Writting an unit test for authentication now.2008-01-18 Mathias Hasselmann <> Support libsoup 2.4, which will be part of GNOME 2.22 (#509699). Original patch by Dan Winship. * configure.ac: Also check for libsoup 2.4. Define HAVE_LIBSOUP22, when still building for libsoup 2.2. * libepc/consumer.c, libepc/publisher.c: Update for libsoup 2.4. * examples/simple-publisher.c: Print source code position in debug message to reduce confusion.2008-01-18 Mathias Hasselmann <> Support authentication credentials in lookup-resource example. * examples/lookup-resource.c: Add --username and --password command line switches for passing authentication credentials.Keeping open, until I've really done the unit tests.Mathias, it seems that .pc files was not updated, still listing "libsoup-2.2" in required.(In reply to)2008-01-18 Mathias Hasselmann <> Announce proper libsoup API in libepc-1.0.pc (#509699). * configure.ac: Export LIBSOUP_API variable. * libepc-1.0.pc.in: Use LIBSOUP_API variable.Fixed. Thanks for spotting this.any need to keep this ticket opened?"Keeping open, until I've really done the unit tests." in.	14.0	id=739800	13	False	False	brandonjsnider	1
id=739800	REOPENED	GStreamer	don't know	1.4.3	Other Linux	Normal normal	GStreamer Maintainers	2014-11-08 01:00 UTC by		2016-02-29 02:17 UTC (	4 users	If you try to play audio from a wav or flac at a bitrate higher than 16, and a sample rate higher than 44.1khz, there will be a bit of ticking static at the beginning. This doesn't occur with ordinary 16/44 files.This is pretty easy to reproduce. You can use something like Sushi or Gnome-Music or the player of your choice that uses Gstreamer. Or just playbin. If you don't have a flac or wav at the bitrate/sample rate I'm talking about, you can make one easily.You can get a wav if you don't have one using a variety of methods, possibly flac at the cli, or audacity or whatever you want. Just use sox on the wav:$ sox song.wav -b 24 -r 96k song_upsampled.wavJust try to play it and each time it will start with a bit of static. I'm not sure if this is confined to the sampling rate, or the bitrate, or is both combined. You can tweak the sox command to narrow it down if it's an issue. I think it's the sampling rate though.I'm using the latest Gstreamer in Debian Jessie (unstable)--1.4.3.	Createddebug logI've tried this with current git, and I'm not hearing any static.flac -d of an existing file, upsampled with your sox command line, and played with gst-launch-1.0 playbin.I'm getting the float resampler, same as your log.You mentioned playbin, can you confirm you're hearing hte static with just gst-launch-1.0 playbin uri=file:///path/to/wav ?Is this obviously audible ?Does it happen all the time, and, if not, how repeatable is it ?Does the upsampled wav play fine with a non gst player ?In answer to your questions:Yes, it always happens at the start of any such song.It happens every time a song with higher sampling/bitrates than 16/44 is played.Yes, the wav plays fine in VLC, for example.I should also point out that I have a non-standard audio setup. I think most people are using junky onboard audio. I have the M-Audio Transit. It sits at the end of a 12-ft USB cable. Unfortunately I am not confident that the Linux driver support is entirely up to par compared to basic onboard audio.If it works with, eg, VLC, it probably isn't that, but it can be checked:gst-launch-1.0 playbin uri=file:///path/to/the/file audio-sink='autoaudiosink'This should use your audio setup.gst-launch-1.0 playbin uri=file:///path/to/the/file audio-sink='wavenc ! filesink location=/tmp/out.wav'This will instead write a wav file with the output that gstreamer decoded. It can then be played with, eg, VLC. If the static appears, it's a problem with gstreamer. If not, then... the mystery continues.There was no static.Some other commands that might give clues:gst-launch-1.0 audiotestsrc wave=4 ! audio/x-raw,rate=96000 ! pulsesinkgst-launch-1.0 audiotestsrc wave=4 ! audio/x-raw,rate=96000 ! alsasinkThese two play silent audio at high bitrate with two different sinks.This removes decoders/resamplers from the equation and might finger one of the sinks in particular.The distortion happens with pulsesink but not alsasink. I had suspected this could be due to some issue involving Pulse, but I didn't understand why VLC wouldn't have the same problem since they're both talking to Pulse.I've tried this on various systems, among one using a usb headset and can't reproduce it.Brandon, can you try to play such a high sampling rate file via paplay - paplay can play everything that libsndfile can decode (e.g. wave files). You can also play a way file directly on alsa via aplay. This could help us to get more data.Hi, paplay and aplay using a 16/96 wav results in no static, while playbin does produce static.Does the static go away if you run one of the offending piplines with this env var set: ORC_CODE=backup ?ORC_CODE=backup makes no difference.Are you able to run pulseaudio itself with this ?I think it should be enough to kill the daemon and run gst with ORC_CODE=backup, which should autospawn a new daemon.I'm thinking the problem might be the one fixed here:I tried pulseaudio --kill and then set ORC_CODE=backup and ran gst-launch-1.0 audiotestsrc wave=4 ! audio/x-raw,rate=96000 ! pulsesink but the static is still there.Not sure why I did not ask that before, but... Can you run this simple pipeline with valgrind to see if anything interesting pops up ?Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!Output of command requested in(tick-tick happens at Pipeline is PREROLLING):$ valgrind gst-launch-1.0 audiotestsrc wave=4 ! audio/x-raw,rate=96000 ! pulsesink==20572== Memcheck, a memory error detector==20572== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.==20572== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info==20572== Command: gst-launch-1.0 audiotestsrc wave=4 ! audio/x-raw,rate=96000 ! pulsesink==20572== --20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/ld-2.21.so:--20572-- Ignoring non-Dwarf2/3/4 block in .debug_info--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/ld-2.21.so:--20572-- Last block truncated in .debug_info; ignoring--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/ld-2.21.so:--20572-- parse_CU_Header: is neither DWARF2 nor DWARF3 nor DWARF4--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libc-2.21.so:--20572-- Ignoring non-Dwarf2/3/4 block in .debug_info--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libc-2.21.so:--20572-- Last block truncated in .debug_info; ignoring--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libc-2.21.so:--20572-- parse_CU_Header: is neither DWARF2 nor DWARF3 nor DWARF4--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libm-2.21.so:--20572-- Ignoring non-Dwarf2/3/4 block in .debug_info--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libm-2.21.so:--20572-- Last block truncated in .debug_info; ignoring--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libm-2.21.so:--20572-- parse_CU_Header: is neither DWARF2 nor DWARF3 nor DWARF4--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/librt-2.21.so:--20572-- Ignoring non-Dwarf2/3/4 block in .debug_info--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/librt-2.21.so:--20572-- Last block truncated in .debug_info; ignoring--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/librt-2.21.so:--20572-- parse_CU_Header: is neither DWARF2 nor DWARF3 nor DWARF4--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libdl-2.21.so:--20572-- Ignoring non-Dwarf2/3/4 block in .debug_info--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libdl-2.21.so:--20572-- Last block truncated in .debug_info; ignoring--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libdl-2.21.so:--20572-- parse_CU_Header: is neither DWARF2 nor DWARF3 nor DWARF4--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libnsl-2.21.so:--20572-- Ignoring non-Dwarf2/3/4 block in .debug_info--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libnsl-2.21.so:--20572-- Last block truncated in .debug_info; ignoring--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libnsl-2.21.so:--20572-- parse_CU_Header: is neither DWARF2 nor DWARF3 nor DWARF4--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libresolv-2.21.so:--20572-- Ignoring non-Dwarf2/3/4 block in .debug_info--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libresolv-2.21.so:--20572-- Last block truncated in .debug_info; ignoring--20572-- WARNING: Serious error when reading debug info--20572-- When reading debug info from /lib/x86_64-linux-gnu/libresolv-2.21.so:--20572-- parse_CU_Header: is neither DWARF2 nor DWARF3 nor DWARF4Setting pipeline to PAUSED ...Pipeline is PREROLLING ...Pipeline is PREROLLED ...Setting pipeline to PLAYING ...New clock: GstPulseSinkClock^Chandling interrupt.Interrupt: Stopping pipeline ...Execution ended after 0:00:13.767364840Setting pipeline to PAUSED ...Setting pipeline to READY ...Setting pipeline to NULL ...Freeing pipeline ...==20572== ==20572== HEAP SUMMARY:==20572== in use at exit: 618,830 bytes in 2,439 blocks==20572== total heap usage: 50,173 allocs, 47,734 frees, 9,806,145 bytes allocated==20572== ==20572== LEAK SUMMARY:==20572== definitely lost: 16,384 bytes in 1 blocks==20572== indirectly lost: 0 bytes in 0 blocks==20572== possibly lost: 4,828 bytes in 63 blocks==20572== still reachable: 586,658 bytes in 2,293 blocks==20572== of which reachable via heuristic:==20572== length64 : 320 bytes in 8 blocks==20572== newarray : 1,584 bytes in 19 blocks==20572== suppressed: 0 bytes in 0 blocks==20572== Rerun with --leak-check=full to see details of leaked memory==20572== ==20572== For counts of detected and suppressed errors, rerun with: -v==20572== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)Thanks. This is with what version of GStreamer?This is 1.6.3	18.0	id=774404	6	False	False	piotrdrag	1
id=624314	REOPENED	nautilus	Location Bar	3.22.x	Other Linux	Normal normal	Nautilus Maintainers	2010-07-14 09:35 UTC by	Allan Day	2016-12-27 17:31 UTC (	5 users	Right now, the location bar is conceived as an action. The menu item is a normal entry, and Ctrl+L is a one shot operation.There are a couple of problems with this: * The menu item is inconsistent with the search menu item (which is directly below it). The latter has a checkbox, but has a very similar function. * It doesn't give the user a way to get back to the path bar. Providing a way to close or return to the previous state is a usability fundamental.How to fix this: * Make the menu entry a checkbox. * Make Ctrl+L hide the location bar as well as open it.	Allan, do you still want this now that the item is in the app menu as "Enter Location"?***has been marked as a duplicate of this bug. ***(In reply to)Probably doesn't make any sense there, no.***has been marked as a duplicate of this bug. ***I believe it is worth reopening this bug. While the originally proposed solution may not make sense now, this problem is still there:Well, there is a way: the Esc key. But if keyboard is not required to enter this state, keyboard should not be required to dismiss it. Also, the Esc key doesn't work while the entry is focused.It happened to me in the past that I clicked elsewhere in the window, expecting the location entry to be dismissed. Not only did that not work, when I tried the Esc key, it didn't work.I think that the location entry, when summoned by Ctrl + L or the menu entry, should be dismissed on focus out (unless the always-use-location-entry preference is enabled, obviously). Making Ctrl + L hide it as well as open it would be nice too.We currently have another issue with the location bar - since it fills the entire space, there is no room in the toolbar to unmaximise the window by dragging.One solution here would be to restrict the width of the location bar. If we go down that route, there might be space to add a close button to the right hand side.	6.0	id=648157	11	False	False	mitch	1
id=125291	REOPENED	metacity	themes	2.6.x	Other Linux	Normal normal	Metacity maintainers list	2003-10-23 13:34 UTC by	Patrick Wade	2006-04-26 17:14 UTC (	2 users	Using the theme "HighContrastLargePrintInverse" and an application font"Sans 28" :--Launch yelp-Choose "Edit -> Find in page" from the menubarUp pops the 'Find text...' dialog.-Unfocus the dialog. It's titlebar darkens.It is now difficult to determine what part of the dialog is the titlebar,because there is no white dividing line indicating it's edge.	This isn't anything specific to Yelp. It's just how High ContrastInverse draws unfocused titlebars. Moving to gnome-themes.Updating status whiteboard to reflect a11y team's assessment of priority.CreatedProposed patchThe above patch fixes the problem in Simple, Atlanta and Brightthemes.CreatedScreenshot with the changes for Atlanta themeCreatedScreenshot with the changes for Simple themeCreatedScreenshot with the changes for Bright themenot sure this is filed against the right component anymore, since thepatch is against the metacity themes... (Simple, Atlanta, Bright)I'm selecting "Reassign bug to owner of selected component." ;-)This piece can't be right:<frame_style name="normal_unfocused" geometry="normal">- <piece position="entire_background" draw_ops="outer_bevel"/>+ <piece position="entire_background" draw_ops="focus_background"/>You can't draw the style normal_unfocused with a piece called focus_background,something else has to change (maybe just the naming)Apologies for spam-- ensuring Sun a11y team are cc'ed on all current a11y bugs. Filter on "SUN A11Y SPAM" to ignore.Comment onProposed patchMarking as needs-work based on Havoc's comment..CreatedModified the patch based on the commentsComment onModified the patch based on the commentsIt looks plausible, hard for me to know for sure it's right without testing it.Elijah it might not hurt if you look at this patch also.Well, I don't know much about themes, but I went and tested it. HighContrastLargePrintInverse is not the only gtk2 theme to cause this problemto appear by any means; of the dozen or so gtk2 themes I tested in connectionwith the Atlanta Metacity theme, the majority appeared to exhibit the bugreported here. For all of those themes, Muktha's patch fixed the problem.Muktha: Do you want to commit, or shall I go ahead and do so?Have committed the patch to cvs HEAD. Marking the bug as fixed. Thanks.This bug does not affect me on GNOME 2.10, and it really lessens the appearenceof the Simple metacity theme. I personally feel this is a regression for theSimple theme. Perhaps it is necessary for HighContrastLargePrintInverse, butcan't we make a "Simply Accessible" Metacity theme or something with this changeapplied?Did anyone actually look at it in Simple with a normal gtk theme before makingthe change? I use Indubstrial and it looks terrible.Createdscreenshot before the changesCreatedscreenshot after changesI consider this a regression.I think perhaps the fix applied was not the best one. Muktha's fix changes theborder around the titlebar, but I think a better fix is to keep the inner bevelborder the same color whether windows are focussed or unfocussed (and revert thechange to the titlebar background).I'm sure patches are welcome; I have no clue how to change theme stuff and Idon't care to gain one either. ;-)Should the remaining patch be commited? Has been accepted-commit_now for a longtime.Kjartan: It was committed--see. (It's status just wasn't changedwhen the bug was closed, and when it was reopened, no one thought to change thestatus.)Apologies for spam... ensuring Sun a11y folks are cc'ed on all current accessibility bugs.	24.0	id=125291	18	False	False	shaunm	1
id=701610	REOPENED	gtk+	.General	2.24.x	Other Linux	Normal normal		2013-06-04 23:23 UTC by	Josh Triplett	2016-10-09 08:31 UTC (	5 users	The new GTK2 Adwaita engine looks quite good, and helps GTK2 apps fit in on a GNOME 3 desktop. However, I noticed that while it follows the GTK3 style where the menu bar blends into the title bar, it does not behave the same as that style: you can only grab and drag the window by the title bar, not by the menu bar or toolbar.Now that both GTK2 and GTK3 apps look the same, the difference in UX behavior becomes more of a problem.	I think this might be a limitation in GTK2 itself and outside the control of the theme.Other GTK2 themes allow for menubar dragging, but that functionality depends on the theme engine IIRC.The GTK 2 version of Adwaita has, since 3.6, included the ability to drag the menubar and toolbar. You can see this in the beginning of the gtkrc with GtkMenuBar::window-dragging and GtkToolbar::window-dragging both set to 1.This is, in fact, a shortcoming in the vanilla GTK 2 library, as it doesn't support this feature. Many mainstream distros such as Fedora and Ubuntu distribute a patched version of GTK 2 that makes full use of this. If dragging doesn't work with Adwaita, then it wouldn't be working in any other themes, either.(In reply to)Interesting. Any chance of that patch getting into upstream?I'll look into it, although you should know that GTK 2 is only being maintained at the moment- no new features. However, the diffs for the patches I've seen are fairly small, just 30 lines or so, so I don't imagine it would be too painstaking to get in.In fact, I should find out if there's already a bug open for it.I think this issue is fixed. At least I can drag windows by mouse on header bar, menu bar and tool bar on gnome 3.18.x(In reply to Christian Stadelmann from)With stock upstream GTK, or a distribution-patched version as mentioned in?I just retested with GTK+ 2.24.28 and four different GTK+2 applications (gimp, celestia, higan, and firefox), none of which allowed dragging by the menu bar.With adwaita-gtk2-theme package version 3.18.0-1.fc23 from Fedora. Seefor the spec file. Only change is the gtkrc file with these contents:gtk-theme-name = "Adwaita"gtk-icon-theme-name = "gnome"gtk-cursor-theme-name = "Adwaita"gtk-button-images = 0gtk-menu-images = 0Otherwise they are just packaging the .tar.xz file from, so I'd call it stock upstream.But they patch their gtk2 (2.24.28) version with a file called "window-dragging.patch", seeSo this issue is not fixed in stock gtk2, sorry. But at least there is a working patch lying around.Is there any reason for the patch not to be merged when it's used by major stable distributions?OK this is now obselete, the theme no longer allows this and neither does the gtk3 version.(In reply to Juraj Fiala from)When did this stop working in gtk3?(In reply to Josh Triplett from)I don't remember it working to be frank, it definitely does not in 3.20, but I just heard today (after marking this) that it's a regression.I can confirm the regression as of GTK+ 3.20.6. (Easy test case: gnome-terminal with "Show Menubar" enabled.) It definitely worked in gnome-terminal before.Do you have a bug number for that? And is this a regression in GTK3 or in the Adwaita theme?Either way, this should be reopened.Yeah, you're right. I don't have a bug number, but I'll try asking around.OK I added this back to the theme but this is a gtk2 issue.	16.0	id=701610	15	False	False	josh	1
id=776074	REOPENED	evolution	general	3.22.x	Other Linux	Normal normal	Evolution Shell Maintainers Team	2016-12-14 05:35 UTC by	Nate Graham	2016-12-22 04:03 UTC (	2 users	Fedora 25 + Gnome 3.22 + WaylandSince installing Evolution-3.22.2-1.fc25, the view that Evolution was displaying (Mail, Contacts, Calendar, Tasks, or Notes) when the program was last closed affects whether or not Super+<arrow key> window tiling shortcuts work in GNOME. After much testing, I have found that the following use cases are 100% reproducible for me:Use cases:- Open Evolution- Switch to Mail, Calendar, Tasks, or Memos view- Quit Evolution- Re-open evolution- Result: Super+<arrow key> doesn't do anything- Open Evolution- Switch to Contacts view- Quit Evolution- Re-open evolution- Result: Super+<arrow key> works and the window tiles itself normally- Open Evolution- Switch to Contacts view- Quit Evolution- Re-open evolution- Result: Super+<arrow key> works- Switch to Mail view- Result: Super+<arrow key> no longer works!- Open Evolution- Switch to Contacts view- Quit Evolution- Re-open evolution- Result: Super+<arrow key> works- Switch to Contacts, Tasks, or Memos view- Result: Super+<arrow key> still works!These use cases are 100% reproducible for me, and I would be happy to collect more data--anything you need.These behaviors were not seen in Evolution-3.22. Something seems to have regressed between then and 3.22.2.	Thanks for a bug report. Part of the 3.22.3 release (being done this Monday) is a fix for. I believe it's related. I also tried to reproduce with the 3.22.3 and it works for me regardless where I start the evolution. Note that it also depends what message is selected in the Mail view, like meeting invitations can "do trouble", because for those the key presses are passed to the WebKit. By the way, the only arrow key which did anything here was the up-arrow-key (together with the Super key), all other three arrow keys did nothing here.Could you re-try with 3.22.3, once it gets to your distribution, please?Sure, will do!The issue persists with Evolution 3.22.3. :(Okay, thanks. Let's deal with this in the, it also seems to not be fully fixed yet.*** This bug has been marked as a duplicate of***(In reply to Milan Crha from)I'm sorry, that was a mistake. These two bug reports are not about the same issue. I'm sorry about the confusion. I'm reopening this bug.Cool, thanks!I tried to reproduce this, but no luck. I'm also with Fedora 25 and Wayland.I closed in the Tasks view (not that it matters here) and when I open the evolution again, from Activities->Evolution - both by mouse, then the Super+Arrow-Up maximizes the window, Super+Arrow-Left attaches it to the left (when not maximizer) and similarly with Super+Arrow-Right. The key I call "Super" is the "Windows" key between the Ctrl and Alt on the left of the keyboard.Could you open gnome-tweak-tools and verify that you do not override anything in the Typing section there, please? The bold lines highlight where you've made changes there, if any. I have all regular, aka not bold. And when you'll be there, check that in the Windows section the "Window Action Key" iss et to the Super. It most likely is, but just in case.I somehow do not understand why would the Evolution prevent GNOME Shell to use the hot-key, when it is supposed to be used by it,. not by the Evolution itself. By the way, my original window size is smaller than the desktop size, thus I see the changes fine. Could you also try whether anything changes when you select a different part of the window in the evolution, like the Search entry, the list of messages, the folder tree, or the message preview, please? Eventually similar parts in the other views.Super is my Windows key, too.Nothing is overridden in the Typing section in gnome-tweak-tool. I also have all regular, non-bold entries there.FWIW, for me now the tiling shortcuts aren't working at all, no matter what view Evolution opens in.No matter what size I make Evolution's main view, the shortcuts still don't work.No matter what's selected (the search fiels, folder list, message list, message, calendar, task list, etc) the shortcuts still don't work.Here's something though: Super-h minimizes the window, Super-up maximizes it, and Super-down de-maximizes it! I think I forgot to test those before; I rarely use them. So it's just Super-left and Super-right that aren't working.	8.0	id=776074	9	False	False	pointedstick	1
id=766406	REOPENED	gtk+	Widget: GtkRange	3.18.x	Other Linux	Normal normal		2016-05-14 03:09 UTC by	Mikael Magnusson	2016-05-15 15:19 UTC (	2 users	This is an extremely pointless regression as middle click now does _nothing_ instead of a useful feature that every other toolkit (including gtk+2) has. (I also don't care that you made left-clicking do this, since there is an option to disable that to restore left-click-means-page-up-down which I want to use).	What's the rationale for this change?	1.0	id=754224	15	False	True	havard.graff	1
id=130081	REOPENED	system-monitor	general	unspecified	Other Linux	Normal normal	System-monitor maintainers	2003-12-27 15:52 UTC by	Sebastien Bacher	2012-12-06 12:05 UTC (	5 users	This bug was originally reported in the Debian BTS:'"I saw this bug when running nautilus with the tree view in the left panewhich caused fam to use 82% system CPU as shown by the 'top' program. Thegnome-panel system monitor applet also showed high system CPU use butasking gnome-system-monitor to sort processes by %CPU showedgnome-system-monitor itself as the highest user at about 5%.If I used the search field to search for fam, fam was then highlighted andshown correctly as using 82% CPU but it wasn't at the top of the list orindeed anywhere near the top. I could only get fam to the top of the listby turning off the "Process Dependencies" option.""If I turn on "View Process Dependencies" from the view menu the CPUsorting becomes broken. What seems to have is that the top levelprocesses, i.e. those whose parent is PID 1 (init) get sorted by CPUutilization and the all other processes are simply displayed under their parent process.This algorithm isn't useful as processes using too much CPU don'tnecessarily need to have init as their parent.The algorithm I suggest instead is that a separate, CPU figure is used forsorting which for top level process is sum of it's own direct utililastionand the the equivalent firgure for each of it's children recursively.The same algorithm would need to be implemented for memory too when thedependency view is turned on.If I turn off the process dependency view, sorting works correctly."I'm not sure but this bug is perhaps related to #85388	Thanks for the bug report. This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***This is *not* a duplicate of, this bug is a request for a change to the behaviour of the dependency view, and not a request for greater obviousness with regards to the options.Instead of current view/sorting:process ^foo usagec 3d 2a 1 \ b 5(b is a child of a)It is a request for a view/sorting like:process ^foo usagea 1+5=6 \ b 5c 3d 2Here "foo" can be memory, cpu, or any other metric that can sanely be summed to a total which has a meaning (i.e. not pid, I guess).So, the feature request is for dependency parents to be assigned, and hence be sortable by, the sum total of the attribute of itself, and all of its' dependency children.Thanks for clarifying this, this problem is also reported already, but as that one is a newer bug, I am reopening this (unmarking it from a duplicate) and marking the other one as a duplicate of this.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	5.0	id=766406	6	False	False	akkzilla	1
id=777524	REOPENED	evolution	Mailer	3.22.x	Other Linux	Normal normal		2017-01-20 09:52 UTC by	Matthias Wachs	2017-01-20 22:17 UTC (	1 user	S/MIME signatures on emails from in the revoked certificates are considered "valid". Evolution seems not to perform a revocation check.According to"4.1. Certificate Revocation Lists All agents MUST be capable of performing revocation checks using CRLs as specified in [KEYM]. All agents MUST perform revocation status checking in accordance with [KEYM]. Receiving agents MUST recognize CRLs in received S/MIME messages."revocation checks must be performed.Outlook Web App and Thunderbird indicate such signatures as invalid.	We definitely should add support for some form of revocation checking, but CRLs have kinda failed and no longer have industry support, so I'm not sure it's worthwhile to respect the standard in that regard. This would not be acceptable to Epiphany, for instance, since we shouldn't block page load to download a huge revocation list. That's not a good experience for email either. And I don't think we want to leave it up to applications to decide what form of revocation checking to perform; GTlsConnection should just do the right thing by default. And there's no way to implement this in Evolution with the current GTlsConnection API anyway, so I'll mark this as a duplicate of. If you have opinions on certificate revocation, that would be a good place to share.*** This bug has been marked as a duplicate of***Actually it's not a duplicate, sorry, since this is for S/MIME, not TLS. My bad. I don't know how Evolution handles that.	2.0	id=777524	6	False	False	wachs	1
id=754224	REOPENED	GStreamer	gst-plugins-base	git master	Other All	Normal normal	GStreamer Maintainers	2015-08-28 09:54 UTC by	Håvard Graff (hgr)	2016-02-18 09:53 UTC (	3 users	CreatedpatchIt makes sense that the headers being pushed out just before the first buffer should be timestamped like the first buffer.As for duration 0, I think this makes more sense then -1, and plays nicer with muxers etc.	Comment onpatchSame should be done for videoencoder toocommitAuthor: Havard Graff <>Date: Fri Aug 28 11:44:19 2015 +0200 audioencoder: timestamp headers same as first buffer and use duration 0tpm@xps:~/gst/glib-master/gst-plugins-base/tests/check$ make pipelines/vorbisenc.checkRunning suite(s): vorbisenc0%: Checks: 3, Failures: 3, Errors: 0pipelines/vorbisenc.c:33:F:general:test_granulepos_offset:0: expected timestamp 99:99:99.999999999, but got timestamp 0:00:03.249870963pipelines/vorbisenc.c:33:F:general:test_timestamps:0: expected timestamp 99:99:99.999999999, but got timestamp 0:00:00.000000000pipelines/vorbisenc.c:33:F:general:test_discontinuity:0: expected timestamp 99:99:99.999999999, but got timestamp 0:00:00.000000000I'm not convinced yet by either change really, esp. not the 'duration 0' one.And I also wonder if you looked at all of our muxers to see if this affects any of them?Reverted the patch for now until we know what to do :)Havard, any ideas from your side? *Why* do you need them with a valid timestamp, what goes wrong otherwise?The concrete example from our side was flvmux. It will treat a header just like a buffer and embed a FLV-timestamp based on the timestamp of the header, causing all sorts of issues with extended RTMP timestamping being used. (-1 being a very large number in guint32)From another point of view, -1 timestamps are not really a problem and should ideally be handled by elements just fine. That is, flvmux could interpolate (or just use the previous timestamp) whenever it encounters a -1.If the headers will contain information that is globally applicable to any part of the stream at any time then I agree that the timestamping information might not be important. However if, say, the headers will contain information that might potentially change during the lifetime of the stream (change of bitrate or clock-rate, coding-type etc.) then it makes complete sense to place them in relation to the stream, so that they can be sorted and the stream still makes sense. Now, being a base-class, this implementation might cater for a lot of codecs that only needs (and supports) one single configuration, but it might *also* need to cater for a codec where the header-info might change runtime, and hence the base-class *should* (IMHO) timestamp its headers.As for the duration, I have no strong opinions, so I am happy to keep this -1 for headers, since duration is arguably something that only applies to the original (decoded) data but can be kept intact by the encoded buffers as well.Let's remember that this patch broke existing code, so whatever the theoretical merits of it may be, it would be good to find a solution that doesn't do that.(In reply to Tim-Philipp Müller from)Did it break more then unit-tests that expects the headers to be timestamped with -1? I am happy to look into fixing any code that relies on the headers being -1, but in the end it is a theoretical decision that needs to be made for the base-class of how we want it to be.	10.0	id=651092	20	False	False	allanpday	1
id=768324	REOPENED	gnome-calendar	User Interface	unspecified	Other Linux	Normal normal	GNOME Calendar maintainers	2016-07-03 07:38 UTC by	Mohammed Sadiq	2016-10-05 06:50 UTC (	1 user	Events can't be added to read-only calendars. So it may be better not to show them when adding new events.	Creatededit-dialog: show writable calendars onlyCreatedquick-add-popover: show writable calendars onlyComment onquick-add-popover: show writable calendars onlyThis patch causes issues when the default calendar is read-only.Comment onedit-dialog: show writable calendars onlyThis patch causes issues when the default calendar is read-only.Createdmanager: remove unused ::source-activated signalWe're not using it anymore, no need to keep it here.Createdquick-add-popover: only show writable calendarsThere is no reason to display read-only calendars, since theuser can't add any events on it.Fix that by only showing writable calendars.Thanks for the reports, and thanks Sadiq for trying it out!pushed as- manager: remove unused ::source-activated signalpushed as- quick-add-popover: only show writable calendarsThis is fixed for the quick-add-popover only. The read-only calendars are still listed in the drop down of Detailed event entry dialog.Re-opening.	8.0	id=768324	11	False	False	bugzilla-gnome	1
id=651092	REOPENED	gnome-shell	general	3.0.x	Other Linux	Normal normal		2011-05-25 20:29 UTC by	Owen Taylor	2015-10-12 17:09 UTC (	4 users	If someone: - Moves the mouse to the right side of the screen - Hits the logo keyThey shouldn't have to wait for two separate animations before seeing the workspaces.	Or don't slide in the workspace switcher, perhaps?@Allan DayAgreed: if the mouse is already on the right side, I would agree that the work space switcher should not slide but just appear, along with the overview. Though it's not all that much to cry about on higher end systems, its also just a waste of power/resources.(In reply to)I should have been more elaborate in my original comment. What I meant was that the switcher should remain in its retracted state if the pointer is at the right hand side of the screen when the overview is opened. To open the workspace switcher, you would have to move the pointer away from the right hand side and then back again.The pointer being at the right hand side will often have nothing to do with the workspace switcher, and the switcher opening will be unintentional. It's confusing to have the switcher open when you don't intend it to.CreatedThis should fix it.Review of:Thanks for working on this!We try to add "useful" commit messages, seefor more information on what that is. They also really shouldn't be more than around 74-75 characters. Try something like: overview: Don't show workspaces when entering the overview If the user has their mouse over the workspace thumbnails while entering the overview, it's more likely that it's a coincidence that their mouse pointer is in the area. Avoid expanding the thumbnails box in that case.::: js/ui/overview.js@@ +622,3 @@ this.emit('showing');+ + let [mouse_x, mouse_y, mouse_mods] = global.get_pointer(); We try to use camelCase in JS, e.g. mouseX, mouseY. We're not entirely consistent, though.@@ +631,3 @@+ + if(mouse_x > ws_x && mouse_y > ws_y && mouse_y < ws_bottom) {+ this._workspacesDisplay._skipHover = true;We try not to access "private" properties of other objects.::: js/ui/workspacesView.js@@ +998,3 @@ _onControlsHoverChanged: function() {+ if(!this._controls.hover)+ this._skipHover = false;_skipHover was never initialized in _init. We try to initialize all variables that we use.Hey Jasper,Thanks again for your review. I've fixed most of the issues you pointed out, however as I mentioned on irc, I haven't been able to do it without accessing workspacesview._control. Do you have any ideas about this? Regards Joost(In reply to)Make it into a public property in a separate commit.CreatedworkspacesView: Refactored the private workspacesDisplay._control to public workspacesDisplay.control, to allow outside accessing.This is a patch refactoring the private workspacesDisplay._controls to be a public property.Createdoverview: Don't show workspaces when the overview is entered and the user has the pointer on the right-side of the screen. This usually doesn't mean the user wants to open the workspaces view.overview: Don't show workspaces when the overview is entered and the user has the pointer on the right-side of the screen. This usually doesn't mean the user wants to open the workspaces view, but probably just a coincidence.This patch has to be applied in combination with the previously submitted patch to refactor workspacesDisplay._controls to workspacesDisplay.controls.Review of:You need to fix that.Besides that, your commit message is a bit lacking. Let's try: workspacesView: Publicly expose _controls In order to properly prevent the thumbnails box from expanding while going to the overview, we first need to make it public.Again, your first line should explain the basic mechanism of the changes, while the rest of the commit message should go into more detail and explain the motivation behind the changes. Additionally, we like to add bug URLs as the last line in the commit message so we know what bug the patch came from. The easiest way to do this is with git-bz.Review of:::: js/ui/overview.js@@ +621,3 @@ this._coverPane.show(); this.emit('showing');+ Remove whitespace.@@ +625,3 @@+ let [wsX, wsY] = this._workspacesDisplay.controls.get_transformed_position(); + let [vsX, vsY] = this._viewSelector.actor.get_transformed_position();+ let [vsW, vsH] = this._viewSelector.actor.get_transformed_size(); Since you're checking the viewselector's position/size which includes everything, if you're in the correct horizontal position (like the search box), hit the windows key, and then move over the thumbnails box, it wouldn't expand until hover changed twice more, right?@@ +626,3 @@+ let [vsX, vsY] = this._viewSelector.actor.get_transformed_position();+ let [vsW, vsH] = this._viewSelector.actor.get_transformed_size(); + Remove whitespace.@@ +627,3 @@+ let [vsW, vsH] = this._viewSelector.actor.get_transformed_size(); + + if(mouseX > wsX && mouseY > wsY && mouseY < vsY + vsH)This will break if the user had another monitor to the right and their cursor was in the right position on that monitor.::: js/ui/workspacesView.js@@ +508,3 @@ + this.skipHover = false; + Remove whitespace.@@ +1001,3 @@+ if(!this.controls.hover)+ this.skipHover = false;+ Remove whitespace.No, that shouldn't happen. As you can see I use the viewselector's vertical position, which aligns perfectly with the workspacesView's vertical position.I've tested this, but I believe default behavior when the user is using more than one monitor is to always show the workspacesview.Createdoverview: Don't show workspaces when entering the overview If the user has their mouse over the workspace thumbnails while entering the overview, it's more likely that it's a coincidence that their mouse pointer is in the area. Avoid expanding the thumbnails box in that case.Createdoverview: Don't show workspaces when entering the overview If the user has their mouse over the workspace thumbnails while entering the overview, it's more likely that it's a coincidence that their mouse pointer is in the area. Avoid expanding the thumbnails box in that case.Createdoverview: Don't show workspaces when entering the overviewIf the user has their mouse over the workspace thumbnails whileentering the overview, it's more likely that it's a coincidencethat their mouse pointer is in the area. Avoid expanding thethumbnails box in that case.Review of:This is getting very close!The comments below are mostly style comments. Apart from those, there's a fair share of trailing whitespace in the patch (apparently Linus really hates that, so by default git is very verbose about it). On a higher level, I don't think it is quite clear enough what's going on. The obvious option would be to add a comment, and maybe something like _controlsInitiallyHovered instead of _skipZoom makes the general idea clearer?::: js/ui/workspacesView.js@@ +549,3 @@+ let [x, y] = this._controls.get_transformed_position();+ let width = this._controls.get_theme_node().get_length('visible-width');+ let height = this.actor.allocation.y2 - this.actor.allocation.y1;Not sure why you use this.actor for the height and not this._controls - they match, but you really want to test that the controls are hovered.I'd probably write that aslet visibleWidth = this._controls.get_theme_node().get_length('visible-width');let [width, height] = this._controls.get_transformed_size();@@ +552,3 @@+ let rtl = (Clutter.get_default_text_direction () == Clutter.TextDirection.RTL);+ if(rtl) {+ let [fullWidth, _] = this._controls.get_transformed_size();Eeeks, don't overwrite _ (which we use for gettext); if you want to make clear that you are not interested in one of the return values, you can uselet fullWidth = this._controls.get_transformed_size()[0];But then I'd just use the height as well, see previous comment :)@@ +555,3 @@+ x = x + fullWidth - width;+ } + if(mouseX > x && mouseX < x + width && mouseY > y && mouseY < y + height) Not quite - we do want to include edge cases like mouseX == x. Note that the clutter position/size functions return floating point numbers, so it is probably safer to do checks like mouseX > x - 0.5 && mouseX < x + width + 0.5(rather than using >=)Createdoverview: Don't show workspaces when entering the overviewIf the user has their mouse over the workspace thumbnails whileentering the overview, it's more likely that it's a coincidencethat their mouse pointer is in the area. Avoid expanding thethumbnails box in that case.Florian, thank you for you patch review. The above patch should fix all the issues you pointed out. :)Comment onoverview: Don't show workspaces when entering the overviewThanks again, let's get this committed!pushed as- overview: Don't show workspaces when entering the overviewAwesome work Joost!Seems like this regressed - I can see the original behaviour in 3.18.	22.0	id=569324	13	False	False	sanfordarmstrong	1
id=569324	REOPENED	tomboy	General	0.13.x	Other Windows	Normal normal	Tomboy Maintainers	2009-01-27 12:45 UTC by	Benjamin Podszun	2014-06-13 08:41 UTC (	2 users	Please describe the problem:Just installed 0.13.3 on Windows. I've both the Gtk# 2.12 SDK and mono 2.2 installed (which brings Gtk# with it, afaik). This is running on a laptop with an external screen attached to the right, if that matters.Clicking on the tray icon (right or left) opens an _empty_ context/popup menu with a scrollbar on top and bottom. I need to "scroll" down to move the actual context menu items into place. Because of the default placement of the menu (see #556408) it basically starts scrolling down right away (my mouse pointer is already in the right spot as soon as the menu is created), but it's _very_ visible and even slow. Especially for the left click menu with its list of recent notes.Steps to reproduce:1. Install 0.13.32. Click on the tray iconActual results:Weird scrolling (see screenshots)Expected results:"Default" behaviour: See the complete menu right away.Does this happen every time?YesOther information:	CreatedLeft menu scrolling into viewCombined screenshot of 3 steps during the scrollingCreatedRight menu scrolling into view2 steps of the process of opening the right click menuI've seen problems like this before in other apps; shouldn't be too hard to track down. That being said, I've not seen the problem with Tomboy. I suppose it could be related to your multiple monitor situation. What version of Windows are you using?Just so you know, having Mono installed has absolutely no affect on Tomboy. The gtk-sharp installed with Mono is completely separate from the gtk-sharp installed for .NET.This is Windows XP Professional SP 3, company laptop. I'll try it again at home tonight (XP Home SP3, again two monitors) and will try to find more details. I'll retry with only one monitor attached as well, after calling it a day later.Thanks for the information related to gtk#.The problem is fixed as soon as I move the taskbar to the left side of the screen. Guessing wildly: My left screen (main one, with the taskbar/notification area) is the smaller one, supporting only a 1024x768 resolution. The one to the right isn't huge either but runs on 1280x1024. Could the difference in size (and being on the smaller one) be the problem here?(In reply to)That's a good thought. Tomboy uses math related to the size of the screen to figure out how to orient the menus, etc etc. This logic is probably not working correctly with your setup of having two differently-sized screens.Turns out this is fixed in gtk-sharp 2.12. We should start building Tomboy against that, instead. Updating summary.Forgot this is fixed for Windows in trunk.Not fixed (for me at least) with git master and gtk 2.12.Same behavior.	8.0	id=756320	14	False	False	slomo	1
id=756320	REOPENED	GStreamer	gst-plugins-base	1.6.0	Other Linux	Normal normal	GStreamer Maintainers	2015-10-09 21:53 UTC by	Jan Lukas	2016-02-29 00:09 UTC (	5 users	Createdartifacts with gst-play-1.0I'm on Fedora 23 beta with gstreamer 1.6.0.I use a Radeon HD7850 with the radeonSI drivers.When I play any video with gst-play-1.0 (tested with 1080p Big Buck Bunny) I get a weird flickering colored bar at the bottom. Also a few lines at the top and at the bottom of the video are missing.Anything I can do to get some additional information for you guys? :)	Does it happen with every video resolution and look the same? Does it work better if you use ximagesink, xvimagesink or glimagesink or are all the same?Yes, it happens with different resolutions (even though I haven't tested ALL possible resolutions).It does not happen with ximagesink and glimagesink, only with xvimagesink and autovideosink ;)Anything else I can do?Can you provide a debug log with GST_DEBUG=xvimage*:6 ?Sorry for the long delay. Here you go:I can reproduce this by playing H264/mkv movies via xvimagesink and maximising the window (so that the garbage in the top, bottom, right and left border is visible properly against the black frames), with 1.6.3 as in debian sid, and the Intel driver.However, I can't reproduce it anymore with git master as of today. I suspect it was something in gst-libav that fixed it.Please re-open if you can still reproduce this with 1.7.2 or later, thanks!My bad, this still happens with master if the gst-libav decoders are used (it used gstreamer-vaapi decoders at first when I tested).Assigning to xvimagesink for now.***has been marked as a duplicate of this bug. ***	7.0	id=746534	41	False	False	oholy	1
id=746534	REOPENED	glib	gio	2.45.x	Other Linux	Normal normal		2015-03-20 15:09 UTC by	mikey	2016-03-04 15:12 UTC (	12 users	Running gvfs-open fails to open the appropriate application the first time it is run unless the application is already running. Step, <output>:1) gvfs-open /home, <nothing>2) gvfs-open /home, <nautilus /home>3) gvfs-open ~/Desktop, <nautilus ~/Desktop>Running "killall nautilus" will reenable the phenomena. The same happens for all files types I have tested, eg. "gvfs-open my.txt" does nothing the first time but launches gedit the subsequent times. Having the application running before running gvfs-open on the appropriate file type opens the file first time.I found the following bug report that has some explanation for the issue ():I have confirmed the behaviour. Running:dbus-monitor "interface='org.freedesktop.Application'"Detects no messaging when running for the first time "gvfs-open /home". However the second and subsequent calls produce output like:method call sender=:1.320 -> dest=org.gnome.Nautilus serial=7 path=/org/gnome/Nautilus; interface=org.freedesktop.Application; member=Open array [ string "file:///home" ] array [ ]method call sender=:1.321 -> dest=org.gnome.Nautilus serial=7 path=/org/gnome/Nautilus; interface=org.freedesktop.Application; member=Open array [ string "file:///home/michael" ] array [ ]	Thanks for the bug report. I can reproduce it on F21.Maybe there is relation with, because adding sleep in g_desktop_app_info_launch_uris_internal helps according the downstream bugzilla report, so we exits too early probably...This happens when it launches the app via dbus. The problem is that it exits before the underlying dbus call properly finishes and so the message doesn't get through properly (I saw this a while ago and forgot to raise a bug).I think it should be reassigned to glib since the underlying call to open the app is supposed to be a sync call but it hasn't finished by the time we exit.I'm convinced this is bug in gio also, because g_app_info_launch_default_for_uri should return only after the application is executed - I mean in this case after dbus call is sent. But it seems we exit earlier then the call is sent despite g_dbus_connection_flush is called...Only sync version of g_dbus_connection_call seems to fix this issue, but we don't want to wait for response probably according the comment: /* This is non-blocking API. Similar to launching via fork()/exec() * we don't wait around to see if the program crashed during startup. * This is what startup-notification's job is... */(gapplication tool also uses _sync version for launching)Do you have any idea how to fix it?Createdgdesktopappinfo: use sync call to avoid dropping messageThere is a patch to use _sync call with small timeout 250ms (just to be sure message is sent) as a result of discussion on #gtk+.We are callingg_dbus_connection_flush (session_bus, NULL, NULL, NULL);after the async call, to ensure the message makes it out on our end before exit(). Is that not working ?In the case of activation, it's insufficient to flush the bus -- D-Bus has an annoying habbit of discarding messages for pending activations if the sending application has exited.In light of how difficult it would be to solve this problem, I almost consider that to be a bug in D-Bus...Particularly when you consider that the message may even have the no-reply-needed flag. In that case, why does it matter _at all_ if the sender has quit?In fact, this "no-reply-needed" case is the case we are dealing with here -- we do g_dbus_connection_call with a NULL async callback, which means that the flag is getting set on the outgoing message.That means that we have to wait for a reply that will never come. This is a D-Bus bug...(In reply to Matthias Clasen from)That's an async call as well though, so presumably we're exiting before it actually gets a chance to flush.there's a related open dbus-daemon bug here, I think:shows the same problem happening with dbus-send, and of course NetworkManager isn't normally activated, so that shows this problem can happen even if the service is already running.Maybe there is "better" dbus-daemon bug report, see:So it is probably dbus bug, but it is quite old and still it isn't fixed. But we need to find some solution quickly, because gvfs-open is now pretty unusable... gvfs-open works for me every second try, but it can be much worse according the following downstream bug report (10-100 tries is needed to start the application):Wouldn't be solution to apply my patch as a workaround?I think a workaround would have to be a patch to gvfs-open. We don't want to make the gio api effectively synchronous.(In reply to Dan Winship from)Yeah...if you annotate you'll see that came from:So I'd say to combine what Dan and Matthias said...try calling g_dbus_connection_flush_sync() (and note the _sync() ) at the end of gvfs-open.c?This was first thing I tried, however calling _flush_sync() doesn't fix it for me :-(g_dbus_connection_flush documentation claims it should work, but it doesn't work:"This is useful in programs that wants to emit a D-Bus signal and then exit immediately."it's not going to work because the problem isn't just the message not going out in time, it's the message not getting processed by the dbus-daemon in time.If you want to work around this in gvfs-open you need to block gvfs until dbus sends a message to you. It won't send a message for the call made, though, since the call made is no-reply.The easiest workaround would be to send a synchronous org.freedesktop.DBus.Peer.Ping message before exitingIt seems ridiculous to me to do workaround for this in gvfs-open, because we don't have any information whether the application is launched over d-bus, or spawn and also we don't know bus_name and object_patch for the application to send e.g. org.freedesktop.DBus.Peer.Ping as was suggested by halfline...I think it should be sufficient to ping the message bus itself (or do any other call to the message bus).As I understand it, the race that needs to be closed is the bus daemon dispatching the request before the client closes. I believe that the bus daemon dispatches requests from a client in order, so if a client makes two requests the first will get dispatched before the second.So you shouldn't need to ping the activating service, just the bus daemon (but make sure you wait for a reply!).I realize it isn't pretty, and it's debatable whether the ugliness should go in the glib or gvfs, but unless you want to fix dbus-daemon it's got to go somewhere... and gvfs-open is one of the few programs out there that will hit this bug in practice, because most programs are long lived.So Ondrej looked into this a bit and discovered the bus daemon doesn't implement the Peer interface for /org/freedesktop/DBus . But if I understand the race correctly, any method should work, so he's going to try GetId instead.fail:<oholy> but it seems it isn't enought:<oholy> method call time=1432131083.551780 sender=:1.272 -> destination=org.gnome.Nautilus serial=9 path=/org/gnome/Nautilus; interface=org.freedesktop.Application; member=Open<oholy> array [<oholy> string "file:///"<oholy> ]<oholy> array [<oholy> ]<oholy> method call time=1432131083.552294 sender=:1.272 -> destination=org.freedesktop.DBus serial=10 path=/org/freedesktop/DBus; interface=org.freedesktop.DBus; member=GetId<oholy> method return time=1432131083.552340 sender=org.freedesktop.DBus -> destination=:1.272 serial=8 reply_serial=10<oholy> string "8be56d0183ba3a5ac06b42a8555c26c6"<oholy> signal time=1432131083.560777 sender=org.freedesktop.DBus -> destination=:1.272 serial=33 path=/org/freedesktop/DBus; interface=org.freedesktop.DBus; member=NameLost<oholy> string ":1.272"<oholy> id is returned, but nautilus isn't started..<halfline> well nautilus doesn't have to be started, it just has to be dispatched<halfline> if i understand the problem right<halfline> or are you saying you've tried the patch and it isn't working ?<oholy> sorry, bad formulation<oholy> nautilus doesn't start with this patch<halfline> okay<halfline> hmmSo i guess the three obvious choices left are:1) add the ping to glib2) add a delayed exit to gvfs3) fix dbus-daemon1) could better be stated as "block for the reply to finish" but it's not really an option given the api doesn't have an async ready callbackCreatedgvfs-open: add hack to close up dbus-daemon raceIf gvfs-open exits before the program it starts fully activates, thenthe dbus-daemon may avoid doing the activating method call.This commit works around the problem by pinging the activated application,and waiting for a reply.theis pretty yucky but it closes up the race without changes to glib or dbus-daemon.Review of:::: programs/gvfs-open.c@@ +103,3 @@+ g_clear_object (&app_info);+ g_clear_pointer (&basename, g_free);+ g_clear_pointer (&object_path, g_free);there's a harmless unnecessary g_clear_pointer here. we should either drop it or add another harmless, unneccessary g_clear_pointer for bus_name.Review of:It seems the patch fixes the problem. It also leaks output from g_file_get_uri (I know there is same leak in the gnome-3-14 code, which is already fixed in newer versions). However the patch is the example, why I think it is ridiculous to fix this in gvfs (gvfs-open is almost double sized now and contains lot of copy&pasted code from glib)... :-(Createdgappinfo: add hack to close up dbus-daemon raceMight be better to fix it in g_app_info_launch_default_for_uri, which is already using synchronous I/O, to safe some copy&pasted code, mightn't it?Review of:::: gio/gappinfo.c@@ +21,3 @@ #include "config.h" +#include <string.h>is redundantReview of:well, Matthias / Ryan can chime in on whether or not this is acceptable, but it makes sense to me as a "right now" answer. Some might argue that extending the GAppInfo interface would be better, but I think doing that would only make sense if we did it in a way that fixed the three warts in the existing async api (no callback, no cancellable, GList of strings instead of array of strings).I also disagree that putting a workaround in gvfs-open is ridiculous. Yucky, but good enough near-term, since it's one of the very few programs that would ever be affected.::: gio/gappinfo.c@@ +729,3 @@+ const char *app_id;++ app_id = g_desktop_app_info_get_app_id (app_info);I think if you're going to be introducing private api between gappinfo and gdesktopappinfo it should be as contained as possible. e.g., g_desktop_app_info_ping_peer_sync rather than exporting the app id and the api for converting the app id into an object path::: gio/gappinfoprivate.h@@ +26,3 @@+gchar *object_path_from_appid (const gchar *app_id);++const char *g_desktop_app_info_get_app_id (GAppInfo *appinfo);this should probably go in its own header i think.Review of:So this is okayish, but a couple of comments: 1) in addition to checking if the desktop file looks like a bus name you should check the DBusActivatable key to make sure it is true. 2) at this point you almost may as well send the Open or Activate method for yourself... 3) it could make sense to add some sort of g_app_info_sync() sort of call to deal with this, but... ...that would be silly, if eventually this will be fixed in D-Busso, really, just check DBusActivatable and I guess this is the best we can do.***has been marked as a duplicate of this bug. ***I wrote another set of similar patches onthat try to fix the problem in gdesktopappinfo.c itself.Comment ongdesktopappinfo: use sync call to avoid dropping messageChanging status ofas per.Review of:::: programs/gvfs-open.c@@ +61,3 @@++ if (app_info != NULL && !G_IS_DESKTOP_APP_INFO (app_info))+ return FALSE;This check can be omitted...@@ +197,3 @@+ char *object_path = NULL;++ if (get_bus_name_and_path_from_uri (g_file_get_uri (file), &bus_name, &object_path))This works only if location is relative or absolute path. File is NULL if location is proper uri...Createdgvfs-open: add hack to close up dbus-daemon race (gnome-3-14)Let's fix it in gvfs-open, there is amended patch from halfline with removed unnecessary g_clear_pointer, fixed uri leak, removed redundant app_info check, fixed for uri locations.Createdgvfs-open: add hack to close up dbus-daemon race (master)Review of:So I'm clearly okay with this patch, and it looks like you addressed all the things Ryan said. I will say, though, that I sort of like your approach inbetter (well with the changes I mentioned). It doesn't make an async api suddenly synchronous so it addresses mclasen's concern in. It isn't 'pretty', but workarounds seldom are. Anyway, either way seems okayish to me, and if you just want to do it in gvfs, that's cool. Still, might be worth pinging mclasen/ryan one more time to get their takes on.Createdgappinfo: add hack to close up dbus-daemon raceOk, there is also modified fix for gappinfo for comparation.gdesktopappinfoprivate.h is added and g_desktop_app_info_ping_peer_sync is introduced...Review of:This effectively causes the call to block, which is really in no way better than just doing a blocking D-Bus call in the first place...I really think any fix needs to be done inside of the commandline tool itself.that call already blocks<halfline> desrt: g_app_info_launch_default_for_uri is documented as a sync call<desrt> oh. curious.<desrt> still not a fan :(<desrt> opening a file on the disk and reading a couple of bytes is not the same as blocking on an app to startup<halfline> not the same, but both can result in the program seemingly freezing up<halfline> anyway, the workaround is ugly no matter where it goes, and i don't really care where it goesOk, so, I'm resigned to push the gvfs-open patches...Comment ongvfs-open: add hack to close up dbus-daemon race (gnome-3-14)gnome-3-14:commitComment ongvfs-open: add hack to close up dbus-daemon race (master)master:commitgnome-3-16:commitThanks to all participants!-> glibReopening and moving to GLib, because I'm now hitting the same exact issue when my application (Sushi) calls gtk_show_uri() and immediately quits afterwards. If the application is DBus-activated, its window won't be shown until gtk_show_uri() is called a second time.My patches from(or other similar patches that fixed this at the GLib level) would fix this problem.***has been marked as a duplicate of this bug. ***It seems to me gtk-launch utility has also same problem...filedfor gtk-launch	47.0	id=719636	27	False	False	slomo	1
id=81880	REOPENED	gtk+	Widget: GtkTextView	2.0.x	Other Linux	Normal normal		2002-05-15 16:54 UTC by	Evert Verhellen	2013-04-06 16:22 UTC (	5 users	Description of Problem:Pasting a text selection by clicking the middle mouse button shouldposition the text cursor right behind the inserted text in order to be ableto continue typing.Steps to reproduce the problem:1. Start gedit2.2. Type in the following text (do no type the line numbers): 1 One Two Three 2 Four Five Six3. Select "One ". 1 [One ]Two Three 2 Four Five Six4. Click the middle mouse button in front of the word "Five". 1 [One ]Two Three 2 Four One Five SixActual Results:The text selection is pasted correctly. The text cursor is still behind thetext selection (although invisible).Expected Results:The text cursor should be positioned behind the inserted text in order tobe able to continue typing.5. Press [space].Actual Results:The text selection "One " on the 1st line is erased and replaced with a blank.Expected Results:The text selection "One " on the 1st line should be cancelled and a blankshould be inserted behind the inserted "One " on the 2nd line.How often does this happen?Always.Additional Information:This would make gedit2 have the same middle mouse button behaviour as NEdit.Version Details:gtk2-2.0.2.0.200205130458-0.snap.ximian.1gedit2-1.118.0.0.200205130458-0.snap.ximian.1	Basically a UI decision. I don't know the answer offhand.The current behaviour certainly seems broken, especially the textcursor disappearing altogether at one point. I haven't really played with this, but my first reaction would be thatselecting text and pasting it somewhere with the middle mouse buttonshould leave you in exactly the same state as selecting the text,hitting Ctrl+C, moving the cursor to the insertion point and hittingCtrl+V.I assume you're suggesting that the selected text should remainselected, but that the cursor focus should move to where the pasteoccurred.If this is the case, the I agree. This would allow you to continuepasting using the middle mouse button, but also save the hassel ofhaving to click again to continue working at the point of paste.Looking at my own work patterns (and I'm sure I'm not unique in this)you typically paste text to where you are currently working and notfrom where you are currently working to another area. Thus, it wouldmake good UI sense to have the cursor follow the paste.Also, with the current behavior, if the selection comes from anotherwindow, then you have to focus the window to continue working in it. For example, if you select a command from a web page, and then middleclick paste it the terminal you then have to focus the window to runthe command. Having the cursor focus follow paste would alleviatethis issue.Rodd, your comments reflect exactly what was meant. The cursor focusshould go to where the text paste occured. Your multiple-windowexample shows that the current implementation behaves inconsistently.Additional Information:The text widgets in Mozilla have the same middle mouse buttonbehaviour as NEdit. They allow the user to continue typing where thetext paste occured.I have some additional information. As a result of this problem,pasting a text selection at the end of a document by clicking themiddle mouse button *will not* display the end of the document. On theother hand, pasting a text selection at the end of a document witheither [Ctrl]+[V] or [Shift]+[Insert] *will* display the end of thedocument.***has been marked as a duplicate of this bug. ***I'd urge everyone to go and readas it's not so much aduplicate of this bug, but an extension (IMHO).discusses that fact that middle clicking at the end of aselection seems to replace the current selection, instead of pastingthe selection at the end of the current selection.***has been marked as a duplicate of this bug. ***The following patch seems to fix it:in gtktextbuffer during pre_paste_prep we move the "insert" mark atthe insertion pointin gtktextview after having pasted the text we retrieve the "insert"mark and move the cursor to it making sure of also scroll the windowif needed.(note that we cannot simply move the cursor to the iter retrieved atthe button click because the clipboard would be emptied)Createdproposed patchI presume this is to fix both gtk+-2.2.5 and gtk+-HEAD?the patch is against HEAD, dunno about 2.2... I presume that it shouldapply there too.This patch really makes no sense to me - the two changes are: A) Before inserting the text, we move the "insert" mark (just one end of the selection) to the new insertion point. B) After we request the text, we move both ends of the selection to the the "insert" mark.Note that these two steps can occur in either order, dependingon whether the paste is from the same process or from a different process. I don't see how this is going to work in the case where B)happens first. And with a little testing, in fact, the resultsin the remote case are in fact incorrect.I'm going to revert the patch, and reopen and move to the2.4.1 milestone.Ugh, sorry. My testing seemed to indicate that it works. Maybe thetesting was too superficial...Comment onproposed patchNeeds-work based on owen's comment.Mass changing gtk+ bugs with target milestone of 2.4.2 to target 2.4.4, asMatthias said he was trying to do himself on IRC and was asking for help with. If you see this message, it means I was successful at fixing the borken-ness inbugzilla :) Sorry for the spam; just query on this message and delete allemails you get with this message, since there will probably be a lot.Has this bug been forgotten? The current behavior is a bit annoying specially when pasting into a different "screen page" as the view scrolls back to the cursor.CreatedPlace the cursor after the paste has been doneThis patch places the cursor at the location where the past has been done as soon as the paste event is finished. This seems to be the best place where to change the position as the paste event is asynchronous.Question. Does still allow for multiple pastes of the highlighted text?This patch allows exactly what the existing implementation of GtkTextView does. As long as the highlighted text comes from another application there will be no problem.Currently GtkTextView doesn't allow highlighted text from the same buffer to be copy pasted more than once because the paste operation unselects the highlighted text and the text is not stored in the clipboard. I believe that this is a separate bug.***has been marked as a duplicate of this bug. ***	21.0	id=81880	34	True	False	hp	1
id=778809	REOPENED	gnome-shell	extensions	unspecified	Other Linux	Normal normal		2017-02-17 06:47 UTC by	Lester Carballo	2017-02-19 02:58 UTC (	1 user	Please see: probably this is more related with the shell than with gnome-settings-daemon, but this is a relate thing in both sides.A key-binding can be define as:1- A key combination.2- A handler (could be a command line operation).3- Other parameters as for example flags to moderate the context to launch the action.4- Probably a unique identifier for the key-binding (a name).5- A display name to be recognized by the user.In this context and like in gnome-shell we can have the extensions running in a user domain, where the extension directory it's not a default place for Gio.Settings and also Gio.Settings required to have a well former structure, inside an xml and also required a binary representation of the xml data and where this data also can create a conflicts by name with other xml data from the Gio.Settings that could also not be a key-binding...I ask me, if it's really necessary do all this to have a simple key-binding working with my extension and i can not found an answer of why there are not a way to create a key-binding calling a simple function in global or Meta.There are some restriction to have a thing like that or was not implemented for time or something?In fact, if I try to load things that I don't do and they are not make thinking on gnome-shell, or gnome, and i found a way to get all information dynamically of how the key-binding of this things work then to be enabled it in gnome shell I will required a lot of restriction that of course demand a lot of CPU to be proceed. I need to generate an XML (the gsettings schema xml) on fly and then compiled it and then loaded it and then "send it to the shell"...Just to not mention, the emptiness that actually inspires those three letters in gnome shell (XML). Most common format for javascript without official support to be red and write it.	gnome-settings-daemon has _nothing_ to do with gnome-shell extensions.(In reply to Lester Carballo from)You mean code like this?this._action = global.display.grab_accelerator('<Super>t');if (this._action == Meta.KeyBindingAction.NONE) return;Main.wm.allowKeybinding(Meta.external_binding_name_for_action(this._action), Shell.ActionMode.NORMAL);global.display.connect('accelerator-activated', (dpy, action, device, time) => { if (action == this._action) this._doStuff();});Yes Florian, I mean a code like this... :) And yes, this mean that i need glasses, sorry.I see about three extensions () and all create a custom key-binding using a gschema file, also i see the code of the windows manager and this article:But I never see the shellDBus code... A big thanks.I know now why this is never used, it's because has a low priority.In a normal scenario an entry or other actor is graved and the event chain will consumed and what is supposed a global key-binding it's not executed...This works in some scenarios only... The same for the overlay-key. So, for me this are in the same point again. To have a global key-binding, we need to do a big work with Gio.SettingsAnother things that could work, it's intercept the global.stage events and implement all key-binding mechanism... This is to jump the grab and also the push modal, because the last also it's preventing some how the event handling if i don't use the grab helper.I think this could be philosophy of what it's a modal actor, and maybe also it's intentional prevent the global key-binding on a grab/modal actor, but for me a global key-binding need to have more priority than modal actors and need to break the modal to execute the action. Maybe it's not thinking in that way, but then i think it's an inconsistent that this works with the dash opened and not with a popup menu opened.(In reply to Lester Carballo from)I don't know what you are talking about. add_keybinding() and grab_accelerator() are different ways to register shortcuts with mutter's keybinding system, but they are not separate systems. Once a key combo has been resolved and is matched to a key event, it doesn't matter how it ended up in the system. In particular, one is certainly not more "global" than the other.(In reply to Lester Carballo from)When running as an X11 window manager, this will only work when the stage window has input focus. If that works for you, then fine. But it's definitely less global than mutter's keybinding system.I'm not quite sure what you are talking about. Not all keybindings make sense in all circumstances - for instance it would be bad if anyone could bring up the run dialog with <alt>f2 while the screen is locked. That's why gnome-shell has the concept of an "action mode" that reflects the current state with regard to keybindings and gestures, and you can use Main.wm.allowKeybinding() to specify in which modes a particular keybinding should be allowed.Maybe it's time for you to explain your use case - whatever it is you want may appear obvious and important to you, but keep in mind that in all those years with hundreds of extensions, seemingly nobody else has asked for this.(In reply to Lester Carballo from)Oh, I figured that "dash" is referring to the overview, but I assumed that with "popup menu" you meant popup menus in gnome-shell itself. Maybe what you mean are popup menus opened by applications?In that case: - on X11, the application has grabbed the keyboard, so the WM never sees the event to process the global keybinding - on wayland, global keybindings are expected to work in that caseIf that is what you are complaining about and you are using an X session, then there's nothing we can do in mutter/gnome-shell, it's a limitation of X11.Well yes, i speak about the X11 window system, but i speak about the gnome shell popup menus API and yes the dash it's the overview.Yes, i notice that there are not difference if i use the Gio.Settings or not. they are working similar.What i can notice it's:The modal state prevent the key-binding to work. i.e. the signal 'accelerator-activated' are not emitted when there are an actor in modal. The overview it's not modal. The popup menus of gnome shell gain the modal when they are opened preventing the key-binding to work.So, my problem with the key-binding it's only when an actor it's on modal. I'm using Shell.ActionMode.ALL, so i suppose that as it's ALL, in ALL circumstance the signal need to be emitted and this not occurs when there are a modal actor.My solution was:WHEN AN ACTOR it's ON MODAL, THE STAGE HAVE THE FOCUS, so i can capture the stage events searching for the action and force the display to emit the signal. This works:function _stageEventHandler(actor, event) { let action = global.display.get_keybinding_action(keyCode, modifierState); let name = Meta.external_binding_name_for_action(action); let isExternal = (name.indexOf("external-grab") != -1); if ((event.type() == Clutter.EventType.KEY_PRESS) && action && isExternal) { global.display.emit("accelerator-activated", action,null,global.get_current_time()); }}Of course it's not filter by Shell.ActionMode(In reply to Lester Carballo from)No, the overview *is* modal, just like menus. However the shell's popup menus used to have ActionMode.NONE (which indeed means: disallow all keybindings), but that hasn't been the case since. What GNOME version are you using?I used GNOME Shell 3.18.5.I can open the run dialog at top of the overview, but if I have opened for example the menu of the keyboard, to select the active keyboard layout, the Alt+F2 is not working...That cause me the confusion about if the overview it's or not modal, because work different in this case. I then don't know if the behavior of the overview it's ok, or it's ok the behavior of the popup menus.In any case, i considerer that a global key-binding that was declared as Shell.ActionMode.ALL, will need to work over the modal restriction, but i can not be sure if my presumption it's ok... I never understand how this is working on deep and less something relate with Wayland... It's pretty complex to me, so please take patience. I just think it's ok report what i considered a problem, but if i have the reason or not not matter, as this is not designed to work as i want of course.	10.0	id=778809	9	False	False	bugzilla	1
id=719636	REOPENED	GStreamer	gst-plugins-good	git master	Other Linux	Normal normal	GStreamer Maintainers	2013-12-01 13:14 UTC by	Lionel Landwerlin	2014-02-05 08:46 UTC (	8 users	I've been trying to get playbin to work with the vaapi plugins out of the box and with the help of several people on the #gstreamer channel we finally figured out one of the problem was in the deinterlace plugin.It seems deinterlace alterates caps even though it's in passthrough mode, which strips out the meta:GstVideoGLTextureUploadMeta capabilities of our video sink. What follows is that the vaapidecode doesn't get to know about this caps and it just happens to not link or not do software decode.Attached is a patch to prevent the filtering in passthrough mode.	Createddeinterlace: don't alterate peer's caps in passthrough modeComment ondeinterlace: don't alterate peer's caps in passthrough modeYou can't check self->passthrough in getcaps, as this is supposed to give you everything that you can do, not what is currently configured.In this case, I think deinterlace should potentially just prepend the peer caps.That said, we can't just append them. playbin probably needs to add some kind of passthrough mode. Something like a autoconvert containing identity and deinterlace.Also that patch is incomplete, deinterlace can also handle all caps that are progressive in automatic mode, and can handle all caps always in disabled mode. In interlaced mode it can only handle the caps that it can actually handle. I think basing the getcaps behaviour on the mode would be a good idea.However that will make negotiation fail in auto mode for all caps that deinterlace does not understand and which are interlaced, e.g. "video/x-raw(meta:GstVideoGLTextureUploadMeta),interlaced=true". Alternatively we could also add a third mode that always allows everything, and only does deinterlacing if it can do that and the input is interlaced. Some kind of best-effort-auto mode.(In reply to)Then you're moving the problem from deinterlace to playbin without making it easier ;)Createddeinterlace: support ANY caps features if deinterlace mode allows itHere is an attempt to solve the issue, taking into account Sebastian's remarks.Createddeinterlace: support ANY caps features if deinterlace mode allows itSee also this related patch which enable the deinterlaced element to disable itself when it does not support the input caps features:And this patch for letting playbin plugs elements with caps features:Review of:::: gst/deinterlace/gstdeinterlace.c@@ +279,3 @@ +#define DEINTERLACE_ALL_CAPS DEINTERLACE_CAPS ";" \+ GST_VIDEO_CAPS_MAKE_WITH_FEATURES ("ANY", DEINTERLACE_VIDEO_FORMATS)This is not correct IMHO, it should support any format in passthrough mode. Not just DEINTERLACE_VIDEO_FORMATS.Createddeinterlace: support any video formats and any caps features if deinterlace mode allows itLooks good, will merge it when #720388 is ready and we have a unit testComment ondeinterlace: support any video formats and any caps features if deinterlace mode allows itActually not completely. In the !peercaps case you should also do the same instead of just using the template caps.Createddeinterlace: support any video formats and any caps features if deinterlace mode allows itcommit 0bbdb9bb1d9408dbbe753b47c3b919ddc285511cAuthor: Matthieu Bouron <>Date: Fri Dec 6 17:08:54 2013 +0000 deinterlace: support any video formats and any caps features if deinterlace mode allows itSince that patch playing:fails with:ERROR:gstdeinterlace.c:426:gst_deinterlace_set_method: assertion failed: (method_type != G_TYPE_INVALID)Reverting it makes it working.Createddeinterlace: do no try to set deinterlace method if passthrough is enabledIt would appear that deinterlace doesn't really support all the formats which the recent patches make it claim to support. And while the most recent patch fixes issues where content is in unsupported formats but already progressive it doesn't handle cases where the content is in an unsupported format and still interlaced. For example interlaced I422_10LE content will fail, this can be triggered with the following pipeline:gst-launch-1.0 videotestsrc ! video/x-raw,format=I422_10LE,interlace-mode=mixed ! deinterlace ! fakesink If deinterlace was reporting the correct sink caps this could be avoided via a videoconvert element, but due to the incorrect caps videoconvert doesn't do anything (since its already in a format that all elements claim to accept).Yeah, there's something not really right here. This needs further changes, especially something more along the lines of the videobalance/textoverlay changes that Matthieu currently works on.Comment ondeinterlace: do no try to set deinterlace method if passthrough is enabledcommitAuthor: Matthieu Bouron <>Date: Thu Jan 16 11:26:41 2014 +0000 deinterlace: do not try set deinterlace method if passthrough is enabled Fixes an issue with progressive content and unsupported video formats for the deinterlace method.	19.0	id=662958	12	False	False	nicolas	1
id=662958	REOPENED	clutter-gst	general	2.0.x	Other Linux	Normal normal		2011-10-28 18:02 UTC by	Damien Lespiau	2014-12-22 17:37 UTC (	2 users	This of the QoS messages to work	CreatedDo synchronous render to allow QOSCreatedFix threading and dynamic caps issuesCreatedDo synchronous render to allow QOSPushed to master, thanks!Hum, actually this commit introduces a deadlock between GstBaseSink and ClutterGstVideoSink that is quite easily reproducible when pausing the pipeline (in the case I'm testing with, playbin2). Bactraces of the relevant threads:Reverting the commit is master as I don't have time to investigate that deadlock right now.	6.0	id=594287	10	False	False	liyuan	1
id=758065	REOPENED	gtk+	Widget: GtkFileChooser	3.22.x	Other Linux	Normal normal		2015-11-13 16:01 UTC by	Jean-François Fortin Tam	2017-02-23 08:21 UTC (	15 users	So, there'sfor having the ability for the FileChooser to support single-clicking (which I'm in favor of), but what I'm reporting here is rather a small behavior regression introduced in the 3.18 series.It seems that the filechooser now uses double-clicking with "slow clicks", ie an unlimited delay for the 2nd click to happen and trigger the folder change. But there's a bug in it when the folder changes inbetween the clicks.Seems like an hybrid approach, but in my case it causes more problems than it solves. I very often hit this situation (arguably because I've been so used to the filechooser being doubleclick-only for two decades): I click a folder, it selects it... I subconsciously think "oh right I still need to doubleclick" and doubleclick it. The real problem then surfaces: instead of just entering that folder, it enters the folder *and then enters whatever subfolder is under the mouse pointer* with the 2nd click. So instead of going 1 level deeper, it goes 2 levels deeper because it did not reset the click count quick enough.	This behavior is exactly I would like to see it. There are plenty of directories, containing single directory. Good example, is /home/user on laptop. Having possibility to passtrough this kind of directories is precious. This is the exactly the case, when double click could be somehow useful. Don't "fix" that!I'm sorry but that's just broken and not what 9/10 of people would need the filechooser for. Besides, it never worked like this until this particular release (3.18).If your goal is to traverse 20 levels of nested folders with a single folder in each without looking (very very very unlikely for a normal usecase), it would make more sense (and be more efficient) for you to use the keyboard's Enter key rather than the mouse.Please try 3.18.5. It has a fix related to 'slow double click' in the file chooser.I'll assume that was good, then.The update finally landed in F23 and I can confirm it worked, thanks!"Not like in MacOS" is now know as "that's just broken and not what 9/10 of people would need".BTW, who the hell are you to speak for 9/10 people?Looks like gnome developers add good new features only by coincidence.Matthias wrote:Ah, sorry to reopen, turns out it was only partially fixed after all. Let's say you have this folder hierarchy:~/Pictures /A /A1 /A2 /B /B1 /B2With 3.18.5, if "B" is selected and you double-click it, it will correctly enter B without going into B2.However, if you have A selected and double-click, it will enter A1 instead of just entering A. This seems to be related to the fact that it's the first item on the listview.---------------Lous1935 wrote:Oh, I'm a designer who has been involved in this community for over ten years and has made multiple deployments with the ability to study everyday users' behavior and the struggles they encounter. Anyway, as I pointed out, your usecase is covered by keyboard navigation, *and* the filechooser already defaults to your home directory.Please refrain from further angry comments, it does not help your cause.(In reply to Jean-François Fortin Tam from)Yes, the first item is already selected, so it's as if the first click was already done.***has been marked as a duplicate of this bug. ***I can confirm this bug. Really surprising the first time you encounter it and can lead to error (wrong file selected). Especially when you choose "double click" in Nautilus. File chooser should follow what have been selected in Nautilus (single click or double click).By the way this one is a duplicate I think:Thanks !***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I would love to be able to turn this behavior off (and I don't think it should be on by default). It frequently leads to unintended attaching/opening of the first file in a directory. This style of click-response is contrary to the last 30 years of my mouse-use habits.(In reply to Nathanial Hendler from)Totally, and it's contradictory to _itself_.Clicking on, or otherwise interacting with, a particular UI item should always do the same thing. It shouldn't matter whether said item is already selected or not. That's not intuitive and just annoying.And while this problem affects all GTK+ users, it's especially inconsistent in GNOME - where you tell Nautilus to do single- or double-click open, and then GtkFileChooser - which often tries to mirror Nautilus - does EITHER depending on how it feels at the given moment.It should pick one click method and stick to it, not try to be clever like this. If the motivation behind this was to make things easier for tablet users with tapping - then default to double-clicking (or maybe even a GNOME setting) if a desktop machine is detected, and single-click if a tablet.Anything would be preferable to the current behaviour, which might be trying to be 'one size fits all', but is really 'one size fits none'.It's really unintuitive and lead to error or when you know the behaviour force you to be really careful about where you click. I really hope that will be fixed soon, ideally by following what have been selected in Nautilus (single click or double click).Thanks !@jeremy9856: Please refrain from adding comments to a bug report when your comment does not offer any additional information (or is just the same as in). Every comment creates notifications that someone has to read (who cannot write or fix code in that time), and advocacy is not welcome.Created[PATCH] FileChooserWidget: Activate by click consistentlyFwiw, this is how I would handle it. Simple and effective... almost too simple, making me wonder what I'm missing. So, please let me know if there's some pitfall I haven't thought of.This made me wonder: Why is activation disallowed if the device is (or emulating) a touchscreen? How does activation occur on such input devices?Comment on[PATCH] FileChooserWidget: Activate by click consistentlyIn fact it's simpler: double-click events are handled somewhere else. To me the solution is simply to revert commit.Daniel, it seem that you have found the culprit ! Can this commit be reverted please ? It will fix the problem.Later it will be great to follow what have been selected in Nautilus (single click or double click).Thanks !It's not up to me whether it can be reverted, but rather the maintainers and designers.As you pointed out, it adds yet another inconsistency with Nautilus, and there have been efforts recently to reduce those in other areas, including by sharing GSettings and composite widgets.However, see this reopened, 14-year-old bug about people not wanting to have to double-click, where Matthias stated that they do not want to provide/honour a fixed single/double click setting:So, is that still a current opinion? Can we get some direction on what kind of patch people should submit, at least? The current behaviour doesn't work and has resulted in both tickets being reopened and spammed (including by me).At the very least, when this change was made, it should have been accompanied by clearing the selection on changing directory (like e.g. Windows Explorer), so avoiding the problem shown in, which seems the crux of the issue here.2 things are needed: * a decision on, and _full_ rationale for, what to do * a patch that does itThe former seems considerably more elusive.	21.0	id=398222	7	False	False	tml	1
id=748577	REOPENED	GStreamer	gst-plugins-good	1.4.4	Other Linux	Normal normal	GStreamer Maintainers	2015-04-28 08:14 UTC by	Christoph Reiter (lazka)	2015-08-06 13:48 UTC (	2 users	Due to flat-volumes I'm exposing the pulsesink volume property in the UI now and noticed some problems:1) When the pulsesink is created it returns 1.0 for volume and after going to paused it returns the actual volume assigned by PA. notify::volume never gets fired in between.2) When in playing state, changing the volume in the gnome sound preferences or pavucontrol, pulsesink fires notify::volume. In the paused state it never fires notify::volume but the volume values changes.I've currently worked this around my polling pulsesink in case of state change messages on the bus and when the user interacts with the volume widget. It would be nice if pulsesink would notify in all cases where volume potentially changes.	+1 on fixing this.(Side note, be aware that these changes will most likely be fired from a non-main thread)*** This bug has been marked as a duplicate of***seems unrelated, this is about the volume property not the pulseaudio volume.Ok ok, let's keep it separate then, but I do believe the part you set about flat-volume is a match. Will you propose a patch ?For your interest, the point was that you should always be able to set 1.0 to start with, and not get any master volume change (as in GStreamer you should control the stream volume).Thanks.The problem also occurs without flat-volumes but isn't visible as much as the master volume doesn't affect the stream volume and the user doesn't change the stream volume from outside (pavucontrol, gnome sound settings,..) that often.I'll look into providing a patch.(I never set the volume property to some constant, sodoesn't affect me..)	7.0	id=748577	7	False	False	dustin	1
id=398222	REOPENED	glib	win32	unspecified	Other Linux	Normal normal	gtk-win32 maintainers	2007-01-19 01:31 UTC by	Owen Taylor	2007-01-20 00:21 UTC (	3 users	Distributing the (generated) glib.def and gobject.def would make things alittle easier for people building in a non-MinGW environment	They *are* distributed, at least in the zipfiles on ftp.gtk.org and ftp.gnome.org. They are called glib-2.0.def etc, though, to match the names of the .lib format import libraries.234746 Defl:N 34232 85% 07-01-15 14:05 033045b3 lib/glib-2.0.lib 22124 Defl:N 5083 77% 07-01-15 14:05 67ea5eb6 lib/glib-2.0.def 3688 Defl:N 805 78% 07-01-15 14:06 1d5399e5 lib/gmodule-2.0.lib 208 Defl:N 107 49% 07-01-15 14:06 5127030b lib/gmodule-2.0.def 84786 Defl:N 10636 88% 07-01-15 14:06 379a0d03 lib/gobject-2.0.lib 8006 Defl:N 1803 78% 07-01-15 14:06 0f7704fe lib/gobject-2.0.def 2408 Defl:N 603 75% 07-01-15 14:07 7305dc09 lib/gthread-2.0.lib 62 Defl:N 51 18% 07-01-15 14:07 652da3ad lib/gthread-2.0.defI think Owen meant in the tarballs, not zipfiles.Ah. So would it be enough to add them to BUILT_EXTRA_DIST in glib/Makefile.am and gobject/Makefile.am? There are rules to build them in the makefile.msc(.in) files, though, but is that not the environment that you Owen think of specifically?Yes, I meant the tarballs .. so that they would be there for someone buildingfrom source.I think adding them to BUILT_EXTRA_DIST would be sufficient, but I wouldn'tbe positive without typing 'make dist'... the question in my mind is whether adding a file to BUILT_EXTRA_DIST is itself enough to force it to getbuilt, even if it wouldn't be built normally. (And the .def files don'tnormally get built on Linux, though they do built fine if you type'make gobject.def')While I was building with Visual Studio project files rather than nmake/makefile.msc.(.in), if the rules in the makefile.msc.(.in) workedit wouldn't be hard to adapt them to that environment. They don't, becauseamong other things, they don't strip the G_GNUC_* out of the generated.defs, and I couldn't think of how to fix them without requiring sedor perl for our build environment, which I didn't want to do.the rule in makefile.msc.in (added last year) works just fine for me.glib.def: glib.symbols echo EXPORTS > glib.def cl /EP -DINCLUDE_VARIABLES -DG_OS_WIN32 -DINCLUDE_INTERNAL_SYMBOLS -DALL_FILES \ -DG_GNUC_MALLOC= -DG_GNUC_CONST= -DG_GNUC_NULL_TERMINATED= -DG_GNUC_NORETURN= \ -DG_GNUC_PRINTF=;G_GNUC_PRINTF glib.symbols >> glib.defHmm, the rule in glib-2.12.9 doesn't have the the G_GNUC_* bits ... I guess that just got added to the HEAD branch.The -DG_GNUC_PRINTF=;G_GNUC_PRINTF part was the thing I couldn't figureout for 'cl' syntax... it's either undocumented or I missed it in thedocumentation.(For those following along difference with G_GNUC_PRINTF is that it is a macro with arguments so -DG_GNUC_PRINTF= leaves things like (3,4) in the output)Still, I don't think it would hurt to distribute the .def files.For some time I tried to redefine G_GNUC_PRINTF as macro as well, and failed.To use -DG_GNUC_PRINTF=;G_GNUC_PRINTF avoids advanced command line parsing (apparently not implemented in cl, or maybe building it already fails in nmake).The simple string replacing relies on the fact, that comments in .def files start with a ';'. So at the moment there is just the semicolon added, it does not matter what is following. In your example there would be ';G_GNUC_PRINTF(3,4)'.BTW: apparently the .def file parsing was 'improved' with vc>6. Earlier versions of the linker just gave a warning like:glib.def : warning LNK4017: G_GNUC_PRINTF(3,4) statement not supported for the target platform; ignoredHmmm, so you're just doing that. I thought about doing it that way, butthe docs for module definition files () imply it wouldn'twork: Comments in the .def file are designated by a semicolon (;) at the beginning of each comment line. A comment cannot share a line with a statement, but it can appear between specifications in a multiline statement. (SECTIONS and EXPORTS are multiline statements.)I guess I should have tried it... But at some point I got tired, and just generated the file on linux and checked it in together with the project files :-)mclasen, could you verify that adding glib.def and gobject.def to BUILT_EXTRA_DIST makes them appear in the tarball?	9.0	id=680813	10	False	False	gdesmott	1
id=107626	REOPENED	glib	gmodule	2.2.x	Other All	Normal normal		2003-03-05 06:49 UTC by	jacob berkman	2013-04-23 18:39 UTC (	4 users	i am seeing this bug in evolution.what happens is, a bonobo shlib component uses libglade, and uses thesymbol lookup parts of g_module. this fails, because the symbols aren'tdefined in the "self" module, but in a loaded module.eg, gfrob loads libfoo_comp.so using gmodule. libfoo_comp.so callsg_module_symbol (NULL, "foo_function"). this fails on OS X, but apparentlyworks on linux.a simple workaround is to try looking up the symbol in the previoiuslyloaded modules (see attached patch).	Createdtry searching previously loaded modulesWouldn't a solution more consistent with the dlopen() pathbe to remove NSLINKMODULE_OPTION_PRIVATE from gmodule-dyld.c:_g_module_open()?The dlopen() code always uses RTLD_GLOBAL.I believe I tried that, and that broke plug-ins where they export aknown symbol that the app looks up in them, ie. a g_frob_plugin_init()function.I have a hard time giving a good answer here about whatis right because: - The behavior differs significantly from operating system to operating system already - The presence of RTLD_GLOBAL in for dlopen() is basically a leftover of workarounds for bugs in GNU libc and libtool that were fixed years ago. (I'd love to be able to just get rid of it if we could) - The glade_xml_autoconnect() usage you mention is a bit weird, but I don't have a good alternative; something like: glade_xml_autoconnect_module (xml, g_module_current ()); would make sense, but portable implementation is close to impossible. GCC/GNU libc you can do it with __builtin_return_address() and dladdr()...So, that all being said, if you think this patch is the right thing to do, we should add it. But it seems to me thatthere should be a comment by the NSLINKMODULE_OPTION_PRIVATEusage that describes in particular what goes wrongthere ...hopefully more specifically than "somethingbroke" Does NSSymbolInModule not work on globally loaded modules? Can you not have two globally loaded modules with the same symbol? Or..?If you have Pango installed, you could check pretty easilyby removing the PRIVATE flag, making install, thenrunning pango-querymodules. And a comment here that references that and describes what we are doing. I think there is a definite need toleave a breadcrumb trail for the next person who touchesthis code.Right. If you don't use NSLINKMODULE_OPTION_PRIVATE, thenif any two modules define the same non-static symbol as each otheror as the main program, then it the linker aborts immediately upontrying to open the module. So module-test will fail because of thethree g_clash_func()s (and evolution would fail because of thecamel_provider_init() in each camel module).Coincidentally, this bug just came up on a NetBSD list yesterday. Itlooks like NetBSD doesn't implement RTLD_GLOBAL to mean the samething as it does on Linux. Dunno about the other BSDs.If the use of RTLD_GLOBAL is a bug, then getting rid of it wouldbe a Good Thing, because it would prevent the bug discussed infrom ocurring.We are still applying this patch downstream on Gentoo, but no idea about its status now with glib-2.32 (it still applies but I don't have a bsd system to check if it's really needed)(In reply to)Wow, blast from the past. So you're applying a patch for the MacOS X backend for Gentoo? Do you guys have like any idea what you're doing at all?We are applying a different one due:this is the patch:(In reply to)Any notes about this patch?	10.0	id=107626	20	False	False	otaylor	1
id=594287	REOPENED	at-spi	registry	unspecified	Other Linux	Normal normal	At-spi maintainer(s)	2009-09-06 03:11 UTC by	Matthias Clasen	2013-08-14 10:03 UTC (	1 user	Originally filed here:Core was generated by `/usr/libexec/at-spi-registryd'.Program terminated with signal 6, Aborted.	*** This bug has been marked as a duplicate of***[Resetting QA Contact to newly introduced "". Reason: So far it was impossible to watch changes in at-spi bug reports without following all the specific persons (Li Yuan, Bill Haneman, Jeff Wai, ...) and also their activity outside of at-spi reports.IMPORTANT: Anyone interested in following all bug activity (including all maintainers) must watch the "" dummy user by adding it to the 'Users to watch' list under Preferences->Email preferences. This is also the default procedure nowadays in GNOME when setting up new products.][Mass-resetting default assignee, see. Please reclaim this bug report by setting the assignee to yourself if you still plan to work on this. Thanks!]	3.0	id=735341	15	False	False	mclasen	1
id=750190	REOPENED	damned-lies	l10n.gnome.org	unspecified	Other All	Normal normal	damned-lies Maintainer(s)	2015-05-31 21:29 UTC by	Duarte "HappyGuy" Loreto	2017-02-02 18:56 UTC (	1 user	Tried to add a new translation for the above mentioned module. Get this error when submitting:"An error occurred during applying your action: The commit failed. The error was: '[Errno 1] remote: translations user cannot modify 'video-subtitles/gnome316/po/LINGUAS' To ssh://git.gnome.org/git/video-subtitles ! [remote rejected] master -> master (pre-receive hook declined) error: failed to push some refs to 'ssh://git.gnome.org/git/video-subtitles' '"ThanksDuarte	This is not a bug. As the message is telling you, Damned lies doesn't support adding new translations to the git repository, only updating existing ones. You'll have to push to the git repository manually.Since:1) damn-lies allows adding new translations to most modules and2) the problem is with the user used by the application not having permissions to write to a specific path (that is non-standard)I disagree with your quick dismissal of this issue as "not a bug".You may say that "For security reasons we don't want to grant access to that user to the specific path".You may say that allowing commits to non-standard paths requires an implementation and no one is available to do it.But it is not right to say "Damned lies doesn't support adding new translations to the git repository".***has been marked as a duplicate of this bug. ***	3.0	id=758065	26	False	False	Lous1935	1
id=735341	REOPENED	gtk+	Widget: GtkTextView	3.13.x	Other All	Normal normal		2014-08-24 21:24 UTC by	Sébastien Wilmet	2017-01-25 10:25 UTC (	2 users	Asshows, it would be nice to make gtk_text_buffer_get_iter_at_line_index() a bit nicer in case of an invalid index, instead of crashing.A warning could be printed, or the function could have a boolean return value indicating whether the exact position has been found.In any case the function should return the iter at the end of the line. Or the end iter if the line number is greater than the total number of lines.This applies to the other related functions in GtkTextBuffer, like gtk_text_buffer_get_iter_at_line_offset().Also, gtk_text_buffer_get_iter_at_line() has a related bug when the line_number is too big, it should return the end iter in this case, but if the last line of the buffer is not empty, it returns the iter at offset 0 of this last line, instead of the end of the last line.	Since there is now an API freeze, I propose to first add a warning message, and for the next development cycle add a boolean return value without the warning.I agree a boolean return would be nice for all get_iter functions that may fail to return a valid iter.Createdtextbuffer: nicer get_iter functionsAvoid crashes when passing an invalid location to agtk_text_buffer_get_iter_at_*() function.A boolean is returned to know if @iter has been set to the exactlocation.Unit tests are added.Createdinspector: remove gtk_text_buffer_get_iter_at_line_index() workaroundThe function is now safe to use.Review of:Loooks goodpushed as- textbuffer: nicer get_iter functionspushed as- inspector: remove gtk_text_buffer_get_iter_at_line_index() workaroundThanks for the review!(the second commit was trivial, so I've assumed it was also accepted).Sadly, I had to revert this - it broke both the python and javascript bindings by making the function return a [boolean, iter] tuple. Back to the drawing board.Createdtextbuffer: nicer get_iter functions, without return valuesAvoid crashes when passing an invalid location to agtk_text_buffer_get_iter_at_*() function.A first attempt added boolean return values to know if @iter has been set tothe exact location, but it breaks Python and JS bindings because the outparameter is already a return value in those languages.Unit tests are added.Review of:okpushed as- textbuffer: nicer get_iter functions, without return values(In reply to Matthias Clasen from)Reopening, for GTK+ 4 we can break the API. I'll attach a patch to add back the boolean return values.Createdtextbuffer: nicer get_iter functions, with return valuesHistory:1. commitNicer get_iter functions, *with* the boolean return values.2. commitRevert first commit because it broke Python and JS bindings. The out GtkTextIter param is already returned as the function return value, so by adding the boolean return value, a tuple is returned instead.3. commitNicer get_iter functions, *without* the boolean return values.Now: add back the boolean return values, it makes the functions moreconvenient to use. Example use-case: implement "goto line" in a texteditor, and show error feedback in the GtkEntry if the exact locationdidn't exist.Also, adapt the unit tests to check the return values.This commit is basically a revert of the last two commits listed above.Ping. Can I have a review of the above patch?Maybe I should also add a paragraph to the porting guide?	14.0	id=774480	10	False	False	slomo	1
id=774480	REOPENED	GStreamer	gst-editing-services	unspecified	Other All	Normal normal	GStreamer Maintainers	2016-11-15 15:57 UTC by	Sebastian Dröge (slomo)	2016-11-18 10:47 UTC (	2 users	See commit message	Creatednlecomposition: Start task and initialize the stack after chaining up to parent's change state functionOtherwise we could set the state of the children to PAUSED already (i.e.start dataflow) from the composition's task, while the compositionitself is currently chaining up to the parent class' change statefunction and did not activate the pads yet. This causes buffers andevents to be discarded, and everything to stop with a not-negotiatederror.The other change state functions in nle/ges should also be reviewed. E.g.: should commit/prepare in nleobject be called *before* the parent's change state function as they are now, or rather afterwards?Creatednlecomposition: Start task and initialize the stack after chaining up to parent's change state functionOtherwise we could set the state of the children to PAUSED already (i.e.start dataflow) from the composition's task, while the compositionitself is currently chaining up to the parent class' change statefunction and did not activate the pads yet. This causes buffers andevents to be discarded, and everything to stop with a not-negotiatederror.Creatednleobject: Start up in NULL->READY->PAUSED after the parent class didThis keeps everything in a more consistent order and makes sure that thebase class is already set up completely before we start doing anything.It also prevents from doing any setup if the base class fails, andpossibly not shutting things down again then.Bug can be reproduced by existing unit tests, when just adding a e.g. 1s sleep after the _initialize_stack_func action is scheduled. Then it will execute first before chaining up to the parent class' change_state func.pushed as- nlecomposition: Start task and initialize the stack after chaining up to parent's change state functionpushed as- nleobject: Start up in NULL->READY->PAUSED after the parent class didActually:Problem here seems to be that for some reason elements are in PAUSED but not moving to PLAYING. Unclear where this comes from with the above patches.My guess is that the child state handling needs a proper review and cleanup. Will check what happens if I can reproduce it somehow (the tests did not fail for me, let's try gst-validate later).	9.0	id=624405	4	False	False	stephane.maniaci	1
id=689754	REOPENED	GnuCash	Budgets	2.4.11	Other Windows	Normal normal	Chris Shoemaker	2012-12-06 04:07 UTC by		2017-01-14 11:58 UTC (	2 users	The liabilities amounts on the budget balance sheet are reversed. Compare this to the actual balance sheet.For example:1. Let's say I have a liability account of $2,400.2. Run the normal balance sheet report and you will see $2,400 under the liabilities section.3. Make a payment of $100 to that liability account. (The checking account decreases by $100 [a withdraw] and the liability account decreases by $100 [a decrease in liability]).4. Re-run the normal balance sheet report and you will see $2,300 under the liabilities section.5. Now create a budget for 1 year in 12 month intervals.6. Enter into the budget a payment of $100 to that liability account for all 12 months. (This is entered as -100 in the account, because you are decreasing the liability).7. Run the budget balance sheet and you will see that the new liabilities field shows an increase of $1,200 in liabilities. This is wrong. It should actually be a decrease of $1,200 in liabilities.	This looks like a user error to me, but I've never user the budget function in anger.If anyone still thinks this is a bug then please reopen it.Mike, like you I never use the budget function. However there are known issues with signs in that code. Perhaps this report points at one of them. It think we should carefully investigate this before closing.	2.0	id=763802	6	False	False	jimmac	1
id=763802	REOPENED	gtk+	Themes	3.19.x	Other Linux	Normal normal		2016-03-17 10:34 UTC by	Arnaud B.	2016-03-26 10:42 UTC (	3 users	CreatedScreenshot.Using HighContrastInverse theme, the “ON” (or “1”) is for now written white on lightgrey, so hardly readable. Like with the HighContrast theme, the “ON” and the “OFF” (or “1” and “0”) should be of opposite color.	CreatedHigh Contrast Inverse: switches- make sure both non active and active states are contrastypushed as- High Contrast Inverse: switchesI reopen, as I think that patch in fact broke both HighContrast and HighContrastInverse. GtkSwitch is not a simple toggle: it gives two informations, one about the state requested by the user (given by the position of the slider), and one about the underlying state (that should be given by the background color). Here, the background finishes with the same color whatever the underlying state is, so an information is missing.	3.0	id=689754	7	False	False	a9016009	1
id=510204	REOPENED	gtk+	.General	2.18.x	Other All	Normal normal		2008-01-17 15:44 UTC by	Oxmosys	2013-02-17 23:13 UTC (	4 users	Please describe the problem:when using clipboard to copy some text from GIMP under Linux, the text stored in the clipboard will be erased if I close GIMP. A lot of programs does have that bug right now and this is due to a recent change in the Freedesktop Clipboard Manager specification which you can find here :Steps to reproduce:1. Open GIMP and a new template2. Type some text and copy that text in the clipboard3. Try to paste that text in a word editor, it works4. Close GIMP and try to paste again the same text in a word editorActual results:Nothing is pasted.Expected results:The clipboard should still contain the copied text and paste should be successful.Does this happen every time?YesOther information:Linux Ubuntu Hardy 8.04 Alpha 3GIMP : 2.4.2-1ubuntu2	Please file this against GTK+ then.Moving to gtk (yes, the problem is still there: it is present in gimp, gnucash, gedit - if any running instance is killed - and is apparently general).If this is really a gtk+ problem, the bugis a duplicate... but I'd like a confirmation of that (if I had to bet a dollar, I would say that since Firefox solved that -- it is _not_ a gtk problem...)There is a mistake in your last comment : this bug does not appear in gedit.And it does not appear in most, if not all GNOME apps : vinagre, gcalctool.Does these apps rely on GTK+ ?I don't think I'm mistaken:- open any file in gedit- copy some text- open a terminal- type "killall gedit"- press Ctrl+Shift+V (paste)nothing appears...Thought the bug is certainly not critical - users don't tipically "killall gedit" - I guess this is still not the behaviour developers would expect.vinagre, gcalctool and all gnome apps rely on gtk+ libraries, yes.... but you're right, this does not affect all gtk programs. Still, before creating separate bugs for gedit, gimp & maybe others I'd like to know the opinion of some developer.That is just not how the clipboard manager support in gtk and gnome works.If you kill the clipboard owner in that way, it has no chance to transfer the clipboard contents to the clipboard manager. It'll work if you exit gedit regularly.OK, my fault, let's say the bug can't be reproduced in gedit, but it certainly exists in the gimp and in gnucash (regularly exiting).Matthias, can you confirm that it's a app-specific bug?I just tested in GIMP 2.6.8 in Ubuntu Lucid, and GIMP works for graphics but loses copied text on application quit (not killall). You can find more information about this bug at***has been marked as a duplicate of this bug. ***	9.0	id=752242	10	False	False	cosimo.cecchi	1
id=624405	REOPENED	ease	general	git master	Other Linux	Normal normal		2010-07-15 00:04 UTC by	Stéphane Maniaci	2010-07-20 03:44 UTC (	2 users	Something is wrong with the WelcomeWindow code. The Clutter warning happens at the line show_all (), in the WelcomeWindow constructor. It might be a Clutter issue also.	According to the Clutter devs, it comes from the graphics drivers. Strange that it doesn't happen with a Clutter hello-world. I've looked up in Google, some says it's Compiz, some Metacity, so I don't think it's our problem. Marking as Invalid.I think I have some news on this. My clutter-gtk is messed up, and even after re-installation billion of times, I can't run a demo program with GtkClutter.init (). However, Ease still compiles and runs fine, so I tried to figure this out in Ease code and found out that Gtk and Clutter are initialized seperately ; this also makes my demo code runs, to the cost of that "Unable to make the current stage GLX drawable" warning. So this is due to Gtk + Clutter inits.Workaround : export CLUTTER_VBLANK=noneshould solve the GtkClutter problems. We should still use in the code to avoid the warning.	3.0	id=740101	13	False	False	dam	1
id=752242	REOPENED	gtk+	Widget: Other	unspecified	Other All	Normal normal		2015-07-10 18:10 UTC by	Jasper St. Pierre (not reading bugmail)	2016-02-21 05:57 UTC (	3 users	See patch. This is useful for some applications we're building at Endless.	Createdgtkflowbox: Add an API to hide uneven rowsFor UIs that do "infinite scrolling" or similar, it can be helpful tohide rows that are uneven, so users don't feel like they're scrolling tothe end of a set when there are in fact more records below.Add this functionality.Review of:I am wondering whether it wouldn't be better to invert the polarity of the API; so it would be gtk_flow_box_set_show_uneven_rows() defaulting to TRUE.Also the name is quite verbose; we typically use the term "homogeneous" for similar concepts in GTK. I would welcome other people's feedback on the API.::: gtk/gtkflowbox.c@@ +3770,3 @@+ * of children, it will be hidden if this property is set to %TRUE.+ * This can be useful to make UIs that load contents on-demand,+ * so an incomplete row never appears to the user.Missing Since: here(In reply to Cosimo Cecchi from)We already have a "homogeneous" property in GtkFlowBox -- it determines whether every item gets a consistent size. Which is what I think it means everywhere else. What this is is, I have 8 items, laid out like this: * * * * * * * *This property simply allows you to cut off that last row if it's not a full row of children, so we'll have: * * * * * *And simply never display the last two children, until you either add another child, which rounds out the row, or unset the property if you're at the end of your result set.(In reply to Jasper St. Pierre from)I understand what this property does, and how it is different from the "homogeneous" property of GtkFlowBox itself.My point is that we typically use the term "homogeneous" to refer to things that have the same size (see e.g. "row-homogeneous" in GtkGrid), and not the term "even".Createdgtkflowbox: Add an API to hide incomplete linesFor UIs that do "infinite scrolling" or similar, it can be helpful tohide rows that are uneven, so users don't feel like they're scrolling tothe end of a set when there are in fact more records below.Add this functionality.I can see why you want something like this, but it seems a bit ugly.Normally, visibility of children is controlled by the app, not by GtkFlowBox.But you are not even changing visibility here, you're simply not allocating them ?What happens if you are really at the end ? Last row never shown ?Yes. An application would have to carefully control things so that when it is really at the end of its results set, it turns off that property.It's difficult for the application to control this, since it doesn't know how many widgets would fit on the grid -- it would have to basically connect to size-allocate itself and do the same calculations and twiddle visibility (or perhaps it could walk the flow box children itself and count how many children before the "y" of an allocation changes).I could call gtk_widget_set_child_visible as well inside gtkflowbox.c, I just chose not to, since I thought not allocating them would be enough.I still not sure how this can work in the majority of cases. What happens if you start to scroll up again ? how do you avoid reflow due to not hitting the previous line beginnings exactly ?I think you really want a model-view approach here, instead of hacksUh, I don't know what you mean by that. Why would scrolling cause a reflow?Model-view doesn't help us, since this is strictly related to the view side of things.as said on irc, it would seem less hacky to me to expose the current number of children-per-row, and then your application can simply make sure that it hides the last children until the number of visible children is divisible by that.I realized that I actually can't do that -- I'd have to connect to size-allocate to handle the case when resizing the widget, and from the size-allocate handler, call gtk_widget_set_child_visible on the unhidden children, but get_preferred_width / height would still be wrong, making a scrollbar show an extra row.Any update here? I've fiddled around a lot more and have failed to come up with something that didn't require patching GtkFlowBox, so I'm convinced this is the best strategy.I think I can overcome my opposition to this, but here are a few issues to sort out first:- The name of the property should be clearer. It doesn't hide 'lines', only the last line is ever affected, so I would prefer something like ::force-rectangular or ::hide-incomplete-last-line.- The documentation should make it clear that it is the applications responsibility to unset this property when no more data is expected, since otherwise the last items may stay hidden forever.- Can we add a testcase for this somewhere ? the background list in widget-factory might be suitable.- Have you tested that this works as expected with filtering, sorting and resizing ?Please reopen if you still want this apiI do. I just have had no time to update this.	15.0	id=510204	20	False	False	sven	1
id=776116	REOPENED	gnome-shell	message-tray	3.22.x	Other Linux	Normal normal		2016-12-14 23:32 UTC by	Nate Graham	2016-12-22 10:35 UTC (	3 users	Calendar notifications are only useful if they persist on screen and force you to notice them and explicitly dismiss them. Otherwise you can very easily miss them if you happened to be looking away, or in the bathroom, or your computer was asleep when the notification came in.	I don't see why calendar notifications are special. How are they any more important than other notifications?The consequences to missing a calendar notification can be much more severe than missing another notification. I missed an appointment yesterday because a calendar notification came in while I was in the bathroom for 30 seconds. Had it stayed on screen, I would have seen it when I returned.FWIW, calendar notifications are sticky in macOS for just this reason; most aren't, but calendar notifications are special.Did you really intend to mark this as RESOLVED FIXED?Oops, I did not!(In reply to Nate Graham from)It is possible for applications to set a notification as urgent, in which case they have to been explicitly dismissed. If it is the case that calendar notifications should be treated in this way, then this is a bug with the calendar app itself....Theoretically, this shouldn't have happened - notifications don't hide until you interact with the computer, precisely so you do notice them if you leave the machine for a short while. Do you have any idea what went wrong?(In reply to Nate Graham from)Mmh, that is odd because notifications are not supposed to time out while there is no user activity. So unless some cat or toddler is involved, this sounds like a bug that affects all notifications.If on the other hand you really think that calendar notifications should be treated differently, then it's up to the calendar application to make it urgent - gnome-shell doesn't really know whether a notification is an appointment or not (other than keeping a list of calendar applications and checking whether a notification was requested from one of them) ...Oh, I think I know what happened. I put the computer into suspend when I left, to lock the screen. Upon returning, I hit a few keys on the keyboard to wake it up, then entered my password, then hit the enter key. This probably counts as "interacting with the computer" and resulted in the notification disappearing while I was still at the lock screen, before I could see it.Should we track that bug here?I've filed a request for gnome-calendar to treat event alarms as urgent:Also, I do have a toddler and a baby... ;)(In reply to Nate Graham from)...The lock screen is supposed to display notifications that have arrived while the screen is locked. One issue that might have occurred in this case is that, if you start typing your password while the screen is blanked, the screen shield raises as soon as you start typing, and you never get to see the notifications.Yes, that's probably what happened. I didn't start typing my actual password, I just banged randomly on the keyboard. And yeah, the actual lock screen is visible for only a moment before is slides up and reveals the password field.Perhaps any notifications that arrived while the screen was locked should automatically become urgent/sticky to ensure that the user gets the chance to see them.(In reply to Nate Graham from)...Thanks. I'm renaming the bug to reflect this. The special treatment of calendar notifications can be handled in.	11.0	id=776116	10	False	False	pointedstick	1
id=740101	REOPENED	GStreamer	gst-plugins-bad	1.4.4	Other other	Normal normal	GStreamer Maintainers	2014-11-14 03:14 UTC by	Jonas Larsson	2017-02-13 03:21 UTC (	4 users	Createdgst logsEnvironment: Google Nexus 9, Android 5.0 (L), non custom factory image, official 1.4.4 Android debug binariesApp: Unmodified gst sdk tutorial 5Error description:Tested out the latest Android binaries for kicks, fail to play back lots of streams.11-13 17:33:16.110 5481 5773 D GStreamer+amcaudiodec: 0:26:00.482850462 0xab9894f0 gstamcaudiodec.c:775:gst_amc_audio_dec_set_format:<amcaudiodec-omxgoogleaacdecoder2> Setting new caps audio/mpeg, framed=(boolean)true, mpegversion=(int)4, level=(string)1, base-profile=(string)lc, profile=(string)lc, rate=(int)24000, channels=(int)2, stream-format=(string)adts11-13 17:33:16.110 5481 5773 D GStreamer+amcaudiodec: 0:26:00.482993212 0xab9894f0 gstamcaudiodec.c:891:gst_amc_audio_dec_set_format:<amcaudiodec-omxgoogleaacdecoder2> Configuring codec with format: {channel-count=2, mime=audio/mp4a-latm, sample-rate=24000}11-13 17:33:16.118 5481 5777 E SoftAAC2: first buffer should have OMX_BUFFERFLAG_CODECCONFIG set11-13 17:33:16.118 5481 5777 W SoftAAC2: aacDecoder_ConfigRaw decoderErr = 0x200311-13 17:33:16.118 5481 5776 E ACodec : [OMX.google.aac.decoder] ERROR(0x80001001)11-13 17:33:16.121 5481 5779 E GStreamer+amcaudiodec: 0:26:00.494109128 0xab7cb000 gstamcaudiodec.c:476:gst_amc_audio_dec_loop:<amcaudiodec-omxgoogleaacdecoder2> Failure dequeueing output buffer11-13 17:33:16.121 5481 5779 W GStreamer+amcaudiodec: 0:26:00.494204545 0xab7cb000 gstamcaudiodec.c:590:gst_amc_audio_dec_loop:<amcaudiodec-omxgoogleaacdecoder2> error: Failed to dequeue output buffer: java.lang.IllegalStateExceptionMore complete log and media sample attached.It appears that amcaudiodec advertises support for AAC in adts format. aacparse isn't producing any "codec_data" or "stream_header" so no "csd-0" parameter is set. Furthermore, the equivalent ofmediaFormat.setInteger(MediaFormat.KEY_IS_ADTS, 1); isn't done either. MediaCodec therefore assumes raw AAC and expects the first buffer to contain ESDS and have the flag MediaCodec.BUFFER_FLAG_CODEC_CONFIG set. When that's not the case, this error is thrown.adts AAC streams are quite common so a bug like this is a blocker for broader adoption on Android (as is #731204)A workaround is to compile in faad which works perfectly.(This is based on a one time reading of the code and logs, once I figure out how to actually build gst for android without cerbero failing left and right on my 64 bit system looking for 32 bit libs I *may* be able to offer more insight)	CreatedSample media file experiencing this issueAny news on this ? All of my streams are encountering this issue on Android.***has been marked as a duplicate of this bug. ***We're not using BUFFER_FLAG_CODEC_CONFIG anywhere currently, but this here looks like it is needed here.So multiple things1) we should set KEY_IS_ADTS to 1 if the input is ADTS2) for raw AAC we have codec_data and need to put that into the "csd-0", and I assume in that case BUFFER_FLAG_CODEC_CONFIG is not needed?For 1), that should be trivial to fix. Taking a short look nowCreatedamcaudiodec: Set "is-adts" to 1 for ADTS AACOtherwise it fails to decode.Createdamcaudiodec: Set "is-adts" to 1 for ADTS AACOtherwise it fails to decode.Createdamcaudiodec: Set "is-adts" to 1 for ADTS AACOtherwise it fails to decode.pushed as- amcaudiodec: Set "is-adts" to 1 for ADTS AACI still have the same problem even with this fix for playing the HLS apple test stream:12-22 16:41:05.192 14069 14102 I OMXClient: Using client-side OMX mux.12-22 16:41:05.197 14069 14102 E OMXMaster: A component of name 'OMX.qcom.audio.decoder.aac' already exists, ignoring this one.12-22 16:41:05.203 14069 14100 W GStreamer+amcaudiodec: 0:00:00.695035781 0xdd092e60 gstamcaudiodec.c:898:gst_amc_audio_dec_set_format skip forcing aac lc12-22 16:41:05.225 14069 14101 E libEGL : validate_display:255 error 3008 (EGL_BAD_DISPLAY)12-22 16:41:05.238 14069 14103 E SoftAAC2: first buffer should have OMX_BUFFERFLAG_CODECCONFIG set12-22 16:41:05.238 14069 14103 W SoftAAC2: aacDecoder_ConfigRaw decoderErr = 0x200312-22 16:41:05.238 14069 14102 E ACodec : [OMX.google.aac.decoder] ERROR(0x80001001)12-22 16:41:05.238 14069 14102 E ACodec : signalError(omxError 0x80001001, internalError -2147483648)12-22 16:41:05.238 14069 14102 E MediaCodec: Codec reported err 0x80001001, actionCode 0, while in state 612-22 16:41:05.239 14069 14100 W GStreamer+amcaudiodec: 0:00:00.730825312 0xdd092e60 gstamcaudiodec.c:1244:gst_amc_audio_dec_handle_frame:<amcaudiodec-omxgoogleaacdecoder0> error: Failed to call Java method: java.lang.IllegalStateException12-22 16:41:05.239 14069 14100 W GStreamer+amcaudiodec: java.lang.IllegalStateException12-22 16:41:05.239 14069 14100 W GStreamer+amcaudiodec: at android.media.MediaCodec.native_queueInputBuffer(Native Method)12-22 16:41:05.239 14069 14100 W GStreamer+amcaudiodec: at android.media.MediaCodec.queueInputBuffer(MediaCodec.java:2165)12-22 16:41:05.239 14069 14100 W GStreamer+amcaudiodec:12-22 16:41:05.239 14069 14100 W GStreamer+audiodecoder: 0:00:00.730882812 0xdd092e60 gstaudiodecoder.c:3047:_gst_audio_decoder_error:<amcaudiodec-omxgoogleaacdecoder0> error: Failed to call Java method: java.lang.IllegalStateException12-22 16:41:05.239 14069 14100 W GStreamer+audiodecoder: java.lang.IllegalStateException12-22 16:41:05.239 14069 14100 W GStreamer+audiodecoder: at android.media.MediaCodec.native_queueInputBuffer(Native Method)12-22 16:41:05.239 14069 14100 W GStreamer+audiodecoder: at android.media.MediaCodec.queueInputBuffer(MediaCodec.java:2165)12-22 16:41:05.239 14069 14100 W GStreamer+audiodecoder:12-22 16:41:05.239 14069 14105 E GStreamer+amcaudiodec: 0:00:00.730943906 0xdc5f2320 gstamcaudiodec.c:477:gst_amc_audio_dec_loop:<amcaudiodec-omxgoogleaacdecoder0> Failure dequeueing output buffer12-22 16:41:05.239 14069 14105 W GStreamer+amcaudiodec: 0:00:00.730979583 0xdc5f2320 gstamcaudiodec.c:614:gst_amc_audio_dec_loop:<amcaudiodec-omxgoogleaacdecoder0> error: Failedto call Java method: java.lang.IllegalStateExceptionOk, can you confirm that is-adts is actually set in the MediaFormat for you? If you set GST_DEBUG to amcaudiodec:6, you should see a line saying: "Configuring codec with format: ..."12-23 13:40:33.763 31286 31331 D GStreamer+amcaudiodec: 0:00:01.855872499 0xdc626260 gstamcaudiodec.c:828:gst_amc_audio_dec_set_format:<amcaudiodec-omxgoogleaacdecoder0> Settingnew caps audio/mpeg, framed=(boolean)true, mpegversion=(int)4, level=(string)1, base-profile=(string)lc, profile=(string)lc, rate=(int)22050, channels=(int)1, stream-format=(str$ng)adts12-23 13:40:33.763 31286 31331 W GStreamer+amcaudiodec: 0:00:01.856183176 0xdc626260 gstamcaudiodec.c:896:gst_amc_audio_dec_set_format setting is-adts12-23 13:40:33.763 31286 31331 D GStreamer+amcaudiodec: 0:00:01.856344478 0xdc626260 gstamcaudiodec.c:965:gst_amc_audio_dec_set_format:<amcaudiodec-omxgoogleaacdecoder0> Configuring codec with format: {is-adts=1, channel-count=1, mime=audio/mp4a-latm, sample-rate=22050}12-23 13:40:33.767 31286 31339 I OMXClient: Using client-side OMX mux.12-23 13:40:33.770 31286 31340 D GStreamer+amcaudiodec: 0:00:01.863462030 0xdc649f20 gstamcaudiodec.c:424:gst_amc_audio_dec_loop:<amcaudiodec-omxgoogleaacdecoder0> Waiting for a$ailable output buffer12-23 13:40:33.771 26175 26280 I OMX-VDEC-1080P: Video slvp perflock acquired12-23 13:40:33.771 31286 31331 D GStreamer+amcaudiodec: 0:00:01.864661510 0xdc626260 gstamcaudiodec.c:1070:gst_amc_audio_dec_handle_frame:<amcaudiodec-omxgoogleaacdecoder0> Hand$ing frame12-23 13:40:33.774 31286 31331 D GStreamer+amcaudiodec: 0:00:01.867306562 0xdc626260 gstamcaudiodec.c:1190:gst_amc_audio_dec_handle_frame:<amcaudiodec-omxgoogleaacdecoder0> Queu$ing buffer 0: size 11 time 26666 flags 0x0000000112-23 13:40:33.775 31286 31334 E SoftAAC2: first buffer should have OMX_BUFFERFLAG_CODECCONFIG set12-23 13:40:33.775 31286 31334 W SoftAAC2: aacDecoder_ConfigRaw decoderErr = 0x200312-23 13:40:33.776 31286 31333 E ACodec : [OMX.google.aac.decoder] ERROR(0x80001001)12-23 13:40:33.776 31286 31331 D GStreamer+amcaudiodec: 0:00:01.868825572 0xdc626260 gstamcaudiodec.c:1070:gst_amc_audio_dec_handle_frame:<amcaudiodec-omxgoogleaacdecoder0> Hand$ing frame12-23 13:40:33.776 31286 31333 E ACodec : signalError(omxError 0x80001001, internalError -2147483648)12-23 13:40:33.776 31286 31333 E MediaCodec: Codec reported err 0x80001001, actionCode 0, while in state 6Seems like a bug in the codec then, should check if we can somehow work around that.I think I traced it back to that function call:The E SoftAAC2: first buffer should have OMX_BUFFERFLAG_CODECCONFIG set is in fact the SoftAAC2 codec setting the flag by itself on first input buffer, the next trace, SoftAAC2: aacDecoder_ConfigRaw decoderErr = 0x2003isreturning one of the TRANSPORTDEC_UNSUPPORTED_FORMATAnother clue might be that inWith gstreamer, we see the error trace at line 517. When trying to play the same bipbop stream with ExoPlayer, the only trace I see is on line 748. So it seems that when calling SoftAAC2::onQueueFilled from gstreamer, the condition at line 509 is true, inQueue is not empty while for ExoPlayer, the inQueue is empty.I hope this may help...I got it working a bit better with this:What I did is adding this in the set format function: guint8 test[] = { 0x12, 0x12 }; gst_amc_format_set_buffer (format, "csd-0", test, 2, &err);After setting that, the stream starts without audio and it crashes a bit later, but at list that's a start.The problem here is that you pass in a stack allocated buffer. The buffer passed to the format must be valid as long as the format is. Try creating it in malloc'd memory and just leak it to see if that makes it work.However, for ADTS there is not really a out of band header. It should just parse that from the stream itself. Did you try setting the CODECCONFIG flag on the very first buffer for ADTS? Does that also work?Met the same problem with 1.11, and led me here.-----01-01 08:30:47.003 12045 12077 D [gstplayer.c:665] <gst-player> Set uri=...01-01 08:30:48.902 12045 12292 D [gstamcaudiodec.c:834] <amcaudiodec-nonpublic> Setting new caps audio/mpeg, framed=(boolean)true, mpegversion=(int)4, level=(string)4, base-profile=(string)lc, profile=(string)lc, rate=(int)48000, channels=(int)6, stream-format=(string)adts...01-01 08:30:48.966 12045 12299 E SoftAAC2: first buffer should have OMX_BUFFERFLAG_CODECCONFIG set01-01 08:30:48.966 12045 12299 W SoftAAC2: aacDecoder_ConfigRaw decoderErr = 0x2003...01-01 08:30:48.967 12045 12298 E ACodec : [OMX.google.aac.decoder] ERROR(0x80001001)01-01 08:30:48.967 12045 12298 E ACodec : signalError(omxError 0x80001001, internalError -2147483648)----After testing, OMX.google.aac.decoder compared to ffmpeg‘s audio decoder, stability and compatibility seems to be worse, so my temporary solution:--- a/sys/androidmedia/gstamc.c+++ b/sys/androidmedia/gstamc.c@@ -3308,7 +3308,7 @@ register_codecs (GstPlugin * plugin) g_str_has_suffix (codec_info->name, ".sw.dec")) { /* For video we prefer hardware codecs, for audio we prefer software * codecs. Hardware codecs don't make much sense for audio */- rank = is_video ? GST_RANK_SECONDARY : GST_RANK_PRIMARY;+ rank = is_video ? GST_RANK_SECONDARY : GST_RANK_NONE; } else if (g_str_has_prefix (codec_info->name, "OMX.Exynos.") && !is_video) { /* OMX.Exynos. audio codecs are existing on some devices like the--	17.0	id=133015	4	False	False	kmaraas	1
id=133015	REOPENED	libgnomeui	general	2.4.x	Other Linux	Normal normal	libgnomeui maintainers	2004-01-31 00:12 UTC by		2009-05-05 19:14 UTC (	0 users	/bin/bash ../libtool --mode=link cc -pthread -O2 -arch ev56 -olibgnomeui-2.la -rpath /software/@sys/usr/lib -version-info 400:0:400 -no-undefined -export-symbols-regex "^[^_].*"libgnomeui-access.lo gnometypebuiltins.lo gnome-about.lo gnome-app.lo gnome-app-helper.lo gnome-app-util.lo gnome-appbar.lognome-stock-icons.lo gnome-color-picker.lo gnome-dateedit.lo gnome-dialog.lo gnome-dialog-util.lo gnome-druid.lo gnome-druid-page.lognome-druid-page-edge.lo gnome-druid-page-standard.lo gnome-entry.lo gnome-file-entry.lo gnome-font-picker.lo gnome-gconf-ui.lognome-href.lo gnome-ice.lo gnome-marshal-main.lo gnome-messagebox.lo gnome-mdi.lo gnome-mdi-child.lognome-mdi-generic-child.lo gnome-mdi-session.lo gnome-pixmap.lo gnome-pixmap-entry.lo gnome-popup-menu.lo gnome-propertybox.lo gnome-scores.lognome-theme-parser.lo gnome-thumbnail.lo gnome-thumbnail-pixbuf-utils.lo gnome-ui-init.lo gnometypes.lo gnome-icon-entry.lognome-icon-item.lo gnome-icon-list.lo gnome-icon-lookup.lo gnome-icon-sel.lo gnome-icon-theme.lo gnome-vfs-util.lo gnome-window.lognome-window-icon.lo gnome-password-dialog.lo gnome-authentication-manager.lo gnome-client.lo -pthread -L/software/@sys/usr/lib-L/usr/local2/lib -L/usr/local/lib -L/usr/local2/openssl/lib -L/software/@sys/usr/freetype-2.1.4rc1/lib-L/usr/local/openssl/lib -lbonoboui-2 -lxml2 -lz -lgnomecanvas-2 -lgnome-2 -lart_lgpl_2 -lpangoft2-1.0 -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0-lgdk_pixbuf-2.0 -lpangox-1.0 -lbonobo-2 -lgnomevfs-2 -lbonobo-activation -lgconf-2 -lORBit-2 -lgthread-2.0 -lrt -lm -lpango-1.0-lgobject-2.0 -lgmodule-2.0 -lglib-2.0 -lintl -liconv -ljpeg -lSM -lICE -lpopt-L/software/@sys/usr/lib -L/usr/local2/lib -L/usr/local/lib -L/usr/local2/openssl/lib -L/software/@sys/usr/freetype-2.1.4rc1/libgenerating symbol list for `libgnomeui-2.la'<cut>/usr/bin/ld -shared -input .libs/libgnomeui-2.so.400.400.0.exp .libs/libgnomeui-access.o .libs/gnometypebuiltins.o .libs/gnome-about.o .libs/gnome-app.o .libs/gnome-app-helper.o.libs/gnome-app-util.o .libs/gnome-appbar.o .libs/gnome-stock-icons.o<cut>-L/software/@sys/usr/BerkeleyDB-3.3.11/lib -L/usr/afsws/lib/afs-L/usr/afsws/lib -L/software/@sys/usr/lib/glib-2.0 -L/software/@sys/usr/openssl/lib-L/usr/lib -L/software/@sys/usr/lib -L/usr/local2/lib -L/usr/local/lib -L/usr/local2/openssl/lib-L/software/@sys/usr/freetype-2.1.4rc1/lib -L/usr/local/openssl/lib/software/@sys/usr/lib/libbonoboui-2.so /software/@sys/usr/lib/libxml2.so -lz/software/@sys/usr/lib/libgnomecanvas-2.so /software/@sys/usr/lib/libgnome-2.so /software/@sys/usr/lib/libart_lgpl_2.so/software/@sys/usr/lib/libpangoft2-1.0.so /software/@sys/usr/lib/libgtk-x11-2.0.so /software/@sys/usr/lib/libgdk-x11-2.0.so/software/@sys/usr/lib/libatk-1.0.so /software/@sys/usr/lib/libgdk_pixbuf-2.0.so /software/@sys/usr/lib/libpangox-1.0.so/software/@sys/usr/lib/libbonobo-2.so /software/@sys/usr/lib/libgnomevfs-2.so /software/@sys/usr/lib/libbonobo-activation.so/software/@sys/usr/lib/libgconf-2.so /software/@sys/usr/lib/libORBit-2.so /software/@sys/usr/lib/libgthread-2.0.so -lrt-lm/software/@sys/usr/lib/libpango-1.0.so /software/@sys/usr/lib/libgobject-2.0.so/software/@sys/usr/lib/libgmodule-2.0.so/software/@sys/usr/lib/libglib-2.0.so/software/@sys/usr/lib/libintl.so /software/@sys/usr/lib/libiconv.so -ljpeg-lSM -lICE /software/@sys/usr/lib/libpopt.so -lc -soname libgnomeui-2.so.0 <cut>-update_registry .libs/so_locations -o .libs/libgnomeui-2.so.400.400.0/usr/bin/ld:Warning: Unresolved:__pthread_mutex_init__pthread_mutex_lock__pthread_mutex_unlockTo "fix" the probelm, with against -lpthread. Also, be sure CFLAGS=-pthreadis used.	Actually, the problem is caused by "-pthread" present in config.statusinstead of -lpthread on *LIBS lines:s,@LIBGNOMEUI_LIBS@,-pthread ...s,@LIBGNOMEUI_COMPONENTS_LIBS@,-pthread etc.Do you still see this problem?No response. Closing.Sorry, I don't have access to the machine anymore. And I am probably not much willing to compile all the required libs first to give this a shot on a new machine. Please, check your cvs and if you haven't fixed configure just add the "-lpthread" to LIBS while ripping out "-pthread" and push "-pthread" to CFLAGS as well.I can't find out where to change this. The thread stuff seems to be pulled in from some other component lower in the stack maybe?You have to make sure that if you are on OSF1 machine and if CFLAGS=-pthread then you have to force LIBS=-lpthread. It is in the generated config. status. So the configure.in or automake or autoconf related file has to be fixed at the best.I'll need help to get this fixed as I don't have any way to test/debug this without access to an OSF1 machine.Please hurry up, the freely available HP TestDrive will be shutdown by Sept 30.Go and make an account for yourself at.Didn't make it there in time :-/libgnomeui has been deprecated for some time now and is going away so I don't expect this to be fixed...As I have said, for this platform you had to ensure there is:CFLAGS="$CFLAGS -pthread"LIBS="$LIBS -lpthread"You don't need to test it anyway, I did that. And you can maybe still find on the internet manpages from this platform stating the same. ;-)	10.0	id=777705	10	False	False	florian.muellner	1
id=777705	REOPENED	polari	general	unspecified	Other Linux	Normal normal	Polari maintainers	2017-01-24 18:21 UTC by	Mario Sánchez Prada	2017-02-19 02:00 UTC (	2 users	[Disclaimer: I realize this might not be the perfect place to report this issue, but as there's no place so far to report problems with how flatpaks are built, and considering that in the long run ideally every app should "own" how flatpaks are built (i.e. maintaining their own JSON files) I thought this might be the least bad option]It is possible to install Polari flatpak from the GNOME flatpak repositories but when you try to run it it fails, which seems to be due to the lack of Telepathy's Mission Control component in our desktop (Endless OS), where this component is not available.Ideally, Polari's flatpak should be fixed so that it works independently of what's available in the host OS, other than the required runtime, having every single extra dependency that might be needed bundled along with the application. This would mean dealing with the issue with Telepathy, of course, being particularly interesting to bundle it as it seems likely that both Empathy and Telepathy will lose "momentum" over time.[1][2]	Forgot to mention, I was referring to the flatpak built from the gnome-apps-nightly repository [1], against the 3.22 runtime. Basically what you get in you currently install the "stable" GNOME Runtime [2]That's a known issue and we know we need to address this, but I don't think bugzilla is the right place. It's not a simple question of bundling mission-control and idle, as connection managers are DBus activated.So there are two options: - fix telepathy/idle to make it possible to bundle them - drop telepathy and use something else/do our ownWe want to go with the latter, but that's a major effort, and I don't think it helps tracking it in bugzilla before there's any actual code (it will likely end up spanning multiple bugs anyway).So unless you managed to bundle telepathy/idle and make it work (in which case I'll be happy to merge them as a short-term fix), it doesn't appear very useful to keep the report open.As long as it's a known issue I think it's fine to close this bug as invalid, a my purpose when filing it was to make sure that this was acknowledged as, sadly, I don't think I will have time to work myself on this at any time soon.Thanks for the prompt response, and for the clarification.Createdflatpak: Bundle mission-control/idleNow that we ask for full session bus access for the room list, we canjust as well use that access to run our own copies of mission-controland telepathy-idle in the case where those are not available on thehost.The plan is still to get rid of telepathy altogether, but the crude hack attached above should allow us to not depend on host services in the meantime.Oh! I agree this is a nasty hack but it's nice at the same time to have this alternative solution as a patch on top of the upstream code, and bundled all together in the same flatpak, so thanks a lot for doing that.FWIW, I reviewed the patch and it looks good to me, all things considered, but I'm not sure who should be the person reviewing this change, so take this as a comment, not a formal review.I guess my only question at this point would be... will you push the json file + the patch to the gnome-apps-nightly repository [1]? I know duplication is never a good thing, but pushing it there would mean having Polari installable without extra hassle from the "nightlies" repository, which should become the stable one as soon as we have a 3.24 runtime.[1]Review of:I am getting some trailing whitespace errors in this one, perhaps it's the included .patch file, though.::: org.gnome.Polari.json@@ +37,3 @@ "cflags": "-O2 -g" },+ "cleanup": ["/include","/libexec/telepathy-logger","/lib/*.la","/lib/*.a",So instead of cleanup "/libexec" the clean is performed on "/libexec/telepathy-logger" now? I dont understand this change in relation to the patch purpose, can you elaborate?(In reply to Bastian Ilsø from)Yes. Diff adds a 1-character column at the beginning to mark added(+), removed(-) and unchanged( ) lines. So an unchanged empty line is represented as a line with a trailing space, nothing we can do there :-)The telepathy-logger modules contains both the actual logger and a library to interact with it. We're only interested in the library, so we remove the logger during cleanup. As it used to be the only file installed in /libexec, we could just clean the whole directory, but now mission-control and telepathy-idle install their executables there as well.But now that I think about it, we should probably keep the logger executable as well and launch it manually as well if it's not available on the host ...Thanks for the explanation.I just tried completely removing polari, telepathy and telepathy-idle etc from my system to see if this works, but im running into this issue:(org.gnome.Polari:3): Gjs-WARNING **: JS ERROR: TelepathyGLib.Error: Protocol 'irc' not found on CM 'idle'ConnectionsList<._onRowActivated/<@resource:///org/gnome/Polari/js/connections.js:170:21main@resource:///org/gnome/Polari/js/main.js:46:5run@resource:///org/gnome/gjs/modules/package.js:192:25start@resource:///org/gnome/gjs/modules/package.js:176:5@<main>:1:146Note that I do see telepathy installed inside the flatpak here:/libexec/telepathy-idle/libexec/mission-control-5/libexec/telepathy-loggerany ideas?(In reply to Bastian Ilsø from)Hmm, are you sure about that? Those should be in /app/libexec/...Other than that, my only idea would be some of those uninstalled services still running in the session and getting somehow confused ...I installed the Builder nightly flatpak in a VM, and I think I figured it out - builder uses the flatpak manifest to build all modules *up to* the project itself, then builds the project from the local source checkout. In other words: The patch to start mission-control/idle is never applied, and so of course it's not working.Running "git am build-aux/flatpak/app-*" from the built-in terminal fixes it, but it means that this patch only works for the distributed flatpaks, not for doing flatpak-based polari hacking :-(I'll come up with an updated patch.Createdflatpak: Bundle mission-control/idleWe currently rely on various telepathy services to be available on thehost - namely mission-control, idle and telepathy-logger. GNOME's builtinchat integration means that mission-control and logger will likely beavailable on GNOME systems, but idle is rarely if ever included indefault installs - and of course for non-GNOME systems, all bets areoff anyway.To address that situation, bundle the required services in the sandbox.They won't be visible to DBus' StartServiceByName method, but we'lladd code to launch the demons as necessary in a follow-up patch.Createdapp: Manually launch telepathy demons if necessaryWhen running in a flatpak sandbox, we shouldn't rely on the requiredtelepathy services being available on the host; instead, detect thecase where they are missing and launch the bundled demons manually.	13.0	id=708830	8	False	False	drago01	1
id=708830	REOPENED	gnome-shell	search	unspecified	Other All	Normal normal		2013-09-26 11:24 UTC by	Giovanni Campagna	2016-01-26 16:29 UTC (	2 users	This is not for 3.10, it depends on new glib API in,but I was discussing this with Jasper and it came up in IRC againtoday.	CreatedRemoteSearch: don't autostart dbus search providers at loginUse the new glib flag that allows us to create the proxy immediatelybut only activate the service when making the first call.Review of:LG. Marking acn but it really means "commit after branching".pushed as- RemoteSearch: don't autostart dbus search providers at logindid this break at some point ? In 3.19, I see gnome-calendar, epiphany-search-provider and org.gnome.Characters.BackgroundService running right after login	4.0	id=652791	9	False	False	adborden	1
id=652791	REOPENED	tomboy	General	1.7.x	Other Linux	Normal normal	Tomboy Maintainers	2011-06-17 00:00 UTC by	Aaron D Borden	2011-12-20 03:41 UTC (	3 users	We shouldn't be jumping into dbus-sharp just yet. We've learned older distros (and some modern ones) don't have packages for dbus-sharp at the moment. We can make a configure option so distro's can choose the dbus bindings at configure time.	We should default to dbus-sharp, though, right?Yes, we should prefer dbus-sharp over ndesk-dbus, as the latter is unmaintained.I think this was committed in 5071d7902284617cf621022fc1a5de7062dddd0dNope, that commit predates the change from ndesk-dbus to dbus-sharp. This bug says that we should allow either of those as dependencies, instead of ditching ndesk-dbus completely for dbus-sharp.	4.0	id=720589	9	False	False	rosslagerwall	1
id=754431	REOPENED	glib	general	unspecified	Other Windows	Normal normal		2015-09-02 07:30 UTC by	Fan, Chun-wei	2016-06-07 04:53 UTC (	4 users	Hi,Commitintroduced the use of strerror_r() which is actually not available on Windows, which will then cause the build on Windows to break.We can just use strerror_s(), which does more or less the same thing and should be thread-safe.	Createdglib/gstrfuncs.c: Fix Build on WindowsHi,Please see the patch.With blessigs, thank you!Createdglib/gstrfuncs.c: Fix Build on WindowsHi,I was testing the patch against the old DLL, and the previous patch tried to use uninitialized memory, bad :|This is the correct patch.With blessings, thank you!Review of:Looks good to me.Hi Nacho,Thanks for the very quick reviews :)!The patch was pushed as.With blessings, thank you!strerror_s only exists in msvcrt.dll since Windows Server 2003 it seems, Windows XP does not have it.And in mingw only if you #define MINGW_HAS_SECURE_API? That seems weird.And if we wanted to compile for newer Windows, we run intoCreatedstrerror_s only with _MSC_VERI need this patch to compile with mingw which doesn't have strerror_s.mingw has it, but only if you #define MINGW_HAS_SECURE_API. See above :) In any case, something definitely needs some changes hereBut it is not defined after "./configure"Yes, someone will have to investigate what this MINGW_HAS_SECURE_API is about in mingw.mingw-w64-headers defines MINGW_HAS_SECURE_API (in _mingw.h) only if configured with --enable-secure-api, which is not the default. Debian and Fedora build MinGW-w64 with --enable-secure-api for both i686 and x86_64 targets, but Cygwin enables it only for the x86_64 target.I haven't found any documentation for MINGW_HAS_SECURE_API, so I had a look through the mingw-w64 repo. --enable-secure-api and MINGW_HAS_SECURE_API only affect whether the prototypes for the "security-enhanced" (_s) functions are exposed by the headers. AFAICT the macro is intended to be #defined by application code that is willing to require a newer msvcrt that includes those functions. --enable-secure-api was added later; the commit message doesn't say why, but I suspect it's to prevent newer applications (which may assume the secure functions are available) from having to individually add the #define.If it's okay for glib to depend on a post-XP msvcrt, I think the right fix is to #define MINGW_HAS_SECURE_API 1 before including system headers. If not, strerror_s can't be used.If I'm not mistaken, mingw will ship it's own implementation of those functions if they are not available in the target msvcrt.Yes, it seems you're right. The secapi polyfills were added to mingw-w64 starting in August 2012; strerror_s was added in March 2014. Do we care about supporting Windows XP via MSVC builds (or builds with older mingw, I guess)?(missing rand_s) was fixed by dropping the rand_s call from glib, even though mingw-w64 added a rand_s implementation in June 2013.MINGW_HAS_SECURE_API dates from October 2007, so I guess that macro is a historical artifact now.Hi Benjamin,(In reply to Benjamin Gilbert from)It is true that the general consensus from the maintainers' point of view would be to stop supporting Windows XP, as it reached end-of-life quite some time ago. For this bug specifically, on the MSVC side, is that the _s variants should be still supported on XP, as:-The MSVC builds supported are for MSVC 2008 and later, and it is known that at a recent stage there are people that were able to build GLib successfully on MSVC 2005.-The _s variants are supported since MSVC 2005, and they are supported in the CRT DLL that are shipped with the compilers, i.e. msvcrX0.dll, which should run on XP until MSVC 2012 (given that the XP support mode in MSVC 2012+ builds are not enabled).-We don't support at this time building against the Windows DDK officially, which would then link to msvcrt.dll.I can't say very much about the situation on MinGW or mingw-w64, sorry.With blessings.So it sounds as though we're okay on the MSVC side. Cygwin is now building both MinGW-w64 targets with --enable-secure-api (see), so unless there's a major distro that still isn't doing that, I think this can be closed?	17.0	id=778853	18	False	False	dboles	1
id=720589	REOPENED	gvfs	trash backend	git master	Other Linux	Normal normal	Allison Lortie (desrt)	2013-12-17 07:17 UTC by	Ross Lagerwall	2014-03-06 20:59 UTC (	3 users	Blocking operations should not use the try_ variants.	Createdtrash: Don't use try_ for blocking methodsDon't use the try_ variants of the GVfsBackend methods for methods thatcould block.Not sure about exact division to the try_ versions. Why do you think there shouldn't be the try_ versions? Does it cause problems somewhere?gvfsbackend.h:These try_ calls should be fast and non-blocking, scheduling the i/ooperations async (or on a thread) or reading from cache.The recent backend which is quite similar also using the try_ methods. The try_ methods are used also for cached results e.g. in the gphoto2 backend. I think the trash backend offering "cached" results from the disk, so is quite fast, or am I wrong?(In reply to)Well, as per the comment, try_ calls should not do i/o since they are executed as part of the main loop. Even doing local i/o, such as reading a block from disk can take some time, especially if the trash is on an nfs home directory.The recent backend is indeed similar and I am working on a patch to fix it too.While it probably doesn't cause any major problems in ordinary situations when using a local disk, the trash backend may hang if, for example, an nfs mount were to hang since the i/o operation is done as part of the main loop.Ok, you are right, so please do the patch also for the recent backend...Review of:It looks good.Thanks for the review. Pushed to master as 052682c8a22bf8d7c86fb0f086a119dd7fec4c6b.I have opened afor the recent backend.note sure if that's due to this change but Ubuntu started receiving sigabrt in gvfsd-trash since 1.19.4" g_assertion_message (domain=domain@entry=0x0, file=file@entry=0x804f806 "trashdir.c", line=line@entry=218, func=func@entry=0x804f9e8 <__FUNCTION__.22163> "trash_dir_watch", message=message@entry=0xb4905968 "assertion failed: (dir->monitor == NULL)") at /build/buildd/glib2.0-2.39.3/./glib/gtestutils.c:2352 g_assertion_message_expr (domain=domain@entry=0x0, file=file@entry=0x804f806 "trashdir.c", line=line@entry=218, func=func@entry=0x804f9e8 <__FUNCTION__.22163> "trash_dir_watch", expr=expr@entry=0x804f811 "dir->monitor == NULL") at /build/buildd/glib2.0-2.39.3/./glib/gtestutils.c:2367 trash_dir_watch (dir=0x9375920) at trashdir.c:218 trash_watcher_watch (watcher=0x936dda8) at trashwatcher.c:297 trash_backend_get_dir_monitor (backend=0x9370858, create=create@entry=1) at gvfsbackendtrash.c:80..."I've openedabout the issue from the previous commentYeah, it could well be... it's probably a race issue since the try_ version only allows one thread. I'll revert the change for now since it wasn't critical.Reopening since the patch was reverted so the original problem remains.	10.0	id=85715	81	True	False	otaylor	1
id=778853	REOPENED	gtk+	Widget: GtkScrolledWindow	unspecified	Other All	Normal normal		2017-02-17 17:49 UTC by	Daniel Boles	2017-02-23 19:19 UTC (	2 users	Createdtest caseIf using POLICY_AUTOMATIC with overlay-scrolling set to FALSE, the natural size passed along by propagate-natural-width and -height is too much, being overinflated by the size of the scrollbars on both dimensions.So, the window opens, we propagate the request for enough size for the child with no scrollbars - and THEN add size for the scrollbars on either side, even though they don't need to be shown (unless the window is shrunk) due to POLICY_AUTOMATIC.This makes these properties pretty broken for such cases. I had to implement a series of acrobatics to manually calculate the correct initial size for windows in my application, because I could not use propagate-natural-* due to this. (I turn off overlay-scrolling to make things less rage-inducing when using a tablet.)This should be fixed up so the correct size is requested. That is: when overlay-scrolling is disabled and using POLICY_AUTOMATIC, don't add the size of the scrollbars to the propagated natural size.test case attached, screenshot to follow	Createdscreenshot of test caseThere's a (very minimal...) unit test for scrolledwindow size requisition btw:CreatedScrolledWindow: Don’t req size for auto scrollbars(In reply to Timm Bäder from)Thanks. I patched it to also test permutations including overlay-scrolling == FALSE and policy == GTK_POLICY_AUTOMATIC. It fails on the first one!The attached patch......makes all 4 cases (overlay/fixed vs automatic/always) look correct to me.It also means that newly written tests for fixed/automatic and overlay/always scollbars pass OK. Howeever, the suite fails as soon as it reaches the fixed/always case. Presumably, the calculation for the expected result presumably needs updated to accommodate the omnipresent non-overlay scrollbars in such a permutation.typo:(In reply to Daniel Boles from)s/AUTOMATIC/ALWAYS/it initially failed on the min_content_width/fixed/automatic test:but as mentioned, the patch to gtkscrolledwindow.c lets it get further:I'll try to fix that up.Anyway, I think the main patch makes sense, so a review would be appreciated.Createdtestsuite/scrolledwindow—Test non-overlay/non-autoIt was only testing the default configuration where overlay-scrolling isTRUE and the policy is POLICY_AUTOMATIC. We should also test FALSE andPOLICY_ALWAYS. This commit adds those tests and makes the !overlay &&POLICY_ALWAYS case pass by excluding the size of the relevant scrollbar,as we are only interested in whether the content size is as requested.pushed as- testsuite/scrolledwindow—Test non-overlay/non-autoThis just makes sense, and refuses to break on any tests I could conjure up, so hopefully I'm right!This causes criticals in e.g. the gtk3-demo Text View: Multiple Buffers demo:Apologies - I'll revert these commits and test harder next round.Createdtest casenon-stupid test case, i.e. without a requirement to recompile with different configurations of overlay/policy: it creates all 4 inside their own GtkWindowsCreatedtest caseremoved erroneous return value that I had drafted but didn't end up usingCreatedScrolledWindow—Don’t req size for auto-hidden barsPOLICY_AUTOMATIC means scrollbars are only shown when needed, i.e. whenthe size of the window is not large enough to show the entire child. Sowhen measuring the preferred size, such scrollbars should be ignored.But measure() requested size for *any* non-overlay bar. So we got spacefor child plus bar, & having enough for the child meant POLICY_AUTOMATIChid the bar, leaving the extra space empty below/right of the child.Fix this by only requesting size for non-overlay scrollbars if they areset to POLICY_ALWAYS.The new patch fixes the size request for the (!overlay && automatic) case, still passes the update to the reftest, and crucially isn't totally stupid like my last patch and therefore doesn't introduce any critical warnings.The problem with the original patch was that, if either bar was POLICY_AUTOMATIC, I skipped the whole if block - and thus the bit that adds its request for the same orientation and the scrollable border. The real fix is to always do that, and only skip the inner if block, which adds its request for the perpendicular orientation.	12.0	id=663070	5	False	False	ricotz	1
id=663070	REOPENED	vala	general	unspecified	Other All	Normal normal	Vala maintainers	2011-10-31 00:08 UTC by	pancake	2016-09-20 12:24 UTC (	1 user	The 'vala' program does not accepts specifying the pkg as an argument to --pkg, it requires an '=' between --pkg and the package name. Else you get this error:$ vala --pkg gtk+-2.0 hello.valaMissing argument for --pkgBoth syntaxes should be supported.	This was fixed somewhere in the past.Oh, with "vala" not "valac"	2.0	id=770503	5	False	False	christian	1
id=680813	REOPENED	glib	gobject	unspecified	Other Linux	Normal normal		2012-07-30 08:15 UTC by	Xavier Claessens	2016-05-18 16:57 UTC (	4 users	I think it is a common use case to have a GObject as user_data of an async call, and you can't always cancel the call when the object dies. You don't always want to make the object survive until the operation finish.I would like to do something like that:my_callback (GObject *source, GAsyncResult *result, gpointer user_data){ GWeakRef *weak = user_data; MyFoo *self = g_weak_ref_get (weak); if (self == NULL) goto out; ... g_object_unref (self);out: g_weak_ref_free (weak);}my_foo_async (self->priv->something, my_callback, g_weak_ref_new (self));We have TpWeakRef in telepathy-glib library for exacly that usecase. It has the convenience to have an extra gpointer user_data to be able to pass 2 stuff to the callback.Or maybe we could add a new typedef struct {GWeakRef weak; gpointer user_data; GDestroyNotify destroy;} GWeakData; ?	I found myself doing a g_new()/g_free() to deal with this situation myself recently. Patch welcome.Interesting thought: the original version of GWeakRef was based on a refcounted auxiliary object that all weakref users held a reference on and which in turn contained something pretty much equivalent to the existing GWeakRef implementation.It would be interesting to consider doing that for the API you are suggesting adding. At the very least we should ensure that the added API makes switching to this style possible in the future.CreatedAdd g_weak_ref_new/free()Heap allocated GWeakRef are useful to give as user_data on async calls.Review of:This lacks the refcounting that I would have liked to have seen.Consider GVariantBuilder. It has this API:_init_clear_new_ref_unrefbut it is very clearly documented that you absolutely must not call _ref or _unref on stack-allocated (read _init'd) builders.I think we want the same here. If you use _new() then you get the ability to _ref() and _unref(), otherwise you must use _clear().A bit of explanation: I am specifically interested in solving the case of accessing a weak ref from one thread and dispatching to another thread for handling (where the object may die before the hander arrives in the other thread). I want to do this without taking a hard ref on the object because this may result in the toggle ref handler being dispatched from a 'bad thread', which we've seen to cause problems with some language bindings (like pygobject,) and also because this is usually done for the purpose of firing a signal and if the object is dead once the signal arrives in the destination thread, it's far better not to bother dispatching it.This means that I need a way to take one weak ref and get another weak ref out of it in a safe way that does not involving taking a strong ref. The only two options are g_weak_ref_ref() or some sort of copy-constructor g_weak_ref_copy() that operates under the lock. Of these two I prefer the first (the ref).After some consideration, I consider the purpose for which I wanted this API to be an anti-pattern. I intend now to create a non-threadsafe refcounted weakref. Your original bug looks single-threaded -- would this work for you?I'm not doing any thread-safe code atm anyway.Going to close this WONTFIX for now then.We didn't deprecate the old weakrefs because they are still totally valid for non-threadsafe uses and they are more efficient.For the record: the main intended use case of GWeakRef is for a statically-allocated singleton-holder that is accessed by multiple threads. GWeakRef is not intended to be used in non-multithreaded situations.GWeakRef is designed to be thread-safe, but that doesn't mean it can't be useful even in non-threaded code. I still believe that my initial use case is valid, and we don't have currently any easy way to do it.I still think that adding those function can be immensely useful:g_weak_ref_new()g_weak_ref_ref()g_weak_ref_unref()If we don't want to use GWeakRef in that case, the example code would look like much more ugly IMO:my_callback (GObject *source, GAsyncResult *result, gpointer user_data){ MyFoo **self_ptr = user_data; MyFoo *self = *self_ptr; if (self == NULL) goto out; ... g_object_unref (self);out: g_free (self_ptr);}voidmy_foo_func (MyFoo *self){ MyFoo **self_ptr = g_new (MyFoo*); *self_ptr = self; g_object_add_weak_pointer (G_OBJECT (self), self_ptr); my_foo_async (self->priv->something, my_callback, self_ptr);}(In reply to)Actually without that line in that case.Seems like what you really want is this this:void *g_object_get_weak_pointer (obj) { void *ptr = new(); ptr = obj; obj.add_weak (&ptr); return ptr;}It seems the xclaesse has a new usecase that requires thread safety after all..Here's the plan:Add a new GHeapWeakRef structure which is defined privately in gobject.c and contains a refcount and a magic number field.Add _new() which allocates this, sets refcount to 1, fills in a magic number, and calls _init(). Add _ref() and _unref() that manipulate the refcount, only after verifying that the magic number is correct (to prevent use of _ref() and _unref() on static-allocated GWeakRef, same as we do for GVariantBuilders).I would also like to add a g_object_get_weak_ref() which will return a common GWeakRef which is owned by the object and is shared by all callers to this API. There was some argument during the initial design of GWeakRef that this arrangement would have been more useful for some cases. The problem here is that we would need to prevent _set() and _init() from being called on this shared weakref. We could use a separate magic number to enforce that, but _set() and _init() are expected to work on non-heap-allocated weakrefs as well, which don't have the magic number field, so we can't do that. _init(), in particular, is expected to work on any piece of uninitialised memory. There are still a few possible ways to enforce this, though. When using _set() on a GWeakRef with an existing object, we could check that object to make sure we are not operating on its shared weak ref [slowish]. I think a reasonable compromise would be to check at each call to _get_weak_ref() and at object destruction, that the correct object is still in place and throw a critical if not. It means that we would catch the problem, but not at a point where 'bt' would help us... oh well...That means that we'd end up with something like this for most new users: GWeakRef *foo = g_object_get_weak_ref(obj); ... g_weak_ref_unref (foo);and of course, we would also add support for g_autoptr(GWeakRef).	11.0	id=594535	37	False	False	jjardon	1
id=85715	REOPENED	gtk+	Backend: X11	3.0.x	Other Linux	Normal normal		2002-06-17 22:03 UTC by	Owen Taylor	2017-02-19 20:52 UTC (	47 users	Describes a plan for adding the ability to close displays toGTK+-2.2. Some additional particular items that need fixing: - gdk_x11_display_finalize() needs some careful going over; there is a lot of stuff it leaves un-freed. For instance the ClientFilter objects in the client_filters list. - gdk_x11_screen_finalize() also needs a lot of attention. - gdk_display_close() just unrefs currently; it *should* unref (if the display hasn't already been closed) but has to do a lot more as well. - A lot of caches need to be freed when the display is dispposed; along with ones mentioned in the mail message, a few others are the scratch_image information in gdkimage.c and the pixmap catch in gtktree.c. (Although gtktree.c could just be left, since it's a GTK_ENABLE_BROKEN widget.)	The API stuff should be done now, though there still is a lotof work in the implementation details.Rest of the details will have to wait for 2.4.***has been marked as a duplicate of this bug. ***A quick patch that documents this:***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***tracks down one particular crash when closing displays.Createdfix a number of close issues / crashers.Don't think there is a huge value in fixing a few thingspiecemeal, so I'd rather apply this patch only on the2.6 devel branch when that opens.So this can go in HEAD now, I guess.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***CreatedPatch that fixes crashes and cleans up some more stuffAttached patch does everything the patch indoes.Additionally it frees more stuff that was previously leaked.And it needs review, esp. the part where I hack badly tobe able to destroy the root window.CreatedUpdated patchUpdated patch adds finalization of the closed screen's GdkVisuals.CreatedNext updateAdds finalization of GdkKeymapX11Here is my own patch from last December. I haven't done any comparison to yourpatch yet. From what I remember, my patch was incomplete wrt to actual closingof displays, but it had the necessary pieces for a protocol to let e.g. the wminitiate migration of windows. This, together with a cmdline utility forstarting a migration, can be found atCreatedMerged patchAttached patch merges in some changes from Matthias' patch, namelyproper root window destruction and some parts that i considered nicerin Matthias' patch than in my own. Didn't merge any of the displaymigration changes.Merged patch should be free from any hacks now that root windowdestruction is de-uglyfied.Hmm, the gtk-demo change display example seems to still crash for me,with the patch. I haven't looked in detail yet.CreatedNext updateon_renderer_display_closed() in gdkpango.c had the wrong signature.gtk-demo crashes on XFreeGC() in gdk_gc_x11_finalize() now. I triedto debug that with some simple g_print(), but I don't have thesetup to debug inside xlib right now.CreatedNect oneUnsets xdisplay, screen etc members *after* chaining up ingdk_screen_x11_dispose(), so x11 implementations ofmembers destroyed by the parent class (namely GdkGCs) havea chance to call xlib functions. The update also adds some"member = NULL" lines in gdk_screen_dispose(), they wouldprobably have crashed next :)In gtk-demo, I can close a display now after moving a windowthere and back.***has been marked as a duplicate of this bug. ***As per root problem which caused me to debug and submit:gtk_init seems to be a preferred way to initialize gtk, butit was not clear to me how to shut gtk down so that all(modulo bugs) resources are freed prior to exit?I needed that for Mozilla. I ended up with a hack. See:// gtk_init() -> gtk_init_check():// return gdk_display_open_default_libgtk_only () != NULL;// thus we lost GdkDisplay* inside gtk_init!Due to Xft font caching more than megabyte was not freed because of this.Neither app examples nor source around gtk_init() implementationhave any hints.Summary of problems with 2.6.7 when I try to close last GdkDisplay(see Mozilla's bugzilla for details):gdkdisplay-x11.c: gdk_display_x11_dispose(): crash if display_x11->xdisplay==NULL gdk_display_x11_finalize(): same _gdk_windowing_set_default_display(display): does not handle NULL parameter (this happens on 'close last GdkDisplay' codepath)gdkgc-x11.c: gdk_gc_x11_finalize(): if user has closed all GdkDisplays, it calls XFreeGC(NULL,...) - which crashesAll these issues and more are addressed in the attached patch #46110.I am trying to close default GdkDisplay on exitfrom Mozilla by adding gdk_display_close(gdk_display_get_default());just before end of main()(see)Stock gtk 2.6.7 segfaults.gtk 2.6.7 patched with patch #4611 segfaults.Looks like use-after-free.Valgrind trace (abridged):Addrcheck, a fine-grained address checker for x86-linux.Copyright (C) 2002-2005, and GNU GPL'd, by Julian Seward et al.Using valgrind-2.4.0, a program supervision framework for x86-linux.Copyright (C) 2000-2005, and GNU GPL'd, by Julian Seward et al.My PID = 26929, parent PID = 26927. Prog and args are: /usr/app/mozilla-2005-05-08/mozilla-binFor more details, rerun with: -vInvalid read of size 4 at 0x34824CB5: g_hash_table_lookup_node (in libglib-2.0.so.0.600.4) by 0x34825030: g_hash_table_remove (in libglib-2.0.so.0.600.4) by 0x346FA079: _gdk_xid_table_remove (in libgdk-x11-2.0.so.0.600.7) by 0x346EB158: gdk_pixmap_impl_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346BC839: gdk_pixmap_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x344838CC: free_gc_drawable (in libgtk-x11-2.0.so.0.600.7) by 0x348257DB: g_hash_nodes_destroy (in libglib-2.0.so.0.600.4) by 0x34824C0B: g_hash_table_destroy (in libglib-2.0.so.0.600.4) by 0x3481E50D: g_datalist_clear_i (in libglib-2.0.so.0.600.4) by 0x3481E3FA: g_datalist_clear (in libglib-2.0.so.0.600.4) by 0x347C8189: g_object_finalize (in libgobject-2.0.so.0.600.4) by 0x346ED2DD: gdk_screen_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346D1A4B: gdk_display_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346AFDE1: gdk_display_close (in libgdk-x11-2.0.so.0.600.7) by 0x804E0D6: main (in mozilla-bin) Address 0x34CA06A8 is 8 bytes inside a block of size 28 free'd at 0x341467B9: free (vg_replace_malloc.c:152) by 0x3483908B: g_free (in libglib-2.0.so.0.600.4) by 0x34824C3A: g_hash_table_destroy (in libglib-2.0.so.0.600.4) by 0x346D19A8: gdk_display_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346AFDE1: gdk_display_close (in libgdk-x11-2.0.so.0.600.7) by 0x804E0D6: main (in mozilla-bin)Invalid read of size 4 at 0x34824CBB: g_hash_table_lookup_node (in libglib-2.0.so.0.600.4) by 0x34825030: g_hash_table_remove (in libglib-2.0.so.0.600.4) by 0x346FA079: _gdk_xid_table_remove (in libgdk-x11-2.0.so.0.600.7) by 0x346EB158: gdk_pixmap_impl_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346BC839: gdk_pixmap_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x344838CC: free_gc_drawable (in libgtk-x11-2.0.so.0.600.7) by 0x348257DB: g_hash_nodes_destroy (in libglib-2.0.so.0.600.4) by 0x34824C0B: g_hash_table_destroy (in libglib-2.0.so.0.600.4) by 0x3481E50D: g_datalist_clear_i (in libglib-2.0.so.0.600.4) by 0x3481E3FA: g_datalist_clear (in libglib-2.0.so.0.600.4) by 0x347C8189: g_object_finalize (in libgobject-2.0.so.0.600.4) by 0x346ED2DD: gdk_screen_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346D1A4B: gdk_display_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346AFDE1: gdk_display_close (in libgdk-x11-2.0.so.0.600.7) by 0x804E0D6: main (in mozilla-bin) Address 0x34CA06AC is 12 bytes inside a block of size 28 free'd at 0x341467B9: free (vg_replace_malloc.c:152) by 0x3483908B: g_free (in libglib-2.0.so.0.600.4) by 0x34824C3A: g_hash_table_destroy (in libglib-2.0.so.0.600.4) by 0x346D19A8: gdk_display_x11_finalize (in libgdk-x11-2.0.so.0.600.7) by 0x347C822B: g_object_last_unref (in libgobject-2.0.so.0.600.4) by 0x347CB42C: g_object_unref (in libgobject-2.0.so.0.600.4) by 0x346AFDE1: gdk_display_close (in libgdk-x11-2.0.so.0.600.7) by 0x804E0D6: main (in mozilla-bin)...CreatedMinimal patch against gtk 2.6.7 with which Mozilla doesnt segfaultCreatedpatch ported to HEADHere's an updates patch that could go into HEAD. Changes from previousversion are:- gdk_display_dispose() sets the most recently opened display as the new default one, instead of always setting the default to NULL- fixed display closing crashs/warnings in gtkclipboard.c and gtktextdisplay.cWith the patch applied, the following works fine in gtk-demo:- open :2.0- move gtk-demo window there- close :0.0- re-open :0.0- move gtk-demo window back- close :2.0- quit normallyThanks Michael! gtkdemo works here also.I get a segfault migrating Ethereal to another display. It segfaults only if theoriginal display is closed. Ethereal 0.10.12 (plus a few lines to migrate withgtk_window_set_screen), with GTK+ 2.8.6 + patch from.Backtrace is below. Let me know if I can provide any more information.Yea, I bet there are still several ways to crash it by changing/closingthe old display. See the stack trace in. It definitely alsoleaks some stuff.However I'd prefer to fix this stuff on top of the patch that worksfor gtk-demo, it has grown quite large already and doesn't becomeeasier to read when adding more fixes :)please commit the patch mitch, it fixes a load of issues and looks very good tome. you're completely right, we can work out other segfaults/issues on top ofthe set of fixes you already.Agreed, looks like a step in the right direction. Lets commit it and work from there on the remaining issues.Ok, comitted:2005-11-10 Michael Natterer <> Applied patch from maemo-gtk that addresses many issues wrt display migration and display closing (). * gdk/gdkdisplay.c (gdk_display_dispose): don't just set the default display to NULL when it's closed. Instead set the most recently opened display as new default (if one exists). * gdk/gdkpango.c (on_renderer_display_closed): fixed signature of this callback. * gdk/gdkscreen.c (gdk_screen_dispose): check if the GCs still exist before unrefing them. * gdk/gdkwindow.c (_gdk_window_destroy_hierarchy): if the screen is closed, allow destruction of the root window. * gdk/x11/gdkdisplay-x11.c: moved some stuff from finalize() to dispose(), free stuff that was leaked before. * gdk/x11/gdkevents-x11.c (_gdk_x11_events_uninit_screen): check if the xsettings_client still exists before destroying it. * gdk/x11/gdkkeys-x11.c: added finalization and free the allocated X resources. * gdk/x11/gdkpixmap-x11.c: moved stuff from finalize() to new dispose() implementation. * gdk/x11/gdkscreen-x11.c: moved stuff from finalize() to dispose() and check if it still exists before unrefing it. Set their pointers to NULL/None *after* upchaining in dispose(), because X11 implementations of members of the parent class still need them for their own destruction. * gdk/x11/gdkvisual-x11.c: removed finalize() implementation which was g_error()ing when finalizing a visual. * gtk/gtkclipboard.c (gtk_clipboard_finalize): don't use get_clipboard_widget() because it would create the widget if it doesn't exist. Use g_object_get_data() directly instead. * gtk/gtktextdisplay.c (on_renderer_display_closed): fixed signature of this callback.Argl, accidentially set to NEEDINFO, reopening.Ethereal still fails with a BadPixmap error from X, even without closing thedisplay.Next test was gedit. It works fine if the display is not closed. If it ishowever, I get the crash in the attached file.CreatedErrors and backtrace from migrating gedit to a new displayLooks the program is screwed long before the crash happens. Would beinteresting to see a stack trace of the first critical warning.This commit should fix the crashers fromand:2005-11-15 Michael Natterer <> * gdk/x11/gdkdisplay-x11.c (gdk_display_x11_finalize): destroy display->xid_ht as late as possible (right before XCloseDisplay) because it still needs to be around when the display's screens are finalized. (#85715)Createdbacktrace from the first assertion in moving geditTriggered a SIGSTOP on the assertion in g_log and this is the backtrace. Thepango errors from the previous log appear if text is typed in gedit beforeclosing the screen.More stuff cleaned up correctly on display close:2005-11-16 Michael Natterer <> * gdk/x11/gdkevents-x11.c (_gdk_events_uninit): new internal function which destroys the display's event source. Also removes the source from the global display_sources list and unrefs it. * gdk/x11/gdkprivate-x11.h: declare the function. * gdk/x11/gdkdisplay-x11.c (gdk_display_x11_dispose): call it instead of half-destroying the source here.CreatedFix display migration of GtkMenuToolButtonGtkMenuToolButton was not using gtk_menu_attach_to_widget()and gtk_menu_detach(), resulting in broken behavior uponscreen/display change. Attached patch fixes this.thanks mitch, the GtkMenuToolButton changes look good to me, please apply.Applied to HEAD:2006-01-04 Michael Natterer <> * gtk/gtkmenutoolbutton.c (gtk_menu_tool_button_set_menu) (gtk_menu_tool_button_destroy): use gtk_menu_attach_to_widget() and gtk_menu_detach() instead of reffing/unreffing the menu manually. Also fixes brokenness on screen change ().One more small fix:2006-01-10 Michael Natterer <> * gdk/gdkpango.c (on_renderer_display_closed): disconnect from the right object ("closed" is emitted by the display, not the screen). ()Get rid of scratch GdkImages when the display closes:2006-01-12 Michael Natterer <> * gdk/gdkimage.c (scratch_image_info_for_depth): connect to the display's "closed" signal and free the cached scratch images upon display closing ().Another one:2006-01-23 Michael Natterer <> * gtk/gtkcolorbutton.c: move destruction of the private GdkGC from finalize() to unrealize(). Fixes BadMatch on display change ().Mitch, what is the status of this ? Any work left ?***has been marked as a duplicate of this bug. ***I'm not aware of anything that's still broken (even tho thereprobably is), but I left the bug open because new issues wereappearing regularly.However, properly closing the display needs heavy supportfrom the app. It must move away or close all its windowsand other display related resources, then it must callgdk_display_close(). Only then it's safe to actually closethe display. That's not exactly "toolkit support" for displayclosing, it's rather the tookit supporting the app to do it.It's also still the app that needs explicit support for movingwindows between screens/displays.Do we want support for randomly closing the display, without theapp crashing? That would require implementing some if the stufffrom Owen's initial proposal, like marking all its resources"dead" and silently doing nothing with them until the app camearound destroying them or moving them to another display.What we probably want is toolkit support for moving any windowto other screens without extensive app support. Adding anAPI like the proposed gtk_widget_set_can_change_screen()sounds like a reasonable way.Do we want to collect all these issues in the same bug report?This one has grown rather large in the meantime :)Moving off 2.10 Freeze; but as you say, it may be better to close this one and open new ones as required.I've a patch [overstatement... a mass of changes admist many others] which handles the miscellany by making any object that uses a screen take a ref (such as toplevels, styles, gcs, drawables, etc) and the screen take a ref on the display. The screen/display dispose/finalize are rebalanced to keep the connection (and associated bookkeeping) usuable until finalize. The display->screen->display ref cycle is broken by the explicit run_dispose from gdk_display_close and then natural attrition causes the display to shutdown with its last user. This appears to handle the random closure case, although I've not checked how honoured display->closed truely is.I think I just ran into this (or the issue it has become in #48 and #50). My initial telemetry is that nothing took a ref on the GdkScreen (or GdkDisplay, it's all a bit circular) in the first place, and so when I go and do something innocent like get a GdkScreen with gtk_window_get_screen(), ref it, use it, and then unref it when I'm done, it appears to drop ref count to zero, and, gaboom.Gdk-ERROR **: attempted to destroy root windowaborting...I'll open a new bug if I can confirm any of this with an isolated test case.AfCYears later re:Andrew, can you attach some small test code that crashes in that case?(In reply to)Here's a different test case, using the recently released emacs-23.1 (older versions don't support the necessary features):$ emacs -Q -nw -f server-startfrom a different xterm:$ emacsclient -c -nthis will create a Gtk+ emacs windowuse xkill to kill that windownow do again:$ emacsclient -c -nthis should create a new emacs window, but it does not and a lot of assertions are printed in the original xterm.This only happens when emacs is configured to use Gtk+ (the default). If emacs is configured with:./configure --with-x-toolkit=lucid this problem does not happen.This is on an up to date Fedora 11 system, Gtk+ 2.16.1For more test cases and backtraces, seeThe bug still exists with GTK+ 3.0.11.Tested with Emacs from BZR (revision 104859 of trunk).FWIW, I still see the problem with Emacs (using Debian testing's 3.4.2).Any chance to see this bug fixed?***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***SIGABRT launching emacs (without any arg)emacs 24.3gtk 3.11.5fedora rawhide(gdb) btCreatedBacktrace (too long to fit in comment)emacs 23.3.1, gtk 3.11.5 with or without any args on start. Output on stderr refers to this bug.I also can reproduce it w/ emacs and gtk 3.11.5(In reply to)(In reply to)(In reply to)(In reply to)Please keep in mind that recent Emacs versions shut down before this bug can actually occur. In xterm.c of Emacs 24.3, function x_connection_closed:#ifdef USE_GTK /* A long-standing GTK bug prevents proper disconnect handling (). Once, the resulting Glib error message loop filled a user's disk. To avoid this, kill Emacs unconditionally on disconnect. */ shut_down_emacs (0, Qnil); fprintf (stderr, "%s\n\When compiled with GTK, Emacs cannot recover from X disconnects.\n\This is a GTK bug:\n\For details, see etc/PROBLEMS.\n", error_msg); emacs_abort ();#endif /* USE_GTK */So make sure that you have disabled this code block before testing, otherwise your confirmation reports will be worthless.(In reply to)yes even removing this, emacs_abort() happens somewhere else, but I'm not sure anymore this bugzilla is the right one?(gdb) btI am seeing the same problem; setting XLIB_SKIP_ARGB_VISUALS=1 seems to mitigate the problem on startup. However, starting emacs like this, in many situations I get additional SEGFAULTS:gdk_x11_window_foreign_new_for_display on gdkwindow-x11.c:1238 calls XVisualIDFromVisual with visual=0x0Addendum: Me and the reporters here experienced this issue starting with gtk+ 3.11.5. From its changelog: "Theming: GTK+ now uses RGBA visuals by default"Actually, GDK_RGBA=0 seems to solve all crashes with >=gtk+-3.11.5 for me.Can somebody explain what an application needs to compatible with GDK_RGBA=1?Looking at the causing commit, there is a link to. It has a description of the problem and also mentions that the changes have been reverted for gtk+-3.11.6 because ofand.Not the bug of this report in any case.I also trapped into this bug indirectly after filling Emacs bug #20263:I run Emacs on development host under X Window as: emacs24 --daemon emacsclient -c &Next when I connect to Emacs as: $ ssh -Y user <at> localhost ssh$ emacsclient -c C-x C-c ssh$ exitor as: $ startx xterm -- `command -v Xnest` :1 -geometry 800x600 xnest$ emacsclient -c C-x C-c xnest$ exitEmacs daemon exited on exit shell command (but because special #ifdef code as shown above).Seems that Emacs only one true application that require this feature...I just installed the latest emacs (GNU Emacs 25.0.50.1) and it exhibits the same problem.This issue is present on the default elementary OS Freya installation which uses 3.4.15 version of Gtk.Any idea how to fix this?You can start emacs with this on ubuntu 14.04 XLIB_SKIP_ARGB_VISUALS=1 emacsmore details available here:This problem exists still on Ubuntu 16.10, when used through X2Go and using Xfce as windowing environment.When Emacs is used locally, there is no problem. The problem did not occur on 16.04, so something has changed between 16.04 and 16.10.This problem exists still on Fedora 25 when used through x2go.Fails with XFCE4 and MATE desktops.Works with a X11 connection via ssh.Starting with:XLIB_SKIP_ARGB_VISUALS=1 emacsdoes not change anything, it still crashes with:X protocol error: BadRequest (invalid request code or no such operation) on protocol request 131When compiled with GTK, Emacs cannot recover from X disconnects.This is a GTK bug:For details, see etc/PROBLEMS.Fatal error 6: AbortedBacktrace:emacs[0x50ac9c]emacs[0x4f114c]emacs[0x50ad43]emacs[0x4c0ea0]emacs[0x4c57f6]emacs[0x4c587b]/lib64/libX11.so.6(_XError+0x11d)[0x7f68b373cddd]/lib64/libX11.so.6(+0x40d07)[0x7f68b3739d07]/lib64/libX11.so.6(+0x40dc5)[0x7f68b3739dc5]/lib64/libX11.so.6(_XReply+0x238)[0x7f68b373acd8]/lib64/libX11.so.6(XQueryPointer+0x8e)[0x7f68b3730e6e]/lib64/libgdk-3.so.0(+0x56b5a)[0x7f68b5784b5a]/lib64/libgdk-3.so.0(+0x75695)[0x7f68b57a3695]/lib64/libgdk-3.so.0(gdk_window_get_device_position_double+0x10b)[0x7f68b5776e5b]/lib64/libgdk-3.so.0(gdk_window_get_device_position+0x2d)[0x7f68b5776f5d]/lib64/libgtk-3.so.0(+0x338a39)[0x7f68b5d5aa39]/lib64/libgtk-3.so.0(+0x338faf)[0x7f68b5d5afaf]/lib64/libgdk-3.so.0(+0x29e78)[0x7f68b5757e78]/lib64/libglib-2.0.so.0(+0x4a89d)[0x7f68b40a989d]/lib64/libglib-2.0.so.0(g_main_context_dispatch+0x162)[0x7f68b40a8e52]emacs[0x5e09a8]emacs[0x5a5cf7]emacs[0x422f33]emacs[0x4fd3d1]emacs[0x4fdf3d]emacs[0x4ffb84]emacs[0x564432]emacs[0x4f1614]emacs[0x5643d3]emacs[0x4f15d0]emacs[0x4f5dd7]emacs[0x4f6128]emacs[0x419d52]/lib64/libc.so.6(__libc_start_main+0xf1)[0x7f68abf4e401]emacs[0x41a79a]Aborted (core dumped)	75.0	id=758350	13	False	False	damiannohales	1
id=770503	REOPENED	gnome-builder	general	3.20.x	Other Linux	Normal normal	GNOME Builder Maintainers	2016-08-28 02:35 UTC by	Wayne Blaszczyk	2017-02-20 19:33 UTC (	1 user	I have all my vala source under the src sub-directory, and the c and o files are also produced under this directory when building, yet when warnings are produced under the Build pane, they point to the root directory of the project. When double clicking on the warning, a non existent file opens up.E.g.The Build Output has the following:src/sound.c: In function 'sound_play':src/sound.c:272:97: warning: passing argument 3 of ....Yet under the right hand Build pane it has:.../Projects/foo/sound.cpassing argument 3 of ....Another example shows that the system header files are also affected.The Build Output has the following:/usr/include/gee-0.8/gee.h:1520:15: note: expected 'GDestroyNotify....Yet under the right hand Build pane it has:.../Projects/foo/gee.hexpected 'GDestroyNotify....	Right now I think our main problem here is that the paths that we get from GCC are relative. And they aren't necessarily relative to the current working directory to make, but relative to a file that they were included from. So it is going to require some more translation to get the right files.This was fixed a couple of weeks ago due to an improper GCC extraction regex.Fixed in commit.I've applied the patch. It looks like it has fixed some of the scenarios but not all.C Files under the src directory open up fine, so do system header files.However, I also have source files under a lib directory. Any warnings related to these files, opens up a non existent file. Again, it looks like any source file in the lib directory, in the Build pane it points to the root directory of the project.Then I'm afraid that GCC just isn't giving us enough information to generate a path to the right file.To verify this, try running your build manually outside of builder. Look at the most recent directory switch, and the error message that GCC gives you and see if you can, and how you would, generate a proper path to the file.If it doesn't give enough path information, we would have to walk the project tree to locate a file that looks close to the target filename, and that may not actually be correct (in addition to very costly to the vfs).One potential might be to look at "-I" parameters to the GCC command line and resolve them one by one. But that starts to melt away our layers of abstraction...Oh, and we wouldn't see those anyway because we generally do builds with AM_SILENT_RULES() enabled.I'm not sure what you mean by 'recent directory switch', I'm just a part time coder.Looking at the output during the build, I can determine where the file is located by keeping track of the previous Entering directory line.Here is a snippet of the output:Making all in libmake[2]: Entering directory '/home/wblaszcz/Projects/wbbuild/lib'... CC libwbutil_la-utils.loIn file included from /usr/include/glib-2.0/glib.h:79:0, from utils.c:5:utils.c: In function 'string_strip':utils.c:1489:14: warning: passing argument 1 of 'g_strchug' discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers] g_strstrip (_tmp1_);...make[2]: Leaving directory '/home/wblaszcz/Projects/wbbuild/lib'Making all in srcmake[2]: Entering directory '/home/wblaszcz/Projects/wbbuild/src'... CC get-gentoo-dependencies.oget-gentoo-dependencies.c: In function 'string_chomp':get-gentoo-dependencies.c:2435:14: warning: passing argument 1 of 'g_strchomp' discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers] g_strchomp (_tmp1_); ^~~~~~In the above example, gnome-builder cannot find utils.c but it can find get-gentoo-dependencies.c.I cannot see any difference in the information between the two warnings.A difference that I do see between this example and the original example was that I think in the original I was using a single Makefile.am, whilst in this example I'm using individual Makefile.am in each sub-directory. I also built this outside of gnome-build and the only difference between building inside and outside of gnome-builder were the single quote characters. The outside build had different opening and closing quote characters whilst inside gnome-builder they were consistent.If you like, I can attach the whole build output.Using non-recursive automake (just the toplevel) is more likely to break. I would expect the above example to work fine.My c is a bit rusty, but I think I've narrowed down the issue.A: self->current_dir = /home/wblaszcz/Projects/wbbuild/libA: self->top_dir = /home/wblaszcz/Projects/wbbuild/libA: basdir = /home/wblaszcz/Projects/wbbuild/libA: filename = utils.cA: path = (null)B: self->current_dir = /home/wblaszcz/Projects/wbbuild/libB: self->top_dir = /home/wblaszcz/Projects/wbbuild/libB: basdir = B: filename = utils.cB: path = utils.cA is just before g_str_has_prefix and B is just after setting the path in gbp-gcc-build-result-addin.c .It seems that self->top_dir is wrongly set to the lib directory rather than the project's root directory?The reason why the files under the src directory work is because the g_str_has_prefix is being skipped and therefore the basdir is not being set to null, hence the path is correct.I guess we probably don't get an "Entering directory" message for the current directory. So we probably need to preset top_dir with the current working directory of the build.OK, I've narrowed it down further. The issue ONLY occurs during a rebuild. When I do a clean, then a build, everything works as expected, all warnings open up correctly.I think the reason why we have this issue is because the rebuild includes the make clean, and the first "Entering directory" message is for /home/wblaszcz/Projects/wbbuild/libmake 'clean' '-j1'Making clean in libmake[1]: Entering directory '/home/wblaszcz/Projects/wbbuild/lib'....make[1]: Leaving directory '/home/wblaszcz/Projects/wbbuild/lib'Making clean in srcmake[1]: Entering directory '/home/wblaszcz/Projects/wbbuild/src'....make[1]: Leaving directory '/home/wblaszcz/Projects/wbbuild/src'make[1]: Entering directory '/home/wblaszcz/Projects/wbbuild'...make[1]: Leaving directory '/home/wblaszcz/Projects/wbbuild'make 'all' '-j1'make all-recursivemake[1]: Entering directory '/home/wblaszcz/Projects/wbbuild'Making all in libmake[2]: Entering directory '/home/wblaszcz/Projects/wbbuild/lib'....make[2]: Leaving directory '/home/wblaszcz/Projects/wbbuild/lib'Making all in srcmake[2]: Entering directory '/home/wblaszcz/Projects/wbbuild/src'....make[2]: Leaving directory '/home/wblaszcz/Projects/wbbuild/src'make[2]: Entering directory '/home/wblaszcz/Projects/wbbuild'make[2]: Leaving directory '/home/wblaszcz/Projects/wbbuild'make[1]: Leaving directory '/home/wblaszcz/Projects/wbbuild'I think this pretty much confirms the theory that we need to pre-set the working directory for top_dir.That is a bit harder on master right now (as compared to the pipeline branch) because the BuildResultAddins do not know about $builddir. They can only infer it from the logging output.However, with the BuildPipeline, this is much easier because the pipeline itself knows about $builddir. So I'm inclined to say that we should hold off a couple of weeks on fixing this so that we can fix it once with the BuildPipeline. (It will likely land with this bug being fixed).This is also still incorrect for meson projects, where our heuristics to locate the path to the file are inaccurate.	13.0	id=346415	13	False	False	bugzilla.gnome.org	1
id=594535	REOPENED	gtk+	Widget: Other	2.22.x	Other All	Normal normal		2009-09-08 18:06 UTC by	Javier Jardón (IRC: jjardon)	2013-10-14 06:49 UTC (	8 users	It looks like GtkStatusbar->label and GtkStatusbar->frame don't have an accessor. Is this intentional?	Those are internal widgets. Using them directly is not a good idea and basically undefined. Please check your use cases before asking for missing accessors.The use cases is showing the "buffering" progressbar in Totem's status bar in place of a message.Can you provide a small test case showing how the progressbar is used? Why can't you use a normally packed widget?Packed widgets will pack to the right of the status bar, not in place of the status messages.The code removing the current label and adding a vbox with the label and progressbar is at:CreatedImplement gtk_statusbar_get_message_areaWhat about providing a box in the statusbar, that can be accessed via gtk_statusbar_get_message_area, and you can pack your widgets in there. That lets you avoid the surgery. It's not exactly the same, though, that is the label isn't changed the way does. Maybe a property would help here, such as "expand-label" and "ellipsize-label".CreatedStandalone test caseFor reference, this test case contains an adapted version of Totem's statusbar packing. Depending on an #ifdef in the code it uses the proposed new function.I don't really see why any of this is necessary... the statusbar is an hbox, so you have full access to all its children.The point is that we want to replace the statusbar's label with a hbox containing that label. One needs to do this, because if you just pack the extra widgets into the statusbar itself the frame won't extend all around all children. See.However I think you're right; we can do the same widget surgery without extra accessors. statusbar->frame is the first child of the statusbar (as GtkContainer), and the label is the child of that frame (as GtkBin). So the new API isn't strictly necessary; however it's still a nice addition to have a hbox there so one doesn't _need_ to do that widget surgery.The question is what is going to happen if GtkStatusbar code ever changes. Then the surgery will blow up for good. That is incidentally one of the motivations for the sealing.***has been marked as a duplicate of this bug. ***I guess the message area idea is actually somewhat nice. While the statusbar _is_ an hbox, you really want to add your stuff inside the frame... so I guess I'll give that a hesitant +1.CreatedImplement gtk_statusbar_get_message_area #2Fixed a warning and bumped the Since tag.I guess we should have gtkbuilder support for adding children to the message area.Ie implement GtkBuildable, and in add_child, check for type == message-areaCreatedImplement gtk_statusbar_get_message_area #3Updated, with GtkBuildable implementation. I think it should be message_area with an underscore, as GtkDialog also uses an underscore. (No idea if it matters or if it's just style as with Glib signals)Comment onImplement gtk_statusbar_get_message_area #3You are right, we seem to be using _ throughout for these names. Patch looks good.Pushed to master.Comment onImplement gtk_statusbar_get_message_area #3commitJust a tiny nit: why was the weird value 4 chosen for the hbox's spacing? I'd have expected maybe 0 (let the API user set his own spacing if necessary), or possibly 6 or 12 or 18 (not sure which one is most likely HIG-correct), but certainly not 4.Also, this patch does break the widget surgery as currently done by e.g. epiphany, aisleriot, totem, ...:Gtk-CRITICAL **: gtk_container_remove: assertion `GTK_IS_TOOLBAR (container) || widget->parent == GTK_WIDGET (container)' failedGtk-CRITICAL **: gtk_box_pack: assertion `child->parent == NULL' failedGtk-WARNING **: Attempting to add a widget with type GtkHBox to a GtkFrame, but as a GtkBin subclass a GtkFrame can only contain one widget at a time; it already contains a widget of type GtkHBoxThey assume that the label is the direct child of the frame, which doesn't hold anymore. Of course, you may say they get what they deserve for messing with the internals of the statusbar :)Lets pick a better value for the spacing. I honestly didn't pay attention to that... someone with sufficient hig interpretation skills needs to divine the appropriate value, I'd say.As for the breaking surgery, not sure we can do much about it. Of course, contrived workarounds like only inserting the box when get_message_area is called, but thats probably worse than some temporary breakage. We should add a release note about this, though.Could someone attach a screenshot with these different spacing properties?Thank you very much.Re-opening so this doesn't get lost.(In reply to)I used to pack frames into the status bar (and sync the style properties of the status bar to the frame's border type) and pack my stuff into the new frame.Will this be a use case that will also be covered by the new function? This whole "let's add more content to statusbar" issue has seen lots of solutions. Will this new function be the _best practice_ for this issue?Did this make it into GTK+3? Is this bug still relevant?	24.0	id=410113	17	False	False	chpe	1
id=758350	REOPENED	gnome-maps	general	3.18.x	Other Linux	Normal normal		2015-11-19 16:29 UTC by	Andreas Nilsson	2016-03-07 11:37 UTC (	5 users	it doesn't go away	CreatedscreenshotThanks!Yeah, I was able to reproduce this for a long time. But is not related to the current position bubble, more like the map view is not refreshing when the bubble disappears. Same happens for map bubbles, layers selection bubble and search results bubble, where clicking the map is not enough to make the bubble disappear, but you need to pan or zoom it in/out.I'm still looking at it.Ok, so calling queue_redraw in the view right when we have popovers visible and stuck fixes the problem.(In reply to Damián Nohales from)(o/Now the problem becomes, is this an libchamplain/clutter/clutter-gtk or gtk+ problem or are we doing something wrong?Because it seems like this started happening sometime, but without changes to our code.(In reply to Jonas Danielsson from)I made a little Champlain based program outside of GNOME Maps with a popover in the header bar and a button inside the map view (using an overlay), I can bug the popover there and also the button (when I try to hide it, it doesn't hide until I pan, zoom or manually call queue_redraw).I tried to do the same but with a simple Clutter actor with only a background color but couldn't bug the Gtk+ controls.So not sure, I'm still looking at it. If we are sure that this wasn't happening before we should at least bisect these components.(In reply to Damián Nohales from)Thanks for looking in to this!So maybe a first step would be to bisect champlain? Try a version some time ago and see if it is still there?Since my latest rawhide update and reboot, I can no longer reproduce this. I don't know if that's bad or good :PCreatedCast of mapbubble graphics bugCreatedCast of mapbubble graphics bugComment from GTK+ maintainer:9:41 PM <•Company> jonasdn: [it's] your bug9:42 PM <•Company> jonasdn: it's called "someone is using clutter-gtk"9:43 PM <•Company> jonasdn: and it could be anything, gtk, clutter, clutter-gtk or something else entirely :/Forcing the x11 backend of clutter-gtk seem to help, maybe. But then can we manage wayland?Createdapplication: Prefer X11 and Wayland backends over GDKThis seems to play better with clutter-gtk and makesa bug where bits of popovers where left on map dissapear.Does this work for you Andreas?pushed as- application: Prefer X11 and Wayland backends over GDKWhen I build commitand run on Arch Linux / GNOME 3.18.2 I get the following error when I try to run it: (gnome-maps:8833): Clutter-ERROR **: Unsupported Clutter backend: 'x11,wayland,*'Trace/breakpoint trap (core dumped)Gatlin, are you using jhbuild? Did you try jhbuild build gnome-maps to rebuild all the dependencies of gnome-maps? It's working fine for me with an up-to-date build of the modules.(In reply to Gatlin Johnson from)hmm, yeah, this is since Clutter 1.26... Which has not been released. I didn't realize it was that recent. We might want to make Maps depend on that version in configure.ac to make this more clear.(In reply to Jonas Danielsson from)To clarify, what is new is writing the backend order as a comma-separated string. We could re-write this to avoid depending on a that recent clutter.Would be some logic like:if (Clutter.check_windowing_backend('x11')) Clutter.set_windowing_backend('x11');else if (Clutter.check...***has been marked as a duplicate of this bug. ***Reopening since this fix breaks wayland.	20.0	id=748602	9	False	False	mitch	1
id=410113	REOPENED	nautilus	general	unspecified	Other Linux	Normal normal	Nautilus Maintainers	2007-02-20 18:45 UTC by	Christian Persch	2012-08-13 21:25 UTC (	8 users	eel_str_middle_truncate and eel_truncate_text_for_menu_item produce invalid UTF-8 (see). Even if they were fixed to produce valid UTF-8, they'd still have the problem of truncating composing characters incorrectly etc. I think it's better to remove them completely and just let pango ellipsise the strings when they're displayed.	Createdpartial patch* libnautilus-private/nautilus-bookmark.c: (nautilus_bookmark_menu_item_new): * libnautilus-private/nautilus-customization-data.c: (nautilus_customization_data_new), (nautilus_customization_data_get_next_element_for_display): * libnautilus-private/nautilus-customization-data.h: * src/nautilus-application.c: * src/nautilus-bookmark-list.c: (new_bookmark_from_uri): * src/nautilus-navigation-window-menus.c: (connect_proxy_cb), (refresh_go_menu): * src/nautilus-places-sidebar.c: (bookmarks_drop_uris), (drag_data_received_callback): * src/nautilus-property-browser.c: (make_properties_from_directories): * src/nautilus-window-bookmarks.c: (connect_proxy_cb), (update_bookmarks): * src/nautilus-window-menus.c: (nautilus_menus_append_bookmark_to_menu): * test/test-nautilus-wrap-table.c: (main): Use pango ellipsisation instead of truncating the strings..Leaving open to eventually get rid of the rest of them too.I count zero uses of eel_truncate_text* remaining in Nautilus, so I'm closing this. Reopen if someone spots one grep/me missed.Not fixed. We still use eel_str_middle_truncate in some places.The title is a bit confusing... As far as I understand, solving this bug should be done by fixing eel_str_middle_truncate and eel_truncate_text_for_menu_item, not by removing the use of it.Or did I miss something ?***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Looked into this a bit. I think there are some uses of the function that we can just avoid. They don't add much value. However, there are some that are used indirectly that are very difficult to avoid without major restructuring. For instance:(where %B is a middle truncated string)Asked Owen for some advice and he said suggested it would be easiest to just fix eel_str_middle_truncate to use pango_get_log_attrs() and correct utf-8 operations - is_char_break isn't exactly right for places where you can cut the string to ellipsize, but close enough for practical purposes.Hmm, it seems that some of the issues were fixed during the gio port.Can someone please attach a use case that is still broken?	9.0	id=726819	19	False	False	richard	1
id=748602	REOPENED	gtk+	.General	2.24.x	Other Linux	Normal normal	GIMP Bugs	2015-04-28 19:44 UTC by		2015-05-02 01:09 UTC (	0 users	In the "Open Image" window if I'm clicking the dropdown list to open it often my mouse cursor is then over a non-highlighted entry. In this case the hovered entry is not highlighted even if the mouse gets moved except the mouse cursor leaves and reenters the entry.	What exact operating system is this? This sounds like an issue with GTK+,maybe even a patched GTK+.It's Ubuntu 15.04.Is this on Unity? Also, you say "in the open image window". What dropdownload in that window do you mean?No, it is LXDE (Openbox is the window manager). I'm seeing this on the dropdown list which contains the files types (for example "All images" and "All files").Ah I see, do you mean the case where when the file type combo pops up,another entry is prelit, and the mouse is over a currently non-prelitentry, or over empty space, and moving the mouse *within* that unprelitentry won't prelight anything, clicking however will select it?Yes, this is what I mean.This is intentional. When you open the combo, the currently selected entryit always highlighted, but sometimes this entry cannot be placed at themouse position. GTK+ makes sure that you really need to move your mousearound in order to select something, so it doesn't just select what appearsunder the mouse randomly.I'm closing this as NOTABUG, but in any case this is a GTK+ issueand cannot be changed in GIMP. If you disagree, please move this bugto GTK+, but I can predict with some confidence that GTK+ would closethis as WONTFIX too.And this is what doesn't happen.	8.0	id=772040	7	False	False	bugzilla	1
id=726819	REOPENED	gnome-software	General	unspecified	Other Linux	Normal normal	GNOME Software maintainer(s)	2014-03-21 12:58 UTC by	Matthias Clasen	2017-02-20 18:13 UTC (	8 users	I am seeing the 'Google Talk' repo show up in the dialog. But because gnome-software doesn't consider the google-talk-plugin package to be worthy, it says"No software from this source installed". Thats a lie, and it may mislead me into removing the repository, causing me not to get updates for the google talkplugin anymore.I'd suggest to say something like:"No applications or addons from this source installed, but other software from this source is present on your system."	We certainly have to indicate that something is installed. Maybe we could fall back to a more ambiguous category when we can't identify installed software as an app/addon?"2 items installed"***has been marked as a duplicate of this bug. ***CreatedImprove a misleading stringJust because we didn't find something that fits our narrowdefinition of 'app' or 'addon' doesn't mean a nothing is installedfrom a repo. So don't give that impression to the user.I am not sure it's a huge improvement to say "other software might still be". It doesn't actually add any useful information to the user to decide whether the repo is safe to remove or not.Maybe a solution would be to list individual packages in the dialog, in addition to apps / addons? We are already doing a similar thing in the updates page where individual packages are shown, but in a second level, clumped together under the "OS Updates" item. Could do a similar thing here as well.(In reply to Kalev Lember from)The main point was to get away from the lie "no software".I don't think we really have to list the packages. just saying "Other software" might be good enough.I've already discussed this with Matthias on IRC and now I repeat it here to let you all read my opinion. I think we can easily count other packages (those which are neither "applications" nor "add-ons") and display "No software installed" when there is really no software installed and "Some software is installed" (truly *is* rather than *might be*) when there is some. Optionally we can display a number of those "other" packages. Now as I watch the source code I can see it is even easier than I initially thought: we don't have to count anything, related->len is the number we need because if cnt_apps==cnt_addon==0 then related->len counts only those "other" packages.This is only a question to Richard and other PK experts: does related=gs_app_get_related(app) array really always contain all packages and can we safely say that if related->len==0 then there are really no packages installed and it is safe to remove the source without any consequences? Or is it safe when related->len==1 because the source also counts itself as 1? How does it work when the source is installed manually, when *.repo file does not belong to any package? How does it work with Google Chrome which currently reports there is no software installed?(In reply to Rafal Luzynski from)I've talked to Richard on IRC and he explained me that these results are reliable when we use PackageKit and yum but *not* when we use dnf. We need a plugin for dnf to perform the database synchronization and provide the reliable results, like yum-packagekit (see also:). Now since yum has been obsoleted and dnf became default in F22 this is really an issue.So, indeed we can't reliably tell that there is absolutely no software installed from a particular repo and we have to display something like "other software might still be."(Hey, actually we can't even tell there are no apps or addons, can we? Or maybe a backend should tell whether its results are reliable and whether the message should be "no software" or "some software" or "maybe", for PackageKit with dnf the result would be "maybe?")Also Richard explained that "the source isn't counted as a package *unless* there's a rpmfusion-release type package."Review of:Since we can't do anything better at the moment due to the problems between PK and dnf my opinion, fwiw, is to commit this patch.pushed as- Improve a misleading string(In reply to Rafal Luzynski from)Maybe we can't be sure what is installed, but surely we can say what will be _removed_!Explanation: PackageKit obviously can't remove anything it doesn't know about. So in theory, we can display the number of packages from the source that will be removed, rather than just saying "maybe something is installed maybe not." The problem is, I think PackageKit has no nice way to simulate a RemoveRepo operation and see what would be removed. I think we can work around that by performing GetDepends on every PackageKit GsApp that will be removed. Then that also allows us to fail the operation if a system package is in the dependency set. So instead of saying "No applications or addons installed, other software might still be" we can say "No software will be removed if this source is removed" or "98528 software packages will be removed if this source is removed" or "This source cannot be removed because it has replaced critical system software"; something like that.Question: How will you get a list of packages to run GetDepends on if listing the packages from a repo is broken?Answer: I presume that the packages missing from that list will also not be removed by the RepoRemove operation. If that's not true then my plan is bogus. If that is true, then the packages that are missing from the list of packages to run GetDepends on (which is the result of gs_app_get_related_apps) are not going to be removed: they are lost to time and space, so we just don't count them.I'm afraid we have to reopen this bug.1. Even although the string in the list of software sources has been fixed you can click the software source (maybe going to remove it) and the text inside again says "No software installed from this source" which may not be true. The line is here:2. The new string "No applications or addons installed; other software might still be" is long. Not too long in English but in some other languages it causes the dialog box to be very wide which looks bad. Not all translations are yet ready. So far I can tell it looks bad in Polish and Slovak. Maybe the translators should insert the line break explicitly, maybe the widget label should wrap its contents. It's not a big issue, just a matter of appearance.3. Michael has some ideas about how to tell reliably that there is indeed or there is absolutely no software installed from a source. I think this will not work for the same reasons as explained inbut my knowledge about PackageKit is too little to discuss it. I think it's Richard who should answer.Richard suggested adding a simulate flag to the RemoveRepo action, so we can easily figure out what is going to be removed without any workarounds.CreatedComparison of the Sources dialog with different locales(In reply to Rafal Luzynski from)CreatedFixes the problem with the label being too wideReview of:Thanks!CreatedFixes one more misleading stringIs this what we want? This should close the issue.Review of:Looks good to me	18.0	id=761569	6	False	False	laszlo.janszky	1
id=772040	REOPENED	gnome-software	General	3.22.x	Other Linux	Normal normal	GNOME Software maintainer(s)	2016-09-27 09:54 UTC by	Andreas Nilsson	2017-02-20 16:54 UTC (	3 users	CreatedscreencastThere is a bit of lack of feedback what is going on during the update of flatpak bundles.To reproduce:* Press "Install All"* Install All button grays out, the individual install buttons doesn't.* At some point an install button grays out for an item in the list. Maybe that means that that individual bundle is being updated. Not sure.* Items disappears in random order off the list.	Was about to file that same bug.gnome-software-3.22.0-1.fc25.x86_64Maybe something like this:Allan suggested putting the progressbar in the button instead, so I'll create a variant with that tomorrow.Changed the mockup to have the progress in the buttons.the mockup ingot merged intoI'm surprised it says "Install All"; maybe that's because you just have Flatpak updates?I just experienced a similar issue. In my case, I had a mix of package and Flatpak updates, and the button said "Restart & Install". After I pressed the button it became insensitive and there was a pause; I honestly thought it had broken.In addition to the too subtle progress information, and the randomness of the order in which the updates were installed, the transitions when the rows are removed from the list are rather abrupt and jerky.I think this is fixed in master now, we have the new sections in the update panel and the flatpak apps should report progress properly. Make sure you have the latest flatpak if you're using the external-apps functionality for this to work.Createdanother screencastI just tested master and I don't think this bug is fixed. The new headers are a definite improvement and should resolve(I say "should" because pressing "Restart & Update" didn't have any effect - probably a JHBuild issue). However, here's what happened when I updated Flatpaks by pressing "Update All": * All the individual "Update" buttons became insensitive and the label changed to "Installing". Two problems here: - The update button for one of the rows didn't become insensitive or have the label change (this is probably because I'd recently uninstalled the runtime - it should have been automatically removed from the update list, but wasn't). - The insensitive buttons should read "Updating", not "Installing". * The "Update All" button remained sensitive (it should have become insensitive). * No progress information was shown for each update operation. * After each update was installed, the "Update"/"Installing" button disappeared, but the row remained. It was unclear whether the update had been successful or not. * Then, all the updates in the list suddenly disappeared, except two which had update buttons next to them. Were these updates that failed to be installed? If someone presses "Update All", all the updates should be installed. * Then there's a brief flash - for a moment a different UI is shown - a blue "Restart & Update" button in the header bar and the middle of the window completely grey, with a "Downloading new updates..." heading in the middle - before the previous view is restored.It would be better to hide each row after its update has completed (ideally using an animation, so the row collapses up).I've attached a screencast of the process.Seefor the lack of progressbar.(In reply to Richard Hughes from)The progress bar would be nice, but it's not the most important issue here. The most serious issues are: * "Update All" not becoming insensitive. * The disappearance of the "installing" button. This could be as simple as the button staying visible and the label changing to "Complete". * Obvious behavioural bugs - updates being shown for things that are no longer installed, not everything getting updated, the UI briefly changing to something different.commit 99bc90b6bcdf8811d3837c2bf28179c7c5b44506Author: Richard Hughes <>Date: Mon Feb 20 16:44:51 2017 +0000 Animate the removal of live updates Fixes some ofcommit 3bd30a7892b0431fe8033ae1f94551f91fcfff0dAuthor: Richard Hughes <>Date: Mon Feb 20 16:53:36 2017 +0000 trivial: Mark the 'Update All' button insensitve when clicked When the updates list is rebuilt the widget is recreated from new. Fixes some of	12.0	id=473140	7	False	False	dimitri	1
id=761569	REOPENED	nautilus	Cut Copy Paste Undo	3.18.x	Other Linux	Normal normal	Nautilus Maintainers	2016-02-04 19:32 UTC by	inf3rno	2016-02-22 02:52 UTC (	1 user	I have Fedora 23, Gnome 3, Nautilus 3.18.5-1.fc23. I don't have progress bar by file copy. I copy files from an internal HDD to another internal HDD. The files are copied, I can see them, but there is no indication that the copy is in progress.	if the progress takes less than 1 second it doesn't display anything. So I guess the files are copied quickly?Try with something with 5gb(In reply to Carlos Soriano from)I tried with a 100GB series and 10GB photos...(In reply to Carlos Soriano from)This is resolved, I expected that I got the popup automatically but I realized that is not displayed automatically, and I have to click on an icon.(In reply to inf3rno from)That's a bug. The popover should be shown any time a new operation starts, using your version 3.18.5.Can you always reproduce? Are you using the "show icons in desktop"?(In reply to Carlos Soriano from)It never appears by me when I start a new operation. I have to click an icon like this:	5.0	id=750260	13	False	False	bugzilla	1
id=473140	REOPENED	doxygen	general	1.5.3	Other Linux	Normal normal	Dimitri van Heesch	2007-09-03 12:06 UTC by	Denis Shergin	2008-05-06 20:53 UTC (	1 user	The following C++ code fragment seems to be processed in the wrong way with XML output, while it's OK with HTML one (the same is for classes with anonymous unions inside):struct test_struct_a { union { struct { float x,y,z; }; float v[3]; };};Doxygen produces this useless output:<definition>union test_struct_a::@0 test_struct_a::@1</definition>while there are no definitions for @0 and @1 elements.So one can't assemble back the information about anonymous union from this XML files, while these unions are processed correctly into HTML format by Doxygen.Named unions are processed without such problems.The bug reproduces with 1.4.7 (Slackware 11.0), 1.5.1 (Ubuntu 7.0.4), 1.5.3 (Slackware 11.0).	Createdtest source codeCreatedDoxyfileConfirmed. Should be fixed in the next CVS update.This bug had the status ASSIGNED, which means that the problem should be fixed in doxygen version 1.5.4 which has just been released. If this is not the case then please reopen the bug (and provide additional information if needed).This doesn't appear to be fully resolved in the XML output for doxygen version 1.5.4.Using the original example, x, y, and z are output as immediate members of test_struct_a, like:<definition>float test_struct_a::x</definition>No information about the anonymous inner union or anonymous inner struct is output in the XML output. This makes it impossible to reconstruct an accurate definition.The best that can be achieved is:struct test_struct_a { float x,y,z; float v[3];};However, an accurate definition is created for doxygen's HTML output, with anonymous union and anonymous struct in place.From the original problem...<definition>union test_struct_a::@0 test_struct_a::@1</definition>...this definition probably still needs to appear but with @0 and @1 properly defined somewhere in the XML output in order recreate the entire definition.The following also produces anonymous union definition problems in XML output:typedef struct test_struct_b { union { struct { float a,b; } s; };};XML result fragment:<memberdef kind="variable" [...snip...]> <type>struct test_struct_b::@0::@2</type> <definition>struct test_struct_b::@0::@2 test_struct_b::s</definition> <argsstring></argsstring> <name>s</name> [...snip...]Again, @0 and @2 are not defined anywhere else in the XML output.(This latest output was produced with doxygen version 1.5.5 on Windows Vista SP1.)Reopened on request.***has been marked as a duplicate of this bug. ***	8.0	id=257487	24	False	True	gerardo	1
id=750260	REOPENED	NetworkManager	general	unspecified	Other Mac OS	Normal normal	NetworkManager maintainer(s)	2015-06-02 03:12 UTC by	Chris Murphy	2015-10-05 09:18 UTC (	4 users	Createdscreen shotcontrol-center-3.16.2-1.fc22.x86_64There is a question mark icon in the upper right corner that turns out to be for the wired connection. A ? used in this manner suggests the system is confused about something, and wants me to know that it's confused, hoping I can do something about it. So I'd expect there'd be a notification or a way to get more information about what the confusion is about.	Createdjournal for this bootThe menu bar is part of gnome-shell. The "?" you're seeing though means that the connectivity check failed.[ 3920.153840] f21v.localdomain NetworkManager[826]: <info> Connectivity check for uri '' failed with 'Peer failed to perform TLS handshake'.It's either a Fedora infrastructure problem, or a NetworkManager one. Reassigning to NetworkManager.Seefor a follow-up on the icon not being self-explanatory enough.This is the same as downstream bugI have a similar problem with an unexplained question mark for a wireless connection that works fine.I seem to have this issue when I'm behind a proxy (both for wired and wireless network connections).(In reply to Bastien Nocera from)In this case, the connectivity check failed because of the SSL connection.It is anyway a bad idea to use https for connectivity checking.We fixed that upstream inand commitNote that this is largely a configuration issue. So, users must rectify their configuration, or (if the distribution installed configuration snippets) the distribution must fix the configuration file.For downstream/Fedora,this will be done.Closing BZ as fixed.(In reply to Thomas Haller from)Why? It protects the user's privacy, at least a tiny bit.If by "fixed" you mean "worked around", then yes.This really isn't fixed.(In reply to Bastien Nocera from)there is nothing private about the connectivity-check request. Especially does the HTTP header not contain fields beside: GET /static/hotspot.txt HTTP/1.1 Host: fedoraproject.org Connection: close(In reply to Bastien Nocera from)it's a bad idea, because it works bad with detecting captive portals.And a portal might not handle SSL connections at all (which means we would detect "no-connectivity", instead of "portal").If the portal does handle SSL connections it present an invalid certificate and the connection fails again (and to NM it's again not clear that this indicates "portal").Also, we warn now about HTTPS use:(In reply to Thomas Haller from)I'd rather have a fallback to HTTP in those cases where HTTPS fails, to ensure the problem is actually with the network and not with the connection, rather than actually hit HTTP in the wide internet all the time when connected.A question marks occurs also when you are behind a proxy, because the proxy settings are not being used when testing the connectivity. See this issue in the Fedora Bugzilla for more details:See also:	11.0	id=118138	8	False	False	chbm	1
id=257487	REOPENED	evolution	Contacts	3.2.x (obsolete)	Other All	Normal normal		2004-04-23 05:32 UTC by	sudhakar	2012-02-10 19:56 UTC (	3 users	Please fill in this template when reporting a bug, unless you know what youare doing.Description of Problem:When we enter the name in the full name field of contact editior Evolutionis taking last part of the name as family name.But it is not necessary thatfamily name should always come in last.Family name will also be first partSteps to reproduce the problem:1. cerate a contact with name entered as -familyname name2. view the contacts in custom view3. see for the family nameActual Results:Evolution is always showing last part of the name as family nameExpected Results:The contact editor either explicitly ask for family name or it should notassume last part of name as family nameHow often does this happen? Every timeAdditional Information:	I'm certain this is a duplicate report. Will look for original later.***has been marked as a duplicate of this bug. ***retargetting to 2.3 since 2.1 is long ago.We follow the convention name familyname.Click on Full name and in the full name dialog that appears assume last name as family name and fill in the fields.Use full name dialog to fill in the names, the problem will be solved.in my humble opinion, "name familyname" is not a convention, but just plain ignorance towards other cultures.reopening.Ok taken, but then how do we implement this.I mean how do we make sure what the user is trying to enter i.e name familyname or familyname - name.We already have the full name dialog where the user can specify all the parts of name individually.The user here is asking that evolution should explicitly ask for familyname.That is what we are doing by providing the full name dialog. The user can explicitly enter first name, middle name and last name(read family name).What else do we need to provide.Just entering familyname and name separately is not a solution. The real problem is its assuming of the fullname as "name familyname" or "familyname, name" in many places.o. It displays fullname as "name familyname" in contact editorso. If you forward a contact, the mail subject will be "Contact information for familyname, name"o. If you send mail using a contact, From: will be "name familyname <email@address>"Why don't you try other applications? Microsoft Outlook (at least Korean edition) has additional combobox in the contact editor to select one of several fullname combinations. Mozilla thunderbird has "display name" text entry in which users can edit full name. They are not pretty, but much better than wrong assumption.	7.0	id=750190	5	False	False	afranke	1
id=118138	REOPENED	balsa	general	2.3.x	Other Linux	Normal normal	Balsa Maintainers	2003-07-23 18:25 UTC by	Andrew Lau	2005-06-15 16:57 UTC (	0 users	Debian BTS:Submitter: Michael Piefel <>Summary:As a GNOME application, Balsa should use the GNOME fonts instead ofasking for specific ones.My comments:Why aren't Type1 fonts available for printing? "Courier Regular 10", thedefault body font cannot be found by Balsa on Debian GNU/Linux systems eventhough it is avaiable to all other Pango-using applications.	One short initial comment:libgnomeprint did not use same fonts names as pango last time I checked.I did some testing basically to confirm that valid Pango font nameslike "Sans 10" are invalid libgnomeprint fontnames. I am tempted tore-file this as gnomeprint-pango integration problem unless suggestedotherwise.Is this still the same in 2.4.x?tested with gnome2.4, seems like the pango alias don't show up in gnomeprint inbalsa.Now that Debian has moved onto GNOME 2.8 and beyond and Balsa 2.3 seems tofunctioning perfectly with Pango aliases, I'm closing this bug.Doh! I was looking at the wrong dialog. i.e. display fonts instead of printingfonts.src/balsa-app.h has:#define DEFAULT_PRINT_BODY_FONT "Courier Regular 11"which leaves us with the exact same problem as before. Balsa with a Type1default when gnomeprint can only use TrueType fonts. The dialog is also missingPango aliases such as "Monotype" and "Sans" which would make very sane defaultscompared to what we have now.Thanks--cvs now uses only Monospace and Sans (I also took out Helvetica as thesubject font--I haven't tried it, but mixing faces like that must look pretty bad!).Hey Peter,I'm not sure if simply substituting the printing fonts with "Sans" and"Monospace" will work. Even in 2.3.3-1 the font selection box for (Print Message-> Fonts) didn't list Pango aliases. Has that been fixed yet, or is there adeeper problem within gnomeprintui?Balsa uses GnomeFontDialog to change fonts, and the API includes no method forcontrolling the list of fonts, afaict. A quick glance atgnome_font_family_list() suggests that it explicitly excludes aliases, butperhaps there's a way to get them included. Printing is such a mystery...	9.0	id=690544	22	False	True	schumaml	1
id=774492	REOPENED	nautilus	Views: List View	3.18.x	Other Linux	Normal normal	Nautilus Maintainers	2016-11-15 20:21 UTC by	coleman.rik	2016-11-22 16:40 UTC (	2 users	Neither the 'Modified', nor the 'Modified - Time' display the date in any sort of standardized way. Values include, but aren't limited to; nothing'Today''Yesterday'<Day of Week><date> <Month><date> <Month> <Year>Often mixing values within the same directory.Occasionally it results in nonsensical results. Example: Currently 13:00, there are two files in the directory. One was modified at 12:00 today, the other was modified at 14:20 _yesterday_. Nautilus lists the 'Modified - Time' values as: 12:00 and 14:20. According to Nautilus the second file was modified an hour and 20 minutes in the future.Nautilus should provide some mechanism to set the display in some standardized format, at least as ISO date-time strings yyyy-MM-dd hh:mm:ss	Those "standard ISO formats" are for machines. The UI displays a human readable string for the date. The ISO format is in the properties of the file, right click -> properties in case you need it for some reason, as raw property of the metadata of the file.Regarding the "in future modification" please file a new bug report and we will look into it.ThanksThose formats are _not_ just for machines as evidenced by this very page:"[reply] [−]Carlos Soriano [nautilus developer] 2016-11-16 12:03:21 UTC"Having the option of viewing all modified dates in the same format makes sorting and searching much easier. Having a wide variety of non-standard date strings makes it more difficult than it needs to be.The user should be allowed to change the format of the date string presented.(In reply to coleman.rik from)Indeed! Something I don't agree with Bugzilla (apart of other millions things) :)Hm not sure, in what case makes it easier to quickly understand "Yesterday", "Tuesday" rather than 21-09-2016? The latest you have to think about it.Sorting works fine, since it's using the real ISO date to sort...and searching the same, using the search options.What I'm not sure is what use cases you are finding that you feel is better to use these ISO formats, and why right click-> properties is not enough for you. Afaics sorting and searching is not a problem.Hm not really, we would use the local format. However we present it in a more friendly way when it's a date close to the current day.While you may disagree with the Bugzilla devs, it was just presented to illustrate that large numbers of developers (and of course users) don't happen to agree with your statement that ISO date formats are only for computers.The difficulty is the mental gymnastics needed to internally convert from one to the other. As an example:You are looking for files between '2016-11-19 23:30' and '2016-11-20 23:30' because you suspect that they are invalid in some way. While there are several hundred files in that folder, there may be none, one, or a few files that fit that criteria.In the proposed scheme: Open the folder in details view, sort on modified, scroll down to '2016-11-19' browse the timestamps for files in the required window.Done.In the current nautilus scheme: Open the folder in details view, sort on modified, figure out what day 'today' is. Do the mental calculation to figure out what files fit the criteria, because it _changes_ based on _when_ you look at the folder. If 'today' is the 20th, you are looking for 'today' and perhaps 'yesterday', or maybe 'yesterday' and 'Sat.', or 'Sat.' and 'Sun.', or '19-Nov.' and 'Sun.'.Sure the current datetime string looks 'pretty', especially for _casual_ users, but it's terribly counter productive otherwise.I hope that helps,(In reply to coleman.rik from)Oh sure, I was not expecting everyone agreeing... :)This confuses me. So you will know the number of the day of the month you modified a file, but you won't know it was on "Tuesday"? That looks very unlikely, I expect people to remember more if it was "last Tuesday" rather than "the 21-10-2016 day".Well, if you think what I do is casual, yes. But really, I agree on having "Tuesday" etc. because it was also better for me. Not sure what other common cases would be terribly counter productive.Thanks for the time on explaining a case, really. However, either I didn't understood the case, or it doesn't make sense to me to remember the number of the day but not the week day.Also, I think it's uncommon to search for ranges of dates in files scrolling down. For that we have the search popover, where you can search for file types, date ranges, etc. Although it could be more inconvenient than scrolling down when you have not many files in the folder, seems also an uncommon case.Do you have another use case in mind?Personally I almost always know the number of the date I am interested in, while I almost _never_ need to know the day of the week that number corresponds to (and nautilus currently forces me to reference a calendar). My most common use case involves looking/editing/creating files that were generated with a timestamp:Log files (ex: missing a backup from 2016-11-10, what happened?)sFTP uploads (ex: client sent a batch on 2016-11-02, reprocess it)Git commits (ex: when was that file in commitlast edited)I could go on, but I think you get the idea. Timestamp == 'good', Pretty Date == 'bad'. Apparently you are not disturbed by the fact that what you are searching for mutates depending on _when_ you run the search. Personally I find it more productive to be able to always look for the same string regardless of when I happen to be looking. Most of the other file managers that I have seen have at least a setting to switch the detailed display to a timestamp for the date modified column; Dolphin, Thunar, even FileExplorer on Windows. Is there any reason why one couldn't be added to Nautilus as well?(In reply to coleman.rik from)Hm fair enough. Worth asking designers at this point then...The same reasons for adding anything new to nautilus, needs to be discused, understand the reasons and use cases and ponder the worth of it versus the complexity and maintenability added.	7.0	id=774492	6	False	False	coleman.rik	1
id=690544	REOPENED	GIMP	Script-Fu	2.8.2	Other All	Normal normal	GIMP Bugs	2012-12-20 07:49 UTC by		2016-11-18 10:09 UTC (	2 users	CreatedThe script NuggetThe attached script has been working in previous versions of Gimp. However, on 2.8 and 2.8.2 this script blocks at gimp-selection-layer-alphaIf Gimp is killed, as there is no other way around, in the memory usually remains:17190 ? R 1:08 /usr/lib/gimp/2.0/plug-ins/script-fu -gimp 11 10 -run 0The script is attached. I appreciate any help on debugging Gimp, so that it does not block and that this script start working.The script comes from:	Works fine for me in 2.8.2 on Windows XP. Does the image you run it on have to have any special features - size, layers, ... - to cause the problem?The script does not run on the image, it creates a logo. Any if I have picture open in Gimp or not, the result is the same.I can't find it in the File->Create->Logos menu... only in a new AlphaToLogo menu in a Script-Fu top-level menu (this is wrong, btw - the script should be modified to add itself to the Alpha to Logo menu in the Filters top-level menu).How do you run the script?I run the script by:Filters -> Script-Fu -> Logos2 -> Nugget...The script asks for the text, of course, but I see there is also AlphaToLogo menu for Nugget, but I don't know what is that supposed to do. I am referring always to the Logo Creation under Filters -> Script-Fu -> Logos2 -> Nugget...Ah, non-standard menu paths... :)No problems running the script this way, either. Could be the settings, can you specify some that make it fail?Problems with third party scripts should be discussed on the user mailing list or via the IRC channel unless it is definite that a script has uncovered a bug. There are too many of third party scripts and many have were written for older versions of GIMP and have not been updated by their authors for a more recent version.The attached script was written for GIMP 2.4 and needs updating. It won't run in GIMP 2.6 or later due to syntax errors in variable declarations on lines 34, 35, 36, and 171. Those variable declarations do not have an initial value.In the script attached to the bug report, there are threecalls to 'rand' (rand 4294967295) with a value that causesscript-fu to loop forever.A workaround is to use a value less than 2147483647.The bug is easily reproducible pasting(random 4294967295)in the script-fu console.With the workaround in gimp-2.8.2 the syntax errors are not fatal, the script competes successfully.Ah, so it's Linux-specific - there have been differences in rand behavior on Windows and Linux platforms before.The rand and random functions are defined in Scheme code so I don't see why it would be Linux specific. I can't reproduce the problem in either GIMP 2.6 or git master. I don't have 2.8 on my machine. I get different numbers each time I call either rand or random using an argument of 4294967295.Well, it is not exactly repeatable, I've now seen it returna random number, but after restarting GIMP and repeatingthe experiment a few times, now the Script-fu console isalways hanging on (rand 4294967295).it happens also with gimp-2.9 from git masterThank you, now we know that it is a bug in the Gimp.It is possible to reproduce the bug on a 64 bits platform(excluding Win64) typing in a script-fu console(set! *seed* 1) (random 4294967295) One problem is that tinyscheme is using the C type'long' for its integral types. 'long' is platform dependent:32 bits on 32 bits platforms and win64, 64 bits on the other64 bits platforms.Probably the random related functions were developed on a 32bitsplatform, on which LONG_MAX is 2147483647L and all integers are,one way or the other, implicitely truncated to values less thanthat. This is not true on all 64 bits platforms.I don't see the bug mentioned in. I can't reproduce under Linux with the git master version of GIMP.Can you still reproduce this with 2.8.10?Createdtest programYes, I can reproduce it with latest gimp-2-8 and master git branches.Attached a C program implementing in C the scheme functions:srand, msrg-rand and randomit permits to reproduce on a 32bit system, the behaviourobserved on 64bit system when pasting in GIMP's script-fuconsole the following snippet:(srand 1) (random 4294967295)if you do not turn optimizations on, the tail call is noteliminated and it crashes quite soon, for a stack overflow,enabling optimization I waited awhile, (longer than reasonablefor that call) before hitting Ctrl-C.Another way to convince yourself is to use guile (which I hopeis portable), in a terminal if I type (from GIMP's root folder)(tail -c +972 plug-ins/script-fu/scripts/script-fu-compat.init | head -57 && echo "(srand 1) (random 4294967295)") | guileand press Enter, it hangs.As I said in a previous comment, the problem is tinyscheme usingthe C type 'long' which is platform-dependent.CreatedProposed fix forIn 32 bits, the problem is not visible because numbers bigger than 2^31-1 are clamped:2147483647therefore typing (random 4294967295) will be internally translated to (random 2147483647) which works just fine.The actual problem here is that the random number generator can't deal with numbers that large, and correctly detects that the numbers in the requested range would be biased, but fails to realize that retrying until finding one that is not, will only lead to an endless loop. Attached is an *untested* patch that approaches the problem by extracting several numbers when requesting a range greater than 2^31-1.I don't have a 64 bit system to test this in, sorry.The approach is to generate a base-2^30 number of two or three digits as necessary whenever the range is out of the generator's capabilities.Also, please note that I'm not acquainted with Scheme enough to be sure of whether my tail recursivity is correct.The patch assumes that if the platform supports more than 32 bits, it supports at least 64 bits. I hope that's the case for all platforms that GIMP supports.I forgot to add that this patch only works for range requests up to 2^60*(2^31-1). I doubt anyone wants random numbers bigger than that, though. In order to fail in that range, it would require a machine with a suitably large word size, to start with (e.g. a 128-bit machine). So, while that is a theoretical concern, it's of no practical significance.CreatedProposed fix forv2Sorry for the spam. I said:at least 64 bits.This new patch removes that limitation.Good to see you are still around Pedro :)CreatedProoposed fix forv3I managed to test a modified version of the above patch (one with reduced values, as if prepared for a 16 bit machine). When doing so, I detected that some input numbers overflowed the ceiling calculation.The new attached patch fixes this overflow. It also reworks the loops, getting rid of some locals, and adds more explanations that will hopefully make life easier for reviewers.Furthermore, it adds full support for negative input, which the previous patch lacked. It also errors out if the input is too large (that can only happen on a 128-bit machine, probably). It fixes the case of n=-2147483648 which can never return -2147483647 in the current random implementation, and with this patch it can (though the period may be too short for that to happen anyway).Just as the former, it relies on integer constants that exceed LONG_MAX to be clamped to LONG_MAX (LONG_MIN for negatives) in order to work in platforms with word sizes other than 32 or 64 bits.Just as before, I couldn't test in a 64-bit machine, but I could test with a reduced version and it works just as well.Note that for the random generator to work properly,needs to be fixed as well. To test without applying that patch, the following modulo definition can be used to replace the existing built-in one:(define (modulo a b) (let ((x (remainder a b))) (if (= x 0) x (if (eqv? (> x 0) (< b 0)) (+ x b) x))))In most cases (barring those where #738951 applies) the output is compatible with the previous generator. The only exception in 32 bits is (random -2147483648) which I expect will be too uncommon to be a concern.CreatedProposed patch forv4Yet another revision of the patch.This one fixes the bias detection loop, which was wrong in two ways.First, the original random function fromhas a bug in that (> r slop) should be (>= r slop), otherwise some numbers would be less likely to appear than others, breaking uniformity, or may not appear at all (which is the very reason for that loop, in the first place). As a trivial example to illustrate the problem, in the original, (random 2147483647) would never produce 0 as output.Second, that loop was not prepared to handle negative input, which is the only kind of input that it receives with this patch. It just did not discard any biased output when the input was negative.As a consequence of the first fix, it's likely that the generated numbers become different after many extractions, or with certain arguments. If the very same numbers are desired for compatibility, it's better to leave that fix out. The second one is necessary, though.Most likely not specific to the Linux platforms (maybe it just doesn't happen (yet) on the Windows platforms, see). And we got a patch.This might be 2.10 material.I suggest a title change: Script-fu (rand 4294967295) hangs on machines with 64-bit longsThanks. So, I got this ready to push, any objections?Pushed to git mastercommitAuthor: Pedro Gimeno <>Date: Sun May 29 15:03:13 2016 +0200- Script-fu (rand 4294967295) hangs on machines with 64-bit longsand cherry-picked to gimp-2-8commitAuthor: Pedro Gimeno <>Date: Sun May 29 15:03:13 2016 +0200- Script-fu (rand 4294967295) hangs on machines with 64-bit longsI assume this to be fixed, please reopen if someone can still reproduce it.Review of:The patch should not have been commited as it uses numbers that are not supported by TinyScheme. The code may appear to have solved the problem reported but the code will not work as the author intended. I would have marked the patch "rejected".I'm reopening this report. The solution should not be based on the use of bignums when bignums is not a supported feature in TinyScheme.Lowering the status Importance from critical to normal as the code no longer causes an infinite loop using the test cases shown in this report.The bug only affects platforms where a long is 64-bit wide. Have you tested it in such a platform without the patch? Does (random 4294967295) work in it?You're misunderstanding the patch. It assumes longs, not bignums.In a platform with 32-bit longs, the minimum parameter 'n' is -2147483648. Therefore the returned random number (returned by internal-random in the patch) is always between -2147483647 and 2147483647.In such a platform, the first (if (>= n -2147483647) ...) will always be true, and it will return immediately without having used any number out of the range of a machine with 32-bit longs.The rest of the patch applies to platforms with more than 32 bits, and uses numbers that are valid for them, or numbers that when clamped to LONG_MIN or LONG_MAX (via atol) keep the algorithm working. The goal of version 2 of the patch was precisely to ensure that when such clamping occurred, the function was still valid, so that it also worked in platforms with a long whose number of bits is between 33 and 63 inclusive, should one exist.The code is carefully written taking into account the limitations of TinyScheme and works as intended.CreatedFollow-up patch to v4This is a follow-up to the previous patch. It does the following:- It takes the function (internal-random) out of the other function. No need to define it every time.- Removes an unnecessary (abs) call.In my previous comment, I said that the first (if (>= n -2147483647) ...) will always be true in a 32 bit platform. That's not quite right; I apologize. The patch was written long ago and I didn't remember the details very well. But the code will behave properly even when passed -2147483648 as a parameter. In that case, the second (if (>= n -1152921504606846975) ...) will be triggered, and since that number is out of range for 32 bits, it will count as LONG_MIN (that's how function atol used by TinyScheme works) and therefore it will enter that part, using 2 random numbers to produce the requested 31 random bits, as it should (because the generator used can't generate 31 full bits).CreatedFollow-up patch to v4The (abs) call was necessary, per my. Updated patch attached. Here's a diff -w of this patch to facilitate review:diff --git a/plug-ins/script-fu/scripts/script-fu-compat.init b/plug-ins/script-fu/scripts/script-fu-compat.initindex 88f5c02..1ca0d1a 100644--- a/plug-ins/script-fu/scripts/script-fu-compat.init+++ b/plug-ins/script-fu/scripts/script-fu-compat.init@@ -66,7 +66,6 @@ ; Pair (aabcd) 0.504 0.501 ; Bust (abcde) 0.3024 0.3058 -(define (random n) (define (internal-random n) (let* ( (n (inexact->exact (truncate n)))@@ -82,6 +81,7 @@ ) ) +(define (random n) ; Negative numbers have a bigger range in twos complement platforms ; (nearly all platforms out there) than positive ones, so we deal with ; the numbers in negative form.Regarding the patch inI would keep internal-random internal to random unless the intention is to add another random number generator function that will also use internal-random.What's the status here?The bug itself is fixed. What remains is just a problem of style and visibility. There's a global function that is defined by (random), called (internal-random). It could be either made local or moved out of the (random) function to make it more obvious that it's global. Kevin didn't like the latter, and I didn't send a patch for the former because I didn't want to keep spamming, and being a problem of style, it's not really important.	37.0	id=624915	10	False	False	dcbw	1
id=624915	REOPENED	NetworkManager	Mobile broadband	unspecified	Other Linux	Normal normal	Dan Williams	2010-07-21 11:35 UTC by	Bastien Nocera	2013-05-02 16:08 UTC (	2 users	Could be useful:	It depends on whether *their* settings are up-to-date... I've seen a bunch of the cyanogen files and some other ones and they aren't always up-to-date with stuff that I know is correct. So this would be kinda labor intensive but good to do.***has been marked as a duplicate of this bug. ***Still applicable?Probably.NM bugzilla reorganization... sorry for the bug spam.	5.0	id=752437	13	False	False	simon.mcvittie	1
id=752437	REOPENED	grilo	plugins	0.2.x	Other Linux	Normal normal		2015-07-15 19:52 UTC by	Simon McVittie	2015-07-21 17:24 UTC (	3 users	I'm not 100% sure whether this is a Grilo bug or a libmediaart bug, but it seems to be easier to fix via grilo-plugins, so I'm filing it here for now.Steps to reproduce:* have a Vorbis track with embedded art in Base64 in the METADATA_BLOCK_PICTURE Vorbis comment field, of type 3 (FRONT_COVER) (the example I have appears to be a conversion ofto Vorbis, I'm not sure what converter was used)* put it in ~/Music* let XFCE's Tumbler (an implementation of <>) find it and generate a thumbnail in ~/.cache/thumbnails; GNOME's thumbnailing code would probably work equally here, but I haven't tried it* let Tracker index it - tracker-extract processes it with libmediaart, and does not find folder.jpg etc. adjacent to it - in this particular situation we do not have any ability to find media art via network searches, so that possibility can be ignored* browse media objects in all Grilo sources* resolve each media object with flags including GRL_METADATA_KEY_ARTIST, GRL_METADATA_KEY_ALBUM, GRL_METADATA_KEY_THUMBNAIL and ask Grilo for metadata, in particular grl_media_get_thumbnail()Expected result:* either option 1: - Grilo returns the URL to the thumbnail from ~/.cache/thumbnails or option 2: - libmediaart extracts the embedded art and stores it in ~/.cache/media-art - Grilo returns the URL to the copy in ~/.cache/media-art* either way, the thumbnail is the embedded artOption 1 seems to be easier to implement, and it results in the track looking precisely the same in a media-oriented application as it does in a generic file manager like Nautilus or Thunar, which seems like a nice property to have. I'm working on a patch for this.Option 2 seems to be harder to achieve in the short term, because the libmediaart API seems to mostly be in terms of (artist, album) pairs, which doesn't play nicely with per-track cover images (e.g. look at The Slip or Ghosts I-IV by Nine Inch Nails). It also breaks down if the process writing to the cache and the process reading it disagree on what the relevant artist and album are.	(In reply to Simon McVittie from)It would also require that the process that extracts media art for libmediaart, in my case tracker-extract, is actually able to extract cover art.tracker-extract does not currently know how to extract METADATA_BLOCK_PICTURE (or the deprecated COVERART) from Vorbis files at all, which is why I'm seeing this bug for a track whose embedded METADATA_BLOCK_PICTURE is an album cover. Commitadded support for calling into libmediaart for Vorbis files, but did not include support for extracting art embedded in the file itself.tracker-extract *does* currently know how to extract APIC "front cover" or "other" images from MP3 files, but it always assumes they are album art; APIC does not have a way to distinguish between per-track images (like in The Slip) and per-album images.GStreamer, as used by Tumbler and probably also GNOME's thumbnailing code, knows how to extract METADATA_BLOCK_PICTURE from Vorbis, which is why I do get the desired thumbnail from Tumbler.I think using the track-specific thumbnail is likely to be the best solution here, even if tracker-extract is subsequently taught about METADATA_BLOCK_PICTURE.(In reply to Simon McVittie from)Createdlocal-metadata: only free cancellable when operation finishesresolve_album_art() already used this technique, but resolve_image()was relying on releasing an implicit reference in got_file_info()around the time it finished the operation, which is not going to workwell if we want to chain additional sub-operations that share acancellable.Createdlocal-metadata: consolidate code for allocating a cancellableIf the operation_id already has a cancellable attached to it, whichmight be in use by parallel asynchronous operations, we don't wantto allocate another one.This allows chains of async operations to call into each otherwithout error.Createdlocal-metadata: try per-track XDG thumbnails before per-album media artSome XDG thumbnailers (including at least Nautilus and Tumbler) areable to extract embedded art from media files and cache it inXDG_CACHE_HOME/thumbnails, just like they would for images and videos.In some cases the thumbnailer might support embedded art even whenthe libmediaart extractor (in my case tracker-extract) does not.If this embedded art exists, it is likely to be a better matchfor the track than the album art would be: for instance,has adistinct piece of artwork embedded in each track, none of whichmatch the album cover. Accordingly, I'm trying the thumbnail beforefalling back to libmediaart, not the other way round.Using the thumbnailer's interpretation of the correct per-trackthumbnail also has the benefit that the track is guaranteed to lookthe same in a Grilo application as it does in a general-purposefile manager, whereas with libmediaart it is possible that thethumbnailer and the libmediaart extractor might choose differentimages in corner cases.In principle,supports per-track artwork, which libmediaart could process and store;the specification recommends treating embedded art as the highestpossible priority. However, in practice libmediaart does notcurrently do this.---This is the actual bug fix. The other two patches are infrastructure to make it work without leaks, double-frees, or accidentally making some operations uncancellable.They assume thatfromis already applied (it's a simple double-free fix).(In reply to Simon McVittie from)One thing that this doesn't address is the may_resolve() vfunc, which currently says we need both GRL_METADATA_KEY_ARTIST and GRL_METADATA_KEY_ALBUM to be able to resolve GRL_METADATA_KEY_THUMBNAIL.This is no longer true: we *might* now be able to resolve THUMBNAIL anyway, or we might need ARTIST and ALBUM anyway; it depends. In particular, I have one file that doesn't index correctly due to an apparent Tracker bug, so Grilo doesn't tell me its artist or album, but Tumbler is able to thumbnail it. I would hope that Grilo would give me the cached thumbnail generated by Tumbler.How should I encode this in the may_resolve() vfunc / what is that vfunc used for? Would it be OK to say we may_resolve GRL_METADATA_KEY_THUMBNAIL for all audio files?Review of:::: src/local-metadata/grl-local-metadata.c@@ +818,3 @@ cancellable = g_cancellable_new ();+ grl_operation_set_data_full (resolve_data->rs->operation_id,+ cancellable, /* transfer ownership */Move this comment to one above the function call, for example:"The operation owns the cancellable".Review of:Looks good otherwise.::: src/local-metadata/grl-local-metadata.c@@ +535,3 @@+ cancellable = grl_operation_get_data (resolve_data->rs->operation_id);++ if (cancellable) {No need for braces for one-line conditionals.@@ +541,3 @@+ cancellable = g_cancellable_new ();+ grl_operation_set_data_full (resolve_data->rs->operation_id,+ cancellable, /* transfer ownership */Ditto the previous patch.Review of:It's not nautilus doing that, but totem's video thumbnailer.(In reply to Bastien Nocera from)This is accepted-commit_now with that change, right?(In reply to Simon McVittie from)Yes.Comment onlocal-metadata: only free cancellable when operation finishes67ea3ac, with the comment adjusted as you saidComment onlocal-metadata: consolidate code for allocating a cancellable6041724, with the comment adjusted and the extra braces removedComment onlocal-metadata: try per-track XDG thumbnails before per-album media art42a9391Fixed in master for 0.2.15(In reply to Simon McVittie from)I don’t think these questions/changes to may_resolve() were resolved?(In reply to Philip Withnall from)Yes, you're quite right. I'd appreciate any feedback on these from people who understand that API better.	17.0	id=313298	7	False	False	dimitri	1
id=313298	REOPENED	doxygen	general	1.4.x	Other Windows	Normal normal	Dimitri van Heesch	2005-08-12 07:46 UTC by		2005-10-06 03:22 UTC (	0 users	Version details: 1.4.4 and 1.4.4-20050806 CVSDistribution/Version: XPDoxyfile: EXTRACT_ALL = YES SOURCE_BROWSER = YESx.cpp:#include <stdio.h>#include <exception>void throw_fun()try{}catch(std::exception &e){ const char *str = e.what();}int var;void ref_fun(){ var = 10;}in HTML output, File members -> var, the output is: Variable Documentation int var Definition at line 11 of file x.cpp.The infomation "referenced by ref_fun()" is missing.But, if we comment throw_fun, like this:#include <stdio.h>#include <exception>/*void throw_fun()try{}catch(std::exception &e){ const char *str = e.what();}*/int var;void ref_fun(){ var = 10;}The documentation for var becomes: Variable Documentation int var Definition at line 11 of file x.cpp. Referenced by ref_fun().This is the correct output.Doxygen version is 1.4.4, and 1.4.4-20050806 CVS also has this problem.I run it on Windows XP	I just found out that is throw_fun() is legal C++ syntax also known as afunction-try-block. So as you might guess, doxygen's parser doesn't support ityet ;-)Correction. Doxygen's input parser does support function-try-blocks (I onlyforgot I already added it), but the code parser (used for source browsing andcross-referencing) doesn't.Should be fixed in the next CVS update.Yes, it is fixed in 1.4.4-20050817 CVS version. But if I change source code like this, remove const char *str = e.what(); and add empty catch(...) block: #include <stdio.h>#include <exception>void throw_fun()try{}catch(std::exception &e){ //const char *str = e.what();}catch(...){}int var;void ref_fun(){ var = 10;} The bug appears again. The documenation for var is: Variable Documentation int var Definition at line 14 of file x.cpp. Maybe the parser has some problems when it encounters catch(...) block?This bug was resolved to status "FIXED" as part of a group change. Please verifythat this bug is indeed fixed in doxygen version 1.4.5 (or later). If not thenplease reopen the bug, so it stays on my radar.No, I tested it in Doxygen 1.4.5(Windows version), but this bug still exists.1.4.5 still has this bug, Reopen it.	7.0	id=126089	5	False	False	david	1
id=740123	REOPENED	vte	general	unspecified	Other All	Normal normal	VTE Maintainers	2014-11-14 16:07 UTC by	Iain Lane	2017-02-11 18:50 UTC (	4 users	We shouldn't use a higher priority than the theme. Since Adwaita doesn't setthis, it'll still be used, and themes can override it.	CreatedAdd the style context provider with FALLBACK priorityAdwaita doesn't set these properties any more, but other themes mightwant to. Set a lower priority than the theme.Last time I checked (when I wrote this code), FALLBACK prio didn't work. Does it now?I can override the colour in my theme, and using Adwaita both the light and dark variants set the bg as theme_base_color in gnome-terminal.Any other check required?Cheers, please pushPushed as a264918ad22973c69897c559260e77cb14018235.Reverted since this caused....I mean.Let's repoen the bug then.Did anybody look into *why* that might happen?CreatedAdd the style context provider with FALLBACK priorityLet's try again. This time we have two style providers. One of them is atAPPLICATION priority and cannot be overridden by the theme. It sets the paddingon VteTerminal widgets. The other one is at FALLBACK priority and is forcolours. This can be overridden by the theme.This reverts commit.---I can't reliably reproduce this. It doesn't seem to happen ever withgnome-terminal 3.16.2 or even every time with 3.14.2-1, using affected vteversions. I got it maybe 1 in 10 times. After applying this patch (to alwaysset padding on VteTerminal), I didn't get it at all.Can others who do know how to reproduce please try?The patch inseems to fix it for me, although I've only been using the Adwaita theme so far. Any recommendations for other themes to test it with?With the old style context provider patch, the first gnome-terminal window would have the wrong size most of the time (occasionally it would have the correct size) and subsequent gnome-terminal windows would always have the wrong size.With the new style context provider patch, I have tested opening Debian's gnome-terminal 3.16.2-1 twenty times and the initial window and subsequent windows both opened with the correct size. I repeated the test another ten times with a "nearly git master" gnome-terminal (I reverted commitfor testing because it was incompatible with the Debian-installed "org.gnome.Terminal.gschema.xml") and again the initial and subsequent terminal windows opened with the correct size (which they didn't with the old patch).Further to:With the old style context provider patch (for either vte master or Debian's libvte-2.91-0) and Debian's gnome-terminal 3.16.2-1, I can't reproduce the bug at all with the Albatross, Blackbird, Bluebird and Greybird themes, but could reproduce it very reliably with the Adwaita theme. For vte master with the new style context provider patch, I can't reproduce the bug with any of those themes.I don't see why you need to split the css. It's using theme colours (@theme_{base,fg}_color) already, so doesn't that get taken from the theme?If you want to use a colour other than those for the terminal then you can't.We style TerminalScreen and set background-color and color. Without a patch like this then the theme cannot do that since it is hardcoded in a way that themes can't override to use @theme_foo_color.Can I commit this new patch?If you want to change the terminal colours, you can already do this by installing a gsettings override for gnome-terminal. Why is it necessary to provide another way? (Also, have you analysed why the original patch failed to set the border, and why the same probelm wouldn't happen for the colours, with the new patch?)How? And why is it good for theme authors to have to provide a special method for the terminal instead of theming it like they can do with everything else?I would guess that vte is relying on the padding being 1, 1, 1, 1 somehow and so it doesn't support themes setting this to anything else. So here we don't make the padding overridable, but just the colours.***has been marked as a duplicate of this bug. ***Ok, here is my suggestion from #778431Using GTK_STYLE_PROVIDER_PRIORITY_APPLICATION for the padding andGTK_STYLE_PROVIDER_PRIORITY_THEME for bg and fg color.In result gnome-terminal or mate-terminal use your proposed colors if nothing is set in gtk+ theme or can use a theme setting if available in themes.Ie.And many other themes.It looks like that Ubuntu already patched vte to allow that as there or in linuxmint theme settings will used.Please allow this for other distros too.I do not maintain vte in fedora so i can't patch it as upstream.And with current version in fedora your proposed colors are used if i mark the checkbox 'use theme settings' in gnome or mate-terminal.CreatedAllow themes to set a bg and fg color for vte-terminalerr typo...i meantI do not maintain vte in fedora so i can't patch it as downstream.Any response to the technical issue in?	21.0	id=754431	11	False	False	fanc999	1
id=126089	REOPENED	conglomerate	Code	CVS	Other Linux	Normal normal	conglomerate list	2003-11-03 10:16 UTC by	Paul Smith	2004-12-22 21:47 UTC (	0 users	Following on from, The Paste button should be insensitive whenpasting is not possible. I have a patch which does some of the work, andI'm waiting for Anon CVS to catch up before submitting it.However, the conditions for pasting to be possible are not complete, andshould be recalculated when clipboard contents change (this one requires anew signal somewhere)	Do you still have that patch? I suspect that it might no longer bedirectly applicable as I did a big rewrite of the clipboard handlingfor 0.7.9 But it'd be worth seeing in any case.Whoops! I knew there was something in here I still has to do...Looking for that patch now...CreatedAllows control of Paste sensitivty through cong_document_can_paste, which currently always returns TRUEThis patch allows the control of Paste sensitivity through placingcalls to a cong_document_can_paste fucntion, which currently returns true.More work to be done: determine the conditions under which Pasteshould be accessible, and put these into cong_document_can_paste.Also connect certain signals to force the sensitivty to be re-assesedat the correct times.From the developers mailing listYou should look at the paste routine and test for all the conditionsin which it can fail. Look in src/xmledit.c, in functioncong_document_paste_clipboard_or_selection, and potentially in thefunctions it calls....Looking at cong_document_paste_clipboard_or_selection, it looks likeit'll be affected by CongDocument "cursor_change", and by whateversignal we can set up to monitor the X clipboard.Have asked Dave on mailing list to look into signals to connect to theX clipboard.patch applied, when I have a clean compile I will CVS commitpatch now in CVS, also mailinglist informed.For convenient future reference, here's a link to a copy of the ICCCM,to the part dealing with selection handling in X:	7.0	id=702392	21	False	False	jononor	1
id=637628	REOPENED	empathy	General	2.91.x	Other Linux	Normal normal		2010-12-20 03:29 UTC by	Danielle Madeley	2010-12-21 08:09 UTC (	2 users	My account combobox looks like this: - Collabora - Salut - Something else - Something elseEvery dialog that shows an account chooser, selects 'Salut' by default, even though 'Collabora' is selectable. Off-by-one error?	Seems to work fine here, I always have the first account selected.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Did you actually fix this bug?No I too couldn't produce it in the master.But I tested it more and realized that the bug still exists and have reopened it. If I open the New Conversations dialog before the gabble contacts are loaded (salut accounts are loaded before gabble accounts) then the bug can be reproduced.If I instead wait for all accounts to load and then open a New Conversations window, then it works ideally!I think there is a time-lag in connecting to services that's playing a role here.This is not simply an off-by-one error, rather all the gabble contacts registered will be skipped in this case.	4.0	id=637628	6	False	False	gdesmott	1
id=702392	REOPENED	gtk+	Backend: X11	3.9.x	Other All	Normal normal		2013-06-16 13:41 UTC by	Martin Renold	2014-09-16 01:16 UTC (	12 users	The new motion_compression code (commit a69285da, gdk_events.c line 270) drops motion events in an attempt to improve the frame rate.This hurts precision of painting and drawing applications. MyPaint users are reporting jagged lines now (). Input devices (both tablets and mice) typically report motion at 100Hz or 125Hz, which allows linear interpolation without too many artefacts, and a good velocity estimation. With the new GTK code, we observe event rates around 30Hz.On IRC it was suggested to use gdk_device_get_history(). But this feels like a hack, especially since most platforms don't implement it.I can see how motion compression can help. In fact I have recently implemented it manually (). But it's also a very subtle problem to catch. The next fresh person writing a GTK+ drawing app may not even realize that things are sub-optimal.So... what can we do to fix this? Add a new API? How does this relate to GDK_POINTER_MOTION_HINT_MASK? Does the "motion hint" concept address a different problem, or could the new code simply hook into this already existing API?	Createdtest case, based on tests/motion-compression.cCreatedresult of motion-snake.c test (old and new gtk version)Idea: disable motion compression for applications/widgets which enable extended input events?Jon, set_extension_events() is gone in GTK3. Pressure simply works :-)I'm geting more and more convinced that this new "motion compression" has exactly the same goal as the GDK_POINTER_MOTION_HINT. From the docu:"GDK_POINTER_MOTION_HINT_MASK is a special mask which is used to reduce the number of GDK_MOTION_NOTIFY events received. Normally a GDK_MOTION_NOTIFY event is received each time the mouse moves. However, if the application spends a lot of time processing the event [...]"This is unfortunately absolutely broken for paint apps. In GIMP, we domotion compression ourselves for tools which do not need exact events,but for painting, we can't have the toolkit compress motion events.About gdk_device_get_history(), GIMP used that, but as mentioned by Martinthis doesn't help if the backend doesn't implement it.Concerning gdk_device_get_history(), here is a description of the problems:One possible way forward is to remove confusion about where the history starts and stops, and make sure it works reliably. It would have to report at least the compressed events, independent of platform-specific code.The get_history() approach has one advantage, it avoids the per-event overhead of propagating through all abstraction layers. (However, for a desktop PC and 100 motion events per second, the overhead is neglegible.)GDK_POINTER_MOTION_HINT is not even worth discussing - people have spent 20 years trying to use it (and the underlying X pointer motion hints), misunderstanding how it worksk, getting pointer positions out of order, etc.Compare: GDK_POINTER_MOTION_HINT - has to be enabled and handled in a specific (very confusing) by every single widget and application that handles motion events. Naively written applications lag. Involves round trips to the X server and is inefficient. GTK+ 3.8 motion compression - makes almost all motion handling code just work. Painting is the only exception. In no other case do you want more than one motion event per frame.Adding new API to disable motion compression for a specific GdkWindow would be conceivably possible, but since we already have motion history API, and some apps are already calling it, making it work properly is the clear path to take. (I meant to check on how well motion history was working before releasing 3.8, but I forgot to do that.)We could potentially write an implementation of gdk_device_get_history() that was purely based on discarded events and the local implementation of GDK_POINTER_MOTION_HINT_MASK and didn't touch the server at all. In theory X servers can provide more granularity for event history than is delivered in events, but other than PointerMotionHintMask (which GTK+ never uses any more and always emulates) I don't think that ever happens with Xorg.My observations on this issue:* If not ameliorated in GDK itself, this bug will basically kill paint programs which rely on it.* Motion history is an obscure corner of GDK, and is difficult to get working right for novice developers. The API is finicky. One must (apparently) shave off the first and last events to avoid duplicates (or is it just the possibility of duplicates?), and code must be written for axis mapping.* In addition, support for device history appears to be lacking on all devices and platforms I've tried it with, including with fancy Wacom input drivers for X which push events at 200Hz. I have never been able to extract motion history using gdk_device_get_history(), and I believe I am using it quite correctly, on displays where XDisplayMotionBufferSize() returns > 0.* Annoyingly, gdk_device_get_history() is no longer introspected. While MyPaint can just forward-port the PyGTK _wrap for it, other Python apps may not be able to do so as easily.It would seem much cleaner to add new API for disabling motion compression for a specific GdkWindow rather than relying on obscure, old APIs with unclear semantics and patchy existing support.My personal preference would be a simple GDK_*_HINT_MASK-style flag for disabling motion compression. Flag it with gdk_window_set_events() or gdk_window_add_events(), just like GDK_POINTER_MOTION_HINT_MASK but inverting its sense: make it a declaration that a program can cope with a higher rate of event delivery, rather than an admission that it can't or that it doesn't need to.Discussion on #gtk+ was hinting at a possible solution of adding an api that returns all the events that have been compressed into a delivered event, something like gdk_event_get_compressed_events() or gdk_event_get_history()I actually likeconst GdkEvent ** gdk_event_decompress (GdkEvent *event, guint *n_events);with code like this for the default case:if (!event->allocated || event->compressed_events == NULL) { *n_events = 1; return &event; }That way decompression never fails and is essentially idempotent. It also works for every event and with that for backends that don't support compression.That's a much nicer API than the current device history.But for painting I think coalescing will still pose a problem. Painting is CPU intensive and if we're only going to receive a package of events every 1/60s it's going to mean we're at least part of a frame behind trying to render things. If there's vsync that will easily push us back to a full frame of lag.The perfect API from my perspective would be to have a setting to get events as soon as the operating system posts them, and then if events get backed up in the main loop coalesce them into something that your decompress function could explode.Will that also return a touch or tablet device's history, or will we haveto do both? I also agree with Daniel that events should probably be deliveredin "real time" if the device is not in compression mode.I'd like to point out that the compression is enabled only for MOTION events; TOUCH_UPDATE events are not compressed.(In reply to)Is there a reason for this?Tablet events are not touch events, my gut says this should be handleduniformly tho.CreatedAdd an event_compression setting to GdkWindowBecause compression is already done per-window the GdkWindow seems like the most logical place to toggle this. Applications can set the value to false for drawing canvas type widgets without impacting anything else.(In reply to)TOUCH_UPDATE is equivalent to a move under drag, rather than a plain no-button motion event. The only three cases I can think of for handling touch update events are gesture recognition (often defeated by motion compression), drawing (ditto), and drag and drop.I don't really have much intelligent comment on the patch, not knowing GTK+ internals, but it seems like the right thing to do, to me.That patch almost looks too simple to be true, but correct :)Review of:The documentation needs some more work - I would expect it to state when this might be considered useful (for drawing applications). Our current frame clock documentation is not very detailed about motion compression - that could be improved at the same as adding a note there that motion compression can be turned off using this new api.Comment onAdd an event_compression setting to GdkWindowYeah, that's the patch we agreed on in IRC. It's not ideal for forwards compat (where we want to move into a windowless world), but it's certainly a nice approach for backwards compatibility. And since we're kind of fixing a regression here, this is probably even a better approach.Some details about the patch:>That blob should say that the default is %TRUE and events will be compressed.And as Matthias says, giving an example for when this is useful to turn off compression sounds like a good idea.>Needs g_return_if_fail(GDK_IS_WINDOW (window));Same for get_event_compression().I like this patch, an absolute KISS solution.Related to this, can we mark both GDK_POINTER_MOTION_HINT and gdk_device_get_history() as depreciated? From this discussion my impression is that they can not or should not be used currently. And because they are difficult to understand, maybe application developers should not waste time trying?(In reply to)Yes, we should do that.pushed as- Add an event_compression setting to GdkWindowIt's good to see that something has been landed. Just for reference (and in case this needs to be revisited in the future), here's why I would have instead gone with actually implementing a compression history * Window-based event delivery and event masks are something that we want to move away from. We don't always want GTK+ programs to be piles of input-only windows. * With the setting, once you want accurate history, you have to restructure your program to call queue_redraw (queue_resize) and then do the heavy lifting in the draw handler - you can't simply *do* your work in the event handler. This makes teaching people how to to properly do event handlers harder - because there are *two* ways to do it. Rather than one way, and if you want the accurate history, you make a function call to get the history. * Having a per-window setting means that if there are multiple consumers of events from a single window, they have to be in agreement. E.g., it's problematical to call this function on the window of an existing widget and then try to connect to ::motion-event because the existing widget may start lagging and misbehaving.Right, I agree with those things, so lets keep this bug open for adding device historyEvent history you mean, not device history, right?I'd still like something like into land.But as I said in, the current approach is best for backwards compat but not perfect for forwards compat. And we can add the new approach and just deprecate this one whenever we want to.Createdproposed update of documentationThe patch adds pointers to gdk_window_set_event_compression() in the relevant docstrings. It advises against using MOTION_HINT, but doesn't formally deprecate any function. Feel free to edit. After grepping the source I decided that I don't understand if MOTION_HINT is still useful for something or not (same for the X11 event history).Also, I've added code to MyPaint git, so it will use gdk_window_set_event_compression() if available, instead of the current gdk_window_add_filter() hack using XIDeviceEvent directly. I can confirm that the new API works for us.(In reply to)Thanks, great to hear that.Could we have the switch to disable motion compression in 3.8.x? It would solve the freeze introduced probably by motion compression,.we don't do api additions in stable branches, so this will be a 3.10-only fix, I'm afraid.I understand, but it may be also solved without adding a new api. Please tell me whether I made a mistake in the following reasoning:1. Problems are detected when motion event compression starts working.2. To counteract the problems, a switch is introduced, to make it possible to disable this optimization.I think those problems should also be addressed in stable branches. How about a text parameter like if (getenv("GDK_DISABLE_MOTION_COMPRESSION"))? That would be portable and would make gtk 3.8 usable. For some applications it's not usable at the moment.I hope someone will discuss the problem that I mentioned,. Possibly Owen. Maybe there are other solutions to that problem. If I am right and this bug is indeed a bug, it should be fixed, in stable branch too. If you want me to provide a proof for that bug, I'll give it a try.	32.0	id=766822	8	False	False	mclasen	1
id=766822	REOPENED	gtk+	Widget: GtkTextView	3.20.x	Other Linux	Normal normal		2016-05-23 20:05 UTC by		2017-01-18 17:12 UTC (	3 users	In using the GTK Twitter-Client corebird(), I encountered a problem with the way spaces are treated by GTK: they seem to act as non-breaking white space that prevent text from wrapping around/between words (See conversation on Twitter)Expected behaviour would be (as mentioned there, that text wraps around words when 'wrap mode' is 'word-char'.	works fine here; a testcase would be needed to figure out what is going onCreatedTestcaseThis seems to happen whenever left-margin *and* right-margin are set. Without the g_object_set call here, everything works fine.+1 encountering the same issue here, also in Corebird's DM implementation. It makes it cumbersome to type a message of more than a few words, as the window gets wider and wider to fit the text instead of the text wrapping.I think this may be fixed? Haven't had this issue when I was using the latest Ubuntu Mate.yes, it works in my version of Corebird on Gnome on Antergos as wellWe worked around it in Corebird. This bug is not fixed.it certainly works when the textview is inside a scrolled window.	7.0	id=547361	7	False	False	dimitri	1
id=547361	REOPENED	doxygen	general	1.5.7.1	Other Linux	Normal normal	Dimitri van Heesch	2008-08-11 23:46 UTC by	Sam Varshavchik	2009-07-18 21:59 UTC (	0 users	Template class definition:template<class obj> class refBase {public: void memberfunc1(); void memberfunc2(); // and so on.};With the appropriate markups, doxygen will generate a suitable documentation page for this template class.Define a specialization for this class:template<> class refBase<fdObj> {public: void memberfunc3(); void memberfunc4(); // and so on.};With the appropriate markups, doxygen will generate a separate documentation page for this specialization.The problem:Doxygen does not appear to be able to recognize links to the specialiazed template's function, from elsewhere in the documentation. Doxygen does not recognize "refBase<fdObj>::memberfunc3()" and does not turn it into a link. An explicit://! \link refBase<fdObj>::memberfunc3() \endlink//! \link refBase<fdObj>::memberfunc4() \endlinkresults in a whole bunch of errors...	Confirmed. Should be fixed in the next subversion update.This bug was previously marked ASSIGNED, which means it should be fixed in doxygen version 1.5.7. Please verify if this is indeed the case and reopen the bug if you think it is not fixed (include any additional information that you think can be relevant).Tested with 1.5.7.1, there seems to still be a problem with template specializations. Consider the following testcase://! The ref templatetemplate<typename A, typename B, typename C>class ref {public: //! The x() function void x() {}};//! The x templatetemplate<typename X>class x {public: //! The y() function void y() {}};//! The x template specializationtemplate<typename D, typename E, typename F>class x< ref<D, E, F> > {public: //! The z() function void z() {}};//! The test class//! \link x<ref<D,E,F>>::z() z() \endlink function link//!class testclass {public: //! A test function void testfunction() { x<ref<char, char, char> > xobj; xobj.z(); }};The above code compiles fine with gcc, it's valid C++. x<ref<char,char,char>>::z() is a valid function. With 1.5.7.1, "doxygen -g", giving the default Doxyfile, followed by "doxygen Doxyfile" produces a garbled \link in the documentation for testclass.	3.0	id=754468	14	False	False	nerijus	1
id=754468	REOPENED	evince	general	unspecified	Other Linux	Normal normal	Evince Maintainers	2015-09-02 14:57 UTC by	Bastien Nocera	2016-02-23 10:07 UTC (	4 users	1. Install a stock Fedora 22 with evince included2. Try to open a DjVu file (plenty of them at)3. Evince opens and says:File type DjVu image (image/vnd.djvu) is not supportedInstead, I should be asked whether I want to install the evince-djvu package in gnome-software.	This might also be a problem in gnome-books, when DjVu support is added (see).Does this work better in F23?Same message "File type DjVu image (image/vnd.djvu) is not supported".I've tried to fix this as Bastien suggested but I encountered the #759497.Ohh, Evince shows the message... I thought the message was in gnome-software. I think evince should be installing by mimetype and not by package name and then just watching for the mimetype to show up async.I'm reassigning this to evince.	6.0	id=743938	8	False	False	t.i.m	1
id=743938	REOPENED	GStreamer	gst-editing-services	git master	Other Linux	Normal normal	GStreamer Maintainers	2015-02-03 15:21 UTC by	Kyrylo V. Polezhaiev	2015-09-14 11:00 UTC (	2 users	I want to use GESProject and GESPipeline to render .xges file into the .webm one. My code looks like this: ... project = ges_project_new(uri); /// URI of XGES file GESTimeline *timeline =GES_TIMELINE(ges_asset_extract(GES_ASSET(project), &error)); if (error) ... /// I handle error here ... else { pipeline = ges_pipeline_new(); ges_pipeline_set_timeline(pipeline, timeline); gchar *uri = g_strdup_printf("file://" RAMFS_PATH "t%"G_GUINT64_FORMAT ".webm", operation_identifier); /// Yet another URI: .webmfile where output should be directed ges_pipeline_set_render_settings(pipeline, uri,GST_ENCODING_PROFILE(encoding_profile)); /// WebM with vp8 and Vorbis g_free(uri); ges_pipeline_set_mode(pipeline, GES_PIPELINE_MODE_RENDER); ... /// Here I attach some stuff to bus to handle errors, eos, etc. ... gst_element_set_state(GST_ELEMENT(pipeline), GST_STATE_PLAYING); ...I face a problem causing pipeline to work infinte time without sending error or EOS messages to bus. It happens first time I run pipeline. Second (and subsequent) pipelines seem to work without this error (or at least it becames rare). With gst-editing-services from git master error looks like this:ERROR nlecomposition nle/nlecomposition.c:2524:_relink_children_recursively: Not enough sinkpads to link all objects to the operation ! 1 / 0ERROR nlecomposition nle/nlecomposition.c:2527:_relink_children_recursively: Operation has no child objects to be connected to !!!In GES 1.4.0 error looks a bit different:ERROR gnlcomposition gnlcomposition.c:2385:compare_relink_single_node: Not enough sinkpads to link all objects to the operation ! 2 / 0ERROR gnlcomposition gnlcomposition.c:2387:compare_relink_single_node: Operation has no child objects to be connected to !!!	In some cases this problem appears on every pipeline creation. I have to restart my program and then it works without issues. Strange.Okay, have more information regarding this intermittent bug.My app works as network daemon, it gets .xges + assets in input and generates .webm at output.So, yesterday we succeeded to have two operations for single .xges scenario: first one failed, second one worked good.CreatedTwo operations with single scenariop2.dot - failedp4.dot - worksp2.xges == p4.xgesIt seems that problem is lack of several NleSource elements.Symtoms: non-connected pads, no FileSrc elements, no second input to audio mixer.The problem here seems to be a combination of GES API weirdness and how you use GES: You need to wait for the "loaded" signal before setting the pipeline to playing state. This may require a running main loop too.So it's basically a race between the asset loading and misc pipeline stuff happening.IMHO GES should at least catch this somehow and warn, but I suspect it's just not how the API is supposed to be used. I'm sure ges devs will correct me if I'm wrong.We could warn the user when the project is still loading and pipeline state is set to > READY, or even wait for the "loaded" signal in timeline.change_state vmethod between READY and PAUSED so that it just works for the user (which might imply starting the/a mainloop ourself, maybe not ideal).I will just rename that bug and reopen.ges_asset_extract returns a timeline and looks like synchronous method.Unfortunately right now I'm facing that with ges-launch-1.0 again.Symptoms exactly same. I just play a video. For a small video all works good.For a huge .AVI file I have $ ges-launch-1.0 -l p25.xges -o file:///home/mdzuser1/1.mp4Loading project from : p25.xges0:00:00.150498948 16863 0x7f3f3c004d90 ERROR nlecomposition nle/nlecomposition.c:2529:_relink_children_recursively: Not enough sinkpads to link all objects to the operation ! 1 / 00:00:00.150560253 16863 0x7f3f3c004d90 ERROR nlecomposition nle/nlecomposition.c:2532:_relink_children_recursively: Operation has no child objects to be connected to !!!<position: 0:00:00.000000000 duration: 0:00:05.000000001/>with 20%-30% probability. ges-launch-1.0 hangs in eternal loop.Heu, ges-launch does the right thing and should not be racy. Can you give use more details about what is failling?No races today,I just made dozen of subsequent ges-launch calls.Any information you want, Thibault.Few moments.(In reply to Kyrylo V. Polezhaiev from)You should always provide us with a way to reproduce :)Createdminimal xges fileCreate required asset (66 MB): gst-launch-1.0 videotestsrc num-buffers=1325 ! video/x-raw,format=I420,width=640,height=480,framerate=25/1 ! avimux ! filesink location=/tmp/video.aviI can reproduce three issues with this and the attached xges project then in git master (these are racy, so don't necessarily happen all the time, although with the above I can reproduce with 90% reliability on my box) using ges-launch-1.0 -l min.xges -o /tmp/theora.ogga) not-negotiated flow error (seems to be caused by a caps event being pushed on a pad that's flushing because of a seek).b) when (a) happens, GES crashes in ges-timeline.c 1048 (stop_tracking_track_element) at g_sequence_remove (iters->iter_by_layer). Sometimes it complains that it's not an end iter, sometimes it just crashes. Probably invalid memory access due to missing/broken cleanup somewhere.c) when running this in valgrind it hangs after:0:00:03.960214385 13865 0xce22ff0 ERROR nlecomposition nle/nlecomposition.c:2537:_relink_children_recursively: Not enough sinkpads to link all objects to the operation ! 1 / 00:00:03.962141168 13865 0xce22ff0 ERROR nlecomposition nle/nlecomposition.c:2540:_relink_children_recursively: Operation has no child objects to be connected to !!!Just putting all the info here for now in case you want to have a look or clone separate bugs.num-buffers=150 is enough, 1325 creates a ~600MB file.CreatedProject fixing the clip overlay layer priorityThanks @tim for that. One question, how did you produce that project file? We should not have a TextOverlay on the same layer as the source itself (overlays should always be on top of the actual source). We should probably error out detecting errors like that ->Fixing the project as attached leads to only getting the NNE issue.Thanks Thibault! With your fixed file, I always get not-negotiated with ges-launch (no more crashes). I still get issue (c) when running it in valgrind though - can you reproduce that too?I can reproduce, I was expecting it to be fixed by the project file fix...Also if you only want to apply an overlay on a particular source, I recommand you use a GESTextOverlay and add it directly to the GESClip (it will handle priorities for you, but won't allow you to apply a same overlay on several source / or between sources).For the recore, the:0:00:03.960214385 13865 0xce22ff0 ERROR nlecomposition nle/nlecomposition.c:2537:_relink_children_recursively: Not enough sinkpads to link all objects to the operation ! 1 / 00:00:03.962141168 13865 0xce22ff0 ERROR nlecomposition nle/nlecomposition.c:2540:_relink_children_recursively: Operation has no child objects to be connected to !!!issue was due to GstDiscoverer timeouting when running under valgrind, and us in GES not properly reporting that.I pushed those two patches to properly report that issue, and add a way to change the discoverer timeout using a env variable:commitAuthor: Thibault Saunier <>Date: Tue Jun 9 21:00:44 2015 +0200 ges: Raise an error when the discoverer returns != RESULT_OK And do not try to run the pipeline when that happenscommitAuthor: Thibault Saunier <>Date: Tue Jun 9 20:58:00 2015 +0200 uri-asset: Add a way to control discoverer timeout through envvar Making it possible to run ges-launch test under valgrind for exampleWhere did you push them? :)(In reply to Tim-Philipp Müller from)I( forgot to rebase so it did not work. It is now pushed in master :)So, is it now reproducible in 100% of launches?Can I use GES_DISCOVERY_TIMEOUT as temporary workaround?The Not Negotiated error is now 100% reproduceable.You should use GES_DISCOVERY_TIMEOUT when running inside valgrind (outside valgrind it should never timeout).So, is just waiting for a "loaded" signal from project being extracted is enough to forget about this?It is the correct way to handle it yes. I agree the API should be more explicit about that, it will all be reworked for 2.0 but we should try to figure out a way to make it more obvious in the current context.Btw, are you on IRC? it would be simpler to talk live :)(In reply to Thibault Saunier from)Why? It can easily timeout outside valgrind.It can falsely timeout after 1 minute? I tend to doubt it.No, it timeouts after one GST_SECOND you set in case of errno != 0 :)which is the case if GES_DISCOVERY_TIMEOUT is not set:which is the default case :-)	31.0	id=708942	19	False	False	bugzilla	1
id=708942	REOPENED	gnome-control-center	Background	unspecified	Other All	Normal normal	Debarshi Ray	2013-09-27 15:49 UTC by	William Jon McCann	2013-11-20 16:45 UTC (	1 user	At one point we excluded screenshots from the Pictures selection. That seems to have broken since I see them now.	/* Ignore screenshots */ software = gdk_pixbuf_get_option (pixbuf, "tEXt::Software"); if (software != NULL && g_str_equal (software, "gnome-screenshot")) { g_debug ("Ignored URL '%s' as it's a screenshot from gnome-screenshot", cc_background_item_get_uri (item)); g_object_unref (pixbuf); g_object_unref (item); return; }Attach one of the screenshots, it seems to work fine here.CreatedscreenshotFor a screenshot I had saved:$ ./foo '/home/hadess/Pictures/Screenshot from 2013-10-09 20:08:03.png' Software used: gnome-screenshotFor your screenshot:$ ./foo '/home/hadess/Pictures/foo.png' Software used: (null)The software I used (which mimics what the background panel does):// gcc -o foo foo.c `pkg-config --libs --cflags gdk-pixbuf-2.0`#include <gdk-pixbuf/gdk-pixbuf.h>int main (int argc, char **argv){ GdkPixbuf *pixbuf; pixbuf = gdk_pixbuf_new_from_file (argv[1], NULL); if (pixbuf == NULL) { g_print ("Invalid file %s\n", argv[1]); return 1; } g_print ("Software used: %s\n", gdk_pixbuf_get_option (pixbuf, "tEXt::Software")); return 0;}Seems that either whatever you're using to save screenshots is not setting the tEXt::Software bit, or something you used to manipulate the file isn't.Yeah then I think we need to do more. If I use gimp to crop a screenshot it shows up in the background chooser. This isn't what we want.I'm also seeing 16px pngs in there too. I think we should have a minimum size - I thought we had that at one point.(In reply to)It's hardly our fault if GIMP loses metadata when cropping the file though.We can certainly do that more easily.(In reply to)We may want to start using a subdirectory for screenshots then. Or go back to knowing that "Screenshot *" images are screenshots.Createdbackground: Consolidate exit pathCreatedbackground: Ignore images that are too small(In reply to)git log -S gdk_pixbuf_get_width panels/background/ got me these commits and I could not locate anything like that in them:commitAuthor: Bastien Nocera <>Date: Mon Aug 19 23:40:26 2013 +0200 background: Fix memory corruption when creating preview When using a single screen, the captured area was too small, and we were copying data from out-of-bounds of the pixbuf area.commitAuthor: William Jon McCann <>Date: Tue May 22 11:34:20 2012 -0400 background: New background panel design Implement a new design for the wallpaper selection.commitAuthor: Bastien Nocera <>Date: Tue Dec 14 20:29:33 2010 +0000 background: Add emblem for slideshow previews Though for some reason the icon ends up being tiny...commitAuthor: Thomas Wood <>Date: Tue Aug 10 15:26:07 2010 +0100 Add initial implementation of "background" panel The background settings panel provides a way for users to change the desktop background by selecting an image and/or colour.Review of:::: panels/background/bg-pictures-source.c@@ +155,2 @@ g_error_free (error);+ goto out;That will warn if the image failed to load as you can't run g_object_unref() on NULL objects.Review of:::: panels/background/bg-pictures-source.c@@ +271,2 @@ g_object_set_data (G_OBJECT (stream), "item", item);+ gdk_pixbuf_new_from_stream_async (G_INPUT_STREAM (stream),We really don't want to do that. Loading huge JPEGs for example will skip over a lot of data and a lot of decoding when loaded at a specific size. This will make the chooser *much* slower.Hopefully gdk_pixbuf_get_file_info() doesn't decode the whole file, and an async variant could be used instead.(In reply to)I am using g_clear_object, not g_object_unref. Or am I missing something?Comment onbackground: Consolidate exit pathYou're right, never mind.Comment onbackground: Consolidate exit pathThanks for the review.Createdbackground: Consolidate exit pathReview of:Looks fine.Createdbackground: Ignore images that are too smallThis one uses a synchronous call to gdk_pixbuf_get_file_info. I will change it to an async call on a subsequent patch because an async variant of that API is not in gdk-pixbuf, yet.Createdbackground: Fix a memory leak when add_single_file failedCreatedbackground: Use the asynchronous version of gdk_pixbuf_get_file_infoComment onbackground: Consolidate exit pathThanks for the review.Review of:Please merge that in the original patch that checks for small widths/heights, no need to have 2 separate patches for that.Review of:At first glance, looks fine.Comment onbackground: Fix a memory leak when add_single_file failedThanks for the review.	24.0	id=777733	6	False	False	egmont	1
id=777733	REOPENED	vte	general	unspecified	Other Linux	Normal normal	VTE Maintainers	2017-01-25 09:16 UTC by	Guardfather	2017-01-26 23:41 UTC (	1 user	Createdzip of scriptreplay log file with accompanying timing file-----Original description as posted on launchpad: I wrote a Python 3 script which scans directory trees, and outputs various filenames (with path) to the terminal, as the files are being hashed. When the following filename was to be printed, gnome-terminal stopped printing output with the cursor where the question mark would have been printed out: ._13 Trapezoid singâ?€.mp3 When I interrupted the program using keyboard interrupt, much more output was displayed, indicating the script had continued to run, despite the output stopping after "â". I navigated to the directory and tried using ls, which was able to print the filename without issue. I tried using: find `pwd` -name *Trapezoid* This also displayed the filename, with full path, correctly. I tried running the script with terminator, which had no problem printing the filename and continuing on with the rest of the output as expected. Terminal output at freeze, and after keyboard interrupt shown in the cropped/pixelized screenshots here:Gnome Terminal version: 3.18.3 Ubuntu 64 Gnome Edition-----Updated information after being contacted by a Mainstream gnome-terminal/vte developer/contributor:If I scan only the directory those files are in, the output does not hang. Instead, it displays the filename with a rectangle and what appears to be 4 numbers inside of it, in two rows (0 0, 9 0). If I copy the filename and paste it into Thunderbird here, it shows the name properly, without the rectangle between the â and €. Cropped screenshot (from subset of directory tree I mention later) here:(NOTE: while pasting this section, I see the character is included just to the left of the euro symbol in this text box. This was not visible in Mozilla Thunderbird.)If I scan the entire parent directory, the output hangs as reported.This occurs in ROXTerm as well as gnome-terminal.I was not running screen or tmux.gnome-terminal is set to use UTF-8 encoding.I was able to reproduce the bug with that subset of the directory tree. However, it doesn't hang nearly as long. Apparently the output hangs until the script finishes, however long that may be. This time it was a matter of seconds. I did not attempt any other interaction with the terminal window, such as resizing or using the menu.This file was downloaded from an unknown source, several years ago. It was likely saved to an NTFS partition, using Windows XP or Windows 7. It is still on an NTFS partition.I'm attaching the script replay/timing files from a scan of a subset of the directory tree. This scan produces the bug, but it doesn't stay hung up as long due to the much smaller directory tree. The script.log file was edited to replace the real username with "username".	The special character I mentioned was visible in the text box, does not show up on the webpage after being submitted. It is shown in the last screenshot from a log file, though. In the terminal window, that character overlaps a bit on the euro symbol. Here's a screenshot of that:The filename contains a control character, U+0090 DEVICE CONTROL STRING, which means that vte will eat up the output until it encounters the sequence terminator.So not a bug in vte; if there is a bug here, I'd say it's in coreutils which might consider escaping control characters in filenames when printing to a pty, instead of outputting them verbatim.Actually coreutils:ls already does this. I missed that you're using your own (python) script; you may want to do the same as ls.Ah. Thanks. I'll look into that. Being that output was fine with other terminal apps like Terminator, I assumed the it was a bug with gnome-terminal. I'll look into what I can do with my code to escape problematic character(s).Thanks again.Terminator is irrelevant. It uses the same widget as gnome-terminal, either the current version (in which case it behaves the same as gnome-terminal) or an ancient one (in which case we just don't care).xterm is our reference. Could you please check xterm's behavior?If xterm is different from gnome-terminal and does not hang, we should see what it does differently, e.g. terminates the device control string at newline, or after a certain amount of data etc., which we should incorporate in gnome-terminal. If xterm hangs too then we're good.xterm does not hang.I guess we should further investigate then.Based on output, it looks to me like xterm omits the character. Comparison of screenshots of the filename output:gnome-terminal hangs on the U+0090 character, and displays it when script finishes.terminator doesn't hang on the U+0090 character, but displays it.xterm doesn't hang and doesn't display the U+0090 character.gnome-terminal version: 3.18.3Terminator version: 0.98xterm version: 322Just occurred to me: If I remember correctly, xterm doesn't recognize C1 control characters in UTF-8. So we should either try with its C0 counterpart in xterm, or with a legacy (e.g. latin-1) encoding.The behavioural difference between terminator and g-t is probably due to terminator being the old gtk2 version.(In reply to Egmont Koblinger from)Here xterm swallows everything between DCS (ESC P) and ST.Oh my goodness...Random findings, questions, crazinesses, whatthehecks etc. (vte git head-ish versus xterm-324 shipped by Yakkety):- scriptreplay does not properly replay the attached log, it finishes with "/media/username/WD2TB1/b" and the last few lines are missing. At least it's the same in xterm, vte and konsole. I guess it's a scriptreplay bug. I'm lazy to debug (run "scriptreplay" under "script" to see what it does, haha).- xterm indeed does not support C1 in UTF-8 at all. ctlseqs.txt explains the reason: for some reason (I don't get it) it claims that it would need to decode the stream twice, or recognize C1 prior to decoding UTF-8, that is, it would still be the 0x80 - 0x9F bytes (0x90 in this concrete issue), which (this one's obvious) can legally occur inside a valid UTF-8 character. Konsole and we happily decode UTF-8 first and then look for C1, that is, U+0080 to U+009F, in particular for U+0090 now.- Even if xterm is started up with "-en iso8859-1", it still does not recognize C1 (0x90 and friends, single bytes). It does, however, if I also specify the "+u8" flag. This contradicts its manpage: "[-u8] and the utf8 resource are overridden by the -lc and -en options...".- Trivia: The attached file is valid UTF-8, and contains several U+0090 characters. One of the bytes of the UTF-8 encoded U+0090 is actually a 0x90, so if the same file is interpreted as latin1 then it still contains C1 DCS characters. (It's obviously not necessarily true the other way around.)- As opposed to OSCs, the DCS (device control sequence) needs to be terminated with ST, BEL is not accepted.- What is so special about displaying the prompt that makes it unstuck from this crazy DCS mode, that is, terminates the DCS? Obviously a command like cat script.log; sleep 10; echo -n 'joe@foo$ '; sleep 10does not finish the output for 20 seconds. So it's not about the prompt itself, but perhaps changing some stty setting that makes it unstuck? Which one and why?- LC_ALL=en_US xterm -en iso8859-1 +u8:(this operates in 8-bit and recognizes C1) cat script.log ; sleep 10prints the entire file immediately, as opposed to VTE in iso8859-1 which, as the reporter said, hangs until the prompt is shown. Why?Let's copy the first problematic line only (line 66) to a new file and play with that.- Remove the 0x82 byte (part of the Euro symbol), cat line66-0x82-removed; sleep 10Now xterm hangs and swallows too, just as VTE.- Add this byte back. Change C1 (0x90) to C0 (ESC P). cat line66-c0; sleep 10Does not get stuck again, while VTE does.- LC_ALL=en_US xterm -en iso8859-1:We've removed C1 support; repeat the previous command. It gets stuck.- Replace the 0x82 byte with ESC B (C1 -> C0 counterpart):Does not get stuck.Anyone still following me?Looks like xterm terminates a DCS upon encountering another C0, or C1 (if support for that is enabled) character. VTE does not.This might result in different behavior in other invalide(-ish?) sequences as well, e.g. this also behavies differently: echo -ne '\e]0;newti\eBtle\a'; sleep 10Back to the question of why is the prompt so special: No, it is not, and no stty setting is in the game. If you have a terribly simple prompt then it's not displayed, the terminal emulators are still waiting for DCS to be terminated. Even VTE seems to abort the DCS mode on encountering the escape character, which is emitted by all the OSC 0 / 7 and also the various colors of the prompt.Huhh...Looks like I've spent two hours of crazy debugging just to pretty much rediscover.	11.0	id=42727	17	False	False	luis	1
id=42727	REOPENED	bonobo	libbonobo	unspecified	Other Linux	Normal normal	Michael Meeks	2000-09-03 12:05 UTC by	Maciej Stachowiak	2006-08-15 16:06 UTC (	1 user	Not all of them, each time it's detected that even one has changed.There's a FIXME comment to that effect in od-utils.cIF you configure OAF to look for config files in a lot of directories, this maymake a difference, but perhaps it's unimportant------- Additional Comments From2000-11-16 20:48:39 ----NO reason this is necessary for 1.0, IMO------- Bug moved to this database by2001-09-09 20:38 -------	Reassigning bonobo-activation bugs to michael.Michael, is this still relevant?yes.And is it still relevant now that OAF is dead? I couldn't find the equivalent ofod-utils.c easily in libbonobo/activation-serverThere's no comment to that effect in object-directory-config-file.[ch] or in bonobo-activation-server-main.c so I'm closing this and assuming it has been fixed or is irrelevant now.grep is your friend. I found it now in object-directory-corba.c line 196. reopening	6.0	id=652936	11	False	False	bugzilla	1
id=652936	REOPENED	l10n	Hungarian [hu]	unspecified	Other Linux	Normal normal	Gabor Kelemen	2011-06-19 13:07 UTC by	Gabor Kelemen	2016-04-07 14:11 UTC (	1 user	CreatedScreenshot of the problemThe Hungarian translation of the Universal Access and System Info icons happen to be long. The control center shell however does not show the end of these long words, it is cut down like this: Akadálymentes|ítés and Rendszerinform|ációk. This is also visible with English when you select the biggest text size in the Universal Access panel.Would it be possible to dynamically resize at least the caption part of the icons to accommodate the longest word in the string?	Thanks for the bug report. This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***commit b3be07609a9bae43947ee3e59d8982a7715c9acfAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.	2.0	id=768600	6	False	False	mcatanzaro	1
id=768600	REOPENED	epiphany	Preferences	3.20.x	Other All	Normal normal	Epiphany Maintainers	2016-07-09 00:13 UTC by	Christian Stadelmann	2016-07-11 16:05 UTC (	1 user	Steps to reproduce:1. set org.gnome.epiphany.lockdown.disable-history to true2. start epiphany, browse3. close epiphany4. start epiphany5. look at history or new tab pageWhat happens:History persistsWhat should happen:History should be goneAffected version:epiphany-3.20.3-1.fc24.x86_64	The setting has a confusing name, but it's actually used to remove the back/forward navigation buttons (useful for web kiosks).We've had several requests to add a way to disable history, perhaps with a setting to always open the browser in incognito mode. I'd be interested if anybody wants to work on something along those lines, but let's do it in a different bug.How about adding a documentation to those dconf keys then, so that users of e.g. dconf-editor can read them?Yeah, we should add descriptions for the gsettings keys, indeed.	3.0	id=756408	7	False	False	mbiebl	1
id=756408	REOPENED	gnome-shell	system-status	3.18.x	Other Linux	Normal normal		2015-10-11 22:23 UTC by	Michael Biebl	2015-10-13 14:44 UTC (	2 users	The new user menu in 3.18 is a regression usability wise compared to 3.18 because it became much too small for no good reason.SeevsNotice how the entries are elipsized without a chance to read what's there.I also think it's a bad idea that the text labels were dropped (VPN, Battery, Wi-Fi etc)	Thanks for taking the time to report this.This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***Here's my 2 euro cents worth of thoughts on this: - translated strings are (in my limited experience) often longer then english version and will now have problems to fit. (The Mobile broadband item doesn't seem to even fit in the english version.) - not sure I agree that having the meaning of the icon spelled out is necessarily better (because these icons are IMHO pretty well recognized brands), but see next point(s).... - My impression is that gnome designs often use "bigger items are easier to click" guideline (fitts law?), which the new user menu design seems to contradict. - I fail to see the reason why you'd want to save space on the user menu, since if when I pop it up it's because I actually want to look at it (and wouldn't mind if it took up most of the screen) and nothing else. First thing I do before looking elsewhere is closing the user menu again (unless the actual I clicked made it automatically close ofcourse). The design of the user menu automatically closing seems to indicate to me that it's not something that you want to have open while focusing on some other area/window on the desktop.If someone could point me to where I could read up on the thoughts behind the 3.16->3.18 design changes that would be interesting to study.While the overlong labels is the same as 708472, dropping valuable information like Bluethooth etc is the other aspect of this bug report.So I took the liberty to re-open it.thats the problem with munging multiple issues in one report - now you've reopened it, but the title still talks about the issue from	4.0	id=351474	16	False	False	aaronleventhal	1
id=351474	REOPENED	at-spi	docs	unspecified	Other Linux	Normal normal	At-spi maintainer(s)	2006-08-15 15:03 UTC by	Peter Parente	2014-11-14 23:05 UTC (	7 users	At present, there are no documented recommendations about what data should be provided in the detail1, detail2, and any_data fields for a given event. Inspection of events using at-poke suggests that gail uses the fields in the following manner:Problems can arise across toolkit and application implementations because there is no standard reference for 1) what data should be provided with an event and 2) what fields should contain the data. For example, gail's implementation of object:text-changed:inserted gives the insertion index in detail1, the length of the inserted text in detail2, and the text itself in any_data. There's nothing to stop another implementation for swapping the data in detail1 and detail2, or leaving out any or all pieces of information.The firing of many events is weakly specified on the server side too. atk provides some methods for state and focus change events, but g_signal_emit_by_name is used in many cases. For instance, consider the following Firefox code:The g_signal_emit_by_name function in use here takes an arbitrary set of parameters. It appears that a bridge implementation must interpret the first two signal parameters as integers and the last one as the any_data to properly map to at-spi. But the user of g_signal_emit_by_name can stuff the event with whatever they want.The proliferation of different uses of event attributes can wreak havoc on ATs. The point of at-spi is to make it easy for an AT to obtain information about accessible apps through a single, standardized interface. If gail provides event data one way, Qt another way, Mozilla yet another, etc., the utility of at-spi is diminished.I suggest we create some recommendation for how to populate event fields. The gail implementation is not a bad start. A discussion might include the following:* Does the gail implementation make sense for other toolkits?* What should happen if a toolkit can't follow the recommendation?* What event information is reasonable for a toolkit to provide?There are other places of weak specification as well. I'm filing those as separate bugs. This is the most important of the lot.	[Resetting QA Contact to newly introduced "". Reason: So far it was impossible to watch changes in at-spi bug reports without following all the specific persons (Li Yuan, Bill Haneman, Jeff Wai, ...) and also their activity outside of at-spi reports.IMPORTANT: Anyone interested in following all bug activity (including all maintainers) must watch the "" dummy user by adding it to the 'Users to watch' list under Preferences->Email preferences. This is also the default procedure nowadays in GNOME when setting up new products.][Mass-resetting default assignee, see. Please reclaim this bug report by setting the assignee to yourself if you still plan to work on this. Thanks!]I'm going to go ahead and close this because it concerns a very old version.Feel free to open a new bug if the problem persists.Reopening.If memory serves me, at the beginning of your GSoC program some of the work you and I did around AT-SPI2 event listeners included me saying things like "what detail1, detail2, and any_data may contain is something that you learn by seeing what you receive and then sharing via oral tradition. ;)" It's sad that this concerns a very old version, but it still persists to this day.Rather than open a new bug, I'd rather not close this bug which has some discussion and history for reference.	4.0	id=746889	10	False	False	jana.svarova	1
id=746889	REOPENED	gnome-user-docs	sysadmin-guide	3.14.x	Other Linux	Normal normal	Jana Svarova	2015-03-27 14:00 UTC by	Jana Svarova	2015-05-18 09:31 UTC (	1 user	Createdpage on enabling or disabling some or all online accountsHello,This procedure explains how to enable or disable some or all online accounts.Any comments are more than welcome. Content-wise, the page has been reviewed by Debarshi Ray. jana	CreatedGOA - online accounts, lockdownHello,I have made significant changes to the document to improve it,thus marking the previous patch "obsolete".Thank you for your comments,janaReview of:Looks good to me, Jana. Good job!Thank you very much, Petr.Pushed to master: commitjanaReview of:Petr: It's clear that Jana uses a different page as a template for this one because the parts which are common between a number of the sysadmin guide pages use good style. Unfortunately, all of Jana's additions uses a different style. Petr, why did you let this through the review?I would like the documentation to be as non-intimidating as possible to newcomers, of which keeping to a consistent style is a large part. This page now needs tidying at the very least. New pages especially should be in a good condition when they get committed for the first time.It's now been over 2 years that there have been issues with poor quality reviews. Either the quality of the reviews needs to improve to match the rest of the team or you should not review new pages. Poor pages being let through review cause more work for the rest of the team, which is problematic as there is already strain on the team because of other time commitments.Review of:Jana: please include the bug number and the reasoning for the new page in the commit message. Also, please make sure to use the same indentation style as the rest of the project. The rest of the comments are in-line.::: system-admin-guide/C/lockdown-online-accounts.page@@ +19,3 @@+ <desc>Enable or disable some or all online accounts.</desc>+ </info>+ <title>Allow or disallow online accounts</title>I think it makes more sense to talk only about enabling and allowing in the titles, not both@@ +22,3 @@++ <p>The <app>GNOME Online Accounts</app> (GOA) are used for+ setting personal network accounts which are then automatically integrated withWhat do you mean, "are used for setting"?@@ +24,3 @@+ setting personal network accounts which are then automatically integrated with+ the GNOME Desktop and applications. The user can add their online accounts,+ such as Google, Facebook, Flickr, ownCloud, etc. via the Do not use Latin@@ +31,3 @@+ <item><p>enable all online accounts;</p></item>+ <item><p>selectively enable a few online accounts;</p></item>+ <item><p>disable all online accounts.</p></item>Our style is to not use punctuation at the end of a list item@@ +50,3 @@+ information for the <sys>local</sys> database containing the following configuration:</p>+ <list>+ <item><p>For selectively enabling a few providers only:</p>"To enable specific providers:"@@ +52,3 @@+ <item><p>For selectively enabling a few providers only:</p>+ <screen>[org/gnome/online-accounts]+whitelisted-providers= ['google', 'facebook']</screen>Explain where these come from. For example, why "google" instead of "Google"? Where can I find a full list?Jana: also, are online accounts enabled or disabled by default?	6.0	id=721217	11	False	True	ridha.muhamad1981	1
id=721217	REOPENED	dia	general	0.97.x	Other Mac OS	Normal normal	Dia maintainers	2013-12-29 23:29 UTC by	ridha	2013-12-31 12:07 UTC (	0 users	just installed it today.after i selected the part, i could not delete it. currently i use "cut" to delete parts. i tried other buttons also to delete but could not. Mac OS is japanese language. Hope you could help me. Thanks!	the title should be " cannot delete selected part using delete key or edit-delete"The issue came up on the mailing list already, please see the following thread:Let me repeat the main question:Fn+Backspace can indeed delete the selected object.If you used the menu entry Edit/Delete it still does not work.So there is a bug. But does Fn+Backspace not work for you?What key combination did you try?Ops, thanks, got it! only the edit-delete still not functioning.but, don`t use that, so its ok.So there is a least the edit-delete bug -> reopening. And to repeat my question:What key combination did you try? (Command-Backspace?)on MAC keyboard, fn+delete button then its OK.	5.0	id=778888	6	False	False	dboles	1
id=778888	REOPENED	gtk+	.General	3.22.x	Other All	Normal normal		2017-02-18 20:33 UTC by		2017-02-20 23:41 UTC (	2 users	With GTK 3.22.7 I am now getting the following warning when I launch my application from the console in OS X. The warning was not present in GTK 3.20.3.Gtk-WARNING **: Could not load a pixbuf from /org/gtk/libgtk/theme/Adwaita/assets/check-symbolic.svg.This may indicate that pixbuf loaders or the mime database could not be found.	I've seen this on Windows, and I believe I solved it by literally copying the relevant stuff from the MSYS2 equivalent of /usr/lib/gdk-pixbuf/blah/loaders - worth a try anywayI just put this, and the various other problems I've had, down to how brain-warping it is to reliably package - or run from a file manager or PATH-less terminal - applications that end up expecting files to be in a Linux-like file structure somewhere on the PATH. You're in for a world of fun as you try to work through that one... from DLLs, to GSchemas, to pixbuf loaders.I should really write up a wiki page on that or something.(In reply to Daniel Boles from)I mean to the same directory as your executable. At least on Windows, most files seem to be searched for there, and then in the various elements of PATH. But you have to now where in the current directory to put them... off the top of my head: * ./share/icons * ./share/glib-2.0/schemas/gschemas.compiled * pixbuf loaders as mentioned * probably other stuff I forget.I _think_ that warning you got is benign in the sense that you don't end up with missing images, but it falls back to the PNG version instead.Course, this all assumes OS X is broadly similar. I haven't tested that in ages.I'm not missing any images. The warning itself appears to be a regression. I am putting all the icons I need in the OS X bundle. The ones that are used for checkmarks are from here:/usr/local/share/icons/Adwaita/16x16/status/checkbox-checked-symbolic.symbolic.png/usr/local/share/icons/Adwaita/16x16/status/checkbox-symbolic.symbolic.png/usr/local/share/icons/Adwaita/32x32/status/checkbox-checked-symbolic.symbolic.png/usr/local/share/icons/Adwaita/32x32/status/checkbox-symbolic.symbolic.pngI don't get the warning when I run the application from my developer machine where I have compiled GTK and installed it to /usr/local. But the odd thing is that the file from the warning doesn't exist on my developer machine. In fact, I searched the entire filesystem for check-symbolic.svg and couldn't find it anywhere.(In reply to draymond from)because of what I said above: everything you need will be in the PATH in this case, so no problem.because the path you quoted is a GResource path. The standard themes are embedded in the library for quick access. But gdk-pixbuf fails to load this SVG, probably because the loaders are not in your path on the affected machine.I'm sorry, Daniel, I don't understand your last comments. The icons I need *are* present in my application bundle where my application can find them. The warning makes no sense because it is looking for a file that doesn't exist on my users' machines *or* my developer machine.Let me try again:(In reply to draymond from)This is not a file path, but rather a GResource path:That file necessarily exists in the GTK+ shared library.but my theory is that you are getting that error on your dev machine because, in order to parse the SVG, we need a gdk-pixbuf loader for that format... but if you do not have that loader in the path, then it will not be able to use it, so you'll get the warning.Try putting /usr/lib/gdk-pixbuf-2.0 or equivalent into the PATH of the machines that are annoying you right now, and see what happens.That doesn't fix it. But I'm not surprised because there are no executable files there:Dans-Mac-2:~ Dan$ find /usr/local/lib/gdk-pixbuf-2.0//usr/local/lib/gdk-pixbuf-2.0//usr/local/lib/gdk-pixbuf-2.0//2.10.0/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-ani.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-ani.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-bmp.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-bmp.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-gif.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-gif.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-icns.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-icns.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-ico.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-ico.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-png.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-png.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-pnm.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-pnm.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-qtif.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-qtif.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-svg.a/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-svg.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-svg.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-tga.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-tga.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-xbm.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-xbm.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-xpm.la/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders/libpixbufloader-xpm.so/usr/local/lib/gdk-pixbuf-2.0//2.10.0/loaders.cacheShared objects _are_ executable, by a lot of definitions. *.so are are the loaders.Anyway, that doesn't seem to be it, and I'm out of ideas for the moment.Daniel I followed your line of inquiry and I was able to suppress the warning as follows:export PIXBUF_BASE=<application bundle resource directory>export GDK_PIXBUF_MODULE_FILE="$PIXBUF_BASE/gdk-pixbuf-2.0/2.10.0/loaders.cache"cp -R /usr/local/lib/gdk-pixbuf-2.0 $PIXBUF_BASEsed -i '' 's/\/usr\/local\/lib/$PIXBUF_BASE/' $GDK_PIXBUF_MODULE_FILE<execute application from bundle>I also had to copy librsvg-2.2.dylib (and it's dependencies) to my application bundle. It appears to be loaded dynamically at runtime so my dependency checking script doesn't detect it.This is a lot of extra work and it increases the size of my application bundle. If there is no benefit to this (other than suppressing the warning) then in my opinion the warning should be removed. Do you agree?(In reply to draymond from)Oh yeah, now I remember that. Those were an annoying few hours. Dependency Walker did not tell me that librsvg, libcroco, and (IIRC) libgzip were required. I had to use Process Monitor and literally check what files it was searching for in the PATh...That is hardly ideal. But I don't know enough about library loading to say whether it can be improved.It seems that GTK+ happily falls back to the PNG version of the asset, which is preferable for various other reasons, such as runtime speed.I would say that rather than suppressing the warning, it should simply not run into the problem: not try to load the SVG if a corresponding PNG is available. In cases where an SVG genuinely is required, it would be a valid warning.I seem to recall some commits about SVG vs PNG precedence for assets, but IIRC they were before 3.22.7. Maybe they were about slightly different issues or didn't cover everything.relevant commit:(In reply to Daniel Boles from)I said this before realising how small the fallback PNGs are. Then the SVG is preferable if scaling/HiDPI/etc are used.The problem with your idea of removing the warning (from gtkicontheme.c) altogether is that it would then not warn about legitimate problems, where fallbacks don't exist, and where the user had not realised they had missed something out. They would then have to wait until someone noticed the icon was missing, rather than being alerted right away.Suppressing that warning only in cases where the failure is benign would require an extra argument to the warning function, icon_info_ensure_scale_and_pixbuf(), to tell it whether it should print the warning or not - and, in turn, that would seem to require a change to the public API of gtk_icon_info_load_icon(). Which probably isn't likely.last bit of brain(storm|dump)ing for the day(In reply to Daniel Boles from)I guess a new private copy of load_icon() could be created and pass a 'do not warn' flag to ensure_scale_and_pixbuf(), then this could be told not to warn if the theme has multiple icon sources available (unless the last fails too). I don't know enough about theming to say whether that's 100% feasible or whether the theme developers would want to do it.The warning is not "spurious": it's there for a reason, to warn you that your installation is missing required files. There is no guarantee that the icon theme will have a fallback in place because icon themes come and go.You should install librsvg and its GdkPibxuf loader module, and you should ensure that the loaders cache file is generated when deploying your application.Yes there is a guarantee and icon themes don't come and go because I package them in the application bundle. Emmanuele, your comments seem to be Linux-centric but this bug report was observed on OSX.As far as I can tell this warning is a regression because all it accomplishes is it annoys my users and it forces me to do a lot of extra work generating an application bundle which is now larger than it needs to be.Also, why is this not a problem on Windows? I don't distribute the pixbuf loaders with my Windows installer and I don't see the warning in the console...By the way, here is my build configuration for gdk-pixbuf on OSX:./configure --with-included_loaders=ani,icns,tga,png,pnm,xbm,xpm,qtif,bmp,gif,ico --without-libtiff --without-libjpeg CFLAGS=-mmacosx-version-min=10.7makesudo make install...and on Windows:./configure --build=i686-w64-mingw32 --with-included_loadersIn both cases the loaders should be included in the libgdk_pixbuf DLL. Reopening because this information provides more evidence the warning is spurious.(In reply to draymond from)I've had various problems with dependencies show up later on other machines because the dev one had random DLLs in system32 etc from other packages, so they were always in its PATH, but they weren't on the subsequent machines (this is the famous DLL Hell).But then I assume you've already ruled that out.I do my regression testing in a virtual machine with a clean install of Windows, OSX, etc.Here is the commit that triggered the regression on OSX:	19.0	id=740123	12	False	False	chpe	1
id=87681	REOPENED	gnome-panel	general	2.9.x	Other other	Normal normal	Panel Maintainers	2002-07-08 18:09 UTC by	jacob berkman	2006-10-05 10:11 UTC (	4 users	if there's already a panel registered with bonobo-activation, the panelwill pop up a dialog saying so, and then it exits.however, it has told the SM to restart itself... so the SM restarts it anditpops up the dialog again.this will go on forever.the panel should pop up a dialog with 2 buttons... and then tell the Sm notto restart it...	Jacob: the checking for another panel happens before before settingthe restart style, so this shouldn't happen - and I can't reproduce it.doesn't the SM remember/think it's a restart still?i still get this from time to time... so i'd think it should be needinfoOkay, marking as NEEDINFO.As you said Jacob, the SM might remember the restart style and applyit. I thought so to, that's why I tested it. Didn't seem to happen forme ... In any case it would be a gnome-session bug if it did do that.Jacob: can you still reproduce ? Here, I can't reproduce.I had the same problem here. Mark : what information can I provide ?What exactly did you do to trigger the bug?If I have a panel running and start another panel from the commandline I get the dialog and then the panel exits - the panel doesn't getre-spawned ...I just saved my session.The next time I logged in, there were two panels which were launched.In the "current session" tab of the session properties, I could seethat these were "gnome-panel" and "gnome-panel --sm-config-prefix/gnome-panel-something/". I removed the first one and it worksperfectly now.You saved your session while the dialog was open or ... ?Sorry, I should have said that. No, IIRC, it was when I logged out.So, what happened here is that somehow two gnome-panel entries gotsaved into your session. I'm trying to understand where the secondentry came from.Any idea what you did to cause this to happen ?Absolutely no idea.Mmmmhhhh... It's possible that I compiled and installed HEAD, then did'killall gnome-panel' and launched gnome-panel. Not sure. I'll try toreproduce the bug.Thanks ... I'll mark it as NEEDINFO again in the mean time :-)))How funny. I thought I solved the problem. I just logged out andlogged in (without saving the session) and I have the problem rightnow. Mmmmhhhh... Mark, do you want me to try to remove the"gnome-panel --sm-config-path ..." from the session and to try toreproduce the bug by saving a new session or do you want to study mycase right now ? Note that I'll go home soon, so you may have theanswers to your questions only tomorrow.(There's no rush on this - anytime that suits you)If there are two gnome-panel entries in your session file withRestartStyleHint=2, then this behaviour is to be expected.So what I need to know is how to get into that situation in the firstplace - i.e. a reproducable test case, starting with no saved session(just copy your session file out of the way), to save a session withtwo gnome-panel entries with RestartStyleHint=2.Thanks ...Hi Mark. Here's how I can reproduce the thing :1. Create a fresh new user on your system so you're sure he has nospecific GNOME config.2. Log in with this user.3. Open a terminal and do 'killall gnome-panel' until you havesomething like 'No processes killed' (not sure what it is in english)4. Launch a new panel from your cvs tree.5. Save your session when you log out.6. Log in.A guess : the problem here is that the two panels are not the sameexecutable. The first one is /usr/bin/gnome-panel (or something likethat) and the second one is ~/cvs/gnome-panel-HEAD/gnome-panel/gnome-panelbug still here. One example:I got this yesterday after playing with the gnome-session-save command:$ grep panel .gnome2/session | grep Program11,Program=gnome-panel14,Program=gnome-panelUpdating the version to 2.9The bug is still here in gnome 2.10, and it would really be a relief to havethis fixed in gnome 2.12 eventually. Sorry that I can't help much more, but Ijust wanted you to know that it still exists in 2.10/2.11 afaik.I'm using AltLinux.org Sisyphus (at-the-edga chaotic sea of software. Last release was far too long).Recently i stumbled upon that. And it was not me alone.- this is the lates discussion, alas in russian and of little help to You.I stumbled upon this one or too packet releases before 2.12 - i think it was 2.11.92* Втр Сен 06 2005 Alexey Rusakov <> 2.12.0-alt1- 2.12.0- Removed more excess buildreqs.* Втр Авг 30 2005 Alexey Rusakov <> 2.11.92-alt1- 2.11.92- Scrollkeeper dependency fixes.- Removed excess buildreqs.* Срд Апр 13 2005 Yuri N. Sedunov <> 2.10.1-alt1- 2.10.1~~~~~~~~~~~~~~~~I'm novice to Linux. In those April days i used Gnome as root (before i managed to became sudoer :-) ) And it was ok.In our maillist one told that session applications are stored at ~/.gnome2/sessions - so i wanted to compare `clean` root's config with newer faulty one.I did not found gnome-smproxy on my machine - neither as file, nor as registered in apt package, nor in gconf-editor. Maybe it is some alias hardcoded into gnome, God knows.But i found that in root's session file there are 4 entries, and the user had only 3. The extra record was to launch that very gnome-smproxy with Priority=0.Since Priority==0 or since now such binary exists - session settings GUI does never show it in the list, and it is not always easy to say were too look for info. Without advice about ~/gnome2/session i looked through gconf and .gnome and .x*........ I wish Linux have nifty GUI tools like Win32 sysinternals.com RegistryMonitor, FileMon, DiskMon, ProcessExplorer :-)I noticed that both root and user had dot-file in ~/.gnome2It consisted of ".."It was named after gnome-smproxy and had some random salt at the tail of name.The --sm-config-prefix of CloneCommand and RestartCommand of gnome-smproxy entry had different salt!!! So i concluded that the sault in session file and in .dot file are out of sync for long and do not matter any more.So i added some cut of that entry to user's session file. I made id like another ones, differing only in last digit. I incremented num_cients. And i just dropped *Command which are out of sync or out of my understanding for this particular entry.<bdv@localhost:~/.gnome2>zsh 477 % grep 3, session 3,id=117f0000010001108151141000001023000033,RestartStyleHint=23,Priority=03,Program=gnome-smproxy3,CurrentDirectory=/home/bdvSince that time i re-logged in and rebooted twice. It seems to work now.What is the magic in that settings, why it is not auto-created if it is required, why it is not shown in sesions properties GUI - i cannot say. Perhaps i will hear it here :-)Good hunt!Forgot to mention, i tried to switch locale (with GDM) from KOI8-r to UTF-8This fixed captions on some Qt apps, like KJumpingCute, but killed others, like MultiGnomeTerminal, so in a while i reverted back.It seems to me - i got that "panel already launched" soon after that.Was it occasional, or did i some kind of killall (#15) by this - i do not know.for some strange reason suddenly got Gnome not starting: splash screen popped up, progressed to launching panel - and there stopped.In SysLog i saw launch of ivman (one of programs from session-manual), and... silence.The reason was stange: somehow in session-manual appeared command to launch gnome-smproxy, copied from session.Again i feel sorry that Gnome was hanging giving no error nor any details of what had happened and what it is waiting for.This dialog just showed its ugly face when the panel crashed in 2.14.I wonder... why should the dialog exist at all? It doesn't provide any meaningful information to the user nor lets her do anything of relevance."I've detected a panel already running, and will now exit." Ok... thank you very much mr dialog. I already knew that a panel was running because I can see it on my screen. What do I care if you just discovered it? Utterly meaningless. :)	21.0	id=87681	13	False	False	mark	1
id=770752	REOPENED	gnome-shell	general	3.21.x	Other Linux	Normal normal		2016-09-02 13:22 UTC by	Marinus Schraal	2016-09-04 13:49 UTC (	0 users	I'm recently getting crashes (on wayland only) whenever gnome-builder tries to show a code completion window.Program terminated with signal SIGSEGV, Segmentation fault.I'm pretty sure this starting crashing coincides with the recent changes in mutter/gtk wrt to xdg-shell v6.	*** This bug has been marked as a duplicate of***Ok, my testing was incomplete, this doesn't seem to be solved after all.	2.0	id=665193	51	False	False	johan	1
id=665193	REOPENED	gnome-settings-daemon	mouse	unspecified	Other Linux	Normal normal		2011-11-30 12:02 UTC by	Bastien Nocera	2016-12-15 14:58 UTC (	30 users	Because, really...	The tweet is actually wrong, since it disables the middle mouse button altogether -- it makes sense to have a third mouse button for web browsers etc, just not pasting with it.IMNSHO g-s-d should also disable the PRIMARY clipboard, CLIPBOARD should be enough for everybody, it's 2011 after all, other popular window systems do not have implicit clipboards.Breaking a default that has been in X forever is not desirable. In this case, it is a good default. Leave it alone. Bastien, please do not do this.(In reply to)The code's wrong indeed. The correct way of doing things is in the GTK+ bug associated.(In reply to)Disabling broken behaviour by default is a good thing. It would be a GTK+ specific XSetting, which would only be disabled by default based on your XSettings manager. If you use gnome-settings-daemon, then it would be disabled by default.The people that paste their passwords to IRC will thank us.Will have to wait untilgets designed/implemented.Createdxsettings: Disable middle-click paste by defaultPlease, please, pretty please do not disable this feature by default in gnome-settings-daemon. I, among many others, use select-and-middleclick-paste dozens (sometimes hundreds) of times a day. It is harmless. It is useful. It is one of the core productivity-enhancing features of the Linux ecosystem that I find myself missing in every other OS, right alongside the "scroll any window, focused or not" feature.By removing it, you gain nothing but angst from some of your most loyal users. Programmers use this. Writers use this. Designers use this. It is one of the killer features I show to new users (friends, family members, etc.). Just because some vocal minority ranted about it on Twitter does not make it right to penalize the 99% of people who are happy about it. And from the 3.x track record, I don't expect you'd add an option in the mouse settings to allow users to easily re-enable this.Really. How likely is it that someone:1) selects a block of text that is their password2) middle-clicks into a *writable text entry widget* *in their IRC client*3) presses Enter4) all while *NOT* noticing anything5) complains that this is the software's fault?!What's next? Disabling the ability to scroll unfocused windows just because some dude somewhere ranted that his browser scrolls in the background when his cat walks over his laptop?next step is to disable the DELETE key in nautilus, because clearly this is way too dangerous, people could move files to the trash... oh wait...Disabling something current users expect is discutable. OS X does this way for terminal, KDE does this way ( and all others desktop environement on all unix-like ), even putty work this way on windows. So people in some circonstances expect it, at least for terminal where cut and paste can be rather cumbersome to do if that requires to use the menu.Not to mention that erronous paste by error requires to have a 3rd mouse button, which usually cannot be triggered by error on most laptops, and hardly on all mouses. A better solution for the password issue would be to either not place it in clipboard ( which is already done for those using gtk, IIRC ), or to fix the root cause of people doing cut and paste.(In reply to)If you read the related GTK+ code in the other bug, it's really up to individual widgets to act upon middle click. The problem is that GTK+'s default implementation doesn't give us any sort of choice. It even does middle-click paste on Windows...The gnome-settings-daemon patch just toggles an XSetting. It's then up to individual widgets to act upon the setting. This means that widgets built for "legacy" applications (eg. vte's terminal widget) can of course choose to ignore the setting.Furthermore, if you read the GTK+ code some more, you'll notice that it's up to each toolkit to implement what to do with the middle-click. GTK+ chose to follow X11 legacy behaviour, even on non-X11 platforms.FWIW, the GTK+ middle-click behaviour is probably going to need more than just this behaviour switch. Subscribe yourself to the design page, and feel free to participate in the discussion when it actually happens. It's not happening right now, we're just dumping patches to Bugzilla.3-finger click will generate middle-click for some touchpads. That could be two-finger + edge of the palm for devices without a good palm detection.Speaking from experience, you end up scrolling when you want to paste, and pasting when you want to scroll, depending on your brand of horrible hardware.It's just an example. In any case it's a behaviour unseen in other OSes, or even other windowing systems, and it's not taken away from you.i found the feature copy/paste from middle click very useful and i am not the one.copy / paste a password could happen with ctrl+v too ...if you want enhance security about middle click for any strange reason at least do:ctrl + middle click for pastelike you have done for ctrl + del***has been marked as a duplicate of this bug. ***(In reply to)Where does that poll come from?Anyway, coming from other OS, I find very comfortable and useful the ability to automatically scroll with middle-mouse click. Why not just give me (and *many* others like me) the option to make my computer work as I like it?BTW, the only option I have found is just disabling that mouse button messing up with x.org config files. That's insane. I don't want to disable it, just be able to use it in a logical way (for me).So, if this feature is not turned on by default, at least let us do it, please.Createdxsettings: Disable middle-click paste by defaultCreatedxsettings: Disable middle-click paste by defaultThe middle-click will be used to start selections, andprovide text contextual menus (such as word definitions, sharing, etc.)See:for design details.Seefor the tweak-tool config.pushed as- xsettings: Disable middle-click paste by defaultI don't see the word "middle", or any obvious synonym, anywhere in the linked design document. Where does it state what the middle button is going to do?(Wanting to get in before the hordes who have just seen this on Phoronix)Here's a question - why? There's a very big downside to changing something that's been a UNIX standard for decades, and is ingrained habit for a great many of your users. It's one of those muscle-memory things...Your proposal seems to be that all of your existing users should update to a future Gnome version, find that their attempt to use the clipboard is now doing something completely different and confusing. They will then spend the rest of their day cursing your names as they hunt around on Google to work out how to undo this change.So what's the upside? As Adam asks, the Selections page isn't very clear on quite what this has to do with "middle click", since it's all about touch screen interfaces. But from what I can see, this is exactly the same thing a "right click", but with prettier context menus? This needs a *lot* more selling, if you're going to go around breaking something as fundamental as copy-paste...This has already been reverted upstream for 3.10 at least.Disabling middle-click paste by default is going to break the work flow of a huge part of your user base. Please, please, please do not go forward with this change without having a built in option to opt out of this change or better yet, why not just add in a option in the mouse section of to turn it off if you feel it is a problem? Why are you pushing this on as default when a very large part of your user base does not feel the same. Seriously, where do you guys get your usability data from to base these changes from? Twitter? Do you guys poll your user base frequently to understand why they use GNOME and how changes such as this will force them to leave? I know handfuls of GNOME users that rely on middle click paste for their daily workflows and none of them care about copying other desktops middle click behavior.Please! I love GNOME! Even with your janky changes to GNOME 3. It has been a major part of my personal and professional desktop experience for over 10 years. Don't force this change on your user base.(In reply to)And the rest of your loyal user base will not be thanking you and they be switching away from GNOME to get a core aspect of their workflow back.Hi.(In reply to)Worry not. As mentioned in, tweak-tool will allow you to change this behaviour with a click of a button. So absolutely nothing will be different for you. So there will be this option you are talking about.As for the rest of your comment, I'd prefer you sticking to facts and avoid inflammatory ramblings (i.e. "janky changes"). Thanks.Hi Tobias,(In reply to)Awesome. Whew! Thanks! The sky is no longer falling. I wish that was more clear to start. Sorry for the confusion on my part.My other questions are still not really answered. Why not just leave it as the default and add the option if there is a subset of people that don't like it? I just don't understand where you guys get your data in regards to making huge changes to the default behaviors of GNOME. Was it a user request? Was there a poll that shows this overwhelming demand to remove this functionality? Where is the data that supports facts that this as a positive and needed feature change? Based on this bug report its from one developer quoting a twitter post about how it is a wrong feature to have and then he says it is a "good thing" and people will thank you guys for the change. It doesn't add up and when people ask why you guys don't give any answers.Sorry about that. I will keep that in mind next time. I just wish there was more communication between your user base surrounding these kinds of change as GNOME progresses. I understand you guys work hard to make GNOME great. Us users just need to be on the same page as you guys so we can help you do that. Apologies for coming across wrong with my initial response ITT. That wasn't my intention.(In reply to)In fact even better, as said in, the default has been put back to enable middle click paste.See:Andrew, Tobias - I understand that the change of default has now been reverted, and that the behaviour was configurable. My concern is that this can happen at all - someone can deliberately break the behavior that existing users rely on, without any kind of announcement or discussion.I don't want to turn this into one of the tedious rants you guys hear so much, but *please* think about the effect on your existing users when you decide to change behavior. There's a tendency to focus on how you think things should be, and often, not much thought about that pain caused in transitioning to that new way...Hi :)(In reply to)Yeah, well. I wonder who made you think the sky is falling ;-) It probably wasn't us, right?I don't fully know as I like the behaviour that is about to not become the default any longer. But I see the point of the change. And I think it makes sense once you see the technical background: There are at least three clipboards in X. And then there are cut buffers, again about three. And then you apparently have different protocols on top of all that. And indeed if I told my mom (or my dad, FWIW) that middle-click was there to paste, she would be very confused once she selects text, Ctrl+Cs it, then selects some different text (for whatever reason), and tries to middle-click-paste the Ctrl+Ced text.So making things making more sense is a good thing. But again, for the brave of you, and like me, the old and loved behaviour is only a click away.(In reply to)I don't think you are appreciating the things that have been done with regards to announcing changes to GNOME. We had at least one comprehensive blog post up on planet GNOME. We will probably have more the closer we come to 3.10. We have the feature proposal period to discuss what's going to happen. We have people sitting on mailing lists, on IRC, and on forums to communicate. I'm not saying we're doing a perfect job. And I do see that there is room for improvement, i.e. we could expose discussions happening on mailing lists or on IRC more visibly. But I would like you to not think that there isn't *any* kind of announcement or discussion. And most of the time you are more than welcome to help out and make things better.As for this very change, the need is low to announce it as there will be no change for 3.10. So blaming us for not announcing what is not going to happen feels odd ;-) I invite you to work on the communication for the release after that, to make sure we cover much more ground than we usually do.I'd like to keep the discussion on this bug (or any bug, really) to a minimum. The appropriate places to actually discuss things are mailing-lists. In this very case, due to lack of a g-s-d list, I guess it is desktop-devel-list.Hi Tobias,(In reply to)It came from me reading the bug report which is from you guys, so yes it was you. It was not clear on the reasons why it is getting changed and any discussion or back story on the reasons. Yes, its not getting changed for 3.10 but it could down the road and that concerned me and prompted me to post to get more information and have my voice be heard.So the change is to be more like mainstream OSes and there are technical? OK fair enough. If that is how you understand the reasoning. Explaining it like that and giving technical reasons is better than a twitter link + saying trust me we know better and you will thank us later. I still don't agree with the change as a whole. I don't want GNOME to act like windows or OS X. I use it because of features middle click paste, but that is my personal preference as a long time GNOME user. Anyways, thanks for explaining it as you see it even if you 100% don't know the reasons behind it. I appreciate you taking the time to explain your stance on why it is getting changed.I agree that the bug report is not a place to talk about these kinds of things and I also agree that you guys can do a lot better at connecting with your user base. OK, so are you going to open a thread on desktop-devel-list or should Simon or I attempt to do so and risk getting ignored/talked about behind our backs per the welcome email from desktop-devel-lists? =POn 08/28/2013 07:59 AM,wrote:This is an example of a disconnect between you the GNOME developers and us the GNOME users, when it comes to talking about what is important to each one of us regarding the direction of GNOME down the road. There isn't a single spot which is the best method for having these conversations. Just as middle click paste is confusing for your mother/father, are they going to know how to sign up for a mailing list to talk about features within Gnome that work or do not work for them? If they manage to sign up for a mailing list are they going to feel welcome to post their concerns when they get a welcome message like this? You say there is discussion but in it's current form it's not very encouraging for users to participate in helping you make GNOME better. This causes the disconnect continue and the GNOME user base continues to shrink.Anyways, I won't derail this bug any more. I signed up on desktop-devel-list so I can lurk for a while before posting and getting made fun of behind my back. Should be a good time. ;-)Reopening as per, the code was reverted.Mom can use ctrl-c until she's ready to delve deeper, in the same way that a kid says "mama" before they learn "maternal".It is generally error to make things easier for the first two months of use at the expense of making it harder for the next 20 years of use.If this were not so, the user-to-user interface wouldn't be English, but baby talk, with a vocabulary of about 30 words. We use tens of thousands of words to interface with each other because that it's extremely powerful, though complex - so complex that no one can ever finish learning English - there's always more to learn.I fear that disabling it by default is just the first step in makingit impossible for us to use middle click in the traditional manner.I rely on this; it's harder to do ^C / ^V all the time.Life is faster and better with middle click 'paste'.tl;dr: Let users choose between auto-scroll, quick paste, or nothing.Hello.I think the point is not just taking away a feature. Many people use it and it's good. The point is that the "expected" behavior (well, for me) when I click the middle button is the automatic scrolling, in any app. It's annoying to try to do scrolling in gedit and have it paste a string of text that I don't know where it comes from, mostly if I'm coding.Now that I know it, it's true that it is easier to paste that way, but I use auto-scroll in the apps that allow it (Firefox, LibreOffice...) because it's the only way to auto-scroll, while to copy-paste I have other ways (right button, ctrl-C/V).IMHO just an option for that in the mouse config dialog would be enough to make everyone happy.A major issue that I don't think has been mentioned is the inconsistency this change would introduce. Even if you manage to get it so that every GTK+ application automatically respects this setting, what about everything else? The behaviour of PRIMARY is a de facto standard and basically every toolkit and application implements it. It would be very confusing for users if suddenly GTK+ applications behaved differently from the other applications on the desktop.We won't be changing the default for X11, and this is already "disabled" (there's no separate clipboard for the selection) in Wayland. In the future, we might make use of the middle button for other purposes, as mentioned in the design docs, but this seems to be further away, and wouldn't be implemented in gnome-settings-daemon). So closing.Apparently, it's coming to Wayland, so we'll need a way to disable it on Wayland:(In reply to Bastien Nocera from)The wayland session is now the default in Fedora 25. Since there's still no way to disable middle-click paste under wayland, this now means middle-click paste is enabled by default.(In reply to Adam Jackson from)Already taken care of in.	33.0	id=770752	4	False	False	mschraal	1
id=596577	REOPENED	nautilus	general	2.28.x	Other Linux	Normal normal	Nautilus Maintainers	2009-09-28 09:47 UTC by	Sebastien Bacher	2012-07-20 16:07 UTC (	7 users	The bug has been opened on"When you select multiple files in Nautilus and accidentally open them (by wrong click, by Intro key...), Nautilus tries to open all of them at once in multiple instances of the default application. This can make your system totally unresponsive and force you to do a hard restart if they are many (try with 2.000, for example) or they are heavy (video, for example). Even if it doesn't come to that, it's annoying to have to close then one by one.In Windows if you try to open many files at once there is a warning ('You are trying to open multiple files', I think), giving you the option to cancel or open them anyway. I think Nautilus should do the same. After all, how often do you need to open 20 files at once?To have an option to close all open instances of an app at once would be very usefull too."	CreatedUpdated Greek translation.(This attachment is made with git-bz, not sure how things will go...)Comment onUpdated Greek translation.I screwed upCreatedAdds a warning dialog upon opening more than 25 files at onceDoing it old school instead - sorry about the spam.About the patch; this is an initial proof of concept / discussion material. Is the wording / limit good? Is it done in the right place or should it be done "higher" up?CreatedScreenshot of dialognautilus_mime_activate_file() already has some code to handle things like this(see e.g. confirm_multiple_windows() and stuff related to that).This only affects the number of nautilus windows/tabs opened, but we should fix it to handle applications too. And we should do so in the same way as the existing code, not overriding it early. Also, i don't think we should warn, or at least not with as few files, when opening lots of files that will open with the same application, and that application supports listing multiple arguments.CreatedAdds a warning when opening multiple files that will spawn more then 5 separate applicationsAlex, something like that you had in mind?Hmm, no thats not quite right. We sort by app yes, but that doesn't necessarily mean that we'll only launch the app once for all the files in that app. The app may not support multiple files (%U or %F in the desktop file) and then we will launch multiple copies of the app.However, I see that there is no easy way to check on a GAppInfo if it supports opening multiple files. So, at least for now I think we'll have to go with counting the number of files opened by applications instead.Alex, if I understand correctly; you'd like me to check whether the .desktop file includes %U or %F and if so, launch the application with multiple files or uris as argument? OR, is this patch as good as it can be right now as we're missing info in GAppInfo?I want to vouch for this bug. Don't know if it's because I'm getting older, or using nautilus more but I'd be happy to get such a confirmation. If is there anything I could do/test would be glad to help. Though it looks like a very straightforward issue to be resolved.(In reply to)No, Alex is probably saying the silent limit should be checked against the number of files, and not the number of applications as in your patch, as we're missing the API in GAppInfo to find out whether an application supports multiple files.Another nicer way would be adding that API first in GIO and then using it here.Do you mean something like this?static gbooleang_desktop_app_info_supports_multiple_uris (GAppInfo *appinfo){ GDesktopAppInfo *info = G_DESKTOP_APP_INFO (appinfo); return info->exec && (strstr (info->exec, "%U") != NULL);}static gbooleang_desktop_app_info_supports_multiple_files (GAppInfo *appinfo){ GDesktopAppInfo *info = G_DESKTOP_APP_INFO (appinfo); return info->exec && (strstr (info->exec, "%F") != NULL);}(when implemented of course...)CreatedAsk for confirmation before opening more than 5 files (#596577)Patch updated (against 2.31.1) and now only checks for the number of files selected (files with applications and unhandled). Also pauses the timed activation when asking using for confirmation.Review of:Looks almost good, just some nitpicks;::: libnautilus-private/nautilus-mime-actions.c@@ +1882,3 @@++ prompt = _("Are you sure you want to open all files?");+ detail = g_strdup_printf (ngettext("This will open %d separate application.",Missing space after ngettext@@ +1890,3 @@++ response = gtk_dialog_run (dialog);+ gtk_object_destroy (GTK_OBJECT (dialog));Should use gtk_widget_destroy() here.@@ +1894,3 @@+ unpause_activation_timed_cancel (parameters);++ open_files = response == GTK_RESPONSE_YES;I prefer a more readableif (response == ...) open_files = TRUE;CreatedUpdated patchComment onUpdated patchError...CreatedCorrect patchSorry for spamming...Review of:Looks fine now, thanks for your efforts.Thanks for reviewing :)Committed now. Marking as FIXED.***has been marked as a duplicate of this bug. ***the change has some issues, it will display a "do you really want to open those files, that will open 1 application" when selecting a bunch of videos which would normally just being queued in the player playlist for example(In reply to)I fixed that some days ago inI had this commit in my build, it doesn't solve the case of selecting several videos (not a directory of videos)I have filled a bug to get the api changes needed to fix this bug completed here:It seems this should have been solved byForgive me if I'm wrong but isn't this a regression? If the files are opened with one application and that application only handles one file at a time then you would have the same issue that was reported initially. Opening 100 files would open 100 instances of that application, and there would be no warning.Please reopen bug as I noted in my last comment the last patch was a regression.Steps to reproduce:Copy 6 .jpg images into a directory (the warning is given when more that 5 files are being opened).Also copy a .txt file or something that will be opened by a different application.Make Shotwell the default image viewer ( shotwell opens multiple instances for each file selected ).Select all 6 jpg files right click and open with shotwell. Six instances of shotwell are opened NO warning.This time select the text file as well and select open. You have a warning now but it says two applications will be opened???1. Why am I being warned if it really was only two applications being opened?? Surely 2 is not something to be warned about2. Its really 7 instances being opened.&&+ num_apps > 1Added in the last patch refers to the number of different applications that will open not the number of instances of applications.Mass component change due to BZ cleanup, sorry for the noise.	29.0	id=596577	30	False	False	seb128	1
id=413263	REOPENED	pango	general	unspecified	Other Linux	Normal normal		2007-02-28 23:09 UTC by	Bastien Nocera	2015-09-01 10:24 UTC (	11 users	My blog's title has my name in Arabic showing.The titlebar problem might be a Metacity problem, but there's still a problem with the tabs.The titlebar and tabs menu problems don't exist if there's latin text before and after the arabic bits (like when posting a new blog entry, which would say:Blogger: بستيان نوصر (hadess) | Newsinstead of:بستيان نوصر (hadess) | News	Createdephy-bug.pngScreenshot showing the problems.Works here as expected with ephy 2.16 on edgy: the tabs menu shows the text as in the "what it's supposed to look like" screenshot () [right-aligned], and the same applies for the metacity window title, and the tab title in the tab bar (well, that one's ellipsising the "News" part to "...").I can reproduce the problem on trunk (ephy 2.17, gtk trunk, pango trunk): the tabs menu is empty except the accelerator. (The window title is still ok, but that's expected since I don't run metacity with that gtk/pango.)The tabs menu problem might be related to/be the same as.I have to conclude that this is a problem with pango.I'm using:gtk2-2.10.8-1.fc6pango-1.14.8-1.fc6and I can see the same problem in Evo (see).Actually I think I misinterpreted your annotated screenshot. What I see on 2.16 is the 2nd part; I don't see the problem of the 3rd part in 2.16 but I do see it in 2.17/trunk.Unlikely to be Pango. Try with gtk+ head. Some label alignment issues with right-to-left text existed there but should be fixed now.And for the paranthesis to come out right, the PangoContext should be put in autodir mode.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Createdpicture of bookmarks that display hebrew titlethis bug doesn't exist in debian etch. When I use epiphany it exits only on ubuntu feisty fawn. So maybe it is ubuntu bug, or they patched it in debian ?(In reply to)Still happens in Evo, and the tasklist with GTK+ 2.12.1 (up-to-date rawhide). The empty label in the tabs menu still happens as well for ephy.The metacity titlebar issue was fixed though.Behdad, any hints?chpe, whose widget is it (the ephy tabbar)?(In reply to)It's not a tab bar, it's the "Tabs" menu, in Epiphany. It's a simple menu listing the opened tabs for the current window.It's a (GtkUIManager generated) Gtk[Image]MenuItem whose label (GTK_BIN(menuitem)->child) has been set to ellipsise (PANGO_ELLIPSIZE_END) with a max width chars (gtk_label_set_max_width_chars).***has been marked as a duplicate of this bug. ***probably not relevant anymoreBroken in epiphany (both title and tab), working in Firefox (both title and tab), and working in MiniBrowser (just the tab).You can use this URL to test:Following the testing above, reopening and reassigning to Epiphany.CreatedTest caseThis is not ephy issue, it's pango (or GTK+). See the attached test case. The reason why MiniBrowser works is because it sets the window title, while ephy uses a label. You can see in the test case that the window title is correct, but the label is wrong. GtkLabel uses pango to render the text, but the window title is passed to X11 as a UTF-8 string directly. So, I guess it's indeed a pango issue.Reassigning again.This is a bug in Unicode Bidirectional Algorithm that has been address in the Unicode 6.3 version. Specifically the new rule N0:We are updating FriBidi to Unicode 6.3 algorithm:However, that work doesn't implement rule N0. Implementing N0 has API implications for FriBidi which I need to study and then implement.Leave open.Filed here:	21.0	id=413263	32	False	False	chpe	1
id=748641	REOPENED	GStreamer	gst-plugins-bad	git master	Other Linux	Normal normal	GStreamer Maintainers	2015-04-29 13:47 UTC by	Athanasios Oikonomou	2015-05-01 16:35 UTC (	2 users	Hi, I get the following error when trying to play h256 file.root@dm800se:/var/volatile/tmp# GST_DEBUG_NO_COLOR=1 GST_DEBUG=*:3 gst-launch-1.0 -v playbin uri=file:///media/usb/1/140626_720p_hm130_4s_sao_dbf_qp27.265.mkvSetting pipeline to PAUSED .../GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: ring-buffer-max-size = 0/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: buffer-size = -1/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: buffer-duration = -1/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: use-buffering = false/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: download = false/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: uri = file:///media/usb/1/140626_720p_hm130_4s_sao_dbf_qp27.265.mkv/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: connection-speed = 00:00:00.227617000 579 0x649780 WARN basesrc gstbasesrc.c:3481:gst_base_src_start_complete:<source> pad not activated yet/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: source = "\(GstFileSrc\)\ source"0:00:00.237162296 579 0x649780 WARN basesrc gstbasesrc.c:3481:gst_base_src_start_complete:<source> pad not activated yetPipeline is PREROLLING .../GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstTypeFindElement:typefind.GstPad:src: caps = "NULL"/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstTypeFindElement:typefind.GstPad:src: caps = "NULL"0:00:00.599147963 579 0x76142200 WARN codecparsers_h265 gsth265parser.c:1824:gst_h265_parse_pps: value not in allowed range. value: 0, range 1-190:00:00.599541963 579 0x76142200 WARN codecparsers_h265 gsth265parser.c:1869:gst_h265_parse_pps: error parsing "Picture parameter set"0:00:00.599739963 579 0x76142200 WARN h265parse gsth265parse.c:562:gst_h265_parse_process_nal:<h265parse0> failed to parse PPS:0:00:00.600066519 579 0x76142200 WARN codecparsers_h265 gsth265parser.c:1951:gst_h265_parser_parse_slice_hdr: couldn't find associated picture parameter set with id: 0*** Error in `gst-launch-1.0': free(): invalid pointer: 0x75365d34 ***Aborted (core dumped)Above error is happening on Enigma2 STB using latest HEAD (compiled using openembedded few minutes ago). Currently there is no Enigma2 STB that supports h265 and there is no video sink that has h265 caps.Here you can find above sample	Createdcodecparser: h265: Fix the number of tile rows/columns parsingI am not sure whether this is enough for fixing the issue since all elementary h265 streams are failing for me. But this fix is needed anyways.Of course it should also not crash on invalid data there. Do we need to add a check too where it crashed now?Using latest HEAD code dump is gone.root@dm800se:~# GST_DEBUG_NO_COLOR=1 GST_DEBUG=*:3 gst-launch-1.0 -v playbin uri=file:///media/usb/1/140626_720p_hm130_4s_sao_dbf_qp27.265.mkvSetting pipeline to PAUSED .../GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: ring-buffer-max-size = 0/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: buffer-size = -1/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: buffer-duration = -1/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: use-buffering = false/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: download = false/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: uri = file:///media/usb/1/140626_720p_hm130_4s_sao_dbf_qp27.265.mkv/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: connection-speed = 00:00:00.232388814 1111 0x738da0 WARN basesrc gstbasesrc.c:3481:gst_base_src_start_complete:<source> pad not activated yet/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: source = "\(GstFileSrc\)\ source"0:00:00.242306703 1111 0x738da0 WARN basesrc gstbasesrc.c:3481:gst_base_src_start_complete:<source> pad not activated yetPipeline is PREROLLING .../GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstTypeFindElement:typefind.GstPad:src: caps = "NULL"/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstTypeFindElement:typefind.GstPad:src: caps = "NULL"/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstH265Parse:h265parse0.GstPad:src: caps = "video/x-h265\,\ width\=\(int\)1280\,\ height\=\(int\)720\,\ parsed\=\(boolean\)true\,\ stream-format\=\(string\)hvc1\,\ alignment\=\(string\)au\,\ level\=\(string\)0\,\ tier\=\(string\)main\,\ profile\=\(string\)main\,\ codec_data\=\(buffer\)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000"Missing element: H.265 (Main Profile) decoder0:00:00.613645148 1111 0x76342200 WARN uridecodebin gsturidecodebin.c:939:unknown_type_cb:<uridecodebin0> warning: No decoder available for type 'video/x-h265, width=(int)1280, height=(int)720, parsed=(boolean)true, stream-format=(string)hvc1, alignment=(string)au, level=(string)0, tier=(string)main, profile=(string)main, codec_data=(buffer)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000'.WARNING: from element /GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: No decoder available for type 'video/x-h265, width=(int)1280, height=(int)720, parsed=(boolean)true, stream-format=(string)hvc1, alignment=(string)au, level=(string)0, tier=(string)main, profile=(string)main, codec_data=(buffer)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000'.Additional debug info:/opt/openpli/openpligst/build/tmp/work/mips32el-oe-linux/gstreamer1.0-plugins-base/1.4.5+gitAUTOINC+5a8d1d2246-r0/git/gst/playback/gsturidecodebin.c(939): unknown_type_cb (): /GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin00:00:00.615823926 1111 0x76342200 WARN decodebin gstdecodebin2.c:4330:gst_decode_bin_expose:<decodebin0> error: no suitable plugins found:Missing decoder: H.265 (Main Profile) (video/x-h265, width=(int)1280, height=(int)720, parsed=(boolean)true, stream-format=(string)hvc1, alignment=(string)au, level=(string)0, tier=(string)main, profile=(string)main, codec_data=(buffer)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000)0:00:00.616914851 1111 0x76342200 WARN uridecodebin gsturidecodebin.c:1006:no_more_pads_full:<uridecodebin0> error: no suitable plugins found:/opt/openpli/openpligst/build/tmp/work/mips32el-oe-linux/gstreamer1.0-plugins-base/1.4.5+gitAUTOINC+5a8d1d2246-r0/git/gst/playback/gstdecodebin2.c(4330): gst_decode_bin_expose (): /GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0:no suitable plugins found:Missing decoder: H.265 (Main Profile) (video/x-h265, width=(int)1280, height=(int)720, parsed=(boolean)true, stream-format=(string)hvc1, alignment=(string)au, level=(string)0, tier=(string)main, profile=(string)main, codec_data=(buffer)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000)ERROR: from element /GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0: Your GStreamer installation is missing a plug-in.Additional debug info:/opt/openpli/openpligst/build/tmp/work/mips32el-oe-linux/gstreamer1.0-plugins-base/1.4.5+gitAUTOINC+5a8d1d2246-r0/git/gst/playback/gsturidecodebin.c(1006): no_more_pads_full (): /GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0:no suitable plugins found:/opt/openpli/openpligst/build/tmp/work/mips32el-oe-linux/gstreamer1.0-plugins-base/1.4.5+gitAUTOINC+5a8d1d2246-r0/git/gst/playback/gstdecodebin2.c(4330): gst_decode_bin_expose (): /GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0:no suitable plugins found:Missing decoder: H.265 (Main Profile) (video/x-h265, width=(int)1280, height=(int)720, parsed=(boolean)true, stream-format=(string)hvc1, alignment=(string)au, level=(string)0, tier=(string)main, profile=(string)main, codec_data=(buffer)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000)ERROR: pipeline doesn't want to preroll.Setting pipeline to NULL ...0:00:00.620743926 1111 0x76342200 WARN decodebin gstdecodebin2.c:4330:gst_decode_bin_expose:<decodebin0> error: no suitable plugins found:Missing decoder: H.265 (Main Profile) (video/x-h265, width=(int)1280, height=(int)720, parsed=(boolean)true, stream-format=(string)hvc1, alignment=(string)au, level=(string)0, tier=(string)main, profile=(string)main, codec_data=(buffer)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000)0:00:00.622361629 1111 0x76342200 WARN uridecodebin gsturidecodebin.c:1006:no_more_pads_full:<uridecodebin0> error: no suitable plugins found:/opt/openpli/openpligst/build/tmp/work/mips32el-oe-linux/gstreamer1.0-plugins-base/1.4.5+gitAUTOINC+5a8d1d2246-r0/git/gst/playback/gstdecodebin2.c(4330): gst_decode_bin_expose (): /GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0:no suitable plugins found:Missing decoder: H.265 (Main Profile) (video/x-h265, width=(int)1280, height=(int)720, parsed=(boolean)true, stream-format=(string)hvc1, alignment=(string)au, level=(string)0, tier=(string)main, profile=(string)main, codec_data=(buffer)01016000000000000000000000f000fcfdf8f800000f03200001001940010c01ffff01600000030000030000030000030000949024210001003142010101600000030000030000030000030000a00280802d1fe59499246d869622aa4c4c32fb3ebcdf967d7851189cbb24220001000a4401e1a542040521b789000000)/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstCapsFilter:capsfilter0.GstPad:src: caps = "NULL"0:00:00.623725666 1111 0x76342200 WARN decodebin gstdecodebin2.c:2847:pad_added_cb:<decodebin0> Couldn't expose group/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstCapsFilter:capsfilter0.GstPad:src: caps = "NULL"0:00:00.624877592 1111 0x76342200 FIXME h265parse gsth265parse.c:1410:gst_h265_parse_parse_frame:<h265parse0> Implement timestamp/duration interpolation based on SEI message/GstPlayBin:playbin0/GstURIDecodeBin:uridecodebin0/GstDecodeBin:decodebin0/GstH265Parse:h265parse0.GstPad:src: caps = "NULL"0:00:00.628263036 1111 0x76342200 WARN basesrc gstbasesrc.c:2391:gst_base_src_update_length:<source> processing at or past EOSFreeing pipeline ...Yes, but see. This fix looks like we use some data later without checking if it's valid.I didn't get any crash by the way! Also it is not clear in the debug log where it crashed. All the warnings in the debug log were because of the issue which fixed in the patch.The attached stream is hevc elementary stream and debug log is based on an mkv stream. Would it be possible to get the mkv stream?(In reply to sreerenj from)It's the same file, just extra mkv extension was added (in order to be able to open it from enigma2 gui).	6.0	id=748641	7	False	False	athoik	1
id=108540	REOPENED	conglomerate	Documentation	unspecified	Other All	Normal normal	Conglomerate Devel List	2003-03-16 16:00 UTC by	David Malcolm	2004-12-22 21:47 UTC (	0 users	We need user docs to be a fully-fledged GNOME app	Useful link for writing GNOME doumentation:Very early stages of user docs can be found here.CreatedPatches to add help to congeI'm having trouble downloading the attachment. What size and type isit? Thanks!filename help.tgzsize 77425 bytesCan also get it from here.I've tried applying this but I get an error when running autogen.shautomake: couldn't open `omf.make': No such file or directoryHave you any idea what I'm doing wrong?CreatedMkae file for omf/help stuffI have interrest in integrating it into to Conglomerate.I'm already working on it. I will report progress on the developers ML<snippet from="developers mailinlist" >>> The 'doc/' is in the CVS-repository. The interesting files are doc/READMEand doc/activate.patch. The move of 'documentation' into 'doc/devel' and dropping it,will be the next step. <snippet>The documentation directory is moved and dropped.The doc/activate.patch is obsolete and also dropped.the omf/scrollkeeper documentation is in, marking bug as fixed.Some one who cares about 'VERIFIED' or 'CLOSED'?Changing bug title to "User documentation is incomplete", though it'sdifficult to see how we can complete the user docs until we've got abetter idea of how the app fits together. Also making it a bug to fixfor 1.0.0.	13.0	id=108540	8	False	False	david	1
id=682718	REOPENED	doxygen	general	1.8.1.2-SVN	Other Windows	Normal normal	Dimitri van Heesch	2012-08-26 11:31 UTC by	albert	2013-01-06 10:32 UTC (	0 users	A number of configuration / template files generated with Doxygen have the version number with which they are generated included (e.g. Doxyfile, extensionsFile.rtf) other files don't have this (files generated with doxygen -w and doxygen -l).The advantage is that one can easily see which which version of doxygen these files have initially been generated.	CreatedPATCH: Adding version information to all generated / template filesThis patch sees to it that all generated / template files have the version number in them. A number of template files / configuration files are hard coded, so here the versionString is added, some files go through a header file (e.g header_html.h), in this case the version has been coded as $doxygen_version (with underscore! so it is not confused with the normal $doxygenversion replacements) and in the code automatically replaced by versionString.Thanks, I'll include it (with some minor adaptions) in the next subversion update.Just checked the implementation of this patch in svn version 833 (Doxygen-1.8.2-20120930) and I see that (at least for the html footer and header) the line:"<!-- Generated by doxygen $doxygen_version -->\n"is missing, this file puts the version with which the file is generated in the output file, so it can be traced with which version the file was generated.The $doxygenversion is replaced during runtime of Doxygen and thus gives the version that is running at that moment.latexgen.cpp looks OKlayout_default.h has same problem as html header and footerThis bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.8.3. Please verify if this is indeed the case. Reopen thebug if you think it is not fixed and please include any additional informationthat you think can be relevant.See, checked against svn version 838 / Doxygen 1.8.3	5.0	id=682718	5	False	False	dimitri	1
id=610284	REOPENED	vala	Objects	0.7.x	Other Linux	Normal normal	Vala maintainers	2010-02-17 17:33 UTC by	Adrien Bustany	2011-05-16 19:59 UTC (	4 users	Array properties are not declared as properties in the _class_init function, Vala only creates _get and _set functions. There is a reduced test case below. Note, this example also shows./// Vala codepublic class Foo{ public string[] prop { get; set; } public void run () { message ("setting the property"); prop = { "apple", "bananas", "oranges" }; message ("We know have %d elements", prop.length); } public void print_fruits () { stdout.printf ("Our basket is full of\n"); foreach (var s in prop) stdout.printf ("%s\n", s); } public static void main (string[] args) { Foo f = new Foo (); f.run (); f.print_fruits (); }}/// Generated code (class_init only)static void foo_class_init (FooClass * klass) { foo_parent_class = g_type_class_peek_parent (klass); FOO_CLASS (klass)->finalize = foo_finalize; g_type_class_add_private (klass, sizeof (FooPrivate));}	Foo does not derive from GLib.Object, so it cannot register GObject properties.Right, but it also happens if Foo derives from GLib.ObjectToday I observe this piece of codepublic GLib.StringBuilder[] body { get; private set; default = {}; }producing this error:ERROR:valaccodearraymodule.c:1263:vala_ccode_array_module_real_get_array_size_cexpression: code should not be reachedIs this the same? Or a different problem?When derived from GObject the prooperties are generated with valac version Vala 0.12.0.228 #610284#c2Only string[] has a registered GType (G_TYPE_STRV), other kind of arrays don't.(In reply to)It's a different problem. As a reference, only string[] properties are supported because they have a registered GType (G_TYPE_STRV).As geert said string[] properties as now working in Vala. Renaming the bug instead of cloning it, hope it doesn't get confusing.	5.0	id=610284	9	False	False	j	1
id=750343	REOPENED	gtk+	.General	3.16.x	Other Linux	Normal normal		2015-06-03 13:49 UTC by	Jussi Kukkonen	2015-06-22 19:19 UTC (	2 users	Quoting Emmanuele:"The change in 03213b9509fc1df16c66194ea168aed6c15110e9 changed the rulesas to when CSD can be enabled, but it also unconditionally enables CSDwith the implicit assumption that client-side shadows were the realissue, and that we could work around that by drawing our own borders.This also means that setting a titlebar for a GtkWindow will enable CSDunconditionally.In reality, some window managers (like Matchbox) *only* supportserver-side decorations, and will ignore all hints to the contrary, tothe point of drawing decorations at random locations on top of thewindow."(it's not actually window decoration but a panel that draws where the WM believes is a good spot to draw on top of the SSD titlebar, but the end result is the same)I'll let ebassi attach the patch himself. I've tested it and it works for me. We can patch it in yocto as well if it doesn't seem appropriate here: I realise the use case is a bit obscure and the solution is still band-aid over WM problems.	Createdwindow: Check if we can use CSD before enabling themThe change in 03213b9509fc1df16c66194ea168aed6c15110e9 changed the rulesas to when CSD can be enabled, but it also unconditionally enables CSDwith the implicit assumption that client-side shadows were the realissue, and that we could work around that by drawing our own borders.This also means that setting a titlebar for a GtkWindow will enable CSDunconditionally.In reality, some window managers (like Matchbox) *only* supportserver-side decorations, and will ignore all hints to the contrary, tothe point of drawing decorations at random locations on top of thewindow.Since CSD are enabled unconditionally, the GTK_CSD environment variableis also not a suitable escape hatch.In the grand tradition of asking ourselves if we should do somethingjust because we can, we should split the environment checks from thechecks on what the user requested; by doing that, we can also checkwhen enabling client-side decorations, and ideally bail out if needed.Review of:okpushed as- window: Check if we can use CSD before enabling themThe result is not spectacular, but at least it shouldn't be any more broken.Had to revert commitas it pretty spectacularly broke the default sizing of empty GtkWindows, as well as exposed a bunch of invalid sizing inside GtkWindow.I've openedwith a potential fix for the default size issue.On the reverted patch: It also has the side effect that normal windows without a manually set header bar use CSD while they didn't before. Is this really on purpose?	5.0	id=750343	9	False	False	jussi.kukkonen	1
id=259064	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other All	Normal normal		2004-05-25 19:25 UTC by	Karsten Bräckelmann	2015-08-28 12:08 UTC (	9 users	Frankly: The keyboard navigation currently quite sucks.Example Mailer: Once selecting a Mail Folder, the user need *8* times the<tab> key to get to the mail list. The Component buttons and the search barhave to be passed first.The 1.4. behavior of automatically forcing the focus to the mail list isdeprecated -- the focus should stay at the mail tree. Unfortunetaly, due tothis decision, switching between mail tree and mail list is painful.However, the regular usage for most users will be switching between maillist and mail tree.Here is my proposal:Drop the Component buttons and the Search bar from that <tab> altanation.With one single <tab> press the mailer should switch from the mail list tothe mail tree, with another <tab> to the mail pane (like it just now is).Similar, <shift>-<tab> schould reverse this alternation.Some thoughts:- The Components buttons are buttons and will most likely be used by mouseonly. For anyone using keyboard shortcuts, there is a new Componentswitcher menu. Shortcuts bypassing the menu should be available, if notalready.- The Search bar probably should get its own shortcut. Any average userwill not use this on a daily basis, although it is very useful. Power userswill love a shortcut.Filing this as Component=UI, as this should be consistent acrosscomponents. (4 follow up bugs depending and blocking this one would beappropriate.)May the discussion and flame fest start... ;)	Sure, instead of dropping the Component buttons and Searcb bar, the<tab> ordering just needs to be *adjusted*.Please make the mail tree, mail list and mail pane being easilyaccessible to the user.<aol>me too</aol>The tab order in the mailer should be:Folder list -> Message list -> Message -> Search drop down -> Searchtext entry -> Find Now -> Clear -> Compoent buttonsSo. This looks like it is basically not possible with the current wayESidebar works. The UI freeze is also today. What should I do here? Itis probably ideal to change the way the sidebar stuff works anyway, inwhich case I should be able to fix the tab ordering in a fairly simplemanner.***has been marked as a duplicate of this bug. ***So the buttons are hideable now, this should really cut down on the issue.***has been marked as a duplicate of this bug. ***adding dependencyApologies for any spam... cc'ing usability-maint on all Evolution usabilitybugs. Filter on EVO-USABILITY-SPAM to ignore.guenther, solution for:there's a pretty interesting article at<>stating that e.g. F6 switches focus between folder list, message list andpreview pane.generally, i have filedto include some of those shortcuts to thequick reference card and/or user documentation.punting target to 2.5, anyway.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Fixed in head. Just type '/' would focus to the search bar.Reopening.Please read the original bug report again. If you think this really is fixed,care to drop a short note how it is fixed? Assigning a shortcut to the searchbar is nice, but it doesn't fix this issue.Targetting this for the kill-bonobo branch. Also moving to Mailer.Not sure what EXACTLY is required to close this report as FIXED.Using F6 works quite well for me.Sorry for bumping an old bug, but I would like to see this as well. Using Tab to move around is a widespread use paradigm and I fail to understand why it makes sense to jump from the folder tree to the component buttons on tab. The tab key is also much easier to hit than F6 from normal typing position (not to mention some keyboards have changed the F-keys to single-purpose buttons, and require holding a modifier key to use proper F-key function).Additionally, '/' does not (any longer) focus on the search bar.The keyboard navigation in Evolution really needs to be re-evaulated as a whole. I'd go back to Thunderbird if I could for the proper keyboard controls alone, but I can only get Evolution to connect to my work Exchange server.Maybe I did something wrong, but gtk_container_set_focus_chain() didn't work for me for some reason. And doing a manual focusing on key-press-event looks too hacky.	17.0	id=259064	39	True	True	guenther	1
id=736434	REOPENED	geary	ux	0.6.x	Other Linux	Normal normal	Geary Maintainers	2014-09-10 18:35 UTC by		2016-04-23 23:05 UTC (	3 users	In most mail clients, you can select multiple messages at a time and then drag them all to a target folder. However, in Geary, while you can select multiple messages, when you initiate the drag, the selection reverts to only the message which the mouse pointer happens to be on top of when the mousedown occurs.If the current message is already selected, then the mousedown should not change the selection unless a drag is not initiated before mouseup.This is in 0.6.3, which appears to be the latest version available to ubuntu (including via the Yorba PPA).	This was originally reported in, although the final solution to closing that ticket had to do with right-clicking to bring up the selection menu, not dragging messages.The behavior you're describing appears to be the behavior of GtkTreeView. We could find nothing obvious we were doing wrong or how to change GtkTreeView's operation.Note that if you Ctrl+Click to multi-select and then, when you click on the last item, hold the button down and begin dragging, it will work.I'll leave this open because I too would like to see this fixed. Note that moving to GtkListBox () might solve this issue.What if I'm selecting all items in a mailbox, though? There's no extant click when pressing ^A. :)(Of course, shift-clicking should work, as would ^A then two ctrl-clicks.)I seem to have found a workaround - after making the message selections, holding shift while doing the click to initiate the drag allows me to drag the selected items. It's inelegant but at least it makes it possible to do what I need.I don't know if something changed or if I just never verified the behavior in the past, but while the message view is allowing the drag to initiate, at this time (0.8.1-1 on Xubuntu) no action is actually performed when the multiple-selection drag takes place; the UI indicates that the messages will be moved, but they just stay where they were.Where are you dropping the messages? Geary has a bug where you can drag the messages anywhere on the tree, but in fact can only move/copy the messages if the destination folder is part of the same account.Also, are you holding down any modifier keys (Ctrl in particular) while dragging? They will turn the drop operation into a copy.I am dropping the messages on another folder on the same account.I release the shift modifier as soon as I start the drag. The specific sequence of events:1. Click on first message in folder2. Press shift3. Click on last message in folder4. Release shift5. Drag messages to the other folderThe UI responds as if the messages will be moved, but nothing happens when I drop them.When you release the shift in step 4, is the mouse button still down?Yes. I suppose I should have phrased that as3. Press the mouse button on the last message in folderand added:6. Release the mouse buttonI just tried that now, moving messages from the Trash to my Inbox, and it worked fine.What folder are the messages in, and where are you dragging them to?They are in a folder called "review" and I am moving them to a folder called "train-spam." Both are subfolders of the inbox.If it makes any difference, the server is running Dovecot.Also, just now I tried again, and it failed the first time (only moved a single message), but succeeded the second time. The second time I selected the bottom message first (and extended the selection to the top of the message list), so that might have made a difference.I'm still unable to reproduce this. Can you generate a screencast so I can see what's going on?It looks like it's been fixed already; my Geary has been recently updated to 0.8.2-1, which means it was probably fixed long ago. Resolving as obsolete.Hm, it just happened to me again, but I figured out the rhyme or reason - if I switch to a folder and then try extending the selection from the default-selected message, the drag fails, but if I click onto another message and then redo the same selection, the drag succeeds.Also, this time, the first drag did make the messages appear to move into the other folder but they bounced back into the originating one a second later.	15.0	id=736434	11	False	False	jim	1
id=120039	REOPENED	libxml2	general	2.5.7	Other Linux	Normal normal	Daniel Veillard	2003-08-16 21:24 UTC by	Gregory Leblanc	2004-12-22 21:47 UTC (	0 users	When using xmllint to validate some XML documents against a RelaxNG schema,it produces some misleading error messages. Here is some output:$ xmllint --noout --relaxng ../DTD/navigation.rng global-navigation.xmlRNG validity errorExtra element item in interleaveRNG validity error: file global-navigation.xml line 5 element itemElement bar failed to validate contentglobal-navigation.xml fails to validate$I can't figure out what the above means. I grabbed a copy of Jing, and itreports:$ jing ../DTD/navigation.rng global-navigation.xml/home/gleblanc/projects/gnome-web/www.gnome.org/global-navigation.xml:5:error: required attributes missing...$Which seems pretty straightforward. xmllint should provide a similarlyhelpful error message.	Without schemas and xml I can't even reproduce this.Moreover you can perfectly have<choice> <element name="foo"> <attribute name="bar"> <text/> </element> <element name="foo"> <data type="date"/> </element></choice> i.e. the fact that an attribute may be missing cannot be reportedas the problem in case you have a choice. You may have for examplefoo without attribute and a mathcing element content, the error wouldbe somewhere else... So in general this is not applicable. And withoutany idea of your schemas the bug report is simply useless !DanielCreatedRelaxNG SchemaCreatedXML document	3.0	id=120039	2	False	False	daniel	1
id=627123	REOPENED	gthumb	general	3.4.x	Other Linux	Normal normal	Paolo Bacchilega	2010-08-17 09:42 UTC by	Paolo Benvenuto	2015-12-21 13:01 UTC (	1 user	2.11.90I'm copying images from a local folder to a sft-mounted one.After ending the copy, the images aren't shown, I must issue a ctl-r to show them	Marking as obsolete, as this was reported for a now-unsupported version and no recent activity has occurred. Please feel free to reopen this bug report if the problem still occurs with a current version of gThumb.present in 3.4.x	2.0	id=627123	6	False	False	mjc	1
id=752769	REOPENED	glib	gio	2.42.x	Other Linux	Normal normal		2015-07-23 10:03 UTC by	Miguel París Díaz	2015-10-09 11:46 UTC (	7 users	CreatedCallgrind graphHello,I have detected that the most CPU usage of g_socket_receive_message is wasted in the error management, which happens always that there is not more messages.Specifically, the main problem is the management of the error string, which could not be useful for the user because only process the error type.I attach a callgrind graph where you can see the percentage of the CPU used by each function.To fix this I think that one approach is: - If the user is not interested in the error, it must no be managed. - If the user is interested in the error: - If he is only interested in the error type, the error string must no be processed - If he is interested in the error string (2 alternatives): 1) The string should be processed internally. 2) We should provide a mechanism to the user to process the error string (as recvmsg does).REFSman recvmsg"If no messages are available at the socket, the receive calls wait for a message to arrive, unless the socket is nonblocking (see fcntl(2)), in which case the value -1 is returned and the external variable errno is set to EAGAIN or EWOULDBLOCK."Source code:g_socket_receive_message:recvmsg call:g_set_error and socket_strerror calls:g_strerror (from socket_strerror):	(In reply to Miguel París Díaz from)Right... this could be fixed by adding a g_set_error() wrapper macro around g_set_error() (and probably likewise g_set_error_literal()) that would check if error was NULL before evaluating its arguments.Though at least theoretically, that is an ABI break, since code could potentially depend on the side effects of g_set_error() being executed...Unfortunately we have no way of knowing that this is the case from the point where we have to create the GErrorIt looks like a simple improvement here would be to change g_strerror() to keep its own errno->utf8-string hash table rather than using g_intern_string(); then it would only make the expensive g_locale_to_utf8() call once rather than making it every time it was called.CreatedMake g_strerror() do less workRemember the UTF-8-encoded error strings so that people in non-UTF-8locales don't need to call g_locale_to_utf8() in every g_strerror()call.==========Does this make your callgrind look better?CreatedCallgrind graph (g_strerror do less work)CreatedCallgrind graph (g_strerror do less work)First at all, sorry for the delayed response.I have profiled your patch and it improves the performance 3x :D (you can see the new callgrind graph).From this graph we can see that now g_set_error and glib_gettext are the most expensive functions.Could we do something to avoid it or reduce their cost?Createdg_socket_send_message - Callgrind graphI have also profiled g_socket_send_message (see callgrind graph), and I see some possible improvements: - Could we keep the native address info into GSocketAddress and only update it if it changes instead of generating it per each send_message call?Source code:g_socket_send_messageGetting native address:Can you attach the full (non-graphical) profiling output? (eg, to see what part of g_error_new_valist() is so expensive)CreatedCallgrind graph (g_strerror do less work)It is huge, so I have attached the complete graph.I hope it help you ;).It might be worth making an API call that doesn't malloc at all in this case. Something like an extra `gboolean *out_would_block` parameter?GLib is a pretty malloc-happy library in general, and that's hard to avoid, but I think we could do better with a few targeted APIs for inner loops.Createdgsocket: add a wrapper around g_set_error() to avoid extra workIf @error is NULL then we don't even need to evaluate the remainingarguments. And if errno is EWOULDBLOCK, then no one should see theerror message anyway, so don't bother g_strdup_printf'ing up a prettyone.Review of:This is something that we should consider promoting to GError API if more things use it.Another case I had is that it's very common to check for file existence in multiple places,and formatting a whole GError only to look for the equivalent of ENOENT was expensive.(This is in OSTree, and I mostly dropped GIO for local files for this and other reasons like being able to use openat() etc.)::: gio/gsocket.c@@ +246,3 @@ +/* Wrapper around g_set_error() to avoid doing excess work */+#define socket_set_error(err, domain, code, fmt, strerr) \Maybe `socket_set_error_lazy` to make clearer what it does?And as long as you're making this a macro, might as wellsuck in the common G_IO_ERROR, socket_io_error_from_errno (errsv)and strerror arguments.i.e.socket_set_error_lazy (error, errsv, _("Error accepting connection: %s"))?Review of:I am not super excited about this. Yes, it's better but it's still a hack.We need to be more aggressive about driving change into glibc, the Linux kernel etc.where it makes things better.In this case, "strerror_in_utf8()" seems like quite a sane thing to ask for. Infact there is already `strerror_l` - can we just give that a UTF-8 variant?Hmm...actually, I'd be happy if we just preserved the if (g_get_charset()) fastpath for the sane case where the locale is already UTF-8. In that case the oldcode was wrong in interning the string - we should be able to just reuse the valueof strerror() directly.(Okay except for threadsafety/lifetime issues - by interning it we were making it threadsafe and live forever, where as sterror() is not threadsafe...ugh)Review of:::: glib/gstrfuncs.c@@ +1247,3 @@ gint saved_errno = errno; + G_LOCK (errors);I worry about locking too much. I would do this solution to avoid it and it is also more efficient that using a hash table:static gchar * errors[N]; /* We should know how many errors there are or use a enough number */ret = g_atomic_pointer_get (errors[ernum]);if (ret == NULL) { /* Only access to the critical section when there is not value */ G_LOCK (errors); ret = g_atomic_pointer_get (errors[ernum]); if (ret == NULL) { /* Check again into critical section */ ret = strerror (errnum); if (!g_get_charset (NULL)) { ret = g_locale_to_utf8 (ret, -1, NULL, NULL, NULL); } g_atomic_pointer_set (errors[errnum], ret); } G_UNLOCK (errors);}(In reply to Colin Walters from)I thought about wrapping g_set_error(), etc in macros that would keep their arguments from being evaluated if error was NULL. But it's technically an ABI break; someone could be relying on a side effect occurring in one of those arguments. (GLib itself still passes "make check" with this change though.)(Option 2: make that behavior opt-in via a #define.)I also figured it probably wouldn't be worth it, since you're probably only going to have calls to gettext() in your g_set_error() args, and I'd expected that those would be reasonably well optimized (though maybe they aren't...)I had a thought that it might be nice to be able to create "static" GErrors, where passing them to g_error_free() is a no-op. Then code could just keep some stock GErrors around rather than having to make a new one each time. (This would require some way of "extending" GError, whichtalks about.)That probably wouldn't work for ENOENT though, since you'd need to include the filename in the message.oops, yeah. Originally it was a varargs macro and so I needed to be able to do "#define socket_set_error g_set_error" in the !G_HAVE_ISO_VARARGS case. But then I noticed that all the places I cared about had the same args anyway.If we can solve the immediate bug here with just having gsocket.c be lazy, I'd vote for going with that.(In reply to Colin Walters from)In this case the amount of necessary extra code (mangling LC_MESSAGES/LC_ALL/LANG, calling newlocale(), extra configure checks and #ifdefs) vs added efficiency (getting the right translation directly rather than having to transcode it *once*) seems not really worth it, particularly since we need to keep the non-strerror_l() version as well anyway.Yeah. Although in theory the code is already wrong/unsafe; someone could call strerror() in another thread in between when we call it and when we call g_intern_string(). (Or while g_intern_string() is waiting for its mutex, etc.) Though really I don't know why it doesn't just say that the behavior is undefined if @errnum isn't a valid errno value... (And if we then assume that libc returns a static string if @errnum is valid, which is totally reasonable, then the problem is solved.)Comment ongsocket: add a wrapper around g_set_error() to avoid extra workPushed the socket_set_error_lazy() patch with Colin's suggested changes.pushed as- gsocket: add a wrapper around g_set_error() to avoid extra workGreat ;).What about my comments in patch?(In reply to Miguel París Díaz from)If you want to pursue it let's make a separate bug.I think it's useful to keep this bug open, as it's about optimizing a specific use case, even though that optimization is going to require changes in a handful of different placesI agree with Dan,moreover the most impact patch is under discussion yet.Comment onMake g_strerror() do less workan updated version of this was committed as part ofCreatedgsocket: use the "recv_addr_cache" for send addresses too======We're already caching GSocketAddress<->struct sockaddr mappings forg_socket_receive_message(), so let's try using that cache forg_socket_send_message() too...	25.0	id=752769	17	False	False	mparisdiaz	1
id=740142	REOPENED	gnome-shell	login-screen	unspecified	Other All	Normal normal	Ray Strode [halfline]	2014-11-14 20:51 UTC by	Ray Strode [halfline]	2015-03-18 16:45 UTC (	2 users	Right now we emit session-activated any time the bulletmoves in the session menu. That includes at start up whenpicking an item arbitrarily, and any time GDM reports thesession was read from the user's account settings.session-activated informs GDM about the newly selected session,so emitting it in response to GDM reporting a session is abad idea (it's not only pointless, but it can least tooscillations)This commit changes the code to only emit session-activated whenthe user explicitly activates a session item from the gear menu.	CreatedloginDialog: only emit session-activated on user actionReview of:::: js/gdm/loginDialog.js@@ -351,3 @@ - if (!this._activeSessionId)- this.setActiveSession(id);Why was this removed?(In reply to)If we don't know what the user's selected session is, we shouldn't show a bullet pointing at some random one that won't get used.to be clear, this does mean in some rare cases there will be no bullet at all in the menu. Until the user picks one. I think that's the right behavior, but also, in practice it won't happen for any case but smartcards, since we query for the username up front and load the user up front in all other cases.CreatedloginDialog: Don't arbitrarily pick a random session for the usergdm should be in charge of telling us the default session, and itshould pick one for the user if she doesn't already have one.CreatedloginDialog: Better handle setting the active sessionWe currently use the setActiveSession method to both mark a menu item asselected, and also tell gdm about the current session the user selected.Since gdm is ultimately in charge of the state, we should decouple thisand simply ask gdm to set the session, and have the menu item reflectwhat gdm thinks is the current session.This prevents state getting mismatched and oscillations from happening,where we get in a loop of constantly telling gdm what the session is.Review of:obviously, like this one.Review of:This is better than what I came up with, and it seems to work as well in testing. It does incur a roundtrip through GDM, but that's probably a good thing.pushed as- loginDialog: Don't arbitrarily pick a random session for the userpushed as- loginDialog: Better handle setting the active session(In reply to Ray Strode [halfline] from)Apparently I suck at testing. I don't know if I typed make install in the wrong ssh window or what, but this patch break session changing.So there are two problems: setActiveSession: function(sessionId) {- this.emit('session-activated', this._activeSessionId);+ this.emit('session-activated', sessionId); },and the roundtrip through GDM isn't instant, because GDM is blocking waiting for the user's password. normally, the messages don't get processed until after the user enters their password.So I think we should revert this for now, since we're so late in the release cycle and it's clear what the best way forward is.We could do the original patch instead, but at this point, I think it's probably better to be conservative and go back to 3.15.91 behavior.Please revert back to 3.15.91. Sorry about this.CreatedRevert "loginDialog: Better handle setting the active session"This reverts commit.CreatedRevert "loginDialog: Don't arbitrarily pick a random session for the user"This reverts commit.pushed as- Revert "loginDialog: Better handle setting the active session"pushed as- Revert "loginDialog: Don't arbitrarily pick a random session for the user"	16.0	id=740142	12	False	False	jstpierre	1
id=126266	REOPENED	glib	general	2.0.x	Other other	Normal normal		2003-11-05 10:30 UTC by	Balazs Scheidler	2014-05-22 10:37 UTC (	6 users	We are trying to read lines from a nonblocking stream and we are encountering100% CPU time usage.We created a watch using g_io_channel_create_watch(G_IO_IN) and then attacheda read callback which calls g_io_channel_read_line.When a line without newline is present in the GIOChannel's buffer the pollloop maxes out the processor until a complete line is available.The problem seems to be that g_io_unix_prepare assumes readability when_any_ characters are present in the buffer and then g_io_channel_read_linereturns G_IO_STATUS_AGAIN as no complete lines are available.The solution would be a new option to GIOChannel (or Watch) that we want linebased polling.	Can you provide a) a testcase and b) an api proposal ?***has been marked as a duplicate of this bug. ***Hm... I am being affected by this problem as well :-/Zenity is hitting this problem too; see.Supporting line-based polling is one option. However, an alternative that is easier to implement and potentially more general is to recognize a third mode of return from a GIOFunc: "there's nothing more I can do with the input in the buffer, so don't call me again until new input is available from the fd". When a GIOFunc returns this way, a flag is set in the GIOUnixWatch that causes the g_io_unix_* functions to ignore the buffer condition; this flag is cleared when g_io_unix_check finds input on the fd. (I'm less sure of how to implement this for Windows.)The question is how to indicate the third mode. We shouldn't change the return type of GIOFunc since that would break existing code, and neither should we introduce a new type GIOFunc2 and a corresponding function g_io_add_watch2 because the meaning of g_source_set_callback would become unclear. As ugly as it might be, I think the approach least likely to break stuff is to add a function g_io_watch_set_buffer_exhausted(GSource *, gboolean) that sets the flag. (The capability to reset the flag may be useful in case some other event changes a watch's behavior in such a way that it may be able to make progress with the data currently in the buffer.) Unfortunately, the GSource is not passed to GIOFuncs, so they would have to get it through the data argument. An alternative would be to keep the flag on the channel (which is passed to GIOFuncs) instead of the source; that might break when there are multiple watches on the same channel, but I can't think of a good example where multiple watches on the same channel would be useful.CreatedDraft of proposed API fromHere's one way to add the API. The patch does work (I made a modified zenity based on it that handled partial lines correctly), but it could use some serious review.CreatedModified zenity for testing proposed APIHere, for the purpose of demonstrating and testing the proposed API, is a patch that produces the modified zenity I mentioned. To test, run the following in the zenity/src dir, making sure LD_LIBRARY_PATH is set if necessary to use the modified glib:(echo -n 'Hello'; sleep 15; echo ' world!') | ./zenity --list --column=Message"Hello world!" should appear in the list box after 15 seconds. During the 15-second wait, zenity should be responsive and should not use 100% CPU, and clicking "Cancel" should close the dialog immediately. Unmodified zenity uses 100% CPU and won't quit before the end of the 15 seconds no matter how many times "Cancel" is clicked.The patch looks sane to me, and seems to solve the problem. As I would again try to use GIOChannel in a project which needs to read lines from a non-blocking channels I'd try to use this patch, if its fate is to be included in mainline.Any chance we could get a review by one of the glib developers?Thanks.There is also another situation in which this problem arises. When encoding is in place and there is an incomplete multi byte sequence in the GIOChannel buffer, i.e. you get the error G_CONVERT_ERROR_PARTIAL_INPUT when reading, the callback will be called continously as the buffer is not empty while you would like to wait for more data (to complete the sequence).Hello,For the zenity case (), I was able to fix the error, using the g_usleep in the while.Modify the tree.c line 131: do { status = g_io_channel_read_line_string (channel, string, NULL, &error); while (gtk_events_pending ()) gtk_main_iteration (); g_usleep(10000); } while (status == G_IO_STATUS_AGAIN);With this, zenity doesn't use 100% cpu.I'm not sure if this is the best way to handle this, so I'm asking here if I can commit this little workaround on Zenity or if it will impact in glib in some way.	9.0	id=766831	6	False	False	u.scholz83	1
id=766831	REOPENED	gnome-commander	application	1.4.x	Other Linux	Normal normal	GNOME Commander maintainer(s)	2016-05-24 08:41 UTC by		2016-08-10 11:14 UTC (	2 users	The mounted devices are not displayed in the drive line and not in the drive box. Access is only via '\media\USER\DEVICE\​​' possible.Happens since Ubuntu 15.04 with Gnome Desktop and also on 15.10.gnome-commander 1.4.7could be connected to 348533and to	how to reproduce:plug in USB drive and start gnome commander (or keep it running, both the same)happens every timeexpected:drive will show in the panel and in the drive dropdownactually happening:no external drive is shown even it is mountedadditional information:it could be gnome commander is looking for mounted drives in the wrong place.This bug is related to the switch from gnome-vfs to gio, see. Still needs some time to be implemented. A current workaround is to dive into '/media/USER/DEVICE​​' as you mentioned.*** This bug has been marked as a duplicate of***It does not seem a real duplicate of. There it says: "When I restart Gnome Commander they, however, are noticed."While in my case, I can not see the drives even the commander is restarted.So it is either a different bug or 348533 is not giving the correct description?I do agree it will be related to.I have to admit that both descriptions are different. But the behavior of not recognizing the mounted device when gcmd has already been started is still the same. As it is is currently not even possible to get the device icon after restarting, the bug here is certainly more severe than. Thank you for reporting, I remove the mark of duplication.	4.0	id=126266	13	False	False	mclasen	1
id=754603	REOPENED	polari	general	unspecified	Other Linux	Normal normal	Polari maintainers	2015-09-05 16:04 UTC by	Bastian Ilsø	2016-07-21 10:28 UTC (	1 user	commit 320f87932d0825268bd31294b7a93cbcc3049be7 introduced a new element to the header, hence it would be nice to increase the width of the sidebar a bit.	CreatedroomList: layout changesCreatedPatch that changes sidebar width to 230CreatedChanges the sidebar width to 230CreatedThe sidebar width was changed to 230 to make extra space for the server's label and status icon.Review of:Thanks for the patch! I agree that after the recent room list changes, it makes sense to bump up the sidebar width a bit again, and the chosen width looks good to me. However I'd like to get a second opinion of a GNOME designer before pushing.I do have some minor nitpicks on the commit message: - the subject should use an active sentence, i.e. "roomList: Change sidebar width", though I'd consider using "Increase sidebar width" instead to make it clear in what way the width was changed - use present tense in the body (i.e. describe what the patch does and why, not what you did): "Change the sidebar width to make extra space ..." - bonus points for mentioning *why* the change happened - the only nitpick there is that the server label has always been there, so commitonly added the iconHow does this sound to you: roomList: Increase sidebar width Change the sidebar width to accommodate for the extra space taken up by the server's status icon that was added in commit.Createdbefore-patchScreenshot of sidebar before patch is appliedCreatedafter-patch(230px)Screenshot of sidebar after patch is applied (230px)CreatedIncreases the sidebar width to 230 with updated commit messageAfter talking with Allan, I think we came to the conclusion that increasing the sidebar width won't be necessary. Closing this bug for now.re-opening this as we may need to increase sidebar width when we get search ().	10.0	id=754603	11	False	False	ron13chatterjee	1
id=743989	REOPENED	nautilus	File Properties Dialog	3.22.x	Other Linux	Normal normal	Nautilus Maintainers	2015-02-04 13:41 UTC by	Carlos Soriano	2016-10-24 21:04 UTC (	1 user	Currently the name field is selected when selecting the basic tab, but if you type is not editable directly, you have to click in the text entry, so there's no point to have it selected and looks odd.Bug for newcommers	This required further discussion, as no easy trade-off can be made.It works now at least as of e92e417152081500a0188eeee346c1bc9636e276.(In reply to Carlos Soriano from)Ah, missed that part. Reopening.(In reply to Carlos Soriano from)What downside is there to focusing the entry widget when switching to the tab?I don't know, also I don't know why the name gets selected. I don't remember the details :(	5.0	id=743989	8	False	False	csoriano	1
id=768677	REOPENED	glib	general	unspecified	Other Linux	Normal normal		2016-07-11 12:47 UTC by	Kjartan Maraas	2016-09-08 22:42 UTC (	4 users	Createdtest suite log============================================================================Testsuite summary for glib 2.49.3============================================================================# TOTAL: 2881# PASS: 2876# SKIP: 3# XFAIL: 0# FAIL: 0# XPASS: 0# ERROR: 2============================================================================See glib/tests/test-suite.logPlease report to============================================================================Makefile:2126: recipe for target 'test-suite.log' failedmake[7]: *** [test-suite.log] Error 1make[7]: Leaving directory '/home/kmaraas/src/gnome/glib/glib/tests'Makefile:2232: recipe for target 'check-TESTS' failedmake[6]: *** [check-TESTS] Error 2make[6]: Leaving directory '/home/kmaraas/src/gnome/glib/glib/tests'Makefile:2879: recipe for target 'check-am' failedmake[5]: *** [check-am] Error 2make[5]: Leaving directory '/home/kmaraas/src/gnome/glib/glib/tests'Makefile:2883: recipe for target 'check' failedmake[4]: *** [check] Error 2make[4]: Leaving directory '/home/kmaraas/src/gnome/glib/glib/tests'Makefile:2506: recipe for target 'check-recursive' failedmake[3]: *** [check-recursive] Error 1make[3]: Leaving directory '/home/kmaraas/src/gnome/glib/glib'Makefile:2817: recipe for target 'check' failedmake[2]: *** [check] Error 2make[2]: Leaving directory '/home/kmaraas/src/gnome/glib/glib'Makefile:1211: recipe for target 'check-recursive' failedmake[1]: *** [check-recursive] Error 1make[1]: Leaving directory '/home/kmaraas/src/gnome/glib'Makefile:1668: recipe for target 'check' failedmake: *** [check] Error 2*** Error during phase check of glib: ########## Error running make -j 5 check *** [6/237]	The file you attached is pretty useless (just a bunch of 0s). In general, filing bugs about test suite failures adds more noise than value...It passes all tests today. Closing this.Sorry for the noise. It's not passing and I attached the wrong log file.If the test suites are worth having they should be worth filing bugs against, no? I agree that my report wasn't exactly helpful with the wrong log file being attached though :-)Createdtest suite logPatches appreciated. I'm unlikely to get to work on gregex any time soon***has been marked as a duplicate of this bug. ***	6.0	id=653437	16	False	False	ben	1
id=653437	REOPENED	gtk+	Backend: Win32	2.24.x	Other Windows	Normal normal	gtk-win32 maintainers	2011-06-26 17:59 UTC by	Martin Renold	2012-08-12 11:06 UTC (	8 users	I'm trying to make MyPaint work with GTK 2.24 on Windows. With limited success so far. There are three issues:A) MyPaint crashes with assertion failure because it receives x,y coordinates in the range of 10^9. Fix attached.B) When extended events are reported, normal events are not suppressed. There is code to suppress them, but it doesn't work (any more). Setting GDK_NATIVE_WINDOWS=1 does not fix this.C) Tablet pointer offset is wrong. Initially it's not too bad (maybe as much as the menubar height), but after moving the window it's clearly wrong. Setting GDK_NATIVE_WINDOWS=1 fixes this.	Createdobvious fix of invalid castCreatedinitialize root_x/root_y members (fixes issue A)For reference, the corresponding MyPaint bugreport:I have been trying to fix B) but so far I did not find a clean fix. The problem seems to be that normal WM_MOUSEMOVE events are reported to a different GdkWindow than the wintab motion events. The window where WM_MOUSEMOVE events are reported does not have extension events enabled, and because of this it doesn't ignore core events when ignore_core is set.I guess the code should use _gdk_window_get_input_window_for_event() to get the correct (non-native) GdkWindow for an event, as the X11 implementation does, but I haven't figured out where/how to insert this. Maybe there is some easier workaround...Finally, I haven't tested with GTK 3 yet but it looks like the input handling has changed too much for any of the fixes here to apply there.I am running mypaint git with gtk+ 2.24.4 and encountered the same issues. I went through similar debug having not seen this bug.Regarding (C) I specifically determined that (x,y) == (x_root,y_root) *when the button is pressed*. I had the same window suspicion but event.window does *not* change. Clearly the window used for gdk_input_translate_coordinates must change to see that problem. I have noticed that if I edge out of the canvas (without lifting up) that as soon as I'm over the gutter at the top of the window suddenly the position is fine.I also have an additional problem:D) No input devices are detected.Comparing this with 2.17.2 (which is what mypaint 0.9.1 was shipped with) I discovered via GDK_DEBUG=input that the _gdk_input_wintab_init_check was seeing garbage in 2.24.4. Not complete garbage, but enough noise (specifically PHYSID=0) to disregard all devices. I traced this to the following commit:commitAuthor: Tor Lillqvist <>Date: Thu Sep 9 19:48:42 2010 +0300 Avoid potential DLL hijacking in Wintab code Load Wintab32.dll from an absolute path. A proper Wintab32.dll, if present, should be in the Windows system directory, so load it from there.my wild speculation is that opening the explicit path version reloads the DLL and the second copy does not have the right global state. If you go back to simply LoadLibrary("Wintab32.dll") it discovers devices just fine again.Following up on (B): I note the introduction of _gdk_input_crossing_event() in:commitAuthor: Tor Lillqvist <>Date: Thu Aug 13 22:49:35 2009 +0300 Initialize missing methods on Windows Set the input_window_destroy and input_window_crossing methods of the GdkWindowImplIface on Windows. Add implementation of _gdk_input_crossing_event that is mostly dummy, though.the *only* behavior of which is to do if (!enter) _gdk_input_ignore_core = FALSE; (the rest is #ifdef'd out). If there really is some kind of window transition on mousedown maybe it synthesizes a crossing event and hits that code.Neutering that function didn't change any behavior, though.On (B) again I think I found the spot where WM_MOUSEMOVE -> GDK_MOTION_NOTIFY is not getting blocked.Between these two commits there were a bunch of changes:commitAuthor: Cody Russell <>Date: Sun Mar 1 09:36:15 2009 -0500 Grab changescommitAuthor: Cody Russell <>Date: Sun Mar 1 08:55:50 2009 -0500 grabsIncluding the initial removal of the propagate() test:+#if 0 // XXX - this seems to always block us from creating motion notify events -- Cody if (!propagate (&window, msg, grab_window, grab_owner_events, grab_mask, doesnt_want_button_motion, TRUE))which is cryptic but literally 10 times longer than the commit message and all we have to go on.About a month later it looks like a lot of those changes in that area in f4331caf are unwound by:commitAuthor: Alexander Larsson <>Date: Wed Jul 1 10:26:37 2009 +0200 Make win32 backend build and minimally workProbably 40 lines of code surrounding the propagate() call are removed but the result does not restore the pre-Cody version and loses the propagate() test.(and as a result I think myis a red herring)I finally got a build going so I can test more elaborate changes:Re: commit(pathname to wintab32.dll) here is my current theory: Every time you load wintab32 (and by extension wacom_tablet) the Wacom driver initializes a copy of its global state. All of the cursors have PHYSID=0 because it hasn't seen any of the actual devices in proximity. When queried it returns very broad information (claiming all kinds of capability like tangential pressure which really don't exist). Since gdk loads it (a new copy) and immediately queries it it sees all PHYSID=0 devices and ignores them. The same thing happens if gdk is the first wintab32 user after boot *until* the pen comes into proximity and the Wacom driver identifies that particular pen. The only thing that loading it without the path does is share the wintab32 state with some prior application which allows it to see the pens which previously came into proximity.Re: myabove referring to commits that removed propagate() from the WM_MOUSEMOVE case: If I cobble that back in (it requires some modifications because of other changes between 2.17.2 and 2.24.4) *and* I set GDK_NATIVE_WINDOWS then mypaint works fine (I also applied the Martin Renold patches from the attatchements). Without GDK_NATIVE_WINDOWS I can see from some additional debug that the window selected by gdk_window_at_pointer() for tablet events does not match the one found by msg->hwnd in the WM_MOUSEMOVE case. That fact alone probably explains most of the issues with coordinate offset (wrong window) and the fact that WM_MOUSEMOVE (the core event) is not suppressed (the window it's looking at doesn't have extension events enabled).I have no idea how to go about debugging the window thing.Createdhalf-assed attempt to restore propagate() test to WM_MOUSEMOVEI do not know the significance of the "doesnt_want()" test in propagate() and the one that was there in 2.17.2 was removed at some point (maybe just for being dead code after this propagate() was removed?) so I stubbed it out since it's the _gdk_input_ignore_core that I care about.These bugs crop up in GIMP as well making tablets on Windows unusable beyond basic core pointer and putting a gloomy shadow over the 2.8 release that we strive to do as soon as possible.***has been marked as a duplicate of this bug. ***I've started since a few days ago to look into this problem, and until I get everything setup for building GTK on my windows machine I have the following question, targeted at any kind GTK developer who might read this. The question is related to the value of GDK_NATIVE_WINDOWS.Supposing that issue A is fixed, and issue B gets fixed and knowing that having set GDK_NATIVE_WINDOWS=1 fixes issue C, can we leave that set to 1 and consider the bug fixed, or it is set in the official binary release to 0 by default, so we should find another way for fixing this issue C?Thanks and looking forward for your answer.CreatedRefinement of Ben Jackson's propagate fix for mouse moveI have successfully applied the above patches and they work. I have made a refinement of Ben Jackson's fix by restoring the original "doesnt_want_button_motion" function instead of "doesnt_want_what_what" function. The rest is the same and it works as expected.I have also noticed a strange behavior for issue C (when GDK_NATIVE_WINDOWS is not set):The drawing is very very slow. I do not know why, as with GDK_NATIVE_WINDOWS it is working like a charm, but without it, besides the offset, the drawing is incredibly slow. I have noticed also that if you use myPaint in fullscreen (F11 shortcut), there is no offset at all, but it still draws very very slow.As Ben said, the coordinates are correct for the "tip down" event of the tablet's pen, but are incorrect for the movement events. I've taken this a bit further and calculated that the wrong offset is always equal to the offset of the application's window from the top-left corner of the screen (that is why it works in fullscreen). Using this information I suspect somewhere the coordinates are received in "screen" mode but used in "client" mode (with top-left corner of the window being 0,0) and I have tried to replace the coordinates calculation code passed to events in several places but with no success.I will continue to try and fix this, but I'm afraid even with offset fix, there is something very wrong with the painting code when GDK_NATIVE_WINDOWS is not set, so I think another option which should be considered is setting the above mentioned environment variable to 1 for mypaint only and we should be OK with it until gtk 3.0 comes on Windows.I attach here the refinement of Ben Jackson's fix.Mihai: drawing is very slow most likely because the active input device changes several times a second. This causes MyPaint to switch between tool settings and/or spam the undo stack with tiny stroke fragments.Martin, thanks for the input, I understand now.I have spent the last four hours reading all code related to GDK_NATIVE_WINDOWS as I considered it is a good starting point, and I have found nothing that could point to the root of the offset problem. Device detecting seems to be independent of GDK_NATIVE_WINDOWS, so it might be a consequence of the new virtual windows system that occurs only on Windows platform, and it might lead to the device switching you are talking about.My conclusion is the following:During the development of gtk+ 2, the developers have started to implement a virtual windows system, where only the gtk root window is a native system window, the rest being virtual windows. Most of the changes related to this (I believe) were made by having version 2.16 as a starting point. It is quite obvious that it was quite a breaking change for gtk enabled applications, as in 2.18 the GDK_NATIVE_WINDOWS was introduced as an alternative for applications that do "weird" things on the new virtual windows system. I guess this is one of the reasons (along probably many new development ideas) for gtk 3, as there was need for some things to be done from scratch, and I also think MyPaint is also one of these applications.Giving the explanation of why GDK_NATIVE_WINDOWS was introduced, I see no obvious reason of not use it for MyPaint under Microsoft Windows platform, giving that the other parts of the bugs are fixed. This solution will not help the port of MyPaint to gtk 3, but having a stable Windows release as soon as possible on gtk 2.24 is kind of a priority for many users, and spending more time in finding the right solution for this offset issue will not guarantee an easier porting to gtk 3, in which a lot of things are changed.So my suggestion is to have this bugged fixed by:1. Having Martin's two patches applied to 2.24 by a kind GTK developer2. Having Ben Jackson's patch(diff) with my refining added also applied to 2.24 by a kind GTK developer.3. Having GDK_NATIVE_WINDOWS set for MyPaint under Windows by a kind MyPaint developer.After these are implemented and the new GTK released, I am more than willing to help get a stable release on Windows asap.I want to add that also with GDK_NATIVE_WINDOWS=1, I have noticed a fast cursor switch between gdk circle and Windows default mouse pointer. It is annoying but it doesn't affect painting at normal speeds at all.another minor issue of enabling GDK_NATIVE_WINDOWS that I noticed is pointer become lose its "focus on hover" ability over menu.I have tested the changes with GDK_NATIVE_WINDOWS=1 and they seem to work fine.The cursor flickering has nothing to do with this bugreport. It also happens when setting GDK_NATIVE_WINDOWS=1 on GTK 2.24 git without applying the patches. Whenever the MyPaint canvas display is updated (eg. when panning the canvas with the arrow keys, or when painting with the mouse), the cursor reverts to a pointer until the next motion event.I think this is the vulnerability that triggered loading the wintab directly:(my antivirus found it).(In reply to)I just landed a rewrite in the gtk-2-23-win32 branch that makes tablets work again in win32, at least with testinput and gimp.Landed in gtk-2-24 branch now.Drawing on canvas now works with gimp, however, dragging a guide from toolbar does not. The same behavior as before reappears, events seem to be coming from both the pen and the tablet.mouse and tablet, I meant.Not sure if this is stretching this bugreport, but we've had reports from different MyPaint 1.0 users on Windows users saying that pressure doesn't work. Too many to blame it on individual setup, IMO. Obviously, it also works for some users.Seefor some links. You'll find more of them in the MyPaint forum, including some workaround suggestions that usually work for exactly one user.I read those reports too. They were about specific version of bamboo tablet and at least one solution was related to upgrading/downgrading the driver. It's possible and maybe even probable that issue is between the wacom driver and wintab interface.Here is the comment on the "pressure lost" I posted on the mypaint bugtracker yesterday onI can make what ever test you want to help improve the situation.---I've got some new informations for all "pressure lost" on wacom tablets.I've got an old Wacom Pen&Touch that I used to use on a daily basis with mypaint (including 1.0.0) on windows (7 - 64 bits).I recently bought a new Wacom Pen&Touch.The old Pen&Touch is labelled CTH 460/KThe new one is labelled CTH 470/KHere is what I observe.First : Deleting drivers, Manually removing wintab32.dll then reinstalling drivers doesn't change anything to the following description.When I plug the CTH 470/K on the computer and I try to use mypaint 1.0.0, I don't have pressure (tablet act as a mouse).When I plug the CTH 460/K on the computer and I try to use mypaint 1.0.0, I have pressure (tablet act as expected).When I plug both CTH 460/K and CTH 470/K, on the computer, and I try to use mypaint 1.0.0, pressure works on BOTH hardwares.When I plug both CTH 460/K and CTH 470/K, on the computer, I start mypaint 1.0.0 and then I unplug the CTH 460/K, I can still use pressure on already lauched mypaint. But I launch a new mypaint instance, the tablet act as a mouse. If I switch between "old mypaint process" and "new mypaint process", I have alternatively pressure and not pressure.When I plug only CTH 470/K, and launch mypaint, pressure doesn't work. If I plug CTH 460/K pressure still doesn't work on mypaint, but if I launch a new mypaint process, pressure will work.Everything said here with mypaint 1.0.0 works the same with gimp 2.8 (also tested inkscape on severals test cases)What I deduce :- This is probably not a mypaint 1.0.0 related problem- This is not a Bamboo/not Bamboo, not even a Bamboo pen&touch related problem but a Bamboo pen&touch 2010 versus Bamboo pen&touch 2012 related problem.- I look like an initialization problem somewhere. both tablet works when ever the process has been started when the CTH 460/K was plugged.- The problem may concern every 2012 wacom tablet, because it look like Intuos (who have entire different drivers) are affected the same way.I forgot to add that when the CTH 470/K doesn't act as a tablet but as a mouse (pressure doesn't work), I can still use pressure on applications using the "web plugin" and bamboo dock.Those non GTK processes load wintab32.dll (as seen by process explorer) so the seems to use the wintab32 API. So it seems that there is a way to use wintab32 and to make CTH 470/K working without having to plug a CTH 460/K.Looks like users still get too many device changes in MyPaint. It looks like issue B - "normal events are not suppressed" - of my original report.MyPaint bugreport:("Brushstrokes lag and break up on windows")	27.0	id=768677	10	False	False	mclasen	1
id=574212	REOPENED	nemiver	general	trunk	Other Linux	Normal normal	Nemiver maintainers	2009-03-05 03:58 UTC by	Jonathon Jongsma	2009-04-03 14:14 UTC (	1 user	Log entry from a trying to get the type of std::string::npos:|{|bool nemiver::GDBMIParser::parse_out_of_band_record(size_t, size_t&, nemiver::Output::OutOfBandRecord&):{|I|void nemiver::remove_stream_record_trailing_chars(nemiver::common::UString&):nmv-gdbmi-parser.cc:2685:stream record: 'ptype std::string::npos\n' size=25|}|bool nemiver::GDBMIParser::parse_out_of_band_record(size_t, size_t&, nemiver::Output::OutOfBandRecord&):}elapsed: 3.6108e-05secs|{|bool nemiver::GDBMIParser::parse_out_of_band_record(size_t, size_t&, nemiver::Output::OutOfBandRecord&):{|I|void nemiver::remove_stream_record_trailing_chars(nemiver::common::UString&):nmv-gdbmi-parser.cc:2685:stream record: 'No type \"string\" within class or namespace \"std\".\n' size=55|}|bool nemiver::GDBMIParser::parse_out_of_band_record(size_t, size_t&, nemiver::Output::OutOfBandRecord&):}elapsed: 3.7295e-05secshowever, if we had surrounded std::string::npos with single quotes, gdb would have happily given us its type. Patch soon.	Createdpatch to quote arguments to -data-evaluate-expression, and ptypepushedI think this fix leads to subtle regressions.suppose you have this program: 1 int 2 main () 3 { 4 int i = 0; 5 i++; 6 i++; 7 }Then look at this gdb session:4 int i = 0;(gdb) n5 i++;(gdb) p i$1 = 0(gdb) p 'i'$2 = 105 'i'(gdb) ptype itype = int(gdb) ptype 'i'type = charWhat happens is that quoting i like in 'i' changes the type of the i expression.i is of type int, but 'i' is of type char. This leads to subtle bugs in the Nemiver interface if you quote the arguments of either ptype or -data-evaluate-expression. It leads to many regressions actually.So I reopening the bug and I will revert the changes.Having '::' to be properly understood by GDB requires a bugfix in GDB, I believe.I think we should change the title of the bug as well.Yes, I think I've seen some regressions as well, so we probably should revert it for now.Okay, I have reverted the changes of the commit and added a regression test to catch that regression.The commit hash is 800d796c34aaChanging the title of the bug from "gdb apparently requires arguments to 'ptype', etc to be quoted" to gdb ptype command doesn't work with type names containing '::'	6.0	id=574212	8	False	False	jonathon	1
id=756418	REOPENED	nautilus	Sidebar	3.18.x	Other Linux	Normal normal	Nautilus Maintainers	2015-10-12 05:22 UTC by	Michael Heyns	2016-12-29 00:24 UTC (	1 user	CreatedScreenshot of problemSteps to reproduce:1. Mount remote location. (in this case davs://...)2. Add bookmark.3. Open Nautilus when location is not mounted.4. Click on bookmark5. A new entry is created instead of the current being utilised.This is especially confusing when the bookmark has been renamed to something useful/human readable. A new entry with the address is created instead and there is no indication that the bookmark has been mounted or is being browsed. The bookmark is also rendered futile as there is no click action or eject action, it just wastes space. Proposal: Use bookmark entry instead of creating a new entry. If this is not feasible, hide bookmark entry if mounted and relabel new mount entry to that of the bookmark name. Also, make sure to relabel the breadcrumbs in the address/header bar to the correct name. If the address/scheme of a bookmark is needed, one can simply hover over it.	*** This bug has been marked as a duplicate of***Sorry, Volkner, but this is definitely not a duplicate of.That bug is regarding bookmark paths. This is ragarding visual elements. Please see the attached screenshot.	2.0	id=756418	5	False	False	reklov	1
id=746924	REOPENED	geary	server-support	0.9.x	Other Linux	Normal normal	Geary Maintainers	2015-03-28 05:53 UTC by	Juraj Fiala	2016-07-29 06:42 UTC (	5 users	You've probably heard of Riseup (<riseup.net>). Very nice guys and gals who try to do everything to protect your privacy, providing almost everything you need with detailed documentation.Sadly Geary doesn't support Riseup email much. Yeah, it works, but all the folders are "doubled" under Inbox as tags, and sent messages fail to be saved because the folder is non-existent.The fix to the former is setting the IMAP root to "INBOX". The latter is using a different folder called "Sent".Thanks.	***has been marked as a duplicate of this bug. ***Riseup seems to be using Dovecot - does anyone know which version?I'll need some debug logging to be able to diagnose the issue - can someone please try the following:1. Run Geary using the command:2. Quit it once the spinner down the bottom of the folder list has stopped spinning3. Open geary.out in a text editor and find/replace any personal info with redacted text4. Attach the redacted file to this bug.Thanks!riseup.net using dovecot 2.2.13Createdgeary_cleaned.outi did use geary for some time, moving some mails. 1) i can confirm, that some folders were visibly twice (trash/Trash, Sent/Gesendet/Gesendete Objekte, Entwürfe/Drafts)2) the server message on exceeding the quota should be shown to the user as it contains instructions to solve the issue.3) on the next start after entering my mailbox password (with the option 'save password' checked) gnome's keyring manager asked for a password. I do not use it normally, canceled the dialogue and geary quit. instead a message that the password wasn't saved could be shown. [deb] 04:23:50 0,112522 secret-mediator.vala:76: Unable to fetch password in libsecret keyring for... [msg] 04:24:07 12,228099 Remote error from secret service: org.freedesktop.Secret.Error.IsLocked: Cannot create an item in a locked collection [deb] 04:24:07 0,000308 geary-controller.vala:1115: Unable to open account Other:: Cannot create an item in a locked collection [deb] 04:24:12 5,078855 geary-controller.vala:358: Closing Engine... [deb] 04:24:12 0,000344 geary-controller.vala:360: Closed Engine4) is it possible to delete folders?I did get the output, but I have 4 email accounts configured in geary and I don't want to upload the details of all of them, what do I need to delete to be sure I dont't do that? Is deleting email addresses and servers enough? I can send it to you in a mail though if you want, I already scanned it through but it's really long).Hey Juraj,(In reply to Juraj Fiala from)Mostly your account email addresses, login name if you built Geary your self and host names. You can send it directly to me if you'd like, however. Ta!Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!Haha, whoops. wrongbug.com.	8.0	id=746924	11	False	False	doctorjellyface	1
id=480623	REOPENED	evolution-data-server	general	2.26.x (obsolete)	Other Linux	Normal minor	Evolution Shell Maintainers Team	2007-09-26 15:01 UTC by	Basilio Kublik	2009-12-01 03:49 UTC (	7 users	this bug has been reported at"Binary package hint: evolutionSteps to reproduce,- Start evolution- Compose email- Put some contact name that is auto-completed in the 'to' field- Put another contact name that is auto-completed in the 'cc' field- Now cut the address in the 'to' field by selecting the name (through keyboard with shift+arrow keys) and doing Ctrl-x- Press <tab> to bring focus to the 'cc' field- Notice that if the cursor in the 'cc' field is at the beginning of the already entered contact name (this can be achieved with the Home key) and if you paste earlier cut contact name at that location, then the contact name is pasted, but both the names lose their special meaning (i.e. they are no longer underlined and are merely two name strings without email addresses associated with them).- Instead if you press end key in the 'cc' field and then press Ctrl-v (after then comma) then the cut contact name is pasted appropriately (with email address and all).The above behavior is observed even when the contact name is cut including a trailing comma."	there's also a screencast at launchpad report showing this issue in action.Downstream bugIt happens in 2.23.1.Probably need to put the cursor at the end on a focus-in-event.,address same issueThere is a fix infor similar issue. Can you please test with the latest trunk updates?I assume it's fixed as there are no duplicates since more half a year.did you try before closing the bug? the description still leads to the issue in 2.26Bug is in the ENameSelectorEntry widget in libedataserverui, so changing product to Evolution-Data-Server.I can reproduce this with Evolution & EDS 2.26.3	9.0	id=480623	24	False	True	sourcercito	1
id=547988	REOPENED	gtk+	Widget: GtkFileChooser	2.8.x	Other All	Normal minor		2008-08-16 05:43 UTC by	Fabricio Godoy	2016-09-15 08:30 UTC (	9 users	Please describe the problem:In an open directory dialog when followed bellow steps I'm not able to choose current directory.Steps to reproduce:1. Open Nautilus2. Press Ctrl+F3. Search anything4. In field from side of "Local", choose "Other"5. Browse a subfolder (example: /home/user/documents)6. Back to parent by clicking on navigation buttons (example: /home/user)7. Press "Open"Actual results:The subfolder (child) is choosed instead of parent.Expected results:Parent folder choosed to open.Does this happen every time?YesOther information:	The only problem is see is that the subfolder is still "highlighted".Are you sure this is a bug?Is not an error, but should be desired a easiest behavior.OK. I am trying to fix this issue. I think the problem is nautilus-query-editor.c. Have you any ideas to improve this behavior? thanks.I think that when you back to parent none of childs should be selected as you go to any folder at first time.This is a difficult report to understand. What is 'field from side of "Local"'?! What is the open directory dialog?!What I think you are suggesting is that selections should be remembered when browsing via search results. Opening a directory in a search result and then pressing back to return to those search results, the directory should be selected.We already have a generic bug for remembering selections when browsing. I'm going to mark this as a dupe of that for now. Please let me know if I have interpreted your report correctly though.*** This bug has been marked as a duplicate of***No, the bug relates to open directory dialog not nautilus himself.Open directory dialog example:Do a search into a directory that contains subdirectories.Choose a location to search:In open direcory dialog, first subdirectory will be selected.Click in Open button, the subdirectory will be selected not current one.If you go to subdirectory and come back to parent happens this too.The open dialog should select current directory not the selected, I think.This can, of course, confuse people. How to know if current directory or selected directory should be selected.A better solution maybe should be do not select any directory or file automatically, the user only may do this.Then coming back to parent directory none of subdirectories should be selected, meaning that user wants to open current directory.Let me know if you understand.Ah, I follow you. Steps to reproduce:1. Perform a search in Nautilus.2. Add a location filter3. Select Other... from the location combobox4. Press Open in the open dialogExpected behaviour: the first directory should be opened.Actual behaviour: the open dialog closes but the search location hasn't updated.Seems like this is a generic bug relating to GtkFileChooser. I can't see a dupe.The open button isn't greyed out when nothing is selected. If the open button is used while nothing is selected, the dialog closes but doesn't seem to return anything.Hope I got this right. ;)Renaming for clarity.Here, nautilus 2.28.4, when FileChooser is opened the first directory is automatically selected.Even when is a directory without subdirectories the open button works well, nothing to update (it's right, I think).The problem is: How I select current directory?FileChooser always select one item, this force me to go up one level to select current directory.(In reply to)Not here - I don't get that.What do you mean by current directory?CreatedWhere is current directoryThis image say everythingCreatedfile-chooser: make accept action sensitive only when has selectionReview of:Looks good.pushed as- file-chooser: make accept action sensitive only when has selectionReopening because this patch prevents you to create a new file with gedit and its kind in case there is no file selected. It's especially obvious when you try to create a new file in an empty directory.Createdfile-chooser: emit selection-changed when location entry changes toopushed as- file-chooser: emit selection-changed when location entry changes tooStill it is possible to return nothing:1/ run e.g. eog2/ image->open 3/ ctrl+l4/ press enter or use open button[Removing outdated "GNOME target" value.]	19.0	id=547988	38	False	True	a9016009	1
id=748876	REOPENED	nautilus	Views: List View	3.22.x	Other All	Normal minor	Nautilus Maintainers	2015-05-04 09:01 UTC by	Christian Stadelmann	2016-11-06 11:38 UTC (	2 users	With 3.16 I have a new problem which was not present in 3.14:When using the list view there are only 3 zoom levels left (small, default, large) where nautilus had 7 zoom levels (33%, 50%, 66%, 100%, 150%, 200%, 400%) before. This limits the user's choice. Taken alone this is no problem.If a file or directory cannot be accessed due to absence of permissions nautilus displays a small dark gray "X" in the bottom right corner in a light grey square. If there is a symlink on a folder the icon will be mostly the same except that there is a small dark gray arrow instead of the "X". They can barely be distinguished from each other.To solve this problem I would suggest doing one of these:1. increase the number of available zoom levels adding some intermediate zoom levels between "small" and "default".2. increase the relative size of the light gray square with the dark gray "X" or arrow compared to the icon size.	The number of available zoom levels has been changed, closing as fixed.(In reply to Alexandre Franke from)Yes, the number of zoom levels has been raised (by 1 in list view). But no, the issue is still present. In list view with zoom=50% it is hard to see emblems. In list view with zoom=100% icons are too big for the screen, wasting precious screen space. If you want to add a zoom level to make this easier, please add one at 75% or so. Otherwise, option 2 is still present.	2.0	id=748876	9	False	False	AntonioJPFernandes	1
id=263621	REOPENED	evolution	Mailer	2.4.x (obsolete)	Other All	Normal minor		2004-08-22 16:17 UTC by	Andrew Sobala	2012-08-09 16:12 UTC (	1 user	Have your mail fetched by fetchmail then sorted into maildirs by procmail.Set up evolution filters to set mails to different colours depending on thesender. It is impossible to get these filters to run automatically becauseyou can only do that on one folder called "INBOX". It should be possible torun the filters on all maildirs.Running the filters on all folders may be less useful when using remotebackends, eg. IMAP, but only running it on INBOX is a serious limitation inthe local case.	This sounds like a dup of(Would like to be able to attachfilters to specific folders) or(Filter on other box thenINBOX over imap doesn't work).It's similar. It's a request to apply to all mailboxes rather than tobe able to apply filters to specific ones though. Swings and roundabouts.I have the same problem (can't use filters because my Maildir inboxisn't named INBOX). Is there a workaround? Is there some header Ican add with procmail that will change the color of the message orotherwise visually distinguish it? It doesn't look like colorizationis stored in the mail message itself.Maybe a simple fix is just to make filter rules apply to mailboxesnamed "." as well as "INBOX".Nevermind, incoming filters seem to be working now that I've checkedthe "apply filters to new messages in INBOX" option. I was confusedby the wording, and thought filters only applied to folders whoseexact name is "INBOX".Please upgrade to evo 2.2 or greater and check if you still face the problemYes, it's still there in 2.3.7. Do you think it should have been fixed?yup it did.yup it was worked on. will check further.	8.0	id=263621	12	False	True	gerardo	1
id=753131	REOPENED	gnome-calendar	User Interface	3.16.x	Other Linux	Normal minor	GNOME Calendar maintainers	2015-08-01 13:55 UTC by	Jean-François Fortin Tam	2016-12-30 23:57 UTC (	2 users	Compared to California, Google Calendar and others, GNOME Calendar currently shows time-based events in the month's "day cells" the same way as it displays all-day events (big rounded background, no time shown).Instead I would expect it to be a background-less colored timestamped label,ex: "12:00 lunch with the Yakuza"	Createdevent-widget: show start time when event is timedWe differentiate all day events from timed events by theirordering, but we don't give any visual clues of thisdifferentiation.Fix that by adding the start time of the event when it's atimed event.Fixed. Thanks for the report.pushed as- event-widget: show start time when event is timedI see the result now, it's an improvement as the label shows the time... however I'm still kinda used to having them backgroundless (with the label colored instead), perhaps because that's how most gcal and ical do it...So, having used the current implementation for a bit, I'd like to bump this back up... I really have a hard time distinguishing all-day events from time-based ones right now if the only difference is the label, I'd rather prefer the backgroundless+colored_label approach for time-based events, if you think it makes sense.This is how it looks like in Google Calendar:And in iCal:Even if you're standing 3 meters away from the screen you can instantly see which days have full-day events and which ones are full of meetings.Eh, I kind of like the solid backgrounds for all events/appointments because it makes the calendar color stand out more.I don't have super strong feelings about the aesthetic aspect of this, though. And as for the utility, I think differentiating between all-day and timed events is probably less important for month view than it will be in week view. So maybe the current design in month view will be okay once the feature request inis finished?	5.0	id=753131	10	False	False	nekohayo	1
id=135605	REOPENED	gnome-panel	panel	git master	Other Linux	Normal minor	Panel Maintainers	2004-02-27 15:36 UTC by	Mark McLoughlin	2005-04-17 15:41 UTC (	0 users	From:Confirmed with gnome-panel 2.5. Could possibly resolved by Bart's patch in- i.e. it might be due to the panel resizing on autohide.Dubious that this is the cause since the bug was first reported against 2.2.	Has this been fixed by now? The report mentioned seems to have been closed now.I'm still seeing some unpleasant things here.	2.0	id=135605	4	False	False	kmaraas	1
id=374341	REOPENED	gnome-vfs	URI handling	2.17.x	Other Linux	Normal minor	Christian Neumair	2006-11-12 16:50 UTC by	Sven Arvidsson	2007-03-13 12:00 UTC (	3 users	This bug was reported to the Debian BTS."There seems to be some problems with the quoting with files that havecolons in the name. Here's a transcript showing the problem.dpt@amaryllis:/tmp$ evince t.ps[works]dpt@amaryllis:/tmp$ mv t.ps t\:t.psdpt@amaryllis:/tmp$ evince t\:t.ps[Gives error:Unable to open documentUnsupported operation]dpt@amaryllis:/tmp$ evince /tmp/t\:t.ps[works]"	I think this clashes with URL support.It's a gnome-vfs bug, gnome_vfs_make_uri_from_shell_arg() doesn't return a valid uri when filename is a relative path and contains ':'. Reassigning.CreatedProposed patchThanks for your bug report and your analysis.gnome_vfs_make_uri_from_shell_arg() indeed treats all file names containing a ':' character that is only preceeded by letters (and other characters that are accepted as scheme specifier in the URI RFC) as a raw URI.The attached patch changes the algorithm to only match against schemes that have an associated method, i.e. we're expected to be able to deal with. This will not resolve the issue for file names like "file:" or "ftp:" but it should be a progress. I didn't want to stat the passed-in file name, as I don't think this helper is meant to do any data-related I/O (besides the added method lookup which might kick off I/O as well).Commited.I had to revert that patch to fix. We must not break gnome-vfs uri support for methods that we don't handle with a gnome-vfs method since we don't know if apps are using GnomeVFSUri for their special uris (i.e. yelp does).	5.0	id=374341	16	False	False	wbolster	1
id=167544	REOPENED	Gnumeric	GUI	git master	Other All	Normal minor	Jody Goldberg	2005-02-16 00:20 UTC by	Liam Quin	2009-03-11 19:15 UTC (	3 users	Version details: gnumeric-1.4.2-1mdkDistribution/Version: Mandrake Cooker[1] make a new sheet[2] in two or more adjacent horizontal cells, enter a short word of text[3] select the cells, choose Format Cells / Alignment, and set to be, say, 45 degrees[5] make the text longer in each cell by adding more wordsYou should be able to read the text of all the cells at once (this is the mainuse of diagonal text!) but in fact each text is clipped to its cell boundary,rendering the feature less useful than one might like. Excel and oocalc let the text cross column bounderies.	Createdsample sheet created using the procedure describedThe sheet displays correctly in oocalc.There are several issues here:1. Row 8 isn't importing with the right height.2. Apparently any rotation should turn off clipping. I had hoped not to have to do that.What generated that file ?Liam: any news of this?Oops, sorry, I missed the question. The sample file was generated in gnumeric. The one that alerted me to the problem came from Excel. I can supply the Excelfile if it will help. It also demonstrates an incompatibility in the area ofconditional formatting, for which I have not yet had time to construct a test case.I have gnumeric-1.4.2-1mdk on Mandrake cooker.Liamliam : I'm confused. If you create the sample in gnumericDoes it look different when re-loaded into gnumeric ?or does it only look different when re-loaded into XL & OO ?There are two things at work here1) clipped text does not span as expected2) the sample file you supplied stores a row height, but XL & OO seem to ignore it(1) will be fairly easy to solve(2) seems odd. When you first generated the file in gnumeric, what was the rowheight ?I created the sample in gnumeric to reproduce the problem. I didn't do anythingexplicit to create a row hight.The file looks broken here if I re-open it in gnumeric.The original spreadsheet I receieved was made and saved in excel, and lookedfine in that and in OO, but in gnumeric the diagonal text didn't span columnsproperly. I didn't send you that sheet because it was large, but I can do soprivately if it will help. I'll also add a couple of screenshots to show what'sgoing on.LiamCreatedscreen shots showing the differencesHere are four screen-shots, montaged together to save space and generate lessmail :-) It's saved with high jpeg compression so the text is blurry, but thatdoesn't matter for the purposes of this bug report.(1) the original excel spreadsheet, in open office oocalc -- looking OK(2) the same excel file in gnumeric, showing the diagonal text not workingright(3) the sample file attached to this bug report, in oocalc (looks OK)(4) the sample file attached to this bug report, in gnumeric (diagonal text is clipped to columns and hence is useless/unreadable)I didn't set the row height in the attachmet -- I think gnumeric set it when Irotated the text.LiamThanks. Issues...A. We clip rotated text. Well know, well understood.B. Comparing 1 and 2 suggests that we don't align vertically correctly. Please check that you are using Pango 1.8.1. If you are, then please let us know exactly what format is in cell B5.C. Comparing 3 and 4 shows that the height of row 8 is wrong when imported into Gnumeric. We do not understand this.D. Comparing 1 and 2, we seem to be missing colours. Is that just conditional formats? (We haven't implemented that yet.)Thanks for the reply.A. was the point of the bug report originally.B. Yes, I am using Pango 1.8.1.How do I tell the format exactly?Alignment in gnumeric says Left / Bottom, Wrap text, 45 degrees. Number is General.C. I didn't set the height of the row. The spreadsheet file I used was attachedto this bug report.D. Yes, the colours are conditional formatting. Although the spreadhseet ishard to read without the colours, the clipping of the diagonal text was (andremains) the main problem.Liam***has been marked as a duplicate of this bug. ***Reopening -- I see no open questions.B is fixed. (Rotation suppresses wrapping.)That was wrong. Thus not fixed.Our problem with wrapping ("B") can be seen over in. Interestingly,OO seems to have the same problem.Drawing is mostly fixed now. It isn't perfect, but it will generally produce asensible result.We need a new span type to do it right.Is there anything left in this bug??Yes.A7 = dfjsdhjfsdfj h sdf jsdfjk sdFormat A7 to 45 degrees.Resize row 7 to regular height.Press [up] six times.Notice how part of the text is now missing.There are probably similar minor display artifacts lurking around.So its not really about clipping anymore but failure to refresh.Nope.When row 7 is resized, we should clip at the top of the row.(But not at the right edge, even if the next cell has contents.)This is hideously complicated and probably is different for negativeangles, etc.I take it that we are trying to emulate Excel and so don't know what to do?Otherwise we should define the behaviour we expect to see.For angle 0 we only let the text overwrite empty cells. Per se I see no reason why the same isn't true for angles not equal to 0.That's pretty much it. The concept of rotated text in a spreadsheet is ofpretty limited utility so there is no good reason to break Excel compatibilityover it.One (mildly) common usage is for column headers that are wider than thecells can show. With a reasonable angle like +30 deg, they overlap eachothers cells -- but not text -- and thus remain readable. In contrast,an angle of 0 will guarantee textual overlap, so we really have to clipfor that. No-one cares much about angles like 1 degree.	22.0	id=167544	14	False	True	mortenw	1
id=730351	RESOLVED FIXED	gmime	general	2.6.x	Other Linux	Normal minor	Jeffrey Stedfast	2014-05-19 05:58 UTC by	Daurnimator	2017-02-23 23:39 UTC (	1 user	I was hoping to get a list of references via Gobject introspection.But there doesn't seem to be any way to get a handle on a `GMimeReferences*`Inspecting GMime-2.6.gir I found that the function had `introspectable="0"`. Why?Below is the function's excerpt from the .gir <function name="decode" c:identifier="g_mime_references_decode" introspectable="0"> <doc xml:space="preserve">Decodes a list of msg-ids as in the References and/or In-Reply-Toheaders defined in rfc822.</doc> <return-value> <doc xml:space="preserve">a list of referenced msg-ids.</doc> <type name="References" c:type="GMimeReferences*"/> </return-value> <parameters> <parameter name="text" transfer-ownership="none"> <doc xml:space="preserve">string containing a list of msg-ids</doc> <type name="utf8" c:type="const char*"/> </parameter> </parameters> </function>	I didn't generate the .gir file, so I have no idea. They were contributed by someone else.I'll be happy to accept a patch adding introspection support for it.The .gir files are automatically generated from the C sources by g-ir-scanner; but I'm not sure how that process works.It looks like Evan Nemerson was the person who worked on this area; is he available to fix this bug?You'll have to ask him.GObject Introspection can't really handle return types which aren't GObjects or boxed. The solution is usually to register them as boxed types, which in this case would also require writing a g_mime_references_copy function.It's probably the wrong thing to do, but if you remove introspectable=0, and set transfer-ownership, then everything seems to work (maybe I'm leaky memory though.... I don't know)I'll look into adding a g_mime_references_copy() function so that it can be boxed.I see you added g_mime_references_copy. Does this need any other changes to make it into the .gir file?That's a good question... I'm not sure.You need to create a boxed type for GMimeReferences. Seeandfor an example.IIRC, once that's done g-ir-scanner should pick it up. Then you pretty much just need to remove any annotations which mark the relevant stuff as non-introspectable, and add any missing annotations for stuff like transferring ownership.Isn't that what this does?Does anyone know the answer?CreatedExpose GMimeReferences to introspection.Kind of; that will register it as a boxed type, but not in a way g-ir-scanner (or gtkdoc for that matter) can pick up.You need a public GType function (g_mime_references_get_type()). I'm not sure if it's required or not, but it's at least standard practice to also have a G_TYPE_MIME_REFERENCES macro defined to it. I've attached a patch which should give you the idea; with it applied g-i will generate a GMime.references_decode function (you can verify by looking at the VAPI).If you run g-ir-scanner with --warn-all you'll get a pretty long list of problems with the GIR, including warnings about the return value of g_mime_references_decode. Those warnings are real problems, the warnings should be fixed or annotated with (skip) if they aren't introspectable. This patch fixes the warnings about GMimeReferences not being boxed, but there are still other types with the same issue.Thanks Evan. I've committed this patch.	13.0	id=730351	9	False	False	fejj	1
id=270937	REOPENED	evolution	Mailer	2.22.x (obsolete)	Other All	Normal minor		2005-01-02 21:47 UTC by	Przemek Paprocki	2012-02-10 13:35 UTC (	6 users	Description of Problem: Message signed by BOTH gnupg key and s/mime certificate randomly do not show any information about pgp signature. Also pgp signature is always bad. (Information is displayed that message has been altered by server- no problem with the same server when only signed by pgp key. S/mime signature displayed correctly Steps to reproduce the problem: 1. In the account preferences, security tab set both pgp key and s/mime certificate 2. Check BOTH boxes "always sign outgoing messages". 3. Send a message to your other account. Recive your mail. Actual Results: 1) Pgp key always broken (not correct - seems in one of the header extra text is added "quoted printable": --=-/4Y9+KjBWoyMjty4rfnW Content-Type: application/pgp-signature; name=signature.asc Content-Description: To jest =?iso-8859-2?Q?cz=EA=B6=E6?= listu podpisana cyfrowo Content-Transfer-Encoding: quoted-printable ___________ above is pgp part when message signed with pgp and s/mime --=-aLVupf+hA/VvNE48iO0D Content-Type: application/pgp-signature; name=signature.asc Content-Description: To jest =?iso-8859-2?Q?cz=EA=B6=E6?= listu podpisana cyfrowo ______________abowe is part of the message headers signed ONLY with gpg key. 2) When message is displayed sometime it showing the message about wrong pgp signature, somtime not (on the same message) below screenshots when displaying _same_message_Seems to happens half the time message is viewed. Expected Results: 1) I am no expert so i dont now if you can sign message using pgp key and s/mime certificate at the same time and if evolution is handling this correctly or not. 2) Evolution shall display information about pgp signature not beeing correct, or at last that message is signed using pgp signature. now it seems that sometime this is ommited and only s/mime signature check is displayed. How often does this happen? About half the time when message is displayed (when message is signed using both pgp key and s/mime certificate. Additional Information: Evolution version evolution-2.0.3-1.1.101mdk (mdk 10.1) polish language set.	I think this is obscure enough to be moved to 2.1.Attach example messages and reopen the bugThere is also no reason to do what you're doing anyway other than anexercise in testing the software.This bug has also been reported to Debian's BTS:***has been marked as a duplicate of this bug. ***sigh... at least punting target milestone from 2.1 to 2.3 to get rid of all that recent milestones... :-/CreatedTest messageCreatedScreenshot of how evolution behaveCreatedScreenshot #2is this still the case ?Hi,Yes it is still the case. I'm using Evolution 2.22.3.1 on Ubuntu 8.04. When I sign my message with both PGP and S/MIME, I get the error: Error verifying signature Failed to GPG verify: Broken pipeThis is annoying and not just for testing purpose as I am sending and receiving e-mail to different recipient using PGP or S/MIME and don't want to send separate e-mail to each recipient.This isn't of minor importance; it's of great important. That Evolution cannot properly support PGP and S/MIME together is a huge hole in its credibility.	11.0	id=270937	24	True	True	gerardo	1
id=320458	REOPENED	gnome-themes	General	2.26.x	Other Mac OS	Normal minor	GNOME Themes Maintainers	2005-11-02 01:28 UTC by	Daniel Macks	2009-06-12 21:47 UTC (	2 users	Version details: 2.12.1During ./configure, I see:checking for pkg-config... /sw/bin/pkg-configchecking pkg-config is at least version 0.9.0... yeschecking for THEME_ENGINE_CFLAGS... -I/sw/include/glib-2.0 -I/sw/lib/glib-2.0/include -I/sw/include/pango-1.0 -I/usr/X11R6/include -I/usr/X11R6/include/freetype2 -I/sw/include/gtk-2.0 -I/sw/include/atk-1.0 -I/sw/lib/gtk-2.0/include checking for THEME_ENGINE_LIBS... -L/sw/lib -L/usr/X11R6/lib -lgtk-x11-2.0 -lgdk-x11-2.0 -lXrandr -lXinerama -lXext -lXcursor -latk-1.0 -lgdk_pixbuf-2.0 -lpangoxft-1.0 -lXft -lXrender -lpangox-1.0 -lX11 -lpangoft2-1.0 -lfontconfig -lfreetype -lpango-1.0 -lm -lgobject-2.0 -lgmodule-2.0 -lglib-2.0 -lintl -liconv but that set of flags does not appear to be used for anything during the build.Likewise with the silently set GTK_VERSION variable. Is this all left over froma time when the theme engine itself was included in the package?	I don't think there is any C code left in gnome-themes, and all the gtk+ engines have been moved out.Feel free to make up a patch that removes this.Whoops, CVS HEAD started using THEME_ENGINE_* again. Though only in themes that are not part of the 2.12 and 2.13 branches?? I'm confused by the CVS tags here: for example, files in gtk-themes/Crux are tagged GNOME_THEMES_2_13_2 but gtk-themes/Makefile.am does not list Crux in its SUBDIRS, so Crux is not part of the distro.The Crux engine (from gtk-engines) installs the gtkrc, so this directory (gtk-themes.Crux) is actually no longer needed.I've removed the unused directories in gtk-themes, so hopefully this should no longer be an issue (there are no longer any checks for THEME_ENGINE_*).2.26.2 *again/still* THEME_ENGINE is checked, as is GTK_VERSION, and again/still these values are not used anywhere in any Makefile.amCertain theme features need new enough GTK+ engines. So while there is no C code in gnome-themes, we still need to make sure that gtk-engines is installed and new enough.That said, it can probabyl be simplified, to only check for the version.	6.0	id=320458	11	False	False	thos	1
id=723791	REOPENED	gedit	general	3.22.x	Other Linux	Normal minor	Gedit maintainers	2014-02-06 19:27 UTC by	Adam Williamson	2016-11-27 10:36 UTC (	4 users	Createdscreenshot illustrating the issueIf I open a file with a moderately long name in gedit and I only have one or two tabs, even though there's plenty of space for the full name to be displayed, it'll get ellipsized. See attached screenshot - the gedit title bar is aware it can comfortably fit the full filename (even though it actually has less horizontal space than the tab bar), but the tab bar has it unnecessarily ellipsized.	yeah, I think we have an hardcoded limit in there for the classic tabs... time to revisit it :)Hi,I would like to work on this issue. Can you please guide me?CreatedDon't ellipsize filename on tab if there's lots of space _gedit_tab_get_name() method modified.Review of:The patch looks ok from a code point of view. Thanks.I need to remember why we were using a custom method to ellipsize... I do not remember is simply pango did not do it correctly a long time ago, or if it is because we needed a different behaviorIt can be tracked back to this: 2003-12-30 Paolo Maggi <> * gedit-mdi-child.c (gedit_mdi_child_real_state_changed): truncate the doc name to 40 chars (- window tabs should truncate filenames if its to long)Thanks for taking the time to report this.However, you are using a version that is too old and not supported anymore by GNOME developers. GNOME developers are no longer working on that version, so unfortunately there will not be any bug fixes by GNOME developers for the version that you use. On Gedit 3.22, tab titles size are dynamically set in order of the length of the file title they manage. By upgrading to a newer version of GNOME you could receive bug fixes and new functionality. You may need to upgrade your Linux distribution to obtain a newer version of GNOME.Please feel free to reopen this bug report if the problem still occurs with a recent version of GNOME, or feel free to report this bug in the bug tracking system of your Linux distribution if your distribution still supports the version that you are using.This bug is in fact still valid, gedit still does this.Ok, the file name is in fact split if it is bigger than 40 characters. Sorry, I didn't tested so big ones previously.	8.0	id=122029	5	False	False	david	1
id=122029	REOPENED	conglomerate	Code	CVS	Other Linux	Normal minor	conglomerate list	2003-09-11 16:40 UTC by	David Malcolm	2004-12-22 21:47 UTC (	0 users	It needs to connect to signals from the CongDocument	This is an obvious visual bug; marked to be fixed for 0.8Fixed in CVSWorks for direct modifications, but there seems to be a problem withundo (but not redo); so I'm reopening the bug	3.0	id=723791	11	False	False	paolo.borelli	1
id=142374	REOPENED	epiphany	Interface	2.29.x	Other All	Normal minor	Epiphany Maintainers	2004-05-11 20:49 UTC by	spark	2010-01-31 13:22 UTC (	3 users	When saving a web page (File -> Save As) you should only be offered to filter byweb pages and all files. When saving images, this should be images and allfiles. When "download link", there should probably just be all files.	Mass reassigning of Epiphany bugs toTarget Milestone: 1.6 -> 1.8Target: 1.8 -> 1.10 due to feature and UI freeze.-> 1.12 due to feature and UI freeze.You reported this bug a while ago and there hasn't been any activity in it recently. We were wondering if this is still an issue for you.Can you please check again if the issue you reported here still happens in a recent version and update this report by adding a comment and adjusting the 'Version' field?Again thank you for reporting this and sorry that it could not be fixed for the version you originally used here.Without feedback this report will be closed as INCOMPLETE after 6 weeks.Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!	6.0	id=142374	20	False	False	chpe	1
id=169789	REOPENED	doxygen	general	1.4.x	Other All	Normal minor	Dimitri van Heesch	2005-03-10 00:31 UTC by	Michael S. Scherotter	2005-05-19 22:11 UTC (	0 users	Version details: 1.4.1Add an image to the documentation like this:///\image html objectModel.jpegthe following XML is generated<image type="html" name="objectModel.jpeg" />but the file objectModel.jpeg is not copied to the output xml directory.I know that the image could be found because the file is correctly in the html directory	Good point. I always considered the \image command to be output type specific(i.e. depending on the first parameter), but for the XML output I can imagine itis convenient to have the output copied for any \image command.Should be fixed in 1.4.2.It is not fixed in 1.4.3.\image html optionPanes.jpg "Option Panes appear in the Tools...Options dialog"does not copy optionPanes.jpg to the xml output directory.	3.0	id=169789	6	False	False	dimitri	1
id=619629	REOPENED	evince	win32	2.30.x	Other Windows	Normal minor	Evince Maintainers	2010-05-25 16:13 UTC by	Gabriel Hautclocq	2010-07-27 11:59 UTC (	4 users	Evince does not handle UTF8 filenames properly in Windows.For example, try to open a file named "E:\test\电子书.pdf" on a non-chinese computer with a Windows OS (here Windows Seven x64 French). You receive the following error message :Unable to open documentError stating file 'E:\test\???.pdf': No such file or directorySame error for the following file : "E:\电子书\book.pdf"Renaming or moving the file so that it has a non-UTF8 path seems to be enough to open the file without errors.I noticed however that Evince 2.30.0 is able to open filenames containing accents where Evince 2.28.0 failed.	When I double click and files with Chinese names, Evince fails to open them. But when I start evince first and then use the File->Open menu option to open the same files, they open without problems.Gabriel, do you see this too?A problem here is that by double clicking a file you start Evince with the filename as its first argument. Evince uses GOption to handle the filename. Unfortunately, GOption does not handle chinese filenames very well. There is a bug about this atI confirm that using File->Open OR drag n dropping a file into Evince is working and that only double-clicking a file with chinese characters isn't working. Is there a possible fix for that ?We are hit by:I am working to fix this right now and I already have a proof of concept working. I expect this will be fixed by a workaround in the upcoming 2.30.2 Evince release.Great ! Can't wait to try the new version :)I confirm this bug, but I discovered the problem with a file containing a # in the name.This should be fixed in the new 2.30.3 release. Download it from [1]. Please test and reopen this bug if the problem still occurs.[1]Reopening this because I forgot that I only fixed this by a workaround: I am building a patch glib. Setting this to depend on.***has been marked as a duplicate of this bug. ***	8.0	id=619629	12	False	False	gabriel	1
id=768031	REOPENED	nautilus	Sidebar	3.22.x	Other Linux	Normal minor	Nautilus Maintainers	2016-06-25 12:50 UTC by		2017-02-20 15:01 UTC (	6 users	When you try to format a bootable USB you have the following error :This partition cannot be modified because it contains a partition table; please reinitialize layout of the whole device. (udisks-error-quark, 11)and it's impossible to format.I think it's related to this bug :Here another bug details and temporary solution :	(In reply to Hangman from)How did you create the bootable USB? The error message says you have a partition table *inside* the partition you're trying to delete. That's really weird; I didn't realize it was even possible. You will have to format the entire device (using the hamburger menu in the top-right) rather than attempting to format that particular partition.I don't see a bug here (except in the Ask Ubuntu question I see there was some other error formatting the entire device, which looks like a bug).I've created it whith Etcher. After trying to format the entire device included in hamburger menu it's working well. It would be great if error message could ask for this option instead of having no option...That's exactly what the error message told you to do. :) I'm afraid the nature of any disk partitioning tool is that some knowledge of partitioning is required to use it....I understand but this message comes after a simple "right click / format" on usb drive in nautilus, so I think a beginner won't be able to solve this simple problem because it's quite hard to find correct solution (I wasn't able to do it...).It's a suggestion but a simple click box that offers format whole drive option would be more convenient.(In reply to Hangman from)OK, I see your point... I didn't realize you could format the partition directly from nautilus, and from there it's much less clear how to handle the error. We can expect Disks users to understand such an issue, but we can't expect nautilus users to even know what a partition is, much less why formatting a single partition is different from formatting the entire USB stick.I'm not sure what can be done about this, though. Probably the best option is to just hide the Format option, but that probably won't be easy....Thanks for your answer. As I said an option in error dialog would be great.//This partition cannot be modified because it contains a partition table. (udisks-error-quark, 11)Do you want to format whole disk instead ?[Format whole disk] [Cancel]//It happens whith a bootable usb so user may not know what Etcher/Unetbootin does to his disk, so for him format whole drive is that what he wantsHi. I created a bootable usb for gpart to shrink the Disk. Now, I am not able to format the USB. It gives the same error.Error formatting volume.This partition cannot be modified because it contains a partition table; please reinitialize layout of the whole device. (udisks-error-quark, 11)Let me know if you want me to provide any other details.(In reply to Prashant from)I'll repeat what we already discussed above -- no new information here -- but try to explain more cleanly:You need to format the entire device, not a particular partition. Use the hamburger menu in the top right of Disks, not the partition menu in the center of the app nor from the nautilus sidebar. The bug is that the user interface in the nautilus sidebar is very confusing, because you see only a single partition there with no way to see the device, and naturally think it's the entire device -- but refusing to format is correct behavior: if you have a partition table inside a partition (needed to make live USBs reliable on different OSes) then formatting just that partition would break other partitions, so it only makes sense to format the entire device.It's hard to think of how to improve the UI, because this is an important safety feature and we don't want to just remove it, but perhaps we could catch this particular error when encountered in the nautilus sidebar and display an explanation. I'm not actually sure if that's a Disks bug or GTK+ bug or a nautilus bug, though.csoriano: mcatanzaro: the format menu item is done by nautilus, and it calls disk-utility on the command line--> nautilus. Formatting a partition that contains a partition table is expected to fail.I had the same experience as Hangman. So I tried the method described in. Now my system does not recognize the USB drive.Here is what I did:From Nautilus, right click USB device > click the hamburger menu in the top right of Disks > Format Disk Partitioning: Compatible with all systems (DOS). Click format (the blue rectangle format appeared to be successful). Close the partitioning menu.From Nautilus, click up arrow to unmount USB drive.Then pull the USB drive out and plug it back in. The USB drive does not show up in Nautilus.(In reply to wolf_volpi from)You need to create a partition in order to store files on the USB drive again. In GNOME Disks, in the volumes grid, you should see the entire drive as free after having formatted it. It will say "Free Space" and show the size of the drive underneath. Look on the bottom left; there will be a plus button next to a icon with gears. If you hover over the plus button, it should display the tooltip "Create partition in unallocated space". Click that, then click "Create" in the bottom right (the defaults are probably fine for you). Now you should be able to save files on the USB drive again.(In reply to Michael Catanzaro from)Thanks for the quick response Catanzaro.But GNOME Disk does not see the USB drive.I closed the GNOME Disks window after the entire drive was made free.Then I pulled the USB drive out and plug it back in.Now the USB drive does not show up in Nautilus nor GNOME Disks.Is there some other way GNOME Disks can access the USB drive?Thanks.I don't know how to help with that, sorry. I would ask the udisks developers at. Let's keep this bug report focused on the confusing nautilus sidebar.(In reply to Michael Catanzaro from)I submitted an issue atI inserted the USB drive in Chrome OS, and it recognized and reformatted the USB drive.Then I put the USB drive in Fedora 25 PC again and it worked with GNOME Disk without incident.	14.0	id=768031	20	False	True	mcatanzaro	1
id=102544	REOPENED	gnome-control-center	Mouse	3.18.x	Other All	Normal minor	Control-Center Maintainers	2003-01-05 02:57 UTC by	Dag Wieers	2016-05-27 08:08 UTC (	12 users	The Mouse preferences don't show the settings for Acceleration andSensitivity (in the Motion Tab).It would be nice if it would indicate a number (preferably the same as usedwith xset m) so that you can communicate your settings with others (withouthaving to guess it). The same goes for the Drag and Drop treshold.The Double-click Delay (in the Buttons tab) already does this as expected.	Ccing usabilility.I think there's a problem in displaying the settings numerically :what are the units?From the Help:Acceleration""""""""""""Use the slider to specify the speed at which your mouse pointer moveson your screen when you move your mouse.Sensitivity"""""""""""Use the slider to specify how sensitive your mouse pointer is tomovements of your mouse.Threshold (DnD)"""""""""""""""Use the slider to specify the distance that you must move an itembefore the move action is interpreted as a drag-and-drop action.From xset m Manual:The acceleration can be specified as an integer, or as a simple fraction. The mouse, or whatever pointer the machine is connected to,will go `acceleration' times as fast when it travels more than`threshold' pixels in a short time. My take on it is that the treshold (in xset) is the sensitivity (inGnome).So the Acceleration is expressed in multiples (1.2 times as fast, 2times as fast) and the sensitivity means 'number of pixels per ms' orsomething. But I guess Gnome is doing the same low-level stuff asxset, it can't be that hard to compare both and level them ?Easy for me, right. I'm not a developer ;-)***has been marked as a duplicate of this bug. ***While I agree that showing numbers/units is often a good idea, I'm abit dubious here. Under what circumstances would it "be nice if itwould indicate a number (preferably the same as used with xset m) sothat you can communicate your settings with others"? When do you everneed to tell anybody else what your mouse speed is? I've never had todo this and I've used a mouse pretty much every day for the past 20years :)I would say that I doubt if it's clear to the average user exactlywhat acceleration, sensitivity and d'n'd threshold mean, even afterreading the docs, but that's probably a documentation/labellingproblem as much as anything.The current labels are subjective. "Slow", "Low" and "Small" to oneperson might mean entirely a different thing to another. I would votefor providing each of these sliders a relative scale between 0 and100. In other words, a percentage scale. I can imagine that users setting up systems with a view toaccessibility might want to record and pass on these settings. Not wishing to muddy the waters or anything, does anyone else thingthat the two Help-style texts on the Motion tab are superfluous? Dealtwith elsewhere?is the ui-review bug that calls for the removal of the helptext, but it looks like a) the attached patch (from Dennis) wasn'tapplied, and b) it doesn't remove the help text anyway :)Calum,The answer to your previous post is:a) the attached patch (from Dennis) wasn't applied.I do not know why. I received no feedback on it.Updating status_whiteboard field to reflect A11Y team's assessment of accessibility impact.***has been marked as a duplicate of this bug. ***Not going to be resolved for GNOME 2.4.what's the status of this bug ? is that still an issue ? what's wrong withcurrent labels ?The labels are not the problem, it's the fact that whatever I have configuredknow I cannot actually tell people. I can give an indication to whether theposition of the slider is at 45% or 40%, but it's hard to quantify or to makesure that someone else is setting it identical to me.I don't know what the unit is, but just an indication to what it is set is veryuseful if you want people to synchronize sliders.What is set in gconf ? Can't that setting be displayed somehow ?I don't see how it's useful being able to tell others, since they are (percievedas) arbitrary values.The "double-click delay", however, is not arbitrary, since it's something theuser can relate to directly (while the slider, on the other hand, IS arbitraryon this pref, so it could be discussed whether it should be a spinbox instead).Just simply tell them "adjust the slider until you feel comfortable moving yourmouse about."as said by several people in the comments I don't think that most of the usersreally need to communicate the number on the slidersWhat about a popup on the sliders that tells the percentual?"The labels are not the problem, it's the fact that whatever I have configuredknow I cannot actually tell people. I can give an indication to whether theposition of the slider is at 45% or 40%, but it's hard to quantify or to makesure that someone else is setting it identical to me."Okay, so we'll ask the question one last time, before marking it as WONTFIX :) Under what circumstances do you need to quantify or make sure that someone else is setting their mouse identical to you? If it's a reasonably common use case then we have something to fix here, otherwise probably not.FWIW, I've since noticed that the Mac addresses this with unlabelled ticks along the slider, i.e.:Slow .. Fast+-+-+-+||-+-+-+-+-+-+ ' ' ' ''' ' ' ' ' ' 'So while there are still no units or numbers on display, you can count along if you really need to. I forget if gtk currently supports markings like that on sliders, though.Ticks would be an option.Imagine this, you have 5 computers to manage and you want the mouse settings to be set identically. For most users they would go into the settings, look at any metrics available and then duplicate it.Without anything (like it is now) you simply cannot do that.When I needed this, I was chatting with a friend with the same Thinkpad and I was providing him with my settings for trackpoint. I could communicate neither the acceleration, sensitivity or drag&drop settings.It's annoying to have to say somwhat slightly to the right of the center, if you could have said: put it on the 4 tick, or set it to 40%.What about the following use case: You want to improve your mouse settings, so you go to the preferences, want to change it to see if it improves. But since it doesn't give you any metrics, you can't put it back if you don't like the change, can you ? You cannot write the number down so that you can reset it later.I find it appalling that I have to justify and rejustify a simple request that is just common sense. Even when *most users don't need this*, it doesn't stand in the way of most users either. Having ticks or some other metrics are not going to confuse people. But those that need it, can use it to their advantage.Besides, most of the people that need something like this, are not the users that can play with gconf and are not the users that find their way to bugzilla either. I bet it's just annoying to many people without reporting it.For what it's worth, I think this is bug is valid. However, there is a problem since numerical values are fairly pointless, especially if they produce different results with different hardware.The "ticks" solution would be good, but unfortunately gtk+ doesn't have a feature like this, and it may require a fair amount of work to implement.@Dag: Your point about being unable to reset to previous values is a valid one, but that's a general problem with capplets just now that we've always planned to address by adding appopriate Reset and/or Undo and/or Defaults buttons to capplets. We just always seem to disagree about the best solution when we discuss that problem, and end up doing nothing :/(I realise this solution still wouldn't help if you decided a week later that you wanted to go back to your previous settings, but in general people are more likely to decide after a few seconds of testing out their new settings.)As for setting up multiple computers to have the same settings, well, there are other tools in the works to make that task easier (e.g. sabayon)... I appreciate they might be overkill if you were setting *only* the mouse preferences to be the same on a few machines, but I'd still have to say that sounds like a rather unusual task for a sysadmin to be doing, IMHO.Retitling to show what the problem is.In the meanwhile, you can always get at the raw values using gconf-editor.	20.0	id=102544	30	False	True	dag	1
id=305277	REOPENED	HIG	Section: Controls	unspecified	Other All	Normal minor	HIG Maintainers	2005-05-24 05:31 UTC by	Braden	2015-07-16 21:29 UTC (	16 users	The guidance on the direction of the sort order indicator arrow for lists isopposite the prevailing convention on Windows and Mac OS. On those systems, anarrow pointing up means "ascending order" and an arrow pointing down means"descending order".Given the number of fielded applications for those platforms and the number ofGNOME users who may be coming from those platforms, GNOME should strive forparity with the prevailing convention for this visual cue.Other information:	That is true and I support you! I think that this must be changed in Gnome 3.0 and would be one step closer to seamless and more usable desktop.When we wrote the guidelines, we did a straw poll specifically asking people which direction they thought represented 'increasing', and the majority said a downward pointing arrow, because that's the direction in which they read lists.Personally, I'd be surprised if most people noticed or cared which way the arrow was facing, but we should certainly strive for consistency between the apps on our desktop. I don't believe for a second that it will make the desktop "more usable" though-- people generally look at the list to see which way it's sorted, not the arrow.But if it closes a bug, I'm happy to fix it the next time we're updating the HIG...There is much good debate around this issue. Every time I look at a Gnome column that has a sort indicator my brain fogs over and I don't understand what it means. So I would like and am casting my verbal (er, typed) vote for changing the Gnome representation of sort order.My brain thinks the pointy end of the arrow points at the little things and the big fat end of the arrow (I always think of it as a triangle) indicates the direction of bigger things.Thanks for making space for my thoughts!!Dale E. MooreCan't believe the bug is still there.(In reply to)If that is how you formulated the question, then it is strongly biased, in that you are talking about "direction", thus almost implying the idea of an arrow.In the "Mac/Windows" convention, these icons are NOT arrows! (In reply to)Exactly, that's the meaning of the icons.The only possible ambiguity is with dates (I think there has been some inconsistency in that among different email clients in windows), because in computers dates are numbers and hence old dates are small numbers, but it is rather intuitive to think of recent dates as "little time ago" and old dates as "much time ago".The interpretation of arrows representing the direction in which the values _grow_ (i.e., up-arrow == [values grow if you read them from the bottom up] == descending) is ridiculous, beacuse if you think about it, you are choosing a direction which is subordinated to an implicit _increasing_ order... then you would need another arrow to choose whether the direction you chose is the direction of increasing or decreasing values... and so on.Change it, that's an error.Arrows, pictures, icons... semantics. Imagine the "<>v^" as filled-in triangles if you like.The logic is simple:1<91^99>19v1Simply rotate the globally-accepted-as-true expression "1<9" and you see, thevertical orientation (90deg,180deg) of the symbol is wrong in the UI.Can't relate?The wider end of, say, a (filled) "v" (arrow indicating down) is the top; wider, larger. The bottom is narrower, smaller. Logic says largest above, smaller below. In mathematics and programming, this is also true. The value above is larger than the value below.Rotated, ">" - wider, larger on the left. narrower, smaller on the right. Larger value on left, smaller value on left. A running scale would be 9>8>7>6>5>4>3>2>1. As you can see it is sorting largest to smallest. Rotated version again:9v8v7v6v5v4v3v2v1Happens to be sorted largest to smallest. Arrow/symbol indicating downward.I completely agree with changing the icons. My brain, when looking at the icon, is seeing the visual representation of how the things are sorted.Smaller things on top, larger things on bottom: _ /\ ___ / \ _____/____\ _______Larger things on top, smaller at the bottom:______ _______\ / _____ \ / ___ \/ _So every time when I see GNOME icon which is "backwards", I have to stop and think for several seconds what it is actually representing: "pointing down means ... descending, ok, so that s like ... from larger to smaller ... hmm ... aha, it is larger at the top ...". It is just the opposite of what the icon is showing me.We have to change this!In the meantime, how can I change this on my own system?"In the "Mac/Windows" convention, these icons are NOT arrows!"If you ask most people to tell you what the symbols are (and I've asked quite a few in my time), whether or not they know what they are used for, they will describe them as "arrows". In some ways it would probably be better to use "non-pointy" symbols just to avoid all of this confusion, but that's the symbolic convention we're using for now."Smaller things on top, larger things on bottom"That's fine for numbers. It's less obvious for letters or for dates, which have an order, but not a "size". Or for columns of checkboxes, which have neither. That's why we felt it was more logical to associate the 'direction' of the 'arrow' with the 'natural direction' of the sort (low to high, first to last, earlier to later), rather than 'size'.Anyway, there's no need for any more "me toos"... GNOME bugs don't get fixed based on how many people vote for them, they get fixed based on whether it's right to fix them. And we'll fix this one in the GNOME 3 HIG just as soon as we have a GNOME 3 HIG.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Just another vote to change this, coming from (for what it's worth) someone who has developed interfaces and worked in usability/user experience. People have come to accept that the "up arrow" means ascending order, and the "down arrow" means descending order. Sure, someone can click a column header and then look at the data to see how it's sorted, but that's an unnecessary step. Then what is the point of the arrow? Obviously it's to provide a quick at-a-glance reference on how the column is sorted.This really ought to be fixed.(In reply to)Exactly! In System Monitor when I click the CPU column so that the indicator points downwards (big on top) I expect to see the largest processes - the ones using the most CPU - at the top of the list. It's common sense.Please fix this.The fundamental problem comes from treating "arrow" and "triangle" as the same thing.However, there's a big difference between the two, even if it looks trivial.Arrow has a "tail" that indicates "flow" whereas "triangle" does not. It is not sufficient enough to convey the meaning of flow. In other words, it is "static".Thus, following the triangle picture logic above (big lines on the top, small lines on the bottom), I can't say anything else but to conclude that the triangle icon should be interpreted as: "v"=descending, "^"=ascending.I'm not speaking about the "majority of users" thing, I believe MS and Apple didn't come up with just a random decision about this. There is a good reason for that.I can't believe this issue is still not solved. Please, fix this problem.thing.I'd rather say that the fundamental problem comes from treating column sort icons as if they were "arrows" while they are triangles.An arrow could't ever be used, even if one wanted to, as an indicator of the sort order (ascending vs descending) because it would tell you nothing. An arrow indicates a direction (upwards/downwards), but you would still need to know whether it indicates the direction in which values grow or the direction in which values decrease.I can't either, especially afterof more than one year ago.(In reply to)That comment said it will be "fixed in the GNOME 3 HIG just as soon as wehave a GNOME 3 HIG". Since there is still no GNOME 3 HIG, there is still nowhere to fix it.(There's no point fixing it in the GNOME 2 HIG, as nobody's going to retro-fix it in their GNOME 2 applications now.)But there are certainly GNOME 3 applications. So, where are GNOME 3 application developers looking for guidance on such issues? It seems like that would be the appropriate place to address this in the near term in the absence of a GNOME 3 HIG.While I have some sympathy with the "fat end of the arrow shows where the big things go" point of view, I'm honestly not convinced that it is worth us spending time on changing this: * We'd have to fix both GTK+ 2 and GTK+ 3. The former isn't really touched nowadays. * The arrow is fairly meaningless for names and dates - "ascending" and "descending" don't map to the arrow in a clear way. * For whatever confusion this causes, we also have to balance it against the confusion that would be caused by us switching the order. * Tree views are increasingly being phased out in favour of list boxes.So, while the bug report might have some validity, I'm going to say wontfix, at least for now. If there's an opportunity to resolve it on the GTK+ side, then maybe we could do that in the future.I can't believe I'm seeing a decision of this magnitude of stupidity being taken.You have broken a basic UI and now you decide that it's going to stay in the broken way?nowadays.So what?"descending" don't map to the arrow in a clear way.That only applies (questionably) to dates, not to names, which have a very clear increasing order from a to z, to begin with.And what about other type of columns, such as numbers??confusion that would be caused by us switching the order.Yeah, you have already done a terrible job in keeping it the wrong way all this time. Let's make it even worse.That has zero relevance unless tree views (assuming what you call a tree view is what exhibits the issue) are totally removed - which would be a very bad idea. Are you going to remove the option for the user to choose tree views?If you're not willing to fix it, you should keep the bug report open, because that's its correct status. At least that would allow somebody wanting to provide a patch to do so.Is this just a skin/glphs image file swap? Surely there is one central location in the code than says "OK, draw this indicator" which's logic can be switched?How are alphabetic names not capable of being sorted? It's quite understood that A is first, Z is last, alpha-omega, and the progression should follow the direction of indication. If you mean by Forename/Surname that's usually an option known to the user, and does not affect the expected order vs indication. Which would still be incorrect.Dates; personally I do not see any other meaning for order other than the face-value of the (ISO) date numerically sorted (1900-01-01 x is less than < 2000-01-01, 15:00:12 is greater than > 03:00:12), or if you please, sorted by epoch value in correct numeric order. Unless you are thinking "age", but then that column should be called age, not date, and display age accordingly, no the actual date (1 day ago is less than < 20 days ago)I also do not understand the relevance of bringing up treeview vs listboxThe current indication says the following:1>9 (1 is bigger than 9)Alpha>Zed (A comes after Z)Those seriously look correct to you?(In reply to)...This, as well as other parts of your comment, is unacceptable behaviour. If you are unsure about what is acceptable, please check the code of conduct:...Changing an long-established convention will inevitably impact on users, and this has to be weighed up when deciding whether to make changes or not.It is relevant, considering the amount of work the change would require and the amount of benefit we would get.To change the behaviour, GTK+ would have to be patched. Any applications that have code that assumes the arrow behaviour would also have to be found and patched. In other words, it would require a coordinated effort across GNOME to make it happen.I am not willing to change the Human Interface Guidelines independently of this happening, nor do I think that the amount of effort required to make the change would be worth it.Just to be clear, are you talking about the long-established convention that has existed ever since UIs have had sortable columns and that still exists everywhere outside the GTK&Friends world (i.e., fatter end of the triangle = greater values), or about the contrary less-long-established convention that GTK has later implanted?Isn't it just a matter of changing the default value of this setting from false to true?FYI Ubuntu took the right decisionMaybe you're right: perhaps it's not worth fixing it in GTK because hopefully, all applications using GTK will end up specifying the correct value instead of leaving the default.(In reply to)I agree it would be desirable to fix GTK+ 2. I am not sure it is vital; but I'm mostly interested in bringing GNOME to parity with other popular UIs going forward. Assuming GTK+ remains relevant, GTK+ 2 applications will, eventually, be phased out.This is not a new bug. It existed in other forms here well before this HIG bug was filed. When this bug was filed, there was indication given that it could be fixed when the HIG was updated, presumably for GTK+ 3.I might better understand resolving this WONTFIX if something about the surrounding landscape had changed: if, for instance, GNOME was less of a minority platform than when this bug was filed; or if competing platforms had come around to the GNOME way of doing things. But the landscape seems to remain pretty much unchanged: GNOME is a minority platform doing things opposite to platforms with much greater user bases and visibility. As such, the primary motivations for addressing this haven't changed. WONTFIX does not seem appropriate.I'm not sure how to respond to this. You might happen to think that way; but computers and other persons have been applying ascending and descending orderings to names and dates for many, many years.That's fair, so let's do that calculus: Mac and Windows do this one way, GNOME does it the opposite way. Should GNOME's position be forever entrenched and create dissonance for users coming to the platform from Mac or Windows, or should existing GNOME users adapt?Are GNOME users accustomed to the existing way of doing things likely to leave the platform if it changes?There are still plenty of opportunities for column-based sort in UIs. This seems irrelevant.A catch-22. Historically, the story from GNOME/GTK+ developers has been, "Fix the HIG before we'll entertain patches." Now you say GTK+ must be fixed before the HIG can be fixed?Seriously: what's a realistic path forward to fixing this? This is a really confusing thing that GTK/GNOME does relative to other platforms and the mechanics of fixing it aren't *that* complicated.surrounding landscape had changed: if, for instance, GNOME was less of aminority platform than when this bug was filedIf that had become the case, that would rather be one more reason to fix it than not to fix it, as it would mean the bug would be affecting more people.And it's not an arrow in the first place, it's a triangle. Confusing it with an arrow is mostly where the the bug comes from.does it the opposite way. Not only Mac and Windows, also Unity under Linux, and almost(*) everything else except Gnome. Not only in OSes, but also in websites, etc.(*)Almost, because sadly, Gnome is not completely alone. Launchpad is another example where the triangles are reversed.This "bug", and the resistance to fixing it is a classic example of stubborn and pig-headed oligarchy that prevails in open source. Rather than changing things, some smug individual or group is holding onto the notion of importance in the face of the prevailing decline in popularity of GNOME, and its complete lack of influence on the future of desktop environments. More will benefit from correcting this mistake than won't. Those that care to maintain current behavior can configure it so. Let's get on with our lives. Fix it and get off your high horses.Don't forget, even KDE and (some of?) its themes allow selecting correct or incorrect indication.Reopening.The rationale for closing this WONTFIX is inadequate as it has been presented here.Ultimately, the question is: How can GNOME be brought to parity with the way nearly every other platform presents this bit of UI?Historically, GNOME library/application developers have kicked the responsibility for this to HIG. For HIG developers, *years* later, to kick this back to library/application developers is really inappropriate.GNOME should be better than simply throwing up its hands and accepting a poor design choice in perpetuity out of sheer inertia. While it *might* be reasonable to make the argument that fixing this *now* is impractical, it's not appropriate to make that argument without also presenting a plan for how and when it could be fixed.And there needs to be a firmer commitment to that plan than Calum Benson's 2009 comment.Ascending order should be indicated by UP arrow. This decision is used in most programs, systems and sites. It's intuitive and logical for me and many commenters over the web.Guidelines and standards are good only if most things follow it. This is isn't that case. So, if the guideline could not be changed, it should be ignored this time. If you still refuse to change the default view, you should have an option for this. It may be even a hidden option set in config file - that's better than nothing.It is not a damn arrow in the first place, it is a TRIANGLE, but yes, ascending order should be a triangle with the tip on the top and the base on the bottom, or as you call it, an "up arrow".You seem to imply that there's some sort of guideline or standard that encourages the (wrong) order used by Gnome?? I don't think it's the case. It's just Gnome (and very few others) that got it wrong all the time, against both prevailing convention and common sense, and I don't think it is in accordance to any standard.(In reply to teo from)That's really skin-dependent. It's reasonable to represent this graphic using either an arrow or a triangle. There's enough visual and semantic similarity between the two (as long as orientation is consistent).I sympathize with your frustration, but please read the bug you are commenting on. This bug is about fixing the GNOME HIG, which is precisely that sort of guideline. Specifically:To restate what's already been articulated above, this HIG bug exists because GNOME developers have been resistant to bringing their applications and libraries to consistency with modern UI conventions on this point in the absence of support for the change in the HIG.Obfuscating this debate is the fact that the HIG as it stands is poorly written on this point, using the term "natural" order, which is not well-defined anywhere that I can find. There is a vague implication by way of examples that a "natural" order is usually, but not necessarily, an ascending order.A look at the columns in the GNOME System Monitor demonstrates what a complete mess this has given us: * For CPU utilization, nice, memory footprint, and priority, an up arrow is used for an ascending order. * For process name, pid, and waiting channel, an up arrow is used for a descending order.OMG sorry, I didn't realize, they even wrote a guideline, and it's totally retarded. That's hilarious. And they call it an "arrow" btw, that should be fixed too.There's a visual similarity, but semantically they don't have nothing to do with each other, and the orientation can never be "consistent", because if they are oriented in a way that physically/geomertically looks the same, they semantically mean the opposite (if the arrow means anything at all, because as I argued before, an arrow indicates a direction, but then again, you need to assume that the direction indicated by the arrow is that of increasing stuff)The whole misconception at the very base of this bug is confusing a triangle with an arrow.	31.0	id=305277	29	False	False	jhasse	1
id=102635	REOPENED	gnome-panel	clock	2.11.x	Other Linux	Normal minor	Panel Maintainers	2003-01-06 07:15 UTC by		2015-02-09 22:01 UTC (	8 users	In gnome-panel there is a msgid "%l:%M:%S %p" To make it more easily localizable this should bemsgid "%X"To refer the preferred time format of the locale.Also whenever date formats are used, pleaseconsider using the preferred date format from thelocale, "%x"	We're in string freeze => adding GNOMEVER2.3 keyword.If you use %X there's really no use in marking the format fortranslation is there? I vote for unmarking.Removing myself from cc: since I'm onWhy is this NEEDINFO ???The string "%l:%M:%S %p" is used to allow translators to change theformat for the clock when the user has chosen the 12 hours format.Using %X would mean that we'd remove the pref for using 12 hours or 24hours format. Is this something that we wish ? I'm sure lots of userwould complain about that.So, err, l10n people: do you think we should remove the option of the12/24 format and remove the translatable string or do we close thisbug? Or is there any other proposition?This is problematic, because in most locales where a 24 hour clock isofficially used, there is not even the concept of a 12 hour clock, letalone a proper way of "translating" such a clock (i.e. the %p does nothave a meaning nor a translation). So the 12 hour option is pure crackand nonsense in those cases.On the other hand, in English locales, even ones that have adapted 24hour clocks for official purposes, a 12 hour clock option is probablymost useful to a lot of people.So this is clearly a tricky issue...Carlos/Danilo: what do you think of this?I'm all for using %X and %x, and leave the "tricky" part to locales(eg. where 24hour is official, yet people are used to 12 hour clock,they should probably have locale like "en_GB@ampm").So, I vote for not marking it for translation and using %x and %X.This bug is still here, Vincent any reason to not change by %X that seems to bethe consensus from the other comments?Sébastien: the comment from Christian is a good sum up :-)I'd say we should wait for AM/PM locales to be created before doing this.Even better: develop user-customisable date and time formats, and use those. Discussion on.Interesting I've just been hit by this one when I wanted to demo the fact that locale files help to set the default locale in an application. And here we have the clock doing its own thing.Nobody will make locales, well Windows Vista now has a user locale creator, and GNOME should probably allow some sort of override. But expected en_ZA@ampm is a long shot.I'd rather see us move to %X and see the solution pop out from the people affected. At the moment its affecting many locales that shouldn't have to be adapting.I'm opposed to using %x and friends, since they're not easily changeable and do not always reflect common practice in a country, even though it's included in the glibc package.(In reply to)If the locale information is bogus and does not reflect the reality in your country, then that's a bug in your locale, and should be reported, and fixed, as such. It has nothing to do with the matter at hand.	15.0	id=705572	11	False	False	bugzilla	1
id=114041	REOPENED	balsa	general	2.3.x	Other Linux	Normal minor	Balsa Maintainers	2003-05-30 14:31 UTC by	Andrew Lau	2005-03-22 23:12 UTC (	1 user	Ralph Aichinger reported the follwing to the Debian BTS at:Summary:Balsa 2.0.11 just shows the plain white "Document"-icon in the window menu and in the window list.My comments:Please also note that Help->About dialog shows the stock GNOME foot insteadof the Balsa logo.	For me it also shows the plain document for the about-dialog in thewindow-browser (not sure what you mean by menu and list), it has noextra window in the task-list,It should be easy to fix and I'll try to provide a patch.2.0.13 released, tkx DarkoPlease reopen this bug. About->Balsa still shows the GNOME foot.Problem confirmed. Reopening.Well, the about-box is using the correct icon in the window- andtasklist at least, which is the most important. The About Dialogdisplays a gnome foot as many other apps do, ok, but what to replaceit with exactly? I'm not sure if there is a definite "balsa-logo".Should we use the envelope-iicon which is used for the menu-entries,or should we use the bigger balsa-banner from the druid, or should we(better: anyone apart from me) design something completely new?If that's decided, I'd gladly take care of it.Createdpatch to correct the logo in the AboutWindowAttached you find a patch which should reliably correct the issue. Asseen in the code, it was intended to display the big balsa_logo, asexpected, but the path was wrong.I did some more little changes to the AboutWindow:- updated developers credits from AUTHORS- added documenter credits as listed in the manual itself- changed copyright line in the way galeon does itI'd also lilke to change the comment-string, but it would break thestring, so that's probably something for 2.1 only.Commited to both active branches. Thanks a lot!This bug has resurfaced in 2.3.0.Debian BTS:Cvs now has code to restore the default window icon, lost a few releases ago. Could you check whether any of these issues are resolved?	11.0	id=102635	19	False	True	menthos	1
id=705572	REOPENED	l10n	other	unspecified	Other Linux	Normal minor	GNOME i18n team	2013-08-06 14:47 UTC by	Seán de Búrca	2016-04-07 14:23 UTC (	2 users	CreatedCut-off label in shellWhen translating the label for the Privacy panel, some languages require too many characters for the translation to appear in full. For the ga locale, the translation is "Príobháideachas", but the label is cut off halfway into the final "a". From looking at the .desktop file, it seems likely that at least one or two other locales are experiencing this issue. Image attached.	Thanks for the bug report. This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***commit b3be07609a9bae43947ee3e59d8982a7715c9acfAuthor: Bastien Nocera <>Date: Thu Apr 7 14:22:50 2016 +0200 panels: Fix truncated panel names for larger fonts Note that this fix will not automatically fix translations, which will need to add soft-hyphens (U+00AD) to their translations themselves, and will not fix larger fonts for which the split up syllables end up being bigger than the maximum text width. It's the best we can do without redesigning the Settings shell, which is already something planned.Translators, see:for more information.A couple of notes:- There's no component for Gaelic in the l10n module- Having a ".Other" component at the top would be better than trying to find it in the middle of the components list.	3.0	id=114041	12	False	True	chbm	1
id=757791	REOPENED	mutter	general	3.18.x	Other Linux	Normal minor		2015-11-08 21:36 UTC by	Victor Porton	2015-11-09 16:07 UTC (	1 user	I have re-bound "Close window" to Ctrl+Esc instead of Alt+F4 (using Gnome Settings).I Chromium, however Ctrl+Esc does not work. Instead Alt+F4 exists Chromium (despite I do not want Alt+F4 to do this.)	I checked and the behavior is not exactly as above - it seems that in testing Alt-F4 works in Chrome/Chromium in *addition* to the configured key binding.This means that Chromium is handling Alt-F4 itself - something that GNOME can't do anything about. (Presumably the point of changing the key shortcut is to allow the original shortcut to be used by the application!)I don't think Chromium should be handling Alt-F4 itself - it could be some window manager might have a bug where it doesn't handle key shortcuts on a self-decorated window and handling Alt-F4 is an attempt to work around that. On the other hand, it might just have seemed like a good idea.I've checked again: Ctrl+Esc works various in applications but does not work in Chromium.I don't know why the configured key works in Chromium for you but does not work for me.I'm testing with Google Chrome rather than Chromium, but it's unlikely there is a difference. Checked that it works with me both on X11 and Wayland. Can you install Google Chrome and check? Are you running in the mode with native decorations or without? (I'm testing with no native titlebar.)I am also testing with no native titlebar (with Chromium's own titlebar).I am not 100% sure whether I run X11 or Wayland (I think it is X11, but am not 100% sure).	4.0	id=561973	23	False	False	sven	1
id=561973	REOPENED	gtk+	Backend: Win32	2.14.x	Other Windows	Normal minor	gtk-win32 maintainers	2008-11-23 00:47 UTC by	Barney Holmes	2010-11-30 08:45 UTC (	6 users	Please describe the problem:Recent versions are missing the ability to drag and drop images onto the interface, from Firefox for example, forcing the use of "open location".Steps to reproduce:1. Drag an image from Firefox onto the UI.2. A denied icon shows that dropping onto Gimp is not possible.3. Actual results:Windows shows that dropping is not possible.Expected results:Gimp should accept the drop and open the dropped image as if it was entered in "open location".Does this happen every time?YesOther information:This is using the Windows version (as linked through gimp.org) of 2.6.3, in Windows XP.	Where exactly do you drop the image? You say that it used to work with earlier versions; which version did work?Do you get any output if you set the environment variable GIMP_LOG to "dnd" before starting GIMP?(In reply to)I used to drop onto toolbox tool icons in 2.4. I can set an environment variable but what is "dnd" ?Dropping onto the toolbox should work. Have you tried to do this from the file manager (explorer)?"dnd" is the value you should set the environment variable to. It tells GIMP to create extra debugging output for Drag-N-Drop (DND) actions.FWIW: running Gimp 2.6.3 on Windows XP SP3 - drag-n-drop of an image from Firefox 3.0.4 does NOT work, but does from IE7. Fortunately, using Firefox addon IEView to switch to use the IE rendering engine DOES allow images to be dragged to GIMP (either creating a new layer if dragged onto an open image or a new image if dragged onto toolbox).IIRC: I'd seen somewhere (wrt to an earlier 2.4 or 2.6 version) that dnd from IE7 worked but did not work from Firefox. I tried to find a bugzilla report about this w/o success so I guess it had never been filed before?When attempting to drag from Firefox it shows the slashed-circle icon.re: Gimp-log ...I opened a command window and executed:and then dragged from the IEView tab in Firefox to the empty window display which worked but I can't find any file that GIMP is logging to. It doesn't appear in the command window.Starting "gimp --help" shows an option -c for console window and I thought that might be where the gimp-log output would go to - apparently not!All I get in that window is two lines (apparently irrelevant):====Skipping duplicate plug-in: 'D:\Program Files\GIMP-2.6\lib\gimp\2.0\plug-ins\gap_plugins.exe'Skipping duplicate plug-in: 'D:\Program Files\GIMP-2.6\lib\gimp\2.0\plug-ins\gap_video_extract.exe'=====DND from IE-View tab in Firefox continues to work but fails from normal Firefox tab.We need the debug output. Can anyone please tell this fellow how to get the debug output on Windows?Inter-process drag-and-drop in general is not implemented in GTK+ on Windows. Only the totally different (API wise) drag and drop of files from Explorer (and apparently Internet Explorer) is implemented. This dnd uses so-called WM_DROPFILES message. The initial bug description failed to point out that when attempting to drag-and-drop an image from Firefox onto GIMP, the cursor is the "no drop allowed" one (with a "prohibited" symbol) while over GIMP's drop area, which is a clear indication that the receiving application is not willing to accept the kind of drop the source application is offering. Just saying that it "doesn't work" made it sound like it would *appear* to work but nothing happens, which is not the case. There is clear visual feedback that the drop is not accepted.GTK+ applications can receive files dragged from Explorer. Internet Explorer and Explorer are closely related, so images dragged from Internet Explorer also work the same way (they turn up in the drop target as local filenames pointing to a temporary copy of the image).The log output referred to above is not triggered by a GIMP_LOG environment variable, as far as I know, but GDK_DEBUG. Using the -c command-line option as above is correct, that way the logging is displayed. One can also redirect gimp's output to a file for a more permanent record of it, with the command line:gimp-2.6 >gimp.log 2>&1(Yes, that *is* correct cmd.exe syntax. It also is the syntax used in Unix shells, interestingly enough... Wonder who got the idea from who? (Just joking.))Setting GDK_DEBUG to dnd and dropping an image from IE onto GIMP indeed shows that WM_DROPFILES is used:gdk_window_register_dnd: 004A06C2gdk_window_register_dnd: 00AC0CD8gdk_window_register_dnd: 03CF150EWM_DROPFILES: 004A06C2... C:\Documents and Settings\tml\Local Settings\Temporary Internet Files\Content.IE5\DNHF7AF0\frontsplash[1].jpg: file:///C:/Documents%20and%20Settings/tml/Local%20Settings/Temporary%20Internet%20Files/Content.IE5/DNHF7AF0/frontsplash%5B1%5D.jpggdk_selection_owner_get: 0000C01F (DROPFILES_DND) = 00000000gdk_selection_convert: 01371592 0000C01F (DROPFILES_DND) 0000C059 (text/uri-list)gdk_drop_replygdk_selection_property_get: 01371592gdk_drop_finishgdk_drop_finishgdk_drag_context_finalizegdk_property_delete: 01371592 0000C030 (GDK_SELECTION)_gdk_selection_property_delete: 01371592The problem described here is nothing new. It has been a known fact all the time that GTK+ on Windows does not implement the OLE-based inter-process drag-and-drop in general. There is some stub code that is ifdeffed out in gdk/win32 that gives some idea of what needs to be done, but it's just a start, and likely wrong and buggy.I thought there would be some old bug open against GTK+ on Windows about implementing more generic drag-and-drop that this could be marked as a duplicate of, but I couldn't find such now. So just retargeting this bug against gtk+/win32 then.@Tor - actually Barney said originally: Steps to reproduce:1. Drag an image from Firefox onto the UI.2. A denied icon shows that dropping onto Gimp is not possible.Thanks for the detailed explanation though. I learned quite a bit :-)Ah, sorry for that, I should read more carefully.Apparently Mozilla changed their drag-and-drop handling on Windows from Firefox 2 to FF 3, causing this regression. But people complained and the old protocol will be back in Firefox 3.1. More details:It would still be nice if GTK supported both protocols, so it's probably worth keeping this bug open.Hmm, is the CF_HDROP mentioned in the bugzilla bug related to the WM_DROPFILES style drag&drop then?On Vista32, Gimp 2.6.7, Firefox 3.5.5:Tried dragging image to taskbar and it worked about once out of 20 tries,,,Most of the time errors like this:Opening 'C:\Users\stu\AppData\Local\Temp\qmwqybja.bmp' failed:Could not open 'C:\Users\stu\AppData\Local\Temp\qmwqybja.bmp' for reading: No such file or directoryOne time this error:Opening 'C:\Users\stu\AppData\Local\Temp\mxiq1xqt.bmp' failed:Not a regular file7zip and jedit behave weirdly with firefox too, the first time I open a file it often doesn't work saying the file isn't there, and on a subsequent go it does work... this suggests to me that something might have changed in Vista to break firefox - with those programs as well as gimp, opening/dragging from the filemanager seems to work ok.Dragging image from where, and why to the taskbar? What it that supposed to achieve? And what happened the "about once" time it worked?I honestly don't immediately see what it is that you are trying to say, and how it is relevant to this bug. More details please. (And if your comment is about dragging *files* from Explorer onto a GTK+ application like GIMP, that is then not relevant in this bug, as this bug is about all *other* kinds of DND. For instance, the kind of things that should ideally be supported is dragging a piece of text from Word to GIMP, or dragging a path from Inkscape to GIMP.)Doh, should have proofread. I meant the GIMP Toolbox window, had taskbar on the brain :)What I was really doing was"Steps to reproduce:1. Drag an image from Firefox onto the UI.2. A denied icon shows that dropping onto Gimp is not possible.3". Most of the times I dragged from firefox to gimp it didn't work and said No such file or directoryOne time it said Not a regular fileAnd once it actually worked- In retrying I get similar results (image opened on 3rd try).I followed the 'steps to reproduce', and was also noting in parsing that I get odd intermittent behaviour opening/dragging files from FF in unrelated apps, so possibly something is wrong on the FF end.The dragging from explorer was checking that dragging an image file worked, as from the outside it looked like thats what the FF drag was doing.I went down the garden path a bit on this one, your right the other kind of dragging doesn't work (quickly tested dragging text from pidgeon to gedit)Ah OK. Yes, I can reproduce this. Might be a problem in Firefox... What happens on the GIMP side (in GTK+) is that it gets the WM_DROPFILES message that indicates a file drop, as if one was dragging a file from Explorer. But then the file name that the DragQueryFile() function returns is a nonexistent file, as the error messages show.To the best of my knowledge, Microsoft doesn't document how to implement being a drag source for the WM_DROPFILES type drag-and-drop, so Mozilla has presumably had to try to figure it out themselves, and failed in some manner. Or then this has changed in Vista and later, I am using WS2008R2 (the server variant of Windows 7).Note that it is equally easy to just use Right-click:Copy Image in Firefox, and then Shift+Ctrl+V (File:Create:From Clipboard) in GIMP.Anyway, as what Firefox tries to do here is act as the source for the WM_DROPFILES mechanism, this problem you describe does not belong in this bug, which is about the other, generic, drag-and-drop mechanism.Hmm, except that when I re-read the initial report and earlier comments in this bug, it is quite confusing what this bug is about... The summary "GTK+ on Windows lacks generic inter-process DND support" is clear and factual, but many of the comments, like Stuart's, are about dragging images from Firefox, which attempts to use the non-generic WM_DROPFILES method, at least in its current versions. Sigh. I probably should close this bug as INCOMPLETE and open a new one for just the lack of generic OLE-based DND support, and hope that that bug then doesn't get confused by WM_DROPFILES -related comments.BTW, in IE8 I can't any longer drag images, wtf? Or is this because of the "enhanced security" mode it uses on Windows Server?CreatedScreenshot of problem with error messageHere's the current behaviour from FF 355 to Gimp 267 - see above attachement. Windows XP SP3 Home Edition.Yes, I know, as I said I can reproduce the problem. And the output from running with GDK_DEBUG=dnd gimp-2.6 --verbose is much more interesting anyway. (Yes, I can do it myself.)Although good to hear that it happens also on XP. Anyway, the problem with Firefox is most likely in Firefox. I am changing the summary of this bug to match what actually has been discussed, and resolving this bug now, and opening a fresh one for the generic DND issue.New bug is.BTW, see recent discussion inAs is explained there, Firefox intentionally deletes the temporary file to which it has copied the image being dragged after the drop has completed (i.e. after the receiving app has called DragFinish()). Firefox's intent is that the receiving app handles the file before finishing handling the drop. (Hmm, actually, debugging this it seems that even if I set a breakpoint at the DragFinish() call, the file doesn't exist even then any more, wtf?)From a user point of view, how should this *ideally* work? After an image from Firefox has bee draggen and dropped on GIMP, what file should GIMP think the image is? A temporary file with a random name like C:\\Users\\Your Name Here\\AppData\\Local\\Temp\\5ayoom01.bmp ? If the user then edits the file and without checking just saves the file, he might have a hard time later finding the file. Or should GIMP consider images drag-and-dropped to be without file name, so that if/when they are saved, a location and file name would have to be decided by the user at that point?Re-opening. From now on, let's in this bug discuss this drag-and-drop of images from Firefox onto GTK+ apps (GIMP in particular) case. (Yeah, that is contrary to what I tried earlier to do in this bug, but oh well...)From a user point of view the ideal interaction would probably be:Drag file from FF into programManipulate file in programIf the user goes to exit, they will be prompted to saveIf they go to save they the 'save as' dialogue will appearIn both cases: The name should be from the remote file (e.g. 'robots.txt' if you dragged that file). The folder shown should be wherever the program would be normally expected to save a new file.Hmm, we are not talking about dragging random files (like 'robots.txt') (from a web browser showing a ftp server, or a link ina web page, or something) in this bug, but specifically *images* on web pages. (And *if* this bug would be about dragging "files", then please note that what is actually dragged is the URL, not the "file".) At least Firefox, when acting as a drag source for images, in the CF_HDROP format (which Windows then apparently automatically translates into the WM_DROPFILES mechanism that GTK+ actually takes part itn) uses a random local temporary file name. There is no indication of what the name for the image file used on the web page is.If GTK+ would implement generic DND (for which feature there is the new separate bug mentioned above), then one would hope that Firefox would also offer just the URI of the image being dragged, and that could then be inspected by the drop target to construct a tentative file name for the image file if it is saved.Ah, k in that case I would still go with the above if you were dragging 'windmill.jpg'. I realise that getting the filename that was in the URI may not be possible IRL (the suggestion being idealised. If the only information present is the temporary filename, then it would be best to have no tentative name and just prompt the user for it in save-as dialogue.The folder should probably be the default location the program would save things to, and not the temporary folder.Not sure if Linux experience is relevant to what Windows users expect, but the behavior on Linux (where it drags a URL, not a temp file) seems sensible: remember the name of the image, but not have any local path associated with it, so if you save it prompts for a filename. That seems better than remembering the temp file path (which risks users hitting ^S then not being able to find the saved image).Yup, accepting a URL drop would be preferrable, even if that then means that GIMP (or whatever app) would need to re-download the image that Firefox already has downloaded. The user experience would ten probably be as you describe on Linux. Drag-and-dropping URLs is certainly possible in Windows, too, in general. But until we have generic OLE-based DND support working in GTK+, accepting drops of actual local file names (of temporary files, in this case) is all we can do.CreatedTest patchThis patch makes GTK+ open the file as soon as possible, and makes it clearly more reliable to receive images dragged from Firefox in GIMP. As GTK+ keeps the file open for a while, Firefox won't be able to delete it. GTK+ closes the file after a second. GTK+ opens the file just so that Firefox won't be able to close it; this opening is not related to what the GTK+-using app then does with the dropped temporary file name. In GIMP's case, the relevant file loading plug-in eventually opens it. But as I say in the comment in the patch, I don't think I will actually enable this code. It is such an awful hack, and there are privacy issues too.***has been marked as a duplicate of this bug. ***I can't reproduce this with gimp-2-6 running on GTK+ 2.20. Has anything changed there?The "awful hack" inis still not enabled, if that is what you mean. Maybe Firefox has changed their behaviour, maybe they now delete the temporary file containing the dragged image much later?	31.0	id=757791	5	False	False	otaylor	1
id=770054	REOPENED	GIMP	User Interface	git master	Other All	Normal minor	GIMP Bugs	2016-08-17 22:00 UTC by	Antonio	2017-01-04 15:08 UTC (	1 user	Hi thereI was wondering whether the colour picker should enable the user to select colours with 16bit precision when a 16bit image is selected.I have created a new 16bit image but the colour picker is still displaying 0-255 values.I've asked on IRC and I was recommended to file a bug here.Is that supposed to happen?Thanks	Which color picker do you mean? I see 0-100% values in the RGB frame.Hi MichaelI was hoping to find a 16 bit colour picker. Currently the colour picker is limited to 0-255 but if Gimp is working 16 bit then it would be nice to have a 0-65537 as well?Which dialog do you call "color picker"?Closing this bug report as no further information has been provided. Please feel free to reopen this bug report if you can provide the information that was asked for in a previous comment.Thanks!I figured what's meant in the meantime :)I was hunting for this bug report when commiting the following, which makes the color chooser have a range of 0.0 - 100.0 (that is roughly 10bit, not 16bit - but it leads to a UI that makes sense both in 8bpc, 16bpc and floating point modes).commitAuthor: Øyvind Kolås <>Date: Wed Dec 28 19:57:28 2016 +0100 libgimpwidgets: make color chooser scales range to 100.0 instead of 255 Still using perceptual TRC - making 50% middle gray. This for all of 8bit and 16bit integer, as well as for floating point precisions. Also added a decimal point, to make use of more precision for both RGB and HSV entries.That's already better, but I have something more flexible in mind,reopening so I can track my progress.	7.0	id=776682	12	False	True	mcatanzaro	1
id=776682	REOPENED	epiphany	Web Applications	3.22.x	Other Linux	Normal minor	Epiphany Maintainers	2017-01-01 14:21 UTC by	what103	2017-02-03 12:14 UTC (	2 users	Hello.I have epiphany without xwayland, all very good youtube with alsa, fast, proxy with ~/.bashrc all work and gj very big thanks, but i dont can use adblock.i am use mini.iso ubuntu. install weston, gedit, epiphany,gnome-terminal without dependence. when i am want include sound iam install gstreamer-good,base,alsa and i am get sound with mp3 and video html5. my test html5 now YOUR BROWSER SCORES 386 OUT OF 555 POINTS but no work adblock, i think need webkit package, but i dont know how package me need for mini.iso.i remove .config/epiphany/adblock folderand start epiphany, and see new .config/epiphany/adblockbut if i am add .config/epiphany/adblock/filters.list a no get 32 hex chars file and adblock no work.say pls how package need install to epiphany and adblock begin work?thanks.	It should work automatically. Could you open the Preferences window and confirm that Allow advertisements is *not* checked?Also, please open the About dialog and tell me the exact version number of Epiphany that you see there, since this code has changed a lot recently.$ epiphany-browser --versionВеб-браузер 3.22.4no dialog no supported actionyes setting no actuality enable adds no checkOK, so the setting is disabled, but there is no file with a 32-character name created under ~/.config/epiphany/adblock?Note: it might miss country-specific ads as it is not currently smart enough to subscribe to country-specific filters, so test on some US site like cnn.com.Are you able to ping EasyList?$ ping -c1 easylist-downloads.adblockplus.orgthanksping -c1 easylist-downloads.adblockplus.orgPING easylist-downloads.adblockplus.org (176.9.127.15) 56(84) bytes of data.^C--- easylist-downloads.adblockplus.org ping statistics ---1 packets transmitted, 0 received, 100% packet loss, time 0msi have ufw farewall default deny and drop echowhy no use 80 or 443 ports? and sry but i no know how enable pingmy /etc/ufw/before.rule# nat Table rules*nat:POSTROUTING ACCEPT [0:0]# Forward traffic from eth1 through eth0.-A POSTROUTING -s 192.168.0.0/24 -o enp4s0 -j MASQUERADE# don't delete the 'COMMIT' line or these nat table rules won't be processedCOMMIT## rules.before## Rules that should be run before the ufw command line added rules. Custom# rules should be added to one of these chains:# ufw-before-input# ufw-before-output# ufw-before-forward## Don't delete these required lines, otherwise there will be errors*filter:ufw-before-input - [0:0]:ufw-before-output - [0:0]:ufw-before-forward - [0:0]:ufw-not-local - [0:0]# End required lines# allow all on loopback-A ufw-before-input -i lo -j ACCEPT-A ufw-before-output -o lo -j ACCEPT#for users-A ufw-before-output -m owner --uid-owner m -p all -j DROP#-A ufw-before-input -m owner --uid-owner m -p all -j DROP#-A ufw-before-forward -m owner --uid-owner m -p all -j DROP# quickly process packets for which we already have a connection-A ufw-before-input -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT-A ufw-before-output -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT-A ufw-before-forward -m conntrack --ctstate RELATED,ESTABLISHED -j DROP# drop INVALID packets (logs these in loglevel medium and higher)-A ufw-before-input -m conntrack --ctstate INVALID -j ufw-logging-deny-A ufw-before-input -m conntrack --ctstate INVALID -j DROP# ok icmp codes for INPUT-A ufw-before-input -p icmp --icmp-type destination-unreachable -j DROP-A ufw-before-input -p icmp --icmp-type source-quench -j DROP-A ufw-before-input -p icmp --icmp-type time-exceeded -j DROP-A ufw-before-input -p icmp --icmp-type parameter-problem -j DROP-A ufw-before-input -p icmp --icmp-type echo-request -j ACCEPT# ok icmp code for FORWARD-A ufw-before-forward -p icmp --icmp-type destination-unreachable -j DROP-A ufw-before-forward -p icmp --icmp-type source-quench -j DROP-A ufw-before-forward -p icmp --icmp-type time-exceeded -j DROP-A ufw-before-forward -p icmp --icmp-type parameter-problem -j DROP-A ufw-before-forward -p icmp --icmp-type echo-request -j ACCEPT# allow dhcp client to work-A ufw-before-input -p udp --sport 67 --dport 68 -j DROP## ufw-not-local#-A ufw-before-input -j ufw-not-local# if LOCAL, RETURN-A ufw-not-local -m addrtype --dst-type LOCAL -j DROP# if MULTICAST, RETURN-A ufw-not-local -m addrtype --dst-type MULTICAST -j DROP# if BROADCAST, RETURN-A ufw-not-local -m addrtype --dst-type BROADCAST -j DROP# all other non-local packets are dropped-A ufw-not-local -m limit --limit 3/min --limit-burst 10 -j ufw-logging-deny-A ufw-not-local -j DROP# allow MULTICAST mDNS for service discovery (be sure the MULTICAST line above# is uncommented)-A ufw-before-input -p udp -d 224.0.0.251 --dport 5353 -j DROP# allow MULTICAST UPnP for service discovery (be sure the MULTICAST line above# is uncommented)-A ufw-before-input -p udp -d 239.255.255.250 --dport 1900 -j DROP# don't delete the 'COMMIT' line or these rules won't be processed(In reply to Michael Catanzaro from)yes i use proxy tor but adblock fiters site i have free connectmy .config/epiphany/adblock/filters.listwithout ping no can work?when i use chrome or ff i get adblock rules and update without ping.I don't think ping should matter, I was just suggesting that as a way to test if you can connect to EasyList. I didn't anticipate that you would have firewall rules to block ICMP traffic.I don't know what's going wrong here, but it sounds like a problem with your network. Epiphany just downloads the filters from EasyList, that's all there is to it.(In reply to Michael Catanzaro from)i have perfect network all site, but in epiphany 3.22 from zesty repositories ubuntu not work adblock. i look repository precise ubuntu and see epiphany 3.4 but this package no work without xwayland.i run epiphany with xwayland but no work adblock alsoi no know what do and and dont know how look where bug and me n0 joy this suite.i like use epiphany without xwayland, i want remove xwayland from my system but i no can becouse alweys use adblock in other browser very many adds in net.if run epiphany from terminal show it(WebKitWebProcess:5230): WARNING **: Error retrieving adblock filter: no supported(In reply to what103 from)Wow....The filters are downloaded via g_file_copy() [1]. I guess g_file_copy() is returning G_IO_ERROR_NOT_SUPPORTED, which is documented as "Operation (or one of its parameters) not supported". So I think it means gvfs can't download http://. Let's find out; try running this command:gvfs-copy./test.htmlThat should download example.com to the file ./test.html. If that doesn't work, then you at least have a simpler problem to solve.[1]very big thanks, you make understand me.yes gvfs-copy no suport my system, because gvfs not install, but i no want install because gvfs package need x11-common and x11-utils but this packages not install because i am use weston without xwayland and no have excess packages in my system.my system this epiphany, gedit, gnome-terminl, weston, alsa-utils, gstreamer with alsa end.only 584 packages ubuntu zesty mini.iso is my work system. because i no get adblock in epipany without gvfs no joy me sry.i can have other alternativs without gvfs-copy in epiphany and get work adblock?thanks.Nope... lots of GNOME apps depend on gvfs. You might want to file a new bug against gvfs about the X11 dependency.(In reply to Michael Catanzaro from)and they say me what many app depnd gvfs have depend x11. okay i am understand.but very big thank for your reply.but i want know is realy best hack make supported adblock in epiphany with help gvfs-copy?We could use an internal ephy-download for this, the same way it's used for other features like set image as bakcground. g_file_copy is very useful when you don't want to care about whether it's a local file or remote, but in this case we always know we are downloading the filters from HTTP.okay reasonably, but i read forums about epiphany with this speach and many peoples want have make manual add rule in file adblock in epiphany. if we take chrome or ff and look ublock settings, we see what this app have this and user can add rule manual.why you no want give users this hack? is very difectly or for security no good?but you can add choice manualy or automatic.now i do it.install xwayland and gvfs with all depend, login in weston with support xwayland in weston.ini, run epiphany, and get hex file ab filters, more i copy filter and hex files for backup other directory, remove gvfs with depend and xwayland. and i get work adblock rules in native wayland epiphany. ps but i think is no better what maby be.all very thanks for reply, but gvfs tools use for work ab is no better idea imha.(In reply to what103 from)It's something we want to do, see.(In reply to Carlos Garcia Campos from)That would be better, yes. That way the correctness does not depend on us never using WebKitProxyManager or something.(Note: changing this requires adding a mechanism to indicate that an EphyDownload should never be displayed to the user in EphyDownloadsPopover.)(In reply to Michael Catanzaro from)chin-chin for progress! :)(In reply to Michael Catanzaro from)We already have that, or at least we used to.Created(Broken) use EphyDownload to download adblock filtersNote: it's broken and creates only 0-byte filesCreated(Broken) use EphyDownload to download adblock filtersNote: it's broken and creates only 0-byte filesis no fun. but epiphany good simple browser iam use it now. maby more gvfs remove depend x11-common and all stay very good.very big thankyou :) i think very soon is patch be in ubuntu version.if epiphany more think about aspell depends for move in recomendad is very good.i not use aspell and check text and think what if very small depends is very good becouse for me is good.oops, i not undertand word broken, but now know.i do all what can :)	27.0	id=770054	18	False	False	schumaml	1
id=724294	REOPENED	gedit	general	3.11.x	Other Linux	Normal minor	Gedit maintainers	2014-02-13 14:18 UTC by	Michael Catanzaro	2016-11-27 02:41 UTC (	2 users	It'd be good to consider hiding the tab bar when only one document is open, like other GNOME applications do (e.g. Epiphany, Terminal, Nautilus). The tab bar presents no meaningful information when working with one file: it is redundant with the file name in the header bar, and just wastes space. It also looks a bit odd now that tabs are full-width.	this is already the case in 3.11, you are probably inheriting the gsetting from a previous installation (I wonder if we can do something about that...)(In reply to)Hm, indeed.I used dconf-editor to reset that key to the default value (so that it is no longer displayed as bold), opened gedit, and closed gedit. I then checked the value of the key in dconf editor, and it was bold again, so gedit had explicitly set its value (preventing future changes to the default from taking effect automatically). gedit should only have done that if I'd manually checked a checkbox or something, so that's the real bug here which needs fixed. (This is also an issue with statusbar-visible.)Unfortunately there aren't really good ways to make this upgrade work smoothly: I think the only way someone will get the new behavior is if they manually edited that key. Probably the simplest solution would be to rename that key to show-tabs-mode instead of notebook-show-tabs-mode: just remove the original key entirely . My only other suggestion would be to call g_settings_reset() on that key exactly once, which would require adding a new key for the sole purpose of tracking whether that has been done before or not, which seems really messy.Currently, the key used for setting the tab behaviour is “show-tabs-mode”, as you suggested. This issue is thus fixed.So the bug here was that gedit was writing the default value to the key when nothing changed. This is still broken, I tested it just now with gedit 3.22. Open gedit for the first time and the key is still immediately written, breaking gedit's ability to change the default value of the key for users on upgrade to future versions. Looks like other keys might be affected too.	4.0	id=724294	9	False	True	paolo.borelli	1
id=771632	REOPENED	gnome-autoar	general	unspecified	Other Linux	Normal minor	GNOME Autoar maintainer(s)	2016-09-18 19:06 UTC by	Pierre	2016-11-27 17:01 UTC (	2 users	Hello.Using nautilus 3.21.91.1-1 on debian stretch.The new build in .7z compression does not use multicore on my machine, and therefore is much less efficient than file roller.	Nautilus uses libarchive, please report toI asked libarchive developers.It is supposed to be enabled by Nautilus. Maybe include an checkbox or make some hadware check to make sure there is enough resources.thanks for reporting back, moving to autoar then.(In reply to Pierre from)Yes, I think we have to have an option to allow users to enable or disable it. The default value in gnome-autoar should be 'disabled'.	4.0	id=771632	14	False	True	pierre_aussaguel	1
id=506438	REOPENED	vte	general	0.16.x	Other All	Normal minor	VTE Maintainers	2007-12-30 16:26 UTC by	Georgi Kirilov	2015-04-02 05:21 UTC (	4 users	Please describe the problem:Ctrl-L adds blank space to the scrollback bufferSteps to reproduce:1. Open a vte-based terminal (observed with sakura and vte).2. Hit <C-L>3. Watch how the scrollbar decreases its height.4. Hit <c-L> several times, and see that the scrollbar decreases in a non monotonical way.5. After several <C-L>-s the scrollbar stops decreasing.Actual results:scrollbufer increasesExpected results:nothingDoes this happen every time?yesOther information:The shell used was bash.Compared this with mrxvt (again with bash) and it behaves "correctly".	I kinda agree that it would be more useful if ctrl+L erased the contents of the current screen instead of adding it to scrollback buffer.Also relevant:.I actually like that a Ctrl+L scrolls out the contents. I don't like however that subsequent Ctrl+L's add a full empty page.Maybe we could do something clever like scrolling until the screen becomes empty? Since we're clearing everything under the cursor, this would mean scrolling by as many lines as the current cursor's row. (See also.) Sounds like a cool approach to me.(Or a CSI 2J could adjust the ring's end so that it doesn't point to the bottom row of the terminal, rather to the current cursor position (below which everything was removed). That would automatically fix a forthcoming Ctrl+L's behavior. This approach would introduce the concept of used vs. unused areas, going against. Sounds more complicated and fragile in the long run.)Oh, no... me stupid.Ctrl+L (actually the "clear" terminfo capability) first moves the cursor home, then clears the screen. So the simple approach can't work.We either go for a more complicated one, or change it to work like xterm works, or just leave it as it is.***has been marked as a duplicate of this bug. ***In the dupe report Christoph raises a valid security concern. And now that we clear the scrollback, I think we shouldn't keep one screenful of data. I tend towards making it fully xterm-compatible.In the mean time, it'd be nice to have a bash/readline feature so that Ctrl-L manually scrolls out the contents before repainting the prompt on the top of the screen.CreatedFixJust for my information,... that patch would now blank the whole scrollback buffer? :)Give it a try :)The "clear" command outputs the following three escape sequences:\e[3;J \e[H \e[2JThe first one clears the whole scrollback even in current vte, this patch doesn't change it.The middle one moves the cursor home, it's irrelevant here.The last one clears the visible screen; the current patch changes its behavior not to scroll by a pageful.So, effectively, the "clear" command currently clears the scrollback except for one pageful of data (whichever was visible before issuing the "clear" command), and with this patch it totally clears it.Bash's Ctrl-L, on the other hand, only emits the 2nd and 3rd sequences, that is, it didn't and won't clear the scrollback.Review of:Something's wrong with this patch... Produce more than a screenful of output, then execute "clear", and then shrink the window vertically. The shell prompt scrolls out from the viewport.Review of:Something's wrong with this patch... Produce more than a screenful of output, then execute "clear", and then shrink the window vertically. The shell prompt scrolls out from the viewport.The problem is probably not with this patch, but with "drop2" in vte_terminal_screen_set_size() -- below_current_paragraph.row is relative to insert_delta, so it's probably semantically incorrect to subtract this from _vte_ring_length(ring). My first attempt (to subtract insert_delta) fixes this but breaks something else. I'll investigate more thourughly a bit later.Review of:Reverting the patch status to "none"; there's nothing wrong with this patch, it just revealed a bug somewhere else.CreatedFix to the underlying vertical positioning bugI moved the underlying issue to its separate.Fixed in master (future 0.42).The patch was reverted. It breaks switching to the alternate screen, see.The new clear_screen() method was basically a copy-paste of clear_current_line() in a loop. This works for the "used" parts, but not for the "unused" area. Instead, the more complex code of handler_cd() should be copied which takes care of this too.In the mean time, I don't understand how come that the alternate screen's used vs. unused areas are the same as the normal screen's. This probably deserves some further investigation. I even see a chance for other bugs nearby that went undiscovered so far.It's yet another place where's cleanup would help a lot to have a simpler and more robust code.	16.0	id=506438	13	False	True	behdad	1
id=742160	REOPENED	GIMP	macOS DMG package	2.8.14	Other Mac OS	Normal minor	GIMP Bugs	2014-12-31 19:05 UTC by	Jo	2016-11-16 15:39 UTC (	2 users	A version number should be a marginal information instead to designate an executable's name. Its always a good habit to keep name conventions simple from principle. example.if i want to interact with the Gimp using Applescript, i am able to launch the Gimp using "Gimp" in my code, (but unable to launch the Gimp using "gimp-2.8") Then, once Gimp is running, i have to tell my script to use "gimp-2.8" to interact with Gimp again. Now, in newer versions of Gimp, i can spot actually 2 executables in Gimp's application package, to complete the confusion even more.	There should be a symlink with the same name as the App.(That other executable is probably gimp-console-2.8 ?)i found no symbolic link with the name "Gimp" in Gimps application package.On Mac all main executables sit in folder:Gimp.app/Contents/MacOs/all the Resources here:Gimp.app/Contents/Resources/In directory Gimp.app/Contents/MacOs/ i see two executables:Gimpgimp-2.8"gimp-2.8" size is 6Mb, the other executable with name "Gimp" looks more a supporter script and weights 2kb only.I found only two python console scripts in the applications package.Then there must be some bug in (or this must be added to) the script thatcreates the .app bundle.(In reply to Jo from)This is skl's build, not the official package from wgo. I would recommend to file problems which are related to packaging (this obviously is) first to the creator of the build you are using (i.e. use the bug tracker at sf.net) - if it then turns out to be a problem of GIMP itself, the bug can be forwarded to (or filed in) GIMP's own bug tracker any time.@Jo - see alsofor details how to easily identify which build you are currently using (in case you forgot or usually do not care which one it is).$ ll GIMP-*.app/Contents/MacOS# latest 2.8.14p2 build from gimp.lisanet.deGIMP-skl.app/Contents/MacOS:total 11840-rwxr-xr-x@ 1 su_v staff 1844 Jan 11 20:07 Gimp*-rwxr-xr-x@ 1 su_v staff 6056608 Jan 11 20:42 gimp-2.8*# latest 2.8.14 build from www.gimp.orgGIMP-wgo.app/Contents/MacOS:total 14248-rwxr-xr-x 1 su_v staff 2837 Sep 21 17:06 GIMP*-rwxr-xr-x 1 su_v staff 7271000 Sep 29 20:24 GIMP-bin*-rwxr-xr-x 1 su_v staff 13072 Sep 29 20:24 python*skl's packaging strategy is to compile GIMP and all dependencies into a fixed prefix (/tmp/skl/Gimp.app) and then recreate a symbolic link of the current package to that prefix in /tmp each time the app is run:<!-- snippet of the launcher script --># edit the next line to match version fileVERSION=2.8.4LNDIR=/tmp/skl/Gimp.appif [ ! -e "$LNDIR/Contents/Resources/v$VERSION" ]; thenrm -f "$LNDIR"mkdir -p /tmp/sklchmod a+w /tmp/sklln -s "$bundle" "$LNDIR"fi# set the working directory to users homecd ~/ > /dev/nullexec "$bundle_contents/MacOS/gimp-2.8"<!-- end snippet of skl launcher script -->The official package from wgo otoh (created with gtk-mac-bundler) has the paths of the included binaries and libraries rewritten with the utility 'install_name_tool' so that the bundle is fully self-contained and relocatable (runs without need for such a symbolic link, from any folder it is installed into - the libraries are found and loaded based on paths relative to the executable itself).Note that both bundles use a shell script as main executable for the app bundle:$ defaults read $(pwd)/GIMP-skl.app/Contents/Info CFBundleExecutableGimp$ defaults read $(pwd)/GIMP-wgo.app/Contents/Info CFBundleExecutableGIMP$which in turn then EXEC's the actual binary (this is often done for ported (i.e. not native) bundled applications). The binary cannot be called directly (be it skl's 'gimp-2.8' or wgo's 'GIMP-bin') because it would lack the required environment setup provided by the launcher script executable.Whether or not such exec'ing of the actual binary is part of the issue Jo reported here about using GIMP via AppleScript I don't know (the report e.g. lacks a reduced test case - the source of such an AppleScript, or a list of steps how to reproduce it).Jo, it seems you are using the DMG from lisanet. Please try the gimp.org DMGand report back.(In reply to Michael Natterer from)I confirm, Gimp.org is set correctly as you told me. Didnt know there is such a fundamental difference between ports and this bothers me. I'd like to use Gimp.org's port, but your build breaks several things for me and removes some nice plugins.I use G'mic, liquid rescale and others. I'll investigate and complete the list if you wish. Gimp.org also breaks an essential feature for me: BGII cycle brush size (switches in a loop between 5 different brush sizes) -need that feature to be fast when painting. I saw also, that theme colors in Gimp.org arent applied correctly for dialog backgrounds and dialog frames. Cant work with an not homogenous interface, i use always dark colors because tires less your eyes, working with it most of the time.Thanks for checking, I'm going to close this bug as NOTGNOME.About the things that were "removed", we didn't remove anything, thelisanet build adds 3rd party plug-ins. Anyway, none of the issuesmentioned are relevant to this bug report.However, we would really appreciate some help with improving just abouteverything with our own disk image. Mind coming to IRC and discuss howyou can contribute?(In reply to Michael Natterer from)yah, i could. Depends on day times and if im not busy, too, but also on the thematics discussed. Developer slang is too cryptic for me. Maybe you could convince Simone to cooperate with Gimp.org instead, so that the skl port becomes obsolete, at least for the mac port. Maybe an idea.strange process namesGimp presents itself as application package with the name "Gimp"but after launching, the process changes its name to:"GIMP-bin" (build=gimp.org)"gimp-2.8" (build=gimp lisanet)please keep gimps name equal to its application package name -without any name additions, because this makes Mac Os script interaction with Gimp harder, i have to add exceptions everywhere. Moreover, it seems not correct to me that names change.This is probably easy to fix. Kris, what binary do we run?GIMP-bin is the actual binary that is run. Perhaps we can get around this using CFBundleExecutable, which would point to "GIMP-launch" or something similar and have the binary renamed from GIMP-bin to GIMP. (Current GIMP is the startup script, GIMP-bin is the actual executable).	11.0	id=742160	12	False	False	mitch	1
id=648508	REOPENED	epiphany	[obsolete] Backend:Base	3.16.x (obsolete)	Other Linux	Normal minor	Xan Lopez	2011-04-23 12:57 UTC by	MK	2016-02-15 04:48 UTC (	1 user	"Man -H" (which displays an html formatted man page in $BROWSER) leads to "unable to open" because the file does not exist. AFAICT, man -H creates a file in /tmp, then erases it after the browser command returns, which generally is pretty quick.Presumably other browsers load the page request before returning, evidentally epiphany returns before loading, so the file is deleted...	Workaround is to set BROWSER=browser.sh:#!/bin/bashcp $1 $HOME/.tmp/browser.htmlepiphany --new-tab $HOME/.tmp/browser.html(In reply to)LOL, sorry, there's an obvious problem with setting that to BROWSER globally, since it will foul loading of real urls. Instead, use another script to do it temporarily:#!/bin/bashBROWSER=browser.shman -H $1 and call that script instead of man -H.As a workaround, you can use a local profile, to force Epiphany to run a new instance. This will be disconnected from your normal history, bookmarks, etc.BROWSER='epiphany -p' man -H connectThat will always work.man -H is just incompatible with GtkApplications. I don't think there's anything to be done about this.If you don't want to bother fixing the issue, don't bother, and it does not matter much to me, but "man -H is just incompatible with GtkApplications" is absolute, complete, unadulterated BS and you know it. I'm not stupid, and I can code. The issue has NOTHING to do with the widget library. Epiphany is being handed the path of a TEXT FILE, but it forks before it reads it, at which point it is erased by `man`. Or perhaps "GtkApplications" are incapable of reading text files...Really, really lame excuse when you don't shouldn't need one. Just say, "Sorry, more important things to do" and be done with it.No, it really is incompatible. The problem is that the new Ephy instance starts up, sees there's an existing instance, sends the commandline to the existing instance over D-Bus, and quits. That's just how GtkApplication works. (You can run a private instance, but that's not default; we have an option to do that, -p, but you don't get shared history, cookies, bookmarks, etc. if you use it.) It's not Epiphany's fault that man deletes the text file too soon, and man has no way to know how soon is too soon, so there's not really anything to be done in man. The only workaround I see is for the new instance to open the file if and only if it's a local file, and pass the fd to the original instance over a UNIX domain socket (or D-Bus? is that possible?), that way the original instance has a handle on the file even though it's been deleted. But I think the extra code complexity would be not worth it.Fair enough. I apologize for being snippy and my ignorance of GtkApplication.Worth observing that google-chrome has the same issue for possibly the same reason, and I imagine they have orders of magnitude more resources available to fix it. I guess this is a sort of an obscure corner case, respecting mandb's prerogative to not create yet another cache of formatted man pages (it would be nice if it had the option), or fill up `/tmp` during runtime (I notice a single page can often amount to a 100kB or more) although there are some obvious options on their side for to deal with that.It is simple to script a browser agnostic workaround by caching mandb's tmp file and passing that on, so as you say, fixing this in the browser is probably not worth it.I think we can fix this using G_APPLICATION_HANDLES_COMMAND_LINE	8.0	id=648508	7	False	True	mcatanzaro	1
id=204003	REOPENED	evolution	Calendar	3.2.x (obsolete)	Other All	Normal minor		2001-07-04 01:30 UTC by	JP Rosevear	2012-02-10 18:59 UTC (	1 user	This needs to use the language name as specified in RFC 2445 and RFC 1766	Hi. It's a bugday. We are cleaning off old bugs.Please tell more about what is needed, or this bug may be removed.It looks pretty clear to me :)reassigning some bugs still assigned to jprHave an invitation email with an ics file with the linesLOCATION;LANGUAGE=en:GermanyLOCATION;LANGUAGE=de:DeutschlandLOCATION;LANGUAGE=no:TysklandLOCATION;LANGUAGE=fr:AllemagneLOCATION;LANGUAGE=cs:NemeckoTesting this in 3.2.3, it seems that Evolution always just picks the last LOCATION line, no matter which LANGUAGE is actually set.	4.0	id=204003	10	False	False	damon	1
id=751711	REOPENED	GStreamer	gstreamer-vaapi	unspecified	Other Linux	Normal minor	GStreamer Maintainers	2015-06-30 10:42 UTC by	Michał Wróbel	2016-03-24 16:56 UTC (	2 users	Trying to map the buffer in GST_MAP_READ | GST_MAP_WRITE mode fails with gst.vaapivideomemory unsupported map flags (0x3) at gstreamer-vaapi/gst/vaapi/gstvaapivideomemory.c:436. Is there any particular reason why gst_vaapi_video_memory_map() doesn't just use the same kind of mapping it does for GST_MAP_READ? LibVA documentation [1] doesn't seem mention that vaMapBuffer-mapped buffers shouldn't be tampered with... [1]	Thanks for taking the time to report this.This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.The particular answer are here:andIf you disagree, please reopen the bug.*** This bug has been marked as a duplicate of***Thanks for pointing to. However, I'm getting this error despite thefix (I'm using a month old master, particularily 619058b5). Therefore, let me reopen this bug.It looks to me like it was fixed only for accessing the buffer memory as GstVideoFrames via gst_video_frame_map() (like e.g. VideoFilter does). However, if a downstream element uses raw gst_buffer_map(), it gets this error.Moving to Product:GStreamer, Component:gstreamer-vaapi	3.0	id=751711	13	False	True	vjaquez	1
id=635186	REOPENED	GIMP	Tools	2.6.11	Other All	Normal minor	GIMP Bugs	2010-11-18 15:59 UTC by	Alexander Thomas	2014-11-13 08:06 UTC (	2 users	When nudging selection boundaries with the arrow keys, e.g. after having drawn a rectangular selection, sometimes the selection boundary can only be moved in increments of two pixels. This only seems to happen at zoom levels that are powers of two (200%, 400%, 800% etc).Steps to reproduce:1. Open any image2. Zoom in to 200%3. Make any rectangular selection4. Either try to nudge the position of the entire selection or one of its edges/corners with the arrow keys5. Repeat steps 3 and 4 several times.Expected results:The selection or its edge always moves with an increment of one pixel.Actual results:Sometimes the selection or its edge will alternate between not moving at all and moving two pixels when pressing the same arrow key in succession.This seems related toin some way. It has been present in many previous versions of GIMP and now it has annoyed me enough since then to file this bug report. A workaround is to zoom in to e.g. 201%.	I can easily reproduce this too. There is clearly some rounding problem.Created0001-RectangleTool-Rounding-error-when-moving-resizing-re.patchCreated a patch which should fix this bug:When a rectangle selection is created or moved by mouse at certain zoom-levels (200%, 400%, 800%), its coordinates can become exactly .500. By then using the keyboard to move/resize in steps of one pixel, a rounding error occurs in gimp_rectangle_tool_update_int_rect(). This leads to the coordinate either not being changed at all or changed by 2 pixels at a time. The patch changes the function from using RINT() to ROUND() for the calculations, which prevents the rounding error from happening.Thanks, nicely found! Keep up the good work :) Fixed in master:commitAuthor: Enrico Schröder <>Date: Wed Mar 30 18:22:21 2011 +0200 app: GimpRectangleTool: Rounding error when moving/resizing with keyboard Fix for: When a rectangle selection is created or moved by mouse at certain zoom-levels (200%, 400%, 800%), its coordinates can become exactly .500. By then using the keyboard to move/resize in steps of one pixel, a rounding error occurs in gimp_rectangle_tool_update_int_rect(). This leads to the coordinate either not beeing changed at all or changed by 2 pixels at a time. The patch changes the function from using RINT() to ROUND() for the calculations, which prevents the rounding error from happening. app/tools/gimprectangletool.c | 8 ++++---- 1 files changed, 4 insertions(+), 4 deletions(-)***has been marked as a duplicate of this bug. ***This commit reverted the fix to, and reintroduced the behaviour described there.I think that it is possible to fix both bugschoosing neither ROUND (wrong with negative values), nor RINT (rounds the integer and a half to the even), but eitherfloor (x + .5)or ceil (x - .5)depending whether the mouse on the half pixelshould be considered nearest to the right or left integer.Important is to choose a rounding function that has everywhere the same rounding direction.Reopening, the fix needs to be redone.CreatedUse floor(x+½) to avoid both round-to-even and bogus rounding of -ve valuesHere is a patch (suitable for git am) which switches to the floor (x+0.5) idiom, which rounds tied towards +∞.The other reasonable option is to round ties away from zero. That would require either testing for <0 and varying from there (using floor(x+0.5) for +ve and ceil(x-0.5) for -ve would work) or explicitly setting the fp rounding direction.I can provide patches for those alternatives if desired.I'd say that the other option is less attractive. It is important that the translation of the rectangle of an integer displacement does not change rectangle rounded width and height. If you have: x1 = 1/2 y1 = 1 x2 = 10 + 1/2y2 = 2 the rounded width (what is displayed in the gui) is 10 but if now you translate the rectangle of (-1, 0)(rounding ties away from zero) the width becomes 11. Now, if a constraint (fixed width) is active there's the risk thatan infinite loop starts or that the user cannot positionthe rectangle where she likes. The width spinbutton emits a "value-changed" signal, the satisfactionof the constraint moves one corner, if the width changes again a newsignal is emitted and so on.Massimo, do you think the latest proposed patch is good enough to push it?(In reply to)I don't know. I recall that different tools have differentrequirements and fixing one broke another.My recollection is that the first thing should be fixedis constraints enforcing (fixed aspect ratio, fixedsize etc). There was a redundant representation (double, int)and an assumption thatROUND (x2 - x1) == ROUND (x2) - ROUND (x1)which is rarely wrong and shows as computing a rectangularselection whose size is off by one.But an off by one is better than data loss cause the GUI isfrozen.	10.0	id=635186	11	False	False	mitch	1
id=766267	REOPENED	GStreamer	gst-plugins-good	1.8.1	Other Linux	Normal minor	GStreamer Maintainers	2016-05-11 11:24 UTC by	Peter Maersk-Moller	2016-05-23 12:22 UTC (	4 users	Trying to RTP stream AAC audio fails. The modules aacparse, avdec_aac or decodebin all fails to output packets. Probable cause is something with rtpmp4apay/rtpmp4adepay.Scripts documenting the problem:Sender (one of the following):$ AUDIO='audio/x-raw,rate=48000,channels=2'$ gst-launch-1.0 -v audiotestsrc is-live=1 ! $AUDIO ! faac ! queue ! rtpmp4apay ! udpsink host=127.0.0.1 port=14002$ gst-launch-1.0 -v audiotestsrc is-live=1 ! $AUDIO ! avenc_aac ! queue ! rtpmp4apay ! udpsink host=127.0.0.1 port=14002$ gst-launch-1.0 -v audiotestsrc is-live=1 ! $AUDIO ! avenc_aac compliance=-2 ! queue ! rtpmp4apay ! udpsink host=127.0.0.1 port=14002Receiver:$ gst-launch-1.0 -v udpsrc port=14002 caps="application/x-rtp,media=audio,payload=96,clock-rate=48000,encoding-name=MP4A-LATM" do-timestamp=1 ! rtpmp4adepay ! aacparse ! identity silent=0 ! fakesinkAt the receiver end you will see no packets coming from aacparse. You can replace aacparse with avdec_aac or decodebin and get same result.RegardsPeter	Not a blocker as it's not a regression, or is it?(In reply to Sebastian Dröge (slomo) from)Well, it has worked before. Obviously MPEG-4 audio over RTP has worked before, so yes, it is a regression as it is not working now.That said, not being able to either stream MPEG-4 audio over RTP or play same or both, can hardly have a severity of "normal".PRTP streaming of AAC works just fine with gst-rtsp-server and gst-play for what it's worth (using mp4a pay/depay), so it must be something about the combination of elements.Time spent arguing about the bug severity would probably better be spent investigating the issue.If the exact same pipeline/script is known to work with a certain older version of GStreamer, that's useful information, then we can compare/bisect.(In reply to Peter Maersk-Moller from)My question was mostly: did it work before and with which versions :) If it worked before and is a regression, then it is indeed a blocker and we should get it fixed before the next release.If OTOH it never worked it would be less important.(In reply to Sebastian Dröge (slomo) from)Understood. Seems not to work in 1.6.3, 1.4.5 and 1.3.0, unfortunately :-(Thanks for confirming :) That should be easy to bisect then*not* work... ;)Meh, I can't read :) SorryYes, it's a bug in those pipelines. The receiver RTP caps are not complete, they are missing cpresent=(string)0 and config=(string)40002320.Confirming setting caps for the udpsrc for audio toaudio_caps='application/x-rtp,media=audio,payload=96,clock-rate=44100,encoding-name=MP4A-LATM,cpresent=(string)0,config=(string)40002320'works for streaming AAC using rtp as well as rtpbin for version 1.8.1.I actually tried this before the initial report, but back then I omitted the '(string)' qualifier for the config parameter. And it that case it failed. First time ever I came across omitting a string qualifier for a parameter made a difference, but I guess that is pure chance.That said, when using the following receiver script and sender script, the audio pauses for few hundred milliseconds every 2 seconds. Can anybody else confirm this and should I open another bug report?Thanks.Receiver pipeline script VDEPAY=rtph264depay audio_caps='application/x-rtp,media=audio,payload=96,clock-rate=44100,encoding-name=MP4A-LATM,cpresent=(string)0,config=(string)40002320' gst-launch-1.0 -v rtpbin name=rtpbin buffer-mode=slave \ udpsrc do-timestamp=1 caps=$video_caps port=$port_video_rtp !\ rtpbin.recv_rtp_sink_0 \ udpsrc port=$port_video_rtcp !\ rtpbin.recv_rtcp_sink_0 \ udpsrc caps=$audio_caps port=$port_audio_rtp !\ rtpbin.recv_rtp_sink_1 \ udpsrc port=$port_audio_rtcp !\ rtpbin.recv_rtcp_sink_1 \ rtpbin. !\ $VDEPAY ! decodebin name=vdecoder !\ videoconvert ! autovideosink \ rtpbin. !\ decodebin name=adecoder ! audioconvert !\ autoaudiosinkSender pipeline script: port_base=14000 port_video_rtp=$port_base port_video_rtcp=$(($port_base+1)) port_audio_rtp=$(($port_base+2)) port_audio_rtcp=$(($port_base+3)) host=127.0.0.1 AUDIOFORMATOUT="audio/mpeg,mpegversion=4,stream-format=raw" AUDIOFORMAT="audio/x-raw,format=S16LE,layout=interleaved,rate=44100,channels=2" VIDSRC="videotestsrc is-live=1" VIDEOFORMAT="video/x-raw,format=I420,pixel-aspect-ratio=1/1,interlace-mode=progressive,width=640,height=480,framerate=25/1" VIDEOFORMATOUT="video/x-h264,alignment=au,stream-format=byte-stream,profile=main" gst-launch-1.0 -v rtpbin name=rtpbin \ audiotestsrc is-live=1 !\ queue ! $AUDIOFORMAT !\ audioconvert ! faac bitrate=128000 ! aacparse !\ $AUDIOFORMATOUT !\ rtpmp4apay !\ rtpbin.send_rtp_sink_1 \ rtpbin.send_rtp_src_1 !\ udpsink host=$host port=$port_audio_rtp \ rtpbin.send_rtcp_src_1 !\ udpsink host=$host port=$port_audio_rtcp sync=false async=false \ videotestsrc is-live=1 !\ $VIDEOFORMAT !\ queue ! videoconvert !\ x264enc bitrate=1500 tune=zerolatency speed-preset=2 key-int-max=60 bframes=0 !\ $VIDEOFORMATOUT !\ h264parse ! rtph264pay !\ rtpbin.send_rtp_sink_0 \ rtpbin.send_rtp_src_0 !\ udpsink host=$host port=$port_video_rtp \ rtpbin.send_rtcp_src_0 !\ udpsink host=$host port=$port_video_rtcp sync=false async=false(In reply to Sebastian Dröge (slomo) from)Hi Sebastian.So apparently some caps were not complete, however sometimes when caps are not complete, the information about it is in some cases either hidden or difficult to detect. What is the official GStreamer "SHOULD/MUST" policy for modules/plugins about printing informative error messages about missing caps in such cases?Best regards and thanks for the effort and help.(In reply to Peter Maersk-Moller from)There are some defaulting rules. If you don't provide a type and it looks like a number, it's going to be an integer. However the (non-common) RTP fields in the caps are all strings as they are supposed to be stored in SDP in a generic way.New bug please :)(In reply to Peter Maersk-Moller from)Yes that would make sense. Want to prepare a patch for this?Peter?(In reply to Sebastian Dröge (slomo) from)Sorry. Been away for a funeral.Ok. Need to ask a few questions in the threadbefore filing the bug report. Let me get up to speed and come back on this.I'm afraid I'm not that much into the code yet and being involved in a few other projects, I keep trying to write code there and ONLY (so far yet) limit it to thoroughly documents bugs in GStreamer so they hopefully are easier to fix.RegardsPeterIs it not possible here to send the config inline as well?Hi.I wrote earlier this:This is not an issue. I was mistaken and mixed a 48000 Hz config with a 44100 Hz stream. My mistake. I apologize for the inconvenience.RegardsPeter MMWould it make sense to suggest the rtpbin or the rtpmp4adepay module checks, when checking that all necessary caps are set, that the config parameter in the caps agrees with the clock-rate parameter (AAC specific only) in the same caps? application/x-rtp,media=(string)audio,clock-rate=(int)44100,encoding-name=(string)MP4A-LATM,cpresent=(string)0,config=(string)40002420Here the 44100 for clock-rate should match a 24 in the config. 48000 should match a 23, 64000 match a 22 etc.RegardsPeterrtpmp4apay/depay could do that, yes	18.0	id=766267	16	False	True	pmaersk	1
id=756086	REOPENED	gedit	search and replace	3.16.x	Other Linux	Normal minor	Gedit maintainers	2015-10-05 16:39 UTC by	Jonas Thiem	2016-05-10 16:28 UTC (	1 user	CreatedTest file for triggering the bugCTRL+F search for "_init" takes around 2 minutes(!) in attached test file. Considering that the file isn't that large, this seems like something that should be addressed.Steps to reproduce:1. Open gedit2. Paste the test file contents into a new document3. Press CTRL+F4. Type: _initNow gedit will hang about 2 minutes before responding again.	Have you read:?Frequent Bugs -> Very long linesDid you reach the gedit bugzilla via a direct link? If yes, where? I would be interested to know, so we can maybe change the link so that it points to the wiki page instead.*** This bug has been marked as a duplicate of***I do not think we should close this as a dupe right away.The line is not that long and does not hang gedit in general and it is "find" that it is slow... We should at least try to profile it and make sure it is not something the the matching codeHi Sébastien, I filed the bug because Paolo suggested in chat this might be worth looking into as a possibly separate issue to the "regular" long lines thing. I wouldn't know myself, I'm just a user :-)The line contains 18000 characters.The syntax highlighting more or less works with the attached file, even if editing the text is slower than in Plain Text (there is around 1 second of freeze).So yes, the search and replace should also be usable.With the Find and Replace dialog, searching "_init" doesn't freeze gedit. The freeze happens because when typing "_" in the search-as-you-type box, it searches for a single character, so lots of tags are added.I wrote this branch some time ago:Having a timeout for the first characters would make this bug harder to trigger. But it's probably not sufficient.	4.0	id=756086	9	False	False	swilmet	1
id=328095	REOPENED	gtk+	Widget: GtkFileChooser	2.8.x	Other All	Normal minor		2006-01-21 22:28 UTC by		2015-02-18 00:49 UTC (	3 users	When the dlg first opens at /home/user the first (square) button in the bar is the left-arrow scroller and home is not seen. If I click it home appears without a change of directory and the button changes to the disk icon (representing / ).In fact from being a scroll tool that simply moves the pathbar, this screen item has become a directory shortcut that will invoke a change of directory two levels up.Since the mouse is over this rather small button the image change is to a large degree masked by the mouse cursor making it easy to not see the change.Now a second click will jump us to root directory , user reaction: "what happened , where am I?"It is very helpful in guiding the user, to ensure consistancy of funtionality of any screen element.It would be better if the scroll tool remained visible and got greyed out at the end of the run.If the lack of space issue on the path bar means this space must be reused then the form and colour of the button should be notably different to represent the change of funtion.In general this multiple use should be avoided.Other information:	It seems that this behaviour is an artifact of the "fake_root" bahviour. The code would normally walk back to fs root if there is sufficient space but there if a trip if we are playing fake_root .scrolling back then brings us to normal behaviour, the scrolls get hidden and get replaced , hence the confusing interface.By all means open the dlg at the users home dir (if the caller does not privide a dir), but I feel this fake_root is going against the grain and will be a constant source of anomalies. The scrollers themsleves are fine and I would like to see them permanently dispayed. This will be more realistic once I code a patch for.Yes, the "scroll to the left" arrow should not disappear. It should just get disabled when the user reaches the scrolling limit.This is easy to fix in GtkPathBar - care to write a patch?***has been marked as a duplicate of this bug. ***I'll try to find time. It would have got fixed last year when I was working on gkt+ annoyances if I'd had a positive responce to my comments. Shame it took so long.At least we're agreed it could be improved.Marking as duplicate ofas the pathbar in Nautilus already does this. I'd assume the public pathbar would be pulling in these changes from Nautilus.*** This bug has been marked as a duplicate of***Reopening and marking as blocker instead	6.0	id=568985	16	False	False	bdejean	1
id=540321	REOPENED	doxygen	general	1.5.8	Other All	Normal minor	Dimitri van Heesch	2008-06-26 13:48 UTC by		2009-01-13 15:36 UTC (	1 user	Please describe the problem:If you declare following class: #include <string> #include <vector> using std::string; using std::vector; class foo { void bar(string param); void bar(vector<int> param); };And you implement it in different way (prepending std::) #include "foo.h" void foo::bar(string param) { /* string */ } void foo::bar(std::vector<int> param) { /* vector of integers */ }When you build the documentation with BUILTIN_STL_SUPPORT=YES, you get following warning: ../foo.cpp:4: Warning: no matching class member found for void foo::bar(string param) Possible candidates: void foo::bar(string param) void foo::bar(vector< int > param)Steps to reproduce:1. Copy and paste above code in two different files in the same directory.2. Generate a default doxyfile using doxygen and set BUILTIN_STL_SUPPORT, EXTRACT_ALL and SOURCE_BROWSER to YES in the generated file.3. Build the documentation ($ doxygen Doxyfile).Actual results:You get the warning mentioned above and the documentation is not built correctly.Expected results:No warning should be raised and the documentation should be built correctly.Does this happen every time?YesOther information:	Problem was that the "using std::string;" in the header file was not picked up in the source file. Should be fixed in the next subversion update.This bug was previously marked ASSIGNED, which means it should be fixed indoxygen version 1.5.8. Please verify if this is indeed the case and reopen thebug if you think it is not fixed (include any additional information that youthink can be relevant).The problem is solved for the specific test case above but if you consider following code:- declaration #include <string> #include <vector> using std::vector; class foo { void bar(std::string param); void bar(vector<int> param); };- implementation #include "foo.h" void foo::bar(string param) { /* string */ } void foo::bar(std::vector<int> param) { /* vector of integers */ }You get the following error message:.../foo.cpp:2: Warning: no matching class member found for void foo::bar(string param)Possible candidates: void foo::bar(std::string param) void foo::bar(vector< int > param)	3.0	id=540321	8	False	False	dimitri	1
id=568985	REOPENED	system-monitor	resources	git master	Other All	Normal minor	System-monitor maintainers	2009-01-24 14:16 UTC by	Christophe Dehais	2013-08-02 10:49 UTC (	3 users	Please describe the problem:Currently the load graphs are rendered smoothly with the naive assumption that the slope of the curve at each point is zero. I propose to compute an approximation of the real slope using two surrounding points, making the curve smoother and the interpolation more precise.Steps to reproduce:Actual results:Expected results:Does this happen every time?Other information:	CreatedPatch implementing the above propositionIt surely adds some computation, but I think the enhancement is worth it.CreatedLoad graphs - before and afterScreenshots showing what is changed. The improvement is pretty obvious against the sinusoïd. Some of the artificial "steps" present in the current rendering are also soften.Don't you think this should go in cairo instead ? There's nothing specific about gsm in your nice patch.I'm not circumventing cairo here, I'm just using the cairo curve drawing code differently (basically two values passed to cairo_curve_to() are computed differently). So no I don't think it should go into cairo. It's your call if it doesn't go into gsm.[Adding missing "QA Contact" entry so system monitor bug report changes can still be watched via the "Users to watch" list onwhen the assignee is changed to an individual.]Review of:I would like this improvement (3 years later), but after applying the patch and fixing the problems (g-> renamed to graph->) the graphs don't look smoother for me, but have some rough edges. I will experiment on how to fix it, but if you can do it, I would take an updated patch.***has been marked as a duplicate of this bug. ***@Christophe Dehais: I have managed to get the patch working at a certain degree, however at the beginning there is a peak (probably the first value is not calculated correctly - best seen on memory usage). Could you please take a look at that and provide an updated patch?Uber-graph will help us have smoother graphs, thus I am marking this as a duplicate of the uber-graph ticket.*** This bug has been marked as a duplicate of***I just want to point out that there's two sorts of "smooth": 1/ the temporal smoothness (as in how much fps we we get), which is what the uber-graph and other bugs are addressing and 2/ The spatial smoothness, which is what this bug is about, by trying to remove the artificial staircase in the graph. The sysmon demo in uber-graph does not seem to avoid them.Unfortunately I lack the time to look into the patch wrt current state of GSM.Thanks for the clarification. In this case I am reopening, but marking as blocked on the uber-graph bug, as it wouldn't make much sense implementing this in the current loadgraphs if they are going to be replaced by ubergraph (hopefully will happen soon)	11.0	id=743073	7	False	False	egmont	1
id=743073	REOPENED	vte	general	0.39.x	Other Linux	Normal minor	VTE Maintainers	2015-01-17 10:19 UTC by	Egmont Koblinger	2016-09-04 13:21 UTC (	0 users	Sibling of:For bash, vte.sh sets PROMPT_COMMAND to change the terminal's idea of the current directory (osc7) and update the window title.For zsh, vte.sh sets precmd_functions to change the terminal's idea of the current directory (osc7) but does not update the window title.I see no reason whatsoever for such different behavior.I personally hate that vte tries to set the title (see also), but bash being the default choice I think it's a safer bet (smaller impact of a chnage) to adjust zsh for now.	Fixed.I don't agree with this. vte.sh only sets the title in bash because that was the only way I could get it to work with the existing distro's bashrc scripts. In zsh, we can just *add* our osc7 function to the prompt commands, and leave the title to the distro to set however they wish.It's the inconsistency that bothers me the most - why do we offer a different experience by default to users of those two shells?Actually this would be my preferred behavior. I don't think a terminal emulator should decide what the user should see in the title by default. In my opinion, it should be a decision made (and implementated) by distributions.For zsh, vte does half the work and you let distros do the other half if they wish to. You argue that it's the right approach, and I totally agree. However, we could just as easily do this with bash.First, we can just append ocs7 to PROMPT_COMMAND, and let the distro append the title change if they wish to, just as they'd do for zsh. Just because it's technically uglier (append to a string with a ";" separator, rather than append to the array) it's still just as easy to do.Second, even if it wasn't possible, distros could still just as easily patch our script. For a distro it's not any harder to write/maintain a small patch than to write/maintain an additional script which cooperates with the rest.It'd be totally up for reverting this change, and changing bash too to set osc7 only! Distros can damn easily for both shells add setting title too if that's what they want.Reverted the commit.Neither of us was fully satisfied with the new version, and I wouldn't want distros to see it change twice (once after tomorrow's release, and once later again).I'd like to go for a solution where vte.sh doesn't do anything with the window title.See alsofor an explanation of the order of startup scripts in fedora, which means that we cannot not make PROMPT_COMMAND use the title sequence.I agree that PROMPT_COMMAND is the right place to set the title -- if that's what someone wants to do. I firmly disagree that it should be vte's decision whether to do this, and still if the decision is "yes", I firmly disagree that vte should implement it.If Fedora decides they'd like to see the cwd in the title, they should create another /etc/profile.d/title.sh or something like this, which appends it to PROMPT_COMMAND -- presumably not only for vte. And vte appends osc7. These two would be executed in any order, and it'd be fine.-o-o-o-Let's make one step backwards and look at the whole global picture rather than the details. (I'm talking about both this bug and its "sibling" bug now.)The reason this script exists is because osc7 replaced digging into /proc. The intent was to do only this. Title just came in becase of mainstream bash's decision that a prompt command array is an overkill instead of just appending multiple commands separated by a ';', because Fedora folks didn't like your nice idea of implementing this (I can't understand why), and because you were reluctant to go for the semicolon (I can't understand this one either).Fedora's scripts were messy. Vte.sh came and provided a hackish workaround for Fedora, that one particular distribution, not caring about others. Then it still wasn't good enough for them, and they (without any coordination with us) copied this vte-specific code to /etc/bashrc. There are multiple bugreports in various distros that our script is not good; including the most recent one from someone at Fedora.It's workaround on top of a workaround and then another workaround, each time everything getting more complicated and messier, plus lack of cooperation between the two teams. We make something for them, it's not good enough for them so they silently change it, and then it's even harder for us to change anything because ohmygod we'd break them. It's a neverending story.They have modified their scripts multiple times. They are able to, and will do if we push them. For zsh you had the approach that distros should finish our work according to their preference. For bash you insist on something that'd work out of the box, even though they could just as easily tailor their system.We don't always please Fedora out of the box. They want transparency, we don't include it. They prefer dark theme, we just made it harder for them. Vte.sh isn't fully good for them either. I don't see why vte.sh would need to fully please them, and in the mean time ignore other distros; rather than shipping something generic.It's unclear what vte.sh tries to do, it's unclear why it wants to do, the responsibility split between the two functionalities (osc7 vs title) is unclear, the responsibility split between the two teams/software (gnome vs redhat) is unclear, and each time it's getting more complicated. I hate this route. And I hate that we have one particular distro in mind, create something hackish for them, let alone that it's still not good enough for them either.The only way I can see out of this situation is to stop this madness for good, and go for the only clean solution.The only clean solution I can see is: Draw the line of responsibility. Setting osc7 is our job, setting the title is not, it's the distro's, should they want it. Ship a script that does what we want to do (that is: osc7 only), and do it in the simplest possible way that's flexible enough not to cause any problems (that is: append to PROMPT_COMMAND).This might break the title in Fedora for a few days. They will notice it, their users will notice it, we can also explicitly notify them. They will figure out how they solve it. E.g. by another script under /etc/profile.d which appends to PROMPT_COMMAND. It's their job, not ours, and it's really not that hard.Let's do that early next cycle (3.17.0) then.I don't see the point in waiting, but if that's the compromise, I'm game! :)	8.0	id=763885	6	False	False	georges.stavracas	1
id=763885	REOPENED	gnome-todo	User Interface	3.18.x	Other Linux	Normal minor	GNOME To Do maintainer(s)	2016-03-18 17:12 UTC by	Mohammed Sadiq	2017-02-09 13:41 UTC (	2 users	CreatedDon't extent copyright to past yearsLet the Application don't show copyright years extending to the past in the About Dialog. Say for example, don't show 2015-2010. Show just 2015 instead.This bug may be present in several GNOME Applications.	Why not show it?If its shown as 2012-2015. It's OK. But If it's shown 2015-2012, the user might thing that the software is not well designed (A bad image on GNOME?).Well, As the user know its already past 2015, the software creation year (Hopefully, no time machines yet), I don't see a reason to show the past years.	2.0	id=514041	30	False	False	mbarnes	1
id=514041	REOPENED	evolution	Contacts	3.4.x (obsolete)	Other All	Normal minor		2008-02-03 09:37 UTC by	Martin Picek	2013-08-24 13:32 UTC (	8 users	(This is an insignificant bug...)In the Contacts, define a new view, based on Card View, and allow field Categories. Then look at a person who has associated two or more categories: between the categories ins't a space. For example: "Friends,Work,Family" (not "Friends, Work, Family").In think that the space is behind the char "," in all typographical rules in the world because it's better to reading.Other information:	CreatedEDS PatchWhile returning category list it returns coma and space separated list.Comment onEDS Patchdiff --git a/addressbook/libebook/e-contact.c b/addressbook/libebook/e-contact.cindex 974c4c1..e5edfed 100644--- a/addressbook/libebook/e-contact.c+++ b/addressbook/libebook/e-contact.c@@ -1528,14 +1528,14 @@ e_contact_get (EContact *contact, EContactField field_id) g_string_append (str, (gchar *)v->data); v = v->next; if (v)- g_string_append_c (str, ',');+ g_string_append (str, ", ");+ } rv = g_string_free (str, FALSE); } return rv;- break;- }+ } default: g_warning ("unhandled synthetic field 0x%02x", info->field_id); break;CreatedEDS PatchWhile returning category list it returns coma and space separated list, break is not needed so i removed it.Thanks for a patch. It seems to work as requested, but I've a feeling that it's not a good thing to do it this way, because the RFC 2426 [1] says the CATEGORIES is a list of values separated by comma, not by comma and space. I know you changed only the e_contact_get function, and that the e_contact_set function expects leading spaces and removes them, but I'm wondering whether some other libraries/applications using EContact wouldn't be in trouble with this change, when expecting its value as defined by the RFC (I mean some synchronization applications, for example, if any is using EContact and not EVCard). Please also note of.If at all, then the change should be done on evolution side, in the UI part, not so deep in the library. The change might be done for a minicard view, the list view, and also the list view for calendar/tasks/memos, to have this consistent. From my point of view the editing dialogs can be without spaces, it doesn't matter much there, because you'll click the "Categories:" button anyway.So if you can, please try to do the other approach. It'll be pretty similar like here, only on more places in evolution code base. Thanks.[1]What the UI should accept and what the RFC dictates are completely separate things. Users should not need to know about RFC syntax. Instead we should read the user-input and reformat it to comply with the RFC.(In reply to)Of course. And 'we', aka Evolution, does that. Does that also any other library/application using e_contact_get with categories? If so, or if we do not "care", then yes, the patch can be used. I only didn't want to "break" behaviour of the function for categories if anyone is expecting it to return value in a particular format. Maybe a nonsense on my side, feel free to approve the patch, Matt.I'll commit your change to master. No need to be paranoic as that much as I am.Created commitin eds master (2.31.1+)While porting evolution-kolab from 2.30 to 3.3.2 (on the way to 3.4), I just got bitten by this, so I'm re-opening.The Kolab format specification mandates that a field which has not changed must be written back onto the server _verbatim_, this is, _unchanged_. This is for client interop and to not mess with sync states Kolab clients may implement in their very own way.This change introduces a problem for me: When writing a non-NULL categories field back onto the server, which has not been changed in Evo, I cannot tell whether the field came from the server in RFC-compliant format or whether some client applied some differing formatting before, which I must preserve, unless I really *change* the contents of the field ('I' means 'a Kolab client' here).IMHO, EContact should retain the strings verbatim, not applying any changes to them just for beautification. Just how the list is *displayed* is a completely different matter and should be left to some frontend like Evolution.The only way for me to not be a broken Kolab client in this regard would be to introduce a hidden field, into which I would need to save the original string. Before converting the EContact back into Kolab XML, I would need to strip the blanks after the commas in both strings, compare them, and if they do not differ, write the previously saved and hidden verbatim copy back into the Kolab XML, just to retain its original formatting. That's cumbersome.The simpler way would be to just not touch the string in EContact unless it is really edited (this is, changed).I suggest adding an ECategoryEntry widget to libedataserverui for parsing user-input and formatting the category list for display. Keep the API generic (e.g. string arrays) so we can reuse it for contacts and calendar components.Similar in concept to ENameSelectorEntry for entering email addresses in the composer.I reverted the change in sources till the Matthew's proposal will not reach code base.Created commitin eds master (3.3.3+)Created commitin eds gnome-3-2 (3.2.3+)Thanks Milan and Matt. Your initial gut feelings about that change were correct.I'm very sure that separating displaying and storing of data and have EContact and friends not touch the data in their getter/setter functions is the right route to take. It is not really different from, say, Email rendering vs. Email storing (aside from the fact that mail data is not really *edited*). The Camel(Mime)Message handles *storage* format, not *display* format.My guess is that also SyncEvolution and the like will benefit from E<PIM-Type> implementations with a neutral behaviour.(In reply to)As noted in: it would be good to order the categories displayed by ECategoryEntry alphabetically. This will allow users to scan them for a given category slightly faster.	13.0	id=336682	14	False	False	guenther	1
id=336682	REOPENED	evolution	Calendar	3.2.x (obsolete)	Other Linux	Normal minor		2006-03-31 01:34 UTC by	André Klapper	2012-01-26 22:32 UTC (	3 users	cool. just found out that we actually added the shortcuts to the calendar to make the views accessible as discussed for the keyboard shortcuts review.great. but how can a user find out? it's nowhere described in the UI, and it is not mentioned in evolution/help/C/evolution.xml.so it's control+j work week view control+k weeK view control+l List view control+m Month view control+y daY viewnote: this bug is both about the UI and the user docs.don't know if it's easy to get it into a menu item though, because they are in the view folder in cvs and not in the ui folder in cvs.adding srini to cc as i would like to see a comment on this, especially if it's hard or easy to get this into the UI. thanks in advance.	Confirming.Guess, should be possible to add to menu in UI.Moving to Calendar.fixed in the 2.8 xml user guidesomeone get me a coffee, this isn't about the docs but about the UI. reopening.Maybe in the calendar, View > Current View > $Itemcould be replaced View > Current View > $Item (Ctrl+$X)?Note to myself: In the new user docs this is in calendar-layout-views.page.	6.0	id=88649	17	False	False	luis	1
id=88649	REOPENED	nautilus	Desktop	unspecified	Other All	Normal enhancement	Nautilus Maintainers	2002-07-19 20:50 UTC by	Brad Johnson	2009-08-18 04:42 UTC (	9 users	There is currently no way to change the default placement of desktop iconsin Nautilus. In GMC, you could choose which corner of the screen iconswould be put, and which direction they would "grow" when you added more.	Probably a dup but I can't find one offhand.its not a dupe of an existing bug, but similar to a few at least. My personal opinion is that we should do some usability tests to determine what the correct desktop layout is and just go with it and not make in configurable (the current way which pretty much follows windows is kind of eccchyy imho) one proposal i have seen is that the trash should be in bottom right corner, mount points in the upper right corner, and user files in the upper left corner, of course it would be nice to have all the arrange options available and snap to grid so that the user can move stuff where ever they may choose.***has been marked as a duplicate of this bug. ***Some of those bugs that this one is very close to are bugs 41671 and45953 (also note the possible suggestion in the latter of those bugsof using a negative location to mean relative to right or bottomborders--this is particularly to take care of changing screenresolutions, but may be related here too?)is that still an issue with the current versions ?not the right bug, this one is still an issue with 2.9***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***The default should IMHO be: all icons on the left, tabular layout in this order:- home link, computer link, folders/filesTrashcan:- lower-right cornerVolumes/drives:- right borderThe volumes/drives will get tricky if there are too many icons to fit into onecolumn. We would have to precalculate the amount of space required for allright-aligned icons and layout afterwards, or we would have to use a layout like:E AF B C D TThis wouldn't be hard to implement. Would such an order be acceptable, usabilityteam?Sorry, volumes shouldn't go on the right border but just remember their lastposition. This is covered by.But they still need a initial positioning scheme?Could you please clarify what you are referring to?Sorry; you said inthat you would like Volumes/drives to bepositioned by default at the right side of the screen. Then inyousaid that they should just "remember their last position."I'm sure there's something I have missed here, but what I meant to say inwas that when they are first mounted, they will need an initialpositioning scheme. They can't remember a position they've never had.We'll just find a free icon position and take it. We start looking at (0,0) -that is, the upper left corner.Since most users probably keep their windows on the right, icons should appear on the right. Otherwise, windows will usually cover icons.Dragging icons to the right isn't enough: Clean up by name moves everything to the left, and CDs and other newly-mounted disks appear on the left, under my (and possibly others') windows.Even if it doesn't become default (which I think it should), at least put an option in gconf."Since most users probably keep their windows on the right, icons should appearon the right. Otherwise, windows will usually cover icons."Slightly surprising assertion there... do you have any evidence that most users "probably keep their windows on the right"? And if they did, wouldn't that mean that you'd want to keep the icons on the left?(In reply to)It was a typo. I meant that since most users probably keep their windows on the left, icons should appear on the right. Otherwise, windows will usually cover icons.As for evidence, all I have is what I've observed. It seems to me that both Windows and Mac users put their windows on the left, even though Windows users are covering their icons by doing so. I haven't observed many Gnome users, but I assume they'd follow suit. I know that I, personally, prefer my icons on the right, which doesn't count for much, and that I'd love to have new icons (especially removable drives) default to the right.I agree, I'm constantly trying to fish out files from under my terminal and other windows on the left (on Windows too). The icons should appear on the right and grow down like on the original Mac os. But I understand other people may not agree, so at the very least a gconf setting I could set to my preference would be a very nice time-saver. :)I tried reporting this on launchpad bugs, but it was shot down due to the fact that the respondent did not think it was a high priority. I have never reported a bug directly to gnome bugzilla before, but i hope this get's fixed. It is of high importance to me, since everytime the icons get messed up, i have to do a fresh install. There should at least be a minimum "reset to default" option.-keen101-Andrew: Tuomas Kuosmanen 2002-05-31 17:13:22 UTCJust thinking we could do something simple about this, so here is asuggestion:* Put all mounts to top right corner of the desktop.* Put trash on bottom right (of course remember position if one moves it)* Default launchers and other stuff to topleft corner of the screenThis way, it would be at least a bit more clean organization. I dontthink we need any preferences for this, though I can hear some freakedout screaming about how someone wants to control where stuff goes :-)But something like this as the default behaviour would definitelyclear things up and make things more simple. The "oh, where is thedevice I mounted..? doh, under the Home icon!" -stuff is just confusing.I don't understand. The devices I mount (by plugging them in and/or turning them on) show up on the desktop. Moving icons from left to right wouldn't change that. Also, it seems it keeping with other interface options that there be a gconf key to change it if you don't like it.	21.0	id=416072	16	False	False	florian	1
id=416072	REOPENED	dia	install	0.96.1	Other All	Normal enhancement	Dia maintainers	2007-03-08 14:17 UTC by	Florian Boucault	2011-12-29 13:14 UTC (	4 users	This schema file registers dia as a thumbnailer in GNOME for files with mime type application/x-dia-diagram.	CreatedGconf schema to register dia as a thumbnailer in GNOMECreatedNew and better version of the schema.The thumbs are not forced to be squares anymore.Thank you for your contribution. Having not dealt with GConf schemas before, I'd like to know where they go and what is the preferred way to incorporate them in an autoconf setup.I am really sorry but I do not have this piece of information.For including this into the autotools build environment, I would suggest looking at some example packages: E.g., evince. You basically need to haveAM_GCONF_SOURCE_2in autoconf.ac, and in the Makefile.am where handling the .schemas file, you take care of including the file to the tarball and have a gconftool call for registration like this:GCONF_CONFIG_SOURCE=$(GCONF_SCHEMA_CONFIG_SOURCE) $(GCONFTOOL) --makefile-install-rule $(schemafile)Further, looking at the latest attachment, I would use "dia" instead of "totem" as <owner/>. (Copy'n'paste problem, I guess).Just a bit of triage. Since the reporter can't provide the help that Lars would like, it seems appropriate to clear NEEDINFO and set HELPWANTED. The bug is still present in Dia 0.96.1.Roland, would your suggestions work when Gnome is a configure-time option?Haven't tried, but I strongly assume that AM_GCONF_SOURCE_2 would just result in disabling the respective features. Finally, this is what autoconf macros are designed for.I looked at totem and evince, and neither has the file you mention. Can you point me to a good example or, better yet, to actual documentation? Googling around didn't help me much.Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!It's still a valid bug... Dia is still not a thumbnailer. The information that's missing isn't about how to reproduce the problem (which is when NEEDINFO is appropriate), it's about how to fix it in the technical sense (which is when HELPWANTED is appropriate). Reopening.The scheme is no patch and I'm as unknowing as Lars on this issue. So either someone provides a patch (maybe ripped out from Ubuntu?) or this needs to stay open.Hi,I'm attaching the patch that I just added to the Debian package: The new GNOME 3.x moved from gconf to gsettings and therefore moved from gconf schema to thumbnailer files.See patch.Thanks,bye, RolandCreatedAdd thumbnailer fileThis patch adds the respective thumbnailer file	14.0	id=109046	2	False	False	daniel	1
id=109046	REOPENED	libxml2	general	2.5.2	Other All	Normal enhancement	Daniel Veillard	2003-03-23 23:08 UTC by	Steinar Bang	2004-12-22 21:47 UTC (	0 users	It would be nice if <nextCatalog> entries in XML Catalog files couldpoint to TR9401 catalogs.Issue 23 inindicates that support for this is allowed, and the example ofpointing to the DocBook XML 4.1.2 docbook.cat file, in Bob Stayton'schapter on XML Catalogs, in his DocBook XSL documentindicates that the Sun Resolver has support for doing this.	Bleech, that unclean. How is that defined ? How/what is the baseused, how does this integrate with the algorithms of section 7 ?Nothing is defined about how this should be actually processed.DanielDaniel,Appendix E of the XML Catalogs specdescribes how TR9401 entries are to be handledby showing the equivalent XML Catalog syntax.	2.0	id=612407	20	False	True	alexk	1
id=612407	REOPENED	banshee	Community Extensions	git master	Other Linux	Normal enhancement	Banshee Maintainers	2010-03-10 10:48 UTC by	David Nielsen	2010-04-07 02:34 UTC (	7 users	Using Ubuntu Lucid and the banshee-daily ppa on x86_64 I get the following crash on start up** Running Mono with --debug **[Info 11:44:50.550] Running Banshee 1.5.5: [Ubuntu lucid (development branch) 033fcc4 (linux-gnu, x86_64) @ 2010-03-10 03:38:59 UTC]Gtk-Message: Failed to load module "pk-gtk-module": libpk-gtk-module.so: cannot open shared object file: No such file or directory[Debug 11:44:58.226] Configuration client extension loaded (Banshee.GnomeBackend.GConfConfigurationClient)[Debug 11:44:58.282] Using default gconf-base-key[Debug 11:44:58.632] Bus.Session.RequestName ('org.bansheeproject.Banshee') replied with PrimaryOwner[Debug 11:44:58.671] Core service started (DBusServiceManager, 0,006116s)[Debug 11:44:58.686] Registering remote object /org/bansheeproject/Banshee/DBusCommandService (Banshee.ServiceStack.DBusCommandService) on org.bansheeproject.Banshee[Debug 11:44:58.754] Core service started (DBusCommandService, 0,080714s)[Debug 11:44:59.518] Opened SQLite connection to /home/david/.config/banshee-1/banshee.db[Debug 11:44:59.520] Core service started (DbConnection, 0,765338s)[Debug 11:44:59.536] Database version 41 is up to date[Info 11:44:59.609] Starting collection of anonymous usage data[Debug 11:44:59.800] Core service started (PreferenceService, 0,108738s)[Debug 11:44:59.803] Registering remote object /org/bansheeproject/Banshee/SourceManager (Banshee.Sources.SourceManager) on org.bansheeproject.Banshee[Debug 11:44:59.803] Core service started (SourceManager, 0,003302s)[Debug 11:44:59.807] Core service started (MediaProfileManager, 0,002974s)[Debug 11:44:59.820] Registering remote object /org/bansheeproject/Banshee/PlayerEngine (Banshee.MediaEngine.PlayerEngineService) on org.bansheeproject.Banshee[Debug 11:44:59.826] Core service started (PlayerEngine, 0,018886s)[Debug 11:44:59.948] IO provider extension loaded (Banshee.IO.Unix.Provider)[Debug 11:45:00.002] Core service started (TranscoderService, 0,077772s)[Debug 11:45:00.018] Registering remote object /org/bansheeproject/Banshee/PlaybackController (Banshee.PlaybackController.PlaybackControllerService) on org.bansheeproject.Banshee[Debug 11:45:00.024] Core service started (PlaybackController, 0,018782s)[Debug 11:45:00.026] Core service started (ImportSourceManager, 0,002074s)[Debug 11:45:00.056] Core service started (LibraryImportManager, 0,029s)[Debug 11:45:00.062] Core service started (JobScheduler, 0,004695s)[Debug 11:45:00.134] Core service started (HardwareManager, 0,071532s)[Debug 11:45:00.149] Bus.Session.RequestName ('org.bansheeproject.CollectionIndexer') replied with PrimaryOwner[Debug 11:45:00.175] Registering remote object /org/bansheeproject/Banshee/CollectionIndexerService (Banshee.Collection.Indexer.CollectionIndexerService) on org.bansheeproject.CollectionIndexer[Debug 11:45:00.180] Core service started (CollectionIndexerService, 0,045716s)[Debug 11:45:00.195] Core service started (SaveMetadataService, 0,015319s)[Debug 11:45:00.304] Adding icon theme search path: /usr/share/banshee-1/icons[Debug 11:45:00.308] Core service started (GtkElementsService, 0,112981s)[Debug 11:45:00.317] Core service started (InterfaceActionService, 0,008685s)[Debug 11:45:00.739] Album artwork path set to /home/david/.cache/media-art[Debug 11:45:00.820] Core service started (ArtworkManager, 0,083825s)** (Banshee:19786): CRITICAL **: bp_set_volume: assertion `GST_IS_ELEMENT (player->playbin)' failed[Debug 11:45:02.272] Adding context page lastfm-recommendations[Debug 11:45:02.424] Adding context page wikipedia[Debug 11:45:03.814] Constructed Nereid interface: 2,838547s[Debug 11:45:04.512] Registering remote object /org/bansheeproject/Banshee/ClientWindow (Nereid.PlayerInterface) on org.bansheeproject.Banshee[Debug 11:45:04.513] Core service started (NereidPlayerInterface, 3,692216s)[Debug 11:45:04.750] Extension service started (GStreamerCoreService, 0,228132s)[Debug 11:45:04.790] Extension service started (BpmService, 0,039835s)[Debug 11:45:04.812] Using GNOME 2.22 API for Multimedia Keys[Debug 11:45:04.813] Extension service started (MultimediaKeysService, 0,022436s)[Debug 11:45:04.822] Extension service started (LibraryWatcherService, 0,008984s)[Debug 11:45:05.848] Extension service started (PodcastService, 1,025256s)[Debug 11:45:05.851] Extension service started (DapService, 0,002699s)[Debug 11:45:05.884] Extension service started (GnomeService, 0,03284s)[Debug 11:45:05.887] Refreshing any podcasts that haven't been updated in over an hour[Debug 11:45:07.590] Core service started (Network, 0,033289s)[Debug 11:45:07.592] Audioscrobbler state: connected[Debug 11:45:07.603] Extension service started (AudioscrobblerService, 1,719004s)[Debug 11:45:07.737] Extension service started (NotificationAreaService, 0,133691s)[Debug 11:45:07.754] Extension service started (EmusicService, 0,016412s)[Debug 11:45:07.848] Extension service started (BookmarksService, 0,094218s)[Debug 11:45:07.863] Extension service started (CoverArtService, 0,014745s)[Debug 11:45:08.214] Extension service started (AudioCdService, 0,349918s)Mirage - Open DB - URI=file:/home/david/.cache/banshee-mirage/mirage.db,version=3Mirage - Database version 3 is up to date[Debug 11:45:08.467] Mirage - Database Initialize (dbfile: /home/david/.cache/banshee-mirage/mirage.db)** (Banshee:19786): WARNING **: Missing method Banshee.PlaybackController.IBasicPlaybackController::Next(bool) in assembly /usr/lib/banshee-1/Banshee.Services.dll, referenced in assembly /usr/lib/banshee-1/Extensions/Banshee.Mirage.dll[Debug 11:45:08.493] Mirage - Initialized[Debug 11:45:08.493] Extension service started (MirageService, 0,279623s)[Info 11:45:08.498] All services are started 9,861056s** (Banshee:19786): WARNING **: Missing method Banshee.PlaybackController.IBasicPlaybackController::Next(bool) in assembly /usr/lib/banshee-1/Banshee.Services.dll, referenced in assembly /usr/lib/banshee-1/Extensions/Banshee.Mirage.dllStacktrace: at Banshee.Playlist.AbstractPlaylistSource..ctor (string,string,Banshee.Sources.PrimarySource) <0xffffffff> at Banshee.Playlist.AbstractPlaylistSource..ctor (string,string,Banshee.Sources.PrimarySource) <0x000d6> at Banshee.Playlist.PlaylistSource..ctor (string,Banshee.Sources.PrimarySource) <0x00033> at Banshee.Mirage.PlaylistGeneratorSource..ctor (Mirage.Db) [0x00000] in /build/buildd/banshee-extension-mirage-0.6.0/Banshee/MirageConfiguration.cs:1 at Banshee.Mirage.MiragePlugin.ServiceStartup () [0x00068] in /build/buildd/banshee-extension-mirage-0.6.0/Banshee/MiragePlugin.cs:142 at Banshee.Mirage.MiragePlugin.OnSourceAdded (Banshee.Sources.SourceAddedArgs) [0x00000] in /build/buildd/banshee-extension-mirage-0.6.0/Banshee/MiragePlugin.cs:126 at (wrapper delegate-invoke) Banshee.Sources.SourceAddedHandler.invoke_void__this___SourceAddedArgs (Banshee.Sources.SourceAddedArgs) <0xffffffff> at Banshee.Sources.SourceManager.AddSource (Banshee.Sources.Source,bool) <0x00180> at Banshee.ServiceStack.Application.Run () <0x000f7> at Banshee.Gui.GtkBaseClient.Initialize (bool) <0x00247> at Banshee.Gui.GtkBaseClient..ctor (bool,string) <0x00033> at Banshee.Gui.GtkBaseClient..ctor () <0x0001b> at Nereid.Client..ctor () <0x0000f> at (wrapper runtime-invoke) object.runtime_invoke_void__this__ (object,intptr,intptr,intptr) <0xffffffff> at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke (object,object[],System.Exception&) <0x0004e> at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke (object,object[],System.Exception&) <0xffffffff> at System.Reflection.MonoCMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x0010b> at System.Reflection.MonoCMethod.Invoke (System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x0003d> at System.Reflection.ConstructorInfo.Invoke (object[]) <0x0003f> at System.Activator.CreateInstance (System.Type,bool) <0x00103> at System.Activator.CreateInstance (System.Type) <0x0000f> at Banshee.Gui.GtkBaseClient.Startup () <0x0001b> at Hyena.Gui.CleanRoomStartup.Startup (Hyena.Gui.CleanRoomStartup/StartupInvocationHandler) <0x0008e> at Banshee.Gui.GtkBaseClient.Startup<Nereid.Client> () <0x0005b> at Banshee.Gui.GtkBaseClient.Startup<Nereid.Client> (string[]) <0x000d3> at Nereid.Client.Main (string[]) <0x00017> at (wrapper runtime-invoke) Nereid.Client.runtime_invoke_void_object (object,intptr,intptr,intptr) <0xffffffff> at (wrapper managed-to-native) System.AppDomain.ExecuteAssembly (System.Reflection.Assembly,string[]) <0x0004b> at (wrapper managed-to-native) System.AppDomain.ExecuteAssembly (System.Reflection.Assembly,string[]) <0xffffffff> at System.AppDomain.ExecuteAssemblyInternal (System.Reflection.Assembly,string[]) <0x00037> at System.AppDomain.ExecuteAssembly (string,System.Security.Policy.Evidence,string[]) <0x00037> at (wrapper remoting-invoke-with-check) System.AppDomain.ExecuteAssembly (string,System.Security.Policy.Evidence,string[]) <0xffffffff> at System.AppDomain.ExecuteAssembly (string) <0x0001f> at (wrapper remoting-invoke-with-check) System.AppDomain.ExecuteAssembly (string) <0xffffffff> at Booter.Booter.BootClient (string) <0x0006b> at Booter.Booter.Main () <0x001a7> at (wrapper runtime-invoke) object.runtime_invoke_void (object,intptr,intptr,intptr) <0xffffffff>Native stacktrace: banshee-1() [0x47b45f] banshee-1() [0x4aeb5f] /lib/libpthread.so.0() [0x3af840f920] banshee-1() [0x483576] [0x412a6168]Debug info from gdb:	Looks like you are using the obsolete mirage package. Uninstall it and install banshee-extension-mirage fromIf using the stable ppa as well as daily on Lucid then the stable ppa needs to be built for Lucid. This however is a downstream issue, but since I can't move this to Ubuntu as Launchpad doesn't allow for apport reporting using ppas nor bugs being filed against ppas last I checked.So I am cc'ing hyperair for comment and lowering severity to enhancement as it is likely a downstream issue.My apologize for wasting your valuable time.confiming that removing mirage works around the issue.Looks to me like some interface changed in the latest Banshee snapshots and this broke Mirage's compatibility as it was built for Banshee 1.5.4.(In reply to)It was changed indeed but before 1.5.4. This log entry hints that non-bce Mirage is used:[Debug 11:45:08.467] Mirage - Database Initialize (dbfile:/home/david/.cache/banshee-mirage/mirage.db)bce version of Mirage uses the same database as Banshee (since 1.5.4)In that case, then an update of the mirage plugin should do the job. The stable PPA contains bce packages which generate banshee-extension-mirage binaries.Closing as NOTGNOME since it's an Ubuntu packaging issue.Re-opening; we should at least not crash.***has been marked as a duplicate of this bug. ***Looks like not crashing would involve putting a try/catch around SourceManager.AddSource where it raises the SourceAdded event.Hrm, that's probably not a great solution, even if it might generally suffice. If we catch exceptions there, it would mean we'd have invoked some of the non-crashing handlers of the event, but not necessarily all of them, which would be strange.Here's a StackOverflow thread on the topic:I changed the SourceAdded handler invocation as recommended in that SO thread. It's implemented as an extension method in Hyena to ease its reuse.commitAuthor: Alexander Kojevnikov <>Date: Thu Mar 25 13:56:10 2010 +1100 [SourceManager] Handle exceptions in SourceAdded (bgo#612407)***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***This needs to be reopened. There's a new stack trace reported at:[Info 00:15:09.016] Running Banshee 1.6.0: [Ubuntu lucid (development branch) (linux-gnu, x86_64) @ 2010-04-04 14:20:11 UTC]Mirage - Open DB - URI=file:/home/jesus/.cache/banshee-mirage/mirage.db,version=3Mirage - Database version 3 is up to date** (Banshee:8710): WARNING **: Missing method Banshee.PlaybackController.IBasicPlaybackController::Next(bool) in assembly /usr/lib/banshee-1/Banshee.Services.dll, referenced in assembly /usr/lib/banshee-1/Extensions/Banshee.Mirage.dll[Info 00:15:10.559] All services are started 1,302467s** (Banshee:8710): WARNING **: Missing method Banshee.PlaybackController.IBasicPlaybackController::Next(bool) in assembly /usr/lib/banshee-1/Banshee.Services.dll, referenced in assembly /usr/lib/banshee-1/Extensions/Banshee.Mirage.dllStacktrace: at Banshee.Sources.Source..ctor () <0xffffffff> at Banshee.Sources.Source..ctor () <0x00072> at Banshee.Sources.DatabaseSource..ctor () <0x0000f> at Banshee.Playlist.AbstractPlaylistSource..ctor (string,string,Banshee.Sources.PrimarySource) <0x000c3> at Banshee.Playlist.PlaylistSource..ctor (string,Banshee.Sources.PrimarySource) <0x00033> at Banshee.Mirage.PlaylistGeneratorSource..ctor (Mirage.Db) <0x000df> at Banshee.Mirage.MiragePlugin.ServiceStartup () <0x00147> at Banshee.Mirage.MiragePlugin.OnSourceAdded (Banshee.Sources.SourceAddedArgs) <0x0000f> at (wrapper runtime-invoke) Banshee.Mirage.MiragePlugin.runtime_invoke_void__this___object (object,intptr,intptr,intptr) <0xffffffff> at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke (object,object[],System.Exception&) <0x0004e> at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke (object,object[],System.Exception&) <0xffffffff> at System.Reflection.MonoMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x000bb> at System.Reflection.MethodBase.Invoke (object,object[]) <0x0002a> at System.Delegate.DynamicInvokeImpl (object[]) <0x0017b> at System.MulticastDelegate.DynamicInvokeImpl (object[]) <0x0003b> at System.Delegate.DynamicInvoke (object[]) <0x00015> at Hyena.EventExtensions.SafeInvoke<object> (object,object[]) <0x000cb> at Banshee.Sources.SourceManager.AddSource (Banshee.Sources.Source,bool) <0x00197> at Banshee.Sources.SourceManager.AddSource (Banshee.Sources.Source,bool) <0x003e3> at Banshee.ServiceStack.Application.Run () <0x000af> at Banshee.Gui.GtkBaseClient.Initialize (bool) <0x0026f> at Banshee.Gui.GtkBaseClient..ctor (bool,string) <0x00033> at Banshee.Gui.GtkBaseClient..ctor () <0x0001b> at Nereid.Client..ctor () <0x0000f> at (wrapper runtime-invoke) object.runtime_invoke_void__this__ (object,intptr,intptr,intptr) <0xffffffff> at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke (object,object[],System.Exception&) <0x0004e> at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke (object,object[],System.Exception&) <0xffffffff> at System.Reflection.MonoCMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x0010b> at System.Reflection.MonoCMethod.Invoke (System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x0003d> at System.Reflection.ConstructorInfo.Invoke (object[]) <0x0003f> at System.Activator.CreateInstance (System.Type,bool) <0x00103> at System.Activator.CreateInstance (System.Type) <0x0000f> at Banshee.Gui.GtkBaseClient.Startup () <0x0001b> at Hyena.Gui.CleanRoomStartup.Startup (Hyena.Gui.CleanRoomStartup/StartupInvocationHandler) <0x0008e> at Banshee.Gui.GtkBaseClient.Startup<Nereid.Client> () <0x0005b> at Banshee.Gui.GtkBaseClient.Startup<Nereid.Client> (string[]) <0x000d3> at Nereid.Client.Main (string[]) <0x00017> at (wrapper runtime-invoke) Nereid.Client.runtime_invoke_void_object (object,intptr,intptr,intptr) <0xffffffff> at (wrapper managed-to-native) System.AppDomain.ExecuteAssembly (System.Reflection.Assembly,string[]) <0x0004b> at (wrapper managed-to-native) System.AppDomain.ExecuteAssembly (System.Reflection.Assembly,string[]) <0xffffffff> at System.AppDomain.ExecuteAssemblyInternal (System.Reflection.Assembly,string[]) <0x00037> at System.AppDomain.ExecuteAssembly (string,System.Security.Policy.Evidence,string[]) <0x00037> at (wrapper remoting-invoke-with-check) System.AppDomain.ExecuteAssembly (string,System.Security.Policy.Evidence,string[]) <0xffffffff> at System.AppDomain.ExecuteAssembly (string) <0x0001f> at (wrapper remoting-invoke-with-check) System.AppDomain.ExecuteAssembly (string) <0xffffffff> at Booter.Booter.BootClient (string) <0x0006b> at Booter.Booter.Main () <0x001a7> at (wrapper runtime-invoke) object.runtime_invoke_void (object,intptr,intptr,intptr) <0xffffffff>I can reproduce the SIGSEGV by downgrading Mirage to 0.6, compiling it against Banshee 1.5.4 and running with git master.However, it looks like the issue lies in Mono. We are catching the exception in Hyena.EventExtensions.SafeInvoke which is present in the stack trace.Let me know if you think there is anything that can be done in Banshee to avoid such errors.	17.0	id=120854	16	False	False	chris.shoemaker	1
id=120854	REOPENED	GnuCash	Register	unspecified	Other All	Normal enhancement	David Hampton	2003-08-27 17:38 UTC by	Joachim Breitner	2013-05-17 20:06 UTC (	4 users	<nomeata> benoitg: what I would like to see it that you at least can enterthe current value and it calculates the right amount for this transactions(for the beer case).<benoitg> nomeata: Good point...where the beer case is:<g~benoitg> nsilva: It happens all the time. For example I don't sum thecost of every bear I drink in a bar. I just count how much money is left,and write an adjestement trnasaction.	I have no idea what this means. Are we talking about exchange-rates here or what?Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information Chris asked for.Thanks!Sorry, I must have missed the request for additional information somehow:In the regular account view, when entering a new transaction, I have enter the amount either in the “increase” or the “decrease” column. What I’d like to see is that I can also enter the current balance in the “balance” column, and the correct increase or decrease is calculated by gnucash.The use case is, as benoitg describes, this: I know that my gnucash account for my cash is up to date. I then go somewhere where I make payments that I don’t remember individually. So the next morning, I count my money and want to enter that, instead of manually substracting the counted balance from gnucash’s last recorded balance and entering that in the decrease column.Does that make more sense now? :-)It wouldn't be hard to add a menu entry to 'Update balance' which would pop up a dialog box where you enter 1) balance and 2) account to use for the balance. It would be harder to allow a split where more than 1 account is used.Why not just make the “Balance” column writable if the Basic Ledger view is active and no split transaction is being entered? This would avoid having to create an extra dialogue.Simply because that is much more work.Ok, point taken :-)Note that entering this sort of balance difference transactions is already possible by using the calculator features of the amount field, i.e. if the balance yesterday was 23.45 and today's balance is 12.34 you can enter a balance with the amount "23.45 - 12.34", which is calculated to the correct amount on-the-fly.(In reply to)Right, this is precisely what I’m doing so far. It’s just a bit tedious, as I have to manually copy the current balance, and consider whether I have to put the difference in the increase or decrease column.CreatedProof of concept, does not handle every case wellHi,I still believe that it should be possible to have the computer do for me what I’m currently doing manually, by copying the balance into the debit field and subtracting the current balance.I have attached a patch that enables this feature for existing transactions (even split transactions). It makes the balance column editable, and if, after editing, it differs from the previous balance of that split, the difference is added to the amount.In views of several accounts or in search results, the balance column is not editable.What do you think – is this a viable approach?CreatedBetter proof of conceptThe updated patch now also handles the case where the user edits the blank split at the end of the ledger; in that case, if he modifies the balance column, the total balance of the account is taken to calculate the difference.(Actually, the patch 229842 is broken when the user does _not_ modify the balance field, I’ll fix that right away.)CreatedHandle the blank split betterReview of:First, my apologies for taking so long to review your patch. I got caught up in a lot of other work.On the patch itself: the calculations work very well. I can enter an amount in the balance column after which the credit or debit column is properly updated. Very nice !But there is also still a glitch in the gui refresh code you should try to solve. There seems to be an issue when you click on a row with a negative balance. When you do that, the balance cell will be updated to the value of the last row previously selected with a positive balance (or 0 balance from the empty split). It doesn't trigger any recalculations, and is only visible as long as the row is selected. When you select another row, the balance cell in the previously selected row will show the correct negative value again. Can you verify this ?Additionally, when playing around some more the following issue also appears:- I had entered a new transaction the traditional way (ie using a decrease, not the altering the debit value)- I moved to another registry row, and then decided that I had entered a wrong value.- So I went back to the transaction just entered and change the debit amount- Hit enter=> What I entered is ignored. Instead another value is entered to come to some balance I didn't intend. Note that I didn't alter the balance manually.An example to play with (entered in a Liabilities account):- What I entered the first time:Description: Some transactionTransfer: Expenses:GroceriesIncrease: 1000=> Finishing this entry, I get a net balance of 4930,78 €- I leave the entry and enter it again- Change the Increase to 500- Hit return to leave the transaction=> Increase now is empty, instead my Decrease is set to 9361,56 €, the balance is -5430,78 € (negative!)So what it seems to have done is adding 500 to the original balance and then reverse the sign, recalculating what the difference should have been.Setting the Increase back to 1000 restores the original balance. However changing it again will mess it up again.It looks like you have some sign issues in your code.Dear Geert,thanks for the review. Luckily, my changes still apply cleanly to the latest code, so I can continue working on it (although I probably forgot completely what I did :-)).I cannot reproduce the UI glitch. I have created a new account, added 10€ and in the next transaction, removed 20€. Now I can click around wildly, and the balance columns remain unchanged.What I notice is that if move the focus to the balance field, its color changes back to black while editing. Is that what you mean? Is that a problem?Unfortunately, I also cannot reproduce the other problem. Unless you have been editing both the increase and the balance in one go: This does yield somewhat unpredictable behavior, as it first calculates the change according to the balance, and then adds the change entered in increase/decrease.Also, I notice that setting the balance to 0 does not work, although from reading the code I don’t see why. It seems guess someone with better knowledge of gnucash internals (gnc_numeric_sub,gnc_price_cell_get_value) than me needs to have a closer look at the actual code I wrote.I haven't done any further testing, but it's very well possible that what I experience only happens in some type of accounts. Some accounts do internal sign inversion before displaying or reading values.In my example I played with a Liabilities type account. You didn't specify which account type you were using, but perhaps it was of a kind that doesn't do sign reversals.Additionally I'll add that the register is currently undergoing a complete rewrite. Seeand all its dependencies. So for your feature to appear in future versions of GnuCash, I'm afraid you will have to rewrite your code against the new register code.Ok, thanks for the warning about the rewrite; I guess I’ll just wait for that to be done before I look into this again. I have been living without the feature for more than 10 years now, I can wait another year or two :-)	19.0	id=627432	18	False	False	gnucash2	1
id=627432	REOPENED	GnuCash	General	2.2.x	Other All	Normal enhancement	Geert Janssens	2010-08-19 21:31 UTC by	Tarlika Elisabeth Schmitz	2015-08-16 14:10 UTC (	6 users	It would be nice to be able to define a relative annual period with a start date other than 1st January.For instance, the UK tax year starts on 6th April. If it was possible just to specify day and month, the accounting period would not have to be amended every year.Likewise, there might also be a use case for a monthly accounting period, which does not start on the 1st?	I hope you don't mind my airing a bit of an adventurous idea:For the relative Accounting Period (AP) spec, isn't it superfluous defining start and end? Isn't the duration of a relative, recurring period always the same? If so, the end date is the day before the start of the next period.Then the relative AP could be specified as duration + starting point:- today- week : start 1...7- month : start 1,2,...,31/last day of month- quarter : start day + month- year : start day + monthKeep absolute AP definition as as is for needs not covered above.Note my suggestion to add a weekly period.These ideas tie in with my suggestion for the report date range:.With 2.4.0, the accounting period start/end date can be configured through Edit -> Preferences. Does that meet your request?No that's not really what the OP asked. The problem with the current preference is that if you define an accounting period with absolute dates, you have to update that every year. There is currently no way to define an accounting period of one year that starts on July 1st of every year and forget about it.I agree with the OP that it would be good to improve on this.Implemented by Geert in r20132 - thanks a lot!This it not what I committed in r20132, sorry. R20132 deals with entering dates in the register (or wherever we use date fields) and how to interpret those dates when the user doesn't enter a year. The old behaviour (and still the default in r20132) is to interpret the date in the current year. A new option is now added to interpret such dates in a predefined sliding window around the current date. This was a patch proposed by Peter Selinger on the mailing list which I slightly modified.But that commit has unfortunately nothing to do with the request for a preference setting to define an accounting period that recurs yearly (so without having to explicitly type a year each time).I'm sorry for the confusion.Oh, right. Nevertheless I think there was a bugreport asking for what you've committed now. It just wasn't this report here.Indeed. I foundfor this request and closed that one accordingly.Indeed, this would be very useful. Even in UK and US it's common for companies to have a financial year that's not the same as the calendar year or a tax year.For example, the GNOME Foundation in the US has a financial year that runs 1st Oct to 30th Sept, so we want all of the reports to use those dates. My company in the UK has a financial year that runs 1st of Feb to 31st Jan. In both these cases, I never want to run reports on a calendar year basis, but what I do want to do is specify current financial year for current budget tracking or previous financial year for tax returns.Hi,For everyone (individual, companies and trusts) in Australia as with many other countries the financial year ends 31st June and starts 1st July.Unfortunately this bug / issue therefore affects all Australian users, so it's really very annoying.best solution would be to allow the configuration of the first day of a financial year to be used with the relative dates.I really hope this can be resolved in the next release....	9.0	id=703093	25	False	True	t.i.m	1
id=703093	REOPENED	GStreamer	gst-plugins-bad	git master	Other All	Normal enhancement	GStreamer Maintainers	2013-06-26 03:04 UTC by	LRN	2016-11-29 22:36 UTC (	6 users	subj	CreatedPort videomeasure to 1.0The code is still a bit banged up (i could never figure out the caps and query thing, so that code is just stitched together from the one i've copied from the `interleave' and 'videomixer' elements), but it works.Cool, thanks.Review of:Stopped review at some point, but the negotiation here looks rather complicated::: gst/videomeasure/gstvideomeasure_collector.c@@ +345,3 @@+ gst_element_class_set_static_metadata (element_class,+ "Video rate adjuster", "Filter/Effect/Video",+ "Drops/duplicates/adjusts timestamps on video frames to make a perfect stream",Copy & paste from videorate it seems, can you fix that while you're at it? ;)::: gst/videomeasure/gstvideomeasure_ssim.c@@ +227,2 @@+static gboolean+gst_ssim_sink_getcaps (GstPad *pad, GstObject *parent, GstQuery *query)For consistency, maybe make the signature GstCaps * getcaps (GstSSim *ssim, GstCaps *filter);@@ +243,3 @@ GST_OBJECT_UNLOCK (ssim); + if (filter && caps) {caps should always be != NULL here@@ -431,3 @@ for (ix = winstart_x; ix <= winend_x; ix++) { weight = ssim->weights[weight_offset + ix];- mu_o += weight * org[pixel_offset + ix];Why do you change the algorithm, should be a separate commit@@ +515,3 @@ tmp1 = org_with_offset[ix] - mu_o; tmp2 = mod_with_offset[ix] - mu_m;+ weight = weights_with_offset[ix];Same here@@ +530,3 @@ tmp1 = (2 * mu_o * mu_m + ssim->const1) * (2 * sigma_om + ssim->const2) / ((mu_o * mu_o + mu_m * mu_m + ssim->const1) *+ (sigma_o + sigma_m + ssim->const2)); /* (sigma_o^2 + sigma_m^2 + ssim->const2) */And here@@ +613,2 @@ GST_DEBUG_OBJECT (ssim, "checking caps on pad %p", otherpad); if (direction == GST_PAD_SINK) {Caps are only set in one direction nowadays: downstream@@ +626,2 @@ GST_DEBUG_OBJECT (ssim, "old caps on pad %p,%s were %s", otherpad,+ padname, capstr);Just use GST_PTR_FORMAT here to print caps. This will evne work on windows with 1.1@@ +658,3 @@+ ssim->height = height;+ ssim->frame_rate = fps_n;+ ssim->frame_rate_base = fps_d;Maybe just store the GstVideoInfo in the instance structCreatedPort videomeasure to 1.0 v2Made all the adjustments suggested so far.I have a feeling that this is going to take a lo-o-ong time...Review of:A couple more review comments.::: gst/videomeasure/gstvideomeasure_ssim.c@@ +220,3 @@+ caps = gst_pad_get_pad_template_caps (ssim->orig);+ } else {+ caps = gst_caps_copy (ssim->sinkcaps);You can use gst_caps_ref() here, no need to make a copy@@ +500,3 @@ }+ sigma_o = sigma_o / elsumm; /*sigma_o = sqrt (sigma_o / elsumm)*/+ sigma_m = sigma_m / elsumm; /*sigma_m = sqrt (sigma_m / elsumm)*/Why did you remove the sqrt() call here ?@@ +504,3 @@ tmp1 = (2 * mu_o * mu_m + ssim->const1) * (2 * sigma_om + ssim->const2) / ((mu_o * mu_o + mu_m * mu_m + ssim->const1) *+ (sigma_o + sigma_m + ssim->const2)); /* (sigma_o^2 + sigma_m^2 + ssim->const2) */And the squaring here..@@ +548,3 @@+ GST_DEBUG_OBJECT (ssim, "format is %s", gst_video_format_to_string (fmt));+ if (!GST_VIDEO_INFO_IS_YUV (&ssim->vi))+ goto not_supported;This isn't required, the caps will always be a subset of the pad template caps.@@ +550,3 @@+ goto not_supported;++ GST_INFO_OBJECT (ssim, "parse_caps sets ssim to yuv format "Use GST_DEBUG_OBJECT()@@ +566,3 @@+ break;+ default:+ goto not_supported;Again, not required, this is specified in the pad template.@@ +594,3 @@ * look kinda funny :) */+ gst_caps_append_structure (ssim->srccaps,You can just do:gst_caps_new_simple(), no need to do new_emptoy then append a structure@@ +852,3 @@+ gst_query_set_caps_result (query, caps);+ res = TRUE;+ } elseUse if {} else {}, don't with and without {}@@ +857,3 @@ default: /* FIXME, needs a custom query handler because we have multiple+ * sinkpads */Just call gst_pad_query_default(), the default handler handles multiple pads now@@ +907,3 @@ GST_OBJECT_UNLOCK (ssim->collect); + result = gst_ssim_push_sink_event (ssim, event);call gst_collect_pad_src_event_default(), it will do the forwarding for you@@ +916,3 @@ default: /* just forward the rest for now */+ result = gst_ssim_push_sink_event (ssim, event);same here@@ +1136,3 @@ goto unnamed_pad; + if (strncmp (padname, "modified_", 9) == 0) {g_str_has_prefix()@@ +1157,1 @@ #if GLIB_CHECK_VERSION(2,29,5)Remove this, GStreamer 1.0 requires GLib 2.32Exactly because it's squared later. No sense sqrt'ing it, and then squaring it back.As for other comments - ok, i'll try to work myself up to fix these.Do such changes in a separate patch please, and only port to 1.0 in the main oneCreatedvideomeasure: port to 1.0 v3Made all the adjustments suggested by ocrete.Createdvideomeasure: optimize SSIM calculation slightlySplit the micro-optimization part into separate patchCreatedvideomeasure: optimize SSIM calculation slightly v2Forgot to add this change to the other function as well. D'oh!Createdvideomeasure: port to 1.0 v4Forgot to remove videomeasure from the list of unported plugins...Did some testing, this microoptimization reduces average SSIM calculation time for a frame by ~500 microseconds (average time from 53089542 nanoseconds to 52541066 nanoseconds).Yay...?Createdvideomeasure: port to 1.0 v5Style fixed by gst-indentCreatedvideomeasure: optimize SSIM calculation slightly v3Style fixed by gst-indentCreatedvideomeasure: port to 1.0 v6Used fixed gst-indent to format the patchCreatedvideomeasure: optimize SSIM calculation slightly v4Used fixed gst-indent to format the patchWe decided to got with the new IQA () as it is simpler, it is based on GstVideoAggregator which is more future proof. Also the lib used (dssim) is faster from some experiment we made.Thanks a lot for that anyway.I spent few minutes to make a comparison. I think stating that IQA covers videomeasurement is an over statement. Here's what I found:- IQA pretends but don't really seem to support 1+N streams- IQA is strictly DSSIM and does not help adding anything else- IQA does not support non RGB outputWithout addressing that, why do we trash this effort ? -bad is like the staging area, I believe both solution can coexist until we have a full featured solution.IQA can be made to work with some refactoring. Don't try to have a single class that can do multiple metrics, have multiple classes, like GstIQADSSIM, GstIQAPSNR, one per metric; that way GstVideoAggregator and its inflexibility won't be a problem - GstIQAGMS will just have different caps template, one that accepts YUV instead of RGB.1+N won't happen that way, but my intention behind having 1+N in videomeasure was mostly due to performance concerns (SSIM includes a blur pass over each video stream before comparison; 1+N allows us to do blur of the original stream once for 1+1 comparison, then re-use it for all other 1+(N-1) comparisons). Other algorithms don't seem to need that, and DSSIM can't do that, so this is not something i'd fight about.I *would* like IQA to be able to push measurements as events, and have a dedicated element for catching these and dumping them into CSV files. That way it would be possible to do measurements *entirely* with gst-launch, no need to write an application to listen for bus messages (where IQA currently sends its measurements) or dump them to stdout with -m and then have to parse the output. These approaches are not mutually exclusive, IQA can do both (events and bus messages).Stride problems will remain in IQADSSIM, i'll let IQA maintainer handle that. I'll try to ensure that IQAGMS doesn't have these.RGB-only output...depends on how much code different IQA classes will have in common. If they will have common output code, they might all output RGB (a heat map currently). The code for GMS that i have outputs GRAY8 (just 0..1 mapped into 0..255, no fancy heatmaps; this can be changed, if needed).(In reply to Nicolas Dufresne (stormer) from)That is not the case. If you read a little better you'll see it does output messages for each pad, the implementation is very straightforward that's easy enough to figure.I don't know what help you'd expect, you get n video frames and the ability to post messages, if you have more suggestions don't hesitate.That's not the problem here, but OKI never said *anything* about trashing one solution or another, I just implemented this one year ago, dssim works measurably (no pun intended) better than what we had previously in the videomeasure element, as the correlation against annotated datasets is significantly higher, while being 15 times faster.Inheriting from videoaggregator and wrapping dssim means the actual code is less than 400 lines, which also counts as a win in my book.Now I proposed this against *-bad*, intentionally because I had neither proof-tested it extensively, nor tried to implement different metrics in there. The fact that input is restricted to RGBA because of dssim is indeed inconvenient, anyway I'm pretty sure all the state of the art algorithms can be implemented against RGBA images.Anyway, here's my personal opinion:All contributions to -bad should be welcome with open arms, as in the case of an API breakage (gst 2.0), porting the -bad plugins isn't an obligation, right?I tend to think the solution I picked has the advantage of simplicity, and ideally will implement more metrics, now there is the constraint of input formats, which isn't easily solvable, and I don't have anything against people doing their own thing, as long as they let me do mine too!SeePoked around a bit. If we start from the assumption that videomeasure needs to use GstAggregator (GstVideoAggregator is already deemed too highlevel due to its tendency to convert stuff) to reduce the amount of code to maintain, it means that it can't ever produce more than one stream, because GstAggregator has only one src pad.That means that information-lossless performance can only happen when one metric is computed on two input streams (a reference stream and a modified stream), producing one output stream (it could be 1-channel height-map (GRAY8) or heat-map (RGB) or multi-channel height-map (RGB or Y444), that depends on the implementation and could be user-configurable, if needed).Three input streams (1 ref, 2 mods) -> need 2 output streams (one for each mod), and GstAggregator won't allow that. An earlier suggestion to stitch multiple output streams into one big stream is ridiculous (stitching -> more code, splitting -> more code). Or output has to be simply dropped -> information loss.Two metrics simultaneously -> twice as much output streams (one for each mod, multiplied by 2, for each metric), again, not supported by GstAggregator. Stitching won't work at all, since output might require completely different data formats.That is why the only option within the must-use-GstAggregator paradigm that i would agree on is to have a 2->1 element that can only compute one metric at a time. It might support multiple metrics, but only one can be enabled.Conversion is done by the user, using videoconvert.Multiple metrics or multiple mod streams are done by the user, using tee (this can also be faster, because tees can be paired with queues, separating each measuring element into its own thread).Not using GstAggregator means going all the way back to original videomeasure that inherited from GstElement directly and did everything by itself.It looks like we wanted to make iqa a sink, and we didn't know what to do with the src pad. I believe we need to find a solution to this ambiguity. It's rather confusing. I think I'd prefer having a simpler element doing 2 -> 1 with a message per metric, or a more complex one that does 1 + N -> N which covers all the use cases.Looking deeper, it might not be that complex to create an bin that aggregates the messages, wrapping 2 -> 1 lower complexity elements. The change on IQA would be minor and in fact would simply remove some corner cases that are not really handled. That been would handle a tee to multiplex the reference properly. Though, I must admit, I had a first impression was that such element should be using GST_EVENT_SINK_MESSAGE, which is not possible if you aggregate, because you'd get duplicates. I'm a bit ambivalent on this feature. What I care the most is about providing new elements that does not have such ambiguity.1 + N -> N can't be based off GstAggregator, so unless someone is willing to maintain a whole new codebase for it, that idea is off the table.A bin that wraps a collection of one-metric-per-instance 2->1 elements sounds neat.I'm not sure what the deal with GST_EVENT_SINK_MESSAGE is. First generation of videomeasure pushed GST_EVENT_VIDEO_MEASURE events that carried the measurement result, these events flowed downstream and could be caught by special passthrough elements (i had the measurecollector element for this), which then did something (like, write the result into a file). IQA emits bus messages with the measurement results, leaving it up to the application (if any) to catch them on the bus and do something. I prefer the event approach, but there's no reason why both can't be used simultaneously. Though there's the question of how these events (and event-catching elements) would work in the aggregate-bin mentioned above. Or would they be outside? Are there N->N passthrough base element classes (to avoid using multiple instances that do essentially the same thing)?A GST_EVENT_SINK_MESSAGE, is a serialized event, that carry a message to be posted to the application. This message is expected to be posted right before the associated frame is to be rendered. It is a mechanism to keep the messages on sync with the streams. In this case, a sink message enabled both use cases, and keep the metric on sync with the heatmap rendering. Thinking of it, I can't figure-out how that can works with the current iqa code. How do you know which input is which metric ...(In reply to Nicolas Dufresne (stormer) from)You don't. Each message comes with a timestamp, so you can only link frames to metric values via timestamps (videomeasure used buffer offsets instead; again, it's possible to include both). Now that i'm thinking about it, i guess it might be valuable to be able to do so, for example, to overlay current frame-wide metric value over the video frame. Though that means, again, a tee to split the modified stream into two, put one stream through the measurement, link up the output to the overlayer, link up the second stream to the overlayer, and then somehow sync it all correctly...That said, many metrics are very non-realtime, so any synchronization tactic is acceptable, even if it means rendering delays...Another solution could be to:* implement a GstAggregatorSink class, shouldn't be very difficult (GstAggregator would simply expose a vmethod to create a source pad, with the current behaviour as its default implementation, the subclass would override it and return NULL)* Instead of outputting a heat map of the differences, these could be somehow attached to the messages, I don't know exactly how doable that would be	27.0	id=637882	5	False	True	paolobenve	1
id=637882	REOPENED	gthumb	general	2.12.x	Other Linux	Normal enhancement	Paolo Bacchilega	2010-12-23 15:38 UTC by	Paolo Benvenuto	2015-12-21 08:19 UTC (	0 users	There's room for a little improvements, which lets me annoyed when I switch to a directory populated with many big photos and the sorting involves reading all the photos.In my case, I use gthumb with sorting "when photo was taken".When you open gthumb and it shows such a populated directory, or when you switch to it, gthumb lasts a long time reading the images. In the meanwhile, the directory tree is in a "limbo" state, and you cannot navigate to other directory. Apparently gthumb presents properly the directory tree only after showing the images thumbnails.I propose to calculate and show the directory tree _before_ showing the images thumbnails.	Marking as obsolete, as the 2.x version are no longer supported.Please feel free to reopen this bug report if it describes a problem that still occurs with a current version of gThumb (currently 3.4.1).still present in 3.4	2.0	id=336861	8	False	False	muntyan	1
id=336861	REOPENED	pango	general	unspecified	Other Linux	Normal enhancement	Priit Laes (IRC: plaes)	2006-04-01 19:08 UTC by	Behdad Esfahbod	2015-04-30 16:37 UTC (	3 users	That would be useful in some win32 builds, since currently we don't even allow --without-freetype.	Here, I am building gtk and friends using mingw. I have to use freetype in cairo for pdf, but I don't want pango to use it, so I had to edit configure.in in order to disable freetype backend.Oncegets fixed, will look into it.***has been marked as a duplicate of this bug. ***...is long gone :D.Err. My bad. This is not about modules, but backends.	5.0	id=744032	75	False	False	jonas	1
id=709723	REOPENED	rygel	librygel-server	git master	Other Linux	Normal enhancement		2013-10-09 11:47 UTC by	Mark Ryan	2014-10-03 19:45 UTC (	2 users	DMS plugins that derive from the MediaObject classes in librygel-server, such as VideoItem, may want to add additional properties. For example, a plugin may wish to specify the artist property in the VideoItem. Unfortunately, this is not possible for vala based plugins as to add a new property they need to override serializable and unforunately, serializable is internal. The easiest fix would be to make serializable public but I realise that this would be modifying the API.There are two short term workarounds.1. Write your plugin in C.2. Modify the librygel-server make file and the makefile of your pluginAdd --internal-vapi and --internal-header to librygel_server_2_0_la_VALAFLAGS in the librygel-server Makefile.amAdd --pkg rygel-server-internal-2.0 to the VALAFLAGS in your plugin's Makefile.	As discussed on IRC: We probably need to rethink the meta-data a bit, some of the properties (such as artist) on MusicItem also make sense on VideoItemThe properties in question are artist, genre, album and albumartURI. I would even propose to move them (except album) to MediaObject so we can use them in album.MusicAlbum containers (which is recommended by UPnP, Table C-25 CDv3)Createdserver: Move properties up the hierarchyMove artist, genre and album to MediaObject/AudioItem to make them available incontainers and videos as wellCreatedserver: Make MediaObject.serialize publicComment onserver: Make MediaObject.serialize publicpushed as- server: Make MediaObject.serialize publicThis problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.I'm not sure these should be moved up the hierarchy.If the intent is to follow the UPnP hierarchy, artist, for example, is on playlistContainer but not container, playlistItem but not Item, musicAlbum but not Album, and musicTrack but not audioItem. Additionally, artist needs to be multi-value for playlistItem. (guess that's why DIDLLiteItem has get_artists())I think the issue is that (a) the MediaItem hierarchy doesn't equivalent granularity to the UPnP hierarchy (e.g. there's an AudioItem class but not a MusicTrack class), (b) there's not a simple class-type test that a MediaServer can use to determine if author is searchable on the object (the AudioItem class test used in RelationalExpression isn't correct or sufficient).Not sure I want to elaborate too much on a solution. But (a) could probably be solved by adding the missing classes (just a few?). For (b) maybe search comparisons should always be delegated to the object (e.g. compare_by_property() taking an optional SearchCriteriaOp). That should eliminate the need for subclass knowledge when doing searches (only the particular MediaObject subclass should need to know what UPnP properties it contains/supports).CreatedPrototype of an approach that might scaleThis patch defines a MediaObject.satisfies() method to allow UPnP property checks to be delegated to MediaObject subclasses/subinterfaces with RelationalExpression.satisfied_by() delegating to MediaObject.I think there's still some need to sort out properties among the subclasses. And I haven't done much testing with this. But I think this approach should allow for properties to be placed arbitrarily without changes to the object hierarchy. e.g. the patch adds "upnp:genre" to VideoItem as an example.How did that get "resolved fixed"? Weird.CreatedPrototype of an approach that might scale (updated)Just added short-circuit comparisons for some of the satisfies(RelationalExpression) implementations.	10.0	id=709723	8	False	False	mail	1
id=770901	REOPENED	GIMP	General	git master	Other All	Normal enhancement	GIMP Bugs	2016-09-05 15:12 UTC by	jose americo gobbo	2016-11-14 19:11 UTC (	2 users	This enhancement is interesting to describe a process in a layer, where wehave with many steps... in many cases, this is a good way to make footnotes about our methods and ideas.This is useful also to use the .xcf as tutorials, where the main steps or process could be described directly where these are made.Elle Stone Excerpt: "I'm always trying to describe the purpose of the layer in the layer name. And there's just not enough room. It would be nice to be able to add the comment and also set the layer blend mode whenever making a new layer."	A backend for storing arbitrary data in images and layers does exist -The part left to do is to specify the user interaction and what (e.g. the data format) and how (e.g. the parasite name) it is stored.(In reply to Michael Schumacher from)Is the layer blend mode something that can be stored as arbitrary data using information at libgimpbase-gimpparasite.html, such that the user could set the layer blend mode at the same time that they make the new layer and add the comment?Well, you wouldn't have to store the blend mode there, as it could be part of the new layer dialog - just like countless other things could be in there (opacity, locks, text options, ...), which is why a UI spec will the required to get this right and decide what should be in there, and why.Having mode and opacity in the "New Layer" dialog sounds pretty logicalto me, and is a joke to implement with the new persistent GimpDialogConfigdialog settings.What is the set of new layer options offered in other apps? I shink weshould have some screenshots here from krita, photoshop, whatnot...(In reply to Michael Natterer from)This link shows the PhotoShop new layer dialog:This is what I remember from CS2, so it might have changed in the meantime.I don't think Krita New Layer dialog has any options. You have to pick the type of new layer to make (paint, transparency, mask, etc) and it just appears. Then you can open the Layer Properties (I'll add a screenshot).CreatedKrita Layer PropertiesThis should already be less useless:commitAuthor: Michael Natterer <>Date: Fri Oct 21 22:54:10 2016 +0200- Improve the "New Layer" and "Layer Attributes" dialogs Add "Mode", "Opacity" and "Offset" controls to the dialogs. Remember the "New Layer" mode and opacity in GimpDialogConfig. Also addresses. app/actions/layers-commands.c | 114 +++++++++++++++++++++++++---------- app/config/gimpdialogconfig.c | 30 ++++++++++ app/config/gimpdialogconfig.h | 2 + app/config/gimprc-blurbs.h | 6 ++ app/dialogs/layer-options-dialog.c | 173 ++++++++++++++++++++++++++++++++++++++++++++--------- app/dialogs/layer-options-dialog.h | 26 ++++---- 6 files changed, 282 insertions(+), 69 deletions(-)More toggles:commitAuthor: Michael Natterer <>Date: Sun Oct 23 22:45:08 2016 +0200- Improve the "New Layer" and "Layer Attributes" dialogs Add toggles for visible, linked, lock pixels, lock position, lock alpha. app/actions/layers-commands.c | 58 ++++++++++++-- app/dialogs/layer-options-dialog.c | 228 ++++++++++++++++++++++++++++++++++++++++------------- app/dialogs/layer-options-dialog.h | 5 ++ 3 files changed, 233 insertions(+), 58 deletions(-)The New Layer dialog is really nice - thanks! Could the New Layer/Layer Attributes dialog perhaps be expanded to include an option to make the layer blend mode work on the user's choice of "Linear light RGB" or "Perceptual gamma RGB", defaulting to "Linear light RGB" for most blend modes? This "per layer" option would be more flexible than having to convert the entire layer stack back and forth between "Linear light" and "Perceptual gamma". And it would allow to remove the "Linear light" vs Perceptual gamma" Image/Precision option.That would be a complete change of how we manage the image's pixelformats. Changing that would involve changing *lots* of code, not reallysomething for an "Improve this dialog" bug :)Let's call this one FIXED.(In reply to jose americo gobbo from)Is it too late to add another field to the New Layer/Layer Attributes dialog where a user could write a note (I mean in addition to the Layer name) that adds information about the purpose of the Layer? This field would be for storing more information than can be comfortably displayed in the Layer Name.(In reply to Michael Natterer from)The info of layers and features of this dialog now are very beautiful! Thanks!But, my initial intent with this bug report was mainly add field to notes ;-)In the thread, Michael has wrote something about, but I don't know if is possible or not.The main concept of this field, is to help us describe complex process on layers. So, is possible to use to create short tutorials and probably could be used to describe methods to photography and painting. I have much difficulty to describe my processes only with name field.Exists a 'comment' field in properties, but this field is more general and not ideal for these scopes.Indeed, adding a comment field still has to be discussed.Did you see but #754445?:)The "free-form notes field" requested in this bug report was actually envisioned for recording workflow notes, information, and observations, for example:* Layer mask to with Pattern Paper Watercolor 1, to increase someaspects of stroke, Blend Mode X, Opacity 15%.* Group of the Tonal composition, Multiply Mode, Opacity 75%.* Layer to simulate ink dry pigment effect on the wet techniques, LchNoise via parameter x,y. The Lch Noise layer was modified by this andthis... The better mode blend seems this but is possible this, too.Opacity ideal from x to y.* Layer created using Krita's lens blur algorithm for use inreplicating the Orton effect, and was also given a gamma=2.2adjustment for use with Soft Light blend while working in a lineargamma RGB working space.* Layer set to divide blend mode for emulating light from an"out of scene" light source which is a fireplace on the opposite wall.* Layer is from using PhotoFlow to stack three exposurebracketed shots from a Sony A7 camera.seem to request two more or less automatically generated "per layer" items:1. A per-layer timestamp showing when the layer was created.2. Per-layer metadata that might include user-supplied metadata (for example copyright or contact information), or might pull in metadata already embedded in the image from which the layer came, as per when compositing different images together.(this bug) is requesting a free-form note field for entering anything at all that the user might find useful, which of course might include a time (if the user types in a time), or copyright information (if the user types in copyright information).But nothing in this "free form" notes field would be automatically generated by GIMP. And the originally envisioned use-case is for workflow notes, not metadata or timestamps.Some people don't use GIMP for keeping track of metadata, and indeed I would prefer the option to completely disable GIMP's ability to embed metadata in XCF files, whether on a per XCF file or on a per layer basis.This article is about a way to handle per layer metadata in PhotoShop CS4:The use cases given in the article seem interesting and perhaps relevant to. The article's linked-to screenshot shows a nice layout for entering notes:Free-form notes about a layer really are metadata, of course. The type of metadata that personally I don't want to see in GIMP (or rather would like to see made completely optional at the user's discretion) are things like:* all the stuff stored by the camera in camera-saved raw files or jpegs* copyright and contact information* keywords and tags that are entered using software like digikam or darktable* etcSome people do want to keep this kind of information with each XCF file, and would welcome keeping such information on a "per layer" basis. For other people, saving all this information in an XCF file poses the possibility of an accidental information leak - for example, not everyone uses "for public consumption" keywords for sorting and categorizing their images.	16.0	id=666114	27	False	False	simon.mcvittie	1
id=666114	REOPENED	glib	build	2.31.x	Other Linux	Normal enhancement	Simon McVittie	2011-12-13 19:21 UTC by	Simon McVittie	2016-11-23 10:52 UTC (	7 users	could have been avoided if the GLib tests were semi-regularly run under valgrind. Patches on the way.Also, it'd be nice if we could install valgrind suppression files for at least some of the "intentional, one-per-process" allocations; at the moment, telepathy-glib and GStreamer both invent their own.	CreatedAdd valgrind infrastructure and empty suppression files"make valgrind" runs the tests (if any) under valgrind. The suppressionsfiles used are also installed for the benefit of third-party tests,unless --without-valgrind-dir was passed to ./configure.The default location is ${libdir}/valgrind (matching the suppressions filesinstalled by valgrind, ncurses and Python on Debian systems), but can bechanged via ./configure --with-valgrind-dir=/where/ever.CreatedFill in the valgrind suppression file for GLibBased on those in GStreamer and telepathy-glib.CreatedSuppress leaks caused by g_environ_setenv()Setting environment variables can leak, because this is the onlyfeasible way to avoid potentially freeing non-malloc'd memory.CreatedSuppress GPrivate leaks: it cannot be freedCreatedFill in some GObject suppressionsCreatedFill in some GIO-related suppressionsIs there really any advantage to having three separate suppression files? It just seems to make it more annoying to use, since you have to specify --suppressions= three times.(In reply to)Perhaps not, I'll squash them into one at the top level. (The idea was to have implementation details of libgfoo confined to the gfoo/ directory - but one suppressions file for all of GLib/GObject/GIO seems fine, really.)Created[1/2 v2] Add valgrind infrastructure and an empty suppression fileCreated[2/2 v2] Fill in the valgrind suppression file---This isn't everything by any means, but it's a good start...Comment on[1/2 v2] Add valgrind infrastructure and an empty suppression fileThat's actually backwards from how CFLAGS/AM_CFLAGS works. But this seems saner. I'd just remove the first comment.Comment on[2/2 v2] Fill in the valgrind suppression file"fun:main" isn't really needed there. (And someone might call g_test_init() via a wrapper of some sort...)g_slice_init() only mallocs if you don't do G_SLICE=always-malloc (ironically enough :-), in which case the suppressions file isn't going to be very useful anyway.do g_*_register_static* and you can get a bunch moreMy initial thought was that this was too broad, but then I noticed that inI have *all* calls to g_type_class_ref() marked as leaky... I guess 99% of the time types never get freed, so suppressing these warnings is worth losing the ability to catch refcounting bugs in the 1% case.[I'm planning to merge any remaining things from libsoup.supp into the glib suppressions file after this goes in and I update glib-networking and libsoup to make use of it.]What is this section for? If it's "leaks in libraries that glib depends on", then shouldn't the getpwnam_r() leak be moved here?(In reply to)Perhaps my comment was unclear (the "also" is a bit misleading); my intention was that OUR_VALGRIND_FLAGS contains settings by the Makefile.am author, whereas VALGRIND_FLAGS contains settings from the user (make VALGRIND_FLAGS="--track-fds" or whatever).This is analogous to Automake CFLAGS: AM_CFLAGS contains settings by the Makefile.am author, and CFLAGS is freely overridable by the user (automake-1.11.info.gz §27.6 Flag Variables Ordering)."User" here means whoever is compiling GLib.(In reply to)Good point.OK, I'll drop that one. I think it came from telepathy-glib, probably from before we had much experience with valgrind.Good idea.Perhaps we should split out a second suppressions file for things that are a bigger hammer than is really justified, including "all classes are allowed to leak"? Then developers of things that actually use dynamic types (GStreamer) could avoid using that one.This is exactly what I was hoping would happen :-)Yes, that's what it's for, and yes, the getpwnam_r() bit should move there.(In reply to)Huh, no, after reading the autoconf docs, it appears that I've just always misinterpreted the purpose of AM_CFLAGS... :-}(In reply to)fixedfixedfixedleft as-is for the momentdoneCreated[2/2 v3] Fill in the valgrind suppression fileWhat's stopping this from being committed?+{+ unsetting environment variables can leak, this is unavoidable+ Memcheck:Leak+ ...+ fun:g_strdup_printf+ fun:g_environ_setenv+}This one is a false suppression, hiding a real leak:.Comment on[2/2 v3] Fill in the valgrind suppression fileThis could lead to leaking data related to sources that are attached to the main context... although I guess that's unlikely, since in most cases, if you accidentally leave a source un-destroyed, it will end up triggering eventually, and presumably cause a crash, and then you'll figure it out. (Though, eg, GCancellableSource would never trigger if you leaked it, since you'd presumably no longer have access to its GCancellable.)But anyway... probably ok?as someone else noted, there were some bugs in how this was implemented. g_environ_setenv and g_environ_unsetenv should only be allowed to leak when called from g_setenv / g_unsetenv.I don't think the "g_slice_alloc" is needed/useful there.I think you can make that "fun:g_param_spec_internal", and then drop the "fun:g_type_class_ref".I'm not sure the g_type_class_ref adds anything there. (And type_iface_vtable_base_init_Wm is called from some other places.)Having played around with this a bit, I'm thinking that actually freeing all the leaked memory (eg,) may be a better approach than just suppressing leaks. At least in some cases.Eg, the suppressions file here includes:+{+ shared global default g_main_context+ Memcheck:Leak+ ...+ fun:g_main_context_new+ fun:g_main_context_default+}But then valgrind will still report that the default context's cached_poll_array member is leaked (because that gets created in g_main_context_iterate(), not g_main_context_new()). And there's no way to suppress that leak report for *just* the default context; we'd have to suppress it for *all* contexts, which would mean that it could end up hiding a real leak if the cached_poll_array cleanup got broken. Whereas just freeing the default context when the program exits solves this problem, and doesn't create any new ones.(Though that approach may not work for all cases... (gtype?))(In reply to)If you can make that work reliably, great; but failing that, suppressing is better than nothing.If you don't like my choice of suppressions, can we at least have my first patch (with a comments-only suppressions file), so you can `make valgrind` and just get a lot of warnings? That would help to spot everything else that Valgrind notices (e.g. uses of uninitialized or freed memory), even if leaks are ignored.(It might need updates/merging for master, though; it's been a while.)CreatedMakefile.decl: update valgrind rules--verbose seems to just be a bother, so remove that.Add --show-reachable=yes, because that turns up important information too.Bump --num-callers up to 40, since in my experience 20 is occasionallytoo small to figure things out.Createdglib-2.0.supp: updates...Also, move around a necessary leak in gtestutils into a place whereit's easier to ignore reliably.Comment onglib-2.0.supp: updates...(This was me being lazy; we definitely don't want to suppress *all* leaks inside g_main_context_iteration(), since that would suppress leaks in all source callbacks in the worker thread.)so, since the docs explicitly say that you aren't supposed to free static mutexes/conds/etc, this is an example of something that maybe we would want to keep a suppressions file for...I think this file should also take into consideration the false positive inrelated to g_closure_new_simple().this is being worked on as part of*** This bug has been marked as a duplicate of******has been marked as a duplicate of this bug. ***is going to take a long time (along withand).In the meantime, it would be useful if GLib shipped a canonical Valgrindsuppression file, as the patches here implement, so that people don’t keep writing their own.There is an up-to-date one here, which we might want to roll some changes back from:Createdglib: Add installed Valgrind suppressions file for GLib and GIOWhile we cannot get Valgrind to automatically load this suppression filefor applications which link to GLib(), we can at least installit on systems in a shared directory, so that developers can use astandardised (and up-to-date) suppressions file for GLib, rather thanrolling their own.The file will typically be installed to: /usr/share/glib-2.0/valgrind/glib.suppDistributors: it is recommended that this suppression file be installedas part of the development package for GLib in your distribution.Here's a slapdash attempt at this. It uses the suppressions file from Walbottle, which might not contain all of the suppressions from previous patches on this bug, but makes those tests (and those of a few other projects I've used it in) run Valgrind-clean. I would be unable to test other suppressions rules as easily.It provides a single file containing rules for both GLib and GIO, because making developers pass --suppressions=glib.supp --suppressions=gio.supp seems too cumbersome for any gain of keeping the symbols separate for the two libraries.The .supp file is currently in the root git directory for the same reason.Feedback very welcome.I'm now a huge fan of `-fsanitize=address` (from thesuite).Review of:Yeah, let's just try this.Comment onglib: Add installed Valgrind suppressions file for GLib and GIOpushed asglib: Add installed Valgrind suppressions file for GLib and GIOI’ve pushed the suppressions file (and it will be installed in $datadir by GLib). In order to close this bug I still need to update the patches adding a Valgrind mode for `make check`. I will try and find time for that; will probably end up using AX_VALGRIND_CHECK ().	34.0	id=770901	12	False	False	jehan	1
id=744032	REOPENED	gnome-maps	general	unspecified	Other Linux	Normal enhancement		2015-02-05 09:42 UTC by	Okki	2016-10-10 16:46 UTC (	7 users	I find it surprising that we don't have yet a search provider to quickly find a place from the shell. Apple Spotlight seems to allow it...If Clocks can display the time for a lot of cities, I guess we should be able to do the same with coordinate locations, which would display the place directly in Maps.With some types of searches (companies, monuments...), it might also be interesting to display some useful informations (a kind of Google's Knowledge Graph) such as photos, official website... that can be found on Wikidata. But I think I ask too much ;)	Hi, thanks for the feedback!There are some issues with this. The search service that Maps use to get information from OpenStreetMaps is Nominatim. We are not allowed to auto-complete or empploy search-ahead on this service. We could perform a search when the users hasn't typed for a while, but even this is a grey area I think.We could have a search-provider that completes against the recent places visited or the users favorite places, since we store them locally in Maps.I am not yet fully conviced. I am also working on storing recent routes one have performed, maybe when that is completed we could have search provider that searches the recent and favorite places and routes from Maps.Maybe.In the absence of our own instance of Nominatim, which seems to require a large server, MapQuest seems to provide a version of the same API, without the usage limits.Otherwise, without the completeness of OpenStreetMaps, Wikidata also offers coordinate locations for all cities and monuments.Probably without auto-complete or search-ahead, but I think it's better than nothing.Yes, we looked into our own Nominatim and the price tag was in the $10000 range.Will have to look into the mapquest terms of use! If better we should be able to just repoint our nominatim.gnome.org proxy to it. Nominatim however isn't all that great. Type-ahead search would be an improvement but Nominatim does not do partial matches so it would still ned to type Paris to get a hit on Paris.And we want to stick with openstreetmaps, since we have editing planned :)ThanksJonasMaybe another easy to implement use case is to parse plain coordinates or geouris when they are written down in shell search box, so we can open those in Maps directly from the shell.Yeah maybe...Feel free to implement something, if we start with a search provider that completes against our place store + some other stuff, we can see what that feels like.I don't want to add a provider, just because.Photon () is the best OSM based reverse-geocoder I have found so far. It has search-as-you type support and uses the Nominatim import logic (basically just putting the data into an ES database for fast searches).I think Nominatim is a dead end and if we want to get something better we need to look for alternatives that actually provide what we need.So to get this back on track.I would welcome patches for a search-provider that matches against:- Recent places / routes- Favourite places- lat/lon coordinatesAnyone up for writing one?For inspiration:What details should we display in search results?I think for places : name, town, state, country.but I am not sure about routes. And for lat/lon in geo-uri format, we can simply display them back and when user clicks them, maps should open with those coordinates.(In reply to Alaf from)How about the same infirmation we show in the search-popover in Maps on completion?(In reply to Jonas Danielsson from)We should be able to re-use the placeFormatter class I think.And I agree with lat/lon I think, and just convert them to geo:-uri, you can check for instance the utils.js code in Polari on how to launch a URI.wait, now you got me confused. Polari opens default handler for urls in openURL function in utils.js. But we want to open maps with given coordinates taken from lat/lon or geo:uri given by user.(right?)examples of what I understood up to now.user inputs 'geo:37.786971,-122.399677' : we show result for that location and when user clicks, we open this location in maps.user input 37.786971 : we check if any route or place contains this as coordinate, if yes we show result. If user clicks, we open it in maps.user input 'New Delhi' : we match it against stored routes and places and show result. If user clicks, we open it in maps.I wanted to open everything using (geo:lat,lon) of places, since we can already open geo:uri in maps through command line. Later this might come in handy when we will try use online-services for searching?.Also, I think gnome-weather does this kind of thing in serviceProvider.js in _activateAction function by calling Gio.DBus.session.call(). So maybe we can do in same way?wait, now you got me confused. Polari opens default handler for urls in openURL function in utils.js. But we want to open maps with given coordinates taken from lat/lon or geo:uri given by user.(right?)examples of what I understood up to now.user inputs 'geo:37.786971,-122.399677' : we show result for that location and when user clicks, we open this location in maps.user input 37.786971 : we check if any route or place contains this as coordinate, if yes we show result. If user clicks, we open it in maps.user input 'New Delhi' : we match it against stored routes and places and show result. If user clicks, we open it in maps.I wanted to open everything using (geo:lat,lon) of places, since we can already open geo:uri in maps through command line. Later this might come in handy when we will try use online-services for searching?.Also, I think gnome-weather does this kind of thing in serviceProvider.js in _activateAction function by calling Gio.DBus.session.call(). So maybe we can do in same way?(In reply to Alaf from)Well sure.I am not sure about this one, why would one want to input a geo:-uri when we also accept lat/lon?Not sure about this one either. Maybe.Yes, this one seems fine.Maybe we instead could use actions via DBus? Like the show-contact action that Contacts use to show a contact in Maps. See application.js.Yes, we can use activateAction, see utils.js in Maps for how we use activateAction. We use it today to activate actions on Clocks and Weather from send-to-dialog.js.I do not know a lot about service providers I have never looked into them. But I imagined that we would create a placeStore the same way we do in Maps application and complete against that in the provider. And for the lat/lon we would just match with regex. And give the option of open that point in Maps. Because I can't imagine a use-case were you would now the lat or lon of a point you did a route search on.We do not want to overload the search-provider system in GNOME with completions just because we can, right?Sounds like you are making progress tho! :)(In reply to Jonas Danielsson from)do we open maps on clicking a geo:uri? I don't know, my pc opens xdg-something.?yeah you are right.yay!! that's exactly how I imagined of doing it :) Also I tried using already existing placestore.js, but since it imports application.js, I can't use it.(otherwise I.ll have to add everything in gresource.xml unnecessarily)Same application.js import problem comes with placeformatter.js too.It imports storedRoute.js, which imports application.js. That too only for one comparison. So maybe if I make it optional, then I can use placeformatter.jsThat is a whole lot, said awesomely in one line. :)yepp, I have done a lot. I have added necessary stuff to makefile, I have also somewhat learned how to make gresource.xml and org.gnome.Maps.BackgroundService.in files. Now mainly I just have to implement serviceProvider class.Also that problem I was facing in debugging, It was really silly, I was replacing entire gnome-shell, rather than restarting one process. Took me some time to realize.(In reply to Alaf from)We do. Check the data/org.gnome.Maps.desktop.in file in the repository. It registers the following mime-types:MimeType=application/vnd.geo+json;x-scheme-handler/geo;This means that Maps will be available to handle geo: URIs.Maybe you need to install Maps on your system proper for it to take place. And maybe also run 'update-desktop-database' or something.For me when I clock geo: URIs for instance in the browser (maybe from the Geo URI wikipedia page) at least firefox suggests opening in Maps.Nice :) Maybe we can make placeFormatter and placeStore behave better?If it is not to messy we should be able to check if (!imports.storedRoute)or if (!imports.application) or similar checks and work around it?Or just structure the code differently. There shouldn't be any inherently depending on those things in the file. Alltho, maybe we need the storedRoute class? And the Place class as common code to be used in the service as well?Since the placeStore depends on saving Place and storedRoute is a subclass of Place?And in placeStore is application used for notifications? I am to lazy to check :)Great Work!(In reply to Jonas Danielsson from)Yeah, I have made small changes to PlaceStore, StoredRoute and geoclue, now they are free from import problems. I.ll submit a temporary commit so maybe you can review those changes.I think atleast these classes will be used.place, placeFormatter, placeMarker, placeStore, route, routeQuery, geoclue, storedRouteIf(!imports.application) gives error if application.js is absent from gresource.xml so I used try catch.CreatedRemove necesstiy of importing applicationplaceStore, storedRoute classes both imports 'application'. This makesthem unusable if application is not available in imports. Now it is notnecessory for placeStore and storedRoute classes to import application.Review of:Thanks Alaf!::: src/geoclue.js@@ -25,3 @@ const Mainloop = imports.mainloop; -const Application = imports.application;Hah! Nice catch!::: src/placeStore.js@@ +69,3 @@+ this._recentRoutesLimit = _RECENT_ROUTE_LIMIT;+ }+Hmm, how about we instead add a parameter to this class?So in application.js were the place store is created we go:new PlaceStore.PlaceStore({ recentPlacesLimit: ..., recentRoutesLimit: ... });And we do not need to import application anymore in placeStore. Seems nicer that this?::: src/storedRoute.js@@ +57,3 @@ this._containsCurrentLocation = false; places.forEach((function(place) {+ if (place === geoclue.place)Will this work? The point for this is to see if the route contains the current location. But will this new geoclue object you create really have time to get the current location? Seems fishy.Maybe do the same thing here and send the currentLocation as a parameter?Review of:::: src/storedRoute.js@@ +57,3 @@ this._containsCurrentLocation = false; places.forEach((function(place) {+ if (place === geoclue.place)And in the searchProvider case it could just be null, since we will not be adding any new storedRoute from the searchProvider, the check will not be important, since it will always be false. So it could be:if (place === currentPlace)instead.Review of:::: src/placeStore.js@@ +69,3 @@+ this._recentRoutesLimit = _RECENT_ROUTE_LIMIT;+ }+ };Ah, yes, you are right. That would be more cleaner. It will also work because we construct placeStore only once. (in application.js ~174)::: src/storedRoute.js@@ +57,3 @@ this._containsCurrentLocation = false; places.forEach((function(place) {+ if (place === geoclue.place)I am not sure, since current location may change after creation of storedRoute object. I think that is why its being dynamically taken from application.geoclue.place.?But yes you maybe right about geoclue obj not having enough time to acquire current location. Should I ask someone from geoclue, about how long it might take? or if we can 'make obj and take location' on the go??Also on a side note: containsCurrentLocation is only used in _addRecentRoute in placeStore.jsI wasn't able understood why we don't store route if it contains current location? or basically why are we checking for current location. maybe I am missing something?Review of:::: src/storedRoute.js@@ +57,3 @@ this._containsCurrentLocation = false; places.forEach((function(place) {+ if (place === geoclue.place)Yes, the current location may change, you are right, so we need to send in a geoclue object instead, so make the storedRoute take a geoclue object, and if it is null then we know we do not need to care.The point is that when we are in searchProvider we will not store a new route, and this code guards against storing the current location.The reason we do not want to store the current location, is because that location changes. Right? And we do not have a good way of dealing with that. The name current location will be meaning less when the current location changes. And we do not want to reverse geocode it and store that because the result might be to far away to be meaningful.But in your case, sending the geoclue object as a construction parameter to storedRoute makes sense. You do not need to import application or geoclue and if geoclue-object is null you do not need to check if it is currentLocation, you will know it is not.There is one more thing I just noticed. StoredRoute also contains a static method, which returns a new storedRoute. in that scenario we can not give it a geoclue object. and that might induce problems.Currentlocation is checked via stored.containsCurrentLocation, inside placeStore.(~146)So why not give a 'geoclue object' to placeStore as a param. Later call stored.containsCurrentLocation(geoclue.place)Inside storedRoute getter containsCurrentLocation(place) check if stored places contains the given place.And also then maybe we can rename containsCurrentLocation to containsLocation.(In reply to Alaf from)Well, from the searchProvider we will only ever read from the placeStore, never add to. In the placeStore there is no place that is the currentLocation. So the geoclue object is never needed from searchProvider and can always be null.No storedRoute will ever have the currentLocation, that is what the checks is all about.I think not, just pass null in the constructor from searchProvider, and do not bother about the static method, just pass null as geoclue (or not pass it at all so that it is undefined) from the static method as well.Thanks for pointing, it out, I think I got way too deep in it. Okay. Sure. Also, What properties should we match against in our search. Weather uses name, city, country.Our available options are :name, street_address, street, building, postal_code, area, town, state, county, country, country_code, continentI suggest name, street, area, town, country. And do also have to look in contacts? I think no. right.Createdthis is a temp commit(In reply to Alaf from)Hmm, I think maybe a simpler approach? In my mind this should feel like the search in Maps. So why not do exactly like in Maps and use the match-function in place.js? It only matches against name, but I feel that is good enough.No, contacts is Contacts business :)Review of:Looks promising!I know it is temp, I added some comments.Thanks!::: data/Makefile.am@@ +15,3 @@+org.gnome.Maps.BackgroundService.data.gresource: org.gnome.Maps.BackgroundService.data.gresource.xml $(service_resource_files)+ $(AM_V_GEN) $(GLIB_COMPILE_RESOURCES) --target=$@ --sourcedir=$(srcdir) $<+Could this be formatted prettier? Like the sed row below maybe?@@ +49,2 @@ servicedir = $(datadir)/dbus-1/services+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.serviceBackgroundService.service? Background.service? background.service?@@ +50,3 @@+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.service++searchproviderdir = $(datadir)/gnome-shell/search-providersIs this what other use? why not just search-provider? (will we ever have more than one?)@@ +57,3 @@ org.gnome.Maps.service.in \+ org.gnome.Maps.BackgroundService.service.in \+ org.gnome.Maps.BackgroundService.data.gresource.xml \Align the \ here and below::: data/ShellSearchProvider2.xml@@ +1,1 @@+<node>Can this be named anything?::: src/Makefile.am@@ +1,1 @@ NULL =Can we have a src/service/Makefile.am for this stuff?::: src/application.js@@ +176,3 @@+ placeStore = new PlaceStore.PlaceStore({ recentPlacesLimit: _recentPlacesLimit,+ recentRoutesLimit: _recentRoutesLimit,+ geoclue: this.geoclue });All these stuff as a separate commit, right?::: src/placeStore.js@@ +274,3 @@+ // this.set(iter, [Columns.ICON], [pixbuf]);+ // }).bind(this));+ // }We could have a parameter to placeStore that says it is in background-mode?::: src/service/main.js@@ +37,3 @@+ 'GtkClutter': '1.0',+ 'Rest': '0.7',+ 'Soup': '2.4' });This list can't be true, right?@@ +60,3 @@++const BackgroundService = new Lang.Class({+ Name: 'MapsBackgroundService',Why different name?@@ +66,3 @@+ this.parent({ application_id: pkg.name,+ flags: Gio.ApplicationFlags.IS_SERVICE,+ inactivity_timeout: 60000 });What does this timeout do? is it ms? s? make it a const and motivate the length.@@ +67,3 @@+ flags: Gio.ApplicationFlags.IS_SERVICE,+ inactivity_timeout: 60000 });+ GLib.set_application_name(_("Maps"));This will change?@@ +85,3 @@+ _initPlaceStore: function() {+ let _recentPlacesLimit = settings.get('recent-places-limit');+ let _recentRoutesLimit = settings.get('recent-routes-limit');We could also set -1 for both of these I think, then you will not need settings?@@ +94,3 @@+ } catch (e) {+ log('Failed to parse Maps places file, ' ++ 'subsequent writes will overwrite the file!');this log is not needed of course.@@ +97,3 @@+ }++ this.model = placeStore;No need for the placeStore temp variable.::: src/service/searchProvider.js@@ +32,3 @@++const SearchProvider = new Lang.Class({+ Name: 'MapsSearchProvider',Different name?@@ +74,3 @@+ placeStore.foreach((function(model, path, iter) {+ let p = model.get_value(iter, PlaceStore.Columns.PLACE);+ if (p.name.indexOf(terms)> -1) {if (p.match(terms)) ?what is terms?(In reply to Jonas Danielsson from)So that is place.match() and maybe a regex to see if it matches dd.dd, dd.dd type of lat/lon combo?Review of:Thank you, Jonas for the review.::: data/Makefile.am@@ +15,3 @@+org.gnome.Maps.BackgroundService.data.gresource: org.gnome.Maps.BackgroundService.data.gresource.xml $(service_resource_files)+ $(AM_V_GEN) $(GLIB_COMPILE_RESOURCES) --target=$@ --sourcedir=$(srcdir) $<+yeah. okay.@@ +49,2 @@ servicedir = $(datadir)/dbus-1/services+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.serviceWeather uses this naming convention. Also since we also have BackgroundService.gresource@@ +50,3 @@+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.service++searchproviderdir = $(datadir)/gnome-shell/search-providersundefined@@ +57,3 @@ org.gnome.Maps.service.in \+ org.gnome.Maps.BackgroundService.service.in \+ org.gnome.Maps.BackgroundService.data.gresource.xml \okay.::: src/application.js@@ +176,3 @@+ placeStore = new PlaceStore.PlaceStore({ recentPlacesLimit: _recentPlacesLimit,+ recentRoutesLimit: _recentRoutesLimit,+ geoclue: this.geoclue });Yup. Should I submit now? or after finishing everything?::: src/org.gnome.Maps.BackgroundService.src.gresource.xml@@ +10,3 @@+ <file>route.js</file>+ <file>routeQuery.js</file>+ <file>geoclue.js</file>I will also minimize this list, once service is up and running.::: src/placeStore.js@@ +274,3 @@+ // this.set(iter, [Columns.ICON], [pixbuf]);+ // }).bind(this));+ // so commenting it.yeah, okay.::: src/service/main.js@@ +37,3 @@+ 'GtkClutter': '1.0',+ 'Rest': '0.7',+ 'Soup': '2.4' });Hahaha, right.@@ +60,3 @@++const BackgroundService = new Lang.Class({+ Name: 'MapsBackgroundService',Again, followed same naming convention as weather.@@ +66,3 @@+ this.parent({ application_id: pkg.name,+ flags: Gio.ApplicationFlags.IS_SERVICE,+ inactivity_timeout: 60000 });It is ms, but I don't know what exactly inactivity means here. Weather had it. I think this is max time in which we should return results.@@ +85,3 @@+ _initPlaceStore: function() {+ let _recentPlacesLimit = settings.get('recent-places-limit');+ let _recentRoutesLimit = settings.get('recent-routes-limit');would -1 will mean placelimit = infinity / all places ?@@ +94,3 @@+ } catch (e) {+ log('Failed to parse Maps places file, ' ++ 'subsequent writes will overwrite the file!');yeah, although main maps application also loads in the same way.@@ +97,3 @@+ }++ this.model = placeStore;okay.::: src/service/searchProvider.js@@ +32,3 @@++const SearchProvider = new Lang.Class({+ Name: 'MapsSearchProvider',Again, same convention as weather.@@ +74,3 @@+ placeStore.foreach((function(model, path, iter) {+ let p = model.get_value(iter, PlaceStore.Columns.PLACE);+ if (p.name.indexOf(terms)> -1) {Our search term, coming from user. basically a string.@@ +50,3 @@+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.service++searchproviderdir = $(datadir)/gnome-shell/search-providersyes, actually this is standard place where we need to register our service with gnome-shell.Review of:::: src/application.js@@ +176,3 @@+ placeStore = new PlaceStore.PlaceStore({ recentPlacesLimit: _recentPlacesLimit,+ recentRoutesLimit: _recentRoutesLimit,+ geoclue: this.geoclue });Update the other patch in this bug and that can go in before all this.::: src/service/main.js@@ +60,3 @@++const BackgroundService = new Lang.Class({+ Name: 'MapsBackgroundService',Follow the Maps convention instead :)The name and the class should have the same name. BackgroundService... it does not say much ... but ok use it for both.@@ +66,3 @@+ this.parent({ application_id: pkg.name,+ flags: Gio.ApplicationFlags.IS_SERVICE,+ inactivity_timeout: 60000 });Can we find out?@@ +85,3 @@+ _initPlaceStore: function() {+ let _recentPlacesLimit = settings.get('recent-places-limit');+ let _recentRoutesLimit = settings.get('recent-routes-limit');recentLimits are really only used when adding, to make sure we do not add to many. It is also used when reading from file the first time. Setting to -1 will bypass (as the code reads now) and add all there is in the file. And since we do not add anything from this backgroundService it will be the same as the limit from the application, right?@@ +94,3 @@+ } catch (e) {+ log('Failed to parse Maps places file, ' ++ 'subsequent writes will overwrite the file!');Yes, but there are no writes from the background service... and no console?::: src/service/searchProvider.js@@ +32,3 @@++const SearchProvider = new Lang.Class({+ Name: 'MapsSearchProvider',Use Maps convention instead.SearchProvider / SearchProvider, we know we are Maps.@@ +74,3 @@+ placeStore.foreach((function(model, path, iter) {+ let p = model.get_value(iter, PlaceStore.Columns.PLACE);+ if (p.name.indexOf(terms)> -1) {Ok then just use p.match.(In reply to Alaf from)Ok!CreatedRemove necesstiy of importing applicationplaceStore, storedRoute classes both imports 'application'. This makesthem unusable if application is not available in imports. Now it is notnecessory for placeStore and storedRoute classes to import application.Review of:Thanks Alaf, I will fix this up a bit (see comments) and push it!::: src/application.js@@ +172,3 @@ _initPlaceStore: function() {+ let _recentPlacesLimit = settings.get('recent-places-limit');+ let _recentRoutesLimit = settings.get('recent-routes-limit');no need for _ prefix here, and not need for temp variables.@@ +176,3 @@+ placeStore = new PlaceStore.PlaceStore({ recentPlacesLimit: _recentPlacesLimit,+ recentRoutesLimit: _recentRoutesLimit,+ geoclue: this.geoclue });No need to include geoclue here, right?::: src/storedRoute.js@@ +58,3 @@++ let currentLocation = null;+ if(this.geoclue)if (...)Yup, sorry somehow missed that. Too many files and branches. _/\_CreatedSceen castScreen cast.(In reply to Alaf from)Cool! nice work!How should we match lat/long ?right now I am doing this.......and what about accuracy level? if query string is 23.5,77.41666723.5,77.41666723.5,77.41666823.5,77.416623.5,77.41which ones should be matched??Same as in Maps I would suggest.Maybe move that somewhere?Createdworkable demo patch with this, shell search is almost complete 2 things remains, better lat/long comparison and starting maps.I think _parseCoordinates, and _validateCoordinates both will do good in place.js.Along with regex.Review of:Thanks!Some minor comments below, no in-depth review.::: data/Makefile.am@@ +84,3 @@ $(NULL) # For uninstalled usePlease take care to keep all \ aligned at 72 chars, you have created quite a mess here! :)::: src/Makefile.am@@ +72,3 @@ $(NULL) install-exec-hook:Same in this file, keep the \ aligned.::: src/application.js@@ +156,3 @@++ // here think we might get a problem, since _initPlaceStore is called after adding action+So, yes, I think so, we can have a state property on placeStore, and if it is done then look the place up, and if not connect to 'notify::state'.@@ +234,3 @@ onActivate: this._onOsmAccountSetupActivate.bind(this)+ },+ 'show-place':{I think maybe show-stored ? Since it will not show a arbitrary place, right? And we might want an actual show-place sometime::: src/org.gnome.Maps.BackgroundService.in@@ +1,2 @@+#!@GJS@+imports.package.init({ name: "gnome-maps",is this the correct name?::: src/service/searchProvider.js@@ +83,3 @@+ if(isLatLong) {+ let coordinates = [p.location.longitude, p.location.latitude].join(',');+ if (queryString == coordinates) {===@@ +145,3 @@+ },++ _activateAction: function(action, parameter, timestamp) {Why not use the one from Utils?(In reply to Alaf from)Sure, agreed, we can move it to place.js and use it in background as well.Review of:::: data/Makefile.am@@ +84,3 @@ $(NULL) # For uninstalled useOops, I guess my sublime text doesn't play well with make files. I.ll make it pretty again.::: src/org.gnome.Maps.BackgroundService.in@@ +1,2 @@+#!@GJS@+imports.package.init({ name: "gnome-maps",Yes, anything other than this does not work.gives this error::: src/service/searchProvider.js@@ +145,3 @@+ },++ _activateAction: function(action, parameter, timestamp) {see comment below.@@ +192,3 @@+ // new GLib.Variant('s', locationUrl),+ // timestamp);+188 // the way this gets platform data somehow breaks it in background. 189 // using activateAction from weather for now.190 // Utils.activateAction('org.gnome.Maps',191 // 'show-location',192 // new GLib.Variant('s', locationUrl),193 // timestamp);I am suspecting this lineReview of:::: src/service/searchProvider.js@@ +192,3 @@+ // new GLib.Variant('s', locationUrl),+ // timestamp);+I want to use the one from Utils, so maybe we can make that one work instead of this? If you print the desktop-startup-id here and from Utils (when starting whether for instance) what is the difference? What do we need context for in Utils? Can we get it without going through display?yes, I agree using utils one is better. okay, I.ll investigate.Createdmoved parseCoordinates, validateCoordinates to place.jsparseCoordinates, validateCoordinates and coordinate regex are movedto place.js. Now we can use them in background service.Review of:Thanks!Other than the mis-file this looks great!But the commit message needs some love. Maybe skip the the message body all together.And make the subject:"Move parsing of coordinates o Place module" ?::: src/org.gnome.Maps.BackgroundService@@ +4,3 @@+ prefix: "/home/alaf/jhbuild/install",+ libdir: "/home/alaf/jhbuild/install/lib" });+imports.package.run(imports.service.main); No newline at end of fileThis file should not be here, right?oho. sorry, too many file and branches. okay, I.ll fix that.Createdmove parsing of coordinates to Place modulePlease obsolete old patches when adding new ones. If you are using git bz and have changed the name of the commit you can use "git attach -e ..." to edit which patch the new one obsoletes!Review of:Thanks!For now, clicking on results give this in "journalctl -f"Any idea, why this is happening?PS. utils.activate_action works.Alaf, with what patch and how do I reproduce the issue?Createdfull patch upto nowSteps to reporduceRegister the search provider with GNOME Shell by dropping a file inwhich is /usr/share/gnome-shell/search-providersfile contents:[Shell Search Provider]DesktopId=org.gnome.Maps.desktopBusName=org.gnome.Maps.BackgroundServiceObjectPath=/org/gnome/Maps/BackgroundServiceVersion=2DefaultDisabled=truesave it as org.gnome.Maps.search-provider.inithe go to setting and turn ON search for maps.now go to jhbuild/checkout/gnome-maps/srcand run ./org.gnome.Maps.BackgroundServicealso moniter journalctl -f from another terminal.search somthing in shell-search, so that a maps result is displayedopen it. wait for 10 seconds.Createdfull patch upto nowI will not review this more until patches that are obsolete are marked as such and patches that are meant for review / check applies on master.it was for reproducing the error.(In reply to Alaf from)I know but it does not apply with git bz apply and using git bz apply is really hard when old patches are around, please clean up in this bug.Createdfull patch upto nowReview of:reviewed.Review of:reviewed.Thanks Alaf!please mark the patches at the top of this bug that are not needed anymore as obosoleteotherwise git bz will try to apply them and it makes the bug hard to follow.Do you use git-bz? If not please start, it will help out alot!The following patches seems not needed anymore and should be marked obsolete:- moved parseCoordinates, validateCoordinates to place.js- workable demo patch with this, shell search is almost complete 2 things remains, better lat/long comparison and starting maps.- this is a temp commit I understand that they were temporary, but they interfere.When I go:$ git bz apply 744032 from the command line to fetch the patches, all are sugested and I have to edit a list, and guess which apply.click details => edit details then mark as obsolete, it is burdensome to do in web-ui, easier with git-bz command line tool.Createdmaking all obsolete.Createdfull$ LANG=en_US git bz apply 744032- GNOME Shell search provider319074 - fullApply? [(y)es, (n)o, (i)nteractive] yApplying: fullfatal: sha1 information is lacking or useless (src/application.js).Repository lacks necessary blobs to fall back on 3-way merge.Cannot fall back to three-way merge.Patch failed at 0001 fullThe copy of the patch that failed is found in: /home/jonasdn/jhbuild/checkout/gnome-maps/.git/rebase-apply/patchWhen you have resolved this problem run "git bz apply --continue".If you would prefer to skip this patch, instead run "git bz apply --skip".To restore the original branch and stop patching run "git bz apply --abort".Patch left in /tmp/full-Jl46ZZ.patchCreatedshell serviceThanks, I got results in shell! But not able to activate action, right. Are you albe to launch maps from the shell at all?Btw is the ico nreally working, seems I got generic for all matches?Yes, I am able to launch maps from shell. jhbuild shellgnome-mapsand alsojhbuild shellgnome-maps/src/ ./org.gnome.MapsAh, yes I now realize Icons are broken. Thanks for pointing it out.Maps is not opening because activate action opens system default maps. Which does not have "show-stored" action. what do I do now? :/ How do I replace my default maps with jhbuild one?CreatedGNOME Shell search providerReview of:Thanks!Some early comments::: src/application.js@@ +155,3 @@++ let id = parameter.deep_unpack();+ this._createWindow();I do not like the look of this, maybe change so that the get method just takes the id?::: src/mapView.js@@ +110,3 @@ view.kinetic_mode = true; + if (!opening && !Application.openingStoredPlace)I do not like this trend, maybe we should switch to instead something like if (normalStartup) { ... }@@ +343,3 @@+ this._placeLayer.add_marker(marker);+ new MapWalker.MapWalker(place, this).goTo(true);+ },this function is pretty much exactly the same as showSearchResult, maybe that could be showPlace instead? and used for both?::: src/service/main.js@@ +32,3 @@+const Gtk = imports.gi.Gtk;+const GtkClutter = imports.gi.GtkClutter;+const Maps = imports.gi.GnomeMaps;What are Maps, GtkClutter and GObject used for?@@ +41,3 @@+// amount if time after which we close process after showing results.+// in MS+const INACTIVITY_TIMOUT = 60 * 1000; // 60 secsSeems like a long time?@@ +57,3 @@+ flags: Gio.ApplicationFlags.IS_SERVICE,+ inactivity_timeout: INACTIVITY_TIMOUT });+ GLib.set_application_name(_("Maps"));Is the name really Maps? And why translated? Who is going to see this?@@ +73,3 @@+ recentRoutesLimit: -1,+ inBackground: true });+ placeStore.load();No try/catch here? What happens if the file is malformed?@@ +74,3 @@+ inBackground: true });+ placeStore.load();+Remove this new line@@ +80,3 @@+ vfunc_dbus_register: function(connection, path) {+ this.parent(connection, path);+No new line::: src/service/searchProvider.js@@ +24,3 @@+const Lang = imports.lang;++const Settings = imports.settings;Not used@@ +37,3 @@+ _init: function(application) {+ this._app = application;+No new line@@ +49,3 @@+ },++ GetInitialResultSetAsync: function(params, invocation) {Why are we using ThisStyle on these functions?@@ +52,3 @@+ this._app.hold();++No new lines@@ +83,3 @@+ // print(p.location.longitude+","+p.location.latitude + "was saved");+ };+ } else if(p.match(queryString)) {check all your ifs and fors and whiles, we want a space before paranthesis.if (for (while (...@@ +90,3 @@++ this._app.release();+no new line@@ +108,3 @@+ }+ this._app.release();+No new line@@ +133,3 @@++ this._app.release();+no new line::: src/utils.js@@ +134,2 @@ function _getPlatformData(appId, timestamp) {+ // this breaks in background.No comments like this, either we change or we do not.@@ +145,3 @@ let objectPath = '/' + appId.replace(/\./g, '/');+ // let platformData = _getPlatformData(appId, timestamp);+ let platformData = {'desktop-startup-id': new GLib.Variant('s', '_TIME' + timestamp) };Not sure I like this, will there be a difference in the string? Please format it better if keeping.Review of:::: src/application.js@@ +155,3 @@++ let id = parameter.deep_unpack();+ this._createWindow();okay, I.ll change placeStore.get to take either Id or a Place.::: src/mapView.js@@ +110,3 @@ view.kinetic_mode = true; + if (!opening && !Application.openingStoredPlace)Ok.@@ +343,3 @@+ this._placeLayer.add_marker(marker);+ new MapWalker.MapWalker(place, this).goTo(true);+ },yeah, okay.::: src/service/main.js@@ +41,3 @@+// amount if time after which we close process after showing results.+// in MS+const INACTIVITY_TIMOUT = 60 * 1000; // 60 secsDocs says 10 seconds should be default. so now 10 sec.@@ +73,3 @@+ recentRoutesLimit: -1,+ inBackground: true });+ placeStore.load();Good point. I guess we should just quit if file is malformed as nothing to search form then.::: src/service/searchProvider.js@@ +49,3 @@+ },++ GetInitialResultSetAsync: function(params, invocation) {We are implementing an Interface, so we have to keep same names.CreatedGNOME Shell search providerReview of:Thanks!::: data/Makefile.am@@ +16,3 @@+ --sourcedir=$(srcdir) \+ --generate-dependencies \+ $(srcdir)/org.gnome.Maps.BackgroundService.data.gresource.xml \Could we use a variable to avoid this long line?@@ +57,2 @@ servicedir = $(datadir)/dbus-1/services+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.serviceCan we split this to two lines like in other places?::: src/Makefile.am@@ +30,3 @@+ --target=$@ \+ --sourcedir=$(srcdir)/service \+ --sourcedir=$(srcdir) $<Why are these both here and in data/ ?::: src/application.js@@ +54,3 @@ let contactStore = null; let osmEdit = null;+let normalStartup = true;Maybe split this out in a separate patch?Do we not need this for --local option as well, for instance?::: src/mapView.js@@ +394,3 @@ }, + showPlace: function(place, animation) {This should be a patch of its own::: src/org.gnome.Maps.BackgroundService.src.gresource.xml@@ +16,3 @@+ <file>settings.js</file>+ <file>translations.js</file>+ <file>utils.js</file>Do we really need all this?::: src/placeStore.js@@ +265,3 @@ added]); + if (place.icon !== null && !this._inBackground) {Why couldn't we load icons? Don't we need to be able to do this to have icons working?@@ +278,3 @@++ if(place.uniqueID)+ uniqueID = place.uniqueID;What is going on here? Why is uniqueID set to the place-object?::: src/service/main.js@@ +57,3 @@++ if (!pkg.moduledir.startsWith('resource://'))+ this.debug = true;Is this ever used?@@ +71,3 @@+ placeStore.load();+ } catch(e) {+ this.quit();So what happens here? The search provider can not work until we have a places file?Review of:::: src/mapView.js@@ +394,3 @@ }, + showPlace: function(place, animation) {okay.::: src/placeStore.js@@ +278,3 @@++ if(place.uniqueID)+ uniqueID = place.uniqueID;if we call placeStore.get(idA) then uniqueID is directly assigned to idA,if we have called placeStore.get(place) then, uniqueId is assigned to place.uniqueID. So now we can call it both ways. At least that's what I tried to do. how should I make it better?::: src/service/main.js@@ +71,3 @@+ placeStore.load();+ } catch(e) {+ this.quit();If we don't have places file, what we will compare search string to !?Createdmapview: goto stored location only if starting maps normallyCreatedmapView: rename showSearchResult to showPlaceReview of:Thanks!::: src/application.js@@ +54,3 @@ let contactStore = null; let osmEdit = null;+let normalStartup = true;Why add it here? It is never used in the context of an App-global variable?You could add it as a member to the class. Or you could go all the way and have it here.Then you do not have to send it to mainWindow at all and instead go:if (Application.normalStartup) { ... }in mapView.Review of:I still wonder though, do we not need to have normalStartup = false;when options.contains('local') is true?Review of:Thanks Alaf!Createdmapview: goto stored location only if starting maps normallyReview of:I kind of liked the idea of setting it as a global inapplication, sameway as osmEdit and stuff. And then we can remove all trace of this in mainWindow and mapView just checks Application.normalStartup.It can be true by default.And application set:normalStartup = false;In vfunc_open and when the --local flag is found.::: src/mainWindow.js@@ +75,3 @@+ if (this.application.local_tile_path) {+ _mapType = MapView.MapType.LOCAL;+ this.application.normalStartup = false;? why?Createdmapview: goto stored location only if starting maps normallyReview of:Looks finReview of:::: data/Makefile.am@@ +16,3 @@+ --sourcedir=$(srcdir) \+ --generate-dependencies \+ $(srcdir)/org.gnome.Maps.BackgroundService.data.gresource.xml \okay::: src/org.gnome.Maps.BackgroundService.src.gresource.xml@@ +16,3 @@+ <file>settings.js</file>+ <file>translations.js</file>+ <file>utils.js</file>Although we don't directly use translations but its imported in place.js. settings I.ll remove.::: src/placeStore.js@@ +265,3 @@ added]); + if (place.icon !== null && !this._inBackground) {with your patch in 761533, icons work. And no, we don't need to load icon pixbuf in background service. Its never used.CreatedGNOME Shell search providerReview of:Thanks!Looking good!::: data/Makefile.am@@ +60,2 @@ servicedir = $(datadir)/dbus-1/services+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.serviceservice_data = \... \...::: src/Makefile.am@@ +22,3 @@+ --sourcedir=$(srcdir) \+ --generate-dependencies \+ $(srcdir)/org.gnome.Maps.BackgroundService.src.gresource.xml \why does this need a $(srcdir) ? you are passing $(srcdir) to the program?::: src/application.js@@ +154,3 @@+ this._createWindow();+ this._checkNetwork();+ this._mainWindow.present();Is this really needed? We are activating an action on Maps, this should already be done I think.These three should be removed.@@ +158,3 @@+ let id = parameter.deep_unpack();+ let place = placeStore.get(id);+ this._checkNetwork();missing space? place, true::: src/placeStore.js@@ +62,3 @@ delete params.recentRoutesLimit; + this._inBackground = params.inBackground;I think I prefer loadIcon@@ +265,3 @@ added]); + if (place.icon !== null && !this._inBackground) {then this becomes && this._loadIcon)@@ +278,3 @@++ if(place.uniqueID)+ uniqueID = place.uniqueID;I do not like this trickery at all it is magicDo a getById function instead. Or convert all other places to just pass the id, if that is all that is needed.::: src/service/main.js@@ +20,3 @@+ */++pkg.initGettext();What is getting translated?@@ +37,3 @@++// amount if time (in ms) for which service should wait for the calling message to arrive+const INACTIVITY_TIMOUT = 10 * 1000; // 10 secs10 seconds seems like a lot?@@ +69,3 @@+ } catch(e) {+ this.quit();+ }So regarding this. This means the background service will never work on the first session, right? We could add a Gio.FileMonitor if the file does not exists and try to load it when it does?And until then could we not match against lat/lon?@@ +85,3 @@++ Utils.addActions(this, {+ 'quit': { onActivate: this._onQuit.bind(this) }});Do we really need this? What activates this action?@@ +91,3 @@+ vfunc_activate: function() {+ // do nothing, this is a background service+ },Do we then need to have it defined?::: src/service/searchProvider.js@@ +29,3 @@+const PlaceFormatter = imports.placeFormatter;++const SearchProviderInterface = Gio.resources_lookup_data('/org/gnome/shell/ShellSearchProvider2.xml', 0).toArray().toString();This is not pretty. Are there no better way of doing this?Could we atleast set the path of the shellsearchprovider to intermediate variable?const _searchProviderPath = '/org...@@ +77,3 @@++ let ret = [];+ for (let i = 0; i < previous.length; i++) {Can't we go previous.forEach(function(something) {...});?Or at least for (let i in previous)@@ +92,3 @@+ GetResultMetas: function(identifiers) {+ this._app.hold();+Remove empty line@@ +96,3 @@++ for (let i = 0; i < identifiers.length; i++) {+empty line@@ +129,3 @@+ LaunchSearch: function(terms, timestamp) {+ this._app.hold();+empty@@ +130,3 @@+ this._app.hold();++ this._activateAction('show-stored', new GLib.Variant('s', terms.join(' ')), timestamp);? where is thus._activateAction?::: src/utils.js@@ +135,2 @@ let info = Gio.DesktopAppInfo.new(appId + '.desktop');+ let id = new GLib.Variant('s', [info.get_id(),'_TIME',timestamp].join('-'));And you are sure this is the same as getting the launch context? Do we get the right notifications from the shell on launch?Review of:::: data/Makefile.am@@ +60,2 @@ servicedir = $(datadir)/dbus-1/services+service_DATA = org.gnome.Maps.service org.gnome.Maps.BackgroundService.servicealready present naming convention::: src/Makefile.am@@ +22,3 @@+ --sourcedir=$(srcdir) \+ --generate-dependencies \+ $(srcdir)/org.gnome.Maps.BackgroundService.src.gresource.xml \nope. I am passing gresource.xml to resource_files::: src/application.js@@ +154,3 @@+ this._createWindow();+ this._checkNetwork();+ this._mainWindow.present();I am not sure. These three are also present in '_onShowContactActivate'As it appears, 'vfunc_activate' should be called somewhere when activating action, but its not called. if we remove these three lines, application crashes._onShowContactActivatevfunc_activate@@ +158,3 @@+ let id = parameter.deep_unpack();+ let place = placeStore.get(id);+ this._checkNetwork();oops.::: src/placeStore.js@@ +62,3 @@ delete params.recentRoutesLimit; + this._inBackground = params.inBackground;okay :)@@ +278,3 @@++ if(place.uniqueID)+ uniqueID = place.uniqueID;okay, I.ll try both ways, whatever changes least, I.ll do.::: src/service/main.js@@ +69,3 @@+ } catch(e) {+ this.quit();+ }I am not sure that we need to use a file monitor. I think background services are restarted every time user searches and later killed(quit) after inactivity. So even if user has recent searches it will work.how should we match against lat/lon without having anything in place store? ah maybe display one result of same lat/lon back to user, where he can click to go to that lat/lon ? something like that?::: src/service/searchProvider.js@@ +29,3 @@+const PlaceFormatter = imports.placeFormatter;++const SearchProviderInterface = Gio.resources_lookup_data('/org/gnome/shell/ShellSearchProvider2.xml', 0).toArray().toString();okay.@@ +77,3 @@++ let ret = [];+ for (let i = 0; i < previous.length; i++) {sure.@@ +130,3 @@+ this._app.hold();++ this._activateAction('show-stored', new GLib.Variant('s', terms.join(' ')), timestamp);Haww !!! thanks for pointing it out. I almost missed it. LaunchSearch is called when the user clicks on the provider icon to display more search results in the application. tl:dr we need another action something like 'show-search', which should show search results with current terms in the application.::: src/utils.js@@ +135,2 @@ let info = Gio.DesktopAppInfo.new(appId + '.desktop');+ let id = new GLib.Variant('s', [info.get_id(),'_TIME',timestamp].join('-'));Strings produced by both are different.I am not sure what difference does it make (Need expert advice here!). but one thing is certain, Gdk.Display does not work in background. Also this approach I have taken from gnome-weather.Review of:::: src/service/main.js@@ +69,3 @@+ } catch(e) {+ this.quit();+ }Yes, that is how I always imagined lat/lon match working. Not against placeStore but showing arbitrary lat/lon in Maps::: src/utils.js@@ +135,2 @@ let info = Gio.DesktopAppInfo.new(appId + '.desktop');+ let id = new GLib.Variant('s', [info.get_id(),'_TIME',timestamp].join('-'));Ok, I am scared of regression in the opening of stuff from Maps. The values here somehow make sure we get the correct timing and animations and popup/popunder from shell I think. Not sure what best way is. Can we try to get the launch context from some other way that does not involve display?what does the gapplication-tool do? It is a commandline toolReview of:::: src/application.js@@ +158,3 @@+ let id = parameter.deep_unpack();+ let place = placeStore.get(id);+ this._checkNetwork();And what happends if this is a stored route?Review of:::: src/application.js@@ +158,3 @@+ let id = parameter.deep_unpack();+ let place = placeStore.get(id);+ this._checkNetwork();And what happends if this is a stored route?CreatedGNOME Shell search providerCreatedGNOME Shell search providerReview of:Thanks!Some comments below.I want this to match against places _and_ routes in the place store. I do not want to match against latitude longitude of stuff in the place store, what would be the use-case for that?I'd rather not match lat/lon at all. I do want to match against recent routes however, the same way we do in the application, and show the same information we do, and open the route.::: src/application.js@@ +177,3 @@+ place = new Place.Place({ store: false,+ location: location });+ };I do not like this magic "look at the length of args" can't we have two parameters to the action instead? Or maybe better, two actions? One showLocation that takes latitude/longitude parameters. And one showStored that takes an uniqueId of the placeStore and the type as parameters, so we know if it is a route or a place.@@ +181,3 @@+ },++ _onShowSearch:function (action, parameter) {No, we do not want this, do a _onShowLocation instead that has two parameters one lat one lon.::: src/placeStore.js@@ +286,3 @@+ }+ return false;+ }).bind(this));I see no reason this needs to bind to this?@@ +288,3 @@+ }).bind(this));+ return storedPlace;+ },I do not see the point of this, a user will never know a latitude/longitude pair and want to match against places in the place store... avoid feature creep at all cost. No code without use-case.@@ +292,3 @@+ getFromId: function(uniqueID) {+ return this.get({ uniqueID: uniqueID });+ },Does the get: function(place) below ever need anything other than the id from place? Couldn't we convert it to take an id instead? Then we do not need this hack?And convert all callers.::: src/service/main.js@@ +83,3 @@++ Utils.addActions(this, {+ 'quit': { onActivate: this._onQuit.bind(this) }});Who sends this action?::: src/service/searchProvider.js@@ +63,3 @@+ let p = model.get_value(iter, PlaceStore.Columns.PLACE);+ let type = model.get_value(iter, PlaceStore.Columns.TYPE);+ if (type === PlaceStore.PlaceType.RECENT_ROUTE) return;What about favorite route? And why can't we match against routes? I think that would be my biggest use-case of this search-provider.@@ +78,3 @@+ if (Place.Place.validateCoordinates(lat, lon)) {+ let data = [queryString, PlaceStore.PlaceType.LATLONG].join(',');+ ret.push(data);Just open this location if the user push, no search from placeStore, use a show-location action.@@ +144,3 @@+ this._app.hold();+ Utils.activateAction('org.gnome.Maps',+ 'show-search',show-location with lat/lonReview of:::: src/application.js@@ +178,3 @@+ location: location });+ };+ if (args.length === 2) {okay. I split it in two actions.@@ +181,3 @@+ },++ // place-id,typeah no, onShow Search is different from lat/long thing or place thing. It passes only the search terms (query string that user type) and search them in placeEntery.See, when we search something, results are displayed, and if we click on the maps Icon, not on any of search results that time this action is activated.and this search terms in shown in placeEntery.::: src/placeStore.js@@ +288,3 @@+ }).bind(this));+ return storedPlace;+ if (p.location.latitude === lat && p.location.longitude === lon) {okay@@ +292,3 @@+ getFromId: function(uniqueID) {+ return this.get({ uniqueID: uniqueID });+ return true;okay.CreatedrouteQuery: move Transporatation to routeStoredRoute.js imports routeQuery, for using routeQuery.Transportaion.after #f4cdc18, routeQuery.js uses application. This makes StoredRouteunusable in background service mode.CreatedplaceStore: take uniqueID as parameter in placestore.getCreatedGNOME Shell Search providerReview of:Do we not need to fix up places that reference RouteQuery.Transporation, like sidebar?$ git grep Transportation[...]src/sidebar.js: let transport = RouteQuery.Transportation;[...]Review of:Looks fine!Review of:Thanks!Could we perhaps break out the creation of new actions t oa patch of its own? So one patch that adds each action and explains why it is needed?::: src/application.js@@ +161,3 @@ }, + _onShowStored:function (action, parameter) {no spaces before parenthesis@@ -161,0 +163,21 @@+ _onShowStored:function (action, parameter) {+ normalStartup = false;+... 18 more ...where does parameter come from?@@ +182,3 @@+ let place;+ let data = parameter.deep_unpack();+ },why can't we have two parameters one lat one lon?@@ -161,0 +163,26 @@+ _onShowStored:function (action, parameter) {+ normalStartup = false;+... 23 more ...needs blank line@@ +192,3 @@+ this._createWindow();+ this._checkNetwork();+ this._createWindow();Seeing this for the third time... maybe a small helper is called for?_presentWindow: function() { this._createWindow(); this._checkNetwork(); this._mainWindow.present();},?@@ +196,3 @@+ let data = parameter.deep_unpack();+ this._mainWindow._placeEntry.text = data;+ this._mainWindow.present();_-prefix on placeEntry means the property is private and should not be referenced from here.What does this function do? I do not udnerstand why we need a showSearch@@ +289,1 @@ }when is this show-search ever used? I do not get it, why do we want it?::: src/service/searchProvider.js@@ +130,3 @@+ Utils.activateAction('org.gnome.Maps',+ 'show-location',+ new GLib.Variant('s', data),why a string? Why not two integers?@@ +146,3 @@+ 'show-search',+ new GLib.Variant('s', terms.join(' ')),+ timestamp);what is the purpose of this?CreatedrouteQuery: move Transporatation to routeStoredRoute.js imports routeQuery, for using routeQuery.Transportaion.after #f4cdc18, routeQuery.js uses application. This makes StoredRouteunusable in background service mode.Createdapplication: Add new actionsshow-location: Shows location from 'lat,lon'show-stored: Shows stored route or place, from uniqueIDshow-search: Search Map for given 'terms'Createdapplication: Add new actionsshow-location: Shows location from 'lat,lon'show-stored: Shows stored route or place, from uniqueIDshow-search: Search Map for given 'terms'Review of:Thanks!Splitting this up in three patches would be better.::: src/application.js@@ +174,3 @@+ let place;+ let data = parameter.deep_unpack();+ let [lat,lon] = data.split(',');Can't we avoid using strings for this? And instead to two doubles?@@ +187,3 @@+ let data = parameter.deep_unpack();+ this._mainWindow._placeEntry.text = data;+ this._mainWindow._placeEntry._onActivate();This is not acceptable. 1) placeEntry is a private member of mainWindow and should _not_ be accessed here2) You are calling a private member-function that is a callback.3) We have to be able to do better than this!Maybe create a search-action in mainWindow.js?Review of:markingCreatedrouteQuery: move Transporatation to routeStoredRoute.js imports routeQuery, for using routeQuery.Transportaion.after #f4cdc18, routeQuery.js uses application. This makes StoredRouteunusable in background service mode.Review of:Looks fine!Createdapplication: add show stored actionshellSearch calls show-stored action when user selects a result that isa stored route or a place.Createdapplication: add show location actionshellSearch use show-location action to display a point from latlong string.Example: User directly enters a latlong string, 23.323,34.233 in search.we show single result, which opens requested point in maps.I don't know if this belongs on a separate bug, but it would be useful to have Maps show up as a search provider in the overview for any string, in terms of being able to quickly pull up a map for an arbitrary location or route.At the moment in a web browser, I can add a search keyword (e.g. "m") for $juggernaut maps, and search with:m timbuktu orm new york to londonand get a useful map very quickly (especially since web browsers are often permanently open).Especially in the routing case For Maps, this is much laborious at the moment. I have to:* launch Maps* Tab-Enter to open the routing sidebar* Type the start location, hit Enter, wait for results, arrow to the first result* Tab to the destination box, type the destination, hit Enter, wait for results, arrow to the first result, hit EnterAs an alternative, maybe Maps could look for an overview search keyword, e.g. 'map', and split on "to" if it's in the string. This would enable:<Super> map new york to london <Enter> to achieve the same result very quickly.Maps would then detect "to", use the first result for "new york" as the origin, the first result for "london" as the destination, and immediately display results.	116.0	id=758816	24	False	True	mcatanzaro	1
id=758816	REOPENED	vala	Code Generator: GSignal	0.34.x	Other Linux	Normal enhancement	Vala maintainers	2015-11-29 21:57 UTC by	Michael Catanzaro	2017-02-20 16:32 UTC (	6 users	3.18.0 crashes 100% when promoting a pawnBacktrace at Red Hat #1280470	I can only reproduce with Fedora builds, never with anything I build outside of mock, so maybe a GCC bug, or an issue caused by hardening somehow. What's strange is that the backtrace is simple, but I just don't see what could possibly be wrong.Will take a look.Warning: this one is hard!The next step is to figure out why only Fedora builds crash; it might be a particular optimization or hardening flag, for example. I really have no clue what is wrong here. :((In reply to Michael Catanzaro from)Yeah, I tried reproducing using this:git checkout f20e68a978bab1d2f36e03b9ff04bb2995a1f822 (Prepare 3.18)make && make-installjhbuild run gnome-chessbut and didn't see any crashes. :|The only thing I could see on the logs when promoting was: (gnome-chess:7030): Gtk-WARNING **: Content added to the action area of a dialog using header bars(gnome-chess:7030): Gtk-WARNING **: Content added to the action area of a dialog using header bars(gnome-chess:7030): Gtk-WARNING **: Content added to the action area of a dialog using header bars(gnome-chess:7030): Gtk-WARNING **: Content added to the action area of a dialog using header bars*For which we already have this bug:I tested by setting the Fedora CFLAGS in my jhbuildrc:CFLAGS = -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=genericBut still could not trigger the crash.I disabled hardening in the Fedora package and the crash went away... reenabled it and the crash returned... not sure what is wrong, but I'd say it's not our problem.Reported this here:Thanks Michael! :DFlorian Weimer found the problem:"The backtrace with its register dump suggests that the upper 32 bits ofthe return value from the signal were clipped. Unfortunately, the glibsignals mechanism does not have compile-time or run-time type checks, soit can easily happen, but is somewhat difficult to track down.It seems that g_cclosure_user_marshal_ENUM__VOID invokes the callbackwith an int return value, but the registered callback(_chess_application_show_promotion_type_selector_chess_scene_choose_promotion_type)has a return type of PieceType *.Any change in register allocation can make this bug appear anddisappear, it's not related to the hardening flags."The signal declaration in Vala is:public signal PieceType? choose_promotion_type ();Reassigning this to Vala. I guess Vala got confused by the nullability of the return value. It needs to use a different marshaller, or pass NULL to allow GLib to pick the best marshaller.***has been marked as a duplicate of this bug. ***(In reply to Michael Catanzaro from)I hear it's nowadays best practice to just always pass NULL, and never define your own marshallers unless profiling suggests it improves performance.I've encountered this bug on Debian testing.I can workaround the underlying Vala compiler issue by changing the return type of the choose_promotion_type() signal and show_promotion_type_selector() function to be the base type "PieceType" instead of the nullable type "PieceType?". I use PieceType.PAWN instead of null as a cancel value.Obviously the best solution would be to fix Vala, but the change avoids the issue, at least as far as gnome-chess is concerned.FWIW: the workaround I used in Fedora is "%undefine _hardened_build" in the spec. :(This bug should be an improvement and recommend not to use nulleable types in signals on Vala code, but in C code and use a VAPI to be usable in your Vala code.Tagged for Vala 2.0 milestone.I'll add this recommendation to my book as a Vala limitation:I think we should fix the compiler to make nullable return types work. There's no good reason to prevent use of nullable return types, right? I believe all we have to do is use g_cclosure_marshal_generic instead of g_cclosure_user_marshal_ENUM__VOID.	15.0	id=417288	17	False	True	reinouts	1
id=417288	REOPENED	epiphany	Tabs	git master	Other Linux	Normal enhancement	Epiphany Maintainers	2007-03-11 23:17 UTC by	Bastien Nocera	2015-09-24 07:19 UTC (	5 users	It would allow to look for tabs better than having to click on every opened Epiphany window.	Since tabs break the SDI metaphor anyway, this sort of makes sense to me...The tabs menu is gone these days. This will make more sense with the new tab queue thingy.The tabs menu is gone, but the problem of finding a tab within multiple windows remains.I hear you, but as I said I suspected this would be solved by the newer tab+queue+bookmarks design.On the other hand though... wouldn't having a "switch to other tabs found from the location bar autocompletion dropdown" (like Firefox does) solve the problem In that case perhaps we could rename this bug report to suggest that.(In reply to)RetitledThis is still an area that needs attention. With my browsing habits, I generally have at least two windows, each of which has multiple tabs open, and it's nearly impossible to find a particular tab. There needs to be some way to easily access a listing of all open tabs (in the current window as well, not just in another window). At the very least, something like the Firefox behavior mentioned inwould be a great help.	6.0	id=221943	19	False	True	fejj	1
id=221943	REOPENED	evolution	Mailer	2.28.x (obsolete)	Other All	Normal enhancement		2002-03-14 23:50 UTC by	Hubert Figuiere (:hub)	2012-01-24 19:57 UTC (	3 users	Some mailer who shall remain nameless prefix replies subjects with "RE:".That is sub-standard. Fortunately, Evo detects that and don't attempt toput "Re:" in front of that (bug seen in those same nameless MUA). But themost correct behaviour, since it can detect "RE:" would be to change it to"Re:", and that way fixing the incorrectness started by bad net citizen."Be lean in what you recieve and strict in what you send"	huh? why is that bad? the Re: prefix is case-insensitive.Re-read RFC 2822.In paragraph 3.6.5, they say:"When used in a reply, the field body MAY start with the string "Re: " (from the Latin "res", in the matter of) followed by the contents of the "Subject:" field body of the original message. If this is done, only one instance of the literal string "Re: " ought to be used since use of other strings or more than one instance can lead to undesirable consequences."They talk about literal "Re: " and don't talk about case insentivity.Since it is human readable text, it is case sensitive...Well, we aren't the ones breaking anything so no, I'm not fixing this.Sorry, but by not prefixing a reply subject by the case sensitiveliteral string "Re: ", you are breaking something.Look at the defenition of the Subject header. It is unstructered text.That means "anything goes".thus, you are wrong.how did this get reopened?definitely to be reopen.I'm seeing this in evolution 2.28.3. I'm also using evolution-mapi. I've got the sources but am not able to find where the change should be made. Can some one point me to the right place?Changing summary to reflect the actual request.	9.0	id=612444	16	False	False	gdesmott	1
id=612444	REOPENED	empathy	General	2.29.x	Other Linux	Normal enhancement		2010-03-10 15:31 UTC by	Guillaume Desmottes	2012-09-12 09:57 UTC (	2 users	The edit personal info dialog should have a "All" entry in the combobox so users would be able to easily change all their accounts.	We should first fix Empathy to be able to change offline accounts (and).This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.I also backported the crash fix to 2.30.Ooops I closed the wrong bug. This was meant forWe should support changing offline accounts first:This requiers Protocol which just landed in Telepahty. Re-schedule for 3.0.***has been marked as a duplicate of this bug. ***Not sure of this would fit now that personal settings are edited in empathy-accounts. Need some design first.	7.0	id=328095	12	False	False	federico	1
id=627501	REOPENED	gthumb	general	2.11.x	Other Linux	Normal enhancement	Paolo Bacchilega	2010-08-20 14:20 UTC by	Paolo Benvenuto	2015-12-21 08:30 UTC (	1 user	When the images are little, the slideshow shows all them zoom in so that the fit in the screen, and this produces a very ugly effect.The preferences should give the user the possibility to choose whether to see them window-wide, with the various possibilities as when a single image is shown fullscreen.Or, alternatively, images littler than the screen should be shown at their actual size.	Marking as obsolete, as the 2.x version are no longer supported.Please feel free to reopen this bug report if it describes a problem that still occurs with a current version of gThumb (currently 3.4.1).still present in 3.4 series.Little images should not be expanded to whole screen size	2.0	id=121113	114	True	False	mclasen	1
id=121113	REOPENED	gtk+	Widget: GtkFileChooser	3.4.x	Other All	Normal enhancement	Christian Neumair	2003-08-31 15:08 UTC by	Tony Houghton	2017-02-23 08:15 UTC (	62 users	When clicking a folder or filename in a file selector to open it, it wouldlead to a more consistent desktop if it followed Nautilus' "Single/Doubleclick to activate" option.	This would depend on having an XSETTINGS key for a desktop-widesetting of the double-click behavior. GTK+ can't pull configurationinformation from GConf, which is what Nautilus uses.I'm not sure this is a bug at all, though. The file chooser isdifferent from the file manager; in the former you click on a file,then click the OK button to accept the operation.Could Nautilus' option be deffered to a GTK+ option?The file chooser is in a sense like a mini version of Nautilus' filebrowser functionality. Although you can click OK to select a file, youcan't open a folder without double-clicking or using the keyboard.In MS Windows file choosers follow the Explorer's click policy.So, if you have single-click enabled in Windows, what happens when you - click on a file in the file selector- click on a folder in the file selector?Sorry, I forgot about this for a while. If you single-click with the"single click activates" option enabled it has the same effect asdouble clicking in the normal mode.So single-clicking a folder descends into the folder, clicking a fileselects it and closes the dialogue as if OK were clicked.***has been marked as a duplicate of this bug. ***CreatedAdd global single click xsetting (against GTK+ 2.4).CreatedImplement single click for GtkFileChooser (against GTK+ 2.4).Can this be committed to GTK+ 2.4 as well? AFAIK the next GNOME version will be2.4-based so maybe its a good idea to add this to GTK+ 2.4 instead of committingit to HEAD.regs, ChrisNew API goes to 2.6.***has been marked as a duplicate of this bug. ***also wants the bookmarks part to follow the single/double clickbehaviour. Does the patch also do that?Also note. That reporter wants the bookmarks part to always usesingle click and gives some arguments for single click.When trying to implement this using the button-release-event, I had to learn byhard that DnD heavily interferes with the button-release-event.Can anybody hint me at documentation that clearly states how to implement that?regs, Chris***has been marked as a duplicate of this bug. ***Ping?any news on this bug ?If there was news on this bug, it would be on the bug!!! As for, no idea what is being asked about. Anything that isimplemented in nautilus can also be implemented in the file chooser. If youaren't clear how nautilus is implemented, you can look at (but not copy,since it's GPL) the source code.CreatedImplement single click for GtkFileChooser (against HEAD).OK, I rewrote the whole 2nd patch against the FileChooserDefault.What the new one does is:- Implement single-click behavior for shortcut list and file list- Add a shortcut popup menu with a remove item, because else you couldn'tremove shortcuts with single-click- Fix a bug where the first file that was clicked after construction of thepopup menu didn't have a sensitive "Add to Shortcuts" itemI had to setup three GtkSetting signal handlers for different xsettings andpoke around with multi-GdkScreen setups with different hand cursors. Sorry thatI wasn't able to provide a smaller patch. Because it is so big and was muchwork, I'd appreciate if it could be reviewed quickly.A sidenote: I couldn't resolve an issue where gtk_tree_view_get_path_at_posseems to return TRUE if the cursor is on the column header. It is probablyworth a new bug report.On a sidenote, I think that Nautilus gconf key/apps/nautilus/preferences/sort_directories_first should also be moved to gtkand used by the filechooser too.***has been marked as a duplicate of this bug. ***I'm using GTK+ 2.6 and there is still no progress ? Any news ? What about 2.8branch ?Other things took priority. And it is too late for 2.8 now, too.Maybe query bugzilla for bugs on the Small API/Medium API/Big API milestonessometime, to understand why things sometimes take a long time.***has been marked as a duplicate of this bug. ***it is true that other systems close the window and consider the user clicked OKwhen clicking on a file in single-click mode, however in the GTK file selectorthat would prevent selecting multiple files at the same time.The reason that it's not a problem with other file openers is that they haveicon-view not list-view style openers, so you can always click between the iconsand select several of them (by drawing rectangles with the mouse).but i guess this is an issue for almost nobody in the real world.my wish would be that it would be single click to descend in a folder, butotherwise same behaviour as now, no "single clicking a file opens it and closesthe dialog". but it's just a personal preference... feel free to ignore it.Emmanuel: You can still press ctrl and select in single-click mode to selectmultiple files.: good point. i was mostly trying to find an excuse to justify thebehaviour i'd prefer, actually :-)another one maybe: when there is a preview in the file opener, for instance gimppreviews pictures for the selected listview item, that would require keyboardnavigation to see the previews of files, if single-click will open the file.The single-click can be implemented only for selecting directories, and if isthe file selected -- only one click will open selected file. Now if is fileselected, you must double click to open it -- that's unavailing if it's fileselected yet.***has been marked as a duplicate of this bug. ***Note thataddresses a slightly different issue. There it's about theleft half of the dialog, here it's about the right half.It would be nice to have common interface for click policy. What about closing the bug and move it as target for new Portland project ()?***has been marked as a duplicate of this bug. ***(In reply to)Please don't close this bug - it's really important usability bug, lots of newbies can't understand when they should use single click and when double :(If GTK FileChooser would work with single click then live was easier for computer newbies.Urgh, this bug is 4 years old, and Christian made patches available (for example).What actually IS blocking this? Is it incompatible with gtk 2.11? Who can I buy beer for so that this issue vanishes into Ancient History?Can someone please see if the patch applies to svn trunk?Hello all,I doubt the patch could be applied to svn trunk :-(I may be wrong, but having a look at the last attached patch, it is based on revision 12377 of gtk/gtkfilechooserdefault.c.Here is a diff between this revision and the last committed revision :I think that creating a new patch from scratch will be quicker than trying to merge this old one into the trunk ...I am also very interrested by this feature.I hope it helped !Cheers,Charles-Henri***has been marked as a duplicate of this bug. ***I just discovered an inconsistency in the file chooser itself that's somewhat related. Places only require a single click while folders require a double click. In Nautilus they both require a double click (don't know how Nautilus behaves in single click mode).In nautilus single click, they both require a single click.By the way, I consider the recent change of behavior of the file chooser to be a great improvement. As there is pretty much nothing to "select without activating" the left column items for, there was no reason (that I can think of) to use double click there. Newbies and click-savers rejoice.I've just discovered. Sorry for the spam. :/***has been marked as a duplicate of this bug. ***My old patch was of poor quality and needs work. I'll rework it.CreatedProposed patchThe attached patch is a first attempt for a proper implementation. It moves the tree view-related single-click activation bits to GtkTreeView, adds a _gtk_tree_view_set_single_click_activate() API, and just leaves the cursor handling to the file chooser.ATM we display a hand cursor for the file list when hovering, which resembles the look & feel of a web browser. However, we don't display the cursor for the bookmark list, so I'm not sure whether this inconsistency is actually intuitive. I'm just trying to resemble Nautilus' current behavior.Ping.Marking attachment as needs-work.Just replicating the current Nautilus behavior is suboptimal, because it is not 100% user-friendly either. We will have to work on a complete behavior specification before getting this into GTK+.Let's see if better tools can make me a more responsible maintainer :) I've put this in a git branch:git clonecd gtk+git checkout origin/bgo121113-single-click-activateI split the patch into three commits: one for GtkSettings, one for GtkTreeView, and one for GtkFileChooser.Manny, do you want to work from there?What additional work needs doing (re.)?I've just modified Christian's patch from #44 against my distro's current source, and it seems to work OK for single selection; don't know about multi-select yet.This particular issue is a major usability issue with GTK for me personally, and I'm keen to see resolved in trunk somewhat sooner than the 5 years (!!) it's been since the initial report. If needed, I /can/ maintain a personal patchset but I really, really, really don't want to go down that route!So, what can we (I?) do to help resolve this once and for all?***has been marked as a duplicate of this bug. ***Sorry, change of url:***has been marked as a duplicate of this bug. ***(In reply to)How do you do multiple select ?(In reply to)Control+click, as in Nautilus.***has been marked as a duplicate of this bug. ***(In reply to)It's been well over a year since this comment, so isn't it about time someone decides that: * There's a fairly easy fix to give a clear improvement over the current behaviour and a patch set is already available * It's been over a year since it was suggested there's room for further improvement, but still nobody seems to have actually thought of how (and for God's sake let's not mimic Windows' hover-to-select) * This bug is more than 6 freaking years old!So just go ahead and fix it!Hello,Will this critical accessibility bug ever be patched ? This bug make gnome unasable for people who can't make double click. :(I know there is mousetweaks, but it's a nasty hack to work around a wrong default behaviour, what does that mean ?For people who don't know about the ctrl/shift thing, a simple message in the status bar or a tooltip could help.Just adding my voice and encouragement to fixing this bug.6 years.... come on!!!!***has been marked as a duplicate of this bug. ***The duplicatementions making this a GSettings option for a future version of GTK+; this is certainly a good idea. This way both Nautilus and GtkFileChooser can share the same configuration option.I rebased Manny's patches and put them in the bgo121113-filechooser-single-click-activate branch in git.gnome.org. Can someone please test this?This doesn't use GSettings yet; just GtkSettings as in Manny's original patch.***has been marked as a duplicate of this bug. ***Works on my machine :)Any chance of getting this into trunk before the 7 year anniversary...?I tried Gnome with Ubuntu 10.04 and there is still no single-click in GTK-firefox-open-dialog (GtkFileChooser). Also no ALT+LEFT for return! It's unbelievable. After all the years. Linux is still unusable...As there seems to be a patch available, could one please push it to git ? Even my wife is complaining about the current inconsistent behaviour.GreetsMarcusAnything new at this point? A mix of single and double click is very inconsistent :-(CheersSascha(off topic rant)Importance: High enhancementTarget: Small APIStatus: Assigned (and worked on by assignee)Anything new? Heh, I've given up on Gnome now and moved to KDE; anybody want a bet that the desktop computer becomes obsolete prior to this being fixed? 7 *years* active, for a high-priority bug with an initial patch supplied 3 years ago. Not even an acknowledgment that the bgo121113-filechooser-single-click-activate branch was compiled & tested OK, nor a response to an offer for help (comments 48 & 60 from me.)This ticket has had a "can't do / won't do" attitude associated with it from the start (see comments 1 & 3) by the maintainer. Frankly, if the [commercial] development team for whom I have responsibility behaved like this then it would be unlikely that we had any customers left (nor that we'd have the same team members ;) )So go on maintainer, surprise me and do something productive with this ticket!To all:I can understand frustrations, but please refrain from ranting. Your account will likely end up being disabled.Note: I'm one the GNOME bugzilla maintainers + I do not codeI can understand the maintainers not wanting to do anything to the current release because of GNOME 3 coming up, but I think they used that excuse with one of the 2.x releases. This should already have been done for the upcoming release of GNOME 3 but maybe it's not too late. Is GTK going to continue to use xsettings? The front-end setting will need migration from gconf to gsettings though.If the developers still won't do anything about this perhaps mirrors of this bug could be opened in some of the major distros. I think Ubuntu in particular would welcome this improvement in usability. If a few start using the same patch it might persuade upstream to accept it.(In reply to)There's a bug report about this issue in Launchpad. See***has been marked as a duplicate of this bug. ***GTK3 and GNOME3 are well established now, but still I see no sign of this bug being addressed. Browsing dconf-editor I noticed that the file chooser already has its own set of gsettings, so surely it's quite elementary to add one for single-click, switch nautilus over to it and update one of the patches that already exists to implement the behaviour in GtkFileChooser.However, I also agree with those who are arguing for a global option to eliminate double-clicking across the entire GTK/GNOME desktop. Still just as easy except some other applications should be updated too.I spent a half an hour reading whole this thread, and I really didn't understand why after all these years the issue still not fixed. Why proposed patches still haven't been applied even in gtk3?CreatedSingle clickThis is an updated patch to work with GTK3. It also finally uses GSettings. Note: Nautilus needs to be updated to use this setting also.***has been marked as a duplicate of this bug. ***Given that after nearly a decade and several releases of Gnome the maintainer has failed to do anything useful with the patches provided by others despite many releases of Gnome and offers of help... can this bug just be closed as "Maintainer doesn't give a ****" ? See- amusingly enough, the desktop computer really is heading for obsolescence now with the rise of phones and tablets.Yes, I'm sure I'll get banned for venting; but after this long, who cares??? This ticket is a joke, and clearly the maintainer has absolutely no intention of doing anything about it.I don't think having an option to make the file chooser work with single click is a good idea. I would rather make it work reasonably well with single click by default. I don't think it is as easy to do with with Nautilus so I would do this independently of Nautilus for the moment.There are a few ways we could go about this but one is: * descend directories on single click - this is consistent with sidebar and pathbar * add a back button to the dialog like we have in nautilus - this is made more important if we descend more aggressively * just select file on single click - in order to show a preview * treat double click activation as an easter egg and depend on dialog buttons for explicit activation * treat the "viewed" folder as the selected folder in the *_FOLDER modesHaving Nautilus change the click setting is easy the Gsetting work is in my patch. It will be very easy to update nautilus to use the same setting. It already has one it just needs to share the new filechooser setting from my patch. This matches the way we now share the hidden files setting.Is there something wrong with Timothy patch, otherwise, why isn't it incoporated ? Please give me link to documentation on the gnome patch integration process if you have.Just selecting as a default behaviour when you use primary button seems right in a file chooser. However a behaviour consistent with what happen in the file browser (or the other way around if you prefer) also sounds like a good idea.I modified the patch to apply to gtk+-3.6.3.The big problem I had was, that no key "click-policy" appeared in dconf-editor. After some fiddling I found out I can set it withdconf write "/org/gtk/settings/file-chooser/click-policy" "'single'"Now the file dialog works with single click - with the limitation that files immediately after clicking them get opened.But now the key in dconf-editor does not show the descriptions...So probably some sort of update/conversion-scripts need to be run after installing the patched gtk+?My patch is meant to be applied with a patched version of Nautilus that will create the "click-policy". Its very simple to update Nautilus to use this setting I just haven't created the patch yet as I'm waiting for feedback from the Gnome devs on this patch first.I've pushed Timothy's updated patch to the bgo121113-filechooser-single-click-activate branch. The patch is split into three commits: one for single-click in GtkTreeView, one for the GSettings schema, and one for the file chooser itself.Yay, yet another old-timer going away! ;-)Shouldn't Nautilus be patched too? I think it would be best if it simply has its own setting replaced with the Gtk one, then it can stay consistent with FileChooser and act as a convenient front-end for setting the global option without having to make a potentially more disruptive change to gnome-control-center.Federico did the same thing 3 years ago... seeFingers cross(compile)d for this time though ;)Is this finally fixed? can the bug be closed then?AFAIK the patch is still sitting in a branch doing nothing. Please can a developer tell us whether they intend to merge it soon, and if not, why.I'm not sure what else Federico wants done for these patches to finally make it into master. Maybe some more user testing first? Once Federico agrees the patches are ready I will create the GSettings patch for Nautilus.*** This bug has been marked as a duplicate of***Reopening/unduplicating from the overly vague "improve the file chooser design", which was marked as fixed, whereas the single/double-click behavior remains inconsistent between Nautilus and the GTK+ FileChooser.I think there is no consensus that we have to eschew all forms of double-click from the UI. And there is also no consensus that any difference in behavior between nautilus and the file chooser is an 'inconsistency' to avoid - they are different UIs for different tasks.An option to choose between single-click and double-click is not very attractive.Double-clicking should never be the only way to trigger an action. But that is not the case in the file chooser, anyway: You can select a folder, and use the open button to navigate into it, and you can select a file and use the open button to accept it. No double-clicking required.So, if you ask me, reopening this bug was not required.(In reply to Matthias Clasen from)There is consensus that double-clicking is difficult for people with certain disabilities [1]. And there are obvious similarities between the file chooser and Nautilus. In Windows there is more consistency between the two. Slavishly copying Windows (or OS X) was never a good idea, but it doesn't mean we have to ignore or do the opposite of every little good feature.Why not? This option already exists in a major GNOME component. If there's a good reason for this option in Nautilus there's a good reason to have it in file choosers, and any other widgets showing lists of items that can be selected and opened. Or do you think Nautilus should be made double-click only too?It's long-winded and clumsy though, especially for the sort of people who have problems with double-clicking.Having recently given beginner training courses to elderly people, I can add that even without any particular disability, having inconsistent behavior in mouse clicking is a major hurdle. I had three different group, and all three had difficulties with both double clicking and understanding when you should or not use it. It often leaded them to always double click, even when not necessary. The main button should always launch the main expected function.The problem is not only to have a non-double click path to the function. It's a matter of UX consistency.Besides, if we just applied the patch that makes the filechooser follow the Nautilus setting:* people who have configured Nautilus to use single click will be happy to notice the filechooser acts the same way (just as file-roller already does).* people who didn't change anything and thus have double click in Nautilus won't notice a differenceSo everyone wins.(In reply to psychoslave from)That's true, I've often noticed people who are unfamiliar with computers end up double-clicking everything, including browser links.(In reply to Alexandre Franke from)I think there should be a new setting in a more appropriate namespace [1] and Nautilus should be changed to use it. However, access to the option could be left in Nautilus' config dialog so existing users don't get confused. But I think the main way of setting it should be in the Mouse & Touchpad settings. Universal Access could be another possibility, but that section's already quite busy and this isn't purely an accessibility issue.[1] In fact, it could be a good idea to apply this not only to GTK, but make it part of XDG and see if it's possible to get a single option shared between GTK/GNOME and Qt/KDE.(In reply to Tony Houghton from)Note that there was recent activities on the mouse and touchpad settings[1]. Also I have been told that there are planes to move globally to "selecttion pattern", like you may find in Clocks, Contacts, and so on.[1]Excellent suggestion, as the behavior should indeed remain consistent whatever toolkit the software use.(In reply to psychoslave from)SeeJust to be very clear, and prevent wrong expectations here: I am not interested in supporting a single-click vs double-click setting in the file chooser. It is not a good solution in nautilus and won't happen here. Also, this bug is very close to the magical 100 comment thresholdIf I wouldn't look at the commenter's profile, I'll think this is a fat troll willing to plague out gnome user's life. Just every single word in this comment is a lie. It's easy to understand it by reading the rest of the comments.and... the curtain falls. Calling me a liar on bugzilla, and reaching triple-digit comments is enough.(In reply to Matthias Clasen from)I don't think any other GTK+ developer so far has said that they think a convenient alternative to double-click is wrong, and I thought it was going to be implemented in GtkTreeView or something, not just the file chooser. Are you responsible just for GtkFileChooser (besides a few other things that aren't relevant to this bug) or are you also responsible for GtkTreeView or somehow else in a position to dictate this policy across the entirety of GTK+ on your own?I haven't said that either, but I'm done replying to this bug. You can keep it open as long as you want.gmRUQ7I8 obviously is a spammer posting with a throwaway mail address. Please don't get upset because of his comments. If he gets what he wants (close this bug and never implement a feature many people apparently would like to see in GTK+) everyone will lose.If you want traction on this, you need to talk with a designer. In any case, if you like, please convince me why this is important and I'll see about making an argument when I meet the core developers at GUADEC.One thing to keep in mind is that when people request bug fixes or behavior changes, you need to figure out how it affects the entire system, and not focus primarily on nautilus or the file chooser. GNOME tries to enforce consistency throughout the whole platform.So you'll note that Jon mentioned that it would be best to go all in on single click vs double click because if there is inconsistency it will be problematic.Now, you could argue that the touch story would be complicated in a double click world. Today, I can't touch and activate anything with touch that easily.Anyways, I'm just trying to show people how to work with GNOME developers.If you want traction on this, you need to talk with a designer. In any case, if you like, please convince me why this is important and I'll see about making an argument when I meet the core developers at GUADEC.One thing to keep in mind is that when people request bug fixes or behavior changes, you need to figure out how it affects the entire system, and not focus primarily on nautilus or the file chooser. GNOME tries to enforce consistency throughout the whole platform.So you'll note that Jon mentioned that it would be best to go all in on single click vs double click because if there is inconsistency it will be problematic.Now, you could argue that the touch story would be complicated in a double click world. Today, I can't touch and activate anything with touch that easily.Anyways, I'm just trying to show people how to work with GNOME developers.Thanks for your input, Sri. To be honest I have no problem with double-clicking, I just prefer to use the single-click option when available (but not in Windows, where it's ruined by the awful hover-to-select model). But I have strong feelings about this bug, because I had to work so hard (and long!) to convince some developers that I had a valid point, and then saw it all being dismissed. It made me feel that GTK+ developers don't care what I and several other users think. I do think that GNOME 3 represents progress over GNOME 2 and still use it in preference to KDE, but you have to admit that many users hated it and had the same feeling that they were being ignored by the developers. I keep telling myself I'm overreacting, but I've been made to question whether GTK+ has a future and is it therefore worth continuing to develop with it.(In reply to Sri Ramkrishna from)I'll be at GUADEC too and I'm one of those who care about this, so I'll be happy to discuss this with you and then with GTK+ maintainers.The problem seems to be that there isn't strong enough agreement on the best way to "fix" this, but I think just giving up and doing nothing is one of the worst options.I hope one thing we all agree on is that consistency is a high priority in UI design. IMO Nautilus and the file chooser perform very similar roles, as do many other GtkTreeViews - they present a set of objects that can be selected and/or opened or activated. In a sense Nautilus is a file chooser for the entire desktop environment, with some extra actions available; in MS Windows the standard file chooser is identical to the Explorer.However, in some cases there is no such distinction, such as selecting pages in a config dialog. Most would be programmed to respond to selection callbacks rather than activation events because the activate-on-single-click property was only added in 3.8. But with single click to activate the app can receive both a selection callback and an activation signal, so applying the option to all GtkTreeViews wouldn't cause them to break.As I said before, I don't have a problem with double-clicking personally, but I do think users who do would appreciate a consistent gesture that isn't significantly slower.mentions long clicks. I hadn't thought of that before, but I think I could live with that as an alternative to double-clicking. It has the advantage that you could probably get away with just turning it on all the time without an option to turn it off, although I suspect there'd be a strong demand for an option to set the time period (and a very long time would effectively disable it).What do you think about punting this to XDG? Should I post to their mailing list or open a wishlist bug there?Short/long press may cause problems for some people, but that should be manageable in accessibility parameters.Having checkbox along the file icon looks like an alternative. It could avoid the need to click on the selection tool to make them appear, but maybe there are some none obvious reason to add this step. After all icon could come with both a checkbox and a launch/enter button of the same size.You could actually even drop the checkbox and keep single click on the main element area used to select it, while adding the checkbox size icon to launch main action, the bottom toolbar providing further options. This way you may even have already several selected item and launch only the main action on a single one. For example you selected several text files but would like to check the content of a single one without losing your selection: you just click the "launch" button of the relevant item.If people find the long press acceptable, then let's agree on that. It's already in plan, of course.I do accept it.Survey "people" acceptance would require a way to expose some voluntary beta testers to new design ideas. That would require a deployment infrastructure that, as far as I know, we currently don't have. @Tony HoughtonAs already stated, I'm favourable with up-streaming that to XDG, If you do so, please provide a link on this bug report to the relevant mailing list archive thread or to the wishlist bug.Dear Sri Ramkrishna,Please read the rest of the comments on this bug. There are a lot of angry people, who will treat this kind of "fix" as a mockery. I, personally, can't understand what is a problem to fix this once and for all. I don't care how this option will be enabled, by modifying configuration file or by gsettings, or by another unusual way. I used to use those configuration methods, as a plenty of brilliant gnome 2 functionality was disposed since gnome 3 release, and in order to be able use it you have to do a lot of monkey work. Seems I don't have a lot of options, if I want to use Linux on desktop.If you claim you have community, then why this very important long living issue depend on single person? While you're looking for "proper" way to fix this, you literally do the mockery on gnome users. This must be fixed as soon as possible, doesn't matter how. You can even open another bug to fix this temporary implementation in the future, but it can't be left as it is. I understand that there are a lot of interesting and fascinating tasks over there and you better go to do something else, but you need to clean some dirt from time to time.(In reply to psychoslave from)Using a checbox for selection is a good idea; I think I prefer it to the long press idea actually. I should have thought of it before, because there are some screenshots of that on the page linked in. The only disadvantage is that it could look a bit unattractive with the large icon/tile layout.I don't like that so much. A checkbox for selection is well-understood, but another button for open/activate etc could seem unfamiliar.(In reply to psychoslave from)I haven't done this, for two reasons. One is that we now seem to be looking for a better one-size-fits-all behaviour instead of providing options. If there was going to be an option to apply across toolkits there would be a clear role for XDG, but without such an option it doesn't seem so relevant.The second reason is that it would help if it came from someone with experience of KDE as well as GNOME and Unity etc. I don't have that experience; I couldn't even get it to work well enough to access any options at all when I tried it in Debian recently.(In reply to Tony Houghton from)Users are already familiar with having a set of action icons along an item, that something widespread in web and mobile interfaces. Here are some examples : *uses: *a pen to symbolize edit * a basket to remove the item * a "E" maybe for "execute" (a gear is a widespread icon for that kind of action) ** a tool icon for configuration * a red arrow for deletion. **Of course users are more accustomed to see this kind of feature in "one item per line list". But the current selection mode already introduce the checkbox associated to big icons. So the UX already started down the path of unusual/innovative behavior.Note that a "…" or "⇩" icon may also be open a larger set of item, for action that would apply only to the corresponding item. **Well, note that the previous comment is in fact not really accurately placed on this bug report. Sure it would disappear with such an interface change, but that would be really a side effect. Probably I should put the comment elsewhere, shouldn't I? Let me know if you are aware of where it should belong.Here I have made a mockupRegarding the file chooser, having a radio button instead of a check box when the user have to select only one file may be relevant.I personally find checkbox lists on the web infuriating, at least in the incarnation that forces me to click each checkbox individually, and aim very carefully. Thats the opposite of convenient. We'll have to be careful to avoid reproducing those issues here.Well if you look at how it's done for instance in GNOME Photos, when you're in selection mode clicking anywhere on the photo you want to select/deselect enables/disables the checkbox.I installed Windows 10 today and I noticed the new Add/Remove Programs window uses a scheme a little like psychoslave described in. But an important difference is that the action buttons are hidden until an object is selected, then the item's bounding box expands to make room for buttons underneath.This makes efficient use of overall screen space and reduces mouse movement compared to having fixed buttons in a separate part of the dialog.One potential disadvantage is that items in the list have to be moved to make room for the buttons coming and going and that might be a bit annoying if you're trying to make a multiple selection, but I don't think that would be a serious problem.Another issue is what to do with the buttons when there is a multiple selection. I don't think the selected items should all have buttons, so there's a choice of leaving them on the first selected item or moving them to the most recently selected. The first has the disadvantage of maybe having to move/scroll a long way back to the first item's buttons after selecting the last. The second's disadvantage is that it would exacerbate the nuisance factor I described in the previous paragraph.(In reply to Matthias Clasen from)Even on the web you can make the whole label (or whatever element) binded to your checkbox. Just as said Alexandre. Actually in a web form which is well designed you can also tab/space through it.In the meantime, I've taken the 'sting' out of double-clicking in the file chooser, by making a single click on the selection do the same as a double click.(In reply to Tony Houghton from)Could you screencast that for us?Well that's seems fine when you want to act on a single element. But how is it managed when you want to select several?Did you look at the mockup I linked to earlier?It does have icons along each icon for launching individual action. Admittedly, I took too much place with this action icons. They could be placed in line at the right of the icon, while the checkbook could be placed at the bottom left. It would be far more efficient it term of space usage.How would that compare in term of overall screen space and reducing mouse movement with the case you are referring to?I went really on the opposite side in the mockup: all elements have buttons, selected or not. Probably for the same reason that it's less confusing to have grayed options than showing/hiding them depending on current option states.Having a single action menu without any indication that it will be performed on all elements would be probably confusing.(In reply to Matthias Clasen from)Thank you for doing something. I'm not sure I get what you mean. Is that consistent with Nautilus behavior?(In reply to psychoslave from)I think he means if you click once it selects the item, like the current behaviour, but if you click again on that selected item it opens it. So it's like double-click with an infinite time-out. That seems pretty sensible.I agree it's sensible. However, let's note that it's not consistent with Nautilas in single click mode.Now I don't know when the change will operate in a stable release, and whether we have time to find a solution which bring more consistency, whether "little fix" like this one, or "changing the whole design".It would help alot, if singleclick on a folder icon would directly go into that directory. I do not mind to do any sort of double click (short timeout, infinite timeout, or select + click "open"-button or similar) on files. So the user still can select multiple files. Don't know how to deal with select-multiple-dirs, but that's a case I never came across...It's that double-click-orgy when navigating through the (sub)dirs that drives me mad.There is always ctrl+click for adding/removing a single element in a selection. But it's hardly discoverable if you don't read the documentation. A little message that give the hint would be nice. For example a "mouse hover" message, or a message on the bottom of the selector dialog.(In reply to psychoslave from)"Changing the whole design" is something for a very separate bug report (and this report has gotten pretty off-topic by now).Ok, I did a new bug report specific to the topic:(In reply to psychoslave from)It will be if and when nautilus adopts the same idea. For now it is an innovation on the file chooser side only.Ok, but what about simply integrate the already existing behavior? As I understand it, the trend was to: * focus this bug report on resolving its topic, which is, according to the first post, "a more consistent desktop [that] follow[…] Nautilus’ 'Single/Double click to activate' option"; * skip innovative works from this bug resolution; * contribute to innovative behavior in a broader bug report[1] which will be consistent across all GNOME projects.Is anything wrong with this plane?[1]You are going in circles. SeeWe all want a "good solution", in the file chooser as well as in nautilus. What will we call a good solution though? We probably need to define some quantifiable properties here, such as * how many time the user have to move the cursor * how many simultaneous input are needed * how many consecutive input are needed * how short must be the time between consecutive input to trigger an action (ie. double click) * how long must be an input to trigger an action (ie. long press)More properties could be evaluated, but would require a pool of testers such as: * discoverability (ctrl/shift + click is bad on this point for example) * accessibility (though special feature can be enabled, a default "work for everybody" solution is preferable)Now let's analyze the following solutions with this properties: * current file chooser/nautilus default behaviour * nautilus single click mode *proposal *proposalI'll come back with an analyse using this criteria as soon as I can.Looks like this bug is gone for next seven year.Just for the record, it seems like something happened in the 3.18 series where some hybrid approach was added, leading to.For me the most logical thing to do is to follow what have been selected in Nautilus (single click or double click).(In reply to Jean-François Fortin Tam from)That's what Matthias said was talking about in.It's really unintuitive and lead to error or when you know the behaviour force you to be really careful about where you click. I really hope that will be fixed soon, ideally by following what have been selected in Nautilus (single click or double click).Thanks !@jeremy9856: Please refrain from adding comments to a bug report when your comment does not offer any additional information (or is just the same as in). Every comment creates notifications that someone has to read (who cannot write or fix code in that time), and advocacy is not welcome.It seem that Daniel have found the culprit ! Can this commit be reverted please ? It will fix the problem.Thanks !Jeremy, that commit is for a related but separate issue * single click opens an item that is already selected, and the first item in a newly entered folder is selectedto this one * a request for a way to avoid double-clicking altogether.Please, only comment on the single bug that is actually relevant. Don't double-comment. We have enough confusion between single and double things already, right?	139.0	id=627501	6	False	True	fbesoain	1
id=518409	REOPENED	gvfs	sftp backend	git master	Other Linux	Normal enhancement		2008-02-24 13:34 UTC by	Torsten Schoenfeld	2016-09-13 12:30 UTC (	5 users	When copying files or folders from a remote host with the nautilus' sftp support to another place on that same remote host, the files get downloaded and then re-uploaded. Is it possible to do all the operations on the remote host only? That would speed things up quite a bit.	Confirming with 2.21.91.-> gvfs/sftpThis should be supported by the gvfs SFTP module natively. Nautilus shouldn't have any fault here.***has been marked as a duplicate of this bug. ***I cannot reproduce this using gvfs 1.10.0-0ubuntu1.I have created a new folder on a sftp share and moved a 1GB file in that new folder. It did not have to be downloaded...Indeed. Moving seems to be done on the server side now. But copying is still done by downloading and then re-uploading it seems.(In reply to)I can confirm this with gvfs 1.10.0-0ubuntu1.Can you change the bug title?AFAICT, the SFTP protocol does not have a "copy" operation (it does have a rename operation though which allows move to be done on the server side). This means that copy has to be implemented by downloading and re-uploading. I recommend closing...You are right. Move/rename is supported by the sftp protocol, however copy is not. For sftp there might by option to use cp command over ssh if supported, for pure ftp there isn't any option. So, closing...I see now that SFTP does have some extensions, one of which allows server-side copies:Unfortunately, it seems that this extension is not supported by the most widespread SFTP server, OpenSSH, see:I see only the following extensions to be supported by OpenSSH_7.2p2:There is an old upstream bug report for OpenSSH:	11.0	id=337809	15	False	False	yosh	1
id=746969	REOPENED	gobject-introspection	build	unspecified	Other All	Normal enhancement	gobject-introspection Maintainer(s)	2015-03-29 11:49 UTC by	DTJF	2015-03-29 18:16 UTC (	2 users	This isn't a bug report. Instead it's a feature request (and I don't know where to place it).Authors of language bindings often use gir files as input. Currently they find them in the dev package of LINUX distros. For most recent releases they have to download and compile the source code (and may have to install further tools and learn how to use them). That's a lot of trafic on the net and a lot of effort for each author to update a single binding.From my point of view it would be beneficial when recent gir files get collected in a folder at ftp.gnome.org. Each time a new library release is ready, its gir file could get updated in that folder (or a new gir file related to this version could get added). It wouldn't be much further effort for the library programmers, since they have to build their project anyway. They just add the g-ir-scanner run to their final build and upload the result.But language binding authors would save a lot of time when they can directly download recent gir files to keep their work up-to-date.Thanks for your attention.	I think this would be difficult as .gir files are currentlyarchitecture, operating system, configuration, etc specific.Asking library authors to generate all possible combinationsof .gir files not only seems like a bit much to ask, it alsolooks like a huge possible source of confusion.Like, what .gir version to use with os $a, distro $b, libraryversion $c, g-i version $d?Thanks for your statement, Dieter.Yes, a huge source of confusion. This issue is covered by the binding authors ATM. They mostly maintain more than one library, and they have this confusion for each of them. How much of a gir file is specific to an architecture or operating system? Isn't it a main target of GLib to reduce platform specific code? And isn't that goal attained in most cases? (Ie. in case of GTK it's only the file name function family which - on some platforms - uses the _utf8 versions.) Since gir files don't contain macros, most of the platform specific stuff is irrelevant.I think it should be possible to pack all platform independent stuff in a universal gir file. All specific parts go in a separate file, if any.And regarding specific configurations: from the bindings point of view all features should be included/enabled. In case of an either/or decision, both options can get handled in separate files as well. It's up to the bindings user to care about the matching binary.	2.0	id=127419	19	False	False	vuntz	1
id=223417	REOPENED	evolution	Mailer	3.6.x (obsolete)	Other other	Normal enhancement		2002-04-14 16:39 UTC by	Dan Winship	2012-10-10 02:40 UTC (	0 users	we've talked about having evolution explicitly keep track of whatmailing lists you're on, but there doesn't seem to be a bug about it.	(FTR, I filed this because I was going to makedepend on it,but then I realized it's not needed for that. It's still somethingthat's been talked about though.)If you do add a mailing list manager, it might provide a nice way tocustomize composer settings for the lists. I would love to be able toskip signing any emails to lists (sign/encrypt overides would be greatfor contacts to, but I digress), where many recipients have problemswith evolutions attached-sig. Or changing the signature.Thanks!there is a mailing list plugin in evolution 2.2/2.4 which enables you to getinformation about the list of the message you're currently viewing; and much more.can we consider this as being fixed? :-)setting to NEEDINFO until someone reopens.The original idea behind this bug was that evolution would keep (somewhere)a complete list of all of the mailing lists that you were subscribed to thatit knew about. This might be used for: - Creating a central "Manage Mailing Lists" dialog where you could unsubscribe from any of them - Automatically setting up mailing list mail filters in various ways - Automatically filling in Mail-Followup-To or Mail-Reply-To headers (or whatever their IETF-standardized equivalents ended up being) when sending mail to one of those mailing lists. (AFAIK, Mail-Followup-To and Mail-Reply-To were generally decided to have been a bad idea, and there has never been any serious momentum behind anything better. I could be mistaken though.)There might have been other things too.It is entirely possible that this is now WONTFIX....at least setting version number. :-)	6.0	id=50730	26	False	True	egger	1
id=127419	REOPENED	DrWright	general	unspecified	Other Linux	Normal enhancement		2003-11-19 19:35 UTC by	J. J. Ramsey	2013-11-28 15:45 UTC (	9 users	It would be nice if gnome-typing-monitor would allow microbreaks (i.e.breaks roughly 20-30 seconds every 10-15 minutes) in addition to wristbreaks. It would be a handy alternative to Workrave.	I would like to second this. It would be useful. You might have to add anotherthreshold to decide whether someone was away from the keyboard long enough tonot need a microbreak.Perhaps even some wrist exercises could be added as images to show during the break.Ciao!***has been marked as a duplicate of this bug. ***Thanks for the bug report. This particular bug has already been reported intoour bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***This isn't a dupe of. That bug is about allowing normal breaks < 1m.Microbreaks are short (10-20s) breaks more often (every 10-15m), in addition tothe existing, long break every hour or so. They are designed to provide somerelief for your hands and wrists to stop you typing continuously for an hour.The longer break is to make you stand up, do some stretches, etc.This would also be useful for giving your eyes a break. A typical rule is the20-20-20 rule: stare at something 20 feet away for 20 seconds every 20 minutes. This helps prevent myopia or the worsening of it.From:"I think that the typing breaks feature in Gnome should allow the user to set up micropauses and typing breaks.Other RSI/OOS prevention tools (for example, Workpace) suggest a micropause of 10 seconds every, say, 3 minutes and then a Rest Break of 5 mins or more every, say, half an hour. Incidentally, Workpace suggests exercises during these Rest Breaks.I suffer from RSI quite badly and I find that regular micropauses make a much bigger difference than the longer breaks. I believe that is true for a lot of people, but I cannot point to any research on it; it is certainly what we are told by our office OOS prevention person.An easy way to provide this feature would be to repeat the same options that we currently have, so that the tab read:Lock Screen to enforce typing breaks:[ X ] Micropause of [10] seconds every [3] minutes[ X ] Rest break of [5] minutes every [15] minutes (this is what we already have)At a later stage, it would be great to have exercise suggestions during those breaks, but that is a different, long-term feature request."Mass move to DrWright module. The code has been removed from the control-center, and put back in the drwright module as its interaction with the GNOME 3.x experience was not defined.See	7.0	id=422371	13	False	False	sanfordarmstrong	1
id=109726	REOPENED	conglomerate	Code	unspecified	Other All	Normal enhancement	Conglomerate Devel List	2003-04-01 21:16 UTC by	Steinar Bang	2004-12-22 21:47 UTC (	0 users	It would be nice if conglomerate implemented GNU Emacs+psgml key bindings, for editing and navigation, since my fingers are trained to use them.	Err... have you got a list of these anywhere?My finger, all ten, are trained for VI.Relax, this is not to trigger a flame war.The request is not to hardcode on Emacsand to keep porting to other editor keybindings in mind.Below is a list of key bindings for Emacs XML mode.I'm not sure what other people use, but for me it would probably behelpful to support just a couple: C-c < to add a tag with completion,C-c C-a to edit attributes, and maybe some of the motion commands (tomove forward and backward by elements). Since they're nearly all usedwith a C-c prefix, I doubt these would interfere with adding VIbindings as well. However, diehard emacs users would probably likethe general line-editing commands as well -- C-f for forward onecharacter, C-b for back one character, etc, which might be morecontentious. Perhaps it would be better to allow users to choose aset of keybindings, so people could match it up to their own habitsand preferences.The ones listed as ESC whatever are also used as Meta-whatever (orAlt-whatever on some keyboards lacking a meta key).ESC C-SPC sgml-mark-elementESC TAB sgml-completeESC C-t sgml-transpose-elementESC C-h sgml-mark-current-elementESC C-@ sgml-mark-elementESC C-k sgml-kill-elementESC C-u sgml-backward-up-elementESC C-d sgml-down-elementESC C-b sgml-backward-elementESC C-f sgml-forward-elementESC C-e sgml-end-of-elementESC C-a sgml-beginning-of-elementC-c C-z sgml-trim-and-leave-elementC-c C-w sgml-what-elementC-c C-v sgml-validateC-c C-u Prefix CommandC-c C-t sgml-list-valid-tagsC-c C-s sgml-unfold-lineC-c C-r sgml-tag-regionC-c C-q sgml-fill-elementC-c C-p sgml-parse-prologC-c C-o sgml-next-trouble-spotC-c C-n sgml-up-elementC-c RET sgml-split-elementC-c C-l sgml-show-or-clear-logC-c C-k sgml-kill-markupC-c TAB sgml-add-element-to-elementC-c C-f Prefix CommandC-c C-e sgml-insert-elementC-c C-d sgml-next-data-fieldC-c C-c sgml-show-contextC-c C-a sgml-edit-attributesC-c = sgml-change-element-nameC-c < sgml-insert-tagC-c / sgml-insert-end-tagC-c + sgml-insert-attributeC-c - sgml-untag-elementC-c # sgml-make-character-referenceC-c C-u RET sgml-custom-markupC-c C-u C-l sgml-unfold-lineC-c C-u C-e sgml-unfold-elementC-c C-u C-d sgml-custom-dtdC-c C-u C-a sgml-unfold-allC-c C-f C-x sgml-expand-elementC-c C-f C-s sgml-fold-subelementC-c C-f C-r sgml-fold-regionC-c C-f C-e sgml-fold-elementPlease note that VIM and sgml-mode has nothing to do with this bug,which is about the keybindings of psgml. A little explanation of what follows:"C-" means that the Control key is pressed simultanously as anotherkey. Ie. "C-c" is pressing down the Control key and the "c" key atthe same time.ESC means that you should press and release the Escape key, beforedoing following key combination. This is actually an escape (pardonthe pun) for when the "Meta" key isn't available. Ie. "ESC TAB" couldalso have been written M-TAB, meaning "press Meta and TAB at the sametime".This is actually a pretty good example of when the "Meta" key isn'tavailable, because the "Alt" key usually do the job at "Meta" og PCkeyboards, and "M-TAB" is used for switching between applications, ina certain, popular desktop system.If some of the function names (eg. sgml-insert-element) aren'tobvious, the way to find out what they do, is to start Emacs, makesure psgml mode is loaded, and pressing C-h ffollowed by the function name, and then press RETURN.Major Mode Bindings:key binding--- -------S-mouse-3 sgml-tags-menuESC Prefix Command/ sgml-slashTAB sgml-indent-or-tabESC C-SPC sgml-mark-elementESC TAB sgml-completeESC C-t sgml-transpose-elementESC C-h sgml-mark-current-elementESC C-@ sgml-mark-elementESC C-k sgml-kill-elementESC C-u sgml-backward-up-elementESC C-d sgml-down-elementESC C-b sgml-backward-elementESC C-f sgml-forward-elementESC C-e sgml-end-of-elementESC C-a sgml-beginning-of-elementC-c C-y sgml-positionC-c C-z sgml-trim-and-leave-elementC-c C-w sgml-what-elementC-c C-v sgml-validateC-c C-t sgml-list-valid-tagsC-c C-s sgml-unfold-lineC-c C-r sgml-tag-regionC-c C-q sgml-fill-elementC-c C-p sgml-parse-prologC-c C-o sgml-next-trouble-spotC-c C-n sgml-up-elementC-c RET sgml-split-elementC-c C-l sgml-show-or-clear-logC-c C-k sgml-kill-markupC-c TAB sgml-add-element-to-elementC-c C-e sgml-insert-elementC-c C-d sgml-next-data-fieldC-c C-c sgml-show-contextC-c C-a sgml-edit-attributesC-c = sgml-change-element-nameC-c < sgml-insert-tagC-c / sgml-insert-end-tagC-c + sgml-insert-attributeC-c - sgml-untag-elementC-c # sgml-make-character-referenceC-c C-u Prefix CommandC-c C-f Prefix CommandC-c C-u RET sgml-custom-markupC-c C-u C-l sgml-unfold-lineC-c C-u C-e sgml-unfold-elementC-c C-u C-d sgml-custom-dtdC-c C-u C-a sgml-unfold-allC-c C-f C-x sgml-expand-elementC-c C-f C-s sgml-fold-subelementC-c C-f C-r sgml-fold-regionC-c C-f C-e sgml-fold-elementSteiner: Feel free to reopen bugs of yours which have been marked asneedinfo when you provide more information (not doing so may causemaintainers to miss the bug). I'll do so this time. :)Another (emacs) keybinding scheme that comes to mind:nXML mode:Major mode for editing XML.Syntax highlighting is performed unless the variable`nxml-syntax-highlight-flag' is nil.C-c C-f finishes the current element by inserting an end-tag.C-c C-i closes a start-tag with `>' and then inserts a balancing end-tagleaving point between the start-tag and end-tag.C-c C-b is similar but for block rather than inline elements:the start-tag, point, and end-tag are all left on separate lines.If `nxml-slash-auto-complete-flag' is non-nil, then inserting a `</'automatically inserts the rest of the end-tag.<C-return> performs completion on the symbol preceding point.C-c C-d uses the contents of the current bufferto choose a tag to put around the word preceding point.Validation is provided by the related minor-mode `rng-validate-mode'.This also makes completion schema- and context- sensitive. Elementnames, attribute names, attribute values and namespace URIs can all becompleted. By default, `rng-validate-mode' is automatically enabled by`rng-nxml-mode-init' which is normally added to `nxml-mode-hook'. Youcan toggle it using C-c C-v.TAB indents the current line appropriately.This can be customized using the variable `nxml-child-indent'and the variable `nxml-attribute-indent'.C-c C-u inserts a character reference usingthe character's name (by default, the Unicode name). C-u C-c C-uinserts the character directly.The Emacs commands that normally operate on balanced expressions willoperate on XML markup items. Thus C-M-f will move forwardacross one markup item; C-M-b will move backward acrossone markup item; C-M-k will kill the following markup item;C-M-@ will mark the following markup item. By default, eachtag each treated as a single markup item; to make the complete elementbe treated as a single markup item, set the variable`nxml-sexp-element-flag' to t. For more details, see the function`nxml-forward-balanced-item'.C-M-u and C-M-d move up anddown the element structure.Many aspects this mode can be customized usingM-x customize-group nxml RET.	6.0	id=518409	24	False	True	cosimo.cecchi	1
id=695088	REOPENED	nautilus	Desktop	unspecified	Other Linux	Normal enhancement	Nautilus Maintainers	2013-03-03 22:12 UTC by	Jeremy Bicha	2017-01-04 15:50 UTC (	6 users	1. Log in to the new GNOME Classic mode in GNOME Shell 3.7.90+2. gsettings set org.gnome.desktop.background show-desktop-icons 'false'What happens------------The desktop icons disappear but come back the next time you log in to GNOME Classic.Suggestion----------I'm thinking that we need an extra gsettings schema (perhaps something like org.gnome.desktop.backgrounds show-desktop-icons-classic).I think GNOME Fallback might like to enable desktop icons by default too. However, the ability to override the default is pretty important especially since nautilus-classic is listed in the RequiredComponents section of the gnome-session file.	I would just make nautilus ignore the setting entirely when in classic mode.Or just make it ignore the setting, period.Matthias, I don't think that's a good idea. Why can't people choose whether they want to see desktop icons or not? It shouldn't be hardcoded into the gnome-session file.This could also have been done with an autostart file and it's not too hard to override autostarting. GNOME Classic & GNOME Fallback would have to identify as something other than GNOME though which would need a fair amount of work to make happen.Not sure what that fallback thing is you keep mentioning...it doesn't exist anymore. Anyway, we've avoided autostart for the reason you mention. Nautilus actually ships an autostart file that has a condition for show-desktop-icons. The problem is that we can't easily and cleanly override the setting in classic mode. We do override a few settings, but that only works because gnome-shell already has an overrides system for those.Just because GNOME developers dropped Fallback mode from Core and ripped out support from gnome-settings-daemon and elsewhere doesn't mean it doesn't exist any more. There are people that still want to run it and I don't think Debian or Edubuntu is ready to see it die yet. (I personally use GNOME Shell and like it but I hear feedback.)Anyway, I believe there's good reason to allow the default to be overridden by users and I believe my suggested fix in the original bug description would work and could be integrated nicely in Tweak Tool.If you want desktop icon rendering to live on, please help with moving it to a standalone process. That way, nautilus can evolve to be a real application.(In reply to)Yes, it does not exist anymore as GNOME Fallback mode. That was the entire point of dropping it - we get out of maintaining all the compromises and workarounds that it required...Matthias, how would we go about moving desktop icon rendering to a standalone process ? What widget(s) did nautilus use last for doing this ? Is there a general thumbnailing infrstructure yet we could reuse for this ?I'm asking from the POV of the Flashback session team, BTW; the needs for Classic session might differ.The class that is used is NautilusDesktopWindow.It's a long shot but what about using pcmanfm to render the desktop in gnome flashback (fallback) ?The command pcmanfm --desktop does the job. The desktop can be right clicked, icons can be added and the wallpaper can be set. The only regression I can find is that the wallpaper can no longer be set from gnome-control-centerI don't want to leave this bug open forever. Classic mode exists only to cater to conservative users. Surely the target audience here is people who want desktop icons?I think Jeremy was mostly concerned about the old fallback mode; surely that ship has long since sailed.(In reply to Michael Catanzaro from)I don't think so. Jeremy's point was, that users of the Classic mode are forced to use icons on the desktop and can not disable it anymore.I agree it's good to have desktop icons for GNOME Classic users by default. On the other hand I don't see a good reason why it should be forbidden for those users to disable that feature if they prefer so.I really don't want to reintroduce the logic we had for that, now that the desktop and nautilus are separated in different processes. That lead to a fair amount of complexity.The classic desktop is intended for that visual and workflow we had in gnome2 days.In case you only want part of it, you can still install those parts (the gnome-shell extensions).So I'm marking as WONTFIX since you are able to install and use parts of the classic desktop separately, instead of adding settings for all of its parts.(In reply to Carlos Soriano from)Hm, can you tell me how I can disable icons on a desktop as regular user?If you want GNOME Classic without the desktop icons, you could create a GNOME session based upon the GNOME Classic session but which doesn't specify nautilus-classic as a required component. See(In reply to Charles Bos from)That's not possible as a lowly user(In reply to Michael Biebl from)You mean using classic mode? It's not possible, classic mode is intended to use as it was gnome 2, including desktop icons and all of those gnome-shell extensions.You mean you want a custom mix between classic mode and not classic? Then is what I suggested, install the gnome-shell extensions and theme you want or/and activate desktop icons.(In reply to Michael Biebl from)Whoops, I missed that bit. In that case, I think killing nautilus on startup in a GNOME Classic session should do the trick though I don't have a GNOME Classic desktop in front of me to test this on. Not a very clean solution I'll admit. Or you could turn on the GNOME Classic extensions in a standard GNOME session as was suggested above.(In reply to Carlos Soriano from)Well, GNOME 2 did show desktop icons by default, but it had a gconf key/apps/nautilus/preferences/show_desktop where you could turn that off.That's basically what I'm asking for.Show desktop icons by default in GNOME Classic mode, but provide a gsettings key to turn that off.Hm no, that's not what I meant.I think jbicha's idea is the right one. Since we want different defaults for show-desktop-icons, we'd need two different gsettings keys with different defaults.The show-desktop-icons-classic key would only be read when nautilus-desktop is started in classic modeI guess that would be fine, I was wrong we need to return back the complex logic we had. But honestly I have not much interest on this, and not sure the code would look neat, I guess worth a try for those interested in this.	19.0	id=223417	14	False	True	danw	1
id=628072	REOPENED	gthumb	general	2.11.x	Other Linux	Normal enhancement	Paolo Bacchilega	2010-08-26 20:55 UTC by	Paolo Benvenuto	2015-12-21 12:42 UTC (	0 users	When a folder has many images, sorting them but "date photo was taken" or "image size" takes many seconds.On my dual core pc, a folder with 54 jpg images, 176 MB total, takes about 6 secs. to show.If you have many photos in each folder and you are working with one of those sortings, this gets very annoying.I suppose it's because of having to read all the file in order to get the informations which are used for sorting.I suggest to a cache system that could save the exif data, the same way the thumbnail is cached.	This bug isn't, it's about caching when changing folderMarking as obsolete, as the 2.x version are no longer supported.Please feel free to reopen this bug report if it describes a problem that still occurs with a current version of gThumb (currently 3.4.1).present in 3.4.0	3.0	id=746969	6	False	False	dieterv	1
id=422371	REOPENED	tomboy	General	unspecified	Other All	Normal enhancement	Jared Jennings	2007-03-24 18:18 UTC by	Harm Hilvers	2012-11-25 04:16 UTC (	2 users	Display the number of letters, words, paragraphs et cetera of a note in a status bar or the empty space next to the Delete button.	This might be handled best by a plug-in.CreatedCode for statistics pluginAttached is a simple plugin that counts the number of lines, words and characters I created. It can be compiled using the instructions onand may of course be included in the official Tomboy plugin package.Setting the default assignee and QA Contact to "".I would like to see this happen.There is a community add-in [1] for this.[1]Actually; Harm would you rather keep your add-in in github as a Community Add-in or would you like for us to include it as an official add-in?	6.0	id=269327	15	True	True	gerardo	1
id=50730	REOPENED	GIMP	Tools	git master	Other All	Normal enhancement	GIMP Bugs	2001-02-10 03:32 UTC by		2017-02-02 21:40 UTC (	12 users	The Antialiasing of GIMP in general is not good enough not smooth enough.Compare a selection and the shape of the selection with PS you will recognize that the GIMP produces more stairy effects MUCH MORE.Escpecially with the Stroke Funtkion you only get a very stairy Line.So you cannot create perfect shapes to get for example a good 3D Interface, because if you use Lighting Effect on a channel which has stairy shapes you get SHIT not a smooth or good 3D looking shape.I think this is very important because what are all these wonderfull Plug ins for when i even cannot create perfect shapes without any stairy effect.Please improve this in GIMP 1.4 or 2.0.Thanks i would be gratefull to get a better Antialiasing also in the FONT implention.GreetsWaldgeist	Re-assigning all Gimp bugs to default component owner (Gimp bugs list)Reassing to current CVS since this is a wish item and will not befixed in the 1.2 tree.You should try the gimp-freetye plug-in () toget a glimpse on the font renderer we want to use for Gimp-1.4.I really think that this needs to be fixed too... it really hurts gimp's viability for making web graphics. Everyone whom I've shown GIMP to has complained about this. The line anti-aliasing problem shows up on selections, strokes, etc. We really need better selection smoothing - a 'smooth selection' option like in photoshop would be great too. GIMP is wonderful, but this problem holds it back in a lot of places; it'd be nice to see it improved.On the subject of feature enhancements - maybe someone could hook a little survey form up on gimp.org that'll let people prioritize particular new features. :)Thanks a bunch,Mathew JohnstonI too believe this is a very serious issue. Especially with selections. Somebody should check out the antigrain geometry library atand the way to integrate it with Gimp. It'ssupposed to be even better than photoshop (they have some pics there).Although it isn't GPL it seems to be a very flexible license.The new font support looks amazing, I'll probably post a wish withtext layers support. (gimp developers will say, when are they going tohave enough?) :-DRegards,AndrésThere are several issues mentioned in the original bug report and inthe two comments above:1) The selections are not smooth enough2) Stroking the selections does not give good results (stairy effect)3) The text tool has bad anti-aliasing4) Add a survey form on www.gimp.org for prioritizing the new features5) Integrate the antigrain library in the GIMP.These should have been posted in separate bug reports because each bugreport must address only one specific issue. But in this case, Ithink that all points except for the second one will be solved soon orare irrelevant:1) I think that this point is not relevant, unless you can show some specific examples of selections that are not smooth enough when you fill them a color or when you perform some operation on them (other than stroking). Note that the selections are sometimes smoother than what is displayed by the selection outline (the outline uses a threshold). So in order to check if a selection is smooth or not, you should fill it with a color and see what happens. There is also the option Selection->Feather if you want a smoother selection than what you currently have.2) The Stroke option could be improved because it does not give good results with thin brushes. This problem is similar to the problem that we have when drawing straight lines (shift-click) with a small brush.3) The text tool will be much better in GIMP 1.4.4) I don't think that adding a survey form on www.gimp.org would be a good idea. Keep in mind that a feature will only be added if there is someone who volunteers for working on it. So if none of the existing developers has enough spare time to work on a new feature and if nobody else contributes a patch for implementing it, then it is not likely that the feature will be added soon. Getting more requests for some feature will not get it implemented faster, unless someone is ready to work on it. Anyway, if you want a survey for GIMP features, you could check some other GIMP-related sites. For example, the GIMP User Group () has a survey form on their home page.5) I don't know much about the antigrain library and their web site does not seem to work for the moment. In any case, if their license is not GPL or GPL-compatible, it is not likely that it would be integrated into the GIMP.So we are mostly left with point (2) in this bug report. If not, thenplease open a separate bug report because I do not want to addressthe other issues in this one.Point (2) is basically. This has recently been addressed inthe unstable branch:2002-06-12 Sven Neumann <> * app/paint/gimppaintcore.[ch]: applied a patch from Henning Makholm <> that vastly improves drawing of thin lines. Seefor a detailed description.The problem is not quite fixed by the #69773 thin-lines patch.Apparently, when a selection is stroked, there's a piece of code sitting somwhere which tries to convert the selection outline to a polygon; then that polygon's edges is sent to the line interpolator in the paintcore. Even though the paintcore's line code is now able to draw nice anti-aliased lines, what it actually is asked to draw by the polygonalizer is a series of axis-parallel integral lines: one pixel right, then one pixel down, then two pixels right, then another pixel down, and so forth. (This sequence of line segments seems to be identical to the thresheld polygon along which the ants march when the image is zoomed.) This means that ugly staircases are still seen.This also gives rise to another bug: When one strokes, say, a large circular selection with a 3x3 fuzzy brush and spacing 200%, the dots along the 45 degree parts of the circle are visibly closer than the dots along the horizontal/vertical parts of it. This is because the distance between brush position is measured along the staircase outline.What's needed to fix both of these effects is a smarterselection-to-polygon algorithm. Alas, my ideas about how such a beast could work are extremely foggy.Since we already use Libart for scan-conversion (seeapp/core/gimpscanconvert.c) we should also consider to use thesophisticated algorithms it offers for computation of stroke pathsand antialiased rendering of vector paths.I've looked a libart now, and as far as I can tell, it doesn't have what we need here, namely code that goes FROM the pixel-based selection TO the vector description of nice smooth polygonal outline that approximates the pixels (which can then be fed to the paintcore).Libart seems to be all about vector-to-vector or vector-to-pixels, not the other way around. It does have a set of functions for doing "strokes", but those are vector-to-vector operations whose name refers to the "stroke" primitive in PostScript, which is something quite different from what the Gimp calls stroking a selection.Did I miss something somewhere?This is the license of the antigrain library. I think that is prettymuch gpl-compliant. Permission to copy, use, modify, sell and distribute this software isgranted provided this copyright notice appears in all copies. Thissoftware is provided "as is" without express or implied warranty, andwith no claim as to its suitability for any purpose. I would love to actually code this myself but my skills are not goodenough for a project like gimp. Especially since this involves dealingwith C++ code (for the antigrain library).And Raphael, try to go easy on users because your response wassomewhat harsh.The page of the library is antigrain.com and the sample screenshotcomparing Photoshop/Xara antialias method to antigrain's can be foundatI hope you guys can integrate this thing. I'd really like to get mysister to switch from Photoshop :-DI tried to work with the GIMP one month ago instead of Photoshop and I miss the stroke function from Photoshop.The best result I could find is to use the freetype tool to create Bezier curves from my Text and then to stroke it.But even like that, the result is very fair compared to Photoshop.I think it would be very important to improve this function in 1.4 or 2.0 version because this is a very useful function and it is currently impossible to get professional results in GIMP.Bumping a bunch of enhancement requests which will not be done by the featurefreeze to Future. Dave.Oh, forgot to update that bug. Sorry.I have checked in some experimental code a month ago, that improvesthe stroking code. A new function applies a modified versionof the Douglas-Peucker algorithm to the polygon that describesthe selection outline. The results are better now (IMHO).Please note, that this does not make an elliptical selectionresult in a perfectly stroked ellipse. But I think this wouldbe overkill.Please try if the new behaviour is better and add comments to this bug.If the new code is what is in 1.3.21 [I was eager to try this out and just grabbed the latest Debian package], then it's an obvious improvement relative to what I saw in June 2002. The diagonal-spacing problems are gone; see example on<>.However, the accuracy of the outline tracing is somewhat lacking. See<> where I first poured red paint through an elliptical selection and then stroked the outline with a 1x1 pixel black brush (the postscript-like stroking options gave the same result). At places around the outline there are visible splotches of red outside the black line and white inside it.It might be possible to fix this by tuning the tolerance distance parameter in the Douglas-Peucker algorithm, but the stroke style dialog does not provide a user interface for that.(I will try to get time soon to play with a cvs checkout and try out some ideas I have for optimizing Douglas-Peucker for thin antialised lines).Yes, 1.3.21 contains these changes. The code lives inapp/base/boundary.c, simplify_boundary(). Please look at it andtry to improve it.There are two problems with the further improvements:a) the coordinates for the boundary points are integersb) the threshold for no further subdivisions has to be big, because 45 degree pixel-stairs have to be caught - otherwise the libart ("postscript") stroking fails badly.The modification I applied to Douglas-Peucker is, that the subdivisionalways happens in the middle of the coordinate set. (Original DouglasPeucker picks the point with the greatest distance to the line). Thereare some cases where this leads to better results.I'd be happy if you manage to find some time to improve these heuristics.I disabled the use of the simplify_boundary function for now, sincequite some people were confused and the traditional behaviour fails ina more predictable way... :-/2003-12-31 Simon Budig <> * app/core/gimpdrawable-stroke.c * app/paint/gimppaintcore-stroke.c: Don't simplify the border of the selection. Quite some people were confused by the polygonal look of a stroked ellipse. The old behaviour doesn't look good, but the new one isn't really better. Since the old behaviour is more predictable, I am reverting this for now (Please note that the function to simplify the boundary still is available, it just is unused). Hopefully at some point it will be possible to have non-integer boundary coordinates or even a more sophisticated set of "vector-selection" tools.Maybe this is now fixed with the patch in?The description ofdoes not suggest so, at least. The present bug isthat no matter how nicely anti-aliased the selection is (which is what 147836addresses in the special case of epllipses), the stroke tool will (in effect)apply a brute-force threshold filter to the selection channel and then strokethe pixel-for-pixel outline of the resulting 1-bit image. By construction, thisoutline always consists of little axis-parallel pieces, which (a) makes thinstrokes look ugly and (b) screws up the distance calculation for stroking withlarge brush spacings.I agree that the anti aliasing could be improved in GIMP not only strocking butwith the magic wand tool. The results seen in Photoshop are much better thatthose obtained in GIMP, I can provide examples.This bug report is useless as it stands. What we need here are reproducableexamples with detailed description on the expected behaviour. I am closing thereport as INCOMPLETE and ask people to open more useful bug reports if they feelcapable of providing the necessary information with it.Actually I don't think that this bug is as useless as you make it sound.The bad effects of stroking the boundary of a selection are immediately visiblewhen you use e.g. libart stroking on an e.g. elliptical selection and compare itto the antialiasing of stroking a path. The latter is the desired outcome.The fact that we have no idea how to fix this is not a good reason to close thisreport. The discussion we had here is IMO important and should stay visible.Reopening.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Eeek.. this is getting out of control :-) Just got to mails from 2 different people complaining about this very issue. [GUG] question, re: elliptical outline Date: Today 21:09:48 From: Matt Cahill <> Re: [Gimp-user] circles and circumferences... again Date: Today 18:31:59 From: Thadeu Penna <> To: <>It is still not fixable. Perhaps you should tell those people to stroke a pathinstead. For 2.4 we should add a Shapes tool to fix this issue.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***As mentioned in, using an odd stroke width looks almost likeantialiasing.CreatedAntialiasing issue when stroking a selectionThis picture shows that Antialiasing is a proper option when stroking a selection, which works when width is an odd number, but does not work when width of line is an even number.Hello Michael Natterer,"What you are seeing is not antialiasing, you are seeing half pixels beingfilled. This is not antialiasing but just a blurry outline."In, you assume that I think Antialiasing when stroking a selection is a side effect. But it's not, it's part of the options of the dialog box that appears. So either it's a really crappy side effect that appears half of the time, and that should be corrected and no option should appear, or it's a real feature that works only half of the time.Antialiasing only does something when you are filling partial pixels,in the case of an even stroke width this never happens, thus the antialiasingtoggle has no effect.For odd widths, that is of course antialiasing in effect, not some weirdside effect, I was wrong there.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	35.0	id=109726	3	False	False	david	1
id=317836	REOPENED	aisleriot	docs	git master	Other All	Normal enhancement	Maintainers of Gnome user documentation	2005-10-03 15:41 UTC by	Alan Horkan	2011-04-16 10:48 UTC (	4 users	Patch to follow which adds a very brief History section to the documentationBaker's Game and Freecellmore could be written, wikipedia has quite a lot of information but I wanted tokeep it short the main purpose behind all this is really as an excuse to provide links fromone game to the otherI have included links and I hope they syntax is correct but it should definatelybe checked and reviewed first before committing. (in future I might like to find a way to categories and possibly also linktogether the various Addition style games or group other game types together asI think it is a good way to help users discover new games which they might likewithout having to try every one.)	Createdpatch to add history section freecell and bakers game docsCould you add a little bit more to the Baker's Game entry to flesh it out?Things like when it was invented. For Freecell, rather than talking about theMicrosoft version it might instead be worth pointing out that Freecell hasalmost always been a computer-based game (as opposed to say Klondike, which iswidely played with real cards) - this has had a strong influence on the way thegame is played.As for the categorising idea, I have been thinking about it for a while now -the games fall into several distinct genres. I'm thinking it might be best tohave the menu of games be a tree-view with the top level of the tree the variouscategories. This would also help make the list more manageable as well ashelping people discover new games.Yes but I wanted to get something adequate done quickly rather than waiting. If you commit any of what I have provided so far I will take it as encouragementand try to do more (although my internet access may be cut off in the nearfuture). Isn't that what Open source is about, getting it done and making itbetter later? (I'm as guilty as anyone of getting carried away by grand ideasand not enough action, proof by contradiction if you will.)My hardware is old and decrepid and I really have serious problems using thehelp system. Help is one of the slowest applications I have to deal with, notjust in terms of raw speed but also in terms of navigating it efficiently whichis why I think it is very much worth my time to try and improve the linking andcategorisation of the games. (I have been playing another Solitair game(goodsol afaik aka Pretty Good Solitaire and was impressed by the organisationof its help files). With a large selection of games I believe (from my own experience) linkingsimilar games will encourage users to try out new games.The wikipedia entry for Freecell includes a lot more information and I expect Icould come up with a much more detailed entry but (in addition to wanting to getsomething/anything done fast) I wanted my work to be my own not just copied fromWikipedia. I will try to consult more sources and come up with a morecomprehensive and descriptive entry. (I'm tempted to submit a screenshot ofAisleriot solitair to wikipedia in addition to their Windows Freecell ScreenshotThere is also the issue of not having History information for the other gamesand including a very disproportionately large amount of information for Freecellwill make the abscense of such information more noticalbe in the other games.I felt I couldn't ignore Microsoft as their influence (for better or worse)played a large part in popularising the game, I even added a comment in themarkup to that effect....categoriessounds good. presumably you intend this to be in game not just in thedocumentation. documentation generated directly from a program may not haveelegent prose but it is easier to produce and more likely to be well maintained. I almost wish more of the documentation could be generated directly from eachgame configuration file. if the documentation were more easily searchable a tagging system with muchricher metadata including things like number of decks, compact screen layouts,difficulty information and game style might be useful but I guess that is afuture issue we can discuss onlist if and when improved infrastrucutre becomesavailable (and my bitching about gnome-help in public isn't exactly going to beproductive so I may as well not say anything for now). To reiterate and clarify what is most important to me, please commit somethingwhich links Bakers Game to Freecell and vice versa as soon as possible. I willtry and work on a more detailed description, maybe even consult a real lifebricks and mortar library.very interesting idea :-)I'm trying to apply your patch and it fails.As you're adding self-contained sections, could you attach just the source of those or paste it in a comment?Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!apologies for neglecting to follow up the previous request for comment, not sure how that happened. the patch itself was very simple so I'm surprised it couldn't be force applied using one of the various options to patch but I've pasted the two sections here as a comment as requested. You can delete the Microsoft line if you feel very strongly about it but the most important part of this whole exercise was to get the link from Bakers to Freecell and some small amount of basic context so it would make sense to readers. The first paragraph is to be added to bakers_game.xml and the second paragraph added to freecell.xmlpreferably towards the end of the page. Thanks<sect2>History</sect2> <para> Baker's Game was created by C. L. Baker. <link linkend="freecell">Freecell</link> is a famous variation of Baker's Game. </para> <sect2>History</sect2> <para> Freecell is a variation of <link linkend="bakers_game">Baker's Game</link> created by Paul Alfille. Freecell unlike Baker's Game has the addition of free cells for which it is named. Freecell also builds down by alternate colour whereas Baker's Game is more difficult and builds down by suit. <!-- How could I not mention Microsoft? --> Microsoft included FreeCell with their Windows Operating System which helped make the game widely known and more popular. </para>Patch doesn't apply anymore, setting patch status accordingly.I was asked for additional comment on this, I'm not sure what I can add. The patch bit rotted. I explained why above. I provided the relevant sections so that a developer could manually insert the most relevant changes and create a new patch if desired. I'm not an active developer and it is impractical for me to manually reapply the changes and resubmit a patch. I do still believe it is important to interlink the documentation and give users valuable context and lead them to new game variations they might enjoy.	9.0	id=775157	4	False	False	seb.sfo	1
id=127786	REOPENED	GIMP	Tools	git master	Other All	Normal enhancement	GIMP Bugs	2003-11-24 04:57 UTC by	Daniel Rogers	2015-06-06 14:46 UTC (	6 users	I am putting this here to keep track of brush and tablet bugs andehancements. I want to use it to keep track of ideas about the brushes andpainting tools.This is something I want to work on in the future (after some more geglstuff is done).	Wouldn't it be better to track the brush- and the tablet-related stuffin two separate meta bug reports?Some changes to the brushes (such as the history brush inorthe healing brushes in) are totally independent of thetablet support, while some other bug reports related to the tablet usageoutside of the image window () are not related to thebrushes at all.I was wondering the same thing.Ahh, well, my original concept for this was really to track brushchanges, and tablet bugs that affected how the brushes were used. Basically because the tablet, since it is the most complicated inputdevice we support, puts the most strain on the brush drawing system,and so enhancements related to how the tablet should behave are closlyrelated to enhancements to the brush and tool system.I don't think my summary really reflected that.On the other hand, if someone is changing the brush and tablet systema lot, it would be useful to fix other bugs while he/she is at it. Iwas thinking of this as a task list for things to implement in anew/improved tablet and brush system (which would probably be veryclosely related. eg. there would be things in the brush system forsupporting features only in the tablets).closing it as unused. ITs been here doing nothing for 5 years.oops... Sorry. got deps...CreatedGIMP [v2.6.10] Tablet Bug - Example 1Windows 7 Pro, GIMP v2.6.10, Genius Mouse & Pen 12x9 Tablet[Tablet Bug]Well if this is still working... I got one for you. [This kind of thread, I believe, should be on the top of the list]Tested on Windows 7 Pro, GIMP 2.6.6 and 2.6.10. - Tablet: Genius Mouse & Pen 12x9 with the new drivers.-> Open GIMP-> Create or open a new image-> Use your tablet's pen and roll it over the imageDone, you'll notice that GIMP catches the X position with a negative offscreen value. Also, when you move it side to side, you'll notice that does not varies as expected.I've uploaded 2 examples Using a 640 x 400 new image. One with the pen right on the lower left corner and the other on the lower right corner of the image.CreatedGIMP [v2.6.10] Tablet Bug - Example 2Windows 7 Pro, GIMP v2.6.10, Genius Mouse & Pen 12x9 TabletI have the same problem but for me it seems to be with all images so even more important that it gets sorted.I've placed bounty 30$ tothat blocks this one.Hope it will get fixed.	10.0	id=317836	17	False	False	ploum	1
id=775157	REOPENED	anjuta	plugins: project-wizard	3.22.x	Other All	Normal enhancement	Sébastien Granjoux	2016-11-26 19:30 UTC by	Markus Elfring	2016-11-28 20:14 UTC (	0 users	I got the impression from the description in the document “” that the project wizard will work only so far when the number of involved setting pages is fixed.I imagine that there is a need to make it better configurable when additional pages will be appropriate for further data display and input after settings were performed in previous configuration steps.How do you think about to improve the software flexibility here in a safe way?	I agree it's not clear in the documentation but it's already possible and used by several existing templates.It's written in the introduction where I explain that the file is re-read and go again through autogen after each page. So depending on the inputs of the previous pages, you could generate a different xml file, including removing page block if they are not needed.(In reply to Sébastien Granjoux from)Which wizard files demonstrate the needed techniques better?I find the consequences still unclear for the page count handling.Where are the higher level data management interfaces explained in a way so that the desired construction of corresponding data structures can be safely performed on demand?(In reply to Markus Elfring from)I think most of them use that. You can look at plugins/project-wizard/templates/terminal.wiz.in: [+IF (=(get "HavePackage") "1")+] <page name="packages" _label="Configure external packages"...The page count is unknown until we reach the end of the configuration.I think nowhere, the documentation is not very clear on this topic. There is only the few lines in the introduction.(In reply to Sébastien Granjoux from)Can this aspect become more dynamic?How are the chances to improve the software situation a bit more here?(In reply to Markus Elfring from)What do you want to do which is not possible with the current format?Do you mean improve the documentation? If yes, I don't spent much time on Anjuta anymore, so I don't think I will do it at least in the coming months.(In reply to Sébastien Granjoux from)I am still unsure about the kind of information is fixed so far and which elements can be really used in so variable ways as I imagine.Are there any other software developers or technical writers who could also clarify the involved detail to desired degrees?(In reply to Markus Elfring from)Then, tell me what you want to achieve?I'm afraid that I'm the most active developer of Anjuta, else you can look at the code and all existing project templates.(In reply to Sébastien Granjoux from)I suggested to fiddle a bit more with D-Bus and CORBA.I got also the idea to construct a software assistant for the generation of further Anjuta project wizards.These programming approaches have got in common they will need to deal with a varying number of elements, attributes, properties, functions, interfaces and translations.The concrete count of data entities will not be known in advance because it will depend on dynamic data input and corresponding displays. So I am still checking how good my expectations fit to the current software situation.	8.0	id=127786	19	False	False	daniel	1
id=135843	REOPENED	pango	general	1.4.x	Other Linux	Normal enhancement		2004-03-01 17:03 UTC by	Owen Taylor	2008-04-21 22:26 UTC (	1 user	Had to write:static PangoDirectionget_cursor_direction (GtkLabel *label){ PangoDirection last_direction; GSList *lines; g_assert (label->select_info); gtk_label_ensure_layout (label); for (l = pango_layout_get_lines (label->layout);; l; l = l->next) { PangoLayoutLine *line = l->data; /* If label->select_info->selection_end is at the very end of * the line, we don't know if the cursor is on this line or * the next without looking ahead at the next line. (End * of paragraph is different from line break.) But it's * definitely in this paragraph, which is good enough * to figure out the resolved direction. */ if (line->start_index + line->length >=label->select_info->selection_end) return line->resolved_dir; } return PANGO_DIRECTION_LTR;}Should be in Pango.	*** This bug has been marked as a duplicate of***So, the api for this should probably text an index into the text and return the par dir for that position.Anyone willing to cook a patch? :)	3.0	id=339304	15	False	True	reinouts	1
id=337809	REOPENED	GIMP	Plugins	git master	Other All	Normal enhancement	GIMP Bugs	2006-04-09 15:00 UTC by	Clarence Risher	2016-06-30 21:41 UTC (	4 users	GIF images include a field for specifying the aspect ratio of the image. Thisfield is currently ignored, except for a warning message, by gifload and set to0 (effectively 1:1) by gif. I would request that this field be used to store avalue based on the x and y resolutions of the image. While the magnitude of theresolutions would be lost, their ratio would be preserved (in most cases, ratiosbelow 1:4 or above 4:1 being effectively nonexistent) which would at least allowthe image to be rendered viewably at some zoom level.I will be attaching my attempt at a patch to gif.c and gifload.c as soon as Ican detach the relevant changes from my other additions to those files.	***has been marked as a duplicate of this bug. ***CreatedPatch implementing gif aspect ratio save/loadI apologize for the accidental duplicate bug. This attachment is my attempt at implementing saving and loading the image aspect ratio to GIF files.My original statement was incorrect. This is not regarding the aspect ratio of the entire image but of each pixel. I apologize for the mistake. It was only a typo here, the patch and my concern address the problem accurately.Createdimplements mandatory save/load of aspect ratioThis version of the patch is simpler. Saving the aspect ratio is mandatory. This means the PDB changes, which I was told on IRC would break backwards compatibility with scripts, are gone. Mandatory saving is probably not a bad idea anyways. This patch saves 1:1 as 49, which indicates 64:64. The alternative, and how it was saved before, would be to save 1:1 as 0, a trivial one-line change to this patch.Why make it mandatory instead of introducing a new api call? I'm hesitant to start supporting obscure GIF features by default without verifying that it doesn't break common viewers (i.e, the web browsers out there).Createdsuite of sample GIFsThis attachment includes a bunch of sample gifs. They are visible on the web at(where I will add new ones as I implement new features). So far it seems that most programs simply ignore the aspect ratio information. This includes Konqueror, Internet Explorer, Photoshop, ImageMagick display, and Opera.I don't think you could've tested all the versions still in use that fast. ;) Please introduce new api, as I said on irc, toying with new defaults on what effectively is a compatibility format is unwise.Createdsample gifs with different aspect ratiosThis attachment matches the new contents of the above linked web page. I find it a more effective demonstration to have the images render differently when rendered incorrectly.As to the mandatory/pdb issue, I will most likely implement a new save function with its own API once I have implemented all of the updates to the gif spec, thus avoiding 10 new versions.As I said on IRC, you do not have make 10 functions, the PDB API in the unstable version is not frozen, so you can update the new function signature as well.I am going to resolve this as WONTFIX because: (1) according to the GIF89 specification, a value of 0 is valid, and means that no aspect information is specified; (2) I haven't seen any evidence that any existing program mishandles the GIF files that GIMP produces because of this or would even care about the change; (3) if it ain't broke, don't fix it. The change is probably harmless, but why take the risk, unless there is some benefit?I ask for this bug to be reopened. Proper aspect ratio support for GIF is necessary to handle non-square pixels in this file format.GIMP already has proper aspect ratio support for PNG files, so why can't it have for GIF files too?Here's an example of an image from the NEC PC-88 that has a pixel aspect ratio of 1:2.4, just like the original CGA (640x200 screen resolution).Currently, GIMP just can't import or export GIF images with such aspect ratio.For more information about why the proper pixel aspect ratio is important, please check this excellent article about its effect on pixel art:A good step would be to provide an updated patch - maybe the ones attached to this bug can be used as a base.FRS, the main argument against adding this was that GIF files like this do not appear in the wild, and that the way the patches were done changed the behavior of existing code completely.A new patch should address the issues mentioned in the comments.I don't see anything wrong with allowing that. We should at the veryleast load the ratio correctly. But a proper save patch would adda second procedure with the aspect ratio parameter, and the aspectratio GUI should probably not appear when the image has an 1:1 pixelaspect ratio.	15.0	id=628072	4	False	False	mjc	1
id=579612	REOPENED	empathy	General	unspecified	Other Linux	Normal enhancement		2009-04-20 14:16 UTC by	Guillaume Desmottes	2009-04-20 14:46 UTC (	1 user	A prerequisite for moving EmpathyContactSelector to the future telepathy-gtk is to change its API to a TpContact based instead of a EmpathyContact one.	We are not going to drop EmpathyContact anyway. We need an abstraction for at least meta contacts. This is a dup of*** This bug has been marked as a duplicate of***Meta contacts are not going to be implemented soon. We shouldn't block on this. I prefer to have a TpContact oriented widget/API now and a meta-contact later than having to wait an unknown amount time because we are blocked on meta-contacts.This bug is not a dup ofas the current tp-contact branch still use TpContact. It could depend on it though so applications could easily get an EmpathyContact from the TpContact if needed.	2.0	id=135843	10	False	True	otaylor	1
id=339304	REOPENED	epiphany	Bookmarks	git master	Other Linux	Normal enhancement	Epiphany Maintainers	2006-04-21 13:54 UTC by	Wouter Bolsterlee (uws)	2016-10-09 13:19 UTC (	4 users	I think the bookmark menu should respond to characters typed on the keyboard. I think only using the first letter of the bookmark name will be fine. Multiple matches for a single letter can be handled by jumping to the next match if the letter was pressed again.Example:- Bar- Baz- FooPressing B will select Bar (but not load the page), pressing B again will select Baz (but not load the page). Pressing F will select Foo (should it load the page if there's only one match? I don't think it's consistent)	cc'ing harves.is the bug still relevant in epiphany 3.0 ?Yes, it is.I don't think this is how menus are expected to work nowadays?(In reply to Michael Catanzaro from)Well you're correct that there's nothing about it in the HIG, however bookmarks are a bit of a special case as you cannot predict the menu items so you don't have any keyboard shortcuts by definition. This could alleviate that disadvantage a bit.For comparison, the GTK+ dropdown box does react to the first letter of selectable items if you type them.	5.0	id=579612	8	False	True	xclaesse	1
id=374854	REOPENED	GIMP	Script-Fu	git master	Other All	Normal enhancement	GIMP Bugs	2006-11-13 20:42 UTC by	Sven Neumann	2011-02-28 22:54 UTC (	5 users	It appears that Script-Fu parsing its scripts takes up about one third of the startup time of gimp (with warm caches). I had a look at this with sysprof and found that about two third of that time is spent in oblist_find_by_name(). This function spends almost all of its time comparing strings. It does so in a case-insensitive way that is suitable for UTF-8 encoded strings. In particular it calls g_utf8_casefold() on both strings and compares them with g_utf8_collate(). The latter needs to do normalize the strings before comparing them.If we could store the normalized casefolded string in the table that oblist_find_by_name() searches in, we could avoid doing the casefolding and normalization for at least one of the strings. A lot of other places also call stricmp(), but almost always with lowercase ASCII strings which can be assumed to be identical to their casefolded and normalized version.As far as I can see the stored strings are even already normalized (not case-folded though), see store_string(). Now if we could also case-fold them, we could cut down startup time noticeably with a simple change.Other optimizations are possible as well. For example it appears as if the string length passed to store_string() is a character count that needs to be calculated using g_utf8_strlen(). The value is then immidiately converted back to a bytes count in store_string().It is also questionable whether it makes sense to copy all glib-allocated strings to newly malloced buffers. It may make sense to do all memory allocation using g_malloc() and friends and then just use the strings that glib allocated for us. This would avoid some redundant memory allocations and copies.	I'd like to advocate that Script-fu (as implemented with TinyScheme) employ case sensitivity and only recognize standard ASCII (i.e., normalized versions of UTF-8) codes for its symbols and identifiers.Being as Script-fu is a scripting language for the GIMP, there should be little expectation that it will ever be used to run extensive "external" programs or make use of extensive external libraries. There may be a few runtime extensions that might be useful; but if they are well-written, they will most assuredly not rely case insensitivity and most likely would not employ non-standard ASCII characters (it is usually the opposite, the libraries are very particular NOT to use special features). It would seem to be quite common for Scheme implementations to forego the case insensitivity that is part of the R5RS specification. This website lists some common Scheme interpreters that are using case sensitivity for their symbols:The reason to "demand" case sensitivity for a Scheme interpreter is, of course, speed. I performed a couple of crude benchmarks and discovered that replacing the 'stricmp' function call with 'strcmp' resulted in about a 40% improvement in execution time for the "script-fu-refresh" function (12 seconds versus 7 seconds from the console, 30 seconds versus 22 seconds for the splash screen portions).I realize that speed is not of primary concern for Script-fu; but when weighed against the nearly negligible benefit of case insensitivity, it would seem to be worth the trade.Making scripts depend on case insensitivity is poor programming practice and it would seem that even now, the case insensitivity of TinyScheme is somewhat questionable, as the following console transcript would indicate:=> (define One 1)One=> One1=> ONE1=> oneError: eval: unbound variable: one --------------------------Limiting the character set to "standard" ASCII (normalized UTF-8) is a separate issue; but it also affords an opportunity for optimization with little demand being placed on script authors. While it might be "cute" to define 'lambda' to actually be the Greek symbol (or other such "tricks" using UTF-8), if nothing else such a practice might cause difficulty with using the GIMP's Script-fu console to interactively work with Script-fu. The only downside I can see to case sensitivity and UTF-8 coding for symbols would be with regards to maintainability of Script-fu with the ongoing development of the TinyScheme project. That is not to trivialize that downside; it might very well be sufficient justification to retain case insensitivity. Nonetheless, if the maintainability aspect of this decision can be resolved then I think it would be worth being non-compliant with R5RS for the purposes of GIMP scripting.Thanks for your time and consideration.I tend to agree with. But I'd like to point out a few points.(1) Unless symbols are limited to ASCII, they would still have to be normalized for comparison. strcmp() can only be used reliably on ASCII strings.(2) I fully agree that case-insensitivity in a a programming language is more harmful than useful. IMO we should get rid of it even though that means violating the standard.(3) The 40% speedup that you have seen can IMO easily be achieved by the optimizations that I outlined. This does not depend on the question of whether we do want to support non-ASCII symbols (yes, please) or being case-insensitive.CreatedPatch to optimize oblist_find_by_name() and when UTF-8 string compares are used.The GIMP splash screen says "extension_script_fu" on my machine for abou 18.5 to 19 seconds in the Script-Fu. With this patch, the time is down to about 16.2 to 16.5 seconds. Using sysprof, the time spent in oblist_find_by_name() is reduced by about 50%.If you want to use strcasecmp, please use g_ascii_strcasecmp() as strcasecmp() is not available on all supported platforms and has completely broken behaviour with respect to locales. Do you need to define stricmp at all after these changes?Also you must not use free() on memory that was allocated using glib. If possible, you should use g_malloc() and g_free() (and their variants) all over the place. But if you absolutely need to mix memory allocators, please make sure that you are using the correct function for releasing the allocated memory.CreatedUpdated tinyscheme optimization patchDon't know how this this reversion slipped in to the patch file but line 167 of the new patch should read: strkey(a) = g_utf8_collate_key(p1, -1);and not strkey(x) = g_utf8_collate_key(p1, -1);Looks good to me. The hash function is still problematic (as discussed on irc earlier today). But that's not part of this optimization. I should probably open a new bug report for it.2006-12-13 Kevin Cozens <> * plug-ins/script-fu/tinyscheme/scheme-private.h * plug-ins/script-fu/tinyscheme/scheme.c: Optimizations for string comparisons. Time spent in oblist_find_by_name() reduced by ~50% during startup by use of stored collation keys. Fixes.Fix for hash_fn() will be commited shortly.Unfortunately I have to reopen the bug because the implementation is wrong. The current code inserts into the hash table using the name. Lookup in the hash table is done using the key. This only happens to work because for all the symbols in our scripts the key is identical to the name.I will attach a patch that should fix the problem. While writing this patch I found that when mk_symbol() is run for a new symbol, the key is generated twice. Once when doing the lookup in oblist_find_by_name() and second time when this lookup fails and oblist_add_by_name() is used.However, after having another look at the code, I am pretty sure that the implementation is still buggy even after this patch is applied. mk_symbol() seems always to be called with a string that is passed through g_utf8_strdown(). I strongly suggest to make a number of test cases with symbols that have upper and lower case characters outside the ASCII range.Createdfix insertion into hash tableThe implementation regarding optimization isn't wrong but incomplete. Without the hash_fn() changes it will not properly handled UTF-8 coded identifiers. The attached patch is missing two changes in calls to hash_fn(). I haven't commited the changes from my tree since I experience a hang of Script-Fu when trying to run scripts. I'm looking in to the problem.Setting on the 2.4 milestone because it doesn't make sense to ship with this change half-way implemented.CreatedAdditional changes related to use of collation key.I have reviewed the passing of the collation key to hash_fn(). This patch fixes some errors I found in the calling of hash_fn(). It also includes changes where hash_fn() was still being called with a name instead of collation key.However, it also results in Script-Fu going in to an infinite loop. This occurs either during start up of GIMP or when clicking the "OK" button in a Script-Fu dialog box.I'm not sure the DDD/gdb packages are working as well as they used to on my machine since I udpated to FC6 and it is making it harder to debug the problem. I don't think the effort involved in completing the optimization changes is worth the couple of seconds of startup time it will save. I would rather back out the changes and leave optimization until after 2.4 is out. There are three other Script-Fu issues that are more important which should be dealt with first.***has been marked as a duplicate of this bug. ***Createdstrace log when trace.scm is refreshedtrace.scm is a simple script with only two functions and corresponding PDB structures. It is 441 bytes long.(define (script-fu-trace-[on|off]) (tracing [0|1]))The strace log shows how many time is spend with llseek/lseek/read sequences. This is related to Solaris FILE* implementation. In linux, the time is spend using _llseek.The plugin lost a lot of time here. A detailed analysis show that we use llseek(file,0, SEEK_CUR) = ftell(), then lseek(file, -offset, SEEK_CUR) = lseek() and finally read() = fgetc() (on Solaris, a complete buffer is read by FILE* implementation at each fgetc()).The scheme parser then lost character already read.Createdstrace log when trace.scm is refreshed with backchar() updatedUpdating plug-ins/script-fu/tinyscheme/scheme.c:backchar() reduce significantly the parsing time.CreatedPatch for tinyscheme parser backchar() against 2.3.16Looks good to me, waiting for a comment from Kevin...2007-05-17 Kevin Cozens <> * plug-ins/script-fu/tinyscheme/scheme.c: Applied patch from Eric Lamarque that optimizes backchar() use. See.The backchar() patch saves approximately 0.1 seconds during GIMP start up on my new machine. I estimate it would save around 10 seconds on my old 266MHz Pentium II. It would be interesting to see if the change could be used when reading from string buffers.Changing summary line as this report now includes information about other possible optimizations for Script-Fu than just stricmp().Kevin, is this currently in a state that can be released? Are there any optimizations that might have to be reverted because they aren't finished yet? If not, we can probably close this bug as FIXED.I think we need to consider reverting the changes made regarding the storing of collation keys. As Sven has stated, the changes are not complete without the changes for hash_fn(). The changes shouldn't be that hard but initial attempts have shown they aren't quite as simple as I first thought.Also, saving the collation keys hasn't shown as big an improvement to start up time as originally thought. The optimization made by Eric to backchar() seem to have provided more of a reduction in start up time.We can revisit the issue again after a 2.4 release. I still have in mind the idea of reworking Script-Fu to make it behave as other scripting language plug-ins (such as pygimp and gimp-perl). It would provide the biggest time savings when starting GIMP with a warm cache.There is nothing that needs to be done in hash_fn(). The hash function will work just fine with UTF-8 encoded keys. And if it doesn't, then you could simply use g_strhash() or copy it. What needs to be done is to fix the use of the hash table, as pointed out in.Perhaps reverting is indeed the best thing we can do here. The optimization should not have been attempted without a test case as pointed out in.Createdpatch to revert the changes done in revision 21536Please review the attached patch carefully and test that it doesn't introduce any regressions.I was referring to the use of hash_fn() and what it is passed and not to any need for changes in the hash_fn() function itself. I referenced your comments about hash_fn() but missed a word or two so it wasn't clear in my previous comment.I will review the patch to revert the changes and compare them against the patch that was originally applied. That should prevent any regressions from slipping in.Applied patch from Sven Neumann. We can revisit this issue after the 2.4 release of GIMP. Moving this to the Future milestone for now since some planned changes for Script-Fu could make this issue obsolete.2007-08-11 Kevin Cozens <> * plug-ins/script-fu/tinyscheme/scheme.c: Commited patch from Sven Neumann that reverts the optimization patch which stored collation keys. See.It would be nice if the proposed changes could be reconsidered for 2.6. There are some really low-hanging fruits here and it would help to reduce startup time.It appears to dangerous to change this code without the test cases suggested in. So let's bump it to the Future milestone until someone adds those test cases to Script-Fu.The infinite loop mentioned in comments #11 and #13 happenswhenever there is an error while interpreting scheme's codeattached to the '*error-hook*', in that case the '*error-hook*'is invoked again and if the error persists the infinite loopstarts.The problem is in scheme-wrapper.c where the old_constants[] "APPLY" is added to scheme's environment.Now, it does not hide the built-in 'apply' function just because the two identifiers live in two different bins of the hash table,but after the application of the patches attached to this bug report,the constant hides the built-in, and as soon as a script, directly or indirecly, invokes 'apply' the '*error-hook*' is invoked which again calls 'apply' (through 'throw').***has been marked as a duplicate of this bug. ***	29.0	id=374854	26	False	False	saul	1
id=231751	REOPENED	evolution	Contacts	3.2.x (obsolete)	Other All	Normal enhancement		2002-10-04 15:31 UTC by	Calum Benson	2012-06-16 23:14 UTC (	5 users	Probably one of the biggest annoyances I have with Evo in daily use is thelimitation of only having a single line textfield for each of the To, Cc,and Bcc lines. It makes compiling, checking and editing anything but themost trivial distribution lists a chore. (Especially on Solaris, where thehorizontal scrolling in the textfield is *REAALLY* slooowww...)I appreciate you might not want to go the Mozilla way and have one line foreach recipient (although in the NS4.x days this actually worked prettywell... it's got rather ugly in NS6 though). But even if the fields werejust made into combo boxes that you could drop-down to show the completelist of current recipients it would be a big improvement. Being able toadd/remove recipients from the dropdown part would be absolutely perfect,though :)	Calum: I agree that the problem you reported sounds annoying. We have a fewmechanisms in place to combat this-- could you let me know if eitherof these helps you? 1. If you press the "To" button (or the cc/bcc buttons), then a toolshould appear to let you select recipients from you variousaddressbooks. Does this tool help your problem? (We call it the"select names dialog" in the development team.) 2. You can also create, store and edit distribution lists using theContact List Editor. If you start the addressbook, and selectNew->Contact List, a dialog will appear to help you do this. Contactlists are presented like contacts to you in the UI, and are simple toview/change/whatever. Does this help your problem at all?It is okay if you don't think these mechanisms help your case. I amjust trying to understand how you are using Evolution, so I canunderstand how to help you. Also, the solution you mention above scares me a bit because it seems that editing within a dropdown would be a very nonstandard (hence,possibly confusing, hard to learn, generally not positive for theinterface as a whole) use of it. What do you think about this? Do Imisunderstand what you suggest? -AnnaContact lists aren't really the solution, at least not in my case. Ina corporate environment, there are already company mail aliases formost project-related groups of people you need to send emails to, socontact lists are generally redundant. So the problem I'm talkingabout only really hits with one-off emails you send/receive addressedto a particular bunch of people.The most common scenario is that I receive an email that was addressedto 20 people, say, and I only want to respond to maybe five or six ofthem because it won't be relevant to the others. Right now that's achore because:- I can only see two or three names in the To: field at a time.- I can't quickly select a recipient's entire name/address fordeletion in the To/Cc/Bcc fields just by double-clicking on it like Ican in outlook or netscape... instead double-clicking pops up aContact Editor for that person, which is the last thing I need,especially as they're probably already in my addressbook anyway!Another common scenario is that, having composed such a mail, I wantto do a quick visual check to see that I haven't missed anyone off thelist, preferably without having to open another window just to do so:) This is where the dropdown could be handy, even if it wasn'teditable (and I share your concerns there, although there are probablyways to make it work without being too unconventional).In theory, the Select Names dialog could do everything I need, yes,albeit with the inconvenience of having to open another window. Thereare a couple of problems with it that make it pretty annoying to useat the moment, though:- there's no easy/obvious way to remove names from the To/Cc/Bcclists. After a while I discovered that you can select them and pressDelete, but again, you can't even just click or double-click aperson's name to select it for removal, it just pops up the ContactEditor. (Why aren't the To/Cc/Bcc lists just regular list controlswith one item for each person you add, rather than being free textentry fields?)- the keyboard navigation in this dialog is fairly poor, you have tophysically click on the "To", "Cc" or "Bcc" buttons to add recipients,or Tab your way to the relevant button, then back again to add morerecipients etc.... At the very least, mnemonics are needed here onthe To/Cc/Bcc buttons. - the lists on the right are unusably small by default, in bothdirections, but especially horizontally. Additionally, when youresize the dialog horizontally, it really only needs to resize thoseright-hand lists as the left-hand list is already plenty wide enough,but instead it resizes all of them. Thus you have to make the dialogway wider than necessary just to make the left and right listsapproximately the same width... which they logically should be tostart with, since they potentially contain exactly the sameinformation.I think the underlying issue is that from the moment I open my Composewindow, I'm in "typing an email" mode and don't really want to have touse my mouse or open any other windows until I hit that "Send" button:)hi calum, i'll update the report, feel free to add comments. :-)[can only see two or three names]:still right. any suggestions? :-)[can't quickly select by double-clicking]as described inanddouble-clicking now (2.1.4) highlights the word, choosing rightclick menu's first item brings up the contact editor. it *does* make sense, see named bugs for reasons.[keyboard navigation fairly poor]mnemonics were added and exist in 2.1.4.[the lists on the right are unusably small by default]old bug, already fixed.Apologies for any spam... cc'ing usability-maint on all Evolution usabilitybugs. Filter on EVO-USABILITY-SPAM to ignore.***has been marked as a duplicate of this bug. ***I guess we should show the emails in the TO/CC/? entries in a way how theautocomplete stuffs are displayed with scroll bar. Support to edit on r-click,multi select to delete etc and when collapsed, just display them serially withseperated by commas or so.Having a single text field is a problem, if we want to show names and emailsinstead of just names, on autocompletion.SeeBumping version to a stable release.***has been marked as a duplicate of this bug. ***(Quoting a recent mail to evo-hackers, for posterity:)Fixing some of the brokenness of the To/Cc/Bcc headers in the composerwould be wonderful.Try this in the current composer: 1. Paste or enter this address into the To: header, exactly as follows: Woodhouse, David <> 2. Click somewhere *outside* the To: header entry box. 3. "Realise" that the name is stupidly backwards and contains a stupid comma that shouldn't be in an RFC5322 display-name. (Yay Exchange) 4. Go back to the To: header entry, and put quotes around the display-name so it looks like "Woodhouse, David" <> 5. Click somewhere outside the entry, again. 6. Watch the address magically transform itself to nonsense: "Woodhouse, David" <>, David <>In the past when our message *display* also gratuitously screwed withdisplay-names to *remove* the quotes which were necessary to make themcorrect, this used to happen quite a lot when addresses were cut andpasted.We should also be able to send a mail with the following headers: To: Some people I want to invite to my party : ; Bcc:Currently I get an SMTP error when I try that, because it treats thegroup in the To: header as a single address, and submits it in RCPT TO:<Some people... party : ;>	10.0	id=94691	30	True	True	glynnfoster	1
id=94691	REOPENED	nautilus	Views: List View	3.1.x	Other Linux	Normal enhancement	Nautilus Maintainers	2002-10-02 14:56 UTC by	Pedro Lopes	2015-03-25 23:45 UTC (	13 users	Currently the size column uses different units depending on the size of thefile. This makes the column hard to read/follow vertically, especiallywhen scnanning the list for a particular value or trait.The unit used should always be the same (Kb would be a good choice). This is the behaviour of the Windows file manager, for example.	Createdadds new function to eel vfs extensionsSo, I was trying to think of a way to fix this. The solution that Icame up with was to add a new function to eel-vfs-extensions, thatbasically takes an extra variable, the format file size. I'm just alittle unsure how to present this type of thing in the UI. Comments?I just noticed a small problem: a file size of say 10 bytes willappear as 0.0 KB, giving the incorrect impression that the file is empty.Maybe the correct thing to do is to always round up, rather than tothe nearest value.Another nit: it should be KB not K.Glynn, could you update the patch to match the comment above? I thinkthat makes more sense than showing files between 0 and 1000 bytes as0.0 KBIt should actually be kB if division by 1000 is employed, and KiB ifdivision by 1024 is employed.The docs styleguide says to use "K" for 2^10 and "k" for 10^3, so "KB"should be what we use until we hear otherwise... cc'ing Pat just tomake sure though :)***has been marked as a duplicate of this bug. ***I believe that this bug is a duplicate of 127175.Alexander: this bug is about what units to use when displaying filesizes in list view, not about how to write the unit names.In fact I thinkis a duplicate ofnot this one.This isn't really an enhancement, per se; note that the currentbehavior is 'hard to read', etc. Marking minor.is that still an issue ? the size column seems to have the number of elements now.Sebastien: I'm not sure what you mean by "number of elements".The behaviour I described in the bug summary has not changed (as of 2.8.2),so I'm reopening (and updating the version field)right, I was looking on a directories list which display the number of elementson the directories instead of the size of the folder. Still here with 2.9.2Still in 2.22, too. (Although incidentally, I noticed that OS X doesn't use the same unit for the whole column either-- it happily mixes KB, MB and GB....)Same units as in, "we should always just use bytes in the column", same units as in "we should display the size of directories and not the number of items within it", or same units as in classification of units (as in g_format_size_for_display(), which is what the attached patch to this bug essentially is)?Can we be a bit less vague here?Hi Walton,I think my original report was clear. If not, what was meant was "we should always just use bytes in the column" (althought the original suggestion was Kb not bytes).That would be rather non-useful in my Podcasts folder, where most of the files are tens of megabytes.That could be worked around by making the choice of unit folder-specific (rather than the current file-specific). But that would mean dropping a small README file in the Podcasts folder would either change the units used to display the size of every other file in the folder, or show a size of "0 MB" for the README file.***has been marked as a duplicate of this bug. ***MPT, I like your idea of making the unit folder-specific (e. g. by generating on the fly).I think we should to employ (2?) decimal places. If there is the case of very small files in the folder, we can still say: < 0.01 MB. This would make clear that it is not zero (does it?) and still say something about the size.On the other hand, use of the greater or less than operator may be confusing to users. But is it more confusing than mixed units? I for one don’t think so.***has been marked as a duplicate of this bug. ***Still in 3.1.4.Just as an example:For the ownCloud file manager, I used MB as standard unit. This (already old) screenshot shows it:Files above 1 GB are just displayed as > 1000 MB, files below 100 KB are just displayed as < .1 MB. In addition, the file size is represented by the text color. The detailed file size is available on hover.***has been marked as a duplicate of this bug. ***	23.0	id=231751	20	False	True	gerardo	1
id=110641	REOPENED	GIMP	General	git master	Other All	Normal enhancement	GIMP Bugs	2003-04-12 23:34 UTC by	Simon Budig	2006-12-20 09:59 UTC (	1 user	The PDB function gimp-drawable-offset and its GUI counterpart<Image>->Layer->Transforms->Offset ignores the current selection andoffsets all channels, regardless if they are active or inactive in thechannels dialog. This behaviour contradicts the behaviour of unsuspectingusers....I was pretty sure that this already got reported quite some time ago butwas unable to find the report...	OK, "Offset" ignores the selection and offsets the whole drawable.But what has the channels dialog or the active channel todo with that? I guess you are confusing something here...I don't understand what behaviour Simon is expecting. IMO,gimp-drawable-offset does exactly what it is supposed to do.I expect two things, but implementation-wise they are (at least from aplugin-programmers point of view) the same.1. nearly every plugin restricts its operation to the current selection. It is not clear, why offset behaves differently.2. nearly every plugin restricts its operation to the R/G/B channels that are "switched on" in the Channels dialog. A blur just blurs the Red/Green channels when the blue channel is deselected. It is not clear, why offset behaves differently.Implementation wise the offset-operation apparently does not useshadow tiles to render its effect on. Thus neither the active channelsnor the current selection are relevant.Especially the second point is sometimes annoying. On IRC there wassomebody who had images from a source with misaligned Red/Green/BlueChannels. It is impossible to fix this with the offset operation.Instead you have to decompose the image and recompose it again.Sorry, but this is what gimp-drawable-offset does. It's a way toaccess the internal function that adjusts the drawable offsets. We cannot change this function and we don't want to do so. If you think thatthis is confusing behaviour and should be documented, please attach apatch to the docs to this report.Sven - are you sure that you don't confuse gimp-drawable-offset withgimp-drawable-offsets or gimp-layer-set-offsets? gimp-drawable-offsetdoes *not* change the offsets of a layer. It changes the image data inthe drawable (which sometimes is comparable to moving the layer exceptwhen "wrap around" is enabled) and thus should adhere to the sameconventions as the other plugins. Reopening the bug.Oh well, you might be right. Please attach a patch then.Changes at the request of Dave Neary on the developer mailing list. I am changing many of the bugzilla reports that have not specified a targetmilestone to Future milestone. Hope that is acceptable.Changing milestone on a bunch of bugs to 2.0 - none of these could be considereda blocker for a pre-release, IMHO. Many of these have patches or someone workingon them, but they're not urgent.Dave.Actually, non of the functions in libgimp/gimpdrawable_pdb.chonor the current selection. If at all we would add a secondfunction gimp_edit_offset() or something which woulddo this.I vote for closing as NOTABUG or making it an enhancment for 2.2.Oh and btw, layer->transform->flip, rotate etc, ignore theselection and active channels as well and just transformthe whole drawable. I don't see the incinsistency youclaim to have found.I'd fully agree with you, when gimp_drawable_offset would behavesimiliar to the other transform tools, i.e. it simply would provide anUI to manipulate the Offsets of a layer (which actually might proveuseful for control freaks, but thats a different issue).However, gimp_drawable_offset feels a lot like a remainder fromgimp-0.54, where there were no layers and you need something like thisto adjust something. It probably should get moved into its own plugin,since nothing else in the GIMP depends on its functionality. I don'tsee a compelling reason to keep it in the core.After comparing it to its menu-neighbors I agree that this is nourgent issue and will make it an enhancement request.Actually something similiar holds true for the othernon-selection-respecting items in this menu. I don't really see asense in duplicating functionality that is available in the core withmore flexibility (via tools).Do I miss something? Why do we keep gimp_drawable_transform_rotate andgimp_drawable_transform_flip around?Now how do you mean that? Which duplicated functionality?***has been marked as a duplicate of this bug. ***I guess this one should be NEEDINFO due to.Actually I don't remember what I was referring to, so please feel free to ignore(to which mitch is referring to).The original complaint still holds. I don't see a compelling reason for this functionality to reside in the core. We of course need to keep it for PDB compatibility, but a plugin doing the same, respecting selection and active channels would be more helpful to a user.	16.0	id=110641	13	False	True	sven	1
id=495271	REOPENED	empathy	Accounts	unspecified	Other Linux	Normal enhancement		2007-11-09 12:58 UTC by	Bastien Nocera	2015-02-09 21:33 UTC (	4 users	empathy-0.14-4.fc8Using the telepathy-phoney backend (see gnome-phone-manager trunk), there's only a text entry. We should have a way to select the device, as in gnome-phone-manager itself. See:	You can easily do that by adding your own empathy-account-widget to libempathy-gtkSounds like an easy task for new contributors.phone-manager doesn't seem to provide an external way to list the available phones, where can we get that information to use it in empathy?phone-manager seems to use a gnomebt chooser widget to select a phone, so using this one would add a dependency on gnomebt for empathy, right?In the theoretical big picture, I guess bt addresses of phones are like accounts so maybe that's MC field?I'd recommend using something better than gnome-bluetooth's widgets. We're still working upstream on chooser widgets for bluez-gnome, which should remove the need for gnome-bluetooth altogether. bluez-gnome's widgets would only depend on GTK+ and D-Bus.So it would worth to make this bug depends on?(In reply to)Depending on itself?oups I meantis only for gnome-phone-manager. There's no opened bugs for bluez-gnome providing those widgets externally. Feel free to file a new one against bluez-gnome.Depends on resolution of, feature request for bluez-gnome to provide the needed widgetAFAIK telepathy-phoney isn't maintained any more. Closing this bug for now.I'd take patches if it doesn't work as expected...Yeah but is actually maintained? Or even used?Maintained, yes, as time allows. Used, I don't know given that it's not usable or configurable without help from empathy's UI bits.Removing the gnome-love keyword. It doesn't make sense to work on this widget while telepathy-phoney isn't usable with recent versions of Empathy ().	15.0	id=495271	16	False	True	gdesmott	1
id=121695	REOPENED	GnuCash	General	unspecified	Other All	Normal enhancement	Chris Lyttle	2003-09-07 18:52 UTC by		2010-08-16 07:04 UTC (	5 users	Using drag and drop to organize accounts would be very convienient in general.It would be even more useful if 104056 ( alternate account trees ) forreports is implemented.That way, reorganizing accounts for reports would be very easy.	Sorry, wrong bug number referenced above. 121696 is the correct number.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Potentially related to***has been marked as a duplicate of this bug. ***CreatedPatch to support drag and dropHere is a patch that implements drag and drop reparenting in the accounts page. The function works for me, and I can't think of anything more that needs to be done, but I'm new to the Gnucash codebase so a thorough review would be great.Comment onPatch to support drag and dropLooks good for trunk. One question though: How hard would it be to make this drag&drop to work only if Ctrl key is pressed as well?Comment onPatch to support drag and dropr18426, thanks a lot!I think some problems were introduced with this change. I created areport and tried to modify the set of accounts used for this report.The following showed up in /tmp/gnucash.trace:* 20:14:20 CRIT <Gtk> gtk_tree_model_sort_convert_iter_to_child_iter:assertion `GTK_IS_TREE_MODEL_SORT (tree_model_sort)'failed * 20:14:20 CRIT <Gtk> gtk_tree_model_sort_get_model: assertion`GTK_IS_TREE_MODEL_SORT (tree_model)'failed * 20:14:20 CRIT <Gtk> gtk_tree_model_filter_convert_iter_to_child_iter:assertion `GTK_IS_TREE_MODEL_FILTER (filter)'failed * 20:14:20 CRIT <gnc.gui> gnc_tree_view_account_filter_by_view_info:assertion `GNC_IS_ACCOUNT(acct)'failed * 20:14:20 CRIT <Gtk> gtk_tree_model_sort_convert_iter_to_child_iter:assertion `GTK_IS_TREE_MODEL_SORT (tree_model_sort)'failed * 20:14:20 CRIT <Gtk> gtk_tree_model_sort_get_model: assertion`GTK_IS_TREE_MODEL_SORT (tree_model)'failed * 20:14:20 CRIT <Gtk> gtk_tree_model_filter_convert_iter_to_child_iter:assertion `GTK_IS_TREE_MODEL_FILTER (filter)'failed * 20:14:20 CRIT <gnc.gui> gnc_tree_view_account_filter_by_view_info:assertion `GNC_IS_ACCOUNT(acct)'failed More info: I set a breakpoint down in the logging code, and it stoppedon:Breakpoint 3, log4glib_handler (log_domain=0x806c7c "GLib-GObject",log_level=G_LOG_LEVEL_WARNING, message=0xa878208 "invalid cast from `GncTreeModelAccountDrag' to`GtkTreeModelSort'", user_data=0x8052c30) atqoflog.c:112 which may provide some clue to the problem.Reverted again in r18494 because of the above and also other problems.	10.0	id=121695	17	False	False	bugzilla	1
id=755015	REOPENED	epiphany	Web Applications	unspecified	Other Linux	Normal enhancement	Epiphany Maintainers	2015-09-14 23:55 UTC by	Michael Tunnell	2016-12-21 14:57 UTC (	3 users	CreatedEpiphany's Application Mode when displayed inside of KDEPlease add the ability to turn off the GUI elements, like the Headerbar.The Headerbar in the Application Mode is rather pointless because it only offers options such as Back, Forward, and Refresh which all can be accomplished by just right clicking anywhere inside the window. It is redundant and takes up a lot of space that could be used for the web-app itself.This is not much of an issue in GNOME because of CSD being the norm but in every other DE it creates wasted space. I would just like to have an option to add "--chromeless" to the launch command in order to hide the Headerbar when I'm not using GNOME.Epiphany is probably one of the best options for Web-App Desktop Applications regardless of DE but, for me, the Headerbar in Application Mode is just unnecessary and I would prefer the option to turn it off.	I also just realized that when you fullscreen a video with Application Mode in Epiphany, in a non-GNOME system, the Headerbar is always displayed. The previous issue was more of a request but in this case it is a bug and distracts heavily from the video.(In reply to Michael Tunnell from)Please report this separately. This was fixed in non-app mode long ago, might be a regression.Actually, I would prefer an Autohiding Headerbar so that people who do want it sometimes can have it like for example if they move their mouse to the top part of the window to display it like a panel.Here is a video/gif of what I'm talking about -The easiest solution would just be "--chromeless" but an autohiding headerbar would be pretty cool.-------@Claudio I did some further testing in a different distro with KDE Plasma 5.4 and GNOME 3.16, my findings were that the version I first found the bug was an old version and the latest 3.16 version has it fixed including in Application Mode. (false alarm)I think your distro (Ubuntu?) has some downstream patch causing an extra title bar to appear; that's not an upstream problem. We use the header bar to REPLACE the title bar, not appear underneath it (which indeed is mostly a waste of space, with the redundant title; although it is not entirely: the context menu is not discoverable, and I think keeping back/forward/reload visible is important). Your GTK+ theme *should* make the header bar look similar to your window manager's theme so that this looks good, though I've yet to see anything except Adwaita this well, unfortunately....Anyway, I guess I will close this NOTGNOME because the double-titlebar situation in your screenshot is not possible with the upstream code. That's the point of header bars, after all: to put the controls in the title bar, so there is no wasted space....@Michael CatanzaroThis is because KWin is adding a Titlebar like it normally does to all windows. The issue is NOT dual-titlebars, the issue is I simply want to remove ALL Titlebars. KWin offers the "No Borders" option that removes KWin titlebars but the Headerbar is still there so I want an option to remove it so I can remove both.I'm aware of this but in every DE other than GNOME (maybe Pantheon as well) this is how it behaves. I just want the Client Side Decorations to let the Client (me) Decide. :)I am not suggesting removing this GUI by default, I don't think it even needs to be displayed anywhere other than in the "--help" or "manpage" for the app. I just want the ability to add "--chromeless" to the launch command so I can remove the UI in situations where I don't want it. This is not a suggestion to remove it entirely but a suggestion to allow the user to remove it if they desire to.I don't care if it blends with the Window Manager, I simply want it not there at all, for my usecase. (again not requesting default changes)Yes, this is NOTGNOME, I initially explained this bug is not relevant to using Epiphany in GNOME. This is absolutely possible with upstream code because we are not talking about Epiphany in GNOME but Epiphany in any other DEs. I am more than willing to provide more screenshots of different DEs in various distros, if necessary.Well to be fair, Headerbars don't actually save any space at all. I don't really care about the space difference between GNOME and other DEs but there is a difference and GNOME is larger.GNOME Headerbars are about 5 pixels larger than other DEs when you compare to "Titlebar + Main Menu bar", GNOME's solution looks MUCH better but it uses more space rather than saving any. I don't actually care about this difference, I'm just providing the info.Anyway, I simply want the ability to turn off all UI elements and in the case of Epiphany I am not able to but if "--chromeless" was an option I would be able to.So . . . Please?(In reply to Michael Tunnell from)GTK+ uses MWM hints to explicitly request that the window manager not show any titlebar. If it's showing a title bar anyway, as it is in your screenshot, then either the window manager is incompatible with GTK+, or you've patched Epiphany like Ubuntu has. I know Xfwm is incompatible, but I thought KWin respected these hints (well, at least the combinations of hints that GTK+ uses).At least, you've got API for them:TBH, I think you want this feature because:1) Your GTK+ theme draws crap header bars. That doesn't look anything at all like the title bar drawn by KWin. It should be well-integrated. (I might be wrong about this though: if you do have a patched Epiphany, then it would possibly look much better if the header bar was set as the title bar, instead of packed beneath it.)2) You have a patched version of Epiphany that is not telling KWin to hide its title bar, resulting in the code duplication. (It's possible KWin just ignores these requests, like I said, but I rather guess your Epiphany is patched.)3) You prefer to use the context menu rather than the buttons to do reload/back/forward.I think the right thing to do is to fix (1) and (2). Regarding (3), that I consider to be a valid use-case for --chromeless, but it's very rare that we add hidden modes for power users; it complicates the code and tends to break. If someone wants to implement this, I wouldn't be opposed, but I really don't think it's worth it.The proper comparison would be to titlebar plus toolbar. :)I didn't have an issue with the titlebar showing. I shouldn't have included the titlebar and decorations in the GIF I guess. Kwin allows for titlebars and window decorations to be displayed or removed with a simple switch so that is not the issue.My issue is that the Headerbar takes up a LOT of space and serves no purpose when used in some web-apps.Tweetdeck for example. Tweetdeck is a web-app that has no need to ever go Back, go Forward or to Reload. I also never need to see the URL section of the headerbar because I know I'm using Tweetdeck. In this example, the headerbar of Epiphany/Web serves no purpose.Ultimately, I want to remove the titlebar and the headerbar in order to maximize the overall real estate of the web-app.I suggested "--chromeless" because I think it would be easier to implement a command-line option initially but I'm not suggesting that it be a power-user option but rather an everyone option.I think it should be a part of a settings portion of the Application Manager for each webapp.Here is a mockup of what I was thinking . . .Application Manager:Web-App Settings:Disable Headerbar in Web-App Settings:The mockup looks fine to me. How do you plan to store this setting?Do you really think it's important to be able to choose on a per-app basis whether to display the header bar? If not, then just adding a global setting would be easier. We can always start out with a global setting and then choose to make it an app-specific setting later.I'd prefer to avoid using command line flags to control user preferences.(In reply to Michael Catanzaro from)Sorry, I got you mixed up with Jason from. Should have read that bug first I suppose. :PMaybe Jason would be interested in working on this as well, would you mind marking this as "newcomer" as well?I think it would ultimately be ideal to have it on a per app basis but a global control is great as an initial solution.I'd prefer avoiding command line flags for something this as well, I was just suggesting it as a initial usage but GUI option is certainly the better approach.(In reply to Michael Tunnell from)I'm not sure, this bug requires a bit more work than I'd normally flag for newcomers.	11.0	id=755015	7	False	True	csaavedra	1
id=744783	REOPENED	GStreamer	gst-devtools	git master	Other Linux	Normal enhancement	GStreamer Maintainers	2015-02-19 13:26 UTC by	Vincent Penquerc'h	2015-10-08 15:41 UTC (	3 users	Placeholder description so I get a bug number to add in the commit message.	Createdsupport for non flushing seeksReview of:Please add validate: in the commit messageI wonder if it would not make more sense to wait for a new segment corresponding to the seek in that case?Yes, it'd seem better, I'll change the patch to do that.Createdsupport for non flushing seeksFor info,is the patch to oggdemux that led to this.Review of:::: validate/gst/validate/gst-validate-scenario.c@@ +415,3 @@+static GstObject *+_find_any_object (GstIterator * iter)+{I think we should wait for the new old segment to be done on all sinks to be able to trigger the next action.Review of:::: validate/launcher/apps/gstvalidate.py@@ +719,3 @@ "fast_forward", "seek_forward",+ "seek_forward_non_flushing",Adding it this way will lead to many new tests added in the validate testsuite, did you run them all?From your wording, do you mean automatic ?I did not know these would be automatically enrolled in anything, I first added new tests scenarios, and grepped around when I realized they were not seen, and added them to the list where other scenarios were found.I tested with:./tools/gst-validate-1.0 souphttpsrc location=! oggdemux ! vorbisdec ! pulsesink volume=0.01 --set-scenario seek_forward_non_flushingCan you expand a bit on what's automatic and from where in the code ?(In reply to Vincent Penquerc'h from)Yes, it will automatically add more tests to the default testsuite:You should run gst-validate-launcher validate (--mute) to see how it works with other formats.Createdsupport for non flushing seeksAttached only for the change to wait for a segment on all sinks. I have yet to look at the automated use of new scenarii.Createdsupport for non flushing seeksCreatedadd non lushing seek scenariosReview of:::: validate/gst/validate/gst-validate-scenario.c@@ +600,3 @@+ /* Flushing seeks will be deemed done when an ASYNC_DONE message gets+ received on the bus. We don't get one for non flushing seeks though,+ so we rely on a discontinuity on the buffers. */We do not rely on discontunuity anymore :)I wonder if we could not alway rely on segments actually, that might even cleaner as we check the seqnum which guarantees us the segment is the resultant of the seek.Createdsupport for non flushing seeksComment fixed to mention segments instead of disconts :)Review of:OKReview of:::: validate/data/seek_backward_non_flushing.scenario@@ +1,1 @@+description, seek=true, duration=30, need-clock-sync=trueActually please add min-media-duration=15 here.::: validate/data/seek_forward_non_flushing.scenario@@ +1,1 @@+description, seek=true, duration=20, need-clock-sync=truePlease add min-media-duration=30 here.Createdadd non flushing seek supportCreateduse segments for flushing seek tooReview of:This means we will consider we can seek again even though we're not ASYNC_DONE, as ASYNC_DONE is emitted on the first buffer, not sure it's really right?(In reply to Mathieu Duponchelle from)I have the impression you are right, we should wait for the segment with right seqnum + 1 buffer, and that even on segment seeks I think.That's a good point, I'll go change that.We could also wait for segment + ASYNC_DONE methinksCreatedexpect a buffer with discontinuity after a seekReview of:Looks good to me. Have you tried these patches with a full run of gst-validate-launcher ?I tested with:gst-validate-launcher validate -j1 --muteThe failures are unrelated.OK to push ?I think we are all fine yesI appear to not have permissions to push, so I'll have to leave that to you :)I just merged with latest master and it all still builds fine.Why don't you have permissions? You can push on Fdo no?I can push to core, -base, etc.Trying to push to gst-devtools gives me:fatal: remote error: access denied or repository not exported: /gstreamer/gst-devtoolsIf this repo is supposed to have the same permissions to core or -base, then it might be something local.Oh, nevermind, I see the problem. It was trying to push to anongit :D Pushed.Those patches were reverted:commitAuthor: Vincent Penquerc'h <>Date: Mon Mar 9 18:26:37 2015 +0000 Revert "validate: add non flushing seek support" This reverts commit. Regressions on the test server, apparently linked to this patchset.commitAuthor: Vincent Penquerc'h <>Date: Mon Mar 9 18:26:33 2015 +0000 Revert "validate: use segments to detect success of flushing seeks too" This reverts commit. Regressions on the test server, apparently linked to this patchset.commitAuthor: Vincent Penquerc'h <>Date: Mon Mar 9 18:26:06 2015 +0000 Revert "validate: expect a buffer with discontinuity after a seek" This reverts commit. Regressions on the test server, apparently linked to this patchset.Trying those patches again, most tests succeed. I see three tests failing that use those new non-flushing scenarios:First one:GST_GL_XINITTHREADS=1 GST_VALIDATE_OVERRIDE=:/home/v/gst-validate/gst-integration-testsuites/medias/defaults/online-streams-infos/dash/dash.exMPD_BIP_TC1.override DISPLAY=:0.0 GST_VALIDATE_SCENARIO=seek_backward_non_flushing gst-validate-1.0 playbin uri=audio-sink='fakesink sync=true' video-sink='fakesink sync=true' --set-media-info "/home/v/gst-validate/gst-integration-testsuites/medias/defaults/online-streams-infos/dash/dash.exMPD_BIP_TC1.stream_info"Failed 'Application returned 18 (issues: [We got an ERROR message on the bus])The error on the bus is a 404. The source for this seems to not be on my disk (I an --sync less than two hours ago):v@euryale:~/src/gst-integration-testsuites/medias$ ls -l defaults/exMPD_BIP_TC1/exMPD_BIP_TC1.mpdlrwxrwxrwx 1 v v 201 Aug 21 13:37 defaults/exMPD_BIP_TC1/exMPD_BIP_TC1.mpd -> ../../../.git/annex/objects/93/wW/SHA256E-s1489--32f5584b49364d27e4a8c75bb276412e37a09eb6e81413d146c32c92a089578c.mpd/SHA256E-s1489--32f5584b49364d27e4a8c75bb276412e37a09eb6e81413d146c32c92a089578c.mpdv@euryale:~/src/gst-integration-testsuites/medias$ readlink -f defaults/exMPD_BIP_TC1/exMPD_BIP_TC1.mpdSecond one:Same as first one, with the seek_forward_non_flushing.Third one:GST_GL_XINITTHREADS=1 DISPLAY=:0.0 GST_VALIDATE_SCENARIO=seek_backward_non_flushing gst-validate-1.0 playbin uri=file:///home/v/gst-validate/gst-integration-testsuites/medias/defaults/mpegts/tron_en_ge_aac_h264.ts audio-sink='fakesink sync=true' video-sink='fakesink sync=true' --set-media-info "/home/v/gst-validate/gst-integration-testsuites/medias/defaults/mpegts/tron_en_ge_aac_h264.ts.media_info"Three subsequent manual rerun worked.	33.0	id=744783	26	False	False	vincent.penquerch	1
id=139196	REOPENED	rhythmbox	User Interface	unspecified	Other Linux	Normal enhancement	RhythmBox Maintainers	2004-04-05 22:46 UTC by	Maynard Kuona	2006-07-25 12:06 UTC (	6 users	The search function as implemented in rhythmbox searches for exact phrases, suchthat a search for "Lazy Days" is different from a search for "Lazy Days". Ithink a better search method is to search for each word, with spaces andwhitespace ignored as immaterial. Then it wouldn't matter of someone searchedfor "Lazy Days" or "Days Lazy" or "Lazy Days". It should then search for allthe songs with the words "days" and "lazy" in it.	I agree - I would really like to have the search box contents treated as a listof space seperated search terms as opposed to one search term.As well as changing orders as above, I think the different terms should besearched for globally.So for example to locate the album "true" by artist "trinity roots" it would(depending on other items in your library) probably be enough to enterroots trueor maybe even roo tru.I found that this form of searching was the most valuable feature for me initunes. As the search updates, it allows you to interactively adjust what yourtyping to narrow in to what you want. I found this interactive search experiencereally a new feature in computer interfaces and I think its great.Im not sure if the search update in rhythmbox would be fast enough for this kindof behaviour, but it would be good to have anyway, for the reasons outlined above.Not sure if this should really be called 'fuzzy' searching though - since to methis implied Madman style search interpretation (matching spelling mistakes andproviding best match etc.) which is not what I would like at all...It would be also very great if I could find stuff like "Die Ärzte" by typing"die arzte" (just leaving out the umlaut on a foreign keyboard) or "die aerzte"(which is how German people would write it).I agree that this a good idea. I think the current behaviour is non-intuitive. Users are used to the concept that searching for:The Rolling StonesWill search for 3 terms.And if they want to search for a number of words in a row its:"The Rolling Stones"Will search for the 1 term.I find the current implementation limiting.e.g. Let's say I have Bob Dylan's Like a Rolling Stone, plus a number of RollingStone tracks. I go to find the Dylan track via the search-bar.Searching for:Rolling Stonewill find a number of tracks.Searching for:Rolling Stone Dylanwon't find any tracks.Someone started working on this a few days ago, with some guidance via IRC. Theywere using the Levenstein distance algorithm - which means that it can matcheven with extra letters inserted, letters deleted or swapped.Last time we talked they had it mostly working. It was fairly slow, but thereare a couple of obvious optimizations we can make, which will provideorder-of-magnitude improvements to speed.I'll provide an update next time I hear from them.CreatedpatchI haven't heard from them in about a week, so I'm attaching the most up to datecopy of the patch that I had - so it doesn't get lost.The patch does a number of things:* adds functions to rb-string-helpers, which computes the "distance" of twostrings using some "Party Pattern" code written by Benjamin Otte two years ago.(using the Levenstein distance algorithm)* stores the PartyPatterns in RBRefStrings, so they don't have to be generatedevery time a query is run* adds a new operator RHYTHMDB_QUERY_PROP_FUZZY_MATCH, which does fuzzymatching* adds a new property RHYTHMDB_PROP_SEARCH_STRING, which can only (currently)be used by the fuzzy operators, and causes it to match against genre, artist,album and title (for the search box). This lets you specify more than one ofthose at the same time.* changes the search box to use RHYTHMDB_QUERY_PROP_FUZZY_MATCH andRHYTHMDB_PROP_SEARCH_STRING.This implements fuzzy matching which ignores all punctuation and casedifferences, as well as matches words seperately. The search box also does thiswith genre/artist/album/title at once, so "pris end" will match "Prisioner ofSociety" by "The Living End". By fiddling around with the value returned fromparty_pattern_cost_replace, party_pattern_cost_delete andparty_pattern_cost_insert; as well as the threshold inevaluate_conjunctive_subquery it can be made to match even with missingcharacters or extra ones inserted. With the current (fairly arbitrary) valuesit will ignore one missing or extra character per search.Although doing fuzzy matching is slower than looking for a substring, thisdoesn't feel that much slower (I haven't done profiling yet, so I have nonumbers). This is probably because it does one match for all four properties(genre/album/artist/title) rather than doing a substring search four times.There is an additional obvious optimisation that could be done - by not havingto rebuilding the PartyPattern of the search term for every entry.Some things that need to be done:* fix the copyright/licence stuff in rb-string-helpers.* rename some things, and fix some code style issues.* check whether can match "è" with "e" and the like* implement the above optimisation, and then do some profiling to see whatspeed difference this patch causes.* probably fix some bugs, and make it more robustCreatedother patchThis is a variation on the earlier patch, which doesn't have any "fuzzymatching" but can match against multiple properties, and hence is simpler. Forexample I can entering "cou row liv" will find my tracks by "Counting Crows"from "Live at the Wiltern Theatre".A better version of the second patch has been committed to cvs.If someone wants to add real "fuzzy matching" that ignores spelling mistakes andthe like, it should be easy enough to add the necessary bits from the first patch.I'd prefer to have this bug open still, but just watch for the missing fuzzynessbits; maintainers, your thoughts?Yeah, it's probably worth keeping open.***has been marked as a duplicate of this bug. ***I've unmarked 338824 as a duplicate, and am re-titline this bug to be the other bit, since the two features are different and are likely to be done separately.	11.0	id=139196	17	False	False	walters	1
id=710204	REOPENED	glib	general	unspecified	Other Linux	Normal enhancement		2013-10-15 17:30 UTC by	Xavier Claessens	2015-12-22 15:08 UTC (	3 users	GLib now gained advanced matching function helpers (see):g_str_tokenize_and_fold()g_str_match_string()I think GtkListBox should make good use of them to help filtering the list when user search terms. We could add:void gtk_list_box_row_add_search_text(GtkListBoxRow *row, const gchar *text, const gchar *translit_locale);void gtk_list_box_set_filter_text(GtkListBox *list, const gchar *text, gboolean accept_alternates);The internal function gtk_list_box_apply_filter() could then do filtering based on the text, similar than what g_str_match_string() does but with pre-computed tokens.	I'd rather leave that up to the user of the listbox, tbhCreatedGtkListsBox: Add filter on text helperCreatedImprove search-bar example to demonstrate GtkListBox filtering(In reply to)IMO it is common and non trivial to get right enough that we want the toolkit to handle it for apps. Ryan agreed with me on IRC.Note that my attached patches are not ready yet, they are missing doc at least. But I would like a consensus before finishing the work.Hm, actually I've been thinking a bit more about this and I'm not sure about one thing: I hope that GtkListBox will get a model behind it at some point to create GtkListBoxRow widgets on the flight when scrolling to avoid performance problems when creating a huge list (lots of people have 5000+ contacts!). In that case I'm not sure how the filtering should work... Should we be filtering on the model before creating the rows, or should the view ask more rows until it gets visible rows?So maybe this bug is premature and should wait for solutions for big lists first.Review of:::: gtk/gtklistbox.c@@ +104,3 @@++ /* HashSet<strv> */+ GHashTable *tokens;a hashtable _per row_? this seems wrong... and when you use it, you just iterate...if you do indexing at all, it should be on the level of the entire list. for the rows, just store a gchar**. you can either do a gchar**-vs-gchar** test per-row or build an index for the entire list.Actually that comment is a lie, it's a GHashTable<string> not strv. It's a hashtable used as a set to make it easy to add more tokens. My use case for that is in empathy a row can be matched for multiple strings: email, fullname, etc... so each row has a contact and I can do:gtk_list_box_row_add_search_text (row, "");gtk_list_box_row_add_search_text (row, "Xavier Claessens");And the row will match when searching for "xclaesse" as well as "xavier".I can implement that with a GPtrArray<string> of course, but then adding tokens is more boring :pI think everybody wants filtering to work with models nowadays(In reply to Matthias Clasen from)Doesn't mean the bug is WONTFIX, just that it needs to be reassigned. It should be done on GListModel now indeed.	10.0	id=710204	14	False	True	mclasen	1
id=53097	REOPENED	Gnumeric	Main System	git master	Other Linux	Normal enhancement	Jody Goldberg	2001-04-11 15:07 UTC by	Chema Celorio	2004-12-22 21:47 UTC (	0 users	Bug 65.5 (Whishlist)========1. C3 = "The quick brown fox jumps over the lazy dog"2. Select C3 and open the format dialog3. Change the font to bold4. Hit apply5. Hit Ctrl+Z Undo does not work until the dialog is closed. This wouldbe a nice feature.	This has been implemented in CVSWhoops wrong bug, ignore comment	2.0	id=695088	17	False	True	mclasen	1
id=273134	REOPENED	evolution	Calendar	2.24.x (obsolete)	Other All	Normal enhancement		2005-03-01 01:35 UTC by	Carsten Guenther	2013-11-14 15:37 UTC (	2 users	Always reproducible on 2.1.5.Create a daily recurring appointment. Choose some day from the calendar andcreate an exception by dragging the end-time of the occurence to a latertime (or the start time, or move it). In the upcoming dialog choose "ThisInstance Only". Evolution removes the occurence and creates a multi-dayevent that lasts from the start time of the first occurence to the end timeto the changed occurence.Here is the ical that gets created:BEGIN:VCALENDARBEGIN:VEVENTUID:20050301T001957Z-15403-1001-1-10@nanoDTSTAMP:20050301T001957ZDTSTART;TZID=/softwarestudio.org/Olson_20011030_5/America/Tijuana: 20050228T120000DTEND;TZID=/softwarestudio.org/Olson_20011030_5/America/Tijuana: 20050228T123000TRANSP:OPAQUESEQUENCE:2SUMMARY:TestrecurrenceCLASS:PUBLICRRULE:FREQ=DAILY;INTERVAL=1CREATED:20050301T002004LAST-MODIFIED:20050301T002004EXDATE:20050302T200000END:VEVENTBEGIN:VEVENTUID:20050301T001957Z-15403-1001-1-10@nanoDTSTAMP:20050301T001957ZDTSTART;TZID=/softwarestudio.org/Olson_20011030_5/America/Tijuana: 20050228T120000DTEND;TZID=/softwarestudio.org/Olson_20011030_5/America/Tijuana: 20050302T160000TRANSP:OPAQUESEQUENCE:3SUMMARY:TestrecurrenceCLASS:PUBLICRRULE:FREQ=DAILY;INTERVAL=1CREATED:20050301T002004LAST-MODIFIED:20050301T002031RECURRENCE-ID:20050302T200000END:VEVENTEND:VCALENDARFurthermore, Evolution does not render the above data correctly: It showsthe recurring base appointment without the changed occurence (in this case03/02) correctly. In addition to that it shows the mentioned multi-dayevent from 03/02 to 03/04.	A few comments to the generated ical:1. There should be no EXDATE in the base event I believe. EXDATE isused only for deleted occurences, not for changed ones.2. Why is there a RRULE in the exception entry?3. DTSTART of the exception entry is wrong. It should be20050302T120000, not 20050228T120000.4. The RECURRENCE-ID in the exception entry is supposed to be equal toDTSTART of the original recurrence instance, see 3. The value here isthe start time as UTC but it is not marked as such (either by adding atimezone or the 'Z' to the end).This is still broken in 2.2.0. Starting with an empty calendarcreating a daily appointment on 03/09 with a different end-time on03/11 produces a series of multi-day events (see attached screenshot).CreatedScreenshot showing calendar after creating an exception to daily series.since it's still broken retargetting to 2.3.This should be more or less fixed in 2.3, please re-open if not.This is still not working correctly. Try this simple test:1. Create a daily recurring appointment2. Go to some day and change the end time of one occurrence.3. In the upcoming dialog click "This instance only"What happens is that the item disappears or gets moved to a completely differenttime. Similar things happen if I change other properties (tried location anddescription).Things seem to work when I choose to apply the changes to all occurrences.Reopening.Shouldn't we remove the dialog that lets you choose between updating alloccurrences or this instance only until this bug is finally fixed (also see) ?Modifying a paticular instance does not work properly. This must be a duplicate.carsten, do you still see this in evolution 2.4.2.1/2.6.x?carsten, any updates on this?It's working for me now. Should we close this?Tested with Evolution 2.22.3.1 and it is working fine. Closing this bug. Please reopen if it still appears with the latest versions of Evolution. Thanks.Reopening this bug as exceptions with all day events does not work still. Tested with the latest trunk.There is still a related and potentially severe conformance bug in Evolution 3.6.4 (Linux version):EXDATE date-time values are given without any timezone information (neither by TZID property parameter nor by 'Z' suffix for UTC time) as in the example above.This does not conform to RFC 5545, section 3.2.19 (Time Zone Identifier), paragraph 'Description': "This parameter MUST be specified on the [...] "EXDATE" [...] properties when [...] a DATE-TIME [...] value type is specified and when the value is neither a UTC or a "floating" time."As a result, EXDATEs created by Evolution are neither recognized (expanded) by the DAViCal server nor by Thunderbird/Lightning.	14.0	id=53097	6	False	False	almer+gnomebugzilla	1
id=110841	REOPENED	epiphany	Bookmarks	unspecified	Other Linux	Normal enhancement	Epiphany Maintainers	2003-04-15 11:00 UTC by	Andrew Burrow	2016-09-28 16:52 UTC (	6 users	The Keywords system for bookmarks is great, except youmissed the extension/intension dual.If you are going to attach multiple keywords to abookmark, then you should be able to select multiplekeywords in the search system. For example, if keywordsA, B, and C are selected, then the search returns justthose bookmarks containing at least A, B, and C.This does not clutter the interface at all. It justrequires that SHIFT and CTRL click work as they do in multi-selection lists. The affordance is alreadythere.With this feature the number of keywords requiredwould drop drastically. For example, "Gnome", "Audio",and "News" generates at least the categories "News in general","Audio News", "Gnome News", "Gnome Audio", and"Gnome Audio News".Thanks	Having multiple selection in the keywords list looks a bit crack tome. Also would be a pain to code. You can type keywords withautocompletion in the search entry and at some point we plan to allowto save searches as special topics (if you like that you could file abug about it).fwiw i did consider this when putting together my original proposal.Since multiple discontigous selections in a tree view requireskeyboard modifiers, i think the chance of most users finding thisfeature would be small, more experience users wouldn't probably have aproblem with it though, and as the reporter mentioned it is somewhatnatural. As far as the coding complexity, well thats up to Marco.Maybe I should have thought to this more ...Reopening. If we want this we need to consider the implementationproblems it could create though ...***has been marked as a duplicate of this bug. ***Sorry for the spam. Reassigning bugs with a target to our next milestone.Target 1.2 -> 1.4 due to feature freeze.Mass-moving Target 1.4 -> 1.6 because of feature and UI freeze. Sorry for thebugspam, search for "mass-move-1.4-1.6" to filter all of it.Mass-moving Target 1.4 -> 1.6 because of feature and UI freeze. Sorry for thebugspam, search for "mass-move-1.4-1.6" to filter all of it.Mass reassigning of Epiphany bugs toMass-moving bugs from Target Milestone: 1.6 to 1.8 because of feature, UI andstring freeze.Target: 1.8 -> 1.10 due to feature and UI freeze.-> 1.12 due to feature and UI freeze.***has been marked as a duplicate of this bug. ***Hmm, some light comments about how to implement?***has been marked as a duplicate of this bug. ***We don't currently have a search system.I don't understand - don't we match on bookmark title or topic in the address bar any more?Um, yeah, I didn't look too closely at this, sorry. :)	18.0	id=757171	67	False	True	a9016009	1
id=233429	REOPENED	evolution	Mailer	3.4.x (obsolete)	Other All	Normal enhancement		2002-11-07 13:22 UTC by	Jens Hardings	2012-06-16 12:39 UTC (	4 users	One of the reasons I keep switching to other MUAs is to perform a verybasic function: execute a program or script that takes an email message(maybe a whole folder?) on its standard input. Mostly, I use this tocorrect my spam-words databases and have a few other specific scripts thatperform some actions based on a mail message (like extracting homeworkssent by mail into a special folder and un(zipping/tarring/etc) theirattachments).	we plan on implementing our own bayesian-type spam filter, would thisbe good enough? (not sure if we'll use bogomail as the backend or what).ie, if we did this, would you still need/want this feature? and why?I would still use it for two reasons:1. I want my mail to be accessible independent of the MUA I'm using(be it webmail, evolution or another), so I would keep on filteringusing procmail.2. I use some home-made scripts that need mail inputs and perform someoperations on them.Isn't this done now?Not yet. If you see above, it's marked as future, meaning we stilldon't have defined a version in which this is going to happen.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I don't understand this bug. I have been using a filter to pipe emailsto an external application since version 1.2-ish. Isn't thatfunctionally what you are trying to do?no, he wants to run an arbitrary command against a messageeasy eplugin material***has been marked as a duplicate of this bug. ***Same as***has been marked as a duplicate of this bug. ***	11.0	id=382688	36	False	False	s.celles	1
id=523087	REOPENED	empathy	Contact List	unspecified	Other Linux	Normal enhancement		2008-03-18 01:41 UTC by	daniel g. siegel	2015-11-25 07:39 UTC (	19 users	sometimes, you want to have your most active group, e.g. co-workers on the top, as you need them probably all the time. but for now, empathy sorts them alphabetically, which would list "all my friends" before co-worker.	I agree, that would be an useful improvement.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Any progress on this? It's rather old.Also reported at:I also would like the group sorting to be per-installation (I suppose that may be the only viable solution, but wanted to say this anyway).I use the same accounts at work and at home, but at work I have my work group sorted at the top for easy access, but at home, at the bottom (rarely used). (I still use pidgin, so no need to ask how I accomplished that in Empathy, this is one of the things I feel I need, because I have so many people on my lists, effective and sorted grouping is kind of a must).This is a two-year-old request - any progress?It is a very important feature for me too, and my last reason to keep using Pidgin instead of Empathy ...(In reply to)Ditto. But it still says "Status:NEW" down below here, after 2 years?"NEW" means the bug has been confirmed. That doesn't reflect the age of the bug.Tick tock, the time keeps ticking. Is there absolutely no progress on this?I think we can safely mark this as duplicate of #611972, which has been fixed recently. I think we simply failed to mark it as duplicate before, or to be more precise: mark the other bug as duplicate of this one.I'm marking this as dup of the other because the other one contains a lot of discussion, patches, reviews and the actual fix.If you think the bug is not fixed yet, feel free to reopen the bug.*** This bug has been marked as a duplicate of***I disagree.#611972 is about single contacts, this bug is about groups.Also, this bug is about custom sorting, which clearly cannot be solved by something as favorite contacts.That said, i cannot see how this bug can be a duplicate of #611972.Hmm I misunderstood the "group of coworkers" then...Favorite Contacts could still be a good starting point, extending them to allow favorite groups as well.Reopening.***has been marked as a duplicate of this bug. ***Allan: how do you feel about this? Is that something we should support when redesigning the contact list?	16.0	id=233429	16	False	True	gerardo	1
id=382688	REOPENED	GIMP	Plugins	2.2.x	Other All	Normal enhancement	GIMP Bugs	2006-12-05 18:22 UTC by	Sebastien CELLES	2017-02-14 13:42 UTC (	11 users	Hello,first thanks for GIMP which is a great software.I often use the TWAIN interface for my scanner.to send paper documents for many peopleUnfortunately most people don't know GIMP.And I consider that I can't urge them to use iteven if it's a free software (both as speech and as beer)The easiest way for this people to see my document isto export them as a PDF file(because Adobe Reader is very used and the PDF file formatis well documented so other reader software exists)Now, I save my file as file.xcfOpen a console and strike$ convert file.xcf file.pdf(convert is part of the ImageMagick package)As you can see that's not very difficult but it's quite long to do itSo, could you add such a feature into the next GIMP release (thanks a lot !)I think you should use the "convert" line command for this.Regards	I see that you change What |Removed |Added---------------------------------------------------------------------------- Status|UNCONFIRMED |NEW Component|General |Plugins Ever Confirmed|0 |1Making a plugin (or a script-fu) for this could be very usefullUnfortunately I don't know Scheme/Lisp at allMoreover even if a script-fu is made for this, it should be made available as a export filter in the save-as menu (and not as part of the script-fu menu)RegardsThe most common method to create PDF nowadays is to use a PDF printer. Do we really need a PDF export plug-in?I think it would be useful to have one, yes. Even if exporting to PDF is already easily available by printing to a PDF printer. A lot of users expect to be able to save as PDF. And in the long run we could improve the PDF export to include text layers as PDF text objects.Yes, that's a good idea.The first PDF export filter could be just a little hack...after... it will be possible to improve it.About PDF printers...I 'm running GIMP on Mac OS X, on Windows and of course on Linux.You must admit that the print function it not fully implemented on the 3 OS.Moreover the way of making a PDF printer is totaly different... so having a native PDF export will simplify this.RegardsThis seems to be a reasonably licensed library which we can use.Or do we use GtkPrintOperation and print to PDF, while showing an "Export to PDF" UI? gtk_print_operation_set_export_filename () seems to be geared towards this exact use-case.Providing a better PDF export feature could also allow people to save multi-page PDFs, which might be useful if people want to re-save an imported multi-page PDF for some strange reason.The discussion about this in the mailing list was intterupted by various arguments about CMYK support and several other features.So, I'm continuing this discussion here.I already have a working version of a PDF export plugin with RGB support and text layer support (however it still has no GUI).Adding support for multiple pages will be done as soon as I (or someone which is better than me in GTK programming) will create a GUI. Multiple pages will be implemented by selecting several images.The output itself is done by Cairo (which is a part of the official GIMP distribution) using it's PDF backend. For that reason, the output is RGB (and I see no reason to find anyway to get CMYK support before gimp has CMYK support - so at least for the near future this should be OK)Should I attach the source of this version here to the bug report?I do want to see it as a part of GIMP 2.8, even if it will only have basic features right now.CreatedA simple version of a pdf export pluginHere is my self-written pdf export plugin. It uses Cairo for the pdf output and PangoCairo for rendering the text to the pdf documents.This plugin works! All it's dependencies already come with GIMP, so no additional resources are needed.Right now, it simply exports the images in the default resolution (72 pixels per inch) without any special optimizations. Things that can be added:- Better support for indexed images (GRAY, GRAYA, INDEXED, INDEXEDA)- Choosing a resolution- Multiple pages (by selecting multiple image)- Support for layer masks- Replacing single-coloured layers (bitmaps) with colored rectangles (vectors) to optimize the fileThanks a lot :)However the code doesn't use GIMP's coding style. Please look at any filein app/ to see how it's supposed to be indented and functions headersshould be formatted.Also, there is no need to implement "choosing a resolution" becauseimages already have a resolution, just use gimp_image_get_resolution().CreatedA fixed version of the pdf export pluginHere is my second version of the plugin. It's now useable (as far as I know), and I did my best to fix every potential bug I can think of:* Added handling for image resolutions, and fixed the behaviour of getting font sizes (previously, getting the size of the font didn't check the unit).* Added optimization (solid rectangles instead of bitmaps wherever possible, layers with 0 opacity are not included) as a macro flag. Now, all we need is a GUI to replace this ugly macro.* Added checking for layer visibility. Hidden layers are not included.* Added handling for layer masks. As a part of this, drawables with one channel are now saved in CAIRO_FORMAT_A8 instead of CAIRO_FORMAT_RGB24.* Indexed layers are now handled correctly, without need to convert toRGB images.* Switched to GNU coding stlye.This uses api which is currently in the SVN (GIMP 2.8 api).The remaining part is to add a User Interface that allows to:1. Toggle optimization on and off2. Allow to select multiple images to create multiple paged PDF's3. (Optional) Choose whether to apply layer masks before exporting to PDF, or whther to export with the masks (This is the default right now , however the files will be larger).Comment onA fixed version of the pdf export pluginI forgot to mention this is a patch (although it's not a diff file, it's still a code fix) so the bugzilla didn't mark it as having a possible patch...Please provide this as a git commit that also changes the build system to include this plug-in.We should definitely try to get this into 2.8.Hello,First of all, I'm glad to see that you wish to see it inside the 2.8.I have a more recent version of this plugin on my computer, and this one already has a working User Interface. It has 2 different procedures - one for saving a single image as a pdf (as a normal file saving plugin), and another one which opens a user interface with more options, to create a multiple paged PDF (I seperated them, since I believe the second one shouldn't be a normal file-save plugin).The problems are that:1. I'm having trouble with exporting the multiple paged plugin's API for GIMP. For some reason, I get an array of images but my user interface doesn't load it very well... Don't understand me wrong, the multiple page option still works, but it doesn't care which parameters it is given - it always pops it's user interface with the default options, no matter what parameters were passed for file-pdf-save-multi-page.2. I still haven't allowed the parameters of the plugin to be saved (Trivial to fix).3. Although the user can select in the user interface which optimizations does he want, It's still not implemented inside the code (again, Trivial to fix).Right now I'm a busy in university, which means that I only have free time on weekends. I don't know if I'll have the time to finish this plugin before mid-August.There are 2 options:1. I'll provide the single paged export only (I can have this done with complete working user interface and parameter saving this weekend).2. I'll also provide the multiplae page export, warning however that it's still buggy if you try to invoke it using file-pdf-save-multi and not directly from GIMP's user interface.If I'll know how much time do I have untill 2.8, I'll be able to estimate which options can be finished until then.We can live with minor issues and deal with those separately as long as the core functionality (exporting as a PDF) is there.It is impossible to say when GIMP 2.8 will be released, but if we ignore that, I would guess that GIMP 2.8 will be released around the end of 2009 or early 2010.In that case, I will definetly finish it before 2.8. Even though I'm busy, I should easily be able to finish it until in a month or two.I'll submit the current code of the plugin somewhere this weekend for people to able to see and comment, and I'll keep updating the code here, each time with it's current status.Some things that need fixing:please keep query() and run() at the beginning of the file, just as in all otherplugins.RGBAcolor -> please get rid of that and use GimpRGB from libgimpcolor// foo -> /* foo */if (!foo) -> if (! foo)if { -> if\n{i=0 -> i = 0foo;bar -> foo; barfoo(bar) -> foo (bar)But it looks very good apart from these minor stylistic issues.Progress update:I have finished the GUI of the plugin including the parameter saving (Finally!).Right now I have a GUI which does nothing, and a PDF plugin with no gui (Used the script-fu console to test it) that works.The only remaining part is to connect them, and this should happen very soonCreatedThe PDF pluginFinally - It's done.The code attached here is a version that still uses GIMP 2.6 API and it works against my GIMP 2.6.4 on windows XP. I'll port the API usage (especially the text API) to the one of GIMP 2.8 as soon as I get feedback on this plugin.There are 2 ways to acces the plugin:1. Simply save an image with the extension of .pdf (Single page PDF)2. File->Create->PDF->Multiple Paged PDF (multiple paged PDF)Known Issues:1. Grayscale layers are inverted (although layer masks which are not grayscale, are not inverted)2. Exporting some fonts doesn't work since gimp_text_layer_get_font Returns a font which is sometimes incompatiable with pango_font_description_from_string (gimp_text_layer_get_font sometimes returns suffixes such as "semi-expanded" to the font's name although the GIMP's font selection dialog shows the don'ts name normally - This should be checked again in GIMP 2.7)3. Indexed layers can't be optimized yet (Since gimp_histogram won't work on indexed layers)Waiting for Comments/Suggestions =)p.s.Apperantly there is a typo in the plugin which prevents it from compiling...in file-pdf-save line 60 "GimpRunMod" should be "GimpRunMode".I'll fix it when I upload the version using the 2.8 api.CreatedA new patch using the 2.8 apiChanges in this patch (as requested in the mailing list):Fixed a typo that prevented the plugin from compiling...A migration to the new GIMP 2.8 api, which includes:- Now using gimp_export_dialog_new- Using gimp_text_layer_get_hint_style (2.8) instead of the depreceated gimp_text_layer_get_hinting (2.6).The two procedures (the multipage and single page) weren't merged yet as discussed hereThe reason is that I still haven't got a working 2.7 build to test if this will be the right behaviour. Other people are welcome to test the plugin and see if merging the procedures will indeed be right. If no one else does this before me, I'll get to it next week.Hello,I'm giving a little progress update:1. I have a setup of weekly GIMP builds, so I can now continue2. I'll probably have time to work on it in this month (or the following month if any problem occures)3. Can I migrate the plugin to GtkBuilder, as we did for the file-png-save? I haven't understood from the mailing list if we do want to use GtkBuilder or not...Thanks for the update! Use GtkBuilder for now.***has been marked as a duplicate of this bug. ***Any update on this LightningIsMyName? What is left to do on the patch?Hello Martin,We talked on IRC and it was decided that for compatability with feature versions of GIMP, the plugin should move to use some sort of GEGL text operation of GIMP, so that when the upcoming changes to the text core will come, the plugin won't have to be re-written.To tell the truth, I don't have an idea where to begin... I tried to take a look herebut it doesn't seem to give us any advanced options for rendering more then just basic text.As far as I know, GIMP still uses PangoCairo to render it's text -So I have no idea which GEGL action/operation/etc should be used to render with GIMP's current layout. (the plugin worked, but now since text layers can have decoration styles like bold, and can have more than one font, the plugin won't work as the user would expect it).I can catch up on #gimp IRC at tuesday 14:00-21:00 (GMT+2).Comment onA new patch using the 2.8 apiSetting to non-patch since there is work left to do and bugzilla chokes on non unified diff files.When creating the new version of the patch, please use git format-patch and concatenate the patches into one file. Thanks!If we want this into GIMP 2.8, we can't wait for a GEGL text operation.LightningIsMyName: Will you go for a 2.8 version of the plug-in, or we move this to the 2.10 (3.0) milestone?The group api is making some of the delay - I need a way to access layers inside layer groups. Otherwise text which is inside a layer group will be lost, and this will ruin the point of the plugin (preserving everything, including text).Also, I'm waiting for some promised changes in the text core (someone said something about different line spacing and some other stuff).If I'm supposed to ignore this, I should be able to finalize the plugin soon (2.8 is scheduled. The current delay was because of the GimpItem api changes and since I still heard some rumours about more upcoming changes to the text core... Could be easily finished even before 2.8 to have a testing period (if the schedule is still to do the release at the end of 2010)The new pdf export plugin is now committed. It requires some work, but it mostly works.commitAuthor: Barak Itkin <>Date: Fri Aug 27 23:22:10 2010 +0300 plug-ins: add the new file-pdf-save plugin ()Thanks! It's pretty neat! But as you say, it can be improved:* Text layers inside groups are exported as bitmaps, not text, like toplevel text layers* The checkboxes should not be questions* Why do we need the "Apply layer masks before saving" option at all? If someone don't want the layer masks applied, he would have disabled them before exporting, wouldn't he?* Why do we need the "Don't save layers which are hidden or have 0% opacity" option at all?* Instead of "Convert bitmaps to vector where possible?" I suggest "Decrease file size by converting solid colored layers to filled polygons"* The padding between the last checkbox and the buttons is too small, compare with e.g. the PNG export plugin dialogBut again, thanks for getting us as far as you have :)Would you mind if we reopened this until the above have been fixed? I'm asking because it can be offensive to reopen a bug report someone has put a lot of effort in fixing.Oh I see now that you mentioned the text layer in group exporting problem in the comment before.Re-Opening untill the bugs will be fixed (this will be easier than opening a new bug)* About the "Apply layer masks before saving" option - we can either apply the masks to modify the layers alpha channel and then save, or save both the original alpha and the mask (and the mask will be applied at view time). This does need a better description* About the "Don't save layers which are hidden or have 0% opacity" option - for example, layers which have their opacity set to 0% may still contain data. This may be needed as some intermidiate step (so that people who read the pdf as is won't see some data, but it will be possible to retrieve it later by editing). I think that this can also be useful for truly hidden watermarks to keep such layers. The option to discard these layers is given to the user as a part of the optimization process.* UI still needs some love =) The current UI is only so that people will be actually able to test the plugin, it probably should be changed so thanks for pointing this out.I'm also attaching the list of other known issues that should still be fixed:* Fix some coding style issues (trivial)* Need to add support for i18n (trivial)* Grayscale layers are inverted (although layer masks which are not grayscale, are not inverted)* Exporting some fonts did't work since gimp_text_layer_get_font returned a font which is sometimes incompatiable with pango_font_description_from_string (gimp_text_layer_get_font sometimes returns suffixes such as "semi-expanded" to the font's name although the GIMP's font selection dialog shows the don'ts name normally). This should be checked again in 2.7 as this originally happened only sometimes in 2.6* Indexed layers can't be optimized yet (Since gimp_histogram won't work on indexed layers)* Rendering the pango layout requires multiplying the size in PANGO_SCALE. This means we need to do some hacking on the markup returned from GIMP or to find some other fix.* When accessing the contents of layer groups is supported, we should do use it (since this plugin should preserve layers and most importantly text layers).Also, there are 2 things which we should warn the user about:* Cairo does not support bitmap masks for text.* Currently layer modes are ignored. We do support layers, including transparency and opacity, but layer modes are not supported. So warn the user if any mode other than Normal is used.Also - the plugin supports exporting multiple paged PDFs. Although this does not seem match the product vision, I still think this feature should be kept (It's currently under "<Image>/File/Create/PDF/Create multiple paged PDF..." which is clearly a bad place). I would really like to find a suitable place for it in the UI, but if needed I'll remove it from the UI (I'll still keep the procedure though).Note to the future: when vector layers get integrated into GIMP (somewhere in the future) this plugin should be updated.The basic functionality is in, we don't need to spend more time on this for 2.8Createdexport layers as pagesI'd like to push this plugin in a somewhat different direction. What I am sorely missing is the ability to export layers from one image as a multipage PDF.I have experimented with the plugin to that effect (and in the process dumped the existing but unused multipage capabilities and the other options as well because they kept getting in the way) and the result works nicely for what I need, and also preserves text layers in layer groups, at the cost of ignoring potential layer group attributes.Since I heavily modified the existing plugin I'm not sure how useful the patch is as-is but I wanted to throw it out there for some feedback at least.Createdslightly updated patch that optimizes the groups-without-text path a bitAny comments on this?I think the only one who can properly comment here is LightningIsMyName.Createdminimally invasive git-formatted patchThis is largely the same as the previous patch except it doesn't rip out any existing functionality and tries to touch as little as possible.Thanks, that looks much better :)Hi,I have not tested the patch, but the description of the commit looks appealing, since just today I had the case where I needed to import a pdf document, draw on it, and re-export as multi-paged pdf. Well the import worked fine, but I was not able to export, so had to export individual pages and use `convert`. This patch would have save some time.Now the second improvement that is really missing is quality control. Are we currently directly drawing in the pdf pages, without any loss? (no idea if the pdf format allows this, but a fast look at the code, it looks something like this)Because that makes very heavy pdf.In my today use case for instance, I had to produce a pdf of maximum 700ko, for upload on a website (format and max size were imposed by this website). Well when I saw that the pdf for a single of my pages produced by GIMP was more than 3Mo, that would have been impossible, even with the multi-page export. My only control over file size was resolution, but getting a resolution small enough was getting me a pdf totally unreadable.On the other hand, when exporting each page as jpg, and subsequently making a multi-page pdf with `convert` (which I guess simply embeds the jpg images into pdf pages), I got a very small file with a pretty fair and readable quality.Would be awesome if GIMP was able to do this all by a simple export, preventing me the multi-step procedure. :-)An option for exporting multi-page pdf (each layer a page) is definitely missing.It should be obvious, just like when you export a gif and you have the option to save each layer as a frame.For information, even though it is still cool if we can improve PDF support on GIMP, I now have a different point of view on the topic as I did a year ago.Basically if you want to make very cool PDF with advanced features and such, don't use GIMP. There are software much more adapted and made for this. In particular, my advice is: use Scribus. It is very good, has very advanced features for making PDF, and they even just released a new dev version.So such bug report can stay open, but I consider this low priority. This said, if we have a quality working patch for this, that's cool and should be included in the tree.LMAO "advanced features and stuff"? Well that's still a lot more than what you get in GIMP. But suit yourself.What I meant was that, given that the option to export a PDF exists, having each layer exported as a page is not some "advanced feature", it's among the most basic options that one would expect from a program that offers the ability to export a pdf in the first place, just like when you export a GIF you have the option to export each layer to a frame.This is currently on the 2.10 milestone, so we have to decide whether to land it or move it to a future one.The patch does not apply on master anymore and I don't have enough interest in this specific feature to afford the time to fix it.I'm sorry all for the long time without proper review. Could anyone who is interested in this patch try and fix it?If at least the patch applies cleanly and work, I will at least make the time to review it and push the commit if it looks good (the cleaner and simpler code the better!).Thanks.***has been marked as a duplicate of this bug. ***Adding newcomers keyword.Comment onminimally invasive git-formatted patchPer.	50.0	id=110841	33	False	False	mpgritti	1
id=641079	REOPENED	anjuta	plugins: git	git master	Other Linux	Normal enhancement	James Liggett	2011-01-31 21:23 UTC by	Massimo Cora'	2012-01-23 04:23 UTC (	1 user	an improvement on git GUI - branches:if I select more branches (can be for a mistake) and then press the "switch to the selected branch" I cannot know before which branch I would switch to.IMHO a better thing would be a warn message to select just one branch a time.Btw: what about a right-click contex menu with a 'switch to this branch' submenu?	Fixed in master:That isn't the right fix. The checkboxes in the branch view are only for the benefit of the delete command. Merge and switch don't even bother with them. Merge doesn't depend on selection from the branch pane at all, because it uses a drag entry. And switch switches to the branch that is highlighted.And how is the user supposed to know all these different selection schemes? I didn't notice it but the checkboxes should be used for all selections.Merge might be wrong though but it's pretty easy to fix.It would be better to hide the checkboxes until the user clicks the Delete Branches button so there's less confusion about how they're supposed to be used. Instead of what we have now the process would go like this:1. The user clicks the Delete Branches button2. The checkbox column is made visible3. The user selects the branches to delete4. The user either clicks OK to delete the selected branches or Cancel to cancel the operation. Once the Delete Branches pane is.dismissed, the checkbox column is made invisible.That would make more sense to me.Btw, you also reverted the commit showing a combo box instead of the tree view for remotes which I liked a lot better. It probably wasn't perfectly implemented though.I've implemented my proposed solution in git. The checkboxes aren't visible until after the user clicks the Delete Branches button on the command bar. Hopefully this should eliminate the confusion.There is a bug here:* Click on "Delete branches" -> checkboxes appear* Click again -> checkboxes disappear* Click a third time -> anjuta crashesI figured out the crasher: The problem was that anjuta_dock_replace_command_pane does things in the wrong order. It was adding the new pane, and then removing the old one. Reversing these events prevents the crash. The root cause was that the hide/unhide action is controlled by map and unmap events. When anjuta_dock_replace_command_pane gets called after the same command pane is already in the dock, the map signal is fired on the new pane, and then the unmap signal is fired on the old one, making the checkboxes disappear when they shouldn't have. The crash, while not exactly related to the disappearing checkboxes, seemed to be a problem getting the name of the pane from the pane's child widget. In some cases it looked like that information wasn't valid anymore when it should have been, so the hash table remove code would crash on a NULL pointer.But, there's still one problem stopping me from committing the fix: Now, instead of crashing, the delete branches command pane will show up in the center of the dock and not at the bottom. I'm still looking into that one.	8.0	id=273134	27	False	True	rodrigo	1
id=583890	REOPENED	GStreamer	gst-plugins-good	git master	Other Linux	Normal enhancement	GStreamer Maintainers	2009-05-26 13:35 UTC by	Stefan Sauer (gstreamer, gtkdoc dev)	2016-01-20 22:03 UTC (	10 users	v4l2src uses own mmapped buffer pool, but should ideall request buffers from xvideo for zerocopy. initial patch follows.	Createdimplement pad_alloc_buffer usageFor testing, please run:GST_DEBUG="v4l2*:3" gst-launch-0.10 2>&1 v4l2src always-copy=false ! "video/x-raw-yuv,width=640,height=480" ! xvimagesinkif you get this, then the driver does not support userspace pointers when streaming :/v4l2src_calls.c:1437:gst_v4l2src_capture_init:<v4l2src0> allocate buffers via mmapv4l2src_calls.c:1459:gst_v4l2src_capture_init:<v4l2src0> capturing buffers via streamingIf you see this, it worksv4l2src_calls.c:1450:gst_v4l2src_capture_init:<v4l2src0> allocate buffers via pad_allocv4l2src_calls.c:1460:gst_v4l2src_capture_init:<v4l2src0> capturing buffers via streamingAnother test is to use GST_DEBUG="xv*:5" and grep for "slow". It should not appear anymore when userspace pointer are in use.With this patch, I'm still getting mmap and "slow bufferpool" copies:0:00:00.456976926 11980 0x8650078 INFO v4l2src v4l2src_calls.c:1437:gst_v4l2src_capture_init:<v4l2src0> allocate buffers via mmap0:00:00.457176186 11980 0x8650078 INFO v4l2src v4l2src_calls.c:1459:gst_v4l2src_capture_init:<v4l2src0> capturing buffers via streamingI'm testing with a USB connected built-in iSight.Forgot to tell about one detail - in order to use pad_alloc the patch probes if the diver supports userspace buffers before it uses mmaped ones. Not all cameras support user-space buffers. So my question above was more about who has a camera that supports it.Jan, thanks for confirming that my patch did not broke usual operation.One detail that needs thought is, that if userspace pointers work, one still needs to set always-copy=false. I wonder how many of todays drivers need that flag to be true by default.Even if the buffer is not used, the source should still probably do the pad_alloc if we want upstream renegotiation to work...Createdimplement pad_alloc_buffer usageThis patch* calls REQBUFS once more - there are drivers that want a num-of-buffers instead of 0 (according to the specs)* v4l2 associates buffer addresses with buffer index when a buffer is used first. thus we can't requeue different buffers later on.Go and run 'git submodule update' right now :) That'll get rid of 'common' from your diff, and remove any chance that you'll accidentally make a commit that reverts common to an old version.This patch works OK for me - no regressions afaics. I still don't get downstream buffer allocations on this iSight though.I get this from the driver:0:00:00.393741915 24116 0x8e92078 DEBUG v4l2src v4l2src_calls.c:1473:gst_v4l2src_capture_init:<v4l2src0> VIDIOC_REQBUFS(V4L2_MEMORY_USERPTR) failed 22:Invalid argument0:00:00.393757280 24116 0x8e92078 DEBUG v4l2src v4l2src_calls.c:1478:gst_v4l2src_capture_init:<v4l2src0> VIDIOC_REQBUFS(V4L2_MEMORY_USERPTR) for 3 buffers failed 22:Invalid argumentIt doesn't seem to like any queue-size I feed it, 2, 3, 4, 8, so I guess the driver just doesn't support V4L2_MEMORY_USERPTR. It's uvcvideo, which is possibly the most common web camera driver already, or soon will be.Createdimplement pad_alloc_buffer usageThis time without common changes. Need to remmeber that git diff ignores the directory I am in :/Olivier, you mean if should check the CAPS from pad_alloc'ed and switch to closest video resolution or new fps?imho, v4l2 is not good at switching modes on the fly.Jan, I will see if I can reach some v4l2 devs and check about which drivers actualy implement this feature (except the nokia ones :).Stefan, yes thats exactly what I'm thinking of.. Since I'm thinking of implementing switching the resolution/framerate farsight sends on the fly depending on network conditions. So pushing that change as far up the pipeline as possible seems the most sensible thing to me.urgs, zc0301 (Logitech, Inc. QuickCam for Notebooks) does not support userio as well :/. (it works fine with always-copy=false).also uvcvideo (Logitech, Inc. QuickCam Communicate Deluxe) does not support it. I grepped the kernel sources underand gspc driver seems to support it.Stefan, I tried both with 0c45:62c0 Microdia Sonix USB 2.0 Camera (uvcvideo) and 046d:092f Logitech, Inc. QuickCam Express Plus (gspca, in tree driver, aka gspca v2).Unfortunately it seems that neither of them supports userspace buffers, I always get: "allocate buffers via mmap".Started a thread on linux-media kernel mlist:What's the status of this bug? Can the patch be committed?It currently only brings benefits for the OMAP3 v4l2 driver which is open source but not yet part of the official linux kernel. I know that there is some work beeing done to add support for the in the UVC driver. If this gets into the linux kernel tree, its easier to verify. Maybe we should wait for that. Most probably I need to update the patch now to work with the recent v4l2sink changes too.I'm trying to port this feature to 0.10.16. The patch fails since commitintroduced the bufferpool in a separate file. However, while fixing it, I noticed the following.In the mmap way, v4l2_buffers are requeued in the gst_v4l2_buffer_finalize function. However, in the pad_alloc way, the buffers are not GstV4l2Buffers, so the finalize function isn't called. It seems to me that the buffers are never requeued. Am I right?Argh, I moved too soon: didn't notice the gst_v4l2_buffer_pool_update function because it wasn't merged in yet...I also tried to port my patch forward but it failed. I think some small parts could be split out and pushed easily. I think my mail problem was the buffer recovery and also make it work so that it does not affect v4l2sink.I have something that works now, except that it doesn't :-PI'm using it on an OMAP3. However, the omap v4l2 driver requires video buffers to be 32-byte aligned. AFAIK there is no way to specify alignment constraints on a pad_alloc, and anyway there is no way to know that the alignment constraints are :-). Suggestions on how to solve it are welcome, but for me it doesn't matter because the downstream element will be hardware accelerated element using DMAI buffers.For the v4l2sink, I think it won't be affected by my patch but I can't test it (for lack of a v4l2sink).Createdimplement pad_alloc_buffer usagePort of the patch to 0.10.16. Should also apply relatively cleanly to HEAD.Arnout, regarding the alignment, see. We use this in maemo.I suspect that this patch will not when it would actually be useful (i.e. for a hardware buffer), because the kernel videobuf implementation doesn't support VM_IO memory. SeeRegarding the alignment: I'll forget about that then.(In reply to)We're discussing that in Maemo also. We are passing framebuffer segments and those should not need VM_IO. The memory is real memory and no maped register sets.Createdimplement pad_alloc_buffer usageThe downstream-allocated buffers were loosing their ref. Indeed, BaseSrc's call of create() owns the ref of the returned buffer. In the old implementation, the buffers were recovered in the finalize functions, but for downstream-allocated buffers we have no control over the finalize. Now they are recovered in bufferpool_update(), but by that time it's already too late (buffer has been killed).So, what I do is I take a ref when a buffer is dequeued. This way, all the buffers in the pool always have at least one ref.Stefan, didn't you have this problem too in your original implementation?Createdimplement pad_alloc_buffer usageBuffer should not be requeued if either V4L2_BUF_FLAG_QUEUED or V4L2_BUF_FLAG_DONE is set (was only checking for queued).What's missing here now to get these patch committed?From a quick look, the patch does not verify that the returned buffer from pad alloc has the requested caps/size. It should discard it if it doesn't and try to renegotiate I guess?(In reply to)YesUpdating bug summary a little, since there are two aspects here: (a) use gst_pad_alloc_buffer() to support upstream re-negotiation. This could be done independently of USERPTR support, at least for the default always-copy=true mode. (b) support capturing into downstream-allocated buffers, zero-copy / USERPTR, etc.USERPTR is not yet supported in 1.0. is this still relevant?I needed it three years ago to be able to make a zerocopy camera-to-hardware-encoder pipeline on a DaVinci. But since the company using that has gone bankrupt, it's not really relevant to me anymore, no.Is there any other way to capture into down-stream allocated buffers? If no, then it's still interesting IMHO.(In reply to)Well, we use write for that currently but I guess USERPTR could be more efficient. I don't have the hardware to test this, though.Right now I'm into experimenting USERPTR support for output device. The patter would be:decoder -> v4l2sinkThe decoder would produce mmap buffer and v4l2sink will consume them using USERPTR. The other way around would have been nice, but is not support on the HW I'm working on (Exynos 4). None of the patches here are useful for 1.0.The problem with USERPTR is that it's completely unknown what the requirements for the memory are. Is it enough to be some memory? Does it need to be physically contiguous? Does it need to be something else?This information can't be retrieved via V4L2 and is completely dependant on the hardware and driver AFAIK. Due to this I don't think it makes sense to generically implement USERPTR support as it will never work reliably in all situations.(In reply to)It's true that V4L2 lacks some way to probe this. A driver that supports USERPTR in some ways, will succeed REQBUF, that we can probe easily. We can also try and queue malloc() buffer, the problem is that we cannot guaranty our probing is not accidentally physically contiguous.On the V4L2 side, there is currently 3 type of allocators being used.The vmalloc allocator (used notably by the UVC driver and most devices using serial line) is the most flexible for userspace, and will do userptr from malloc().The original dma allocator, this is used by the majority of the drivers since it's the easiest fit for any uses cases. This allocated produce and consume physically contiguous memory. Drivers that do support USERPTR and use that allocator will only work if the passed buffer are contiguous (regardless of the source, it will check each pages and make sure one is next to the other).Finally, there is the rest, which are custom allocators, can be based on framebuffer. It usually check the location of the blocks, contiguous or not, in memory.In the long term, the IOMMUs should remove this limitation, but meanwhile there is no way to be 100% sure through probing what is being used. The solution we'd like to bring here, is to be able to force this mode and let the user make that decision (io-mode=userptr), this is already in the API. For the automatic mode, we'd like to use white list for activating it.For the vmalloc case, it quite simple, and it should benefit one of the most used driver, which is UVC (if the is a format match, ovbiously). e.g.gst-launch-1.0 v4l2src io-mode=userptr ! xvimagesinkIt's useful now, but I'm aware that if DMABUF make it to XV, it would become obsolete. On Wayland, dmabuf shall be used. Note that the code for dmabuf handling will be very similar to USERPTR in the end.For the dma case, we'd have another white list, and base on that we would set the unused GST_MEMORY_FLAG_PHYSICALLY_CONTIGUOUS when producing mmap buffers. It's a lot more work to handle this case, we will probably have a fallback to dma (or r/w) in the likely case incoming buffer do not have this flags (I'm not sure this flag can be negotiated really). We can try and avoid this fallback by retaining two buffers in our userptr pool, though this assumed two first buffer are right. the important part I think is that we don't fail because of us attempting to optimize things.Alright, I'm fine with a) having a way to force userptr behaviour and b) having white-lists for automatically using that if nothing better can be used (e.g. dmabuf) :) Just don't enable it by default for all devices, and also don't do any unreliable probing of the capabilities.Hi,I've also works on user pointer support for v4l2/v4l2sink.My first goal was to enable a zero copy path between gst-omx and v4l2sink. In this case, buffers are allocated by the video decoder (hardware allocated contiguous memory) and provided to v4l2sink.I wrote a hack based on gst-plugins-good 1.2 branch (rebased from 1.2.2 release) for its purpose.It enables USERTPR mode for output video only. It tracks incoming buffer across qbuf/dqbuf mechanisms by using V4l2Meta structure.Also in case the upstream element uses v4l2bufferpool, buffers are allocated in userspace, but some devices requires memory alignment and/or contiguous memory as said in previous post, so it could fail.Also i could test other patch about this topic. Feel free to ask questions.Regards,Createdv4l2: Add support for USERPTR mode in VIDEO_OUTPUT.(In reply to)(In reply to)Hi,Nice!, I have also something here for both 1.2.2 and master:I added support for USERPTR mode in both VIDEO_OUTPUT and VIDEO_CAPTURE.Would be good to compare with your VIDEO_OUTPUT solution.Have you tried the VIDEO_CAPTURE case ?Cheers,Julien(In reply to)I have a quick look at it and it seems your solution is more elegant and better.I will try to test it as soon as possible.I didn't try to implement the VIDEO_CAPTURE case since i don't have a capture device.Should we mark this as duplicate of the other bug then and close it? Julien?(In reply to)I think it's ok to keep it. Once the v4l2 decoders upstream I'll attach USERPTR patchs here. (it allows zero-copy but it's not a requirement to enable decoders)Julien, I made a quick test of the '1.2-cc-delivery' branch.I try the following pipeline:filesrc ! demux ! parser ! omxdecoder ! v4l2sink io-mode=3The behavior seems good, omxdecoder provides its bufferpool of allocated "hardware" memory to v4l2sink. In v4l2bufferpool, it uses the right code path: (/* transfer userptr on the fly */) but it fails to add metadata to buffer since it is not writable. It leads to a SIGSEGV due to following memset in gst_v4l2_buffer_pool_add_meta_helper().(In reply to)I have not tested this case (here the incoming buffer comes from v4l2videodecoder so it already has a meta) because I have not the material to do that. Indeed on the cc device, I have not the support for vmalloc for userptr (maybe due to kernel 3.4 or s5p-mmixer driver), I mean I cannot do videotestsrc ! v4l2sink userptr.Whereas on my desktop I can do v4l2src userptr ! videoconvert ! ximagesink (kerlnel 3.11, uvcvideo, remove libv4l). I have v4l2loopback for the sink but it does not support userptr.Anyway :) Try the 3 last commits:When entering "gst_v4l2_buffer_pool_process" the incoming buffer must have a reference counter equal to 1 to be writable. (Calling gst_buffer_make_writable is not useful here as it would make a copy)For some reasons here the v4l2videodecoder always gives me a buffer with refcount equal to 2 (but I already have the meta so no pb) but maybe with omxdecoder it will be 1. (the first of the 3 commits fixes the fact that I was adding the meta after increasing the refcount) (another problem will be with the preroll frame which has one more ref count so I inactivate it in the third commit for now)(In reply to)I agree.The incoming buffer has also a refcount of 2. I will try to understand why.I finally success to play a video using your branch with v4l2sink using gst-omx buffers.It's gst_base_sink_set_last_buffer_unlocked() which increase the refcount of the incoming buffer. So i disable the last-sample feature of the base sink (with enable-last-sample property).By doing so the incoming buffer has a refcount of one.Also i found a little mistake in your code after "/* transfer userptr on the fly */" ( v4l2bufferpool.c:gst_buffer_pool_process() ):Whan the buffer doesn't contain meta. you call "gst_v4l2_buffer_pool_add_meta_helper (pool, to_queue);" but you don'"t assign the return value to meta. ie : it should be:(In reply to)Cool!Ah nice catch.Thx. I reported it in one of my branch:I found a way to test this case, just doing videotestsrc ! v4l2sink userptrIt fallbacks to mmap but at least it reaches the code you mentioned.CreatedUSERPTR for OUTPUTCreatedUSERPTR for CAPTURECreatedDynamically enable USERPTRCreatedWarn if libv4l2 is detected along with USERPTRLibv4l does not support USERPTR :-((In reply to)Hi Aurélien, on which platform/board have you run this ? :)(In reply to)Hi Julien, i ran this on my company hardware. It have an OMX decoder component and a v4l2 compliant device.Unfortunately, i don't know 'public' hardware on which i could use the same pipeline. If i'm right, Raspberry Pi render frame in an EGL context and have no v4l2 output device. and Pandaboard use TI Ducati API to decode video.However, if i'm wrong about these two boards or if you know boards in which i could make the same test, i can try to get it and run gst-omx --> v4l2sink in userptr mode.I think with your report, and our testing, we have enough data to know that it works. There exist some issues for cases where one need a large queue, but it would be a problem even in mmap. I tempted to merge this, unless there is objections of course.What is the status of userptr integration into GStreamer ?I'm currently working on implementing a GstV4l2Allocator, as right now in master we randomly loose buffers (they don't come back into our pool) for various reason. This is a bit incompatible with this branch, USERPTR support will need a new design. What I have in mind:What's new:GstV4l2Allocator GstV4l2MemoryGroup GstV4l2Memorythe method we care for userptr (just drafting here):GstV4l2MemoryGroup *gst_v4l2_allocator_alloc_userptr (allocator, mem[], stride[], offset[], user_data);For capture:Pool would fill the allocator from downstream pool using that method. Mem being extracted and reffed from the buffer. The pool would create an internal buffer with that, rather then pooling the downstream buffer. When dqbuf, the pool will be able to get back the original buffer using the user_data; The pool will be responsible for correct recounting of that buffer.For output:Pool would try and fill the internal pool the same way, with buffers as they come. And will ensure to keep at least two (of min buffers for output). Unlike previous attempt, a pool need to always be offered on propose_allocation, and pool that has been started/stop should not affect the decision. This remains risky mode, as we need to trust upstream for respecting the requirement we have exposed in propose_allocation. Also, it's not possible to fallback after first buffer has been enqueued, hence we'll fail completly if second buffer is incompatible (will nearly never happen), and reused what we have queued afterward.This is supported (if manually set) now.Sorry, I did not realized this was also about dynamic use of it. This is to be ported to the new code.What's up with this?(In reply to Tim-Philipp Müller from)It's still not dynamic. It's a valid feature request, not a priority though.(In reply to Nicolas Dufresne (stormer) from)By dynamic, you mean changing "io-mode" while the pipeline runs? I would not mind tracking this as a new request and I agree on the prio.Sure, I have no problem with that. Now, it's not "changing" the user requested io-mode. That would not be correct. The default io-mode is called "auto". Right now it's auto in the sense that it will choose between legacy read/write and mmap. What Julien's patch was doing, is to add on top to that the ability to automatically import external memory into that driver using USERPTR. Due to alignment, type of memory and other restrictions, one cannot assume that will always work, so this comes with a fallback to mmap. It's similar for DMABuf importation.	64.0	id=641079	9	False	False	jhs	1
id=99604	REOPENED	libwnck	general	unspecified	Other All	Normal enhancement	libwnck maintainers	2002-11-26 11:55 UTC by	Calum Benson	2008-08-28 17:14 UTC (	6 users	Suggestion from a Sun customer (I'm sure there was anothertitle-abbreviation bug open somewhere but I can't remember if this is whatit was suggesting and I can't find it now...):"It would be nice if (the window list) used the Mozilla/Netscape algorithmfor abbreviating newsgroup names in the left folder pane based on theamount of space available. E.g. I see s.gnome-interest for sun.gnome-interest s.a.os for sun.ambassador.osIn the example above I might see T.host1 for "Terminal host1" T.host2 for "Terminal host2"Or if I were also running other T windows then I might see Te.host1 for "Terminal host1" Te.host2 for "Terminal host2" Tr.java for "Truss java" Tr.gcc for "Truss gcc"	Sounds like a good idea.Adding bugsquad keyword.See also.I'm not sure Calum, in our 'document titles are window titles' world it seemslike this method won't provide that much improvement over just ellipsizing thetext. Take for example my epiphany web browser title, which right now reads: "- Better abbreviation of titles when space is tight" In the task bar itis simply cut off at the word abbreviation, which seems fine. Shortening thisto something like "B.99604-B.a.o.t.w.s.i.t" doesn't actually help; but I'mprobably being over critical in my example. ;-)My wonder is that assuming applications use only the document title for thewindow title, which I believe they should, is there a part of the title more orless important than the other parts of it? My feeling is that this isn't true. However, when evil applications such as evolution fails to conform to this,shortening their application name to be "E-Mail.INBOX" instead of "Evolution -Mail INBOX" does seem to make sense. (it even spells e-mail!) I wonder if it'scurrently programatically possible do this on all application or if libwnckwould need specific meta-data about the titles to determine this.One thing that'd be nice would be if common prefixes would be suppressed (forexample, I have a lot of terminals which all have titles starting: anthony@bohr:/home/anthonyand that generally takes up the entire width of the tasklist button :-(The title is usually composed of two parts--the application title and the document/task title. The document/task title is the most important because the application can generally be ascertained by the icon. Whatever the case may be, since the title is cropped from the right, the least important information should be placed there. This format should be part of the HIG.Okay, after thinking a bit about this issue, I'd tend to agree with Bryan. There's not much we can programmatically do since we don't know what we can expect from the window titles.Also, we have a tooltip on each button, which should help when the names are ellipsized."There's not much we can programmatically do since we don't know what we canexpect from the window titles."Oh, but you can, and the algorithm is fairly simple. Let's say we have four windows open:1. "The Hound of the Baskervilles" - Chapter 12. "The Hound of the Baskervilles" - Chapter 23. Calculator4. "The Hound of the Baskervilles" - Table of ContentsThis might appear in the window list as:["The Hound of...]["The Hound of...][Calculator ]["The Hound of...]Not particularly useful.First, determine which of these windows have exactly the same visible characters: 1, 2, and 4. Then, determine which of those three have actual different titles: all of them.Then, starting at the beginning, remove tokens from each title in the group, dropping each title from the process as its visible portion becomes unique. By "token" I mean a string of non-alphanumeric or whitespace characters, or a string of alphanumeric characters plus its trailing punctuation and/or trailing whitespace if any.If you actually redrew the window list after each iteration (which of course you wouldn't), you'd see something like this:["The Hound of...]["The Hound of...][Calculator ]["The Hound of...][The Hound of ...][The Hound of ...][Calculator ][The Hound of ...][Hound of the ...][Hound of the ...][Calculator ][Hound of the ...][of the Basker...][of the Basker...][Calculator ][of the Basker...][the Baskervil...][the Baskervil...][Calculator ][the Baskervil...][Baskervilles ...][Baskervilles ...][Calculator ][Baskervilles ...][- Chapter 1 ][- Chapter 2 ][Calculator ][- Table of Co...]Voilà! Unique and useful labels. (There may be two or more such groups of similar titles in the window list, so here's where you loop back and look again for different-but-visibly-identical titles, stopping only once you've run out of things to do.)As a Gnome developer you may have a personal incentive to fix this: if you have a dozen Bugzilla bug reports open, this will make their buttons in the window list show the actual bug number, instead of just showing "Bug..." a dozen times.Pretty smart, I like it.I agreed with Vuntz when he marked it WONTFIX, but I do like the new idea suggested by mpt (hadn't ever thought of anything like that before) and think it's worth a shot. And if both mpt and calum agree on this new idea, we should probably try it out. :-) So I'll reopen.However...(In reply to)Um, tabs? There'd only ever be a couple at most; it's firefox that would need to be fixed for the bugzilla use case. ;-)I've reportedon implementing this algorithm in GTK for more widespread use.	10.0	id=523087	34	False	False	gdesmott	1
id=757171	REOPENED	gnome-maps	general	git master	Other Linux	Normal enhancement	Hashem Nasarat	2015-10-27 07:34 UTC by	Jonas Danielsson	2016-02-15 20:09 UTC (	2 users	KML, Keyhole Markup Languageis "[...]an XML notation for expressing geographic annotation and visualization within Internet-based, two-dimensional maps] sort of like our GeoJSON support.It would be nice to support this in Maps. Maybe we could convert KML to GeoJSON and then use the GeoJSON support we have to render? Worth investigating. Or maybe there is a nice library out there to render KML?Mapbox has a JavaScript library for converting to GeoJSON:	I don't think that converting KML to GeoJSON is a good idea. KML has a lot more functionality then geoJSON. Especially the KML files from DigiKam and darktable would be useless without the preview images.Information from the old bug report:Google provides a library to work with KML:A developer documentation can be found here:KDE Marble and Google Earth are able to im- and export KML/KMZ files.DigiKam and darktable have KML/KMZ exports for images with GPS informations.KMZ is just a ZIP compressed KML file.---- Mattias Bengtsson 2015-09-03 03:33:44 UTCThere's some resources and code here[1] as well for converting KML, WKT, GeoCSV, GPX etc. Might be worth taking a look at.1:---- Andreas Nilsson 2015-09-07 10:32:26 UTCI have no prior knowledge of this, so sorry for asking stupid questions.So this is for displaying custom things that are not in OSM as a layer on top of our current layers?----TJ: I usually take photos with a GPS tracker. The coordinates are saved into the exif tags of the photos. Then I import this photos into darktable and export an KML-File with thumbnails of the photos. This file can now be opened in Google Earth or Marble.---- Andreas Nilsson 2015-09-07 10:45:10 UTCAh, thanks for the info.What kind of information is common for the formats to have? Does the file usually itself have a title, more than the filename?ie. "GUADEC 2016 map" vs. guadec2016.kml----TJ: Yes, KML-Files usually have a Title but the title tag is not necessary.(In reply to tobias from)Thanks for commenting!Ok, depending on how the conversion is done this could be preserved in the geojson properties fields, maybe?The problem with this is that it is a lot of work to support libraries that are not based on GObject. We would have to shim it in C and then use it in gjs.And maybe we will have a problem with large data sets, will we then have to write code to break this down in to tiles? That seems daunting. Since we stole that code for GeoJSON from clever people.It is of course doable to use libkml and might be the only way. But it makes the support landing in 3.20 less likely. Since our main problem is developer bandwidth. I have about ~2h a week to work on Maps. And there are not many others. But if we get someone from GSoC or outreachy that wants to give this a shot, things change.Thanks!I've googled a little bit, and found libgeoformats:CreatedAlphabetize src.gresource.xml file listCreatedLayers: Add 'All Layer Files' to the FileFilter.This makes it quicker to find the file you need, and we'll soon havemultiple supported file types.CreatedLayers: Load GeoJSON file outside of geoJSONSourceThis decouples the on-disk storage from the contents of a GeoJSON layerin geoJSONSource. This is beneficial if we ever want to load GeoJSONlayers that aren't stored as on-disk geojson files.CreatedLayers: Add togeojson & xmldom packagesWe're going to use the mapbox togeojson package and the xmldom packageto convert KML and GPX files to GeoJSON for rendering.xmldom adapted for gjs based on committogeojson adapted for gjs based on commitCreatedLayers: Fix warnings in togeojsonSeveral functions did a bare return, when for strict correctness basedon mozilla's js engine they should return none.CreatedLayers: Fix whitespace in xmldomConvert to unix line endings.Remove trailing whitespace.Convert tabs to spaces.CreatedLayers: Fix warnings in xmldomThere were several errors from returning with "return" when to bepedantic, the functions should "return none". Also functions should onlybe declared at top level.CreatedLayers: Add backend for KML shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the KML files to GeoJSON for rendering.CreatedLayers: Add backend for GPX shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the GPX files to GeoJSON for rendering.To get the mime type support working I needed to add: <mime-type type="application/gpx+xml"> <comment>GPS Exchange Format</comment> <sub-class-of type="application/xml"/> <glob pattern="*.gpx"/> </mime-type>to /usr/share/mime/packages/freedesktop.org.xml then runupdate-mime-database /usr/share/mime.Review of:Thank you!Review of:Seems right!::: src/layersPopover.js@@ +68,3 @@+ [filter, allFilter].forEach(function(f) {+ layerClass.mimeTypes.forEach(f.add_mime_type.bind(f));+ });This would be two lines without the fancy loop :)But I guess it makes it clear what is going on.Review of:Thanks!I like the idea of this!::: src/geoJSONShapeLayer.js@@ +48,3 @@+ let [status, buffer] = this.file.load_contents(null);+ if (!status)+ throw new Error(_("Failed to load file"));This changes the string from all lower case, does that trigger the need of new translations all around? Dould we avoid that and have it lower-case as it was?@@ +55,1 @@ this._mapSource.parse();Maybe send the json in here instead?::: src/geoJSONSource.js@@ +62,3 @@+ set json(json) {+ this._json = json;+ },Until json is used in more places than parse, maybe we could keep it just there, as an argument?Review of:Thanks for providing the sha1 for the imports! Makes it easier to re-import updates later!Have you made any changes to the code in order to make it work?I would prefer one commit that import and then another with changes so it is apparent what is original and what we added.Review of:What warnings are this? I really want to avoid doing changes like this in imported code. I like to treat them as blackbox unless we really need to change.Will you also send these changes upstream? So we get them when we re-import. I want to avoid tricky merging.Review of:ThanksIf this is only cosmetic, I think not.I want to treat this as a library and re-import when we need changes. Unless it is code that is needed to actually use it.Review of:Thanks!Same questions as the other warnings!Review of:These messages are printed as GJS loads/scans the js files (i.e. before their code is run). I didn't see a way to silence the errors. It seems related to mozilla's javascript.options.strict.Gjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/togeojson/togeojson.js 307]: function getTrack does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/togeojson/togeojson.js 327]: function getRoute does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 24]: in strict mode code, functions may be declared only at top level or immediately within another functionGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 150]: function _findNodeIndex does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 194]: anonymous function does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 429]: test for equality (==) mistyped as assignment (=)?Gjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 432]: test for equality (==) mistyped as assignment (=)?Gjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 425]: function _visitNode does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 601]: anonymous function does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 961]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 963]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 965]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 967]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 987]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 989]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 991]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 919]: function serializeToString does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/dom.js 1119]: in strict mode code, functions may be declared only at top level or immediately within another functionGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/domparser.js 96]: variable namespaceURI redeclares argumentGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/domparser.js 98]: variable qName redeclares argumentGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/domparser.js 143]: test for equality (==) mistyped as assignment (=)?Gjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/domparser.js 187]: function _locator does not always return a valueGjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/sax.js 577]: test for equality (==) mistyped as assignment (=)?Gjs-Message: JS WARNING: [resource:///org/gnome/Maps/js/xmldom/sax.js 571]: function split does not always return a valueReview of:Love how simple this became! :)::: src/kmlShapeLayer.js@@ +47,3 @@+ this._mapSource.json = json;++ this._mapSource.parse();as before, I prefer sending json to parse!Review of:OK.Review of:Thanks!Looks nice!Review of:Thanks! Fixed in the next version...::: src/geoJSONShapeLayer.js@@ +48,3 @@+ let [status, buffer] = this.file.load_contents(null);+ if (!status)+ throw new Error(_("Failed to load file"));hm... I'll change it to lowercase for now and read about pofiles and gettext when I get a little itme.@@ +55,1 @@ this._mapSource.parse();ok::: src/geoJSONSource.js@@ +62,3 @@+ set json(json) {+ this._json = json;+ },OKReview of:Adding a new commit with unmodified files.Review of:OK. I also made the "Failed to load file" have a lowercase 'f'.CreatedLayers: Add togeojson & xmldom packagesWe're going to use the mapbox togeojson package and the xmldom packageto convert KML and GPX files to GeoJSON for rendering.xmldom from committogeojson from commitCreatedLayers: Gjs-ify togeojson & xmldom packagesThese packages are made with nodejs in mind, so we have to tweak a fewthings to get them to laod in gjs.CreatedLayers: Fix warnings in togeojsonSeveral functions did a bare return, when for strict correctness basedon mozilla's js engine they should return none.CreatedLayers: Fix warnings in xmldomThere were several errors from returning with "return" when to bepedantic, the functions should "return none". Also functions should onlybe declared at top level.CreatedLayers: Add backend for KML shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the KML files to GeoJSON for rendering.CreatedLayers: Add backend for GPX shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the GPX files to GeoJSON for rendering.To get the mime type support working I needed to add: <mime-type type="application/gpx+xml"> <comment>GPS Exchange Format</comment> <sub-class-of type="application/xml"/> <glob pattern="*.gpx"/> </mime-type>to /usr/share/mime/packages/freedesktop.org.xml then runupdate-mime-database /usr/share/mime.pushed as- Alphabetize src.gresource.xml file listpushed as- Layers: Add 'All Layer Files' to the FileFilter.CreatedLayers: Load GeoJSON file outside of geoJSONSourceThis decouples the on-disk storage from the contents of a GeoJSON layerin geoJSONSource. This is beneficial if we ever want to load GeoJSONlayers that aren't stored as on-disk geojson files.Review of:Looks good!::: src/gpxShapeLayer.js@@ +41,3 @@+ let [status, buffer] = this.file.load_contents(null);+ if (!status)+ throw new Error(_("failed to load file"));So this is looking a bit similar for all shapeLayers? Maybe move to parent load? And that can set something like this.data?Then we can have the check for "large files" in one place for instance?Review of:Looks nice! Same question in this about moving reading content to super class shapeLayer.jsCreatedLayers: Load GeoJSON file outside of geoJSONSourceThis decouples the on-disk storage from the contents of a GeoJSON layerin geoJSONSource. This is beneficial if we ever want to load GeoJSONlayers that aren't stored as on-disk geojson files.CreatedLayers: Add togeojson & xmldom packagesWe're going to use the mapbox togeojson package and the xmldom packageto convert KML and GPX files to GeoJSON for rendering.xmldom from committogeojson from commitCreatedLayers: Gjs-ify togeojson & xmldom packagesThese packages are made with nodejs in mind, so we have to tweak a fewthings to get them to laod in gjs.CreatedLayers: Fix warnings in togeojsonSeveral functions did a bare return, when for strict correctness basedon mozilla's js engine they should return none.CreatedLayers: Fix warnings in xmldomThere were several errors from returning with "return" when to bepedantic, the functions should "return none". Also functions should onlybe declared at top level.CreatedLayers: Add backend for KML shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the KML files to GeoJSON for rendering.CreatedLayers: Add backend for GPX shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the GPX files to GeoJSON for rendering.To get the mime type support working I needed to add: <mime-type type="application/gpx+xml"> <comment>GPS Exchange Format</comment> <sub-class-of type="application/xml"/> <glob pattern="*.gpx"/> </mime-type>to /usr/share/mime/packages/freedesktop.org.xml then runupdate-mime-database /usr/share/mime.Review of:I put more stuff in the super class.Review of:I put more stuff in the super class.Review of:::: src/shapeLayer.js@@ +100,3 @@+ _setUpMapSource: function() {+ /* Unimplemented */+ },Why do it this way and not keep load?This way seems more magic?having a load that does this.parent() first to populate a this._fileContents?That you can use after this.parent() ?If you insist on this way: setupMapSource seems prettier?Review of:reviewed I meanCreatedkml sample fileCreatedgpx sampleCreatedLayers: Load GeoJSON file outside of geoJSONSourceThis decouples the on-disk storage from the contents of a GeoJSON layerin geoJSONSource. This is beneficial if we ever want to load GeoJSONlayers that aren't stored as on-disk geojson files.CreatedLayers: Add togeojson & xmldom packagesWe're going to use the mapbox togeojson package and the xmldom packageto convert KML and GPX files to GeoJSON for rendering.xmldom from committogeojson from commitCreatedLayers: Gjs-ify togeojson & xmldom packagesThese packages are made with nodejs in mind, so we have to tweak a fewthings to get them to laod in gjs.CreatedLayers: Fix warnings in togeojsonSeveral functions did a bare return, when for strict correctness basedon mozilla's js engine they should return none.CreatedLayers: Fix warnings in xmldomThere were several errors from returning with "return" when to bepedantic, the functions should "return none". Also functions should onlybe declared at top level.CreatedLayers: Add backend for KML shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the KML files to GeoJSON for rendering.CreatedLayers: Add backend for GPX shape layer filesThis commit leverages the GeoJSONSource backend by using togeojson toconvert the GPX files to GeoJSON for rendering.To get the mime type support working I needed to add: <mime-type type="application/gpx+xml"> <comment>GPS Exchange Format</comment> <sub-class-of type="application/xml"/> <glob pattern="*.gpx"/> </mime-type>to /usr/share/mime/packages/freedesktop.org.xml then runupdate-mime-database /usr/share/mime.Review of:Thanks!Review of:\o/Review of:Thank you Hashem!Review of:Thanks!Review of:\o/Review of:lgtm!Review of:great!Oops prematurely closed. KMZ support is still in the works.	64.0	id=583890	36	False	False	thaytan	1
id=771234	REOPENED	gnome-shell	window-management	unspecified	Other Linux	Normal enhancement		2016-09-11 09:26 UTC by	Jason Hunter	2016-09-14 17:25 UTC (	2 users	The sequence order of the windows in the activities overview mode does not follow the sequence of Alt-Tab, ie, there is no apparent order of the windows in there. Naturally, they should be ordered in the sequence of last used, just like Alt-Tab does.	The window picker arranges previews to be as space-efficient as possible, so the thumbnails are bigger (while keeping their relative size compared to each other) and identifying windows is easier. We consider this more important than a more predictable ordering like LRU, in particular as the window picker is primarily aimed at mouse/touch input and LRU makes most sense in keyboard-driven components (like the app switcher).But it's useless to try and find something here. LRU atleast gives you a starting point.Also, I don't understand your logic. You're saying that thumbnails are bigger and saying it's more important that predictable ordering, but what has thumbnail size to do with ordering?(In reply to Jason Hunter from)Quotation needed. The current ordering dates back four years ago, yet we've only had a single bug report claiming it was "useless". Sorry, but you need to provide a better reason than "just because I say so".Take the case of three smaller, non-maximized windows (N) and two maximized ones (M). With the current strategy, window previews would be lay out somewhat like this: N N N M MWhen using LRU order, you'd easily end up with: N M N M NAs the available screen size is the same, the only way to fit that layout is by making thumbnails smaller.Feel free to read up on(and also note that number of duplicates - this clearly was fixing an issue that was bugging users, while currently the only data point in favor of LRU is "someone on the internet says so".I should also add that the LayoutStrategy is pluggable, so it is possible to replace it with an extension.CreatedLots of WindowsRight, I get your point, but I think the foundation should be rooted in logic and since there is no human logic applied to placement of windows, how can humans find anything in this arrangement? Atleast with LRU, you've got some form of logic where a reasoning individual can find what he's looking for. With so small text and no overlaying icon in the activities overview, I feel that it's a mess to find anything at all (see attached photo). Surely, this cannot be the best solution.	5.0	id=99604	20	False	False	vuntz	1
id=441738	REOPENED	bluefish	application	development (SVN TRUNK)	Other All	Normal enhancement	Bluefish Maintainer(s)	2007-05-28 05:09 UTC by	FMaz	2010-02-27 10:48 UTC (	3 users	If I have a long line (what need to scroll, and that I go at the end of the line, and start to backspace it to delete the content, when the cursor arrive at the left part of the textarea, there is no margin.So I don't know what is the next character that I will delete.If the scroll could ... automatically scroll to the left when the cursor is at 1" of the textarea left border, it would be really great.Same for selection in both directions.	this is still valid for the 1.3 seriesChanging the version to SVN Trunk. Is this still reproducible with the 2.x branch?Note, Bluefish 2.0.0-rc1 has been released. This is the first release in the2.x series. Upgrading to the 2.x releases is recommended. Bugs in the old 1.xbranch are unlikely to be fixed.Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!this is still valid for 2.0.0	4.0	id=771234	6	False	False	jhunterwu	1
id=300663	REOPENED	GIMP	General	git master	Other All	Normal enhancement	GIMP Bugs	2005-04-14 20:24 UTC by	tobias	2007-03-11 21:04 UTC (	0 users	If you use the path tool, but you don't have already an other path it does notmake any sense to have the edit mode set to anything other then design. I thinkthe other modes should even be disabled.Other information:	Sounds like a nice idea, but I can already think of one possible problem, mostlyfor people who often work with paths:- work on an image with a path, be in edit mode- open a new image, or an exiting one without a path, maybe to - tool switches to design (btw, when should this happen exactly?)- go back to the first image, have to switch modesIn the first implemention the path tool automatically switched to the designmode quite frequently: On the release of a modifier and IIRC even when switchingbetween images. I still think that this would be a reasonable behaviour, sincethe design mode is by far the most frequently used mode (I think). However, tomake the mode toggles consistent between the different tools the saving of thecurrent mode has been added as well as the "toggle" behaviour of the modifiers.This of course also enabled the selection of the mode with mouse only.I think it would be nice to have a switch back to the design mode morefrequently, however, I don't think that disabling the other modes is a goodidea, since there it might be hard for the user to detect, *why* the other modesare disabled. Also we have to think carefully how to make it as consistent aspossible between the different tools.I am open for suggestions.What about switching to the design mode every time a new path gets activated torthe path tool? Is that too drastic?Confirming and marking as an enhancement.ToI think the path tool should switch with the first click into an image(without apath)Thats no problem, because even without the automatic mode switching you have todo that after creatin an other path.To1. OK, disabling the other modes was a bad idea.2. Automatic mode switching when switching between images will be very annoyingfor focus follows mouse users.just hovering over a different image view does not cause the path to getdisconnected from the path tool. My proposal would not react on switchingimages. It would happen only when a different path gets selected by the user,e.g. by the paths dialog or by clicking in a different image.I guess I should just try it, it is a one line change ingimpvectortool.c:gimp_vector_tool_set_vectors().Ok, implemented it in CVS HEAD. Please test it.2005-05-11 Simon Budig <> * app/tools/gimpvectortool.c: reset the vector tool to Design mode whenever a new vectors object gets connected to the tool. Attempt to fix #300663, please report there if you like / dislike the new behaviour.Setting to NEEDINFO, since I need feedback about this change.No feedback yet. Should we back out this change or do you think it is for thegood and should stay?Personally I think it is a good change, and it did not yet disturb my workflow.If nobody complains lets stick to it.Closing this Bug, feel free to reopen when more work is needed.Sorry, I hadn't replied to. After using it for some time now, I think it is notso bad. But this is a solution of an other problem and not the one I hadreported here.I have to reopen it. The "switch to design mode when a new path gets connected"interacts badly with the picking with the move tool.Gah.What about enabling the creation of a path in all modes (and switch to designmode when this happens)?Enabling the creation of a path in all modes sounds like a good solution.	10.0	id=441738	12	False	False	olivier	1
id=699023	REOPENED	meld	version	git master	Other Linux	Normal enhancement		2013-04-27 09:42 UTC by	Adam Dingle	2013-05-15 21:28 UTC (	1 user	In git (and probably other distributed version control systems too) it's all too easy to make commits locally and then forget to push them to the server. When there are unpushed local commits, it would be nice if Meld would display an indication to that effect in the 'Status' column for the root directory of the local working copy. The text could read e.g. '2 local commits'.	I can't figure out how to get this information properly in git *at all*. Any assistance would be most appreciated.Any simple status text that we could do would probably be somewhat misleading (though that's not necessarily a deal-breaker as long as it works for common cases). Ideally, what we want to show is: this is what will be pushed if you click the "Push" button. However, a simple count of unpushed changes would be a good start.When I have unpushed commits and I run 'git status', the output begins with this:# Your branch is ahead of 'origin/master' by 2 commits.# (use "git push" to publish your local commits)Isn't that exactly what we're looking for here?Unfortunately not, in two ways. Firstly, we try very hard not to use porcelain git commands (like status) when we do output parsing, because it's not guaranteed to be in any way stable across releases. Secondly and more importantly, it only tells us what the status of the current branch is, which isn't what we push.What we *need* is for git to tell us what it would push if we ran git push.This should now work in HEAD. It doesn't actually tell us what git would push, but rather returns the number of changes in all branches that have origin information, which should be the same thing in most cases, and a sensible piece of information in all others.Showing what would be pushed requires contacting the remote, which we're not going to do here. We *could* do that when setting up the push, but that would be part of.Nice to see this. A few remarks:1. I personally would rather have Meld tell me only about unpushed commits on the current branch. I feel it's odd to have Meld display information about unpushed commits in other branches since everything else I see in Meld only reflects the current branch. Note that 'git status', the command-line analogue, only mentions unpushed commits in the current branch. And I have push.default set to 'simple' (as I think most people do or will), so 'git push' will push only on the current branch anyway. 2. Regardless of how you feel about (1), I vote for less verbosity:- When there are no unpushed commits, instead of No unpushed commits foundI'd simply display nothing (just as 'git status' displays no text about unpushed commits in this situation). This wll be the most common state, and I find the "No unpushed commits" message to be noisy.- When there are unpushed commits, instead of Unpushed commits found: 1 in 1 branchI'd display 1 local commit (or "1 unpushed commit" if you think that's clearer)Only if commits are unpushed in more than one branch (a less common situation) I'd include a branch count: 2 local commits in 2 branches(In reply to)I'm pretty convinced that as long as we're defaulting to a global git push, we have to show unpushed commits in all branches. Otherwise there's just too strong a suggestion that what you see there is what's going to get pushed, and in the default (now old default, but still) git setup, that isn't true.Yeah sure.The original wording was in fact: "%d unpushed commits in %d branches"but I changed it so that it was actually ngettext-able (dependencies on two plurals won't work).However, I like the idea of just omitting the branch count if it's one, which seems fine for translations. This and the no-unpushed-commits case have been fixed in HEAD. Cheers.Thanks for decreasing the verbosity. :)Regarding counting unpushed commits in all branches, I do appreciate your wanting the count to reflect exactly what will be pushed. At the same time, the current behavior is confusing for users like me who have push.default=simple. For example, just now I was working on a project, saw the message "1 unpushed commit" and was briefly confused before realizing that aha, the unpushed commit was in a different branch.More possibilities:- Could we detect when push.default is 'simple', 'current' or 'upstream' and only display an unpushed count for the current branch when that is so?- When the unpushed commits are in other branches, could we indicate that by displaying a status such as "1 unpushed commit (in branch 'meld-1.6')"?Both good suggestions. However, I've been spending far too much time on the push-related UI recently and ignoring other things, so I'm going to leave this here for now.In case someone else wants to pick this up, 'git config push.default' gives us the current setting, and we need to also support 'tracking', which is a deprecated version of 'upstream'. Everything for this should live in meld/vc/git.py:Vc.get_commits_to_push_summary.Sounds reasonable. No promises, but I myself may try to pick this up if and when I get a chance.	9.0	id=300663	9	False	True	simon	1
id=775614	REOPENED	nautilus	File Search Interface	3.22.x	Other Linux	Normal enhancement	Nautilus Maintainers	2016-12-05 04:57 UTC by	Nate Graham	2016-12-05 20:55 UTC (	3 users	Fedora 25 + GNOME 3.22Nautilus used to have "search folders":No longer, though. Is there any chance at all that this feature will be re-added?	We don't expose saved searches anymore, hence closing this ticket as WONTFIX.That's disappointing. Why not? It's really useful! My non-tech-savvy mother uses the equivalent feature in macOS.Basically, as it was implemented and with the new search UI I think it doesn't worth to have this funcionality, since it's probably easier to just type what you want to search instead of opening a specific folder for that.Typing what you want works great when you know exactly one thing you're looking for. But you have to know the filename, or remember some of the content inside the file. That increases the cognitive burden on the user. A folder full of saved search results has zero cognitive burden; the system remembers the files returned by the search for you.In the commit message of the git commit you linked to, you wrote: "Probably saving a search and opening it again is more time cost and a burden than just type what you want to search."In fact, the opposite is true. Saving a search is something that you do to *decrease* time cost and burden for all subsequent times when you want to search for that set of files.Can you give us some use cases for what this is used? I cannot think of anything that would be helpful and you wouldn't remember the terms you need to search for.In fact, Nautilus already has a search folder built-in, so clearly you guys think the feature has *some* value! It's the "recent" item at the top of the source list that shows all the files you've opened recently. That's the essence of what I'm asking for, only with the search criteria determined by me the user instead of by you the developer, who can't reasonably anticipate my use cases.Here is the exact personal use case that drove me to file this bug report:I want to create an auto-updating folder that shows all the files relevant to my recent projects without having to remember their names or where they are in disk (I have a lot of diverse projects). On macOS, I tagged the relevant files with a color label (Nautilus doesn't have this, but Nemo and other file managers do) and then made a search folder that shows all files with that label. When I start working on a particular project intensively, I tag its relevant files with that label (this takes one click) and they all show up in the search folder automatically. It's awesome.I have approximated this in GNOME by making a standard folder and filling it with symlinks to my project files, but it's kludgy and much slower than doing the above.More use cases that I can think of or have used myself:- Search folder that shows all documents accessed or modified in the last n days, but with additional criteria: files of X type, files greater than Y size, files with names matching Z, etc.- Provide a means of seeing every file touched today (Nautilus's built-in "Recent" search folder does this, but you can't limit the timeframe at all)- To provide an overview of all of a certain file type relevant to a projectt that has deeply-nested folder organization, you could set up a search folder that shows all image files/movie files/text files at the specified path, recursively.More examples of how Mac users use this feature:-----	6.0	id=699023	7	False	False	kai.willadsen	1
id=753423	REOPENED	devhelp	General	unspecified	Other Linux	Normal enhancement		2015-08-09 18:47 UTC by	AbdealiJK	2015-10-09 15:42 UTC (	2 users	Add support to install docs for other things like python, android, etcCould take docsets from dash ?	A *.devhelp2 index file can be generated.But the scope of Devhelp is to be a good browser for GNOME and GTK+ APIs. Being a general-purpose API browser (for every development platform and programming language) is out of scope.I disagree.Making Devhelp a general-purpose API browser (for every development platform and programming language) would be really hard and would require a lot of maintenance work. The Devhelp application would need to be super generic, to support more types of symbols for example.By looking at the development pace of Devhelp for the last few years, I don't think it's going to happen anytime soon… So yes, you can keep this bug open for 10 years if you prefer, but there are anyway more important missing features for the GNOME documentation, as was discussed during a recent developer experience hackfest.By doing a specialized application, the usability is potentially better.	3.0	id=775614	13	False	True	pointedstick	1
id=711030	REOPENED	GStreamer	packages	git master	Other Linux	Normal enhancement	GStreamer Maintainers	2013-10-28 18:44 UTC by	Mark Howell	2014-05-26 06:13 UTC (	7 users	gstreamer-devel discussion thread:	I have this working for me in my sandbox and hope to offer patches under this bug. Andoni has suggested working this into a 'variant' in cerbero.Note also that this should only be activated for the non-crosscompile variants. g-i doesn't (sadly) support cross-compilation yet.Created[PATCH 1/4] cerbero: add a variant called 'gi' for enablingCreated[PATCH 2/4] gobject-introspection: add recipeCreated[PATCH 3/4] cerbero: add typelib category to FilesProviderCreated[PATCH 4/4] recipes: add support for gobject-introspectionI got pulled away for a while, but I'm back to this now.Here's what I have in a nutshell:1) Implemented a variant called 'gi'. I am working in Precise, but I intend for the additions to be benign/no-op for any system that doesn't enable the gi variant.2) Added a recipe for building gobject-introspection itself.3) Added support for a new file type called 'typelib' to FilesProvider.4) Updated various recipes to insert either '--disable-introspection' or '--enable-introspection' into the configure options depending on whether gi is enabled, and added entries to recipes for typelib files so that they can be available for packages.I don't have typelibs propagated out to all the relevant packages yet, but gi works within a cerbero shell (verified with Python).I add the line 'variants.gi = True' to my cerbero/config/linux.config to enable it all.Feedback appreciated.I have rebased your commits on top of master and changed a few things to handle gi in a more generic way: * Add --{enable|disable}-introspection automatically for Autotools projects if gi is enabled. * List typelibs unconditionally in recipes and list files in the typelib category handler depending in the variant. * Add dep in gobject-introspection automatically based on the existance of the typelib category in the recipe.I think that makes the final result much cleaner and easier to maintain.Everything is inpending to do a rebuild from scratch to check that everything looks good :)Thanks Andoni, I've looked over your improvements in github, all good ideas.Pygobject recipe of cerbero is at version 2.28This version is too old to compile against gobject-introspection 1.39i.e.pygi-info.c:165:14: error: use of undeclared identifier 'GI_INFO_TYPE_ERROR_DOMAIN' case GI_INFO_TYPE_ERROR_DOMAIN:Andoni, Mark, shall we push this to master ?(In reply to)Edward, this has been improved in Andoni's github repo since I put up the attached patches. I will contact Andoni to see what the plan might be for getting it in shape to push and how I might help.I need to fix gir support for OS X universal before merging, which is straightforward but I didn't not have time to do it yetThe lasts commits in the 'gi' branch should add support for universal builds. I would be great if someone else could validate it before merging.(In reply to)FWIW I can build from your github gi branch in Precise and use gi in python to access GObject, Gst, GstVideo. This requires a few tweaks (an updated yasm, commenting-out dvb and pulse elements) which are pretty typical in my recent experience building cerbero master on Precise. So, sanity checks OK for me.I don't have access to a Mac for verifying universal builds.Andoni, ok if I squash some commits from your branch regarding the various recipe addition (instead of having add this, then update this again, then update this again really), and update some recipes to their latest version?* gobject-introspection => 1.40.0* pygobject => 3.12.1Sure, go ahead, it's better if can have all the recipes changes in a single commitRebased/Squashed/Tested and pushed everythingThanks :)Re-opening since the "universal" support is actually causing quite a few issues and essentially doesn't work.	19.0	id=711030	21	False	False	t.i.m	1
id=269327	REOPENED	evolution	Mailer	2.6.x (obsolete)	Other All	Normal enhancement		2004-11-10 20:46 UTC by		2008-05-01 19:45 UTC (	0 users	1. When downloading messages for IMAP-offline usage for all folders isselected,evolution gets out of sync, when one presses the cancel button when the'synchronizing folder xxx' is displayed in the status.Then evo goes offline but selecting any mail (that is in this folder, butwas available before the last sync) pops up an error message.This happens reproducably here with courier-imap on the server side.2. Also 100% reproducably, when going online and then quickly offline again,the new highlighted mails are not synchronized and the folders switch to'not highlighted' when a folder is selected.3. As this might be nontrivial to fix, a workaround would be to supply a 'doa full resync button' to manually trigger a full resync.	do you still see this with a newer version of evolution?Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!yes this report is still valid + reproducable on evo 2.6.2	3.0	id=753423	7	False	True	swilmet	1
id=238952	REOPENED	evolution	Tasks	3.4.x (obsolete)	Other All	Normal enhancement		2003-03-02 03:49 UTC by		2012-09-15 21:27 UTC (	2 users	Package: EvolutionPriority: WishlistVersion: 1.0.8-10Synopsis: Task-to-calendar drag-n-dropBugzilla-Product: EvolutionBugzilla-Component: TasksDescription:Description of Problem:Although i'm a BIG advocate of LINUX, one productivity boosting featurethat prevents me from leaving Outlook for Evolution is the ability tohighlight a segment on my calendar, and then proceed to drag and drop atask item in the task pad on to the calendar. This allows me toallocate time in my schedule for the task with nothing but mouseoperations. Currently, my only way in Evolution to allocate time to mytasks is to select a calendar segment and then re-type the task. Implement this feature and I very likely switch over to Evolution andleave Outlook.Steps to reproduce the problem:1. 2. 3. Actual Results:Expected Results:How often does this happen?Additional Information:Unknown reporter:, changed to.Setting qa contact to the default for this product. This bug either had no qa contact or an invalid one.	still missing in evolution-1.4.6.0.200403120630-0.snap.ximian.8.1.Current design (1.5+) makes pretty hard to even think of d&d amongcomponents since they no longer share the tree.Reopening this one as discussed in ircBumping version to a stable release.***has been marked as a duplicate of this bug. ***	5.0	id=238952	23	False	False	gerardo	1
id=113564	REOPENED	GIMP	User Interface	git master	Other All	Normal enhancement	GIMP Bugs	2003-05-22 23:40 UTC by	Jakub Steiner	2016-08-06 17:43 UTC (	5 users	When applying a filter, the user has the chance to cancel the process byclicking on the 'Cancel' button on the status bar of the image window.However when a tool operation is being processed, it cannot be aborted thisway. There are some actions that take quite a long time depending on theimage size and should be abortable (gradients with adaptive supersampling,transofrmation of large images /rotation, scaling, perspective.../).	We should try to provide this feature.Bumping to 2.2.Dave.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Debian bug tracking this:***has been marked as a duplicate of this bug. ***Changing the severity from 'enhancement' to 'normal' because it cancause the GIMP to be killed on Windows: it does not process its messagequeue while in the tool code, so after a while Windows says that theapplication is not responding. Seefor details.Changing the severity back to enhancement and reopening;see the details there.Maybe this link is helpful here:Bumping to the Future milestone since noone is working on this feature.***has been marked as a duplicate of this bug. ****** This bug has been marked as a duplicate of******has been marked as a duplicate of this bug. ***Applying GEGL ops is now fully cancelable via Escape:commitAuthor: Michael Natterer <>Date: Mon Jun 30 00:10:25 2014 +0200 app: make gimp_gegl_apply_cached_operation() cancelable via GimpProgress In gimp_drawable_merge_filter(), use that feature to make filter applying cancelable. Stop projection rendering first, because we have to run the event loop manually in order to receive input for canceling, but we don't want the projection to be constructed from that manual loop running.commitAuthor: Michael Natterer <>Date: Mon Jun 30 00:00:15 2014 +0200 app: implement progress canceling in GimpTool In gimp_tool_progress_start(), if the progress is cancelable, grab on an invisible widget and emit the progress' "cancel" signal when Escape is pressed.commitAuthor: Michael Natterer <>Date: Sun Jun 29 23:57:22 2014 +0200 app: add gimp_projection_stop_rendering() which stops a running chunk renderer and moves its remaining unrendered region back to the projection's dirty region.***has been marked as a duplicate of this bug. ***Does this work with tools too? Like with the rotate tool? Because it does not look like Escape cancels the operation in progress when the green cheese stuff is showing on the canvas.***has been marked as a duplicate of this bug. ***This works with the GEGL tool, which is why I mentioned it here, butthe bug is still open because not all tools can be aborted yet.	18.0	id=322387	10	False	False	kris	1
id=322387	REOPENED	gtk+	Widget: GtkTreeView	unspecified	Other All	Normal enhancement		2005-11-25 02:20 UTC by	Tim Evans	2007-01-31 03:16 UTC (	1 user	To enchance one of my products, I was wanting to set the background colour ofrows in a treeview. The end result is something similar to the rules-hint butwith the shade for each row defined programtically. Setting theGtkCellRenderer::cell-background property doesn't work for this because itdoesn't cover the entire row. There are white spaces left around cells, andinvisible cells are completely white.As an alternative, I've added a new function"gtk_tree_view_set_row_background_func" (similar togtk_tree_view_set_row_separator_func) that lets programmers provide a callbackfunction to customise the row background colours. I'll attach the patch forthis function.Does anyone else think this a good idea and something that could be added toGTK, either in the current form or with modifications?	CreatedPatch against gtk+-2.6.10 to add the new featureSorry about this being against an old version.I am going to try to get this in 2.10, because it is nice/useful for implementing grouping. I am still contemplating about the API though.I thinking of: * renaming the function to just "GtkTreeViewRowBackgroundFunc", * drawing the background differently. Right now, when a custom background color is set that color is used without question, all other attributes are ignored. The only attribute passed to the background function is the "Selected" attribute. I see two options, we could pass more attributes to the function (also "detail" for example, though then the function will have to handle the "row-ending-details" style property ...). Another option might be to request a color from the function (while just passing the treeview and an iter/path), modify the style and pass that to gtk_paint_flat_box() so the theme engine will have a chance of customizing it (it'll take the state, detail (and row-ending-details) into account). But that might not be wished of course ...I'll update the patch once I've made up my mind on what to do.Thank you for taking an interest in this.The way I ended up using this in our application was just colour alternating groups of rows in the same shades as odd/even rows. Discovering what the even/odd row colours are turns out to be non-trivial because the style properties default to unset rather than to the default colours. I ended up having to copy the colour manipulation logic out of the depths of the treeview rendering code; something I would prefer to avoid. If this case is common, it would be nice to make it easy to implement while still supporting the more complex case via a more complex api.From the application programmers point of view I think the ideal method would be to provide (via a callback or a model column) a "group-id" atom for each row. Adjacent rows with the same group-id become a group, and alternating groups would be drawn with alternating "even" and "odd" background colours in the same way as the current rules-hint rendering. I'm not sure how you would quickly determine the odd-group/even-group state for a row, especially in a tree as nodes get expanded and collapsed.The simplest to implement would be a callback or model column that redefines the odd/even state of each row. This forces the application programmer to keep track of this information as rows are added and removed, and wouldn't work well with trees except in the simplest cases.Sounds like you are describing #318163 (see the bottom for the rules-interval property).For the effect I was trying to achieve this is maybe better solved as a duplicate of #309474.*** This bug has been marked as a duplicate of***Oops, I didn't actually mean to submit that, sorry for the spam.Having actually read both those bugs, rather than confusing myself my clicking the wrong button, I don't think either of them addresses my problem. The concept of categories is similar to, and the idea of alternating the colour on groups of rows is similar to the rules-interval in, but neither is exactly right.CreatedRevised patch against gtk+-2.10.9This new patch:- Changes the names to GtkTreeViewBackgoundFunc and gtk_tree_view_set_background_func.- Passes the tree view rather than the model as the first argument to the row background func, so attributes like selection and default colours can be found easier.- Doesn't pass 'selected' to the row background func.The rendering method is unchanged as I haven't spent the time to work out a better way to do it.	8.0	id=128968	30	False	False	otaylor	1
id=620108	REOPENED	orca	speech	2.31.x	Other All	Normal enhancement	Joanmarie Diggs (IRC: joanie)	2010-05-30 17:15 UTC by	Michael Whapples	2012-08-25 18:44 UTC (	2 users	Currently while reading a document using speech the user is unaware of changes in attributes of text. For example if the following line:"Here is some underlined text"had the words "some underlined" were underlined the user must currently check each character of the line to obtain this information.I feel orca could do with a mode which the user could enable which would read the example line as:Here is "underline on" some underlined "underline off" textObviously this needs to be possible to turn on and off as needed. While I have specific times this would be very useful, I don't imagine I would want it enabled for all applications and may be not all the time. Current times I need it are within openoffice writer and firefox, but if adobe reader were to become useable I would probably use it there (question whether such information could really be got from adobe reader).While my example has been for underline, I feel any attribute orca can detect should be on the list. I imagine italics being important for me, sometimes websites mark errors on forms with colours, etc.Currently Braille is slightly better in this respect as the Braille display marks attributes (even though it doesn't say what it is, at least you know where to check).	Thanks for filing this Michael.Initial questions (I'm sure others will come to me as I work on this):1. Should the list of attributes be based on what's enabled for speech in the Text Attributes page of the Orca Preferences dialog? Or should it be any attribute which is detectable regardless of what the preferences are?2. I can see wanting to also do this for SayAll. I can also see wanting to do it for only SayAll or only line navigation or both or none. What about navigation left and right? Perhaps we can do something similar to how we speak misspelled words??(3.0 Planning Spam-o-rama. Sorry!)*** This bug has been marked as a duplicate of***Mesar please don't mark bugs as duplicates unless you are darned sure that they are (e.g. same steps to reproduce, same traceback).	4.0	id=620108	13	False	False	jdiggs	1
id=699220	REOPENED	GStreamer	gst-rtsp-server	1.0.6	Other Linux	Normal enhancement	GStreamer Maintainers	2013-04-29 13:04 UTC by	Patricia Muscalu	2015-09-03 12:34 UTC (	6 users	Createdadd sdp bandwidthThe following patch adds the bandwidth line to media descriptions.As far as I understand there is no need to add the bandwidth information to the session description block.	Looks fine, but let's remove all these internal g_assert() which seem a bit over the top (this is not super-complicated code after all) and the g_return_*() in the internal function (those should only be used for external API).Also, tag lists may be 'global' or 'stream' tags. I don't know if you want to only take into account stream tags here? (imagine a case where the input comes form demuxer ! parser ! ... then there might be a global taglist with the bandwidth for the container stream and one for the elementary stream).Please also use GST_EVENT_TYPE (*event).You may want to fallback on tag "bitrate" if there is no maximum-bitrate..Yes, thank you for your comments. I'll fix this.However, after I've updated the gstreamer, good and base packages I've noticed that somewhere in the pipeline, the tag event is lost so now the the test_client_sdp (see my patch) fails (frequency: always).Sometimes, I also see the following warning:0:00:00.044633518 17326 0x9b220f0 WARN GST_PADS gstpad.c:3595:gst_pad_peer_query:<udpsrc1:src> could not send sticky eventsIs it a new bug?The problem is in the rtpgstpay: the sticky event is not forwarded to the srcpad.The problem is related to the commitin the gst-plugins-good.I'll report this as a new bug.Createdadd sdp bandwidthI've fixed the review comments and I also added more unit-tests.Review of:::: gst/rtsp-server/rtsp-sdp.c@@ +58,3 @@+ src_pad = gst_rtsp_stream_get_srcpad (stream);++ gst_pad_sticky_events_foreach (src_pad, get_info_from_tags, stream_media);You should be able to just use gst_pad_get_sticky_event() hereIs the patch correct? Is it something more I should change?As discussed on IRC, iterating the sticky events is the most efficient here.commitAuthor: Patricia Muscalu <>Date: Mon Apr 29 14:46:30 2013 +0200 rtsp-sdp: add bandwidth lineThis is not quite right, the AS bitrate parameter should contain the bandwidth used by the session manager (which eventually could be derived from the tags).It's also a bit more complicated than just using the tags:AS should contain the bandwidth with all the IP/UDP/RTP overhead, so it is not equal to the tag bitrate.TIAS (RFC3890) is more similar to the bitrate tag but also requires a maxprate property to be able to add the overhead caused by a particular transport.It looks like these values should be calculated by the session manager (it already does the bandwidth (without IP overhead)). They should probably be placed on the caps of the session manager and be picked up by the rtsp server to fill up the SDP (like it does with other caps fields).I see. I'll try to solve it.	12.0	id=113564	22	False	True	sven	1
id=128968	REOPENED	gtk+	Widget: GtkMenu	unspecified	Other All	Normal enhancement		2003-12-10 12:43 UTC by	Amadeus	2008-08-15 21:10 UTC (	3 users	I would like to suggest a "sticky menu" option in GTK+ 2.4. You probablyknow the nightmare where you have to navigate though your bookmarks, andone wrong move will course that you loss the submenu, and you have to startall over. Sticky menus are when you press the left mouse button once in the menubarand on the menu item, and the (sub)menu is kept open until the left mousebutton is pressed on a new (sub)menu or menu item. Sticky menus makes navigating through many submenus easy, as you don't haveto move the arrow exactly in the menus. You can simply press the mousebutton once and move the mouse whereever you want without lossing the(sub)menu. This is also very helpful for people with handicaps. You can try out sticy menus in action in Window Maker, Acrobat Reader, andXEmacs (Emacs doesn't have sticky menus).	IMO this is probably a WONTFIX, since the submenu behavioris already really complex, and adding this is just going tomake it more confusing... having the submenu stuck therecould be quite confusing.But I'll let Soeren make the final call on the issue, sincehe's done most of the tweaking of menu behavior recently.(Doing it for menubars is certainly not possible. Thecurrent behavior of being able to go to another menuneeds to be be preserved there.)Could you ask him to try it out in fx. Acrobat Reader before makingthe decision?Using sticky menus is a very relaxing experience, and I think manywould make it default. I would=)Thanks for your reply.One thing that should be done under any circumstances is to pop outthe submenu when you click. Currently you have to wait for a timeoutto expire before you'll see the submenu (even if the timeout is quiteshort, much shorter than the windows one e.g.) Given that behavior, you can get something close to "sticky menus" bysetting the timeout to something huge, like 10 min. The effect is thatsubmenus will not appear until you click.It is not an *exact* match for sticky menus, though, because if youmove the mouse cursor out of the stay up triangle, you will still losethe menu.One could add a second timeout for delaying the popping down after the pointer left the triangle. Setting it to 0 would give the current behaviour, but setting it to 10min as well would give you an even closer approximation of sticky.my friend, a hero and quadriplegic who turns his nose up to peoplewith full arm motion left who use motorized chairs seems to think thisis an obvious improvement for a whole bunch of people.i agree, i am an old lady who loses these menus very easily and often.Createda patchHere is an attempt to implement click-preempts-timeout.First of all thank you very much for your patch! It was really kind of you=)I have just installed Fedore Core 2 and downloaded and patched gtk 2.4.1 withyour patch, but I can't feel any difference...This is what I did:cd gtk+-2.4.1/gtkpatch < open_submenus_on_click.patchcd ../.../configure --prefix=/usrmakemake installrebootIs that correct?The procedure is correct as far as it goes, although rebooting isn't necessary.Just restart the relevant programs, for example by logging out and logging in.To actually get a noticable effect, you should also add "gtk-menu-popup-delay =300000" to your .gtkrc-2.0.Now it works=)As I see it, the difference from normal behaviour is:1. When moving mouse then highlight, but don't open submenus.2. Click to open submenus.3. Hold submenu untill next click.And you have already done part 2=)I haven't tried hacking in a large project like this before, but if there issomething I can do to help, please say when.2004-11-24 Matthias Clasen <> Open submenus on click. (#128968, Martin Jeppesen) * gtk/gtkmenushell.c (gtk_menu_shell_button_release): Don't activate items with submenus after the timeout, just select them. * gtk/gtkmenuitem.c (gtk_real_menu_item_select): Make submenus popup immediately on click, regardless of popup delay.Behavior 1 and 3 from the list at <ahref=""></a> arestill missing in order to be functional.CreatedPatch implementing popup-on-click that works on touchscreensThis patch is a heavily modified version of a change from maemo-gtk.It makes menus work nicely on touchscreen devices which have no motionevents. The following things are changed:- submenus open *and* close on click on their parent menu item.- click+drag allows browsing submenus just as hovering does normally.- returning from the submenu by keynav closes the submenu (to be consistent with what the stylus does)- opening a submenu selects its first item, making keynav more intuitive together with the explicit opening/closing or submenus.The patch is not perfect yet, I see the following issues:- It introduces GtkSettings:gtk-menu-popup-on-click. It could maybe use gtk-touchscreen-mode, but it feels as if the new mode is very suited for people with certain disabilities (need to get the opinion of the accessibility guys), so it should IMHO be activatable separately from touchscreen mode.- The changes to GtkMenuItem are not all really needed, but I think they clean up the thing and make the code more understandable.- The patch is the result of lots of editing, so there are quite some whitespace changes that make it less readable. Reviewers should probably apply it and then diff -b- It's a mix of bugfix and feature. Something like this is needed to make menus usable at all on touchscreen devices, but the patch does a bit more than the bare minimum.(In reply to)the above sounds like only improvements so far, so what is the reason for not enabling this per default?instead of having n reviewers re-apply, merge & diff your patch, can you please attach a -b variant as well then?Created-b version of the patch, much more readableThe "improvements" you mention are no improvements at all when the menuswork in default mode and open submenus on hovering, whereas they areIMHO all neccessary to get consistent explicit open/close behaviorfor both stylus and keyboard.(In reply to)but they don't need to conflict so they could be enabled by default and don't need a setting, or?i.e.:- possibly hover, open up submenu when this happens- first click: open up submenu if not already open (due to previous hover)- second click: close submenu, can work regardless of hover.Strong disagreement here, since it breaks the fix for constantly throwingsubmenus at users which have certain disabilities (pending comments fromthe accessibility guys of course).This already happens anyway.I think this would be inconsistent. The expextation in "normal" modeis that a selected menuitem always has its submenu open. I don'tthink we should break this "invariant".(In reply to)erm, i was referring to *existing* behavior here.anyway, let's start over, my thoughts on your changes are:- submenus should be opened on clicks onto their corresponding menu items for touchscreen mode. i think this change is pretty clearly needed, for devices which do not reliably generate move-events/however to enable submenu operation.- submenus should close on clicks onto their corresponding menu items for touchscreen mode. uncontroversial, like opening.- submenus can conceivably also be opened on clicks onto their corresponding menu items for normal navigation mode. that'll naturally integrate with the normal menuitem-activates-on-click behavior that gtk menus usually have. and this behavior is useful despite hover-opens-submenu, because a submenu may not be open due to keyboard navigation events or the submenu-open-timeout still running.- similarly, submenu closing on click for normal navigation mode can make sense, but i'd say with the notable exception that the submenu was opened previously by means other than hover (i.e. keyboard or click). that's to avoid confusing the user when he intentionally navigates to a menu-item and clicks on it to open the submenu, but sees an actually closing submenu flicker because the previous hover caused it to "auto"-open.- we really should NOT introduce another menu behavior mode unless it is overwhelmingly clear that this is needed. i say that because the code already deals with a dirty mass of special cases and is hard to maintain. what you describe sounds like it could generally be integrated into the normal menu navigation and touchscreen modes and doesn't need to have an extra mode or switch, so i object to adding that.- you've not made a clear statement on what the accesibility issue is that you're trying to solve. if you talk about close-current-submenu-open-other on hover of a new menu item, we already have measures to deal with that, i.e. adjustable timeouts. so this is nothing that *clearly* needs fixing. also, given that the other changes are rather unquesitonable (click for touchscreen), do we really need to mix these discussions?I have just applied the patch, but I can't see any difference. Do I need to edit a config file or something to activate it?You need to add:gtk-menu-popup-on-click = 1to your ~./gtkrc-2.0I think it looks very promising. I like the hover effect on the menus =)Are you going for the XEmacs behavior? I think it might satisfy all parties. Power users that can move faster than the "open submenu delay", touch screens, and accessability.CreatedUpdated and cleaned up patchUpdated patch makes the open/close on click behavior dependent ongtk-touchscreen-mode and cleans up the changed code in gtkmenuitem.ca bit.I tried getting the open/close on click behavior for normal mode toobut it was making the patch even more complicated since it needs totake care of the case where the popup timeout has just opened thesubmenu (we don't want to immediately hide it again in this case).Created-b version of updated patchI tend to agree with Tims description inof how to merge click-to-open-and-close with the current hover-to-open behaviourwithout a new mode by discriminating between explicitly and automatically opened submenus.CreatedNext version, enabling open/close on click unconditionally as asked forCreated-b version of updated patchCreatedNext version after some input from timCreated-b version of updated patchCreatedPatch fixing an unrelated issue that hurts badly in touchscreen modeThe new fix included is for the following:- open menu, hover item with submenu, wait until submenu opens- keyboard navigate the focus away from the mouse pointer- click the mouseexpected: submenu opens againactual: entire menu tree closesthe fix for that is in gtk_menu_shell_button_press() with an extensivecomment.Created-b version of updated patchWorks much better now, thanks.The one thing I find irritating with the new behaviour is that even if a submenuhas been opened by hovering, clicking on the parent menuitem twice will make itdisappear again. Wrt to the code, maybe it would be good to add some comments, or maybe that is a lost cause as far as the menu code is concerned.(In reply to)that is exactly what i requested above, i.e. the "merging" of the click-for-submenu with hover-shows-submenu modes.did you mean to suggest anything else here?that is a good idea, allthough there already were some new comments in mitch's patch, more probably wouldn't hurt as long as they are acurate.A submenu opened by hovering even closes on first click *after*gtk-menu-popdown-delay milliseconds. The timeout is there toavoid closing menus that have hust timeout-opened when the useractually wanted to open the menu (because the open timeout wasnot over yet).I can't really think of another behavior that makes sense other thanthe currently implemented one. I'm open for suggestions though :-)CreatedAnd another iteration- adds some comments- makes submenus open if any button is down in enter_notify()- fixes menubar behavior (stale grab without any menu open)Created-b version of last patchCreatedversion n+1, approaching infinityFixes minor glitch with menubar menus closing in touchscreen modeCreated-b version of last patch>Not really, I was just surprised that the first click apparently turnedthe automatically opened submenu into an explicitly opened one. But I thinkthe current behaviour is acceptableComtted the latest patch. Dunno if this bug counts as fixed now, it asksfor slightly more.2007-04-27 Michael Natterer <> Merged heavily modified patch from maemo-gtk which enables opening and closing submenus on click, and introduces some usability changes when gtk-touchscreen-mode is enabled (): * gtk/gtkmenushell.c (struct GtkMenuShellPrivate): added boolean "activated_submenu" to indicate that the current mouse operation (click or drag) has opened a submenu. (gtk_menu_shell_button_press): pop up submenus without delay and record the fact in "activated_submenu". (gtk_menu_shell_button_release): if a submenu was explicitely opened, or not opened by this release's button_press, or enough time has passed since timeout-opening it, close the submenu here. (gtk_menu_shell_enter_notify): when entering a menu item with any mouse button pressed, open its submenu. (gtk_real_menu_shell_move_current): in touchsreen mode, close the submenu when moving the focus away from it via keyboard-navigation. * gtk/gtkmenuitem.[ch] (_gtk_menu_item_popup_submenu): added parameter "gboolean with_delay" so GtkMenuShell can control this for the different scenarios of submenu showing. (_gtk_menu_item_popdown_submenu): new function. also needed by GtkMenuShell for closing submenus on click. Renamed internal function gtk_menu_item_select_timeout() to gtk_menu_item_popup_timeout(). (gtk_menu_item_real_popup_submenu): new utility function which does the actual popup and records the exact time of the popup when the menu was timeout-opened (using g_get_current_time()). (gtk_real_menu_item_select): don't add the popup timeout when in touchscreen mode. * gtk/gtkmenu.c (gtk_menu_popup): in touchscreen mode, select the first item of every opened menu.I think the changes are more touchscreen related than giving XEmacs behavior, which is what I am seeking in this bug.This patch has broken drag selection. Now submenus pop up without waiting for the popup-delay.What is drag selection?It's when you press the button and keep it down while dragging to the menu item, then releasing to select. When you do that now after the patch, submenus pop up immediately, not after 225 ms as they used to.Ah yes I see it. And I was so sure I tested all cases :-)The problem is that in gtk_menu_shell_enter_notify() it selectsthe item *and* calls _gtk_menu_item_popup_submenu (menu_item, TRUE),and trying to pop up with timeout twice gets rid of the timeoutand pops up immediately.Easy to fix, will commit a fix later today.Fixed in trunk:2007-04-30 Michael Natterer <> * gtk/gtkmenushell.c (gtk_menu_shell_enter_notify): pop up the submenu explicitely only in touchscreen mode since otherwise selecting the item already pops up the submenu. Restores the drag-selection timeout (spotted by Søren Sandmann, #128968).	45.0	id=699220	21	False	True	t.i.m	1
id=323354	REOPENED	libgtop	linux	unspecified	Other All	Normal enhancement	libgtop maintainers	2005-12-06 09:18 UTC by	Bastien Nocera	2017-01-21 08:55 UTC (	9 users	In include/glibtop/cpu.h:#define GLIBTOP_NCPU 4struct _glibtop_cpu{ guint64 flags, total, /* GLIBTOP_CPU_TOTAL */ user, /* GLIBTOP_CPU_USER */ nice, /* GLIBTOP_CPU_NICE */ sys, /* GLIBTOP_CPU_SYS */ idle, /* GLIBTOP_CPU_IDLE */ iowait, /* GLIBTOP_CPU_IOWAIT */ irq, /* GLIBTOP_CPU_IRQ */ softirq, /* GLIBTOP_CPU_SOFTIRQ */ frequency, /* GLIBTOP_CPU_FREQUENCY */ xcpu_total [GLIBTOP_NCPU], /* GLIBTOP_XCPU_TOTAL */ xcpu_user [GLIBTOP_NCPU], /* GLIBTOP_XCPU_USER */ xcpu_nice [GLIBTOP_NCPU], /* GLIBTOP_XCPU_NICE */ xcpu_sys [GLIBTOP_NCPU], /* GLIBTOP_XCPU_SYS */ xcpu_idle [GLIBTOP_NCPU], /* GLIBTOP_XCPU_IDLE */ xcpu_iowait [GLIBTOP_NCPU], /* GLIBTOP_XCPU_IOWAIT */ xcpu_irq [GLIBTOP_NCPU], /* GLIBTOP_XCPU_IRQ */ xcpu_softirq [GLIBTOP_NCPU], /* GLIBTOP_XCPU_SOFTIRQ */ xcpu_flags; /* GLIBTOP_XCPU_IDLE */};Changing the number of CPUs would break ABI, but it would be a very good idea tomake this dynamic, rather than hard-coded as now.	My guess is that we should:1. increase GLIBTOP_NCPU to be at least GLIBTOP_MAX_CPU (and increasing that oneas well, possibly to 32)2. add an unsigned int 32 member to _glibtop_cpu with the number of CPUs3. Make all the GLIBTOP_NCPU dependant struct members pointers3. add accessors and convenience functions to add new CPUs, access items in eachof the arrays (checking that we don't get > nr_cpus), and one to free the_glibtop_cpu struct altogetherWe agreed, on IRC, that it should be enough to increase GLIBTOP_NCPU (to 16),and add a flag in glibtop_global_server to tell front-ends that the machine hasmore CPUs than what libgtop supports.there's no flag in glibtop_server. but it has a member 'int ncpu'. I think itwould be OK to set it to something >= GLIBTOP_NCPU. Then we could useglibtop_cpu.flags & GLIBTOP_CPU_TOO_MANY if server->ncpu >= GLIBTOP_NCPUIt's such a mess :/I've realized that server->ncpu is (mis)used (for linux) in :- glibtop_get_proc_time- glibtop_get_sysinfo- glibtop_open- glibtop_get_cpuThis should be fixed.I first thought i should add a GLIBTOP_CPU_TOO_MANY toglibtop_cpu.flags but has the number of cpu is used in 4 differentsplaces, i think it would be easier to :- add a 'guint real_ncpu' to 'glibtop_server' which would give the realnumber of cpus on the system. 'ncpu' (always < GLIBTOP_NCPU) would bethe number of monitored cpus.- warn in 'glibtop_open' if there are too many cpu- and increase GLIBTOP_NCPU to 16 (or 32 ?). Would makesizeof(glibtop_cpu) = 1112B (or 2136B).I'll then fix the 'server->ncpu' issues.What do you think about this ?Rather than hard code the number of CPUs, I would do something like this:struct _glibtop_cpu{ guint64 flags, total, /* GLIBTOP_CPU_TOTAL */ user, /* GLIBTOP_CPU_USER */ nice, /* GLIBTOP_CPU_NICE */ sys, /* GLIBTOP_CPU_SYS */ idle, /* GLIBTOP_CPU_IDLE */ iowait, /* GLIBTOP_CPU_IOWAIT */ irq, /* GLIBTOP_CPU_IRQ */ softirq, /* GLIBTOP_CPU_SOFTIRQ */ frequency, /* GLIBTOP_CPU_FREQUENCY */ struct _glibtop_xcpu *head, /* first CPU in the list */ xcpu_flags; /* GLIBTOP_XCPU_IDLE */};struct _glibtop_xcpu{ xcpu_total [GLIBTOP_NCPU], /* GLIBTOP_XCPU_TOTAL */ xcpu_user [GLIBTOP_NCPU], /* GLIBTOP_XCPU_USER */ xcpu_nice [GLIBTOP_NCPU], /* GLIBTOP_XCPU_NICE */ xcpu_sys [GLIBTOP_NCPU], /* GLIBTOP_XCPU_SYS */ xcpu_idle [GLIBTOP_NCPU], /* GLIBTOP_XCPU_IDLE */ xcpu_iowait [GLIBTOP_NCPU], /* GLIBTOP_XCPU_IOWAIT */ xcpu_irq [GLIBTOP_NCPU], /* GLIBTOP_XCPU_IRQ */ xcpu_softirq [GLIBTOP_NCPU], /* GLIBTOP_XCPU_SOFTIRQ */ struct _glibtop_xcpu *next, /* next CPU in the list */};This is an API change, but shouldn't affect too many modules. It would make thestructure future proof, and not require people with only 1 CPU to allocate 2K or4K or 8K for 16 or 32 or 64 possible CPUs.* configure.in: * glibtop.h: * include/glibtop/cpu.h: * include/glibtop/procmap.h: Increased GLIBTOP_NCPU to 32. Added real_ncpu to struct glibtop. Added smaps members to glibtop_map_entry. Bumped version number to 2.13.0 Broke ABI again. Sorry.Too late.This would require a lot of work because it'd need to update the marshallingcode between client and daemon. And test it. And patch every arch. And test it.Allocating 2K is not a problem at all.But as you noticed, there's a real need for a new API. May be a libgtop-ng :)I don't think it's too late at all. This temporary fix will suffice, but it maybe possible to prepare a more complete fix in the 2.14 timeframe. I think oncethe patch is prepared for a few platforms, the rest will be easy to port.I am retitling this bug to reflect the new requirement and marking it as anenhancement.which glibtop gives 8 CPU support? I can't seem to get a concise answer for this. After a session in gdb found only 4 are currently supported though /proc/stat show all CPU(s) info.Well, 2.13.0 and higher should handle up to 32. Which version are you running ? Could you also please attach your /proc/cpuinfo ?and /proc/stat of course :)2.4.7 is what we are using.... That answers my question thanks![ /proc/cpuinfo ]processor : 0vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 0siblings : 4core id : 0cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5337.05processor : 1vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 0siblings : 4core id : 1cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5332.60processor : 2vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 0siblings : 4core id : 2cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5332.67processor : 3vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 0siblings : 4core id : 3cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5332.66processor : 4vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 1siblings : 4core id : 4cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5332.67processor : 5vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 1siblings : 4core id : 5cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5332.70processor : 6vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 1siblings : 4core id : 6cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5332.71processor : 7vendor_id : GenuineIntelcpu family : 6model : 15model name : Intel(R) Xeon(R) CPU X5355 @ 2.66GHzstepping : 7cpu MHz : 2667.391cache size : 4096 KBphysical id : 1siblings : 4core id : 7cpu cores : 4fdiv_bug : nohlt_bug : nof00f_bug : nocoma_bug : nofpu : yesfpu_exception : yescpuid level : 10wp : yesflags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl est tm2 xtprbogomips : 5332.71[ /proc/stat ]cpu 37436 12144 54093 13212905 38681 1618 0cpu0 7298 1186 9232 1616959 33580 1464 0cpu1 15391 1182 15952 1636011 901 153 0cpu2 3960 1009 7210 1654539 2874 0 0cpu3 2939 2020 8125 1656273 234 0 0cpu4 1758 1837 4167 1661610 220 0 0cpu5 3875 2744 4247 1658444 281 0 0cpu6 1160 1836 2686 1663532 377 0 0cpu7 1051 325 2471 1665534 210 0 0intr 22197011 16698834 10 0 7 7 232962 7 0 1 0 0 339307 66 0 149556 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3064790 0 0 0 0 0 0 0 1711464 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0ctxt 146994984btime 1201269593processes 68384procs_running 1procs_blocked 0It should be safe to increase GLIBTOP_NCPU to 8 as long as you rebuild everything against this patched version because it breaks the ABI.Currently GLIBTOP_NCPU is 32, and some people have more than 32 cores, so we still have this problem. The max number should not be hardcoded indeed.***has been marked as a duplicate of this bug. ***Hi, this is Jason from HP.I'm not sure what's the status of this problem, but the value of GLIBTOP_NCPU is still 32 in the latest version.Here I'd like to update some information about this problem, for we've been really affected by the limitation of these cpu related definitions.We have some big machines which run linux. The cpu number of these machines is normally from 240~480, maybe bigger later. So when using gnome-system-monitor to see the cpu usage statics, it will not display the correct cpu number.I looked into the code of libgtop and gnome-system-monitor, and the root cause is quite clear. It's limited by two Macros: GLIBTOP_NCPU and BUFSIZFor a typical machine of 480 CPUs, the value of GLIBTOP_NCPU should be more than 480. It's defined in libgtop/include/glibtop/cpu.hThe macro BUFSIZ is used to read /proc/stat into a buffer. The current size is 8192, which is a recursive definition and finally defined in /usr/include/_G_config.h. In my environment of 480 cpus, the size of /proc/stat is about 40k, which changed according to the run time. So it will be truncated by the edge of 8192.As a workround, it's quite easy to have it fixed by expanding the value of these two macros. But as the topic said, a dynamic size identification solution is the right way to go.I will attched some screen shots of the problem in my environments, and my workround result.My libgtop version is 2.28Thanks.Createdexpanded GLIBTOP_NCPU to 256I expanded GLIBTOP_NCPU to 256, and the displayed cpu is increased. But still limited by the BUFSIZ of 8192. I checked the truncated buffer of /proc/stat, it's actually is 8192 bytes.Createdexpanded GLIBTOP_NCPU to 512, and BUFSIZ to 81920Now, I expanded GLIBTOP_NCPU to 256, and BUFSIZ to 81920. It fixed our problem, just as a workround.For providing a completed solution will affect several modules, is there a schedule or plan to do it?I'm thinking about migrating the whole cpu info array (most dynamic arrays in fact, with CPU being the most important) to GList, glib already being a dependency of libgtop.That of course takes time, and I unfortunately can't give a real estimation on how long it will take, as libgtop supports multiple operating systems, and I only have a Linux dev environment set up, so I'll have to either find someone willing to port the changes to the other supported OSs, or set up VMs for myself, both of these taking quite some time.System monitor and other projects are using libgtop (there are some desktop extensions, like Gnome Shell extensions, XFCE plugins and Ubuntu indicators), so these will also need an update (maybe there also are some others)In the meantime, I am considering temporarily accepting your patch, until the Glist migration gets in place, or I manage to find an acceptable transition method. Would accepting your patch in libgtop help you out at least temporarily?Thanks Robert for your comments.Here I attached this temporary patch below.Please review it.Thanks.Createdextending-max-cpu-number.patchThanks for the patch, pushed to head, will push a release with the next GNOME release train.Thank you Robert.CreatedFix libtool versioningHello Jason and Robert, you need to bump the soname otherwise the ABI breakage gets unnoticed and leads to segfaults because of the glibtop_cpu struct size change. I'm not sure you should have done it during the 2.28 cycle, but here's the patch to bump the soname/libtool versioning.Review of:Thank you for the patch, Benoît. I have been thinking on whether I should increase the "libgtop_current", but I have decided not to (obviously, that was the wrong choice). However, this has been done during the 2.28 cycle, but I have prepared only one release, and that was 8 months ago, so nothing's broken yet in any stable released version, and with your patch committed, it should not happen in the future either.OK then you may want to increase the version to 3.<something> and even branch.Hello,I recently used gnome-system-monitor 2.28 on RHEL6 for a system with 480 threads and found that it wasn't supporting that high number of threads.I rebuilt the RPM package of libgtop2-2.28.0-4 with the following modifications in order to have it work correctly:perl -pi -e 's/char buffer \[BUFSIZ\]/char buffer [10*BUFSIZ]/' sysdeps/linux/cpu.cperl -pi -e 's/char buffer \[BUFSIZ\]/char buffer [10*BUFSIZ]/' sysdeps/linux/open.cperl -pi -e 's/char buffer \[16384\]/char buffer [40*16384]/' sysdeps/linux/sysinfo.cperl -pi -e 's/#define GLIBTOP_NCPU\s*256/#define GLIBTOP_NCPU 512/' ./include/glibtop/cpu.hWe checked this was working fine afterwards. Probably not a final solution as mentioned earlier, but a work around to a current limitation for people having such large systems.RHEL is following this at this URL:and the one mentioned in that BR.Release 2.30 has GLIBTOP_NCPU set to 1024. Yes it works, just keep in mind that it breaks the ABI so you need to rebuild all the packages depending on libgtop.Review of:Committed a long time ago, marking as such.CreatedPatch to dynamically allocate memory when reading /proc/cpuinfoWe've run into a related issue with the way libgtop determines the number of CPUs. A 64k buffer is allocated to hold the contents of /proc/cpuinfo, and the contents of this buffer are parsed to count the number of cores. On a server with a large number of cores (>64 or so), /proc/cpuinfo can contain more than 64k of data, so libgtop reports fewer cores than are present.CreatedUse g_get_file_contents to read /proc/cpuinfoHello, here's a shorter version using glib g_get_file_contents.	31.0	id=129310	8	False	False	vuntz	1
id=129310	REOPENED	gnome-panel	general	unspecified	Other Linux	Normal enhancement	Panel Maintainers	2003-12-14 12:36 UTC by	Startxxx	2006-10-28 05:42 UTC (	3 users	As you can see, in a system with 2 screens or aresolution of 1400x1050 (as my laptop) it is quiteconvinient to put the panel at the left side(vertically). That was I can have 25~ windows openand still be able to find the window i want in thelist easily. The attached screenshot shows what Imean in Windows, hope this will be possible soonwith linux avec the gnome-panel.(attaching screenshot)	CreatedWindows screenshot showing the windows equiv. panel as I want it to behave in GNOMEI don't undersand: we have vertical panels since... wow... since avery long time.Yes, I know vertical mode is "supported", later tonight I'll attach ascreenshot for contrast to show u how miserable it is! It's notsomething someone would actually use. Each windows tab from the windowlist grows as a square and not as a rectangle, task bar items grow tothe max possible width (the width of the panel) instead of ordering incolumns... eventuelly, you can't open 25 windows (without grouping)and many tasks in taskbar and manage them sanefully. It's not amission of creating the technical possibility for vertical panel but ajob that measures in the clean & easy to use panel. If you have a XPmachine with more horiz. resolution then 1280 you should try this modeto understand how easy it is, especially when working constantly withmore then 10 windows open...CreatedHow the horizontal panel looks on linux (bahhhh)You should log individual bugs against the bits that don't behave wellon vertical panelsWell, no. I'm too lazy to do that.Thanx anyway.I'm closing the bug since the reporter is "lazy". There are tons ofother open bugs about problems with vertical panels.Right.... just close your eyes and imagine your product is alreadyperfect and you don't need anyone to tell you what needs to beimproved. I bothered to provide screenshots opf what I mean onwindows and linux, with a quite detailed explenation. But it's notenough, you want me to split it into implementation details and postmultiple reports. Keep on the good job, that way you can be sure thatusers like me will keep on submitting ideas for improvments and bugreports.I on the other hand, as a developer of an open source project acceptideas from ppl I don't know through icq, email etc. and then split itinto implementation details in my todo list. You can't expect randompeople to do the developers work.Good luck with your hobby project, I won't be posting anymore atbugzilla.gnome.org.-eyalI'm not closing my eyes and I don't want to upset you.Basically, your original bug was about window list being unusable onvertical panels: we already haveandaboutthat. And I'm sure there are more bugs in libwnck for that. We knowthis problem and we need to work on it. I totally agree on that. Butwe don't need to keep 5 bugs telling us that the window list is brokenon vertical panels open: we need to just keep one (here we alreadyhave two and they're probably saying the same thing).When posting your screenshot, the problems you show are problems withdifferent applets. These problems should be filed for each applet. Orif you think the panel should handle the vertical mode in a better wayfor all applets, please tell us so we can discuss on this.Last point (and the most important): if you do not agree with meclosing the bug, you can reopen it and start a discussion. But don'tblame every GNOME developers for what *I* did and go away.for all applets, please tell us so we can discuss on this.I am not going to get into "how to solve" explenation, I developsomething called "u812" and not "gnome-panel". Check out the tray icon area in windows and linux (in vertical mode).Can you spot the problem there? hint: I don't need a 110*110 pixelsized volume applet or start button, it shouldn't grow to the width ofthe panel. With what logic should you resize the icons? that's up toyou man... and it's not the only problem there...Ok, we're not talking about the notification area here, but about thevolume control applet and a menu button. (Note that the behaviour ofthe notification area needs some work too, but we have a bug about this).The problem of the size of the volum control applet should be filed ina new bug against gnome-applets.And now we come to the menu button bug: this is not specific tovertical panels. This happens when the panel is large. I don't knowwhat's best here. If the button doesn't grow with the panel, we won'trespect the Fitt's law...I'm reopening & retitling the bug for this.Maybe make the menu button grow up to a certain limit (say 36x36 or 48x48), andthen only expand the button ? I.e. for a vertical panel, the "clickable zone"would expand horizontally to follow the panel size, but the button height andthe foot icon would stay the same size.This is how the weather applet works, btw. The icon size does not change, itjust stays centered in a expanding applet.(this is also how the window selector applet works of late)FWIW, the size of icons in launcher buttons has been clamped to 48x48,see	14.0	id=323354	23	False	True	bdejean	1
id=557047	REOPENED	glib	gobject	unspecified	Other Linux	Normal enhancement	Stefan Sauer (gstreamer, gtkdoc dev)	2008-10-20 10:37 UTC by	Stefan Sauer (gstreamer, gtkdoc dev)	2009-01-03 17:11 UTC (	2 users	g_object_newv() currently triggers emmission of the notify signal. This is kind of useless as noone can be subscribed to it yet, as the object is under creation still. As can be seen from, the notify handling is not very light.	Createdshow that notify is indee called during constructionCreatedsame example modified to meassure the overhead# before3.05user 0.02system 0:03.11elapsed 98%CPU (0avgtext+0avgdata 0maxresident)k3.14user 0.01system 0:03.23elapsed 97%CPU (0avgtext+0avgdata 0maxresident)k3.04user 0.00system 0:03.09elapsed 98%CPU (0avgtext+0avgdata 0maxresident)k3.05user 0.00system 0:03.08elapsed 98%CPU (0avgtext+0avgdata 0maxresident)k# after2.55user 0.00system 0:02.58elapsed 99%CPU (0avgtext+0avgdata 0maxresident)k2.60user 0.00system 0:02.62elapsed 99%CPU (0avgtext+0avgdata 0maxresident)k2.58user 0.00system 0:02.59elapsed 99%CPU (0avgtext+0avgdata 0maxresident)k2.56user 0.01system 0:02.59elapsed 99%CPU (0avgtext+0avgdata 0maxresident)kCreatedremove the notify emission(In reply to)The GObject class notify handler (G_OBJECT_CLASS(myclass)->notify) _is_ subscribed.What I meant is that g_signal_connect() requires an instance which is not yet available outside g_object_new(). Do you have a (theoretical) example in mind how the notify could be used during construction?(In reply to)Right, also the following case is not unavoidable: parent_init () { container_add (parent, object_new (child_type)); } child_paret_set() { signal_connect (parent, "notify", prophandler); }If we skip emissions for properties changing in parent_init() or from construct properties at the end of object_newv, prophandler might be missing out on calls that the child implementation could validly expect.In the parent-child only non-construct properties would be notified, right? Should probably write a test for that too.I think the one definite good outcome of this is that I can better document the contract :)(In reply to)No, also normal properties, example:parent_init (self){ container_add (parent, object_new (child_type)); g_object_set (self, "can_focus", TRUE, NULL);}The child's prophandler should be seeing a parent::can-focus notification at the end of g_object_newv() here.That'd be good to have.Your right, also just found the gobject constructor going the freeze/thaw for the construct properties. I'll see if the mechanism itself can be optimized then.In my testcase I have actually nothing subscribed to the notify signal. If I can make it 20% faster by removing the notify code, I should actually be able to also bail out by having checks like signal_check_skip_emission() for notify. Now that is unfortunately local to gsignal.c ...(In reply to)g_signal_has_handler_pending() is an external approximation of signal_check_skip_emission(). Exposing the latter as API would unfortunately also be moderately expensive (it'd e.g. need to acquire a mutex, which trashes caches and pipelines).Createduse g_signal_has_handler_pending to eventualy skip notify queue workThis patch has two defines to tests how much difference the changes bring. If thats the way to go it should also be tried for regular g_object_set and g_object_notify api.Regarding g_signal_has_handler_pending() it passes G_SIGNAL_MATCH_DETAIL unconditionally, where it should probably be (may_be_detail ? 0 : G_SIGNAL_MATCH_DETAIL).Createdversion of meassurement example that has a construct property as wellIts interesting to notice that time almost double once one has a construct property.(In reply to)One problem with your approach of supressing notifies already during the queueing phase is that this still breaks compatibility with classes that currently override GObejctClass.dispatch_properties_changed. Just supressing unneeded emissions in g_object_dispatch_properties_changed() could be done compatibly though. Not sure if that significantly improves performance though.Or I could check if GObejctClass.dispatch_properties_changed() is not overridden. Idealy we would have another vmethod GObejctClass.notify_needed(). The default implementation would check if GObejctClass.dispatch_properties_changed() is not overridden and then check g_signal_has_handler_pending().If someone overrides GObejctClass.dispatch_properties_changed(), they could also override GObejctClass.notify_needed(), if they can do a simillar check.Does that makes sense?	16.0	id=557047	12	False	False	ensonic	1
id=344421	REOPENED	at-spi	api	unspecified	Other All	Normal enhancement	At-spi maintainer(s)	2006-06-09 16:58 UTC by		2014-11-14 15:52 UTC (	4 users	+++ This bug was initially created as a clone of+++Add Accessibility::Terminal perarea: atk apiNeed to define resources to do patches. Maybe sameperson can implement both ATK interface and VTE.Target Gnome 2.16 by end of July 2006.	[Resetting QA Contact to newly introduced "". Reason: So far it was impossible to watch changes in at-spi bug reports without following all the specific persons (Li Yuan, Bill Haneman, Jeff Wai, ...) and also their activity outside of at-spi reports.IMPORTANT: Anyone interested in following all bug activity (including all maintainers) must watch the "" dummy user by adding it to the 'Users to watch' list under Preferences->Email preferences. This is also the default procedure nowadays in GNOME when setting up new products.][Mass-resetting default assignee, see. Please reclaim this bug report by setting the assignee to yourself if you still plan to work on this. Thanks!]I'm going to go ahead and close this because it concerns a very old version.Feel free to open a new bug if the problem persists.Reopening: although not a top priority (so the reason is being so old), is still a interface that we would like to implement, or at leas discuss how to provide such functionality.Ok thanks for the update.	5.0	id=745586	12	False	True	wim.taymans	1
id=745586	REOPENED	GStreamer	gst-plugins-good	git master	Other Linux	Normal enhancement	GStreamer Maintainers	2015-03-04 09:47 UTC by	sancane	2015-03-04 10:33 UTC (	2 users	Createdpatch generated using git format-patchrtpsession declares an array of maps to store srrcs but only thethe key 0 is being used. This patch replaces the array of mapsfor just one map and remove useless parameters in rtpsession	It's the beginning of an implementation of RFC 2762, which is needed for large multicast groups. The implementation is not yet complete but why not leave what is there and implement RFC 2762 instead?commit 1591adf4cd843d13d8622a30c619425691a84128Author: Santiago Carot-Nemesio <>Date: Wed Mar 4 10:35:12 2015 +0100 rtpsession: Do not use an array of maps if they are not being used rtpsession declares an array of maps to store srrcs but only the the key 0 is being used. This patch replaces the array of maps for just one map and remove useless parameters in rtpsessionI'm not very familiarizated with that RFC, but as far as I concerned that's just an experimental protocol, not a mature standard. I was just curious to see why such an array of maps was there if it was not being used anywhere. I saw that the code was not touched since 2007 so I thought it was a waste of resources result of a refactorization or something along that lines. That is the reason why I submitted this patch.commit 8984e18ef778c398c986fd8d9df72bfb819d34c7Author: Sebastian Dröge <>Date: Wed Mar 4 11:28:12 2015 +0100 rtpsession: Add explanation why we have space for 32 hash tables And also create only one, there's no need yet to create all 32 until we implement RFC2762.commitAuthor: Sebastian Dröge <>Date: Wed Mar 4 11:26:57 2015 +0100 Revert "rtpsession: Do not use an array of maps if they are not being used" This reverts commit.: It's the beginning of an implementation of RFC 2762, which is needed for large multicast groups. The implementation is not yet complete but why not leave what is there and implement RFC 2762 instead?	4.0	id=344421	11	False	False	bill.haneman	1
id=64357	REOPENED	nautilus	File and Folder Operations	3.16.x	Other Linux	Normal enhancement	Nautilus Maintainers	2001-11-12 12:08 UTC by	Toralf Lund	2015-06-17 13:50 UTC (	2 users	Icons for binary programs (application/x-executable-binary) should act asdrop targets, to that arguments may be passed via drag+drop. Same goes forscripts etc.	Isn't this really just the more general case of #64355?It depends on how you see it. I'd rather say that both are specialcases of a more general concept - the support for argumentspecification via drag&drop, or lack thereof.is concernedwith icons for application launchers (i.e. .desktop files) while thisreport talks about the icons for the program files themselves.BTW, It amazes me a bit that this feature wasn't implemented properlyway before release 1.0, as it has been around on other platforms for10-15 years, and, as far as I recall, also works fairly well in gmc.(Now, that was a quite nice way of saying it, wasn't it, consideringthe fact that I nearly started some real and proper flaming here?)we support this via .desktop files now right???Yeah, the EXEC= entry. [Though I'm not entirely sure if dragging anddropping on the desktop does this correctly, but the spec is there.]Well I wasn't talking about .desktop files, I was talking about theicons for executables. It should not be necessary to created .desktopfiles for file operations to work properly.***has been marked as a duplicate of this bug. ***Dragging and dropping a text-file works fine on an application icon Ipreviously dragged from the menu to the desktop (e.g. gedit). But itdoesn't work if I find gedit in its respective bin-directory and dragthe text-file onto its icon.I tested this with 2.1.2Ex-Windows users will certainly expect this to work; in Explorer youcan drag a document onto an application shortcut (cf our .desktopfiles) or the application binary itself (e.g. in the Program Filesdirectory).Please add this feature.. dropping text data files over python scripts (or whatever) is a must-have...	9.0	id=64357	12	False	False	darin	1
id=757539	REOPENED	gnome-documents	general	unspecified	Other All	Normal enhancement	GNOME documents maintainer(s)	2015-11-03 18:42 UTC by	Debarshi Ray	2015-11-25 16:20 UTC (	2 users	Let's add a help overlay for shortcuts to play with the new GtkShortcutsWindow in gtk+.	CreatedAdd a help overlay for shortcutsCreatedScreenshotThe inability to specify different shortcuts for LTR and RTL is an issue. SeeCreatedAdd a help overlay for shortcutsI was sloppy and hadn't 'git add'ed all the hunks.CreatedAdded help overlay for shortcuts with the new GtkShortcutsWindowSorry, Please remove the Patch "Added help overlay for shortcuts with the new GtkShortcutsWindow" submitted by me. I accidentally had this link open and submitted the bug number for this. Sorry once again.Review of:Looks good to me, thanks!CreatedAdd a help overlay for shortcutsResolve LTR vs RTL, and the help-overlay.ui to po/POTFILES.inComment onAdd a help overlay for shortcutsPushed to master. Thanks, Cosimo.Reopening.We need to add a "Keyboard Shortcuts" entry to the app-menu [1], and check the gestures supported by EvView and add them.[1]Createdapp-menu: Add "Keyboard Shortcuts" entryComment onapp-menu: Add "Keyboard Shortcuts" entryPushed to master. The last remaining item is to add the gestures.	12.0	id=760313	9	False	True	fpeters	1
id=771433	REOPENED	nautilus	general	3.21.x	Other Linux	Normal enhancement	Nautilus Maintainers	2016-09-14 15:02 UTC by	Mohammed Sadiq	2016-09-14 15:22 UTC (	1 user	Its a bit hard for a person to know the details of the compilation Nautilus was built from. It might be nice to include sha checksum details from the last commit it used, along with the version number if compiled from git. This means that Application Menu -> Details, would show version number like 3.21.92~f686cc9 etc. This would be an easy way for newcomers to confirm that the compilation and installation is well done, and they are not running some different version.This bug is not specific to Nautilus package, but every GNOME package that have a UI, or a version string printed in some manner. If there is way to assign this bug to every package, please proceed.Thank you.	We use tags, you can check the tag for 3.21.92 and you will get the hash.Closing as not a bug.I didn't mean about getting the sha from the 3.21.92. But once 3.21.92 is tagged, there can be several commits until 3.21.93 (or which ever version that follows). So until version 3.21.93 is tagged (or in configure.ac), the version is always 3.21.92.So for a newcomer, (s)he may not know if it has been built from the latest commit (say) or from the last tagged commit when built and run using jhbuild.	2.0	id=757539	16	False	True	rishi.is	1
id=760313	REOPENED	devhelp	General	3.18.x	Other Linux	Normal enhancement		2016-01-08 10:19 UTC by	Jonathan Kang	2016-01-29 12:32 UTC (	3 users	CreatedAdd-ons for Firefox in Gnome-SoftwareOS: Fedora 23HW: HP ProBook 4740sI did a fresh installation of Fedora 23, and installed Devhelp 3.18.1 using "dnf install devhelp". Once I opened Devhelp the first time, I found that many APIs are missing. For example, APIs about Gtk+, GLib, etc. Later on, I asked for David's found that I should install some packages like gtk3-devel-docs and gtk-doc to get those APIs available in Devhelp.So I'm thinking a way to improve this(some ideas from David King).I think Devhelp should recommend users those packages that may be needed by itself. For example, in Gnome-Software, add a "Add-ons" section to recommend those docs packages(as shown in the attached picture). If users are installing Devhelp using command line, maybe devhelp can recommend those documentation packages.That way, it would be better so that some users like me will not google it or ask someone else for help. It would be a very nice improvement, in my opinion.	This looks like a request for the Fedora package, for example the Debian package already has this line:Recommends: libgtk-3-doc, libglib2.0-doc, libpango1.0-docCould you file it in the Fedora bugzilla? (bugzilla.redhat.com, product: Fedora, component: devhelp)(In reply to Frederic Peters from)Thanks for the information. I'll file a bug in the Fedora bugzilla.(In reply to Frederic Peters from)I don't think we can expect downstream packagers of all distributions to maintain the list of all packages that might be shipping gtk-doc documentation. eg., that list doesn't include clutter-doc and webkitgtk4-doc. :)Instead, I would expect devhelp to look at all the libraries installed on my system and offer to install the documentation for those, if they are missing. Maybe we can achieve something like this using PackageKit and gnome-software?Instead of taking the docs from the distro, it's probably a better idea to download the latest versions, see.	4.0	id=763151	12	False	False	mitch	1
id=763151	REOPENED	GIMP-manual	English	2.8	Other All	Normal enhancement	Róman Joost	2016-03-05 22:18 UTC by	Jo	2016-03-07 13:58 UTC (	0 users	id like if gimp would prefer user-defined directories for resources (gbr, gih, pat, ggr, ect.) when this path is set. Than the default path, which isn't easy to access - i have to navigate several folders on my HD	Just move your user-defined folder to the beginning of the list. GIMPpicks the first writable folder to save new data.Oh thanks, thats nice. Maybe adding some tooltip or info in the paths window would be helpful, that the paths are loaded in that order.Let's get it documented in, at least.	3.0	id=751409	10	False	False	paolo.borelli	1
id=345924	REOPENED	GnuCash	Reports	unspecified	Other All	Normal enhancement		2006-06-26 02:18 UTC by	Bill Skellenger	2016-03-14 21:38 UTC (	3 users	When tinkering with report options, and then clicking "Apply" to witness your changes, the "OK" button becomes disabled and the user must use the "cancel" or window close "X" in order to get rid of the options dialog box.This behavior is confusing to the user. IMO, "Apply" should allow the user to witness changes, finally accepting the changes using "OK" or aborting the changes using "Cancel".Other information:	Yeah, this is annoying. Confirming, changing to RFE.Another case: if you click on Default in error, your original settings would be irretrievably lost if there is no way to Cancel an action.Apply == change the settings and do not close the window (let me change other settings)OK == accept the changes and close the windowCancel == change nothing and close the windowI don't see this behaviour anymore in gnucash 2.6.11.1. There no longer is a "Default" button, so the use case inno longer applies.2. When I make changes to the report options and hit apply, the ok button remains active and can be clicked to close the options window.Note that when you hit apply, any changes are performed. So clicking cancel afterwards will not revert to what you had *before* hitting apply. I believe this is reasonable behaviour though.If you still see this issue, please feel free to reopen this bug report. Thank you.I was wrong. For some reason it sometimes keeps the ok button enabled and sometimes it doesn't. Reopening for further investigation...	4.0	id=386957	23	False	True	stephane	1
id=143775	REOPENED	gnome-font-viewer	general	git master	Other Linux	Normal enhancement		2004-06-05 18:28 UTC by	Arnaud Patard	2015-05-17 07:42 UTC (	12 users	This bug has been reported in the debian BTS:"The string shown by the gnome font viewer should be changeable by userrequest, for that one may want to look at a japanese, korean, whatever font,and with the standard english sentence, you have no clue about what thejapanese, korean, whatever characters in the font can look like.The interesting thing is that this sentence is localized, so that ajapanese sentence shows up in japanese locale."	Thanks for the bug report. This particular bug has already been reported intoour bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***My report might have been misleading. This is *not* a dupe of.The problem is the following :When my environment is in a given language, I can't see font testing strings in*other* languages.Example : my environment is in English and I want to see some Japanese font,I'll get the english string, which is useless to decide how Japanese glypheslook like.More generally, one might want to display whatever string he decides to, to seesome particular combinations or whatever.Something neat that the windows font selector does is to detect the script of the font and use appropriate sample strings. the FC_LANGfontconfig tag gives you some of that information ... a list of languagesthat the font supports.***has been marked as a duplicate of this bug. ***My suggestion is that the font viewer should have a dropdown menu with several sample text choices. For example:Latin text and punctuation (the "quick brown fox" text that is currently the default)European accented characters (a selection of äöåéíñ and so on)Eastern european charactersCyrillic lettersHiraganaKatakanaKanjiKoreanArabicCustom textThis method gives the user fast access to the different properties of the font regardless of the locale.CreatedA patch to allow users to type their own textHere is a proof of concept patch that allows the user to select one of several test text samples or type his own.The code is a bit ugly and exposes some inefficiencies in the current code. For example the code reparses font information every time the text is altered which is slow. These are easily fixable, though.Do users need to select from different samples? A default sample and the ability to type your own sounds good enough for me.Marking the patch as needs work, as per.CreatedNew patch to allow typing own textHere's a new patch that replaces the sample text label with an entry box. It also caches the font information so it is not reparsed all the time.However for some reason all text is always drawn with the last allocated font. I don't know why. Maybe some Freetype expert can fix that.To: That would absolutely not help the submitter of the original bug: What is needed is sample text that demonstrates the selected font. However, the user may not even be able to type the characters in that font, or know which characters are actually in it.***has been marked as a duplicate of this bug. ***See alsowhich is related.Patch doesn't seem to apply against current SVN trunk.Jens, is there any reason you didn't apply your patch earlier?Um, sorry, what patch?Sorry, misread the name of the patch author.The patch is useless. The font viewer should be rewritten to use pango for the preview. Kinda like. Needs a few more pango features that are not implemented yet. In my long-term plan...-> gnome-utilsgnome-font-viewer has now moved to gnome-utils, reassigning.***has been marked as a duplicate of this bug. ***	17.0	id=345924	15	False	True	jsled	1
id=387779	REOPENED	GIMP	Tools	git master	Other All	Normal enhancement	GIMP Bugs	2006-12-20 04:25 UTC by	david gowers	2013-07-27 17:26 UTC (	2 users	* Rotate could use the cursor keys to adjust angle (with CTRL retaining its current meaning, and SHIFT being move-by-45-degree-increments, and ALT to adjust centre)* Skew could use the cursor keys to adjust skew, with SHIFT being adjust-by-larger-amount as with Move tool* Flip could trigger a flip by pressing up/down to flip vertically, or left/right to flip horizontally.* Scale and Crop: cursors could expand the scale rectangle on that border; CTRL+cursors could shrink it, with SHIFT having similar meaning as with Skew.ALT+cursors could move it.* Perspective (perhaps - this would require a bit more work): cursors adjust the position of the current point, CTRL+cursors move between points, SHIFT+cursors move as in Skew, ALT+left/right expand the horizontal line the point is on, ALT+up/down expand the vertical line the point is on, like this:(@ is the selected point, # are unselected points) @----# / / / /#----# Pressing left or right would expand the top line; pressing up or down would expand the left line.These changes would make a great difference in usability, particularly for fine adjustments. Most of the transform tools are naturally suited to a keyboard interface. I expect I could implement at least some of this; I'll look into it.	Some of your suggestions are controversial. Ctrl for example is already used in the Scale tool.Revised:* Scale and Crop: cursors could expand the scale rectangle on that border;SHIFT having similar meaning as with Skew.ALT+cursors could shrink it.ALT+SHIFT could move it (meh -- Space would be nice, but can't use that.)The others I have checked are in no conflict with existing behaviours.Peter has some ideas for a combined transform tool and I would very much like to see them implemented for 2.8. But perhaps we can still get better key bindings for the current tools into 2.6. Let's see if this catches someone's interest in the next few weeks, otherwise bump it to 2.8...I have added simple key support to the Rotate Tool that demonstrates a possible approach. With one example, we can easily put this as a gnome-love bug.Commited to trunk, rev 25873:2008-05-31 Martin Nordholts <> * app/tools/gimprotatetool.c (gimp_rotate_tool_key_press): Implemented this function to support rotating with arrow keys. See.To see the diff, do 'svn diff -r25872:25873' in GIMP source root.Actually, that example is not really a good one as it modifies the tool by fiddling with its user interface. That will make it more difficult to change the code later so that it does not rely on the tool popup dialog.Also the tool function should be considered. When the tool is in TRANSFORM_HANDLE_CENTER mode, the cursor keys should move the center of rotation, similar to how the rectangle tool behaves.Let's keep this as is for 2.6 and bump it to the 2.8 milestone.We won't have time to do this for 2.8. Let's just close it as a duplicate to the free transform tool and make sure it's handled properly there.*** This bug has been marked as a duplicate of***Reopening because it's unrelated to the free transform tool per se.	7.0	id=143775	36	False	True	aes	1
id=171940	REOPENED	gtk+	.General	unspecified	Other All	Normal enhancement		2005-03-29 05:58 UTC by	Matthias Clasen	2016-12-02 16:15 UTC (	14 users	Please describe the problem:Having a time machine in the toolkit would be nice for multiple reasons. Wecould go back and fix tree models, and redo DND.Also, it would make all bugs trivially reproducable...Steps to reproduce:Actual results:Expected results:Does this happen every time?Other information:	This will break ABI, but that's probably okay.And we could finally spell "creat" with an "e".Also, we could go forward in time, fetch the code for GTK+ 4.0 and we'll have an ultra-modern toolkit in no-time at all!Note: this bug breaks eclipse.Please make the API for the time machine publically accessible so that apps (and WMs using gtk+ such as Metacity) can make use of it too.gtk_back_to_the_future () ?This is something that should be done with multiple desktop environment's input in the process and is probably more appropriate for fdo rather than gtk. I don't want to have to have both (hypothetical) GTimeMachine and timemaKhine on my systems.any progress on this, Matthias?Would be good if this could be looked at for the hackfest...We gave it a try. Some of us wrote a time machine and were testing it, but they disappeared. We're waiting a few years for them to get back (or is that forward?) to the hackfest.Okay this bug is NEEDINFO for quite some time now. Can we close this one? -.-Its only been NEEDINFO for some time if you don't have GtkTimemachine installed. For those of us with it installed, its only been NEEDINFO for about 2 and a half seconds.So, that said, I think it should remain open.Oh, I actually did have a timemachine back then. I actually even used it to see that it'd be NEEDINFO in the future (that was right now back then)!Apparently, I can see now that it's not NEEDINFO in the (next) future anymore, so I'll just leave it as it is.Note: Introspection should be supported as well so that it can be bound for Python or JavaScript easily.What scientific breakthrough has obsoleted the time machine? Is it something to do with string theory?If we decide to rewrite this before the time travellers with the initial code dump come back, we should consider looking into using faster-than-light neutrinos.As discussed at the summit, Ryan's new GDateTime stuff is accurate to historical data accumulated in the 1600s. It might take a little bit longer, but we're finally making progress!I'm pretty sure we get this for free on systemd with the OnCalendar= specifier in unit files.Ah, but wouldn't it require integrating a web-compliant just-in-time (so to speak) "time compression" engine to add time at the end of the day? Since GtkHTML is essentially dead (even "Evolution" itself has switched to WebKit now...) and Mozilla/Firefox did not want to handle it in Gecko/XULrunner (see), we might have to integrate WebKit into GTK+. It should be trivial.We just have to be careful about WebKit's JavaScriptCore, from a security standpoint: it could be a vector for some heisenbugs. We don't want to accidentally hack too much time, or we could end up in the goddamned Viking Age.Anyway, integrating the Web should make us all future-proof, at least.Just realized how badly we need this for GNOME Calendar ()...Not sure if systemd's "OnCalendar=" specifier would be useful once we put it"on GNOME Calendar"...	20.0	id=123906	14	False	True	damon	1
id=674039	REOPENED	gnome-boxes	general	unspecified	Other Linux	Normal enhancement	GNOME Boxes maintainer(s)	2012-04-13 11:24 UTC by	James Cape	2016-09-13 20:11 UTC (	10 users	What it says on the tin :-)	I wrote a simple freerdp gtk widget, which should be easy to add to BoxesWe would be glad to receive some help here.I'm afraid this is unlikely to happen unless I receive patches. I don't like bugs open forever so closing this.(In reply to Zeeshan Ali (Khattak) from)it's still within the scope of the project, and thus should be tracked and discussed somewhere. Furthermore, having open gnome-love bug helps too. You should reconsider keeping RFE bugs open if they are valid goals(In reply to Marc-Andre Lureau from)This is "would be nice to have" and I personally have no interest in implementing it even if I had the time. Noone is stopping anyone from discussing it (even if it's closed).BTW, I'll retain this policy for all feature requests that aren't in any way critical, have no one providing patches for and bug about it has been open for way too long without any discussion.If there is going to be new interest in the bug in question, people will file it again (or re-open the existing one) and then I can re-consider and re-open. Two people showing interest isn't enough if they don't have time to help out. :)gnome-love is for trivial bugs for new contributors, this hardly qualifies.***has been marked as a duplicate of this bug. ***So apparently we need this feature to be actually be able to completely drop Vinagre. Thanks to Michael Catanzaro for pointing that out. Re-opening..We don't really; it would be ***REALLY NICE*** for Boxes to support RDP as I think remoting is an important feature and RDP is arguably far important than VNC, but vinagre has never been in core (so there is nothing to drop) and I support adding Boxes to core regardless.I've started some more detailed comparisons of various remote access clients here:Here is a quick list of features I find in remmina for rdp:- scaling- quality levels- color depth- folder sharing- sound forwarding- printer sharing- smartcard forwarding- clipboard support- authenticationPresumably, most of this is just frontend for freerdp features.	9.0	id=749442	5	False	False	richard	1
id=386957	REOPENED	f-spot	General	CVS	Other All	Normal enhancement	F-spot maintainers	2006-12-17 21:52 UTC by	Paul Betts	2011-03-04 04:11 UTC (	6 users	Please describe the problem:Rotating a picture in F-Spot doesn't seem to take when it is exported to Flickr, I have to manually re-rotate them allSteps to reproduce:1. Import a photo that needs to be rotated2. Rotate the photo in F-Spot3. Export to a Flickr accountActual results:The photo is not rotatedExpected results:The photo should look as it does in F-SpotDoes this happen every time?YesOther information:The red-eye reduction is being exported to Flickr, so it can't just be exporting the original unedited file	Did you check the "autorotate" checkbox when you exported your pictures. If you do so, the photos should be rotated in flickr also, i think.Flickr doesn't handle the 'Orientation' flag set by f-spot. That's why your pictures appears unrotated. As Thomas said, check the 'Autorotate' checkbox and f-spot will work around the mis-functionality in Flickr.I'm closing this bug, but don't hesitate to re-open if something still goes wrong with the 'Autorotate' button checked.I have no "Autorotate" checkbox; only "Strip Metadata", "Resize", and "Export Tags". I compiled from CVS, is this an optional feature and I was missing an optional compile dependency?(Sorry about the Bugzilla noise, accidentally reopened it)Leave it open if you don't have the checkboxflickr itself has an autorotate option, the current f-sot export dialog doesn't offer this as a local option although it would be trivial to add.Ok, so in Flickr I made sure the auto-rotate option is set, and in F-Spot I made sure the "Write Metadata to files" is checked; I tried importing today and it didn't work. Perhaps an "Explicitly rotate pictures" option could be added but it'd be better if we could figure out why Flickr isn't picking up the orientation fieldAs far as I can tell, the orientation EXIF field is only sometimes set when I rotate my pictures, even with the "write metadata to files" option enabled.Attached is two photographs that you can test. Rotating the "Aruba" picture correctly sets the orientation field, and so is honoured by Flickr. The "tree" photograph from my camera, however, does not have its orientation field set.Try turning both of these pictures upside down, then either checking the files in your library or exporting the images to a folder (make sure Autorotate is disabled in the latter case). You'll notice that the orientation field has only been modified in "Aruba".Enjoy debugging this one!Guh, 1MB limit...alex, can you attach a screen capture of an open metadata dialog for the image that isn't working correctly?Paul, same goes for you. I suspect failed images have an Orientation field in the Thumbnail directory which is confusing flickr.actually cut&pasting the text would probably be sufficientYour suspicions are correct.The Orientation field in the "Image Directory" changes to, e.g. "right - top", the one in the "Extended Metadata" changes to "RightTop", but the one in the Thumbnail Directory remains as "top - left".The working images don't have this.Image DirectoryManufacturer FUJIFILMModel FinePix2650 Orientation right - topx-Resolution 72.00y-Resolution 72.00Resolution Unit InchSoftware f-spot version 0.2.1Date and Time 2007:01:23 13:13:56YCbCr Positioning co-sitedCopyright [None] (Photographer) - (Editor)Thumbnail DirectoryCompression JPEG compressionOrientation right - topx-Resolution 72.00y-Resolution 72.00Resolution Unit InchYCbCr Positioning co-sitedExif DirectoryExposure Time 1/60 sec.FNumber f/3.5ExposureProgram Normal programISO Speed Ratings 100In F-Spot, this photo is rotated, but on the metadata preview it's not rotated. I have "Write Metadata to file" checked. I want to note though that the photo export to Flickr for me doesn't rotate _any_ of the files, it's not only certain files.I'm already building F-Spot from svn on one of my machines, I don't mind trying to get some extra information; let me know if I can help!Paul, there's an option on flickr for autorotating. as per latest comment, you probably didn't.am closing the bug, reopen if the problem is still there with the flickr option checkedThis issue bit me when uploading my FOSDEM photos from my Linux netbook; I had to manually go through and rotate dozens of images after discovering half my uploads were broken.I'd recommend reopening this; EXIF rotation is "magic" stuff, and an end-user can't reasonably be expected to know they need to go look for an obscure non-default option in their flickr settings.I've been a flickr pro user since 2005, and never encountered this problem using other uploader assistants (such as flickrexport for iPhoto on my Mac) -- I only found out about this option by coming to the Gnome Bugzilla and searching for *resolved* F-Spot bug reports about flickr... Aunt Tillie definitely isn't going to find it. :)This can be considered this an evangelism bug -- the broken rotation was the biggest disappointment in my first serious use of F-Spot, and it could easily turn off a newbie entirely.If it's necessary to do a transparent rotation before upload so the EXIF rotation isn't needed, that's a much better option IMHO than having a high likelihood of rotation failure in default conditions.***has been marked as a duplicate of this bug. ***	17.0	id=244696	25	True	False	gerardo	1
id=749442	REOPENED	gnome-software	General	3.16.x	Other Linux	Normal enhancement	GNOME Software maintainer(s)	2015-05-15 16:32 UTC by	Bastien Nocera	2016-04-21 12:32 UTC (	1 user	When the list of updates has been gathered, and if automatic downloading of updates is turned on, gnome-software should start downloading immediately in the background.That means that even if the user is checking out the content of the updates, the packages will already further in the download than if the download didn't start in the background.The OSX App Store does this as well, making updates (or rather, the download part) feel faster than they actually are.	So this conflicts with Allans requirement that we only show already-downloaded updates in the updates panel. Sorry.That might be why updates feel sluggish and/or outdated. I always feel that PackageKit is showing me old information, feeling the need to click "refresh" whenever I go to the Updates page.In fact, you could do both, which is what the MacOS X App Store does. It shows both the list of updates to be installed, the updates it installed recently, and a banner that shows it's checking for updates.As another case point, I have booted a tablet I don't use often, with Fedora 23 on it, and that says:"Software is up to dateLast checked: 23 november 2015"Then, after a while:"Software is up to dateLast checked: 14:30"At this point I need to press the refresh button for it to download the 6 months of updates.	4.0	id=387779	16	False	True	neota	1
id=244696	REOPENED	evolution	Mailer	2.24.x (obsolete)	Other All	Normal enhancement		2003-06-13 07:07 UTC by	Björn Torkelsson	2013-04-07 01:21 UTC (	2 users	Package: EvolutionPriority: NormalVersion: GNOME2.2.2 1.4.0os_details: Ximian, Inc.Synopsis: filters with pipe to shell only works when the message are copied to another folderBugzilla-Product: EvolutionBugzilla-Component: MailerDescription:I created a filter that pipes a message to a shell command, depending onthe value of the Content-Type header. The command I pipe the mail tojust does: sed -e 's/charset=unknown-8bit/charset=iso-8859-1/g'However unless I also move or copy the message to another folder, theheader is not rewritten.Setting qa contact to the default for this product. This bug either had no qa contact or an invalid one.	uh, yea... think of it this way:evo pipes the message to your shell script and reads it back in fromyour scripts stdout for further processing... 'cept you don't don'tsave it to any folder, thus how can you expect any changes to besaved? :-)Sure, but can then a respool action be implemented? I.e a way tomove/copy the mail message to the same folder as it was coming from.adding "filters" keywordcurrently evolution can filter on the return value only - there is nopossibility to alter the message by filters.I'm not sure I'm ready to rule this out. If we can detect duplicate messages then surely we can detect when the message has been altered and append the modified copy to the current folder.***has been marked as a duplicate of this bug. ***	6.0	id=505578	6	False	True	nath	1
id=505578	REOPENED	gthumb	general	2.10.x	Other Linux	Normal enhancement	Paolo Bacchilega	2007-12-25 15:18 UTC by	Paolo Benvenuto	2015-12-19 10:56 UTC (	1 user	I'm see that the quality that gthumb propose for saving jpg images is the last quality set. For example, if you save an image with 90% quality, all subsequent save will have that default value.I think it would be better to do the way gimp does, detecting the actual jpg quality and saving with that quality.Other alternative will be to let the user decide whether saving with last quality set or with current cuality. A gconf option, if not a prefereces option, could permit to choose between the two behaviour.	That is something I would also like to see.Marking as obsolete, as the 2.x version are no longer supported.Please feel free to reopen this bug report if it describes a problem that still occurs with a current version of gThumb (currently 3.4.1).Detecting actual jpg quality keeps being a useful enhancement, because actual behaviour gives possible data losses, if the quality set in preferences is worst than the actual quality of the image.	3.0	id=171940	27	False	True	jrb	1
id=751409	REOPENED	gtk+	Class: GtkStyleContext	3.17.x	Other Linux	Normal enhancement		2015-06-23 20:04 UTC by	Cosimo Cecchi	2016-06-20 20:46 UTC (	6 users	When a custom style provider is added through the gtk_style_context_add_provider() API, the style is not propagated to children of that style - only to subelements, since they share the same style context.This is how gtk_style_context_add_provider() is documented to work, but it's not very intuitive, considering that all the other styles propagate according to CSS rules.After talking about this on IRC with Benjamin, he suggested that a new API is added, since gtk_style_context_add_provider() is used in many other places and we probably don't want to change that behavior now.	+1 From Eclipse/SWT side. It would really help.Some elements can't be accessed without this at present (e.g in combo box)***has been marked as a duplicate of this bug. ***Benjamin and I talked about this at the GTK hackfest. First of all it needs to be possible for widgets' style contexts to be able to take their styles from more than two GtkCssCascades (see gtkstylecontext.c). (A GtkCssCascade is a list of GtkCssProviders with their corresponding priorities.) Currently they can be affected by cascades of CSS providers added with gtk_style_context_add_provider_for_screen(), and cascades of providers added to the style context directly with gtk_style_context_add_provider(). This limit of two cascades is currently hardcoded.Extending this requires not just three cascades but N cascades, since a style context can be affected by any number of parent contexts' providers. The patch I'm about to post should lay this groundwork.After that, there will need to be a second level of custom cascade added to GtkStyleContext, besides the default screen cascade and the custom cascade that gtk_style_context_add_provider() adds to.This will require some careful thinking about what happens when providers are added or removed, so that cascades always inherit from the correct parent cascades.Createdstyle cascade: Allow cascades with more ancestorsPreviously a style cascade's parent could not have a parent itself. Thatrepresented the two levels at which you could add a style provider: atthe screen level, with gtk_style_context_add_provider_for_screen(), andat the style context level, with gtk_style_context_add_provider().This commit changes no functionality, but this change will be necessaryfor adding style providers in the future that apply to a subtree of thewidget tree. It relaxes the requirement that a style cascade's parentmust not have a parent, since in the future a style context may beaffected by any number of parent widgets' style contexts.Comment onstyle cascade: Allow cascades with more ancestorsI'd have split that into 2 commits - one for he tests and one for the code - but that's just nitpicking.pushed as- style cascade: Allow cascades with more ancestorsThanks - Sorry I didn't push it earlier, I discovered I did not have my SSH key on the machine I brought to the hackfest.Going to reopen this though, since that was just the preliminary work.	7.0	id=738475	31	False	True	reinouts	1
id=773428	REOPENED	gxml	general	0.12.x	Other Linux	Normal enhancement	GXml maintainer(s)	2016-10-24 15:27 UTC by	Adrià Arrufat	2016-10-26 19:59 UTC (	2 users	CreatedError log when trying to build the provided example.valaHi! I'd like to parse and create some XML documents in Vala using GXml.However, I get this error when I try the following line:```error: `GXml.Document' is not a class, struct, or error codeDocument doc = new Document ();```So I tried to build the example.vala provided in the source of gxml-0.12 and I am attaching the errors I found.I am compiling with vala 0.34.2:`valac --pkg gxml-0.12 example.vala`BTW, I am able to parse XML files with libxml.Thanks in advance.Adrià Arrufat	I can't find your example.vala, sorry, but the main problem is that you should use a class not an interface to create XML documents. This is:Create a GDocument or a TDocument, to start on. First one uses libxml2 as data structure, second use pure GObject classes.Then you should use:var d = new GDocument ();Then you can use two different but compatible API, one is the properties and methods in interface Document or DomDocument.If you want to know what kind of methods and properties are available, see at:But I recommend you should enable documentation in your PC and use DevHelp to see a formatted and updated documentation for GXml-0.12, using:./configure --prefix=????? --enable-docsFeel free to file more bugs to request features or documentation.Thank you for the quick answer, I'll try that later on.You can find the example I was referring to in gxml-0.12.0.tar.xz by decompressing it:gxml-0.12.0.tar.xz/gxml-0.12.0/examples/vala/example.valaThat is what I used to get started with gxml and it is using the line I mentioned above: `Document doc = new Document ();`I need to update that examples to latest API.I've changed this bug's title to follow up required changes in examples.Feel free to add any comment about them.	4.0	id=754114	9	False	False	jo.y.venn	1
id=306713	REOPENED	GIMP	Plugins	unspecified	Other All	Normal enhancement	GIMP Bugs	2005-06-06 20:27 UTC by	Dave Neary	2014-04-20 05:40 UTC (	3 users	A GIMP ressource distribution system should allow for the moderated edition ofcontent, similar to the Firefox plug-in repositories and the GIMP plug-in reistry.It should also integrate with the GIMP interface.The ressource distribution system should store brushes, patterns, gradients,scripts in all the GIMP's scripting langauges, and plug-ins.The framework used will ideally be sufficiently general to be reusable in otherapplications.	The Google summer of code proposal to develop a system for packaging PanelApplets may also be of interestThis is actually being worked on in Google Summer of Code 2006.Closing all Google bounty bugs.Closing all Google bounty bugs.This is a SoC 2006 project for the GIMP, and a long-standing feature request.Reopening.If we do this, we should seriously consider.	6.0	id=773428	7	False	True	esodan	1
id=123906	REOPENED	glade	general	git master	Other Linux	Normal enhancement	Glade 3 Maintainers	2003-10-05 18:05 UTC by	Sebastien Bacher	2016-04-06 12:13 UTC (	4 users	This bug was originally reported in the Debian BTS:"Glade does not support creating GtkPlug windows; it'd be useful if it did."	I'm not adding new features to glade-2 since glade-3 is being written.ok, so let's reassign this bug to that product =)Glade can also add support for GtkSocket widgets... it shouldnt be too hardas GtkSocket is essentially a GtkWindow with some exceptions (we can justuse a GtkWindow in the runtime instead of a real GtkSocket).Now that GtkPlug and GtkSocket have become explicitly X11-only, maybe this is a lower priority?Right this is not really a high priority.Also I forgot to mention, as a note whenever this get's implemented.The same logic applied for GtkUnixPrint widgets/catalog needs tobe applied here, plug/socket should go into a separate "x11 only" catalog and support for it should be included conditionally (a matter of detecting if gtk_plug/socket_get_type() symbols are available in the GTK+ library from the Glade configure scripts).***has been marked as a duplicate of this bug. ***	6.0	id=742149	35	False	False	a9016009	1
id=563653	REOPENED	nemiver	general	0.6.x	Other Linux	Normal enhancement	Nemiver maintainers	2008-12-08 08:40 UTC by	deivid	2016-12-01 22:19 UTC (	2 users	I would like to see this feature in Nemiver, as it is the only thing in which ddd is better.	This is super vague and not really helpful. Can you describe more precisely what you expect? Maybe attach mockups or screenshots of the feature in ddd?Hei,Wow, better later than never... :) I don't remember anything about this (bad) bug report. Please close this.Feature request, I meant.Thanks for the quick reply, closing.What is something like that you meant?Yes, I'm pretty sure that's why I meant, since I used to love those graphs when I used ddd.	6.0	id=306713	9	False	False	schumaml	1
id=742149	REOPENED	gnome-settings-daemon	color	unspecified	Other Linux	Normal enhancement	Richard Hughes	2014-12-31 12:17 UTC by	Benjamin Berg	2017-02-15 02:31 UTC (	10 users	CreatedThe initial patchRedshift is a software which changes the color temperature of the connected displays based on the current light conditions. It uses the computers location to calculate the sun rise/set times and lowers the color temperature from the white point (6500K) down to e.g. 3700K at night as most artificial light sources have a lower color temperature.Both redshift and the color management system need to adjust the gamma curve. This is why I think that it makes sense to integrate such a feature into the color plugin of gnome-settings-daemon.The attached patch is an initial draft for such a feature. I have not implemented any brightness change support (the original redshift has such a feature). The general idea is to just add a couple of settings keys which will be managed by a small gnome-shell extension.This patch adds two settings keys to org.gnome.settings-daemon.plugins.color: * adjust-color-temperature: Whether the color temperature of attached monitors should be adjusted * color-temperature: The requrested color temperature. 6500K is an identity transform.I copied the adjustment table from the original redshift implementation.Any thoughts?	The original redshift implementation is atOh, with this patch some more changes in gnome-control-center might be required to force a linear gamma curve during display calibration.Another thing I failed to mention is that I tried to get the white point from lcms2. This did not work for me for two reasons: * The neutral point (1,1,1) in sRGB had a color temperature of D50/5000K in my tests. But as I read the standard it should be at 6504 Kelvin. * It would not return valid sRGB colors below 4000KAn experimental extension is now available at. It is a bit broken (i.e. sometimes the geoclue connection does not work), but it does work fine for me already.It either uses geoclue2 + gweather to get sunrise/sunset and calculate a color temperature from that, or it allows the user to slide the color temperature between night and day.So, something we also want to consider is for ambient light sensors; so we now have four things wanting to control the backlight and gamma curves:* User brightness level (brightness)* Selected color profile (RGB, perhaps brightness)* Redshift (RGB)* Ambient light sensor (brightness, perhaps RGB)We also want to consider non-primary panels in the future, of which the color profile might also be different. Benjamin, if you don't have a ALS sensor in your laptop and want a free ColorHugALS device, send me your address on email and I'll get one to you when they're ready.RichardHey, actually just bought the device :)So, I simply updated the patch to instead read an RGB white point from gsettings. What I am now wondering about is what the colorhug ASL actually gives me, as it is reporting an insanely large values for red in the UI.Now that Gnome got automatic brightness adjustment, it would also be great to integrate functionality like redshift, or f.lux in the standard system. It's already in Windows and Apple. I think it really helps for late work sessions.Redshift is great but is often behind on the updating to new gnome versions making it unusable. F.lux works really well, but you need to know about it to add the repo. I figure it would be great to include this in Gnome as standard.We wouldn't be able to implement this in gnome-settings-daemon in Wayland, so duplicating the bug against the gnome-shell bug asking the same feature.*** This bug has been marked as a duplicate of***CreatedPatch using libcolordThis is using libcolord to generate the RGB factors rather than hardcoding a table directly.Review of:How does this interact with the power plugin's automatic brightness, or even manual brightness?::: plugins/color/gsd-color-manager.c@@ +148,3 @@+ if (manager->priv->bus_cancellable != NULL) {+ g_cancellable_cancel (manager->priv->bus_cancellable);+ g_object_unref (manager->priv->bus_cancellable);g_clear_object();@@ +153,3 @@++ if (manager->priv->introspection_data) {+ g_dbus_node_info_unref (manager->priv->introspection_data);g_clear_pointer();@@ +160,3 @@++ if (manager->priv->name_id != 0)+ g_bus_unown_name (manager->priv->name_id);set to 0 as well.@@ +170,3 @@ +static void+handle_method_call (GDBusConnection *connection,This is a no-op, remove it.@@ +214,3 @@+ g_set_error (error, G_DBUS_ERROR, G_DBUS_ERROR_FAILED,+ "Failed to get property: %s", property_name);+ }linefeed afterwards@@ +229,3 @@+ GsdColorManager *manager = GSD_COLOR_MANAGER (user_data);+ GsdColorManagerPrivate *priv = manager->priv;+ gint32 temperature;Move to within the branch that uses it.@@ +239,3 @@+ if (g_strcmp0 (property_name, "Temperature") == 0) {+ g_variant_get (value, "i", &temperature);+ if (temperature < 1000 || temperature > 10000) {Why? This should be a proper dbus error instead, that mentions that the error is due to invalid args.Should move the hard-coded values to constants (#defines) as well.@@ +255,3 @@+static const GDBusInterfaceVTable interface_vtable =+{+ handle_method_call,Should be NULL.@@ +282,3 @@++ infos = priv->introspection_data->interfaces;+ for (i = 0; infos[i] != NULL; i++) {Does infos ever contain more than 1 entry? No need for the loop there.::: plugins/color/gsd-color-state.c@@ +1490,3 @@ NULL); + /* default color temperature (==unity) */unity? This might need a better explanation.::: plugins/color/gsd-color-state.h@@ +50,3 @@ void gsd_color_state_stop (GsdColorState *state);+void gsd_color_state_set_temperature (GsdColorState *state,+ gint temperature);Why is this not a guint?You only allow a minimum of 1000 for the value, so you can use 0 as an error.CreatedPatch using colord v2(In reply to Bastien Nocera from)It doesn't, and can't. Doing brightness using the gamma table would result in horrible posterisation of images, and using the hardware backlight level would only work for internal panels. We're not really trying to limit the brightness at all with the Redshift functionality, just the display color temperature.All of the other review comments: agreed, and fixed, thanks for the speedy review.Review of:::: plugins/color/gsd-color-manager.c@@ +154,3 @@+ }++ if (manager->priv->introspection_data) {No, just use g_clear_pointer, it does the NULL check.@@ +192,3 @@++ if (g_strcmp0 (property_name, "Temperature") == 0) {+ gint temperature;gint32@@ +230,3 @@+ G_IO_ERROR,+ G_IO_ERROR_INVALID_ARGUMENT,+ "%" G_GUINT32_FORMAT "K is smaller than "On one line.@@ +239,3 @@+ G_IO_ERROR,+ G_IO_ERROR_INVALID_ARGUMENT,+ "%" G_GUINT32_FORMAT "K is larger than "Ditto.@@ +290,3 @@+ GSD_COLOR_DBUS_NAME,+ G_BUS_NAME_OWNER_FLAGS_NONE,+ NULL,It will need to handle the name being acquired and lost as well.This is especially important as you'll need to avoid poking at anything until you own the name.@@ +299,3 @@+register_manager_dbus (GsdColorManager *manager)+{+ GsdColorManagerPrivate *priv = manager->priv;Add a linefeed here.::: plugins/color/gsd-color-state.h@@ +50,3 @@ void gsd_color_state_stop (GsdColorState *state);+void gsd_color_state_set_temperature (GsdColorState *state,+ guint temperature);Why do you get an int32 from D-Bus but pass a guint? Wouldn't it be better to use a uint32 in the D-Bus API? ("u" type)Createdv3, with fixesThis does the exit-on-name-lost as requested which means you can't have more than one instance running.Review of:::: plugins/color/gsd-color-manager.c@@ +191,3 @@+ gint temperature;+ temperature = gsd_color_state_get_temperature (priv->state);+ retval = g_variant_new_int32 (temperature);uint32.@@ +222,3 @@+ if (g_strcmp0 (property_name, "Temperature") == 0) {+ guint32 temperature;+ g_variant_get (value, "i", &temperature);I'm guessing this wasn't tested ;)::: plugins/color/gsd-color-state.c@@ +1491,3 @@ + /* default color temperature of D65 is a RGB value of [1.0,1.0,1.0] */+ priv->color_temperature = 6500;make that a define somewhere?::: plugins/color/gsd-color-state.h@@ +50,3 @@ void gsd_color_state_stop (GsdColorState *state);+void gsd_color_state_set_temperature (GsdColorState *state,+ guint temperature);Would have been better to ensure a guint32, but that's good enough, most likely.Createdv4, with fixesMea culpa. New patch with issues fixed. This time tested too. ThanksReview of:Looks good otherwise.::: plugins/color/gsd-color-manager.c@@ +176,3 @@+{+ GVariant *retval = NULL;+ GsdColorManager *manager = GSD_COLOR_MANAGER (user_data);No need for the cast here.@@ +208,3 @@+ GError **error, gpointer user_data)+{+ GsdColorManager *manager = GSD_COLOR_MANAGER (user_data);Nor here.::: plugins/color/gsd-color-state.c@@ +174,3 @@ +void+gsd_color_state_set_temperature (GsdColorState *state, guint temperature)This...@@ +182,3 @@++guint+gsd_color_state_get_temperature (GsdColorState *state)...and this are semi-public APIs, can you please add guards to it?@@ +408,3 @@ + /* get the color temperature */+ cd_color_get_blackbody_rgb (color_temperature, &temp);Do you need to check for errors here?@@ +1490,3 @@ NULL); + /* default color temperature is RGB value of [1.0,1.0,1.0] */Move the comment to where you define the constant.Comment onv4, with fixesGreat, thanks!Createdadd extra property for the shellThis makes the shell UI easy to implement without hardcoding 6500K = inactive.Review of:Looks fine otherwise.::: plugins/color/gsd-natural-light.c@@ +44,3 @@ gdouble cached_sunset; gdouble cached_temperature;+ gboolean cached_active;This isn't a cache. Just "active" would do fine.Can you please not post patches in closed bugs in the future. Learn to use git-bz to open your bugs with patches.Comment onThe initial patchMarking as needs-work as we've updated it.	21.0	id=563653	7	False	False	afranke	1
id=738475	REOPENED	epiphany	General	3.14.x (obsolete)	Other Linux	Normal enhancement	Michael Catanzaro	2014-10-13 18:45 UTC by	Dylan Smith	2017-02-12 03:41 UTC (	6 users	CreatedView Source epiphany 3.14I don't know when this started happening, but just like the title says. View Source only duplicates the current open tab.Steps to reproduce:1. Open epiphany2. Click "View Source" in the application menu.Reproducible:AlwaysDetails:epiphany-3.14.0-1.fc21.x86_64webkitgtk4-2.6.0-2.fc21.x86_64	Confirmed, I can reproduce this.Yes, this is a regression in 3.14 :-( The view source mode was removed from WebKit. This should be easy to fix, though, by implementing a custom URI scheme and using a light js library for syntax highlighting like rainbow.Right. So after a lot of discussion gEdit no longer handles View Source and now we‘re back at square 1! Can't we just re-instate gEdit?There's a setting for that, internal-view-source, disable it and you will see the source in the default editor.Well if it's that easy to work around this bug, why isn't it set by default (at least for as long there's no better solution)?CreatedAdd workaround for missing view source modeWe'll open the source in the default text editor insteadThe problem we've discussed with Rainbow is that it's Apache 2.0, which is incompatible with GPLv2. I think we'd need to relicense Epiphany (as a whole, not necessarily individual source files) from GPLv2+ to GPLv3+. I'm all in favor of that and it's easy (since each file is already GPLv2+, we don't need anybody's permission to make the change), we just have to agree it's something we want to do.(In reply to)Good question :-P You are indeed right.Review of:::: src/window-commands.c@@ +1395,3 @@ address = ephy_web_view_get_address (ephy_embed_get_web_view (embed)); +/* Disabled due toPlease use #if 0 instead of a comment. And start the comment with FIXME: so that greping FIXME will show this line.(In reply to)Could you propose it in the mailing list?***has been marked as a duplicate of this bug. ***(In reply to)Comment onAdd workaround for missing view source modepushed as- Add workaround for missing view source modeOK I have this implemented. I'm pushing a version without syntax highlighting to master, and the version with syntax highlighting to wip/rainbowjs.I don't think we're going to be able to merge the Rainbow version. Unfortunately it is slow... very, very, very slow. It can handle stuff like example.com, but e.g. www.gnome.org takes 45 seconds to highlight, git.gnome.org takes 2 minutes and 45 seconds, and I'm not patient enough to see how long it takes on github.com. So that's clearly not acceptable (GtkSourceView can do this instantaneously!)(In reply to Michael Catanzaro from)Actually I'll let them sit in Bugzilla for a little while; I don't plan to come back to this immediately.CreatedAdd URI handler for view source modeFor now, it just displays the original page with all the subresourcesremoved. Not very useful! But the next step is to make it display thepage's source, and that will be useful indeed.CreatedRelicense to GPLv3+So we don't need a legal review to deterimine if we can use RainbowAlso becauseCreatedUse Rainbow for syntax highlighting(In reply to Michael Catanzaro from)Ah, I squashed the next commit into it, let's try again with an accurate commit message.CreatedAdd URI handler for view source modeSo we don't have to open these in gedit anymore.Disadvantage: the URL that gets displayed is actually pulled from theserver again, so it might not actually be what's displayed in yourbrowser. This might be undesirable.CreatedRelicense to GPLv3+So we don't need a legal review to deterimine if we can use RainbowAlso becauseCreatedUse Rainbow for syntax highlighting(In reply to Michael Catanzaro from)I tried Prism instead (prismjs.com) and it's several orders of magnitude faster, and really pretty, so let's use that instead.Comment onRelicense to GPLv3+I'm still inclined to do this, but it's a separate issue now.CreatedAdd URI handler for view source modeSo we don't have to open these in gedit anymore.Disadvantage: the URL that gets displayed is actually pulled from theserver again, so it might not actually be what's displayed in yourbrowser. This might be undesirable.CreatedAdd Prism syntax highlighting in view source modeIt's MIT licensed. Thanks Prism developers!Unfortunately since the horizontal scrollbar is at the bottom of the <pre> area, it's hard for users to realize it's even possible to scroll horizontally. :(The following fixes have been pushed:8a3c6b1 view-source-handler: Get content from existing embed if possible8968687 Add Prism syntax highlighting in view source moded6d9d25 Add URI handler for view source modeCreatedview-source-handler: Get content from existing embed if possibleInstead of always hitting the network to download the page again, firsttry to get the source from an existing web view that matches the URI tobe displayed. Be careful to ignore the web view if it has a deferredload or hasn't finished loading yet.It's not perfect, in that it could get the source code from the wrongtab if two different tabs are displaying the same URI, but let notperfect be the enemy of the good.CreatedAdd Prism syntax highlighting in view source modeIt's MIT licensed. Thanks Prism developers!CreatedAdd URI handler for view source modeSo we don't have to open these in gedit anymore.Disadvantage: the URL that gets displayed is actually pulled from theserver again, so it might not actually be what's displayed in yourbrowser. This might be undesirable.Reopening. Reverted this in.I pushed a sidebranch with this code restored:That would be a good starting place for anybody looking to work on this.	33.0	id=144762	15	False	True	calum.benson	1
id=144762	REOPENED	gnome-panel	run dialog	unspecified	Other Linux	Normal enhancement	Panel Maintainers	2004-06-21 16:27 UTC by	Calum Benson	2009-12-20 16:44 UTC (	5 users	It would be cool if the text field in the Run Applications dialog recognisedApplications menu names as well as binary names. So I could type either "WebBrowser" or "epiphany", with completionkicking in both cases at the appropriate point.Not quite sure how you'd show application names in the text field/historydropdown, though... if you left them as-is, users might get the impression thatthey were something they could type into any old terminal (and in an ideal worldthey would be). But if you magically substituted application menu names withbinary names in the history list, they'd probably just get confused.	***has been marked as a duplicate of this bug. ***Can this be closed due to the removal of run applications?Yeah, I suppose so. (Much as I'm going to miss it...)"Run applications" was not removed. The menu item was remove from the menu, butif you do Alt+F2, it's still there :-)Additionally, it would be great if the dialog could update the knownapplications list while typing.For example, I could type "Tex" and the only "known apps" still displayed wouldbe those matching *Tex*.Lucas: can you open another bug for this? (and it sounds like a good idea, so Idon't want to lose it :-))	6.0	id=771433	5	False	False	csoriano	1
id=71087	REOPENED	libgda	PostgreSQL provider	unspecified	Other other	Normal enhancement		2002-02-10 09:17 UTC by	Jean-Michel POURE	2007-01-24 07:59 UTC (	2 users	Since 7.2, PostgreSQL supports CREATE OR REPLACE FUNCTION to allowsfunction edition. PostgreSQL does not support CREATE OR REPLACE VIEW ORCREATE OR REPLACE TRIGGER which will only be added in 7.3.Therefore, modifying a view or a trigger is tedious and boring : you needto drop it before recreating it. If the new definition is mistaken, youloose the view/trigger.Using libgda it should be possible to virtually modify a view or a triggerusing DROP/CREATE in a single transaction.	Well, MySQL doesn't support TRIGGERS... Why don't we make libgda tosupport them? :-)What I mean is that this question is PostgreSQL specific and may bethe programmer who is going to create a trigger should be aware of itand do the workaound by himself.Do you agree with me?Sorry, I don't consider MySQL to be a relevant database. First of all, it is moving very slow because MySQL is not supported by a community of free developpers. MySQL marketing team keeps on releasing false information about MySQL "would-be" features. Every serious developper knows MySQL does not comply with ACID rules. Their transaction system is not reliable. If libgda can access triggers to create, alter, drop and disable them, it would be nice. Triggers are used to run server-side functions. If you give access to functions, you need triggers as well. CREATE OR REPLACE TRIGGER will not be added to PostgreSQL 7.3, because the hacker team consider that a trigger can be dropped and recreated. It is the IDE job to allow trigger modification. I played around with Mergeant. Nice work! Cheers, Jean-MichelReopening since I don't see what information is being missed here.libgda already has other API that is only supported on some backends, so that alone should not be a problem.What exactly is being asked for here? In other words, what API should be added, or what API does not work?I think this type of operation should be added to the GdaServerOperation framework, as it will very easily fit into it.	5.0	id=71087	13	False	True	rodrigo	1
id=586984	REOPENED	gthumb	general	unspecified	Other Linux	Normal enhancement	Paolo Bacchilega	2009-06-25 20:28 UTC by	Paolo Benvenuto	2015-12-19 10:53 UTC (	0 users	Having a sorting method by file name without considering the extension would help to work with mixed type images.	Marking as obsolete, as this was reported for an unspecified / now-unsupported version and no recent activity has occurred. Please feel free to reopen this bug report if it describes a bug that still occurs with a current version of gThumb.Still applies to current version.An enhancement	2.0	id=586984	4	False	False	mjc	1
id=202257	REOPENED	evolution	Mailer	3.4.x (obsolete)	Other other	Normal enhancement		2001-04-20 23:20 UTC by	Dan Winship	2012-08-07 10:12 UTC (	14 users	The sorting of folders within a storage should be configurable.A tree should be alphabetical until the user touches it, and after that,new folders should probably appear at the bottom of the list.This would allow people to group their mail folders separately fromtheir contact folders, for instance, and also to put Inbox/Drafts/Sentat the front and other folders after them, or whatever the user happensto want to do	***has been marked as a duplicate of this bug. ***I'd like to vote for this one. It shouldn't be that hard?***has been marked as a duplicate of this bug. ***I'd like to also see this feature soon.It's very annoying that INBOX is somewhere in middle of looong folderlist.please support this feature.i have a big list of inboxes, i want to sort my important ones to showat the top,i don't want to see at the top the sent/trash/draft which are foldersi don't usually look at.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Inheriting "Blocks bug" from duplicate.updating version number.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***(In reply to)This bug and 351025 touches two different issues.This bug seam to be about ordering folders within an account,is about ordering of the accounts.If you want to kill two birds with one stone, fine by me.Just wanted make things clear***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Enhancement request in OpenSUSE alsoBumping version to a stable release.***has been marked as a duplicate of this bug. ***Any proposals for how the user would go about reordering folders? Drag and drop is out, because that metaphor is already used for moving folders to other folders and we can't overload it. Only thing I can think of is to convert the folder subscriptions dialog to a more general "manage your folders" dialog.Firefox bookmarks are re-ordered using d-n-d and seem to be able to manage both dropping a bookmark between two others and dropping one into a further level of folder.If that's not viable, there's already a dialogue for folder subscriptions (on IMAP). Perhaps that could be generalized in some way.The difference is Firefox doesn't kick off a potentially long running network operation if you miss your drop target by a couple pixels. Plus, reordering folders would not be reflected on the server-side, whereas moving a folder into another folder is. Mixing metaphors like that is always a recipe for confusion.Revamping the subscription dialog is sounding like the way to go. That thing needs some love anyway.Point taken. I agree that the best way seems to be via the sub dialogue.My bug was marked as a duplicate, but I'm not sure we're talking about the same thing.Thunderbird has a feature where you can right-click on a folder and mark it as a "Favorite." The folder pane cycles between the following:- All folders- Unread folders- Favorite folders- Recent folders- Some other one I forget aboutIn my case, it would be sufficient to have something that ressembles the Search Folders and call it "Favorit Folders" and put them at the top of the account list. In my case, I am not necessarily looking for a general "sort the tree" approach, just a way to make the most commonly used folders more preeminent.I think I have another bug open, though, for sorting accounts only, not folders within accounts.LThere are clearly several ways of achieving much the same desired result: letting the user have some control over how folders are presented in the list. The TB design is useful in some situations and would avoid having to allow general reordering. I think just three alternative views would be enough:- All (including Search folders)- Favourites (i.e. marked as such with a folder property)- Search foldersand really the Favourites view isn't that essential since you can always use Search folders as a standin. Of course a minimalist design could just support Search folders and nothing else, but I'm guessing we don't want to scare away *all* the users :-)Oh! Yeah, that actually works for me. Now, if we could move search folders at the TOP of the list...New proposal:Two folder lists: All and Search. All is the same as the current folder view, Search can be reordered by the user. Since Search folders are entirely local to the client, this shouldn't have any server implications.What do you think about adding a couple tabs beneath the folder tree labelled "All Folders" and "Search Folders"? In the "All Folders" tab you can either right-click on a folder or open the "Folder" menu and select "Add to Search Folders" as a quick and easy way to add the folder to the "Search Folders" tab.Also, I've been toying with the idea of adding a second special search folder called "All Inboxes" which would combine the Inboxes of all your enabled accounts into one view, and would keep itself up-to-date as you add and remove accounts.(In reply to)Presumably the search criteria could then be edited. Would the search folder version have an editable name (I assume so)?However let's not forget that people want to be able to order folders (Search folders in this case) other than lexically, and not just by prepending "aaa-" or whatever to the name.Sure, why not. I'm not a fan of unified inboxes but some people seem to like it. There's also the "Favorite folders" tab a la TBird.However this is all candy. Having just the search folders tab would be a great start.(In reply to)Sure, my thought was it would just be a quick way to create a trivial "Match All" search folder for one particular folder. After that you could rename it, change the criteria, whatever you want.Splitting search folders off into their own tree view means we could play by a different set of rules than the ordinary folder hierarchy. Don't see why search folders couldn't be reorderable.(In reply to)OK. At some later time maybe we can consider a rather more ambitious idea: support "conversations" via easily-defined search folders. Ditto for defining search folders (or even real ones) associated with mailing lists, e.g. it would be nice to be able to post to a list I'm focussed on without having to look up the address or reply to a thread. That's OT for now of course.Go for it :-)***has been marked as a duplicate of this bug. ***Let's do not mix thing together and keep this bug for "Configurable folder tree sorting", especially for sorting folders inside an account (for configurable account sorting is). There should be opened/found a new/other bug report for the unified Inbox (or how would you call it) and those other tabs for folder view, as proposed above.I suppose it's obvious, but anyway, this folder inside an account sorting would work for the level itself, for sibling nodes only. It's natural, I believe.Thinking of it subscription dialog cannot be used for this, because:a) NNTP accounts shows there all folders, not only subscribed and it shows them in a hierarchy, where folder tree is showing them flat.b) exchange accounts are showing in the subscription dialog only public folders, and no user folders.Thus a new dialog for this might be invented. What about Folder->Edit Sort Order... menu option, somewhere below Unsubscribe menu item?This got implemented in Evolution 3.4. Closing as FIXED.(In reply to)No sorry, I read this wrong. Evolution 3.4 allows accounts to be reordered. Folders within an account are shown alphabetically with Inbox at the top.	34.0	id=202257	39	False	True	ettore	1
id=675262	REOPENED	GIMP	General	unspecified	Other All	Normal enhancement	GIMP Bugs	2012-05-01 20:11 UTC by	Albrecht Lohöfener	2015-04-06 00:49 UTC (	4 users	Some cameras create MPO files which contain multiple images.The cameras Fujifilm W1 Finepix Real 3D and Fujifilm W3 Finepix Real 3D for example save the right and the left picture of a 3D picture in a MPO file and the camera Ricoh CX5 saves serial pictures in a MPO file.On this site () there is a sourcecode which splits the MPO file in two or more JPEG files.The idea is to use this code to implement a MPO import filter for gimp which reads a "3D MPO" file of the Fujifilm W1, for example, and loads the right picture as layer 1 and the left picture as layer 2. The advantage of this would be that the right and the left picture are edited simultaneously in the same way.At the moment GIMP only reads the first image of the MPO file.On the GIMP developer mailing list there was a little discussion about this idea of an import filter. Please check the following link:	Do you plan to implement this, or do you know some people who're using this format and would be interested in implementing it? This is the way most new plug-ins are created, whether they'll be included in GIMP or as add-on packages onI use this format with my 3D camera and I know some people that use a 3D camera with this format, too.On the market there is no picture manipulating program which supports this format. The only way to edit those pictures is to split them and to load them separately into a picture manipulating program.Unfortunately I don't have time to implement this but I can help to test the MPO filter.For GIMP it would be a "unique selling point" to support this format.I've looked at the mposplit code mentioned inand found a potential problem:It determines the start offset of the file data of constituent images (which should be two in the stereoscopic case) by searching for SOI ("Start of Image", 0xff 0xd8) immediately followed by APP1 (EXIF data, 0xff 0xe1) which may just work right now, but even the next firmware revision of said cameras might use a different segment, e.g. APP0 (JFIF tag, 0xff 0xe0) which would be more standard-conformant.I think one should take a look at the MPO file format surrounding the JPEG/JFIF data to carve out the constituent images rather than guessing based on JPEG/JFIF segment markers.Albrecht, maybe you could attach an example file in this format to this bug for people who'd want to take a shot at this.Under the following links there are some sample MPO images for the FinePix 3D cameras."FinePix REAL 3D W1""FinePix REAL 3D W3"Today I got a mail from the mposplit.c author. He updated the header of the c-file with the "Revised BSD license" and an appropriate copyright notice. I hope that the mposplit.c is now usable for the MPO import filter.Under the following link there is a PDF file with the MPO file format specification.Maybe it helps to improve the mposplit.c source code. (JFIF tag problem)I think for the first implementation of this filter we can use the original mposplit.c with the JFIF tag problem and improve this later.I started implementing the plug-in. I will be using "mposplit.c" in the plug-in. Will finish it soon!(In reply to)Thats right.Can you suggest me an idea for resolving this? I am working on the plug-in.Thank you, K Sashi Kumar, for creating this plug-in.I'm closing this bugreport now as we have a solution.If there are any bugs, please report them directly at the plugin registry site.(In reply to)Hi K Sashi Kumar, I have developed command line utility which both reads and writes MPO files. The reading is done with more sophisticated way than just searching for SOI. Please let me know if you are going to implement it into your plug-in, otherwise I would create and publish my own. The code is available herePavelIs the plug-in mentioned here part of the default GIMP distro now - or at least in Git master? If not, then this bug should not be marked as fixed.(In reply to Michael Schumacher from)Michael: if you mean the plugin available along mpoutils, then it is most likely not in git, or at least I am not aware of it. And I have no ambitions to be somehow involved in it.I've just created the utility and plug-in since I am using it. I know that there is only few people over the world interested in 3D (stereoscopy). I even don't provide binaries for the plugin, it must be compiled by the user. Moreover, the plugin has at least two problems. It uses gdk_pixbuf to read and write JPEGs, so it can only store RGB images (it fails if the source JPEG images are grayscale, which can happen if you want to create MPO from old stereographs), and the JPEG quality is set to 90% by default and cannot be changed.But if you or somebody want to include it into GIMP core, you ale welcome to use the code.	11.0	id=105895	40	False	False	calum.benson	1
id=105895	REOPENED	gtk+	Widget: GtkTreeView	2.0.x	Other Linux	Normal enhancement		2003-02-12 18:00 UTC by	Brian "netdragon" Bober	2016-08-09 23:59 UTC (	19 users	told me this is an issue with GTK's tree-bindings. On trees in mostapplications on other operating systems, space will expand or collapse atree and enter will choose the selected element.Your keybindings of "+" and "-" are a bit abnormal and I thought youcouldn't navigate the tree without a mouse.	One issue here is that in GNOME, Space is the "do it" shortcut, sofocusing a treeview item and pressing Space should do the same asdouble-clicking that item.For those items where double-clicking would otherwise do nothing,expanding/collapsing seems like a reasonable default, however.I think this would make things inconsistent and confuse users.I don't think there is much to do here ...It confused me having it "+" and "-" because its inconsistant with anyother method I have seen (Win32, Mozilla, etc). In Mozilla and Win32control panel, you use right arrow to expand and enter to select... Iforget where I saw space, but the arrow keys seem to be the standard.The arrow keys are already being used in GtkTreeView to move the focusrectangle over the horizontal axis.Marking AP3 to reflect a11y team's assessment of a11y impact.Apologies for spam... marking as GNOMEVER2.3 so it appears on the official GNOMEbug list :)Discovered we have shift + arrow bindings for expanding/collapsing.I am not sure if we can even implement that 100% right. We can checkif any signal handler has been connected to ::row_activated, and thendecide what to do. But I am not sure how that works with widgetsderived from GtkTreeView (since they might have overriden::row_activated, etc, etc). (Plus I'm still against it since it mightconfuse people).I propose to close this bug as NOTABUG or WONTFIX.Does using the right and left arrows alone expand the list?If you look at the treeview on Windows, right and left arrows (withoutshift) and double-click expand a menu. + and - do nothing. + and - donothing on Mozilla Preferences and Mozilla's tree view acts exactlythe same way as Windows. + and - or shift + and shift - are not GUIbehavior people are accustomed to and people moving to GTK from othersystems will have no clue what to do. I thought you were trying tomake it user friendly for people coming from a Windows or Mac system?Please do whatever is necessary to fix this, even if it can't be donefor a year or two.Space is actually not necessary, since Windows or Mozilla XUL treesdon't accept it (I just realized), but handling:Double clickLeft Arrow (without shift)Right Arrow (without shift)is a must for what people would expect moving from a Windows system.And double clicking a + item in a treeview normally (as far as I'veever seen it on other systems) expands the list, so why isn't gtkdoing the same?No, it doesn't. My comment from May 27 states that the left and rightarrow keys are already used to move the key focus rectangle horizontally.We are not trying to clone Windows. We are creating an alternativetoolkit (and GNOME an alternative desktop environment). Thereinusability/consistency as defined by GTK+/GNOME comes first, afterthat, if possible, we can add convenience bindings generally used onother platforms.We *cannot* free the arrow keys from the key focus rect. bindingswhich they have. TreeView *needs* this to support focussing singlecells individually with the keyboard.Back in the 1.3 days GtkTreeView did expand/collapse rows by doubleclicking on parent nodes. But when we discovered that we overloadeddouble click by having it activate rows and expand/collapse parentrows, we decided to drop the ability to expand/collapse parent rows bydouble clicking.Why? Its not only logical to use the same bindings, but its alsoeasier for the user. Expand a row by double-clicking, then activatethe row that's a child of that with the same action. To give aparallel, you wouldn't make it so you right click to open a menu in aprogram, then left click to choose a menu element.You say doing this would confuse users, but I'm a users and having adifferent key or mouse action for similiar functions confuses me. Idon't like remembering 8 million different ways to do the same thing,all of which incompatible with each other.Single-click should select the item, and double click should expand itor activate it. Expansion of a parent node would then seem to be aform of activation to the user (no matter if you differentiate it).What does this mean (for people that don't develop for Gtk)?Who will choose what double click on a parent node would do? There canonly be one *fixed* action.The focus rect is a keynav cursor. It appears as a dotted rectanglearound rows. In some cases (mostly in editable treeviews) you can movethis cursor to the left and right with the left and right arrows keys.Its your code, can't that be changed? Parent nodes obviously can onlybe expanded, while child nodes can obviously not be expanded and onlyactivated. Therefore, the activation event for nodes that havechildren would be simply to be redundant for expansion.Is there a working example of this so I can see what you mean?The code can be changed without problems. As I said before we've had adouble action on double click for a while back in the 1.3 series. Thatthere can only be one action per binding is just a design rule.The problem is if you can reliably determine if the user/programmerwants an activation or expand/collapse event for his parent node.Examples for the keynav cursor: all treeview demos in gtk-demo.In the case of why I filed this bug -- the "redhat-config-xfree86doesn't allow keyboard expansion of tree list without a mouse.", therewouldn't be a need to have parents do anything but expand and show itschildren. I guess you are talking in a more general sense, so maybethere are cases where you'd need a parent node to be activated.So we have at least determined that when it does nothing, it coulddefault to expand/contract. Of course, this would be inconsistent. Ilooked at what Microsoft did in the control panel, and although I'mnot a fan of M$, I know they have poured a lot of money into UEresearch. From what I found is this:In the control panel, they set up the list in a way that parent nodesexpanded on double-click, but child nodes brought up the propertieswindow (were activated). To bring up the properties menu on the parentnodes, you had to right click and choose properties.I think this goes to show that you could allow tree-view expanding ofparents with no regular action set, and then just put a stipulation inthat its the responsibility of the person implementing tree-view tomake sure that there is consistency between parent nodes.The other choice would be to make it so parent nodes always expandedby double click and you had to right click (or equivalent) to do theiraction, which would show up in a menu.Mass changing gtk+ bugs with target milestone of 2.4.2 to target 2.4.4, asMatthias said he was trying to do himself on IRC and was asking for help with. If you see this message, it means I was successful at fixing the borken-ness inbugzilla :) Sorry for the spam; just query on this message and delete allemails you get with this message, since there will probably be a lot.Apologies for spam-- ensuring Sun a11y team are cc'ed on all current a11y bugs. Filter on "SUN A11Y SPAM" to ignore.This feature is rather annoying. It makes Nautilus, for example, a complete pain to use. So much so that people raise bugs likesaying that there is "No way to expand directory with keyboard". Can we please fix these keyboard controls on GtkTreeView? Unmodified Arrows scrolling the view while Shift+Arrows are mapped to expand and contract is such a waste, it should be the other way round.Createdgtktreeview.c keyboard navigation changesHere's a patch that does what I wanted, taken against Ubuntu 5.10's libgtk+ (gtk+2.0 2.8.6-0ubuntu2.1) It changes the navigation keys for treeviews to these:Left/right arrows contract/expandLeft on a node w/o children goes up a levelRight on a node w.children goes down a levelExpand-all-child behaviour only happens with Shift-rightCtrl-left/right used for the previous left/right behaviour (change focus)As I said earlier:from Kristian Rietveld (gtk+ developer, points: 18) 2003-05-27 17:22 UTC [reply] The arrow keys are already being used in GtkTreeView to move the focus rectangle over the horizontal axis.I am not taking any patch that changes the behaviour of the left/right arrow keys.It was also said inthat "usability/consistency as defined by GTK+/GNOME comes first"According to the HIG"* Do not assign awkward reaches to frequently performed keyboard operations. Some people may only be able to use one hand on the keyboard, so shortcuts that can be easily used with one hand are preferable for common operations.""* Do not require repetitive use of simultaneous keypresses."In order to navigate a tree, one can use use the up and down arrows, but to expand a node one has to reach for the shift key as well, or the equally awkward +- keys. Which is done more, expanding/collapsing nodes or traversing focus to the left or right?Out of some common programs that use the treeview in Gnome - Nautilus, GnomeBaker, Rhythmbox, Evolution, Glade's Widget Tree and Liferea - only Rhythmbox has cells that make use of the current left/right focus change behaviour, in a one-level-deep tree (no expandable nodes) that is used to show the track list. This indicates that the current shift+left/right for expanding/collapsing nodes goes against the usability guidelines as defined by GTK+/Gnome.I haven't forgotten the guidelines that state "any text that can be selected with the mouse can also be selected with the keyboard" and "ensure every control on menus and in dialogs are directly focusable using access keys or shortcut keys", but these are secondary, less used features of the treeview and would not be such a burden if they had marginally harder to use keyboard shortcuts.Apologies for spam... ensuring Sun a11y folks are cc'ed on all current accessibility bugs.***has been marked as a duplicate of this bug. ***I want to get this resolved soon now. Calum, what's your take on this issue?Matthias, and yours? Can we make such changes in the 2.x series? (I would saychange, because people can change it with their keytheme anyway).(In reply to)I am not really sure whether these two make sense.(In reply to)Recently I downloaded Gimp for Windows which required installation of GTK forWindows. It was surprising when I first noticed that GTK's tree views cannotbe navigated easily using keyboard. At least until I've found "new" shortcuts("+" and "-" keys, Shift+Arrows), this bug and. For a long timeI was thinking that this issue was a Linux-only thing, but now I've found thereal source of this problem.Normal arrows SHOULD indeed expand and collapse nodes. Shift+Arrow, Ctrl+Arrowor Alt+Arrow could be used for scrolling, both horizontally and vertically,leaving normal arrows for navigating contents of the tree only. Otherwise thebehaviour is inconsistent with overall look and feel. Please modify GTK'sdefault behaviour or at least give the option to change it for the end user.It would also make my GNOME experience a lot better, since I'm used tonavigate the expandable tree using four closely located keys on the keyboard.That is arrow keys. It's easier from usability POV and consistency with otherdesktop environments (and that's not only Windows).--Registered Linux user #390131 ()I've dig a bit deeper and found. Looks like Evolution alreadyuses Left and Right arrows to collapse and expand mail threads, although itseems to be a little buggy at the moment. Putting more consistency throughoutthe whole GNOME desktop would be a big bonus IMHO.Since there's new GNOME release ahead it may be a bit late for it to includethe change in TreeView's key bindings. But it still would be a plus to have.[ sorry for spamming yor mailboxes twice in a row... it's important for mepersonally, so I'm trying my best to convince developers to help GTK users,including me of course :) ]***has been marked as a duplicate of this bug. ***I've changed cvs HEAD to expand/collapse branches with right/left, the focus cursor could already be moved with ctrl+left/right and that will remain the same.Note that you can use BackSpace to go up a level from a node (I was told this keybinding was taken from Windows).2006-10-30 Kristian Rietveld <> * gtk/gtktreeview.c (gtk_tree_view_class_init): change left/right keybindings to collapse/expand rows instead of moving the focus cursor. (#105895, Brian Bober and others).Are those keybinding only active if you use expanders at all? I use flat trees as lists and I need the keys for efficient manipulation of cell data. So is backspace free if I have no expander tree?Commit has been reverted in r18768. Bugs streamed in from people complaining that left/right didnt move their cursors anymore. People are very divided on this issue and in a .12 release we felt it was better to keep the old behavior rather than changing behavior which has been there since 1.3.x.Since GtkTreeView is being used as both a table and tree, we are going to need a more sophisticated plan to fix this. We could base the decision on factors like: * Is the model a list or tree? * Are there any activatable cells in the column configuration?Etc.***has been marked as a duplicate of this bug. ***How about space to expand/collapse the tree? I know it was said that both space and enter is used to activate the current item... Maybe that can be changed? If right and left arrow keys cannot be used, then space is the best alternative.Wouldn't it at least make sense to make ARROW-Keys collapse/expand in a TreeView with only one column because there's no horizontal cell-focusing possible at all.***has been marked as a duplicate of this bug. ***I created, which is now a dupe of this one, so i will comment here:In nautilus' list view, the left/right arrow keys do NOTHING. They are entirely unused.They should really do something useful, as these keys are very convenient to use.I want to applaud all the heroic efforts over the years by users and developers to raise awareness of the usability issue with the Gnome tree control. The default keybindings, in the opinion of this user migrating from another O/S, hurts productivity. I believe tree view needs to have better arrow key support. It would be superb if the default behaviors and keybindings worked like other operating systems as it would ease the pain of user migration. But in my case, I go beyond simple personal preference as to why I have chosen to contribute my $0.02 to this enhancement request...The current situation with the space bar and ctrl+left/right is muddled depending on the application. I've seen some tree LEVELs in trees in Eclipse, for instance, that had for some reason grabbed the space bar (Class type inspector, I think.) This allowed me to expand/collapse the first level of the tree, but then space no longer worked on deeper levels - and I had to reach for the mouse to continue expanding/collapsing. So I think my main problem, and reason for adding this comment, isn't simply that "Gnome wasn't developed as a replacement for Windows Shell" but that the current implementation with the space bar doesn't work 100% of the time. For good or ill, I have trained myself to use space with Eclipse on Gnome, that is now in my muscle memory. But when it doesn't work 100% of the time, someone has failed either at the design or the development stage. Someone must be held to account. I must be compensated for lost time!Now, you can argue the Eclipse app should not have bound to space for that particular tree level. After all, it's not Gnome's fault some app mistakenly bound to space at an odd time, in of all places, a particular tree control LEVEL, for Pete's sakes! But then I would argue back, soooo ... space is a pretty important, mostly non-control oriented key on the keyboard. Well, yes, it IS used for control on radios and checkboxes for select/toggle, you got me there.But did you REALLY get me there? See, I contend tree controls and even items in the tree are different from radio and checkbox because they are not one-dimensional elements. Tree levels are not booleans! There is surely a PART of each tree control level that is a boolean: the twisty arrow. I suppose if you could navigate somehow with the keyboard to focus just on the twisty arrow itself, then you could argue the boolean nature of the twisty and space would be an appropriate as a toggle on it. But you can't do that, you navigate to the entire tree level object, which might itself contain an edit field or other nested controls that might themselves take keyboard bindings (ok, granted, an odd way to use tree) and might find the space bar key otherwise useful: conflict! I'm just arguing that the tree control level is too complex to be given the space bar binding, it doesn't itself represent the simple boolean. Rather, I would argue that tree levels are "navigated" rather than selected/deselected and thus should have navigation-type key bindings. Yes, I have considered that ctrl+left and ctrl+right could be the "navigational" key bindings I desire. But that doesn't change that the space bar is an inappropriate assumption and thus, binding. There, I finally said it; I tried to be diplomatic about calling the current convention "wrong", and hopefully "inappropriate assumption" has softened the blow. :)I am curious though, would it be technically possible with GTK to double bind the arrow keys without any meta just to bring us in line with other operating systems? For example, the highlighted row of the tree view item always has "first dibs" on the right/left arrow key events for expand/collapse and then passes the event on to the containing scrolling pane if the event is not consumed. Is it that keyboard binding events don't flow in that direction on GTK from contained to container? That's not to say there is any value in copying the conventions of a competing O/S. Nope, I did not mean to insinuate that that is exactly what I am thinking, so please find some other rationale like booleans and inapproprate assumptions. :DHonestly and without being facetious, I do think left/right arrow support on the tree control would be good for humanity. It really is important. I have this hopeless feeling that productivity is slowly slipping away from me on all computing and UI fronts - too many fancy designers throwing in fluff that seemingly always requires the hand moving to the mouse. I'd just like to have rock-solid keyboard support throughout all of my apps where the default widgets are concerned and, if I'm lucky, reclaim a bit of my future time.Thanks. Love Linux, and I like Gnome most of all the shells,DaveWOr to make the UX the same, keep focusing right on the right arrow, but when on the last element, open the subtree. Similarly with the left - left key on the left most element could close the subtree. This would work very naturally on one column trees, and should still be more convenient on multi-column ones.. Although not sure if two right keys is any better than a shift-right..--I'm not quite sure why I didn't notice this for so long (maybe I didn't use any apps using tree views?).. but when I found this a few weeks ago I cannot use tree views w/o thinking about it.(In reply to Jakob Unterwurzacher from)That shortcoming in Nautilus seems to have been fixed at some point in the 7 years since that comment was posted.GNOME Files (formerly called Nautilus) now has support for using the left-, right-, up-, and down-arrows to navigate and to expand and contract subtrees in the list view, as long as the "Navigate folders in a tree" option is ticked in the preferences. Yay!This gives me hope that *this* bug () might also become fixed eventually, if it hasn't been fixed already.Please could a GNOME developer comment with an update if he/she/they knows of any progress on that front?Thanks!A user on the Ubuntu bug tracker has submitted a patch that appears to fix this bug:Please can the patch be merged into GTK?In the meantime, there are some partial workarounds here, involving creating a ~/.gtkrc-2.0 file if it doesn't already exist, and adding appropriate key-bindings:. It is only a partial workaround because the correct behaviour of the arrow keys ought to vary depending upon the status of the highlighted line in the tree view, as described in the Ubuntu bug report above, and as equivalently described here:and here:In case it helps, here is a personal account of why the present behaviour is flawed, based on experiencing it in GnuCash. Quoting the GnuCash wiki[1]:This is thoroughly unergonomic for me, because:- It is different to every other tree view I am familiar with, across platforms, including the tree view in GNOME Files.- It requires pressing two keys in a "chord" when one key would suffice, potentially leading to "Emacs pinky" or similar RSI issues.- The fact that the right-arrow and left-arrow keys by themselves *do not* appear to do anything in the GnuCash account tree view, is inconsistent with the fact that up-arrow and down-arrow keys by themselves *do* navigate (as they should!) up a line or down a line in the GnuCash account tree view.So, please help users of GTK-based software to be more productive, happier, and to have healthier tendons: implement the patch posted on the Ubuntu bug tracker, mentioned above! Thanks :)[1]Bounty posted:Anyone reading this, please consider adding to the bounty if you'd like to see this fixed. Hopefully the bounty will motivate someone to make the fix and claim the reward, either for themselves or as a donation to the Gnome Foundation.	40.0	id=675262	11	False	False	nils	1
id=456349	REOPENED	gthumb	general	2.10.x	Other Linux	Normal enhancement	Paolo Bacchilega	2007-07-12 18:53 UTC by	Paolo Benvenuto	2015-12-21 08:24 UTC (	1 user	gthumb 2.10.3In the "change date dialog" we have the possibility to select various dates for modification date or comment date.Actually we have- the following date- current date- photo digitalization date (exif)- image creation date- adjust timezoneand the "following date" has the default value of the current date.I think that when I select another option, e.g. "image creation date", this date should appear in "the following date" fields. Now if I select such an option I haven't idea what date am I setting to.This way I would be able, for example, to set to exif date and then add manually one second (this is useful if I duplicate an image and put in the file name the exif date).At the right of every option, the corresponding date-time value could be presented. For example:- image creation date (2007-07-04 12:35)Besided that, at the beginning of the dialog, a 3rd option could be added to the "change the following value" control: "exif date", which is easy implemented with "jhead -ts<date-time>".	What about when multiple files are selected? Anyway, patches are welcome...The version in svn trunk allows you to change the DateTime tag already ().- MikeWell, if multiple images are selected this value would be omittedMarking as obsolete, as the 2.x version are no longer supported.Please feel free to reopen this bug report if it describes a problem that still occurs with a current version of gThumb (currently 3.4.1).still present in 3.x series	4.0	id=456349	5	False	False	mjc	1
id=754114	REOPENED	GIMP	Tools	2.8.14	Other All	Normal enhancement	GIMP Bugs	2015-08-26 12:15 UTC by	Jo	2016-09-29 12:59 UTC (	0 users	the grid, guides and paths could be magnetic if visible only.sometimes i need magnetism and its usually for a short time, then i forget it, hide it, just to stumble later over that magnetism, because it changes unintentionally my brush strokes. A faster way to deal with magnetism could be to deactivate it, when (paths, guides, grid) not visible.	Others ask for other combinations, e.g. they prefer just havingvisual clues (without magnetism), or having magnetism without the visualnoise. The settings are separate on purpose. Closing as WONTFIX.thanks for the explanationHm…when magnetism is such a discussed issue, why not creating some options in Gimps general preferences, maybe under standard grid ? these settings have some value, putting them under view is too understated.if you ask me, id like to turn magnetism off/on, but for all elements (path, guides, grid) at onceThat sounds worth thinking about.	3.0	id=244791	19	False	True	bugs	1
id=244791	REOPENED	evolution	Mailer	unspecified	Other All	Normal enhancement		2003-06-14 09:43 UTC by	Adam Warner	2016-06-06 01:39 UTC (	7 users	Please consider supporting the Mail-Followup-To header as discussed here:<>This header is used by people who don't wish to receive duplicate mail, andEvolution's lack of support for this header would help stop follow-up mistakes.As a friendly reminder Branden Robinson of the Debian project expresses itthis way via a form letter:"Many people, myself included, use the Mail-Followup-To messageheader, which is honored by mail user agents such as Mutt to control thedistribution of replies to mailing lists; using such a header, a person caneasily indicate that he does (or does not) want to be send copies ofreplies to his message. You may want to use an MUA that honors thisheader, as it is in fairly wide usage on the Debian mailing lists, and mayhelp you avoid mistakes resulting in inadvertent violations of Debian'sMailing List Code of Conduct."Thanks,Adam	Clearly the second paragraph should have read: This header is used bypeople who don't wish to receive duplicate mail, and Evolution'ssupport for this header would help stop follow-up mistakes.this ietf drums draft standard expired in 1998.There's no way we could get this header supported in Evolution, at least on the receiving side?Many modern MUAs *do* support it:(GMail is not listed in this table, but it supports Mail-Followup-to as well)Why exactly was this bug marked as “not a bug”? It might be an enhancement request but it's definitely not resolved.Check.(In reply to Yves-Alexis Perez from)It was closed because "this ietf drums draft standard expired in 1998."But, I will reopen to request that the current maintainers review whether it is desirable to support nowadays.***has been marked as a duplicate of this bug. ***I'm interested in support for this as well; this isn't just a usability issue for Evolution, but for other people interacting with Evolution users via mailing lists.Note that there are two issues here: respecting Mail-Followup-To when replying to mail, and making it possible to set Mail-Followup-To. The former is more important; the latter would be nice but should not block implementation of the former.	8.0	id=733351	19	False	True	slomo	1
id=733351	REOPENED	GStreamer	gstreamer (core)	git master	Other All	Normal enhancement	GStreamer Maintainers	2014-07-18 11:49 UTC by	Jan Alexander Steffens (heftig)	2015-08-31 11:29 UTC (	2 users	CreatedpatchIn order to seek FLV streams, flvdemux creates a seek index;however, this index is not created if upstream is not seekable.gst_flv_demux_check_seekability was copied nearly verbatim fromGstBaseParse.This commit adds QUERY_SEEKING handling to queue2, so RTMP livestreams become seekable when a queue2 in download or ringbuffermode is inserted:rtmpsrc ! queue2 ! flvdemuxAlternatively, flvdemux could be altered to not requireseekability. I am unsure what is the best approach.	A patch for the mentioned alternative is at #733494.Any comment?Review of:::: plugins/elements/gstqueue2.c@@ +3043,3 @@+ if (segment_end < 0) {+ GST_DEBUG_OBJECT (queue, "fixing seekable segment to maximum");+ segment_end = G_MAXINT64;IIRC -1 for the seeking query also has the meaning that the complete range can be seeked.However I'm not sure it's valid to assume that upstream is seekable if the seeking query failed upstream. The queue will be seekable in the already downloaded area, but otherwise no seeking is possible.The code in baseparse (and flvdemux) that handles checking seekability is: gst_query_parse_seeking (query, NULL, &seekable, &start, &stop); /* try harder to query upstream size if we didn't get it the first time */ if (seekable && stop == -1) { GST_DEBUG_OBJECT (parse, "doing duration query to fix up unset stop"); gst_pad_peer_query_duration (parse->sinkpad, GST_FORMAT_BYTES, &stop); } /* if upstream doesn't know the size, it's likely that it's not seekable in * practice even if it technically may be seekable */ if (seekable && (start != 0 || stop <= start)) { GST_DEBUG_OBJECT (parse, "seekable but unknown start/stop -> disable"); seekable = FALSE; }I want to seek in a livestream that does not have a known duration, so the duration query also returns -1 and this code claims unseekable.CreatedpatchHere's a slightly different version that uses the current range to fill in the seekable segment if upstream is not seekable.Please review the patch.Review of:Mostly looks good, I would call that function something like handle_seeking_query() or similar though.::: plugins/elements/gstqueue2.c@@ +2923,3 @@+ if (segment_end <= segment_start) {+ GST_DEBUG_OBJECT (queue, "no range to seek");+ return FALSE;I think this should not fail the query but just set it to unseekable.CreatedpatchRefactored the code again. If upstream is not seekable, the query now fails only when format != BYTES.commit 7b0b93dafe4ac547552cdb66ade5d8aa0405e7b4Author: Jan Alexander Steffens (heftig) <>Date: Thu Jul 17 16:33:29 2014 +0200 queue2: Process SEEKING query Add QUERY_SEEKING handling to queue2, so RTMP live streams become seekable when a queue2 in download or ringbuffer mode is inserted: rtmpsrc ! queue2 ! flvdemuxComment onpatchcommitAuthor: Tim-Philipp Müller <>Date: Mon Aug 31 12:07:10 2015 +0100 Revert "queue2: Process SEEKING query" This caused problems with oggdemux when queue2 was operating in queue mode and the souphttpsrc upstream is not seekable because the server doesn't support range requests. It would then still claim seekability and then things go wrong from there. This reverts commit.	10.0	id=124764	8	False	False	vuntz	1
id=124764	REOPENED	gnome-panel	general	2.4.x	Other Linux	Normal enhancement	Panel Maintainers	2003-10-16 12:22 UTC by	Ben Steeves	2009-12-15 01:52 UTC (	4 users	In GNOME 2.4, "floating" panels (i.e., non expanded panels) have handles. This is good -- it allows you to drag the panel, access panel properties,etc. The problem is that the panel handles are always the deafault systemgrey, and this is ugly. The handles should match the background settingsfor the panel. The user should also have the ability to turn off at leastone of the handles (allowing the user to to turn off both is probably a badidea unless you allow some other way to get to the panel properties (middleclick, hotkey, etc)).With this (hopefully) minor change, GNOME could approach Mac OS X in termsof "prettiness". :-)	(adding comment here as this is more or less the same thing as I wouldlike to have)I have 4 different panels placed in all 4 corners of the screen. Sincethese panels are floating panels they have handle-bars on both theleft and the right side. I would really like to remove the handle-baron the side of the screen-edge in each panel, to make it easier toaccess the panel-applets I have placed in the corner. (Fitt's Law)present example:In my top left corner I have a floating panel which consists of themenu-line ("applications and actions"). When I send the mouse-cursorup to that corner and click, I click on the handle-bar instead of theapplications-menu. I need to move the cursor somewhat to the right toaccess the menu.future(?) example:If I move a floating panel to a corner, and it "docks steady" there,the handle-bar on the corner-side is automatically removed.I can then send the mouse-cursor all the way up in that corner, clickand open the applications-menu.Patch in.*** This bug has been marked as a duplicate of***This is complicated. The patch inwill not fix this -> REOPEN.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	6.0	id=325547	14	False	False	behdad	1
id=776843	REOPENED	evince	PDF	3.22.x	Other Linux	Normal enhancement	Evince Maintainers	2017-01-04 00:54 UTC by	Stephen	2017-01-04 21:08 UTC (	2 users	Having a PDF open in fullscreen because of a hidden flag in the file is unpredictable behaviour and potentially undesirable from the user's perspective.Please add the option to ignore this flag, in dconf if not somewhere in the Evince UI itself.	What kind of "hidden flag in the file" is referred to?The fullscreen flag. Setting it is an option in various software, e.g. LibreOffice can set it when exporting as PDF, and the flag can be seen with 'exiftool -a'.Adobe's docs:Evince already provides a mechanism to override features set in the PDF document.org.gnome.Evince.override-restrictions.org.gnome.Evince.override-restrictions is set to true, and does not prevent fullscreen on open.Per the bug title change, I'd personally be entirely happy with the override-restrictions key determining behaviour.However, this is not a restriction per se (in the way that "can't edit", "can't copy" etc. are), and there may be users who use the initial view feature (maybe?? See related fullscreen-on-open bugs) who won't want to have to accept enabling metadata-based restrictions to regain fullscreen-on-open.Can I suggest a new key for "ignore-embedded-view-settings" or similar? Evince doesn't seem to implement any other metadata-based initial view settings from a quick check, but there are a host of them (e.g. see LibreOffice's PDF export view settings), and it might come in handy if anyone decides to implement them as well.Is the fact that a record of a bug title edit can't be seen in the bug itself just a limitation of Bugzilla by the way?A typical complain is when the Outline of the PDF changes the page view. For example, the user select an item on the Outline, and the page view changes from say "Page width" to "Page Fit", because the PDF producer decided so.The override-restriction bypasses that behaviour. Start a document in full screen seems like the same case.OK. Might be worth updating the key summary/description to mention that it also overrides display metadata then.The override-restrictions key only controls if it's ok to print and copy from the document; it has no bearing on whether display options are obeyed. So the bug/rfe here is independent of that key.	8.0	id=776843	9	False	True	a9016009	1
id=325547	REOPENED	pango	general	1.11.x	Other All	Normal enhancement		2006-01-02 21:39 UTC by	Itai Bar-Haim	2006-10-16 17:10 UTC (	2 users	I took some time to read the pango code that does the line-layouting and handlesthe tabs. I didn't try to implement anything yet, this is just a thought of howto implement the other alignments:The static method shape_tab (pango-layout.c), if I get it right, is modifyingthe given glyphs string to include a tab character, that is - an empty glyphwhich width is the difference between the end of the current line (where the tabwas inserted) to the next possible tab position.This is good for left-aligned tabs; However, in order to handle the rest of thetab alignments, the returned width must vary.In the current implementation, it is somewhat hard to know what comes next, soinstead I suggest a different approach:* shape_tab will remain the same.* The tab returned by shape_tab will be stored in a last_tab_glyph variable.* When a new glyph is added, a value is subtructed from last_tab_glyph's width: * For PANGO_TAB_LEFT, the value is 0. * For PANGO_TAB_RIGHT, the value is the width of the new glyph. * For PANGO_TAB_CENTER, the value is half the width of the new glyph. * For PANGO_TAB_NUMERIC, well, that's a bit tricky... :-)* If last_tab_glyph's width is nullified or becoming negative, it is removed.That is my proposal. I don't know if I will have time to try to implement it,hope to recieve some feedback about it (and maybe some successful attempts :-) )Itai.	Sounds generally good. Go ahead with implementation and we will see :-)CreatedA patch that implements Right and Center tab alignments.Thanks. The patch looks good. I will test and comment soon.Createdtest casePatch to add --tab-align option to pango-*view examples.Oops... My patch doesn't do anything useful...Can you either finish my testing patch, or attach a test case?CreatedA test case for the new tab alignments implementation.I didn't quite understand the patch you sent, Behdad, and I actually didn't have much time to do so also...Anyway, this is the test case I made quickly when I wrote my patch. Should be fine.It includes several text widgets with tabs of all kinds and text in English and Hebrew.Please note that this patch does not redefine the tab name for RTL mode, so the left tab in RTL mode actually aligns the text to the right, and vice-versa. I didn't change it because the default was left until now, and all RTL programs that uses tabs used the left tab (so it is kind of backwards compatability).Itai.***has been marked as a duplicate of this bug. ***CreatedCommitted patchThis is the patch I committed to HEAD. It's the same patch as Itai's, with support for examples/ and updated documentations.2006-01-28 Behdad Esfahbod <> Implement other tab alignments., Itai Bar-Haim. * docs/tmpl/tab-stops.sgml: Documented new tab alignment enum vals. * pango/pango-tabs.h, pango/pango-tabs.c: Added support for tab alignments PANGO_TAB_RIGHT and PANGO_TAB_CENTER. * examples/renderdemo.h, examples/renderdemo.c: Added support for --tab-spec.Thank you.Createdcurrent patchMy current patch, with some minor improvements over the previous one.I reverted the committed patch, as apparently it needs some more work:Currently with left-aligned patches, the text will snap to the next tab stop, and there infinitely many tab stops. With the current patch (that I applied and then reverted), right-align and center-align tabstops do not work like that, ie. if the text doesn't fit, it doesn't jump to the next tab stop, but it just moves right, ignoring the tab. So, for example with all left-align tabs you get something like this:a bcd efghia bcdefghijklmn efghiwhere the "efghi" in the second line jumps to the third tab stop. But with right-aligned tabs, you will get:a bcd efghiabcdefghijklmnefghiwhich is wrong. Now this may be easy to fix, but there's also the question of how useful such a thing would be. IMO, we need to implement two modes for the tab alignment stuff, one to jump to the next tab stop if text doesn't fit, the other to just ignore the tab stop. The former is the default behavior when no tab stops are set. The latter is more useful with set tabs, like you have a table and you want to tabulate the elements in each row. Now if one element doesn't fit in the set tab, you don't want to shift the element to the next column. You just get some mis-alignment. With implementing this, we can go and and implement auto-tab-width too, where you just set tab alignment with no width, and the minimum required width will be calculated. That would be really handy to set tables... More on the design of this thing in the next comment, to keep this short.One more thing: the current patch is not correct in get_tab_pos. It doesn't return the correct (ie, the last's) tab position's tab alignment if index >= num_tabs.Ok, I call this mode skippable. If tabs are skippable, when the text doesn't fit, we skip to the next tab stop. Otherwise, we ignore the tab stop. With skippable off, there's a unique mapping between tab characters in the line and tab stops.Now this may not be the optimal place, but I suggest we implement this flag on the PangoTabArray. We need two methods: void pango_tab_array_set_skippable (PangoTabArray *tab_array, gboolean skippable); gboolean pango_tab_array_get_skippable (PangoTabArray *tab_array);Then we need to decide on the default value. The skippable value of the default PangoLayout tab behavior will not change, so it will be non-skippable. for new tab arrays again, we need to keep the old behavior, so default to non-skippable. Skippable tab arrays are more useful though. Owen, do you see any problem with this proposal?And a final question: what the PANGO_TAB_NUMERIC is supposed to do? Guess it's supposed to align on the decimal separator, right? How are we to approach that? The text may content arbitrary characters, like a monetary symbol, so simply skipping any (internationalized) digits and justifying on the first non-digit character doesn't work. On the other hand, searching for a period doesn't work either, as there are a zillion different decimal separators for different locales. I believe we should implement NUMERIC with the other ones in this bug. Note that NUMERIC doesn't make much sense with skippable tabs.I understand what you are saying, but when I wrote that patch I tried to immitate the behaviour in applications I hade (i.e. Word). Perhaps we could think of other ways it can work in corner cases like this, and allow the programmer to choose. Nevertheless, if the currently implemented behaviour is one of the options, than perhaps the patch should remain commited, as it adds some functionality, while the other wanted behaviours will be implemented in the future.Itai.Oops, seems like I have had made my last comment private!No Itai, the patch cannot go in, 1) because it's incomplete, 2) it introduces behavior that we know will be changed in the future.About NUMERIC alignment: This indeed aligns string representing numeric values by the decimal seperator. What I've seen in other places is that the first occurance inside the string, that actually represents a numeric value (seperated by characters that are non-numeric according to the locale) is the only value treated as numeric, and the entire string is aligned according to it.Examples (^ represents the tab position):abc123.45def67ghi ^123abdef45.678 ^ (well, between the '3' and the 'a')One thing we should remember here is that unlike the other alignments, the numeric alignment is intended for a specific purpose, so it is okay for us to make some assumptions about the possible uses of it.Localing, however, will cause us problems in here. Suppose we want to align two different strings with the NUMERIC alignment, when one string is in western digits, and another string in arabic digits. Will both strings be aligned correctly? What about different seperators? What about string that mixes western and arabic digits? Should we try to find a correct numeric string inside a bigger string in a case of digits mixing, and match seperators while at it?Just some points to think about.Itai.I don't quite understand the default value for skippable mode. You said it should be false (non-skippable). But in non-skippable mode, when the text doesn't fit, what we get is some mis-alignment, while current behaviour is jumping to the next tab. So shouldn't the default mode be "skippable"?Another thing I don't understand is how it will work with alignments other than "left". Suppose the following case: L R C (tabs)a bcd efghif the third word (efgh) is longer, what will happen? L R C (tabs)a bcdefghijklm this?a bcd efghijklm or this?or perhaps something else?Right, for some reason my mental idea of what skippable means was skewed when I wrote that comment.As for your example, the second line is what should happen. It's not that useful when you have different tab alignments like the R and C in this case, but that's the most consistent with current behavior.As I see it, neither one of the examples I wrote immitate the current behaviour (guess I wasn't paying much attention while writing this...)In the current behaviuor, this what's will happen: L L L (tabs)a bcd efghi (original)now the SECOND word gets longer: L L L (tabs)a bcdxxxxxxx efghi (skippable)a bcdxxxxxxxefghi (nonskippable, that isn't available currently)And if we'll try to do the same with other alignments: L R C (tabs)a bcd efghi (original)a bcdxxxxxxx efghi (skippable)a bcdxxxxxxxefghi (nonskippable)however, what is the case if the long text starts on a non-left tab? R R C (tabs)a bcd efghi (original)abcdxxx efghi (nonskippable)a bcdxxx efghi (skippable - option 1 - the unfit text moves on)abcdxxx efghi (skippable - option 2 - just like nonskippable)and there's option 3 (move the tab iteself as much as possible. Then start moving the next tab to make more room and so on): R R (tabs)abcdxxx efghiOption 1 is what I mean. How did you come up with option 2? Option 3 is very very hard to implement.I came up with option 2 because on left-tabs, text that does not fit causes the next tabulated segment to jump to the first possible tab that comes next. The unfit text segment does not change it position, it only effects the segments that comes afterwards...(P.S. I noticed a small mistake in the example of the left-tabs only. I positioned the last word center-aligned in a Left-Tab, instead of left-aligned...)Relevant read: elastic tabstops:	22.0	id=745681	8	False	True	mcatanzaro	1
id=745681	REOPENED	gnome-sudoku	general	3.14.x	Other Linux	Normal enhancement		2015-03-05 14:59 UTC by	William Melgaard	2015-03-20 23:33 UTC (	1 user	Previous versions of Sudoku provided three popups per square: two text boxes and a menu for the value of the square. Either the top or bottom textbox could be used to list possibilities. Without this capability, Sudoku is virtually unplayable. At present, clicking anywhere on the box does not provide a textbox.The documentation says that it is possible to set tracking from the toolbar. There is no toolbar.It would be nice if the linex bordering a 3 X 3 set of boxes sere heavier than the lines around the individual squares.	(In reply to William Melgaard from)The textboxes have been replaced with a popover that only allows you to select numbers. You can get to it with Ctrl+click or right click, or just type Ctrl+n where n is the digit you want to add or remove. Effectively you're down to one text box rather than two, and it can only store a set of digits, but that seemed to be what everybody was doing with it anyway. We call them "earmarks."The documentation is outdated; I've removed it for 3.16 until this can be fixed. I guess there's no way for anybody to figure out how to use the earmark feature unless it's documented, so I'll try to prioritize that. That's. But you shouldn't *have* to go into the (nonexistent) documentation to figure this out -- we have a discoverability problem here.The tracker doesn't exist anymore. We havefiled to restore it, but it's been half a year since it was removed and no complaints so I was thinking to close it! Anyway, a separate issue.The design team requested we change the color of the borders instead of changing the thickness, so we're using black for the borders around the 3 X 3 set and gray for the rest. Anyway, a separate issue.---So, my question for you: what do you want me to do with this bug? :) I can change it to an enhancement bug requesting a change to they way earmarks work (that probably won't happen, but who knows), or I can change it to a discoverability bug since I suppose there's really no way we could expect you to figure out earmarks on your own.Colored borders is better than my suggestion.Earmarks: I only use one earmark except for "very difficult", in which case I need to guess. I use the second earmark to mark the guess. If I guess wrong, I can ctl+Z back to that square and change the entered value.Enhancement bug works for me.	2.0	id=148148	17	False	False	thierry.moisan	1
id=392891	REOPENED	Gnumeric	Main System	1.10.x	Other Windows	Normal enhancement	Jody Goldberg	2007-01-04 21:24 UTC by	A	2013-08-06 04:18 UTC (	2 users	clicking on help > Live Assistance, nothing happens	Is this still the case? What is your default irc handler?I had to add an account in pidgin to make things work.This has the feel of being a distribution problem. Is it still happening?Let's see:In January 2007 the report was filed.In November 2008, Jean asked if it was still an issue and did not get a response.WHy do we think that there is a better chance of a response in 2013?Bug notification must have been buried or misplaced, not found when dusting off the old email box. A few years late better than never, i guess :)Anyway, the originally reported behavior is not an ongoing issue. The original bug could have been a distribution problem as Morten says. I now get a response when live assistance is clicked, so that is resolved. However there is still room to improve here, so I will reopen the enhancement request. Since I am not an IRC user, i got the following notification dialog with a title of "". The content is: "There is no program associated to perform the requested action. Please install a program or, if one is currently installed, create an association in the default Programs control panel." After clicking ok (the only option), I get a second dialog with no title and content of "Error launching application" after clicking 'OK' again in the second dialog, I am back in Gnumericfirstly, It would be nice for notifications to allow a user cut/paste the content of the dialog for internet searching, bug reporting, copying the IRC address into an unregistered client, etc. The first dialog is not selectable.The second dialog is selectable, but it is redundant and unnecessary.As an aside, apparently registering programs to new protocols in Windows is not as simple as it should be. After installing ChatZilla for Firefox, i couldn't figure out how to register it to open the irc:// link that gnumeric provided. I subsequently installed Nettalk IRC client, which is a standalone program. It somehow set up it's own association to the protocol during it's install, making gnumeric's live assistance work properly. I do not care to spend more time poking around to figure out more details at the moment, as I don't use IRC.Gnumeric apparently does not have anyone producing updated windows builds, I imagine this area of the program probably won't be looked at for a while. I have not tested this in a linux system, behavior in linux world may be similar, but IRC clients might be more common there. I am marking is as an OS=windowsIdeally, I would imagine that gnumeric would catch the error produced when the user does not have an IRC client properly installed and failover to either:a) An IRC access based on http: protocol (qwebirc might be a promising lead) - doesn't everyone have a web browser these days? This unfortunately would require someone to have the overhead of hosting an IRC access website or b) maybe gnumeric could contain some minimal IRC client code that only connects to the #gnumeric channel or something. I imagine this kind of code could be troublesome to maintain by people who are interested in doing spreadsheet stuff though.Pardon the long and overdue response - Thanks for maintaining and developing Gnumeric! Have a great day!	4.0	id=392891	18	False	True	jody	1
id=105932	REOPENED	GnuCash	Import - QIF	unspecified	Other other	Normal enhancement	Benoit Grégoire	2003-02-13 02:03 UTC by	Paolo Benvenuto	2015-11-25 11:58 UTC (	2 users	In the tab "match qif categories with gnucash accounts" there's a littleproblem:if a gnucash account name isn't correct, and I click on it to change theaccount, it isn't clear how to specify a new account.After a lot of reasoning I could learn that I should de-select everyaccount and write the new account name. But the thing isn't clear, and itis better to specify it in a more proper way.	I dont understand the problem. If the account name the importer chosewas incorrect, you click on the line, it pops up an account chooser,and you can either select and account from there or create a new one. I don't understand what the problem is.Could you give a better, more descriptive example?The fact is that, in the account chooser that pops up clicking in aline, it isn't clear how to create a new account.It should be specified better, because it couldn't be clear that youmust unselect the selected account in order to create a new account.You don't have to unselect an account to make a new account. You haveto unselect an account to make a new TOP LEVEL account.This hasn't been touched in over a year. Does it need more info?Seems to me that donpaolo suggest that the documentation of how to create a newaccount for the QIF category should be improved.Nearly four years later... the documentation still doesn't cover this.If this is a documentation issue, shouldn't it be reassigned to the Documentation component? Or, if the dialog itself needs to be redesigned to be simpler to use, I'm open to suggestions.	6.0	id=105932	8	False	True	warlord	1
id=148148	REOPENED	gedit	general	3.2.x	Other All	Normal enhancement	Gedit maintainers	2004-07-22 08:12 UTC by	Jono Bacon	2016-05-10 16:29 UTC (	6 users	I am a freelance writer (www.jonobacon.org) and I write all of my copy in GEdit.I use the program for its simplicity, non-cluttered interface and ease of use.The one feature I am missing though is something pretty much every writer I haveworked with wants - a dynamically updated word count in the status bar. While Itype the status bar word count would be updated. I need to check the word countregularly when writing, and it is a pain having to update the word count in thedialog box.I know there are performance issues, but this would be great to be a featurethat is turned off by default and then you turn it on (maybe with a warningabout performance). I am sure my P4 2.5Ghz with 512MB RAM would be capable ofthe job though. :)I spoke Paulo on IRC about it, and he asked if I could post the IRC log when Iasked for the feature. Here it is:<jono> are you a gedit hacker?<paolo> yep<jono> can I request a feature - I am a professional writer, and I am gaggingfor a single, simple feature - I would just like a word count in the status bar- I write for various magazines (www.jonobacon.org) and I really need a wordcount in the status bar and no other editor has one - if you add this you willwin so many writers over<paolo> why do you need it on the status bar? Why the current program count doesnot work for you?<paolo> You can open it and simply refresh it when you want to check the numberof words<paolo> we could eventually make it autorefreshing every x seconds<paolo> note that counting words in big documents can be quite expensive<paolo> so having it in the status bar could be a performance problem<jono> yeah but it is a pain to have to click on the menu to get the number ofwords when I could just glance down - this is because I need to know the numberof words all the time<paolo> note that the program count in gedit is modeless<jono> I know it is a performance issue, but if you made it an option to turnon, people would only use it if their machine could handle it - I am sure mymachine would be fine<paolo> so you don't need to click on the menu every time<jono> but putting it on the status bar would make my life so much easier<jono> like I say - if you just made it an option, maybe with a warning aboutperformance, that would be great<paolo> ok<jono> seriously - every writer I speak to needs this, and this could push geditahead of others<jono> I use gedit because it is simple and uncluttered, but this is the onlything I need<paolo> please, post a request for enh to bugzilla.gnome.org so your requestwill not be lost<jono> sure	I think this could be implemented as an extension of the Document Statistics plugin.What the plugin is "activated" it will have to add submenu of the View menuView->Customize StatusBarwith the following items:[ ] Show _words[ ] Show _lines[ ] Show _characters (with spaces)If one of the items is selected a new status bar widget is added to the status bar:[ ... | Ln 123, Col 123 | W 3213, L 999, Ch 3434 | INS ]A tooltip could be shown whrn the mouse is over the new status bar.Comments?This is exactly the way it should work. This is both intuitive and useful. IT is also useful having the number of characters as some publications work in characters as opposed to words.Should I work out a patch for this ?Patches are always welcome :) but keep in mind that we are feature frozen forgnome 2.8Note also that if you have time to work on gedit there's other stuff with higherpriority. It's open source though, so you're free to work on what you prefer :)CreatedIts counts the words in the current view.The Menu is also been design as said by Paolo Maggi, checkout the patch.CreatedThe Snapshot of the customize statusbar in view menuComment onIts counts the words in the current view.Sorry for the late reply.Please, use "cvs diff -up" when submitting a patch.As I said in my previous comment I'd like to see this feature implemented inthe "document statistics" plugin.You have to use the right functions provided by GtkTextIter to find the startand the end of a word.Your implementation is not correct from an i18n point of view.I'd also like to request this feature. I've planning to learn Python for ages just to hack this but haven't fond the time to learn it yet.I think that it should be simpler, just a toggle in the View menu to add extended info to the statusbar.In my case I need specifically to see the length in characters of my current selection.So I suggest adding the same info but for the current selection in the status bar with parenthesis when something is selected using the suggested format of Paolo for the status bar.Thanks.There is already a plugin for document statistics. It should be enough in my opinion. The statusbar already contains lots of things.If the number of words is displayed in the statusbar, people will focus more on the statistics. People should instead focus on the contents and the quality of the document, regardless of how many words there are… In my opinion.See for example LWN, I'm sure they totally don't care about the number of words, as soon as the articles are interesting and well written.So I think it's not really useful to keep this 10-years-old bug.I disagree, I still find it useful to know the number of characters of a selection while coding...I like the idea of showing this info when selecting. reopeningI also just missed this feature. Maybe the characters count could be shown at buttom bar after the "rows/cols" count :/Thanks a lot	13.0	id=608236	8	False	True	kuleshovmail	1
id=608236	REOPENED	gtksourceview	Syntax files	unspecified	Other All	Normal enhancement	GTK Sourceview maintainers	2010-01-27 11:09 UTC by	Alexander Kuleshov	2016-10-28 13:11 UTC (	1 user	Createdjsp.langI create jsp.jang for java server page highlighting.p.s. Need in test.	Createdtest jsp fileJSP File for test jsp.langCreatedJSP lang fileDear all,this bug is marked as "FIXED", however I cannot see jsp.lang in source code:I have created another (better IMHO) lang file, and I attach it here, could somebody please upload one of these?Thank you.	3.0	id=760703	7	False	True	pippin	1
id=760703	REOPENED	GEGL	babl	git master	Other Linux	Normal enhancement	Default Gegl Component Owner	2016-01-16 09:42 UTC by	Massimo	2016-02-18 22:07 UTC (	1 user	On my platform running valgrind gegl -o tmp.png tests/compositions/tiff-load.xmlshows many occurrences of:==21258== Conditional jump or move depends on uninitialised value(s)==21258== Use of uninitialised value of size 8This is because that test loads a 16bit float tiff that is thentranslated and so converted to "RaGaBaA float" and the conversiongoes throw the reference path that invokes a half->double conversion.As seen here:probably for performance reasons, the remaining 32 bits are skipped.I don't know how much it is gained writing every other 32bit word asI consider writing to memory a kind of write to a block device whereat least sequential and contiguous writes are often combined, but I never measured it.What are the pratical consequences of this choice?I'd say that it is possible that zero halfs are converted to non zerodoubles (denormal?) and an empty GIMP selection could appear non empty,in fact valgrind reports similar warnings creating a new 16 bit floatimageIt is possible that a reference path conversion randomly differs from anexact fast path hardware assisted conversion, if the difference can begreater than BABL_TOLERANCE the fast path would be rejected.valgrind output contains warnings.	commit cc408deb86082737cf73c7d139f13a9bd56b1626Author: Øyvind Kolås <>Date: Sat Jan 16 11:16:22 2016 +0100 base: fix half reference conversion expecting zeroed target As discovered inthe reference path is currently expecting zeroed memory, fix by explicitly zeroing last 32bit of mantissa.Createdpatch(In reply to Øyvind Kolås from)that commit does not fix the problemThe code is designed to sort of work on both little andbig endian machines and you fixed the big endian case whilethe code is hard coded for little endiannew patch applied and pushed, thank you for the patch and testing(In reply to Massimo from)my patch is wrong as well, it works on little endianmachines only because the loop is executed only onceAnyway you get the idea...re-opening bug; I also note that "next" is never set to 0 like it "should be" for big endian.CreatedpatchThe attached patch should work also in case halfp2doublesis called with numel != 1 and for big endian.The endianness (next = 1) is still hardcoded.Compile-time detection is available in GLIB, but babldoes not use GLIB, extensions/cairo.c containsa run-time detection example, but I'm not anexpert of computer architecturesThank you, renaming the bug to reflect outstanding issue.commitAuthor: Massimo Valentini <>Date: Tue Jan 19 19:07:19 2016 +0100 zero initialize lsb	8.0	id=116487	11	False	True	loban	1
id=116487	REOPENED	gnome-applets	stickynotes	git master	Other Linux	Normal enhancement	gnome-applets Maintainers	2003-07-01 20:09 UTC by	Mårten Woxberg	2013-04-26 19:22 UTC (	2 users	I'll post the reversed suggestion to the kde bugzilla.Make StickyNotes read any possible knotes files with their settings andthus make it easier for ppl to switch between the environments.	I MAY considering reading knotes files, but I probably won't beautomatically reading it's configuration files. UNLESS, of course, itbecomes a standard on freedesktop.org.My sticky notes contents file is a very simple self explanatory XMLfile called ~/.gnome2/stickynotes_applet. Where can I find informationon knotes? I haven't used KDE in years and don't even have itinstalled. I suppose I could use the source. :-)I might email the maintainer, and agree on a standard file format (XMLDTD) for stickynotes (perhaps saved as ~/.stickynotes) that we canboth use.What ever became of this? We're still using the same file, so were the KDEpeople not interested?Yes, I am. I am the author of KNotes and I would like to be able to import stickynotes. However, my time is too limited at the moment, unfortunately :-(( All the effort goes into porting to Qt/KDE 4 at the moment and fixing the resource framework. In KDE we are using the resource framework to locate the notes, the notes themselves are stored in an iCalendar file, the default being ~/.kde/share/apps/kntoes/notes.ics. Each note has a unique UID and the corresponding file in ~/.kde/share/apps/knotes/notes/ holds the display configuration, like color, size, position. I hope to be able to import gnome notes for KDE 4. Cheers, MichaelInteresting. How do you actually use the iCalendar spec to do notes. Are theythen able to appear as Todo list items in $calendaring-app?I am very interested in joining forces on this. Moving the file to a commonlocation (I believe that there are some common fd.o locations). Perhaps we canstore all of that position information and such in the iCal file usingX-XDG-Notes-FGColor headers and such. To save the requirement for multiple files.Then a plugin that did some magic to make stickynotes appear as TODO items inEvolution, perhaps (I don't know if something like that is useful).No, not as TODO, we store the notes as journals (VJOURNAL). I have already added three custom headers to be able to use notes with kolab/imap, for instance: X-KDE-KNotes-BgColor:#ff9b18 X-KDE-KNotes-FgColor:#000000 X-KDE-KNotes-RichText:true With Qt4 it might not be necessary anymore to include the last one, but I do think it is still useful to have, e.g. if you want to store html source in a note. I'll be working on that. I don't know about standard locations for notes yet, due to lack of time. But since the user can configure his resources to load notes from imap, local ics file, directory with several files (soon), kolab, etc. it might be a bit of a challenge to import notes in GNOME without using the KDE resource framework, or at least its configuration files... What do you think?BTW, it would certainly be possible to change the custom headers names (at least I hope so). The only problem I see is with _one_ standard location due to the flexibility in KDE.Well, I see two basic solutions for this. Have a standard config file that sayswhere to look for the information; or simply only share the same on disk formatand default on disk location.Hm... I don't quite understand the second one. The first one: you will be able to find the location in .kde/share/config/kresources/notes/ in the file stdrc (or any other file, should it be in there). This will be possible in KDE 4 only, though. The patch was too late for KDE 3.5 :( The second one: you suggest changing form iCalendar to something else for KNotes? I don't think that's gonna happen, keeping in mind the applications that depend on iCalendar already. I don't want to break kolab for instance.When I say common file. I mean something not in .kde. A simple XML filesomewhere in one of the XDG directories that could be read.For the second one: iCal is certainly interesting, assuming it doesn't suck morethan what we're currently using. I assume you're going to have some kind ofoption that specifies a default location for notes, right, or are you justgoing to let users enter any filename they like? I was suggesting that weneedn't share config, but simply have the same data store and the same defaultlocation for the file.I see, thanks for the clarification. Yes, that sounds good, a default location that we could share would be great, assuming we would be able to share iCal. It actually doesn't suck btw, we can have alarms, hierarchical notes (that I have yet to implement), categories, etc. And we can have links and images in a note using external files or, say, mime-encoded inline data. You see, you get a lot more stuff for free than with XML :-) Regarding locations, yes, the user can choose any filename and location, although the content always will and has to be iCalendar. If you have KDE 3.5 you can try by opening the KControl center, KDE Components->KDE Resources->Notes->select/edit notes resource. (It was not too late for 3.5 apparently :))It seems that using iCal certainly has some available benefits.I certainly like the idea of embedding images and setting alarms (I recallsomething like that in the original post-its program for Win 3.11).Ok. So what custom headers do we have? Here are some ones I've thought of:X-XDG-Note-Geometry: wxh+x+yX-XDG-Note-Workspace: intX-XDG-Note-FGColor: #hexX-XDG-Note-BGColor: #hexX-XDG-Note-Font: fontconfig nameX-XDG-Note-Locked: booleanX-XDG-Note-Visible: booleanX-XDG-Note-RichText: booleanI assume titles are handled in the existing VJOURNAL headers. I guess Locked andVisible could be as well. I'm not incredibly familiar with the spec.Thoughts on file location?FWIW, I think we were using XML because it's easy to parse. I'll have to findout what is involved in using whatever Evolution is using for iCal parsing. AllI know is that iCal is the spec that no one likes to parse.hehe... yeah, iCal is a nice one to parse ;) We (and I think Evolution as well) are using libical to parse it, seems to work well. Recently we upgraded our copy and put some more fixes in, especially with regards to the recurrence stuff. Maybe we can even share the whole lib? AFAIK this was the idea somewhen already... Yes, titles are handled using the Summary: header, the note itself using the Description: header. The custom headers should not include the display configuration, IMHO. That is, the workspace, the position, and the visibility (encoded with workspace 0 if invisible in KNotes). There's the possibility of encoding the visibility in iCal already, though. Another header I could think of is X-XDG-Note-ResourceLocation: url unless we also standardize the url where to store images and similar data, which I'd recommend. BTW, do you prefer FGColor or FgColor? ATM I'm using the latter. File location -- no idea or preference, really... if there are other common locations like calendars already, let's just put the notes in a similar one. Maybe we should aim for a common calendar location as well if there is none yet.It seems that VJOURNAL support was added to Evolution-Data-Server. If we can agree on a format, then we could possibly convince E-D-S that it wants to use that file for its VJOURNAL entries.I'm not entirely sure that we need an X-XDG-Note-ResourceLocation header. With other iCal entry types (at least with VEVENT) it seems that you can base64 attach files (or at least, Evolution is offering a way to attach files to calendar entries). Perhaps we could use the same mechanism here?Setting visibility with iCal would allow greater interoperation with other note taking applications.I am overly fond of the idea of storing everything in the same file, it would make things easier to backup and administer. It would really suck if you backed up ~/.share/notes.vjournal (say via exporting from Evolution), but forgot to backup ~/.share/notes.xml, so you lost all of your geometry and so on.See below, I am currently in a KDE PIM meeting where we discussed our issues about a shared pim storage service. The evolution people have indicated that they would be very much interested in this once it takes off.Yes, that is one way I like and something I have thought about already.Also, the new Akonadi PIM Storage Service we designed here will encapsulate this (resource location) problem. So we will have the GNOME and KDE apps that use a library which wraps the storage access protocol (probably IMAP, possibly also D-BUS) of Akonadi. The library will provide all those features we need and thus we would almost not have to worry about storage anymore.It would be great if you guys could have a look at the required APIs and give some input on what you want it to look like and what you need. Have a look atyes, if we'll store geometry info in iCal then we could most probably store visibility as well. The only somewhat ugly thing is that not every app knows about the concept of visibility, like Kontact.Well, and I keep getting reports from users who want KNotes to be able to store every note in its own file (which is not supported yet).I don't know yet. The question has now changed to "Store geometry info in Akonadi or separately". We would have to store it separately if it should be possible to have the same note on different screens or sessions with different geometry or desktop data.But I start to be able to accept storing the data in Akonadi/iCal.(In reply to)So Akonadi PIM is similar to our Evolution-Data-Server? A process that you talk some manner of IPC to and you can get information back from it?Will do. Have you also sent this on to the Evolution-Data-Server guys?Surely this is an issue that requires resolution in Kontact?Perhaps here an 'Export' feature would be useful. Something that will export a note of your choosing. I think Tomboy has a similar feature.The idea of storing the same note for different monitor geometries is interesting. It would allow users to mount the same home directory from multiple machines, where those machines may have different resolutions. The qOops... continuing from.The question is whether or not it is useful to the user to have an entirely different geometry for each computer (they may find this highly confusing as it will mess up their spatial awareness, eg. "I know that I dragged my note over to the right hand side of the screen yesterday, now where is it, oh wait, that was on another computer") or whether if we have limitations to our geometry, we should just move the notes somewhere they will remain visible.yes, I have the same question you mention above, not sure about the answer. Currently it's not possible for one user to have different note geometries. And I was thinking about two users sharing the same notes with different geometry information, which is (theoretically) possibly already.Regarding visibility in Kontact---it just doesn't make sense. You have all your notes embedded in the app's iconview (or listview, for that matter) and can click on one of them to edit it. Hiding/Showing a note seems not to be a useful concept there.Export: that's there already. The requests were more along the lines of storing notes like mail in a maildir.EDS: Akonadi PIM is similar, but quite different as well. Akonadi will use a protocol (IMAP) instead of IPC and Corba to make it scale. That is needed because Akonadi will also handle mail in addition to calendar, tasks, and notes. And it will support offline mode and syncing. Akonadi can be seen as the local cache that connects to a remote imap server for mail etc. and manages the local data for locally stored mail and notes.I have not talked to the EDS guys personally, but Shreyas (Evolution) knows about it (he's on IRC #Akonadi).I think this bug can be closed now since there's been no activity for the last six years and this user has at least left the linux world for good.	18.0	id=623569	4	False	False	zeuthen	1
id=623569	REOPENED	glib	gdbus	unspecified	Other All	Normal enhancement	David Zeuthen (not reading bugmail)	2010-07-05 06:20 UTC by	Allison Lortie (desrt)	2010-07-06 16:04 UTC (	0 users	I might have missed it, but it seems like GDBus misses a nice API for services to indicate that the value of a property might have changed.	On the client side, there'sOn the service side you will have to use g_dbus_connection_emit_signal() yourself. We could add some convenience on top of that but I don't really think it's worth it - I mean, it's so easy to just use signal_emit() anyway.Note that in the future we might want a GInterface- or GObject-derived type to represent exported service-side objects and the service-side convenience bits for emitting PropertiesChanged would live there. But I think we need to experiment a bit more with things like gdbus-codegen(1)and gdbus-gibefore adding that. Note that gdbus-codegen(1) actually queues up property changes (and also provides a way to emit changes immediately as well) - I think that's probably the way forward.(of course, feel free to reopen if you have concrete API suggestions etc etc)My problem is that building up the (sa{sv}as) manually is very obnoxious. Rather, I would expect that you could give GDBus a list of changed properties (or NULL to mean 'all') and it would call your property_get function and build the signal for you.something likeg_dbus_connection_properties_changed (GDBusConnection *connection, const gchar *object_path, const gchar *interface, const gchar **changed_list);btw: only reopened as per your suggestion if you want to discuss this more. I don't feel super-strongly about this and it's not blocking me... just a 'would be nice'.(In reply to)If we do this, we probably want to be able to specify invalidated properties as well (higher-level code might be able to rely on the org.freedesktop.DBus.Property.EmitsChangedSignal annotation to provide a simpler interface). And I think properties_changed should be emit_properties_changed_signal since GDBusConnection is pretty low-level.So, yah, something like g_dbus_connection_emit_properties_changed_signal ( GDBusConnection *connection, const gchar *object_path, const gchar *interface_name, const gchar* const *changed_property_names, const gchar* const *invalidated_property_names, GError **error);might work. Should allow NULL for the two string arrays. Need the GError since the connection may be closed or one of the properties may contain a GVariant value that is not compatible with @connection (e.g. values containing instances of the 'm' or 'h' types).i was thinking that the invalidated case could be handled by the get_property() call returning NULL when queried.was thinking also that maybe we can use the guint returned from the register call in order to avoid the object_path/interface_name arguments. it's almost a shame that we don't return some sort of an object here.... (that object could also be used for emitting "normal" signals on the object for a higher-level service API)(In reply to)Ugh, that sounds like a hack, NULL is reserved for when the passed in GError** is set. I don't want to overload it so it has two meanings.Note that "invalidated", as per the D-Bus spec use of the word, doesn't mean that the property has no value - only that we don't want to broadcast the change. The thinking is that "heavy" properties, for example ATA SMART data that weighs several thousand bytes, will want to use this.So just because a D-Bus property is "invalidated" (only the name is sent in PropertiesChanged) instead of "changed" (both the name and value is in PropertiesChanged) have nothing to do with get_property() returning NULL (as it never should be doing).I actually think such a layer of indirection is going to cause more confusion/harm than good. I'd rather that we keep GDBusConnection as low-level as possible and instead build other abstractions (such as gdbus-codegen(1) and gdbus-gi) using it.(In reply to)The reason that I mention it is because vala generates some nasty-looking code here. Essentially, it shoves the instance pointer, the GDBusConnection and the object path into an array of gpointer[3] and uses that as the user_data.It needs to do that so that it can have the connection/path when it comes time to emit signals (since there's no way to get that if you're just holding the instance).Of course, it works perfectly fine...	8.0	id=763475	7	False	False	kai.willadsen	1
id=763475	REOPENED	meld	general	3.14.x	Other Windows	Normal enhancement		2016-03-10 20:11 UTC by		2016-04-01 21:32 UTC (	1 user	Many times during a merge I find that I have to manually edit the file to include changes from both the left and the right side. It would be nice to have the option to right click on the section and select merge left then right or right then left.	This isn't in the right click menu, but what's wrong with using either the actions in the menu or the arrow buttons in the middle bar?Thanks for your reply Kai, sorry for my slow response.On my version, 3.14.2 on windows 8, the arrows select either left or right. If I click the left side arrow then the right side, the left side changes go away as if I never clicked the left arrow (and vice versa).I don't see an option like I suggested in the Changes menu.With all that said, I just discovered that holding control and using the arrows allows me to add the content from both sections.Okay, I think I understand the problem, but I suspect that what you want is impossible. We can't automatically merge any segment where there's actually differences between the left, middle and right panes, because that's a conflict.As you've found, you can move one side and copy the other, and that will usually at least help, but I'm not sure what else we can do.I'm going to resolve this bug, but if I've misunderstood what you're asking for, please do reopen it.Not quite. The middle lacked both left and right sections and I wanted to accepted both left and right, instead of left or right. Holding control allows me to do that with the arrows (turning them to pluses). The downside to that is its a little hidden since I didn't find another way to accomplish this through the GUI.Sure, I understand. Those actions are also in the menu (Copy above/below left/right) but I can appreciate that they're not immediately obvious. However, the only other option I can think of is to introduce two new actions (one for left on top, one for right on top) and I'm not convinced that that's worth it for this particular case.Thanks anyway for your bug report.Createdgreyed out guiCopy above and below greyed out.Sorry, I don't mean to be kicking a dead horse. Those menu options are greyed out when I want to take both sides.Seriously, I appreciate your time with me on this.I would only mind you kicking the dead horse if you didn't have a point, but you definitely do.So you can't copy above/below because there's nothing in the middle to be above or below. If you push either the left or right sides into the middle, those actions should be active from the other pane. If there's not a line in the middle, the change is classified as an "insert", so we don't enabled the copy actions.I would really like to figure out how to make this experience better, because right now it's clearly a bit rubbish. I feel like what we do currently is... correct... but not always helpful. If you have suggestions then please feel free to add them; otherwise I'll just leave this open and hope that inspiration strikes.	8.0	id=509201	22	False	False	muntyan	1
id=509201	REOPENED	glib	win32	unspecified	Other Windows	Normal enhancement	gtk-win32 maintainers	2008-01-13 19:53 UTC by	Yevgen Muntyan	2015-08-28 12:58 UTC (	9 users	Attached patch adds a new GSpawnFlag G_SPAWN_WIN32_HIDDEN_CONSOLE which makes g_spawn spawn the console helper with hidden console using CreateProcess(). It's done in such a way that CreateProcess is used only with the new flag.	CreatedpatchCreatedpatchUpdated patch, previous one was broken if envp was non-null.I figure the recommended way to spawn processes without console is to patch their binaries:In that case this patch isn't going to fly probably.Hey, don't despair yet. This bug has been open for less than a month, for chrissake.Could you tell us in detail exactly what scenario it is that you intend to fix, please. I think I know, but please do write it up.The intention in gspawn-win32.c is that if the process already has a console (either because it is a console process and hasn't done anything special, or it is a "GUI" app but has allocated itself a console), then the gspawn-win32-helper-console.exe (which, as the name indicate, is the "console" version) is used, and it should then use the same console as the calling process. On the other hand if the process does not have a console (either because it is a "GUI" app that hasn't done anything special, or it is a console app that has got rid of its console), then gspawn-win32-helper.exe is used, and it is a "GUI" app it doesn't open any console either.Does the above not work? Note that I said nothing yet about the actual process that the calling code wants to start yet.Now, if the actual process the user then wants to start is a "console" or "GUI" app will then direct whether it needs a console window or not. I have on purpose let it be that program's own business whether it wants a console or not. But you probably are right (if that is what you want), that it would be useful if there was a way in GLib to force the actual started process to never have any console in any case even if it wants one.There are some issues with your patch, though.Firstly, why did you hide the fix for the bug that read_helper_report() forgot to set the GError properly in one case in this otherwise unrelated patch? (Luckily I happened to notice that problem a week ago while working on another roblem in gspawn-win32.c.) You should have opened a separate bug for this issue and not silently slipped the fix into this unrelated patch.Secondly, if we use CreateProcessW() directly and not the C library spawn functions, we should inherit the inheritable C file descriptor to HANDLE mapping just like the C library does. (Then the trick to pass HANDLEs instead of file desriptors on the command line will be unnecessary, too.)Unfortunately I am not sure whether it is possible to do it in the same way, as used code has no knowledge of which C file descriptors are marked to be noninheritable, does it? Isn't that information internal to the C library only? I would say that inheriting C file descriptors is a feature apps certainly expect to work and not something we can regress away. Of course, it could be documented that if one uses the G_SPAWN_WIN32_NO_CONSOLE_EVER_DAMMIT flag (or some other combination of stuff, see below), then C file descriptors are not inherited. But that does sound a bit random.And if we start using CreateProcessW() directly in this always-hide-console case, we probably should do it also in other cases where possible. For instance, if the started process should have a different working directory than the calling process, but otherwise the helper process wouldn't needed, then if we use CreateProcessW() we don't need the helper process.All in all, I hope you realize from this much too verbose comment that the issue is not as clear-cut as it perhaps seems to you...(In reply to)[snip]I am running a console application (such as grep.exe) from a GUI application, with redirected stdin/stdout/stderr, so using g_spawn_* I get a console window which appears, displays nothing, waits and disappears.That's the thing, not all console programs *want* console. Many programs do want stdin/stdout or are aware that their standard input and output can be redirected, but few want the win32 console window. And as I am running those programs, I know for sure whether *I* want a console.I didn't hide it, it hid from me!Even if we knew which file descriptors are inheritable, it'd be impossible to recreate them in the child process, no?Yes it does. It's a downside. But I don't think it's a big deal (since this hidden-console thing is a pure addition).Sounds right.What seemed clear-cut to me is that you truly believed that patching a binary was a way to spawn processes with hidden console ;)Just to chime in -- what would make sense from my point of view is a mode that didn't inherit file handles / descriptors mode other than stdin/stdout/stderr. This is the case I use all of the time and maps to the win32 api quite easily. I think code for this case would be much easier to understand and debug.Apologies if this has already been discussed or implemented -- I haven't had time to check out what is in svn now.(In reply to)Is it possible? STARTUPINFO docs say you have to use bInheritHandles = TRUE in CreateProcess() to be able to pass stdin/stdout handles to the child process. But that argument will also make the child process inherit all inheritable handles (and all handles created under the hood by open() and friends must be inheritable).In any case making child process not inherit anything but stdin/out/err is what glib *should* do when you don't use G_SPAWN_LEAVE_DESCRIPTORS_OPEN, so if it's possible then of course glib should do it. I think.msdn is down so I can't look right now, but I will try to find time to do so. It looks as though the direct win32 api functions that create handles makes them non-inheritable by default, but the CRT does. I _think_ there should be a way to make this work, but there may not be a way to do it.(In reply to)Hmm, I now think the above is wrong -- there seems to be no way to only inherit stdin / stdout / stderr if those handles are not stdin / stdout / stderr of the parent process. The closest I found to a clear confirmation of this isThe kb article does point to a workaround for the not G_SPAWN_LEAVE_DESCRIPTORS_OPEN case using an intermediary process, but one would either have to lose the pid of the child or wait for the intermediate process to get the pid of the child.That happens automatically when you spawn a child program if both parent and child are written in C and use the Microsoft C library. Look in dospawn.c and ioinit.c in the Microsoft C library sources, either from an old Platform SDK or Visual Studio.But glib isn't C library, so e.g. if we know what file descriptor 18 is, glib can't create a file descriptor 18.No, glib can't, but the C library can and does. So what is your point?If a process is started using one of the spawn* or exec* class of functions in one of the Microsoft C libraries, and the process that is started uses the one or several of the Microsoft C libraries (because the .exe is linked to a such and/or one or several of the DLLs that the process uses is linked to a such) then in the started process's C libraries the file descriptor will be recreated.This won't work if the process is started directly with CreateProcess() without taking care of the file descriptor inheritance. And then again, taking care of file descriptor inheritance properly requires knowing which file descriptors are set to be noninheritable. And that information is available only inside the C library.I am not strictly against the functionality proposed in the patch, but as the patch current is, it is not acceptable. The patch adds the flag G_SPAWN_WIN32_HIDDEN_CONSOLE which is defined only #ifdef G_OS_WIN32. So thus clearly code that intends to use this flag is either a priori for Windows only, or it needs to have #ifdefs. Thus the code that would use the proposed G_SPAWN_WIN32_HIDDEN_CONSOLE flag could as well call CreateProcess() itself and take the respondibility of knowing what is going on.It would require adding some amount of exceptions and verbiage to the documentation (which already lacks mentions of many of the Windows details) to make it clear that if the proposed G_SPAWN_WIN32_HIDDEN_CONSOLE flag is used then many of the other flags are meaningless. And if they are, I repeat, what is the point then of using g_spawn* in the first place, why not just call CreateProcess() in the code itself.My take on this issue is this:The g_spawn* API does not abstract all possible details and tricks related to subprocess creation available on the various platforms. And some of the g_spawn* API is clearly designed from a UNIX point of view, like the child_setup function which makes sense only on UNIX with its fork(). If GLib-using code needs platform-specific things to happen when creating a subprocess, go ahead and use ifdefs in the code and call the actual platform-specific subprocess creation APIs instead. Sorry. Should probably resolve this as WONTFIX.(In reply to)And code using g_spawn can just use fork() and exec(), piece of cake. Sorry, "as well" is bull. I sure can call CreateProcess; but it's a huge difference for me whether to add three lines of code with the flag (two of them being #ifdef and #endif) or to implement spawning process and attaching GIOChannel and figuring out whether child watch will work with what I got from CreateProcess and I don't know what else.(In reply to)Done.So, do we consider it normal that the empty console flashes up and disappears? Is this something that should be documetned?Murray: no, it is definitely annoying. A well thought out patch that takes all points discussed above into consideration would certainly be considered. Not a patch that just happens to work for some trivial case but in general breaks implied or explicit API contracts.Could you demonstrate how to make file descriptors inherited when you use CreateProcess? That might answer your question from #11 and #13. A new flag is 100% backward-compatible, breaks nothing, works always; well thought out patch reimplementing g_spawn with CreateProcess will not be backward-compatible. What exactly do you mean by that good and nice patch?See dospawn.c. You will notice that not all information about C file handles is available outside the C library.As I already said, as the flag is Win32-only, any code that uses it would obviosuly need to do that inside #ifdef G_OS_WIN32, and then it could as well call CreateProcess() directly. The flag should be made cross-platform (but a no-op on Unix). And its exact semantics of it should be documented, including the fact that using it breaks C file descriptor inheritance.So, all this patch needs is making the G_SPAWN_WIN32_HIDDEN_CONSOLE a no-op on non-Win32, and documenting the fact that it won't work with descriptor inheritance? And after that we can at least finally live happily without our flashing console windows?CreatedAn updated patchI'm attaching an updated patch. What I did:* updated it so it applies cleanly against GLib git master;* made G_SPAWN_WIN32_HIDDEN_CONSOLE defined on all platforms (ignored under non-win32);* added some (hopefully correct) documentation describing the flag.I did a compilation test but didn't do anything beyond that.Isn't still the problem that I mentioned inpresent in the patch, i.e. C file descriptors won't be inherited in the code path that uses CreateProcess() directly?I wonder how secret Microsoft considers the way that is implemented? Probably they would not mind if one duplicated the functionality in the C library that makes C file descriptors inherited. But I am not a lawyer...(I.e. the "secret" is how the cbReserved2 and lpReserved2 fields in the STARTUPINFO struct is used to pass the mapping from inherited C file descriptors to Win32 file handles. Se comment in ioinit.c in the Microsoft C library sources.)(About finding out which C file descriptos are supposed to be inherited and which not, I take back what I said in. One can know that indirectly. It seems that the C library is careful to match the inheritability of C file descriptors with the inheritability of the corresponding Win32 file handles when creating such mappings (in open(), pipe(), and dup() at least). And one can easily get at the latter information.)But if we document clearly that using G_SPAWN_WIN32_HIDDEN_CONSOLE will mean C file descriptors other than 0, 1 and 2 won't be inherited, I guess that is OK, even if ugly.CreatedAn updated patch (clearer docs)I'm attaching a new patch - same as earlier, but the documentation clarifies stdin/stdout/stderr inheritance.Tor, regarding your point about descriptor inheritance: I didn't touch the original implementation (so no thoughts about how to implement what you said), but the fact that no descriptors are inherited is documented already (see the patch).For me, the result is that finally I can spawn third-party CLI programs from my application (e.g. smartctl, tw_cli (this one has no source available)). I don't need the extra functionality as long as I can read their output. I'm sure lots of people use these functions this way (at least judging by google code search) and are willing to deal with the file descriptor loss. Since the existing functionality is untouched, I don't see anything awfully wrong here.Any plan to include Alexander's fix in Glib (with an updated patch against the latest Glib of course)?Having the flashing console every time a process is spawned is really bothering people, furthermore if the spawned process it's a long process and someone closes the console the process will terminate.PyChess is a GUI program written in pygobject. It starts chess engines (console programs!) to play/analyze with GLib.spawn_async(), but don't want to show their console at all. It's ok on Linux, but not on Windows. Consider applying Alexander's patch, please!	25.0	id=534626	30	False	False	jimhayward	1
id=534626	REOPENED	bluefish	application	development (SVN TRUNK)	Other All	Normal enhancement	Bluefish Maintainer(s)	2008-05-24 12:50 UTC by	czd	2011-12-12 02:53 UTC (	7 users	Palettes are standard Gimp Palette files (*.gpl) and can be added in the GNOME application Agave () by dropping a file in "~/.local/share/agave/palettes" and for all KDE applications a textfile (*) in "~/.kde/share/config/colors/".	Changing the version to SVN TRUNK. It is unlikely this feature will be added to the old 1.0 branch.Is a feature for the GNOME color picker. Bluefish use this picker.I don't think we want to make the normal GTK+ color picker considerably more complex by adding palettes to it.Obviously some apps (GIMP, conceivably Bluefish) have colors as a central component and may have more complex requirements.Why is this now "Product:Gnumeric"??This probably needs to be reopened.***has been marked as a duplicate of this bug. ***Changing the version to SVN TRUNK.	7.0	id=347825	32	False	False	murrayc	1
id=778520	REOPENED	evolution	Contacts	3.23.x	Other All	Normal enhancement		2017-02-12 10:07 UTC by	Rui Moreira	2017-02-12 17:04 UTC (	1 user	CreatedmockupUsing the gridview in the contact manager, it would be a nice feature to display the photos , it would be a visual aid and a overal nice feature to have.	There is no "grid view" in Evolution in its Contacts module, and the Preview pane already displays photos of contacts after choosing a contact.Hence closing as INVALID/WONTFIX.Hello Andre The request was for the photo to be visible without having to select the contact.	2.0	id=778520	7	False	True	ruimoreira29	1
id=347825	REOPENED	pygtk	general	Git Master	Other All	Normal enhancement	Nobody's working on this now (help wanted and appreciated)	2006-07-17 18:45 UTC by	Rafael Ávila de Espíndola	2006-07-31 12:44 UTC (	3 users	use __attribute__ ((visibility ("hidden")))	Createduse hidden visibility if compiling with gcc >= 3.4Ideally you would have a configure test that discovered whether this compiler feature was supported. Then you'd use the resulting define (from your config.h) to conditionally define a macro for this. glibmm does this kind of thing often for other compiler features.Createddefine HAVE_GNUC_VISIBILITYDefining something like HAVE_GNUC_VISIBILITY is an improvement, since new tests don't have to test the gcc version. I don't like to use configure for such simple tests, but if it is required I can create a new patch.Comment ondefine HAVE_GNUC_VISIBILITYThis is missing proper namespacing. Please change the macro name to PYGTK_HIDDEN.It would be nice also to push this macro upstream to glib, for glib 2.14.Other problems:hidden.h is not installed. Yet, codegen unconditionally generates code that requires inclusion of this header. I bet gnome-python-* will no longer build with this patch.I suggest merging hidden.h into gtk/pygtk.h, or into pygobject.h (in pygobject), or install hidden.h and include it from pygtk.h.Createddefine PYGOBJECT_HIDDENCreateduse PYGOBJECT_HIDDEN(In reply to)I will ask them to make G_HAVE_GNUC_VISIBILITY visible to user code.G_HAVE_GNUC_VISIBILITY is already used in gtk+ 2.10..PYGOBJECT_HIDDEN should be PYG_HIDDEN; that's for consistency, we've used PYG_ prefix in pygobject since forever...Createddefine PYG_HIDDENCreateduse PYG_HIDDEN(In reply to)I think that it is used internally only. I have gtk+ 2.10 installed and "grep -r G_HAVE_GNUC_VISIBILITY" in /usr/include returns/usr/include/gtk-2.0/gdk/gdkalias.h:#ifdef G_HAVE_GNUC_VISIBILITY/usr/include/gtk-2.0/gdk/gdkalias.h:#endif /* G_HAVE_GNUC_VISIBILITY *Apparently "since 2.6", so...PS: these macros are in /usr/lib/glib-2.0/include/glibconfig.h, that's why you can't find them grepping /usr/include.Createdalternative patch that uses G_GNUC_INTERNALComment onalternative patch that uses G_GNUC_INTERNALPlease drop the <glibconfig.h> includes everywhere; you don't need them. After that, it's ready for commit.Actually we do. I added them because the build was failing.(In reply to)Weird... :| glib/gtypes.h includes it, and glib/gtypes.h is needed everywhere...In fact, the patch compiles fine here in HEAD if I remove the <glibconfig.h> #includes; what glib version do you have?I have just tried the patch without the includes and it works. I was having some problems with the *.c not being regenerated automatically. I though that the problem was the missing includes.Reopening to hold any extra patches floating around...Createdmake pyglade_xml_new staticCreatedmake pygdk_event_handler_marshal staticCreatedmake PyGContainerIter_Type staticCreatedmake pygtk_tree_model_row_iter_getiter staticCreatedmake pygtk_tree_model_row_iter_next staticCreatedmake _wrap_gdk_event_tp_getattr staticCreatedmake _wrap_gdk_gc_tp_getattro staticCreatedmake pygtk_make_pixbuf_format_dict staticCreatedmake pygtk_find_char_pred staticCreatedmake PyGtkDeprecationWarning staticIs it really necessary to put every single change in its own patch?No, but I did it to make it easier for you to accept or reject it. I have them in a local branch with svn. I can build larger patches if necessary.(In reply to)Yes, please, it'll make it easier to apply them. If you feel that the changes are unrelated, group some of them together. Sending one change per patch provides a bit of overhead, for both you and the review/applier.Createdmake some symbols static***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Committed to CVS, thanks!Checking in ChangeLog;/cvs/gnome/pygtk/ChangeLog,v <-- ChangeLognew revision: 1.1581; previous revision: 1.1580doneChecking in atkrectangle.override;/cvs/gnome/pygtk/atkrectangle.override,v <-- atkrectangle.overridenew revision: 1.2; previous revision: 1.1doneChecking in gtk/gdk.override;/cvs/gnome/pygtk/gtk/gdk.override,v <-- gdk.overridenew revision: 1.149; previous revision: 1.148doneChecking in gtk/gdkevent.override;/cvs/gnome/pygtk/gtk/gdkevent.override,v <-- gdkevent.overridenew revision: 1.4; previous revision: 1.3doneChecking in gtk/gdkgc.override;/cvs/gnome/pygtk/gtk/gdkgc.override,v <-- gdkgc.overridenew revision: 1.2; previous revision: 1.1doneChecking in gtk/gdkpixbuf.override;/cvs/gnome/pygtk/gtk/gdkpixbuf.override,v <-- gdkpixbuf.overridenew revision: 1.2; previous revision: 1.1doneChecking in gtk/gtk-types.c;/cvs/gnome/pygtk/gtk/gtk-types.c,v <-- gtk-types.cnew revision: 1.58; previous revision: 1.57doneChecking in gtk/gtkcontainer.override;/cvs/gnome/pygtk/gtk/gtkcontainer.override,v <-- gtkcontainer.overridenew revision: 1.17; previous revision: 1.16doneChecking in gtk/gtkmodule.c;/cvs/gnome/pygtk/gtk/gtkmodule.c,v <-- gtkmodule.cnew revision: 1.74; previous revision: 1.73doneChecking in gtk/gtktextview.override;/cvs/gnome/pygtk/gtk/gtktextview.override,v <-- gtktextview.overridenew revision: 1.19; previous revision: 1.18doneChecking in gtk/libglade.override;/cvs/gnome/pygtk/gtk/libglade.override,v <-- libglade.overridenew revision: 1.31; previous revision: 1.30doneCreatedhide some symbols	38.0	id=76523	10	False	True	luis	1
id=76523	REOPENED	rhythmbox	Plugins (other)	unspecified	Other Linux	Normal enhancement	RhythmBox Maintainers	2002-03-26 23:00 UTC by	Seth Nickell	2006-12-23 22:13 UTC (	2 users	Add volume meter support to monkey sound (maybe this should be handledthrough the same mechanism as visualization? its just another form ofvisualization really)	Monkey Media has been removed from the 0.9.x series AFAIK, changing component to "User Interface".Closing as a dupe ofas per, it's really a specific kind of visualisation.*** This bug has been marked as a duplicate of***It's a specific kind of visualisation that should be handled separately to the the typeis adding.Update summary, monkey-media is dead.	4.0	id=662232	8	False	False	mclasen	1
id=662232	REOPENED	gnome-shell	general	unspecified	Other Linux	Normal enhancement		2011-10-19 19:26 UTC by	Alex Hofbauer	2016-11-12 14:32 UTC (	3 users	Currently the possibilities to configure input are quite limited.While I agree that "normal" people don't need more than one keyboard shortcut for one option, there's still a lot of input events one could use for various tasks in gnome-shell. For example I'd like to bind the thumb button of my mouse to switch to overlay mode which comes in really handy for window selection.Currently I can only achieve this by using xbindkeys and a lengthy dbus call [1]. It works, but I consider it quite ugly because the mouse button has to be released while executing that call or it will block the whole action (and nothing happens at all).[1] dbus-send --session --type=method_call --dest=org.gnome.Shell /org/gnome/Shell org.freedesktop.DBus.Properties.Set string:org.gnome.Shell string:OverviewActive variant:boolean:true	Thanks for taking the time to report this.This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***I'll reopen, as this is about mouse button bindings, not keybindings.	2.0	id=591991	8	False	True	bulb	1
id=591991	REOPENED	vala	general	0.7.x	Other Linux	Normal enhancement	Vala maintainers	2009-08-16 17:26 UTC by	Martin Olsson	2016-11-30 17:04 UTC (	3 users	When a certain package is not installed Vala generates C code which is not compilable. For newbies these errors will be non-intuitive and they force people to deal with the "implementation detail" that is C.Besides a pony, I also wish for a feature in Vala that detects un-installed libraries and prints a nice newbie friendly error message.To repro the issue, make sure that "libgoocanvas3" is not installed on your machine. and then compile this Vala code:using Goo;int main(string[] args){ var x = new Goo.Canvas(); return 0;}You'll see something like:$ valac --pkg goocanvas --pkg gtk+-2.0 main.valamain.vala:5.6-5.25: warning: local variable `x' declared but never used var x = new Goo.Canvas(); ^^^^^^^^^^^^^^^^^^^^/some/path/main.vala.c:4:23: error: goocanvas.h: No such file or directory/some/path/main.vala.c: In function ‘_main’:/some/path/main.vala.c:17: error: ‘GooCanvas’ undeclared (first use in this function)/some/path/main.vala.c:17: error: (Each undeclared identifier is reported only once/some/path/main.vala.c:17: error: for each function it appears in.)/some/path/main.vala.c:17: error: ‘x’ undeclared (first use in this function)/some/path/main.vala.c:18: error: expected expression before ‘)’ tokenerror: cc exited with status 256Compilation failed: 1 error(s), 1 warning(s)The change I would like to request is that valac stops compilation right at "using Goo" (whenever the vapi is available but the .pc file is not installed or something along those lines) and then just print "error: Development files for library 'Goo' is not installed."The Vala program should see a Vala equivalent to "error: goocanvas.h: No such file or directory" instead of making it through Vala compilation and being left with some obscure C compiler error instead.	That's unfortunately not all that easy. There are many, many .vapi files that do *not* have corresponding .pc files (posix.vapi, zlib.vapi, ...).IMHO this is job for vala support in the build system. I can imagine autoconf, waf, SCons and similar tools to have a 'VALA_CHECK_PKG' function similar to 'PKG_CHECK_MODULE', which would look at the vapi, find the header names mentioned therein and than: - Try to find corresponding .pc file, but continue anyway if not found and - Try to find the headers, using the include options from the .pc if anyand fail if the headers are not found.The compiler is probably not the right place to care. The C compiler does not care either -- it simply says it does not see the headers.That said, it would probably be possible to have some annotation in the .vapi file declaring that a corresponding .pc should exist, so valac can error out, but it's not such a trivial work.Good point. I prefer the VAPI metadata idea though because while I recognize that sometimes you just need a full build system; I also value being able to do a quick "valac *.vala" and still get a good user experience.Compiling:using Goo;int main(string[] args){ var x = new Goo.Canvas(); return 0;}with current git master version of Vala produces:test.vala:1.7-1.9: error: The namespace name `Goo' could not be foundusing Goo; ^^^This requires the VAPI to be installed, but not the C headers. So compiling with:valac --pkg goocanvas test.valastill produces:gtk+-2.0.vapi:5871.40-5871.42: warning: Gtk is deprecated. Use gtk+-3.0test.vala:4.14-4.16: warning: Goo is deprecated. Use goocanvas-2.0test.vala:4.6-4.25: warning: local variable `x' declared but never used var x = new Goo.Canvas(); ^^^^^^^^^^^^^^^^^^^^/home/al/test.vala.c:9:23: fatal error: goocanvas.h: No such file or directorycompilation terminated.error: cc exited with status 256Compilation failed: 1 error(s), 3 warning(s)So valac would have to cope with three states: 1. producing C code only by using --ccode or -C switch, this should have no header check 2. producing C code and using the C compiler where the headers have a corresponding pkgconfig file, as suggested earlier this would probably have to have something like a [CCode (pkgconfig_name="goocanvas")] annotation detail added to the namespace 3. producing C code and using the C compiler where the headers have no corresponding pkgconfig file	4.0	id=395689	12	False	False	lars	1
id=395689	REOPENED	dia	shapes	0.96	Other All	Normal enhancement	Alan Horkan	2007-01-12 05:43 UTC by	Johann	2009-04-11 11:51 UTC (	2 users	I've created a couple of optics / photonics shapesAtm they are all in the included "Optics" sheet. Components include: circulators, couplers, modulators, laser, polarization controller, gratings, isolators, attenuatorsAlso included, which could probably be moved to a more generic "Electrical" sheet are the following new shapes:scope, spectrum analyser, detector-Johann	CreatedOptics ShapesThank you for the contribution. It is not going to be added during feature freeze, but will be up for the next version after.I'm going to add these shapes to the Dia shape repository.Johann: Would you like to add an email address to the README file?I assume that you agree to GPL licensing.An example diagram that illustrates the use of these shapes would also be nice.I've added the shapes to the Dia Shape Repository:version 0.96 to get rid of -pre*with an example diagram using these sheets they should be integrated with 0.97Closed by mistake :-(removing target 0.96 and not adding target 0.97, without an example they wont be integrated with Dia at all.	8.0	id=747923	8	False	False	gwidion	1
id=747923	REOPENED	GIMP	Tools	2.8.14	Other All	Normal enhancement	GIMP Bugs	2015-04-15 14:06 UTC by		2015-06-06 14:41 UTC (	2 users	I would love to either have an option on the Pencil tool, or another tool, that allows you to draw lines very similarly to the Pencil tool, but with antialiasing.The paintbrush doesn't work for that because it's too blurry for precision work (and it doesn't snap to pixels like the pencil), and the pencil leaves jaggies.	The tool you are asking for is exactly the paintbrush. It does not make sense in asking for "antialiasing" and "snapping to pixels".If you are not getting the effects you expect, please try to fine-tune the tool with the paint-mode, painting dynamics, smooth stroke, and specific brushes - and post-paint effects that might enhance the contrast of your lines. (you may also try the colors->curves tool).Because the technical implementation of both tools is already exactly the same, but for the anti-aliasing.After getting close to what you want, if you think the program might have an easier way to get to your desired painting needs - like a fixed tool preset, please open another report.This was discussed on the Freenode #gimp yesterday. What you be interesting for this approach would be a way to make the paintbrush snap to pixel centers instead of pixel edges (this is what causes blurry lines even with a 1 px brush in the first place). One way to achieve that could be grid offsets that allow fractions, e.g. .5 .5 pixels.Even the pencil tool would benefit from that - if you zoom into "I see individual pixel" level, you'll notice that it can get pretty hard to really stroke the row or column of pixels you intend to, as the switch to a different pixel happens when you move the mouse over the pixel center and not when you move over a grid line.I see the point now- this describes better the situation (also, before closing the bug before, I did try both tools and can perceive what are you talking about)So, right now a 1px wide paintbrush stroke for, say 100% red on a white BG will be pink - the goal here is to have a way to create such a line that is perceived as close to RGB(1,0,0), while not being too aliased.Some more tests - looks like the workaround for now is to use a paintbrush of radius 2px (to mimic a stroke made with a pencil of radius 1px).As for the "correct" fix, it is likely a problem in the way antialiasing is implemented while painting at all. (The perceived final color in a group of pixels, on painting with opacity 1, should be the FG color);	4.0	id=674039	21	False	True	a9016009	1
id=725266	REOPENED	glib	general	unspecified	Other All	Normal enhancement		2014-02-26 19:45 UTC by	Allison Lortie (desrt)	2014-03-05 14:06 UTC (	1 user	we should add an alarm function to automatically fail tests that take more than a certain amount of time to run (on the assumption that they've deadlocked).something on the order of a minute is probably fine.i think the best way to do this would be to spin up a dedicated thread that sits around waiting for time to pass. once enough time passes, it can abort the process.i specifically don't think that we should try to use gmaincontext to do this because some tests still fork, and forking after gmaincontext is up is not safe.it should be possible for individual tests to adjust the timeout (for performance tests) or for the environment to do it, either via environment variable or commandline switch (to facilitate 'make check' on very very slow builders).	Sorry for the delay. Fixed!erm... git-bz fail?	2.0	id=725266	5	False	False	desrt	1
id=771777	REOPENED	nautilus	general	master	Other Linux	Normal enhancement	Nautilus Maintainers	2016-09-21 18:01 UTC by	Mohammed Sadiq	2017-02-03 14:01 UTC (	2 users	porting nautilus code to G_DECLARE*_TYPE shall reduce a a huge number of boilerplate code.That would make nautilus code better and easier for newcomers and others alike.	Yes, however this is a implementation detail, and it's too abstract. Not sure it worth to have a bug report.Only case I can think of is to assign newcomers tasks, but we already discussed this in the channel and we decided this task was too tedious for newcomers.So I'm closing as not a bug.(In reply to Carlos Soriano from)We did? I only remember you agreeing with me that NautilusFilesView was maybe too much for a newcomer (the newcomer I had in mind was one, who has little coding experience). Otherwise, I think this is great.This could be a metabug for tracking (i.e. playing with dependencies, for easier discovery and whatnot).Two against one, you win :) reopening and marking for newcomers.	3.0	id=679115	24	False	True	fanc999	1
id=249075	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other All	Normal enhancement		2003-09-29 22:45 UTC by	Marcin Kowalczyk	2012-02-14 10:42 UTC (	1 user	The contents of the Location column isleft-justified which makes it hard to see if oneuses nested folders, unless it is made very wide.Especially as almost everything starts with thesame prefix "Lokalne foldery/" (I haven't checkedif the original translation is shorter). IMHO itwould be more useful to right-justify the columncontents or at least remove the common prefix.It would also help if columns with wide contentswould be scrollable (horizontally). Thenright-justifying would be unnecessary.	No longer applies in 2.0I'm sorry, but it still applies to 2.8.2.1. The beginnings of folder names are shown in the Location column when the column is too narrow, and they are usually all the same. It would be more useful to display the endings of folder names if the whole name doesn't fit.Moving this to Mailer.Should be ellipsized in the middle, actually.This would require the ability to specify the ellipsize type in the ETable specification file (.etspec). ECellText is currently hard-coded to always ellipsize the end the string. Marking this as an ETable enhancement.	5.0	id=249075	19	False	True	gerardo	1
id=679115	REOPENED	GStreamer	gstreamer (core)	git master	Other Windows	Normal enhancement	Fan, Chun-wei	2012-06-29 09:41 UTC by	Fan, Chun-wei	2014-02-07 00:29 UTC (	3 users	CreatedWindows: Make GStreamer Data and plug-ins relocatable.Hi,It seems from the win32/common/config.h that the paths of plugins, libraries, data, locale stuff are hardcoded to some sub-folder under c:\gstreamer on Windows builds.This patch adds functionality to the various sources in gst/ to make up the corresponding paths dynamically at run-time, so that the plug in DLLs and other data can be moved without rebuilding the code. This is done in a similar way to code in the GTK+ stack, as installation destinations of Windows programs are subject to change from installation to installation.Thanks for the time, with blessings!	Comment onWindows: Make GStreamer Data and plug-ins relocatable.If I'm not mistaken this leaks directory strings all over the place, e.g. the return values of g_win32_get_package_installation_directory_of_module(), but also the return values of _get_{libdir,plugin_scananer_dir}().CreatedMake GStreamer relocatable on Windows (take 2)Hello Tim-Philipp,Yeah, I missed out on the g_free() calls that is needed, so I redid the patch here. Note that I did not do the g_free() calls in gstpluginloader.c and gstpreset.c as their respective return variables were g_free'd initially.With blessings, thanks.Ok, I think this still leaks the return values of g_win32_get_package_installation_directory_of_module(), but we can fix this up. I think I might prefer a solution where get_foo_dir() is always called, and for the non-win32 case it just returns g_strdup (FOODIR) then or so, that way the code pa.ths and g_free()s etc. are consistent and in the unconditional code path, but that's also easy to do.Adding Andoni to CC in case he's got an opinion on this as well.Setting target to 1.1.x dev cycle.Review of:Sounds like a good idea in general but:::: gst/gst.c@@ +124,3 @@+{+ return g_build_filename (+ g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle),Leaks return value of g_win32_get...()@@ +125,3 @@+ return g_build_filename (+ g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle),+ "lib",If it is called lib or not depends on the parameters passed to configure, i.e. --libdir. Could also be called anything else@@ +1129,2 @@ g_type_class_unref (g_type_class_peek (gst_allocator_flags_get_type ())); Why these unrelated changes? :)::: gst/gstpluginloader.c@@ +65,3 @@+{+ return g_build_filename (+ g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle),Leaking return value@@ +67,3 @@+ g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle),+#ifdef _DEBUG+ "debug",Is this standard?@@ +69,3 @@+ "debug",+#endif+ "lib",This one is in libexec, not lib. Also configurable with --libexecdir at configure@@ +73,3 @@+ NULL);+}+#define GST_PLUGIN_SCANNER_INSTALLED get_plugin_scanner_dir()You'll leak the memory here because the code below assumes it's a static string::: gst/gstpreset.c@@ +110,3 @@+{+ return g_build_filename (+ g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle),Leaking return value@@ +118,3 @@+#undef GST_DATADIR+#endif+#define GST_DATADIR get_datadir()Leaking the memory below::: gst/gstregistry.c@@ +142,3 @@+{+ return g_build_filename (+ g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle),Leaking return value@@ +144,3 @@+ g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle),+#ifdef _DEBUG+ "debug",Is this standard?@@ +1609,3 @@ /* add the main (installed) library path */+ GST_DEBUG ("scanning main plugins %s", plugin_dir);+ changed |= gst_registry_scan_path_internal (&context, plugin_dir);There is already code like this in gstregistry.c, 5 lines below :)CreatedMake The GStreamer Installation Relocatable on Windows (take iii)Hi,Sorry it took much longer than I liked to come back to this issue, but here's my other take on this, hopefully addressing the issues that have been brought up. :)(In reply to)I think it's fixed in this patch of mine.I think this is the general convention that is used on Windows for the GTK+, so following suit here:) This also applies to MSVC builds, which do not use configure to build.Oops, this patch does not have this anymore :)Fixed in the latest version of my patch.Nope, but I am following suit from the pre-generated config.h in win32/common. We could always purge this part, if needed. :)Putting it here as "lib", as it is a helper. Please advise if libexec is preferred to be set as something else. (perhaps with the other .exe's?)Fixed in the latest version of my patch.Fixed in the latest version of my patch.Fixed in the latest version of my patch.Fixed in the latest version of my patch.Same as the "debug" thing above. Let me know if this is preferred without :).Noticed that, so moving a block down:)With blessings, thank you!Thanks for updating the patch, just one comment then I think it can go in(In reply to)I think you should use something from config.h for this, which is based on the configure parameter. But it's probably ok as isSounds ok then :)libexec is for executables that are run by the library only and not meant for users to run. bin should contain executables that the user should run (gst-launch, etc)This here should be the path where gst-plugin-scanner.exe is installed.(In reply to)I think it's safe to assume that in Windows the directory structure is preserved as bin/ lib/Review of:::: gst/gst.c@@ -502,0 +503,12 @@+#ifdef G_OS_WIN32+ {+ gchar *basedir = g_win32_get_package_installation_directory_of_module (_priv_gst_dll_handle);... 9 more ...libdir must show the location of the libs directory and not the plugins dir, so basedir/lib instead of basedir/lib/gstreamer-1.0/I believe this relocation technique can be also very useful in OS X for Applications, as the redistribution of GStreamer in the App implies some relocations too.Maybe a configure option --with-relocation that's enabled by default in Windows and can be turned on/off for other platforms?(In reply to)Getting the location of the GStreamer library (and I mean library, not the application executable) requires platform specific API though. Does something exist for OSX? Then I think we can even enable that by default like in the above patch.Something like:static gchar *get_prefix_dir (void){ gchar *prefix_dir = NULL;#if defined(HAVE_OS_WINDOWS) prefix_dir = g_win32_get_package_installation_directory_of_module (NULL);#elif defined (HAVE_OS_DARWIN) char pathbuf[PATH_MAX + 1]; uint32_t bufsize = sizeof(pathbuf); gchar *bin_dir; _NSGetExecutablePath(pathbuf, &bufsize); bin_dir = g_dirname(pathbuf); prefix_dir = g_build_path (G_DIR_SEPARATOR_S, bin_dir, "..", NULL); g_free (bin_dir);#elif defined (HAVE_OS_LINUX) gchar *exe_path, *bin_dir; exe_path = g_file_read_link ("/proc/self/exe", NULL); bin_dir = g_dirname(exe_path); prefix_dir = g_build_path (G_DIR_SEPARATOR_S, bin_dir, "..", NULL); g_free (exe_path); g_free (bin_dir);#endif return prerix_dir;}Can you open a new bug for that for OSX? Also _NSGetExecutablePath() probably returns the application path, not the library path. And same story for /proc/self/exeYes, this assume the application is installed in bin/ and libgstreamer-0.10.dll in lib/, that's why prefix is built with bin_dir/.. It's not completely correct though as we should try to get the path of the library and not guess it from the executableI would refactor than the following patch to: 1) Define a function that returns the installation prefix 2) In Windows and OS X try with the relocated paths. 3) In OS X, try also with the configuration hardcoded pathAnd I wouldn't change anything on Linux.Since the location of the library in OS X can only be guessed through the application dir, I would check both the relocated path and the hardcoded one so that it works too with applications using a system-wide installation of GStreamer in /Library/Frameworks/GStreamer.frameworkWe could have the following helper functions:get_installation_prefixget_installation_lib_dirget_installation_plugins_dirget_installation_scanner_pathif it returns NULL (for Linux or when the path does not exists), we try with directly with the harcoded one, if it returns a path we try first with this path.The OS-specific code is kept in a single place: in get_installation_prefixCreatedMake the GStreamer installation relocatable (take iv)Hi,Here comes another version of my patch for this...Yup, got that, so this new patch fixes this. Thanks though.Hmm, seems that my patch points to <win32_prefix>\lib\gstreamer-1.0\gst-plugin-scanner.exe already, or did I miss something?p.s. I'm not too sure about the Mac or Linux situation regarding relocation, so can't say much about them here.But anyways, thanks for the reviews. With blessings!commit 043c629e72946f80e251ce149777ab91f184cb29Author: Chun-wei Fan <>Date: Thu Feb 6 14:18:31 2014 +0800 windows: Make GStreamer installation relocatable Use the technique that is now done in GTK+ so that the plugins do not have to be installed in c:\gstreamer\lib\<debug>\gstreamer-$(GSTApiVersion), but can be installed in <parent_folder_of_gstreamer_main_dll>\lib\<debug>\gstreamer-$(GSTApiVersion) or as per g_win32_get_package_installation_directory_of_module() allows.This patch is still using "lib" instead of "libexec" for the gst-plugin-scanner path. And I think the indentation is not correct either.	18.0	id=771777	29	False	False	csoriano	1
id=537112	REOPENED	gnome-terminal	general	git master	Other Linux	Normal enhancement	GNOME Terminal Maintainers	2008-06-07 13:34 UTC by	Christian Persch	2011-11-23 08:51 UTC (	5 users	On paste-from-clipboard (ctrl-shift-V), we should not just always paste as text, but instead look if the text/uri-list target is present, and if so, paste as quoted fuse paths, just like we do when dnd'ing text/uri-list to the terminal.	Not very useful withoutmaking nautilus offer text/uri-list on the clipboard.Fixed in trunk.Umm. Not sure about the fuse path.. What if I want to paste the URI to wget it?Hmm. If it translates into a fuse path, you can just gvfs-copy it. OTOH, maybe we should make this an extra action, have "Paste as text" and "Paste as paths" ?Humm, that would require a bunch of new API, right? Not sure what the best practice here is.No new API needed, no. It's just a regular menu entry, all the paste logic is already there in g-t.Ah ok then.So how does ctrl+shift+insert work then? /me likes that to keep pasting URLs.C-S-[KP_]Insert is handled directly inside vte, doing paste-as-text.I guess adding a separate accel-less PasteAsPaths action, shown only if text/uri-list is present on the clipboard, would be the best here?Something like that, yeah. Though, not sure how discoverable/intuitive that would be. The whole fuse gio stuff is a hack that is supposed to be hidden from users. But then again, terminal users are not normal users.Fixed in svn.I have a problem here.If I copy a file from nautilus into the terminal, I get a file:///foo/bar url - there is almost no terminal application that accepts URIs (think cat, ls, ...). So the solution to paste URIs by default is wrong for file URIs.However, for http or ftp URIs I'd want the real URI instead of some gvfs nonsense - again, because almost no terminal app takes gvfs paths, but wants real URIs.So my solution would be to use the filename for the file:// URI scheme and use the full URI for all other schemes. Does that make sense?***has been marked as a duplicate of this bug. ***(In reply to)I should clarify this:no terminal app takes gvs paths => no terminal app I use for working with http or ftp URIs (like wget, lftp etc)It might make sense to have a "paste as gvfs path" for treating ftp and http URIs as files though, no idea.	13.0	id=537112	16	False	False	chpe	1
id=130600	REOPENED	conglomerate	Code	unspecified	Other Linux	Normal enhancement	conglomerate list	2004-01-05 19:46 UTC by	Boris Goldowsky	2004-12-22 21:47 UTC (	0 users	(from mailing list posting; a bugzilla entry was requested)It would be helpful to have the dispspec file explicitly list the name ofthe top-level element of the document type.Currently if there is no DTD information explicitly in a file beingvisited, a dispspec whose /file name/ matches the top-level tag of thedocument is used. This fails, however, when there are multiple DTDs thatshare the same top-level element: such as conglomerate's "readme" andForrest's "document", which both use <document> as their top-level element. The dispspecs have been named readme.xds and forrest-document.xds in theexamples folder, but that means neither one is available to be found by thefallback top-level-tag-matching rule.Listing the doctype / top-level-tag name explicitly in the xds file wouldallow this matching rule to work without requring a file-naming conventionto be used and would allow the detection of the case where there aremultiple possible matches for a doctype.	Are you sure about the filename stuff? I thought it looked for amatch for the top-level element in the full list of elements withinthe dispspec, and uses the first dispspec for which an element namematch is found.Look in src/cong-dispspec-registry.c, function:cong_dispspec_registry_get_appropriate_dispspecIt should be fairly easy to rewrite this function; perhaps it could berewritten to return a GList of dispspec pointers, preferably sorted indescending order of appropriateness. In the case of an exact match,the function would return a list of length 1. If more than one isfound, a UI routine could pop up a selection dialog.You could recurse through the document and search for other elementsbesides the toplevel one, perhaps coming up with a "percentagecoverage" of how many of the elements in the documents occur in eachdispspec, and use this to guess which dispspec to use.Getting more ambitious, you could have a look at the doctype-guessingcode here (thanks to Steinar Bang for the link from a couple of monthsago):You are correct - the code that used to look at the filename hasalready been improved to look into the dispspec.James Clark's locatingRules system sounds great. However, it departscompletely from the current Conglomerate strategy of putting all thelocating information in the dispspec. Perhaps that's a good thing: itwould remove the need to load all the dispspecs at app startup;instead you would just load the locator files when a file is opened.We may want to wait until there's a standard C implementation of thelocatingRules code though, rather than write our own. The specs maybe slightly in flux as well, from the sound of the messages on themailing list.I guess we need a strategic-level decision as to whether it's betterto implement the locatingRules in place of all the current code, orextend the current strategy by calculating element coverage of thevarious dispspecs.My vote is for element coverage calculation, at least for now. Wecould review this if James Clark's locatingRules system becomesestablished.Percentage coverage is now implemented	4.0	id=130600	2	False	False	david	1
id=778538	REOPENED	caribou	default	git master	Other Linux	Normal enhancement		2017-02-12 18:57 UTC by	Romhányi Viktor	2017-02-15 09:46 UTC (	1 user	CreatedA Hungarian layout file for the touch variant (layouts/touch/hu.xml.in) and the necessary updated Makefile.amA Hungarian layout file for the touch variant and the necessary updated Makefile.amThe long vowels get displayed on the default plane, which makes it easier to write in Hungarian since these letters are used very often.	Thank you, applied after style fixes (indent + untabify).pushed as- A Hungarian layout file for the touch variant (layouts/touch/hu.xml.in) and the necessary updated Makefile.amCreatedA Hungarian layout file for the tablet variant (layouts/tablet/hu.xml.in) and the necessary updated Makefile.amTablet layout for HungarianCreatedA Hungarian layout file for the fullscale variant (layouts/fullscale/hu.xml.in) and the necessary updated Makefile.amFullscale layout for HungarianThank you for adding the previous one!I made a Hunagrian variant for tablet and fullscale, too.The fullscale variant tries to reassemble an "eliminate dead keys" keyboard layout.Hope this time i didnt miss tabs or indents.	4.0	id=650166	9	False	False	mail	1
id=592305	REOPENED	NetworkManager	general	unspecified	Other Linux	Normal enhancement	NetworkManager maintainer(s)	2009-08-19 09:18 UTC by		2016-10-24 09:17 UTC (	5 users	I would like to suggest to integrate Tor into Networkmanager, may be as a VPN. It is not the same as a VPN, but very similar and an integration would make it easier to configure and to use for people.	I'm afraid nobody is working on this and unless somebody starts, I'm closing this as WONTFIX.***has been marked as a duplicate of this bug. ***Will reply at. Reassiging to default just in case anyone in the team disagress with the status and wants to pursue this feature request.I'll reopen this as it's still an important feature to target.***has been marked as a duplicate of this bug. ***	5.0	id=150010	31	False	False	thierry.moisan	1
id=719279	REOPENED	shotwell	ux	unspecified	Other All	Normal enhancement	Shotwell Maintainers	2013-04-30 11:15 UTC by	Shotwell Maintainers	2016-12-23 11:30 UTC (	2 users	---- Reported by2013-04-30 04:15:00 -0700 ----Original Redmine bug id: 6883Original URL:Searchable id: yorba-bug-6883Original author: Xavier ClaessensOriginal description:To get nicely integrated with gnome-shell's design, shotwel could use the app-menu instead of the menubar. This could need to discuss which item to have inthe app menu, and eventually move the rest to a gear menu and/or toolbar likenautilus.Related issues:related to shotwell - Feature #7241: Consider using Gtk.HeaderBar (Open)---- Additional Comments From2013-07-16 02:24:00 -0700 ----### History#####1Updated by Tomáš Hnyk 7 months agoIf implemented, it would be nice if it worked only under Gnome Shell as someusers (me included) do not use Gnome Shell and hate that particular designdecision.#####2Updated by Jim Nelson 7 months ago * **Category** set to _ux_ * **Target version** set to _0.15.0_We talked internally about this question. Supporting multiple menu systemsmeans a lot of conditional code as menu items are shuffled between the AppMenuand the normal menu scheme.Additionally, I don't think Shotwell will ever move to a pure gear menuinterface. There's a lot of menu items and it doesn't strike me as a stepforward to stuff all of them into a single cascading dropdown menu.Both of the above are, of course, worth discussing, so don't take this as thefinal word on the matter.#####3Updated by Jim Nelson 6 months ago * **Target version** deleted (<strike>_0.15.0_</strike>)#####4Updated by Xavier Claessens 4 months agoHere is a branch:I'm not sure it is the best way to do it, though. Comments?#####5Updated by Joe Bylund 4 months agoXavier, should this only affect Shotwell while running in gnome shell?#####6Updated by Yosef Or Boczko 4 months agoSee "gtk-shell-shows-app-menu" setting:-shell-shows-app-menuif the "gtk-shell-shows-app-menu" setting is FALSE, the AppMenu will bedisplayed as menu on menubar (will be created automatically).Need to do something like this:ׂgboolean appmenu;g_object_get (gtk_settings_get_default (), "gtk-shell-shows-app-menu",&appmenu, NULL);if (appmenu) {/* Create app menu */}else {/* Add the item of an appmenu to the gearmenu */}#####7Updated by Xavier Claessens 4 months agoOk, branch updated to do that. Thanks for the tip.--- Bug imported by2013-11-25 22:11 UTC ---This bug was previously known as _bug_ 6883 atUnknown version " in product shotwell. Setting version to "!unspecified".Unknown milestone "unknown in product shotwell. Setting to default milestone for this product, "---".Setting qa contact to the default for this product. This bug either had no qa contact or an invalid one.Resolution set on an open status. Dropping resolution	CreatedUse AppMenuSigned-off-by: Jens Georg <>CreatedUse AppMenuSigned-off-by: Jens Georg <>pushed as- Use AppMenuThat needs a better plan for non-gnome-shell and non-unity environments.	4.0	id=719279	12	False	True	mail	1
id=150010	REOPENED	gedit	search and replace	3.2.x	Other All	Normal enhancement	Gedit maintainers	2004-08-13 01:10 UTC by	Antonio Ognio	2016-05-10 16:29 UTC (	19 users	Description of Problem:The Search & Replace dialog does not have anoption to search and replace only inside theselected portion of text. This feature is reallyuseful in general but specially if you'reprogramming and using a chunk of code as a"template" for some other code. Actual Results:When you select text and replace text allocurrences get replaced not only selected text.Expected Results:I'd expect selected text only to be searched andreplaced.I guess this should have a checkbox on its owntitle something like "Search current selectiononly" which should be checked by default if youopen the Replace Dialog when you have some portionof text selected.This is a very common feature in many other texteditors.Additional Information:	This is probably a duplicate of.*** This bug has been marked as a duplicate of***actually I don't think this is a dup of 100821. That bug deals with the generalUI of the find dialog, while this bug asks for a specific enanchement: torestrict the search and replace to the selected text (if present).I have added a checkbox in the dialog window and also, after that I made the checkbox checked by default if i select a particular text. After that, find operation is not working. I am trying to do it by make the find as sensitive as soon as we select particular text.Now, when i select some portion of text in a paragraph, then new checkbox i haveadded "current selection only" is checked default. Then, when i press findbutton, the first matching word get searched and the cursor doea not move to thenext matching word in the selection. any ideas?For some strange reason the Bhuvaneswari is attached.ops... I mean***has been marked as a duplicate of this bug. ***Maybe it helps if some general strategy is outlined here as a comment by some ofthe mantainers. e.g. what to do, where to look for, stuff like that.well, from an implementation standpoint it should be enough to set the iter atwhich the search starts at the beginning of the selction and stop searching atthe end of the selection.However what needs to be figured out is the UI for this: I don't want to growthe number of toggles in the search prefernces... in fact I want to reduce them,given the fact that we are getting rid of the dialog and we need to fit thesearch ui in a search bar or a search panel.On the other hand I'm not sure if just defaulting to always limiting the searchto the selected text when the selection is bigger than X characers would end upbeeing confusing...I noticed yesterday that gedit doesn't have this feature... This is something an text editor should have IMHO...Adding a me too. This feature would be REALLY REALLY helpful***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Pasting the comments I made onsince they are useful:This comes up from time to time and I think it's a valid request, but there arethings that need to be worked out both in the UI that in the implementation:UI: * Adding checkboxes/options to the find dialog makes me a bit unconfortable,especially since there are other valid requests of options to be added there * should this just be on Replace?Can you post screenies of the SubEthaEdit and TextWrangler dialogs?Implementation: while searching in the selection should be easy enough (just grab the startand end iter and make sure to not search further), there is a problem with thedisplay of the selection: given how X works there is always just one availableselection: this means that has soon as something is selected in the searchentry in the dialog (autocompletion included) the selection in the textviewvanishes, making this option way less useable. Not sure how we can work aroundthis...CreatedSubEthaEdit's Find windowCreatedTextWrangler's Find & Replace dialogCreatedApple Mail's Find window (much simpler)About the UI questions raised in:The search and search/replace dialog or pane should have a "From selection only" check boxThe "Wrap around" check box should be removed, and searching and replacing should stop at the end of the text with a beep and status message, and be continued from the start of the text after the appropriate button is hit againThe "Search backwards" check box should be replaced by a Previous button and the Find button with a Next button. This UI is less modal and clear.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***/me also raises handCreatedEclipse Find/Replace with selectionI miss this feature very much. It would be good to finally see it in gedit.CreatedGeany rearch/replace dialogI just want to add that Geany has nice solution from the GTK+ implementation point of view, which also (accidentally?) coincides with the meaning of the option.Besides the fact, that In Selection is really needed only for Replace function, it's only needed for automatic replacement (à la Replace All). For manual replacement we can just point cursor to a place in file and then replace forwards from that point, pressing Replace/Next every time and supervising the process. No taking into account of a selection is needed.So probably in addition to Replace All button there should be Replace In Selection button and not a checkbox or anything like that. If we think that we are lacking the space for an extra button, we could maybe offer this advanced option in some more advanced way, for example, while holding down Shift (or Alt or Control), the Replace All becomes Replace In Selection.This practise is used in Gnome's session menu anyway, so it's not too awkward.And I add that this option is really essential if you do some dirtier programming, where you don't want to (temporally in a testing phase etc) present everything as functions and want to replace variables conveniently in specific part of the source code. This actually happens really often. I somehow believe that not implementing this option could have some educational value: People would define more functions and write cleaner code... But I'm not sure if it's worth it.***has been marked as a duplicate of this bug. ***this bug is very annoying(In reply to Paolo Borelli from)I would actually vote exactly for this. Perhaps for the first time user gets confused, but otherwise it seems to me that this it the most obvious UI.What about right click on selection -> search in selection? I.e. add an item to the context menu.	30.0	id=778538	6	False	False	dueno	1
id=213660	REOPENED	evolution	Calendar	3.4.x (obsolete)	Other All	Normal enhancement		2001-10-26 18:57 UTC by		2012-06-26 22:02 UTC (	9 users	Package: EvolutionPriority: WishlistVersion: 0.16Synopsis: suggestions for improvement in UI for Evolution calendarBugzilla-Product: EvolutionBugzilla-Component: CalendarDescription:The current method of setting alarms/reminders in the Evolutioncalendar is very cumbersome in my opinion. First it seems that thecalendar setting under the Other tab -- Create new appointments with adefault reminder... -- has no effect (or at least is not remembered). Second it seems that to get an audible alarm one must always add areminder of the "Play a sound..." type and -- before adding it, click onOptions and browse to find a sound file. It doesn't even remember wherethe last sound file you used was. It seems to me this could all be mucheasier. In my opinion the alarm setup is much better in the GnomeCalendar -- you should be able to have a default alarm type (display,sound, etc.) for appointments and add another with a single click. Ifyou want to allow people to choose which sound to use, that's fine butyou shouldn't have to browse sound files every time you want to set analarm. For me one choice, under calendar settings would be more thanadequate. So, to sum up, the alarms need a simpler interface for theirsetup and some reasonable defaults.Unknown reporter:, changed to.	Agree that these enhancements should be done. Unfortunately too latefor 1.2. Changed Target Milestone to 1.4 & added Feature keyword.This should go into 1.6. We don't want to make any more UI additionsin 1.4 at this point, due to time constraints and fears of regression.Retargettingupdating the state of the art inevolution-2.0.3.0.200501070910-0.snap.ximian.10.1:first, it seems that enabling "Show a reminder [7][minutes] beforeevery appointment" under "Calendar and Tasks" in the settings seems towork. it will be the preset when setting up any new appointment.second, one still always has to choose to play a sound file. thedirectory is still not stored/remembered.please reschedule this, at least to keep the directory whjere one haschosen the last sound file, PLEASE! would be an easy and greatenhancement of this.when fixing second issue (remembering the directory of the last file chosen) this one please also fix, it's the same problem and the same code!Apologies for any spam... cc'ing usability-maint on all Evolution usabilitybugs. Filter on EVO-USABILITY-SPAM to ignore.still valid in 2.4.0, retargetting from 2.3 to 2.5There have been some alarm UI changes .. posting the link here as this is also an UI enhancement requestimproving the summary. adding string keyword since this requires string changes.Fix has been committed."set default alarm type in preferences" has not been fixed. reopening.***has been marked as a duplicate of this bug. ***It would also be nice to be able to have multiple default alarms. For example, to pop up a warning 15 minutes before the event AND play a sound at the time of the event. The default alarm creation dialog should look just like the regular alarm creation dialog.***has been marked as a duplicate of this bug. ***Bumping version to a stable release.I agree with Larry Hunter's suggestion.I know this is minor, but it would make the calendar a lot more usable - IMHOLarry: Please file a separate request for this separate issue.***has been marked as a duplicate of this bug. ***	18.0	id=592305	13	False	False	psimerda	1
id=760986	REOPENED	evolution	Shell	3.18.x (obsolete)	Other Linux	Normal enhancement	Evolution Shell Maintainers Team	2016-01-22 14:11 UTC by	Brian J. Murrell	2016-02-17 18:44 UTC (	1 user	It would be nice if Evolution would remember it's open windows on shutdown and restore those on startup.	Thanks for a bug report. I'd rather not do it, Evolution is not an integrated development environment (IDE), it's more about independent windows which can cooperate together. The closest is probably the LibreOffice (and other products like that), where I cannot imagine that I'd have opened a Writer and a Calc before shutdown and the next start, when I open a Draw, the Writer and the Calc would open too.Respectfully, I think I have to completely disagree with your analogy to LibreOffice, at least from a user perspective. From a developer perspective, you may see this similarity but from a user perspective, Evolution is one big PIM (mail, calendar, TODO, etc.) application and not disparate document production tools.Perhaps my original description was too vague. As a more concrete example, let's just look at one of Evolution's personalities... e-mail (to provide a counter-example that does not align at all with your LibreOffice analogy).Let's say I open 3 Evolution e-mail windows, one on my main INBOX, one on a folder called foo and one on a folder called zar. These 3 folders are all folders that I view and monitor frequently and frankly, opening them in separate windows and then using the window manager's window management to cycle between them is easier than jumping around to different folders in Evolution itself.As an aside, what would make this navigation easier in Evolution is if one could open different folders in tabs and indeed tabs could be an alternative to opening multiple Evolution windows, but again, those tabs should be restored when Evolution is [stopped and] restarted.But ultimately because I always want Evolution to open these 3 e-mail windows on the 3 (INBOX, foo, and zar) folders, I would like Evolution to remember these windows when it closes and restore them when it's restarted.Changing status to REOPENED so that my further description can be considered.	2.0	id=771804	6	False	False	florian.muellner	1
id=771804	REOPENED	gnome-shell	extensions	unspecified	Other Linux	Normal enhancement		2016-09-22 03:57 UTC by	Stephen Michel	2016-09-22 14:03 UTC (	1 user	I propose that when the first workspace is empty, it should be automatically removed and all the existing workspaces shifted up -- the same behavior as the last workspace when the second to last workspace is emptied.The reason for this is that if I select a window on the first workspace and move it to the workspace above, it will create a new workspace above and shift the other workspaces down. The problem is, if I then close that window or move it back down, the first workspace persists. If I have a lot of open windows, I now need to individually move all the windows back up a workspace to restore my original layout.Two similar-scope alternatives that I like less are to disallow creating workspaces at the top in this way or to add a way to manually delete a workspace.---Slightly larger scope: The way I think about dynamic workspaces, the absolute position doesn't matter; the invariant is the position of workspaces relative to one another. Instead of the current "jump to workspace X" shortcut, it would be much more useful if one workspace were marked as the primary workspace and then set all the "jump to" commands were relative to its location.That's relevant to this issue because then the behavior above would change to be, "If the top workspace is empty and above the primary workpace, remove it." This would fix my issue while preserving functionality like [auto-move windows]().	(In reply to Stephen Michel from)Yes, workspaces persist until you switch to a different one. We used to remove workspaces immediately when they became empty (including the first one), but this turned out to be rather confusing, so we changed it (see commit). I think neither changing back to the previous behavior nor treating the first workspace specially makes sense here ...No, you just need to switch down one workspace.Empty workspaces except those at the end were persisting forever for me. Turns out this was caused by an extension, my apologies.CreatedStartCreatedmove_up.pngCreatedmove_back_down.pngThe extension was auto-move windows; turns out here is the place to report enhancements for it so I'll re-open this. I added some screenshots to show the behavior.To be clear, I like the persistence of empty workspaces between other workspaces, because I auto-move email and other communications to a specific workspace, and have a hotkey to jump to that workspace (which breaks after everything is shifted by one).	6.0	id=760986	5	False	False	mcrha	1
id=463575	REOPENED	brasero	general	0.8.1	Other Linux	Normal enhancement	Brasero maintainer(s)	2007-08-05 05:16 UTC by	Diogo Santos	2015-01-24 19:29 UTC (	3 users	The Brasero 0.5.2 has a size bar with the scale in GB. This is a problem because is impossible to me know the real space that I can use. If the scale was changed to KB or MB would be great because I could use all space on DVD or CD. For ex. if I put a group of files with +/- 4GB in project the bar show 4GB, ok. But if I try to put a file +/- 300MB it oversize the project. If the bar showed the free space in KB I'll really know the free space to put, for ex, a file with 298.2MB to use 100% or almost in m DVD.With this big scale everybody lose many free space. Other information:	Note that you can change the Size bar scale pressing on the left icon near the bar.You don't understand what say. I know that I can't change the scale to appropriate disc. I'm saying that the scale is big because is impossible to know the real size of the project in KB, for example. Another ex. Imagine a project for a DVD that have a file with 4.1GB, that was show on bar scale. Of course if you add another file with 200MB it will filled the disc, but sometimes not. Good, because I really know the size of files. But imagine another condition that the file has 4.190.987.123 bytes, in the scale bar you will see 4.1GB, if you try to put a file with 200MB it will be impossible.If the scale in the bar was showed in KB or bytes the problem above would be solved, because I'll really know the free space to use all.Understand now?(In reply to)Basically what you want is to be able to know the free space left in whatever unit (GiB, KiB, ...), right?The problem here is the UI, where to put that scale unit button or whatever without it being to heavy ? We already have some way to choose the project/media size... Another thing to choose would may be too much.Would it suit you if the space left in project/media was expressed in the appropriate unit. For example when the space left is under 1 GiB, then the unit used become KiB and so on.(In reply to)So so, This is the point. But isn't necessary to no know in whatever unit (GiB, KiB, ...). Only one is necessary. I think that in bytes is the best option. If a person choose a DVD with 4.3GB or a CD 700MB the size in bar will be showed in bytes.This scale in bytes can be put in the existing bar substituting the scale in GB or MB.Isn't necessary to put a new project/media size. I'm talking only to change the presentation of the size. Everywhere in the program where sizes are showed in GB or MB, change this to bytes. Only this!Of course that this a good thing, but I don't know if this is necessary. If program changes automatically is fine and beautiful, but not necessary. If the scale was showed, ever, in bytes everything will be fine.This is obsolete, we removed the bar. If it comes back it'll be much smaller and unobtrusive.I think that this is a real problem for the users. If this can be improved Brasero will be better. Now I'm using 0.8.1 version.I put this image to show what I'm trying to say.In my last message I think that I explain better.	7.0	id=463575	13	False	True	lmedinas	1
id=650166	REOPENED	rygel	MediaExport plugin	git master	Other Linux	Normal enhancement	Jens Georg	2011-05-14 09:26 UTC by	Jens Georg	2016-01-04 13:20 UTC (	2 users	Parse .pls/.m3u files and expose their contents as a playlist container	totem-pl-parser can be used there, to do the parsing. It also has support for detecting the type of medium inside ISO files, and directory hierarchies.Yes, using totem-pl-parser was the idea here - at least for "normal" playlists. Looked at the CD utility functions, that looks useful indeed.Also check if we should support them in CreateObject then...The disc support in totem-pl-parse only can tell me whether this is a DVD, VCD, SVCD or BlueRay, right? It cannot retrieve the actual title list?(In reply to Jens Georg from)Yes, and it will give you an appropriate URI for that (vcd:///..., dvd:///..., etc.)No, because, for a movie player with an input system to go past menus, there's only one "title" or entry point into the DVD. If you want the track list, GStreamer can offer that once you've opened the URI.This problem has been fixed in the unstable development version. The fix will be available in the next major software release. You may need to upgrade your Linux distribution to obtain that newer version.Accidently resolved	7.0	id=251461	12	True	False	gerardo	1
id=251461	REOPENED	evolution	Mailer	unspecified	Other other	Normal enhancement		2003-11-28 05:50 UTC by	Tony Earnshaw	2012-08-07 09:43 UTC (	3 users	Description of Problem:I use Courier IMAP 2.2.0 with fam (concurrentfile/folder updates) support. This allows userstodefine shared mail folders - a tremendousadvantage for schools and anyother org that wishesto share certain data. Evo "sees" thesharedfolders, but can't do anything with them.Mozilla supports them fully -as does SquirrelMailand perhaps other clients.Steps to reproduce the problem:1. Attempt to access shred folders that the aboveclients can access2. Confirm that Evo mailer reports "This foldercan not contain messages"3. Actual Results: See aboveExpected Results: Access to shared folders byusers in specified Unix groupsHow often does this happen? Always ;)Additional Information:	*** This bug has been marked as a duplicate of***oops, not a dup of that bug afterall...In my organization, we use shared folders to "feed" Spamassassin. If it incorrectly categorizes mail as spam, we move the subject message to a shared folder called "SiteHam" and if spam evades the filter, we move it to a shared folder called "SiteSpam." The purpose of this is that both folders are checked every few minutes by SpamAssassin to improve its filters.The point is: this has many valid, important uses.I can't believe that Evolution, which I use daily, lacks this feature that Thunderbird and so many other clients have. This bug is nearly three years old, are there *any* plans to implement this feature?depends onAsis FIXED in 2.30: Is this still an issue?On the other hand, this seems to be still an issue with cyrus-imapd ().	5.0	id=689154	13	False	True	priyanka.suresh16	1
id=689154	REOPENED	gnome-documents	general	3.7.x	Other All	Normal enhancement	GNOME documents maintainer(s)	2012-11-27 11:46 UTC by	Allan Day	2015-09-18 16:44 UTC (	6 users	It makes sense for Documents to include images: these can frequently be treated like documents and can be part of collections or projects.Documents already includes drawings from Google Drive. It doesn't seem to present images that I have stored in my ~/Documents folder, though.	I'm not sure we want Documents to be a project management tool. What types of images would you expect to find there?Oftentimes I notice as a student that while I want to share some text from a book with no access to a scanner, I take a picture of the page and share it. So in that sense it would be great to be able to view images.Sure,This could be nice idea.Because we student,now-a-days generally don't write the notice,timetable,write ups,important notes from professors/friends which are short.we generally take photographs of it share with our friends through gmail or gdrive.So,images could be also a kind of documents.But the condition is that it should be mark as document in local db of documents application,So that it could be added in list.Or another ways is that let the user be told to save their these images cum documents in specific folder so that software could fetch it from that folder.(In reply to)Not sure that is intentional. Could beAnyway, we need some design input and thought behind this. Maybe this is tied to the "import to Documents" flow. SeeWe never reached a consensus on this one. Sticking to documents only seems like a reasonable way to go for now though, so let's leave it. We can always reassess.(In reply to Allan Day from)FWIW, multi-page TIFFs and DjVu files are considered documents even though they're image formats. Multi-page TIFFs can be faxes. Multi-page DjVu files are used quite a lot in scientific publications.Basically, passing the "photo" from Photos to become a "document" in Documents is the same kind of thing we want to achieve when passing a "document" from Documents to become a "book" in Books.	7.0	id=311454	16	False	False	nagappan	1
id=635765	REOPENED	glib	gio	2.27.x	Other Linux	Normal enhancement		2010-11-25 10:00 UTC by	Aleksander Morgado	2015-08-26 10:10 UTC (	9 users	G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT is currently issued in two cases: * If a file is updated, not closed, and the last update happened more than 2 seconds ago (hardcoded value). * If a file is updated and closed.The 2 second delay could be configurable, and also possible to fully disable passing 0 as delay, so that CHANGES_DONE_HINT is only issued once a file has been closed after an update.	CreatedPatch for the issueThis patch implements a new g_file_monitor_set_changes_done_hint_delay() method which will configure the internal delay for emitting virtual CHANGES_DONE_HINT events. If the delay is set to 0, these events will only get emitted when a file is updated and closed.Also fixed several indentation/alignment issues in the same patch.It's very hard to see the relevant changes with all the noise :-)It seems to me 0 could be confusing because you normally read it as "no delay before the emission of the event" and you wouldn't expect semantics to change. This being a signed integer already, I find -1 a better choice because it visibly shows a special case.(In reply to)Yeah, sorry for that...Well, the thing is that a 0 delay wouldn't make much sense... This is, you will be probably issuing CHANGED and CHANGES_DONE_HINT together always.CreatedFix some indentation/alignment issuesThis patch fixes the indentation/alignment issues in the gfilemonitor.c fileCreatedPatch for the new methodThis patch contains only the code related to the new method, easier to review nowThanks for separating the cleanup.How about making the last sentence "Set to 0 to fully disable..." a separate paragraph and making it a bit more explicit? Something like "So events are only issued when a file has been closed. No event will be emitted as long as the file descriptor is open." Then I think that would prevent the confusion.CreatedPatch for the new method, doc updatedThanks for the comments Christian.New patch attached with the documentation updated.Is there any usecase to try out the patch ?Created[PATCH 1/2] gio: Fix some minor indentation/alignment issuesCreated[PATCH 2/2] gio: New method, g_file_monitor_set_changes_done_hint_delay()Patches rebased with git master.CreatedTester of the new API methodAttached a small C program using GFileMonitor. Expects the path of an existing directory as argument, for example: $> glib-test-monitor /tmp/tempdirOr, if you want to apply the new option to disable the virtual CHANGES_DONE_HINT: $> glib-test-monitor --disable-virtual /tmp/tempdirThen, I use a small perl script to write in a file without closing it:#!/usr/bin/perluse IO::Handle;@ARGV or die "give filename";open my($f), '>', $ARGV[0];while (1) { print $f "line here\n"; $f->flush; sleep (10);}close $f;Just execute that script passing the path of a file inside the directory you're monitoring with glib-test-monitor, for example: $> test.pl /tmp/tempdir/file.txtWhen using the tester without --disable-virtual the tester doesn't use the new API method, so it behaves like git master glib:$ ./glib-test-monitor /tmp/testdir1291834727: Received 'G_FILE_MONITOR_EVENT_CREATED' event in 'file:///tmp/testdir/file.txt'1291834727: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/testdir/file.txt'1291834729: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///tmp/testdir/file.txt'1291834737: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/testdir/file.txt'1291834739: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///tmp/testdir/file.txt'1291834747: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/testdir/file.txt'1291834749: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///tmp/testdir/file.txt'1291834757: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/testdir/file.txt'1291834759: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///tmp/testdir/file.txt'1291834760: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///tmp/testdir/file.txt'There's a CHANGED event every 10s, which is the update rate in the perl script; and 2 seconds after each update we get a CHANGES_DONE_HINT due to the virtual emission of the event; plus a last CHANGES_DONE_HINT when we stop the perl script and the file gets finally closed.When using the new API method passing a 0 as delay so that the virtual CHANGES_DONE_HINT is disabled, we get the following output:$ ./glib-test-monitor --disable-virtual /tmp/testdir1291834859: Received 'G_FILE_MONITOR_EVENT_CREATED' event in 'file:///tmp/testdir/file.txt'1291834859: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/testdir/file.txt'1291834869: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/testdir/file.txt'1291834879: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/testdir/file.txt'1291834883: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///tmp/testdir/file.txt'In this case, there's also an UPDATED event every 10s, but we won't get any CHANGES_DONE_HINT event until the perl script ends and the file is closed.Configuring a timeout for when changes are done sounds like an "unbreak me" setting. I could understand arguments being made for only ever emitting G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT when the file is closed, but configuring a timeout for when changes are done sounds like a very wrong API to export.Could someone explain to me why we need a configurable timeout for that?(In reply to)During a discussion in IRC it was agreed that the good fix would be to fully remove the virtual emission of CHANGES_DONE_HINT, so that it's only emitted on file close(). Email was sent to the devel ML to see if anyone had any comments on that:So I guess it should be ok to try to remove it, instead of setting the delay configurable. Will try to prepare a patch for that.Createdpatch to remove virtual emission of _EVENT_CHANGES_DONE_HINT(In reply to)I already have a patch for it, sorry :-)It passes a modified version oftest, which I'll attach ASAP.Can anyone review/integrate it, please?Createdtester for path to remove virtual emission of _EVENT_CHANGES_DONE_HINTtester, based ononeUsing this perl script (again based onone):----#!/usr/bin/perluse IO::Handle;@ARGV or die "give filename";open my($f), '>', $ARGV[0];my $i = 0;while ($i<3) { print $f "line here\n"; $f->flush; sleep (10); $i=$i+1;}close ($f);----the expected output should be something like:1294852554: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/tempdir/a'1294852564: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/tempdir/a'1294852574: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///tmp/tempdir/a'1294852584: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///tmp/tempdir/a'Meaning that CHANGES_DONE_HINT is emitted only on closing and never 2 secs after the 3 updates.ping, any resolution on patch ?I'm happy with Cosimo's patch, for what it's worth (but I'm not a GLib reviewer). Could a reviewer approve it, please? (Company, perhaps?)You are more qualified to approve it than I am at this point. I guess you have two solutions now:1) Commit it because you think it's the right thing to do2) ping Alex or Ryan on IRC about it and see if they careI'd probably go with (1), but I can take a beating when things break... ;)Review of:looks good to me; another review from a GIO developer would seal the deal.This kinda completely misses the point of G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT.Only the inotify backend supports (can support) sending events on close if there was a change. All the other backends are unable to support this.For such backends, rather than handling things on every byte written you want to wait a while after the last file change and then handle the change, in order to not get a million change events that you need to handle.Its *possible* that we should not send changes done hint from the inotify backend, but that means you will never handle changes to things like log files that are continuosly written but not closed.Review of:This will break non-inotify backends.So, currently there is no way, when using inotify, to reliably know when the file got closed. This means that file indexers like Tracker will not know when e.g. a file is fully downloaded from the Internet before starting to index it, as the download may be slow and virtual emissions of CHANGES_DONE_HINT may happen before the real CHANGES_DONE_HINT due to close().For the case of wanting to handle changes to things like log files, remember that you still have plain CHANGED events. From my POV, CHANGES_DONE_HINT is something that, if not supported by the backend, should really be handled by the user of the library, not by gio itself.Anyway, my original approach to try to tackle the issue was to make the virtual emission of CHANGES_DONE_HINT configurable with a a new per-monitor g_file_monitor_set_changes_done_hint_delay(), which if passed '0' would completely disable that emission (see first comments in the bug). This would be useful when using inotify in order to completely avoid CHANGES_DONE_HINT emission while the file is still open. And in other backends, it would be useful if you want to handle the live-update logic yourself looking at CHANGED events. Would this approach be better?+1 for.I've just wasted a full working day just to find out that GFileMonitor is half useless.I think this was obsoleted with the rewrite of the file monitoring infrastructure this cycle.(In reply to Matthias Clasen from)I don't believe this has been obsoleted, or what am I missing?I just retested with glib git master and still see no way to disable the virtual emission of changes done hint, which are still being emitted; e.g. open file, do one update every 10s without closing (with the perl script from):1440583544: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///home/aleksander/out.txt'1440583545: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///home/aleksander/out.txt'1440583547: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///home/aleksander/out.txt'1440583554: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///home/aleksander/out.txt'1440583556: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///home/aleksander/out.txt'1440583564: Received 'G_FILE_MONITOR_EVENT_CHANGED' event in 'file:///home/aleksander/out.txt'1440583566: Received 'G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT' event in 'file:///home/aleksander/out.txt'	25.0	id=635765	26	False	False	christian	1
id=328308	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other All	Normal enhancement		2006-01-23 15:57 UTC by	Erinn Clark	2013-07-09 00:26 UTC (	2 users	Evolution is apparently unable to do reverse threading for messages. Preliminaryquestioning of friends, acquaintances, and #evolution suggest that, not only isthis an unpopular feature, but most people have never even heard of it. Thatsaid, I find it crucial for retaining my email-reading sanity and as such,kindly request that it be implemented in Evolution.I've attached a screenshot of this rarity, caught in the wild, hoping that oneday its beauty may be reconstructed.Thanks!	Createdreverse threading in muttAh, well... guess I can confirm this. ;)to me this looks like a duplicate of, please reopen if you disagree*** This bug has been marked as a duplicate of***nope, this is not a dupethe only difference towardsis that a thread is displayed as "/" and not as "\". apart from that, i can not see a difference.Dude, that is an entirely different bug.talks about treating an entire thread as one message when sorting by date, with the date of the most recent unread message.This bug just flips the tree upside down.Hmm... guess this is going to be a WONTFIX. or are we having new options and stuff for doing this??This ain't a WONTFIX, this is a valid feature request, targetted for Future currently.sometimes developers decide to not implement every requested feature, and those requests do get marked as wontfix, doesn't matter if valid or not. that's the game.	9.0	id=328308	11	False	False	guenther	1
id=311454	REOPENED	evolution	Plugins	3.6.x (obsolete)	Other Linux	Normal enhancement		2005-07-25 09:09 UTC by	Paul Wise	2012-10-10 02:39 UTC (	3 users	Distribution/Version: Debian sidI'd like to be able to be able to run scripts to pre-process emails before theyare sent to the UI for display. This would allow me to do such things as convertpgp-inline to pgp-mime, run t-prot to remove tofu, strip spam from messages frompeople with hotmail or yahoo and other webmail accounts.An awesome enhancement would be a display that operated in per-thread mode likegmail, but split up all the emails into chunks so that there is no quoting goingon, just arrows and stuff with conversation flow and the like.	you can preprocess your mails, you can e.g. use fetchmail before evolutionspools your local /var/mail. within evolution, you can also use filters and pipemessage to a command on the shell.the per-thread mode is a duplicate of, dave was working on this andyou can get it from.therefore closing.*** This bug has been marked as a duplicate of***Well, I don't want to modify the messages in the imap folder, just modify thembefore they are displayed.The evo-conversation screenshots don't look like what I had envisioned either.If you want to develop a plugin (to preprocess before ui) there is a hook-loader. Look at prefer-plain or itip-formatter plugins to know how they are done.Proposing WONTFIX as this is a very uncommon request.	4.0	id=742796	13	False	True	zeeshanak	1
id=742796	REOPENED	gnome-boxes	installer	3.14.x	Other Linux	Normal enhancement	GNOME Boxes maintainer(s)	2015-01-12 08:05 UTC by	Chris Murphy	2016-09-20 08:16 UTC (	2 users	UEFI laptop that came with Windows 8.1, includes an application to create recovery (install) media. I used that to create a bootable USB stick, which I confirmed works by booting the system from the USB stick and reinstalling Windows 8.1. I'd rather run Windows 8.1 in Boxes rather than have a dual boot system.1.dd if=/dev/sdc of=dellrecovery.iso bs=256K2.This completes, and I can use losetup + kpartx + mount to mount what was sdc1, a FAT32 volume containing all the files for booting and doing the restore.3.When I point Boxes to this using Select a file > and clicking open...Actual results"Failed to analyze installer media. Corrupted or incomplete media?"Expected resultsEither it ought to work, or I should get a different error message. The media isn't likely corrupted. I suppose it might be incomplete if Boxes can't support a UEFI only installer, i.e. there is no BIOS boot sector or boot loader on this install media. It has UEFI only boot files. But if that's the problem then it's best if Boxes uses a different error message.Unfortunately there's nothing reported in journalctl, and I'm not that skilled with either gdb or strace to know how to get a more detailed error message.gnome-boxes-3.14.2-2.fc21.x86_64	Boxes can only support media with master boot record on it. But yes, we can maybe provide a better error message.The media definitely is using MBR partition scheme with a single partition set to type code 0x0C and formatted FAT32.However, the MBR first 440 bytes doesn't contain any bootloader code since that's not how a UEFI system boots. Since Boxes uses BIOS, maybe before it even attempts to boot it's looking for bootloader code in LBA 0? And absent that, it considers the media "incomplete"?Looking into the code, I don't see Boxes doing any checks for MBR. Is it possible that your user doesn't have permission to read the device file?Nope. Permissions are the same as for a file that works.Createdrecovery hexdump txt[root@f22m Downloads]# dd if=dellrecovery.iso count=2052 2>/dev/null | hexdump -CThere's definitely no bootloader code in the first 440 bytes of LBA 0. It has a valid MBR, single partition, type 0x0C, is ~8GiB, and is formatted FAT32.It definitely shouldn't work, because a.) it has no BIOS bootloader code and Boxes would need such code to work; and b.) arguably the image doesn't identify itself correctly, by using type code 0x0C instead of 0xEF, for booting a UEFI system, which is what the image is meant for.So this is partly user error/confusion, that a UEFI system's recovery image would be bootable by a BIOS VM; and part confusing error message. The most correct part of the error message is that the image is incomplete.Hmm.. what kind of error should Boxes be throwing at user for this extremely technical matter? I surely wouldn't want to talk to user about UEFI or MBR here since its likely they just got the image from somewhere and want to use it, without in-depth technical knowledge of what UEFI/MBR is all about and especially how they can possibly fix the problem.If the image can be reliably identified for what it is, then a suitable message might be "This media's software installer currently isn't supported."Longer term, eventually this just needs to work. All new x86 computers with Windows 8.x pre-installed are UEFI, and the copy of Windows that comes with them is UEFI only, and it has a legit license for single instance usage either baremetal or virtual. Even if they have to separately install OVMF, it's better than suggesting they have to buy a retail copy of Windows 8.Wait, I need to understand your use case first. The recovery installer image works like a standalone installer and does not require an existing installation?Use case is to use the copy of Windows included with a new computer in a VM instead of baremetal. The recovery install has a different UI than retail/standlone installer, but it does not require an existing installation. I've created this recovery media on both hard drive and USB stick, completely obliterated the computer's SSD (ATA secure erase using hdparm), and the restore software completely reinstalls Windows. The UI looks like this:It's a very basic wizard style interface, no options (including partitioning).Maybe this can't easily be supported, since every OEM has a different restore process? And I don't know the mechanism for the software being made aware of its product key, whether it's possible for OVMF (or other) to "pass through" this key in firmware to the VM. Or if the product key is baked into the recovery image itself? In any case there's no entry of a product key when restoring Windows with this.There might be a more sane alternative to supporting these OEM recoveries.I haven't tried this yet, either on baremetal or VM.Thanks for explaining the use case. I feel this to be an advanced use case and don't imagine most users to be needing this so while I feel bad about disappointing you but I will have to mark this as one of "Will fix if provided patches that are not way too intrusive" due to lack of time.I don't understand how the use case is advanced at all. The most common way users acquire Windows, by far, is the OEM provided Windows restore media. They shouldn't have to buy something they don't actually need in order to use it in a VM when their existing license already permits it. Requiring that the user acquire generic reset/refresh media from Microsoft is probably a reasonable burden.Eventually the UEFI support issue is going to have to get sorted out, not least of which is that Windows will eventually go UEFI only, but also VM's running Windows really ought to support Secure Boot too. It's not OK to only give users security features if they use Windows on baremetal.(In reply to Chris Murphy from)I am under the impression that most common installation method is through installer ISOs/media.Hmm.. that might be true. However, isn't it libvirt that should use the right bios? Daniel?(In reply to Zeeshan Ali (Khattak) from)No that is definitely not the case. Most common is pre-installation. For Windows XP/7 the manufacturer supplied a manufacturer (not Microsoft) created system recovery CD/DVD. Even the program that does the restore is the manufacturer's software, not Microsoft. It's very rudimentary. A restore obliterates the drive partition scheme in favor of a manufacturer defined one (not user definable at all) and writes binary blobs to each partition.Since the end of optical media, for years now, this recovery image is on a recovery partition. The manufacturer supplies a utility for copying that recovery partition's contents to a USB stick or drive to enable the user to create their own system recovery media. If the drive dies out of warranty and the user didn't create recovery media, the manufacturer typically charges $20-$30 to send this system recovery media (in DVD, USB stick, or ISO form). Again, it's manufacturer produced and branded, not Microsoft. The only time a user sees Microsoft generated DVD or ISO files with an installer is for upgrades. e.g. Windows 7 to 8, or Windows 8 (regular) to Windows 8 Pro.On UEFI, this is really no different except the tool that creates the USB stick or drive makes it UEFI bootable only since there's no reason for them to make it BIOS bootable.So today, if you buy a new computer, Windows 8.1 "install media" is on a recovery partition only, and it's UEFI bootable only. So already I think this is a problem that needs a solution for the general user. (And you don't need to worry about me personally, I don't really use Windows ever and if I do I have an Enterprise Eval image with a prebaked key in it, and it boots either BIOS or UEFI systems. But no ordinary user has such a thing.)(In reply to Chris Murphy from)Actually for 8.x to 8.x Pro, the user buys a product key, and uses 'add features' to change their product key, which then activates those features.Anyway, the most commonly available media is OEM produced, which is why I suggested maybe the Microsoft one [1] might be the most sane to support. It's just not used by most users, in that they don't know about it. But I wouldn't be surprised if this too is now only UEFI bootable. If I manage to acquire one I'll report back.[1]Create installation media for Windows 8.1	14.0	id=708637	7	False	False	richard	1
id=708637	REOPENED	glabels	general	git master	Other Linux	Normal enhancement		2013-09-23 16:02 UTC by	Richard Hughes	2014-05-27 14:33 UTC (	1 user	Long time glabels user here, so thanks for some awesomely useful bit of software. A small request if I may; Can you ship an AppData file for the gnome-software center please:Thanks,Richard.	Hi, I'm even volunteering to write and commit a description with your blessing; I don't want gLabels to vanish from the software center.An appdata file was committed on 2013-10-05 and was part of the 3.2 distribution. I neglected to update this bug at the time.Ahh, problem discovered -- you called the AppData file glabels-3.appdata.xml, when it has to match the desktop filename format, e.g. glabels-3.0.appdata.xml -- Can you please rename the file please so it's usable? Thanks!	3.0	id=348330	45	False	False	dcbw	1
id=348330	REOPENED	NetworkManager	PPP	git master	Other All	Normal enhancement	Dan Williams	2006-07-22 13:59 UTC by	Stefano Pedretti	2016-08-13 15:39 UTC (	25 users	Should be nice to integrate also dialup support in NetworkManager in future.	Which distribution are you using? There's already some dialup support in the SUSE and Fedora backends, and later this year more integrated PPP dialup support will be landing. But if you distro backend has it, it should work...Yes, there is a good support in Suse and Fedora, but i think NetworkManager could manage also PPP connections, near wire and wireless ones.For istance, in ubuntu 6.06 you must use gnome-system-tools that has poor support in dialup.I hope for the future a single well integrated interface to manage ALL network connections for a box, with a single applet to manage that. I think NetworkManager could be a great candidate for this work.(In reply to)I'm not very familiar with network-manager (except for using it). What exactly do you mean by »backends«? pppd? I'd like to get this working on my box and right now I can't tell whether it's NM's fault or the fault of my distributor (which seems to be the case according to you comment).On the last ubuntu (6.10) networkmanager still does not supply pppoe or dialup configuration. Good work guys(In reply to)NM has distribution specific backends for certain operations, and hooking into the dialup config is one of those. If you look at src/backends/NetworkManagerRedHat.c, you'll see:nm_system_deactivate_all_dialupnm_system_deactivate_dialupnm_system_activate_dialupnm_system_get_dialup_configThese functions need to be implemented for your backend. This support is pretty half-assed though, and will be replaced in the next few months with a much better integrated solution that talks directly to wvdial and pppd, but only in HEAD. So a patch would be quite welcome for your distro for the stable branch.Using Fedora7 ( rawhide ), and i was able to connect via dialup usingNM -> Dial up Connection -> Connect to dial_up_networkI am able to verify i am connected via ifconfig, but nm-applet thinks i'am not connected to network, and as a result i cannot connect to VPN bugzilla#354068 .Additionally, nm-tool does not list ppp0 interface .it seems nm 0.7 handles dial-up connection, atleast on ubuntu .Fedora7 runs nm 0.6.5 :(this is now the PPP support tracker bug for 0.7.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Just want to remind that PPP support should also include xDSL connections through USB modems, otherwise Firefox, Pidgin are going to think I'm offline (as it's happening right now in Fedora 9...)What is actually happening on this issue ? I was able to connect to dial up connections with NetworkManager with openSUSE 10.3, now I have to use Kinternet. Really a major advance in usability..PPP support is there for mobile broadband (3G) cards and thus the basis is there for POTS dialup as well. We're still working on dialup but things are moving.***has been marked as a duplicate of this bug. ***Just upgraded to latest Ubuntu 8.10 Beta.It has Network Manager 0.7.0What i miss is ppp dialup, for pppoe adsl.By selecting "VPN Connections > Configure VPN"i can edit the settings manually i can get to the DSL tab.I add a pppoe network here, the problem is it appears under the "Wired Network's" section and not as a dialup i can start in addition to the Ethernet/Wifi connection.I also added a 3G connection under the "Mobile Broadband" but it does not show in the menu as a option i can connect to.(In reply to)PPPoE is only supported on wired devices at the moment, that will be fixed.That probably means your 3G device either (a) isn't recognized as a 3G device by HAL, and/or (b) isn't connected.What mobile broadband device do you have, and is it plugged in?This is really a nuisance. Using mobile broadband ( GPRS with Sony Ericsson W800i ) over bluetooth is still only possible by switching off NetworkManager alltogether and use ifup in combination with Kinternet. Currently using opensuse 11.1 final.Neither configuration nor usage are possible via NetworkManager. Good job, guys.Priority should be higher than normal, severity should be at least major. Why this is treated as enhancement is over my head, as this used to work in older versions.Ubuntu Jaunty now ships with 0.7.1. It still misses PPP dialup options. It's not clear whether from this bug report whether this is a work in progress or if it has been ditched.Can somebody shed a clearer light about it?I really think PPP dialup should be integrated in the NetworkManager as this is still a normal (if rare) use-case for people to get various network connection over landline modems.Even now, at the dawn of a new century... Gnome Network Manager lacks the classic PPP0.PLEASE GET DIAL-UP SUPPORT BACK!This is essential for me because no other services are offered where I'm from. As of Ubuntu 8.04 it was discontinued, I beg of you to not discontinue support for Dial-up! This effects all distros and greatly hurts linux as an entirety because some distros do not come shipped with gnome-ppp, in such cases there is no way possible to "dial-up" and get it. Meaning unless it supports a packaging system and you know how to get the multiple dependencies (wvdial, etc, etc.) it is impossible to use the internet at all!... So, once again... please please... get support back. :)Is it going to happen?!It's there. Feel free to file specific bug reports.This bug was initially created for POTS dial-up support in NetworkManager. Downstream bugs e.g. Ubuntu and Fedora, still link to it for dial-up POTS; also marked bugzilla duplicates.Can this bug be re-opened?Thanks,changing the summary.NM bugzilla reorganization... sorry for the bug spam.This is a very important bug, which has sadly been ignored for the past seven years. Dial-up obviously still plays a role in the lives of people who have no other way of connecting:Looking forward to a "Dial-Up" tab right in gnome-network-manager next to "Wired" connections. By dialup I mean PPP, gnome-ppp style. Else we will have to port wvdial and use it for life, buggy as it is... :)Hi everyone. This issue is a big deal for me, so I'm willing to pay USD 50.00 for it.This offer is registered on FreedomSponsors ().If you solve it (according to the acceptance criteria described there), please register on FreedomSponsors and mark it as resolved thereI'll then check it out and gladly pay up!Oh, and if anyone else also wants throw in a few bucks on this, you should check out FreedomSponsors!This feature would be valuable for Tails:	28.0	id=150871	22	False	False	chpe	1
id=770436	REOPENED	doxygen	general	1.8.11	Other All	Normal enhancement	Dimitri van Heesch	2016-08-26 11:37 UTC by		2016-09-09 16:59 UTC (	2 users	Is it possible to implement block comments for VHDL?In VHDL-2008 block comments are supported with the same syntax as c/c++ :/* Start of block commentBlock commentEnd of block comment */All major tool-chains support this syntax and it would be nice if Doxygen would support it to.I looked at the git repository to see if I could find the code that parses the comments but I have no idea were to start, and how Doxygen is structured.I am a VHDL programmer by trade, but if it is a simple fix and someone can point me in the right direction I am willing to have a look and fix it myself.Regards,Rienk	In the vhdlparser.jj I see:// VHDL 2008 comment /* .... */// VHDL 2008 doxygen comment /*! .... */SKIP :{ <MULT_DOXYGEN_VHDL_COMMENT_2008 : "/*!" (~[])* "*/" > {...Which indicates to me that there should be support for the requested feature, I don't know how complete it is.Note the exclamation mark.Can you please attach a (small) self-contained example (source+config file in a tar or zip) that shows us places where it does not work?(In reply to rienk from)Block comments are supported for several years ./* bla bla bla bla bla bla*/--------------------------------------------A comment parsed by doxygens comment parser/*! bla bla bla bla bla bla*/Seen myand thefrom mk I think the problem has been solved in the mean time.Setting to fixed as suggested. Please reopen this bug report if you still see this issue with the latest version of doxygen. Add a self-contained example (source+config file in a zip or tar) if possible.Hi guys,Sorry for the late response.I did some testing and block comments are working.I think I found a bug in the handling of block comments however.If I add a general block comment in an architecture is seams to break the processing of the architecture.if there is a line that contains the end marker of the block comment "*/" in a regular comment the architecture is not processed.I added a tar file with an example.Regards,RienkCreatedvhdl comment exampleIn addition to my previous comment I tested this code on Doxygen 1.8.11 both on linux and on a windows system.Regards,RienkCreatedpatch for broken line comments(In reply to mk from)I tried the patch on a fresh clone.Doxygen was build successfully following the instructions in the manual.Unfortunately the result is still the same when I run it on the attached test project.Is it possible to debug the vhdlparser.jj file in qtcreator?1. you must download javacc6.0 2. execute javacc vhdlparser.jj javacc creates all the cpp-files in directoy vhdlparserAfter that you can compile the source files.I just correctly compiled the code after running javacc.I tested with a couple of different comment blocks and it all seems to work as expected.I am new to bugzilla, should I review the patch or is this comment enough?Thanks for the patch.Regards,RienkWith doxygen the following procedure is used: As soon as the patch is integrated into the main branch on github the bug report will be set to ASSIGNED and with the next release after that it will be set to RESOLVED and the submitter should verify the working in this new release.	12.0	id=770436	8	False	False	albert.tests	1
id=150871	REOPENED	epiphany	Interface	unspecified	Other Linux	Normal enhancement	Epiphany Maintainers	2004-08-23 18:35 UTC by	Christian Persch	2015-09-28 13:09 UTC (	5 users	Something likefor epiphany, so that insteadof just opening a mail, the menu item would launch that dialogue instead.	Re-assigning open epiphany-extensions bugs to.According to its developer, epiphany-extensions is not under active developmentanymore. (For reference:and.)It is unlikely that there will be any further active development.Closing this report as WONTFIX as part of Bugzilla Housekeeping - Please feelfree to reopen this bug report in the future if anyone takes the responsibilityfor active development again.There should be sharing support in Web.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***This would be used to "send" URLs to Pocket, start watching videos in Totem instead of in the browser, amongst other things.	8.0	id=609442	10	False	False	richard	1
id=761247	REOPENED	gnome-tweak-tool	general	unspecified	Other All	Normal enhancement	GNOME Tweak Tool maintainer(s)	2016-01-28 13:40 UTC by		2016-02-08 20:39 UTC (	2 users	In the unity-control-center one is able to set it so that their computer suspends after 5 minutes of inactivity as well as 10 minutes, however the gnome-control-center only allows times equal to or above 15 minutes which is rather annoying because if you want to set it to something below 15 minutes like 5 minutes, you have to go into the dconf-editor and change it yourself. So I think that the gnome-control-center should also allow you to set it to 10 minutes and 5 minutes.I initially filed a report on this issue here, but was told to also do so upstream:	You can change this through gnome-tweak-tool or gconf-editor. The current values are made so that the minimum value for the automatic suspend is higher than all the values for turning off the display, on purpose.No, I looked in the gnome-tweak-tool already many times, you have to do it through dconf-editor or manually through Terminal. So it would be nice if at least the feature existed in the gnome-tweak-tool so that it is easier for most users to configure.Reopening and reassigning to gnome-tweak-tool then.	3.0	id=761247	11	False	False	cooks.go.hungry	1
id=472199	REOPENED	anjuta	plugins: project-manager	git master	Other All	Normal enhancement	Naba Kumar	2007-08-31 12:52 UTC by	Christoph Brill	2012-03-16 15:37 UTC (	2 users	It would be really helpful to have a CMake plugin for Anjuta.	Moving to gnome-build as this is were project management for all backends is done!According to, gnome-build has not seen any development for more than three years. It has been archived in the code repository (Git) and it is under the "Deprecated" section of GNOME Bugzilla and has been closed for new bug entry.It is highly unlikely that there will be any further active development soon.Closing this report as WONTFIX as part of Bugzilla Housekeeping - Please feelfree to reopen this bug report in the future if anyone takes the responsibilityfor active development again.	2.0	id=472199	19	False	False	jhs	1
id=609442	REOPENED	gnome-color-manager	general	git master	Other Linux	Normal enhancement		2010-02-09 17:18 UTC by	Pascal de Bruijn	2010-09-26 15:41 UTC (	4 users	It would be nice, if a third party application (say UFRaw or Darktable (or XSANE?)) could call gcm-prefs to perform calibration/profiling based on a target image.Say a user opens a digital camera RAW file contain a target image in say UFRaw, then that user would want to click on a "generate profile" button in UFRaw, when the button is pressed, UFRaw would generate a nice linear RGB TIFF, and then starts gcm-prefs (or a separate tool) with parameters, to offer the user a calibration/profiling GUI... obviously UFRaw would pass the TIFF, but the user would still need to select the target type, and the reference file.Since there is no connected device image information, GCM should use the EXIF information for make/model. (In my opinion GCM should always use EXIF). Since nautilus also depends on libexif12, it should be no real problem for GCM to depend on that as well.	We really want a method on the DBus interface for this, lots of arguments passing to gcm-prefs isn't a great idea. I guess as long as the EXIF data is preserved when exporting to TIFF, then g-c-m could (and should) use it.Well, this obviously depends on $PROGRAM called GCM... But UFRaw can preserve EXIF in TIFFs. For other program it should be considered a bug if they don't :)Okay, I've done all the prep-work:[hughsie@hughsie-work src]$ git diff origin/master | diffstat configure.ac | 4 contrib/gnome-color-manager.spec.in | 1 data/tests/test.tif |binary src/Makefile.am | 2 src/gcm-calibrate-argyll.c | 89 ++-- src/gcm-calibrate-argyll.h | 16 src/gcm-calibrate.c | 725 ++++++++++++++++++++++++++++++++++++ src/gcm-calibrate.h | 25 + src/gcm-prefs.c | 588 ----------------------------- src/gcm-self-test.c | 2 src/gcm-utils.h | 4 11 files changed, 816 insertions(+), 640 deletions(-)Now we have to work out an API for applications to use. For instance, do we pass back to darktable the generated icc filename it should use? Should this be set as the device default? Should it just be added to the list of profiles for GCM?Can you explain how you would like this to work, from a high level interaction point of view. Thanks.Richard.Pascal, could you address the questions raised inplease? Thanks in advance.Closing this bug report as no further information has been provided. Please feel free to reopen this bug if you can provide the information asked for.Thanks!Sorry, I've been neglecting this :(Well, there are a few things we need to clear up first... With the first thing being the inequality of scanners and camera's.Scanners operate in a fully controlled environment, the light in always the same (except maybe warmup deviations).Camera's however are the colorimetric equavalent of a warzone, since there are lots of components that can (but not always do) affect color rendition:Sensor (CFA), Lens, Filters (UV?), Lighting conditions (sunlight,clouds,strobe,building lighting).And then there is the accuracy you'd want from profiling your camera where there are basically two approaches: - Matrices (sensor and lighting are our primary concern) - LUTs (may be affected by lens/filter differences too)This basically means, matrices are the "safer" approach, much less prone to user error, and for low patch count charts ColorChecker24 and QPcard this should probably be compulsory. We should recommend matrices, and tell the user that LUTs are for experienced users.That said, we are left with the interaction between $APP and GCM. I'll focus here on RAW developer since this is an area where I have some experience.Since camera profiles are likely to be situation specific (unless the user has made the necessary precautions regarding white balance, light source, etc.) GCM should probably not default any profiles made, since we risk defaulting a profile that is only valid for fluorescent lighting onto all new images, which would be bad. Setting a default should probably remain an explicit user action.So $APP has a button "generate profile" which passes a suitably exported image to GCM, GCM presents the chart type, and reference file dialog. After GCM has generated the profile, GCM should probably make the ICC available via it's DBUS API.GCM won't have to pass back the ICC to the $APP since it will already be available via DBUS? Maybe requerying DBUS should be mandatory after an image has been submitted for profiling...Does this make sense? Did I mis anything?	6.0	id=253326	14	False	True	fejj	1
id=253326	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other All	Normal enhancement		2004-01-26 14:21 UTC by	David Woodhouse	2012-02-10 20:01 UTC (	1 user	Description of Problem:The 'Sender contains' search option doesn't seem to work.Steps to reproduce the problem:1. Select a folder containing, for example, some Evolution list mail with the following header: Sender:2. In the search criteria, select 'Sender contains' and enter 'ximian'. 3. Press 'Find Now'Actual Results:Some mail is missing.Expected Results:All mails in the folder are shown (it's a list folder, and _every_ mail init matches, otherwise it wouldn't have been filtered into that folder inthe first place).How often does this happen? 100%Additional Information:Obviously (to you and me, at least), the criterion 'Sender contains' isgrossly misnamed and is in fact looking at the From address not the Senderaddress.But it's _very_ confusing to name it like that, given the existence of a_real_ Sender: header with very real meaning, which people are likely towant to filter on (it's the only reliable way of detecting mailing lists,for example).The criterion 'Recipients contain...' is OK because there isn't a realRFC2822 header by the name of 'Recipients'. It's really not sane to say'Sender contains...' when that's not what you're going to do though.	Sender contains searches From: headers, not Sender: headers.Yes,is an accurate summary of the bug.The From: header contains the author(s) of the message.The Sender: header contains the sender.When you ask Evolution to search on sender, it searches on author. That's a bug.this isn't a bugMy feelings on this are as follows:It's unfortunate that there is a Sender: header[1] but I think that gramatically it sounds cleaner saying "Sender contains" than "From contains" in the way the text reads. It also matches better with the term "Recipients" (think: "Sender and Recipients" vs "From and Recipients"). I dunno... that was the original reason behind using that name anyway.[1]: The most likely use-case for the Sender: header is when a secretary (or whoever) sends mail in the name of another party, in which case the From: header will be in the name of the person(s) they are sending mail on behalf of.The other case I've seen is Sender: being set (or, sadly, overwritten) by mailing-list software.Reopening to get the viewpoint of a usability person... (unfortunately I have no idea who to CC to get this opinion).Clash between tech terms and "average user" language.Proposing WONTFIX as I'm more after average users being able to understand how to search for who wrote a message (and not who technically sent it).No, it's not even about technical terms.The person who *sends* the mail is the sender.The people who *wrote* the mail are the authors.This is true *regardless* of the technical terms used in the RFC5322 headers (which are Sender: and From: respectively).What we have at the moment is just *wrong*. It purports to do one thing, but does another.Why on earth can it not be changed to 'Author contains...' or something else that actually reflects what it really does?	6.0	id=117892	17	False	True	mpgritti	1
id=117892	REOPENED	epiphany	History	git master	Other Linux	Normal enhancement	Epiphany Maintainers	2003-07-20 11:15 UTC by	Reinout van Schouwen	2015-09-24 23:48 UTC (	4 users	From:------- Additional Comments From spark 2003-07-03 07:43 -------Maybe it would be nice to support this from the address entry too (so you don't have to even open the history window):----There is a similar request for Chimera:	This is impossible with the new gtkentry completion API, so resolvingWONTFIX.***has been marked as a duplicate of this bug. ***Why not request a gtkentry API addition and make this bug depend on that?Ok, let's do that.Filed gtk enhancement.updating version.***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***	8.0	id=213660	47	True	False	luis	1
id=312631	REOPENED	Gnumeric	Main System	git master	Other All	Normal enhancement	Jody Goldberg	2005-08-05 06:42 UTC by		2009-09-24 07:02 UTC (	3 users	Version details: Win32 1.5.2Distribution/Version: Swedish Windows 98 SEBeing 100% M$-Excel compatible I expect to find macros and push buttons amongthe tools, but there is no such thing.If I open an Excel file, created with Swedish version of M$-Excel 2000, itgenerally looks very nice (looks better than OOo 1.1.4). But if there arepictures inserted in the Excel sheet they are replaced with someting else. Andif there are push buttons in the Excel sheet they appear fairly correct but thecaption is replaced and nothing happens when pressing the buttons.	Macros are not yet implemented, but pictures should be correctly displayed. Canyou provide sample files and screenshots (of the same file displayed in exceland in gnumeric) showing the differences ?CreatedScreen shot of an Excel fileFour screen shots merged to one picture from the same Excel workbook.The left column shows sheet1 and sheet2 in Excel.The right column shows sheet1 and sheet2 in Gnumeric.The picture with the question mark is our "unknown image type" filler.Note, that the logo picture on top is rendered fine.WHat kind of image is the one that we render as the "unknown image type" filler?The image file is a Windows Enhanced Meta File (EMF).CreatedMore picture related problemsAfter starting a new clean session of Gnumeric I started with trying to inserta picture. During browsing for a picture (without having selected any picture)Gnumeric crached with the error message as attached.Regarding EMF: This is a known shortcoming. It is hard to fix on Linux - thereis no library to render EMF. Both OpenOffice and Wine have EMF code, but nobodyhas yet done the work of extracting that code to a library or a renderingservice. A windows only fix may be possible. The good news is that the dataisn't thrown away. If you change the spreadsheet and save in Excel format, theimage will be there when you open it in Excel.Regarding the crash: If you can make it crash again, it would be helpful if youcould describe in detail what you did before the crash. If you can get abacktrace, even better. This involves a debugger, but I don't know the detailson Windows.CreatedCnumeric crash. Step by step.Description of Gnumeric crash. Step by step:1. Start Gnumeric.2. Choose to insert a picture.3. Select C:\4. During the scrolling with the scroll-bar Gnumeric crashes.I filed the crash against pango as.Could you give us a list of all files in c:\ please?Especially files with non-ASCII names.If you by ASCII names mean files with 8.3 characters, then there are severalfiles and folders not having ASCII names.non ASCII names are names containing characters other than a..z, A..Z, 0..9 andsome other characters (-,_,+,...) all having codes between 0x20 and 0x7F. As asample, my_file_with_a_long_name.file_type is an ASCII file name.Naturally there are folders and files with names containing Swedish characters,as I am Swedish. If the Gnumeric is depending on that the user is using only theEnglish characters, then the code is fundamentally bad written.Hans,Your comment "If the Gnumeric is depending on that the user is using only theEnglish characters, then the code is fundamentally bad written." is quitecounter productive. Of course Gnumeric does not assume that one uses only ASCIIcharacters. Your crash happens in pango. A library whose whole purpose is tosupport non ASCII glyphs. To determine the exact cause of that bug one has todetermine which string is being rendered. That's why we need to know the(non-ASCII) names of the files in your directory.CreatedThe Swedish charactersSorry if I upset someone with my comment.I have attached a picture of the characters because I think that they will notbe displayed correctly, on a computer running a non Swedish operating system,if I just type them here.Not e that the crash has been fixed with pango 1.12 that has been out for 3.5 years.Absence of macros and push buttons seems to be what is left from this report.Push buttons are implemented (even if they currently only change the value in a cell, but that could be used to trigger a script)	17.0	id=312631	12	False	True	jean.brefort	1
id=125670	REOPENED	libxslt	general	unspecified	Other Linux	Normal enhancement	Daniel Veillard	2003-10-28 09:36 UTC by	Roumen Petrov	2004-12-22 21:47 UTC (	0 users	When xsltproc cannot read external entity print a warning like this:warning: failed to load external entity "[<PATH>]foofile.xml"where <PATH> is path to xml file from command line.When we use --path command line options "external entity" can be in otherdir. usualy not in <PATH>.It will be good xsltproc never to print <PATH>, but with -v options to showfailed read.	CreatedtestcaseThe error MUST be reported. Sorry this is not optionnal, and should not.Catch the errors in your code if you don't want ot print them but thedefault behaviour is definitely not a bug !DanielDaniel, I would like to reopen bug, because:Let we look output (warnings!) carefully :=======================================================$ /opt/libxslt/20031027/bin/xsltproc -o test.out --path deny_readxsl/test.xsl xml/test_bad.xmlI/O error : Permission deniedwarning: failed to load external entity "xml/foofile.xml"warning: failed to load external entity "xml/foo_file.xml"$ ls -l deny_read/total 4.0k--w--w---- 1 ........... foofile.xml=======================================================Take care about "--path" command line option": xsltproc cannot read"deny_read/foofile.xml" (!) but report "xml/foofile.xml" - that is bug.I don't complain against warning. Wrong is reported "file_name"(exactly "file_path" component of name) in warning !Might the simplest fix is warning to contain only basename, i.e.file_name without path.====Other correct message is like this:warning: failed to load external entity "foofile.xml" from paths"deny_read:xml"====I would like to explain my idea for output messages with samples:1.) verbose mode is off$ .../xsltproc -o test.out --path deny_read xsl/test.xsl xml/test_bad.xml....warning: failed to load external entity "foofile.xml".....2.) verbose mode is on$ .../xsltproc -v -o test.out --path deny_read xsl/test.xslxml/test_bad.xml....I/O error for 'deny_read/foofile.xml': Permission deniedwarning: failed to load external entity "foofile.xml"....Createdtestcase with relative pathsOutput for test with xml/test_bad1.xml is confusing:I/O error : Permission deniedI/O error : Permission deniedwarning: failed to load external entity "data/foofile.xml"	5.0	id=701651	12	False	True	jasuarez	1
id=636701	REOPENED	empathy	Meta Contacts	2.32.x	Other Linux	Normal enhancement		2010-12-07 13:10 UTC by	Laurent Bigonville	2015-02-09 21:35 UTC (	4 users	Hi,It could be interesting to add a menu entry to allow to remove a subcontact from the contact list without unlinking it first	I don't see the use in this. It would add complexity to the interface to deal with a situation which will very rarely happen: I'd expect that each sub-contact only ever gets linked to form a meta-contact once in its lifetime. Unlinking the entire meta-contact to fix a linking mistake is not massively inconvenient given that it will happen very rarely.is about improving the linking UI, so if you want to pursue this further please discuss it there. Thanks.Well I was meaning, completely removing the user from the rooster, not ungrouping a subcontact.Oh, I see. That might make sense.Guillaume, what do you think?Yeah, I think being able to remove a specific persona could be nice to have.from Ubuntu	5.0	id=125670	7	False	True	xmlsec	1
id=701651	REOPENED	grilo	plugins	git master	Other Linux	Normal enhancement		2013-06-05 14:53 UTC by	Bastien Nocera	2014-04-07 10:53 UTC (	2 users	The OpenSubtitles.org website allows to look up an IMDB ID based on the contents of a file:And themoviedb.org can do look ups based on the IMDB ID:This would allow going from file's contents to movie details without going through mangling the filename, for example.	has an example of looking up IMdB IDs.Createdtracker: Export gibest hash if availableIf the gibest hash, used by OpenSubtitles, is available, exportit so that we can use it to look up subtitles.Createdtracker: Export gibest hash if availableIf the gibest hash, used by OpenSubtitles, is available, exportit so that we can use it to look up subtitles.pushed as- tracker: Export gibest hash if availableWe still need to implement the lookup.	5.0	id=636701	9	False	False	gdesmott	1
id=766776	REOPENED	gnome-shell	general	3.21.x	Other Linux	Normal enhancement		2016-05-22 16:02 UTC by	Michael Catanzaro	2017-01-22 21:24 UTC (	8 users	The browser plugin is crashy and broken; there are dozens of bugs filed against it here and nobody is looking at them. Chrome has already dropped support for NPAPI plugins, Firefox is going to do so before the year is out. The only browser that will be left supporting NPAPI is Epiphany, but I intend to blacklist this plugin specifically due to the high number of crash reports.We could continue to "maintain" here a useless plugin that works in no browsers, or we could just delete it.	CreatedRemove the browser pluginThe browser plugin is crashy and broken; there are dozens of bugs filedagainst it on Bugzilla and nobody is looking at them. Chrome has alreadydropped support for NPAPI plugins, Firefox is going to do so before theyear is out. The only browser that will be left supporting NPAPI isEpiphany, but I intend to blacklist this plugin specifically due to thehigh number of crash reports.We could continue to "maintain" here a useless plugin that works in nobrowsers, or we could just delete it.Note: this is intended for GNOME 3.22, since GNOME Software has grown support for handling shell extensions.Somebody else will need to care to extensions.gnome.org.(In reply to Michael Catanzaro from)That has been the plan for a while now, but the replacement should be ready before we kill off the plugin. Currently installed extensions show up in Software, but nothing more - we'll need search results and installation as well ...***has been marked as a duplicate of this bug. ***Note that support for browser plugins has been removed from Epiphany 3.23.1.(In reply to Michael Catanzaro from)Note that I got in trouble for this and reverted the change.Hello,What do you think about merging chrome-gnome-shell [1] native messaging app to GNOME Shell codebase as replacement for NPAPI plugin?Currently, chrome-gnome-shell supports all major browsers: Google Chrome/Chromium, Vivaldi, Firefox and Opera.See also:[1]P.S.:As for signed browser extensions please note, that I'm twice [1][2] sent message to Release Team asking to take control of release accounts for Browsers's Stores and also sent message to Foundation Board last week with offer to transfer ownership of extensions published at Browsers Stores.[1][2]I guess the twist of fate here is that my decision to drop support for NPAPI plugins was reverted, so we actually still need the plugin for our browser. And the plugin actually works reliably now that Carlos Garcia fixed some refcounting bug. And now that you're maintaining the extensions website, we don't actually want to kill the website anymore; that was only desirable when nobody was working on it and it was super broken for years. So actually I'm OK with the status quo now; things have improved hugely in the past couple of months. Feel free to catch me on IRC or epiphany-list if you want to talk about an NPAPI replacement. I don't think it can use WebExtensions as that'd be a big project that nobody seems to be interested in working on, but it should be relatively straightforward to throw together some JS API that's only made available to extensions.gnome.org if you want to drop the plugin.We do still need to get chrome-gnome-shell into distros, but I don't see any particular reason to include it in the gnome-shell codebase; it can live happily as a separate module, right? What I would do is rename it to something that doesn't say "chrome" first, then we can add it to GNOME JHBuild and include it in our platform releases to encourage distros to pick it up. Does that sound good? It does make sense for it to be packaged by distros, right?I see. From that point of view NPAPI plugin indeed can not be dropped now.For now (while I can support both async and sync sweettooth APIs at e.g.o.) I do not have a goal to kill NPAPI plugin.However if it (dropping NPAPI part) will help to enhance GNOME Web itself I would be glad to help.Async JS API is ready [1] btw (my bad - it's not documented now). You should already know sync version (NPAPI). Async version return Promises instead of real values for all functions and have "initialize" function to setup all properties.The reason is same as with NPAPI plugin - every GNOME user should be able to install GNOME Shell extensions with minimal efforts.I (as well as some distros maintainers [2][3] and users [4]) think that it should be a part of GNOME Shell.[1][2][3][4](In reply to Yuri Konotopov from)Not really, the NPAPI code lives in WebKit and we have to keep and support it regardless. I just wanted to disable it in Epiphany because that's what all the trendy browsers are doing and it makes it feel more modern. But apparently people still want to use NPAPI. :PBut it can be installed by default in distros without becoming part of the gnome-shell codebase, so you have separate git histories. I guess it could become a submodule in the same way that gnome-shell-sass is, though. Anyway, that's not up to me as I'm not a gnome-shell maintainer; I would file another bug report to track this.Now when visiting extensions.gnome.org see this error: "We cannot detect a running copy of GNOME on this system, so some parts of the interface may be disabled. See our troubleshooting entry for more information." Did we drop support for this browser plugin?(In reply to Michael Catanzaro from)I did not touch e.g.o. part of integration.It *almost* works for me in GNOME Web 3.20.However I see random errors with it (I saw them all time as I remember).In Firefox it works without issues for me.Maybe if it still doesn't work reliably, we should just remove the browser plugin.Consider filing an epiphany bug to implement the subset of WebExtension APIs you need for this extension, it'll be a good starting point for us.	14.0	id=768510	17	False	False	sh.yang	1
id=350545	REOPENED	GStreamer	gstreamer (core)	git master	Other Linux	Normal enhancement	GStreamer Maintainers	2006-08-09 08:39 UTC by	Stefan Sauer (gstreamer, gtkdoc dev)	2013-01-10 11:35 UTC (	4 users	Durinf development one often gets:basesrc( 1083) gstbasesrc.c(1698):gst_base_src_start:<v4l2src0> error: Could not negotiate formatWARN (0x19000 - 0:00:07.850402000) basesrc( 1083) gstbasesrc.c(1698):gst_base_src_start:<v4l2src0> error: Check your filtered caps, if anyThis definitely need fixing. There is no point that deverlopers spend years reading GST_DEBUG="GST_CAPS:4" output to figure the problem. If format cannot be negotiated then a reason *must* be given.	Read the *:5 log then, it almost always is in there somewhere.To clarify. In most cases its not all fields that fail to negotiate. It would be helpful if the LOG justs says e.g.:Could not negotiate caps: formats [RGB] <> [I420, UVYV]marking as enhancement: need a global pipeline caps introspection and debugging tool.Some more thoughts: The problem in e.g. basesrc is that is e.g. uses gst_base_src_default_negotiate() which only returns a boolean. So the caller gst_base_src_start() cannot give any details. Now inside gst_base_src_default_negotiate() its gst_caps_intersect() that does the work. This cannot log a warning as it doesn't know the use case (wheter no intersect found is good or not).What about having:gchar *gst_debug_caps_intersect_failure_reason(GstCaps *caps1,GstCaps *caps2);so that in high level code (e.g. basesrc) one can write:if (icaps = gst_caps_intersect (thiscaps, peercaps)) { /* success, go on */}#ifdef GST_DEBUGelse { gchar *reason=gst_debug_caps_intersect_failure_reason(thiscaps, peercaps); GST_WARNNG_OBJECT (basesrc, "no common caps: %s",reason); g_free(reason);}#endifThe implementation would* first check both caps for EMPTY* if not, check if they have common mediatypes* and if they have, it needs to check for missing fields or fields with not maching ranges/valuesAn other concrete illustration of this problem (from gst-devel mailing list) :* Julien Isorce wrote:If my X11 settings are 32 bpp then an annoying thing is that running "gst-launch-0.10 videotestsrc ! "video/x-raw-rgb, bpp=16, depth=16" ! ximagesink" gives me an error from videotestsrc : "videotestsrc0 : Could not negotiate format"But this is not really true, actually the fault is from ximagesink.Because in ximagesink::gst_ximagesink_getcaps, the xcontext->caps is setup to bpp=32 and depth=24, so I think at this point ximagesink should check that this is not compatible with the required caps from my capfilter.And so the error should be at least: "ximagesink0 : Could not negotiate format"* Tim wroteWell, yes. We should find a way to report errors like this better, nodoubt. Currently there's no way to communicate error state to theupstream element that drives the pipeline and eventually errors outthough, it just knows the flow return and that's that.Cheers -TimThe capsdebug element does most of what you'd want here.Example showing the complete negotiation between videotestsrc and xvimagesink: GST_DEBUG=default:3 gst-launch videotestsrc ! capsdebug ! xvimagesinkIn Julien's case, first try: GST_DEBUG=default:3 gst-launch-0.10 videotestsrc ! capsdebug ! "video/x-raw-rgb, bpp=16, depth=16" ! ximagesinkThis gives:0:00:00.069300550 897 0x8ea2070 INFO default gstcapsdebug.c:235:gst_caps_debug_getcaps: downstream returned EMPTYTry again, with capsdebug in a different spot: GST_DEBUG=default:3 gst-launch-0.10 videotestsrc ! "video/x-raw-rgb, bpp=16, depth=16" ! capsdebug ! ximagesinkThis gives:0:00:00.048809149 904 0x8ce1070 INFO default gstcapsdebug.c:230:gst_caps_debug_getcaps: downstream called getcaps0:00:00.052694563 904 0x8ce1070 INFO default gstcapsdebug.c:235:gst_caps_debug_getcaps: upstream returned video/x-raw-rgb, bpp=(int)16, endianness=(int)1234, depth=(int)16, red_mask=(int)63488, green_mask=(int)2016, blue_mask=(int)31, width=(int)[ 1, 2147483647 ], height=(int)[ 1, 2147483647 ], framerate=(fraction)[ 0/1, 2147483647/1 ]Setting pipeline to PAUSED ...0:00:00.059975304 904 0x8ce1070 INFO default gstcapsdebug.c:230:gst_caps_debug_getcaps: upstream called getcaps0:00:00.060033064 904 0x8ce1070 INFO default gstcapsdebug.c:235:gst_caps_debug_getcaps: downstream returned video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)[ 1, 2147483647 ], height=(int)[ 1, 2147483647 ], framerate=(fraction)[ 0/1, 2147483647/1 ], pixel-aspect-ratio=(fraction)1/1capsdebug doesn't specifically tell you that these aren't compatible, but it's not too hard to figure that out.I think we could and should do better than that. This is such a basic thing, and our error reporting in these cases is really really bad. It's one of the biggest issues for newcomers too, they just get cryptic failures from completely unrelated elements (e.g. source, when something failed ten elements down the line) and are then expected to dig through megabytes of debug spew. Not cool.There's no reason why we can't report better which pad and error originated from, for example, or why not-negotiated was returned. I've got some ideas on how to do this better, so I'd like to keep this bug open.	7.0	id=766776	14	False	False	mcatanzaro	1
id=571352	REOPENED	vala	Arrays	unspecified	Other All	Normal enhancement	Vala maintainers	2009-02-11 21:27 UTC by	Zeeshan Ali (Khattak)	2017-02-17 20:49 UTC (	8 users	It will be really nice if vala supports array[N:M] syntax for easy slicing for arrays.	Let me toss an additional vote for this feature, and if possible, also add negative indices, as per Python syntax. The icing on the cake then would be array[N:M:S], with S being the step.CreatedInitial support for array slicesI've done some work on this, and I'd like some feedback before I continue — if this has no chance of being accepted, I'd rather stop now, rather than after even more coding.I used the perl/ruby/D notation, so slices are specified with double periods instead of colons, so it's array[N..M]. I'm not sure if the other syntax is preferable, but if so, it'd be easy to switch.=> Things that are done:Slicing works for strings, and for one dimensional arrays. Non-pure expressions can be used to specify the slice size.=> Things that need work:Slicing for multi dimensional arrays do not work.There is no slicing for signal handlers.Slices of slices (like array[N..M][P..Q]) generates very broken code (array2=array[N..M];array2[P..Q] works though — I'm just failing to put the right function calls in the right place).There's no documentation, and no support for genie.There's no step parameter, and no negative indices.This is the first time I've looked at the Vala code (or any compiler's code), so there'll probably be some restructuring required.nice!Thanks for the patch. I think we should use the Python syntax as in the range syntax the end is usually inclusive, and I'd prefer an exclusive end index. Your implementation uses the range syntax with an exclusive end index, which is rather uncommon, as far as I can tell.We can probably simplify the string implementation by adding a slice method to glib-2.0.vapi and just call that to avoid complex C code generation. At the same time, this would allow us to make the slice syntax more flexible as it could be supported for any type that has a slice method, as, for example, Gee.ArrayList.commit 0a692ab35788c14498127ca8c04d144a6616ae57Author: Jürg Billeter <>Date: Sat Dec 19 10:00:36 2009 +0100 glib-2.0: Add string.slice methodcommit 52d84048e075bba00f59992a373e1de954fa2b60Author: Jürg Billeter <>Date: Sat Dec 19 12:02:05 2009 +0100 Initial support for array slices Add support for slice expressions such as array[1:5] to retrieve a slice of length 4 starting at the second element of the array. Slice expressions are also supported for strings and other types that provide an appropriate slice method. Based on patch by Robin Sonefors, fixes.Reopening this and flagging as enhancements as per the following enhancements / fixes:1.) Negative slice indicesIt would be much more convenient to sayvar foo = bar[4:-1] as opposed to var foo = bar[4:bar.length-1];I'd appreciate if this syntax could even be used for normal index lookup, getting the last element in an array looks much better via bar[-1] than bar[bar.length-1];2.) Range check semantics.Right now you can allocated invalid slices, which should be forbidden, i.e.void main(){ var array = new char[] { 'H', 'A', 'L', 'L', 'O' }; var slice = array[2:100]; message( @"slice length = $(slice.length)" );}Here we are able to get a slice with the length 98 out of 5, which should clearly be not allowed, it should be truncated to the actual maximum size.CreatedSupport negative array/slice indicesThis was already supported for string slices, but now it works for array slices and element accesses as well.This is the first patch in a series of three with various improvements to the slice support. Please note that they'll have to be applied in the order I upload them.CreatedAllow empty start or stop value in array slicesEmpty stop values allows a more convenient way to express "the restof the array" (a[n:] vs a[n:a.length]). Empty start values providesnice symmetry.CreatedValidate array indices for element accesses and slicesModeled on the tests in the slice method in the string class, butchecks that slice end > slice start is not yet implemented.Thanks for the patches. Even though strings already support slices with negative indices, I'm not sure whether it's really a good idea to support it. I understand that it can be convenient in quite some places, however, there are also some issues to consider: * Negative array indices are already supported for pointers but there they have a different meaning * As there is no difference between 0 and -0, there is some inconsistency here * When the index you use is the result of arithmetic operations, you might accidentally end up with negative values and this may result in hard to find bugs (or non-negative values such as 0 even though you intend to count from the end of the string) * As it needs to be checked at runtime, there is a performance penalty (might not be significant)The same arguments apply to some extent to the proposal of truncating slices instead of reporting an error (which is not yet in these patches, if I read them correctly).As I understand that it can be useful, I'm open for suggestions how this could be supported without the above issues. One possibility would be to have a separate token that represents the array length. That is, support something like the following:int[] array = ...;array[$-1] = 42; // assigns last elementvar a = array[5:$]; // slice from 6th to last elementvar b = array[$-5:$]: // last 5 elementsThis would even be more flexible than the current proposal, although I'm not sure whether that part is really useful:var c = array[0:$/2]; // first half of the arrayvar d = array[$/2:$]; // second half of the arrayMaybe anyone else has better suggestions along the same line?Allowing empty start or stop value in slices sounds like a good idea to me, and, in general, I don't see a reason why we shouldn't support it. However, if we implemented something like the above $ solution, we might want to skip it as $ would already cover the same use case, and I try to avoid syntax alternatives where it doesn't add anything.BTW: At least the first patch behaves incorrectly if the passed array index is an expression with side effects.I don't think the $ is particular comprehensible -- other than resembling a vague similarity to the end-of-line symbol in regex, but I could live with it, if it's the only chance to get this feature in.I still think plain negative indices as well as 'missing' start/stop values would match the very clear syntax of Vala and be more readable.I find the $ syntax very hard to read. I think following Python syntax is really the better choice here. Would it be possible for valac to issue warnings if pointer arithmetic is used inside slice syntax to avoid ambiguity?See also the related bugs #641268, #627460, and #641267. I still think following the Python syntax is the best approach.For what it's worth, I'm using slice() and substring() functions depending on the case at this point. Waiting very long with this new syntax unfortunately means in practise that it won't be usable for a very long time.***has been marked as a duplicate of this bug. ***	16.0	id=571352	20	False	True	j	1
id=768510	REOPENED	GStreamer	gst-plugins-base	git master	Other Linux	Normal enhancement	GStreamer Maintainers	2016-07-07 10:08 UTC by	Edward Hervey	2016-08-17 12:37 UTC (	3 users	Currently applications can't control precisely the SEGMENT event being pushed out from appsrc in push-mode.An option would be to make appsrc handle the (optional) segment present on GstSample when calling the "push-sample" action/method.	In case of changing Period adpativedemux, SEGMENT event will be triggered which was followed by stream-start event.On the other hand, let's assume a case that DASH/HLS streaming without adaptivedemux... In that case, current appsrc implementation cannot handle SEGMENT event which was driven by application (might be stream-start event also).So, we need to open an optional way to handle external (application) driven SEGMENT event and stream-start event.Thanks for taking the time to report this.This particular bug has already been reported into our bug tracking system, but please feel free to report any further bugs you find.*** This bug has been marked as a duplicate of***Erm, wrong bug. Sorry for the noise :)CreatedRemove-trailing-whitespace.patchCreatedhandle-pushing-custom-segments.patchCreatedhandle-pushing-custom-segments.patchReview of:Thanks, this looks like a good start :) We should double-check if the seamless segment API of basesrc does the right thing though, it was implemented for a completely different use-case. That's why it has the "seamless" in the name. This here is not really for anything seamless anymore.I'm not sure there should be a new property for this. It should be safe to just always do that if the sample contains a valid segment::: gst-libs/gst/app/gstappsrc.c@@ +167,3 @@ #define DEFAULT_PROP_CURRENT_LEVEL_BYTES 0 #define DEFAULT_PROP_DURATION GST_CLOCK_TIME_NONE+#define DEFAULT_PROP_DRIVEN_BY_APPLICTAION FALSETypo, APPLICATION@@ +185,3 @@ PROP_CURRENT_LEVEL_BYTES, PROP_DURATION,+ PROP_DRIVEN_BY_APPLICTAION,Here too@@ +427,3 @@+ * GstAppSrc::driven-by-application:+ *+ * Allows applictaion to push custom segment with calling the "push-sample"And here@@ +1202,2 @@ if (!GST_IS_BUFFER (obj)) {+ if (!GST_IS_CAPS (obj)) {Store the GstSample in the queue, and then use gst_sample_get_buffer/caps/segment() here instead::: tests/check/elements/appsrc.c@@ +512,3 @@+ GList *expected = NULL;++ segment = gst_segment_new ();Allocate on the stack :)@@ +514,3 @@+ segment = gst_segment_new ();++ for (i = 0; i < sizeof (modes) / sizeof (modes[0]); i++) {G_N_ELEMENTS@@ +521,3 @@+ sink = gst_element_factory_make ("fakesink", NULL);+ gst_bin_add_many (GST_BIN (pipe), src, sink, NULL);+ gst_element_link (src, sink);Some error checking here@@ +534,3 @@+ gst_app_src_set_callbacks (GST_APP_SRC (src), &cb, NULL, NULL);++ gst_element_set_state (pipe, GST_STATE_PLAYING);Check if this returns an error@@ +576,3 @@++ /* Give some time to the appsrc loop to push the buffers */+ g_usleep (G_USEC_PER_SEC * 1);Why?@@ +580,3 @@+ if (modes[i] == GST_APP_STREAM_TYPE_SEEKABLE) {+ /* Client request seek to 7 sec position (which belongs to 2nd period)+ * Applictaion must provides corresponding buffer (of 2nd period) withTypo, Application@@ +626,3 @@+ msg_types = GST_MESSAGE_EOS;++ msg = gst_bus_timed_pop_filtered (GST_ELEMENT_BUS (pipe), -1, msg_types);Should probably check for errors@@ +643,3 @@+++GST_START_TEST (test_appsrc_custom_segment_twice)Same comments as above@@ +804,3 @@+ * - Application has been notified that it can control pipeline timeline+ * (by setting 'driven-by-application' property)+ * - Both appsrc segment and the custom segment have TIME formatBYTES format and BYTES segment and other compatible pairs should also work though@@ +892,3 @@+ /* 1st sample includes buffer and segment */+ fail_unless (gst_app_src_push_sample (GST_APP_SRC (src), sample)+ == GST_FLOW_OK);Shouldn't this give a GST_FLOW_ERROR then?(In reply to Sebastian Dröge (slomo) from)Thanks for your detailed review.Frankly, the "seamless" is confusing me because it's used only dvb related element, (I've never use it....). Can I ask why it's called seamless? (in the sense the SEGMENT for seamless playback?)What I've studied about previous use-cases, and they are- DVDNAV_NAV_PACKET event ==> might pts discont. happen. For the "seamless" playback, it need to push new segment without seek/flush- DVDNAV_HOP_CHANNEL ==> obviously "non-seamless"Both cases are use case of the seamless API if my understanding is correct. So I though this API can be used for seek/flush independent SEGMENT event.I don't think that my use case of this patch is not much different.- DASH multi-period causes PTS discont, so need new SEGMENT without seek/flush.- Playing with non-zero PTS is possible by using new SEGMENT (without seek/flush). I might be wrong, so please correct meI agree with you. I'll do rework.I'll try to support BYTES format and BYTES segment, but could you explain more about compatible pairs?(In reply to Seungha Yang from)It seems to do exactly what we need here, so let's use it :) It's going to output the new segment right before the next data.The segment format must be the same as the value of the format property on appsrc. That's what I meant.Createdhandle-pushing-custom-segments.patch(In reply to Sebastian Dröge (slomo) from)Do we need to queueing all the members as a GstSample? I'd like to suggest that queueing only SEGMENT/CAPS using GstSample at gst_app_src_push_sample_internal() method. And queueing buffer without any modification from previous way... Actually, I tried some ways, but everything in gst_app_src_push_buffer_full () method is need at that moment of "push-sample" method/action is called (such as blocking, do timestamp and flow return).Review of:Looks better already, thanks for the update :)::: gst-libs/gst/app/gstappsrc.c@@ +1871,3 @@+ /* initialized segment (i.e., gst_segment_init (segment, format))+ * we don't know whether it's pushed intentionally or not. ignore */+ GST_LOG_OBJECT (appsrc, "initialized segment, ignore segment");It might very well be intentional, don't ignore it here.@@ +1876,3 @@+ /* if we are here, application pushed segment intentionally for+ * random-access stream-type. Something wrong, return error */+ GST_LOG_OBJECT (appsrc, "random-access stream type, error");Why?@@ +1904,3 @@+ gst_caps_unref (g_queue_pop_tail (priv->queue));+ }+ gst_caps_replace (&priv->last_caps, caps);Maybe this code should be unified with the other caps setting code, that is, maybe always pass a GstSample around. Or does that actually complicate the code?@@ +1915,3 @@+ gst_sample_new (NULL, caps ? gst_caps_ref (caps) : NULL, segment, NULL);+ GST_DEBUG_OBJECT (appsrc, "queueing sample %p", new_sample);+ g_queue_push_tail (priv->queue, new_sample);Why not just enqueue the complete GstSample and take the buffer out of it on the other side?Created0001-appsrc-Split-methods-to-be-more-reusableappsrc: Split methods to be more reusableThis patch is a pre-work to rework push_sample method.Created0002-appsrc-Handle-pushing-custom-segmentsCreated0000-sample-Modify-initialized-segment-formatsample: Modify initialized segment formatAs a member variable of GstSample, segment has uncertainty.If there was no indication about segment, gst_sample_new () methodwill initialize segment with time-format.So, from the getter point of view, it's hard to figure outwhether it's intentional segment or not.To clarify, let's initialize segment with undefined-format.(In reply to Sebastian Dröge (slomo) from)Because current GstSample implementation uses time-format as a default (please refer to gst_sample_new() method), I think there is no way to clarify whether this segment is intentionally or not.Unlike to the other member variable (caps/buffer/info, they can be NULL), segment always has value. I can cause uncertainty.Could we change default format of segment in GstSample to GST_FORMAT_UNDEFINED, in order to notify that this is not meaningful segment?Please review patch for GstSamplethe restriction for random-access stream was removed :)I tried to unify them on top of.complete GstSample will be queued.Created0002-appsrc-Handle-pushing-custom-segmentsCreated0001-appsrc-Handle-pushing-custom-segmentsCreated0001-basesrc-Add-new-API-for-handling-external-SEGMENTI'd like to revisit about _new_seamless_segment() method. I think we need a new API on basesrc for handling external SEGMENT. That is, _new_seamless_segment() cannot support flags on segment. And, segment.base cannot be correctly updated if input buffer was not timestamped, because segment.position in basesrc will be updated based on buffer timestamp.So, could we define new API on basesrc for accepting new segment? please review the patch about basesrc.	20.0	id=350545	12	False	True	wim.taymans	1
id=215600	REOPENED	evolution	Mailer	3.4.x (obsolete)	Other All	Normal enhancement		2001-11-18 14:28 UTC by		2013-11-07 16:24 UTC (	1 user	Package: EvolutionPriority: WishlistVersion: 0.99.2Synopsis: "Mark as answered" optionBugzilla-Product: EvolutionBugzilla-Component: MailerDescription:It would be nice to have a "mark as answered" option for mail messages.I used it a lot in my previous MUA when answering a mail with a phonecall or personally, because it's nice to have the email marked as "I'vealready done this"Unknown reporter:, changed to.	yea, I can see this as being a nice feature to add.the other way round would also be nice - when i answer an email but delete in the outbox. (only if it's technically related).still valid in 2.7, updating version number.Bumping version to a stable release.This would have been a feature request for evolution-groupwise, but it's no longer maintained so I'm closing this report as obsolete.Sorry, that was meant for. Reopening.	6.0	id=215600	17	False	False	fejj	1
id=108467	REOPENED	conglomerate	Code	unspecified	Other Linux	Normal enhancement	Conglomerate Devel List	2003-03-15 15:17 UTC by	David Malcolm	2005-03-18 00:25 UTC (	1 user	We ought to have a working DocBook->PDF export feature; possibly usingxmlroff (see)	Attempting PDF export from docbook file, I get the following errors onthe terminal:** Message: Exporter invoked: "Export DocBook as PDF" to"/home/boris/consulting/infoplease/2004-01/s.pdf"** Message: pdf_exporter_action_callbackResolve URIUsing rewriting rule** Message: Norman Walsh XSL path:file:///usr/share/sgml/docbook/xsl-stylesheets-1.61.2-2.1/compilation error: filefile:///usr/share/sgml/docbook/xsl-stylesheets-1.61.2-2.1/fo/synop.xslelement textxsltParseTemplateContent: xslt:text content problemthe last two lines repeat many times.Conglomerate could not transform the document..fixmeDoes this happen on a minimal input i.e. the File->New "DocBookArticle"? What happens if you manually invoke the stylesheets outsideof Conglomerate using xsltproc from the command line?Yes, I get the same symptoms invoking the export on the minimalDocbook article.From the command line, this works without errors:xsltproc /usr/share/sgml/docbook/xsl-stylesheets-1.61.2-2.1/fo/synop.xsl my.xmlThis bugreport is waiting on us, bugfixers, not on the bugreporter.reopening this bug.This time hitting the right radio button.Maybe this could be implemented using fop (possibly built using gcj to avoidhaving to deal with a JVM). I believe fop is a lot more mature than xmlroff	6.0	id=108467	5	False	False	david	1
id=610113	REOPENED	l10n	Finnish [fi]	git master	Other Linux	Normal enhancement	Finnish translations team	2010-02-16 13:38 UTC by	Reinout van Schouwen	2016-04-16 16:07 UTC (	2 users	There is an Epiphany translation for your language, but a translation for WebKitGTK+ does not yet exist or is incomplete. It is needed for a completely translated version of Epiphany. Please seefor the POT file.Thank you!	Eh, I'll leave this open; I'm committing the inital po file, but it's really incomplete.	1.0	id=610113	7	False	False	gns	1
id=336620	REOPENED	doxygen	general	1.4.x	Other All	Normal enhancement	Dimitri van Heesch	2006-03-30 14:37 UTC by	Serge Semashko	2006-03-31 11:34 UTC (	1 user	Example:void (__stdcall *some_function)(void *arg1, void *arg2, void *arg3);Seems like 'some_function' is parsed as an ordinary variable but not a function pointer here.	I see that this some_function should pbe processed as a callback. I think there needs to be either a \callback command implemented, or a category listing callbacks.Marking bug as an enhancement.pbe = be (typo)The __stdcall is the problem. It is not standard C/C++. It's something Microsoft added. You should (let doxygen) remove it before it is being parsed by doxygen. You can use doxygen's preprocessor for this. Look in the corresponding section of the manual for examples. This is similar to __declspec which is part of an example in the manual.This is exactly what I'm using now.But unfortunately __stdcall gets omitted from documentation :( And calling conventions, though not a part of C++ standard, are important for documentaion as they are part of ABI. It there any workaround to keep this information in html files? I posted this as a bugreport as __stdcall does not make any problems in other places but only for function pointers.Could doxygen C++ parser be improved to accept any identifier before asterik in function pointer declaration? Or could be something like IGNORE_BUT_KEEP_IN_OUTPUT introduced in addition to PREDEFINED? Or probably some hint in the preceeding comment to instruct doxygen parser how to behave in this situation?I'm reopening this issue, but feel free to close it again if you still think it is not a bug or at least feature request.Dimitri: I agree with. I marked this bug as confirmed for the reasons Serge is telling you.The doxygen preprocessor can be improved to accept keywords like __stdcall as something other than a module, for cosmetic reasons. Calling conventions are extremerly important to clearly include in documentation, regardless if it's a Microsoft spec, GNU spec, etc. If the calling convention is not documented, programmers could be spending many hours troubleshooting segfaults caused by calling with the wrong convention.Sarge: Although I agree with your last comment, I also believe that keywords like __stdcall should be encapsulated in a #define. In doing so, should you need to change the calling convention keyword to suit another compiler (such as the GNU compiler), you can do so in one place than many. As far as documenting the calling conventions, you might be able to use the \defgroup and \ref commands to define your calling convention methods/defines, although doxygen will interpret them as modules at the moment.	5.0	id=336620	10	False	True	dolphindddd	1
id=133859	REOPENED	dia	exports	0.92	Other Linux	Normal enhancement	Dia maintainers	2004-02-09 09:44 UTC by	Roland Stigge	2005-03-01 12:38 UTC (	0 users	Hi,a Debian user has got the following wish:=======================================================================dia -e, for png at least, seems to export a 320x320 image; I cancontrol that from the GUI, but I don't see a way to control it fromthe command line.=======================================================================See alsoThanks for considering.bye, Roland	Current CVS has an option to specify the size for PNG export.Please document it in the man page. :)This is documented in the man page for the 0.93 version.Createddocumentation of --sizeWell, it wasn't there at least when _I_ extracted the tarball (and downloadedfrom CVS). :)I attached a patch.My bad. It's in the .dbk file (which is not part of the dist, only in CVS), butthe .1 file hadn't been updated for the release -- that ought to be automatic,but isn't.Comment ondocumentation of --sizeAlready in .dbk, which just needs to generate the .1 file correctly.	6.0	id=133859	9	False	False	lars	1
id=572618	REOPENED	empathy	Contact List	unspecified	Other Linux	Normal enhancement		2009-02-20 23:41 UTC by	Jonny Lamb	2015-02-09 21:33 UTC (	2 users	It would be great if I could just be on my contact list and not have to grab my mouse just to change presence.	With the new status picker, you can hit tab. I think it was merged for 2.27.0?This is not fixed. Sure, I can tab my way to the presence chooser (which I don't actually treat as a fix), but you can't even drop-down the list of options using the keyboard from that point when it's in focus.	2.0	id=572618	9	False	False	gdesmott	1
id=721206	REOPENED	gnome-shell	keyboard	3.15.x	Other Linux	Normal enhancement		2013-12-29 16:06 UTC by	Michael Catanzaro	2016-01-11 22:53 UTC (	2 users	On my system, I have deleted the English (US) keyboard layout in Anaconda and replaced in with English (Dvorak). However, gdm displays both keyboard layouts as available. It should not be presenting a layout that I explicitly removed, and which gnome-shell recognizes is unavailable.	Seeing the same on 3.12 beta.On 3.10 (system with 2 user accounts) I've tried removed the US settings/changed them to UK via gnome-control-center -> Region & Language -> Login Screen but GDM still shows the switcher including a US layout.On 3.12 (one user account) I had to resort to trying xhost +SI:localuser:gdm && sudo gdm dbus-launch gnome-control-center as the Login Screen button isn't shown...In that case, Region & Language initially shows US English for Language and Formats, and shows English (UK) and English (US) under Input Sources.Reconfiguring there seems to persist (closing and launching again shows the same settings) but after killing the session (via loginctl kill-session) they've reverted to their initial settings.rtcm: mcatanzaro: we always add 'us' at the end of the list so that people don't get themselves into a situation where they can't loginFair enoughI respectfully disagree with rtcm's rationale. Preventing user lockout as a result of the incorrect keyboard can be achieved without having the US layout permanently displayed on GDM.Example alternative: when changing the keyboard layout for the login screen, insist on "please enter your password to confirm these login screen changes, to ensure your password works with the new layout".Or even better: just leave the old layout as secondary on GDM *until the first successful login* after the change.Or have a freeform "change layout" on GDM. This as far as I can see should be possible anyway. Use case: second user changes their locale, then password, in Gnome. Logs out, can't log in again because they didn't add their layout to the GDM options. In fact, based on this, GDM should actually just show the layouts for the locale of every user with a password, automatically.What about if the keyboard was already set to a non en-US layout when the user's password was created? For example with Gnome initial setup? In that case the layout's already known-good!Summary: the current setup kind of just feels like "America, fuck yeah" to me, to be honest (excuse the French) and I wouldn't be surprised if I'm not the only one - and the "so that people don't get themselves into a situation where they can't login" argument doesn't stand up to much scrutiny.£0.013 ;)It is pretty arbitrary to pick US English to be always present. That's obviously not useful at all for anyone with a keyboard that isn't US English. Still, having it on the bottom of the list is harmless.This came up today because it's being selected by default in 3.16 by mistake, which is much more annoying and being worked on.Fair enough re. harmlessness, but that doesn't make this a notabug I think for the reasons given above - can you change the status back to open?Since it's intended behavior I'll mark it as an Enhancement bug. FWIW I agree that if an admin user deletes this keyboard layout, it doesn't make sense to display it.	6.0	id=721206	14	False	True	mcatanzaro	1
id=216446	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other All	Normal enhancement		2001-12-03 22:43 UTC by	Matt Pavlovich	2012-06-16 12:33 UTC (	6 users	Package: EvolutionPriority: NormalVersion: 0.99.2Synopsis: IMAP Account Sent/Drafts Folders defaults to localBugzilla-Product: EvolutionBugzilla-Component: MailerDescription:When a new IMAP account is created, the Drafts and Sent folders areconfigured to be the local system Draft/Sent folders. This is problematic for users whohave multiple accesspoints to the mail system, ie Web based, Evolution, other IMAP client,etc.. Copies of Sent/Drafts messages will not be stored on the remote server by default,and thusdiscontinuing continuity with other clients.Proper behavior would be to default Sent/Drafts folders to the remoteserver, and havingthe option to setup to local folders.Unknown reporter:, changed to.	unfortunately they kinda have to, it's not easy detecting thesent/drafts IMAP folders. Some name the folderimap://user@host/sent-mail others name it imap://user@host/Sent, someset it as imap://user@host/Sent Mail and that's assuming that thefolder names have not been translated :-)what really needs to happen is the IMAP protocol needs to be extenddedto be able to set attributes on folders or something.marking as WONTFIX but it's really more like CANTFIXA reasonable search should occur, as "special use folders" are *very*common. Search for a reasonable number of folders should occur forEvolution to be an "enterprise" client. Outlook automatically doesthis w/ MAPI when connected to an Exchange server, and this greatlyimproves end user support, as a system needing to be re-built does notlose Sent/Draft items.At the very least, Evolution should display in greater detail in themail settings dialog, which folders are selected for which accounts."Sent" -> "Local - Sent""Drafts" -> "Local - Drafts"Account1 "Drafts" -> "Account1 - Drafts" "Sent" -> "Account1 - Sent"etc..this last part it does do now, as of a few days ago.meant to reopen thisI guess it'd be nice but certainly not easy to domaybe someone will get extremely bored and try to figure out somemagic or something.Mentioned inas well.It would be nice to have an option in the account setup wizard. It should ask whether to save drafts/sent mails locally or on the server while defaulting to some commonly used folder names like "Drafts" or "Sent" if present when selecting the "save on server" option.I've used thunderbird for some time and then migrated to evolution. I did expect that it saves sent mail on the server, too. Once, I was looking for a previously sent mail and was very confused not to find it. Later I found it in the local folder which is not what is commonly expected when using IMAP accounts. A configuration option in the wizard would make the user aware of the problem.***has been marked as a duplicate of this bug. ***Well, a very simple change would be :If "Sent" and "Draft" exist on the remote server, then use it.Else use local folders.This very simple stuff would already handle 90% of the usecases. (Personnaly, I never encoutered a server with an other name. And even when it's translated, the real name is "Sent", the translation is done in an upper layer)Lionel: you may not have seen other names, but I have.It doesn't matter what the name displayed to the user is, it matters what the folder's name on the server is.Indeed. But even if we cannot handle 100% exotic usecases, why not just try with existing known names and fallback to local if not found ?For people with exotics imap servers, it will not change anything.For most people, it will have the expected default behaviour.So, nobody has nothing to loose and it seems somewhat easy to implement.I can see why you are hesitant to base default behaviour on a search for pre-defined names. If, however this search did not happen each time the connection to the IMAP server is made but instead from within the new account wizard and, one the choice has been made, saved to the preferences as normal the user would be in control and would not get any nasty surprises.The user could first choses whether he wants the Sent/Draft mail to be stored locally or on the server. If the user choses on the server a search can suggest some possible folders on the server already there for the purpose. The user would also be able to chose other folders if he recognises the names from when he uses another client or even create new folders if this is the first time he has connected to the server.While we are at it can we please have the special 'Sent' and 'Drafts' icons shown against the IMAP folders that are set as the current Sent and Drafts folders.Regards,Steve.***has been marked as a duplicate of this bug. ***What about just including the choice of Sent and Drafts folders in the IMAP account setup wizard? Together with some reasonable autodetection for common cases, I think that would solve the problem.	13.0	id=216446	22	True	True	gerardo	1
id=764011	REOPENED	GStreamer	gst-plugins-bad	unspecified	Other Linux	Normal enhancement	GStreamer Maintainers	2016-03-22 03:24 UTC by	César Fabián Orccón Chipana	2016-12-31 21:24 UTC (	4 users	CreatedPortPort faceoverlay to Gstreamer 1.x.	Review of:Getting there, but not quite OK yet, please read on GstCaps and negotiation, it's a fairly essential part of what gstreamer does, arguably the most important one, can't hurt to learn about it :)::: gst/faceoverlay/gstfaceoverlay.c@@ +82,3 @@ GST_PAD_SINK, GST_PAD_ALWAYS,+ GST_STATIC_CAPS (GST_VIDEO_CAPS_MAKE ("{RGB}")));You should not just blindly copy paste stuff from other plugins, and instead take this as an occasion to learn what GstCaps are, and how to define them, for example here in new caps lingo we were previously looking at video/x-raw, format=[RGB, YUV], this reduces the plugin to only accepting video/x-raw, format=[RGB], which is incorrect. You can experiment by defining caps with capsfilters on the command line, something like this should work: gst-launch-1.0 autovideosrc ! videoconvert ! video/x-raw, format=yuv ! faceoverlay location=/path/to/gnome-video-effects/pixmaps/bow.svg x=0.5 y=0.5 w=0.7 h=0.7 ! videoconvert ! autovideosinkand it will be refused with your patch, even though the code in this plugin can handle both rgb and yuv. This is important to specify these right, because it's what is used by gstreamer to let videoconvert convert to an acceptable format for the plugin, while not doing unnecessary conversion, as this is a costly operation.@@ +87,3 @@ GST_PAD_SRC, GST_PAD_ALWAYS,+ GST_STATIC_CAPS (GST_VIDEO_CAPS_MAKE ("{BGRA}")));Same comment applies hereThe faceoverlay plugin was removed in git master, but it can be resurrected if anyone wants to work further on porting it to 1.x.commitAuthor: Sebastian Dröge <>Date: Wed Dec 21 11:00:47 2016 +0200 Remove various unported plugins If they were not ported after 4+ years it seems unlikely that anybody is ever going to need them again. They're still in the GIT history if needed.In the mean time let's close this bug until that happens.(In reply to Mathieu Duponchelle from)Do you mean that by setting only {RGB} on caps I am restricting it to only accept RGB format as input? Imagine I am developing the element from scratch. How can I know what should the input formats should be?Createdfaceoverlay: Revert deletion and port to Gstreamer 1.x	4.0	id=772089	24	False	False	mschraal	1
id=691172	REOPENED	evince	general	3.6.x	Other Linux	Normal enhancement	Evince Maintainers	2013-01-05 09:32 UTC by	Mikhail	2013-02-22 11:42 UTC (	4 users	I can not select text or image for copy from pdf and djvu documents	Example how it works on Windows:Providing an example PDF, plus version info for "evince" and "poppler" is welcome.$ rpm -q evinceevince-3.6.1-2.fc18.i686Example djvu file$ rpm -q evince-djvuevince-djvu-3.6.1-2.fc18.i686$ rpm -q djvulibre-libsdjvulibre-libs-3.5.25.3-2.fc18.i686(In reply to)En evince is possible to select text and copy it (that is when the document has text and it is not an image inserted). That said, please submit a PDF test case.On my video, you can see that I copy text as text to MS Office from djvu file from.(In reply to)We can not reproduce a bug if we do not have a PDF test case that shows it does not work. I can also upload a video that shows copying the text working and that would leave us in the same place.Please, upload a test case where copying text does not work, so we can reproduce the bug by ourselves.(In reply to)Only PDF case test may be accepted? With djvu same problem. And I gave you djvu file with OCR layer.(In reply to)I do not see any document attached, either pdf nor djvu.That is a video, not a djvu nor pdf.(In reply to)File is too big 6Mb, this bug tracker couldn't allow attach this file here.I upload it to Google Drive and share with all.CreatedDJVU test caseAdded test case of a djvu file where text can't be copied from evince.(In reply to)You do not need to upload the whole document. Just one page that shows if fails is enough.Thanks. I took only the page 3 and I attached to the bug.I also updated the summary line, because the problem you describe is only for DJVU files.If you have a PDF test case, then attached it or file another bug.It turned out that this bug was already filed.As one of the comments says, you can mimic the selection and press control-C (copy) and then paste it in another application and it works. What is missing is the rendering part of the selection.*** This bug has been marked as a duplicate of***Oh I see. What about selection and copy as picture???? file another bug?(In reply to)I think it would be better another bug (maybe referencing).I better reopened this, and update the subject.	18.0	id=474249	10	False	False	pippin	1
id=702639	REOPENED	gitg	gui	git master	Other Linux	Normal enhancement		2013-06-19 10:59 UTC by	Allan Day	2015-08-08 16:29 UTC (	3 users	The current sidebar doesn't make good use of the screen space. You don't use branches or tags all that often, and you don't need them displayed while you are viewing a particular branch/tag. The sidebar eats space that could be used to show the commit history.This would be the ideal place to use a popover - you could have a visible control in the toolbar for the branch/tag, which could be opened when you want to switch. I say popover rather than combobox, because you really need a way to easily scroll and/or search - there will sometimes be a lot of branches and tags.In the absence of a popover widget for GTK+, it might make sense to simply have the sidebar pop out on demand: by default it would be hidden and you would press a button and to display it. Then if you switch branch/tag it would hide again.	(In reply to)I beg to disagree there :-)I keep a lot of local branches and switch betweek them all the time, e.g. to compare things, try different solutions, check regressions etc.The old gitg had a combobox and that was one of the parts I really didn't like and was cumbersome to useIMO, the sidebar would be fully utilized if one could switch branches by clicking on the branch names. Currently, we can view commits of various branches by clicking on the branch names. This dual behaviour could perhaps be given as setting in the 'Preferences' dialog tabs?+1 on the option to hide the sidebar with a button though I think it should be open by default.Marking bug as NEW and enhancement.(In reply to)......Right, there might be some situations when you want to explore a repository and will be switching between branches fairly frequently. However, I think we can also say that in the majority of cases, people will be focused on a particular branch for periods of time.Maybe it would be possible to have the autohide behaviour that I described with the option to pin the sidebar so it is always open, or to have a configuration option to make it always visible.(In reply to)..I am not sure that's the "majority of cases": I definitely advocate to have one (local) branch per feature, so switching and comparing branches is a frequent operation and most importantly it is one of the operation where I would really enjoy using a GUI.That said, I agree with having the sidebar collapsible. gnome-maps has a similar pattern.I think I would prefer just an explicit toggle to show/hide (persisted in a setting) instead of autohide and pin.*** This bug has been marked as a duplicate of***Not the same kind of collapsing, my bad.	6.0	id=691172	15	False	True	a9016009	1
id=474249	REOPENED	GEGL	operations	git master	Other All	Normal enhancement	Default Gegl Component Owner	2007-09-06 14:26 UTC by	John Marshall	2009-04-10 09:58 UTC (	2 users	I have modified the generated operations ruby scripts to produce SVG compositing operations according to the draft SVG 1.2 working document. The formulae assume that the input and aux colour values have been pre-multiplied by the respective alpha values.svg12-porter-duff.rb - generates the 12 porter-duff compositing operations. The calculated value will always be between 0 and the composited opacity so no clamping needs to be applied.svg12-blend.rb - generates the remaining 12 compositing operations. The output colour values can exceed the allowed range and are therefore clamped between 0 and the output opacity.The names used for the operations are taken directly from the working document ( except for multiply which is included as svg-multiply) so some aliased (duplicate) items are created by other-blend.rbnormal - a copy of src-over - common blending mode name.over - a copy of src-over - used in the gegl test program.	Createdsvg12-porter-duff.rbCreatedsvg12-blend.rbCreatedother-blend.rbCreatedPatch to clones.xml for changed op namesIs this a full replacement for both porter-duff.rb and svg-blend.rb ?It should be. The names are different for 8 of the 12 porter duff ops to match the draft spec but as much as anything that was to help me keep track of what I was doing.Using the SVG specifications naming (in addition to short cuts for normal/over) should probably be sufficient. One thing that I desire is that most (or preferably all) operations also handles input values outside the 0.0-1.0 range, both negative values as well as HDR values. Do you know whether these work well for that?I'm replacing the existing set of ops with these anyways, it cannot do much harm.2007-09-12 Øyvind Kolås <> Added new composer ops based on the SVG-1.2 draft specification from patch by John Marshall. () * autogen.sh: * operations/generated/other-blend.rb: added * operations/generated/svg-12-blend.rb: added * operations/generated/svg-12-porter-duff.rb: added * operations/generated/svg-blend.rb: deleted * operations/generated/porter-duff.rb: deletedSorry for the delay in replying. As far as I can see the porter-duff ops should probably be well behaved for -ve and input > 1, the clamping on the non port-duff ops may need to be reconsidered. Do you have any specs or docs that you are using to guide the HDR implementation, particularly what the limits might be for the colour and alpha values?In general, no clamping of results should ever be done (that clamping is effectivly being done upon conversion from floating point buffers to 8bit/16bit buffers anyways).Negative RGB values will also be encountered in buffers since RGB buffers might be used as an intermediate processing space for both HDR RGB, as well as wider gamut RGB/other color models. Reopening bug and changing summary as a reminder.There is no reason to limit the alpha to be smaller than the color components either, since a RaGaBaA value of for instance 0.5, 0.5, 0.5, 2.0 makes sense in some circumstances and can be used for special effects like halos. In the default composition that the GEGL binary starts up with the white halo around the text "GEGL" is actually a dropshadow that has a opacity value of -4.0.Reopening the bug, and changing the summary to reflect the work that is still getting consideration.Marking patch as obsolete (it doesn't apply any longer)	11.0	id=764011	14	False	True	mduponchelle1	1
id=637831	REOPENED	GStreamer	gst-plugins-bad	git master	Other Linux	Normal enhancement	GStreamer Maintainers	2010-12-22 20:21 UTC by	Oleksij Rempel	2015-04-02 07:21 UTC (	4 users	I know you have other things to do, but it will be rally great if you add vp8parse element.	VP8 isn't parseable. It always has to exist inside a container.(Maybe you're looking for ivfparse?)may be i miss some thing? vp8enc produce video/x-vp8 which is not inside some container.I only look for possibility remux file if i need to. For example:... filesrc location=in.webm ! webmdemux ! vp8parse ! oggmux ! ...Are any thing what will work?You don't need a parser in that pipeline.Actually you need "something" between the demuxer and muxer in this pipeline to create the Ogg granulepos... but that's more a problem with oggmux than anything else.hmm... it is true. I can remux ogg to matroska. but can't mkv to ogg.the Ogg headers should not be generated in vp8enc, but in oggmux. So streamheader should never have existed in the video/x-vp8 caps, it's purely Ogg thing.From RTP, you now get the width/height, which is all that you should need.Yes, oggmux should do all this and we should get rid of these headers things for formats that don't define it directly (Vorbis, Theora, Speex).	8.0	id=702639	10	False	True	paolo.borelli	1
id=761708	REOPENED	gnome-shell	general	unspecified	Other All	Normal enhancement	Control-Center Maintainers	2016-02-08 12:35 UTC by		2016-02-19 13:59 UTC (	7 users	On Windows, and I think possibly (though I'm not sure as it's been a while since I used it) in the unity-tweak-tool, there is the ability to change things to do with the cursor, for instance, load new cursor themes, change the size of the cursor, and add cursor trail, and of course a slider to change how much of a trail there is.And I think that these would be some very good features to have in the gnome-control-center in the "Mouse & Touchpad" section.I initially filed a report on this here, but thought I should also do so upstream:	Theme changes are relegated to gnome-tweak-tool, where you'll already find cursor theme settings. Cursor size changes should possibly be tied to the large text accessibility settings.Ok, but there is currently no way to make it so that the cursor has a trail so I'll reopen this bug report under the gnome-tweak-tool for that.why is that a desirable feature ?Well, I personally just like the style and think that users should be given the option to customize their cursor in this way. However I also know people who have for instance eyesight problems meaning that it is rather hard for them to see where the mouse is moving so having a trail behind it would greatly help them as they would be able to see it and its path much better, at least, that is what they have told me and they have found it useful on other Operating Systems which allow for it.(In reply to cooks.go.hungry from)Well if it's needed for a11y, we gotta support it in mainstream component(s) and not an add-on targeted for advanced users (tweak-tool).Then I leave it to you to reopen this issue where you think best.I haven't seen this advertised as an a11y feature, and it has not been brought up as 'needed for a11y' by the a11y team, ever. So I wouldn't draw that conclusion too quickly.Look, I just know several people who would find this very useful because of eyesight problems, and I also like the look of it so I thought I'd file a report... But now I'm not too sure what you want me to do with this report...(In reply to cooks.go.hungry from)Thanks for that, please don't get frustrated. It's normmal for us developers to be sceptical about requests for new features. Besides you already learnt one thing from this discussion: if this is needed for a11y, it shouldn't be in a side-project like tweak-tool.I'm not sure however which component to assign it to for evaluating this for a11y, so I'll just add folks who know of a11y to add their input.(In reply to Zeeshan Ali (Khattak) from)That is not 100% accurate. There are some a11y needs that are still configured through the tweak-tool. For example control-center:universal access text size only allows you to switch between "normal" and "large text". For some users, that is not enough, and need to rely to the tweak tool to set the size they want. As Matthias mentioned on, cursor changes are tied to themes so on gnome-tweak-tool. FWIW, being able to configure the size, etc was asked before on the accessibility mailing list (in relation to Matthias's question on)Usually we ask first to be added on gnome-control-center. If not possible for some reason given by the maintainers, adding it to gnome-tweak-tool would be good enough. Having said so, and that is one of the TODO item lists on the a11y team, writing a good documentation about how to configure your environment using both tools is still missing.Finally, I find the bug summary somewhat misleading. The bug summary is about the cursor trail, but description atseems to suggest a list of features. So Im not sure if this bug description is asking just cursor trail or all those features.Sorry about that, I thought at first that it would be a good thing to implement with lots of other features, but as most of those seem already to have been implemented I thought it best to stick to the main reason why I came here. But now I am only suggesting the feature allowing one to have a cursor trailer to clarify that. There is no way to edit the description is there to remove the misleading stuff is there? If I knew of one, I would have done so already as I have done on the LaunchPad one.(In reply to cooks.go.hungry from)Description is AFAIK like another comment, and can't be edited. In any case, don't worry, as far as the summary properly describes the purpose of the bug, and you clarified here my doubt, I think that everything is clear. Thanks for the extra explanation.Seeing as it not possible to have a cursor trail right now, moving this to gnome-shell so that the feature can be implemented first.	13.0	id=314856	22	False	True	paolo.borelli	1
id=46469	REOPENED	nautilus	Preferences	unspecified	Other All	Normal enhancement	Nautilus Maintainers	2001-02-09 04:35 UTC by		2016-10-11 16:05 UTC (	6 users	To get the Icon Caption dialog:select from menu Edit -> Icon CaptionNote that in zoom level 100%(which is normal case), the 2nd/3rd caption choicewon't be showed beneath icon name. This is a little bit confusion. It's nice toput more descriptions along with the choices, for example:1st choice <-- zoom level 100% onwards2nd choice <-- zoom level 150% onwards3rd choice <-- zoom level 400%------- Additional Comments From2001-02-09 11:27:26 ----I agree that somehow making it clear which information will appear at which zoomlevel would be nice.------- Additional Comments From2001-03-26 11:20:41 ----SPAAAAAAAAAM! (Jon Allen has taken these components; QA Assigning bugs to him.)------- Bug moved to this database by2001-09-09 20:59 -------The original reporter () of this bug does not have an account here.Reassigning to the exporter,.	Changing to "old" target milestone for all bugs laying around with no milestone set.marking as an enhancement with future milestoneis this really even valid anymore? We no longer have the icon captiondialog. Daveb, does this fit in somewhere with your zoom bugs? Can wejust add a comment about it in one of those and close this one?davef: What do you mean we no longer have the icon caption dialog.preferences -> icon captions. so yes this is still valid. Even thoughI personally think this is what we would consider a crack option andshould just work. I have been talking with alex about this a little onthelately. You may want to check the archives.ah, doh, missed it - I was looking for a stand-alone menu option, notin preferences. Anyways, I definately agree this is a crack option.This is one of those things that should be configurable via gconf, butno visible preferences, just good defaults. If the hard-core peoplewant to dive in and dicker with things, awesome. The other 99%shouldn't have to waste the brainpower. I will try to remember tobring this up post 2.0 so we can get some resolution on crack optionor not.The current dialog isn't exactly the clearest thing ever, though- itseems like this is as much a request to clarify that as a request formore functionality/settings.CreatedProposed patch (against HEAD).Use vim and you even get clean glade patches :).CreatedImage showing off the changesMaybe some native English speakers could figure out whether the "At leastfoo%:" labels are appropriate?Still waiting for feedback...usability crew, does this look right?Looks reasonable to me... "Over foo%" or "More than foo%" probably sound alittle more natural to me than "At least foo%", though.Calum: Really? I think an inclusive boundary is way more natural, since we havea zoom indicator, and it is not obvious which discrete value is next: "Ah, I'vecurrently got 120%, so I see this field" just seems to be fit better into aconcept where the user associates the current indicator value with the preference.True, you do have a point. "foo% or more:" would probably be a bit moreconversationally natural than "At least foo%", then, but I don't have any strongpreference either way.Missed 2.14 UI freze, milestioning to 2.16.This is still very much valid, think we can get an updated version of the patch?I don't think we should also rethink zoom levels not to show percentage while we do this.This is the opposite direction from the one that's been taken with the recent redesign of zoom levels, closing as obsolete as we don't seem to want that anymore.Actually I misunderstood what this was about and this is still an issue. Reopening.In 3.16 we changed the behaviour and now we show all the captions always if they are set. So it remains a user choice and is this bug report becomes obsolete.And seems at some point I changed the behaviour again =) so reopening it...->gnome-love since we are ok harcoding "small", "standard", "large" labels at the side of the captions preference.The patch here doesn't apply (expected..), and now zooms are not by percentatge.(In reply to Carlos Soriano from)Yeah, I tried HEAD before reopening this time. ;-)	21.0	id=637831	11	False	False	ds	1
id=314856	REOPENED	gedit	Plugins	3.18.x	Other All	Normal enhancement	Gedit maintainers	2005-08-30 17:15 UTC by	Martin West	2016-02-21 14:28 UTC (	7 users	Instead of having an update button in the document stats box, could it do soautomatically after a second or two of idle keyboard?Other information:	Yes, this would be a nice enanchement if someone wants to give it a try.Sorry for the spam... I think it makes sense track all possible enanchements tothe docinfo plugin in one place, so I'm marking this as dup of 304371*** This bug has been marked as a duplicate of***The bug this was marked as a duplicate of does not fix this bug. Please can this be reopened?good point. Though I don't see this happen anytime soon unless someone provides a patch :)I'll give it a go when I have the time. It seems to be a pretty trivial patch.CreatedUpdate stats in real timeThis patch adds realtime updating (well, not real real-time). It updates 2 seconds after the last change to the buffer. It also automatically updates when the active document changes.the patch looks fairly good to me, though I am a bit concerned about this change:1) the doc stats dialog is not modal, you can keep on typing while the dialog is up; if it's a big document gathering the stats can take a noticeable time. Thus autoupdating could be annoying... we should at least find a way to comunicate that something is a happeing (statusbar? busy cursor?)Maybe there should be an explicit [ ] Automatically Update check button? (lame, I know)2) automatically switching the document could be confusing. I am not sure which use case is most common, but I guess that I would use the plugin (especially the autoupdate thingie) to keep an eye on the lenght of a document I am writing, if I switch tab to take a look at a draft or some notes or something like that, I don't care about their document stats.I use gedit 2.16.1 and still is not implemented this characteristic. Perhaps to be used an observant pattern.Regarding:If the auto-updating of document statistics is too slow, or currently irrelevant, then the user can just close the stat window. Am I missing something here?Also, is it really that slow? I just tried updating statistics for a 1.3MB textfile on my rather old laptop, and it takes less than a second.It seems like you are pointing out kind edge cases, I think that for a majority of us this would be a welcome feature.I'd also like to propose that the auto-updating show the stats in the status bar instead of a separate window. Especially useful would be the length of the currently selected text.Can I try and submit a patch for this? Where can I find the concerned source code. And how is a patch generated. I am more familiar with git.(In reply to Ashhar Hasan from)You may want to read	12.0	id=351477	21	False	True	aaronleventhal	1
id=547486	REOPENED	GIMP	General	git master	Other All	Normal enhancement	GIMP Bugs	2008-08-12 20:01 UTC by	Alexia Death	2008-08-12 20:13 UTC (	0 users	The bug manifests itself as a delay between the click and when first stamp is made on canvas when canvas is very large. The histogram dock needs to be present, not visible.	This is basically worked-around by this change:2008-08-12 Sven Neumann <> * app/widgets/gimphistogrameditor.c (gimp_histogram_editor_frozen_update): don't do the background histogram unless the histogram view is actually visible.Well, let's keep it open as the main problem is not really solved. Histogram calculation could be improved significantly if we found a way to avoid recalculating it entirely whenever a pixel changes...	2.0	id=165226	12	False	False	email	1
id=351477	REOPENED	atk	docs	unspecified	Other Linux	Normal enhancement	ATK maintainer(s)	2006-08-15 15:09 UTC by	Peter Parente	2014-11-13 14:36 UTC (	7 users	Names for standard actions exposed via the at-spi Action interface should be documented. Some typical actions are given at. This list should be formalized more so different apps and toolkits expose equivalent actions under the same name for standard widgets.	I'm marking this as an RFE, since it's difficult to anticipate all the different action 'names' possible. As it now stands, action names are basically just convenience IDs for the ATs, they are neither specified nor localized (or, rather, we don't specify in ATK whether they should be localized or not. Possibly they should, especially if we choose not to standardize them, in which case they are just 'strings' which may be exposed to the end users in some situations, as a means of labelling actions). On the other hand, action descriptions should be localized already.I think we need to poke at this some more. In, we exposed an issue where we needed to do comparisons on the action name in order to do some inference logic in Orca (e.g., look for a "toggle" action to infer if a table cell is a check box). With action names being translated (see), we now have an issue where the string comparison on the action name becomes much more brittle.I'm thinking we can go a couple different ways here:1) Move on with translating action names and add a programmatic string that can be used for comparisons.2) Retract the stance that action names should be marked for translation, unmark all the Evolution action names, and update the AT-SPI spec to be clear about what is translated and what isn't.At this point, I think I'd opt for #2 because:* It is the easiest thing to do.* If non-translated names were being exposed to users, I think we might have heard about it by now.Thoughts?[Resetting QA Contact to newly introduced "". Reason: So far it was impossible to watch changes in at-spi bug reports without following all the specific persons (Li Yuan, Bill Haneman, Jeff Wai, ...) and also their activity outside of at-spi reports.IMPORTANT: Anyone interested in following all bug activity (including all maintainers) must watch the "" dummy user by adding it to the 'Users to watch' list under Preferences->Email preferences. This is also the default procedure nowadays in GNOME when setting up new products.][Mass-resetting default assignee, see. Please reclaim this bug report by setting the assignee to yourself if you still plan to work on this. Thanks!]I'm going to go ahead and close this because it concerns a very old version. Feel free to open a new bug if the problem persists.Curiously enough, this was discussed on IRC several times during the previous years, and got somewhat hot recently, due action-related discussions on w3c. I didn't know that the bug was already opened. So as is part of an ongoing discussion, I will reopen it.As the main affected are implementors on toolkits/applications (so server side), I will move this bug to ATK (that is the server side of GNOME accessibility framework).	6.0	id=46469	36	False	True	jfleck.gnome	1
id=165226	REOPENED	GIMP	General	2.2.x	Other All	Normal enhancement	GIMP Bugs	2005-01-25 20:15 UTC by	Mike	2013-04-21 01:00 UTC (	2 users	Not sure if anyone's posted something like this before, but why can't we haveimage versioning built into The Gimp just like we do with text documents? Theonly problem I could see is it could create a gigantic file, but it would benice.... Any thoughts?	Not a new idea but I haven't found an enhancement request for it. IIRC thereused to be a plug-in that offered this functionality.This relates to, although what you have in mind is probably a lotmore complicated and a lot less likely to happen.*** This bug has been marked as a duplicate of 94354 ****** This bug has been marked as a duplicate of***Well, actually the plans for a GEGL-based GIMP go a lot further. The plan is toinclude the complete history (in a parametric way) and to allow to undo/redo allchanges that ever happened to the image.I am reopening this bug since it's certainly not a duplicate of. Ifat all it could be argued that it is a duplicate of.Sorry, my mistake -- didn't actually intend to close this but forgot that I hadclicked that button.my original intention was not for saving the entire history, but for saving"snapshot" versions of the image. It would be a proactive step for the user togo and save the image as a new version... It would make things easier I think -I save 10 versions of the same image (currently as image_name_v1-x) before I getto the final one...	6.0	id=133863	9	False	True	lars	1
id=762954	REOPENED	epiphany	General	3.18.x	Other Linux	Low critical	Epiphany Maintainers	2016-03-01 20:47 UTC by	Michael Catanzaro	2016-03-09 15:48 UTC (	0 users	This is a web extension crash:Version-Release number of selected component:webkitgtk4-2.8.4-2.fc22Truncated backtrace:Thread no. 1 (10 frames) #0 pre_fill_form at ephy-web-extension.c:419 #1 username_changed_cb at ephy-web-extension.c:470 #2 ffi_call_unix64 at ../src/x86/unix64.S:76 #3 ffi_call at ../src/x86/ffi64.c:525 #4 g_cclosure_marshal_generic at gclosure.c:1448 #6 WebCore::GObjectEventListener::handleEvent at /usr/src/debug/webkitgtk-2.8.4/Source/WebCore/bindings/gobject/GObjectEventListener.cpp:75 #7 WebCore::EventTarget::fireEventListeners at /usr/src/debug/webkitgtk-2.8.4/Source/WebCore/dom/EventTarget.cpp:255 #9 WebCore::EventContext::handleLocalEvents at /usr/src/debug/webkitgtk-2.8.4/Source/WebCore/dom/EventContext.cpp:54 #10 dispatchEventInDOM at /usr/src/debug/webkitgtk-2.8.4/Source/WebCore/dom/EventDispatcher.cpp:293 #11 WebCore::EventDispatcher::dispatchEvent at /usr/src/debug/webkitgtk-2.8.4/Source/WebCore/dom/EventDispatcher.cpp:355Full backtrace downstream.	Only 1 report of this ever (actually from me), crash server thinks it's fixed in 2.8.4 (probably wrong), let's de-prioritize this	1.0	id=762954	6	True	False	mcatanzaro	1
id=457288	REOPENED	GIMP	Tools	2.2.x	Other Linux	Low normal	GIMP Bugs	2007-07-16 07:33 UTC by	Art McBain	2016-07-23 19:47 UTC (	3 users	The rectangular selection tool is stuck in subtraction mode -This means that if I try to select something outright, it doesn't.The obvious 'fix' is to just hold down shift, but that causes it to select a perfectly square area.I've had the bug since 2.2.13, and when I upgraded, it is still stuck.Are there any components used from version to version?No other tools are stuck, or have become stuck.If this is not a bug, and an OS problem, feel free to remove this.I'd just like to know... if possible.Windows XP, service pack 2 + all automatic updates since then.	Did you try to set a different mode in the tool options?(In reply to)Yes. It is still stuck. I can use the tool mostly well if I use shift + fixed size. But that requires guessing the size of the area I want, sometimes.I can't reproduce this. The mode is saved to whatever value was active when I quit GIMP, but setting it to a different one in the tool options is possible (and gets saved, too).(In reply to)Well, alright. Thanks. I can't get it unstuck, so I guess I'll have to live with it. I don't know what caused it to get stuck, and it's not a keyboard issue (it's only the GIMP) so I can't provide further info. And I have been able to save the mode, fixed vs free etc., but that doesn't change anything. It still starts up in subtraction mode. Even if I close the GIMP with a different tool open.You can mark this as closed if you wish. I'm saving it as not-a-bug.Are we talking about the same "Mode"? SeeHowever, Bugzilla is not a help forum, so next time you should ask on the mailing lists after consulting the manual.This is trivial to reproduce:1. Open an image or create a new one.2. Select the rectangle tool.3. In the tool options, select "replace the current selection" (the first option - this should be the default)4. Press and release Ctrl in the image window. The tool is now stuck in subtraction mode.This doesn't happen if you press and release Shift instead of Ctrl in (4). If you use Shift, the cursor gets the "+" indicator while Shift is pressed, and goes back to normal when Shift is released. Ctrl gets stuck, however.I agree with the previous status of NOTABUG, RESOLVED and CLOSED. Reasoning: I was hasty to post, and I didn't know GIMP as well as I thought I did. This "bug" I submitted was resolved by pressing one of the specially designed mode buttons. This fixed the issue of it always starting up in subtraction mode. There is no bug, only my stupidity. Please close this thread.This is not a fix; it's a workaround :)I just found out that gimp_display_shell_canvas_tool_events() does *not* get called when you release Ctrl. It gets called just fine when you press/release Shift and when you press Ctrl. I'll dig deeper into GTK+ to see if it's eating the Ctrl-release...Actually, gimp_display_shell_canvas_tool_events() gets called just fine when you release Ctrl. However, event->keyval = GDK_ISO_Prev_Group (0xfe0a) instead of GDK_Control_L or GDK_Control_R. That's why the function is ignoring the Ctrl release.(When you press Ctrl, event->keyval = GDK_Control_L as expected.)GTK+ does some magic to deal with this kind of stuff relative to the X keyboard map; I'll look it up.I'm still unable to reproduce this.I'm getting GDK_ISO_Prev_Group because I've got "both Ctrl keys change keyboard layout" turned on in gnome-keyboard-properties. If I disable that option, pressing and releasing Ctrl in the GIMP no longer causes it to get stuck in subtract mode.This is still a bug somewhere.(01:12:47 PM) owen: federico: OK, svu might have an idea of whether there would be an alternate way to do that with XKB that avoids the issue(01:13:34 PM) owen: federico: But it's certainly what is giving the issue(01:14:35 PM) owen: federico: it's all possible that the case of a self-modifying key should be special-cased to give consistent values on press and release(01:14:59 PM) owen: federico: I don't really know enough about XKB to know how feasible that would be to implement or whether it would be consistent with the specThis is very similar to the general- which isupstream.This is relevant for Windows?(In reply to)Probably not. Moving to Linux.Unfortunately, there is absolutely nothing that GIMP can do about it because it does not get the event that it should normally get from the X server through GTK+. This bug can only be solved on the XKB side, so I am marking this as a duplicate of(like the previousthat also affected GIMP).*** This bug has been marked as a duplicate of***I forgot to mention that the easiest workaround for those who are affected by this bug is to disable the keyboard layout switching: in GNOME, this is inSystem -> Preferences -> Keyboard -> Layout Options -> Layout switchingDeselect the option "Both Ctrl keys together change layout", or "Both Alt keys..." or "Both Shift keys...". A better solution is to use the Keyboard Indicator applet.The problem with closing a bug which you can't solve (but someone else can) is that the bug will be forgotten, and there will be no incentive to fix it :)Reopening.There's action in the upstream bug, so we can be confident that it will be fixed soon. Just leave it around; I'll close the bug once the XKB fix comes in.Well, you could have reopenedinstead, but that will do for now ;-)Federico, has anything happened related to this in the meantime? It doesn't seem to make much sense to keep a bug report open for a bug in xkeyboard-config that is stalled.No idea. CCing svu.Sergey, do you know the status of this bug upstream?Do you need me to test anything?Federico, and news about this bug?No idea, sorry.I think svu mentioned at some point that this would be a huge pain in the ass to fix with XKB rules.(In the meantime, many months ago, I switched to using Shift-Shift instead of Ctrl-Ctrl to switch keyboard layouts. Now the bug happens with Shift instead of Control, and the tool gets stuck in addition mode - not as bad, but still...)So you traded one evil for another :) I really don't know what to do here,the press and release events are not paired, and there is no focus inour out to compensate for the missing ones. I'm out of ideas.Well, I changed from ctrl-ctrl to shift-shift for ergonomics, not to actually deal with this bug :)Assuming thatstill matches the code, would it be possible to hack gimp_display_shell_canvas_tool_events() so that it checks the event's state and uses that to frob the mode of the selection tool? Something likestatic gbooleangimp_display_shell_canvas_tool_events (...){ if (selecting && event->type == GDK_KEY_RELEASE) { if ((event->state & GDK_CONTROL_MASK) == 0) stop_subtracting (); ... } else { /* process keys normally */ ... }}i.e. "we know key_release keysyms may not be accurate, but we can use the event's state to figure things out" just for the selection case.Are there any objections if I close this as WONTFIX? We can't compensatefor all possible things that modify the event stream, and windowsusers are told all the time to go away with their "gui tweaking"tools.Or maybe I should get off my ass and see if this easily fixable with a hack like the one I mentioned :)Feel free to make this bug really low priority.Actually, I'll WONTFIX it, and reopen it if I ever produce a working patch.Thanks :)Createdgimp-bgo457288.diffThis patch doesn't work, but it's probably a start.The modes don't "return" to what they were before toggling, I get a g_warning() sometimes when refocusing a window, and it's just not done - but make of it whatever you want :)Try dropping the last "active" from the function name. Reopening so itdoesn't get lost.I regularly get this on Mac OS X 10.8.5, with GIMP 2.8.6. Happens when the selection tool is active (rectangular, but also seen it happen with elliptical selection), then using Cmd + Tab to switch between applications. Eventually, GIMP gets the selection tool stuck in subtraction mode, with no possible recovery, apart from quitting and reopening GIMP.	32.0	id=750632	10	True	False	m.berns	1
id=133863	REOPENED	dia	general	0.92	Other Linux	Normal enhancement	Dia maintainers	2004-02-09 10:18 UTC by	Roland Stigge	2011-11-23 15:50 UTC (	2 users	Hi,a Debian user asked for a change in the backup file naming conventions. I'mnot sure if you want to follow his idea of using a hidden directory. Ifnot, please just tell me so that I can tell him.Thanks.bye, Roland	Seel alsoIf the backup files are stored in a hidden directory, we'd need to addsomething to alert the user that there are backups available. Ipondered how to do that when adding autosave the first time, anddidn't come up with a satisfactory solution, so I followed the styleof Emacs, where at least the user can see they are there. Ideas forbetter ways to make the user know of the backup files when neededwould be welcome.Just tell me if you think that a hidden directory is not a good idea (and I cantake the necessary steps in the Debian BTS).Besides, since the original report complains about backup files cluttering upthe user's directory, what about an option (default = true) for backup files?I don't think a hidden directory is a good idea. xv, which he mentions as anexample, keeps thumbnails there, an entirely different thing.Dia should remove autosave files when quitting, that it doesn't is certainly a bug.Vim allows you to specify where the backup~ files are stored, if I recall correct the normal behaviour being to use the same directory and anoption to use somewhere else (like /tmp I think). This is not an option I would put in the user interface, I would expect the user to edit a config file for this which should be no trouble for a Debian user. There are probably better ways to do this. I do not remember if/when Dia is deleting the backup files, normally they should be removed after a clean save. (Resist the temptation to turn Backup files into a crude revisioning system!)It's a central decision for the ~ files whether they're just insurance againstprobloms during file save, or if they're intended to protect the user from somekinds of stupidity and allow the previous version to be found after a save. Emacs does the latter, and yes, also leaves clutter all over.Given the comments in the report and taht modern directory views make it difficult to see these bakup files IMHO this is a WONTFIX.At least it isn't a bug, but a feature request.*** This bug has been marked as a duplicate of***The duping should have been the other way around. Sorry about the noise.***has been marked as a duplicate of this bug. ***I also get annoyed by this feature, since I'm often using Dia diagrams as source for EPS/PNG images embedded into LaTeX documents or similar, and I like to keep a clean source tree. (Especially annoying when using version control and constantly seeing these files flagged up as non-committed.)With respect to this enhancement and, isn't the obvious change just to add a 'Keep backups on save' preferences tickbox? If the default is Y, new and non-power users get an 'easy' visible backup file as stated. Changing it to N allows those who appreciate the implications to turn it off.It's always going to be a semi-religious war between Emacs and Vi behaviour otherwise.You could also add a third alternative to retain them but as hidden files (again as discussed) for maximum configurability.	11.0	id=457288	26	True	False	schumaml	1
id=328066	REOPENED	pango	general	unspecified	Other All	Low normal		2006-01-21 20:30 UTC by	Behdad Esfahbod	2006-04-11 20:45 UTC (	2 users	Pango should support italic-correction, that is, to add some space where italic text ends and upright starts. This can be done by accessing the slant value of the font pattern and the font ascent.I'm attaching an screenshot showing the defect. Generated using: ./pango-cairoview --markup --font serif --dpi 300 --text "(<i>fff</i>)"	Createdshot***has been marked as a duplicate of this bug. ***I think that the space of glyphs is ok, what is the matter with them?The 'f' should not go into the ')'. This is called italic-correction.Createdthe image of Serif fontI found the "(fff)" displayed rightly when the font family is Sans or Serif or Courier. And when the font family is only ZYSong18030, the "f" will go into ")".So I think whether this is a bug about font? It is not a bug about pango.The images of "(fff)" rendering with Serif or Sans or ZYSong18030 are in the attachments.Createdthe image of Sans fontI think it is ok.:)Createdthe image of ZYSong fontThe "f" goes into ")" in this image.btw, my OS is RHEL4-U2.No, you didn't get it. You should try the commandline I wrote. The point is that only the 'f's are italic, not the parantheses.Italic-correction is a known issue, I'm not making it from myself. When two runs of text with different slant values meet, some correction is needed, that's all.oh, I made a mistake.I am sorry.The 'f' is italic, but the '(' and the ')' are not italic. I thought that they were all italic a little while ago.:)Just as an additional note: Robert Bringhurst writes in "The Elements of Typographic Style" (v2.5, page 188):"Hand compositors learn early to put a slightly smaller space in front of an italicized phrase and a larger one at the end. Keyboard compositors rarely take the time to do the same."Createdthe patch of italic correctionI wrote a patch for this bug.The 'f' does not go into the ')' now. The space of italic glyphs and other glyphs is corrected.But I think the patch still need to modify.Please review it.:)Humm, I actually like it :).Needs work, but the idea is there.I'm not quite sure if using ink rect is the right way to do it. It definitely is some useful information. I was more thinking along the line of some simple trigonometric math on the slant of the fonts and the height of the glyphs. But that's definitely harder to implement.Owen, uws, any thoughts?I have really no idea what the difference in visual results will be, so I have no strong opinion for one solution over the other.Oh, did you accidentally fix it too, thanks! :)I'll try to hack my version too, and take some shots.Woops, stupid javascript that triggered on [Tab] [Enter]...behdad, I found when the italic glyph goes into the next non-italic glyph, the space (space = (x_advance of this glyph + x_bearing of next glyph) - (width of this glyph + x_bearing of this glyph)) < 0, so I compute the space and adjust it.And I found that pango gets the metrics(x_advance, y_advance, x_bearing, y_bearing, width, height) of glyph through calling cairo_scaled_font_glyph_extents( ) in compute_glyph_extents( ).And then in compute_glyph_extents( ), ink_rect.x = x_bearing; ink_rect.y = y_bearing; ink_rect.width = width; ink_rect.height = height; logical_rect.width = x_advance.So I getting the extents of the single glyph means that I get the metrics of the glyph.Then I can compute the space.:)I do understand what you are doing, but there are many other cases that you will adjust the space while none of the fonts involved is italic or oblique. The glyph ink extents may overlap legitimately.oh, I also think this problem.Let me test it again.:)How do I judge whether the glyph is italic or oblique?Glyphs can overlap over the next character. Actually, that is quite normal for any slanted/italic font. I think the special adjustment should ONLY be done for the original case: italic correction. That is, only the change from slanted/italics to an upright font.Another point: does this relate to ligatures (both italic/oblique) in any way? Do they need special treatment at all?No, I don't think you need any special treatment for ligatures. Italic-correction happens at run boundaries only, that no ligature can form.	21.0	id=328066	13	True	True	behdad	1
id=750632	REOPENED	java-atk-wrapper	general	unspecified	Other Linux	Low normal	java-atk-wrapper maintainer(s)	2015-06-09 12:47 UTC by	Magdalen Berns (irc magpie)	2015-06-12 14:47 UTC (	1 user	It would be good to create jaw_object_notify_state_change to wrap firePropertyChange with.[1][1]-	CreatedPatch to address problemRe-opening because libraries hadn't got properly cleaned before testing this and I have spotted a bug in the implementation.Createdpatch to fix bugA handler for state changes is already in AtkWrapper so removing the wrapper function while it's not technically needed but will leave the bug open at a lower priority.	3.0	id=755090	9	True	True	a9016009	1
id=755090	REOPENED	gnome-music	general	3.16.x	Other Linux	Low minor		2015-09-16 06:41 UTC by	Michael Gratton	2016-05-15 20:12 UTC (	2 users	Currently, gnome-music sends multiple PropertiesChanged DBus signals when tracks start and stop playing. I see the following from the org.mpris.MediaPlayer2.Player interface along:Seven signals on playback start, with the following values:1. Tracks=[...]2. ActivePlaylist={...} 3. Metadata={...}, CanPause=1, CanPlay=14. CanGoPrevious=0, CanGoNext=05. Metadata={...}, CanPause=0, CanPlay=16. PlaybackStatus: Playing7. Metadata={...}Three signals on playback stop, with the following values:1. CanGoNext=0, CanGoPrevious=02. CanPlay=0, Metadata={...}3. Metadata={...}There's lot of unneeded IPC and wakeups there, also a fair bit of redundancy - especially for the Metadata fields, which are all identical and hence should actually only get reported as having changed once for each track, not up to 5 times.	Fair enough, patch appreciated.wrong status	2.0	id=644241	18	True	True	j	1
id=644241	REOPENED	vala	Methods	0.11.x	Other All	Low minor	Vala maintainers	2011-03-08 21:06 UTC by	Jim Nelson	2014-02-26 19:58 UTC (	3 users	It's possible to write a method signature that looks like this:void func(int a, int b = 1, int c)No warning or error is given by valac. I've tested with 0.10.3 and trunk.	CreatedWarn if non-default follows default argumentFixesLooks good except I'm not sure about the message.CreatedWarn if non-default follows default argument* Made the error message move verboseFixesWhat about void foo (int a = 2, int b) { ... }Yup just checked now, warns as intended (btw. should this be an error?)Review of:Ok looks fine for me.commit b22255aa25e0296211ea7ca404970d1677747180Author: Simon Werbeck <>Date: Sat Apr 6 08:51:19 2013 +0200 Warn if a parameter without default follows a parameter with default value Fixes.This problem has been fixed in the development version. The fix will be available in the next major software release. Thank you for your bug report.Committed a TODO: for coroutines we have to handle this thing separately for begin and end parameters.Reopening the bug.commitAuthor: Luca Bruno <>Date: Mon Aug 26 22:36:00 2013 +0200 Do not warn about non-default parameters for coroutines. Reopens.Committed a TODO: for coroutines we have to handle this thing separately for begin and end parameters.Reopening the bug.commitAuthor: Luca Bruno <>Date: Mon Aug 26 22:36:00 2013 +0200 Do not warn about non-default parameters for coroutines. Reopens.	9.0	id=700081	15	True	True	jimmac	1
id=700081	REOPENED	gnome-shell	overview	3.12.x	Other Linux	Low minor		2013-05-10 14:24 UTC by	Jakub Steiner	2015-01-09 15:55 UTC (	5 users	Overview backdrop has a nice vignette, but the 4 corners feel like the opacity fade is clipped there and appear flat. Due to the color being flat on the corners, visually it actually feels like it's getting lighter towards the corners again. Would be great if the alpha fade happened all the way to the corners, not just the edges.	Createdflat cornersCreatedsuggested serving :)***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I tried to tweak the parameters to match designs. But it can't be possible with the current code. (there was also a "bug")So following I did a set of patches for mutter and gnome-shell adding inner and outer radius to the vignette effect and tweak it to match designs.1- The first patch in mutter fix a bug that previously we were aplying brigthness twice, causing meta-background vignette effect (the one in overview) and ligthbox vignette effect (the one in modals) don't match. I guess this was to try to diferenciate between the overall brigthness and the background brightness, but since we only use meta-background in the overview, and we want to match the ligthbox effect, just don't take into account the overall brigthness and take into acount only for the vignette effect like we do in ligthbox.2- I didn't do inner and outer radius parameters to set, bus instead private variables. Not sure if we want to tweak it from outside. Feedback on this?3- On the other hand, the vignette_sharpness is now gone in both ligthbox and meta-background, since brigthness is enough to do an animation and inner/outer radius control allows us to tweak it even more if needed.Some of those patches mean to be squashed, but to make easy the review I splitted them.Createdmeta-background: Don't use brigthness twiceUntil now the brigthness was being applied both tothe background and to the vignette effect. That was causingthe effect to not be the same as ligthbox in gnome-shell.Since we are only using meta-background in the overview ofgnome-shell, we can delete the brigthness that was being appliedto the background and use only the brigthness applied to thevignette effect, so we can match gnome-shell ligthbox vignetteeffect.Createdmeta-background: Add inner and outer radius to vignetteUntil now we were using a vignette effect with lackof some parameters that vignette effect should provide.That causes that we can't tweak it as designers want.Add inner radius and outter radius to the vignette effectand tweak it to match designs.Createdmeta-background: Delete vignetteSharpness parameterSince in the last patch we don't use it anymore,just delete it.The only client of vignette_sharpness is gnome-shellin Background.js. So a patch for gnome-shell alongsidethis patch is made.Createdoverview: Delete vignetteSharpness parameterSince meta-background no longer use it, delete itfrom the background params.CreatedligthBox: Add inner and outer radius to vignetteUntil now we were using a vignette effect with lackof some parameters that vignette effect should provide.That causes that we can't tweak it as designers want.Add inner radius and outter radius to the vignette effectand tweak it to match designs.Createdligthbox: Delete vignetteSharpness parameterSince in the last patch we don't use it anymore,just delete it.It is safe to delete it since nobody is usingit currently.Master: - Modal (ligthbox):- Overview (meta-background):Patches: - Modal (ligthbox):- Overview (meta-background):Jakub,I'm not that good matching design by eye, so probably you want to tweak it.The thing is that, with those patches you can give me inner radius, outer radius(I guess the entire size) and opacity of the design picture and I can match the design mathematically.Closer to the mockup:Great work! The gradient progression is a lot better, there doesn't seem to be any flatness to the corners anymore. I'll see if I can tweak the brightness when I get back to my jhbuild environment as it feels a little lighter.I think this is obsolete now and things should be square with all the recent background changes? reopen if i'm wrong.(In reply to)It's not =S visually is still unchanged, and the code creates a vignette with the same values...	17.0	id=681642	16	True	True	wim.taymans	1
id=42044	REOPENED	nautilus	File and Folder Operations	3.3.x	Other Linux	Low minor	Nautilus Maintainers	2000-08-08 17:26 UTC by	John Sullivan	2015-01-24 18:58 UTC (	1 user	Darin and I realized that this mechanism is needed to fix other required bugs(at least). Darin is implementing a hashtable-based solution inNautilusFile.------- Additional Comments From2000-08-09 17:29:18 ----It turns out this isn't really required for the search feature, given our newidea of how to handle FMListView. So, this is no longer a required feature, justa bug fix.------- Additional Comments From2000-10-16 20:20:39 ----Batch-assigning QA ownership of remaining bugs to------- Additional Comments From2000-12-13 15:04:12 ----There are two FIXMEs about this in nautilus-file.c now.------- Additional Comments From2000-12-15 09:33:09 ----Batch move all 254 PR3 P5 bugs to 1.0.1.------- Bug moved to this database by2001-09-09 20:36 -------	Changing to "old" target milestone for all bugs laying around with no milestone set.This is still relevant in GNOME2.The comment in update_link() in nautilus-file.c is a little worrying: /* FIXME bugzilla.gnome.org 42044: If we don't put any code * here then the hash table is a waste of time. */ It would be good to detail what it should be doing there.Apologies for the spam- I'm removing 'bugsquad' from some keywords via the webinterface. This is a one-time only thing before I re-add bugsquad via the SQLinterface, which will generate no mail. Apologies again.Fixme exists in these files for version 2.2.3:./libnautilus-private/nautilus-file.c:1219./libnautilus-private/nautilus-file.c:1277./libnautilus-private/nautilus-file.c:1410Closing all eazel FIXMEs because most of them are out of date. Search for"Closing eazel FIXMEs" to get rid of this spam.Both the hash table and the FIXME are still here as of 3.3.1.1. Reopening, so we can decide which one is okay to remove. See symbolic_links and update_link () in nautilus-file.c.	6.0	id=684617	13	True	True	scl.gplus	1
id=681642	REOPENED	GStreamer	gstreamer (core)	git master	Other Linux	Low minor	GStreamer Maintainers	2012-08-11 09:17 UTC by	Tim-Philipp Müller	2015-06-05 18:40 UTC (	5 users	So ... no idea if this is in fact a basesink issue, but here goes: when dumping oggdemux buffers to stdout in gst-launch with queue ! fakesink silent=false, it seems that (a) not all buffers are shown and, (b) sometimes buffers are shown multiple times.Not 100% sure what the trigger is, at first I thought it was queue related, but seems not.Reproduce with:$ for i in `seq 1 5`; do gst-launch-1.0 filesrc location=video.ogg ! oggdemux name=d d. ! queue ! fakesink async=false silent=false d. ! queue ! fakesink async=false silent=false -v 2>&1 | grep chain | grep 'offset_end: -1' ; echo =========; doneEach iteration should show 6 header buffers, 3 for the vorbis stream and 3 for the theora stream. There should be 4 small packets and 2 larger packets.$ for i in `seq 1 5`; do gst-launch-1.0 filesrc location=video.ogg ! oggdemux name=d d. ! queue ! fakesink silent=false d. ! queue ! fakesink silent=false -v 2>&1 | grep chain | grep 'offset_end: -1' ; echo =========; donechain fakesink1 30 bytes flags: 00000040 discont ) 0x7f67bc0079d0chain fakesink1 30 bytes flags: 00000040 discont ) 0x7f67bc0079d0chain fakesink1 30 bytes flags: 00000040 discont ) 0x7f67bc0079d0chain fakesink1 30 bytes flags: 00000040 discont ) 0x7f67bc0079d0=========chain fakesink1 30 bytes flags: 00000040 discont ) 0x16e8a10chain fakesink1 95 bytes flags: 00000000 ) 0x16e8b20chain fakesink1 3484 bytes flags: 00000000 ) 0x16e8c30chain fakesink0 97 bytes flags: 00000000 ) 0x16e87f0chain fakesink0 97 bytes flags: 00000000 ) 0x16e87f0chain fakesink0 97 bytes flags: 00000000 ) 0x16e87f0=========chain fakesink0 42 bytes flags: 00000040 discont ) 0xc206e0chain fakesink0 42 bytes flags: 00000040 discont ) 0xc206e0chain fakesink0 42 bytes flags: 00000040 discont ) 0xc206e0chain fakesink0 42 bytes flags: 00000040 discont ) 0xc206e0=========chain fakesink0 42 bytes flags: 00000040 discont ) 0x1f8c6a0chain fakesink0 42 bytes flags: 00000040 discont ) 0x1f8c6a0chain fakesink0 42 bytes flags: 00000040 discont ) 0x1f8c6a0chain fakesink0 42 bytes flags: 00000040 discont ) 0x1f8c6a0chain fakesink0 42 bytes flags: 00000040 discont ) 0x1f8c6a0chain fakesink0 42 bytes flags: 00000040 discont ) 0x1f8c6a0=========chain fakesink1 30 bytes flags: 00000040 discont ) 0x172da10chain fakesink1 30 bytes flags: 00000040 discont ) 0x172da10chain fakesink1 30 bytes flags: 00000040 discont ) 0x172da10=========	I have seen this too and traced it back to racyness in getting the message property of the fakesink.I debugged and let me to the same as Wim. g_object_notify is async.I guess the fakesink prints are relevant to debugging, I'd propose:1) Add a signal to fakesink 'new-message', this would be sync.'new-last-message' is weird because new and last doesn't make sense on the same sentence, but new-message can be confusing as there is also GstMessage on the gstreamer context.This allows applications to integrate this into their debugging needs in a sync manner.2) Add an extra property to fakesink to make it print directly to stdout to allow gst-launch to have sync output of those messages. Or make it handle fakesink case specially to handle the last-message signal, but then it could be mixed with the default _notify handling and we would have even more duplicated outputs.g_object_notify() actually is sync unless there's freezing/thawing of that happening between multiple threads (don't do that!). The problem is that multiple threads are changing last-message, so once you got the notify::last-message in your callback, last-message might've changed by another thread already before you get the message.Solution for that really would be only a new signal that includes the message itself. Not sure how important that isI can't reproduce this any longer, so let's close it.***has been marked as a duplicate of this bug. ***To preproduce reliably.gst-launch-1.0 -v videotestsrc ! tee name=t t. ! queue ! fakesink silent=0 t. ! queue ! fakesink silent=0Related to deep-notify it seems (but it could just be generally dispatch of property changes from two threads on the same object):commitAuthor: Tim-Philipp Müller <>Date: Fri Jun 5 19:35:29 2015 +0100 tests: fakesink: test notify::last-message and deep-notify::last-message deep-notify::last-message seems to cause some problems, so disable for now.	7.0	id=42044	26	True	True	darin	1
id=684617	REOPENED	GIMP	User Interface	2.8.2	Other All	Low enhancement	GIMP Bugs	2012-09-22 12:11 UTC by	Sven Claussner	2016-07-23 20:57 UTC (	3 users	There are many bugs related to tablet issues. As a general workaround it is often recommended to goto Edit/Input Devices, select each single tablet pointer device and set its mode from 'Disabled' (Default) to 'Screen'. I could reproduce this and applying the changes immediately turns on tablet support in GIMP.I think that the 'Screen' configuration of tablet pen devices should be the default (then power-users may change the settings later, but at least one-time users have a good experience with a suitable tablet pressure).	There can be many many devices, and it's impossible to tell whichare tablets, without the user looking at them. Enabling all of themby default can have much worse effects. Sorry, we are going to keepthem in the state GDK gives them to us, unless the user decidesotherwise.Hello,there are indeed a lot of different input tools, but there are also a known list of tablets. It does need to be exhaustive. Some will be probably missing. But we could already try and activate all known Wacom tablets (most common), as well as some from other brands that we hear about.The list from the linuxwacom project can be for instance a good starting point:Note that it lists not only Wacom, but also some tablets from other vendors (Hanwang, N-Trig, and Waltop).The DIGImend project also supports a different list of tablets:In other words, there are some known lists of tablets, already available in the FOSS world with all necessary vendor and device references to recognize them.There is all reason to think that if someone has one of these graphics tablets plugged in and opens Gimp, one expects it to work out of the box with pressure sensitivity in Gimp.I would therefore propose to set the default to "Screen" for all these known devices, and "Disabled" for all others (Unknown or those we know we don't want enabled).What about this compromise?The point you are probably missing is that GTK+ (at least version 2.x) screws up horribly if you ever activate something that is not a tablet. We do that in MyPaint and it's a never ending pain for users who can't click anyhwere or can't paint because some touchpad device or even the wacom intuos touch strip was accidentally put into screen mode. You need a long list of devices and exceptions for this. We do it anyway in MyPaint because MyPaint is good for nothing when pressure doesn't work (in contrast to GIMP).If I reopen this bug, it will sit here forever, because none of the coremaintainers has time to do this when there are more severe problems. If youreally want this to happen, please research that list of devices, possiblyinvestigating the MyPaint code, attach a patch here and reopen the bug.Martin > I understand your point. So we could do it step by step. Let's not take the full list and drop it hoping they are all good tablets. We just list those we definitely know work fine, and when people come on a case by case and tell "I have this tablet and it works well when I activate it", and we add it to the list.Michael > I understand too. I'll study the code when I have some time and will provide a patch if possible. I'll reopen only if I have a valid patch.Thanks!***has been marked as a duplicate of this bug. ***Hey Mitch,as I am now a GIMP dev, I allow myself to re-open this. I have no patch yet, but by having it opened, that reminds me to do it someday. :-) I also assigned it to myself.Small update of importance and target. I'll check this after 2.10 is released as I understand that GTK 3 (GIMP 3.0) will help a lot with graphical tablets (hotplugging and stuff).	8.0	id=127973	24	True	True	vuntz	1
id=603173	REOPENED	bugzilla.gnome.org	general	unspecified	Other Linux	Low enhancement	Bugzilla Maintainers	2009-11-27 18:28 UTC by	Bastien Nocera	2015-01-09 12:16 UTC (	2 users	The content of the whiteboard field used to show up just above the comment field. It doesn't any more in bugs like this one:	Yeah, this got lost when moving to 3.4I think we had another bug about this..Do we still need / miss this functionality? I haven't had situations lately but maybe I miss the real battlefields?So this was a custom template according to#c2:"Just changed the templates to show status whiteboard as a Bugzilla Tip if itmatches ^[A-Z].*\."I don't we think really miss this functionality. At least I haven't in the last five years. If there's a good reason to get this back (and the related customization maintenance costs), please reopen.I quite like this. Good for adding warnings.Wanna reopen and cook up a patch? :PThis can be done within a hook. Need to setup my test instance locally again.	8.0	id=603173	12	True	True	a9016009	1
id=127973	REOPENED	gnome-panel	panel	unspecified	Other Linux	Low enhancement	Panel Maintainers	2003-11-26 14:06 UTC by	Dimitrios	2009-08-13 18:04 UTC (	16 users	Description of Problem:I have an autohide panel at the bottom of thescreen. The panel is not completely hiddenas it should be. I can see the top 4-5 pixesof the panel, including all icons!!!It makes things look very ugly, and destroysthe look of the desktop background image.Steps to reproduce the problem:1. Create a panel at the bottom of the screen2. Add several icons/buttons3. Enable auto-hide and let it dissapearActual Results:The panel is not completely hidden. The top4-5 pixes show on top of the desktop.Expected Results:The panel should be completely hidden.How often does this happen? Always.Additional Information:Running Fedora Core 1, custom installation.	CreatedScreenshot of a hidden panel which is not completely hiddenThis is not a bug. If the panel was totally hidden, you would not beable to bring it back.You can change the number of pixels shown by changing the/apps/panel/profiles/default/toplevels/panel_x/auto_hide_size gconfkey (where panel_x is the panel you're configuring). Set this key to1, e.g.I'm sorry to say but what you say doesn't make any sense.If its hidden then it should be completely hidden. If youwanted it half-hidden then you should renamed this featureto half-hidden panel.I dont mean this as an attack on you, but i've been usingmany operating systems, and when we mean hidden, we meancompletely hidden.I also don't see how this relates to been able to unhidethe panel if its completely hidden. You should be ableto detect if the mouse in at the edge of the screenand then display the panel. I dont see why you haveto make it half-hidden. Kinda looses its purpose right?I also tried to change the pixels. '0' doesn't work and '1'still displays the top pixel and makes things as ugly asbefore by showing white lines at the bottom of the screenfrom white buttons.0 doesn't work because i would mean 'totally hidden' and you would notbe able to bring the panel back on screen.I'm not sure it'd be possible/reasonable to detect when the mouse ison the edge of the screen.Mark: can you answer to this?I can move desktops by moving the mouseto the edge of the screen.Thus its possibleto detect when the mouse is in the correctpossition. Maybe that will help?So, have the window manager emit a "Mouse at edge of screen" signalthat the panel will catch, and the panel then decides if there's apanel on that edge, and if there is, and it's hidden, show it?Currently it's "on mouseover, expand." Or we could relabel the option as "Shrink panel."My guess is that this is theoretically possible to fix, but that thebenefit does not justify the amount of work it would take (especiallymaking it work across wm's). Marking as enhancement/low priority. Thiscould probably be WONTFIX, but I do recognize that it may in fact beworth fixing to someone.As a workaround, try using a panel color that is the same as yourdesktop background-- or an image where the edge N pixels of the panelmatch the background. That way it will *look* hidden.aaron, i appriciate your responce.indeed the problem is exactly as you described, so i'll keep quietand wait to see if anyone bothers to fix the code for me.your solution is indeed a possibility, though i can't keep modifyingicons all the time, so its not worth in the long term.i think i've gone way further with this than if i was tryingto ask for a similar update in Windows.thank you.Also known at:I suggest to set the default auto_hide_size to 1.I've done that. But on a dark background, i still see an uglycolorful lines of 1 pixel at the bottom :(One solution is to modify all icons by hand and erase the top1 pixel, but that is not a real solution.I've tested KDE and it seems they've got real hidden panels, soin terms of practice, it can be done.Anyway, not a real bug, but if its fixed at some point in thefuture, then we'll all be happy campers.PS:It would also be better if the animation was set to fast andthe delay to appear is set to 0, otherwise the overal effectis that gnome runs 'slow' degrading the overal user experience.Thank you for your feedback.Dimitrios, when the gnome-panel background is set to color or image,there is still an ugly colorful line of 1 pixel visible. When thegnome-panel background is set to none, then the visible line has 1color, which looks quite acceptable. So I think that changing theauto_hide_size from 6 to 1 is not a full solution to the problem, butjust "less bad". I agree that the full solution would be to hide thegnome-panel completely.Well, my first suggestion (a total hack): Is it be possible to makethe outermost pixel of a panel transparent? It would still catch amouseover event, but not be displayed?My next suggestion is, even if it's too much work to allow azero-pixel hidden panel, can we please at least add "auto hide size"to the panel properties page? I'd like to be able to configure thiswithout using gconf.Thanks...The transparency hack sounds like a great idea!***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I second pjack's approach of making the topmost line of the panel transparentwhen hidden. This would catch a mouseover event and it would keep the desktopclean. As it is now, the hide feature is worthless because it just makes thesystem look broken.I also agree, transparent pixels may solve the problem, if there is no issuewith performance. Every desktop can completely hide its bars, why not gnome? :]The option to add a single transparent line to discussed in the previous comments sounds like a good workaround to me.Any luck implementing this please?I'm looking forward to a fix for this too. It's been 3 years since this bug was opened. Is it not possible to add a transparent line of border pixels to the panel?Btw, I do appreciate the work on gnome. Thanks a bunch guys :)I believe the same thing counts here like it always does on open source projects.It will be done if a developer personaly cares about it. Otherwise you'll get the usual "do it yourself, thats why its open source".Hiding the panel completely would be bad for usability, because users would more easily forget that the panel is there and be surprised when it pops up after they move the mouse there. On the other hand, if a part of it is visible, it is clear that there is more visual content off the edge of the screen. This is also more consistent than a magical hiding and unhiding. Also, the partially visible icons indicate where you want the mouse when you want to use an applet or invoke a program.Usability is more important than aesthetics or the several pixels-wide of real estate used up. Please do not make the panel hide completely by default when in "autohide" mode.I don't think usability is an issue here since auto-hide is not ON by default. If the user chooses auto-hide then, then they are expected to have some clue what the option does. And the animation that shows the panel sliding down should clue them in as well. I agree that the immediate workaround should be taken to change the default auto_hide_size to 1 pixel.And then work should be started to make it hide completely. Honestly it seems a bit ridiculous to me that this still isn't supported after four years.Agreed with John Huss. 5 years now and still counting. Someone who reads this and can do it should be ashamed. Default value should be the lowest one, and that should be 0. The option is autohide, not auto cut off. Maaan. Sorry, but... I mean, really. Do it!It does not matter that it is not on by default - hiding it completely will make it less usable for most users who choose to enable hiding. The user should still have a reminder that the panel exists and of its location.I had problem with this too so right now I have my configurations set to:animation speed: fastauto_hide_size: 0 (although I believe there's no difference between 1 and 0)and my results were pretty good, check out the screenshots.CreatedHidden panelyou can actually see a small line at the bottom of the screen but it does not bother me, at least.CreatedLine in the backgroundsmall line to the left of my cursor.(In reply to)I understand that this "reminder" is useful to casual users. But I think that there should be the _possibility_ to really hide the panel, e.g. by manually setting the auto_hide_size to zero. I really like Gnome, so there is no way for me using another desktop enviroment, and I would _really_ appreciate to see this feature in Gnome!Agreed with Jan Krieg, "I'll forget I have it if it's not there" is a mere excuse.I agree too. It's a little hard to forget the existence of two panels that you use everyday. From the field, what I always hear is users complaining that they miss KDE or Windows that could leave the screen clean. To not leave this as [citation needed]:I agree that there should be a way to configure the panel to hide completely, but it should be in a config file. But this is already possible, according to the threads linked from the previous comment (#31).There is an established principle of human-computer interaction that comes from knowledge of human cognition. It is: "out of sight means out of mind". Luka, I think it is rude to insinuate that the people maintaining Gnome Panel are looking for excuses not to implement what needs to be implemented. I am not one of those people, but I do want to improve Gnome.Mateus, that some users are asking for behavior they have seen before does not mean that it is the better behavior. Will the users who are not used to a completely hidden panel be confused if they had to deal with it? Also, users who are happy with the panel that does not hide completely are not voicing their liking for it now, but that does not mean that a completely hidden panel would be more popular.Not, it is not possible.The threads I linked just teach how to set auto_hide_size to 1 pixel, which is just an ugly hack and not the same as completely hiding.Philip, I think you're in a difficult position here. Almost everyone that gets here is people that are pissed of enough by this behaviour to file a bug against it. And yes, I reckon that people who like the current behaviour are unlikely to voice it. Well, what to do about it? A poll in ubuntuforums, perhaps?If this behaviour is "better" or "worse" I'm not gonna discuss. This is subjective. There's people who like a clean screen, there's people who find it confusing. I think the panel is best left forgotten until you need it. But that's not important.The hard facts we have are:1) There's a lot of users that would like the panel to completely hide.2) Most users don't have a clue what to do with a configuration file (or gconf-editor, for that matter).This alone shows the necessity of an easy way to configure the behaviour.(In reply to)......The problem is just that it is not even possible to set the panel to size 0. I agree that hiding the panel completely is not better or worse, but since it is just personal liking, that doesn't matter at all! All I ask for is the possibility to activate full auto_hiding. I do not mind setting this through gconf, so that 'casual' users who could 'forget' their panel won't activate this behaviour.I wonder why there is no solution after even 5 years. I understand that this is just a minor issue, but a statement from a gnome developer would be nice. Perhaps a workaround for those who do not mind editing conf-files?Greets, JanI'm guessing that simply "transparent pixels" won't completely eliminate the effect on-screen from decorators. For example, I currently have the auto-hide width set to 0 (which seems to act like 1), and a "dropshadow"-like effect from compiz makes it visible over other windows for about 6 pixels after that. Using a transparent pixel would probably leave the dropshadow effect.. just something to considerI have this same problem, but transparent pixels wouldn't fix this for me. I hide the top panel, and my main problem with this bug is that I'm unable to quickly close a window by throwing the cursor into the top right corner, as the top 1 pixel or so is actually the hidden panel. Any progress with this?Thanks.I had the same problem as the previous commenter. I'd like to have a small, non expanded panel in the top left corner, and be able to close windows by moving the mouse to the top right corner.I patched panel-toplevel to allow the strut to be 0, while leaving the panel's size alone.CreatedAllow the strut to be 0 when auto_hide_size is set to 0Patch, see previous commentPhilip, if I am wrong, I'm sorry. But frankly, I don't think I am. What else is it then? It'll be exactly 6 years this month. Had it been not possible to do it, the bug would've been marked WONTFIX. After 5 years from when the bug has been posted, I think we have a right to doubt the dev's elan. I'm not trying to insult anyone, but the bug bugs me, and 5 years of politeness seemed to fail. I don't see any other way to infuse the motivation.	39.0	id=497913	20	True	True	mitch	1
id=497913	REOPENED	GIMP	Script-Fu	2.4.x	Other All	Low enhancement	GIMP Bugs	2007-11-18 14:14 UTC by	Alexia Death	2016-08-27 02:13 UTC (	4 users	Its a nasty PITA to debug a failing gimp script without a clue at what file region to look...	It should print the line/column the error was in, perferrably evenquoting the line and pointing out the point of failure.It used to be a PITA to debug Script-Fu scripts. It is a lot easier with the introduction of the TinyScheme based Script-Fu plug-in. Use the GUI console, or start GIMP from a console with the "-b -" options, and turning tracing on/off with '(tracing 1)' and '(tracing 0)'. Be careful where you put these as it can affect return values from a function. I will write up notes about debugging Script-Fu scripts at a later date for my Script-Fu/Tiny-Fu wiki. Displaying line/column information when a script is loaded would not be that difficult. Displaying the same information during the running of a script is non-trivial. The load process "tokenizes" the input file in to a collection of data cells. Each data cell would need to record the line/column values at the time the cells were created in order to have any meaningful information. Also, with the namespace issues, line/column information is not useful since the error might be in a different script than the one invoked.This issue has come up before. It isn't likely to get done anytime soon. I highly doubt it will be done before 2.6 is released. Setting the milestone to Future.If getting line numbers is difficult displaying a call trace or even just the complete offending expression would help too...A call trace, like the one I mentioned in the first paragraph of, is helpful in debugging. You will find it can give you way more information that you need. It is a new feature in Script-Fu due to the switch to TinyScheme.***has been marked as a duplicate of this bug. ***I don't think any further information is needed for this bug report. It's pretty clear what it's all about.Fixed in master, closing as fixed526c42dc3565ce1c0a7bc6914e614fa6ac6ea01d Mon Sep 17 00:00:00 2001From: Kevin Cozens <>Date: Mon, 07 Feb 2011 08:30:13 +0000 Optionally report error line (from SVN r63 of official TinyScheme)Re-opening this report. The commit that added line number reporting in TinyScheme is not enabled by default and has not been tested with Script-Fu. I need to determine how much extra overhead this adds to GIMP startup and whether it will give the right line number when an error occurs in an included file.Hello Kevin,What's happening with this patch? I can see the code is still there in master, and it looks enabled to me (SHOW_ERROR_LINE defined to 1).Has it been fully tested by now? Does it give the right line number? What about the overhead? Basically what about all the things you wanted to test years ago? :-)	9.0	id=340361	14	True	True	jsled	1
id=340361	REOPENED	GnuCash	Import - Other	2.2.x	Other All	Low enhancement	Christian Stimming	2006-05-02 02:22 UTC by	Adam Buchbinder	2010-06-10 07:52 UTC (	3 users	Please describe the problem:If accounts are deleted, the log replay importer does not reflect this; whiletransactions are moved, accounts are unaffected.Steps to reproduce:1. Delete an account and its associated transactions.2. Kill GnuCash.3. Reopen GnuCash, reopen the file.4. Replay the log.Actual results:The deleted account is still there, though the transactions have been affected.Expected results:The log replay should delete the account.Does this happen every time?Yes; this is repeatable.Other information:	See also.still a problem in the latest 2.2.x versions?Yes, it is.*** This bug has been marked as a duplicate of***Reopening. As Frank correctly points out on, this bug is not aduplicate, but it details one aspect of the replay log problems.Solving this bug in itself would improve the replay logs.Let me add that technically this enhancement request requires changes in twoseparate components of GnuCash:1. The engine generates the replay logs. So the engine should be enhanced towrite log entries whenever an account is being deleted.2. Replaying the logs is implemented in the Import component. So the importcomponent should be enhanced to actually replay account removal log entries.	5.0	id=61445	9	True	False	james	1
id=61445	REOPENED	dia	general	CVS head	Other Linux	Low enhancement	Dia maintainers	2001-09-30 20:48 UTC by	R P Herrold	2008-08-10 14:39 UTC (	0 users	RFE 2a. It would be neat if the 'nearest' one was 'magnetic'when, say, a Shift key was pressed and the interior mousebutton released, as well. Sort of a 'snap to' for linking.See also 61444	Mass reassign of bugs to.is there a similar feature to this in Visio or Rational Rose?more information would be nicePinging the NEEDINFO, will close this next time around.I am unaware of it in Visio, and have not used rational Rose, socannot comment. I quess my question would be: Why would that matter? Either the feature makes sence or is does not. If one wants Visio or Rational, go buy it -- To think that slavishreplicating features, rather than making a friendler UI seems misguided.cannot comment. I quess my question would be:provide more information and it makes it easier for developers to knowif the feature makes sense. provide an example of a program that has this feature and it makes iteasier for developers to implement the feature in a way that makessense to users of that software. if it already exists it is more likely to be a good idea, that is notto say that if it doesn't exist it is a bad idea. Even if the feature does make sense devlelopers prefer not to have theimplementation detials dictated to them for them to slavishly followwithout some way to try and understand how and why you think it shoudlbe done that way.replicating features, rather than making a friendler UI seems misguided.Only a fool would disregard these tools, at the very least they provide ideas on how to things and perhaps how we can do it better. Ignorance of other programs will not help developers make bettersoftware and you sir are a condesceding ass to presume I wassuggesting slavishly replicating features. "go buy it"!? if you want software that has this feature why dont yougo buy it, or even better offer to sponsor one of the Dia developersto add it for you? Dia is a diagramming tool and much of the potential audience for Diawill be users of Visio or Rational who want to use non-proprietarysoftware. That is why I suggested those programs specifically butthe point was to find out where the feature came from. By being aware of their expectations developers can design betterusers interfaces that are genuinely better, not slavishreimplementations but at the very least improvements on designs thatwork not just different for the sake of being different without and atthe same time easier to migrate to for users already familiar withother diagramming sofware. I would like to forget just your insulting comments and disregard forthat fact that I'm was voluntarily spending my free time trying tohelp you to help yourself and to make sure that your request did notget overlooked, doing the thankless unglorious task of sorting throughBugzilla reports that you clearly dont appreciate. If you can just provide more information on what you mean exactly andhow you expect this feature to work I will be happy to take more of mytime and effort to check out what you have to say reopen this bugreport and make sure to bring the idea to the attention of the activedevelopers.Disregarding rants and reopening. I'll let the maintainers of Dia decide if thefeature makes sense or not.Thank you for the reopen -- I think of the requested item as like a 'snap togrid' function, in concept, and so, to some degree, it _is_ present incommercial tools Although admittedly commercial space has not refined the concept to address theconcept of applying it within the (moveable) 'connection points' within a(moveable) object [a grid is more static, and the compute load may be easier tomanage]. Which what I was driving at, in asking for consideration on standalonemerit, rather than 'following' some other product's UI.I like the idea of magnetic connection points (they already are, in a small radius). Problem is doing it in an intuitive way. Since no other programs we know of implement it, there's no precedent. Using Shift would be a way to do it, however it is already being used, and there's a number of request for using it for other things.Thinking about 'signalling' a change into and out of a widened 'snap to radius' ('magnetic' mode), it seems to me it would be done on the mouse with a chording, or (I think better, as it does not affect mouse position with an addditional push vector), touch Shift, Ctrl, or some other key, ('m' ?) one to enable, and a second time to disable it.	9.0	id=238551	16	True	True	fejj	1
id=238551	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other All	Low enhancement		2003-02-23 13:49 UTC by	Andre Spiegel	2012-02-27 10:35 UTC (	2 users	When dealing with encrypted e-mail, I find it essential that I can storemessages in decrytped form. If that's not possible, the most severeproblem is that I cannot easily search all messages in a folder for somespecific text. Also, browsing through messages takes more time if theyneed to be decrypted on the fly. Finally, a lot of my e-mail is archivedfor many years and it sometimes outlives the keys to which it was encrypted.For my own purposes, encrypting messages while in transit, but storing themin plain text on my local system is an acceptable security drawback, muchoutweighed by the other reasons I pointed out above.It would be perfect if I simply had a menu command that says "replacemessage with decrypted version", or some such.As far as I can see, Mozilla/EnigMail has such a facility, and I alsoremember it from the days when I used Mailcrypt on Emacs. With Evolution,I can use a workaround of decrypting the entire mbox file with premail or asimilar script, and then importing it back into Evolution, but that isclearly suboptimal.Thanks for considering this.	*** This bug has been marked as a duplicate of***I'm sorry, but this bug is not a duplicate of. I was notasking for a way to store passphrases between sessions, but to storeindividual messages in decrypted form.The security implications of both are vastly different. If a plainpassphrase was compromised, that would potentially compromise theassociated key. If a decrypted message was compromised it would beonly that particular message that's affected.I don't see how storing passphrases between sessions could solve theproblems I described in my initial report: (1) ability to searchthrough folders of messages that were received in encrypted form, (2)avoid having to decrypt a message each time it is viewed, (3) makesure a message can be read even when the key it was encrypted to is lost.To repeat from my original report, Mozilla/EnigMail does have such afeature, but I'm almost 100% certain that is does not do it by storingpassphrases between sessions.Thanks for reconsidering.er, oops. sorry. I misunderstood. I was thinking passphrases for somereason. probably not enough coffee :)***has been marked as a duplicate of this bug. ***still missing in 2.1.4; adding security keyword for better findingBumping version to a stable release.	6.0	id=62397	8	True	False	cyrille	1
id=62397	REOPENED	dia	general	CVS head	Other All	Low enhancement	James Henstridge	2001-10-16 00:37 UTC by		2006-03-11 12:58 UTC (	0 users	Users have requested import/export of rational rose files, if it is at allpossible. See also my list of other GNOME feature requests at:	Are RR's file formats even documented ?A quick look ondoes not turn up any documentationLast time i looked the Rational Rose File Format is text based andlooks a lot like Lisp/Scheme/etc with lots of (parenthesis and values)(all over the place)i will provide samples on request. if autodia actually worked i would be able to provide both dia andrational rose documents generated from the same source code.more stuffEvaluation versions of Rational Software including Rational Rose(win/unix/linux) can be found hereRational Rosei googled and found a Rational Rose MDL file (Rational uses .MDL model and .PTL petal files)there are also gifs generated from the model.I found this tooConjectural Structure of Rational Rose mdl FilesApparently Microsoft Visual Modeler (part of Visual Studio 6) can alsoopen .MDL files. Documentation of the Rational Rose Petal (.ptl) filesis there more i can do to get this moved out of the Needinfo state? Iwould like to move this along, but not coding. I suggest the OS could be changed to all, maybe add HELPWANTED keyword.Alan has responded, reopening.This could be an excellent addition, and not too hard to&#013;&#010;get at least simple diagrams in. Some info will obviously&#013;&#010;be lost, simply because RR keeps different kinds of&#013;&#010;information.&#013;&#010;came up on mailing listsuggestions about using CrazyBeans to put something together.	7.0	id=143746	32	True	True	alexl	1
id=451568	REOPENED	GIMP	User Interface	git master	Other All	Low enhancement	GIMP Bugs	2007-06-27 11:25 UTC by	Tor Lillqvist	2007-10-08 16:14 UTC (	0 users	This patch makes the color selector of at least the text tool have an immediately visible "live" preview effect upon the actual text layer visible in the image. This is kinda neat. (But still if one clicks "Cancel" on the color selector, it reverts back.)As far as I can see there are no ill unintended side-effects. Having to use the block_setting_dialog_color flag is a bit ugly, but without that also the "old" color of the color selector got continuously updated.	CreatedPatch2007-06-27 Sven Neumann <> * app/widgets/gimpimagecommenteditor.[ch]: fixed spelling error. * app/widgets/gimpcolorpanel.[ch]: applied slightly modified patch from Tor Lillqvist that changes the ColorPanel to provide live updates ().As I expected earlier, this change is too invasive and causes breakage such as. I have now reverted the change (revision 22850). If a live update is considered a good thing in some places, then we should add API that allows to explicitly enable it for those places.	3.0	id=451568	8	True	False	sven	1
id=143746	REOPENED	nautilus	File and Folder Operations	2.22.x	Other All	Low enhancement	Nautilus Maintainers	2004-06-05 00:06 UTC by	Sebastian Rittau	2012-01-03 12:49 UTC (	12 users	There already are several bugs concerned with the Drag & Drop behaviour ofNautilus. Nevertheless there is a more fundamental issue, I think: What shouldthe default action of dragging a file from one folder to another be?Currently, the default behaviour changes, depending on whether a file is on thesame file system or another one. I personally find this very confusing. Forexample, if I open one window in my local home and another in a remote home (viaSFTP), I would expect to move a file when I drag it onto my local desktop andfrom my desktop into another local directory. Instead, a copy of the file isleft behind on the remote home.Basically, the current default behaviour of sometimes do this, at other times dosomething other is exposing implementation detail to the user, and I don't thinkthat the unexperiences user will understand the difference between differentfile systems.	***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***I'm not sure i agree about the change, but lets keep this open for now and makeit the dup-head for this issue.Also related isOne solution would be defaulting to always move, but when moving to externalfilesystems also leaving a copy in the Trash - so that the local file can beeasily recovered (for example if the remote file wasn't transmited correctly).There's quiet a chance that the remote folder which is your drag source is acollaborative one. Therefore, moving isn't usually desirable in that case either.I really like the way KDE/Konqueror implements it: no default action, always show a context menu instead (like Windows does with right button drag). Of course any other "action chooser" would do.Having a default action based on locality is bad enough in Windows, but it's so much worse in unified (filesystems) namespace of *NIXes...IMHO file operations are too important/dangerous to have a default drop operation. I've never seem an OSS file manager that manages to make accidental drag'n'drop operations as likely as Windows Explorer does but, as people say, better safe than sorry ;-)Also, using an action chooser would allow better handling of read-only source or target (unavailable options could display disabled, with hints or comments for the reason it's disabled).BTW, I wonder whether the two following bugs should be marked dupe:CreatedProof of concept of consistent behaviour for file management.I recently also got to the point where I was so annoyed by the "sometimes copy, sometimes move" that I decided to do something about it myself. My personal beliefe is that the behaviour when doing (drag and drop) file management in nautilus is that it should be _consistent_ (no matter what is the default action). Additionally I would prefer that the default action is move as that is what I do the most and the alternative behaviour being copy when I hold CTRL.(In other words: always act as nautilus currently does when you DND files on the same filesystem)This is what I believe is the most logical thing to do. Dragging stuff around the desktop in my opinion matches moving the files on the harddrive. Stupid people (;-P) like my parents can't handle stuff being copied, they drag their documents to the usb stick makes changes to it and then they have two different versions of the same file but doesn't understand that because they think it's the same document not being aware that the plus sign that appeared on the cursor meant that they copied the file. Please discuss this further with some usability experts.... I'm not one of them, it's just that the current behavoir gets on my nerves which means it's definitely wrong since I'm not usually picky about user interface stuff. :)It seems like the code to make nautilus current inconsistent behaviour was added on purpose, so to get a consistent behaviour all I had to do was to remove/disable that code, "proof of concept" patch attached.Discussions followed on IRC about why that code where there at all? Suggestions came up stating is was because moving to "remote" filesystems (usb-sticks, nfs shares, and so on) wasn't safe. (The usb-stick could be yanked before the file was synced and then the local file would be gone and the usb-stick file would be corrupt -> data loss)If this is the case I believe there's much better ways to work around the "brokenness" in the operating system that leads to possible data loss.One way that has been suggested above is to move the local copy to the trash so that it can be restored in case the remote copy was corrupted. Another would be to add an extra delay in the move dialog to make sure the data is synced to the usb-stick before it's removed. (Assuming the user waits for the dialog to close before yanking the stick and that worst-case time to sync is only a few seconds, which I believe is atleast true under Linux)The current behaviour doesn't prevent data loss because the user doesn't automatically understand that when holding down CTRL to move the files also means "don't yank the stick".There's also no check to see if the destination filesystem is a "remote" one at all. (ie. having 2 harddrives -> 2 partitions -> 2 filesystems and moving between them doesn't suffer from any of the usbstick/nfs/whatever problems but the default action is changed to copy anyway!)To sum it up:1. I would prefer the the behaviour to be made fully consistent (as my proof of concept patch makes it), with move as the default action and copy as the alternative.2. If you still disagree, I would like that extra code that checked if the destination filesystem is actually "remote" (usb-stick, nfs, sftp, ...) before going into "safemode" (changing the default action to copy) to make the inconsistency not appear as often as today. (ie. don't punish people with two permanent harddrives)3. If all else fails, please give us anything but the current behaviour.. ;)Regards,Andreas HenrikssonHere are some additional patches to be considered.The first one makes move default for all local drives (while keeping it as is, default to copy, for remote destinations).The second one (should be applied on top of the first one) adds an additional check to discriminate memory sticks (other "we're afraid the user will yank them" device types can be added trivially in the switch).Regards,Andreas HenrikssonCreatedDefault to move if source and destination partition is both local drives.CreatedAdd additional check that discriminates memory sticks on top of the previous patch.Setting patches as obsolete, as Nautilus moved away from GnomeVFS.The patches may be obsolete, but the bug seems to be fixed!Atleast the drag and drop defaults to move, both when I drag between folders on same filesystem and between rootfs and attached usb harddrive.Someone with permissions, please close this bugreport!Thanks Andreas for the follow-up, closing as OBSOLETE. Feel free to reopen the bug or open a new one if this still happens.Reopening, as I still see this behaviour with Nautilus 2.20.0 (Debian unstable).Sebastian, can you verify that this is still a problem with Nautilus 2.22 too? Andreas, which version are you using?Sebastian, nautilus 2.20 is still the old GnomeVFS based one. You need nautilus 2.22 from Debian Experimental!Same problem with Nautilus 2.22 from experimental: When trying to drag a file over a NFS or SFTP mounted share, it shows the "copy" pointer, while it shows the "move" pointer over local folders.Ok, I only tested between my rootfs and my usb harddrive. Previously (and what my previous patch removed) there was a check if copy was on same filesystem.I don't care too much about remote filesystems. Isn't UPLOAD (==copy) the expected default behaviour for remote sites? I can still see the complaints about inconsistency though.I guess I'll just remove myself from CC on this one as my issue is fixed and let you guys decide and handle the rest.Sebastian: I don't think that having a single default action for every DnD (defaulting to move) is a good thing, and it really doesn't make sense to me for remote locations, as you will rarely need to move something from a local folder to a remote share, and that would be just confusing.If you really think that is the way to go, please send a mail to the GNOME usability and Nautilus mailing lists [1] [2], asking their opinion on the matter, so we can take a final decision. Thanks![1][2]* drag & drop should always default to cp -p * after the drop, pop under the mouse pointer and ask if user wants to delete source files.* pop up dialog should have the option to record preferences for future use, i.e. - yes button (= move) - no button (= copy) - radio button for the cases to which the reply applies -- only this time (default - the pop under is shown after every drag and drop operation) -- always for this specific volume -- always for this type of media -- always and never ask me again - checkbox: preserve timestamps (default selected, = -p switch)A desktop is first and foremost about *choice* - there are as many ways of doing things as there are users. None is better of worse, they are just different, and they all work for their respective users.A desktop (at least, the GNOME desktop) is first and foremost an environment that enables users to focus on their primary task without getting in the way. If it can't perform the simplest of operations in a sensible default fashion without first asking you what to do, it has unceremoniously fallen at the first hurdle.I don't really think the correct default behaviour here is something we can nail down by talking hypothetically about it. I'm pretty sure that the default move/copy behaviour is such a subtle nuance of the file manager that most users barely notice it. If they've ever used Windows or a Mac before, they will have been exposed to the same behaviour there, so they probably won't find it unusual. If this is their first exposure to a desktop file manager, they'll probably notice that their pointer goes a different shape sometimes, but not really understand why.Probably the only way to get to the bottom of it is by running a study in a controlled environment with a carefully-constructed set of tasks, which ask a cross-section of our users to perform various move and copy operations between various local folders, network shares and attached devices (without specifying how to do it of course). Through observation and debrief interviews it shouldn't be too hard to figure out if any operations are causing problems, confusion and/or data loss, to what type of user, and why. Only then can we really figure out what to do about it.The poll: 1) Have you ever dragged and/or dropped a file by mistake or at the wrong place?2) Have you ever did more than 3 file drag operations in a row?If you realize my previous post you'd guess my answers:1) Yes, some times.2) AFAIR, no.Conclusion: yeah, you guessed it. And please display some info for both the source and target of the drag operation in the dialog/menu ;-)it's not the same behavior on Windows.* On Windows, whether copying or moving, timestamps are preserved (cp -p)* On Gnome, the last time I tried timestamps where not preserved when moving between volumes.Unsurprisingly, most users will ask the desktop to do what they are used to - no need for studies to determine that.Current Gnome users have learned to live with the current behavior. They most likely see no reason to change. If the goal is to cater to current Gnome users, close this bug, it is a non-issue.If <> is still on the radar screen, consider that the majority of new users will be Windows converts. They too will ask the desktop to behave like they are used to. It's not better, it's not worse, it's just *different*. They won't be comfortable making a switch unless their desktop behave like they are used to.No need to sacrifice the existing user base to make inroads in this potentially larger user base. Both way of working have equal legitimation and it is in the interest of Gnome to cater to both, and this inevitably means *choice*.My suggestion above was just that: a suggestion. Don't like the pop-under idea? associate it with a right-click or put it in the preferences and that's it. I personally would be happy to just have the option to set the above behavior customization in the preferences.Also on Windows using "right click" gives me the option to decide if I want to copy or move.Want to be more flexible and accommodating? introduce a "mode" switch to the desktop: "cruising mode" and "learning mode".* In "learning mode", let the desktop pop up with questions every time a new situation arises to which the user has not yet set a preference. After a while, it has learned my preferences and no pop ups are necessary.* In "cruising mode" let it work without interruption based on preferences and defaults.Speaking of interruption, the focus-grab by the updater or by any other application is much more annoying, because it happens in unexpected moments while I am doing something else. The popup I am suggesting is just an extension of my current task, no interruption. It could be shown before execution.IMO it is in the interest of Gnome to be flexible and accommodating to grow its user base, but I know I have not much influence on the choices you guys make. I don't have the skills, knowledge, time to do what you are doing. I respect you for that. The only thing I can do is choose to use it or not, and to be brutally honest, after a recent attempt, I am back using Windows.YuvI think this bug report has passed its point of maximum usefulness. I suggest the Nautilus maintainers publish a design specification -- even a single-sentence specification that says "Dragging should move when {x} and copy when {y}" would be better than nothing -- so that bugs can be reported about details of where Nautilus doesn't follow the specification. For example, if the Nautilus help doesn't describe the behavior accurately, that's one bug. If dragging to an NFS share doesn't match the spec, that's a separate bug. If dragging to a portable music player doesn't match the spec, that's a separate bug. And so on.The current default behaviour is "move if on same filesystem", otherwise copy. There might well be times when this is not really exactly what people want. However, in the most common case of one single local root filesystem where all other filesystems are shared NFS directories of pluggable things like USB sticks I think this does what most people expect (and I think, what other os:es do). Any kind of heuristics is likely to fail in some cases, so I think having the most simple one is a good idea. Its also the safer choice, as all sort of moves cross devices cause some risk of data loss (since we actually delete the source file).However, there is one other exception. If you move a mountpoint directory and drag it to the directory its already in (e.g. move the icon on the desktop) we also default to move (for obvious reasons). This behaviour regressed in 2.22 with the move to gio where we defaulted to move for *all* parents of the source (not just the immediate one). I just fixed this in svn, but this may be the source of a few issues people have reported with this.Renaming for clarity (hopefully).[Bumping version number as per]How about just letting user to decide on this? Something like /apps/nautilus/preferences/file_dragdrop_policy, with values "old", "move", "copy".I feel that current behaviour is very inconsistent & annoying, but if other people feel that it's still a good default, then fine. Just let me to change that for myself.	30.0	id=211122	13	True	True	gerardo	1
id=211122	REOPENED	evolution	Mailer	3.2.x (obsolete)	Other other	Low enhancement		2001-09-27 19:55 UTC by	Ben FrantzDale	2012-06-16 18:31 UTC (	1 user	Please fill in this template when reporting a bug, unless you know what you are doing.Description of Problem:I suggested this on the mailing list:I'm not sure what the best UI would be but... Suppose I get an email with the folowing text:``The meeting will be at 3 next Monday''I would like to be able to select this text and have a context-menu entry of ``add to calendar.'' This would first popup a dialog to create a new calendar entry could be used, with the date of Monday, October 1, 2001 and a time of 3PM. The text of the event could be the entire string or just ``the meeting will be at'' or something even more clever.BACKEND:The core of this would be a function that took a string as input and returned a date, time, and comment. It would need to do a fair ammount of smart pattern matching. Some cases to look for would be: ``next [day of week]'' ``09/30/2001'' or ``9/30/01'' or ``9/30'' or ``the 30th'' or ``sunday'' ``noon'' or ``12'' or ``12pm''A simple and useful start would be a function that simply matched for (in perl):if ($input =~ /(\d{1,2})\/(\d{1,2})(\/\d{2,4}){0,1}/ ) { #get 1/1 or 1/1/02 $month = $1; $day_of_month = $2; $year = &get_four_digit_year($3);} elsif ($input =~ /($monthregexp)\W{1,3}(\d{1,2})/i ) { #get english date $month = &get_numeric_month($1); $day_of_month = $2; if ($month >= $this_month) { $year = $this_year; } else { $year = $this_year+1; } }#Next quickly do time range:$timeregexp = "\\d+\\s{0,1}(am|pm|a|p)";if ($input =~ /($timeregexp)((\s+\-\s+|\s+to+\s+)($timeregexp)){0,1}/i ) { $startime = &time_from_string($1); if ($4) { $endtime = $4; }}UI: *If ``events'' could be identified accurately, a button or hyperlink could be displayed in the message. This would be cool if and only if it worked very well. *Instead of popping up an add event dialog, a wizard might be better to force the user to serialize his/her checking that the date and time is correct.	Ettore: is this feasible? Is it worth to keep as wishlist?Ettore: ping?I'm not sure how much crazyness should be supported -- probably nottoo much -- but some simple things would be very helpful and quitedoable. A simplified list would be:todaytomorrowmonday, tuesday, etc.Also, even if none of this is added, the value entered in the fieldshould be verified as soon as the user unfocuses the widget. As is, Ican leave "today" in that field and I'm not told it's a problem untillI click "Save and Close" at which point I'm not thinking about whenthe event is.I'd say this must be do-able. Google did it:Bumping version to a stable release.Moving this to Mailer.Not very likely to happen without outside contribution. All this would have to support all locales, date formats, etc.Could be based on	7.0	id=10686	26	True	False	raphael	1
id=10686	REOPENED	GIMP	User Interface	git master	Other All	Low enhancement	GIMP Bugs	2000-05-10 00:00 UTC by	Exported from Debbugs	2014-05-09 02:41 UTC (	2 users	Package: gimpVersion: picked him up last weekName........: Mistress VulcanaEmail.......: root@domain_of_painPlatform....: hardware: nipple clamps / os: ???GIMP Version: picked him up last weekGTK Version.: ???WM/Version..: ???-- Other system notes:---- Problem description:My new GIMP becomes enraged upon donning of a leather mask. I have tried several masks, to make sure that the problem wasn't some sort of chafing. He was wearing two nippleclamps, and I had just finished beating him with a cat o'nine tails, when I applied the mask. He become very violent, after that.I purchased this GIMP for purposes of sadism, and am not happy at seeing him become willful. I think that a refund or exchange is in order.---- How to repeat:Place leather mask on GIMP.---- Other comments:He also has problems wetting himself, but as asked to, I will fill out a separate report pertaining to this issue.--------- Additional Comments From2000-05-10 11:10:04 ----Subject: Re:: [gimp-bug] GIMP becomes enraged upon donning of leather maskFrom: Simon Budig <>To:Message-Id: <>Date: Wed, 10 May 2000 17:10:04 +0200root@domain_of_pain (root@domain_of_pain) wrote:Thanks for your comments accorting to the problem with our gimp. We doour best that our gimp fulfils all wishes from its user(s). However thescope mentioned by you is not yet implanted and we do not plan to extendthe functionality to that range in the current pre 1.2 state.Ill set the severity of this problem to "wishlist". Maybe somebody islooking for that topic after the 1.2 release.Bye, Simon--------- Additional Comments From2000-05-20 12:58:49 ----Subject: AddendaFrom: "Garry R. Osgood" <>To:Message-Id: <>Date: Sat, 20 May 2000 12:58:49 -0400All,This is to be expected. As currently designed,Gimp functions correctly only with alpha masks.Leather ones just won't do - they engender allsorts of unpredictable behavior. Be good, be wellGarry Osgood------- Bug moved to this database by2001-01-28 10:52 -------This bug was previously known asatOriginally filed under the gimp product and general component.The original reporter (root@domain_of_pain) of this bug does not have an account here.Reassigning to the exporter,.Reassigning to the default owner of the component,.	Sigh! I am marking this bug as NOTABUG so that it goes out of thelist of open bugs, only because of the stupid spam message that wasattached to it. Too bad, that was a funny one.Note: if someone finds a way to delete the attached spam thatpoisons this bug report, then feel free to resurrect this bug...Just removed that SPAM from the bug.Re-assigning all Gimp bugs to default component owner (Gimp bugs list)Resolving bug (unfortunately there's no resolution that fits, I'vegone with the boring old NOTABUG, since this is expected behaviour).Dave.I'd like to see this bug reopened at some point. Perhaps after therelease...Seems that this is not expected behaviour. The GIMP should shut up anddo what his mama tells him.Reopening.Dave.Treat Wilbur softly at first, tell him it's cold and that he should layer up then present the leather mask, should help besides, he/she might have an aversion to leather, being a genueia pig and allAm I the only one that finds the GIMP bondage references disturbing? Do people really find this funny? Is this report going to be left open for ever? (changed status to NEEDINFO, feel free to change it with the next comment)So far, all commenters seem to find it funny. I'm tempted to take your commentas funny, too :)Speaking for myself, I found this report funny. And yes, it should perhaps stayopen forever, until we find a way to appease the GIMP.The problem of wettening himself persists so the bug must stay open.I firmly suggest a reward system to solve the wetting himself problem.Why not try changing the leather mask with a latex one it could help...I am closing the 8 year old joke as OBSOLETE nowBut the bug still exists. We haven't fixed the nipple clamp issue yet.This bug report has to be updated. Under the dominion of mistress goat things have changed:Nipple clamps are incompatible with the new unbounded nipples code.Regarding the leather mask, I think that adding the proper pixel format in BABl to convert from RGBL to RLGLBLL may fix it.I heard that the new GIMP prefers the masks that way.	16.0	id=547486	11	False	True	mitch	1
id=772089	REOPENED	gnome-music	general	unspecified	Other Linux	Normal enhancement		2016-09-27 23:23 UTC by	Marinus Schraal	2017-02-13 21:09 UTC (	3 users	Implement the empty state dialog as seen in the design here:(top left).	Createdplaylistdialog: Add firstPlaylistDialog query: add query to count no. of non-static playlists This is a raw patch.Createdplaylistdialog, query, PlaylistDialog: Add new dialog box when creating first playlistCreatedplaylistdialog,query: Add new dialog box when creating first playlistCreatedplaylistdialog,query: Add new dialog box when creating first playlist. -Raw patchCreatedplaylistdialog,query: Add new dialog box when creating first playlist. -Raw patchReview of:Looks pretty good overall.Let's get into details when the bigger problems are fixed.::: data/PlaylistDialog.ui@@ +13,3 @@ <property name="can_focus">False</property> <property name="receives_default">False</property>+ <property name="use_underline">True</property>I know this is a bit irritating with glade, but this is not something you touch so don't change it (and several other places like it).@@ +54,3 @@+ <property name="transition_duration">250</property>+ <child>+ <object class="GtkDialog" id="dialog1">This looks the wrong way around and probably the reason of the criticals/warnings, the dialog contains a stack. Not a stack containing a dialog.::: gnomemusic/query.py@@ +143,3 @@+ 'RECENTLY_PLAYED', 'RECENTLY_ADDED', 'FAVORITES'))+ }+ """.replace('\n', ' ').strip()The query counts on-disk playlists as well.::: gnomemusic/widgets/playlistdialog.py@@ +44,3 @@ self.ui = Gtk.Builder() self.ui.add_from_resource('/org/gnome/Music/PlaylistDialog.ui')+ self.add_playlist_stack = self.ui.get_object('add_playlist_stack')self._add_playlist_stack@@ +48,3 @@+ cursor = tracker.query(Query.all_non_static_playlists_count(), None)+ if cursor is not None and cursor.next():+ count = cursor.get_integer(0)This should be done through grilo for cleanliness like.Also should be async.@@ +51,3 @@++ if count > 0:+ self.dialog_box = self.ui.get_object('dialog1')self._dialog_boxCreatedplaylistdialog,query: Add new dialog box when creating first playlist.Review of:Getting there, good work.::: data/PlaylistDialog.ui@@ +279,3 @@+ </object>+ </child>+ </object>About the whole playlistdialog ui: you should be able to add the dialog boxes (1&2, but better name them something useful like 'empty_state' & 'normal_state' or something) as childobjects of the stack, saves you placing them manually in playlistdialog.py,@@ +286,3 @@ <child> <object class="GtkButton" id="cancel-button">+ <property name="label" translatable="yes">Cancel</property>This shouldn't be changed.@@ +298,3 @@ <child> <object class="GtkButton" id="select-button">+ <property name="label" translatable="yes">Add</property>This shouldn't be changed.::: gnomemusic/query.py@@ +143,3 @@+ 'RECENTLY_PLAYED', 'RECENTLY_ADDED', 'FAVORITES'))+ }+ """.replace('\n', ' ').strip()This query is still broken, listing local playlists. Also, I don't like the fact that the query contains the names of the static playlists (most played, etc).This query works for me (not counting yet, but just as an example):SELECT tracker:id(?pl) ?pl nie:title(?pl) { ?pl a nmm:Playlist . OPTIONAL { ?pl nao:hasTag ?tag } FILTER (!BOUND(nfo:belongsToContainer(?pl))) FILTER ( !BOUND(?tag)) }::: gnomemusic/widgets/playlistdialog.py@@ +28,3 @@ from gnomemusic.grilo import grilo from gnomemusic.playlists import Playlists+from gnomemusic.query import QueryThis is not needed, it works through grilo.py now.@@ +102,3 @@+ self.add_playlist_stack.set_visible_child(self.box_dialog2)++ self._setup_view()Why setup the view here? The treeview is not gonna be used.@@ +112,3 @@+ self._on_new_playlist_entry_changed)+ self._new_playlist_entry.connect('activate',+ self._on_editing_done)Indent too far.@@ +121,1 @@+ grilo.playlists_available(playlists_available_cb)2 notes here on the whole _setup_dialog function.* Most lines are too long (pep8).* There's serious duplication in available/unavailable cases. Afaics the only thing you need to do is to get the objects specific for the stack page (_new_pl_{button,entry}), everything else is the same.::: gnomemusic/window.py@@ +571,3 @@ return add_to_playlist = PlaylistDialog(self)Maybe name add_to_playlist more obvious. playlist_dialog should do. Makes the run & destroy more logical.Createdplaylistdialog,query: Add new dialog box when creating first playlist.Createdplaylistdialog,query: Add new dialog box when creating first playlist.(In reply to Yash from)Did major cleanup and removed duplicated code. Hopefully now we can start improving the UI.Review of:I still see this warning on the empty dialog part:(gnome-music:28212): Gtk-WARNING **: Allocating size to GtkDialog 0x2e51170 without calling gtk_widget_get_preferred_width/height(). How does the code know the size to allocate?Also overall I think it should only show the editable playlists (so user-created). Those are the ones we count, but the dialog shows all playlist (static ones excluded). This should be a separate patch.::: data/PlaylistDialog.ui@@ +95,3 @@+ <child>+ <object class="GtkButton" id="create-first-playlist-button">+ <property name="label" translatable="yes">Create</property>Make it a mnemonic, 'C_reate' & add use_underline property. The R b/c the C is taken for cancel iirc.@@ +122,3 @@+ <child>+ <object class="GtkButtonBox">+ <property name="name">internal action_area</property>i think you mean internal_action_area? Is this name needed at all?@@ +132,3 @@+ <child>+ <placeholder/>+ </child>are these placeholders needed@@ +147,3 @@+ <property name="name">page0</property>+ <property name="title" translatable="yes">page0</property>+ </packing>Is this packing needed and certainly we don't need a translatable 'page0' string?@@ +267,3 @@+ <child>+ <placeholder/>+ </child>are these placeholders needed@@ +302,3 @@ <property name="can_focus">False</property> <property name="receives_default">False</property>+ <property name="use_underline">True</property>this still unneeded reordered@@ +314,3 @@ <property name="can_focus">False</property> <property name="receives_default">False</property>+ <property name="use_underline">True</property>see above::: gnomemusic/widgets/playlistdialog.py@@ +40,3 @@ self.ui = Gtk.Builder() self.ui.add_from_resource('/org/gnome/Music/PlaylistDialog.ui')+ self.add_playlist_stack = self.ui.get_object('add_playlist_stack')self._add_playlist_stack@@ +45,3 @@+ self._dialog_box.set_transient_for(parent)+ self.normal_state = self.ui.get_object('normal_state')+ self.empty_state = self.ui.get_object('empty_state')self.{_normal_state,_empty_state}@@ +79,3 @@+ if available:+ self.add_playlist_stack.set_visible_child(self.normal_state)+I think there's a bit too much blank lines going on in the next section. Try to make it into logical chunks. I think this can be thought of setting dialog state and as such the sections in the if/else parts can be considered one block.@@ +108,1 @@+ self.playlist = Playlists.get_default()self._playlist, but I rather see you create this in __init__. It looks out of place here.Createdplaylistdialog,query: Add new dialog box when creating first playlist.Review of:lgtm::: gnomemusic/query.py@@ +140,3 @@+ OPTIONAL { ?pl nao:hasTag ?tag } .+ FILTER (!BOUND(nfo:belongsToContainer(?pl)))+ FILTER ( !BOUND(?tag))Remove the space before !, it's a bit odd 2 identical lines doing different thingsCreatedplaylistdialog,query: Add new dialog box when creating first playlist.Uhm lets keep it open to track some minor issues that need fixing.* the warning mentioned earlier needs figuring out* I think the dialog can be brought in line with the mock-up in regards to its looks (details, details)* anything that pops up	16.0	id=215406	18	True	True	jpr	1
id=709090%0D%0A	REOPENED	GIMP	Gimp-Python	git master	Other All	Low enhancement	GIMP Bugs	2013-09-30 12:59 UTC by	yotam	2016-07-23 19:42 UTC (	3 users	I tried to use two constant in my scripts and I got an error. The constants are SINUSOIDAL (supposed to be 2)SMEAR (supposed to be 2)python 2.8.4, ubuntu 13.04	Hi,is it the SINUSOIDAL (2) from plug-in-bump-map and the SMEAR (0) from plug-in-ripple that you are talking about?Hi, sorry I wasn't clear before. the SINUSOIDAL (2) constant is from plug-in-bump-map and the SMEAR (2) constant is from plug-in-displaceWell it looks like it may be normal when they are data coming from plug-ins. When they are core pdb procedure, they have an associated type created. But it does not look like we would create a type and named constants for plug-in's parameters.So you'd have to use the constant integer value in between parentheses, while the value names are only for reference of which is which.I agree that's not the nicer consistency since you have to care if a procedure comes from a plug-in or not (but fortunately the procedure's name gives it away!).I'll confirm this with other developers, but that looks like the answer to your problem.Just to be sure. In gimp functions, I should use the constant (e.g. TRUE, or WHITE_FILL). when I handle plug-ins (everything that start with "plug-in") I should use the value and not the constant?Yotam,Yes that's it. Actually you can still use TRUE because that's a boolean, or you could use any enum value from a core type, if a plugin were to use this core type. But when it is not a core type, just use the actual values. Checking the code again from your examples, that's indeed expected that these names are not usable from outside the plug-ins. They are only used as documentation to explain the value's meaning.That could be better but it is likely not a priority to improve our plug-in system to be able to register types.So I guess I will close as a NOTABUG. :-)I would place that under (very) low priority, but I can see your point. I would recommend upon putting something in the documentations about this though.Well, ok. Reopening as a low priority enhancement.The idea for gimp 2.10 is that most plug-ins become GEGL operations - as such, the enums shouldbe available through introspection. Still, "classic" plug-ins should work it installed, and for these, the only easy easy way to make the enumerations in the documentation available for Python is to parse the pdb blurb itself - it would be a feasible hack, but since we are moving forward anyway, I don't think it will be done.	8.0	id=709090%0D%0A	19	True	True	jehan	1
id=215406	REOPENED	evolution	Tasks	3.4.x (obsolete)	Other other	Low enhancement		2001-11-14 23:53 UTC by	Duncan Mak	2012-06-16 11:01 UTC (	4 users	Description of Problem:I was trying to see tasks I completed and I really couldn't figure out how.I had to ask Damon to find out that there's a 'Hide/Unhide' toggle in theTasks Setting dialog box. I think this could be improved.Wouldn't it be nice if views in Tasks is similar to the mailer? So that youdo create vFolders of tasks:ie.* Default view for Tasks is all tasks (ie. completed or not) and you canchange it to 'Incomplete task' (what we get with 1.0)* With categories, you could make vFolder views of tasks, ie. IncompleteAND Evolution, or Completed AND Homework, etc..I think this would be a pretty nice interface and consistent with Mailerbehavior.	Having associations between individual calendar and task folders is aduplicate bug, marking as such.*** This bug has been marked as a duplicate of***oops, wrong bug, reopeningApologies for any spam... cc'ing usability-maint on all Evolution usabilitybugs. Filter on EVO-USABILITY-SPAM to ignore.***has been marked as a duplicate of this bug. ***	4.0	id=761708	16	False	False	cooks.go.hungry	1
