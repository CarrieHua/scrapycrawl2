id=393416	REOPENED	MDT.MoDisco	Infrastructure	0.10.1	PC Windows XP	P2 enhancement	Fabien Giquel	2012-11-02 09:23 EDT by	Fabien Giquel	2016-05-23 05:08 EDT (	2 users	AbstractModelDiscoverer<T> class extends AbsractDiscoverer<t> class which implements IDiscoverer<T>.Declaring some IModelDiscoverer<t> interface for AbstractModelDiscoverer<T> class will enable interface/class separation on new subclasses of AbstractModelDiscoverer<T>.	The new interface has been commited into SVN.Createdcode contributionThe last commit has been canceled from SVN and is deferred until 0.11.0 SVN branch is seperated from 0.10.2.The contribution is now attached to the bug.Createdcode contributionEvolution needs to be committed again	4.0
id=442765	REOPENED	ECP	EMF Forms	unspecified	PC Windows 7	P1 normal	Johannes Faltermeier	2014-08-28 04:13 EDT by	Johannes Faltermeier	2016-04-07 09:04 EDT (	2 users	Currently only domain model references of Controls are resolved automatically by the framework. There should be a interface in the core model which marks velements if the have a domain model reference that needs to be resolved. (Or not to be resolved)	*** This bug has been marked as a duplicate of***We need a marker interface for elements which have a DMR.	2.0
id=471447	REOPENED	MDT.MoDisco	Main	0.13.0	All All	P2 enhancement	Gregoire Dupe	2015-06-30 09:59 EDT by	Thomas Cicognani	2015-09-01 09:14 EDT (	2 users	In the new MoDisco Browser it will be useful to have a customization which shows the number of instances by EClass (like the old Browser)	New Gerrit change created:Gerrit changewas merged to [master].Commit:New Gerrit change created:Gerrit changewas merged to [master].Commit:This bug can be marked as fixed.This customization must be added in the "drop down" shortcuts of the view 'Ecore Explorer'.New Gerrit change created:(In reply to Eclipse Genie from)This shortcut implementation pattern has changed. Then this contribution is obsolete. The new pattern implementation has been contributed via the.This bug can be marked as fixed.Doesn't work with "MoDisco SDK (Incubation) 1.0.0.201508171700".	9.0
id=192802	REOPENED	EMF Services	Transaction	unspecified	All Linux	P1 major	EMF Services Transaction inbox	2007-06-15 02:41 EDT by	Jose Alfredo Serrano	2017-02-24 15:20 EST (	2 users	I am manipulating two different resources with cross references. Bothresources are included in the same ResourceSet which is being used by aTransactionalEditingDomain.In my model, I have container references that are persisted. So that, when you load a resource that has a root element that is the cross-resource-contained child of some other, this root element is actually contained in a proxy.Resolving the proxy actually *removes* the contained element from it, whichlooks to the transaction API like a structural modification, even though itisn't really because this is a proxy.The Transaction API should be able to detect and handle this case.	I'm having trouble reproducing this scenario with EMF 2.3. In particular: - the eContainer() method does not cause notification of the containment change in the proxy container object at line 771 in BasicEObjectImpl (the eBasicRemoveFromContainer(null) call) - the proxy container doesn't have any adapters attached, including the TransactionChangeRecorder that would assert that the change is happening in a read/write transactionI expect that the first point is a consequence of the second. How are you managing to get the TransactionChangeRecorder attached to the proxy container?Resolving as works-for-me, because under normal circumstances it appears that container proxies should not be subject to the transaction protocol, just like any other cross-reference proxy.If it appears that there is a normal scenario in which the TransactionChangeRecorder will end up being attached to such a proxy, then please re-open this bug with a reproducible test case, and we can have another look.I'm also in a case of cross-resource-containement, and I have the same problem than alfredo.I have a "ComponentInstance" in a resource A which have reference on componentClass which are in a resource B. Those componentclasses are contained in a M2MProject which is in a resource C.(ComponentInstance in A, componentClass in B, M2MProject in C)So it's a case of cross-resource-containement.I paste a stacktrace of the code, which show that the resolution of the container of my ComponentClass(sourceComponentClass)which raises a notification which is considered by the ReadFilter as a modification.In fact, the readFilter checks if the reference is container but in my case, the reference is containement and so the readfilter will return false and the assertwriting will raise a "IllegalStateException : Cannot modify resource set without a write transaction"The stacktrace :----------------Thread [main] (Suspended) ==> RETURN FALSE <== EReferenceImpl.isContainer() line: 186 ReadFilter.matches(Notification) line: 90 TransactionChangeRecorder.appendNotification(Notification) line: 301 TransactionChangeRecorder.processObjectNotification(Notification) line: 284 TransactionChangeRecorder.notifyChanged(Notification) line: 240 M2MProjectImpl(BasicNotifierImpl).eNotify(Notification) line: 280 ENotificationImpl(NotificationImpl).dispatch() line: 1033 SourceComponentClassImpl(BasicEObjectImpl).eContainer() line: 776 CrossReferenceAdapter.getInverseReferences(EObject, boolean) line: 891 CrossReferenceAdapter(ECrossReferenceAdapter).getInverseReferences(EObject) line: 311 CrossReferenceAdapter.updateImportsAndExports(Resource, EObject, boolean) line: 300 CrossReferenceAdapter.selfAdapt(Notification) line: 107 CrossReferenceAdapter(ECrossReferenceAdapter).notifyChanged(Notification) line: 430 M2MResourceImpl(BasicNotifierImpl).eNotify(Notification) line: 280 M2MResourceImpl(ResourceImpl).load(InputStream, Map<?,?>) line: 1514 M2MResourceImpl(ResourceImpl).load(Map<?,?>) line: 1282 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).demandLoad(Resource) line: 255 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).demandLoadHelper(Resource) line: 270 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).getResource(URI, boolean) line: 397 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).getEObject(URI, boolean) line: 216 EcoreUtil.resolve(EObject, ResourceSet) line: 202 EcoreUtil.resolve(EObject, EObject) line: 262 ComponentInstanceImpl(BasicEObjectImpl).eResolveProxy(InternalEObject) line: 1475 ComponentInstanceImpl.getComponentClass() line: 280 .....reopening the bug wrta fix could be to check in ReadFilter if the reference is container or containement (line 77) :if ((feature instanceof EReference) && (((EReference) feature).isContainer() || (((EReference) feature).isContainment()))){ return true;}	5.0
id=472747	REOPENED	EMFT.facet	Main	1.0.0	All All	P2 enhancement	Gregoire Dupe	2015-07-15 11:12 EDT by	Gregoire Dupe	2015-08-21 12:36 EDT (	0 users	The customization loading dialog is not easily readable. It would be more readable is the flowing regex would be applied on labels.	The regex : s/(.*)\.(.*)/\2 \1/New Gerrit change created:Gerrit changewas merged to [master].Commit:This bug can be marked as fixed.Some example customization identifiers end with ".custom' or ".aggregate".Those customizations are displayed like "custom (org.eclipse...)" .Those example customizations have to be renamed.	5.0
id=497117	REOPENED	Papyrus	Others	2.0.0	All All	P2 normal	Christian W. Damus	2016-06-30 14:40 EDT by	Christian W. Damus	2016-07-12 00:04 EDT (	2 users	In very large RSA models, comprising dozens of fragments, that have profiles applied that are dynamically defined, the time taken in migrating stereotype applications to the corresponding Papyrus profiles increases by an order of magnitude when the Papyrus profile is statically defined as compared to when it is also dynamically defined.For example, in a particular customer's confidential model, the time taken to import stereotype applications in the dynamic-to-dynamic was about 12 seconds. Importing the same model in the dynamic-to-static case would take about 43 seconds, accounting for the entirety of the difference in the overall import performance.The re-application of the profile has considerably more work to do in finding Ecore-to-UML correspondences in the profile definitions in the case of a statically defined profile, so probably some caching of these look-ups will help performance.	It would appear that the fix forin UML2 solves this problem.I verified this with the latest UML2 fix installed, and the time for the dynamic-to-static case was reduced down from 43 to 22 seconds. I put this one into verified. If there are additional performance improvements that could be made, we can track those with other Bugzillas.I realized that apart from having the UML2 fix provided byapplied, I also had the draft Gerrit changeapplied. I have actually not tested the UML2 fix "on its own", so any impact from that Gerrit change alone is not fully known.Maybe we shall reopen this one, to make sure that this Gerrit change also is included, or shall we assume that we can abandon it? But then I guess that we (I?) should test the UML2 fix "on its own" before deciding that.(In reply to Peter Cigehn from)Indeed. I've prototyped changes in the UMLUtil that reduce the time to re-apply a profile to a simple small model of 57 resources by more than a factor of ten:.And it's not just re-applying profiles, but anything involving querying stereotype applications from statically generated profiles.(In reply to Christian W. Damus from)Actually, it turned out not to matter in the UML2 context whether the model was fragmented, so my proposed patch for UML2 on that bug just implements tests on a single resource. But the problem in RSA import is that stereotype repair is done on every resource separately, not just on the entire content tree from top down in one operation. The proposed cache mechanism in UML2 could be used to put a caching scope around the entire multi-resource repair step in the RSA import, which should help much.New Gerrit change created:	6.0
id=471597	REOPENED	MDT.MoDisco	Main	0.13.0	All All	P2 enhancement	Gregoire Dupe	2015-07-01 10:21 EDT by	Thomas Cicognani	2015-10-29 05:05 EDT (	2 users	In the new MoDisco Browser it will be useful to have a customization which shows the subclasses from an EClass (like the old Browser)	New Gerrit change created:This customization must be added in the "drop down" shortcuts of the view 'Ecore Explorer'.Gerrit changewas merged to [master].Commit:Still waiting to the shortcut before to mark as fixed.This shortcut implementation pattern has changed. Then this contribution is obsolete. The new pattern implementation has been contributed via the.Therefore, we decided to not add button shortcut in the toolbar for now.This bug can be marked as fixed.Doesn't work with "MoDisco SDK (Incubation) 1.0.0.201508171700".New Gerrit change created:Gerrit changewas merged to [master].Commit:	8.0
id=352312	REOPENED	MDT.MoDisco	Main	0.9.0	All All	P2 normal	Nicolas Bros	2011-07-18 04:16 EDT by	Nicolas Bros	2013-12-26 04:27 EST (	2 users	In, we have these 0.8 sections instead of 0.9 sections:QueryManager Version 0.8FacetManager Version 0.8SMM Version 0.8	I expect that this can be fixed for 0.1.1.Fixed in revision 4540.Still need to check after Hudson build.verified fixedWe still need to check inonce the maintenance version SR1 is released.	4.0
id=472041	REOPENED	MDT.MoDisco	Main	0.13.0	All All	P2 enhancement	Project Inbox	2015-07-07 06:24 EDT by	Thomas Cicognani	2015-09-01 09:16 EDT (	1 user	In the new MoDisco Browser it will be useful to have a customization which shows the number of instances by EClass (instances which are in the same Resource as the selection, like the old Browser)	New Gerrit change created:Gerrit changewas merged to [master].Commit:New Gerrit change created:This shortcut implementation pattern has changed. Then this contribution is obsolete. The new pattern implementation has been contributed via the.This bug can be marked as fixed.Doesn't work with "MoDisco SDK (Incubation) 1.0.0.201508171700".	5.0
id=462841	REOPENED	Acceleo	Core	3.5.0	PC Windows 7	P3 normal	Project Inbox	2015-03-23 08:37 EDT by	Wolfgang Grossinger	2016-08-10 13:47 EDT (	3 users	CreatedThe described Eclipse projectsI installed a new Luna 4.4.2 Release (J2EE) and Installed Papyrus and Acceleo. Then I created an new Project zpa-uml and there an UML-Profile (ZpsDbModel.profile) and a UML-Model (ZpsDbModel) that uses the profile. When I apply a template on that model. Then I created a second project for Acceleo 'zps-generation' and created a simple template 'generate.mtl' there. When I add some breakpoints to that template and debug it, the debugger never stops on that breakpoints.I added the according projects as an attachment.Greetings,Wolfgang	The debugguer is no longer functional in Luna and older version of Eclipse because of changes in the target platform that forced us to change the launching strategies.Hum... Rather than a wontfix, this is something we have to keep in mind for the next version.(In reply to Laurent Goubet from)It would be great if debugging can be revived. Once M2Ts get more complex, the need for debugging becomes significantly important. I would happily be a beta-tester for upcoming releases, so please let me know.	3.0
id=482850	REOPENED	ECP	EMF Forms	unspecified	PC Linux	P3 normal	Alexandra Buzila	2015-11-23 11:46 EST by	Alexandra Buzila	2016-06-10 04:27 EDT (	1 user	I don't have any exact steps top reproduce at the moment, but sometimes when selecting a category in the preview (with auto refresh ON), the detail pane keeps resizing infinitely... and only stops when hitting manual refresh.	This is actually a bug in RCPTT. We will link a the created bug id asap.Createdin RCPTT.*** This bug has been marked as a duplicate of***Createdviewmodel with group inside categoryI was able to reproduce the problem on Ubuntu 16.04 (not running from RCPTT) with the attached viewmodel.Open the viewmodel in the editor and then open the preview. The categorization will start resizing. Alternatively, focus the preview and then focus the editor. It should lead to the same result.This doesn't happen on Windows.Reopened, as the problem can be reproduced with the 1.9 release in the Mars2 Eclipse Modeling edition (running with gtk 2), on Ubuntu 16.04.	4.0
id=361755	REOPENED	Acceleo	Core	3.2	PC Windows Vista	P3 normal	Project Inbox	2011-10-23 10:49 EDT by	Ed Willink	2016-04-06 10:41 EDT (	1 user	In[let pOtherTypes : OrderedSet(Type) = pTypes - pUMLTypes - pTypesTypes - pExpressionsTypes]where the inputs are all OrderedSets there is no diagnosis of the problem assigning a Set to an OrderedSet; just a silent non-execution of the invalid let.	An Acceleo "let" block has the meaning of a Java "instanceof" operator. In the current case, the "let" is just not executed since the types don't correspond when checked at runtime.The report was about a missing diagnosis not an incorrect functionality.It is customary for tools to give warnings about dead code. This is a case for just such a warning.	2.0
id=395300	REOPENED	Acceleo	Core	unspecified	PC Windows 7	P3 enhancement	Project Inbox	2012-11-28 10:28 EST by	Toni Siljamaki	2016-04-19 03:30 EDT (	3 users	CreatedReproducible test case.While googling on the subject one can find at different placeswhere you say "yes, you can use multiple metamodels".But... What's the point having this "possibility" if you can notpopulate all metamodels with source models before thetransformation begins?In this case, to not be able to load also a marking model before thetransformation begin is a serious drawback, because duringthe transformation we like to make queries to the marking model.The problem is the same in Indigo and Juno versions.Attached is a ws with backup projects and a ppt slide showing the problem.1) import the Acceleo_Transform project2) import the Papyrus_PIM_Model projectThe is also a directory with plugins you can use if you like tohave a look at the sample marking model. (My.uml_markingmodel)	Hi,Acceleo supports multiple input meta-model because during your generation, you may have to manipulate multiple models. Yet Acceleo takes as the entry point only one model because you are always starting from one place. The APIs of the Java launcher let you change this if you want to generate the code with multiple models but it will ultimately be multiple generations on one model each time.Let's consider the following use case with 6 different meta-models (which is a real use case from the Ariadne project):All the meta-models are extending concepts from the "core" meta-model and the organization meta-model is referencing the other four meta-models. In my Acceleo generator, I should use the 4 meta-model but in my launch configuration, I will only launch the generation on the "organization" model because I can navigate from this (meta-)model to the other (meta-)models.In your case, your "marking" model is referencing your UML model and as such it is your root. It should be the input of the generation, from it, you can navigate to your UML model. It is the basic behavior of EMF, if you load the UML model (in a good old EMF editor) you have the UML model but you don't have any possible way to reach the marking model, if you load the marking model (still in a good old EMF editor) and if you navigate on its elements, the UML model will be loaded by EMF.This limit could be lifted with the use of the logical models (not model as in EMF model, it's just the name of an API of the Eclipse platform). The EMF Compare team (from Obeo) is working on this feature for Ericsson (thanks to the industrial working group). It is a complex feature but once my colleagues will be done with it, we will be able to integrate it in Acceleo too and it would solve this problem (but you would still have only one model as the input, here your UML model), in the mean time, your marking model should be your input model.Regards,Stephane Begaudeau, ObeoHi again.Hmmm...This Bugzilla was closed as "resolved" without being fixed.I guess the problem have not been fully realized.And...I was at the f2f workshop Nov-2012 where Obeo demo'ed the EMF Compare,but I can not see the connection points to this WoW issue.The linked-metamodel-example you describe have some vague connection pointsto the WoW with marking models in this Bugzilla, but at the same time itis something completely different. In your case you have designed thelinked-metamodel set and defined a metamodel population population policyallowing you to load only the "organization" model and then navigate tothe other models, a population automated by tooling, I guess.But...If your "organization" model is _empty_ you cannot navigate anywhere!That's the whole point, which also is one reason why the marking modelcannot be regarded as the input source model, and the marking metamodelcannot be regarded as the root metamodel.There are several reasons & scenarios why this cannot be so.In the MDA PIM-PSM-MarkingModel WoW the PIM model is the source/rootto be input to the transform = the model to be transformed.The MarkingMetamodel is linked to the PIM metamodel (UML, DSL, whatever)and only provides a possibility to define marks for the PIM model.We can also translate the PIM model without any marks at all.When marks are defined for selected element in the PIM model,the Marking Metamodel gets populated by these marks, which are linkedto the marked objects in the PIM model. The marks themselves get storedas a seperate model in its separate model file.We can also apply different marking models to the same PIM model,allowing users to easily generate & evaluate different implementationsof the same PIM model, where one alternaive is to generate a defaultimplementation without having any marks at all, and another alternativeis to mark each object of a certain class to run on a separate core in runtime.Then we can apply a marking set allowing for translating the PIM modelinto code for a completely different SW/HW platform.So...The PIM Application model is the source input model to be transformedinto code, where some PIM model object _may_ have marks applied to them.To find out, the transform simply queries the marking model.NOTE:Loading multiple models for populating multiple metamodels worksjust fine in QVTO, for instance, and should work also in Acceleo.I regard not being able to load multiple models in Acceleo as a bug.(a thinking flaw, to start with)Regards/Toni<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<If your "organization" model is _empty_ you cannot navigate anywhere!<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<Yes but this "organization" model is the root of my data, if it's empty then there is nothing to navigate to. We always had generation with one root model or multiple generations.<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<That's the whole point, which also is one reason why the marking modelcannot be regarded as the input source model, and the marking metamodelcannot be regarded as the root metamodel.There are several reasons & scenarios why this cannot be so.<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<I understand your problem, currently you could solve this issue programmatically by loading your models or by creating a root metamodel and a root model as Acceleo has been created with a generation on one model in mind. In order to realize this feature request, we would have to change a couple of key points in the launch of the generation. We will see if we change the current behavior.<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<Yes but this "organization" model is the root of my data, ...<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<I believe I understand the origin of this "supermodel" idea, since other usershave asked for "load multiple models in acceleo". (just Googled on it)But it is still a workaround for the fact that one can specify multipleinput models, defined by the same or different metamodels, but only specifya single model to load in Acceleo tranform configurations.In QVTO, for instance, one can speficy an arbitrary number of input models,and then, in the QVTO transform configuration specify exactly which modelsto load and where to find them. (see attached .jpg)This is a feature enhancement request useful also for other users.Regards/ToniCreatedQVTO transf config example***has been marked as a duplicate of this bug. ***	6.0
id=416928	REOPENED	Acceleo	Core	3.5.0	PC All	P3 major	Project Inbox	2013-09-10 09:55 EDT by	Ansgar Radermacher	2014-04-25 04:07 EDT (	5 users	Since the transition from Acceleo 3.2 to Acceleo 3.4, all of my Acceleo files stopped working. I get an error that the meta-classes of the passed element and that expected by the template are incompatible. However, the types are well compatible or even identical. A further analysis showed that two different instances of the meta-model are charged, the one belonging to the passed element and the other belonging to the template.The error is probably a bit specific to my use case: the Acceleo engine is directly called by passing a UML model element from a Papyrus editor to it, i.e. the model is not charged via Acceleo.I tracked down the error to the following difference: the compiled EMTL files reference the UML2 plugin via a platform:/plugin URIplatform:/plugin/org.eclipse.uml2.uml/model/UML.ecorewhereas the URI specified in the template is wellIf I replace all URIs in the compiled code Acceleo works again (for me).A strange thing: if I specify an older version in the template, e.g. .../uml2/3.0.0/UML, the compiled EMTL contains the correct uml2/4.0.0/UML version instead of the platform:/plugin URI.	Hi,We have modified the way URI's should be resolved in a very specific use case which may be the source of your trouble. Does this problem appear with any UML based Acceleo generator?Stephane Begaudeau, ObeoThe problem occurs with all mtl files that useas meta-modelIt happens with all UML files that I tried (when loaded into a Papyrus resource set)Stephane,could you reproduce the problem? We can produce it on multiple machine here.steps to reproduce:Declare a module starting with[module TestModule(']The EMTL compiler changes the MM URI to platform:/plugin/org.eclipse.uml2.uml/model/UML.ecoreThe problem can be reproduced, if an MTL file uses a profile that has been done for another UML version. In my case, the C++ profile was still a UML 2.4 profile whereas UML was already at 2.5.After profile migration, the problem went away.Thus, Acceleo seems to use a path to the plugin instead of the URI, if two different UML URIs are used (e.g.for UML andindirectly by the profile).Good to know finally, what caused the problem - since we can now avoid it. Not sure, if it is not a bug.Glad to know that you found where the problem was coming from, I'm closing this issue then.Ok to close, but the current Acceleo behavior is not helpful, since it *silently* makes a choice for the URI that causes the mentionned problem of incompatible arguments.Thus, I would prefer that Acceleo tells the user that there is a problem (different meta-model of profile and main meta-model), e.g. by means of a warning in the module header of an MTL file.(In reply to Ansgar Radermacher from)Acceleo does not make a choice here, it asks EMF for the metamodel matching a specific NsURI and then it saves the emtl file referencing the metamodel. EMF then takes care of the serialization.If the metamodel has been loaded in EMF with a platform:/plugin URI instead of the usual mechanism, EMF does not care, it supports it. We are just asking for the metamodel matching the NsURI declared at the top of the mtl file. If EMF gives us our metamodel, we are happy and then we ask EMF to save the emtl model. We are not loading the metamodel manually from the plugin with a platform:/plugin URI. If the UML metamodel is incorrectly referenced/resolved in an UML profile, we will use what is registered.Acceleo is generic, it does not know what UML profiles are and you could have an odd metamodel URI for your use case and it could work without issues.I don't understand why this is CLOSED INVALID.Perhaps it is CLOSED DUPLICATE 360926.Because Acceleo tooling operates in both Equinox and standalone domains and passes URISs between them, it must use a form of URI passing/resolution that is compatible in both domains.The EcorePlugin.ExtensionProcessor can probably do this now. The OCL StandaloneProjectMap does this and can go further by actively combating/diagnosing metamodel schizophrenia.For the specific case ofthe nsURI means the registered i.e. compiled Java metamodel, and since Eclipse UML2 only supports one compiled UML metamodel all legacy UML nsURIs are mapped to the one UMLPackageImpl and so should beend up normalized toin all xmi:id references.For the specific case ofplatform:/plugin/org.eclipse.uml2.uml/model/UML.ecorethere is again only one version available but it is logically a different model to the compiled Java model even though the compiled Java model loads its content from UML.ecore as a consequence of initialize-by-loading being set true in the genmodel.Profiles extend UML.modetamodel.uml which israther thanand so we have the uncomfortable situation that the UML meta-level has a different nsURI to the model's tooled metalevel. The Eclipse UML2 API seems to do a good job of correctly converting between the meta-namespaces so that users are unaware of the specification/implementation distinction. This is potentially very dangerous and very easily undermined by careless conversions, such as one that I'm currently fixing in the Eclipse OCL pivot support.Getting this right requires absolutely precise URI resolution without any helpful heuristics.(In reply to Ed Willink from)Is there a bug for this problem? I ask because I'm currently having problems where a comparison within OCL fails apparently because there are two instances of a model loaded. I'm still trying to work out what is happening, but if there is a reference for what you are currently looking at I could see if it is related.(In reply to Ed Willink from)Looks like you have a better understanding of what is going on than us in the case of profiles and UML.ecore, we would definitely welcome any patch and assist to get it in.	11.0
id=140178	REOPENED	GMF-Runtime	General	1.0	PC Windows XP	P3 normal	Anthony Hunter	2006-05-04 11:16 EDT by	Mohammed Mostafa	2010-07-19 21:59 EDT (	1 user	The fact that the Element EStructural Feature had its ResolveProxies flag set to true means that no clients should ever need to call resolve semantic element, because if getElement returns a proxy this means it is irresolvable and trying to resolve it again will be just a waste of time cause it will fail again.This will have a bad impact on performance when the semantic element of the view is irresolvable.	re-assigne to Yaser based on his requestre-assigne back to Mohammed based on his request.moving to 2.0Moving to the next release, GMF 2.1.Closed based on Yaser's work at the end of the 1.0 release.This had not been resolved; the issue is still there[GMF Restructure]: product GMF and componentRuntime was the original product and component for this bug	7.0
id=146280	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P3 normal	Anthony Hunter	2006-06-09 11:45 EDT by	Pratik Shah	2010-07-19 21:58 EDT (	2 users	Using 1.0RC4All other fields in DiagramFileInfo's superclass are public, but fListener is package-protected. Can it be exposed in RC5?	The scenario is that we have editors that load multiple files. Hence, when an editor for a particular file is closed, we don't want to unload the corresponding resource. So, I need to override FileDiagramDocumentProvider#disposeElementInfo() and do everything that the superclasses do, except for unloading the diagram.Can it wait until version 1.0.1?What would prevent this from being fixed in RC5? It doesn't involve any risk or break any API.This is breaking a basic scenario for us, so I have to fix this. Not disposing the element info (ie, doing nothing in disposeElementInfo()) when an editor is closed causes problems because (1) the listener is still active (which causes NPEs when it is invoked) and (2) certain resources hang around in memory.If you can't fix this in RC5, I'd have to work around this problem by using a custom FileInfo that copies the code of DiagramFileInfo. That's doable, but not preferrable.Ok.. we'll explore what the api impact is first.Is subclassing an option here?Could you not cache the listener locally in your FileDiagramDocumentProvider subclass when you call createFileInfo and then use your local variable when overriding FileDiagramDocumentProvider#disposeElementInfo() ?Workaround is acceptable for now. Retargetting for 1.0.1...I will add a getDiagramModificationListener() method to DiagramFileInfo, assuming you still need this change in 1.0.1?Marking as RESOLVED REMIND, the submitter to re-open once they have provided required infoReopening.Anthony, solution mentioned inis fine. FYI, there are no getter methods for other such fields in FileInfo: they're all just public fields (see superclasses).Moving to the next release, GMF 2.1.[GMF Restructure]: product GMF and componentRuntime was the original product and component for this bug	12.0
id=441058	REOPENED	GMF-Runtime	General	1.8.0	PC Windows 7	P3 normal	Anthony Hunter	2014-08-04 05:16 EDT by	Manoj Paul	2015-04-08 05:12 EDT (	3 users	CreatedMindMap DiagramI used the GMF MindMap sample to create the issue. Here is how you an reproduce it.1. Create a MindMap Diagram2 Create a Topic3. Create a two Threads in the Topic4. Connect them with multiple connectors5. Ensure that the routing style is set to rectilinear for both the connectors6. Format the connector straight and parallel to each other7. Move one of the Threads to left or right using mouseExpected result: The two connector formatting does not change and moves as one of the source/target element is movedActual Result: The formatting gets lost as one of the connectors gets bend etc.	CreatedJPEG FileThere is no such eclipse project GMP anymore.Please reopen if your bug if it is still important and assign to one of the four products in Bugzilla:Classification: ModelingProduct: GMF-Notation, GMF-Runtime, Graphiti, GMF-ToolingThis is still an important issue to the customer. Reopening the bug and assigned it to GMF-tooling project.I am able to recreate this. The start and end point of the connectors remains same. So if either source/target is moved, the only way to maintain this in "rectangular style routing" is that the connector should bend at right angles ( as in the image already attached). This looks intended.With "Oblique Style Routing", the connector ends points will be just connected by straight lines ( without bends).I am not sure if this is the exact scenario. With step 6, I understand it means that the source/target should be parallel to each each or is there some other sort of formatting?The expected behavior from the customer is that when you move source or target, the format of the connecting lines should not change. The end point of the connectors should change so that the connectors remain in the same position irrespective of you move the source or target until the connectors reach the edge of the source/target and bending of the connectors is expected then. It should not create bend points if the source/target are moved within the edge limit of the other. Here what we see is that bend point is created for one line whereas for the other connector the end point gets moved. This results in clutter when you move an object in an already formatted diagram. The desired behavior is seen for free form element but not for elements contained in some other elements.As discussed with Manoj, there are lot of different issues in formatting. If the scope of the problem is reduced to just bending of flow connectors, I can have a look.As I understand from the customer that they want a uniform behavior as to how the connectors are rearranged when they try to move the source or target end of connectors. Currently it is creating overlapping connectors if users moves source or target. If bending of connectors is uniform across all kind of movements of source and target, it should be ok.Manoj, I think I have implemented the required improvements (or subset of) as an extension of GMF Runtime for Papyrus as part ofThe contribution is available for Kepler only, and fixes the set of requirements like: - avoid moving the bend points (except one) upon moving the anchors- avoid moving of the link labels upon changing of the anchors or bendpoints- avoid moving the anchors on moving the end nodes, including the rectilinear routing (this one looks exactly like what you are looking for in this bugzilla)- enables snap-to-grid for implicit bendpoints introduced by switching to rectilinear routing The whole set of changes for that are available in the branch "bugs/luna/anchors" of Papyrus atThe main set of the changes related to GMF Runtime is under(all classes are new here)The contributions contains a lot of the code copy-pasted from GMF Runtime, e.g here:where the only purpose of the copy-pasted class is to allow sub-classes to override some private methods from GMF Runtime. The contributions is trying to avoid changes in the GMF Notations, also the addition of the few classes into the GMF Notation would simplify and cleanup the code SIGNIFICANTLY (i.p: addition of the gmfnotation.AbsoluteBendpoint and related classes would allow to remove the actually used "magic number" convention from)The code had been written with the aim to be either directly promoted to GMF Runtime, or to be clean up to standard Eclipse quality, provided relatively small set of private-to-protected changes in the GMF Runtime.If you are interested, please feel free to contact me to discuss your requirements, how do they fit into what had been implemented, etc	8.0
id=408775	REOPENED	Amalgam	Releng	unspecified	PC Windows 7	P3 normal	Project Inbox	2013-05-23 02:30 EDT by	Benoit Langlois	2014-08-05 11:42 EDT (	2 users	Hello Cédric,EGF is already declared in Amalgam for Helios, Indigo and Juno. Can you add EGF for Kepler?The general syntax is:release name]/officialThank you,Benoît	It has not been removed and has been there so far during all the Kepler release cycle.Is there something which does not work ?The point is the management of specific EGF download per Eclipse version.=> EGF1.1.0 for Helios, EGF1.1.0 for Indigo, EGF1.1.0 for Juno, and EGF1.1.0 for Kepler.Right now, not doing any change I have :Kepler discovery catalog :Juno discovery catalog:Indigo discovery catalog:Helios discovery catalog :Is that correct ?Yep, exactly !Closing it then.Thanks,BenoîtHi,The version of EGF for Luna must be declared in Amalgam.Here is the list of all the EGF versions in Amalgam:Luna discovery catalog :Kepler discovery catalog :Juno discovery catalog:Indigo discovery catalog:Helios discovery catalog :Thank you,Benoit	7.0
id=484232	REOPENED	Amalgam	UI	unspecified	PC Windows XP	P3 normal	Project Inbox	2015-12-11 11:59 EST by	Faycal Abka	2016-01-18 08:40 EST (	0 users	Activity Explorer editor opens when there no contributions or all contributions are all deactivated	*** This bug has been marked as a duplicate of***Not Duplicated.	2.0
id=365405	REOPENED	Papyrus	Core	0.8.1	All All	P3 normal	Ansgar Radermacher	2011-12-02 05:19 EST by	Arthur Daussy	2013-06-12 16:36 EDT (	2 users	The following actions from the figure should be available for behaviours (entry,exit and do) on states: -> Be selectable -> Be navigable -> Be deletable (visually) -> Be draggable	In order to do this a refactoring has to been made on the state element. Behaviours ( entry,do and exit) will have their own EditPart. It allow them to have all the requested behaviours (selectable etc..).Committed on the branch 0.8.X.Not reported on trunk yet (no builds available)New solution committed committed on the 0.8.X branch.This solution use trigger on the transaction editing domain without registering MDP Papyrus transactionnal editing domain into EMF regitry. See relatedfor more explanation.Committed on trunk (and branch).There is one know bug concerning this feature which has been describe there in the. Will be corrected soon.Do, Entry and Exit behavior can now be selected as separated component. Which means they can be: -> Used for navigation EditPolicy. -> Hidden -> Dragged and Dropped -> Etc...CreatedModel in which the bug can be doneThe state figure should a an internal activity compartment (specify UML 2.4).	6.0
id=445610	REOPENED	Papyrus	Diagram	unspecified	All All	P3 normal	Ansgar Radermacher	2014-10-01 04:46 EDT by	Ansgar Radermacher	2016-02-22 10:33 EST (	1 user	Context: composite structure diagram containing a composite with some parts and existing connections.Now add a port to one of the parts. If you try to redirect an existing connector, Papyrus refuses to target a port while you can target the port with a new connector.	Fixed with commit e462249db8420855d62221139ffd00c7c6b49bfe for the 1.0-maintenance branch and 663d4f3ba9b2da4427fcc639771ad5941a2ac044 for the master.This error (or at least a variant thereof) is reproducible with current master for neon: once a delegation connector has been created between a port and an inner part, it is not possible to redirect the connector to a port of the part.An NPE is happening during editing.Stack:java.lang.NullPointerException at org.eclipse.papyrus.uml.service.types.command.ConnectorReorientSemanticCommand.deduceParentConnector(ConnectorReorientSemanticCommand.java:278) at org.eclipse.papyrus.uml.service.types.command.ConnectorReorientSemanticCommand.canReorient(ConnectorReorientSemanticCommand.java:161) at org.eclipse.papyrus.uml.service.types.command.ConnectorReorientSemanticCommand.canExecute(ConnectorReorientSemanticCommand.java:130) at org.eclipse.papyrus.infra.elementtypesconfigurations.notification.AbstractNotifierEditHelper.getEditCommand(AbstractNotifierEditHelper.java:128) at org.eclipse.papyrus.infra.elementtypesconfigurations.notification.AbstractNotifierEditHelper.getEditCommand(AbstractNotifierEditHelper.java:65) at org.eclipse.gmf.runtime.emf.type.core.MetamodelType.getEditCommand(MetamodelType.java:107) at org.eclipse.papyrus.infra.services.edit.internal.ElementEditService.getEditCommand(ElementEditService.java:85) at org.eclipse.papyrus.infra.gmfdiag.common.editpolicies.DefaultSemanticEditPolicy.getReorientRelationshipCommand(DefaultSemanticEditPolicy.java:181) at org.eclipse.papyrus.infra.gmfdiag.common.editpolicies.DefaultSemanticEditPolicy.getSemanticCommandSwitch(DefaultSemanticEditPolicy.java:105) at org.eclipse.papyrus.infra.gmfdiag.common.editpolicies.DefaultSemanticEditPolicy.getSemanticCommand(DefaultSemanticEditPolicy.java:76) at org.eclipse.gmf.runtime.diagram.ui.editpolicies.SemanticEditPolicy.getReorientRelationshipTargetCommand(SemanticEditPolicy.java:339) at org.eclipse.gmf.runtime.diagram.ui.editpolicies.SemanticEditPolicy.getCommand(SemanticEditPolicy.java:87) at org.eclipse.papyrus.infra.gmfdiag.common.editpolicies.DefaultSemanticEditPolicy.getCommand(DefaultSemanticEditPolicy.java:70) at org.eclipse.gef.editparts.AbstractEditPart.getCommand(AbstractEditPart.java:502) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.access$1(GraphicalEditPart.java:1) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart$1.run(GraphicalEditPart.java:482) at org.eclipse.papyrus.infra.emf.readonly.PapyrusROTransactionalEditingDomain.runExclusive(PapyrusROTransactionalEditingDomain.java:271) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.getCommand(GraphicalEditPart.java:477) at org.eclipse.gef.tools.TargetingTool.getCommand(TargetingTool.java:123)	3.0
id=486116	REOPENED	Epsilon	Core	unspecified	PC Windows 7	P3 enhancement	Horacio Hoyos	2016-01-19 09:56 EST by	Horacio Hoyos	2016-01-19 11:04 EST (	1 user	By providing methods (i.e. factory methods) to create this listeners, extending configuraons tabs can easily provide tailored listeners.	Fixed on hhoyos/846116 commit 28a24d557ae97e816f9aa1e40a3867bf2430944fAdditionally, it might be also helpfull to provide a diferent ModelTypeSelectionDialog, so provided a factory method for that class too.Other classs might need similar changes for current idea in progress. Moving all changes to hhoyos/emg and will add other classes that need better extension support	3.0
id=401886	REOPENED	Papyrus	Moka	unspecified	PC Windows 7	P3 normal	Arnaud Cuccuru	2013-02-27 07:08 EST by	Arnaud Cuccuru	2015-11-24 09:54 EST (	5 users	OpaqueBehaviorExecution shall be implemented for opaque behaviors defined in the Alf library.	Fixed in Revision 10312. Extension point oep.moka.fuml.services added in oep.moka.fuml. Relies on interface IServicesRegistry interface.(In reply to)This comment does not concern this task...	2.0
id=354622	REOPENED	Papyrus	Core	0.8.1	PC Windows XP	P3 normal	Arthur Daussy	2011-08-12 09:58 EDT by	David Rabely	2013-10-10 08:07 EDT (	5 users	Build Identifier: I20110613-1736When you select a modelized object Flow, it is difficult to reach the name or to select it in the graphical view of a diagramm. In order to manage it, you must move the link of the object flow.Reproducible: Always	This bug has been identified as a GMF bug see:*** This bug has been marked as a duplicate of***As GMF communality didn't react on this topic. This bug will be corrected locally.The correction will be use Extended class of WrappringLabel and to overide the method as follow: @Override public boolean containsPoint(int x, int y) { if (isVisible()){ return super.containsPoint(x, y); } return false; }Correction has been committed on the trunk.Waiting to backport on the Trunk.(In reply to)On which revision was the fix committed? I'm currently experiencing this bug, and I'm running the 0.9.0.v201206140824 nightly.(In reply to)The SVN history shows that a few commits have been done for this on the 0.8.x branch. Are there any plans to bring these to trunk in the near future?Hi Antonio, We are currently backporting all those feature on the trunk. But we are facing some problems due to changes in the meta model. We hope backporting it before the end of the month.Regards,CreatedPatch which fixes the issue on top of trunk (SVN rev 8363)Thanks for the feedback! I was in a bit of a hurry, so I went ahead and made a patch using your above instructions :-). It was easier than I thought, as mostly all Papyrus edit parts seem to use the SimpleLabel subclass of WrappingLabel.Has this one been fixed = to be closed?	8.0
id=367896	REOPENED	Papyrus	Diagram	0.8.1	PC Windows XP	P3 enhancement	Arthur Daussy	2012-01-04 16:56 EST by	Raphael Faudou	2015-10-30 07:15 EDT (	4 users	 	Please reopen with a description if this is still an issueNot a bug, but rather an enhancement. This is alternate notation for pin and makes diagrams easier to read and to edit.Changed status (re open) and importance (enhancement)Hi,The title is not really explicit. Please provide a description and/or reference to the description in the specificationin UML 2.5 it is described in fig 16:The situation in which the OutputPin of one Action is connected to the InputPin of the same name in another Action via an ObjectFlow may be shown by the optional notations of Figure 16.6. The standalone Pin in the notation maps to an OutputPin and an InputPin and one ObjectFlow edge between them in the underlying model. This form should be avoided if the Pins are not of464the same type. Multiple arrows coming out of a standalone Pin rectangle is an optional notation for multiple edges coming out of an OutputPin. (See other ObjectFlow and Pin notations in sub clause 15.2. The specific notational variant used shall be preserved when the diagram is interchanged, see Annex B.)Figure 16.6 Standalone Pin notations	4.0
id=506354	REOPENED	Viatra	Query	unspecified	PC All	P3 normal	Gabor Bergmann	2016-10-21 11:08 EDT by	Gabor Bergmann	2017-02-27 14:12 EST (	1 user	In many cases, it would probably make more sense to experiment with eliminating result caching in with check / eval Rete nodes, as opposed to implementing even more caching.There could be a separate indicator (annotation or hint) to apply on exceptional evaluations that are very costly (e.g. difficult string operations?) and should be cached.	New Gerrit change created:Gerrit changewas merged to [master].Commit:Evaluator nodes are now non-caching by default. This might save some memory. A Rete hint has been introduced to override this default at planning time.Future work: expression-specific intelligence?Future work: query planning for better caching (in case caching is needed).As this has caused performance regressions, please change the default behavior back as it was before.New Gerrit change created:Gerrit changewas merged to [master].Commit:	6.0
id=357682	REOPENED	Papyrus	Core	0.8.1	PC Windows XP	P3 normal	Arthur Daussy	2011-09-14 16:22 EDT by	Raphael Faudou	2011-10-02 07:48 EDT (	4 users	When creating a control flow between two actions, weight and guard properties are not set. As they are mandatory, the model is not valid.Guard should be created with default value = trueWeight should be created with default value = 0By default, those two labels should not be visible.	CreatedAdd true as Default Value to the Guard and 0 as Default value to The Weith of a control flowI, Anass Radouani, have written 100% of the code contributed to fix this bug.I have the right to contribute this code and have filled the headers with theappropriate License.This contribution has been checked by and committed under the responsability ofTristan FAURE.commited on branch & trunkWorks but visibility has not been managed.By default we do not want to see :* weight which is very rarely used.* control flow name as it does not provide any semantics (semantics are given by the arrow itself as a sequence between two actions)* guard. It is usefull to see but generally most control flow will not have guard. So guard will be made visible by end user with label connector management.note: recent work might have introduced a regression on validation.	3.0
id=413600	REOPENED	Papyrus	Core	0.10.0	All All	P3 normal	Camille Letavernier	2013-07-24 03:55 EDT by	Klaas Gadeyne	2015-01-26 13:57 EST (	1 user	CreatedIllustrates the problem[Kepler release]Consider the model in attach. Trying to edit Constraint2 with the embedded results in a parsing error.(This might be an OCL problem, but I guess it also might be related toand therefor a Papyrus problem?)	I cannot reproduce this anymore on the latest papyrus/ocl nightly build of luna, so this seems to be fixed for the 1.0 series.SysML registered multiple URIs for a single model. This was only fixed recently for OCL..Hi Ed,(In reply to Ed Willink from)On a second view, the situation has improved, but the original problem is not yet fully solved. When validating the model in the attachment, you get[quote]Error "Parsing error for SysMLmodel::Block1::Constraint2::self.SysMLPrimitive < 10.0:The 'SysMLmodel::Block1' constraint is invalid: 'self.SysMLPrimitive < 10.0'1: Unresolved Operation 'SysMLPrimitiveTypes::Real::<(Real)'"[/quote]I'm guessing some additional mapping will be necessary to match (certain) SysML primitive types onto the OCL pivot types?Revisiting.Both Luna OCL nearly 5.0.4 and Mars OCL nearly 6.0.0M5 fail to load with a duplicate nested package.(In reply to Klaas Gadeyne from)No. Just a correct declaration. See.(In reply to Ed Willink from)Problem is; missing original name EAnnotations.For Mars, we can trust URIs of nested packages more than their names and so not-care about the inconsistent names. I don't feel inclined to backport this to Luna unless Papyrus fixes.With the URIs fixed, two Package Constraints fail to convert to Pivot. Missing Package Constraint support added for Mars. Again not backported in the absence of afix.	5.0
id=353849	REOPENED	EMF	cdo.core	4.6	All All	P3 normal	Caspar D.	2011-08-04 02:38 EDT by	Eike Stepper	2016-07-31 00:57 EDT (	0 users	Cloned from: 353303: RWOLockManager.unlock(CONTEXT) gives ConcurrentModExUnlocking all locks for a given context, i.e. calling RWOLockManager.unlock(CONTEXT context), causes ConcurrendModEx,due to the removal of lockStates while the set of lockStatesfor a given context is being iterated over. (The actualremoval happens in #removeLockFromContext.)No test case was ever written for this scenario. Not sure ifthe old RWLockManager did it right. Doesn't matter now, willprovide a fix + testcase for the RWOLockManager momentarily.	Fixed as part of.Sorry - not fixed in 4.0 yet!Moving all open bug reports to 4.1 because the release is very near and it's hghly unlikely that there will be spare time to address 4.0 problems.Please make sure that your patches can be applied against the master branch and that your problem is not already fixed there!!!Moving all open issues to 4.2. Open bugs can be ported to 4.1 maintenance after they've been fixed in master.We'll try to address open problems in 4.3 (master) first and then port fixes back to 4.2.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	7.0
id=232892	REOPENED	GMF-Tooling	Core	2.1	PC Linux-GTK	P3 minor	Project Inbox	2008-05-19 23:17 EDT by	CDE Administration	2010-07-19 12:17 EDT (	4 users	<response_by> Eriko Takahashi at 2008.05.19.16.24.25 </response_by>OS: LinuxBuild date: 0518Component/Functoin name:WTPBlocking:NOLanguage: JapaneseTester Name: Eriko TakahashiTestcase: 3.003290Steps to recreate the problem:1. Window->Show View->Other...->General->Snippets2. Select New->New Category.3. Then Select New->New Item.4. Select Unnamed Category in the left pane.5. Select the Custom: radio button in the right pane.6. Then press the Browse... button.Problem description:In the Content Type Selection panel, many strings are shown in English. For example,- Assembly Source File- Binary File- Shared Library- Static Libraryetc ...I checked my files, and they seem to be translated in files,eclipse\plugins\org.eclipse.cdt.core\plugin.propertieseclipse\plugins\org.eclipse.cdt.managedbuilder.core\plugin.propertiesetc.Please investigate.Thank you.Eriko Takahashi<response_by> John Ryding at 2008.05.19.22.06.32 </response_by>This article was reassigned from Category:''TVT/Testing,Inbox''.<response_by> John Ryding at 2008.05.19.22.06.48 </response_by>changed to working	Created3.003290.gif<cde:tctdetail>Testcase: 3.003290Project: WSW34Component: Xfer - CDT/cdt-corePriority: 3Subject: JA: English strings in Content Type Selection panelArticle ID: 414Originator:</cde:tctdetail>This bug has been fixed for us in a later build of Eclipse.<response_by> YoungSun Ko at 2008.05.23.09.56.32 </response_by>Same for Korean.Thanks,YoungsunCreatedTCT414_3.003290_kor.gifThis bug has been fixed.<response_by> Sylvia Lo at 2008.05.28.14.10.58 </response_by>Hi,report documentGMFGen fileGMFGraph fileare still in English on build 0527CreatedTCT#414-.003290-_Eng_string1.gifCreatedTCT#414-.003290-_Eng_string.gifReassigning to GMF. Please see the latest screen shots attached.*** This bug has been marked as a duplicate of***<cde:tctdetail>Testcase: 3.003290Project: WSW34Component: Xfer - GMF/UIPriority: 3Subject: JA: English strings in Content Type Selection panelArticle ID: 414Originator:</cde:tctdetail><response_by> Vivian Kong at 2008.05.29.09.05.01 </response_by>This article was reassigned from Category:''TVT/Testing,Xfer - CDT/cdt-core''.<response_by> Ruth Nestvold at 2008.06.03.10.01.58 </response_by>Most of these strings appear to be localized with build 0602, but there is still an Englich string "report document"Please see attached screen shot for details.Regards,Ruth Nestvold<response_by> Eriko Takahashi at 2008.06.03.10.04.34 </response_by>Hi"report document" is still not fixed with 0602 build.Please investigate.Thank you.Eriko TakahashiCreated414.jpg(In reply to)This string is not in GMF. Maybe BIRT?I would raise a new Bugzilla for this issue separate from GMF.<response_by> Eriko Takahashi at 2008.06.04.13.23.02 </response_by>HiI opened TCT 737 for report document.In the same panel, following strings are also in English:- GMFGen file- GMFGen file (GMF1.0)- GMFGen file (GMF 2.0)- GMFGraph file- GMF Graphfile (GMF1.0)Please investigate.CreatedTCT414.gif<response_by> Eriko Takahashi at 2008.06.10.10.42.23 </response_by>HiWith 0609 build, following strings are shown in English:- GMFGen file- GMFGen file (GMF1.0)- GMFGen file (GMF 2.0)- GMFGraph file- GMF Graphfile (GMF1.0)Please investigate.Eriko<response_by> YoungSun Ko at 2008.06.12.08.47.53 </response_by>Not fixed for Korean with 0611 build.Please investigate it.Thanks,Youngsun<response_by> Eriko Takahashi at 2008.06.13.09.37.10 </response_by>reopening<response_by> Matthew Mazaika at 2008.06.13.09.38.03 </response_by>This bug has been deferred. It will be considered for the 3.4.1 service pack.is it a dup of?[GMF Restructure]: product GMF and componentUI was the original product and component for this bug	22.0
id=471348	REOPENED	Papyrus	Diagram	1.1.0	All All	P3 major	Celine Janssens	2015-06-29 12:06 EDT by	Camille Letavernier	2016-10-20 09:29 EDT (	9 users	Today, the visibility of Stereotypes is serialized only if it is "false" (Hidden). While false is the "default default", it may happen that a Stylesheet overrides this (e.g. a stylesheet that hides all Blocks)In this case, when the user manually selects "visible = true", this will not be taken into account, because currently the Stereotype Display framework will consider that "true = default" and "default = false".User input should *always* be serialized and should *always* override any CSS InputSteps to reproduce:- Create some elements and apply some stereotypes. Stereotypes are displayed (OK)- Apply a stylesheet with:Label[type=StereotypeLabel]{ visible: false;}- Observe that stereotypes are now hidden (OK)- Select an element and manually change its stereotype visibility to "Visible = true". The stereotype is properly displayed (OK)- Close the model and reopen it. The Stereotype has disappeared, because "Visible = true" is not serialized-> User input shall always be serialized, even if it corresponds to the "default" value	That is, until "Default style" is pressedDuring my debug of "Default Style" command, I realized that the title of the Comment shape disappeared. This is due to the fact that the style : <styles xmi:type="notation:TitleStyle" xmi:id="_ifrX8R8vEeWsJe7ThIGk7A" showTitle="true"/>is reset as for all the other styles...then the value showTitle="true" is not stored anymore.How this behavior should be taken into account? As a normal behavior and the title of the comparment is reset ? Or this should be avoid by bypassing the reset for the Stereotype Comment?Any Suggestion?The Command ResetStyleCommand becomes a mess... :)Is "showTitle" customizable in this case?"Reset Style" removes all *user* customizations, and only user customizations should be serialized. Tool Defaults should be provided via CSS (So it's not serialized, and not reset)New Gerrit change created:Ok then I deleted the setShowTitle into the Node cration and add it into the umlBase.cssThen the ResetStyleCommand was'nt modified...donenot merged yetshould be reported to mars branch.New Gerrit change created:The modification has been developped on the Mars branch (Maintenance 1.1) :I reopen the bug since the 2 linked gerrit reviews are not merged (one is in merge conflict, the other is Verified -1 by Hudson)I reopen the bug since the 2 linked gerrit reviews are not merged (one is in merge conflict, the other is Verified -1 by Hudson)Gerrit changewas merged to [master].Commit:what is the status of this bug? I made a test with Papyrus Neon M6 followinguse case=> the bug is still present.Gerrit changewas merged to [streams/1.1-maintenance].Commit:The bug is still present in Neon M7.Can this one still go in the release train? Has some depending bugs.This bug seems still present in RC3.Still present in Neon 1.A user can't hide a stereotype compartment once for all.Reproduction scenario in #506281.Bug is major and affecting end-user in annoying way.	20.0
id=144993	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P3 enhancement	Cherie Revells	2006-06-01 18:22 EDT by	Maneesh	2006-06-07 10:39 EDT (	0 users	Layout Service schema isn't sufficient to delay load the plugins. There is no expression to specify the provides condition in the schema to specify condition for provides	Since we are past API freeze, we can add optional items to the schema and clients can make use of this.Instead of introducing complex schema to the layout providers extension point, clients can resolve this issue by putting their provider class in a package that will not cause their plugin to load. This is done by adding an entry like this to the MANIFEST.MF file:Eclipse-LazyStart: true; exceptions="org.eclipse.gmf.examples.runtime.diagram.logic.internal.providers"The advantages to this approach are:1) we do not need to bother with the complex schema in the layout provider schema2) it is alot easier for clients to write the above line than the complex schema required.I'm going to change this to an enhancement request because it is possible that the exception list will not be sufficient for some clients.[GMF Restructure]: product GMF and component Runtime Diagram was the original product and component for this bug	4.0
id=155610	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P3 normal	Cherie Revells	2006-08-29 19:05 EDT by	Hanna Farah	2010-07-19 21:57 EDT (	0 users	If I add a new port to a component in a class diagram, while the component's structure compartment is not visible, and external view is not visible, I should not see the port at all in the diagram's user interface. However, the port gets into edit mode so I can change its name if I want to, and then it disappears.Check AbstractPopupbarTool, selectAddedObject(...) method.	Check org.eclipse.gmf.runtime.diagram.ui_1.0.1.v20060803-1200.jarprotected void performDirectEditRequest(Request request) { final Request theRequest = request; try { getEditingDomain().runExclusive(new Runnable() { public void run() { if (isActive() && isEditable()) {You check isActive and isEditable but not isSelectable, the edit part should not be showing. isSelectable returns false here.changing componentI'm waiting for a reproducible scenario for this one from Hanna. My initial thought is that direct editing capabilities shouldn't necessarily have anything to do with whether the editpart is selected or not.I modified AbstractPopupBarTool and DiagramGlobalActionHandler to not select the new editpart if isSelectable() returns false. I also created bugzilla#156773 against GEF to not select the editpart from EditPartViewer.setSelection() if EditPart.isSelectable() returns false.I need to revert this change. This breaks the case where a shape is not selected and the user is using the popupbar to add a list item in a compartment. Previously, the list item would go into direct edit mode, after this change it does not. This is because of the behavior in CompartmentEditPart.isSelectable(). I checked with Hanna and the changes that required this fix are not in place yet, so we can go ahead and revert these changes and Hanna will have to deal with his issue another way.Moving to the next release, GMF 2.1.[GMF Restructure]: product GMF and componentRuntime was the original product and component for this bug	7.0
id=391289	REOPENED	QVTo	Engine	unspecified	PC Windows Vista	P3 major	Christopher Gerking	2012-10-06 06:41 EDT by	Ed Willink	2016-06-29 03:56 EDT (	2 users	A large QVTo build can take forever to run. This is not cancellable which interacts very badly with the platform assumption that builds may be started eagerly and killed at will. One of many issues that makes EGIT unpleasant.Make the builder cancellable at a fine grain level.Review the need for an incremental build to rebuildAll.Review whether multiple platform incremental builds trigger more than one rebuildAll.	CreatedPatch that makes builder sensitive to cancel and interruptIt is actually the semantic analysis that takes very long and is not cancellable. Changed this by passing the monitor to the QvtOperationalVisitorCS. Currently checks for cancellation only inside oclExpressionCS, hope this is fine-grained enough.The proposed patch also enables checking for build interrupts, cancelling the current build if a new one starts.CreatedPatch that makes builder sensitive to cancel and interruptCreatedPatch that makes builder sensitive to cancel and interruptCreatedPatch that makes builder sensitive to cancel and interruptCreatedAdditional org.eclipse.m2m.qvt.oml.editor.ui patchAvoid logging of OperationCanceledException from QvtReconcilingStrategyCreatedorg.eclipse.qvto.patchCumulative patch that also fixesand.Patch reviewed. Pushed to master for M7.commit bf75f18afb17ba8bb0c4b1865bdc3807afbb5637It seems as if the support for build interruptions is buggy. Throwing an OperationCanceledException when a build is interrupted often triggers an infinite re-building attempt, which is noticeable by an endless resource refreshing.Apparently, we cannot treat cancel and interrupt uniformly, because interrupt requires a different behavior. We should therefore find a new solution to propagate build interruptions from the builder to the compiler.(In reply to Christopher Gerking from)Patch pushed to cgerking/391289. Reworked the entire progress monitoring of the build/compile process, such that the currently executing task becomes visible in the Eclipse Progress view. Due to conversion problems, I had to replace all uses of org.eclipse.emf.common.util.Monitor by IProgressMonitor, more precisely SubMonitor.Commit ID: 6b893ce788ef9779d9923a48b60a8f6f61e9a076	9.0
id=323230	REOPENED	M2T	Xpand	unspecified	All All	P3 enhancement	Darius Jockel	2010-08-20 06:38 EDT by	Lothar Wendehals	2010-08-25 02:59 EDT (	3 users	Build Identifier: HeliosI have a class containing an attribute 'collect'. When referencing that in a DEFINE, Xpand gets confused. This is actually part of my template:«DEFINE download FOR Download-»«IF collect != null-»«name»|COLLECT|«collect.value.toString()»«ENDIF-»...When using auto-completion, Xpand correctly offers the collect-attribute from Download. The interpreter anyway recognizes 'collect' as the 'collect()' Xtend built-in function and throws an error hinting that a '(' is missing behind 'collect'.I was really confused, especially since I did not know the Xtend function 'collect'. The error message was somehow misleading. After some time I was happy to find out that a had to escape the attribute's name by ^.Anyway, the error message needs to be improved.Reproducible: Always	I'm afraid that this can't be fixed easily, since 'collect' is a keyword and the only possible occurrence is in front of a '('. Also we cannot mark the property in your meta model since it is not defined within Xpand...Sorry. Thanks for posting anyway.Maybe it is possible to automatically add the escape character (^) to the attribute's name when using the auto completion mechanism if the name conflicts with a keyword?Yes, that's a good solution. Still a bit complicated, since the built-in function collect is also proposed.CreatedPatchXpand and Extension SyntaxConstants are escapedI've rejected the changes since they would add a '^' in every case. There are a lot of cases (select, collect, etc.) where the keyword is meant to be a keyword not an identifier.These cases need to be handled.	6.0
id=399062	REOPENED	Papyrus	Core	unspecified	PC All	P3 normal	Cedric Dumoulin	2013-01-25 05:27 EST by	Cedric Dumoulin	2013-03-11 11:56 EDT (	0 users	oep.infra.core.tests induce a classpath cycle.This tests project is a feature or oep.infra.core. So, it is considered as an extension of core, and all its dependencies are taken into account when calculing core dependencies. But it contains tests for the wizard, and this tests depends on various plugins (sysml, uml.diagrams, ...). Some of this dependencies themselves depends on oep.infra.core, causing a cycle in plugins dependencies.Proposed solution:- remove tests for the wizard from this feature. Move them in a separate plugins- remove dependencies needed by the wizard.	Tests for wizards have been moved to oep.uml.diagram.wizards.testsDependencies on sysml and co have been removed.The test codes have been lost in translation ...Restore them	2.0
id=408515	REOPENED	EMF	Releng	2.7.0	PC Windows Vista	P3 normal	Dennis Huebner	2013-05-20 14:40 EDT by	Ed Willink	2013-07-12 12:43 EDT (	1 user	shows no I-builds and no N-builds.It also shows no RC1.	EMF RC1 was published:Nightly builds can be downloaded directly from hudson (EMF.downloads):But why were they deleted? Almost as soon as you provided the missing I-build someone deleted them all.Doesn't EMF have a Retention Policy analoguous toas formerly at least required by the Simultaneous Release?(In reply to)I deleted them allEMF meets the requirements described in:By the way could you explain, why do you prefer to use zipped plugins and features instead of a p2 repository?It is my normal practice to gather a folder of update zips for use on multiple installations during the +0/+1/+2 period when P2 repositories are often in transition. That way I can install with 'contact other sites' disabled and have more confidence that I am getting what I want repeatedly.Downloading an All-In-One Zip is a simple to verify activity, incurs one network access, is repeatable and avoids P2 hangs.Using the diverse P2 repos, particularly the EMF ones whose documentation is sometimes five years ouyt of date is not helpful.(In reply to)Releases, milestones and nightly zips are available. In this special phase, from +0 on till epp build we produce any integration builds. So an I-build zip would not help in your case.Releases and milestone are listed on the EMF download site. Nightly all-in-one zips can be consumed directly from hudson.For EMF p2 repository URL's, please seeI will complement the url list with a nightly and hudson URLs as soon as I get write access again.(In reply to)For me, N-builds from Hudson is ok, but it is confusing for ordinary users who need to track the latest fixes; particularly now that EMF is doing innovative things.The I-build is very important and would have saved quite a bit of time just before M7 when I reported three regressions.	6.0
id=428705	REOPENED	Epsilon	Core	unspecified	PC Mac OS X	P3 enhancement	Dimitris Kolovos	2014-02-21 01:43 EST by	Dimitris Kolovos	2014-06-29 09:05 EDT (	1 user	Currently, for every object in the domain of an EGX rule, we reload the rule's template. While in principle each object can be executed against a different template, in practice, rules often have fixed templates. To improve performance, in GenerationRule, we could replace the following line with something more intelligent (e.g. use a HashMap<String, Template> to cache parsed templates and clear the the map once the rule has fully executed). EglTemplate eglTemplate = templateFactory.load(template);To do this we probably also need to add a reset() method to EglTemplate that reverts it to its pre-execution state (clears its buffer and variables) so that it becomes reusable.	I've added an initial version of EglTemplate#reset in SVN r2507.When a template finishes executing, the EglExecutionManager already clears up the FrameStack and OutputBuffer of the underlying EolModule, so no changes were needed here. I have added some regression tests, however, so that we don't break this functionality in the future:I also ran the entire EGL test suite with a modified test harness that processed, reset and then processed the template. The only failing tests were related to the coarse-grained traceability logic, and consequently I've added a traceability.Template#reset method.Otherwise, I *think* that EglTemplates behaviour correctly when reset, but do let me know if you see any issues.Fixed in SVN r2519.Thanks for doing this! Would it make sense to move the caching behaviour to the template factory at some point, so that EGL transformations that do not use EGX for coordination can also benefit from this?Good idea! Though, I don't think we should do this just yet.These changes have impacted Jimi's code quite a bit, and I think we need to work with him to bring his code under test and make it less resistant to change. (For example, we spent 90 minutes today fixing his code to work with all of the recent changes to EGL!)	4.0
id=422937	REOPENED	Epsilon	Core	unspecified	PC Windows 7	P3 enhancement	Dimitris Kolovos	2013-12-02 06:50 EST by	Horacio Hoyos	2014-12-22 06:09 EST (	2 users	CreatedPatch for emc.csv pluginsExtended CSV EMC privdes:- Identification and use of header fields- Save CSV models- Additional options when loading CSV modelsMore details:	CreatedProject with CSV exmaples and scripts that can be used as testsComment onPatch for emc.csv pluginsApplied patchApplied provided patch and committed to SVN (r2495/2496)Fixed in the latest interim version.CreatedPlugin ProjectHi,I have created a plugin to provide a workflow csv loader task. It seems to be working, but I cann't get ANT to auto-complete/suggest the taks attributes.Fixed in version 1.2.Hi,Will the csv workflow task be added to the release plugins?I've brought the CSV workflow extension plugin in my workspace but I can't get it to work properly. As reported, code completion doesn't work but I'm also getting the following exception when I'm trying to run a workflow that includes an instance of the new task.Cause: Could not load a dependent class org/eclipse/epsilon/workflow/tasks/EpsilonTask This class may be in a separate JAR that is not installed.The structure of the new plugin looks very similar to o.e.e.workflow.emf so it's not immediately clear why this happens. In any event, I've added the new plugin to the repository but we'll need to sort this out before adding it to the interim/stable update site.	8.0
id=268636	REOPENED	QVTo	Engine	unspecified	All All	P3 normal	Radomil Dvorak	2009-03-14 09:29 EDT by	Artem Tikhomirov	2013-07-27 09:46 EDT (	4 users	I've got a library with helpers/queries and configuration properties.library Library;configuration property aaa : Integer;helper xxx() : String { return 'asd' + aaa.repr();}Attempt to use it, like:var lll : Library := new Library();lll.aaa = 5;log (lll.xxx()); leads to NPE:java.lang.NullPointerExceptionat org.eclipse.m2m.internal.qvt.oml.ast.env.QvtOperationalEvaluationEnv.createInstance(QvtOperationalEvaluationEnv.java:407)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.createInstance(QvtOperationalEvaluationVisitorImpl.java:2013)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.visitInstantiationExp(QvtOperationalEvaluationVisitorImpl.java:809)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtGenericEvaluationVisitor.visitInstantiationExp(QvtGenericEvaluationVisitor.java:383)at org.eclipse.m2m.qvt.oml.ecore.ImperativeOCL.impl.InstantiationExpImpl.accept(InstantiationExpImpl.java:291)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.visitVariableInitExp(QvtOperationalEvaluationVisitorImpl.java:979)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtGenericEvaluationVisitor.visitVariableInitExp(QvtGenericEvaluationVisitor.java:407)at org.eclipse.m2m.qvt.oml.ecore.ImperativeOCL.impl.VariableInitExpImpl.accept(VariableInitExpImpl.java:262)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.visitOperationBody(QvtOperationalEvaluationVisitorImpl.java:956)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.visitEntryOperation(QvtOperationalEvaluationVisitorImpl.java:455)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtGenericEvaluationVisitor.visitEntryOperation(QvtGenericEvaluationVisitor.java:443)at org.eclipse.m2m.internal.qvt.oml.expressions.impl.EntryOperationImpl.accept(EntryOperationImpl.java:67)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.executeImperativeOperation(QvtOperationalEvaluationVisitorImpl.java:1575)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.runMainEntry(QvtOperationalEvaluationVisitorImpl.java:2082)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl$1.invoke(QvtOperationalEvaluationVisitorImpl.java:895)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.doVisitTransformation(QvtOperationalEvaluationVisitorImpl.java:870)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtOperationalEvaluationVisitorImpl.visitModule(QvtOperationalEvaluationVisitorImpl.java:724)at org.eclipse.m2m.internal.qvt.oml.evaluator.QvtGenericEvaluationVisitor.visitModule(QvtGenericEvaluationVisitor.java:371)at org.eclipse.m2m.internal.qvt.oml.expressions.impl.ModuleImpl.accept(ModuleImpl.java:622)at org.eclipse.m2m.internal.qvt.oml.runtime.project.QvtInterpretedTransformation.evaluate(QvtInterpretedTransformation.java:170)at org.eclipse.m2m.internal.qvt.oml.runtime.project.QvtInterpretedTransformation.run(QvtInterpretedTransformation.java:118)at org.eclipse.m2m.internal.qvt.oml.runtime.launch.QvtLaunchConfigurationDelegateBase.doLaunch(QvtLaunchConfigurationDelegateBase.java:182)at org.eclipse.m2m.internal.qvt.oml.runtime.launch.QvtLaunchConfigurationDelegateBase.doLaunch(QvtLaunchConfigurationDelegateBase.java:137)at org.eclipse.m2m.internal.qvt.oml.runtime.launch.QvtLaunchConfigurationDelegate$1.run(QvtLaunchConfigurationDelegate.java:65)at org.eclipse.m2m.internal.qvt.oml.common.launch.SafeRunner$SameThreadRunner.run(SafeRunner.java:33)at org.eclipse.m2m.internal.qvt.oml.common.launch.SafeRunner$1.run(SafeRunner.java:26)at org.eclipse.m2m.internal.qvt.oml.common.launch.ShallowProcess.run(ShallowProcess.java:41)at org.eclipse.m2m.internal.qvt.oml.common.launch.ShallowProcess.run(ShallowProcess.java:32)at org.eclipse.m2m.internal.qvt.oml.runtime.launch.QvtLaunchConfigurationDelegate$3.run(QvtLaunchConfigurationDelegate.java:98)at java.lang.Thread.run(Thread.java:595)Perhaps,andmight be related, as there's definitely a mechanism to instantiate a module, which fails in this scenario.	That's rather result ofimplementation. It looks like explicit instantiation of libraries is not permitted. Specification "8.2.1.2 Library":[spec]However, in contrast with operational transformations there is no main operationto execute and the instantiation of the class is always implicit. When a library is imported with access semantics, animplicit instance is created and used to access the properties and operations of the library. When a library is imported withextension semantics, normal class inheritance applies as for operational transformations.[/spec]So the bug is that explicit instantiation of library not prohibited by semantic analyzer (validation).CreatedThe patch reports an error for cases where a library name is used a type nameCreatedA unit test for the patchIsn't this a little bit too restrictive? I sometimes like to prefix contextless mapping calls with the parent module's name:var x : EClass = map MyLibrary::createEClass();Would this be prohibited by the patch?No, it won't be prohibited.The sample code you provided compiles OK with the patch.Comment onThe patch reports an error for cases where a library name is used a type nameThe patch is correct. Junit test verifies all cases where library is meant to be used as a type.Test cases was extended to verify that fully qualified access to library's features is not prohibited.Pushed to master.Commit ID: bea746fa16c728a37018230f44489f8bf72d194eThe following code does not compile anymore: mapping m1() : EObject inherits MyLibrary::m0 {...}I have other cases in mind where it might be reasonable to use a library as a type, try to think of a transformation variable typed over a library that the transformation extends. var x : MyLibary = new MyTransformation(...);Yes, it's useless since a library instance has no interface to invoke, but I think it should still be valid code.CreatedThe patch reports an error for cases where a library name is used a type nameThe new patch includes additional fix for handling <LibName::MapName> scoped names.I hope my second example above clearly demonstrates that there could be much circulating user code relying on libraries as types. Why not addressing the original bug directly, forbidding libraries only in constructors, object expressions and mappings?	10.0
id=504739	REOPENED	Ecoretools	General	3.0	PC Windows NT	P3 normal	Project Inbox	2016-10-06 11:15 EDT by	Ed Willink	2016-10-11 08:24 EDT (	2 users	I just about NEVER use pop-up icon commands.In the Ecore Diagram, the pop-up appears MUCH too quickly regularly stealing focus as I perform a much more useful action.AS a minimum please make the appearance time a preference.	Createdhow to disable popup-bars altogetherIf you never use it, I guess you should simply disable it, we even have a preference for this, see the screenshot.I'll assume this is enough for you.Switching off Popup bars is a solution, but other tools have similar facilities that are just irritating rather than crippling. There must be something wrong.The popup time seems to be 0.5s which is very conventional, although graphically, 0.5s may elapse during accurate positioning that is not so essential for text.I think part of the problem is the useless content. In many tools the content is context related, so if an EClass is selected, the option to create an EPackage is suppressed. If the content is purely global actions, the popup should only occur on the background; more than a pick distance away from everything. This would avoid the irritating popup just as a target is being selected.Another problem is the careless positioning. When hovering over the bottom of an EClass the popups are to the EClass top edge. Surely the positioning should be related to the cursor position, and at a sufficient distance to avoid accidental interference?---Comparing with Papyrus:In Papyrus, hovering over an association never shows the background popup, just association bendpoint cursor.In Sirius, hovering over a line shows conflicting garbage. REOPENing.And that's also the case here. Every tool appearing here is designed to be useful in this context (the 100% generic "Add" and "Remove" being an exception). The "Abstract Class" tool will make the EClass abstract when enabled on a non Abstract EClass. I might be able to refine the preconditions and avoid displaying the "Abstract Class" tool if the EClass is already abstract for instance. Just to give a bit more background, this feature is required by users which are working with the diagram editor in "full-screen" mode, without even the palette or the properties views which is visible.I won't impair such scenarios.This could be investigated. I know Bonia's BPMN modeler had a different layout for such shortcutsIndeed the "diagram background shortcut" is displayed when hovering an edge (and I guess on the other hand edge-sensitive tools are not displayed). I'll track a bug on the Sirius runtime after a quick analysis.The buttons are working as expected though, I would not qualify this as "conflicting garbage".(In reply to Cedric Brun from)I may be confusing the popup bar with connect handles that are position sensitive. This part of my comment retracted.This is the important issue. When hovering over a line (EReference), my experience may be enhanced by line-specific popups, it should not be impaired by irrelevant non-line background garbage.Full-screen users should always be able to find some bit of background to activate the background popups, so suppressing them on lines should not affect them.This is implemented with commit	6.0
id=314388	REOPENED	Modeling	Cross-Project	unspecified	PC Mac OS X - Carbon (unsup.)	P3 enhancement	Ed Merks	2010-05-25 22:44 EDT by	Kenn Hussey	2012-06-21 07:32 EDT (	19 users	Based on our discussions during various PMC calls, we want to create (a) composite site(s) for all Modeling projects rather than having aggregate sites for the various container projects. This is desirable since we're already using "Eclipse Modeling Project" and an associated branding icon for our projects; it only makes sense to use common update and discovery sites as well.The proposal is to host composite content and artifacts XML files in CVS which would be accessible at. Projects would contribute to the site by including references to their respective (operating) project-specific sites for each release. Similar sites for milestone and interim builds would be be atand, respectively.In order to adopt the new composite site in time for Helios, each project would need to a) add a reference to their (project-specific) site and b) change the update and discovery site references in their features to point to the new URL.	Createdinitial sitesThis should be fixed in RC2 and beyond.Oops, wrong bug. :-(With Ed's help there is now an initial site in place. In order for other projects to include their sites, the project leads will need to provide Ed with their site URL(s). Of course, they will also need to change the update and discovery URLs in their features to reference the new site. We are just about to commit the changes to do this for EMF and XSD...CreatedUML2 siteEd, here is a patch that adds the site for UML2 (assuming we'll actually be able to build and release it...).I've committed the changes.Ed, the compare update-site is(and milestones + interim) for helios but it's not a compare specific one. Is that a problem ?Kenn : what is the difference between the discovery and update field ? should we point to the same update-site being theone ?(In reply to)This is similar to the MDT update site being used for UML2. It should not be a problem.It's never been clear to me what the difference is, but just use the same URL for both. Ideally, when all Modeling projects are installed, there would only be one additional software site introduced - the new composite one.The Acceleo update site is, which isn't specific to Acceleo either.The M2T-JET uses the same update site as Acceleo. It appears, however, the Xpand is using a separate site for Helios. I haven't figured out the Xpand locations yet.Also, I just give the 'milestones' composite site a try with RC3 - seems to work fine. But, the 'interim' composite site reports a cryptic error from P2. Here's the error log entry:eclipse.buildId=I20100527-1700java.fullversion=J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)J9VM - 20081105_025433_lHdSMrJIT - r9_20081031_1330GC - 20081027_ABBootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_CACommand-line arguments: -os win32 -ws win32 -arch x86ErrorTue Jun 01 11:34:39 EDT 2010Unable to read repository at.org.eclipse.equinox.p2.core.ProvisionException: Unable to read repository at. at org.eclipse.equinox.internal.p2.repository.CacheManager.updateCache(CacheManager.java:357) at org.eclipse.equinox.internal.p2.repository.CacheManager.createCache(CacheManager.java:205) at org.eclipse.equinox.internal.p2.metadata.repository.CompositeMetadataRepositoryFactory.getLocalFile(CompositeMetadataRepositoryFactory.java:74) at org.eclipse.equinox.internal.p2.metadata.repository.CompositeMetadataRepositoryFactory.load(CompositeMetadataRepositoryFactory.java:99) at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.factoryLoad(MetadataRepositoryManager.java:57) at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadRepository(AbstractRepositoryManager.java:747) at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadRepository(AbstractRepositoryManager.java:652) at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:96) at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:92) at org.eclipse.equinox.p2.ui.ProvisioningUI.loadMetadataRepository(ProvisioningUI.java:388) at org.eclipse.equinox.internal.p2.ui.model.MetadataRepositoryElement.getMetadataRepository(MetadataRepositoryElement.java:120) at org.eclipse.equinox.internal.p2.ui.model.MetadataRepositoryElement.getRepository(MetadataRepositoryElement.java:109) at org.eclipse.equinox.internal.p2.ui.model.MetadataRepositoryElement.getQueryable(MetadataRepositoryElement.java:103) at org.eclipse.equinox.internal.p2.ui.QueryProvider.getQueryDescriptor(QueryProvider.java:54) at org.eclipse.equinox.internal.p2.ui.model.QueriedElement.fetchChildren(QueriedElement.java:102) at org.eclipse.equinox.internal.p2.ui.model.MetadataRepositoryElement.fetchChildren(MetadataRepositoryElement.java:72) at org.eclipse.equinox.internal.p2.ui.model.RemoteQueriedElement.fetchDeferredChildren(RemoteQueriedElement.java:34) at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235) at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)Caused by: java.util.NoSuchElementException at java.util.TreeMap.firstKey(TreeMap.java:4251) at java.util.TreeMap$NavigableSubMap.values(TreeMap.java:3042) at org.eclipse.equinox.internal.p2.repository.ProgressStatistics.getRecentSpeed(ProgressStatistics.java:101) at org.eclipse.equinox.internal.p2.repository.ProgressStatistics.report(ProgressStatistics.java:126) at org.eclipse.equinox.internal.p2.repository.FileReader.handleTransferEvent(FileReader.java:157) at org.eclipse.ecf.provider.filetransfer.retrieve.AbstractRetrieveFileTransfer.fireReceiveStartEvent(AbstractRetrieveFileTransfer.java:659) at org.eclipse.ecf.provider.filetransfer.httpclient.HttpClientRetrieveFileTransfer.openStreams(HttpClientRetrieveFileTransfer.java:735) at org.eclipse.ecf.provider.filetransfer.retrieve.AbstractRetrieveFileTransfer.sendRetrieveRequest(AbstractRetrieveFileTransfer.java:877) at org.eclipse.ecf.provider.filetransfer.retrieve.AbstractRetrieveFileTransfer.sendRetrieveRequest(AbstractRetrieveFileTransfer.java:564) at org.eclipse.ecf.provider.filetransfer.retrieve.MultiProtocolRetrieveAdapter.sendRetrieveRequest(MultiProtocolRetrieveAdapter.java:98) at org.eclipse.equinox.internal.p2.repository.FileReader.sendRetrieveRequest(FileReader.java:342) at org.eclipse.equinox.internal.p2.repository.FileReader.readInto(FileReader.java:288) at org.eclipse.equinox.internal.p2.repository.RepositoryTransport.download(RepositoryTransport.java:71) at org.eclipse.equinox.internal.p2.repository.RepositoryTransport.download(RepositoryTransport.java:127) at org.eclipse.equinox.internal.p2.repository.CacheManager.updateCache(CacheManager.java:337) ... 18 moreCreatedEcore Tools SiteThis adds the sites for Ecore Tools.FYI. The stack trace inappears to be related to the IBM JVM and/or the client firewall on my machine. Everything works fine with the Sun 1.6 JVM.(In reply to)There are known issues with running p2 with the IBM JVM. Which version did you try?Noticed a typo in the Interim site name: Eclipse Modeling Project Iterim SiteShould be Eclipse Modeling Project Interim SiteAs for the IBM JVM version: J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32I've switch to a Sun JVM for the time being.I fixed the typo Paul noticed.These are the sites for Teneo:The releases site is not there yet as I direct everyone to use a nightly build. But when Helios releases I will create one.Should I create a patch, or commit this myself?I have made the changes to the update/discovery sites in the feature.xml of Teneo. This will be/is in the RC3 build.gr. MartinTo make sure : we need to ad both 'update site' and 'discovery site' to our feature.xml files. Should we use a "standard" label for these sites? And "discovery" doesn't appear on the overview of the feature.xml in the feature editor. Do we manually add it in the xml?If I understood correctly, this would give something like this in our feature.xml. If I am wrong, please tell it soon :p.<url> <discovery label="Eclipse Modeling" url=""/> <update label="Eclipse Modeling" url=""/></url>(In reply to)Yes, we should use the same label. In EMF, XSD, and Ecore Tools we used "Eclipse Modeling Project Updates". Here's what we have in our feature manifests: <url> <update label="%ModelingUpdateSiteName" url=""/> <discovery label="%ModelingUpdateSiteName" url=""/> </url>Let's go with "Eclipse Modeling Project Updates" then, thanks for the update :).(In reply to)You could create an empty (composite) site for releases; that's what we've done for EMF, XSD, and Ecore Tools...No, as far as we can tell only Ed has the necessary write permission. I'll create a patch with all of the outstanding changes and attach it ASAP.Great, thanks!CreatedChanges for EMF Compare, EMF Teneo, M2T (Acceleo and JET)Here's a patch for the outstanding sites.I've committed the latest patch.CreatedProposed changes for CDO and Net4j featuresPlease have a look at the changes I've made and let me know if they're okay. And ping me when it's time to commit them!hi,i would like to participate for the EEF project, but i am a little bit lost :) looking to your patches, do i need to provide update site that contains only 0.8.X versions or a more generally one ( with futures 0.9 version ? ) ie( all interim versions )or( just 0.8 versions ) ? thanksI'm also not an expert in this round but my understanding was that we update our features to point to the modeling update site and Kenn or Ed update the definition of the aggregate repo. I suspect this must be coordinated in some way.(In reply to)At a glance, these changes look fine. If you are using Buckminster (which you are), take care not to specify the common Modeling composite (or any site, for that matter) as the update site for your build feature, or it will try to use it as a mirror by default. For EMF builds, we have removed all site URLs from our build feature and are using a template when we "promote" our build to insert the appropriate mirror site URL.(In reply to)Longer term, we want to get rid of the container project aggregate sites (such as the ones for EMF, MDT, M2T, etc.) and move towards a project-specific site (or sites) for each release. We have done this for EMF, XSD, and Ecore Tools to set the trend. In the meantime, if your project is still publishing its builds as part of an aggregate site, we can include the URL for that aggregate.Note that, for projects that are already using a project-specific site for this release, we'll need to include the release URL in the legacy aggregate site so that clients which already have features installed will discover the new release when checking for updates.(In reply to)Eike, you can make the changes in your features any time (before next week's final RC4 build, of course). Please tell us the URL(s) of your site(s) and I'll create a patch which Ed will then commit.(In reply to)no, my project is not part of EMFT aggragate. It has its own sites.ok, so please add the three EEF sites : ( at least the release, but for now it is empty :) )We do not have interim builds for Xtext, Xpand and MWE but we have update sites for nightly builds.I know that this is uncommon at Eclipse but we like to be able to test nightlies that way. I'ld like to suggest to have another aggregate site for nightly builds.Are there any other projects having nightly update sites or are interested to introduce them?(In reply to)We have nightly for EEF, but i don't think this is a good idea to aggregate them. nightly can be totally broken, and might be accessible to small groups of people ( dev team ). in contrary, EEF has integration builds that are deployed periodically that can be used widely...(In reply to)You are probably right. In our case it is good to have the three sites aggregated, since we often have parallel changes (they all depend on each other...). Last year we also developed against the head of EMF. We changed to MinimalEObject as soon as it was committed. Depending on the last milestone might be a better strategy in many cases, but sometimes it slows you down. However, I think this needs to be solved individually. I.e. I agree with not having an aggregated nightly site. :-)CreatedEEF siteCreatedEMFT MWE, M2T Xpand and TMF XtextMwe, Xpand, Xtext contribution.(In reply to)Dennis, are there a /releases subfolders that could be referenced instead for the release sites?(In reply to)Yes, but we prefer to use updates as the root entry, to have more control about what is contributed to modeling update site. It's exactly the same as for modeling/updates. There is a composite u-site which currently points to old 0.7.2 release in updates/release folder. For Helios I will move this old release to a separate folder becuase Athena overwrites existing content. After promotion I will setup our updates/ composite update site to use the "old" 0.7.2 and the new Helios releases update sites.Kenn, please change the repository URL for CDO toNot the one we talked about yesterday!Kenn,I just noticed that my patch is not applied yet.Is there still something to do?Regards,Dennis.(In reply to)Sorry for the delay, Dennis. Unfortunately, Ed is the only one with the necessary commit privileges, and he's currently traveling. In the meantime, I'll create a consolidated patch for the outstanding changes...CreatedChanges for EMF CDO, EMFT MWE, M2T Xpand, and TMF XtextEd, please commit the changes in this consolidated patch.(In reply to)No problem! :)hmm... that's not good. Normally, anyone with group membership ('modeling-home') may commit, right?(In reply to)Yes, but Modeling committers are not automatically in that group. :(The patch fromis committed to CVS.For MoDisco, the update sites are:release (composite):milestones (will be composite):For the discovery/update URLs in the features,is on the web server. Shouldn't it beinstead?(In reply to)Thanks, I'll attach a patch for Ed shortly.Not necessarily. We're using a location on the web server so that we can more easily sync it with CVS; what really matters is where the composed repositories are located - they should be on the download server so that they can be mirrored, archived, etc..CreatedChanges for MDT MoDiscoThe patch in commmentis committed.Adolfo: MoDisco's contribution shows us exactly what we should be doing on MDT/OCL.Hello Folks,resolution has fixed every MDT/OCL feature so that now it refers to the requested URL.I've been recently working with the organization of our repositories. There has been some discussion in the mdt-ocl.dev about this organization and possible URLS...The final URL of our repositories are the following-a composite repository which will expose every MDT/OCL Release (starting from the Helios one: MDT/OCL 3.0.0).-a composite repository which contains our three last stable build (including RCs). This repository is thought to be used during the milestones by any party interested in our main development stream (downstream projects, modeling composite repository, the simultaneous release aggregator, etc)-a repository which contains our last successful integration build. This repository is thought to be used between milestones by any party interested in our main development stream.Some other questions:- These URLs are project-specific. The previous releng decided not to aggregate the releases repository to the MDT releases repository one. Do we need to do this now (for Helios SR2 and/or Indigo) ?.- In the mailing list discussion, I talked about the possibility of using (actually I'm currently using it) arepository which contained our last successful maintenance build (this could also contain our SR RC artifacts). This repository were thought to be used by any party interested in our maintenance stream (downstream projects, an hypothetical modeling composite maintenance repository, the service release aggregator, etc) ... Does this make sense to anybody ?Cheers,Adolfo.CreatedChanges for MDT OCLTo make things easier, the attachment provides the patch to make the EMP repositories compose the correpsondent MDT/OCL repositories.Best Regards,Adolfo.The OCL changes have been committed to CVS.The Helios build has been failing because it cannot load the composite modeling repository. :(I think the problem may have to do with the fact that the child sizes in the metadata are not correct. I'll attach a patch to fix them.Createdchild size correctionsThe changes are committed to CVS.I just realized that our composite repo is the only one that uses www.e.o rather than download.e.o and I wonder if that's intentional? Does it affect mirroring in some way?(In reply to)AFAIK, the composite itself does not need to be mirrored; only the contents (referenced repositories) do, and they are since they are located on download.eclipse.org.the uml2 tools project also has new update sites nowI created a patch to add these new sites to the modeling update site (see attachment)CreatedPatch to add UML2 Tools update sites...and here's the patchI committed the changes, plus incremented the size. It's important to fix child sizes, so please consider that for future additions.Createdpatch for emf and xsd 2.7Here's a patch that adds references to the release repository for EMF and XSD 2.7.0.Reopening to add sites for EMF and XSD 2.7.0.The changes are committed to CVS.Hi Kenn,We've got a new layout of our repositories:Would you agree that it makes sense to include these two instead of the former one(s)?(In reply to)And if so, could you please change the CDO child locations accordingly?(In reply to)I think you're the better judge of which repositories you want to publish for your project. If you provide a patch, Ed can apply and commit the changes (I don't have the necessary permissions).(In reply to)I don't even know what to create a patch against. AFAIK these p2 composite repositories are simple xml files with one line per child, similar to: <child location=".."/>Ed just has to change my line and evtl. add a second one.Note that the "official" way to manage composites is to use p2 API or the p2 Ant tasks. I don't know how you guys maintain this Modeling composite.Createdupdates for EMF (Core), MDT XSD, and MDT UML2The composites need to be updated to pick up interim and milestonebuilds for more recent EMF/XSD (i.e., 2.7.2 and 2.8) and UML2 (i.e., 4.0) releases.The latest patch has been committed.Hi guys,Just a note about this bug and some builds using buckminster.I discovered that buckminster is incorrectly using the sites to visit or discovery URL in the p2 metadata for "p2.mirrorsURL". resulting is a LOT of errors trying to mirror or just install artifacts from a command line.using tycho resolved the problem.seefor ref.(In reply to)It's a well known buckminster feature, not a bug. The "site" feature is just a container for features to build and not a real feature which can/should be installed with p2.And how many new problems you got after switching to Tycho? :)So I assume there's no action needed to resolve anything...Changes (for which a patch will be attached shortly) are needed to pick up the new repositories for UML2 4.0.Createdchanges needed for uml2 4.0CreatedCDO changesPlease apply the attached changes for CDO.From: P2 cannot findCDO and Teneo appear to have moved to the 'standard' composite repository names.UML2Tools only has a 'standard' interim repository.CreatedCDO ChangesI made a new patch that:1) Remove the old CDO contributions that I overlooked in two files (Thx Ed!)2) Fix the children counts in all files (was already wrong in two of them)3) Adds a .cvsignore for the .project file (hope that's ok)I committed the combined changes from Kenn and Eike, but I need Martin's attention to what needs to be changed for Teneo.Dennis,I'm sure I need to add something for the 2.8 EMF release, but I'm not sure what.(In reply to)All the sites we have are already in, except of 2.8 I think, but it's still empty.You can add it anyway:I'm not sure why we have to maintain them in this bug. What about the composite site foreach modeling site, like I did it for Xtext? I can create and maintain following sites:Then you reference this sites in modeling composite repositories, so we don't have to change them each release.+1. Having every modeling project releng maintaining their own releases, milestones and integration repositories would produce an always updated modeling composite repository.MDT/OCL project is currently using the configuration described by Dennis.Regards,Adolfo.Dennis,It would be really nice to have the composite you suggest!Let me know when it's done and I'll change these to reference them.(In reply to)Here they are:On 27. June I will add the 2.8 contribution.	82.0
id=451928	REOPENED	EMF	Core	unspecified	PC Windows NT	P3 normal	Ed Merks	2014-11-17 10:15 EST by	Ed Willink	2015-04-20 03:50 EDT (	0 users	If - a SaveAs... is performed in the Sample Reflective Ecore Editor- there are unresolved proxies- saving causes a proxy to be resolved- resolving a proxy loads a new resourcethen, 10 lines into EcoreEditor.doSave for (Resource resource : editingDomain.getResourceSet().getResources())throws a CME because an additional resource has been added to the ResourceSet.Taking a copy of the 'old' resources does not seem appropriate here; 'new' resources should not be overlooked.Better to use an indexed iteration up to size(): List<Resource> resources = editingDomain.getResourceSet(); for (int i = 0; i < resources.size(); i++) { Resource resource = resources.get(i);Workaround: validate before saving.	Saving should not generally resolving proxies. I'd be interested to see where saving results in proxy resolves too in order to better avoid that as well (assuming it's something avoidable in the XMLSave or the runtime)...Yes, I was wondering whether no-resolve-proxies-during-save might be the 'solution'; but it should be diagnosed.My problem is that whereas Ecore creates duplicate type declarations for e.g. List<String>, OCL (and UML) has shared global type singletons. Singletons in memory are not a problem, but to avoid a universal global type repository for persistence, all referenced singletons are localized into the saved resource. Loading redirects back to the in-memory global singleton. Saving may therefore resolve proxies as the proxy for an element type is resolved. This may therefore load a resource causing the CME.This is all orchestrated by ASResource for which PivotSaveImpl does the hard work within XMLResource.save(). If you load a *.oclas file into the Sample Ecore Editor you can see the $$ package that hosts all the localized singletons.I see, so proxy resolution is not a general problem in the framework. Adding a counted loop as you suggested would be helpful.Thanks.Lazy proxy resolution is IMHO mostly a good feature of EMF. Unfortunately it is easy to confuse logically readonly activities with genuinely readonly activities, so all code that loops whose iteration domain might be changed by a proxy resolution must make a loop-over-the-initial-domain / loop-over-the-evolving-domain choice when avoiding a CME.[ In a more ideal world, proxy resolution might manage to interact with EList iterators to hide the mutation. But that is hard and might cause as many problems as it cures. ]The models are regenerated too:Oops comments on wrong bug...This issue still bothers me. I don't see why a proxy needs to be resolved during serialization. Presumably when you deserialize you create a proxy, so how can it not be the case that the proxy contains enough information need for serialization. To me this sounds like something that needs to be address.Also, while a counted loop seems reasonable, it's hard to imagine why a refresh loaded resource would need to be saved...Also, this logic is in purely generated code, so changes suggest changes to the generator, and that seems hard to justify when it seems not to be a general problem...They're not 'new' proxies. They are proxies that have been there all along. It's just that serialization provokes the very late resolution.The CME problem manifests itself in many forms, nearly always because UML's profile are loaded very lazily. Just about any 'eGet' can trigger a Resource load which is a big problem if there is an outer ResourceSet iteration in the same or another thread (e.g. Validators/Decorators).That's the point though, they are old proxies so why does saving need to resolve them? Is it just carelessness, an oversight, or truly unavoidable?It is the unavoidable need to create shared singletons as identified in.Of course I have no idea what specifically is so unavoidable. It seems to me if you read in a resource and have proxies that you have exactly what's needed to write the resource out again also without resolving those proxies. That's how normal XMI serialization works. You assert that such a goal is in principle and in fact simply unattainable so I should just accept that without understanding why it's so?But does that mean all editors should have the logic for that? Could/should I just add a resolveAll before the save in the Ecore Editor? Does a freshly loaded resource need to be saved at all, i.e., counted loop verses iterate over an initial copy?Note that I've asked 4 questions.(In reply to Ed Merks from)Definitely not. The instant solution still hot from a frustrating debugging session often lacks proper analysis.No. But the suggested solution is a small cost in an outer loop.No. That could be a major cost to already happy users.The existing OPTION_SAVE_ONLY_IF_CHANGED etc options answer this question.The counted loop is a very minor cost that avoids CMEs.Inandwe both question the premise(In reply to Ed Willink from)with: why does saving resolve proxies?In the Sample Ecore Editor, I agree, whatever was loaded should be saveable as is.The problem scenario was:- programmatic construction of a *.oclas resource, which uses references to shared singleton- save that localises shared singletonsAlternative 'user' solutions:- loading/construction using shared singletons should not leave proxies unresolved- custom save protocol (easy programmatically)So, no, the suggested is not 'mandatory' but it is painless and can be helpful by avoiding the need for either alternative 'user' solution.	12.0
id=432853	REOPENED	EMF	Tools	4.3	PC Windows 7	P3 normal	Ed Merks	2014-04-15 14:16 EDT by	Erick Hagstrom	2014-04-16 03:38 EDT (	0 users	I generated from my model, then realized that I had omitted the copyright information. So I entered "Copyright (c) ${year} My Company" in the Copyright Text field in the .genmodel file. Now when I regenerate, that text never shows up in the generated source files. I'm looking for it in the comment at the top of the file, but it isn't there. Copyright Fields is set to false.If I set Copyright Fields to true, the field is generated, but the copyright comment still doesn't show up.Bizarrely, when I put a JavaDoc formatted comment in the Copyright Text field--"/** * Copyright (c) ${year} My Company */"--I get a code generation error. The generator is inserting text into a JavaDoc comment, resulting in a parse error.	Note that the Boolean property is "Copyright Fields". It generates static constants with the copyright text in each *.java, so it ends up in the binaries. It generates nothing in the Javadoc.Ok, thanks for the response Ed.I understand what Copyright Fields does, and that works as you described. But there are a few anomalies:1) If Copyright Text is supplied prior to the first generation of the files, it does appear in JavaDoc. That JavaDoc just doesn't seem to be regenerated/updated if Copyright Text is supplied after the files are first generated.2) The parse error that I get when I fill in Copyright Text with fully formatted JavaDoc (instead of just a simple copyright statement) suggests that _something_ is generating JavaDoc on subsequent regeneration of the files, it's just not keeping that regenerated JavaDoc.3)clearly shows a copyright statement being generated in JavaDoc.4)(the discussion thereon) suggests that Copyright Fields was created "so you can set the copyrightText without getting the fields".5) Your fine book on EMF (2nd ed.) states that "beginning in EMF 2.3, [the value of the "Copyright Text" property] is used only in a JavaDoc comment by default." (p.648)All of the above suggests--and perhaps I'm misinterpreting--that Copyright Text is meant to appear in JavaDoc regardless of the setting of Copyright Fields. And it doesn't work that way.Sorry if I'm beating a dead horse, but IMO if the intent behind Copyright Fields and Copyright Text is for Copyright Text to ONLY appear in the field, and ONLY if Copyright Fields is true, then that should be documented somewhere and that behavior should be consistent across the board.Erick,Sorry, you're right. I overlooked that it comes from Header.javainc that's included in each template./**<%{GenBase copyrightHolder = argument instanceof GenBase ? (GenBase)argument : argument instanceof Object[] && ((Object[])argument)[0] instanceof GenBase ? (GenBase)((Object[])argument)[0] : null;%><%if (copyrightHolder != null && copyrightHolder.hasCopyright()) {%> * <%=copyrightHolder.getCopyright(copyrightHolder.getGenModel().getIndentation(stringBuffer))%><%}}%> */It does not (directly) include any markers that support merging, i.e., * <!-- begin-user-doc --> * <!-- end-user-doc -->But one could include that in the copyright itself, i.e., <!-- begin-user-doc -->My copyright<!-- end-user-doc -->Note that the copyright statement lines will be prefixed by " *" automatically so definitely don't put a Javadoc terminator in your copyright property of the GenModel.In the case that the package's Javadoc does have merge markers, it should support merging, but it doesn't, because that was never a design goal. But it does make sense to perform such merging and the JMerger could be changed to support that. So I'll reopen this and revisit enabling such support.And another gotcha to consider that this same copyright information shows up in the plugin.xml and there the --> causes a problem because it terminates the XML comment.	4.0
id=496011	REOPENED	EEF	Core	1.6.0	All All	P3 normal	Project Inbox	2016-06-13 10:37 EDT by	Pierre-Charles David	2016-12-01 15:36 EST (	3 users	Some expressions are currently evaluated eagerly during the view's refresh, even though the values computed are not needed immediatly. This can cause performance issues, as users will pay the full cost of all these expressions whenever the view is refreshed (e.g. whenever he selects a new element on a Sirius representation), even if he never interacts witht the properties view.The most obivously problematic is EEFSelectionDescription.getCandidatesExpression(), which computes all the candidates for a combo box, even in the 99% of cases where the user will not interact with that combo. Note that this is not only about the expression's evaluation (which by itself may not take that much time), but also about the SWT/JFace elements created and configured using the result of these expressions.Other potential candidates include the computation of all the "helpExpressions", whose value will only ever be needed if/when the user hovers the mouse for half a second on the "?" icon: I'm not sure the SWT architecture allows this, but it would be nice to only evaluate these expressions on demand.	(In reply to Pierre-Charles David from)It seems it should be possible using Control.addMouseTrackListener(MouseTrackListener) with MouseTrackListener.mouseHover(MouseEvent).New Gerrit change created:Gerrit changewas merged to [master].Commit:Gerrit changewas merged to [master].Commit:New Gerrit change created:Gerrit changewas merged to [master].Commit:We had to revert the initial patch, as it does not work under Windows.***has been marked as a duplicate of this bug. ***	8.0
id=434729	REOPENED	EMF	Xcore	unspecified	PC Windows 7	P3 normal	Ed Merks	2014-05-13 07:27 EDT by	Jan Rosczak	2014-05-14 05:10 EDT (	3 users	I have a project with some Xcore models which I would like to generate with Maven. There is something special about my models. I have defined data types that wrap Java enums from another project.Therefore I defined a POM that included my other project as a dependency and started the generation.The Xcore model generation fails, because it cannot find the classes from the other project.If I additionally include the other project as a direct dependency for the Xtext maven plugin everything works.So my question is, why does the Xtext maven plugin not include the general dependencies in its classpath, but only its own dependencies? Or this is "works as designed"?	Could you attach the pom.xml?Createdpom.xmlThe eclipse.p2 and eclipse.juno.p2 are mirrored repositories of the respective Eclipse repositories and the artifact.release.local and ext.release.local are our inhouse Maven repositories.The project in question is com.hlcl.commons.POM-Dependencies are ignored in Tycho builds. Tycho uses the dependencies declared in the Manifest.That is not true. Look at the "target-platform-configuration":<pomDependencies>consider</pomDependencies>That configuration makes Tycho consider the dependencies.But the problem is not Tycho. It happens before Tycho kicks in, because the Xtext plugin is triggered in the "generate-sources" phase.The error occurs not when trying to compile Java sources, but when trying to generate Java sources from the Xcore models.Sorry my bad. The Xtext plugin just uses ${project.compileClasspathElements} by default. That's why I suspected this to be related to Tycho. Could you use the -X switch to see the properties of the XtextGenerator mojo?"works as designed" - generator should not use the dependencies of the language projectUnderstood.But what if I would like to do this all with Tycho? So I would only have my dependencies in my Manifest.Would the Xtext plugin pick those up?In fact it should collect the compile classpath. At least that's what the code currently says. (Whether we want this or not is a different discussion).Please attach the log running with the -X switch, so we can further debug the situation.(In reply to Stefan Oehme from)That's true for loading source models, but not for running the generator.This line:<classPathLookupFilter>.*org\.eclipse\..*\.jar.*</classPathLookupFilter>Filters out your library from the classpath. I guess that's why it doesn't work. Try removing this filter.CreatedMaven debug outputAs far as I understand the classpath lookup filter, it filters all packages starting with org.eclipse from any jar file on the classpath.Nevertheless I removed the filter and did a build. Same error as before.I re-run the build with the -e and -X switch and attached the output.The filter is an inclusion filter. So only things that it matches will be searched for models. Could you also add some code (the two places where the error occurs and a few lines around it)?I had attached the project to another Bug: 410736. This is still the same, the only difference is that I put everything in one project.In my Xcore model I have for instance the following type defined:type AttributeTableDescriptionKind wraps AttributeTableDescription$Kindcreate { if (it != null) AttributeTableDescription$Kind::valueOfName(it);}convert { if (it != null) it.getName}Later I reference that type and set a default value:class EAttributeTableDescription extends EParticleContainerDescription, EParticleDescription { refers ETypeDescription ^type /* * Returns the Kind of this attribute table, if any, or * {@link Kind#UNDEFINED}. * <p> * A kind designate this attribute table to group of attribute tables, which * behave the same way and have got similar characteristics. * * @return the Kind of this attribute table, if any, or * {@link Kind#UNDEFINED} */ AttributeTableDescriptionKind kind = "undefined"}The class AttributeTableDescription$Kind comes from the other project.And this validation error disappears when you add it as a plugin dependency? The type is obviously found (otherwise the "wraps" would not work), only the "undefined" value is not found.In my Eclipse IDE everything works fine. The problem only occurs, when I do a Maven build.Some time ago, I already debugged the build process and you are probably right that for the generation the type is found, but when some Xbase facility is asked to convert the string value "undefined" to its correct type (an enum literal), the Xbase facility fails to instantiate the appropriate class. It seems as the wrapped type is not visible to the Xbase facility.Okay, the problem is that the "create" and "convert" expressions are run in the interpreter. The interpreter doesn't use the ResourceSet. Instead it uses an IClassPathProvider, which currently is bound to NullClasspathProvider in the runtime case. This leads to the fact that only classes on the classloader of the xtext-maven-plugin are visibile to the interpreter. To fix this, we need an implementation that uses the ClasspathURIContext of the ResourceSet, so project dependencies are visible.Moving this to XCore.I'm not sure what action I'm expected to take...Currently the RuntimeModule uses the NullClassLoaderProvider, which always returns null. Instead you should do something like this:if (resourceSet instanceof XtextResourceSet) { Object classpathURIContext = ((XtextResourceSet) resourceSet).getClasspathURIContext(); if (classpathURIContext instanceof ClassLoader) { return (ClassLoader) classpathURIContext; } }return null;It would be nice if the same logic as in org.eclipse.xtext.resource.ClassloaderClasspathUriResolver.resolve(Object, URI) could be applied	19.0
id=460844	REOPENED	EMF	Edit	2.10.0	All All	P3 normal	Ed Merks	2015-02-25 13:46 EST by	Maximilian Koegel	2015-04-09 06:29 EDT (	1 user	ItemProviderAdapter.getColumnText(EObject, int) returns an empty String. If the "Table Providers" property is set to true in the genmodel, this method is used as default implementation of all ItemProviders of a model until they override and implement the method (which is intended). However until someone actually does override the method, the default implementation will lead to empty tables everywhere which might be confusing. Maybe an alternative default behavior could be to delegate to getText().I offer to implement this change by myself, this is just a request for comments. What do you think?Thanks!	Wouldn't changing it now risk affecting clients who assume it's the empty string if the delegate to super or if they don't override that specific item provider?I think it's highly unlikely that someone would ever want to call this super method that returns the empty string. The original problem I had with these default getColumnText() methods was the following:I didn't know that generating TableViewer support also requires to override each getColumnText() method. I never noticed a problem because I never used that model (it's a 10+ years old example model) in a TableViewer. Now I started to play with EMFForms and they use a TableViewer, which just displayed weird empty items. It took me four hours to debug through all the frameworks and find the cause.I'm not sure how many people think "I don't need table support now, but I better enable it in case someone else might need it". But I think if people generate table support only one of the following two statements is true:1) They use it and override getColumnText() to not call super.2) They don't use it and haven't noticed that it wouldn't work.In both cases a different (more flexible) default implementation of getColumnText() wouldn't harm.That didn't answer the "or" part of the question. Perhaps they use it but some items are supposed to be blank, so they don't need an override because blank is the default. So now we pick a different default, and argue with such a user that the "new improved flexible though definitely useless default" is better than the current "pretty much useless though sometimes exactly what you want default" because it makes them think/realize they need to do something.I.e., I think either default is no doubt pretty much useless so the argument that changing it will reduce debugging time is certainly something to consider, but dismissing the fact that arbitrary changes can have arbitrary impact is also something else to consider. No doubt properties based columns are far superiour anyway.I don't think it is a good idea to retroactively change this behavior.I had already written a comment, but probably never posted it last week, sry.I see the problem with changing the behavior for existing users in case they did not implement something for this method in rely on it to return "". However maybe there is some middle ground. How about we just return getText() for index 0?I think it is more unlikely that someone relies on the first column always being empty in comparison to any other columns.I see what you mean. I suppose in general to make the first column non-blank which would seem a basic task in all cases, one must have overrode something already, so maybe my original concern is not so significant and your proposal makes it pretty much irrelevant...So can I go ahead, reopen the bug and open a Gerrit review to fix this?Yes.OK, will do.New Gerrit change created:I wonder, might an alternative be to generate getColumnText and getColumnImage to delegate to getText/getImage?Would this not cause changes for everyone regenerating code?Sure, but if they really wanted to support the feature, they've already manually overridden those methods and will not notice a difference. If they've not set the option, the also won't notice a difference, so it's mostly for the benefit of someone enabling the option and more clearly understanding what the need to do. The generated code could contain a // TODO like we do for empty operation bodies...Just for documentation: Ed and I discussed this in a voice call and agreed to go for the option to generate the code into the ItemProviders that is in the current proposal in the Gerrit Review just in the super class.	15.0
id=416341	REOPENED	EMF	cdo.releng	4.6	PC Windows 7	P3 normal	Project Inbox	2013-09-02 05:44 EDT by	Jugal	2016-07-31 00:57 EDT (	4 users	We'd like a Nexus repository for Eclipse CDO. Please let me know if you need more details or any help with regards to testing.	I'm totally unexperienced with Nexus. Would that require changes in CDO's build or promotion systems?I guess you would need to do some changes. You can find some information on how to do this on CBI wiki -. There are some eclipse projects () which are already using CBI. Let me know if I can be of any help.(In reply to Eike Stepper from)I have a wiki page that explains how to use repo.eclipse.org (Nexus) at the Foundation:It should explain the steps you need in general including a couple different methods you can use. Let me know if anything can be made more clear.Thanks for the infos. Before I dive in to details, an important question: Does it require the use of Maven in our build?Would it require that all our dependencies are also in Nexus?-->(In reply to Eike Stepper from)Depends how much Maven you want to use. It is possible to push single jars to a Maven repo using this step [1] but you still need to create a "pom.xml" file for every jar you wish to push.[1](In reply to Eike Stepper from)No, because building with Maven's Tycho plugin allows defining p2 repositories as dependency repos to fetch from. For example from the Platform build [2]. All the variables such as "${ecf-repo.url}" point to URLs such as the one mentioned in your bookmarks.xml example.[2]I created the CDO repos as follows:group:releases:snapshots:For details on how to deploy artifacts to these repos see the wiki page at(In reply to Jugal from)May I ask who "we" is?This seems to become an effort that could easily cause me to work on our build and promotion systems for days. I must admit that I'm not very inclined to do that. And so far I'm not very convinced that a big part of the community will benefit or that the community will even grow.(In reply to Thanh Ha from)Sorry, I think that's a little too quick, given that it seems to take me days to actually fill these repositories. What's the current strategy for creating these repositories? Can any anybody with a GMail address ask for these repositories and the concerned Eclipse projects must do all the work? That doesn't seem right.Yes, you mentioned that. Understanding all of that takes me at least a day. I also get the impression that it will complicate our build and promotion system considerably. Probably the build times will increase considerably. Our promotion system is not based on Hudson.(In reply to Eike Stepper from)>Sorry I should have been more careful to make sure you were ok with this as well via +1.I can create the repos but the repos will contain nothing until someone fills it up with artifacts and only committers can do this. So even if these repos exist until someone from the cdo project pushes artifacts there, the URLs will not return anything.So far no +1 from me.I see that there's a "cdo" group now in. Can you please remove it until I better understand the benefit and effort to fill it?(In reply to Eike Stepper from)DonePlease allow me to put this into the CDO bit bucket :)Eike, apologies for the confusion here. If there is anything we can to to assist, please let us know.(In reply to Denis Roy from)Of course, your bucket is my bucket, hmm... :PNo problem. Let's first see how urgently Jugal needs this.(In reply to Eike Stepper from)Apologies Eike, I guess I should have provided more information. Well we as in here at Bosch are internally using CDO for developing some of our web based modelling tools. Our model is ecore based which we are persisting to a CDO repository and it kind of meets our need to provide colloborative web based modeling for our users. Since it is a web application, I am using CDO in a standalone mode. However, unfortunately internally our build ecosystem is all based on Maven so I have to manually push all the CDO artifacts to our Nexus repository. I came across this tool m4e - () which is a utility to convert eclipse plugin artifacts to Maven artifacts. I am using this for now to convert CDO artifacts to Maven artifacts and manaully push the artifacts to Nexus repository, however the enitre process is a bit errorprone and cumbersome to get it right. The other thing is inorder to use few dependencies from CDO for including it in a web application, I also have to include a whole lot of other dependencies which I am not really sure if all of them are needed. Do you have any suggestions on including CDO in a non-eclipse project, like what are the minimum set of dependencies needed?Let me know if there is any way I can help you out with regards to converting it to Maven artifacts. I totally understand your concern, however I belive if CDO has its artifacts published over to a Maven public repository, I am sure it will help to increase the adoption rate for CDO in non eclipse environment as well.Eike, have you reached a decision on this?-M.No, at this point our CDO build is still not migrated from Buckminster (with many additions) to Tycho. It was my understanding that that's kind of a precondition for a painless integration of Nexus.May I ask why you ask?I was going through some old bugs and as this one hadn't had any activity for almost 2 years, it seemed reasonable to start a discussion on if it should be closed.-M.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	20.0
id=409262	REOPENED	EMFCompare	UI	unspecified	PC Windows 7	P3 critical	EMF Compare	2013-05-28 05:21 EDT by	William Piers	2015-11-16 10:03 EST (	2 users	When launching a compare editor which uses a given command stack, if the command stack changes (outside, non editor related), the viewer attempts to refresh outside of the UI thread, which leads to the following trace:org.eclipse.swt.SWTException: Invalid thread access at org.eclipse.swt.SWT.error(SWT.java:4282) at org.eclipse.swt.SWT.error(SWT.java:4197) at org.eclipse.swt.SWT.error(SWT.java:4168) at org.eclipse.swt.widgets.Widget.error(Widget.java:468) at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:359) at org.eclipse.swt.widgets.Tree.getSelection(Tree.java:3402) at org.eclipse.jface.viewers.TreeViewer.getSelection(TreeViewer.java:256) at org.eclipse.jface.viewers.TreeViewer.setSelection(TreeViewer.java:344) at org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:2498) at org.eclipse.jface.viewers.StructuredViewer.setSelectionToWidget(StructuredViewer.java:1769) at org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:2947) at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1450) at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:403) at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1404) at org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged(AbstractTreeViewer.java:1510) at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280) at org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1690) at org.eclipse.emf.compare.rcp.ui.internal.mergeviewer.impl.TreeMergeViewer.inputChanged(TreeMergeViewer.java:100) at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280) at org.eclipse.emf.compare.ide.ui.internal.contentmergeviewer.EMFCompareContentMergeViewer.updateContent(EMFCompareContentMergeViewer.java:204) at org.eclipse.compare.contentmergeviewer.ContentMergeViewer.internalRefresh(ContentMergeViewer.java:743) at org.eclipse.compare.contentmergeviewer.ContentMergeViewer.refresh(ContentMergeViewer.java:718) at org.eclipse.emf.compare.ide.ui.internal.contentmergeviewer.EMFCompareContentMergeViewer.commandStackChanged(EMFCompareContentMergeViewer.java:363)	fix is under reviewfixed in 3bc898a63dd85d0229c26dca4fc0153377bb6b44Closing resolved bug.With the latest EMF compare master I reproduce the bug, with the following trace.org.eclipse.swt.SWTException: Invalid thread access at org.eclipse.swt.SWT.error(SWT.java:4491) at org.eclipse.swt.SWT.error(SWT.java:4406) at org.eclipse.swt.SWT.error(SWT.java:4377) at org.eclipse.swt.widgets.Widget.error(Widget.java:482) at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:373) at org.eclipse.swt.widgets.Table.getSelection(Table.java:2723) at org.eclipse.jface.viewers.TableViewer.doGetSelection(TableViewer.java:253) at org.eclipse.jface.viewers.AbstractTableViewer.getSelectionFromWidget(AbstractTableViewer.java:462) at org.eclipse.jface.viewers.StructuredViewer.getSelection(StructuredViewer.java:1040) at org.eclipse.emf.compare.rcp.ui.internal.mergeviewer.impl.AbstractStructuredMergeViewer.getSelection(AbstractStructuredMergeViewer.java:101) at org.eclipse.emf.compare.ide.ui.internal.contentmergeviewer.EMFCompareContentMergeViewer.getAffectedMergeViewer(EMFCompareContentMergeViewer.java:402) at org.eclipse.emf.compare.ide.ui.internal.contentmergeviewer.EMFCompareContentMergeViewer.commandStackChanged(EMFCompareContentMergeViewer.java:385) at org.eclipse.emf.compare.command.DelegatingCommandStack.notifyListeners(DelegatingCommandStack.java:161) at org.eclipse.emf.compare.command.impl.CompareCommandStack.access$0(CompareCommandStack.java:1) at org.eclipse.emf.compare.command.impl.CompareCommandStack$1.commandStackChanged(CompareCommandStack.java:61) at org.eclipse.emf.common.command.BasicCommandStack.notifyListeners(BasicCommandStack.java:270) at fr.obeo.dsl.viewpoint.collab.api.editingdomain.NonDirtyingCapableWorkspaceCommandStack.notifyListeners(NonDirtyingCapableWorkspaceCommandStack.java:146) at org.eclipse.emf.workspace.impl.WorkspaceCommandStackImpl.doExecute(WorkspaceCommandStackImpl.java:219) at fr.obeo.dsl.viewpoint.collab.api.editingdomain.NonDirtyingCapableWorkspaceCommandStack.doExecute(NonDirtyingCapableWorkspaceCommandStack.java:68) at org.eclipse.emf.transaction.impl.AbstractTransactionalCommandStack.execute(AbstractTransactionalCommandStack.java:165) at org.eclipse.emf.transaction.impl.AbstractTransactionalCommandStack.execute(AbstractTransactionalCommandStack.java:219) at fr.obeo.smartea.core.rcp.ui.util.ViewpointHelper.getDView(ViewpointHelper.java:73) at fr.obeo.smartea.core.rcp.ui.util.ViewpointArtifactHelper.loadRepresentation(ViewpointArtifactHelper.java:391) at fr.obeo.smartea.core.rcp.ui.util.ViewpointArtifactHelper.openArtifactEditor(ViewpointArtifactHelper.java:719) at fr.obeo.smartea.core.rcp.ui.functions.OpenViewpointArtifactEditorFunction.doFunction(OpenViewpointArtifactEditorFunction.java:45) at fr.obeo.smartea.core.rcp.ui.functions.AbstractFunctionWithProgressMonitor$1.run(AbstractFunctionWithProgressMonitor.java:65) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:119)	4.0
id=389473	REOPENED	EMF	cdo.core	4.6	PC All	P3 blocker	Project Inbox	2012-09-13 02:58 EDT by	Joe Sobeos	2016-07-31 01:04 EDT (	1 user	We export changes on the client side and transform them to the server, where they get committed. Objects marked to get deleted (EcoreUtil.delete(object);) were not deleted on the server side.Looks like they get lost between export and import.Please have a look to exportChanges and importChanges in CDOTransactionImpl.For me detached objects are not handled.As a result the delted object keeps untouched. I would expect to get an updated cdo_version with a number < 0.How to reproduce:- delete an object (EcoreUtil.delete(object);) - call CDOTransactionImpl.exportChanges - call CDOTransactionImpl.importChanges-> check cdo_version of the object	CreatedPatchWe tried to patch the bug. Therefore we export detached objects and import them again. We don't know if it is the right way to fix the problem.Please review the attached file. Especially the importChanges changes.CreatedPatchCleaned up versionThe file you've attached is not a patch but the complete code of CDOTransactionImpl. I can not use it to see your specific changes. Can you provide me with a real patch?Comment onPatchNot a patch.Moving to the integration branch. Possible fixes can be ported to maintenance later.No activity or ping here for a month. Please reopen this bug if you feel a need.Problem still exists.We'll try to address open problems in 4.3 (master) first and then port fixes back to 4.2.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	10.0
id=433886	REOPENED	EMFCompare	Core	3.0.0	PC Windows NT	P3 normal	EMF Compare	2014-04-30 13:50 EDT by	Andreas Mayer	2015-12-29 09:47 EST (	2 users	If the matcher has no delegate, then createMatches() itself will create Match instances for all objects that have no id. However, these Match instances are only added to a temporary set instead of the given Comparison instance.	We lost this somehow back when we overhauled the matching algorithms for the content matcher to be better integrated in the process, in early 2013.This should be fixed in RC1, oncefinds its way into the code base.As seen on discussion from, the proposed review should restructure the non-matches in a proper hierarchy instead of addding them all at the root.CreatedPatch to add non-matches	3.0
id=446637	REOPENED	EMFT	MWE	unspecified	PC Windows NT	P3 enhancement	Project Inbox	2014-10-10 08:40 EDT by	Ed Willink	2014-10-10 09:31 EDT (	1 user	This is partially a duplicate ofthat diverted to other issues.Use of a nested workflow such as:Workflow { component = @GenerateLPG { syntaxName = "EssentialOCL" grammarPath = "platform:/resource/org.eclipse.ocl.examples.xtext.essentialocl/src/org/eclipse/ocl/examples/xtext/essentialocl/EssentialOCL.xtext" lpgExe = "${lpgExe}" lpgIncs = "${lpgIncs}" lpgOpts = "${lpgOpts}" }...works fine until the project build path is tidied up to exclude the copy of src/**/*.mwe2 to bin.Workaround: live with the extra bin clutter.Please ensure that *.mwe2's are resolved from the classpath src.	Referenced workflows are resolved from the classpath. There is no notion of src at runtime, thus I'll mark this as won't fix.Yes. Not a regression, started typing before a DUP appeared.But if resolution is from the classpath why does the MWE editor successfully resolve them when they are only in the src folder? This is the really confusing thing. MWE2 editor works, run-time fails.Maybe you want to reverse the bug into a missing MWE warning that the workflow is not on the classpath.(In reply to Ed Willink from)For the same reasons Java source files are resolvable from a Java editor. But if you don't compile them (read: copy the runtime artifacts to bin), they are not available at runtime.Same thing would happen with disabled auto-build - which is an analogy to filtering mwe2 from the bin filder.That's be an option.	3.0
id=445105	REOPENED	QVTd	Core	unspecified	PC Windows NT	P3 normal	Dummy Inox	2014-09-25 10:16 EDT by	Ed Willink	2015-04-30 05:04 EDT (	0 users	QVTd tooling currently uses the OCL Standard Library.Additional functionality may be required (certainly is for QVTo) so we should be using a QVTr/c Standard Library. Introduce it as an OCL extension to ensure that the tooling is extensible before we actually need it.	This proves a little harder than expected forcing clarification of imports.The minimal QVTd library support for Model::objectsOfKind(OclType) and Transformation::modelFor(TypedModel) extends qvtbase::Transformation and pivot::Model. So as a minimum, a library may extend two packages. Easily achieved by interpreting "library name : nsPfx = 'nsURI'" as a merge into "nsURI' rather than a document 'nsURI'.The library extends so we have to reference the Java Pivot metamodel and create a Java QVTbase metamodel.The QVTbase metamodel has unnavigable opposites terminating in the Pivot model, so the missing opposites need creating. Resolveable by creating a merge contribution rather than modifying the Pivot metamodel. See. The additional reference support requires useful extension to the GeneralOCLstdlib/GenerateMetamodel MWE2 scripts.OCL changes pushed to OCL master for M7.QVTbaseLibrary pushed to QVTd master for M7.(In reply to Ed Willink from)But these are M2 classes. The required QVTo functionality is for M1 classes. (OMG Issue raised for the confusion re-use of names at M1/M2 without clear namespaces.)(In reply to Ed Willink from)	3.0
id=438156	REOPENED	EMF	cdo.core	4.6	PC Windows 7	P3 enhancement	Project Inbox	2014-06-25 10:12 EDT by	Steve Monnier	2016-07-31 00:56 EDT (	2 users	CreatedPatch adding a cache for CDOIDExternal elementsHello,We are experiencing a drawback in performance from legacy mode to native mode when a reference to an external element (from the cdo repository) is accessed a significant number of times.In Native mode, CDOObjectImpl.dynamicGet delegates to the EStore (because the reference is not in the settings array). The CDOStore gets from the revision a CDOIDExternal which is then used in convertToEMF. In a test case with several CDOResource, it takes a significant time to process it.In Legacy mode, we directly had the referenced element as an attribute of the implementation class. I will add a JUnit to this bugzilla that focus on this CDOIDExternal.I do not think that this drawback is a bug, just a difference of architecture design. I have a patch which adds a cache for the CDOIDExternal in the CDOStore? Do you think it is a good way to improve the performance?Regards,Steve	CreatedJUnit that investigates how reference to external elements are stored.Patch modified for the master branch (I was on 4.2-maintenance branch when I wrote it) and pushed on gerrit ()As a matter of fact, this performance drawback can be work around using a MappedResourceLocator in the resourceSet or initializing a new map using the resourceSet setURIResourceMap method.I have Bugzilla_438156_Test.java to measure performance on many getter calls from CDO content to XMI content and on ResourceSet.getEObject(URI) in legacy/native and with/without MappedResourceLocator(MRL). This is the result with the proposed prototype of cache in CDOStoreImpl :----------------------------------------------------------------------------------------------------------------------------| | CDO -> XMI getter | XMI -> XMI getter | ResourceSet.getEObject() in CDO | ResourceSet.getEObject() in XMI |----------------------------------------------------------------------------------------------------------------------------|Native | 115 841 ms | 85 ms | 127 605 ms | 8 569 ms |----------------|-----------------------------------------------------------------------------------------------------------|Legacy | 103 ms | 83 ms | 108 394 ms | 6 581 ms |----------------|-----------------------------------------------------------------------------------------------------------|Native with MRL | 2 844 ms | 8 603 ms | 69 ms | 7 847 ms |----------------|-----------------------------------------------------------------------------------------------------------|Legacy with MRL | 107 ms | 49 ms | 7 374 ms | 5 626 ms |----------------------------------------------------------------------------------------------------------------------------|This JUnit show our use of CDO to have collaborative access to shared content without the use of lazy feature of CDO, then these times are not disturbed by network communication times.Then even using a MappedResourceLocator we have bad performance in native with CDO, in legacy performance are better because getter returns field value.The single case where CDO is better is in native for ResourceSet.getEObject().Then I reopens this bugzilla to improve these performance.CreatedResults of performance measure.As my table is not well displayed in ASCII, I have attached as a screenshot.Not that to execute the JUnit, we depend ofas there is a bug when using ResourceSet with connection aware URI.Note for me: check performance by using CDOResourceImpl.setIntrinsicIDToEObjectMap()/getIntrinsicIDToEObjectMap().has been raised to have CDOResourceImpl.intrinsicIDToEObjectMap works.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	9.0
id=459984	REOPENED	QVTd	Core	unspecified	PC Windows NT	P3 normal	Dummy Inox	2015-02-16 04:57 EST by	Ed Willink	2016-04-17 02:20 EDT (	1 user	Fixingenables the variables of e.g. RelToCore::RDomainPatternToMDBottomPatternSimpleNonVarExpr to be examined.All Variables appear in Relation::variable since this is the only option for composes.'all' includes the Relation variables and the RelationDomain variables.So as a minimum we have a surprise in that 'all' variables may have duplicate names; domain-scoped names can be re-used.From a practical point of view we have an inconvenience that structured elements are contained outside their logical structure and so the Outline to Editor navigation malfunctions.Going back to issue 9379, it seems that it was TemplateExp::bindsTo that was correctly changed to not-composes. The similar change to Pattern::bindsTo was misguided, and has caused the ripple 'cured' by adding Rule::variable.It looks like we need Rule::ownedVariables for the shared variables and Domain::ownedVariables for the domain-scoped variables. Then bindsTo/rootVariable refer to whatever is appropriate.	Semantically I don't see any practical use for having all variables in a relation statically derived during AS construction. At best, this information is used for middle model derivation and dependency analysis. I would go with your last option, having an ownedVariables for rules and domains, with rules ownedVariables holding shared variables. We could still provide the bindsTo (or variables) as a derived attribute, to facilitate some AS related operations. For the time being, the QVTr to QVTc transformation calculates the bindsTo (as the collection of all variables in the relation and its domains) during execution so we can continue to use this mechanism until the final change is made to the specification.Trying to fix name lookup from RelationCallExp's in which the name reference is restricted to the associated domain and so is unaffected by reuse of the same name in multiple domains...The current structure is really unhelpful. All variables are in Relation.variables, RelationDomain.bindsTo is empty. It is therefore necessary to do a deep analysis of the template expressions to partition Relation.variables into- variables declared by the Relation- variables declared by the DomainPatternA more elegant solution would be if a RelationDomain/DomainPattern.variables { composes } owned the per-domain variables. cf CorePattern.variables that QVT 1.2 Issue 10938 introduced.However QVT has one clear statement for Relation.variables. "The set of variables occurring in the relation. This set includes all the variables occurring in its domains and when and where clauses." This specifically includes all per-domain variables.If we introduce RelationDomain.variables : Variable[*] {composes}, we must adjust the description of Relation.variables to the more obvious all variables declared in the relation and 'initialized' by where predicates. The currently underspecified (Domain)Pattern.bindsTo remains redundant, but perhaps is just a non-containment duplicate of the RelationDomain.variables.But if the bindsTo attribute is there, why not just implement the logic to correctly populate it with references to the variables in the domain? Seems a less stressful change in the sense that we don't need to add new elements to the model.(In reply to Horacio Hoyos from)That certainly has the advantage of zero change to the QVT 1.2 models. We just have a clearer role for Pattern::bindsTo and so can specify it accordingly.But partitioning into 1+N variable containers means that the Relation::variable contains just the relation variables without requiring removal of relation.domain->selectByKind(RelationDomain).bindsTo.I guess we can leave model chnages for QVT 1.3/2.0.Pattern.bindsTo now contains all TemplateExp.bindsTo, but not tyhe _ variables from CollectionTemplateCS.rest.Relation.variable is unchanged, except in so far as _ variables are now allocated.Pushed to master for M6.(In reply to Ed Willink from)Revisiting while debugging QVTr2QVTc....The similar change to Pattern::bindsTo was correct, since some variables may be shared across patterns, therefore prohibiting composes for Pattern::bindsTo. The oversight was the lack of a new container - rectified by Relation::variable.The models are therefore ok-ish.Relation::variable owns all variables.RelationDomain::rootVariable identifies the pattern root.TemplateExpression::bindsTo identifies the template variable.Pattern::bindsTo is redundant, but conveniently summarises all variables defined or referenced within the pattern. (Perhaps what was meant by 'bound').The above matches the Luna M6 push.A question remains as to whether omission of _ variables from Pattern::bindsTo is helpful.(In reply to Ed Willink from)which incorrectly creates _n duplicates of named collection template members/rest.Revisiting while developing the undefined CollectionTemplate semantics where there seems to be some dubious pragmatism in excluding CollectionTemplate variables from the trace.This depends on how variables are categorized.For an ObjectTemplateExpa:A { b = c+d; e:E { f = c+d; }}a,e are bound variables - logically composed by the patternb is A::b, f is E::fc+d are referenced variables - may or may not be defined within the patternFor a CollectionTemplateExpq:Set(Set(R)){ s:Set(R){ t ++ u } ++ w }q,s are similarly bound variables - logically composed by the patternu,w are also logically composed by the patternt is a referenced variable, although if spelled as _, it is a placeholder logically composed by the patternTherefore perhaps a consistent policy is:a,b,q, s are bound alwaysu,w are bound unless spelled _c,d,t are never boundThe _ variables need to exist in the AS to accurately reproduce the CS, they do not however need to be exist in the QVTc where their effect is realized by a combination of including/excludes/at predicates.The same policy arises if we want to identify all variables that are defined in the pattern and which may be referenced from elsewhere.With this policy Pattern.bindsTo could have been composed, but since it isn't, the Relation.variables has to be much larger and pruned by RelToCore. _ variables are always owned by Relation.variables. The (potentially composed) Pattern.bindsTo corresponds to the middle trace entries.	7.0
id=439337	REOPENED	EMF	cdo.core	4.6	PC Windows 8	P3 normal	Esteban DUGUEPEROUX	2014-07-10 09:11 EDT by	Esteban DUGUEPEROUX	2016-07-31 00:49 EDT (	0 users	With our CDO based application, with which we use EContentAdapter to have all model elements loaded, we use CDORevisions prefetch to enhance load time. In addition we use locks and display decorators to indicate to end-user if a CDOObject is locked or not and if it is locked by current user or another one. For that we use CDOObject.cdoLockState() API, but as the CDOView's CDOLockState cache is empty at the beginning, even after CDORevisions prefetch, a LockStateRequest is sent to the server for each first call to CDOObject.cdoLockState() on a CDOObject.It is the bottleneck of our CDO based application loading time.I'll submit a Gerrit change-set to allow CDOLockState prefetch with tests.	A first change-set has been submited to Gerrit :.Merged as acd14288558beb396785c1464f67b6d431f5442cI reopen this bugzilla about an issue with lock states prefetching seen by Eike :With several CDOViews, saying A and B :1. CDOView A has called "CDOView.options().setLockStatePrefetchEnabled(true);" to enable lock state prefetch.2. Through CDOView B revisions are loaded from server.3. Then the LockStatePrefetcher will loads lock states and create CDOObjects for CDOView A while it is not especially useful for this view because revisions loading has been requested by CDOView B.New Gerrit change created:Gerrit changewas merged to [master].Commit:Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	7.0
id=502531	REOPENED	Papyrus	Diagram	2.1.0	PC Windows 10	P3 enhancement	Fanch Bonnabesse	2016-09-29 04:57 EDT by	Sebastien Gabel	2016-12-13 09:01 EST (	4 users	Oxygen as target of this enhancement.The idea is to have the possibility to specify an image path as it is already possible for SVG through the property 'svgFile'. This image (png, gif, bmp,...) should be displayed into the symbol compartment.	New Gerrit change created:Gerrit changewas merged to [master].Commit:This bug can now be marked as resolved fixed.I reopen the bug, it seems there are side effect with Actors and others elements.I got exception when i try to create action, initialState, ...:java.io.IOException: SAX2 driver class org.apache.xerces.parsers.SAXParser not found at org.apache.batik.dom.util.SAXDocumentFactory.createDocument(Unknown Source) at org.apache.batik.dom.util.SAXDocumentFactory.createDocument(Unknown Source) at org.apache.batik.dom.svg.SAXSVGDocumentFactory.createDocument(Unknown Source) at org.eclipse.papyrus.infra.gmfdiag.common.service.shape.AbstractShapeProvider.doGetSVGDocument(AbstractShapeProvider.java:197) at org.eclipse.papyrus.infra.gmfdiag.common.service.shape.AbstractShapeProvider.getSVGDocument(AbstractShapeProvider.java:170) at org.eclipse.papyrus.infra.gmfdiag.common.service.shape.AbstractShapeProvider.getSVGDocument(AbstractShapeProvider.java:152) at org.eclipse.papyrus.infra.gmfdiag.common.providers.StyleBasedShapeProvider.getSVGDocument(StyleBasedShapeProvider.java:171) at org.eclipse.papyrus.infra.gmfdiag.common.providers.StyleBasedShapeProvider.doGetShapes(StyleBasedShapeProvider.java:88) at org.eclipse.papyrus.infra.gmfdiag.common.providers.StyleBasedShapeProvider.getShapes(StyleBasedShapeProvider.java:79) at org.eclipse.papyrus.infra.gmfdiag.common.service.shape.GetShapesForViewOperation.execute(GetShapesForViewOperation.java:49) at org.eclipse.papyrus.infra.gmfdiag.common.service.shape.GetShapesForViewOperation.execute(GetShapesForViewOperation.java:1) at org.eclipse.gmf.runtime.common.core.service.ExecutionStrategy$4.execute(ExecutionStrategy.java:181) at org.eclipse.gmf.runtime.common.core.service.Service.execute(Service.java:651) at org.eclipse.papyrus.infra.gmfdiag.common.service.shape.ShapeService.hasShapeToDisplay(ShapeService.java:68) at org.eclipse.papyrus.infra.gmfdiag.common.editpart.NodeEditPart.refreshSVGPath(NodeEditPart.java:101) at org.eclipse.papyrus.infra.gmfdiag.common.editpart.NodeEditPart.refreshVisuals(NodeEditPart.java:178) at org.eclipse.papyrus.uml.diagram.common.editparts.UMLNodeEditPart.refreshVisuals(UMLNodeEditPart.java:254) at org.eclipse.papyrus.uml.diagram.common.editparts.NamedElementEditPart.refreshVisuals(NamedElementEditPart.java:118) at org.eclipse.papyrus.uml.diagram.common.editparts.RoundedCompartmentEditPart.refreshVisuals(RoundedCompartmentEditPart.java:181) at org.eclipse.gef.editparts.AbstractEditPart.refresh(AbstractEditPart.java:725) at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(AbstractGraphicalEditPart.java:644) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.access$3(GraphicalEditPart.java:1) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart$3.run(GraphicalEditPart.java:861) at org.eclipse.papyrus.infra.emf.readonly.PapyrusROTransactionalEditingDomain.runExclusive(PapyrusROTransactionalEditingDomain.java:271) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.refresh(GraphicalEditPart.java:851) at org.eclipse.papyrus.uml.diagram.common.editparts.UMLNodeEditPart.refresh(UMLNodeEditPart.java:99) at org.eclipse.papyrus.uml.diagram.common.editparts.NamedElementEditPart.refresh(NamedElementEditPart.java:108) at org.eclipse.gef.editparts.AbstractEditPart.addNotify(AbstractEditPart.java:253) at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(AbstractGraphicalEditPart.java:223) at org.eclipse.gef.editparts.AbstractEditPart.addChild(AbstractEditPart.java:212) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.addChild(GraphicalEditPart.java:1319) at org.eclipse.gef.editparts.AbstractEditPart.refreshChildren(AbstractEditPart.java:781) at org.eclipse.gef.editparts.AbstractEditPart.refresh(AbstractEditPart.java:726) at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(AbstractGraphicalEditPart.java:644) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.access$3(GraphicalEditPart.java:1) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart$3.run(GraphicalEditPart.java:861) at org.eclipse.papyrus.infra.emf.readonly.PapyrusROTransactionalEditingDomain.runExclusive(PapyrusROTransactionalEditingDomain.java:271) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.refresh(GraphicalEditPart.java:851) at org.eclipse.papyrus.infra.gmfdiag.common.helper.DiagramHelper.refresh(DiagramHelper.java:55) at org.eclipse.papyrus.infra.gmfdiag.common.helper.DiagramHelper.refresh(DiagramHelper.java:64) at org.eclipse.papyrus.infra.gmfdiag.common.helper.DiagramHelper.refresh(DiagramHelper.java:64) at org.eclipse.papyrus.infra.gmfdiag.common.helper.DiagramHelper.refresh(DiagramHelper.java:64) at org.eclipse.papyrus.infra.gmfdiag.common.helper.DiagramHelper.refresh(DiagramHelper.java:84) at org.eclipse.papyrus.infra.gmfdiag.common.helper.DiagramHelper$1.run(DiagramHelper.java:149) at org.eclipse.papyrus.infra.core.utils.TransactionPrecommitExecutor$1.doExecute(TransactionPrecommitExecutor.java:133) at org.eclipse.emf.transaction.RecordingCommand.execute(RecordingCommand.java:135) at org.eclipse.emf.transaction.util.TriggerCommand.execute(TriggerCommand.java:113) at org.eclipse.papyrus.infra.emf.gmf.command.NotifyingWorkspaceCommandStack.executeTriggers(NotifyingWorkspaceCommandStack.java:418) at org.eclipse.papyrus.infra.core.utils.TransactionPrecommitExecutor.transactionClosing(TransactionPrecommitExecutor.java:164) at org.eclipse.emf.transaction.impl.TransactionalEditingDomainImpl$LifecycleImpl.fireLifecycleEvent(TransactionalEditingDomainImpl.java:1380) at org.eclipse.emf.transaction.impl.TransactionalEditingDomainImpl$LifecycleImpl.transactionClosing(TransactionalEditingDomainImpl.java:1406) at org.eclipse.emf.transaction.impl.TransactionImpl.commit(TransactionImpl.java:398) at org.eclipse.emf.workspace.AbstractEMFOperation.execute(AbstractEMFOperation.java:155) at org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:403) at org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134) at org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:403) at org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134) at org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:403) at org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134) at org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:488) at org.eclipse.papyrus.infra.emf.gmf.command.CheckedOperationHistory.doExecute(CheckedOperationHistory.java:206) at org.eclipse.papyrus.infra.emf.gmf.command.CheckedOperationHistory.execute(CheckedOperationHistory.java:195) at org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:206) at org.eclipse.papyrus.commands.CheckedDiagramCommandStack.execute(CheckedDiagramCommandStack.java:53) at org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:156) at org.eclipse.gef.tools.AbstractTool.executeCommand(AbstractTool.java:425) at org.eclipse.gef.tools.AbstractTool.executeCurrentCommand(AbstractTool.java:438) at org.eclipse.papyrus.uml.diagram.common.service.AspectUnspecifiedTypeCreationTool.performCreation(AspectUnspecifiedTypeCreationTool.java:159) at org.eclipse.gef.tools.CreationTool.handleButtonUp(CreationTool.java:189) at org.eclipse.gef.tools.AbstractTool.mouseUp(AbstractTool.java:1200) at org.eclipse.gef.EditDomain.mouseUp(EditDomain.java:301) at org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased(DomainEventDispatcher.java:380) at org.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp(LightweightSystem.java:548) at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:221) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:86) at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4431) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1079) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4241) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3820) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$4.run(PartRenderingEngine.java:1133) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1022) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:153) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:698) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:610) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:148) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:138) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:388) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:653) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:590) at org.eclipse.equinox.launcher.Main.run(Main.java:1499) at org.eclipse.equinox.launcher.Main.main(Main.java:1472)This error seams to occurs only in a development environment. I can't reproduce the bug in the papyrus rcp product version and in an install version.To be confirmed.This bug is not related to this original bug.	6.0
id=313777	REOPENED	Papyrus	Core	unspecified	PC Windows XP	P3 normal	Tristan Faure	2010-05-20 13:15 EDT by	Tristan Faure	2012-03-20 09:59 EDT (	1 user	Papyrus needs some widgets to display information to users:a popup, the user shall have popups with the same look and feel => the popup is a widget "synchrnonous" this means the user shall answer directly after the notificationthe asynchronous popup, this widget displays information to the user temporarythe asynchrnous notification. Papyrus shall provide a view containing messages (not log) to users. This view can provide actions accessible by buttons.To make easy the call of these widgets a notification builder is necesary. This framework will allow the developer to express the "what" and not the "how"	implemented.how to document will follow.See NotificationBuilder Class to create Notificationsreopened : some branch modifications need trunk backport :rev7531 and rev7420	2.0
id=447580	REOPENED	Papyrus	Core	1.1.0	All All	P3 normal	Francois Le Fevre	2014-10-16 10:45 EDT by	Francois Le Fevre	2015-07-28 04:50 EDT (	2 users	It will be usefull to have the possibility to generate at the build time the code from the emf models (ecore and genmodel).A sub project in the releng folder will be created for that purpose. It will be used as a maven plugin to generate and compile code of eclipse papyrus plugin.This new methodology has to be validated by papyrus core member on a choosen plugin before to be used at higher scale.	A full example has been setup and validate with the Constraints plugin.It calls the emfgen maven plugin that has been released into the newly papyrus nexus official repository:.Dear all,due to the unmergered branch, we reopen this bug to redeploy the plugin.Gerrit change submitted:WARNING: this patchset contains 1151 new lines of code and may require a Contribution Questionnaire (CQ) if the author is not a committer on the project. Please see:WARNING: this patchset contains 1152 new lines of code and may require a Contribution Questionnaire (CQ) if the author is not a committer on the project. Please see:WARNING: this patchset contains 1153 new lines of code and may require a Contribution Questionnaire (CQ) if the author is not a committer on the project. Please see:WARNING: this patchset contains 14383 new lines of code and may require a Contribution Questionnaire (CQ) if the author is not a committer on the project. Please see:	7.0
id=359992	REOPENED	EMF	cdo.legacy	4.6	PC Linux	P3 normal	Christian W. Damus	2011-10-05 10:19 EDT by	Esteban DUGUEPEROUX	2016-07-31 01:03 EDT (	1 user	Build Identifier: CDO Model Repository SDK 4.0.0.v20110831-1303 org.eclipse.emf.cdo.sdk.feature.groupIn legacy mode, with CDOTransaction.options().addChangeSubscriptionPolicy(CDOAdapterPolicy.ALL) set, on commit of a new legacy object added, the remote clients receives a CDODeltaNotification with newValue instanceof CDOLegacyWrapperReproducible: Always	CreatedA fix which call getEObject() to get the wrapped objectCreatedsecond release of the fix to fix getOldValue()CreatedA patch of the Bugzilla_355915_Test to test these casesHi Esteban,thanks for the patch. But somehow it seems to be outdated. I cannot apply it neither non head nor on the maintenance branch. Could you please update it?Thanks.Just to avoid confusions: I meant the test, not the fix ;)CreatedThe complete test caseHi,I hava attached the complete test case to avoid conflict on patch application.CreatedTest v1Hi Esteban,thanks for the test. I attached it as patch and renamed it to make align it with the bug number.CreatedTest v1Mixed test and fix. This is the test.CreatedPatch v1And here comes the patch. I changed it a bit and moved the conversion to the adapt method.Assuming 4.1Correct assumption. I'll provide a bug for 4.0 maintenance as soon as HEAD is fixed.CreatedPatch v2 (incl. test)I removed the reference to the test forthat does not compile. Executing tests...All tests pass. Good work!Committed revision 9467And revision 9468 ;-)Hudson tests keep failing (in legacy scenarios) with:junit.framework.AssertionFailedError: expected:<true> but was:<false> at junit.framework.Assert.fail(Assert.java:47) at junit.framework.Assert.failNotEquals(Assert.java:283) at junit.framework.Assert.assertEquals(Assert.java:64) at junit.framework.Assert.assertEquals(Assert.java:143) at junit.framework.Assert.assertEquals(Assert.java:149) at org.eclipse.emf.cdo.tests.bugzilla.Bugzilla_359992_Test.testDeltaNotification(Bugzilla_359992_Test.java:140) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at junit.framework.TestCase.runTest(TestCase.java:168) at org.eclipse.net4j.util.tests.AbstractOMTest.runBare(AbstractOMTest.java:218) at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:526) at junit.framework.TestResult$1.protect(TestResult.java:110) at junit.framework.TestResult.runProtected(TestResult.java:128) at junit.framework.TestResult.run(TestResult.java:113) at junit.framework.TestCase.run(TestCase.java:124) at org.eclipse.net4j.util.tests.AbstractOMTest.run(AbstractOMTest.java:264) at junit.framework.TestSuite.runTest(TestSuite.java:243) at org.eclipse.emf.cdo.tests.config.impl.ConfigTestSuite$TestWrapper.runTest(ConfigTestSuite.java:119) at junit.framework.TestSuite.run(TestSuite.java:238) at junit.framework.TestSuite.runTest(TestSuite.java:243) at junit.framework.TestSuite.run(TestSuite.java:238) at junit.framework.TestSuite.runTest(TestSuite.java:243) at junit.framework.TestSuite.run(TestSuite.java:238) at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)Please investigateEike,the patch was committed on 9th october and build #1884 passed on 10th. As far as I remember this test failed several times before, so I do not think that there is a direct relationship between the test failure in this bug. I think we should open a new bug for this issue as it seems that legacy might have a general problem with delta notification or worse: There is a timing issue related to delta notifications.I'm not sure about that. The test outcome depends on timing (timeouts) and that's always a little indeterministic.Ah. I did not recognize that the failing build was due to the test of this bug. I thought it was a test method from another test.It might be a small mistake in the test logic (Should block until the notifier was notified).Moving all open issues to 4.2. Open bugs can be ported to 4.1 maintenance after they've been fixed in master.Hi Christian, I assign this legacy mode zilla to you, just in case you're ineterested. Don't feel obliged ;-)We'll try to address open problems in 4.3 (master) first and then port fixes back to 4.2.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	24.0
id=450355	REOPENED	Gendoc	Others	unspecified	PC Windows 7	P3 enhancement	Project Inbox	2014-11-06 09:47 EST by	Jacques SERONIE-VIVIEN	2015-02-09 07:12 EST (	3 users	Hi Gendoc team.It would be nice to provide the same functionality as ODT file for standard plain TXT files.	Hi,You can already generate plain TXT files with Acceleo ()The main added value of Gendoc over Acceleo is to take into account the text formatting according to text editor standards.AnneHi!Having this capability in gendoc is nevertheless valuable, as it permits to have all configuration for the generation inside the template, which is not the case with acceleo.I therefore suggest to re-open this request.Hi,Ok my answer was too fast, I reopen the bug.	4.0
id=142270	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P3 enhancement	Inbox	2006-05-17 12:05 EDT by	Jerome Louvel	2010-07-19 12:27 EDT (	2 users	From a newsgroup thread: "Subgraphs supported": 1) I have root nodes of type A and B 2) Root nodes A contain child nodes 3) Root nodes B don't contain anything 4) Child nodes of A can be connected to root nodes B 5) Root nodes A can be collapsed/expanded while retaining the visual links to root nodes BI was looking initially for something like subgraphs, but compartments could work well too. My main concern is about the handling of links: 1) Will I be able to link child nodes of A (within their compartment) to root B nodes? 2) If so, will the links still be displayed if I collapse the compartment? ---To this, Alex Shatalin replied:Yes it works now.No. Currently only "visible" links are drawn on diagram. If you'd like to "reconnect" your links on collapsing the compartment, I suppose you have to implement this functionality by hand. I think, you can create/remove corresponding links, but it's better to ask somebody from the runtime team about this part of functionality. ---Would it be possible to add support for this feature (collapsible) in the GMF runtime? If not, could someone give details on how to manually workaround this issue?Regards,Jerome	Not sure I understand this request. Compartments are collapsible by default in the runtime as long as the view has the DrawerStyle installed on it (installed by default with ResizableCompartmentViewFactory) and the EditPart is subclassing from the ResizableCompartmentEditPart.You can see this demonstrated in the logic example:1. Create a circuit2. Create a LED inside the circuit3. Create a LED outside the circuit4. Connection the 2 LED's together5. Select the compartment and click on the triagle in the top-left corner6. Notice the LED and the wire disappear.7. Click triangle again and notice the LED and the wire reappear.Hi Steven,Thanks for looking into that. Actually what is needed is a way to keep the wire (or link) visible despite the fact that the compartment is collapsed.It could be even smarter if multiple wires were drawn, from LEDs inside the compartment to a single LED outside of it. In this case, if would be nice to collapse the two links into a single aggregate one.Hope that clarifies the need.There's no plans to address this explicitly in the runtime. To me it depends on the specific domain and how they want to represent connections. It would be presumptious of the runtime to decide where to reconnect the connections or how to aggregate them.To do this:- You would need to listen to the DrawerStyle in your compartment editpart or editpolicy.- On handling of the collapse event, find the connections inside the container you wish to reorient and then send a ReconnectRequest to the new target. (i.e. parent EditPart that contains the connection. Or for the aggregate usecase create a new connection that itself listens to the collapse event on the event notification to delete itself when the compartment is being reopened.I've worked with other graphical frameworks (JViews SDM) that had direct support for similar features so I was expecting something similar.Ideally, you should have an option at modeling time to decide how to represent links attached to hidden nodes: 1) Hide the link (current behavior) 2) Show all the links by visually connecting them to the first visible ancestor compartment 3) Similar to 2) by with the automatic aggregation/expansion of links attached to the same "visual" source and target (even if the model source and target are different).Maybe you want to consider that for a future release at least.Thanks,Jeromesure... I'll move it to "enhancement"Hello Steven,I would like to know the status of this enhancement.I don't know if you did it or intend to do it but I want to tell that I share the opinion of Jerome as it should be a reasonable to ask this be native.For an end-user I think it's quite annoying to see the links disappear.Regards,Ivan[GMF Restructure]: product GMF and componentRuntime Diagram was the original product and component for this bug	7.0
id=148408	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P3 enhancement	Inbox	2006-06-23 12:24 EDT by	Randy Hudson	2006-06-23 14:55 EDT (	0 users	ShapeEditPart assumes its Shape's constraint is an instance of Bounds, and that its parent's layout uses Rectangle as its constraint. What prevents a shape from being used in the context of a different layout manager, such as Flow or Border?	ShapeEditPart currently matches up with the AbstractShapeViewFactory which installs the ShapeStyle by default. I think clients that install with Flow layout, the layout manager would simply ignore the location constraint.But FlowLayout is just one specific layout. There are other layouts that take constraints that aren't rectangles.It would me more reusable if the method were called refreshConstraint, and it did nothing by default. It might make sense to delegate to the primary drag role policy, or even the parent editpart (or its layout policy), to do the actual refresh of whatever the constraint is.This is works as designed, but I can move it to enhancement for future consideration...I suppose the only issue here is the method's name. It makes sense for GMF to support model<-->draw2d mappings for constraints it knows about. It only knows about XYLayout, I assume, so there's no big if-else statement or anything like that. The only downside is that introducing new constraint support requires subclassing. It might be cool for GMF or GEF to support delegating to the proper place to handle the mapping.[GMF Restructure]: product GMF and component Runtime Diagram was the original product and component for this bug	5.0
id=240890	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P3 normal	Inbox	2008-07-15 11:26 EDT by	Matthew Mazaika	2010-11-14 11:25 EST (	5 users	Source File:Referenced File:	Seein 240753*** This bug has been marked as a duplicate of***The link for isCopyAlways() points to the following page:It should be "/clipboard/core" rather than "/core/clipboard"CreatedPatchContains fix as requested in.[GMF Restructure]: product GMF and componentRuntime was the original product and component for this bug	4.0
id=195272	REOPENED	GMF-Tooling	Core	2.0	PC Windows XP	P3 normal	Project Inbox	2007-07-03 10:25 EDT by	Andreas tum Suden	2011-05-01 08:12 EDT (	3 users	Build ID: I20070625-1500Steps To Reproduce:My metamodel looks like this:- abstract NamedElement- abstract Classifier extends NamedElement- Class extends Classifier- DataType extends Classifier- abstract ExternalType extends Classifier- ExternalDataType extends DataType, ExternalType- Enumeration extends DataTypeI've generated a diagram editor with the nodes Class, DataType, ExternalDataType, Enumeration.Creation of the nodes Class and DataType works well. Each time i try to create an ExternalDataType or Enumeration the following exception occurs.The elements are not on the diagram, but they are stored in the model file when i save the file.Stack Trace:org.eclipse.core.commands.ExecutionException: While executing the operation, an exception occurredat org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:519)at org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:205)at org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:168)at org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:155)at org.eclipse.gef.tools.AbstractTool.executeCommand(AbstractTool.java:388)at org.eclipse.gef.tools.AbstractTool.executeCurrentCommand(AbstractTool.java:400)at org.eclipse.gmf.runtime.diagram.ui.tools.CreationTool.performCreation(CreationTool.java:133)at org.eclipse.gef.tools.CreationTool.handleButtonUp(CreationTool.java:178)at org.eclipse.gef.tools.AbstractTool.mouseUp(AbstractTool.java:1053)at org.eclipse.gef.EditDomain.mouseUp(EditDomain.java:259)at org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased(DomainEventDispatcher.java:374)at org.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp(LightweightSystem.java:538)at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:206)at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)at java.lang.reflect.Method.invoke(Unknown Source)at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)at org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)at org.eclipse.equinox.launcher.Main.run(Main.java:1169)at org.eclipse.equinox.launcher.Main.main(Main.java:1144)Caused by: org.eclipse.jface.util.Assert$AssertionFailedException: null argument;failed to create a viewat org.eclipse.jface.util.Assert.isNotNull(Assert.java:153)at org.eclipse.gmf.runtime.diagram.ui.commands.CreateCommand.doExecuteWithResult(CreateCommand.java:99)at org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand.doExecute(AbstractTransactionalCommand.java:246)at org.eclipse.emf.workspace.AbstractEMFOperation.execute(AbstractEMFOperation.java:137)at org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:406)at org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134)at org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:406)at org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134)at org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:406)at org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134)at org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:511)... 37 more	By the way. The editor with the same metamodel has worked in earlier GMF versions (2.0M5 - 2.0M7). I think its a problem since 2.0RC2 or RC3.Createdsimple gmf demo of the bugI've created a simple demo to demonstrate the bug.Please have a look at it. It's really a serious bug.After debugging into the code we've identified the problem.It's located in the generated class ???VisualIDRegistry.The method getNodeVisualID is looking for the supertype of a requesting domain element. It returns the first available supertype in the inheritance hierarchy, whether there is a more specialized type.The simplest way to fix this is just to switch the sequence of "switch" and "if" operations.Createdsimple gmf demo of the bugI have the same behavior. I have an ecore file containing a root file and one class. The root element contains to references on the other class. It all works fine but my diagram editor only displays the element which is mentioned first in the gmfmap file. Each time i try to create the second one i got the same exception as shown above. If i save the file my model also contains both entries.The method getNodeVisualID in the TestVisualIDRegistry file always returns the visual id for the first element. public static int getNodeVisualID(View containerView, EObject domainElement) { if (domainElement == null || !RootEditPart.MODEL_ID .equals(test.diagram.part.TestVisualIDRegistry .getModelID(containerView))) { return -1; } switch (test.diagram.part.TestVisualIDRegistry .getVisualID(containerView)) { case RootEditPart.VISUAL_ID: if (TestPackage.eINSTANCE.getElem1().isSuperTypeOf( domainElement.eClass())) { return Elem1EditPart.VISUAL_ID; } if (TestPackage.eINSTANCE.getElem1().isSuperTypeOf( domainElement.eClass())) { return Elem2EditPart.VISUAL_ID; } break; } return -1; }Changing componentTo solve this problem I suggest adding appropriate constraints to corresponding NodeMappings helping GMF to clearly distinguish between these two types of NodeMappings based on domain model element only. In particular If you have:- EClass <Class1>- EClass <Class2> extends <Class1>- Two node mappings – NodeMapping <NodeMapping1> for <Class1> and <NodeMapping2> for <Class2>Then this information is not enough for GMF to generate correctly working code. In particular, it is not clear which diagram node should be created for an instance of <Class2> (both existing NodeMappings are able to map this domain model element to the diagram node).To resolve this conflict I suggest adding OCL constraint into the mapping model. You can add the following constraint to the <NodeMapping1>: “not oclIsKindOf(<yourPackage>::<Class2>)” or “oclIsTypeOf(<yourPackage>::<Class1>)”. The difference between these two OCL constraints is obvious: in first case you “exclude” only <Class2> from <NodeMapping1> (possibly added/existing EClass <Class3> extends <Class1> will still be mapped as <NodeMapping1>) while in the second case you are explicitly mapping only <Class1> instances using <NodeMapping1>.In prev. versions of GMF generated diagrams update procedure was not so strict and you were able to create apparently correct diagram nodes, but the following diagram reopening will probably break the picture and in any case the original diagram description (mapping model) contain errors which should be corrected in a way suggested above.Same problem could be faced with LinkMappings and can be resolved in a similar way.As an example of the diagram describing similar node structure with corresponding constraints specified you can take org.eclipse.gmf.ecore.editor plugin with all necessary model files inside. This plugin could be helpful as en example of class-like diagrams you are developing AFAIU. ;-)Concerning exception attached to the request - if you think this is not a good way to show that mapping model contains errors or if exception appear again after specifying correct constraints in a mapping please reopen the request and we will suppress it.hi alex,your advice works perfectly.but in deed it's not a good way to show that the mapping model contains some errors. in my case i didn't suppose that the mapping model was wrong.in general i think that this kind of model inheritance is wide spread and many users could have the same problem. so i would prefer a direct feedback when validating the mapping model.(In reply to)Then let's say that this is a request concerning the validation - GMF should provide warning message in this situation and probably suppress an exception you've reported in the original description.(In reply to)I think this would be a good solution.Moving to 2.1 timeframe. Is this really critical?Moving to the next version[GMF Restructure]: product GMF and componentGeneration was the original product and component for this bug	13.0
id=341422	REOPENED	Graphiti	Core	0.7.0	All All	P3 enhancement	Project Inbox	2011-03-30 16:09 EDT by	Rhett Hudson	2016-07-04 09:48 EDT (	3 users	Build Identifier: Graphiti's DiagramEditor provides a pallete of tools for that include some standard tools that cannot be changed by the client programmer. These include the PanningSelectionTool and the MarqueeSelectionTool. Currently, the drag tracker that is part of the PanningSelectionTool and the MarqueeSelectionTool itself are both created with a behavioral property that causes them to include only nodes when the user drags out a selection marquee.To change the behavior to, for instance, include connections as well as nodes, the client programmer has to extend three or four internal classes just to call setMarqueeBehavior() on the selection tools during creation.It would be nice if Graphiti supported an interface that allowed the client programmer to change the behavior. This would avoid having to extend those internal classes. It would also support an end user preference for including connections that are entirely inside the selection marquee or those which are touched by it.Reproducible: Always	Out-of-scope for Juno, unless there are contributions in this areaI've had to revisit this after the 0.9 refactor. The default drag tracker for marquee selection is created by an anonymous class created in DiagramEditor's configureGraphicalViewer() method. This object is an instance of ScalableRootEditPartAnimated.It would be nice if I could optionally provide a DragTracker factory that ScalableRootEditPartAnimated could use instead of its simple default implementation. That would allow me to set up the DragTracker in the manner that I desired.Any news on this issue? I´m looking into DiagramBehavior´s configureGraphicalViewer, is there a workaround to modify the marquee selection behavior as of today?(In reply to Ignacio Ibanez from)Sorry, no news. I simply did not have this on my radar. But as I wrote, I'm open for ideas and contributions here.On the other hand I'm afraid that for the current dev cycle for Eclipse Neon and Graphiti 0.13.0 this is too late, since M6 has passed which means API freeze. but I can put tis on the topics list for the next Graphiti release as part of Eclipse O...MichaelHi Michael,I can tell you what I tried, though it might be perfectly useless.Based on what I read around regarding GEF I tried something along these lines:In my Diagram Behavior class, calling either in initializeGraphicalViewer() or elsewhere:... updateToolEntryProperty(getPaletteBehavior().getPaletteRoot().getChildren(), GFMarqueeToolEntry.class, MarqueeSelectionTool.PROPERTY_MARQUEE_BEHAVIOR, MarqueeSelectionTool.BEHAVIOR_NODES_CONTAINED_AND_RELATED_CONNECTIONS);...private static void updateToolEntryProperty(List<?> paletteContainerList, Class<? extends ToolEntry> toolEntryClass, Object property, Object value) { for (Object paletteEntry : paletteContainerList) { if (paletteEntry instanceof PaletteContainer) { updateToolEntryProperty(((PaletteContainer) paletteEntry).getChildren(), toolEntryClass, property, value); } if (toolEntryClass.isInstance(paletteEntry)) { ((ToolEntry) paletteEntry).setToolProperty(property, value); return; } } }Which did not work. The other option I thought of required extending/overriding classes/methods 3-4 layers deep into graphiti code iirc. This issue, in my scenario, seems to be related toas the selection behavior is not consistent between marquee and ctrl-A, and both are hard/impossible to customize without deep hack & slash.Thanks for your time, any ideas/updates on these issues will be greatly appreciated.From Ignacio's hint, to override something in your own Diagram Behavior, I seem to have something that could work.This is for cases where the user selects several diagram elements with the mouse drag to do a marquee selection.I'm not using a palette marquee tool.When trying it out, I indeed get the contained connections in the selection as well.I'm overriding with : protected void configureGraphicalViewer() { ScrollingGraphicalViewer viewer = (ScrollingGraphicalViewer) getDiagramContainer().getGraphicalViewer(); ScalableRootEditPartAnimated rootEditPart = new ScalableRootEditPartAnimated(viewer, getConfigurationProvider()) { protected GridLayer createGridLayer() { return new org.eclipse.graphiti.ui.internal.util.draw2d.GridLayer( (IConfigurationProviderInternal) getConfigurationProvider()); } @Override public DragTracker getDragTracker(Request req) { GFMarqueeDragTracker trckr= new GFMarqueeDragTracker(this); trckr.setMarqueeBehavior(GFMarqueeSelectionTool.BEHAVIOR_NODES_AND_CONNECTIONS); return trckr; } }; // configure ZoomManager viewer.setRootEditPart(rootEditPart); // support // animation of the zoom ZoomManager zoomManager = rootEditPart.getZoomManager(); List<String> zoomLevels = new ArrayList<String>(3); zoomLevels.add(ZoomManager.FIT_ALL); zoomLevels.add(ZoomManager.FIT_WIDTH); zoomLevels.add(ZoomManager.FIT_HEIGHT); zoomManager.setZoomLevelContributions(zoomLevels); IToolBehaviorProvider toolBehaviorProvider = getConfigurationProvider().getDiagramTypeProvider() .getCurrentToolBehaviorProvider(); zoomManager.setZoomLevels(toolBehaviorProvider.getZoomLevels()); this.initActionRegistry(zoomManager); // set the keyhandler. viewer.setKeyHandler((new GraphicalViewerKeyHandler(viewer)).setParent(getCommonKeyHandler())); // settings for grid and guides Diagram diagram = getConfigurationProvider().getDiagram(); boolean snapToGrid = diagram.isSnapToGrid(); int horizontalGridUnit = diagram.getGridUnit(); int verticalGridUnit = diagram.getVerticalGridUnit(); if (verticalGridUnit == -1) { // No vertical grid unit set (or old diagram before 0.8): use // vertical grid unit verticalGridUnit = horizontalGridUnit; } boolean gridVisisble = (horizontalGridUnit > 0) && (verticalGridUnit > 0); viewer.setProperty(SnapToGrid.PROPERTY_GRID_VISIBLE, new Boolean(gridVisisble)); viewer.setProperty(SnapToGrid.PROPERTY_GRID_ENABLED, new Boolean(snapToGrid)); viewer.setProperty(SnapToGrid.PROPERTY_GRID_SPACING, new Dimension(horizontalGridUnit, verticalGridUnit)); viewer.setProperty(SnapToGeometry.PROPERTY_SNAP_ENABLED, toolBehaviorProvider.isShowGuides()); // context button manager IConfigurationProviderInternal configurationProvider = (IConfigurationProviderInternal) this .getConfigurationProvider(); configurationProvider.setContextButtonManager(new ContextButtonManagerForPad(this, configurationProvider .getResourceRegistry())); }The important part in here is the getDragTracker() change, that sets the selection mode for each created marquee selection tool.The rest of the method implementation is just copied over from the base class, except that I had to remove : /* sw: make scroll bars always visible */ if (getDiagramScrollingBehavior() == DiagramScrollingBehavior.SCROLLBARS_ALWAYS_VISIBLE) { GFFigureCanvas figureCanvas = getGFFigureCanvas(); if (figureCanvas != null) { figureCanvas.setScrollBarVisibility(FigureCanvas.ALWAYS); } }as this uses private methods. As it was marked as deprecated I hope this is not a problem!?Erwin,thanks for this proposal. Without checking if there are further changes in your code snippet for that method, it would be a rather easy change to extract the getDragDracker method and make it overridable. Would that already help?Regardsing the decprecated stuff: removing should not be an issue as long as your tool does not use that mode.Thanks,MichaelHi Michael,An overridable method getDragtracker() on DiagramBehavior would indeed make this easier and would also provide better separation from the other things done in the configureGraphicalViewer() method. Which would reduce maintainability risks when upgrading to future Graphiti versions.So yes, that would be great!On the other hand, the approach above is not yet complete I guess. I.e. any other places where marquee selections can be triggered (where instances of the DragTracker or even of GFMarqueeSelectionTool are created/used) still stick to the default BEHAVIOR_NODES_CONTAINED. I guess this would be the case for e.g. editors using the palette marquee tool?I also haven't figured out yet what to do for the select-all behaviour.If there would be a way to set a general "selection behavior" for marquee tool, drag and select-all that would be ideal...(Can you point me to where to look for the select-all behavior?)And while I'm dreaming ;-) as it seems some users/developers prefer to select model elements without connections while others want to include connections : why not make both possible via a modifier key or so? E.g. Alt drag or so doesn't pick connections and plain drag does; Ctrl-A selects everything and Ctrl-Alt-A no connections etc? (but such choice is not needed in Triquetrum, we always want to copy connections along)cheerserwinHi agree, word by word, with erwin´s last comment.Merged for Oxygen M1 and Graphiti 0.14.0(In reply to Michael Wenz from)Sorry, wrong bug	11.0
id=261184	REOPENED	GMF-Tooling	Core	2.1	All All	P3 normal	Project Inbox	2009-01-15 07:44 EST by	Michael Moser	2011-05-01 08:13 EDT (	2 users	I installed the newest release version available on the download page (v2.1.2), then started by newly entering a very simple model using the EMF diagram editor and then tried to create me a plain vanilla diagram editor for it. I accepted defaults everywhere, but this time I get already stuck in the creation of the GMF generator model! First I got a couple of errors due to missing Link-label assignments. I fixed those by assigning the appropriate values, but now GMF throws a dozen or so "Validation failed unexpectedly for 'Type Link Model Facet'. See log for details."Looking at the logs all these error msg. are due to:-----------------------------java.lang.NullPointerException at org.eclipse.gmf.codegen.gmfgen.impl.GenNodeImpl.getReorientedIncomingLinks(GenNodeImpl.java:545) at org.eclipse.gmf.codegen.gmfgen.impl.GenNodeImpl.eIsSet(GenNodeImpl.java:337) at org.eclipse.gmf.codegen.gmfgen.impl.GenTopLevelNodeImpl.eIsSet(GenTopLevelNodeImpl.java:128) at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eIsSet(BasicEObjectImpl.java:1235) at org.eclipse.emf.ecore.util.EContentsEList$FeatureIteratorImpl.hasNext(EContentsEList.java:407) at org.eclipse.emf.ecore.util.EContentsEList$FeatureIteratorImpl.next(EContentsEList.java:561) at org.eclipse.emf.ecore.util.EcoreUtil$CrossReferencer.handleCrossReference(EcoreUtil.java:1650) at org.eclipse.emf.ecore.util.EcoreUtil$CrossReferencer.crossReference(EcoreUtil.java:1626) at org.eclipse.emf.ecore.util.EcoreUtil$ExternalCrossReferencer.findExternalCrossReferences(EcoreUtil.java:1862) at org.eclipse.emf.ecore.util.EcoreUtil$ExternalCrossReferencer.find(EcoreUtil.java:1874) at org.eclipse.gmf.internal.validate.ExternModelImport.intializeExternPackages(ExternModelImport.java:139) at org.eclipse.gmf.internal.validate.AbstractValidator.getExpression(AbstractValidator.java:74) at org.eclipse.gmf.internal.validate.AbstractValidator.getExpression(AbstractValidator.java:58) at org.eclipse.gmf.internal.validate.AnnotatedOclValidator$ConstraintHandler.handleEAnnotation(AnnotatedOclValidator.java:116) at org.eclipse.gmf.internal.validate.AnnotatedOclValidator$ConstraintHandler.handleMetaModel(AnnotatedOclValidator.java:207) at org.eclipse.gmf.internal.validate.AnnotatedOclValidator$ConstraintHandler.handleMetaModel(AnnotatedOclValidator.java:213) at org.eclipse.gmf.internal.validate.AnnotatedOclValidator.validateOCL(AnnotatedOclValidator.java:79) at org.eclipse.gmf.internal.validate.AnnotatedOclValidator.validate(AnnotatedOclValidator.java:63) at org.eclipse.gmf.internal.validate.ValidatorChain.validate(ValidatorChain.java:67) at org.eclipse.gmf.internal.validate.ValidatorChain.validate(ValidatorChain.java:67) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:164) at org.eclipse.gmf.internal.bridge.transform.ValidationHelper$SmartDiagnostician.validate(ValidationHelper.java:96) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:143) at org.eclipse.emf.ecore.util.Diagnostician.doValidateContents(Diagnostician.java:183) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:167) at org.eclipse.gmf.internal.bridge.transform.ValidationHelper$SmartDiagnostician.validate(ValidationHelper.java:96) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:143) at org.eclipse.emf.ecore.util.Diagnostician.doValidateContents(Diagnostician.java:183) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:167) at org.eclipse.gmf.internal.bridge.transform.ValidationHelper$SmartDiagnostician.validate(ValidationHelper.java:96) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:143) at org.eclipse.emf.ecore.util.Diagnostician.doValidateContents(Diagnostician.java:179) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:167) at org.eclipse.gmf.internal.bridge.transform.ValidationHelper$SmartDiagnostician.validate(ValidationHelper.java:96) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:143) at org.eclipse.emf.ecore.util.Diagnostician.validate(Diagnostician.java:114) at org.eclipse.gmf.internal.bridge.transform.ValidationHelper.validate(ValidationHelper.java:288) at org.eclipse.gmf.internal.bridge.transform.TransformToGenModelOperation.executeTransformation(TransformToGenModelOperation.java:284) at org.eclipse.gmf.internal.bridge.transform.TransformToGenModelWizard$1.run(TransformToGenModelWizard.java:162) at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:458) at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:366) at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:934) at org.eclipse.gmf.internal.bridge.transform.TransformToGenModelWizard.performFinish(TransformToGenModelWizard.java:165) at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:742) at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:373) at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624) at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:228) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3823) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3422) at org.eclipse.jface.window.Window.runEventLoop(Window.java:825) at org.eclipse.jface.window.Window.open(Window.java:801) at org.eclipse.gmf.internal.bridge.transform.TransformToGenModelAction.run(TransformToGenModelAction.java:72) at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251) at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:583) at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:500) at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3823) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3422) at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2382) at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2346) at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2198) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:493) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:488) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:193) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:386) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:59) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:39) at java.lang.reflect.Method.invoke(Method.java:612) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:549) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:504) at org.eclipse.equinox.launcher.Main.run(Main.java:1236) at org.eclipse.equinox.launcher.Main.main(Main.java:1212)-----------------------------I'll attach the .ecore and misc. other files.Michael	Createdthe model's ecore fileCreatedthe ecore diagram fileCreatedthe genmodel fileCreatedthe gmfgraph fileCreatedthe gmftool fileCreatedthe gmfmap fileI've taken a look at your models, and the exception you see is because the link mappings for Operation, Attribute and Artifact are missing the Source and Target Feature specification. What does it mean to connect elements in your diagram using one of these links?I have a case that requires a link that has no semantic meaning whatsoever (in which the Element and Containment Features are also unspecified), which results in a different NullPointerException when generating the code. There's a patch for this problem on.Closing this request as invalid. I agree with Linda - there are three incorrect link mappings:Operation, Attribute and ArtifactThese mappings were not set up properly. Then I remove corresponding mappings I can generate diagram code working with:- Processes nodes- ArtifactContainer nodes- Artifact nodes- ProcessRelation links- ArtifactRelation linksI had to correct tool/figure assignments in attached .gmfmap model a little, but in general it works.Concerning Operation, Attribute and Artifact:1. Operation to my understanding should be a child node of Process. Or can be a top-level node connected with process by a link representing containment relation. 2. Attribute - same as operation should be either child element of Process/AbstractArtifact or top-level node with incoming link representing containment.3. Artifact link mapping - looks like you are trying to represent a relation between AbstractContainer and Artifact, this can be: 3.a) containment represented as link -> all artifacts contained in some particular AbstractContainer will be moved from Leonardo3 (diagram element) to corresponding AnstractContainer.3.b) non-containment reference. In this case all Artifacts will stay inside diagram element, and will be connected with corresponding AbstractContainer by a link (same diagram, but different model structure). You have to make ArtifactContainer.contains reference non-containment in EMF model.3.b) Artifacts can be represented as either as a top-level diagram elements or as a child elements of ArtifactContainer node - child mapping for Artifact should be added to the ArtifactContainer.Summarizing all this: the problem you are reporting caused by incorrectly created GMF model. I'm closing it since there is no defects in GMF - you have to adopt your models in accordance. A'll attach current state of the models in my workspace used to generate diagramming code.If you need more assistance - try following one of the suiggested ways to describe this diagram structure and ask a questions in a newsgroup clarifying your problems - I'll try to answer it.One more remark concerning GMF wizards - this UI was created to simplify initial start with GMF nevertheless it cannot substitute fully-functioning GMF model editors, so if you need to create some complex diagram (you are) then you need to edit GMF models in .gmfmap/.gmfgraph/.gmftool/.gmfgen editors directly.-CreatedArchive with the patched model files used to generate code (created with GMF 2.2)Just as a user's comment on this: Wouldn't it be nice, if the code generator (or rather the validation prior to the code generation) would actually *tell* me that there is something buggy and maybe even point out, *what* it didn't like about the mappings?Instead it crashed ungracefully with an NPE and leaves users in the dark what went wrong and why. I personally don't consider the approach 'I fixed your model and now I don't get the NPE any more" as really "fixed"'. Not everybody is such a GMF expert and able to dig in and debug this (and IMHO he should need to be...).GMF much too often just says ""baaeeeeh - I can't eat that..." and then truns over. That's what I once ment when I called GMF "still unusable" in an NG append, but then I got beaten up for voicing that...Michael(In reply to)Ok. I'm wrong, you are right. :-) So, it looks like original model was validated correctly (but should not). I'm reopening this request with following note:Just add additional validation to the gmfmap::LinkMapping::linkMetaFeature like:"linkMetaFeature.oclIsUndefined() implies domainMetaElement.oclIsUndefined() and sourceMetaFeature.oclIsUndefined() and containmentFeature.oclIsUndefined()"This rule should indicate incorrect usage of pure-design link mapping.Well, I did not debug anything - just downloaded your models and corrected it in accordance with general GMF diagramming rules (looks like you can gather this knowledge from GMF tutorials..)Again, you are right. Validation aspect of GMF is far from being perfect. AFAIK, EMF validation is not perfect as well.. Nevertheless EMF has a lot of customers just because of the fact that EMF is close to UML and UML is well-known language. Believe me, GMF is trying to describe a language (diagram definition one) which is even more complex and less-standardizated then Class model definition one... This is a reason why GMF users has to carefully understand those basic approaches we used in a project. With your complexity of diagram (I've seen domain model you used) you have to be ready for solving such kind of problems by comparing your model with an existing GMF examples/understanding those (not so complex) approaches we used while designing GMF/reading tutorials again and again/asking questions in newsgroup/correcting your models/..As a result in near future you'll be able to create your diagram as easy as you can create class model and generate corresponding code with EMF.Summarizing all this - I suggest you to spend some time learning GMF and then you'll be an expert! :-)Cannot be open on 2.2.1 as this release has past, moving to 2.3[GMF Restructure]: product GMF and componentGeneration was the original product and component for this bug	14.0
id=492419	REOPENED	Gendoc	UI	unspecified	PC Windows 7	P3 normal	Jan Celmer	2016-04-26 02:55 EDT by	saadia dhouib	2016-11-23 09:57 EST (	2 users	Createdgendoc menu iconWhen using gendoc with Mac OS and with papyrus models, the gendoc model explorer menu icon appears bigger than the other menu icons. See attache sreenshot.	this occurs also with neon versionresolution ofhas fixed this problemCreatedMenu icon in 0.6.0This should have been fixed in 0.6.0 according to [1], however, it still seems to be around (see attachment).[1]Incredible, it seems you are working on mac ?I think we did not made test on this platform :(thank you for the feedbackAnd the first comment was about mac os issue, sorry for this problem ... we will investigateNo worries and thanks for the quick response!	7.0
id=451504	REOPENED	Papyrus	Diagram	1.1.0	PC Windows 7	P3 normal	Michael Golubev	2014-11-14 05:23 EST by	vincent lorenzo	2015-03-11 09:34 EDT (	3 users	For the feature desribed in the, I developped JUnit tests to find common bendpoints between links (see class org.eclipse.papyrus.uml.diagram.common.tests.tests.CommonBendpointsTest)Currently a part of these tests are broken (see build result here) After some investigation I found than the feature continues to work fine, but the existing diagram doesn't have the same display just after the opening of the diagram between old framework and new LinksLF framework.I think than a part of the bugs comes from: [LinksLF] routing of link moves applying Snap To Grid/Unapplying snap to grid and reopening the model. Another part of the bug should comes from the new router implementation.	Createdsnapshot of the model without linkslfCreatedthe same model with LinksLFCreatedthe initial modelThe label of the links move, but I think than it is not really a bug, it should come from the move on the anchor and the changes in the routing.Createdtest4: Dashed line breakup (model bendpoints and anchors)Createdtest4: Solid line breakup (model bendpoints and anchors)Hello, I just attached 2 detailed screenshots for the Test4 (top-right corner of diagram) to explain what happens. So here, as you can see the positions of the 2 link anchors differs a lot and only common point they have in the model is the green bendpoint at around [660,300]. Before LinksLF the default rectilinear router while drawing the last recti-segment always prefers the last bendpoint position to anchor position, so the without linkLF the segment is always drawn from this green circle at [660, 300] to "somewhere at the bounds", ignoring position of the blue circle (anchor).With LinksLF we have enforced the routing preference for anchor position to bendpoint position, so now the segment is drawn from the blue/red circle to "somewhere at the endless line containing the previous link segment". This change of behavior is required to preserve the relative anchor positions when we move the node. As the old routing completely ignores the position of the anchor for last segment, I don;t see how we can both respect the requirement of "draw to anchors" and keep the old routing at the same time.This bug can be marked as closed fixedCreatedModel showing that the issue is not fixed.Actually, this bug is probably not closed.We found some cases for which the display is different.The model was created with 0.10.2, and still displays correctly in 1.0.x without LinksLF support, but is displayed wrong with LinksLF support.Vincent, can you reopen this bug?(In reply to Alain Le Guennec from)I forgot to mention that this seems related to snap-to-grid(the model is displayed wrong when snap-to-grid is active, but is fine without it).I reopen the bug, according to Alain comment.CreatedModel to reproduce anchor-less router issues with scrollbarsWe just found another issue, even more impacting this time:Rectilinear routers that have no specific source/target anchors (but just bendpoint(s)) are drawn incorrectly in presence of scrollbars when LinksLF support is enabled (it is ok without LinksLF).To reproduce, open the attached model (see router-bug-step1.png),and progressively move the scrollbar of the diagram downwards,pressing F5 at intermediate positions to refresh.You can see that the connector is progressively "drifting" towards the edges of the ports it is connected to (see router-bug-step2.png),and when it reaches those edges, it goes completely crazy because the router is starting vertically (see router-bug-step3.png)Note that such "anchor-less" connectors can be created by D&D of a hidden connector from the browser, or using "show related links".On big diagrams, where scrollbars are always present, this completely wreaks havoc.Note also that this pb is not linked to snap-to-grid, contrary to the previous one, so there seems to be at least two different issues left.Createdrouter-bug-step1Createdrouter-bug-step2Createdrouter-bug-step3(In reply to Alain Le Guennec from)FYI, these models have been created with a css stylesheet forcing the rectilinear style from the element creation.(In reply to vincent lorenzo from)Actually, the CSS is irrelevant in the "anchorless rectilinear routing with scrollbars" issue.You can reproduce it with the Papyrus-with-linkslf version trivially:-Create a block with a part and a delegating connectors connecting a port of the block to a port of the part, and make sure the block symbol is big enough to have scrollbars-Hide the connector-Redrop the connector onto the IBD (that's for the anchorless part of the issue)-move scrollbars and refresh the diagrams=> You've got the same issue.It's true that SCADE System comes with a default theme that switch connectors to rectilinear mode by default, but it is not necessary to reproduce the issue in Papyrus.(In reply to Alain Le Guennec from)I forgot the step "turn to rectilinear routing style" after the drop of the connector.CreatedModel to reproduce spurious offset disruptionIn reply to().I managed to bug a small model with Papyrus 1.0.1 that,when loaded with the LinksLF version, has its layout severely disrupted.I think it is the same issue as in, but it is clearer.It is not related to snap-to-grid (I have it turned off), nor to scrollbars, nor to CSS (no stylesheet).It seems related to the way the router eliminates superimposed segments in rectilinear mode.For some reasons, the LinksLF router seems to be introducing a little offset when computing some of the segments, which causes them not to be superimposed anymore,and so segment that were not displayed with stock 1.0.1 now wrongly get displayed with LinksLF.The same offset introduction also causes some ugly "stairs" in edges that were completely straight in 1.0.1 (same diagram illustrates both issues).FYI, the model was built with stock 1.0.1,with connectors initially in oblique mode then changed to rectilinear.You can turn them back to oblique mode in 1.0.1 to understand how they were built, purposely with superimposed segments that become invisible in rectilinear mode.	19.0
id=350813	REOPENED	AMP	AXF UI	0.9.0	PC Windows 7	P3 normal	Jonas Ruttimann	2011-06-30 08:24 EDT by	Jonas Ruttimann	2011-07-28 13:41 EDT (	0 users	Simulation control buttons like Play, Pause and Stop are instanciated programmatically. In fact, it's their handlers that are instanciated. Handlers notify other handlers of state changes. This makes the execution GUI hard to extend. And I think, this is not the Eclipse-way to use handlers. A better way to update handlers would be using the observer pattern and listening to the runner lifecylcle. That way, enablement of handlers can be defined in the plugin.xml.	Hi Jonas,If I remember correctly, this was the only way to achieve the behavior we want. The problem is that declarative handlers cannot have their visibility and enablement state updated directly. I forget what the exact set of issues were, but there are some real limitations to the declarative approach. I just remember that I spent a lot of time getting this working well. Also, the semantics of what those buttons do is pretty deeply connected to the life-cycle stuff in IEngine and IModel -- I think this is analagous to say an Eclipse Job, where there are many advantages to having shared semantics for model control across all potential models. What sor of extension were you thinking of?I need to reuse the agent execution perspective but with custom buttons and custom views. As long as those buttons and views are linked programmatically, they will appear automatically when I launch the EclipseRunner to execute a model.I think with the quite new ISourceProvider concept you'll be able to manage both, activation and enablement.Committing proposed refactoring for Handlers and Commands, including tests.OK cool! You're right, that Thanks for the fix.But.... we can't touch Ascape core directly. I'll explain why in an email.I've reverted Ascape changes. Can we close this bug?(In reply to)Sounds good to me. It'll be nice to have this working in a cleaner way.Actually why was this ever assigned to me? I'm closing and assigning back to you.Oops. I guess it isn't working now. Must have something to do with backing the Ascape changes back out, because it is pause that is broken. What do you want to do about this? The old strategy was for the pause/resume buttons to handle their own state. Again, not necessarily the _best_ strategy. We could implement the engine control, though in this case as the pause button would only be listening for the result of what it had just done, I think it would be safe for the time being to just assume that state change has occurred. That way we also prevent someone from sending multiple pause signals.One other issue I'm seeing. When there is a failure of some kind in the model the close button should still work..it will try to close gracefully and if that doesn't work force kill the thread. That doesn't seem to be working now.(In reply to)Just committed a bug fix. I'm not quite sure if this really solves your problem. Could you affirm if it does?(In reply to)With reverted Ascape changes, the Pause button is independent of all Ascape changes. It should get notifications anyway. Can you be more precise about the problem?Never mind. Found it out myself, I think. I've just committed a bug fix. Tell me if this works for you.(In reply to)Introduced simulation end state as well. Seems like it's needed to disable for example the "step" button after simulation end.OK, I'm having issues with restarting models. It's hanging a lot. Also, when a model crashes things are left in a bad state. On a crash the models should exit gracefully but it seems to just get locked up with the UI still activer even though there are't any jobs active.Yes, I've notices the hanging behavior too. I'm not sure though if this is the correct bug to talk about this. We should probably open a new one.The hanging-problem is caused by a synchronized method. I think we got a deadlock there.Regarding the crash behavior you'll probably have to describe for me how to reproduce that. And also I think this should be a new bug except if you've already found out about a relation to the declarative way we're putting in the buttons in.(In reply to)(In reply to)I guess the reason I thought this is related (besides that it was working well recently, but we've made a number of other changes as well) is that with the declarative approach we can't really monitor a process in the same way. So when a job crashes it can't fix itself. I *think* this issues was solved before with the monitoring done in the model manager but I can't remember for sure. It does seem that we'd need some kind of monitor process to make sure that jobs had cleaned up after themselves properly.	16.0
id=361382	REOPENED	M2T	Xpand	1.1.0	PC All	P3 normal	Karsten Thoms	2011-10-19 08:15 EDT by	Tatiana Fesenko	2011-10-19 10:17 EDT (	1 user	CreatedTest project demonstrating the issue.Create a transformation that applies a profile. Run it several times in the same thread - "java.lang.OutOfMemoryError: Java heap space" after approximately 30 iterations. I am using Eclipse Indigo with Xpand 1.1.1.The problem is that XmiReader#load() loads profile in a new ResourceSet instead of using the resource set of the element.I am attaching a sample project demonstrating this issue.	CreatedProposed patchCreatedModified Test ProjectsAdded imported packages and org.antlr.runtime. Copied Xtend Component several times.This way the bug got reproducable in my runtime workbench.This won't work that way, at least not generally. The transformed Model instance in your example is not attached to Resource yet when trying to apply the profile. Thus, element.eResource()will return null and raises a NullPointerException in element.eResource().getResourceSet()The element's ResourceSet can only be taken when the element is attached to a resources. Otherwise, the profile must still be loaded in its own ResourceSet.The solution is actually that the resource must be unloaded again. result = (Element) r.getContents().get(0); // unload the resource when it was loaded in a new ResourceSet // otherwise this leads to memory leak, seer.unload(); return result;Thanks for reporting and the example!Reopened - Java heap space after ~ 4*(70 -- number of XtendCompoments) = 280 iterations.This issue is important while running a workflow on server, as a part of service. In that case the same workflow is executed many times with different input models.CreatedPatch with caching profilesI used "1" as a default size of HashMap assuming that in most cases the user needs only one profile.	6.0
id=378980	REOPENED	TMF	Xtext	2.2.1	All All	P3 normal	Karsten Thoms	2012-05-09 09:22 EDT by	Martin Gerhardy	2016-09-14 03:14 EDT (	3 users	even on linux and with project line delimiters set to unix a \r is added.	The MergeableManifest has a fixed LINEBREAK = "\r\n" constant. It should be configurable with the option set in CodeConfig#lineDelimiter.***has been marked as a duplicate of this bug. ***GitHub Pull Request 96 created by [kthoms]Fixed in 2.11GitHub Pull Request 99 created by [kthoms]Test must be fixedGitHub Pull Request 100 created by [kthoms]	7.0
id=315808	REOPENED	EMF	Releng	2.6.0	PC Mac OS X - Carbon (unsup.)	P3 normal	Kenn Hussey	2010-06-04 13:50 EDT by	Kenn Hussey	2010-06-06 13:11 EDT (	0 users	We need to add p2.inf files to key bundles (org.eclipse.emf.ecore and org.eclipse.emf.rap.common.ui) and change the repository template to enable tracking of p2 download stats.	The changes have been committed to CVS.As it turns out, the download stats property needs to be in the artifacts repository instead of the content repository... and p2 does not currently provide support for generating this property. So, we'll need to manually change the repository manifest if/when we want download stats, at least for the time being.I've removed the property advice from the org.eclipse.emf.ecore and org.eclipse.emf.rap.common.ui bundles for now.	2.0
id=468113	REOPENED	GMF-Tooling	Releng	unspecified	PC Windows NT	P3 normal	Svyatoslav Kovalsky	2015-05-23 12:42 EDT by	Ed Willink	2015-06-26 02:17 EDT (	1 user	has 3.2.1.v201409281400 as the latest.differently has 3.2.1.v201409281400 as the latest.Where is the download for the SimRel commit:commit 82f7c70acc25ac2e57d831701945be208c2f90ddAuthor: mgolubev <> 2015-05-20 21:07:18Committer: mgolubev <> 2015-05-20 21:07:35Branches: origin/masterGMF Tooling RC1 for MarsChange-Id: Ic977f65d6ca2d11121b5a535857f59bc416173f8Signed-off-by: mgolubev <>	Looks like the script that creates drops is broken now. SK, can you please take a look?Script to create drops had been restored, and zip drops for RC2 are - published at- and available fromWe however have not yet checked the contents of the zips, this is to be done tomorrow after RC2(In reply to Michael Golubev from)Still broken. You have made the same mistake as."M" is for maintenance integration builds and so is not mirrored."S" is for stable milestone/release-candidate builds which are mirrored.RC3:shows a 3.3.0.2015016031742shows only an irregularly named 3.3.RC2.v201505271400(3.3.0RC2 is a more conventional alias)3.3.0 is not available.	5.0
id=418494	REOPENED	Epsilon	Core	unspecified	All All	P3 enhancement	Louis Rose	2013-10-02 06:53 EDT by	Louis Rose	2014-08-07 12:18 EDT (	4 users	Horacio and Dimitris have identified a need for deleting a model element and all of its children as part of a model migration strategy. Whilst this can be achieved via a post block, it would be helpful to have first-class support for this in the language.	My proposed syntax for this feature is:@cascadedelete TypeI've pushed an initial implementation in SVN r2411.The test cases are in SVN and also here:Before I mark this as fixed and add user documentation, do you have any thoughts? I'll ping Horacio too.@cascade looks good. +1 from me!Looks good to me as well :-).Thanks chaps. I'm going to mark this as fixed for now, but might reopen after speaking with Horacio about his use case.I have finally managed to test this and in my use case it seems to be working ok. I will continue to use is and see how it goes. I will report any issues here. Any idea on when this will go into release?Great -- thanks Horacio. Do keep us posted.This will make it into the next release, though we're not quite sure when that will be yet.Fixed in the latest interim version.Hi,I have found a case where the cascade behavior seems to be not working. I haven't been able to pinpoint the cause. So far the only difference I find with the cases were it is working is the multiplicity of the containment associations. I'll do more testing to see if I can figure out the cause. Sorry that I can't provide a test case, but the current state of the project makes it very hard to setup in someone else's environment. Regards,Are there any updates on this?Hi, haven't had much time to go over this. However, it seems to be related to delete and migrate rules for the same type not being exclusive. But I don't know how Flock decides between delete and merge in such cases.Louis,Can you comment on how this works for types with super types. It seems the issues I am having are related with the cascade operation not deleteting attributes inherited from super classes but only the ones defined in the type. Regards,CreatedTest CaseFinally managed to put an example togethere. The metamodel is a striped down version of the QVTc metamodel I actually use. I have to simple rules, one to delete nested (local) Mappings and one to delete unnamed domains. If you run the migration you will see that the nameless domian in Mapping CToD is correctly deleted in cascade (its guard and bottom patterns are deleted too). However, altough the nested mapping in AToB is deleted, its guard and bottom patterns are not and end up at the root level. I am convinced is something related to inheritance, but not sure what exactly. Maybe multiple inheritance?Hope the example helps.	12.0
id=493205	REOPENED	Viatra	Transformation	1.2.0	PC Windows NT	P3 normal	Peter Lunk	2016-05-09 03:48 EDT by	Peter Lunk	2017-01-25 08:35 EST (	1 user	Breakpoints should be applied to input model elements. Once these elements are parts of a rule activations event atom, the transformation execution should be suspended.	1.3 M1 already passed.New Gerrit change created:Gerrit changewas merged to [master].Commit:Gerrit changewas merged to [master].Commit:New Gerrit change created:New Gerrit change created:Gerrit changewas merged to [master].Commit:Gerrit changewas merged to [master].Commit:Gerrit changewas merged to [master].Commit:Fixed byModel instances involved in the model transformation are now displayed via using a custom tabbed tree editor with properties view support.(In reply to Peter Lunk from)cancel that, commented on the wrong issueWhat is the status of this bug, can this be closed?The debug framework already supports the definitions of such breakpoints, however the option is not represent on the UI, as the UI components responsible for displaying the model instances are still in a preliminary state.This means that due to the potential major changes in these UI componenets we should wait with adding this feature till 1.4.0--Postponed to 1.4.0--Implementation of this feature is non trivial over the new communication architecture.--Postponed to 1.6.0--	14.0
id=292986	REOPENED	M2T	Xpand	0.7.2	PC Mac OS X - Carbon (unsup.)	P3 normal	Project Inbox	2009-10-21 23:56 EDT by	Sven Efftinge	2013-04-26 08:50 EDT (	4 users	 	There's a "File getFile()" method in FileHandle, making it impossible to implement outlet implmentations over other persistent layers than java.io.The default implementation of the org.eclipse.xpand2.output package should be EFS compatible.This is a major problem for us since we generate to our own implemenation of the Eclipse File System that is not based on the O/S file system.However, we were able to work around it *partially* be subclassing Outlet and FileHandleImpl so as to - create and use org.eclipse.core.resources.IFile instead of java.io.File - to use org.eclipse.core.resources.IContainer as the parent for newly created files instead of deriving this from the path string (targetFile.getParentFile())The workaround still requires us to explicitly create our Outlets like this final IFile file = (IFile) sourceFile; ... final Output out = new OutputImpl(); out.addOutlet(new OurOutlet(false, file.getWorkspace().getRoot().getDefaultCharset(), null, true, file.getParent())); final XpandExecutionContextImpl execCtx = new XpandExecutionContextImpl(out, null);Generally, an URI should probably be passed instead of a path string in- Outlet constructors- Outlet#createFileHandle(String)- Outlet#setPath(String)Fixed in HEADCreatedWork-around solution not using java.io.File but org.eclipse.core.resources.IFileCreatedWork-around not using java.io.FileSven, your fix does not work for us because our "files" do not have a representation in the local file system and thus even getAbsolutePath() is not defined. We need to use IFiles as generator targets (which, btw, physically reside in a database).I attached our work-around (two sources) that uses org.eclipse.core.resources.IFile and org.eclipse.core.resources.IContainer respectively.We actually have to make a work-around for org.eclipse.xpand2.Generator, too, because it creates java.io.File-based Outlets to make it use our version of Outlet. However, once Outlet and FileHandleImpl are really java.io-agnostic, this won't be necessary anymore.Thanks!reopened (see comments)(In reply to)Any chance to get this issue closed for Helios?(In reply to)The contract of FileHandle#getTargetFile has been weakend. Implementors are free to throw an UnsupportedOperationException.Createdpatch containing an EFS based outlet, the EFS based FileHandle by Oliver Reinhard and adaptions in Generator componentI added a patch we used in out customer project to use eclipse file system resources in out code generator component. It contains the FileHandle implemented by Oliver Reinhard, an outlet subclass (EFSOutlet) and adaptions in Generator component using this new outlet implementation if eclipse's resource plugin is available.	9.0
id=351098	REOPENED	M2T	Xpand	1.1.0	PC Windows XP	P3 normal	Project Inbox	2011-07-04 10:29 EDT by	Dietmar Stoll	2011-07-06 11:45 EDT (	1 user	Build Identifier: In an *.xpt file, one can enter arbitrary text between DEFINE statements, or between IMPORT and DEFINE statements. The text is highlighted in blue. I think this should raise an error and only be allowed inside REM and ENDREM tags.Example:<<IMPORT my::Model>>arbitrary text<<DEFINE main FOR MyModelEle>><<ENDDEFINE>>documentantion and text outside of rem section<<DEFINE main FOR MyOtherEle>><<ENDDEFINE>>Reproducible: Always	I don't consider this as a problem. The text is just ignored.True, but here's a related case: When the text is at the very beginning of the file, I get (for instance) the following error when executing the template, but no error at development time:Problems running workflow workflow.MyDslGenerator: no viable alternative at input 'MyArbitraryText' on line 1	2.0
id=274859	REOPENED	GMF-Runtime	General	2.1	All All	P3 critical	Mariot Chauvin	2009-05-04 13:38 EDT by	Mariot Chauvin	2011-06-24 09:34 EDT (	2 users	Creatednode with nested edit parts - GMF 2.1 With GMF 2.1 we have a critical regression with nested edit parts and WrapLabel, see attached images.This regression comes with the refactoring of WrapLabel (see#162932). Original WrapLabel class overrode Figure#getMaximumSize() to return the preferred size. ConstrainedToolbarLayout#layout() method use this maximum size to correctly layout figures.I am afraid we did not see this regression before. I will provide a patch.	Creatednode with nested edit parts - GMF 2.0Createdpatch for 2.1 branchHi Cherie, can you review this patch?The request is to put into R2_1_maintenance and HEADThis breaks the wrapping behavior in the WrappingLabel. If the call to getPreferredSize() does not have a width hint, then the size of the underlying text figure (the FlowPage) will be calculated without wrapping the text.When moving to the WrappingLabel there may be some options that need to be set differently then were set in the previous WrapLabel (the API was a little quirky previously). I would suggest you take a look at the options first being used to make sure you are setting the location of the text correctly. The document attached to bugzilla#162932 explains all the options.If that doesn't work, you could look at the mindmap example. It uses WrappingLabel in nested compartment figures in its Thread editpart.I will close this now, but if the problem can't be resolved, please reopen.[GMF Restructure]: product GMF and componentRuntime was the original product and component for this bug(In reply to)Very old topic, but I just checked today and mindmap example on CVS Head used deprecated WrapLabel (line 300 of ThreadEditPart) even if the gmfgen references the WrappingLabel. So I think the generation was never relaunched after the gmfgen modification.	6.0
id=409980	REOPENED	MDT.RMF	Reqif-1.0	unspecified	Macintosh Mac OS X	P3 enhancement	Mark Broerkens	2013-06-05 12:43 EDT by	Mark Broerkens	2015-08-10 05:46 EDT (	1 user	RMF should contain the requirements on RMF as example ReqIF files.This has the following benefits:* users get a set of reqif files that illustrate the features of RMF* rmf developers have a defined location for adding or modifying requirements on RMF* by using ProR for documenting requirements we use our own implementation and find potential bugs earlier	Mark,Lukas already started something like this (maybe not in the best location) in a folder/project called "dump". The contained .reqif files are picked up by Hudson and upon change, HTML will be generated automatically, seeProviding useful (and non-stale) content is obviously another question. We should work on straightening the documentation.Does this resolve/address your idea? If not, please reopen.I was looking for a solution that makes the requirements on RMF available as an example that can be created in the workspace by using a NewExample wizard.(1)For that reason I analyzed how the EMF project creates the its example wizards. The result is now available in GIT:The following projects have been added:- org.eclipse.rmf.docs.requirements This project will contain the requirements in RMF. I already added an initial set. Still far from complete but it already turned out to beneficial to have the requirements written down somewhere- org.eclipse.rmf.docs.tests This project is going to contain some test specifications. Currently only empty reqif files are available- org.eclipse.rmf.examples.installer This is the plugin that provides the end user wizard for installing the examples into the workspace. The plugin XML contains references to the projects that should become part of the examples. any modification of the example projects are automatically populated into the /examples/ subfolder by means of build extensions.- org.eclipse.rmf.releng.examples This project contains some some scripts that are required for automatically copying the content of the example projects into examples folder of the installer project.I think we can make the reqif files that are now contained in the dump folder available in examples as well. Maybe we con put them into the org.eclipse.rmf.docs.requirements project.The Eclipse IDE will then propagate the content into the examples.installer plugin.Additionally hudson could render html representations of the reqif files in the examples.installer plugin which can then become part of the example that is installable using the RMF Examples installation wizard.I think what is left open before the next snapshot release:we need to check the content of the example requirements and decide if they have a sufficient quality. Regarding the initial set of RMF requirements I definitely think that they need some improvement ;-)Mark,This is definitely a much better solution than the dump folder, which should be abandoned in favor of better named ones (like suggested here).I wonder whether the structure isn't overly complicated. Specifically, wouldn't it be better to have "official" .reqif files only in one single plugin, optionally with a subfolder structure? I like org.eclipse.rmf.docs.requirements, but I don't see a need for org.eclipse.rmf.docs.tests.Also, there are many .reqif files right now that are currently just stubs. This is fine if we can manage their content, but I am worried that we don't have the resources for it. Therefore, rather than having stub files (like RMF_SoftwareUnitTestSpecification.reqif), I would prefer not to have such a file at all. I would suggest to keep the number of .reqif files to a minimum, but to make sure that those we have are in really good shape.Next steps: Please continue to refactor as you see fit. Once you're done, we should assign this bug to Lukas, to enable the html-generation on Hudson.	4.0
id=348880	REOPENED	Papyrus	Core	0.8.0	PC Windows XP	P3 major	Mathieu Velten	2011-06-09 08:18 EDT by	Vincent Hémery	2013-10-10 08:22 EDT (	1 user	From 0.8.0 RC2, it is not possible to resize an ActivityGroup ( Partition, StructuredActivityNode ...) so that contained nodes are excluded from it.To reproduce :- create an Activity Partition- put nodes in it (near a corner)- try resizing the group so that the node is no longer contained.Resize is blocked whereas it should be enabled and the node should be excluded.	CreatedPatch to correct the bugI, Arthur Daussy, have worked on the code contributed to fix this bug.I have the right to contribute this code and have filled the headers with the appropriate License.The patch (see attachment) should correct the bug. It has not yet been committed to the trunk dued to the Eclipse Freeze.Committed on the trunkfixed.committed on the 0.8.X branch, will be backported on trunk after the freeze.reopened for arthur.backported on the trunkNot handle well resizing excluding element from all structured activity node derived group.Has this one been fixed or has it not? = is the bug still valid?	8.0
id=376976	REOPENED	Papyrus	Core	unspecified	PC Windows XP	P3 normal	Mathieu Velten	2012-04-17 09:41 EDT by	Mathieu Velten	2013-10-10 08:24 EDT (	4 users	- use a LinkedHashSet for commitListeners in AbstractEditor : order of listeners can be relevant- in FloatEditor use English locale to convert numbers (I don't know if a preference is needed for that)- add DoubleEditor- ReferenceDialog : put the + in grey when read-only- handle correctly multiline in MultipleStringEditor, improve it by removing last return characters added when doing ctrl+enter to validate	commited on 0.8.X and 0.8.X-EYY.Camille I don't have a trunk platform yet, I am letting you check if it is relevant for the trunk.- change BooleanCombo style (add border) to match EnumCombo stylebackported on trunk.Backported on the trunk.- add LongEditor- add upperBound for MultipleEditorI, Anaïs Lefeuvre, have written 100% of the code contributed to fix this bug.I have the right to contribute this code and have filled the headers with theappropriate License.This contribution has been checked by and committed under the responsability ofMathieu Velten.Improvements of the management of the upper bound in the MultipleValueSelectorDialog. Commited onto 0.8.X-EYYFixed the problems with the properties with a "MANY" upper bound on the EYY branch.Added a selector (based on the Integer's one) for Booleans.r10531:The MultipleValueSelectorDialog has been fixed. There were various "Widget is disposed" exceptions when the dialog was opened more than once.Backported to Branches/0.9.X in r10534:Has this one been fixed = can it be closed?	10.0
id=389247	REOPENED	Papyrus	Diagram	0.10.0	All All	P3 normal	Mathieu Velten	2012-09-11 08:55 EDT by	Mathieu Velten	2015-01-21 04:02 EST (	4 users	Currently the various aspect tools that we can add to a palette entry are doing model modifications in post commit context instead of allowing to provide a command to chain.This leads to various undo problems.	An implementation has been committed some times ago on 0.8.X-EYY, to be backported.will be backported before M7backported, rev 10824.r10824 has introduced 2200 test regressions:Reverted in r10839. Please feel free to resubmit this contribution when the regressions are fixed.Please don't revert like that, it is a pain : I need the hudson tests build if you want me to iterate on the bugs.original commits are these ones :We need to check the report on 1.0 and 1.1 before closing the bug	6.0
id=479726	REOPENED	Sirius	Core	3.0.0	PC Windows 7	P3 normal	Maxime Porhel	2015-10-14 04:57 EDT by	Laurent Fasani	2016-09-09 08:20 EDT (	3 users	Scenario:1 create a modeling project with the following modelmeta-modele : A contains a list of B (you can use the following attached meta model)modele : A1 contains B1 and B22 activate a viewpoint for this meta-model3 From Interpreter view, select A1 and type the following queryaql:self.eContents()->filter(myMetaModel::B) -> it works 4 Close and reopen the project5 redo step3 -> nothing is displayed in Evaluation Result. There is no message in error log6 Add and remoce the VP on this project. Redo step3 -> it worksIt seems that meta-model are not correctly registered at session open but only if a VP is applied manually on the modeling project.Note that the issue is not specific to filter but all as soon as myMetaModel:: is used	Createdmetamodel gardenThis comes from org.eclipse.sirius.common.tools.api.interpreter.JavaExtensionsManager.reloadEPackages() which does nothing when there is no activated Viewpoints.>JavaExtensionsManager.reloadEPackages() line: 333See: this.classLoading.findEcoreDeclarations(this.viewpointProjects, this.viewpointPlugins);New Gerrit change created:Two workaround to make this work: . Complete VSM plugin dependencies with the meta-models plug-ins. . Second possibility if the metamodel is deployed, use the "Add package from registry" button in the Metamodels properties tab of each representation description. This make the dependency to the metamodel plugin(s) optional (until you write Java services without importing required packages in the MANIFEST.MF). The proposed gerrit patch set modify several entries in the documentation to recommend to add the metamodels in the dependencies of the VSP. I will create a new bugzilla will be created to think about a proper enhancement of the situation: Acceleo3 does not require to explicitly depends on the metamodel of the evaluation context, the completion and validation for domain types and interpreted expression are not consistent with the runtime behavior of the AQL interpreter. Note that this mainly impact new simple project as advanced project will often declares Java service or other elements requiring those dependencies.Gerrit changewas merged to [master].Commit:The reasons for the bug are now better understood, but for 3.1.1 we'll only document the workaround (explicitly add the dependencies to the meta-models' plug-in in the VSP). Moving to 3.1.2 to re-evaluate what an actual fix would look like (it's probably tricky as it will impact JavaExtensionManager).It seems that the problem is worst than the original scenario. Even deactivating/activating the VP, the MM is not found.Otherwise, a first analysis has been done through the, 488094 and 488299. It shows that the change needed to fix this issue is heavy, risky and could break API for IInterpreter or IInterpreterContextThe plan for the next releases (described in) is * add documentation (done in this bug)* help specifier register its MM in RepresentationDescription and as dependency of the VSP* make sirius simplier and more robust considering that sirius is based and that MM registration constraintAs a conclusion, the best for now is to settle with the documentation in 3.1.x version(that shows the good practices which solve the issue of this bug) and not do more in 3.1.(In reply to Laurent Fasani from)The previousis out of subject.Just consider a modeling project with some semantic resources and without any activated VP.When evaluating an aql expression, the interpreter of the Sirius session(or at least the acceleo queryEnvironment) should know about all meta-models of the EObject contained in the semantic models of the session. Note that the search can't rely on the activated VP because there can be none.The question is : how to efficiently retrieve that MMs. I guess that navigating on eAllContent of the root object is a bad idea.New Gerrit change created:If we want to be strictly aware about the semantic meta-models of the semantic objects, we have to :1- get MM EPackage of all semantic instances at session opening or when adding a new semantic resource. Basically, it does an eAllContents.2- update MM on each addition of semantic object. Indeed the new objects can belong to another MM. To do that we could use a SemMMContentAdapter on the semanticResources that manage the semantic MM list. To go forward, note that we could limit the number of notifier for that adapter, if we could assume, with a static analysis of the mm, that the contained objects of a semantic object1 are instances of classes of the same MM than object1. (cf [DRAFT] Scoped content adapter)3- update MM on each removal of semantic object. the MM is deactivated only if the removed object is the last for its MM. To do that, we need a map MMToObjectsInstanceOfClassesOfThisMM which would be managed by the SemMMContentAdapter.1-It represents about 1% a the total time of the session opening. That is accepatble2 and 3- We try to limit the number of Adapter and especially ContentAdapter in sirius session so, that subject has to be discussed with Sirius team. Moreover, that cases(2-3), when during the lifecycle of the session, the semantic metamodel used in the session are changed because of object removal or addition, practically never occur except at the very beginning of the project because objects are not yet instanciated. In top of that, a workaround for 2-3 cases is to close and reopen session to get the updated semantic meta-modelsWithwe're moving towards an approach with less "magic" where Sirius tries to approximate which MMs are needed, and instead encourage/force specifiers to be explicit in which MMs they need. If Sirius would continue to try to infer which MMs should be enabled based on completetly different sources, why would specifiers bother with configuring anything?Anyway, the more global issue about which MMs are registered/visible at any point in time and in code is a very complex one. It's too late in the 4.0 cycle to change things in a way that may be reverted in a later version once we have thought more about it. Moving this ticket to 4.1, where it may or may not be implemented, but at least it will be used as a source of concrete data to fuel the discussion about what should be done.	11.0
id=481733	REOPENED	Sirius	Core	3.0.0	PC All	P3 enhancement	Maxime Porhel	2015-11-09 10:49 EST by	Maxime Porhel	2016-09-07 10:14 EDT (	5 users	+++ This bug was initially created as a clone of+++A feature request to add an id/name for the validation rules.Rules URI is not stable:rule=platform:/plugin/project.design/description/my.odesign#//@ownedViewpoints[name='myVP']/@ownedRepresentations[name='MyDiagram']/@validationSet/@ownedRules.0"@ownedRules.0" not stableDiscussed with Cédric, it must be in eKeys to have a more robust uri.The problem is if you move your rules between two sirius versions, the user will have a marker with bad uri rule. Workaround, do not move the rules after delivering, easy to do with unit test.	SeeGerrit changewas merged to [master].Commit:Corrected on masterI quickly tried to reference a Validation Rule in a ValidationSet ( reusedRules) and the rules seem to be still referenced with this kind of id: @ownedRules.0 and not its name.I reopen it following the previous commentWe also need to set the eKeys on the following features:org.eclipse.sirius.diagram.DDiagram.getActivatedRules()org.eclipse.sirius.diagram.description.concern.ConcernDescription.getRules()org.eclipse.sirius.viewpoint.description.validation.ValidationSet.getReusedRules()	6.0
id=430439	REOPENED	OCL	Core	4.0.0	PC Linux	P3 normal	OCL Inbox	2014-03-15 07:51 EDT by	Pieter Martin	2015-06-02 05:21 EDT (	1 user	The bug is described hereIn the ocl project's test model OCLTest.uml, the qualified association ocltest::Forest::trees should have a multiplicity of [0..1] not [0..*] as the multiplicity of a qualified association is that of the qualified association not the unqualified association.from the UML 2.4.1. spec "Given a qualified object and a qualifier instance, the number of objects at the other end of theassociation is constrained by the declared multiplicity. In the common case in which the multiplicity is 0..1, the qualifiervalue is unique with respect to the qualified object, and designates at most one associated object."Further if the multiplicity is changed to be [0..1] then the ocl for the unqualified association, i.e. self.trees should return a Collection type but instead returns a scalar type.	Sorry, only just found this again.In the absence of qualification a Forest has many trees, soForest::trees : Tree[0..*]is sensible.The qualifications zone and index each have multiplicity [1..1] which is possible, but unwise allowing for no 'misses'. [0..1] would be better.I see no reason why Forest::trees should change to 0..1. Just consider qualifications with different multiplicities; which would trees have?I think you are misreading 'declared multiplicity', the constraint is by the declared multiplicity of the qualifier not the overall association.Since in the forum you observe that the JUnit test is consistent, closing as INVALID.Hi,I am not sure I agree with "the constraint is by the declared multiplicity of the qualifier not the overall association"If you refer to Figure 11.37 of the UML 2.5 spec. Bank[accountNo] <---> (0..1)PersonThe way I read it the multiplicity of the association end, person, is [0..1] as qualified by accountNo.In paragraph 11.5.3 it says"The multiplicities at theother ends of the association determine the number of instances in each partition."UML 2.4 spec mentions "The “raw” multiplicity without thequalifier is assumed to be 0..*" indicating that the association end's multiplicity is as qualified.The way I read this the association end determines the multiplicity as qualified. The multiplicity of the qualifier is the multiplicity of the qualifier value, the tuple, not the association end.If there are many different qualifiers with different multiplicities my understanding is that one needs to refine the association and indicate the different multiplicities on the refined associations. This I did not find in the spec but rather in "The UNIFIED MODELING LANGUAGE REFERENCE MABUAL, Second Edition by James Rumbaugh, Ivar Jacobson, Grady Booch'.Their example is Directory[fileName](*)----(0..1)File | {Same} |Directory(1)--------------(*)FileThanksPieterHi,Any further comment on this?Am I incorrect in my understanding?ThanksPieter(In reply to Pieter Martin from)Sorry, I bounced it for advice and didn't get anything helpful.Take the simple case naming the ends.Bank::persons : Person[*] {opposites Person::banks}Person::banks : Bank[*] {opposites Bank::persons}Adding a qualifier should not change this. We just add a nested PropertyBank::persons::accountNo : Person[?]Ah! but what is the type and multiplicity of the qualifier? Perhaps since the target type is redundant.Bank::persons::accountNo : Integer[1]which would be very irregular, and there is no reason why a qualifier should not be both type and multiplicity selective:Bank::persons::accountNo : Adult[?]The above seems to me to be fully in accord with 11.5.3.But I see a real problem specifying the qualifier type and multiplicity and you refer to a refinement workaround/solution which may be necessary.=====================The Classic UML support is now mature so WONTFIX.The new Unified/Pivot OCL is still evolving. REOPEN.A (Pivot) Property contains zero-or-more (Pivot) Qualifiers.A Qualifier extends (most of) Property to add a qualifier-type; a qualifier is always required. Multiplicity is handled as with other Pivot type declarations by the Type which may be a CollectionType.How the Pivot Qualifier is synthesized from a UML Property qualifier is a loader issue to be resolved.I've raised a UML 2.6 issue that may shed some light on how the UML2Pivot loading should work.	4.0
id=511461	REOPENED	OCL	Core	unspecified	PC Windows NT	P3 normal	OCL Inbox	2017-02-01 07:24 EST by	Ed Willink	2017-02-04 16:32 EST (	0 users	Attempting to launch an out-of-the-box UMLX transformation fails with a JDK rather than JRE required diagnostic.Normally works for me, since my Eclipse launch shortcuts include -vm "%JAVA_HOME%\bin\javaw.exe" to use a system-defined Java version.How does an ordinary user adjust to use a JDK?Do we really need a JDK? needed for javac, but could we use JDT instead?	(In reply to Ed Willink from)Setting JAVA_HOME should work, but I set it as a User variable. Maybe it has to be a System variable.A -vm option in eclipse.ini is recommended.Should we have a JVM option in the launch config, just like ANT etc.(In reply to Ed Willink from)The EclipseCompiler can be used. It is more fussy about needing "-source 1.8", but the same fussiness for hidden and overt builds is good.However there is no public API. see.As a result of API evolution, OCL and QVTd have at least three compiling classes. Time to rationalize.(In reply to Ed Willink from)Even if JDT responded tomorrow, we still need to use the internal API to provide Neon compatibility.(In reply to Ed Willink from)The relevant package is marked as internal, which inhibits the MANIFESRT from actually referencing it. The Hudson build therefore fails until the compiler.tool bundle is explicitly loaded.Pushed to master for M6.(In reply to Ed Willink from)identifies that ServiceLoader<JavaCompiler> avoids the nedd to access the restricted API, alhough doesn't solve the class loading.However some JUnit tests on Hudson fail with class not found. Either timing or paths differ between JDK/Eclipse compilers.JDK usage restored for now.	5.0
id=305128	REOPENED	Papyrus	Core	unspecified	PC Windows XP	P3 enhancement	Project Inbox	2010-03-09 06:09 EST by	Emilien Perico	2013-10-10 14:09 EDT (	2 users	It would be useful if the user could transform a model element to another, according to its derived element. Sometimes the user created an element and want to change it. The feature should change the element in the model and graphically, keeping the same common properties.	implemented. The action is available on model explorer view. Remaining task: Add it to the graphical editorPossible regression in "new" model explorer.the new model explorer is now manageddisable the feature and wait more advanced testShould what is requested really be supported?Sounds quite risky, like anything can go wrong...Hi Toni,here the idea is to provide a kind of "refactoring" action, e.g. transforming a class into an interface and vice-versa, or a signal into datatype and vice versa, a package into a model and vice-versa, etc.SébOK. Phew... :)	7.0
id=313231	REOPENED	Papyrus	Core	unspecified	PC Linux	P3 major	Project Inbox	2010-05-17 15:49 EDT by	Ansgar Radermacher	2014-01-07 10:22 EST (	6 users	Build Identifier: Build id: 20100506-2000If a profile (with <100 elements) is edited, the response times are very bad: after a click on a stereotype within a profile diagram, it takes 5-30 seconds before the object is actually selected.During this delay, there is apparently no CPU consumption, might be an unnecessary network request.Reproducible: AlwaysSteps to Reproduce:1. Open a UML profile.2. Select different stereotypes successively within a diagram.3.	(In reply to)Could not reproduce on Helios M7, this may have been solved or may be a linux specific issue.(In reply to)I can reproduce it here with the latetest nightly build and Helios RC3. However, 1. it does not happen right from the start. It is apparently triggered by executing a copy-paste operation on the diagram.2. It is not limited to the profile diagram, once the paste-operation (in any diagram) has been done, it affects all diagrams. The editor becomes unusable until a restart(In reply to)This seems to be a KDE4/eclipse issue: the editor behaves "normal" again, after the Klipper (KDE clipboard tool) history is cleared. Deactivating the klipper tool does not solve the issue.Lamine: can you confirm that there is no problem on Ubuntu (gnome instead of KDE)?In my machine there are no problem for the selection of different stereotypes within a profile diagram.I use gnome (ubuntu 10.04) and Papyrus: 0.7.0v201006161830 and eclipse : Version: Helios Release (3.6.0) Build id: 20100603-0907I finally traced down this bug.It is caused by a deadlock of the GUI thread:The operation getPasteViewCommand in DefaultPasteCommand.java (within the papyrus pastemanager plugin) retrieves the available data flavors (formats) from the clipboard. DataFlavor[] dataFlavors = Toolkit.getDefaultToolkit().getSystemClipboard().getAvailableDataFlavors();In case of Linux, I traced down this call to a call of the operation XConvertSelection (by using the complete Java sources which are not part of the default JDK). Afterwards, the threads waits for a response from X11 in a polling loop with a timeout of 10s. This timeout may vary on different systems.The problem is that XConvertSelection (see extract from the manual page below) does not know itself which data formats are available but demands the application which has deposited the selection to the clipboard, i.e. Papyrus. Papyrus would normally handle this request using its GUI thread (I guess, it's an incoming GTK event handled by the SWT main loop - though I have not checked it), but this thread is busy waiting for the reply within getAvailableDataFlavors, i.e. the polling loop will not exit before the timeout is passed. This is very criticil for the user, since the whole eclipse application is stalled for 10s.PLEASE GIVE FEEDBACK, if you have this problem(1) in GNOME based applications (which is likely) as the JDK and/or GTK implementation is the same.(2) in WindowsNotice however that the default timeout might be much smaller than those I have on my system, i.e. try if the reactivity is a bit worse after copying a selection.There is a simple workaround of not calling getAvailableDataFlavors in thepastemanager. Another workaround would be to copy a selection only to the clipboard of the editing domain, i.e. do not copy in addition to the system clipboard (btw: the EMF command CopyToClipboard does only that, the Papyrus model explorer uses this command and does therefore not copy a selection into the System clipboard - it gets copied to the system clipboard however, once a selection is done in the graphical editor).Other ideas?----man page from XConvertSelection:XConvertSelection requests that the specified selection be converted to the specified target type: o If the specified selection has an owner, the X server sends a SelectionRequest event to that owner. o If no owner for the specified selection exists, the X server generates a SelectionNotify event to the requestor with property None.The arguments are passed on unchanged in either of the events. There are two predefined selection atoms: PRIMARY and SECONDARY.CreatedWorkaround for the bug on Linux systemsRaised importance, since the error is not specific to KDE, but happens on allLinux systems (re-tested with Ubuntu distribution). The error does not occur onMAC-OS.CreatedRevised patchReplaces earlier patch which does not activate the workaround in case of the paste operation itself.Createdmylyn/context/zipimpacted classes(In reply to)fixed in r2366The fix is merely a workaround which does not handle all possibly affected platforms (all X11 based, patch only handles Linux).I am having a similar problem with Helios Service Release 2Build id: 20110218-0911 on Linux (2.6.9-89.33.1.ELsmp) RH Enterprise Linux WS release 4 (Nahant Update 7) with KDE (3.3.1-17.el4_8.1 Red Hat) or Gnome. SR 1 also had the problem. After saving or frequently during routine editing eclipse freezes for something like 10 seconds. Problem began about a week ago with previous Helios version, but I don't know what triggered it. Problem persisted after restarting eclipse, KDE, and even Linux, and installing Helios SR 1 and 2.Is this one still valid, after all this time of inactivity?	13.0
id=318154	REOPENED	Papyrus	Core	unspecified	PC Linux	P3 normal	Project Inbox	2010-06-28 05:50 EDT by	Ansgar Radermacher	2015-09-29 09:51 EDT (	3 users	Build Identifier: Multiple exception named "Received wrong transfer data" occur during drag&drop of elements into diagrams (probably all, tested with class and composite).Reproducible: AlwaysSteps to Reproduce:1. Open error log2. Drag an element into a diagram3. Exceptions occur (no stack avail.), yet object is placed correctly into diagram	Is related to(should we mark it a duplicate?)Cannot reproduce on the current version (0.10M6).I close the taskThis bug is still reproducible, but probably specific to SWT/GTK (on unix?). As stated in, it's is very likely not a Papyrus bug.***has been marked as a duplicate of this bug. ***Roman found a good hint (thanks) inThe error is caused by a check in the JFace function LocalSelectionTransfer.nativeToJava(transferData).The culprit is that the attribute "pValue" within transferData is 0. According to the documentation, pValue is:Pointer to the data being transferred. (Warning: This field is platform dependent)IMPORTANT: This field is not part of the SWT public API. It is marked public only so that it can be shared within the packages provided by SWT. It is not available on all platforms and should never be accessed from application code.Thus, LocalSelectionTransfer should not raise an exception if pValue is 0. It seems to be a JFace bug.However, it might be necessary to enable the following workaround (as indicated in the forum entry above): replace the nativeToJava call with getSelection. The respective call is in function initializeGraphicalViewer() of class UMLDiagramEditor of each Papyrus diagram (need to change the template).replace return LocalSelectionTransfer.getTransfer().nativeToJava(data);with return LocalSelectionTransfer.getTransfer().getSelection();Should be fixed with commit d2ecee698a8bd9839d7685bfc6d12b616d26751b. Roman, can you please verify.Confirmed fixed on 1.0.0.v201402030925Now all diagram editors use the method getSelection instead of nativeToJavaHi,I am experiencing the exact same bug : Lots of "Received wrong transfer data" from jface as soon as I tried to Drag&Drop an element from tree view into a diagram (input pin into an activity in an activity diagram in my case).I am running the 32bit linux version using both Luna (1.0.2.v201508261054) and Mars (1.1.1.201508071204) version with same result.Do not hesitate to ask me if you need more info.	9.0
id=476208	REOPENED	OCL	Core	unspecified	PC Windows NT	P3 major	OCL Inbox	2015-08-31 04:56 EDT by	Ed Willink	2015-10-08 15:48 EDT (	0 users	"Generate CS Models" fails with the trace below on M1.First hint of a problem is that StandaloneASTFacadeHelper has a source error die to a return type change on JavaCore.getOptions(), but that should be cosmetic.2702 [main] INFO mples.build.utilities.GenerateModel - Generating Ecore Model using 'platform:/resource/org.eclipse.ocl.xtext.markup/model/Markup.genmodel'2867 [main] INFO mples.build.utilities.GenerateModel - Saving reconciled 'platform:/resource/org.eclipse.ocl.xtext.markup/model/Markup.genmodel'4257 [main] ERROR mf.mwe2.launch.runtime.Mwe2Launcher - java.lang.AssertionError at org.eclipse.jdt.internal.formatter.TokenManager.firstIndexIn(TokenManager.java:189) at org.eclipse.jdt.internal.formatter.TokenManager.firstTokenIn(TokenManager.java:194) at org.eclipse.jdt.internal.formatter.SpacePreparator.handleToken(SpacePreparator.java:926) at org.eclipse.jdt.internal.formatter.SpacePreparator.visit(SpacePreparator.java:119) at org.eclipse.jdt.core.dom.TypeDeclaration.accept0(TypeDeclaration.java:453) at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711) at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2782) at org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:212) at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711) at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.prepareSpaces(DefaultCodeFormatter.java:352) at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.prepareFormattedCode(DefaultCodeFormatter.java:195) at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.format(DefaultCodeFormatter.java:157) at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.format(DefaultCodeFormatter.java:141) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteFormatter.formatString(ASTRewriteFormatter.java:246) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteFormatter.formatNode(ASTRewriteFormatter.java:376) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteFormatter.getFormattedResult(ASTRewriteFormatter.java:187) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteAnalyzer.doTextInsert(ASTRewriteAnalyzer.java:1357) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteAnalyzer$ListRewriter.rewriteList(ASTRewriteAnalyzer.java:647) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteAnalyzer$ListRewriter.rewriteList(ASTRewriteAnalyzer.java:802) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteAnalyzer.rewriteParagraphList(ASTRewriteAnalyzer.java:1175) at org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteAnalyzer.visit(ASTRewriteAnalyzer.java:1682) at org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:207) at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711) at org.eclipse.jdt.core.dom.rewrite.ASTRewrite.internalRewriteAST(ASTRewrite.java:302) at org.eclipse.jdt.core.dom.rewrite.ASTRewrite.rewriteAST(ASTRewrite.java:233) at org.eclipse.emf.codegen.merge.java.facade.ast.ASTJCompilationUnit.getContents(ASTJCompilationUnit.java:311) at org.eclipse.emf.codegen.merge.java.JMerger.getTargetCompilationUnitContents(JMerger.java:419) at org.eclipse.emf.codegen.ecore.generator.AbstractGeneratorAdapter.generateJava(AbstractGeneratorAdapter.java:2002) at org.eclipse.emf.codegen.ecore.genmodel.generator.GenPackageGeneratorAdapter.generateFactoryClass(GenPackageGeneratorAdapter.java:675) at org.eclipse.emf.codegen.ecore.genmodel.generator.GenPackageGeneratorAdapter.generateModel(GenPackageGeneratorAdapter.java:217) at org.eclipse.emf.codegen.ecore.genmodel.generator.GenBaseGeneratorAdapter.doGenerate(GenBaseGeneratorAdapter.java:215) at org.eclipse.emf.codegen.ecore.generator.AbstractGeneratorAdapter.generate(AbstractGeneratorAdapter.java:317) at org.eclipse.emf.codegen.ecore.generator.Generator.generate(Generator.java:708) at org.eclipse.emf.codegen.ecore.generator.Generator.generate(Generator.java:619) at org.eclipse.ocl.examples.build.utilities.GenerateModel.invokeInternal(GenerateModel.java:172) at org.eclipse.emf.mwe.core.lib.AbstractWorkflowComponent.invoke(AbstractWorkflowComponent.java:126) at org.eclipse.emf.mwe.core.lib.Mwe2Bridge.invoke(Mwe2Bridge.java:34) at org.eclipse.emf.mwe.core.lib.AbstractWorkflowComponent.invoke(AbstractWorkflowComponent.java:201) at org.eclipse.emf.mwe2.runtime.workflow.AbstractCompositeWorkflowComponent.invoke(AbstractCompositeWorkflowComponent.java:35) at org.eclipse.emf.mwe2.runtime.workflow.Workflow.run(Workflow.java:19) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:102) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:62) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:52) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.run(Mwe2Launcher.java:78) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.main(Mwe2Launcher.java:36)	Debugging the failure is obscure. The new failing path seems to reformat some source code that the old path did not. The problem is a positioning bug in the reformatting. The positioning bug might be something different. It is the change in control flow that activates the reformatting that is presumably the problem.Who has changed?(In reply to Ed Willink from)EMF's ASTFacadeHelper is adjusted in M1 to accommodate the JavaCore change, but re-implementing the EMF change as just casts makes no difference. Looks like a JDT rather than EMF regression.(In reply to Ed Willink from)Installing EMF 2.11.0 rather than 2.12.0M1 on Mars M1 makes no difference.Fetching JDT Core from GIT and the problem goes away, even after all JDT Core projects are closed.And thereafter the problem has gone away on two machines. Impossible. Maybe some wierd combination of bad build/inconsistent file system synchronization.Anyway, the ASTFacadeHelper can be replicated in StandaloneASTFacadeHelper.commit 35a5f7ccd6391188d45db6c3c227a48488c55d26 pushed to master for M2.I've seen it again after installing and uninstalling GEF4.(In reply to Ed Willink from)Open org.eclipse.jdt.core at commit c554caa948bbe051a5aeee635338c74832d8067f (I20150728-0800) and it all works fine.Close org.eclipse.jdt.core and it still works fine.Restart Eclipse and it still works fine.Now I'm seeing it on the QVTd CS modelsMoving to M2 and Java 8 seems to be ok.	6.0
id=329558	REOPENED	Papyrus	Core	unspecified	PC Windows XP	P3 enhancement	Project Inbox	2010-11-05 11:43 EDT by	Philippe Mising name	2014-06-12 08:01 EDT (	4 users	Build Identifier: 20100617-1415 - PapyrusMDT 0-7.0.v201007251735It is not possible to perform multiple selection in all the UML graphical diagrams (select several classes, select several properties from differents clas, selection several flows in activity diagram, selec several transitions in state machine...)Reproducible: AlwaysSteps to Reproduce:1.See details2.3.	In the current version of Papyrus (build version), this bug is not reproductible.Selection of Several class or several attributes of a same class works correctly.The selection of one attribute from one class and a second attribute from another class is not supprted. This is may be a new feature then a bug, and need to be clarified.The pb of multiple selection arised when trying to select multiple features (e.g., operations, attributes, Receptions, ...) owned by different classifier. For example, it is not possible to select one operation in one class and an other operation in another class.Using Luna nightly buuild I can select 2 attributes in a diagram, living in different classes. I then cut them and they are cut correctly together. However, performing an undo does not bring the attributes back.Performing the same in the Model Explorer works as it should.This works in the nightly build.	5.0
id=374654	REOPENED	Papyrus	SysML	unspecified	PC Windows XP	P3 normal	Project Inbox	2012-03-19 10:11 EDT by	Anne WALTER	2016-04-20 07:55 EDT (	3 users	In the Model Explorer:- select a FlowPort- delete it=> associated connectors are deleted (OK)In an IBD:- select a FlowPort- delete it=> associated connectors are deleted (OK)In an IBD:- select the label of a FlowPort- call the "Delete selected element" command=> the flow port is deleted (OK)=> associated connectors are NOT deleted (NOK)In a BDD:- select a FlowPort in the compartment of a Block- call the "Delete selected element" command=> the flow port is deleted (OK)=> associated connectors are NOT deleted (NOK)	SemanticEditPolicy added on AbstractElementLabelEditPart in order to allow label related element destroy via service edit.(In reply to)It could be better to implement getTargetEditPart so that it delegate responses to destroy request to the main element node (or connector) rather than providing such SemanticEditPolicy... To be tested.	2.0
id=319084	REOPENED	Papyrus	Diagram	1.2.0	All All	P3 normal	Project Inbox	2010-07-07 04:21 EDT by	vincent lorenzo	2016-09-13 07:26 EDT (	1 user	Change Delete From Model to Delete Selected Element(s)Change Delete From Diagram to Hide selected Element(s), and change its icon (a rubber icon maybe)	Done and commited by P. Tessier the 16/07/2010 in r? for Delete From ModelDone in r2410 for Delete From Diagramnew proposal for Neon:Delete selected element => Delete from modelDelete from diagram => Hide from diagramThis text should be put in a property file or preference setting so any user could customize text as they need.Still available on Papyrus 2.0.	3.0
id=394923	REOPENED	Papyrus	Core	0.8.2	PC Windows 7	P3 enhancement	Project Inbox	2012-11-22 12:48 EST by	Toni Siljamaki	2013-11-10 11:01 EST (	2 users	CreatedSimple example.During the time I have run different modelling, M2M and M2T tests usingPapyrus I have suffered from mouse-elbow several times.There are way too many mouse-clicks to build models in Papyrus,compared with other more user-friendly modelling tools.The absolute minimum it takes to add one operation with one parameter ofsome type is 11 mouse-clicks, and to actually see the operation with itsparameter in the diagram it takes an additional 5 mouse-clicks = 16 clicks.Then there is an additional absolute minimum number of 6 mouse-clicks togive the operation and its parameter a name, and an additional 6 mouse-clicksto define the parameter as a return parameter.Right here we are upto a minimum of 28 mouse-clicks for this simple modelling thing. :(...then there is the additional X number of mouse-clicks to find all the menuesand the additional Y number of mouse-clicks to learn how to do it.Some Papyrus engineering effort to make the UI more user-friendly is needed.(needed for senior engineers building Papyrus models)	Papyrus will be improved to reduce this point. I close the task which is not enough precise to be solve in its generality. However, do not hesitate to open new one on this subject with detailled suggestion you think might improve Papyrus to be more user-friendly according to you. Thanks.A clafification in what way "Papyrus will be improved" regarding this user experience would be nice, and some preliminary roadmap.I have indicated this bug as requested to be reopened in our internal backlog.I cannot reopen this one myself.As Sebastien said, this bug is too generic to be reopened. We can't decide at which point is should be considered fixed.However, more specific sub-tasks could be added so that we could reopen this bug (And close it when all subtasks are fixed).Or it could be renamed to focus on Operations/Parameters creation, then reopened.I will begin focusing on mouse-clickings soon.Then I can provide additional examples, besides parameters.Depends on.Reopened for sub-tasks	7.0
id=401542	REOPENED	Papyrus	Diagram	unspecified	All All	P3 normal	Project Inbox	2013-02-22 10:52 EST by	Ansgar Radermacher	2015-06-08 10:49 EDT (	3 users	When the user removes a label, for instance the connector or transition name (which is typically not very interesting), the associated label just becomes invisible. However, it is still there.Clicking on the invisible label will select the associated element, e.g. the Connector or transition. This can become very annoying, if the user only sees another element at the place where he clicks. I frequently had the problem that I wanted to select a port label but couldn't do it, since an invisible connector label was on top - before I became aware what caused this behavior.	CreatedPatch for operation refreshLabel. Will set labels to "" and icons to null, while invisibleabelsProposed patch for org.eclipse.papyrus.def.Besides the patch itself, I think the class should be refactored. Out of 750 lines of code, only a few are actually specific to the current edit part.What's the status of this task?The bug is still reproducible. I did not apply the patch, since it is not very clean to set a string to "" instead of assuring that it is ignored by the selection mechanism. Yet it is an effective workaround.Florian, can you please verify, if the patch can be applied to the new generator mechanism? (or if there's a better way to avoid that invisible elements influence selections)The patch has been applied with commit c1d4f38b6456c4a5f52c5b32d4338208ea92568d to the template TextAware.xtend. However, all diagrams need to be re-generated to take the change into account.The task is completeThe wrong behavior can be observed again with last mars RC3 build.The code querying the visibility is not present in LinkLabels, since the refreshLabel code in the TextAware.xtend template has a specific treatement of LinkLabels. A possible correction is shown in the first diff below.@Florian: was there as specific reason for this simplification? I do not have the proper environment to do a regeneration, but I tested the modification in case of the ConnectorNameEditPart, see 2nd diff below.-- a/plugins/developer/org.eclipse.papyrus.def/xtend/aspects/impl/diagram/editparts/TextAware.xtend+++ b/plugins/developer/org.eclipse.papyrus.def/xtend/aspects/impl/diagram/editparts/TextAware.xtend@@ -579,10 +579,6 @@ override refreshLabel(GenCommonBase it , GenDiagram diagram )''' maskLabelPolicy = getEditPolicy(org.eclipse.papyrus.infra.gmfdiag.common.editpolicies.IndirectMaskLabelEditPolicy.INDRIRECT_MASK_ } if (maskLabelPolicy == null) {- <AB>IF it.oclIsKindOf(typeof(GenLinkLabel))<BB>- setLabelTextHelper(getFigure(), getLabelText());- setLabelIconHelper(getFigure(), getLabelIcon());- <AB>ELSE<BB> org.eclipse.gmf.runtime.notation.View view = (org.eclipse.gmf.runtime.notation.View)getModel(); if(view.isVisible()) { setLabelTextHelper(getFigure(), getLabelText());@@ -592,7 +588,6 @@ override refreshLabel(GenCommonBase it , GenDiagram diagram )''' setLabelTextHelper(getFigure(), ""); //$NON-NLS-1$ setLabelIconHelper(getFigure(), null); } - <AB>ENDIF<BB> } Object pdEditPolicy = getEditPolicy(org.eclipse.gef.EditPolicy.PRIMARY_DRAG_ROLE); if (pdEditPolicy instanceof <AB>diagram.getTextSelectionEditPolicyQualifiedClassName()<BB>) {git diff plugins/uml/diagram/org.eclipse.papyrus.uml.diagram.composite/src/org/eclipse/papyrus/uml/diagram/composite/edit/parts/ConnectorNameEditPart.javadiff --git a/plugins/uml/diagram/org.eclipse.papyrus.uml.diagram.composite/src/org/eclipse/papyrus/uml/diagram/composite/edit/parts/ConnectorNameEditPart.index 283a64f..a82022a 100644--- a/plugins/uml/diagram/org.eclipse.papyrus.uml.diagram.composite/src/org/eclipse/papyrus/uml/diagram/composite/edit/parts/ConnectorNameEditPart.java+++ b/plugins/uml/diagram/org.eclipse.papyrus.uml.diagram.composite/src/org/eclipse/papyrus/uml/diagram/composite/edit/parts/ConnectorNameEditPart.java@@ -554,8 +554,14 @@ public class ConnectorNameEditPart extends PapyrusLabelEditPart implements IText maskLabelPolicy = getEditPolicy(IndirectMaskLabelEditPolicy.INDRIRECT_MASK_MANAGED_LABEL); } if (maskLabelPolicy == null) {- setLabelTextHelper(getFigure(), getLabelText());- setLabelIconHelper(getFigure(), getLabelIcon());+ View view = (View) getModel();+ if (view.isVisible()) {+ setLabelTextHelper(getFigure(), getLabelText());+ setLabelIconHelper(getFigure(), getLabelIcon());+ } else {+ setLabelTextHelper(getFigure(), ""); //$NON-NLS-1$+ setLabelIconHelper(getFigure(), null);+ } } Object pdEditPolicy = getEditPolicy(EditPolicy.PRIMARY_DRAG_ROLE); if (pdEditPolicy instanceof UMLTextSelectionEditPolicy) {A Gerrit patch is available here(but a diagram regeneration is required in addition).	10.0
id=376483	REOPENED	Papyrus	Core	0.8.2	PC Windows 7	P3 enhancement	Project Inbox	2012-04-11 07:47 EDT by	Marc-Florian Wendland	2013-10-28 05:22 EDT (	1 user	The current implementation of Class Diagram in Papyrus does not allow the visualization of Reception.Since Reception is an important piece of information, the class diagram should be improved to display the owned Reception elements graphically - maybe in a dedicated compartment, but rather in the operations compartment of class and interface	This is still an issue in version 0.9.it is very important to me that it is fixed.thanksseeThis is bug is about the display of a reception not it creation. So I reopen this bugin new version > 0.9.2 can now display receptions in class compartment.It would be better if could also display the reception parameters.	4.0
id=416693	REOPENED	Papyrus	Diagram	unspecified	All All	P3 major	Project Inbox	2013-09-06 04:31 EDT by	Camille Letavernier	2013-10-11 10:21 EDT (	3 users	Interface declarations in the Component Diagram are currently represented as Circles. This representation should only be used for provided interfaces.Interface declarations should be represented as rectangles.	Interface declarations, including their declared services, when modeled ordrag-and-dropped into a Component Diagram, should be represented in thesame way as they are represented in a Class Diagram.done for the branch mastercommit e9eb0f16779c88ad91966375166b1658ed9a198eCreatedScreenshot Comp Diagr Interface lollipop-circle in KeplerThis one needs to be reopened, but I cannot request it via the menu.Attached in a screenshot for the Kepler Sept30 release of Papyrus.Interfaces are still displayed as the lollipop circle. (see screenshot)(to be continued...)CreatedSimple test case modelAttached is a simple test case I have used for testing this.(to be continued...)CreatedScreenshot from LunaThen I noticed the comment "done for the branch master"...I thought: "Maybe this means Luna?"What we need to get updated is Kepler, to be able to test bug fixes etc.But... I have spent ~4 hours to download & install the Sept30 version ofLuna and Papyrus what it required to make it install. I had to use theto get access to MoDisco. :(In this fix the interfaces _almost_ get displayed as is Class Diagrams.One main difference is that the signal compartment cannot be displayed.There is also a "shadow" adornment displayed for it, even though theProperties.Appearance check box for it not is checked....but the Interface is not displayed as the lollipop-Provided-circle.(to be continued...)CreatedScreenshot 2 from LunaBut... What now has happened is that we can not draw Provided Interfacesand Required Interfaces at all, using the lollipop notation.Also see slide attached to.The "circle" in the top-right corner of the attached screenshot isa previously dropped interface-as-a-circle. I have drawn a link to itjust to see what happened.This bug concerns only the rectangle figure not the lollipop. The lollipop is not finished.The bug should still be reopened, see:1) The signal compartment cannot be displayed.2) This is not yet available in Kepler 0.10.x. Currently tested version is from Sept 30.this is not signal compartment, the reception can be put into operation compartmentCreatedSignal compartment examplesThis bug should still be reopened.In telecom it's all about signalling. Every function/module/component in thenode/system/network communicate using signals as the primary carrier ofcontrol messages and payload.In Papyrus the signals can be displayed in something called theNestedClassifierCompartment in the Class Diagram after some clicking.In the Component Diagram the signals can currently not be displayed at all.In other tools all signals are displayed by default in signal compartments,without any clicking. Attached is an example showing what users expect to see.CreatedExample of 1 of Signal delcaration and usage through a receptionHi Toni,about signals in UML. To declare that a class or any classifier is able to receive a signal, you need to do two thinks:1 - Create a signal. It can be done in any container such as a paackage or even a class. In that case, the signal definition is considered as been a nested classifier of the class. But creating a signal as a nested classfier of a class does not mean that the class is able to receive it.2 - To specifiy that a class may receive a signal, you have then to create what UML call a reception which has to reference the signal you have previsouly created.See attached examples.CreatedExample of 2 of Signal declaration and usage through a receptionCreatedSignal compartment examples 2Hi Sebastien.I was not referring to how a signal may propagate down a possible chain ofdelegations to eventually land in a declared signal handler in a class.In my last comment I described that the signal compartment is missing.Attached update explains in more detail what I ment.Imagine a bit larger piece of software, like the Store in the attached example.Then imagine viewing the Store as a black-box unit, as defined by systems guys.It offers its services as signals through one Provided Interface, and even ifthis interface is declared right next to the component, you like those servicesto be displayed in the interface declaration, just as they can be displayedif you drag-and-drop the very same interface declaration into a class diagram....but in the component diagram this signal compartment is missing.I will add compartment.	15.0
id=404874	REOPENED	Papyrus	Views	2.0.2	Macintosh Mac OS X	P3 normal	Project Inbox	2013-04-04 04:33 EDT by	Klaas Gadeyne	2017-01-31 09:38 EST (	4 users	Build id: 20130320-2352Steps to reproduce:- Create a UML model- Add a class to the UML model, and add a property to that class- Try to edit the (literal string) default value of the property via the properties view (via the edit button). Type in a value -> The value gets lost.Editing the value via the (embedded textual) advanced property editor works fine.	I cannot reproduce the issue. I haven't noticed any issue related to the default value in the properties view recently.Maybe it occurs in really specific cases? Do you have an exception in your error log?CreatedScreenshotUnfortunately, I don't have access to a MS Windows platform right now, so I cannot test it over there. For the rest, (as stated above) I can consistently reproduce this using a very basic model. See the screenshot in attachI get this window, I type in a value, and press OK. Nothing happens, the editor is not marked as "dirty", and I have no exception in the error log :-(_However_, and I noted this while taking the screenshot. If I wait _very_ long (around a minute, 30 seconds does not appear to be enough) between typing in the value and pressing the OK button, it _does_ work.Hmm, this looks like something ugly :-(Hmmm it might be a lead.When you edit an element in a Dialog, the edition is done in real-time (i.e. you do not need to press "OK" to validate the changes, and that's why you can't press "cancel").The value is validated in two cases:- The text widget loses focus- You press enter (for single-line text fields) or Ctrl + Enter (For multi line text fields)It may be that the "Close dialog" event is sent before the "Focus lost" even on some platform. In this case, it is too late to retrieve and validate the value, because then the text widget would have already been disposed (And the focus lost even maybe never occurs)Could you please try the following:- Edit the default value- Click in the "name" text field so that the default value is validated (The editor should become dirty at this point)- Then press OKIt this works, then this is probably a mac-specific bug related to the order of events.(In reply to)[...]This works perfectly indeed...Ok, I'll try to work on a solution then, although I don't have a Mac. This might take some time...(In reply to)Hi Camille,I even noticed something more wierd. For an attribute typed as "Real", even the workaround fails: I cannot set its value to a literalReal at all using the property view. The only way I can set it is via the advanced property xtext editor (but then again, this one is currently not available in SysML models :-(There is a bug for the Real. We're using a Float editor instead of a Double editor, and the edition fails. It will be fixed for SR1.(In reply to)Is there a bugzilla entry for that (searching within the papyrus bugs for "float" and "double" doesn't reveal anything it seems???)(In reply to)Also, is there a link between this bug and <>?Yes,describes the issue for editing Real values in Papyrus (Because of the confusion between Float and Double)(In reply to Camille Letavernier from)Seems to be still present in luna nightly build. Christian, can you also reproduce this?Indeed, I can confirm that on Mac, the focus-lost event that the StringEditor depends on for committing changes is not invoked when the EditingDialog is closed.This is, actually, a pervasive problem. I have developed a habit, in using EditionDialogs, of deliberately changing focus to some other control before pressing OK because otherwise the last edit made in the dialog never takes effect. This is a serious problem on Mac platform.I have pushed a new branch bugs/404874-macfocus with a work-around in the EditionDialog class. This work-around focus the OK button to get focus when clicked, either explicitly or implicitly via press on the Enter/Return key.The expectation is that on non-Mac platforms, the OK button already has focus, so this should be harmless in those contexts. I would be grateful if a Windows user could confirm this.My work-around fixes not only the reported scenario, but also use cases that I have awkwardly worked around in webcast demonstrations by deliberate focus changes.I can confirm that the workaround doesn't break anything on WindowsThanks, Camille.I have pushed the fix to origin master.***has been marked as a duplicate of this bug. ***Hmm,Just as mentioned in, I can also still reproduce the original bug using Papyrus UML 1.0.1.v201412240555 org.eclipse.papyrus.sdk.feature.feature.group Eclipse Modeling Projecton OS X Yosemite (so that seems to be pretty much the same as Christian's environment...)I don't know what to say, except that I still can't reproduce this (nor the problems fromand) in either the current Luna development branch nor in a new installation of Papyrus 1.0.1.v201412190917 (SR1a). Upgrading to 1.0.1.v201501151626, it is still not reproducible.I need more to go on. Is there anything in the log that is suggestive? (I wouldn't expect to see anything, because the original problem that I had fixed wasn't an exception scenario) Anything else that could be a factor? Or are you reproducing this in a fresh new install of Eclipse (Committers Luna SR1 package) and Papyrus (SR1a or later)?Anyways, I can't fix what I can't reproduce and debug, so somebody needs to provide more information.I've been able to reproduce the issue today with a Mac user on Luna, so I can confirm the issue is still present somehow. There's not much more I can tell about this, since I couldn't actually debug it(In reply to Christian W. Damus from)Trying to answer your questions (a bit late :blush:)- Nothing appears in the logs- I can now say that I've been able to reproduce this consistently over all Papyrus versions since 2013, and mac os X versions up to yosemite Steps to reproduce:- Download and run papyrus-neon-2.0.2-macosx64.tar.gz- Startup with a clean and fresh workspace- Create a papyrus project and UML model with primitive types- Continu with the steps described in-> Potentially interesting: the model is marked as being dirty when pressing OK after typing in the value. Yet when saving, the default value remains at the old value.Note: also still valid as a workaround: just switching the focus to the 'name' field before clicking on OK, does result in the correct value being updated.(In the meanwhile, I'm running Sierra)Returning this to the Papyrus inbox.Hi Christian,(In reply to Christian W. Damus from)Just for my information: because you can't reproduce the problem anymore, or due to a lack of time/interest/priorities, or ...?(In reply to Klaas Gadeyne from)I should have noticed much sooner that this was still assigned to me and so probably not on the radar of anyone that should be interested in fixing it.My focus for the foreseeable future is in the Papyrus-RT project, on the UML-RT semantics of inheritance in particular.	24.0
id=428108	REOPENED	Papyrus	Diagram	0.10.1	All All	P3 normal	Project Inbox	2014-02-13 10:25 EST by	Raphael Faudou	2014-12-09 09:01 EST (	3 users	I can create an association class attached to an association A. But association A does not have same attributes than other associations. I can only see target and source roles ,not multiplicity (what i need).	Raphael, Did you search bugzilla _before_ submitting a new bug? :-))See(andfor the SysML counterpart).I must confess - not. Thanks for pointing that. so this bug can be closed as duplicate from others.*** This bug has been marked as a duplicate of***As described in, I am reopening this one as more specific part of the umbrella "better association class support".(In reply to Michael Golubev from)Raphael, you mention the multiplicity, but can you modify other relevant properties of the association ends (owner, navigability, aggregation type)?	4.0
id=412854	REOPENED	Papyrus	Diagram	0.10.0	All All	P3 normal	Project Inbox	2013-07-12 09:28 EDT by	Klaas Gadeyne	2014-08-19 11:00 EDT (	3 users	Steps to reproduce:- Create a UML model with Activity 1 and associated activity diagram- On the activity diagram, create a CallBehaviorAction Activity1 and associated activity Activity1- Add and OutputPin (Parameter1) to CallBehaviorAction Activity1 (leave all default options)- Create a second CallBehaviorAction Activity2- Add an InputPin (Parameter1) to CallBehaviorAction Activity2 (leave all default options)- Now go to the properties view of Activity2::Parameter1- Click on the pencil next to UpperBound, opening the edit dialog of the LiteralInteger. Don't change anything, just press ok- Save the model- Try to connect Activity1::Parameter1 and Activity2::Parameter1 by an objectflowThe live validation jumps in and says<quote>The object flow must link object nodes with the same upper bounds.</quote>However, both upper bounds are literalIntegers with value 1.The difference? diff YetAnotherActivityBug.uml YetAnotherActivityBug.uml_before 12c12< <upperBound xmi:type="uml:LiteralInteger" xmi:id="_9Vy2ser0EeKp69T6HaPWXQ" name="" value="1"/>---	The live validation has been disabled, but the (batch) validation is probably still too strict (Nothing changed)I could not reproduce the bug in version 1.0.0 v20140804. As said by Camille, live validation has been disabled but batch validation does not throw any error about the upper bounds. Closing bug.Well, something has changed indeed, in the sense that the step [quote]Click on the pencil next to UpperBound, opening the edit dialog of the LiteralInteger. Don't change anything, just press ok[/quote]below doesn't create a 'name' field anymore. However, if you replace this step by- Click on the pencil next to UpperBound, opening the edit dialog of the LiteralInteger. Give the LiteralInteger a random name. Then launch the batch validation!then I can still reproduce the bug!It seems to me that the validation rule should only check whether the "value" attribute of the involved LiteralIntegers are the same, and don't bother with their names, right?CreatedScreenshot illustrating the bugSee screenshot. The upperbound LiteralInteger now has a name (see yellow square), and launching the batch validation results in the validation error on the right hand side.	4.0
id=460428	REOPENED	Papyrus	Others	1.1.0	All All	P3 major	Project Inbox	2015-02-20 05:43 EST by	Toni Siljamaki	2015-06-15 07:52 EDT (	2 users	From(In reply to Toni Siljamäki from)This has become increasingly importent as new user groupsbegin customizing their DSMLs using CSS stylesheets.Additional info on incorrect/missing documentation sent by mail.	Main changes to document are:- CSS Properties for the new Shapes customizations: See- CSS Properties for the new Stereotypes/Label/Properties customization: Work-in-progress; can't be documented yet.The "Manage Connectors Label" was broken in Luna, so it didn't make sense to mention it in the documentation. It seems to work now (Mars nightly), so it should be included as well.The Papyrus CSS Editor has already been updated to provide partial auto-completion. However it may need to be rewritten during migration to CSS3. The CSS Debug tool (Only available as a Papyrus Developer Component) could be improved and promoted to an Extra Plug-in.The displayName property should be updated to inform that it does notwork on floating name labels.Currently, the SendSignalAction has two name labels. ()displayName:false hides only one of themThese items are now documented; I close the taskTesting Papyrus UML 1.1.0.201506120831(this issue was set to RESOLVED and Fixed yesterday)Some problems:1) The improvements described in the "Improved CSS documentation" mail is not there.2) The "Shape customization" documentation described byis not available in Papyrus Help.3) The new attribute "stereotype" on mask described byis not described in the CSS documentation.4) The row/column lines in the current "Style properties" table are missing.5) The current help on "Stereotype Display" in the CSS help refer to some wiki page which does not exist.6) The "Import Stylesheet in Papyrus" image is missing. (broken link)See also.See also.	6.0
id=431251	REOPENED	Papyrus	SysML	0.8.0	All All	P3 normal	Project Inbox	2014-03-26 11:29 EDT by	Klaas Gadeyne	2017-02-17 07:27 EST (	5 users	Steps to reproduce:- Create a new UML model- Create Class1 and Class2 via the model explorer- Create a CSS diagram for Class1- In the CSS diagram, create a new Property (Attribute1), for instance of type Real- In the CSS diagram, create another new Property (Attribute2), of type Class2Now,- Drag Attribute1 _into_ Attribute2.The result in Papyrus is that Attribute1 is now _contained_ within Attribute2, whereas I would expect that Attribute1 would be contained by Class2 instead!	Can you please expand on your expectations from described D&D?Do you think that : - Attribute1 should be contained in Class both graphically and semantically, - or should it be contained in Class semantically and in Attribute2 graphically?(In reply to Michael Golubev from)Hi Michael,I'm not sure I understand your questions. In my original comment, I mention Class1 and Class2. With 'Class', do you mean Class2?The result that I expect is that:- Attribute1 is a property of Class2 (so 'semantically' contained in Class2, in the model Explorer)- Attribute1 is graphically contained in the Part that represents Attribute2 : Class2(So I guess that corresponds to your second suggestion)Hi Michael,Maybe more clear:If, instead of dragging Attribute1 into Attribute2 on the Composite Structure Diagram, I just select "Property" (Attribute3) in the palette, and drop that property Attribute3 onto the structure compartment of the Attribute2 part, then Papyrus correctly creates Attribute3 as a property of Class2 (and not as a contained element of Attribute2).I expect a similar thing to happen if I don't create a new Attribute, but just move an existing one (graphically) into the Attribute2 (part of type Class2).CreatedClearly illustrates the semantical inconsistencyIn case this would still not be clear, please consider the following screenshot.As you can see, whereas both Attribute_r1 and Attribute_r2 are graphically part of the same container, they are located at two totally different places in the model explorer.I would say this is pretty bad, not?Still present in Mars M7Update: I'm not sure that this is actually a UML problem, as the UML spec (contrary to the SysML spec) does not mention explicitly that multiple levels of nesting can be shown onto a CSD. However, it is clearly the case for SysML, see for instance figure 8.1 of SysML 1.4 specAs of, I consider this (IMO very serious) bug to be relevant for SysML only. Affects both IBD (and by inheritance) the PAR diagram.(I haven't cross-checked this on the 1.1 editors, so it might happen there too BTW)CreatedFor easier reproductionSteps to reproduce:- Open the model in attach- In the palette, select a Value(Property) and drag it onto the IBD in the graphical representation of the block2 : Block2 part- Accept all defaultsThe result:- In the model explorer -> Attribute1 : Datatype1 is created as an ownedElement of block2 : Block2- Additionally, an unnamed Property is created as a property of Block2Expected: Attribute1 : Datatype1 is created as a property of Block2(In reply to Klaas Gadeyne from)See alsoWhen you move a property inside another property in UML, the property becomes a qualified property.In Sysml, I do not see in the norm that qualifed property does not exist. If it does not exist, SysML is not a profile of SysML, because a profile cannot forbid the usage of a metclass, isn't it?(In reply to Patrick Tessier from)In the model explorer, yes. In the diagrams, no. UML does not support multiple levels of hierarchy in the Composite Structure Diagram (or put differently, parts in a CSD cannot show an internal Structure compartment.It does exist, however, contrary to UML, SysML _does_ support multiple levels of hierarchy in the IBD, and specifies a meaning for this[quote]8.3.1.2.3 Compartments on internal propertiesSysML permits any property shown on an internal block diagram to also show compartments within the property box. These compartments may be given standard or user-customized labels just as on block definitions. All features shown within these compartments must match those of the block or value type that types the property.[/quote]Especially the latter sentence is important!So this means if I have a property pA inside a property pB of type B inside a Block C, that pA should be interpreted a being a property of type B, and not of a qualified property of pB!And, if you want to see an example in the spec, have a look at figures D.18 and D.19. For instance, in D.19 you can see that fp:Fuelpump is nested in ft:FuelTankAssembly. Now, in D.18, you can clearly see that in the corresponding BDD, fp is a property of FuelTankAssembly, and _NOT_ a nested property of ft.(In reply to Klaas Gadeyne from)Strangely enough, the correct behaviour seems to have been implemented for ports (See). Indeed, when creating a port onto a part p of type P, the port is created as an attribute of P, and not as a qualifier property of p.Given that port is nothing but a specialization of part, it seems like fixing this might be rather obvious (if you know where to look :-)This function has been in done Papyrus Mars and Neon. done in task.As soon as the papyrus Mars will be publish this bug wil be close(In reply to Patrick Tessier from)I can still perfectly reproduce the problem using the steps inon the current nightly build?I have downloaded the last version of sysml 1.4. the bug is fixed.Environment:* Neon RC2* Papyrus RC2* SysML 1.4 NightlyScenario:* Create Block1* Create Block2* Create an IBD for Block1* Within Block1 - Create Attribute1 of type Integer - Create Attribute2 of type Block2* Drag Attribute1 inside Attribute2Problem:* Papyrus nests the attributes instead of putting Attribute1 inside Block2. This violates the spec (see).Conclusion: Unless I misunderstood the issue, the issue doesn't seem to be solved.Attached two reproduction models:* before the drag operation* after the drag operationCreatedModel before drag operationCreatedModel after drag operationI can also reproduce the use case from Johan.(Using only the model explorer)I reopen the bug and set the importance to normal.(I didn't see any reason for this to be critic)	18.0
id=438967	REOPENED	Papyrus	Diagram	1.1.0	All All	P3 major	Project Inbox	2014-07-05 18:32 EDT by	Toni Siljamaki	2015-06-23 18:37 EDT (	5 users	See earlier mails and customization like for NWA.Not sure if stylesheets works at all for Activity Diagrams.Expect the same stereotype-based diagram display customization like for NWA....including support for SVG shapes, icons etc....CSS rules based on stereotype attribute values....and customization of nodes, edges, labels as for other diagrams.	Actually, the issue is not related to Stylesheets: most Activity figures don't support appearance modification at all (Neither from CSS nor from the Appearance tab of the properties view)Most Activity figures are really specific and can't be customized (Especially Send/Receive signal, initial/final/merge/fork nodes, etc)Renamed the task accordinglyIt should be possible to override the appearance propertiesset by the model migration tool.For CallOperationAction, for instance, the fillColor etc. is set bythe migration tool, which currently disables the possibility toset customized appearance properties by stylesheet rules.Those stylesheet rules only have effect on newly modelled elements.Try the button "Reset style" in the Style tab of the properties view. It is used to remove all user-defined customizations (Including the ones set by the migration tool)has been closed, so Customization Support should now work in Mars (Starting with M4, consolidated in M5/M6)We need to be able to test the multiple shapes on activity nodes beforethis one can be closed, as described in GenericShapeDocumentation (1).docxSee screenshotDocumentation and examples are missing.to test maxNumberOfSymbol you can use the profile Intenal Papyrus Profile ::Symbol to add a image and "svgFile" css attribute to add a second one. You have 2 symbols displayed.Then apply maxNumberOfSymbol:1; on css.=> Now only one symbol is displayed.Yes, I have tested the maxNumberOfSymbol that way, to display onlya single shape, but our primary concern is displaying multiple shapes,see tech note attached to.	8.0
id=478288	REOPENED	Papyrus	Diagram	1.1.2	PC Windows 7	P3 normal	Project Inbox	2015-09-24 05:52 EDT by	Sebastien Gabel	2016-01-28 07:37 EST (	3 users	Let's suppose a BDD diagram including Block1 and Block2.Draw a directed association from Block1 to Block2.Do the inverse operation, leading to the restore/create dialog.Select the 'Restore' option => a link is drawn between Block2 and Block1. The arrow is inverted compared to the first association drawn. Semantically, we have only one Association for two different representations.	New Gerrit change created:New Gerrit change created:New Gerrit change created:Gerrit changewas merged to [master].Commit:Gerrit changewas merged to [streams/1.1-maintenance].Commit:This bug can be marked as closed fixesCreatedillustration of the bug which is not yet fixed for AssociationI reopen the bug, it is not fixed for association!New Gerrit change created:	9.0
id=480441	REOPENED	Papyrus	Others	1.1.0	PC Windows 7	P3 normal	Project Inbox	2015-10-22 11:40 EDT by	Shuai Li	2015-12-01 05:02 EST (	1 user	Currently when a class is generated, we generate its namespace. The namespace does not contain the top-level package name, i.e. the model root element. This behavior is normal, according to the comment at line 266 of org.eclipse.papyrus.cpp.codegen.utils.CppGenUtils :"// skip top-level package"Now when an attribute (or a parameter) is generated, the qualified name of its type is generated. The qualified name contains the name of the root element in the model. Therefore the code does not compile.=========Example :Package Root|--Package MyNamespace|--|--Class MyClassWill give something like:namespace MyNamespace {MyClass {};}But if we type an attribute with MyClass, we get:::Root::MyNamespace::MyClass myAttribute;	Also the bug probably comes from:org.eclipse.papyrus.cpp.codegen.utils.CppGenUtils.cppQualifiedName(NamedElement)New Gerrit change created:For the record, the user can avoid this bug by naming the root element of the model "root". Keyword "root" is not generated in the namespace of a class.Closing the bug.I'm reopening the bug for a question.If I generate the code for a model "Foo", then I am asked to create a CDT project named "Foo" (i.e. same name as model). Then the code is generated in a folder call "Foo" within the project.Should we have this folder? I understand the need for "Pkg_Foo.h" but why do I need to put the code in a root folder that has the name of the model? Especially if the name of the model already corresponds to the name of the project.For the reverse work, we currently consider the name of the CDT project to be the name of the reversed model. Any folder within the CDT project is then a package in the model. We need to define a common namespace strategy if we want the reverse to be symmetric to the generation.	5.0
id=490206	REOPENED	Papyrus	SysML	2.0.0	All All	P3 normal	Project Inbox	2016-03-22 13:00 EDT by	Camille Letavernier	2016-04-05 11:23 EDT (	4 users	SysML 1.1 is deprecated in Papyrus 2.0 / Neon, in favor of SysML 1.4During the transition, SysML 1.1 should be provided as an extra-plugin, which is not installed by defaultThis should be done for M6 (i.e. tomorrow), to avoid breaking APIs when removing the plug-ins (Although strictly speaking, this doesn't affect APIs; but this may affect other projects in the Eclipse Release Train)	In order to avoid disruptive changes, this will happen in two steps:- Before M6: Only change the build configuration to exclude SysML 1.1 from the Main build/feature, and add it to the extra build/feature- After M6, optionnally: Move the sources to the extraplugins/ folder on Git (But this isn't mandatory, and I think this isn't even desirable)New Gerrit change created:Gerrit changewas merged to [master].Commit:I close the taskThe Extra-Tests job is failing, because SysML Tests depend on UML Diagram Tests. The UML Diagram Tests are not distributed, so this dependency cannot be resolved anymoreCommits aa6eb87 and 5c54179 disable the Requirements Diagram and Requirements Table tests. These plug-ins are not compatible with the new architecture and should be fixed (Most tests for SysML Requirements Diagram were already invalid and didn't run anyway)New Gerrit change created:Gerrit changewas merged to [master].Commit:	8.0
id=479831	REOPENED	Papyrus	SysML	0.8.0	All All	P3 enhancement	Project Inbox	2015-10-15 04:35 EDT by	Francois Le Fevre	2015-11-10 11:00 EST (	1 user	When executing tests on org.eclipse.papyrus.sysml14.service.types, it throug a, error related to the initilization of the ElmementType Registry.------------------------------------------------------- T E S T S-------------------------------------------------------Running org.eclipse.papyrus.sysml14.service.types.tests.command.SetNestedPathCommandTestTests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.115 sec <<< FAILURE! - in org.eclipse.papyrus.sysml14.service.types.tests.command.SetNestedPathCommandTesttestDoExecuteWithResultIProgressMonitorIAdaptable(org.eclipse.papyrus.sysml14.service.types.tests.command.SetNestedPathCommandTest) Time elapsed: 0.967 sec <<< ERROR!org.eclipse.emf.transaction.RollbackException: at org.eclipse.emf.transaction.impl.TransactionImpl.commit(TransactionImpl.java:405) at org.eclipse.papyrus.sysml14.service.types.tests.command.SetNestedPathCommandTest.testDoExecuteWithResultIProgressMonitorIAdaptable(SetNestedPathCommandTest.java:106)To patch it locally, we enforce the initialization of the registry thanks to a BeforeClass method. @BeforeClass public static void loadSysml14Defintion() { ElementTypeSetConfigurationRegistry instance = ElementTypeSetConfigurationRegistry.getInstance(); ElementTypeSetConfiguration elementTypeSetConfiguration = instance.getElementTypeSetConfigurations().get("org.eclipse.papyrus.sysml14.service.types.elementTypeSet"); Assert.assertNotNull("The SysML 1.4 element type set definition is missing", elementTypeSetConfiguration); }This code has been duplicated at several places, for instance:/org.eclipse.papyrus.sysml14.service.types.tests/src/org/eclipse/papyrus/sysml14/service/types/tests/command/SetNestedPathCommandTest.java/org.eclipse.papyrus.sysml14.service.types.tests/src/org/eclipse/papyrus/sysml14/service/types/tests/advice/ConformCreationEditHelperAdviceTest.javaDo you have any idea on how to proceed to be sure that the registry has been initialize before?Is it related the plugin life cycle?	ElementRegistry must be initialiazed before using it. It is up to you to have appropriate testing that initialize the elementype registry.Florian there is a misunderstanding (This bug is purely SysML)=> this is the purpose of this bug to check that the SysML element type are correctly registred at the start of the Sysml plugin.Currently the tests have to do it in a before class=> it should probably be checked at the start of the SysML plugin	2.0
id=491025	REOPENED	Papyrus	Designer	0.7.0	All All	P3 enhancement	Project Inbox	2016-04-04 11:18 EDT by	Shuai Li	2016-04-29 18:26 EDT (	2 users	See title	New Gerrit change created:Gerrit changewas merged to [master].Commit:A Java generator already exists for Papyrus since several years.Can you details why do we need another one, and why it should be based on XTend ?What are the identified problems with the actual java generator, and how Xtend can solve them ?	3.0
id=233231	REOPENED	MDT.UML2	Core	2.2.0	PC Linux-GTK	P3 normal	UML2 Inbox	2008-05-21 10:17 EDT by	CDE Administration	2008-08-13 15:05 EDT (	5 users	<response_by> Mostafa Ali at 2008.05.19.19.31.16 </response_by>OS: LinuxBuild date: 0518Component/Function name: UML2Language: ArabicTester Name: Mostafa AliSteps to recreate the problem:1. Select the Model item in the TVT2.uml editor.2. Expand the UMLEditor > Element menu3. Select the UMLEditor > Element > Apply Stereotype? menu item, verify that all text in the dialog is translated, and press the Cancel button.Problem description:The closing parenthesis is reversed and misplaced.<response_by> Matthew Mazaika at 2008.05.21.09.01.44 </response_by>This appears correctly in right to left English. The strings can be found in the following files:eclipse/plugins/org.eclipse.uml2.uml.editor/plugin.properties_UI_ApplyStereotypeActionCommand_label = Apply Stereotype(s)eclipse/plugins/org.eclipse.uml2.uml.edit/plugin.properties _UI_Model_type = ModelThe layout is from this file:eclipse/plugins/org.eclipse.emf.edit.ui/plugin.properties_UI_FeatureEditorDialog_title = {0} -- {1}<response_by> Matthew Mazaika at 2008.05.21.09.02.27 </response_by>This article was reassigned from Category:''TVT/Testing,Inbox''.	Created12.001070.jpgCreated12.001080.jpg<cde:tctdetail>Testcase: 12.001070 and 12.001080Project: WSW34Component: Xfer - EMF/EditPriority: 3Subject: The closing parenthesis is reversed and misplaced.Article ID: 423Originator:</cde:tctdetail>This seems to be yet another problem with poor rendering of mixed text. This particular problem appears to be in UML2, so I'll reassign it.<response_by> Matthew Mazaika at 2008.06.12.10.10.49 </response_by>This bug has been deferred. It will be considered for the 3.4.1 service pack.*** This bug has been marked as a duplicate of***The status of the article and the state of the corresponding problem may be out of sync.]*** This bug has been marked as a duplicate of***That is the text you are trying to set in the Shell ?Does this problem happens on windows ?I think the fix for this problem is to use TextProcessor API (see).The status of the article and the state of the corresponding problem may be out of sync.]	11.0
id=429486	REOPENED	MDT.UML2	Core	5.0.0	PC Windows Vista	P3 normal	UML2 Inbox	2014-03-03 11:34 EST by	Ed Willink	2014-06-24 01:39 EDT (	1 user	M5: When validating a UML profile model with a UML OCL body expression validator I get the CME below.I suspect that this is another case of the DiagnosticDecorator introducing unexpected concurrency whereby the discovery of stereotypes correupts an iteration domain. It is probably necerssary to do some kind of brute force resolveAll for stereotypes before allowing the fine grained decoration processing to run.(But at least I see nice markers on the OpaqueExpression etc.)java.util.ConcurrentModificationException at org.eclipse.emf.common.util.AbstractEList$EIterator.checkModCount(AbstractEList.java:758) at org.eclipse.emf.common.util.AbstractEList$EIterator.doNext(AbstractEList.java:706) at org.eclipse.emf.common.util.AbstractEList$EIterator.next(AbstractEList.java:692) at org.eclipse.uml2.uml.internal.operations.ElementOperations.getStereotypeApplications(ElementOperations.java:206) at org.eclipse.uml2.uml.internal.impl.ElementImpl.getStereotypeApplications(ElementImpl.java:186) at org.eclipse.uml2.uml.edit.providers.ElementItemProvider.getChildren(ElementItemProvider.java:341) at org.eclipse.emf.edit.ui.provider.AdapterFactoryContentProvider.getChildren(AdapterFactoryContentProvider.java:175) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1440) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1444) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1444) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1425) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.redecorate(DiagnosticDecorator.java:1299) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.handleDiagnostic(DiagnosticDecorator.java:1268) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter$Dispatcher.dispatch(DiagnosticDecorator.java:923) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter$Dispatcher.dispatch(DiagnosticDecorator.java:876) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter.updateDiagnostic(DiagnosticDecorator.java:977) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter.handleResourceDiagnostics(DiagnosticDecorator.java:998) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticAdapter.notifyChanged(DiagnosticDecorator.java:223) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1538) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1297) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad(ResourceSetImpl.java:259) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:274) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:406) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getEObject(ResourceSetImpl.java:220) at org.eclipse.uml2.uml.util.UMLUtil.getProfile(UMLUtil.java:11270) at org.eclipse.uml2.uml.util.UMLUtil.getNamedElement(UMLUtil.java:11466) at org.eclipse.uml2.uml.util.UMLUtil.getNamedElement(UMLUtil.java:11416) at org.eclipse.uml2.uml.util.UMLUtil.getStereotype(UMLUtil.java:11478) at org.eclipse.uml2.uml.util.UMLUtil.getStereotype(UMLUtil.java:11505) at org.eclipse.uml2.uml.internal.operations.ElementOperations.getStereotypeApplications(ElementOperations.java:213) at org.eclipse.uml2.uml.internal.impl.ElementImpl.getStereotypeApplications(ElementImpl.java:186) at org.eclipse.uml2.uml.edit.providers.ElementItemProvider.getChildren(ElementItemProvider.java:341) at org.eclipse.emf.edit.ui.provider.AdapterFactoryContentProvider.getChildren(AdapterFactoryContentProvider.java:175) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1440) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1444) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1425) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.redecorate(DiagnosticDecorator.java:1299) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.handleDiagnostic(DiagnosticDecorator.java:1268) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter$Dispatcher.dispatch(DiagnosticDecorator.java:923) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter$Dispatcher.dispatch(DiagnosticDecorator.java:876) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter.updateDiagnostic(DiagnosticDecorator.java:977) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter.handleResourceDiagnostics(DiagnosticDecorator.java:998) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticAdapter.notifyChanged(DiagnosticDecorator.java:223) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1538) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1297) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad(ResourceSetImpl.java:259) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:274) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:406) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getEObject(ResourceSetImpl.java:220) at org.eclipse.emf.ecore.util.EcoreUtil.resolve(EcoreUtil.java:198) at org.eclipse.emf.ecore.util.EcoreUtil.resolve(EcoreUtil.java:258) at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eResolveProxy(BasicEObjectImpl.java:1473) at org.eclipse.uml2.uml.internal.impl.ElementImportImpl.getImportedElement(ElementImportImpl.java:319) at org.eclipse.uml2.uml.internal.operations.ElementImportOperations.getName(ElementImportOperations.java:157) at org.eclipse.uml2.uml.internal.impl.ElementImportImpl.getName(ElementImportImpl.java:442) at org.eclipse.uml2.uml.edit.providers.ElementImportItemProvider.getText(ElementImportItemProvider.java:192) at org.eclipse.emf.edit.ui.provider.AdapterFactoryLabelProvider.getText(AdapterFactoryLabelProvider.java:421) at org.eclipse.emf.edit.ui.provider.DecoratingColumLabelProvider.getText(DecoratingColumLabelProvider.java:121) at org.eclipse.jface.viewers.ColumnLabelProvider.update(ColumnLabelProvider.java:37) at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:152) at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:959) at org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(AbstractTreeViewer.java:113) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:176) at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:1040) at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:489) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:176) at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2180) at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:851) at org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:826) at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:800) at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:670) at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:771) at org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand(AbstractTreeViewer.java:1510) at org.eclipse.jface.viewers.TreeViewer.handleTreeExpand(TreeViewer.java:985) at org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded(AbstractTreeViewer.java:1522) at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:132) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4353) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1085) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1070) at org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:7633) at org.eclipse.swt.widgets.Control.wmNotify(Control.java:5618) at org.eclipse.swt.widgets.Composite.wmNotify(Composite.java:1935) at org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:5169) at org.eclipse.swt.widgets.Control.windowProc(Control.java:4666) at org.eclipse.swt.widgets.Display.windowProc(Display.java:5020) at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method) at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2443) at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1553) at org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN(Tree.java:6501) at org.eclipse.swt.widgets.Control.windowProc(Control.java:4646) at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:6024) at org.eclipse.swt.widgets.Display.windowProc(Display.java:5033) at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method) at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2549) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3759) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1122) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1006) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:146) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:615) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:566) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:109) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:80) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:372) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:226) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591) at org.eclipse.equinox.launcher.Main.run(Main.java:1450) at org.eclipse.equinox.launcher.Main.main(Main.java:1426)	Can you please provide a model or test case to reproduce this? I've not encountered it in my testing...The problem arises in the new (M6) (OCL) Validity View where traversal of UML ResourceSet to discover bodies provoked the UML Model Editor to behave concurrently.Problem only arises on first validation. It can be suppressed by a an EcoreUtil.resolveAll() before starting validation.The (sensible) EMF philosophy is that inter-thread concurrency integrity is an application issue. Unfortunately live validation makes the validation thread a concurrent application rather than a slave service and so requires a concurrency philosophy that is compatible with other threads. The UML lazy stereotype discovery was good for a slave service, but is proving very troublesome for concurrent applications.Thanks, Ed, but without a way to reproduce this in UML2 itself, I'm afraid I'll have to resolve it as "worksforme" and leave it to the application to solve or work around the problem.OK. So what is the policy that UML Live Validation pursues so that other concurrent applications can comply?(In reply to Ed Willink from)I’m not sure I follow. The decoration in UML2 is manual, not live (per your request), so I don’t know what “policy” you refer to...This is still giving me a lot of trouble. (Live Validation is a red herring.)The basic scenario is:DiagnosticDecorator on main thread on behalf of UML Model Editor or some other UML-using editor.(Xtext) Validation Job on a worker thread.The worker thread discovers the stereotypes while the DiagnosticDecorator isn't looking.What is the design policy that enables this concurrency conflict to be avoided?a) is there a synchronization mutex that either the UML Model Editor doesn't activate or Validation doesn't observe?b) is there a disable validation hook that should be routed to the Validator?c) ... Looking at#c11, the policy seems to be that anyone modifying a ResourceSet should synchronize on it. Proxy resolution is an EMF protocol largely hidden from users. UML exploits it for lazy profile loading. Consequently it seems that perhaps the bug is a missing synchronize around getResources().add(result); in ResourceSetImpl.createResource. Looking at my lazy create UMLResource call stack, which is on yet another thread.Thread [OCL VM] (Suspended (breakpoint at line 42 in UMLResourceImpl)) UMLResourceImpl.<init>(URI) line: 42 UMLResourceFactoryImpl.createResourceGen(URI) line: 58 UMLResourceFactoryImpl.createResource(URI) line: 65 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).createResource(URI, String) line: 434 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).demandCreateResource(URI) line: 243 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).getResource(URI, boolean) line: 400 AdapterFactoryEditingDomain$AdapterFactoryEditingDomainResourceSet(ResourceSetImpl).getEObject(URI, boolean) line: 220 EcoreUtil.resolve(EObject, ResourceSet) line: 199 EcoreUtil.resolve(EObject, EObject) line: 259 DynamicEObjectImpl(BasicEObjectImpl).eResolveProxy(InternalEObject) line: 1473 EObjectResolvingEList<E>(EcoreEList<E>).resolveProxy(EObject) line: 206 EObjectResolvingEList<E>(EcoreEList<E>).resolve(int, EObject) line: 161 EObjectResolvingEList<E>.resolve(int, E) line: 60 EObjectResolvingEList<E>(BasicEList<E>).get(int) line: 348 AbstractEList$EIterator<E1>.doNext() line: 705 AbstractEList$EIterator<E1>.next() line: 692 PivotIdResolver(AbstractIdResolver).createOrderedSetOfAll(CollectionTypeId, Iterable<Object>) line: 440 I can't see any UML class that has access to the ResourceSet to synchronize it.My PivotIdResolver could synchronize but its just an ordinary bit of object manipulation. Potentially every bit of 'read-only' application code that could actually be 'read-write' because of a proxy would need a synchronize. Quite unreasonable. A synchronize in EMF seems to be the solution.If you agree please re-assign to EMF.(In reply to Ed Willink from)I’m afraid I don’t know off-hand. :(That’s why I don’t think UML2 is the right place to address the problem.I doubt you’ll convince Ed (Merks) to add syncrhonization code in EMF. Unfortunately, the general guidance here is to add such synchronization code at the application level; whether that’s unreasonable or not is a matter of opinion.(In reply to Kenn Hussey from)I am aware of that. I don't want to change the very pragmatic "synchronization should be provided by the application at a higher level" from the EMF FAQ ().The problem is to identify where EMF becomes its own application. I'm currently experimenting with a missing "synchronized" in:ResourceSetImpl.createResource override in AdapterFactoryEditingDomain.AdapterFactoryEditingDomainResourceSet (the EMF editing sub-application)DiagnosticDecorator::redecorate (the EMF display sub-application)IMHO It was the introduction of DiagnosticDecorator in EMF 2.9 that caused EMF to cross the "at a higher level" application threshold.	8.0
id=450868	REOPENED	MDT.UML2	Core	unspecified	PC Windows NT	P3 enhancement	UML2 Inbox	2014-11-10 13:00 EST by	Ed Willink	2014-11-11 09:28 EST (	1 user	The M3 version of org.eclipse.uml2.uml.resources is still 5.0.0 but has a new qualifier.This is bad practice as can be anticipated if SR1 or SR2 introduces a 5.0.1 that will then be out of order.Changed code should be either 5.0.100 or 5.1.0 or 6.0.0.	The code in org.eclipse.uml2.uml.resources has not changed. If/when it does in Luna SR2 or Mars, the version will be changed appropriately (to 5.0.2 or 5.0.100/5.1.0) per the usual convention.If there is no change, you have a releng bug. The qualifier should be unchanged.New qualifiers are produced for every UML2 build and have been for years. I agree that it’s not optimal; contributions welcome.I think that versions are preserved by the prevailing repo, so if the new release job is a migration of the previous it continues rather than restarts.I’m not sure what exactly you mean by “new release job”, but I had to switch to the ‘buildTImestamp’ qualifier replacement method several years ago when I ran into problems with the ‘lastModified’ alternative in Buckminster. Have you managed to use the latter consistently with success?Note that the current approach should still result in correct updates, although it may result in updating more things than strictly needed (with the same content).(In reply to Kenn Hussey from)We've been usingqualifier.replacement.*=generator:lastModifiedgenerator.lastModified.format='v'yyyyMMdd-HHmmunchanged for over four years.For the last two years I have done an eager +0.0.100 to avoid accidental update failures so may not have noticed problems.When we merged our +1 and +3 builds to do a preemptive +1 build despite a +2 dependency on Xtext with a follow up no-change +3 rebuild, I needed the +1 and +3 builds to be comparable and unchanged. They were apart from the old-fashioned use of about.ini and about.mappings which are auto-edited thereby giving you auto-different builds. So your changed versions may have at least trivially different content. Eliminating about.ini and about.mappings may solve your problems. The consequence is that the displayed description for features in the Help->Installed Contents changes slightly. Instead of your internally mutated version, you can fall back onto a platform autogenerated version. Compare OCL and UML2 feature descriptions.(In reply to Kenn Hussey from)If you have a build job named xxx-luna, then you can either rename to xxx-mars or create a new job named xxx-mars. Renaming should preserve continuity, whereas creating a new job may be discontinuous unless you take care to do a build referencing the old repo before migrating to a new reference repo.	7.0
id=453771	REOPENED	MDT.UML2	Core	unspecified	PC Windows NT	P3 enhancement	UML2 Inbox	2014-12-01 10:29 EST by	Ed Willink	2014-12-01 22:01 EST (	1 user	CreatedExample Ecore fileThe attached Ecore file contains a reference to EClassifier.When this is converted to UML using the menu action in the Sample Ecore Editor, an ecore.uml is created to terminate the reference.Surely it should be terminated in Ecore.metamodel.uml?[The extra ecore.uml eventually leads to bad resources and a CCE as EcoreUtil.resolveAll tries to convert a UML type to an ECore type.]	The base converter and sample action don’t make assumptions about whether the resulting elements should be assumed to be from the “built in” metamodel for Ecore. However, the exporter that is based on this utility was enhanced in the Kepler release to provide a way of specifying whether existing UML resources (including the built-in Ecore metamodel) should be referenced in the restulting models. Seefor details.But I am using the Menu Action so I have no option to use the enhanced exporter...... unless an additional processing option to map Ecore references is added.The above with an "Ignore" default would preserve compatibility, but IMHO UML2 has very special built-in knowledge of Ecore and so should handle EClassifier in just as special way as it handles EString.From the alternate point of view, creating an ecore.uml is supremely unhelpful because it is just waiting for a metamodel schizophrenia problem as ecore.uml has a fight with Ecore for the Ecore nsURI in the ResourceSet/EPackage.Registry.That action comes from the examples plugin and is really just a sample (whereas the exporter is the recommended/supported form). However, I could see how a new option could be added to redirect such references to the built in metamodel for Ecore.	3.0
id=453742	REOPENED	MDT.UML2	Core	unspecified	PC Windows NT	P3 normal	UML2 Inbox	2014-12-01 07:41 EST by	Ed Willink	2015-02-19 10:31 EST (	1 user	Using Ecore2UML from the Sample Ecore Editor menu for /org.eclipse.ocl.examples.xtext.completeocl/model/CompleteOCLCS.ecore (four nested Ecore files) initially gives a major UI freeze that is reported below. Once the 'there were some problems' dialog is OKed, Eclipse hangs.Both problems are probably due to the DiagnosticDecorator. Seethat gets very enthusiastic when it sees a ResourceSet changing. Ecore2UML is probably cuasing numerous changes.java.lang.Exception: Stack Trace at java.lang.Class.isInstance(Native Method) at org.eclipse.emf.edit.provider.ComposedAdapterFactory.adapt(ComposedAdapterFactory.java:261) at org.eclipse.emf.edit.ui.provider.AdapterFactoryContentProvider.getChildren(AdapterFactoryContentProvider.java:169) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1495) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1500) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1500) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1500) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.decorate(DiagnosticDecorator.java:1448) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.redecorate(DiagnosticDecorator.java:1321) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator.handleDiagnostic(DiagnosticDecorator.java:1290) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter$Dispatcher.dispatch(DiagnosticDecorator.java:945) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter$Dispatcher.dispatch(DiagnosticDecorator.java:898) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter.updateDiagnostic(DiagnosticDecorator.java:999) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticDecoratorAdapter.handleResourceDiagnostics(DiagnosticDecorator.java:1020) at org.eclipse.emf.edit.ui.provider.DiagnosticDecorator$DiagnosticAdapter.notifyChanged(DiagnosticDecorator.java:241) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification(NotifyingListImpl.java:261) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.clear(NotifyingListImpl.java:1114) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.save(ResourceImpl.java:1372) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.save(ResourceImpl.java:999) at org.eclipse.uml2.examples.uml.ui.actions.ConvertToUMLModelAction$1.run(ConvertToUMLModelAction.java:207) at org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute(WorkspaceModifyDelegatingOperation.java:70) at org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(WorkspaceModifyOperation.java:108) at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2313) at org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:130) at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:463) at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:371) at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:500) at org.eclipse.uml2.examples.uml.ui.actions.ConvertToUMLModelAction.run(ConvertToUMLModelAction.java:228) at org.eclipse.emf.edit.ui.action.CommandAction.runWithEvent(CommandAction.java:194) at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:237) at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:595) at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:511) at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:420) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4353) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4172) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1151) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1032) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:148) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:638) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:582) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:138) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:380) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:235) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603) at org.eclipse.equinox.launcher.Main.run(Main.java:1465) at org.eclipse.equinox.launcher.Main.main(Main.java:1438)	(In reply to Ed Willink from)Correction:.Ed, a fix for this has been committed in EMF. Could you please retest and confirm that it has fixed your problem?(In reply to Kenn Hussey from)Unfortunately EMF has given up publishing I-/N-build ZIPs so this will have to wait till M5.Use of EMF GIT was certainly promising.The M5 milestone buid for UML2 5.1.0 is now available. Please let me know if the problem persists.This problem should be fixed (by EMF) as of the M5 build. If that’s not the case, feel free to reopen this bug.(In reply to Kenn Hussey from)At last a moment or two. The hang is fixed. However there is still a significant UI freeze of 8 seconds. So some action has not been offloaded to a worked thread.The 8 second freeze is a one-time freeze as the JVM warms up. If repeated the freeze drops to 2-3 seconds. But good UI practice dictates a worker thread.UML2 does nothing special around invoking this operation, so if something needs to be done to add/adjust worker threads, I would expect that to be in EMF...The fix that was just pushed formay help reduce the time required to run validation...(In reply to Kenn Hussey from)Perhaps, but I doubt it.(In reply to Kenn Hussey from)Exactly, but if EMF and/or the platform refuse to help, it becomes a problem for all downstream tools that have bug models. You obviously don't want a UML-special model loading phase when EMF/platform could do it more flexibly. I (OCL/QVT) don't want a special model loading phase when Xtext/EMF/platform could do it more flexibly.	9.0
id=467639	REOPENED	MDT.UML2	Core	unspecified	PC Windows NT	P3 enhancement	UML2 Inbox	2015-05-20 02:19 EDT by	Ed Willink	2015-05-26 20:41 EDT (	0 users	While trying to define a profile for OCL, and after failing to find any entries in Eclipse help, and confused by the triple *.uml files for the standard profile, I resorted to the EXSD documentation.: org.eclipse.uml2.uml.dynamic_package claims it has an Identifier: org.eclipse.uml2.uml.generated_packageand claims thatExamples: Following is an example of how a (dynamically defined) profile location can be registered: <extension point="org.eclipse.uml2.uml.dynamic_package"> <profile uri="" location="pathmap://UML_PROFILES/Ecore.profile.uml#_0"/> </extension>org.eclipse.uml2.uml.generated_package also claims it has an Identifier: org.eclipse.uml2.uml.generated_packageand also claims thatExamples: Following is an example of how a (statically defined) profile location can be registered: <extension point="org.eclipse.uml2.uml.generated_package"> <profile uri="" location="pathmap://UML_PROFILES/Ecore.profile.uml#_0"/> </extension>: The actual supplied API is: <extension point="org.eclipse.uml2.uml.dynamic_package"> <profile uri="" location="pathmap://UML_PROFILES/Ecore.profile.uml#_0"/> </extension>but is not mentioned in the *.exsd.: There is no cross reference to the usage of uri_maps for pathmaps. Clear examples are needed demonstrating how to fully declarea static/dynamic profile and what the advantages/disadvatnges are of each approach.There appears to be no documentation on static profiles and that on dynamic seems to omit extension points.The dynamic declarations did not work for me and confuse me. Surely contributions in a plugin are generated and so it is pretty pointless supporting non-generated content?:is a very unhelpful example given how special and overloaded "Ecore" is,particularly unhelpful in conjunction with errors.I eventually discovered that all I needed was to define the profile, add: <extension point="org.eclipse.uml2.uml.generated_package"> <profile uri="" location="pathmap://OCL_PROFILES/OCLforUML.profile.uml#_0"/> </extension> <extension point="org.eclipse.emf.ecore.uri_mapping"> <mapping source="pathmap://OCL_PROFILES/" target="platform:/plugin/org.eclipse.ocl.pivot.uml/model/"/> </extension>(it would be nice if the UML2 genmodel managed this.): I found no clues on how the magic deterministic "_0" fragment should be maintained. And when I incorrectly bound it to the EPackage, the result was silent failures to apply the Stereotype and an error log full of "ClassCastException" entries without any additional detail.	(In reply to)Triple *.uml files?Yes, this was a typo; the identifier should be listed as org.eclipse.uml2.uml.dynamic_package. I will fix this.This is the same as the first issue; once the identifier is corrected, it will be mentioned.The pathmap URIs are just being used as example absolute URIs. The intent here isnt to recommend/require the use of pathmaps, but to show how the URI to the profile element (whether it be relative or absolute) can be registered.Feel free to submit a separate enhancement requesting that the use of pathmaps be better documented.The best we have right now is the presentation at. Feel free to submit a separate enhancement requesting that the two flavours of profile definitions be better documented.Uh, the dynamic registration is for profiles that don't have associated code (and thus the declaration can't be generated). An example of this is the Ecore profile in UML2.The reason it was used as an example for the dynamic profile is that it exists in UML2. I agree that it isn't as appropriate as an example for the generated package extension point, so I will change that one to reference the Standard profile (now that it's statically defined).Iff the profile is statically defined (i.e., code it generated for it), I could see the UML2 generator being extended to automatically generate an appropriate extension. Please submit an enhancement request for this. Of course, the generated extension wouldn't make use of pathmaps, because they are not required.As indicated in the documentation, location attribute should be a URI that references the Profile element, not its associated EPackage. The "_0" is just an XMI ID that's commonly assigned to the root UML element, by convention.Changes to correct the documented extension point ID for dynamic profiles and change the example for static profiles have been committed/pushed to the 'master' branch in git and will be avaiable in the next build of UML2 5.1.0.(In reply to Kenn Hussey from)/org.eclipse.uml2.uml.resources/profiles/Standard.profile.uml/org.eclipse.uml2.uml.profile.standard/model/Standard.uml/org.eclipse.uml2.uml.profile.standard/model/Standard.merged.umlI already did. It is this one. Reopening.Only slightly better becuase the Stnadard profile suffers from a triple UML confusion.Also critical to have different stable Ecore/UML URIs. e.g. xxx for UML, xxx/N for Ecore and to set a blank genmodel PluginKey to avoid UML extension points being trashed.I found the pathmap: invaluable for standalone testing for which it is very difficult to get the relative ../.. paths to line up between a file:/.../tests/.../bin/... test folder and a plugins/.../model profile folder.(In reply to)So, the first one is the only one users/consumers need to care about; the second two are development-only artifacts used in producing the generated implementation. This is no different from the triad of models that exist for the UML metamodel itself.Perfect. Made this an enhancement for future consideration.(In reply to Kenn Hussey from)Cleaer to you, opaque to me.For my OCLforUML profile, I used a *.profile.uml, defined it and generated code from it, so I think I am doing a hyrid of *.profile.uml and *.merged.uml. Seems to work. No idea if it's 'right'. Simple user-focussed examples needed rather than a lazy attempt to re-use special UML models as simple.The changes mentioned inare available in UML2 5.1.0 RC2.	6.0
id=484719	REOPENED	MDT.UML2	Core	unspecified	PC Windows 7	P3 enhancement	UML2 Inbox	2015-12-19 07:19 EST by	Patrick Germann	2015-12-23 09:58 EST (	2 users	CreatedSnapshot from Eclipse with the example model, profile and java code (as defined in eclipse - not custom)The eclipse modeling example "org.eclipse.uml2.examples.introtoprofiles" has an example to create an UML-Profile (name of file is "Ecore.profile.uml"). The code has some instruction to apply the stereotypes of the UML-Profile to the target model "ExtendedPO2.uml". The example runs without any errors - but the target model does not contains any applied stereotypes.I think the operation "applyStereotype" does not work.Example Eclipse Project reference description:Creates an example project containing the complete profile and source code for the Introduction to UML2 Profiles tutorial on the Eclipse UML2 wiki.	Did you modify the example to save the model, along with its stereotype applications, at the end?The out-of-the-box example doesn't actually save the model at the end, so unless you've modified it to do so you won't see the stereotype applications when you open the (unmodified) model afterward.CreatedSame problem apply stereotype after model save.Example of eclipse modeling example.I have added the example. Now I have modified the example - small enhancement with the 'model save'.But there is no visible Change on the model file 'ExtendedPO2.uml' (after refresh of Environment).Best regardsPatrickIt's not enough to just save the model - you have to add all of the stereotype applications (which are separate objects that aren't located in the model's containment hierarchy) to the resource as well. Try adding something more like this to the end of the main method in the example: Resource resource = RESOURCE_SET.createResource( URI.createFileURI(args[0]).appendSegment("ExtendedPO2") .appendFileExtension(UMLResource.FILE_EXTENSION)); EList<EObject> contents = resource.getContents(); contents.add(epo2Model); for (TreeIterator<EObject> allContents = UML2Util .getAllContents(epo2Model, true, false); allContents.hasNext();) { EObject eObject = allContents.next(); if (eObject instanceof Element) { contents .addAll(((Element) eObject).getStereotypeApplications()); } } try { resource.save(null); } catch (IOException ioe) { err(ioe.getMessage()); }(In reply to Kenn Hussey from)Surely this code should be in the distributed example?(In reply to)We could consider making that modification, but the original intent of the example was to show how to build a profile, apply stereotypes, and retrieve tagged values.(In reply to Kenn Hussey from)When I upgraded the example on, "save" was one of the hard-to-do things that I highlighted. IMHO since the example is all that there is, it should endeavor to demonstrate the full life cycle.Christian did an excellent job of polishing the example and resolving my FIXMEs. He provided "save" code, but this bug identifies that the example save is incomplete.Actually, overwriting the original model is a lot simpler than the code snippet I provided, since the model and its stereotype applications are already attached to a resource in the resource set: try { epo2Model.eResource().save(null); } catch (IOException ioe) { err(ioe.getMessage()); }The snippet I originally provided would be useful if you wanted to add the model and stereotype applications to a new/different resource (with a different URI) in case you don't want to overwrite the original.	8.0
id=451515	REOPENED	MDT.RMF	ProR	unspecified	PC Linux	P3 minor	Michael Jastram	2014-11-14 05:45 EST by	Moritz Dorka	2015-08-11 05:37 EDT (	1 user	For very long cells (i.e. cells whose height is larger than the height of the enclosing view of the Agile Grid) the scrolling behaviour is somewhat broken. I cannot manage to see the lower part of those cells. When trying to scroll, the view will at some point simply jump to the next row (and that row will then end up at the very top of the view).	This will be solved by truncating large cells.Fixed in 1d2c8e9a3ba950415ce9615217ab89fbdbd3d1c3Any chance to make the cell contents scrollable instead of just truncating them? I.e. once the user selects a long cell, scrollbars will appear to scroll up and down.ReqEdit () does it this way.set milestone to --- since it is not yet fixed.This issue might require another grid framework which might require significant effort.	4.0
id=293874	REOPENED	EMFT	Emfatic	unspecified	Macintosh Mac OS X	P3 major	Miguel Garcia	2009-11-01 12:42 EST by	Adrian Mos	2009-11-03 06:11 EST (	0 users	Hi,I'm trying to generate an Emfatic source file from the ecore file obtainable at [1] by right-clicking on the ecore file and choosing "Generate Emfatic Source". I do not get any result, no error message and no file being generated. My goal is to obtain an Emfatic file to use with Eugenia.Any ideas how I could get this to work?Thanks,Adrian.[1]	Createdthe ecore file I'm trying to use a source for Emfaticadded the ecore file for convenience(In reply to)Adrian, I haven't been updating the Emfatic version on the EMFT CVS for a good while now, and thus it may be the case that you're experiencing one of the bugs solved at(and in later versions reachable from there). Hope this helps, MiguelHi Miguel,thanks a lot for the quick reply. In fact I had just installed Emfatic today on my fresh Galileo modelling distribution, using the update site at:So this hopefully means I have the latest version?Thanks,Adrian.(In reply to)Adrian, I forgot to suggest trying 'Validate' (in the Sample Ecore Editor). Emfatic will not generate an .emf file for an inconsistent .ecore file. For the .ecore file in [1] above, the validator reports the error: A containment or bidirectional reference must be unique if its upper bound is different from 1 stpmodel.ecore regards, MiguelMiguel,thanks for the tip, this is very weird indeed. I have tried validating the ecore several times in different ecore editors and it worked everytime, except with the Generic EMF Editor which indeed raised the error you indicated. I fixed the "uniqueness" problem for that relationship and now the validation works in all cases. However I still can't generate the emfatic file from the ecore. I'm attaching the corrected ecore file, in case you can have a look at this new version and see if it works for you. Thanks again for your help.Adrian.Createdupdated ecore to pass validationemfatic generation still doesn't work.reopened as it seems the new ecore file is valid, yet I still can't generate the emfatic file (seeand attachement with). thanks again for your help with this.(In reply to)Adrian, Yes, it 'passed' validation. Isn't there something else that you are forgetting to check in that model of yours? Take a look at the annotations in it. Take a look at the stack trace on the console: java.lang.NullPointerException at org.eclipse.emf.emfatic.core.generator.emfatic.Writer.writeAnnotation (Writer.java:423)Actually, the above info is available without looking at the source. MiguelMiguel,Are there prerequisites for ecore models in order to use them with Emfatic? I'm not sure I understand what you mean by "having a look at annotations". Since you are pointing to a "NullPointerException" raised by Emfatic code, I'm not sure that as a user of Emfatic I'd be able to do anything useful with it (unfortunately I don't have the time to understand Emfatic's source code at this point).The problem I see now is that I have a valid ecore file, and Emfatic can't generate the Emfatic source. Unless there are any requirements that ecore files must fulfill in order to be "convertible" to .emf files, is there anything I'm doing wrong? Or is Emfatic not able to generate emfatic source in all cases?thanks again for your help,Adrian.(In reply to)Adrian, Some classes in your model (e.g., ServiceBinding) have annotations both of whose keys and values are empty (being shown as empty strings in the properties view). Perhaps the model resulted from an automatic conversion from another format. Whether that's a valid ecore model or not is beyond my knowledge. And because "empty annotations" were not anticipated in Emfatic, the conversion fails. In any case, I agree Emfatic could be extended to provide this diagnostic. MiguelHi Miguel,Great tip, thanks! I have removed the empty Annotations and Emfatic now generates the correct code!So I guess this bug could then be resumed simply to "Emfatic should support empty annotations, or at least ignore them in the generation of code". At the very least it should print a message out highlighting the problem. Maybe for a future version? Do you think I should open another bug or enhancement request?Thanks again for your help,regards,Adrian.	11.0
id=396543	REOPENED	QVTo	Engine	unspecified	PC Windows 7	P3 enhancement	Project Inbox	2012-12-13 15:26 EST by	Toni Siljamaki	2016-01-17 17:22 EST (	1 user	CreatedInternal Ericsson presentation with QVTO+ proposal.Introducing an additional M2T capability in QVTO would make ita complete and powerful M2M+M2T language, which would simplifya LOT for users building model compilers using open-source tools.Some of the benefits are:* the transforms themselves, all written in the same tool & language* the same Way-of-Working for M2M and M2T transform development* a more efficient WoW during development, updates, refactoring etc.* a single language, a single vendor, a single source for supportQVTO already supports 2 additional keywords not listed in theQVT specification under 8.4.7.1 Syntax for module definitions.(Invalid and List)Attached are some animated ppt slides from part of an internalpresentation, proposing 2 additional keywords which could enablethe support for additional M2T capabilities in QVTO.There are not that many viable open-source M2M & M2T alternativesto choose from, so this would also introduce some healthy competitioninto the Eclipse open-source M2M vs. M2T tooling arena. :)When trying to introduce new technologies in real-world projects,like model tranformations, the technology to be introducedmust be capable of handling more than just one thing.	1) QVTo is a M2M language endeavouring to comply with plausible evolution of the OMG QVT specification. M2T is not a plausible evolution at present.2) The presented example is superficial in the extreme; totally ignoring grammar integration or all but trivial cut and paste invocation.Any change towards M2T needs serious analysis. This is totally beyond the scope and resources of Eclipse QVTo.The spin is unhelpful. We have separate MtoT and MtoM tools and specifications so the suggestion seems super-disruptive.A different spin is to look at Xtend where the provision of powerful string capabilities allows Xtend to render Xpand obsolete; so much so that much of the Xtend documentation neglects to mention Xtend's utility for MtoT.If QVTo had powerful string capabilities, why not QVTr too? Is MtoT incompatible with declarative? no a complex side effect free string concatenation can be done in parallel, and even in the wrong order so long as the final concatenation is correctly ordered. So the suggestion for QVTo should be equally applicable to QVTr. So why not OCL? why not? it's just a specialized form of side-effect free data manipulation. Just needs an escape operator to embed an OCL query within a multi-line string and perhaps some richer 'separator' syntax. Moved to.File I/O seems horrible, but the handling of multiple input and output models programmatically is currently awkward. I have had to recommend use of a spurious top level container of models. Provision of an 'initial' load of a model variable from an external file, relative to a invocation context, and a 'final' save of a model variable again to a file relative to an invocation context would be useful for debugging and general multi-input/output scenarios. If the saved model happens to be a String then you have MtoT file I/O. Moved to.With Acceleo I have discovered that templates are just helpers that return Strings, so it is possible to construct documents from out of order sections e.g. generate code while accumulating includes for ultimately earlier emission. The normal helper/operation facilities are therefore adequate for structuring MtoT hierarchy.CreatedQVTo_M2T_toCDamusExample for Christian.The attachment is huge. Why?The attachment is password protected. Why? Please supply the password within Bugzilla. This is an Open Source communication channel.	4.0
id=361253	REOPENED	QVTo	Engine	unspecified	PC Windows 7	P3 major	Project Inbox	2011-10-18 08:49 EDT by	None	2011-10-19 10:08 EDT (	1 user	Build Identifier: 7601A have a QVTo transformation script and a corresponding launch configuration.I can run the script successfully. But when I change my input model in eclipse, for example, when I move an element of the input model to other x&y coordinates in the graphical editor of Eclipse and then try to run my QVTo script again then the transformation does not work any more and I get an empty result model.Even the command "log('All_Objects', input.objects());" in the main function that should list all elements of the input model results with an empty set.After a restart of Eclipse the OVTo transformation can be launched again successfullyI also tried to create a new launch configuration for my script. This new launch configuration also returns an empty result, as long as Eclipse is not restarted.Normally I use Eclipse 3.5 with Modelling tools. For testing I could also reproduce the same behaviour in Eclipse 3.7 with Modelling tools. In Eclipse 3.7 it is also possible to start a transformation as a debug configuration. The debug configuration works fine, also after a change in the source model.My impression is that the QVTo interpreter caches something and therefore does not work correctly after the source model is changed. Is there a way to reset it after a script was launched without restarting Eclipse? Reproducible: AlwaysSteps to Reproduce:1. Create a OVTo script and launch configuration that runs successfully2. Make any change in the source input model of the QVTo transformation3. Try to run the QVTo script again. It will deliver an empty result until Eclipse is restarted again.4. After a restart the transformation can be launched successfully again	It seems that errors in the metamodels caused the Bug. It metamodels exist as plugins and as EclipseProjects in the workspace this causes the BugNow I have some more information about the bug.After the failed 2. launch of the transformation I have several warings like the following in my Eclipse Error Log:null Warning grl.kpimodel.impl.KpimodelFactoryImpl cannot be cast to grl.kpimodel.KpimodelFactoryI don't understand this. I did not change anything in the involved metamodels. I only made a minor change in the source model used in the transformation.As mentioned before, when I start the transformation as a debug launch, everything works and I don't get any warnings or errors in the Error Log.	2.0
id=474603	REOPENED	QVTo	Engine	unspecified	PC Windows 7	P3 normal	Project Inbox	2015-08-10 08:11 EDT by	Christopher Gerking	2016-07-15 09:54 EDT (	3 users	It is currently hard to co-develop QVTo and Java. The problem is that QVTo is not able to resolve a blackbox that resides in a Java workspace project. Instead, the plugin project must be deployed to resolve the blackbox. Therefore a nested Eclipse is required to get a clean QVTo build, without getting compilation errors for blackbox imports.	Pushed a first attempt to cgerking/474603. It hooks JDT to obtain the Java output path of a certain project, and then uses an URLClassLoader to load Java classes from that directory.Current limitations:* Resolving a workspace blackbox is possible only if it resides in the same project as the QVTo unit.* Resolving a workspace blackbox works only if the imported name matches the Java class name. That's a limitation since deployed blackboxes may have arbitrary names. Therefore I suggest to create a new project properties page called "Blackbox Mappings" which maps QVTo fully qualified names to Java class names. * The mechanism does only work with import statements, not when using plain blackbox operations. That's also the reason why JdtBlackboxProvider.getModuleDescriptors(ResolutionContext) is not implemented. For plain blackbox operations to get ready, we require a collection of known Java class names, which should be loaded and checked for blackbox implementations. I think it is sensible to use the above "Blackbox Mappings" to obtain this collection of class names.* Currently, it uses a new ClassLoader with every attempt to resolve a certain blackbox. That's bad, because classes loaded once should be reused. However, since we are in workspace, it should also be possible to exchange classes once their Java source gets modified. Therefore we need an intelligent mechanism to keep track of the class loading.Commit ID: 7d47f6e5d77efbd2b1453b12e136a1ab967729d8(In reply to Christopher Gerking from)However, it is possible to specify project references in order to include external projects as well.I still wonder how to deal with the JDT dependency. If we add the new plugin to a QVTo feature, is it still possible to install that feature in absence of JDT? If not, does it help to make it an optional plugin dependency, assuming that the project output location is just "bin" whenever JDT is not available?(In reply to Christopher Gerking from)Actually plug-in 'org.eclipse.m2m.qvt.oml.ui' already contains dependency on "org.eclipse.jdt.core" and "org.eclipse.jdt.launching". Thus new plug-in with dependecy to JDT won't change the logic of installation.Pushed to master for Neon M6.Commit id: 9af53bbccaaa76a66e4b067c935fd2d039ae8c3fThe following enhancements were added:* Support for imports completion (Ctrl+Space after "import " statement). Black boxes that are fetched from JDT are marked with separate icon.* Support for hyperlink navigation from qvt editor to JDT both for library import statement and for the reference to black box function.(In reply to Christopher Gerking from)Any ideas how to avoid a new "Blackbox Mappings" properties page? I thought about parsing the plugin.xml in order to infer the mappings between the QVTo and Java names somehow. I've seen an Eclipse project doing exactly this, but it seems like a major overhead. Also I don't think that PDE provides any help here. Now that all Java classes are scanned, could we use a Java annotation to specify the mapping?Anyway, my list of todos inshould indicate that this bug is not yet resolved fixed.(In reply to Christopher Gerking from)I feel that QVT ignored the need to integrate in a larger world of many transformations.(Acceleo and Xtend both support the Package hierarchy.)For the pivot support of QVTc and QVTr (and QVTo) the Transformation-is-a-Class is exploited to permit arbitrary model Package encapsulation. No longer MyTx, rather org::eclipse::qvtd::examples::MyTx.If QVTo supports (and expects) package qualification, users will readily accept that model path names and Java path names are equivalent avoiding the need for a confusing mapping.(In reply to Christopher Gerking from)Agree. Bug is reopened.(In reply to Christopher Gerking from)Here I propose to use an org.eclipse.jdt.core.compiler.CompilationParticipant to get notifications about Java builds and clear the cache of loaded class files on each new build (by resetting the ClassLoader). An intelligent mechanism would probably use a tree of ClassLoaders (one for each Java project) and reset only the part that applies to the project which is about to build.(In reply to Ed Willink from)I agree. However, now that users have already registered such mappings for years in their plugin.xml files, shouldn't there be a (legacy) mechanism to support disparate names in workspace as well?(In reply to Christopher Gerking from)I don't think this is possible. ClassLoaders are load-only. For OCL/QVTd CG I have to create a new ClassLoader. Let me know if you have a solution.(In reply to Christopher Gerking from)Yes. Legacy compatibility is good/essential. But compatibility doesn't mean we cannot move on to a better solution.(In reply to Ed Willink from)Yes, in general I meant creating a new ClassLoader. It should also be possible to come up with a custom ClassLoader implementation that overrides loadClass(...) to circumvent the caching in findLoadedClass(...).(In reply to Christopher Gerking from)org.eclipse.ocl.examples.codegen.dynamic.ExplicitClassLoadermight provide some clues.Sergey, in commit c951970e1a99afa2563fff8716c6601b6c31adf9 you modified the hashing behavior of JdtDescriptor to make it behave like a data type. Please note that this change prevents any changes at Java level to be considered by QVTo, because once a class is loaded under a specific name, it will always be reused as is. What was the reason for that change? I think the hash value of the Java class should itself contribute to the hash value of the descriptor, such that an updated class file can be considered under a specific name.(In reply to Christopher Gerking from)Worked on this in commit f327cd21f39c7c4ded926cc60965366937f8558e. Pushed to cgerking/474603.I introduced a hierarchy of URLClassLoaders, one for each project, delegating to referenced projects. The previous solution wasn't able to load a class with dependencies to other workspace projects, which does now work.(In reply to Ed Willink from)It was actually easier to create a new ClassLoader and replace the old one. I hooked JDT to receive notifications of projects having been built, replacing the class loader for every re-built project.(In reply to Christopher Gerking from)Meanwhile I think that this change was made to reuse a Java class instead of loading multiple equal versions of one class. This does now work without manipulating the hash values, because the class loader is itself reused exactly until the respective Java project has been recompiled.(In reply to Christopher Gerking from)There should be an outer project with all other projects on its classpath, so if you ensure that the outer project constructs the class loader, one class loader will do. NB. static objects are loaded by their own plugin / class loader, so you have to take great care if any static caches contribute to loading.(In reply to Christopher Gerking from)The reason is that in case user select incorrect Java class for import (for example by means on completion hint) like import qvto_java_1.Qvto_java_1Activator;it will immediately spammed with tons of the same error messages Failed to load Java black-box unit 'qvto_java_1.Qvto_java_1Activator'With the fix the user will get the only one error message.My first intention was to reuse .hashCode() of Java class itself. But unfortunately due to the fact that ClassLoader is always a new instance then .hashCode() of Java class which is obtained with the loader is always different.(In reply to Sergey Boyko from)I see. But I think this has been solved as good as possible by the above patch. It reuses a ClassLoader as long as possible and therefore preserves the hash values of the descriptors. Only in case of a project that has been rebuilt, classes are reloaded using a new loader. Of course there is no guarantee that an invalid class has become valid, so there can still be errors reported multiple times. But since classes may change in workspace, we have to reload them and so recurring errors are unavoidable.One remaining problem is that the old descriptors (describing illegal classes) remain stored inside the fBlackboxUnits HashMap of class JavaBlackboxProvider. However this seems to be a general problem because the global BlackboxRegistry is never cleared anyway.(In reply to Ed Willink from)On the one hand, relying on the full classpath of a project seems especially sensible in order to handle circular plugin dependencies or project references. In this case, the current class loading approach will loop infinitely. On the other hand, using only one ClassLoader makes it hard to handle Java changes gracefully, that is reloading only the affected classes (not all classes in all referenced projects, even if they didn't change).(In reply to Christopher Gerking from)Pushed to master branch for Oxygen M1.Commit id: 311ed0d35ccfd6787cd54c6ec9cd4801db4a184f(In reply to Christopher Gerking from)Yes, the patch solved the problem with "always new" ClassLoader. So .hashCode() of Java classs itself is now correctly re-used.Agree. The global BlackboxRegistry can only be refreshed totally (by means of .cleanup() method).Not a big problem though.	21.0
id=259331	REOPENED	EMF	Releng	2.5.0	All All	P3 blocker	Nick Boldt	2008-12-18 20:18 EST by	Richard Gronback	2008-12-29 10:51 EST (	6 users	But, it is listed in the metadata repository, allowing me to install it in Galileo. But then, UML2 3.0M4 failed to install, as seen below. I was unable to retest this install problem using a fresh platform M4 since the p2 UI refuses to see past a site.xml if present. [exec] install.feature: [exec] [exec] Installing org.eclipse.emf.sdk.feature.group 2.5.0.v200812151800. [exec] [exec] Operation completed in 66920 ms. ... [exec] [echo] Installing contributions org.eclipse.uml2.sdk. [exec] install.feature: [exec] [exec] Installing org.eclipse.uml2.sdk.feature.group 3.0.0.v200812161100. [exec] [exec] !SESSION 2008-12-18 18:50:54.390 ----------------------------------------------- [exec] [exec] eclipse.buildId=I20081211-1908 [exec] [exec] java.fullversion=J2RE 1.5.0 IBM J9 2.3 Linux ppc-32 j9vmxp3223-20071007 (JIT enabled) [exec] [exec] J9VM - 20071004_14218_bHdSMR [exec] [exec] JIT - 20070820_1846ifx1_r8 [exec] [exec] GC - 200708_10 [exec] [exec] BootLoader constants: OS=linux, ARCH=ppc, WS=gtk, NL=en_US [exec] [exec] Framework arguments: -application org.eclipse.equinox.p2.director.app.application -installIU org.eclipse.uml2.sdk.feature.group -version 3.0.0.v200812161100 -profileProperties org.eclipse.update.install.features=true -metadataRepository-artifactRepository[exec] [exec] Command-line arguments: -os linux -ws gtk -arch ppc -application org.eclipse.equinox.p2.director.app.application -consoleLog -installIU org.eclipse.uml2.sdk.feature.group -version 3.0.0.v200812161100 -profileProperties org.eclipse.update.install.features=true -metadataRepository-artifactRepository[exec] [exec] [exec] [exec] !ENTRY org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:04.810 [exec] [exec] !MESSAGE Problems resolving provisioning plan. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 2 0 2008-12-18 18:51:04.810 [exec] [exec] !MESSAGE Unable to satisfy dependency from org.eclipse.uml2.codegen.ecore 1.4.0.v200805201126 to bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0). [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 2 0 2008-12-18 18:51:04.811 [exec] [exec] !MESSAGE Unable to satisfy dependency from org.eclipse.uml2.feature.group 3.0.0.v200812161100 to org.eclipse.emf.exporter [2.4.0,2.5.0). [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 2 0 2008-12-18 18:51:04.811 [exec] [exec] !MESSAGE Unable to satisfy dependency from org.eclipse.uml2.feature.group 3.0.0.v200812161100 to org.eclipse.emf.importer [2.4.0,2.5.0). [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 2 0 2008-12-18 18:51:04.812 [exec] [exec] !MESSAGE Unable to satisfy dependency from org.eclipse.ocl.ecore 1.2.0.v200805130238 to bundle org.eclipse.emf.ecore [2.4.0,2.5.0). [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:04.812 [exec] [exec] !MESSAGE No solution found because the problem in /tmp/p2Encoding33577.opb is unsatisfiable. [exec] [exec] Installation failed. [exec] [exec] [exec] [exec] !ENTRY org.eclipse.equinox.p2.director 4 1 2008-12-18 18:51:11.382 [exec] [exec] !MESSAGE Cannot complete the install because some dependencies are not satisfiable [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.383 [exec] [exec] !MESSAGE "org.eclipse.uml2.feature.group 3.0.0.v200812161100" requires "org.eclipse.emf.importer [2.4.0,2.5.0)" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.383 [exec] [exec] !MESSAGE "org.eclipse.uml2.feature.group 3.0.0.v200812161100" requires "org.eclipse.emf.exporter [2.4.0,2.5.0)" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.384 [exec] [exec] !MESSAGE "org.eclipse.emf.exporter [2.4.0,2.5.0)" and "org.eclipse.emf.exporter [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.384 [exec] [exec] !MESSAGE "org.eclipse.emf.importer [2.4.0,2.5.0)" and "org.eclipse.emf.importer [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.384 [exec] [exec] !MESSAGE "org.eclipse.emf.exporter [2.4.0,2.5.0)" and "org.eclipse.emf.exporter [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.385 [exec] [exec] !MESSAGE "org.eclipse.uml2.codegen.ecore 1.4.0.v200805201126" requires "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.385 [exec] [exec] !MESSAGE "bundle org.eclipse.emf.codegen.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.386 [exec] [exec] !MESSAGE "org.eclipse.emf.importer [2.4.0,2.5.0)" and "org.eclipse.emf.importer [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.386 [exec] [exec] !MESSAGE "org.eclipse.ocl.ecore 1.2.0.v200805130238" requires "bundle org.eclipse.emf.ecore [2.4.0,2.5.0)" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.386 [exec] [exec] !MESSAGE "bundle org.eclipse.emf.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.387 [exec] [exec] !MESSAGE "org.eclipse.emf.exporter [2.4.0,2.5.0)" and "org.eclipse.emf.exporter [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.387 [exec] [exec] !MESSAGE "bundle org.eclipse.emf.codegen.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.388 [exec] [exec] !MESSAGE "org.eclipse.emf.importer [2.4.0,2.5.0)" and "org.eclipse.emf.importer [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.388 [exec] [exec] !MESSAGE "bundle org.eclipse.emf.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.388 [exec] [exec] !MESSAGE "org.eclipse.emf.exporter [2.4.0,2.5.0)" and "org.eclipse.emf.exporter [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.389 [exec] [exec] !MESSAGE "bundle org.eclipse.emf.codegen.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.389 [exec] [exec] !MESSAGE "org.eclipse.emf.importer [2.4.0,2.5.0)" and "org.eclipse.emf.importer [2.5.0.v200812151800]" are both required, but are not compatible with each other. [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.390 [exec] [exec] !MESSAGE "org.eclipse.ocl.ecore 1.2.0.v200805130238" requires "bundle org.eclipse.emf.ecore [2.4.0,2.5.0)" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.390 [exec] [exec] !MESSAGE "org.eclipse.uml2.feature.group 3.0.0.v200812161100" requires "org.eclipse.emf.importer [2.4.0,2.5.0)" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.390 [exec] [exec] !MESSAGE "org.eclipse.uml2.codegen.ecore 1.4.0.v200805201126" requires "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.391 [exec] [exec] !MESSAGE "org.eclipse.uml2.sdk.feature.group 3.0.0.v200812161100" requires "org.eclipse.uml2.feature.group [3.0.0.v200812161100]" [exec] [exec] !SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2008-12-18 18:51:11.391 [exec] [exec] !MESSAGE "org.eclipse.uml2.feature.group 3.0.0.v200812161100" requires "org.eclipse.emf.exporter [2.4.0,2.5.0)" [exec] [exec] Result: 13	FWIW, I used the EMF 2.5M4 zip and then tried to install UML2 via its update site and received errors as well.James, have you successfully installed UML2 3.0M4 from your update site?emf-emf.build has been regenerated w/ M4 contribution. How do I kick a Galileo build to test it?Info on running a local build is on the wiki:Why does EMF require so many feature entries in its build model? The Planning Council is intentionally trying to simplify the categories visible. Installing the SDK feature will install the rest, so they'll be available in the Galileo repository.In case it was missed, this bug was only about the fact that EMF's 2.5M4 build is not listed in the /milestones site.xml file. It has nothing to do with the emf-emf.build model.If newer builds are intentionally not being added to the site.xml file but only the p2 content.xml file, you should remove the site.xml file to avoid the feature's obfuscation in the p2 UI, as per.(In reply to)Well, there may be products/projects that depend on those features. If I omit them, they'll still be found and added to the "Uncategorized" bucket. This is just to make them more visible, and give people the same choice as last year -- runtime or SDK.p2 metadata is generated FROM the site.xml, so I'm not sure how it can be in one but not the other. Perhaps a file was accidentally overwritten by a subsequent update, after the metadata was published. I suspect this might be a bug related to the renaming of the source zips fed to the update site gen process.(In reply to)Having them in "Uncategorized" for now is fine. The filter view at the top is expected to be useful for those searching what will be an enormous list. What we don't want are dozens of entries under Modeling.Your guess is better than mine. I just know what I see looking at the files.Rich:James is on holiday, so I'm trying to fix this one.Just ran an install attempt of UML2 M4 onto the full platform M4 + EMF M4 - it didn't work - errors about incompatible version dependencies. I'm going to try to get a patch together for this.I'll need Kenn to commit it, so I'm CC'ing him. Then, I'll need to spin an M4a.For the record, here are the error messages from P2."bundle org.eclipse.emf.codegen.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other."bundle org.eclipse.emf.codegen.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other."bundle org.eclipse.emf.codegen.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other."bundle org.eclipse.emf.codegen.ecore [2.5.0,2.6.0)" and "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" are both required, but are not compatible with each other."org.eclipse.uml2.codegen.ecore 1.4.0.v200805201126" requires "bundle org.eclipse.emf.codegen.ecore [2.4.0,2.5.0)" "org.eclipse.uml2.sdk.feature.group 3.0.0.v200812161100" requires "org.eclipse.uml2.feature.group [3.0.0.v200812161100]" "org.eclipse.uml2.feature.group 3.0.0.v200812161100" requires "org.eclipse.emf.importer [2.4.0,2.5.0)" "org.eclipse.uml2.feature.group 3.0.0.v200812161100" requires "org.eclipse.emf.exporter [2.4.0,2.5.0)"(In reply to)Can do.Why does it look like it's picking up this older version of the UML2 code generator plug-in? It should be 1.5.0...I've committed changes to the UML2 feature so that it references the new versions of the EMF importer and exporter plug-ins. Please let me know if that solves the problem.CreatedPatch for org.eclipse.emf.(im|ex)porter verions in feature dependenciesTrivial patch adjusting feature dependencies on org.eclipse.emf.importer and org.eclipse.emf.exporter from 2.4 to 2.5(In reply to)These changes have already been committed and released (see previous comment).But, I'm still unclear as to why the 1.4.0 version of the UML2 code generator plug-in is being mentioned (unless a higher level plug-in from GMF or UML2 Tools is referencing the wrong version)...Kenn. The only thing I can figure is that P2 was trying to satisfy references in whatever way it can. The milestones update site contains older UML2 builds, and I'm guessing it was looking into those. My test environment is pure 3.4M4 and EMF 2.5M4, and searches of the UML2 3.0.0M4 source show now 1.4 references.(In reply to)OK. Let me know if the committed/released changes do the trick. Thanks.UML2 3.0.0M4a has just been promoted to eclipse. Prior to promotion, I did confirm that P2 could install it without complaint.(In reply to)I re-ran the EMF M4 promote (update site gen only), after purging the old definition files re: emf.torolab and emft.eclipse of old EMF jar names.Looking atI now see EMF SDK 2.5.0M4 S200812151800. Sounds like UML2 is happy too, so I'll close this bug.Now it appears that Validation and Transaction 1.3.0M4 (and M3) are missing.	15.0
id=359089	REOPENED	Epsilon	Core	unspecified	PC Linux	P3 enhancement	Antonio Garcia-Dominguez	2011-09-27 11:03 EDT by	Antonio Garcia-Dominguez	2012-06-21 12:17 EDT (	2 users	This is one of the pending tasks we had in the Epsilon wiki.The Epsilon debugger only implements "step into" right now. "Step over" is required to test real-world cases. Right now, users have to work around this by adding an explicit breakpoint and hitting Continue, which is rather awkward.	Fixed in SVN r1879.I went ahead and implemented "Step Return" as well, so I've changed the title of this bug report.Ugh, it seems that the current implementation doesn't let you step over into the body of a for/while/if statement. We'll need to call the new "done" method of ExecutionController more often, it seems.And "step return" currently "returns" from while/if blocks as well, since it relies on the frame stack dropping below a certain number of levels. We'll need to require that those levels are EOL operations or their generic equivalent.	3.0
id=271486	REOPENED	Modeling	Cross-Project	2009-Galileo	PC Linux	P3 normal	Nick Boldt	2009-04-07 12:32 EDT by	Nick Boldt	2009-05-19 13:58 EDT (	13 users	Currently, our update sites have more than one release per component, and branches share the same site. So, for /emf/updates/milestones/ you will find two milestones of EMF 2.5 and the last stable build from 2.4.x. Same's true for all the other project sites (EMF, EMFT, MDT, M2T, M2M, GMT, TMF).The number of releases to include in earch aggregate update site type (integration, milestones, releases) is controlled by a few properties, and can easily be changed such that there is only ever ONE release on the site at any given time. Now that we publish update site zips, the need to have multiple versions on the unpacked update site is mitigated.This is a trivial thing to change and I can do so in minutes, unless anyone -1's the idea. I'll let this bug sit for a week before proceeding.---A second change that's not so easy to implement would be to restrict the sites such that release years do not overlap in the same repo (ie., updates/milestones/ becomes updates/ganymede/milestones/ and updates/galileo/milestones/). I can change the generator to start publishing bits into /updates/galileo/* instead of /updates/* but the bigger issue is that everyone's features will need to be updated so that their <update> and <discovery> URLs point to the new path. Because this change requires that PLs and/or committers update their features, I will need some +1s here from the PMCs before proceeding with the second half of the plan. Ideally, we'd make this change before M7, May 01 - May 06, 2009.---FYI, the motivation behind these changes is discussed inre: a better Galileo build system.	Well, looks like we slipped past M7 here, but I'm going to read the absence of -1s as approval to do the first part, and the lack of +1s as veto on the second part. Thanks for taking an interest.New version of buildUpdateSite.sh has been rolled out to emft.eclipse and modeling.eclipse tonight, and should automatically scrub old versions so that only a single version of each component's latest is published.Yes, we should have paid attention to this one. So you are saying:milestones == one release == Galileo milestone builds currently.interim == one release == Galileo integration builds currently.release == one release == Ganymede release build currently.So what happens when we GA Galileo?interim == two releases == Galileo Milestone builds and Galileo+1 integration builds.Is this ok still?Apologies for missing this when you asked for comment initially. If I'm too late for some or all of this to be useful, so be it.I'm trying to look at this from the user's perspective and to understand if the impact of these changes are significant. Here's how I understand things...Change number 1 (already done) means that a user can never move back to a previous build if things go wrong. As soon as M7 comes out, M6 is gone. So, if the user finds that M7 breaks some piece of function that he cares about, his only recourse is to hit the download pages and start doing things manually.Change number 2 means that a user can't subscribe to a single release site and continue to get release after release. They'll get the main release and two service releases, and that's it. When they want to move to the next main release, they'll have to change the update site they're using.Like I said, I'd like to understand how significance of these loses. To me, the second seems like a minor inconvenience, but the first could be more significant.I read through a lot of the comments intrying to find the motivation for these changes. The best I could find was Richard suggesting that they'd allow them to do away with the build model. But Thomas then said, "I'm not at all unhappy about using the build model b.t.w. It's easy enough to work with, having annotated Java interfaces and all. Emf rocks!"To me, it makes sense that individual project sites can contain more than just what they contribute to Galileo, and that there's then going to have to be some artifact that describes what they're contributing.(In reply to)It's one release per type per branch per project, so R site has EMF 2.2.x, 2.3.x, 2.4.x, 2.5.0 (then later that'll be replaced with 2.5.1 and then 2.5.2)... and also the latest R for MQ, MT, VF, CDO, Net4j, Teneo.Same story for I/M/N (interim) and S (milestones) sites - one per type per branch per project. I believe interim will always be more overloaded because it includes nightly, maintenance, and integration. This might be the reason why we're seeing p2 metadata corruptions - too many plugins and features to aggregate into a single .xml file. I'm hoping that reducing the # of releases per type per branch per project from 3 to 1 will help here.(In reply to)p2 lets him uninstall. I suspect reverting configuration will back up from M7 to M6. And there's the M6 update zip too, which he can download for use offline.Does GMF 2.1 work on Eclipse 3.4, or just 3.5? Would an update site with both GMF 2.0 and 2.1 be useful, if the user has to download the correct platform anyway, and then know which version maps to which Eclipse?Yes, and currently that mechanism is the .build file which specifies the <features> to include and on which <repositories> they can be found.(In reply to)Does that mean that p2 keeps all the old stuff you've ever installed so you can revert to it?The features declare what versions of their dependencies they work with, don't they? So, surely Update won't let you install a new GMF if it has dependencies on components of a new Eclipse.And your update sites are kept in your workspace, right? So, after you update Eclipse, assuming you keep using the same workspace, you'd be able to immediately update GMF and all of the other projects whose release sites you're following, if the new versions are on that same site.Right, but the only motivation I could find for these changes in the bug you referenced was to get rid of the .build files. Was there some other motivation I missed?(In reply to)p2 != yum or apt-get - it doesn't purge old versions just because they're obsoleted by newer versions. And it doesn't garbage collect unless a plugin is not needed by *anyone* anymore, and you're uninstalling it.True, but the option will still be in the UI, and the user will have to click thru the wizard to let p2 tell him it's not possible to install his requested update. Why expose people to *more* frustration if we don't need to?Yes. But reusing workspaces between minor Eclipse releases is ... not always wise.Comes from discussion w/ the PDT people about having a /2.0/ site separate from their 1.x site, and extending the idea to include minor version updates as well as major ones. I've also asked if they want a /2.1/ site for their Galileo release, but so far I haven't heard yea or nay on that. In any case, there is already support in the Modeling build system for directing your updates to a different place than the standard /updates/ folder, should anyone want to use /updates/foo/interim/ instead of /updates/interim/, etc.Oops. I was copying the new content from *_rN INTO *_r0/ (resulting in *_r0/*_rN) instead of replacing the old _r0 with the new content.Fixed and rolled out to build servers. Please re-promote the build via the web UI (using -FORCE), or else just redo the update site step if you want to get your commandline on (use -jarsonly flag, IIRC).Just re-promoted and it looks like things are good for EMF again. Thanks Nick.GEF is still breaking Galileo, so it looks like it needs the same.(In reply to)Re promoted GEF RC1This feature likely wiped out all the OCL builds from Galileo.I am not sure this is a problem with Nick's script, rather that the OCL project has not been producing regular milestone builds, we missed a M7 for OCL.What do you think Nick?I will raise a separate Bugzilla to get emergency builds going or recover the OCL content.(In reply to)Actually, Nick already answered in his email to mdt-dev:If I've deleted your newest HEAD branch Stable or Integration build, then something's wrong w/ your project - you should be publishing Stables at least monthly and Integrations at least biweekly - so now's your chance. :)(In reply to)I promoted MWE and Xpand today using R35_M7 all works fine sofar except of update site zips. hey contains only an empty site.xml. Seems like there is still a problem with rN <-> r0 stuff.(In reply to)Damn. Apparently downstream from buildUpdateSite.sh other scripts need that _rN dir to produce content in the _r0 dir. Checked in an update to use cp instead of mv. Please try again, sorry for the churn.	13.0
id=507284	REOPENED	Papyrus-rt	tool	0.8.0	PC Windows 7	P3 normal	Project Inbox	2016-11-09 05:49 EST by	Peter Cigehn	2017-01-12 16:38 EST (	2 users	This is an extract fromfor the specific case of creating a generalization relationship for a protocol in the model explorer.Also seefor the general aspect of supporting protocol inheritance.	Since at least Papyrus-RT-Master-Product build #310 the "New Relationship -> Generalization" action in the Model Explorer configures a protocol as required for UML-RT Protocol Inheritance when the general classifier is another protocol.I checked this in the latest Papyrus-RT build, and yes, it is possible to create a generalization using the ordinary New Relationship menu. Maybe this bug was not that clear, since it was simply an extraction from, but as indicated on that bug, the idea was that the subset of relationships that are applicable in the context of UML-RT should be made available on a separate UML-RT menu.As discussed in that bug, this could either be a submenu on the current "New UML-RT New Child" menu, or possibly a new top level menu "New UML-RT Relationship". Which approach used probably should be aligned with other DSMLs, e.g. SysML.UML-RT users should not have to open the standard "New Relationship" menu with lots of relationships not relevant for the UML-RT context (in the same way as UML-RT users should not have to use the ordinary "New Child" menu).Another aspect to improve is that the selection dialog presenting the possible targets of generalization should be filtered to only show other protocols. Currently the selection dialog also lists other element types like ordinary classes and capsules, which makes its possible to create invalid generalizations.This filtering probably also should include filtering the current protocol, and any subclass protocols of the current protocol, to avoid creating a circular generalization chains (similar to the aspect of not creating circular containment capsule structures as tracked by).State machine inheritance will take priority over this for 1.0.	4.0
id=479240	REOPENED	Papyrus-rt	tool	.7	PC Windows 7	P3 normal	Project Inbox	2015-10-07 09:00 EDT by	Stephanie Chafe	2016-12-05 08:05 EST (	3 users	Investigate and identify required mappings between CppPropertySets profile and RTCppProperties profile.	Closed - profiles and property sets have changed extensively since this bug was created.(In reply to Charles Rivet from)I am not sure I understand the reason for closing this one as WONTFIX? Since this is the Bugzilla tracking the investigations regarding which mappings shall be done, it does not really matter that the RtCppProperties profile have changed since this Bugzilla was written (that is what the investigation is all about, i.e. to conclude how the mapping shall be done).Will a new one be written to track this instead? This investigation Bugzilla still blocks, which is tracking the actual implementation of the mappings in the import tool.As I see it, thisfor the investigation and its implementation, is following the same structure we have forfor the investigation and its related implementation in.If we do not plan on having this structure of one investigation and one implementation Bugzilla for both these two major areas regarding import of legacy models, then I suggest that we are consistent and close the other investigationas well (or keep both open).(In reply to Peter Cigehn from)Agreed, missed the relationship to the Papyrus bug.Moved to future until determination of migration importance in the release planning.(In reply to Charles Rivet from)Just to be clear:should really be moved over to Papyrus-RT (now when the import tool has been splitted in two parts, one for RSA in Papyrus, and one for RSARTE in Papyrus-RT). I have proposed this in, but no one has so far done so. Actuallyshould also be moved over to Papyrus-RT for the same reason, see.Both bugs mentionned by Peter (&) have been moved to Papyrus-RT, but the planning seems not coherent, with bug for 1.0.0 or 0.9.0 depending on 'Future' bugs.(In reply to Remi Schnekenburger from)Correct, as I already commented on inwe need to plan these two pairs of "investigation" and "implementation" bugs together. If this is hard to keep track of (which it seem to be), then maybe we can combine the "investigation" bug and the "implementation" bug and only have one for the run-time model library mappings respectively one for the C++ property sets mapping, now when they all are assigned to Papyrus-RT anyway.	6.0
id=359963	REOPENED	Papyrus	Core	unspecified	PC Windows XP	P3 normal	Patrick Tessier	2011-10-05 07:31 EDT by	Patrick Tessier	2011-12-01 05:13 EST (	3 users	The composite diagram must not contain scrollbar	Explanation about how to do this functionality has been added in the wiki :generic classes added in the diagram.common (rev 5703)committed in the branch (rev 5706)the merge has been done for the diagram common in the head (rev 5724)the merge has been done for the diagram composite in the head (rev 5725)The feedback during move attempt does not appear to be correct (a part of the contained figure appears outside its owner).The autosize mode does not work correctly with this implementation, it is allowed or not depending on the gesture (ex: move on the left ok, move on the right nok) which lead to a somehow unpredictable behavior...Note that I currently have some troubles with the autosize mode (see.) relatively to Port location in general and FlowPort graphical appearance more specifically.(In reply to)The container can also be resized in a way that mask the content (without scrollbars, there is no way to know that such contained element has been masked).The resize from top-left toward the bottom-right diagonal can result in a container resize.It is peculiar, could you explain the condition to execute this behavior, because I cannot reproduce it.I have not this bugIn fact, I have take in account this behavior(In reply to)Create a Class, a Property then move the property... I have Papyrus nightly 201111011738 installed, i'll add a screen capture for this.Sorry move down not left, this is probably more or less related to the previous bug.Create a Class add a Property, switch the Class to autosize mode and try to move the Property. When you go down the Class can be resize, not when you move the Property to the left or right.I dont think so, these bugs are still existing in current version.CreatedIncorrectFeedbackCreatedPartially_hidden_contentCreatedProperty_moved_outside_containerWill you implement scrollbar removal for SysML Internal Block Diagrams too?(it seems to work fairly well for composite structure diagrams now, but IBDs still have scrollbars unfortunately).(In reply to)There are still several issues to fix (see previous comments) before implementing this in IBD.I have fixed the first point about the resize and the move of a child.About the second point autosize, I will open a new bug because this bug remains with scroll bars.It remains to work on the third point : resize of the parent.(done on the branch revision 6211)(In reply to)Also related to this bug, I suspect Papyrus layout to be incompatible with this in the sense that parent and children are move without taking into account the behavior provided by edit parts. Can you test this ? Are these layout implemented with GMF layout service ?The code introduced to do the fucntionnality remove Scrollbar has been removed in the branch.revision 6334	16.0
id=422449	REOPENED	Sirius	Core	unspecified	All All	P3 enhancement	Pierre-Charles David	2013-11-25 04:22 EST by	Pierre-Charles David	2016-08-25 07:32 EDT (	3 users	We need to have a well-defined policy regarding compatibility between Viewpoint, pre-1.0 versions of Sirius, and Sirius 1.0 an up. This includes the guarantees we want to offer to users of the Viewpoint technology (before it was called Sirius and open-sourced), and what these users will need to do ti migrate to Sirius.A first, incomplete draft is available at.Remarks and discussion (if any) about the rules defined in that document should go on this bug; the document will be modified to always reflect the current decision.	One thing currently missing from the document is which Eclipse versions we want to support. The main target is clearly Luna (4.4), but we currently have clients which are on Helios (3.6) and as part of Obeo Designer we mainly test on Eclipse 3.8.This means the code currently has to build and work on 6 versions of Eclipse: Helios (3.6), Indigo (3.7), "Juno 3" (3.8), Juno (4.2), Kepler (4.3) and Luna M3 (4.4). I don't believe this is sustainable (particularly in terms of testing) and propose that we concentrate on:- Eclipse 3.8, as the last of the 3.x, as we expect many users to stay on 3.x as long as they can to avoid the changes implied by moving to 4.x.- Kepler (4.3), at least until we ship Sirius 1.0, as this is the stable version early adoprters of Sirius milestones will most likely be using unless they fell very adventurous and try Luna milestones.- Luna (4.4) as our main target, as we are part of the train.This means we could abandon 3.6, 3.7 and 4.2 right now, and Kepler probably next year.I confirm Thales will not need Sirius on Eclipse 3.6. Our main target at this stage is Eclipse 3.8The migration of Viewpoint models, representations files (.aird) and VSM (.odesign), and Modeling Projects to Sirius 0.9.0 are handled by. See this bugzilla for specific informations on this part.Moving to 3.0 to rework on this and publish a stable/finished version. In particular, one point the document should handle is users who may be worried to see the major version of Sirius moving so fast (2 to 3 major versions each year), which could imply that we break all our APIs all the time. We should make it clear that this is not the case and distinguish:* Sirius models (aird and odesign), for which we guarantee transparent upward migration "forever" (at least until further notice).* Core Sirius APIs, the ones most likely to be actually used by advanced modelers and downstream projects. For example I believe none of these was modified between 1.0 and 2.0, see for example Ecore Tools and UML Designer, which although they use some of our APIs work the same with 1.0 and 2.0.* Non-core Sirius APIs, mostly things made public by a Sirius bundle to be used by another Sirius bundle, and also some more advanced/obscure APIs. These are more likely to be broken between major versions, but: we try (or should try) to first deprecate an osbolete API for one major version before it is actually removed, and all changes are described in details in the release notes, with pointers to alternative/prefered APIs where appropriate.The two levels of APIs is currently mostly informal and defined "de facto" by "what is actually used in practice by the Sirius-based systems we are most aware of". Maybe we should think of a way to make this distinction clearer and base it on well thought and well defined criteria.Available in Sirius 3.0.0. See.This was closed by mistake as part of the bulk operation on all the Sirius 3.0.0 tickets. It was planned for 3.0 but does not actually involve any code, only a wiki page. I'll try to get to this in the next few days/weeks, but this is actually independent of a specific release schedule.	6.0
id=507554	REOPENED	Papyrus-rt	tool	0.8.0	PC Windows 7	P3 normal	Project Inbox	2016-11-15 10:25 EST by	Peter Cigehn	2017-01-12 16:37 EST (	2 users	This is an extract fromfor the specific case of creating a generalization relationship for a capsule in the model explorer.Also seefor the aspect of supporting capsule structure inheritance. The support for capsule behavior inheritance will come later.	Since at least Papyrus-RT-Master-Product build #310 the "New Relationship -> Generalization" action in the Model Explorer configures a capsule as required for UML-RT Capsule Structure Inheritance when the superclass is another capsule.I checked this in the latest Papyrus-RT build, and yes, it is possible to create a generalization using the ordinary New Relationship menu. Maybe this bug was not that clear, since it was simply an extraction from, but as indicated on that bug, the idea was that the subset of relationships that are applicable in the context of UML-RT should be made available on a separate UML-RT menu.As discussed in that bug, this could either be a submenu on the current "New UML-RT New Child" menu, or possibly a new top level menu "New UML-RT Relationship". Which approach used probably should be aligned with other DSMLs, e.g. SysML.UML-RT users should not have to open the standard "New Relationship" menu with lots of relationships not relevant for the UML-RT context (in the same way as UML-RT users should not have to use the ordinary "New Child" menu).Another aspect to improve is that the selection dialog presenting the possible targets of generalization should be filtered to only show other capsules. Currently the selection dialog also lists other element types like ordinary classes and protocols, which makes its possible to create invalid generalizations.This filtering probably also should include filtering the current capsule itself, and any subclass capsules of the current capsule, to avoid creating a circular generalization chains (similar to the aspect of not creating circular containment capsule structures as tracked by).State machine inheritance will take priority over this for 1.0.	4.0
id=493854	REOPENED	Papyrus	Others	unspecified	PC Windows NT	P3 normal	Quentin Le Menez	2016-05-17 18:15 EDT by	Patrik Nandorf	2016-09-13 05:39 EDT (	2 users	When I try to setup Papyrus development using Oomph I get the error below. It seems that the setup model refers to an obsolete I-build?RegardsPatrik---Connecting Git team provider.ERROR: org.eclipse.equinox.p2.metadata.repository code=1000 No repository found at. at org.eclipse.oomph.targlets.internal.core.TargletContainer.forceUpdate(TargletContainer.java:777) at org.eclipse.oomph.setup.targlets.impl.TargletTaskImpl$4.run(TargletTaskImpl.java:1128) at org.eclipse.oomph.util.pde.TargetPlatformUtil.runWithTargetPlatformService(TargetPlatformUtil.java:119) at org.eclipse.oomph.setup.targlets.impl.TargletTaskImpl.perform(TargletTaskImpl.java:1036) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer.doPerformNeededSetupTasks(SetupTaskPerformer.java:3037) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer.access$1(SetupTaskPerformer.java:2980) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer$WorkspaceUtil$1.run(SetupTaskPerformer.java:4176) at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2240) at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2267) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer$WorkspaceUtil.performNeededSetupTasks(SetupTaskPerformer.java:4170) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer$WorkspaceUtil.access$0(SetupTaskPerformer.java:4168) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer.performNeededSetupTasks(SetupTaskPerformer.java:2971) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer.performTriggeredSetupTasks(SetupTaskPerformer.java:2946) at org.eclipse.oomph.setup.internal.core.SetupTaskPerformer.perform(SetupTaskPerformer.java:2857) at org.eclipse.oomph.setup.ui.wizards.ProgressPage$9.run(ProgressPage.java:555) at org.eclipse.oomph.setup.ui.wizards.ProgressPage$11$1.run(ProgressPage.java:681) at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)	This should be fixed today with the Papyrus RC1 build. Eclipse I-builds don't last forever, so we need to update them every now and then (At least for every Milestone build)The bug should now be fixed; Gerrit 73018 updated all Target Platforms & the Oomph setupI reopen this since I still have issues with setting this up.It's not the same error but the setup still seem to refer to obsolete requirements/repositories. ERROR: org.eclipse.equinox.p2.artifact.repository code=0 Failed to transfer artifact canonical: osgi.bundle,org.eclipse.xwt.source,1.2.0.v20160502-1019. ERROR: org.eclipse.equinox.p2.artifact.repository code=13 Retry another mirror ERROR: org.eclipse.equinox.p2.transport.ecf code=1200 Artifact not found:. java.io.FileNotFoundException:Hi,the log seems back to normal now, but let's wait and see if it stays that way after the fridays's Neon RC4. For consistency I also tested it with Mars and all went well too.Steps used to verify this: Oomph> Advanced> modeling Tools> select Papyrus folder> Reference instalation folders & git repository > FinishHi Patrick,I just saw that the bug still was on Reopened status; can we consider it as closed/fixed ?	5.0
id=494412	REOPENED	Papyrus	Diagram	2.0.0	PC Windows 7	P3 normal	Quentin Le Menez	2016-05-24 08:59 EDT by	Quentin Le Menez	2016-05-27 06:52 EDT (	2 users	The ZoomToolbar class is now considered of incorrect type when contributing to the toolbar and fails to load. It is expected to be of type WorkbenchWindowControlContribution.	New Gerrit change created:Gerrit changewas merged to [master].Commit:This bug can now be marked as resolved fixed.reopening, failing testsNew Gerrit change created:New Gerrit change created:Gerrit changewas merged to [master].Commit:	7.0
id=445091	REOPENED	Papyrus	Others	1.0.1	All All	P3 minor	Quentin Le Menez	2014-09-25 08:50 EDT by	Ronan Bar	2015-01-08 10:38 EST (	3 users	The Switch Libraries refactor options contains profiles as well as model libraries. WOuld it not be better to just show the model libraries as the profiles already has a different refactor menu item.	Not an issue in the new import wizard. Closing.Actually this is still an issue.A related issue with this wizard is that the text explaining the wizard is poorly formatted. it is very hard to distinguish what I should do (the first sentence) from the background information (the rest of the text).	3.0
id=506752	REOPENED	QVTd	Core	unspecified	PC Windows NT	P3 normal	Project Inbox	2016-10-30 14:34 EDT by	Ed Willink	2016-11-16 10:17 EST (	0 users	provides a repro in whichcontext cs::exprList -- a helperdef : createActualParams() : OrderedSet(as::ActualParameterExpression) = self.exps->collect(x | as::ActualParameterExpression { value = x.ast.oclAsType(as::Expression) } )->asOrderedSet()correctly analyzes the expressions but the eventual dependencies are on x.ast, rather than x.ast.oclAsType(as::Expression)i.e. needlessly pessimistic.	DependencyAnalyzer has no code for special functions. Consequently oclAsType() is analyzed as an ordinary function.oclAsType() special cased.Full fix requires OCL Commit "[unrelated] Return referredType at TypeExp.typeValue" available on OCL master.Pushed to master fo M4.For therepro, the fix doesn't just retype the ast node, it removes its predecessors too.Took another short at this, and again it didn't work.offers a more promising way forward that eliminates duplication.	4.0
id=465913	REOPENED	QVTd	Core	unspecified	All All	P3 normal	Project Inbox	2015-04-30 06:28 EDT by	EPP Error Reports	2015-10-25 10:47 EDT (	3 users	The following incident was reported via the automated error reporting: code: 0 plugin: org.eclipse.ui.workbench.texteditor_3.9.100.v20141023-1946 message: Editor could not be initialized. fingerprint: 9f23fda6 exception class: java.lang.RuntimeException exception message: Could not serialize EObject via backtracking.Constraint: null nullValues: ownedUnrealizedVariables(1)Semantic Object: TopLevelCS.ownedMappings[16]->MappingCS'attributeColumns_MR'.ownedDomains[1]->DomainCS.ownedBottomPattern->BottomPatternCSContext: SourceBottomPatternCS number of children: 0 java.lang.RuntimeException: Could not serialize EObject via backtracking.Constraint: null nullValues: ownedUnrealizedVariables(1)Semantic Object: TopLevelCS.ownedMappings[16]->MappingCS'attributeColumns_MR'.ownedDomains[1]->DomainCS.ownedBottomPattern->BottomPatternCSContext: SourceBottomPatternCS at org.eclipse.xtext.serializer.diagnostic.ISerializationDiagnostic$ExceptionThrowingAcceptor.accept(ISerializationDiagnostic.java:77) at org.eclipse.xtext.serializer.sequencer.BacktrackingSemanticSequencer.createSequence(BacktrackingSemanticSequencer.java:456) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.sequence_SourceBottomPatternCS(AbstractQVTimperativeSemanticSequencer.java:587) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.createSequence(AbstractQVTimperativeSemanticSequencer.java:378) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.acceptEObjectRuleCall(SequenceFeeder.java:299) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.acceptRuleCall(SequenceFeeder.java:325) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.accept(SequenceFeeder.java:222) at org.eclipse.xtext.serializer.sequencer.BacktrackingSemanticSequencer.accept(BacktrackingSemanticSequencer.java:408) at org.eclipse.xtext.serializer.sequencer.BacktrackingSemanticSequencer.createSequence(BacktrackingSemanticSequencer.java:454) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.sequence_SourceDomainCS(AbstractQVTimperativeSemanticSequencer.java:596) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.createSequence(AbstractQVTimperativeSemanticSequencer.java:399) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.acceptEObjectRuleCall(SequenceFeeder.java:299) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.acceptRuleCall(SequenceFeeder.java:325) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.accept(SequenceFeeder.java:239) at org.eclipse.xtext.serializer.sequencer.BacktrackingSemanticSequencer.accept(BacktrackingSemanticSequencer.java:401) at org.eclipse.xtext.serializer.sequencer.BacktrackingSemanticSequencer.createSequence(BacktrackingSemanticSequencer.java:454) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.sequence_MappingCS(AbstractQVTimperativeSemanticSequencer.java:506) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.createSequence(AbstractQVTimperativeSemanticSequencer.java:460) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.acceptEObjectRuleCall(SequenceFeeder.java:299) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.acceptRuleCall(SequenceFeeder.java:325) at org.eclipse.xtext.serializer.acceptor.SequenceFeeder.accept(SequenceFeeder.java:239) at org.eclipse.xtext.serializer.sequencer.BacktrackingSemanticSequencer.accept(BacktrackingSemanticSequencer.java:401) at org.eclipse.xtext.serializer.sequencer.BacktrackingSemanticSequencer.createSequence(BacktrackingSemanticSequencer.java:454) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.sequence_TopLevelCS(AbstractQVTimperativeSemanticSequencer.java:649) at org.eclipse.qvtd.xtext.qvtimperative.serializer.AbstractQVTimperativeSemanticSequencer.createSequence(AbstractQVTimperativeSemanticSequencer.java:475) at org.eclipse.xtext.serializer.impl.Serializer.serialize(Serializer.java:86) at org.eclipse.xtext.serializer.impl.Serializer.serialize(Serializer.java:109) at org.eclipse.xtext.serializer.impl.Serializer.serialize(Serializer.java:133) at org.eclipse.xtext.resource.XtextResource.doSave(XtextResource.java:354) at org.eclipse.ocl.xtext.essentialocl.utilities.EssentialOCLCSResource.doSave(EssentialOCLCSResource.java:367) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.save(ResourceImpl.java:1430) at org.eclipse.ocl.xtext.base.ui.model.BaseCSorASDocumentProvider.setDocumentContent(BaseCSorASDocumentProvider.java:341) at org.eclipse.ui.editors.text.FileDocumentProvider.setDocumentContent(FileDocumentProvider.java:426) at org.eclipse.xtext.ui.editor.model.XtextDocumentProvider.setDocumentContent(XtextDocumentProvider.java:195) at org.eclipse.ocl.xtext.base.ui.model.BaseCSorASDocumentProvider.setDocumentContent(BaseCSorASDocumentProvider.java:258) at org.eclipse.ui.editors.text.StorageDocumentProvider.createDocument(StorageDocumentProvider.java:229) at org.eclipse.xtext.ui.editor.model.XtextDocumentProvider.createDocument(XtextDocumentProvider.java:140) at org.eclipse.ui.editors.text.FileDocumentProvider.createElementInfo(FileDocumentProvider.java:737) at org.eclipse.xtext.ui.editor.model.XtextDocumentProvider.createElementInfo(XtextDocumentProvider.java:263) at org.eclipse.ui.texteditor.AbstractDocumentProvider.connect(AbstractDocumentProvider.java:400) at org.eclipse.ui.texteditor.AbstractTextEditor.doSetInput(AbstractTextEditor.java:4233) at org.eclipse.ui.texteditor.StatusTextEditor.doSetInput(StatusTextEditor.java:237) at org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.doSetInput(AbstractDecoratedTextEditor.java:1480) at org.eclipse.ui.editors.text.TextEditor.doSetInput(TextEditor.java:169) at org.eclipse.xtext.ui.editor.XtextEditor.doSetInput(XtextEditor.java:247) at org.eclipse.ui.texteditor.AbstractTextEditor$19.run(AbstractTextEditor.java:3220) at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:463) at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:371) at org.eclipse.ui.internal.WorkbenchWindow$13.run(WorkbenchWindow.java:2137) at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:2133) at org.eclipse.ui.texteditor.AbstractTextEditor.internalInit(AbstractTextEditor.java:3238) at org.eclipse.ui.texteditor.AbstractTextEditor.init(AbstractTextEditor.java:3265) at org.eclipse.xtext.ui.editor.XtextEditor.init(XtextEditor.java:287) at org.eclipse.ui.internal.EditorReference.initialize(EditorReference.java:361) at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:313) at sun.reflect.NativeMethodAccessorImpl.invoke0(null:-2) at sun.reflect.NativeMethodAccessorImpl.invoke(null:-1) at sun.reflect.DelegatingMethodAccessorImpl.invoke(null:-1) at java.lang.reflect.Method.invoke(null:-1) at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:55) at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:888) at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:869) at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:120) at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:337) at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:258) at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:162) at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:104) at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:73) at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:55) at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:128) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:942) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:621) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$0(PartRenderingEngine.java:696) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$2.run(PartRenderingEngine.java:690) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:674) at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1304) at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:71) at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:40) at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:187) at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:145) at org.eclipse.swt.widgets.Display.syncExec(Display.java:4753) at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:212) at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:36) at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197) at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197) at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1) at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230) at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148) at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135) at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78) at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39) at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:85) at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:59) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374) at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171) at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:488) at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:454) at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:715) at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:393) at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.showPart(PartServiceImpl.java:1151) at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3187) at org.eclipse.ui.internal.WorkbenchPage.access$24(WorkbenchPage.java:3102) at org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:3084) at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:3079) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:3043) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:3033) at org.eclipse.ui.ide.IDE.openEditor(IDE.java:541) at org.eclipse.ui.ide.IDE.openEditor(IDE.java:500) at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:360) at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:167) at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:268) at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:233) at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275) at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251) at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:376) at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538) at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48) at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:854) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:50) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:173) at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:851) at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1168) at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1275) at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:278) at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:272) at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:313) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4354) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4172) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$4.run(PartRenderingEngine.java:1112) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:993) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:156) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:654) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:598) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:138) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:380) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:235) at sun.reflect.NativeMethodAccessorImpl.invoke0(null:-2) at sun.reflect.NativeMethodAccessorImpl.invoke(null:-1) at sun.reflect.DelegatingMethodAccessorImpl.invoke(null:-1) at java.lang.reflect.Method.invoke(null:-1) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603) at org.eclipse.equinox.launcher.Main.run(Main.java:1465) at org.eclipse.equinox.launcher.Main.main(Main.java:1438) General Information: reported-by: Adolfo SBH anonymous-id: ee6a7cf4-6277-45ce-b349-ac81306b3e3f eclipse-build-id: 4.5.0.I20150320-0800 eclipse-product: org.eclipse.epp.package.committers.product operating system: Windows7 6.1.0 (x86_64) - win32 jre-version: 1.7.0_45-b18The following plug-ins were present on the execution stack (*): 1. org.eclipse.core.databinding.observable_1.4.1.v20150311-0218 2. org.eclipse.core.databinding_1.4.100.v20150311-0216 3. org.eclipse.core.runtime_3.11.0.v20150316-1241 4. org.eclipse.e4.core.contexts_1.3.100.v20150316-1240 5. org.eclipse.e4.core.di_1.4.0.v20150316-1236 6. org.eclipse.e4.ui.services_1.1.0.v20150315-0658 7. org.eclipse.e4.ui.workbench_1.3.0.v20150316-1403 8. org.eclipse.e4.ui.workbench.renderers.swt_0.12.100.v20150312-1938 9. org.eclipse.e4.ui.workbench.swt_0.12.100.v20150316-1403 10. org.eclipse.emf.common_2.11.0.v20150318-0449 11. org.eclipse.emf_2.6.0.v20150323-0420 12. org.eclipse.emf.ecore_2.11.0.v20150318-0449 13. org.eclipse.equinox.app_1.3.200.v20130910-1609 14. org.eclipse.equinox.event_1.3.100.v20140115-1647 15. org.eclipse.equinox.launcher_1.3.0.v20140415-2008 16. org.eclipse.jdt.ui_3.11.0.v20150421-1143 17. org.eclipse.jdt_3.11.0.v20150421-0800 18. org.eclipse.jface_3.11.0.v20150313-1544 19. org.eclipse.ocl.xtext.base.ui_1.0.0.v20150410-1232 20. org.eclipse.ocl.xtext.base_1.0.0.v20150410-1542 21. org.eclipse.ocl_3.5.0.v20150410-1135 22. org.eclipse.ocl.xtext.essentialocl_1.0.0.v20150410-1542 23. org.eclipse.osgi_3.10.100.v20150318-0312 24. org.eclipse.qvtd.xtext.qvtimperative_1.0.0.v20150411-0541 25. org.eclipse.swt_3.104.0.v20150319-1901 26. org.eclipse.ui_3.107.0.v20150315-0703 27. org.eclipse.ui.editors_3.9.0.v20150213-1939 28. org.eclipse.ui.ide_3.11.0.v20150309-2044 29. org.eclipse.ui.ide.application_1.0.600.v20150315-1254 30. org.eclipse.xtext_2.8.2.v201504100559 31. org.eclipse.xtext.ui_2.8.2.v201504100559Please note that:* Messages, stacktraces, and nested status objects may be shortened.* Bug fields like status, resolution, and whiteboard are sent back to reporters.* The list of present bundles and their respective versions was calculated by package naming heuristics. This may or may not reflect reality.Other Resources:* Report:* Manual:Thank you for your assistance.Your friendly error-reports-inbox.	OCL/QVTd: Last build:OCL Examples and Editors SDK 6.0.0.v20150429-2115QVT Declarative All-In-One SDK (Incubation) 0.12.0.v20150429-2052Branch: QVTd/masterYou will get the exception (editor doesn't properly open) when you:1. Select a qvtias file[1]2. Right Click -> Open with ... -> QVTi EditorRegards,Adolfo.[1] \org.eclipse.qvtd.build.etl.tests\src\org\eclipse\qvtd\build\etl\tests\UmlToRdbms\UmlToRdbms.qvtp.qvtiasI reported this by email.The problem is that QVTi only supports unrealized variables as source/target guards, or as target bottom variables. The QVTi synthesis is putting them in the wrong place.As part of my validation strengthening, QVTimperative.ocl should provide checks that detect that the QVTi content complies with the simplified subset of QVTc capabilities.Not resolved at all. Finger trouble.(In reply to Ed Willink from)What is the exact meaning of "target bottom variables"?In the reported culprit file the unrealized variables are in the bottom pattern of the enforced rdbms domain. I would assume this qualifies as a "target bottom variable" (is an enforced domain).The Xtext serialization diagnostic is not very readable:java.lang.RuntimeException: Could not serialize EObject via backtracking.Constraint: null nullValues: ownedUnrealizedVariables(1)Semantic Object: TopLevelCS.ownedMappings[16]->MappingCS'attributeColumns_MR'.ownedDomains[1]->DomainCS.ownedBottomPattern->BottomPatternCSContext: SourceBottomPatternCS at org.eclipse.xtext.serializer.diagnostic.ISerializationDiagnostic$ExceptionThrowingAcceptor.accept(ISerializationDiagnostic.java:77)It shows that the grammar rule SourceBottomPatternCS fails to create a text representation of the one ownedUnrealizedVariables values for the BottomPatternCS of the second domain of the attributeColumns_MR MappingCS.This is because the "ct" variable has been placed in the checkable "middle" (i.e. source) bottom pattern.(In reply to Ed Willink from)QVTimperative.ocl already has (since 13 April) a NoSourceBottomPatternVariables constraint, so if you load UmlToRdbms.qvtp.qvtias with the Sample Ecore Editor, invoke OCL->Load Document to load /org.eclipse.qvtd.pivot.qvtimperative/model/QVTimperative.ocl then Valoidate, you will get to see a warning for this. You also get 4 collection compatibility warnings.It will save time if MtcBroker uses QVTimperative.ocl in its workflow. QVTimperative.ocl is successully invoked by QVTiCompilerTests. A 'similar' invocation in QVTiInterpreterTests has a stubborn metamodel schizophrenia issue.(In reply to Ed Willink from)Indeed, and this shows that local (i.e. unrealized variables in bottom patterns) should be allowed. In UmlToRdbms.qvtc, mapping attributeColumns has ct as a unrealized variable in the where pattern. Since the type of the variable is a PrimitiveType, the variable is treated as local and kept in the "middle" bottom pattern from QVTc to QVTi. So basically QVTi should support unrealized variables in any bottom pattern.(In reply to Horacio Hoyos from)That is a two-fold addition, when at present only one might be required.The intention is to keep QVTi as simple as sensible and so to avoid extra runtime costs. Providing unrealized variables in three places is trivial for editor, and CS2AS/AS2CS; they already exist in the shared CS and AS but might be trimmed if sharing with QVTc is reduced once more automation is in place. But providing unrealized variables in three places increases the searching by the interpreter. I'm not clear why it is only target unrealized variables that are supported. I would now expect that only middle unrealized variables would be allowed since the middle bottom does all the work.Is there any reason why just one place for unrealized bottom pattern variables is not sufficient? If not, is just target bottom the best design choice? I'm inclined to move to middle bottom unrealized variables only, which is what I have tried to use a couple of times when writing QVTi code by hand.For the particular case of ct in attributeColumns, this looks like a variable that could/should be optimized away.(In reply to Ed Willink from)From an execution point of view moving all unrealized variables to the mapping's bottom pattern seems sensible, since the domain bottom patterns should be empty (i.e. they will not access the variable). From a user point of view, it might not be missleading to look at the generated code and find the variable in the "wrong" pattern. But probably not many users will actually do this. I suggest moving them to the mapping bottom pattern. A further argument could be that primitive types are "domain-less".(In reply to Horacio Hoyos from)Works for me. I'll create an ewillink/465913 with the property moved so that you can append a commit to update the ETL scripts.(In reply to Ed Willink from)ewillink/465913 available.Doesn't seem to affect the qvtd.build tests so might be able to push straight to master if it doesn't affect asanchez/mtc2(In reply to Ed Willink from)Seems ok. Pushed to master for M7.(In reply to Ed Willink from)I vaguely recall that the driver may be a grammar pragmatism. Xtext seemed to have some difficulty with the choice between:(variable-declaration) (',' variable-declaration)* ('|' (assignment-or-predicate)+)?(assignment-predicate)*The '|' comes unpleasantly late after a long list of not particularly distinct preamble elements.In QVTi we have the option to change the grammar if necessary. QVTc may be more challenging.(In reply to Ed Willink from)It seems that now variabels are allowed in any domain bottom pattern, but the ones in the mapping bottom pattern are not craeted in the CS. I modified the MTC to place all domain bottom pattern variables in the mapping's bottom pattern, which was my suggestion and the one I understood yu agreed with. The AS model is generated OK, but the variables can't be seen on the editor. Branch hhoyos/fixes has the changes and I also enabled the execution of the QVTi transformation again. I am getting an error in some of the casts. It seems that complexAttributeComplexAttributes_LM is being ivoked for attributes that are not complex, i.e. the attribute type is not a class. In this case:t := a.type.oclAsType(SimpleUML::Class);fails and raises an exception: Incompatible source type: 'simpleuml::PrimitiveDataType' for oclAsType(simpleuml::Class).We should either remove the cast, make the for loop more "intelligent" or allow the interpreter to catch this exceptions and treat them as "invalid inputs". I am more inclined for the last one, as the first is not ideal, the second will require deep analysis of the mapping and may not always be solvable.(In reply to Ed Willink from)(In reply to Horacio Hoyos from)Yes the Xtext problem is back 466385, but it's an AS2CS problem rather than the incorrect CS2AS recollection.(In reply to Horacio Hoyos from)Mapping invocations differ from Operation invocations. Mappings have an implicit if-input-types-conform predicate whereas Operations inputs are inherently valid. So 'bad'-types are not invalid; they should just be ignored.It is better to do this in the 'runtime' since a type-switch is quite common and an efficient decision tree can be synthesized.So yes the casts can go, but I'm seeing more problems than this. Still investigating.(In reply to Ed Willink from)The basic call structure is poor. Infor a : SimpleUML::Attribute in c.attributes { for ca : SimpleUML::Attribute in c.typeOpposite { call complexAttributePrimitiveAttributes_LM { c := c; p2n := a.type.oclAsType(SimpleUML::PrimitiveDataType).middle; t := a.type.oclAsType(SimpleUML::PrimitiveDataType); fao := ca.middle.oclAsType(SimpleUMLtoRDBMS::NonLeafAttribute); a := a; ca := ca; } }}p2n := a.type.oclAsType(SimpleUML::PrimitiveDataType).middle;is not subject to the declarative guard protection,that would be available if p2n was a predcated guard variable rather than an unbound guard variable.The simpler callfor a : SimpleUML::Attribute in c.attributes { for ca : SimpleUML::Attribute in c.typeOpposite { call complexAttributePrimitiveAttributes_LM { c := c; t := a.type; fao := ca.middle; a := a; ca := ca; } }}omits the degenerate argument and the unsafe trailing type casts so that the types are checked as predicates."t" and "fao" are also unsafe evaluations, so much better to do:as := c.attributes;cas := c.typeOpposite;...for a : SimpleUML::Attribute in as { for ca : SimpleUML::Attribute in cas { call complexAttributePrimitiveAttributes_LM { c := c; a := a; ca := ca; } }}(In reply to Ed Willink from)where do the rest of the assignments needed for the mapping call happen? Variables in the guard pattern with an init value? So basically all deduced (degenerate sounds bad) variables should be changed so they are no initialized?It appeared that when a mapping needed M distinct inputs and a further N derived inputs, we had a free choice as to whether to derive the N in the callee or the caller.I preferred derivation in the caller since that offered opportunities for CSE.However that preference is only a consideration when there is a free choice.In this case, putting some derivations in the caller puts them the wrong side of a type guard leading to errors. Therefore they must be in the callee.Similarly, if the derived inputs are not guaranteed to be ready, they must be in the callee so that they are re-evaluated by retries.(In reply to Ed Willink from)Branch hhoyos/fixes has the latest changes to make more fine grained use of the cast and addtional functionality when the "cast" is in a loop.UmlToRdbms test now execute correctly but still fail on the assertion when comparing to the expected model.Eliminating some of the bindings and moving them to guard variable initialization should probably be tracked in a separte bug.(In reply to Horacio Hoyos from)I'm not clear why the branch has two new commits and about 10 duplicates based 5 days before M7.Branch ewillink/465913 has just the two commits based on master.The results seem close, but there is genuine content difference.Please raise a Bug.Rebasing the previously successgul fix from ewillink/465913 as ewillink/465913a, the execution fails because pc.name := t.name + '_tid'; pk.name := t.name + '_pk';executes before t is defined or t.name := c2t.name;Shouldn't be a problem with the new scheduler that does everything in local variables before assigning.[Also get an intermittent child stealing problem in an Epsilon u to m.]	22.0
id=395800	REOPENED	Papyrus	Core	0.10.0	PC Windows 7	P3 normal	Remi Schnekenburger	2012-12-05 04:44 EST by	Nicolas Bros	2013-01-14 08:18 EST (	1 user	CreatedpatchHere is a trivial patch that fixes a NPE in UnloadHandler when a View with no EObject is right-clicked.	Committed in r9577 on the trunkadded flag iplog +, as there is an attached patch(1) I, Nicolas Bros, wrote 100% of the code I've provided.(2) This code contains no cryptography(3) I have the right to contribute the code to Eclipse.(4) I contribute the content under the EPL.	3.0
id=419099	REOPENED	Papyrus	Diagram	1.0.1	Macintosh Mac OS X	P3 normal	Remi Schnekenburger	2013-10-10 03:29 EDT by	Klaas Gadeyne	2015-09-25 13:59 EDT (	1 user	Version: Kepler Service Release 1Build id: 20130919-0819 Papyrus UML (Incubation) 0.10.1.v201310030501 org.eclipse.papyrus.sdk.feature.feature.group Eclipse Modeling ProjectSteps to (consistently) reproduce:1/ [IMPORTANT] Restart Papyrus2/ Create a new UML model somewhere in a project and create a class diagram in this model3/ Drag a class Class1 onto the class diagram4/ Select Class1 in the model explorer, and try to create a CS diagram (doesn't matter whether you use the contextual menu or the toolbar)The Composite Structure diagram is created, however, the Composite Class1 is _not_ on the diagram, _and_ you cannot drag Class1 (nor any part) onto the diagram (the latter results in tons of "Received wrong data transfer" errors in the error log, without stack trace though).However, it appears that the first time you do _try_ to drag the Composite in the diagram does trigger some initialization. Once you have tried to drag it in, you can create new classes and CS diagrams without any problems (even in _new_ models, everything works fine [*] ). As long as you don't try to drag it in, the problem persists.[*] That's the reason for Step 1/ above.	Can be reproduced onto current nightly buildStill present in Papyrus UML 1.0.1.v201412170926 org.eclipse.papyrus.sdk.feature.feature.group Eclipse Modeling ProjectHi,I just tried to reproduce this one, and did not succeed. Neither on the latest nightly build, neither using the luna point release. I did recently upgrade from Mac OS X 10.7 to Mac OS X 10.10 though.As I could really reproduce this consistently previously, the only thing that I can imagine (right now) is that the upgrade 'solved the issue', which in this case is then probably mac os x specific (something similar as with?)I can now consistently reproduce this again using the Mars release and the SysML 1.4 parametric diagram...The only thing that differs is that the tons of "Received wrong data transfer" don't appear anymore, but dragging the class/block onto the CSD (or PAR) is 'refused' by papyrus.	4.0
id=421412	REOPENED	Papyrus	Diagram	unspecified	All All	P3 major	Remi Schnekenburger	2013-11-10 11:30 EST by	Toni Siljamaki	2014-04-01 11:30 EDT (	2 users	I use a CSS stylesheet for setting routing to rectilinear.Then manually changing to Manual+Closest distance doesn't work,until the model is closed and reopened again.Often the "no more handler" exception occurs,after which you must close and restart Papyrus.	The "no more handles" exception also happened when clicking on theradio butttons for "jump links" in the properties window.Shuw down and restart seem to be the only option after this.fixed in commit 8d6c69c. EnumCombo are used instead of EnumRadio in groupsAs described via mail:The intended solution of the “out of handles” crash bug did not work. Requires additional and prioritized investigation a.s.a.p.CreatedScreenshot "Out of handles" crash bug	4.0
id=425560	REOPENED	Papyrus	Others	1.0.0	All All	P3 enhancement	Remi Schnekenburger	2014-01-13 08:32 EST by	Philippe Roland	2014-03-14 09:01 EDT (	2 users	Developpment for collaborative has been based on Indigo work so it need to be backported to Kepler	I, Philippe Roland, have written 100% of the code contributed to fix this bug.I have the right to contribute this code and have filled the headers with theappropriate License.This contribution has been checked by and committed under the responsability ofMathieu VeltenCommitted to where?Is the bug solved in the latest build or not?The bug is still in status UNCONFIRMED. (?)Backported code has been comitted to master/Luna, under extraplugins (commit 683979844cf4e169dcb2521a0e2a779f89467f81). Some issues present in the Kepler version remain, but the backport itself is finished. Marking as fixed.I'm reopening this bug; in addition to some issues regarding coding standards, it appears that a recent update (I suspect it involves the integration of emf facet 0.2 - see- but this requires investigation) broke it.I've just renamed, reversioned and ensured 1.5 compliance of the existing code, as well as cleaned up some of its reliance on deprecated / 0.8 ad-hoc mechanisms for which helpers have since been created in commit 832ceab5e78772d2b483348f620de7b47a4c091f. This commit has been reviewed and comitted by Mathieu Velten.	4.0
id=302426	REOPENED	Papyrus	Core	0.8.0	All All	P3 enhancement	Remi Schnekenburger	2010-02-10 09:40 EST by	Remi Schnekenburger	2013-10-10 09:08 EDT (	2 users	It should be possible to modify representation of the element automatically on its creation, for example, the color of the element, which labels to display for links, etc.	first commit in r1126Missing the graphical UI to customize actionMissing the graphical UIaction postponed to next version set version to 0.8.0I have began "playing" with a graphical DSL, created a customized palette,but there is still no way to set any graphical properties.Element creation actions should be provided for the following:Properties for:* Show/Hide Compartments, to be able to check "shape"Appearance properties for:* Fill* Gradient* Line* Font* Applied stereotypes display (already exist as "Aspect Action")* Element Icon checkbox* ...and any other properties you can think of.What we now are doing with stylesheets is a separate issue.	4.0
id=494292	REOPENED	Papyrus-rt	tool	0.7.2	PC Windows 7	P3 normal	Remi Schnekenburger	2016-05-23 07:32 EDT by	Peter Cigehn	2017-02-15 07:38 EST (	3 users	On the tool palette in a UML-RT state machine diagram it should exist tools on the palette to create all the different relevant Pseudostates with the RTPseudostate stereotype applied. The relevant kinds of Pseudostates are: initial, choice, junction, deepHistory, entryPoint and exitPointThe drop target for entryPoint and exitPoint is only for the border of composite states, not on the top level state machine itself, both from the "outside" in the context of the parent state/statemachine as well as on the "inside" of the composite state itself.The other PseudoStates have the inside of the state machine/composite state as its drop target, except deep history which is only relevant for composite states.It must be limited to create a maximum of one initial and deepHistory PseudoStates per composite state or top level state machine (where applicable). Since the initial Pseudostate is automatically created (seefor the creation of the state machine) this means that there is no need to create it manually in the top level state machine (unless it is removed by the user and the user wants to add it back).Keep in mind that several of the PseudoStates are created automatically, e.g. when drawing transitions to/from a composite state (see) and when changing a simple state into a composite state (see).Initial work regarding this has already been performed as part of, but a lot of the constraints mentioned in this Bugzilla are not yet in place and should be tracked by this Bugzilla.	For clarity, and since you mention that not all constraints are currently addressed, could you please indicate which constraints are missing?If all have been implemented since May, please consider closing this bug.(In reply to Charles Rivet from)Well, to my knowledge, nothing has been done in relation to this since the Bugzilla was written (hence it is still in unconfirmed).Regarding missing constraints, I would say that all of them are still applicable. When playing around a bit with this I can:* Create entry and exit points "anywhere" which does not make sense, e.g on the border of the top level state machine itself, and even not placing them on the border. I would only expect to be able create them on the border of composite states, either from the "outside" or from the "inside". When trying to place them on the border, even on composite states, they are misaligned and not placed on the border. * You can create deep history on the top state machine level, should only be possible inside composite states. You can even create multiple ones on this level.* You can create multiple deep history states also inside composite states. Only one should be allowed.So all of the constraints mentioned inhas still not be considered. I see this Bugzilla equally applicable as it was when it was written since no work has been done within its scope.(In reply to Peter Cigehn from)Thanks Peter,This bug is assigned to MVP2/0.9 (a feature-boxed release tentatively scheduled for end of November).New Gerrit change created:Gerrit changewas merged to [master].Commit:All constraints have been implemented, and some JUnit tests have been added also to check the validity of the element types.Closing bug.(In reply to Remi Schnekenburger from)I've tested this a bit in the latest Papyrus-RT build, and the constraints seem to have been fixed and works as expected. The aspect identified inthat entry/exit points are not aligned/centered on the border of the state, neither on the outside or the inside of the state.Entry/exit points created as a consequence of making a simple state (with some entry/exit points existing) into a composite state, do indeed make the entry/exit points to be aligned/centered on the border of the state on the inside. But adding new entry/exit points creates them misaligned.What can also be seen is that the entry/exit points have resize handles, and when resizing a entry/exit point, it isn't actually resized (the visible shape at least), but instead its offset from the border of the state gets even further.I am not sure if we shall fix this aspect within the scope of this bug, or if you think that we shall track these "graphical glitches" of pseudo states in a separate bug, or bugs. There are at least two aspects left:1) Misalignment of entry/exit points on the border of the states, both on the outside as well on the inside of a (composite) state.2) The pseudostates have resize handles, which in general they should not have. When comparing with the legacy tooling, the only pseudostate that are possible to resize is the choice point. All other pseudostates have fixed sizes. So remove the resize handles and only have move handles for all pseudostates except the choice point.Rémi, what do you say? New bugs or reopen this one to track this?I will reopen this bug, as I missed some parts in the comment.(In reply to Peter Cigehn from)This aspect seem to be the same as reported in. But if we remove the resize handles (specifically for Papyrus-RT), then maybe this issue that offset from the border is increased. But I guess we need to keep an eye on any possible fix made for.Apart from being able to resize entry/exit points, I think that we also shall prohibit the resizing of the initial pseudostate and the junction point as well. Since they are so extremely similar, you can only differentiate them between their size (initial pseudostate being a bit bigger than the junction point). The legacy tooling does not allow resizing of the initial pseudostate and the junction point either. The choice point, on the other hand, probably still should be resizable. It is so distinctively different, and sometimes maybe it makes sense to have a larger choice point. The choice point is also resizable in the legacy tooling.Another aspect to consider is the default name assigned to the pseudostates. To align with the legacy tooling I suggest that none of the pseudostates should get a name by default, i.e. by default they shall be left unnamed.The direct editor can still be activated so the user can start typing a name if they want to. But for several of the pseudostates even that probably does not make sense either, e.g. entry, exit, deep history, initial, since they are normally never named. Already now the entry and exit points does not get the direct editor activated, which makes sense since the name label is not even shown.The default naming of entry and exit points with no name, should also be aligned with the naming of entry and exit points automatically created when converting a simple state to a composite state, e.g. by double-clicking or adding first internal transition, and entry/exit points are automatically created for all incoming/outgoing transitions, or when drawing a transition to/from a composite state (as tracked by). Currently the conversion to a composite state creates entry and exit points that are named "entry" respectively "exit".New Gerrit change created:Gerrit changewas merged to [master].Commit:Last commit modified the resize policy for pseudostates (entry/exit/initial/junction/deep history) are no longer resizable.Position of the pseudostate entry/exit is being worked on work on transitions (gerrit 90954)Last item to work on is the default naming for entry, exit, deep history, initial pseudo states, as mentioned in. For junction and choice, default name should be empty also ?New Gerrit change created:Gerrit changewas merged to [master].Commit:(In reply to Eclipse Genie from)All the pseudo states have no name by default now.(In reply to Remi Schnekenburger from)All aspects of this bug seem solved. Closing it.(In reply to Remi Schnekenburger from)I have tested this in the latest Papyrus-RT build. And yes, most of the issues identified are fixed: Resize handles removed for elements that does not make sense to resize. The default naming scheme, with a default with no name for all elements (including choice and junction points) looks okay. The misalignment of entry and exit points though seem only to be fixed on the outside of a composite state. When creating new entry and exit points from the inside of a composite state, then you can see the same misalignment of the entry/exit point, i.e. it is not centered on the frame of the state.What can also be noted is that when you try to create the entry/exit point on the top border, it always ends up either on the left or right border, not on the top border at the location where you try to place the entry/exit point.What should be considered here also is the placement of the entry/exit point on the outside of the composite state, so that they get the same relative position, in the same way as when you double click and create entry/exit points for each incoming/outgoing transition, where the location of the entry/exit point matches each other on the outside as well as on the inside. In the double click scenario, the placement on the outsides decides where to place on the inside.In this scenario it will be the opposite, depending on where the entry/exit point is created on the inside the same relative position on the outside shall be used. Currently all entry/exit points created on the inside ends up in the upper left corner of the state on the outside.What can be noted also, is that the superfluous scrollbar which now also always are visible for composite states (as tracked by) makes it really hard to create entry/exit points on the left border. On the other hand, the case when explicitly creating entry/exit points like this should really not be used that often, since you in most cases simply rely on the automatic creation when drawing a transition (as tracked by) so the scrollbar issue can probably wait (is currently planned for Future).Regarding positioning of entry/exit points relative to their position on the "other side", seem also not be working when creating the entry/exit points on the outside, either explicitly, or implicitly as part of drawing a transition.The position of the entry/exit point shall always be created at the same relative position "on the other side", i.e. if it is created on the outside it should get the same relative position on the inside, and if created on the inside, then it should get the same relative position on the outside, disregarding if it the entry/exit point is explicitly created using the tools on the palette or implicitly created when drawing a transition (as tracked by 494284). The same "layout algorithm" as when double-clicking and converting a simple state into a composite state, and thus creating entry/exit points for all incoming/outgoing transitions, shall preferably be used.This is especially important as long asis not yet implemented, but will still be useful also after that.	20.0
id=366410	REOPENED	Papyrus	Core	0.9.0	All All	P3 normal	Sebastien Gerard	2011-12-12 09:24 EST by	Marc-Florian Wendland	2016-11-25 09:48 EST (	7 users	Creating a message from the palette in a sequence diagram results in showing a message wizard, asking for already existing signals, operations etc.The dialog is not implemented as I have expected it, since it does not show the operations that are provided by interfaces being referenced as provided interfaces of ports of the type of the connectable element, representing the lifeline. See tge pseudo-code below for better representation:Interface2{op1()}Component1{port1: Interface2}Collaboration{part_1: Component1 Interaction{ lifeline1 : represents part1 (of Type Component1){ //should offer op1 via port 1 via Interface1 }}}For signal messages, the situation is a little different. There, all signals available in the model are listed as potential signals for the message. This might be helpful to support high level modelling, but for technically mature models, only those signals should be listed, which are receivable by the receiving lifeline.Therefore, I'd recommend to integrate a filter meachnism allowing the users to filter out all signals which are not receivable by the type of the receiving lifelin.	Precisely, we need to add:1. An option in the Preferences, the default value is off2. A check box to enable/disable the filter in the wizard dialog.CreatedBugfixpatch committed on the branch 0.9.X r.8881The filter out signals option removes all signals from the list, even signals referenced by receptions on the class which types the lifeline representation property, which shouldn't be the case.Createdbugfixdisplay more signals from property type of lifeline representationpatch committed on the branch and the trunk .r8937The patch doesn't solve the problem. Signals declared as reception still don't appear on the list when the filter is active.Actually, the best solution would be to outsource the entire dialog into an extension point. User would be able to implement their own dialog with their own functionality. When creating a message, a context menu could appear (similar to the creation of IngoreConsiderFragment) and the corresponding dialog would be opened.This would allow to provid a default dialog by Papyrus but also to provide a tailored one, if necessary.What is "Signals declared as reception"? I may not understand your situation. It would be better if you can provide the test project files, and provide some explanation.(In reply to)CreatedSignal ReceptionHere is a model with a signal reception declared for class2. For a message incoming to Class2 lifeline, when the "filter out signals that are not receivable" is checked, Signal1 should be available because it has been declared receivable by Class2. Signal2 should be filtered because it has not been declared receivable.CreatedbugfixPatch committed.closed(In reply to)Sorry, but I still do have the same problem in Kepler nightly build (19th February).I checked the code and the patch has been incorporated, however, I still do not get listed the operations provided by an port that is typed by an Interface. Neither the operations are listed, nor the filtering mechanism for the signals works as expected.Furthermore, I think the patch is not sufficient. What would happen if the port is typed by an Component that has an InterfaceRealization to an Interface? These operations should be offered by the Port as well, currently, only the owned Operation by the Type (and its super classes) of that Port would be listed (see CommandHelper.gestExeistingElementsFromParents, line 398).What is missing is the inclusion required interfaces of a Port as well.Insert the follwoing code after line 411 in CommandHelperp.getRequireds().getAllOperations();p.getRequireds().getOwnedReceptions() //also the Reception owned by super interfaces.... there is not convenience methods for this in UML2What I could offer is to write an exhaustive algorithm to determine the invokable features on the receiving lifeline. Would this be appreciated?!The current master branch (oxygen release) does not yet provide dialog boxes or other mechanisms for choosing message signature (see)When the feature is made available again, we'll see if this bug is still valid.By the way, if the bug is valid, I am not sure it is specific to the sequence diagram.I guess as already mentioned in, this should be generalized to also cover InterfaceRealization as well. I just tried (using the latest build on Nenon) the case where the lifeline represents a Class which have an InterfaceRealization to an Interface, which in its turn have some Operation and Reception. None of these is available for selection.The same goes for ports which are typed by some Classifier which in its turn have InterfaceRealization and Usage relationships. In this case also the isConjugated property of the port needs to be considered regarding what is available for selection, i.e. either what is provide by the InterfaceRealization or the Usage.	16.0
id=482390	REOPENED	Papyrus	Moka	1.2.0	PC Windows 7	P3 enhancement	Sebastien Revol	2015-11-17 11:31 EST by	Arnaud Cuccuru	2016-01-13 09:55 EST (	3 users	The idea is to provide palettes, property view, d'n'd strategies, advices, etc. to ease the specification of executable UML models.	These "smart" tools shall be available for class diagrams, composite structure diagrams, activity diagrams, and state machine diagrams.Currently, we miss at least a mechanism to listen to view point switches. Some changes are required in the Viewpoint API (Bugzilla entry to be created)Bad click...New Gerrit change created:Gerrit changewas merged to [master].Commit:	5.0
id=496418	REOPENED	Papyrus	Designer	1.0.0	All All	P3 normal	Shuai Li	2016-06-20 11:16 EDT by	Shuai Li	2016-08-10 09:15 EDT (	1 user	Modellibs.core should not depend on cpp.reverse since it only uses the RoundtripUtils class of the plugin.	There are only 3 methods of RoundtripCppUtils that are used:- getPrimitiveType- importOrgetAModel- applyProfileI think getPrimitiveType should be moved to a utils class of cpp.library.As for the last two methods, I'm pretty sure they can be substituted by some utils classes of Papyrus itself (maybe within oep.uml.tools.utils?).New Gerrit change created:Gerrit changewas merged to [master].Commit:New Gerrit change created:Original patch was accidentially overwrittenGerrit changewas merged to [master].Commit:Can someone check if this still works?	7.0
id=507076	REOPENED	Papyrus	Diagram	unspecified	PC All	P3 normal	Simon Delisle	2016-11-04 13:50 EDT by	Simon Delisle	2016-11-10 08:42 EST (	1 user	Change ReconcileHelper class, moved from a nested class of SynshronizableGmfDiagramEditor to a separate class.It allows to use the migration mechanism outside Papyrus (ex. EMF Compare).	Gerrit changewas merged to [master].Commit:Merged in master, do you need a report to neon stream?I close the bug please reopen it, if you need a report to neonI reopened this bug, since it will be great, if it's possible, to port this change back to Neon.	4.0
id=459539	REOPENED	Sirius	Core	unspecified	PC Mac OS X	P3 normal	Project inbox	2015-02-10 06:29 EST by	Elvis Dowson	2015-03-02 05:05 EST (	1 user	CreatedSirius library example test case to reproduce auto-complete error.Hi,I'm using Eclipse Luna 4.4 modelling project with all the latest updates installed.I have updated my Sirius installation to 1.0.2 maintenance update for my Eclipse Luna installation as descriptor inThe auto-complete feature does not work, as described in the following thread and associated screenshot:Regards,Elvis Dowson	Here is the stack trace output on the main Eclipse 4.4 Luna instance. The Sirius description is being developed in a run-time instance. When I try to press ctrl+space, the following stack trace error output appears in the main eclipse instance console window. Nothing happens in the eclipse run-time instance, and it doesn't offer any auto-complete suggestions.!ENTRY org.eclipse.ui 4 0 2015-02-10 16:48:27.571!MESSAGE Unhandled event loop exception!STACK 0java.lang.NullPointerException at org.eclipse.sirius.common.acceleo.mtl.business.internal.interpreter.AcceleoMTLInterpreter.createCompilationContext(AcceleoMTLInterpreter.java:567) at org.eclipse.sirius.common.acceleo.mtl.ide.AcceleoProposalProvider.getProposals(AcceleoProposalProvider.java:125) at org.eclipse.sirius.common.tools.api.interpreter.CompoundInterpreter.getProposals(CompoundInterpreter.java:785) at org.eclipse.sirius.ui.tools.api.assist.TextContentProposalProvider.getProposals(TextContentProposalProvider.java:88) at org.eclipse.jface.fieldassist.ContentProposalAdapter.getProposals(ContentProposalAdapter.java:2057) at org.eclipse.jface.fieldassist.ContentProposalAdapter.openProposalPopup(ContentProposalAdapter.java:1903) at org.eclipse.jface.fieldassist.ContentProposalAdapter.access$16(ContentProposalAdapter.java:1898) at org.eclipse.jface.fieldassist.ContentProposalAdapter$1.handleEvent(ContentProposalAdapter.java:1769) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4188) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1467) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1490) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1475) at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1504) at org.eclipse.swt.widgets.Text.sendKeyEvent(Text.java:1634) at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1500) at org.eclipse.swt.widgets.Text.sendKeyEvent(Text.java:1600) at org.eclipse.swt.widgets.Control.doCommandBySelector(Control.java:1060) at org.eclipse.swt.widgets.Display.windowProc(Display.java:5719) at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method) at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221) at org.eclipse.swt.widgets.Widget.superKeyDown(Widget.java:1908) at org.eclipse.swt.widgets.Widget.keyDown(Widget.java:1085) at org.eclipse.swt.widgets.Control.keyDown(Control.java:2400) at org.eclipse.swt.widgets.Display.windowProc(Display.java:5629) at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method) at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221) at org.eclipse.swt.widgets.Widget.windowSendEvent(Widget.java:2105) at org.eclipse.swt.widgets.Shell.windowSendEvent(Shell.java:2329) at org.eclipse.swt.widgets.Display.windowProc(Display.java:5691) at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method) at org.eclipse.swt.widgets.Display.applicationSendEvent(Display.java:5128) at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5277) at org.eclipse.swt.internal.cocoa.OS.objc_msgSend(Native Method) at org.eclipse.swt.internal.cocoa.NSApplication.sendEvent(NSApplication.java:128) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3655) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1151) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1032) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:148) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:636) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:579) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:135) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:380) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:235) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:483) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603) at org.eclipse.equinox.launcher.Main.run(Main.java:1465) at org.eclipse.equinox.launcher.Main.main(Main.java:1438)Hi,I have an update on this bug. The auto-completion feature works *once* if you re-start the main eclipse instance and the run-time instance. But that's it, it doesn't work a second time and any subsequent attempts to press ctrl+space will result in the stack trace error.Regards,Elvis DowsonHi Elvis, It seems that the collection of EPackage used in AcceleoMTLInterpreter.java:567 might contain a null entry. In your odesign on which you have the issue, do you use the metamodels property (advanced tab) on your representation descriptions ?If this property is empty, Sirius will get the available EPackage from the EcoreRegistry, but if it is used it will get the EPackages referenced in your odesign file.Hi Maxime,I did as you asked and added a reference to the library metamodel for the Author Diagram. Auto-completion appears to be working now.I have attached a screenshot of the workspace.Regards,Elvis DowsonCreatedScreenshot showing where to add a meta-model reference for the Author diagramThe auto-completion feature requires the metamodel property to be set. This was not mentioned in the Sirius 4min tutorial, and was hence over-looked.I reopen the bug as we should not have the NPE when there is no selected metamodels. In Elvis's case There should be an invalid metamodel in his workspace or something causing the NPE in AcceleoMTLInterpreter.createCompilationContext(l.567). When at least one metamodel is referenced from the RepresentationDescription, the compilation context is created with the referenced metamodels and the NPE is avoided. We should either void the NPE in createCompilationContext or filter the null package in context.getAvailableEPackages() or in the construction of this list : org.eclipse.sirius.business.api.dialect.description.AbstractInterpretedExpressionQuery.getPackagesToImport()	7.0
id=433966	REOPENED	Sirius	Core	0.9	PC Linux	P3 normal	Project inbox	2014-05-02 04:55 EDT by	Esteban DUGUEPEROUX	2014-09-11 10:19 EDT (	2 users	I would like to write a test case for a specific metamodel without having to generate plugins then I use dyanmic model creation but when adding a dynamically created model to a representations file I get the following exception :org.eclipse.emf.ecore.resource.impl.ResourceSetImpl$1DiagnosticWrappedException: org.eclipse.emf.ecore.xmi.PackageNotFoundException: Package with uri 'treeUIUpdaterTests' not found. (platform:/resource/Test/treeUIUpdaterTests.xmi, 2, 137) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.handleDemandLoadException(ResourceSetImpl.java:319) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:278) at org.eclipse.xtext.resource.XtextResourceSet.getResource(XtextResourceSet.java:201) at org.eclipse.sirius.business.internal.session.danalysis.DAnalysisSessionImpl.addSemanticResource(DAnalysisSessionImpl.java:730) at org.eclipse.sirius.business.internal.session.danalysis.DAnalysisSessionImpl.addSemanticResource(DAnalysisSessionImpl.java:743) at org.eclipse.sirius.tools.api.command.semantic.AddSemanticResourceCommand.doExecute(AddSemanticResourceCommand.java:81) at org.eclipse.emf.transaction.RecordingCommand.execute(RecordingCommand.java:135) at org.eclipse.emf.common.command.CompoundCommand.execute(CompoundCommand.java:261) at org.eclipse.emf.workspace.EMFCommandOperation.doExecute(EMFCommandOperation.java:119) at org.eclipse.emf.workspace.AbstractEMFOperation.execute(AbstractEMFOperation.java:150) at org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:513) at org.eclipse.emf.workspace.impl.WorkspaceCommandStackImpl.doExecute(WorkspaceCommandStackImpl.java:208) at fr.obeo.dsl.viewpoint.collab.api.editingdomain.NonDirtyingCapableWorkspaceCommandStack.doExecute(NonDirtyingCapableWorkspaceCommandStack.java:68) at org.eclipse.emf.transaction.impl.AbstractTransactionalCommandStack.execute(AbstractTransactionalCommandStack.java:165) at org.eclipse.emf.transaction.impl.AbstractTransactionalCommandStack.execute(AbstractTransactionalCommandStack.java:219) at org.eclipse.sirius.ui.tools.internal.operations.SemanticResourceAdditionOperation.run(SemanticResourceAdditionOperation.java:67) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:122)Caused by: org.eclipse.emf.ecore.xmi.PackageNotFoundException: Package with uri 'treeUIUpdaterTests' not found. (platform:/resource/Test/treeUIUpdaterTests.xmi, 2, 137) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.getPackageForURI(XMLHandler.java:2599) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.getFactoryForPrefix(XMLHandler.java:2429) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObjectByType(XMLHandler.java:1306) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.createTopObject(XMLHandler.java:1475) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.processElement(XMLHandler.java:1026) at org.eclipse.emf.ecore.xmi.impl.XMIHandler.processElement(XMIHandler.java:77) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement(XMLHandler.java:1008) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement(XMLHandler.java:719) at org.eclipse.emf.ecore.xmi.impl.XMIHandler.startElement(XMIHandler.java:163) at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:507) at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElement(XMLDTDValidator.java:793) at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1347) at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$ContentDriver.scanRootElementHook(XMLDocumentScannerImpl.java:1293) at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3091) at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:899) at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625) at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:828) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:757) at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:133) at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1211) at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:551) at javax.xml.parsers.SAXParser.parse(SAXParser.java:392) at org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:175) at org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourceImpl.java:253) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1518) at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1297) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad(ResourceSetImpl.java:259) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:274) ... 15 more Steps to reproduce using the attached project :1. Select the "treeUIUpdaterTests.xmi" file and Use the "Representations file" wizard, the "treeUIUpdaterTests.aird" is created but without referencing the selected semantic resource and the previous exception is thrown in the error log.	CreatedProject to reproduceI have submitted a change on Gerrit :It remains to add a simple test case for that but where can I put it, in which plugin? We could reuse WorkspaceEPackageRegistryTests.It could remains some others cases where Sirius does not support dynamic instance.Hi,Dynamic instances in EMF are supposed to have a relationship with their corresponding Ecore through the xsi:schemaLocation tag in the XMI. If I create a dynamic instance using the Ecore Reflective editor I ends up with xsi:schemaLocation="treeUIUpdaterTests treeUIUpdaterTests.ecore"in the XMI and this model is loaded and processed correctly by Sirius.The WorkspaceEPackageRegistry is in no way designed to work reliably for loading or editing models, things which will go wrong : two Ecore files in the workspace having the same nsURI, the registry will choose one or the other. Another project which is imported with the same nsURI and the workspace registry will pick it up and replace it "on the fly" in the registry which will likely create many issues and might lead to loss of data. The magic of "Let's analyze all the Ecore models in the workspace" is only relevant for content proposal and assist where a failure or not being exact is not critical, the WorkspaceEPackageRegistry implementation will not do and that is one of the main rational for moving it in the .editor plugin so that we are not tempted to use it that way (details are here :) If you need to actually manage "dynamic instance with no schema location" then we will need a way for the end user to specify (through the project properties or in the .aird) which .ecore to use and how to map them so that a modeling project will not change the metamodel on its own at times nobody expect to. AFAIK such an infrastructure exist in QVT-D and was proposed for inclusion in EMF at some point.Which brings me to my question : how do you end up not having a schema location ? How did you create your dynamic instance ? Did this information got lost at some step of the model usage or editing ?I cannot retreive the mean by which I have had a .xmi without schema location. Then I close this bugzilla as invalid. Sorry for the disturb.I tried to double-check Sirius will not erase the schema location when- doing some change, saving the model- doing some change, saving, closing the project, openingAnd it looks like there is something fishy.When I close and reopen the modeling project the XMI model is "automatically removed" from the semantic resources.CreatedArchived projects (splitting .ecore/.odesign and modeling project)This is an attachment which reveals a problem in opening a Modeling project when the .aird refers to a dynamic instance. (it is slightly different from the first one as this one has a schema location attribute and the .ecore has been moved, with the .odesign, in its proper project)The .aird file has a valid reference to the XMI file, the XMI file has a valid schema location and indeed the EMF reflective editor opens the .aird model with no problem.Yet, during the Session opening, the "DAnalysis.model" references returns a proxy which will never get resolved, leading to the fact that the XMI file seems to disappear from the list of semantic resources (hence can not be expanded in the model explorer).To reproduce the bug :close the "Test" projectopen the "Test" projectthe XMI is not decorated in the Model Explorer though it should have been.Open the .aird file in the "Sample Ecore Editor" and make sure it loads the XMI model just fine.(In reply to Cedric Brun from)Looks like my dev environment might be in a fairly bad state as I reproduce the same issue with any other model (UML, Ecore...) which are not even dynamic instance I'll have a look in the morning with rested eyes.Rested eyes now ;)There is an actual problem and its linked to the dynamic instance.All the code synchronized with master (acc9afddc7fca1f24994e62a504067cd0b40a9db)I can create a modeling project, add .ecore or .uml models in it and everything is fine.If I add a dynamic xmi, close and reopen, the dynamic XMI is no longer part of the semantic resources.From *now on* any model which gets added will have the same issue. I can add other .ecore or .uml files and they are getting picked up just fine, but if I close the project and reopen then they will be removed from the semantic resource. Only the models which are not "dynamic" and which were added in the project *before* the dynamic one will be able to be loaded.Looking at the .aird file, everything is referenced as it should *except* the dynamic instance which has an URI which just doesn't makes sense in the context of the project.I tried doing the scenario "removing" the dynamic part alltogether and only introducing a proxy reference directly in the .aird file, only the proxy one does not get loaded and not the subsequent "models" references. That would rule out a "general problem" here, this is related to the dynamic instance in some way.When I add Bis.xmi which is a dynamic instance :this is added in the .aird file.<models xmi:type="treeUIUpdaterTests:Root" href="Bis.xmi#/"/>saving, closing, reopening the project, it is still the same content though the model is not getting resolved for some reasons.When I add a new model which is not even a dynamic instance :I get :<models xmi:type="treeUIUpdaterTests:Root" href="platform:/resource/my.project.design/description/Bis.xmi#/"/><models xmi:type="uml:Model" href="Copy%20of%20MyBis.uml#_kMA_MDkHEeS-IZtWdk3GxA"/>Disabling the Xtext support plugin :The URI mangling does not happen but the dynamic instance is still not resolved after closing/re-opening the model.It looks like that the "dynamic instance is not resolved after reopen" might be related to EcoreTools. For some reasons, if I disable the ecoretools.design plugin then the dynamic instance gets resolved.More and more puzzling...If I keep having ecoretools.design but disable only ecoretools.design.properties, the problem is not there. So it comes either from ecoretools.design.properties or one of its upstream dependency which would become activated on startup.	11.0
id=495611	REOPENED	Sirius	Core	unspecified	PC Windows NT	P3 normal	Project inbox	2016-06-07 12:00 EDT by	Ed Willink	2017-02-10 11:11 EST (	2 users	Neon RC3:If a model file has unresolved proxies, the model explorer refrains from applying a top-right M decoration. Reasonable for non-model files; unhelpful for XMI files in general. Suggest perhaps a problem marker; certainly a hovertext.If the unresolved proxies are cured, the model explorer continues to display no M; very confusing and unhelpful. Refreshing or rebuilding or restarting makes no difference. However renaming does unlock the analysis and display the M that then enables other diagram facilities to be used. Should refresh on save/rebuild/restart.	Hi Ed, Thanks for the bug report. Could you upload a small reproduction case ? Regards; MaximeCreatedSample projects to try to reproduce the issueEd, I probably misunderstood your use case, but failed to reproduce the initial issue (no "M" decoration on models which contain unresolved proxies).What I tried:1. Import the 2 projects in the attached zip.2. Close "Bugzilla-495611-lib", which is a plain (non-Modeling) project with a simple ecore.3. Open/expand Bugzilla-495611, which is a Modeling project. It contains another simple Ecore which references the one from Bugzilla-495611-lib.4. The type of the reference in class C in Bugzilla-495611/sample.ecore is indeed an unresolved proxy, but the sample.ecore is loaded and marked with the blue "M" decorator.Feel free to reopen with a specific sample and scenario if I misunderstood your description.I just reproduced with Sirius 4.1.2.With a working Modeling Project Nature project, copy and paste a potentially good model, but with a bad schemaLocation so that the Error Log not unreasonably shows:org.eclipse.emf.ecore.resource.impl.ResourceSetImpl$1DiagnosticWrappedException: org.eclipse.emf.ecore.xmi.PackageNotFoundException: Package with uri '' not found. (platform:/resource/Petrinets/model/testcase0-in2z.petrinet, 5, 15) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.handleDemandLoadException(ResourceSetImpl.java:319) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:278) at org.eclipse.xtext.resource.XtextResourceSet.getResource(XtextResourceSet.java:265) at org.eclipse.sirius.business.api.resource.LoadEMFResource.run(LoadEMFResource.java:66) at org.eclipse.sirius.ui.tools.api.views.modelexplorerview.resourcelistener.DefaultModelingProjectResourceListener.isLoadableModel(DefaultModelingProjectResourceListener.java:180)Edit the model XMI to correct the schemaLocation so that it opens and validates fine in the Sample Ecore Model Editor.Unfortunately the *.aird file stubbornly refuses to recognise the now valid model file.Refresh does not help.Clean does not help.Open/close project does not help.Restart Eclipse does not help.Removing and adding the modeling nature helps.Renaming the file helps.Repairing the *.aird file seems to be damaging until the nature is removed and added again.	4.0
id=498442	REOPENED	Papyrus	Others	3.0.0	All All	P3 normal	Stefan Dirix	2016-07-25 10:58 EDT by	Stefan Dirix	2017-02-01 08:56 EST (	3 users	CreatedScreenshots of Papyrus OneFileDecorator interfering with eGitThe Papyrus OneFile Decorator was added to generically support decorations for the 'virtual' IPapyrusFile. This is achieved by looking at the decorations of the associated resources and setting the decoration of the IPapyrusFile accordingly.However since the Decorator-Framework is only intended to add decorations and not to retrieve and look at them, this leads to many problems.For example, the Papyrus Decorator can not determine in which quadrant an overlay image was added to the associated resources and just adds all of them to the default quadrant. Another example is that it interferes with the actual frameworks adding the decorations, since it can not determine if there will be additional decorations on the element itself.I added an example image demonstrating the Papyrus Decorator interfering with eGit. In the first case it overwrites the conflict-marker. In the second case it doubles the 'modified' marker.The only clean approach is to remove the Papyrus Decorator. Decorating is the job of the framework which adds the decorations and can not be solved generically within Papyrus.There is one downside to this approach: Frameworks which are not capable of decorating ResourceMappings or Collections (the IPapyrusFile adapts to them) will no longer show their decorations on the IPapyrusFile. However these frameworks can be fixed while there is currently no reasonable way to support frameworks which actually decorate properly. Therefore the OneFileDecorator should be removed.	CreatedScreenshots of Papyrus OneFileDecorator interfering with eGitNew Gerrit change created:We disagree, the one file decorator will not be remove but we will test the proposition associated to theHi Patrick. Thanks a lot for looking at this issue.Are you interested in a (phone) discussion regarding the decoration mechanism of Papyrus? We would like to discuss the problems we see when using Papyrus in combination with other frameworks (especially eGit) and offer our assistance to find a satisfactory solution for them.Best regards,StefanReopening bug to evaluate the impact of this patch on the project.@Stefan, what are the other known decorations that could be added to Papyrus files? I see only validation markers for errors or warning from validation on the model. It would be nice to provide some evaluation with those other decorations also.Having some automated tests could be hard. Do you think there is still some possibility, with Junit or RCPTT?At the moment I can only think of Subversion (for example Subclipse), but I do not know how good their support for ResourceMappings are.With RCPTT you can also test for decorations so this should be possible.	6.0
id=447702	REOPENED	Sirius	Diagram	1.0.1	PC Mac OS X	P3 normal	Project Inbox	2014-10-17 09:24 EDT by	Maxime Porhel	2016-09-19 09:17 EDT (	1 user	In, the menu to create mappings and tool section as direct children of a DiagramDescription have been removed to avoid the creation by a specifier of a no more supported structure. We should either use these feature when looking for available tools or hide its property section in the VSM editor.If we choose to hide it, then we should remove it from the metamodel ()	The current way to reuse tools is to create a ToolSection and use ToolSection.reusedTools to reference the tools to reuse.*** This bug has been marked as a duplicate of***It's not the same problem as, The problem come from the field named "Reused Tools" in the layer. This field does not work, it's necessary to do a section tool and use the field "Reused Tools.The link posted above is wrong.It's not the same problem aswas about unsupported diagram structure, ie. mapping as direct children of the diagram or "without layer mode". We have here the same issue but with unsupported structure of the palette: we can create tools as direct children of a ToolSection so we must not propose to reuse a tool from a Layer. We should remove this feature or change it's type to reuse a complete ToolSection but I am not sur this would be a good idea.is about cleaning the metamodel to finalize the removal of the "wihtoutLayerMode".Regarding the chosen solution for the current issue, we will have to be consistent with the behavior/solutions of bith related issues 435879 and 436069.	5.0
id=469231	REOPENED	Sirius	Diagram	unspecified	PC Windows 8	P3 normal	Project Inbox	2015-06-03 04:01 EDT by	Belqassim Djafer	2015-06-05 05:11 EDT (	1 user	CreatedScreenshotTo reproduce:1- Import the attached project.2- Open "Sequence Diagram on" representation.3- On "newParticipant1", select the both execution and m6 edge elements.4- Resize vertically the selection. KO: "m6" is not placed in the expected shadow location.This bug is reproduced with or without scrollbars.See attached picture.	CreatedUse caseThis bug exists also on Sync Call resizing.Steps to reproduce with Sync Call:1- Import the attached project.2- Open "Sequence Diagram on" representation.3- On "newParticipant1", create a Sync Call (m7).4- Select the both execution and m7 edge elements.5- Resize vertically the selection. KO: "m7" is not placed in the expected shadow location.Belquassim, could you check the snap to grid and snape to shapes properties of your diagram ?(In reply to Maxime Porhel from)Yes but this did not change anything.Belqassim*By construction a (A)SyncCall is different from an Execution with regular messages. The execution of SyncCall has its start message attached to the top and its end message attached to its bottom. An ASyncCall does not have a return message.So eventually the edge feedback is not good but the behavior is ok.(In reply to Maxime Porhel from)The issue occurs in case of multi-selection only, when the execution of a sync call with "message to self" and this message are selected.We should forbid the resize of an execution or a message to self is the connected element is also selected.	6.0
id=498063	REOPENED	Sirius	Properties	4.0.0	PC Windows 7	P3 enhancement	Project Inbox	2016-07-18 10:03 EDT by	Arthur Daussy	2016-12-13 08:42 EST (	4 users	In our use case we use the onClick expression as navigation expression. We think that the reference widget would be more usable if even when it is disabled the onClick expression remains active.Regards,Arthur	Thanks for your detailed bug report.New Gerrit change created:Gerrit changewas merged to [master].Commit:It's corrected on * Sirius 4.1.0.201609201603* Eef: 1.7.0.201609191510ThanksResolved in Sirius 4.1.0.Available in Sirius 4.1.0, seefor details.CreatedonClick expression not working test caseSirius: 4.1.2.201612021444EEF: 1.8.0.201612021519This problems stil occurs on the aforementioned Sirius/EEF versions.The InitialOperation on HyperlinkDescription doesn't work if the HyperlinkDescription is deactivated.The attached test case has 2 HyperlinkDescription with an identical InitialOperation, one enabled, one disabled.See comment above	8.0
id=336532	REOPENED	EMF	cdo.db	4.6	All All	P3 normal	Stefan Winkler	2011-02-07 11:37 EST by	Lothar Werzinger	2016-07-31 01:03 EDT (	3 users	Build Identifier: I get a strange MySQL error when merging branches (see attached log).MySQLIntegrityConstraintViolationException: Duplicate entry '2' for key 'cdo_objects_idx0'Reproducible: AlwaysSteps to Reproduce:1. Create multiple branches that are branched of the MAIN branch at create time: CDOBranch mainBranch = ...; long timestamp = mainBranch.getBase().getTimeStamp(); CDOBranch result = mainBranch.createBranch(branchName, timestamp);2. Create some object tree on one branch and commit.3. Try to merge this branch to another (which at that time should be empty). CDOTransaction transaction = session.openTransaction(targetBranch); CDOMerger merger = new DefaultCDOMerger.PerFeature.ManyValued(); transaction.merge(sourceBranch.getHead(), merger); transaction.commit();	Createdconsole log showing the errorAs discussed with Stefan Winkler I refer to.Createdpatch-v1We ignore the exception by checking for the respective SQL state. Unfortunately, this code is returned differently by MySQL. To handle this, I moved the decision whether we have a duplicate key constraint violation into the DBAdapter. The patchFound it. The duplicate key exception is a known error which occurs when new objects from another branch are added to a target branch.For H2, we ignore the exception by checking for the respective SQL status code. Unfortunately, this code is returned differently by MySQL. To handle this, I moved the decision whether we have a duplicate key constraint violation into the DBAdapter. The patch also contains the testcase mentioned above.Tested with mysql and H2.CreatedPatch v2 - ready to be committedStefan, please go ahead...Committed to trunk, rev. 7308When I successfully branch a model using this change, I still see a similar constraint violation in HorizontalBranchClassMapping when I subsequently try to commit certain changes in the source branch (the one I branched from). An example stack trace is below. I believe a similar change is required in HorizontalBranchClassMapping to what was done in ObjectTypeTable.org.eclipse.emf.cdo.util.CommitException: Rollback in DBStore: org.eclipse.net4j.db.DBException: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '18581-3-1' for key 'PrimaryContract_idx0' at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalBranchingClassMapping.writeValues(HorizontalBranchingClassMapping.java:653) at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalBranchingClassMapping$FeatureDeltaWriter.process(HorizontalBranchingClassMapping.java:129) at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalBranchingClassMapping.writeRevisionDelta(HorizontalBranchingClassMapping.java:1074) at org.eclipse.emf.cdo.server.internal.db.DBStoreAccessor.writeRevisionDelta(DBStoreAccessor.java:542) at org.eclipse.emf.cdo.server.internal.db.DBStoreAccessor.writeRevisionDeltas(DBStoreAccessor.java:527) at org.eclipse.emf.cdo.spi.server.StoreAccessor.doWrite(StoreAccessor.java:95) at org.eclipse.emf.cdo.spi.server.StoreAccessorBase.write(StoreAccessorBase.java:135) at org.eclipse.emf.cdo.internal.server.TransactionCommitContext.write(TransactionCommitContext.java:409) at org.eclipse.emf.cdo.spi.server.InternalCommitContext$1.runLoop(InternalCommitContext.java:40) at org.eclipse.emf.cdo.spi.server.InternalCommitContext$1.runLoop(InternalCommitContext.java:1) at org.eclipse.net4j.util.om.monitor.ProgressDistributor.run(ProgressDistributor.java:96) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CommitTransactionIndication.indicatingCommit(CommitTransactionIndication.java:244) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CommitTransactionIndication.indicating(CommitTransactionIndication.java:92) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CDOServerIndicationWithMonitoring.indicating(CDOServerIndicationWithMonitoring.java:109) at org.eclipse.net4j.signal.IndicationWithMonitoring.indicating(IndicationWithMonitoring.java:84) at org.eclipse.net4j.signal.IndicationWithResponse.doExtendedInput(IndicationWithResponse.java:90) at org.eclipse.net4j.signal.Signal.doInput(Signal.java:326) at org.eclipse.net4j.signal.IndicationWithResponse.execute(IndicationWithResponse.java:63) at org.eclipse.net4j.signal.IndicationWithMonitoring.execute(IndicationWithMonitoring.java:63) at org.eclipse.net4j.signal.Signal.runSync(Signal.java:251) at org.eclipse.net4j.signal.Signal.run(Signal.java:147) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '18581-3-1' for key 'PrimaryContract_idx0' at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.mysql.jdbc.Util.handleNewInstance(Util.java:406) at com.mysql.jdbc.Util.getInstance(Util.java:381) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1015) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3515) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3447) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1951) at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2101) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2554) at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1761) at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2046) at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1964) at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1949) at org.eclipse.net4j.db.DBUtil.update(DBUtil.java:558) at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalBranchingClassMapping.writeValues(HorizontalBranchingClassMapping.java:647) ... 23 more at org.eclipse.emf.internal.cdo.transaction.CDOSingleTransactionStrategyImpl.commit(CDOSingleTransactionStrategyImpl.java:94) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.commit(CDOTransactionImpl.java:1056) at org.eclipse.emf.cdo.transaction.CDOPushTransaction.push(CDOPushTransaction.java:239) at biz.tradescape.mmt.ui.editor.AbstractCDOEditor$6.run(AbstractCDOEditor.java:693) at biz.tradescape.compatibility.JobFactoryImpl$2$1.run(JobFactoryImpl.java:41) at org.apache.shiro.subject.support.SubjectRunnable.doRun(SubjectRunnable.java:120) at org.apache.shiro.subject.support.SubjectRunnable.run(SubjectRunnable.java:108) at biz.tradescape.compatibility.JobFactoryImpl$2.run(JobFactoryImpl.java:45) at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)Reopening for Cameron.CreatedExample fix in the MySQL caseThis appear so to fix the issue in a MySQL specific. I'm not sure about the more generalized solution.Moving all open bug reports to 4.1 because the release is very near and it's hghly unlikely that there will be spare time to address 4.0 problems.Please make sure that your patches can be applied against the master branch and that your problem is not already fixed there!!!Moving all open issues to 4.2. Open bugs can be ported to 4.1 maintenance after they've been fixed in master.We'll try to address open problems in 4.3 (master) first and then port fixes back to 4.2.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	14.0
id=449264	REOPENED	Sirius	Table	2.0.0	All All	P3 normal	Project Inbox	2014-10-29 20:18 EDT by	EPP Error Reports	2016-11-08 04:30 EST (	4 users	Hello committers,we received a new error report for Eclipse 4.5.0.I20140918-0330.General Information: anonymous-id: 9ba5589a-eebe-4694-b776-c5b7e5a1e72d eclipse-build-id: 4.5.0.I20140918-0330 eclipse-product: org.eclipse.epp.package.modeling.product operating system: Windows7 6.1.0 (x86_64) - win32 java-runtime-version: 1.8.0_20-b26The following plug-ins were present on the execution stack (*): 1. org.eclipse.core.databinding.observable_1.4.1.v20140910-2107 2. org.eclipse.core.databinding_1.4.100.v20140910-2107 3. org.eclipse.core.runtime_3.10.0.v20140724-1132 4. org.eclipse.e4.core.contexts_1.3.100.v20140407-1019 5. org.eclipse.e4.core.di_1.4.0.v20140813-2240 6. org.eclipse.e4.ui.services_1.1.0.v20140815-1559 7. org.eclipse.e4.ui.workbench_1.2.0.v20140905-1352 8. org.eclipse.e4.ui.workbench.renderers.swt_0.12.100.v20140915-0623 9. org.eclipse.e4.ui.workbench.swt_0.12.100.v20140908-1525 10. org.eclipse.emf.common_2.11.0.v20140916-0346 11. org.eclipse.emf_2.6.0.v20140929-0830 12. org.eclipse.emf.ecoretools.design_3.0.0.201408200849 13. org.eclipse.emf.ecoretools_3.0.0.201408200849 14. org.eclipse.equinox.app_1.3.200.v20130910-1609 15. org.eclipse.equinox.event_1.3.100.v20140115-1647 16. org.eclipse.equinox.launcher_1.3.0.v20140415-2008 17. org.eclipse.jface_3.11.0.v20140822-0942 18. org.eclipse.osgi_3.10.100.v20140909-1314 19. org.eclipse.sirius.table.ui_1.0.0.201406040902 20. org.eclipse.sirius.table_1.0.0.201406040902 21. org.eclipse.sirius_1.0.0.201406040902 22. org.eclipse.sirius.ui_1.0.0.201406040902 23. org.eclipse.swt_3.104.0.v20140916-1012 24. org.eclipse.ui_3.107.0.v20140911-1616 25. org.eclipse.ui.ide.application_1.0.600.v20140909-1818 26. org.eclipse.ui.ide_3.10.100.v20140905-0917Error Status: code: 0 plugin: org.eclipse.sirius_1.0.0.201406040902 message: Impossible to find an interpreter - Could not find a session for model element : org.eclipse.emf.ecore.impl.EcorePackageImpl@7e351d7 (eProxyURI:) fingerprint: fc4723ca exception class: java.lang.RuntimeException exception message: - number of children: 0 java.lang.RuntimeException: null at org.eclipse.sirius.tools.api.interpreter.InterpreterRegistry.getInterpreter(InterpreterRegistry.java:70) at org.eclipse.sirius.table.ui.tools.internal.editor.AbstractDTableEditor.createPartControl(AbstractDTableEditor.java:382) at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:149) at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPartControl(CompatibilityEditor.java:99) at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:335) at sun.reflect.NativeMethodAccessorImpl.invoke0(null:-2) at sun.reflect.NativeMethodAccessorImpl.invoke(null:-1) at sun.reflect.DelegatingMethodAccessorImpl.invoke(null:-1) at java.lang.reflect.Method.invoke(null:-1) at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:55) at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:888) at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:869) at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:120) at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:337) at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:258) at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:162) at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:104) at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:73) at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:55) at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:128) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:983) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:662) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:766) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:737) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:731) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:715) at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1240) at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:69) at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:40) at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:187) at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:156) at org.eclipse.swt.widgets.Display.syncExec(Display.java:4736) at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:217) at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:36) at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197) at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197) at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1) at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230) at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148) at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135) at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78) at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39) at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:85) at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:59) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374) at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171) at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:488) at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:454) at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:680) at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:387) at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.showPart(PartServiceImpl.java:1115) at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3236) at org.eclipse.ui.internal.WorkbenchPage.access$23(WorkbenchPage.java:3151) at org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:3133) at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:3128) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:3092) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:3073) at org.eclipse.sirius.table.ui.business.internal.dialect.TableDialectUIServices$1.run(TableDialectUIServices.java:111) at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:187) at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:156) at org.eclipse.swt.widgets.Display.syncExec(Display.java:4736) at org.eclipse.sirius.table.ui.business.internal.dialect.TableDialectUIServices.openEditor(TableDialectUIServices.java:117) at org.eclipse.sirius.ui.business.internal.dialect.DialectUIManagerImpl.openEditor(DialectUIManagerImpl.java:102) at org.eclipse.sirius.ui.tools.internal.actions.creation.CreateRepresentationAction$2.run(CreateRepresentationAction.java:141) at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:466) at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:374) at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:527) at org.eclipse.ui.internal.progress.ProgressManager$RunnableWithStatus.run(ProgressManager.java:1380) at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) at org.eclipse.ui.internal.progress.ProgressManager$5.run(ProgressManager.java:1214) at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:187) at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:156) at org.eclipse.swt.widgets.Display.syncExec(Display.java:4736) at org.eclipse.ui.internal.progress.ProgressManager.runInUI(ProgressManager.java:1211) at org.eclipse.sirius.ui.tools.internal.actions.creation.CreateRepresentationAction.run(CreateRepresentationAction.java:150) at org.eclipse.sirius.ui.tools.internal.wizards.CreateRepresentationWizard.performFinish(CreateRepresentationWizard.java:65) at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:853) at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:438) at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:619) at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4353) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4172) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761) at org.eclipse.jface.window.Window.runEventLoop(Window.java:832) at org.eclipse.jface.window.Window.open(Window.java:808) at org.eclipse.emf.ecoretools.design.action.EcoreInitDiagramFileAction.openCreateRepresentationWizard(EcoreInitDiagramFileAction.java:245) at org.eclipse.emf.ecoretools.design.action.EcoreInitDiagramFileAction.run(EcoreInitDiagramFileAction.java:153) at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:253) at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:595) at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:511) at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:420) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4353) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4172) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1151) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1032) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:148) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:637) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:580) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:141) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:380) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:235) at sun.reflect.NativeMethodAccessorImpl.invoke0(null:-2) at sun.reflect.NativeMethodAccessorImpl.invoke(null:-1) at sun.reflect.DelegatingMethodAccessorImpl.invoke(null:-1) at java.lang.reflect.Method.invoke(null:-1) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603) at org.eclipse.equinox.launcher.Main.run(Main.java:1465) at org.eclipse.equinox.launcher.Main.main(Main.java:1438) Messages, stacktraces, and nested status objects may be shortened. Please visit-for the complete error log.Some general information and guidelines about how to use this bug report:1. Feel free to move this bug to your own product and components. Please note that this bug is only accessible to Eclipse committers. If you move this bug please make sure that it's still in the "Security Advisor" group.2. The bug contents of the fields status, resolution, keywords, and whitelist are presented to reporters. If you needs more information, please set the keyword "needinfo". This will trigger a specialized dialog asking the user to provide further details.3. Use the following resolutions for the following situations: * CLOSED / FIXED: This bug has been fixed. Please provide additional information in the whiteboard field. * CLOSED / WORKSFORME: Use this resolution if you can't reproduce this issue and request further information. Please use the whiteboard text to specify more details what a user should provide and how. * CLOSED / INVALID: Use this resolution if the reported problem is a 'user-configuration' problem. Please consider giving hints how to fix these issues in the whiteboard field. * CLOSED / NOT ECLIPSE: Use this if the problem is caused by another plugin not developed at Eclipse.org * CLOSED / MOVED: If this bug has been moved else where. Please provide more information (e.g. a link) in the whiteboard field.4. Please remember that only committers can view and comment on this bug. You may, however, manually add the reporting user to the bug's cc list. But keep in mind that the report may contains sensitive information.5. If you are missing a feature, please file a enhancement request here:Thank you for your assistance.Your friendly error-reports-inbox.--* Note: The list of present bundles and their respective versions was calculated by package naming heuristics. This may or may not reflect reality.	*** This bug has been marked as a duplicate of***The stack shows that the problem is not really the same as. The fix ofdoes not fix this bug.This fix should be similar to what was done infor, but in AbstractDTableEditor/AbstractDTreeEditor.I put this issue as triaged, as an existing correction for a similar issue exists. We will have to find some steps to reproduce during correction.Moving to 4.0 as it is not even clear if/how we can reproduce this.Moving out of the 4.0 scope for now, along with all the other issues which were there "by default". This does not mean some of these will not be re-integrated at some point, but for now these issues are not part of the roadmap for 4.0.If you feel strongly about this removal from 4.0 and/or are ready to sponsor the corresponding work, feel free to comment.	6.0
id=380616	REOPENED	Sphinx	Core	0.7.0	All All	P3 enhancement	Stephan Eberle	2012-05-25 03:53 EDT by	Florina Craciunescu	2012-12-19 05:20 EST (	2 users	Build Identifier: Version: Indigo Service Release 1 Build id: 20110916-0149Some scenarios, like the filtering of objects and features that get validated or the filtering of the displayed diagnostic messages, lead to the need to customize the adapter that plugs the EMF Model Validation Service API into the EMF EValidator API.This can be done by extending the org.eclipse.sphinx.emf.validation.registration, from the project 'org.eclipse.sphinx.emf.validation.bridge', with an optional attribute, representing a subclass of the EValidatorAdapter. This will allow the user to provide its own implementation, without affecting the existing code. Note that the enhancement is 100% backward compatible. A proposed patch will be provided.Reproducible: Always	CreatedPatchThank you for submitting this bug and the proposed patch. Your idea of enabling adopters to use their own implementation of EValidatorAdapter is very good.Here are some comments and questions from my side regarding the details of the implementation:EValidatorAdapter#getEMFRuleEnablement():* I'd suggest to rename this method to areEMFIntrinsicConstraintsEnabled()* Use boolean rather than Boolean as return value* What is the IEclipsePreferences.IPreferenceChangeListener() useful for? EValidatorAdapter#validateEMFRules():* Replace if (getEMFRuleEnablement() == Boolean.TRUE) { with if (areEMFIntrinsicConstraintsEnabled()) {RulesExtReader#readElement():* Let this method create the custom validation adapter instance (with IConfigurationElement#createExecutableExtension()) right way and store result on RulesExtInternal* Don't forget to add exception handling as appropriateRulesExtInternal:* Remove get/setValidatorAdapterClassName() methods and related field* Rename get/setValidatorAdapterInstance() to get/setValidatorAdapter()EValidatorRegistering#eValidatorSetting()* Leave signature as is - the additional IConfigurationElement argument is no longer needed when proceeding as explained aboveActivator#eValidatorSetting() :* I've already committed the removal of this apparently dead method - please remove it from the next patch so as to avoid conflicts during patch application(In reply to)In the previous implementation, the flag corresponding to the EMF default rules was read for each validation in "validate(EClass,EObject ...)". I have considered that this time-consuming and is not necessary, so I have introduced the mentioned listener. I have used Boolean, instead of boolean to make the difference between flag not read yet and flag set to false. Do you think this is ok?Done, but why is the method "logError(IConfigurationElement, String)" commented? I hope I have covered all other changes.CreatedPatch Version2Fixed by applying second proposed patch and slightly improving it.(In reply to)Ok, I see now. Sure this is even very good, this way we save some extra processor cycles in every validation constraint evaluation. I've just a little improved the part that performs the initial read of the preference value by eliminating the call to Platform.getPreferencesService().getBoolean() and reading the value from the result of InstanceScope.INSTANCE.getNode(org.eclipse.sphinx.emf.validation.Activator.PLUGIN_ID). The latter must be retrieved anyway for installing the preference change listener.No idea. I uncommented it again, simplified implementation and eliminated redundant logError() methods.The current version of the EValidatorAdapter class (from org.eclipse.sphinx.emf.validation) does not contain a change made in the method validateEMFRules. The change refers to the fact that the superTypes of the given eClass are not taken into consideration and the call to validate(...) is made if the EMF intrinsic constraints are enabled.Can this change be applied?I've tried to reapply the patch ''Patch Version2'' to the current codebase to see what this change acutally is about. Unfortunately, I'm ending up in merge conflicts all over the place. Could you create a new patch that is based on the latest state of the codebase and reflects what is missing? Thanks.CreatedPatch version 3(In reply to)I have created a new patch... I have only uncommented the line validate(eSuperTypes.get(0), eObject, diagnostics, context); from the method validateEMFRules.	9.0
id=425854	REOPENED	Sphinx	Core	0.8.0	All Windows XP	P3 normal	Stephan Eberle	2014-01-16 04:55 EST by	chealmin kim	2014-01-29 04:01 EST (	2 users	Createdthe screenshot of the problem that the save button is not activated whiling editingThe diagram created in the Artop is not saved after being updated to 'sphinx-Update-0.8.0M4'.The Artop is the latest version('4.0.4'), and the diagram can be created as follows.New > Examples > autosar3x.util.Autosar3xReleaseDescriptor DiagramTest procedure is as follows:1. download the 'sphinx-Update-0.8.0M4.zip'.2. download the latest Artop('artop-demo-4.0.4').3. open the Artop and update the 'sphinx-Update-0.8.0M4.zip' to it by using 'Install New Software'.3. reopen the Artop updated by the 'sphinx-Update-0.8.0M4.zip'.4. create Autosar Project5. create the autosar3x.util.Autosar3xReleaseDescriptor Diagram as follows.New > Examples > autosar3x.util.Autosar3xReleaseDescriptor Diagram6. create new ApplicationSoftwareComponentType and edit the short name of it in the Diagram.7. After editing, the save button is not activated and 'Ctrl+S' does not also work.I attach the screenshot of the problem that the save button is not activated while editing.After debugging, we've found that below three files cause the problem.After reverting below three files to the previous version of 'sphinx-Update-0.8.0.I20131122-0918.zip', the problem is gone./org.eclipse.sphinx.emf/src/org/eclipse/sphinx/emf/internal/model/ProjectScopeModelDescriptorSynchronizerDelegate.java/org.eclipse.sphinx.emf/src/org/eclipse/sphinx/emf/model/ModelDescriptor.java/org.eclipse.sphinx.emf/src/org/eclipse/sphinx/emf/model/ModelDescriptorRegistry.java	This seems to be a regression introduced along with.Fixed by adding the target metamodel descriptor as intrinsic property of model descriptors in addition to the (native) metamodel descriptor and making sure that the latter is used for retrieving the editing domain if it is non-null.In "normal" cases, like AUTOSAR, the metamodel descriptor is AUTOSAR and the target metamodel descriptor is null. The metamodel descriptor can be safely used to find the editing domain into which the AUTOSAR resources have been loaded.But in case of GMF resources that reference an AUTOSAR model the (native) metamodel descriptor is GMF Notation and the target metamodel descriptor AUTOSAR. As the GMF resources contains references going to AUTOSAR elements they must not be loaded into their own editing domain but go into that of the AUTOSAR model instead. Therefore, the model descriptor now refers to the target metamodel descriptor being non-null for GMF models (rather than to the native metamodel descriptor) to retrieve the editing domain in which the GMF model resources are located.I've checked that the latest released version of 'sphinx-Update-0.8.0M5' works well in 'artop-demo-4.0.4'.But, it seems like that it doesn't work well in the following environment. * Our test environment *"eclipse-automotive-kepler-SR1-incubation-win32" + "Artop SDK.3.3.3"The "eclipse-automotive-kepler-SR1-incubation-win3" can be downloaded at -->Features of our test environment is as follows.Eclipse Platform Kepler SR1EMF 2.9.1GMF 1.7.0GEF 3.9.1Artop SDK.3.3.3Createdmodified sphinxAnd, please, refer the attched file of 'sphinx.zip', which our engineer has modified.(In reply to chealmin kim from)We have tried to reproduce the bug on Sphinx 0.8.0M5, Kepler, and Artop 3.3.3 but didn't succeed. Even with the Automotive Eclipse package indicated above, everything works as it should at our end.Could you maybe create a fresh workspace and try again?Thanks for your comments, and I'll test it as you guide. Then, I've found another bug after updating to the 'Sphinx 0.8.0M5'.You can easily reproduce it as follows.1. create a diagram component.2. close editor and close eclipse and reopen it.3, open diagram editor again.--> The diagram is normally not visible as an attached file.The error log is as follows.!SESSION 2014-01-29 11:10:27.664 -----------------------------------------------eclipse.buildId=unknownjava.version=1.7.0_07java.vendor=Oracle CorporationBootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=ko_KRCommand-line arguments: -os win32 -ws win32 -arch x86 -data workspace!ENTRY org.eclipse.jface 4 2 2014-01-29 11:11:17.842!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jface".!STACK 0java.lang.NullPointerException at org.artop.aal.examples.diagrams.componenttype3x.parsers.AbstractParser.getValue(AbstractParser.java:194) at org.artop.aal.examples.diagrams.componenttype3x.parsers.AbstractParser.getEditableValues(AbstractParser.java:185) at org.artop.aal.examples.diagrams.componenttype3x.parsers.MessageFormatMessageFormatParser.getEditString(MessageFormatMessageFormatParser.java:162) at org.eclipse.gmf.runtime.diagram.ui.editpolicies.LabelDirectEditPolicy.getDirectEditCommand(LabelDirectEditPolicy.java:90) at org.eclipse.gef.editpolicies.DirectEditPolicy.getCommand(DirectEditPolicy.java:59) at org.eclipse.gef.editparts.AbstractEditPart.getCommand(AbstractEditPart.java:502) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.access$1(GraphicalEditPart.java:1) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart$1.run(GraphicalEditPart.java:482) at org.eclipse.emf.transaction.impl.TransactionalEditingDomainImpl.runExclusive(TransactionalEditingDomainImpl.java:328) at org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.getCommand(GraphicalEditPart.java:477) at org.eclipse.gef.tools.DirectEditManager.commit(DirectEditManager.java:144) at org.eclipse.gmf.runtime.diagram.ui.tools.TextDirectEditManager.commit(TextDirectEditManager.java:406) at org.eclipse.gef.tools.DirectEditManager$4.applyEditorValue(DirectEditManager.java:298) at org.eclipse.jface.viewers.CellEditor$1.run(CellEditor.java:335) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175) at org.eclipse.jface.viewers.CellEditor.fireApplyEditorValue(CellEditor.java:333) at org.eclipse.jface.viewers.CellEditor.focusLost(CellEditor.java:718) at org.eclipse.jface.viewers.TextCellEditor$5.focusLost(TextCellEditor.java:186) at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:143) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1058) at org.eclipse.swt.widgets.Control.sendFocusEvent(Control.java:2822) at org.eclipse.swt.widgets.Widget.wmKillFocus(Widget.java:1935) at org.eclipse.swt.widgets.Control.WM_KILLFOCUS(Control.java:4900) at org.eclipse.swt.widgets.Control.windowProc(Control.java:4562) at org.eclipse.swt.widgets.Text.windowProc(Text.java:2570) at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989) at org.eclipse.swt.internal.win32.OS.SetFocus(Native Method) at org.eclipse.swt.widgets.Control.forceFocus(Control.java:1098) at org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMousePressed(DomainEventDispatcher.java:346) at org.eclipse.draw2d.LightweightSystem$EventHandler.mouseDown(LightweightSystem.java:523) at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:192) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) at org.eclipse.equinox.launcher.Main.run(Main.java:1438)Createdreopen_diagramEditor_bug(In reply to chealmin kim from)Ok, that's good.This really looks more like an Artop bug. Would you mind opening a new bug onfor that purpose?	8.0
id=395999	REOPENED	EMF	cdo.core	4.6	PC Linux	P3 normal	Eike Stepper	2012-12-06 17:40 EST by	Esteban DUGUEPEROUX	2016-07-31 01:02 EDT (	0 users	Calling twice ResourceSet.getResource(URI,true) failed using cdo connection aware URI :java.lang.RuntimeException: Only one view per repository can be open for the same resource set at org.eclipse.emf.internal.cdo.view.CDOViewSetImpl.add(CDOViewSetImpl.java:146) at org.eclipse.emf.internal.cdo.session.CDOViewContainerImpl.initView(CDOViewContainerImpl.java:262) at org.eclipse.emf.internal.cdo.session.CDOTransactionContainerImpl.openTransaction(CDOTransactionContainerImpl.java:78) at org.eclipse.emf.internal.cdo.session.CDOTransactionContainerImpl.openTransaction(CDOTransactionContainerImpl.java:1) at org.eclipse.emf.cdo.net4j.CDONet4jViewProvider.getView(CDONet4jViewProvider.java:75) at org.eclipse.emf.internal.cdo.view.CDOViewProviderRegistryImpl.provideViewWithInfo(CDOViewProviderRegistryImpl.java:104) at org.eclipse.emf.cdo.eresource.impl.CDOResourceImpl.basicSetResourceSet(CDOResourceImpl.java:1503) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl$ResourcesEList.inverseAdd(ResourceSetImpl.java:586) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:286) at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:301) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.createResource(ResourceSetImpl.java:435) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandCreateResource(ResourceSetImpl.java:243) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:400) at org.eclipse.emf.cdo.tests.bugzilla.Bugzilla_39XXXX_Test.testResourceSetImpl(Bugzilla_39XXXX_Test.java:116) at org.eclipse.emf.cdo.tests.bugzilla.Bugzilla_39XXXX_Test.testTwiceGetCDOResourceOnResourceSetImpl(Bugzilla_39XXXX_Test.java:62) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at junit.framework.TestCase.runTest(TestCase.java:168) at org.eclipse.net4j.util.tests.AbstractOMTest.access$1(AbstractOMTest.java:1) at org.eclipse.net4j.util.tests.AbstractOMTest$2.execute(AbstractOMTest.java:259) at org.eclipse.net4j.internal.util.test.TestExecuter.execute(TestExecuter.java:40) at org.eclipse.net4j.util.tests.AbstractOMTest.runBare(AbstractOMTest.java:246) at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:594) at junit.framework.TestResult$1.protect(TestResult.java:110) at junit.framework.TestResult.runProtected(TestResult.java:128) at junit.framework.TestResult.run(TestResult.java:113) at junit.framework.TestCase.run(TestCase.java:124) at org.eclipse.net4j.util.tests.AbstractOMTest.run(AbstractOMTest.java:307) at junit.framework.TestSuite.runTest(TestSuite.java:243) at junit.framework.TestSuite.run(TestSuite.java:238) at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)	CreatedJUnit test showing the exceptionIn attachment a Junit test showing the exception.I've commited the test case but it always passes.commit 8927e12fd77288b72c3dc4928534e4f871d66093Comment onJUnit test showing the exceptionEsteban, please confirm that:1) The number of lines that you changed is smaller than 250.2) You are the only author of these changed lines.3) You apply the EPL to these changed lines.Sorry it pass because I have added "resourceSet.setURIResourceMap(new HashMap<URI, Resource>());" in Bugzilla_395999_Test.testResourceSetImpl(). Removing it the test case failed because when looking for a existing resource with a URI equals to "cdo.net4j.tcp://localhost:2036/repo1/Bugzilla_395999_Test_testTwiceGetCDOResourceOnResourceSetImpl/sharedResource?transactional=true" in ResourceSetImpl.getResource():line:373 the existing resource URI is "cdo.net4j.tcp://localhost/repo1/Bugzilla_395999_Test_testTwiceGetCDOResourceOnResourceSetImpl/sharedResource?transactional=true" then it miss the port number to have the equality true. We could have the same issue if we use connection aware URI with different query parameters.Sorry, where exactly is that call to setURIResourceMap()? Can you provide a patch against the current version of Bugzilla_395999_Test?Sorry forget the "resourceSet.setURIResourceMap(new HashMap<URI, Resource>());". But the test case failed always at home, I am on a master updated but not the test case you have commited, indeed to construct the connection aware URI you use getURIPrefix() which does not include the port number, the test failed with the TCP scenario specifying the default port number (2036) in the URI.We'll try to address open problems in 4.3 (master) first and then port fixes back to 4.2.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	9.0
id=375444	REOPENED	EMF	cdo.core	4.6	PC Linux	P3 major	Eike Stepper	2012-03-27 13:06 EDT by	Esteban DUGUEPEROUX	2016-07-31 00:55 EDT (	2 users	Build Identifier: CDO 4.0.2Having 2 CDOResources (one native and another legacy), shared by 2 clients, the second clients has the option "AutoReleaseLocksEnabled" at false, the first client create 2 fragment resources and commit, the second client during the invalidation receives exception because it has a adapter (TransactionChangeRecorder) which try to load a fragment resources.Reproducible: Always	The following exception occurs, but not always :[ERROR] Invalid URI "cdo://repo1/Bugzilla_375444_Test_testControl/legacyFragmentResource.model1": java.lang.IllegalStateException: Not active: Transaction 1 [MAIN]org.eclipse.emf.cdo.util.InvalidURIException: Invalid URI "cdo://repo1/Bugzilla_375444_Test_testControl/legacyFragmentResource.model1": java.lang.IllegalStateException: Not active: Transaction 1 [MAIN] at org.eclipse.emf.internal.cdo.view.AbstractCDOView.registerProxyResource(AbstractCDOView.java:1077) at org.eclipse.emf.cdo.eresource.impl.CDOResourceImpl.registerProxy(CDOResourceImpl.java:902) at org.eclipse.emf.cdo.eresource.impl.CDOResourceImpl.load(CDOResourceImpl.java:826) at org.eclipse.emf.cdo.eresource.impl.CDOResourceImpl.cdoInternalPreLoad(CDOResourceImpl.java:672) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$LoadTransition.execute(CDOStateMachine.java:982) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$LoadTransition.execute(CDOStateMachine.java:1) at org.eclipse.net4j.util.fsm.FiniteStateMachine.process(FiniteStateMachine.java:162) at org.eclipse.emf.internal.cdo.view.CDOStateMachine.read(CDOStateMachine.java:310) at org.eclipse.emf.internal.cdo.view.CDOStoreImpl.getRevisionForReading(CDOStoreImpl.java:688) at org.eclipse.emf.internal.cdo.view.CDOStoreImpl.isSet(CDOStoreImpl.java:208) at org.eclipse.emf.internal.cdo.CDOObjectImpl.eDynamicIsSet(CDOObjectImpl.java:553) at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eIsSet(BasicEObjectImpl.java:1263) at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eIsSet(BasicEObjectImpl.java:1247) at org.eclipse.emf.ecore.util.EContentsEList$FeatureIteratorImpl.hasNext(EContentsEList.java:407) at org.eclipse.emf.transaction.impl.TransactionChangeRecorder.setTarget(TransactionChangeRecorder.java:155) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl$EAdapterList.didAdd(BasicNotifierImpl.java:127) at org.eclipse.emf.internal.cdo.CDOObjectImpl$1.didAdd(CDOObjectImpl.java:422) at org.eclipse.emf.internal.cdo.CDOObjectImpl$1.didAdd(CDOObjectImpl.java:1) at org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:425) at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:307) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl$EAdapterList.add(BasicNotifierImpl.java:199) at org.eclipse.emf.ecore.change.util.ChangeRecorder.addAdapter(ChangeRecorder.java:700) at org.eclipse.emf.ecore.change.util.ChangeRecorder.notifyChanged(ChangeRecorder.java:319) at org.eclipse.emf.transaction.impl.TransactionChangeRecorder.notifyChanged(TransactionChangeRecorder.java:218) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:380) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification(NotifyingListImpl.java:267) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:300) at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:307) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.createResource(ResourceSetImpl.java:426) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandCreateResource(ResourceSetImpl.java:239) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:391) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getResource(AbstractCDOView.java:487) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.newResourceInstance(AbstractCDOView.java:841) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.createObject(AbstractCDOView.java:811) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getObject(AbstractCDOView.java:715) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.getObject(CDOTransactionImpl.java:1042) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.getObject(CDOTransactionImpl.java:1) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.getEObjectFromPotentialID(CDOLegacyWrapper.java:729) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.revisionToInstanceResource(CDOLegacyWrapper.java:443) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.revisionToInstance(CDOLegacyWrapper.java:395) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.cdoInternalPostInvalidate(CDOLegacyWrapper.java:289) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$InvalidateTransition.execute(CDOStateMachine.java:912) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$InvalidateTransition.execute(CDOStateMachine.java:1) at org.eclipse.net4j.util.fsm.FiniteStateMachine.process(FiniteStateMachine.java:162) at org.eclipse.emf.internal.cdo.view.CDOStateMachine.invalidate(CDOStateMachine.java:405) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.invalidate(AbstractCDOView.java:1192) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.invalidate(CDOTransactionImpl.java:2163) at org.eclipse.emf.internal.cdo.view.CDOViewImpl.doInvalidate(CDOViewImpl.java:504) at org.eclipse.emf.internal.cdo.view.CDOViewImpl$InvalidationRunnable.run(CDOViewImpl.java:1241) at org.eclipse.net4j.util.concurrent.QueueRunner.work(QueueRunner.java:26) at org.eclipse.net4j.util.concurrent.QueueRunner.work(QueueRunner.java:1) at org.eclipse.net4j.util.concurrent.QueueWorker.doWork(QueueWorker.java:81) at org.eclipse.net4j.util.concurrent.QueueWorker.work(QueueWorker.java:72) at org.eclipse.net4j.util.concurrent.Worker$WorkerThread.run(Worker.java:206)Caused by: java.lang.IllegalStateException: Not active: Transaction 1 [MAIN] at org.eclipse.net4j.util.lifecycle.LifecycleUtil.checkActive(LifecycleUtil.java:72) at org.eclipse.net4j.util.lifecycle.Lifecycle.checkActive(Lifecycle.java:190) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.createResourcesQuery(AbstractCDOView.java:540) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getRootOrTopLevelResourceNodeID(AbstractCDOView.java:427) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.getRootOrTopLevelResourceNodeID(CDOTransactionImpl.java:999) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getResourceNodeID(AbstractCDOView.java:392) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getResourceNodeIDChecked(AbstractCDOView.java:359) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getResourceNodeID(AbstractCDOView.java:347) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.registerProxyResource(AbstractCDOView.java:1066) ... 53 more[ERROR] org.eclipse.emf.ecore.resource.Resource$IOWrappedException: Invalid URI "cdo://repo1/Bugzilla_375444_Test_testControl/legacyFragmentResource.model1": java.lang.IllegalStateException: Not active: Transaction 1 [MAIN]org.eclipse.net4j.util.WrappedException: org.eclipse.emf.ecore.resource.Resource$IOWrappedException: Invalid URI "cdo://repo1/Bugzilla_375444_Test_testControl/legacyFragmentResource.model1": java.lang.IllegalStateException: Not active: Transaction 1 [MAIN] at org.eclipse.net4j.util.WrappedException.wrap(WrappedException.java:51) at org.eclipse.emf.cdo.eresource.impl.CDOResourceImpl.cdoInternalPreLoad(CDOResourceImpl.java:676) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$LoadTransition.execute(CDOStateMachine.java:982) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$LoadTransition.execute(CDOStateMachine.java:1) at org.eclipse.net4j.util.fsm.FiniteStateMachine.process(FiniteStateMachine.java:162) at org.eclipse.emf.internal.cdo.view.CDOStateMachine.read(CDOStateMachine.java:310) at org.eclipse.emf.internal.cdo.view.CDOStoreImpl.getRevisionForReading(CDOStoreImpl.java:688) at org.eclipse.emf.internal.cdo.view.CDOStoreImpl.isSet(CDOStoreImpl.java:208) at org.eclipse.emf.internal.cdo.CDOObjectImpl.eDynamicIsSet(CDOObjectImpl.java:553) at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eIsSet(BasicEObjectImpl.java:1263) at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eIsSet(BasicEObjectImpl.java:1247) at org.eclipse.emf.ecore.util.EContentsEList$FeatureIteratorImpl.hasNext(EContentsEList.java:407) at org.eclipse.emf.transaction.impl.TransactionChangeRecorder.setTarget(TransactionChangeRecorder.java:155) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl$EAdapterList.didAdd(BasicNotifierImpl.java:127) at org.eclipse.emf.internal.cdo.CDOObjectImpl$1.didAdd(CDOObjectImpl.java:422) at org.eclipse.emf.internal.cdo.CDOObjectImpl$1.didAdd(CDOObjectImpl.java:1) at org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:425) at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:307) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl$EAdapterList.add(BasicNotifierImpl.java:199) at org.eclipse.emf.ecore.change.util.ChangeRecorder.addAdapter(ChangeRecorder.java:700) at org.eclipse.emf.ecore.change.util.ChangeRecorder.notifyChanged(ChangeRecorder.java:319) at org.eclipse.emf.transaction.impl.TransactionChangeRecorder.notifyChanged(TransactionChangeRecorder.java:218) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:380) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification(NotifyingListImpl.java:267) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:300) at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:307) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.createResource(ResourceSetImpl.java:426) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandCreateResource(ResourceSetImpl.java:239) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:391) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getResource(AbstractCDOView.java:487) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.newResourceInstance(AbstractCDOView.java:841) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.createObject(AbstractCDOView.java:811) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getObject(AbstractCDOView.java:715) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.getObject(CDOTransactionImpl.java:1042) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.getObject(CDOTransactionImpl.java:1) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.getEObjectFromPotentialID(CDOLegacyWrapper.java:729) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.revisionToInstanceResource(CDOLegacyWrapper.java:443) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.revisionToInstance(CDOLegacyWrapper.java:395) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.cdoInternalPostInvalidate(CDOLegacyWrapper.java:289) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$InvalidateTransition.execute(CDOStateMachine.java:912) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$InvalidateTransition.execute(CDOStateMachine.java:1) at org.eclipse.net4j.util.fsm.FiniteStateMachine.process(FiniteStateMachine.java:162) at org.eclipse.emf.internal.cdo.view.CDOStateMachine.invalidate(CDOStateMachine.java:405) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.invalidate(AbstractCDOView.java:1192) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.invalidate(CDOTransactionImpl.java:2163) at org.eclipse.emf.internal.cdo.view.CDOViewImpl.doInvalidate(CDOViewImpl.java:504) at org.eclipse.emf.internal.cdo.view.CDOViewImpl$InvalidationRunnable.run(CDOViewImpl.java:1241) at org.eclipse.net4j.util.concurrent.QueueRunner.work(QueueRunner.java:26) at org.eclipse.net4j.util.concurrent.QueueRunner.work(QueueRunner.java:1) at org.eclipse.net4j.util.concurrent.QueueWorker.doWork(QueueWorker.java:81) at org.eclipse.net4j.util.concurrent.QueueWorker.work(QueueWorker.java:72)CreatedA Test case to reproduceIn attachment, a test case to reproduce the exception and at the end a assert on the added fragment resources.Get also the exception some times, on master branch.The exception doesn't occurs if AutoReleaseLocksEnabled option is at true.CreatedUpdated release of the JUnit testA updated release of the JUnit test using only legacy resource.At remote user, the invalidation step invalidate each changedObjects, in our case the invalidation thread have 2 changedObjects BaseObject, which has been moved from a existing resource to a new one, and CDOResourceFolder, which contains all the created resources. I observed that when the BaseObject is invalidated before the CDOResourceFolder, CDOLegacyWrapper.revisionToInstanceResource() is called which try to resolve the resource containing the BaseObject (the new resource one) using its CDOID using CDOView.getObject(CDOID,boolean), with this new resource resolution the AbstractCDOView.registerProxyResource() is called to assign a CDOID to this new resource, for that getResourceNodeID() is called but in AbstractCDOView.getLocalRevision(CDOID), as the CDOResourceFolder in which this new added resource is not yet invalidated (state CLEAN instead of PROXY) then a local revision is returned instead of a new one fetched from the CDO server, finally from this legacy CDORevision the new added resources can't be retreived.I have attached a possible fix to avoid this exception which consists in invalidating changed CDOResourceFolders before other changedObjects.CreatedA proposed fix.CreatedThe last release of the JUnit test (I hope :)I found out that the test cases passes in all scenarios in the master branch. It seems that the fix tois the reason. After porting it back to 4.0 the test case passes there, too.Ported from 4.1 viacommit 04a3e95816bbc31bc01fca8d53ce69679e9262d6The fix is very different from the patch you've attached. Please verify that it properly addresses *all* your respective problems and reopen if necessary.Hi,Indeed the fix offix also our issues on our product.Thanks.Removing the test case because it fails in all scenarios and it's overly complex.commit bdcd537febaf76681e369172cec3454b63432e11commit 367e61ae7a32dc66e306a895c19822ddacd808ef (master)In fact no, the fix ofdoesn't fix the initial exception and the assertion fails always, in addition we have some NPE : java.lang.NullPointerException at org.eclipse.emf.internal.cdo.view.AbstractCDOView.removeObject(AbstractCDOView.java:792) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.deregisterObject(AbstractCDOView.java:1120) at org.eclipse.emf.internal.cdo.view.CDOViewSetImpl.deregisterResources(CDOViewSetImpl.java:292) at org.eclipse.emf.internal.cdo.view.CDOViewSetImpl.notifyChanged(CDOViewSetImpl.java:259) at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:380) at org.eclipse.emf.common.notify.impl.NotificationChainImpl.dispatch(NotificationChainImpl.java:104) at org.eclipse.emf.common.notify.impl.NotificationChainImpl.dispatch(NotificationChainImpl.java:92) at org.eclipse.emf.common.notify.impl.NotifyingListImpl.remove(NotifyingListImpl.java:724) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getResource(AbstractCDOView.java:491) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.newResourceInstance(AbstractCDOView.java:851) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.createObject(AbstractCDOView.java:821) at org.eclipse.emf.internal.cdo.view.AbstractCDOView.getObject(AbstractCDOView.java:725) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.getObject(CDOTransactionImpl.java:880) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.getObject(CDOTransactionImpl.java:1) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.getEObjectFromPotentialID(CDOLegacyWrapper.java:735) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.revisionToInstanceResource(CDOLegacyWrapper.java:449) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.revisionToInstance(CDOLegacyWrapper.java:401) at org.eclipse.emf.internal.cdo.object.CDOLegacyWrapper.cdoInternalPostInvalidate(CDOLegacyWrapper.java:295) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$InvalidateTransition.execute(CDOStateMachine.java:806) at org.eclipse.emf.internal.cdo.view.CDOStateMachine$InvalidateTransition.execute(CDOStateMachine.java:1) at org.eclipse.net4j.util.fsm.FiniteStateMachine.process(FiniteStateMachine.java:162)I have changed the test case to use the AbstractCDOTest.commitAndSync() method which is better than my waitRemoteChanges() method.CreatedA updated release of the test case using the commitAndSync() method.With this last test case release, I reproduce also on master.Moving all open bug reports to 4.1 because the release is very near and it's hghly unlikely that there will be spare time to address 4.0 problems.Please make sure that your patches can be applied against the master branch and that your problem is not already fixed there!!!Moving all open issues to 4.2. Open bugs can be ported to 4.1 maintenance after they've been fixed in master.We'll try to address open problems in 4.3 (master) first and then port fixes back to 4.2.Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	22.0
id=416215	REOPENED	EMF	cdo.db	4.6	PC Windows 7	P3 normal	Eike Stepper	2013-08-30 04:08 EDT by	Eike Stepper	2016-07-31 01:03 EDT (	1 user	The following method: protected Object getDefaultValue() { EEnum eenum = (EEnum)getFeature().getEType(); String defaultValueLiteral = getFeature().getDefaultValueLiteral(); if (defaultValueLiteral != null) { EEnumLiteral literal = eenum.getEEnumLiteralByLiteral(defaultValueLiteral); return literal.getValue(); } Enumerator enumerator = (Enumerator)eenum.getDefaultValue(); return enumerator.getValue(); }Should just be: protected Object getDefaultValue() { return getFeature().getDefaultValue(); }	commit 4ffb447b4057a6e7387ae9458388e6de7a55e4deThat was too quick. Lots of tests fail ;-(Reverting...commit 03cfaa273b296b33420bac00d4afdf7f6db7b5deorg.eclipse.emf.cdo.tests.config.impl.ConfigTestException: Error in AttributeTest.testEnumDefaults [Combined, H2, JVM, Native] at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:603) at junit.framework.TestResult$1.protect(TestResult.java:122) at junit.framework.TestResult.runProtected(TestResult.java:142) at junit.framework.TestResult.run(TestResult.java:125) at junit.framework.TestCase.run(TestCase.java:129) at org.eclipse.net4j.util.tests.AbstractOMTest.run(AbstractOMTest.java:324) at junit.framework.TestSuite.runTest(TestSuite.java:255) at org.eclipse.emf.cdo.tests.config.impl.ConfigTestSuite$TestWrapper.runTest(ConfigTestSuite.java:188) at junit.framework.TestSuite.run(TestSuite.java:250) at junit.framework.TestSuite.runTest(TestSuite.java:255) at junit.framework.TestSuite.run(TestSuite.java:250) at junit.framework.TestSuite.runTest(TestSuite.java:255) at junit.framework.TestSuite.run(TestSuite.java:250) at org.eclipse.emf.cdo.tests.config.impl.ConfigTestSuite$MainSuite.run(ConfigTestSuite.java:148) at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:131) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)Caused by: org.eclipse.emf.cdo.util.CommitException: Rollback in DBStore: org.eclipse.net4j.db.DBException: org.h2.jdbc.JdbcSQLException: Data conversion error converting "aced00057e7200246f72672e65636c697073652e656d662e63646f2e74657374732e6d6f64656c312e56415400000000000000001200007872000e6a6176612e6c616e672e456e756d000000000000000012000078707400055641543135" [22018-168] at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalNonAuditClassMapping.writeValues(HorizontalNonAuditClassMapping.java:267) at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.AbstractHorizontalClassMapping.writeRevision(AbstractHorizontalClassMapping.java:515) at org.eclipse.emf.cdo.server.internal.db.DBStoreAccessor.writeRevision(DBStoreAccessor.java:588) at org.eclipse.emf.cdo.server.internal.db.DBStoreAccessor.writeRevisions(DBStoreAccessor.java:568) at org.eclipse.emf.cdo.spi.server.StoreAccessor.doWrite(StoreAccessor.java:98) at org.eclipse.emf.cdo.spi.server.StoreAccessorBase.write(StoreAccessorBase.java:150) at org.eclipse.emf.cdo.internal.server.TransactionCommitContext.write(TransactionCommitContext.java:612) at org.eclipse.emf.cdo.spi.server.InternalCommitContext$1.runLoop(InternalCommitContext.java:46) at org.eclipse.emf.cdo.spi.server.InternalCommitContext$1.runLoop(InternalCommitContext.java:1) at org.eclipse.net4j.util.om.monitor.ProgressDistributor.run(ProgressDistributor.java:96) at org.eclipse.emf.cdo.internal.server.Repository.commitUnsynced(Repository.java:993) at org.eclipse.emf.cdo.internal.server.Repository.commit(Repository.java:986) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CommitTransactionIndication.indicatingCommit(CommitTransactionIndication.java:315) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CommitTransactionIndication.indicating(CommitTransactionIndication.java:100) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CDOServerIndicationWithMonitoring.indicating(CDOServerIndicationWithMonitoring.java:110) at org.eclipse.net4j.signal.IndicationWithMonitoring.indicating(IndicationWithMonitoring.java:87) at org.eclipse.net4j.signal.IndicationWithResponse.doExtendedInput(IndicationWithResponse.java:92) at org.eclipse.net4j.signal.Signal.doInput(Signal.java:328) at org.eclipse.net4j.signal.IndicationWithResponse.execute(IndicationWithResponse.java:65) at org.eclipse.net4j.signal.IndicationWithMonitoring.execute(IndicationWithMonitoring.java:66) at org.eclipse.net4j.signal.Signal.runSync(Signal.java:253) at org.eclipse.net4j.signal.Signal.run(Signal.java:149) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:724)Caused by: org.h2.jdbc.JdbcSQLException: Data conversion error converting "aced00057e7200246f72672e65636c697073652e656d662e63646f2e74657374732e6d6f64656c312e56415400000000000000001200007872000e6a6176612e6c616e672e456e756d000000000000000012000078707400055641543135" [22018-168] at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) at org.h2.message.DbException.get(DbException.java:158) at org.h2.value.Value.convertTo(Value.java:852) at org.h2.jdbc.JdbcPreparedStatement.setObject(JdbcPreparedStatement.java:466) at org.eclipse.net4j.db.jdbc.DelegatingPreparedStatement.setObject(DelegatingPreparedStatement.java:257) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.doSetValue(AbstractTypeMapping.java:254) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setValue(AbstractTypeMapping.java:148) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setDefaultValue(AbstractTypeMapping.java:111) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setValue(AbstractTypeMapping.java:143) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setValueFromRevision(AbstractTypeMapping.java:106) at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalNonAuditClassMapping.writeValues(HorizontalNonAuditClassMapping.java:247) ... 24 moreCaused by: java.lang.NumberFormatException: For input string: "aced00057e7200246f72672e65636c697073652e656d662e63646f2e74657374732e6d6f64656c312e56415400000000000000001200007872000e6a6176612e6c616e672e456e756d000000000000000012000078707400055641543135" at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) at java.lang.Integer.parseInt(Integer.java:492) at java.lang.Integer.parseInt(Integer.java:527) at org.h2.value.Value.convertTo(Value.java:809) ... 32 more at org.eclipse.emf.internal.cdo.transaction.CDOSingleTransactionStrategyImpl.commit(CDOSingleTransactionStrategyImpl.java:95) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.commitSynced(CDOTransactionImpl.java:1214) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.commit(CDOTransactionImpl.java:1183) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.commit(CDOTransactionImpl.java:1175) at org.eclipse.emf.cdo.tests.AttributeTest.testEnumDefaults(AttributeTest.java:93) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at junit.framework.TestCase.runTest(TestCase.java:176) at org.eclipse.net4j.util.tests.AbstractOMTest.access$1(AbstractOMTest.java:1) at org.eclipse.net4j.util.tests.AbstractOMTest$2.execute(AbstractOMTest.java:270) at org.eclipse.net4j.internal.util.test.TestExecuter.execute(TestExecuter.java:40) at org.eclipse.net4j.util.tests.AbstractOMTest.runBare(AbstractOMTest.java:257) at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:594) ... 19 moreorg.eclipse.emf.cdo.tests.config.impl.ConfigTestException: Error in DBAnnotationsTest.testLengthAnnotationPositive [Combined, H2, JVM, Native] at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:603) at junit.framework.TestResult$1.protect(TestResult.java:122) at junit.framework.TestResult.runProtected(TestResult.java:142) at junit.framework.TestResult.run(TestResult.java:125) at junit.framework.TestCase.run(TestCase.java:129) at org.eclipse.net4j.util.tests.AbstractOMTest.run(AbstractOMTest.java:324) at junit.framework.TestSuite.runTest(TestSuite.java:255) at org.eclipse.emf.cdo.tests.config.impl.ConfigTestSuite$TestWrapper.runTest(ConfigTestSuite.java:188) at junit.framework.TestSuite.run(TestSuite.java:250) at junit.framework.TestSuite.runTest(TestSuite.java:255) at junit.framework.TestSuite.run(TestSuite.java:250) at junit.framework.TestSuite.runTest(TestSuite.java:255) at junit.framework.TestSuite.run(TestSuite.java:250) at org.eclipse.emf.cdo.tests.config.impl.ConfigTestSuite$MainSuite.run(ConfigTestSuite.java:148) at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:131) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)Caused by: org.eclipse.emf.cdo.util.CommitException: Rollback in DBStore: org.eclipse.net4j.db.DBException: org.h2.jdbc.JdbcSQLException: Serialization failed, cause: "java.io.NotSerializableException: org.eclipse.emf.ecore.impl.EEnumLiteralImpl" [90026-168] at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalNonAuditClassMapping.writeValues(HorizontalNonAuditClassMapping.java:267) at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.AbstractHorizontalClassMapping.writeRevision(AbstractHorizontalClassMapping.java:515) at org.eclipse.emf.cdo.server.internal.db.DBStoreAccessor.writeRevision(DBStoreAccessor.java:588) at org.eclipse.emf.cdo.server.internal.db.DBStoreAccessor.writeRevisions(DBStoreAccessor.java:568) at org.eclipse.emf.cdo.spi.server.StoreAccessor.doWrite(StoreAccessor.java:98) at org.eclipse.emf.cdo.spi.server.StoreAccessorBase.write(StoreAccessorBase.java:150) at org.eclipse.emf.cdo.internal.server.TransactionCommitContext.write(TransactionCommitContext.java:612) at org.eclipse.emf.cdo.spi.server.InternalCommitContext$1.runLoop(InternalCommitContext.java:46) at org.eclipse.emf.cdo.spi.server.InternalCommitContext$1.runLoop(InternalCommitContext.java:1) at org.eclipse.net4j.util.om.monitor.ProgressDistributor.run(ProgressDistributor.java:96) at org.eclipse.emf.cdo.internal.server.Repository.commitUnsynced(Repository.java:993) at org.eclipse.emf.cdo.internal.server.Repository.commit(Repository.java:986) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CommitTransactionIndication.indicatingCommit(CommitTransactionIndication.java:315) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CommitTransactionIndication.indicating(CommitTransactionIndication.java:100) at org.eclipse.emf.cdo.server.internal.net4j.protocol.CDOServerIndicationWithMonitoring.indicating(CDOServerIndicationWithMonitoring.java:110) at org.eclipse.net4j.signal.IndicationWithMonitoring.indicating(IndicationWithMonitoring.java:87) at org.eclipse.net4j.signal.IndicationWithResponse.doExtendedInput(IndicationWithResponse.java:92) at org.eclipse.net4j.signal.Signal.doInput(Signal.java:328) at org.eclipse.net4j.signal.IndicationWithResponse.execute(IndicationWithResponse.java:65) at org.eclipse.net4j.signal.IndicationWithMonitoring.execute(IndicationWithMonitoring.java:66) at org.eclipse.net4j.signal.Signal.runSync(Signal.java:253) at org.eclipse.net4j.signal.Signal.run(Signal.java:149) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:724)Caused by: org.h2.jdbc.JdbcSQLException: Serialization failed, cause: "java.io.NotSerializableException: org.eclipse.emf.ecore.impl.EEnumLiteralImpl" [90026-168] at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) at org.h2.message.DbException.get(DbException.java:158) at org.h2.util.Utils.serialize(Utils.java:260) at org.h2.value.ValueJavaObject.getNoCopy(ValueJavaObject.java:42) at org.h2.value.DataType.convertToValue(DataType.java:941) at org.h2.jdbc.JdbcPreparedStatement.setObject(JdbcPreparedStatement.java:465) at org.eclipse.net4j.db.jdbc.DelegatingPreparedStatement.setObject(DelegatingPreparedStatement.java:257) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.doSetValue(AbstractTypeMapping.java:254) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setValue(AbstractTypeMapping.java:148) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setDefaultValue(AbstractTypeMapping.java:111) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setValue(AbstractTypeMapping.java:143) at org.eclipse.emf.cdo.server.db.mapping.AbstractTypeMapping.setValueFromRevision(AbstractTypeMapping.java:106) at org.eclipse.emf.cdo.server.internal.db.mapping.horizontal.HorizontalNonAuditClassMapping.writeValues(HorizontalNonAuditClassMapping.java:247) ... 24 moreCaused by: java.io.NotSerializableException: org.eclipse.emf.ecore.impl.EEnumLiteralImpl at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1181) at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:347) at org.h2.util.Utils.serialize(Utils.java:257) ... 34 more at org.eclipse.emf.internal.cdo.transaction.CDOSingleTransactionStrategyImpl.commit(CDOSingleTransactionStrategyImpl.java:95) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.commitSynced(CDOTransactionImpl.java:1214) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.commit(CDOTransactionImpl.java:1183) at org.eclipse.emf.internal.cdo.transaction.CDOTransactionImpl.commit(CDOTransactionImpl.java:1175) at org.eclipse.emf.cdo.tests.db.DBAnnotationsTest.testLengthAnnotationPositive(DBAnnotationsTest.java:68) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at junit.framework.TestCase.runTest(TestCase.java:176) at org.eclipse.net4j.util.tests.AbstractOMTest.access$1(AbstractOMTest.java:1) at org.eclipse.net4j.util.tests.AbstractOMTest$2.execute(AbstractOMTest.java:270) at org.eclipse.net4j.internal.util.test.TestExecuter.execute(TestExecuter.java:40) at org.eclipse.net4j.util.tests.AbstractOMTest.runBare(AbstractOMTest.java:257) at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:594) ... 19 moreMoving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	7.0
id=403696	REOPENED	EMF	cdo.core	4.6	PC Linux	P3 enhancement	Eike Stepper	2013-03-18 19:02 EDT by	Lothar Werzinger	2016-07-31 00:55 EDT (	2 users	CreatedPatch implementing the enhancementThe speed to compare EMF models with the CDO EMF Compare API can be drastically increased for large models if CDO provides specialized EqualityHelperFactory and FeatureFilter implementations that don't need to do a full content comparison of the involved model objects.Legal notice:1) I confirm that the number of lines added/changed is smaller than 250.2) I am the sole author of the patch and developed the code from scratch, without referencing any 3rd party materials except material licensed under theEPL.3) I am authorized by my employer to make this contribution under the EPL. I am hereby releasing these changed lines under EPL.	Please note, that since bugobj1.cdoID().equals(obj2.cdoID()) can be optimized to obj1.cdoID() == obj2.cdoID().More important:1) In your EqualityHelper you first check for ID equality, which makes sense. But then you also check for revision equality which boils down to getID() == that.getID() && getVersion() == that.getVersion() && getBranch() == that.getBranch(). I think that's plain wrong because you wouldn't match two different revisions of the same object, which is the whole purpose of compare in CDO. Or am I totally misunderstanding the purpose of IEqualityHelper?2) In CDOFeatureFilter you repeat the match test (ID equality). That seems redundant to me, given that the Compare framework must already have checked that during the match phase. In addition I can't see the benefit of calling CDORevision.compare(CDORevision). Why do you think that this is better than just leaving it to EMF Compare?According to Mikael EqualityHelper.matchingAttributeValues(Object, Object) is only called for non-EObjects, so specializing it for CDOObject seems pointless. Same is true for matchingValues(). Mikael also agrees with me in that the CDOFeatureFilter is pointless for the reason in.I close this bug as WONTFIX, but please feel free to reopen if you can provide counter arguments ;-)CreatedPatch v2Some changes nevertheless, in case we need to reopen this bug...I don't know about CDO itself, I'll just record here some of the key points :IEqualityHelper is used throughout the whole comparison process, from the match to the merge. Anything that can make the equality test faster between two known objects here will have a huge impact (any implementation error/misunderstanding too). I believe that the test you have in patch2 would make a difference, except if the default implementation's set of if/else makes something similar to your "id1 == id2" test (though you should still call "super" in case the passed objects are not CDO objects)."matchingAttributeValues" is only used for attributes, but you never know: attributes might have a data type which "instanceTypeName" is set to EObject ... or FeatureMaps. In such cases, the default implementation falls back to "matchingEObjects", so your patch should catch these. In other words : both matchingValues() and matchingAttributeValues() will delegate to your overriden matchingEObjects if they encounter EObjects.As for the FeatureFilter, its scope is a lot less than the IEqualityHelper, as it only influences the differencing phase. Its goal is to allow EMF Compare to ignore some references when checking for diffs: derived or transient features for example. Ignoring a references improves the comparison time, but you need to be sure this feature _can_ be ignored. For example, it is probably safe to say that if the feature is not set in both left and right, it is useless to check it. Lothar's patch to ignore all features of elements that have the same ID and revision seems legitimate to me.I don't know what CDORevision.compare() does, but this explanation might help you determine if it is better than EMF Compare's default implementation. Especially : are you sure that CDORevision.compare() will not return some references that should be ignored? transient, derived, container references are ignored by default, as well as the "strange" mutually-derived references that are eGenericSuperTypes and eGenericType...Thank you Laurent for the detailed explanation! It helps a lot ;-)I doubt that I manage to address this enhancement request for M6, though.(In reply to)My tests found out that EMF compare does full content compares if not specialized. Looking at the default implementation of EqualityHelper it has some specializations, but if they are not used falls back to calling Object.equals()AFAIK a CDO object is only truly equal if both CDOID and Revision match.Maybe, the feature filter reduces the amount of features considered for creating the diffs and to be sure I check that I only use the specialization of an empty list when I am sure that the objects are identical.As far as I understand EMF Compare only finds out which objects are to be compared to each other in the match phase.In later phases these objects are compared to each other with the help of the EqualityHelper and FeatureFilter to create the actual differences.This is especially slow in our case, as EMF compare prepares to compare all objects in the containment hierarchy where a match was found. In our case the top level object in the containment hierarchy contains a lot of large lists and EMF compare can take easily minutes to complete.With the attached patch EMF compare will only compare the features that CDO knows have changed. This is a huge improvement, as all other features (that might be large lists) are skipped. In our case the time dropped from several minutes to seconds.I don't know if EMF compare has a means to specialize comparing a reference feature that is an EList, but if CDO knows a shorter way to get to the changes in an EList that traversing it and comparing it and comparing it object by object, that could lead to yet another speed gain.I can only recommend considering the enhancement, as it makes a huge difference for (at least some) large models.CreatedFirst stab at a customized CDO diff engineI started working on a customized CDO diff engine that has optimized multi value reference compares. It's incomplete (handles not all kinds of CDOFeatureDelta and only two way compares), but I am attaching it here now to spur the discussion.CreatedImplemented CDODiffEngine, CDOEqualityHelperFactory and CDOFeatureFilterHere's the test output from the unit test in the attached patch.When LIST_ITERATIONS is increased even more impressive ratios can be observed, but the run time of the unit test becomes impractical. It's borderline impractical as it is.*******************************************************CDODiffEngineTest.testDiffEngineAddAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 26124ms, comparison2 2 diffs 377ms, ratio 69.294430------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineAddInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 28427ms, comparison2 2 diffs 44ms, ratio 646.068182------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineClear [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2000 diffs 14120ms, comparison2 2000 diffs 267ms, ratio 52.883895------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 4 diffs 28009ms, comparison2 4 diffs 148ms, ratio 189.250000------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 4 diffs 28065ms, comparison2 4 diffs 47ms, ratio 597.127660------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetWholeList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 4000 diffs 16579ms, comparison2 4000 diffs 567ms, ratio 29.239859------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineDeleteAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 26804ms, comparison2 2 diffs 49ms, ratio 547.020408------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineDeleteInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 28082ms, comparison2 2 diffs 50ms, ratio 561.640000------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineMove [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 31760ms, comparison2 2 diffs 50ms, ratio 635.200000------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineModifyInsideList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 27970ms, comparison2 2 diffs 45ms, ratio 621.555556------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineModifyOutsideList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 1 diffs 27036ms, comparison2 1 diffs 38ms, ratio 711.473684------------------------- END -------------------------At the end of the day, it will be Eike's decision, but here are my thoughts after glancing over the proposed patch.Though implementing specialized equality helper and feature filter for CDO is a nice addition, I believe that trying to reimplement the comparison (CDODiffEngine) is a sufficiently hard endeavour to avoid doing it: remember that Eike will have to maintain it ;).The figures you give here _are_ impressive, but they are also somewhat biased: you did not consider the ordering of reference values in your implementation, which is one of the time sinks of the diff engine. If I am not mistaken, there should be far less of a difference if you compare the times of:- using compare with your specialized implementations of the IEqualityHelper and FeatureFilter on one side,- using compare with specialized IEqualityHelper, FeatureFilter and DiffEngine on the other side.Is reimplementing the diff engine offering a great enough difference to justify the implementation and maintenance cost?(In reply to)I can't speak for Eike, but the current implementation is very straight forward and produces the _same_ diffs that EMF compare does, and the test verifies that.Actually the current test only uses ordering, but the un-ordered case is easy to implement. I will be attaching an updated patch soon.And the figures get even more impressive if the list size grows.I ran a test with a list size of 20,000 instead of 2,000 but I had to abort it after several hours, as I needed my computer for something else.Here are the figures, that did get produced:*******************************************************CDODiffEngineTest.testDiffEngineAddAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 3359115ms, comparison2 2 diffs 1082ms, ratio 3104.542514------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineAddInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 2 diffs 3590420ms, comparison2 2 diffs 582ms, ratio 6169.106529------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineClear [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 20000 diffs 1818266ms, comparison2 20000 diffs 1193ms, ratio 1524.112322------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 4 diffs 3572909ms, comparison2 4 diffs 392ms, ratio 9114.563776------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 4 diffs 3604095ms, comparison2 4 diffs 591ms, ratio 6098.299492------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetWholeList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1 40000 diffs 3507351ms, comparison2 40000 diffs 26449ms, ratio 132.608076------------------------- END -------------------------Given the figures I see I would say yes. Ultimately Eike needs to decide that.CreatedUpdated patch that implements CDODiffEngine, CDOEqualityHelperFactory and CDOFeatureFilterThe updated patch has test cases for moves in un-ordered lists (actually the test instructs EMF Compare to treat an ordered list as un-ordered) and moved across list (which interestingly fail inside EMF Compare code and not inside the new customization).The tests now also print some statistics about the diffs found.java.lang.NullPointerException at org.eclipse.emf.compare.utils.ReferenceUtil.safeEGet(ReferenceUtil.java:88) at org.eclipse.emf.compare.diff.DefaultDiffEngine.computeSingleValuedReferenceDifferencesTwoWay(DefaultDiffEngine.java:881) at org.eclipse.emf.compare.diff.DefaultDiffEngine.computeDifferences(DefaultDiffEngine.java:493) at org.eclipse.emf.compare.diff.DefaultDiffEngine.checkForDifferences(DefaultDiffEngine.java:146) at org.eclipse.emf.compare.diff.DefaultDiffEngine.checkForDifferences(DefaultDiffEngine.java:157) at org.eclipse.emf.compare.diff.DefaultDiffEngine.diff(DefaultDiffEngine.java:124) at org.eclipse.emf.compare.EMFCompare.compare(EMFCompare.java:170)*******************************************************CDODiffEngineTest.testDiffEngineAddAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 2 diffs, 2 adds, 0 deletes, 0 moves, 0 changescomparison2: 2 diffs, 2 adds, 0 deletes, 0 moves, 0 changescomparison1 26721ms, comparison2 393ms, ratio 67.992366------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineAddInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 2 diffs, 2 adds, 0 deletes, 0 moves, 0 changescomparison2: 2 diffs, 2 adds, 0 deletes, 0 moves, 0 changescomparison1 30359ms, comparison2 122ms, ratio 248.844262------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineClear [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 2000 diffs, 0 adds, 2000 deletes, 0 moves, 0 changescomparison2: 2000 diffs, 0 adds, 2000 deletes, 0 moves, 0 changescomparison1 14976ms, comparison2 236ms, ratio 63.457627------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 4 diffs, 2 adds, 2 deletes, 0 moves, 0 changescomparison2: 4 diffs, 2 adds, 2 deletes, 0 moves, 0 changescomparison1 30320ms, comparison2 50ms, ratio 606.400000------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 4 diffs, 2 adds, 2 deletes, 0 moves, 0 changescomparison2: 4 diffs, 2 adds, 2 deletes, 0 moves, 0 changescomparison1 29965ms, comparison2 47ms, ratio 637.553191------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineSetWholeList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 4000 diffs, 2000 adds, 2000 deletes, 0 moves, 0 changescomparison2: 4000 diffs, 2000 adds, 2000 deletes, 0 moves, 0 changescomparison1 17833ms, comparison2 675ms, ratio 26.419259------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineDeleteAtEnd [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 2 diffs, 0 adds, 2 deletes, 0 moves, 0 changescomparison2: 2 diffs, 0 adds, 2 deletes, 0 moves, 0 changescomparison1 29648ms, comparison2 43ms, ratio 689.488372------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineDeleteInMiddle [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 2 diffs, 0 adds, 2 deletes, 0 moves, 0 changescomparison2: 2 diffs, 0 adds, 2 deletes, 0 moves, 0 changescomparison1 32128ms, comparison2 43ms, ratio 747.162791------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineMove [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 2 diffs, 0 adds, 0 deletes, 2 moves, 0 changescomparison2: 2 diffs, 0 adds, 0 deletes, 2 moves, 0 changescomparison1 35064ms, comparison2 45ms, ratio 779.200000------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineMoveUnordered [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 0 diffs, 0 adds, 0 deletes, 0 moves, 0 changescomparison2: 0 diffs, 0 adds, 0 deletes, 0 moves, 0 changescomparison1 33950ms, comparison2 47ms, ratio 722.340426------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineMoveAcrossList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------------------------------- END -------------------------java.lang.NullPointerException at org.eclipse.emf.compare.utils.ReferenceUtil.safeEGet(ReferenceUtil.java:88) at org.eclipse.emf.compare.diff.DefaultDiffEngine.computeSingleValuedReferenceDifferencesTwoWay(DefaultDiffEngine.java:881) at org.eclipse.emf.compare.diff.DefaultDiffEngine.computeDifferences(DefaultDiffEngine.java:493) at org.eclipse.emf.compare.diff.DefaultDiffEngine.checkForDifferences(DefaultDiffEngine.java:146) at org.eclipse.emf.compare.diff.DefaultDiffEngine.checkForDifferences(DefaultDiffEngine.java:157) at org.eclipse.emf.compare.diff.DefaultDiffEngine.diff(DefaultDiffEngine.java:124) at org.eclipse.emf.compare.EMFCompare.compare(EMFCompare.java:170) at org.eclipse.emf.compare.EMFCompare.compare(EMFCompare.java:146) at org.eclipse.emf.cdo.compare.CDOCompare.compare(CDOCompare.java:56) at org.eclipse.emf.cdo.tests.CDODiffEngineTest.runComparison(CDODiffEngineTest.java:412) at org.eclipse.emf.cdo.tests.CDODiffEngineTest.testDiffEngineMoveAcrossList(CDODiffEngineTest.java:332) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at junit.framework.TestCase.runTest(TestCase.java:168) at org.eclipse.net4j.util.tests.AbstractOMTest.access$1(AbstractOMTest.java:1) at org.eclipse.net4j.util.tests.AbstractOMTest$2.execute(AbstractOMTest.java:259) at org.eclipse.net4j.internal.util.test.TestExecuter.execute(TestExecuter.java:40) at org.eclipse.net4j.util.tests.AbstractOMTest.runBare(AbstractOMTest.java:246) at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:594) at junit.framework.TestResult$1.protect(TestResult.java:110) at junit.framework.TestResult.runProtected(TestResult.java:128) at junit.framework.TestResult.run(TestResult.java:113) at junit.framework.TestCase.run(TestCase.java:124) at org.eclipse.net4j.util.tests.AbstractOMTest.run(AbstractOMTest.java:307) at junit.framework.TestSuite.runTest(TestSuite.java:243) at junit.framework.TestSuite.run(TestSuite.java:238) at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)*******************************************************CDODiffEngineTest.testDiffEngineMoveAcrossListUnordered [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------------------------------- END -------------------------java.lang.NullPointerException at org.eclipse.emf.compare.utils.ReferenceUtil.safeEGet(ReferenceUtil.java:88) at org.eclipse.emf.compare.diff.DefaultDiffEngine.computeSingleValuedReferenceDifferencesTwoWay(DefaultDiffEngine.java:881) at org.eclipse.emf.compare.diff.DefaultDiffEngine.computeDifferences(DefaultDiffEngine.java:493) at org.eclipse.emf.compare.diff.DefaultDiffEngine.checkForDifferences(DefaultDiffEngine.java:146) at org.eclipse.emf.compare.diff.DefaultDiffEngine.checkForDifferences(DefaultDiffEngine.java:157) at org.eclipse.emf.compare.diff.DefaultDiffEngine.diff(DefaultDiffEngine.java:124) at org.eclipse.emf.compare.EMFCompare.compare(EMFCompare.java:170) at org.eclipse.emf.compare.EMFCompare.compare(EMFCompare.java:146) at org.eclipse.emf.cdo.compare.CDOCompare.compare(CDOCompare.java:56) at org.eclipse.emf.cdo.tests.CDODiffEngineTest.runComparison(CDODiffEngineTest.java:412) at org.eclipse.emf.cdo.tests.CDODiffEngineTest.testDiffEngineMoveAcrossListUnordered(CDODiffEngineTest.java:346) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at junit.framework.TestCase.runTest(TestCase.java:168) at org.eclipse.net4j.util.tests.AbstractOMTest.access$1(AbstractOMTest.java:1) at org.eclipse.net4j.util.tests.AbstractOMTest$2.execute(AbstractOMTest.java:259) at org.eclipse.net4j.internal.util.test.TestExecuter.execute(TestExecuter.java:40) at org.eclipse.net4j.util.tests.AbstractOMTest.runBare(AbstractOMTest.java:246) at org.eclipse.emf.cdo.tests.config.impl.ConfigTest.runBare(ConfigTest.java:594) at junit.framework.TestResult$1.protect(TestResult.java:110) at junit.framework.TestResult.runProtected(TestResult.java:128) at junit.framework.TestResult.run(TestResult.java:113) at junit.framework.TestCase.run(TestCase.java:124) at org.eclipse.net4j.util.tests.AbstractOMTest.run(AbstractOMTest.java:307) at junit.framework.TestSuite.runTest(TestSuite.java:243) at junit.framework.TestSuite.run(TestSuite.java:238) at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)*******************************************************CDODiffEngineTest.testDiffEngineModifyInsideList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 2 diffs, 0 adds, 0 deletes, 0 moves, 2 changescomparison2: 2 diffs, 0 adds, 0 deletes, 0 moves, 2 changescomparison1 30081ms, comparison2 46ms, ratio 653.934783------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineModifyOutsideList [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 1 diffs, 0 adds, 0 deletes, 0 moves, 1 changescomparison2: 1 diffs, 0 adds, 0 deletes, 0 moves, 1 changescomparison1 29604ms, comparison2 40ms, ratio 740.100000------------------------- END -------------------------*******************************************************CDODiffEngineTest.testDiffEngineMixed [Combined, MEM-branching, JVM, Native]*******************************************************------------------------ START ------------------------comparison1: 6 diffs, 2 adds, 2 deletes, 2 moves, 0 changescomparison2: 6 diffs, 2 adds, 2 deletes, 2 moves, 0 changescomparison1 32967ms, comparison2 41ms, ratio 804.073171------------------------- END -------------------------CreatedRefactored patch that implements CDODiffEngine, CDOEqualityHelperFactory and CDOFeatureFilterMoving all outstanding enhancements to 4.3Moving all open enhancement requests to 4.4Moving all open enhancement requests to 4.4Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	17.0
id=404047	REOPENED	EMF	cdo.db	4.6	PC Windows 7	P3 normal	Eike Stepper	2013-03-21 11:46 EDT by	Stefan Schedl	2016-07-31 00:52 EDT (	6 users	Hi,I have a cdo repository created with the 4.1 version. I tried to update cdo to 4.2 m6 but the upgrade failed with the message:Caused by: java.lang.Exception: The field CDO_SOURCE has been constructed here: at org.eclipse.net4j.internal.db.ddl.DBField.<init>(DBField.java:88) at org.eclipse.net4j.internal.db.ddl.DBTable.addField(DBTable.java:112) at org.eclipse.net4j.spi.db.DBAdapter.readFields(DBAdapter.java:205) at org.eclipse.net4j.spi.db.DBAdapter.readSchema(DBAdapter.java:167) ... 92 moreRoot exception:org.eclipse.net4j.db.DBException: Index field is nullable: CDO_SOURCE at org.eclipse.net4j.internal.db.ddl.DBIndex.addIndexField(DBIndex.java:118) at org.eclipse.net4j.internal.db.ddl.DBIndex.<init>(DBIndex.java:56) at org.eclipse.net4j.internal.db.ddl.DBTable.addIndex(DBTable.java:209) at org.eclipse.net4j.spi.db.DBAdapter.addIndex(DBAdapter.java:303) at org.eclipse.net4j.spi.db.DBAdapter.readIndices(DBAdapter.java:271) at org.eclipse.net4j.spi.db.DBAdapter.readIndices(DBAdapter.java:227) at org.eclipse.net4j.spi.db.DBAdapter.readSchema(DBAdapter.java:168) at org.eclipse.net4j.db.DBUtil.readSchema(DBUtil.java:240) at org.eclipse.net4j.db.DBUtil.readSchema(DBUtil.java:231) at org.eclipse.net4j.spi.db.DBAdapter.readSchema(DBAdapter.java:141) at org.eclipse.net4j.internal.db.DBDatabase$1.run(DBDatabase.java:59) at org.eclipse.net4j.internal.db.DBDatabase$1.run(DBDatabase.java:1) at org.eclipse.net4j.db.DBUtil.execute(DBUtil.java:651) at org.eclipse.net4j.internal.db.DBDatabase.<init>(DBDatabase.java:55) at org.eclipse.net4j.db.DBUtil.openDatabase(DBUtil.java:173) at org.eclipse.emf.cdo.server.internal.db.DBStore.doActivate(DBStore.java:621) I think the problem came in with the commit f80f4be34da8b3290d671676c2d69c13e6180b33 AuditListTableMappingWithRangeswhere the cdo_source field is set to notNull (same for CDO_IDX)together with16aa130826e48bc33f5dbd7888f75face530e90d DBIndexwhere fields are checked if they are notNullBest RegardsStefan Schedl	I have the same problem, see forum threadI fear that a DB-specific, automatic migration of the nullable attribute of the column definitions is too much effort for me. But it seems that most DBs have never complained about the indexes on nullable columns, so I've added the runtime option "org.eclipse.net4j.db.DisableNullableCheck", which you can set to "true" to skip the new check.The easiest way to adjust your schema is to use CDOServerExporter / Importer. Is that okay for you?commit b9d58c2472e3710911c7cedf791b294e3b75ba39Okay, I'm going to investigate ways to automate the migration...As a work around I fixed-up my backup sql files with the following script.I added all the column names that created exceptions and it loads now without exceptions, but it might still miss some. This script is strictly provided as is and may eat your data.Make sure to create backups of your files before running the script#!/bin/bashcat >sedscript << @@@END@@@/CREATE TABLE/{Ns|\(CREATE TABLE.*\n.*\`id\`.*\),|\1 NOT NULL,|s|\(CREATE TABLE.*\n.*\`cdo_id\`.*\),|\1 NOT NULL,|s|\(CREATE TABLE.*\n.*\`area_id\`.*\),|\1 NOT NULL,|s|\(CREATE TABLE.*\n.*\`commit_time\`.*\),|\1 NOT NULL,|s|\(CREATE TABLE.*\n.*\`cdo_source\`.*\),|\1 NOT NULL,|s|\(CREATE TABLE.*\n.*\`name\`.*\),|\1 NOT NULL,|s|\(CREATE TABLE.*\n.*\`uri\`.*\),|\1 NOT NULL,|s|DEFAULT NULL NOT NULL|NOT NULL|s|NOT NULL NOT NULL|NOT NULL|}/object_id/{s|\(\`object_id\`.*\) DEFAULT NULL,|\1 NOT NULL,|}@@@END@@@for f in *.sql ; do echo $f sed -i -f sedscript $fdoneI fixed this on the net4j.db level:commit f9e529b18c114b639aff4510bc1313c04171199eThere's new API: org.eclipse.net4j.db.DBUtil.openDatabase(IDBAdapter, IDBConnectionProvider, String, boolean) org.eclipse.net4j.db.DBUtil.readSchema(IDBAdapter, Connection, String, boolean) And new SPI: org.eclipse.net4j.spi.db.DBAdapter.sqlModifyField(IDBField) org.eclipse.net4j.spi.db.DBAdapter.sqlModifyField(String, String, String) The internal schema version has been increased to v4 and a CDO server on v3 and below DBs now outputs:[INFO] CDO server starting[INFO] The internal schema migration has fixed the following nullable index columns:- ALTER TABLE CDO_COMMIT_INFOS ALTER COLUMN COMMIT_TIME BIGINT NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_LOBS ALTER COLUMN ID VARCHAR(64) NOT NULL- ALTER TABLE ECORE_EREFERENCE_EKEYS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EREFERENCE_EKEYS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EREFERENCE_EKEYS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EREFERENCE_EKEYS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EPARAMETERS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EOPERATION_EPARAMETERS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EPARAMETERS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EPARAMETERS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EDATATYPE_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EDATATYPE_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EDATATYPE_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EDATATYPE_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EOPERATION_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EANNOTATION_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCEFOLDER_NODES_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCEFOLDER_NODES_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCEFOLDER_NODES_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCEFOLDER_NODES_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EPACKAGE_ESUBPACKAGES_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EPACKAGE_ESUBPACKAGES_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EPACKAGE_ESUBPACKAGES_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EPACKAGE_ESUBPACKAGES_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EOPERATION_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_EGENERICSUPERTYPES_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_ECLASS_EGENERICSUPERTYPES_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_EGENERICSUPERTYPES_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_EGENERICSUPERTYPES_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_DETAILS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EANNOTATION_DETAILS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_DETAILS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_DETAILS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EREFERENCE_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EREFERENCE_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EREFERENCE_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EREFERENCE_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_OBJECTS ALTER COLUMN CDO_ID BIGINT NOT NULL- ALTER TABLE ETYPES_ANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ETYPES_ANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_EXTERNAL_REFS ALTER COLUMN ID BIGINT NOT NULL- ALTER TABLE ECORE_ECLASS_EOPERATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_ECLASS_EOPERATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_EOPERATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_EOPERATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EGENERICEXCEPTIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EOPERATION_EGENERICEXCEPTIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EGENERICEXCEPTIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EOPERATION_EGENERICEXCEPTIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_LOCK_AREAS ALTER COLUMN ID VARCHAR(255) NOT NULL- ALTER TABLE ECORE_ECLASS_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_ECLASS_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EENUM_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_DETAILS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ETYPES_ANNOTATION_DETAILS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_DETAILS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_DETAILS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_ELITERALS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EENUM_ELITERALS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_ELITERALS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_ELITERALS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_ECLASS_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_ETYPEPARAMETERS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCE_CONTENTS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCE_CONTENTS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCE_CONTENTS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ERESOURCE_CDORESOURCE_CONTENTS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EATTRIBUTE_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EATTRIBUTE_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EATTRIBUTE_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EATTRIBUTE_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_PROPERTIES ALTER COLUMN NAME VARCHAR(255) NOT NULL- ALTER TABLE ECORE_EENUMLITERAL_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EENUMLITERAL_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EENUMLITERAL_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EENUMLITERAL_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EDATATYPE_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EDATATYPE_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EDATATYPE_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EDATATYPE_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_ANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ETYPES_ANNOTATION_ANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_ANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_ANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_ESTRUCTURALFEATURES_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_ECLASS_ESTRUCTURALFEATURES_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_ESTRUCTURALFEATURES_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_ECLASS_ESTRUCTURALFEATURES_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EENUM_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EENUM_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EBOUNDS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EBOUNDS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EBOUNDS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_ETYPEPARAMETER_EBOUNDS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_PACKAGE_INFOS ALTER COLUMN URI VARCHAR(255) NOT NULL- ALTER TABLE ECORE_EPACKAGE_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EPACKAGE_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EPACKAGE_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EPACKAGE_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_PACKAGE_UNITS ALTER COLUMN ID VARCHAR(255) NOT NULL- ALTER TABLE ECORE_EPACKAGE_ECLASSIFIERS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EPACKAGE_ECLASSIFIERS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EPACKAGE_ECLASSIFIERS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EPACKAGE_ECLASSIFIERS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_LOCKS ALTER COLUMN AREA_ID VARCHAR(255) NOT NULL- ALTER TABLE CDO_LOCKS ALTER COLUMN OBJECT_ID BIGINT NOT NULL- ALTER TABLE ECORE_EFACTORY_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EFACTORY_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EFACTORY_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EFACTORY_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE CDO_BRANCHES ALTER COLUMN ID INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EANNOTATION_CONTENTS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EGENERICTYPE_ETYPEARGUMENTS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EGENERICTYPE_ETYPEARGUMENTS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EGENERICTYPE_ETYPEARGUMENTS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EGENERICTYPE_ETYPEARGUMENTS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ECORE_EPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ECORE_EPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ECORE_EPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ECORE_EPARAMETER_EANNOTATIONS_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_SOURCE BIGINT NOT NULL- ALTER TABLE ETYPES_ANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_BRANCH INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_VERSION INTEGER NOT NULL- ALTER TABLE ETYPES_ANNOTATION_REFERENCES_LIST ALTER COLUMN CDO_IDX INTEGER NOT NULL[INFO] Net4j extension starting[INFO] Net4j extension started[INFO] Security extension starting[INFO] Security extension started[INFO] CDO server startedPlease note that DBAdapter implements the "standard" SQL syntax: protected String sqlModifyField(String tableName, String fieldName, String definition) { return "ALTER TABLE " + tableName + " ALTER COLUMN " + fieldName + " " + definition; } I've already overridden this method in MYSQLAdapter and OracleAdapter: @Override protected String sqlModifyField(String tableName, String fieldName, String definition) { return "ALTER TABLE " + tableName + " MODIFY " + fieldName + " " + definition; }IMPORTANT: From the vendor docs of Derby, Hsqldb and PostgreSQL it seems that neither form is adequate! I've not overridden these cases mostly because some of them seem to require to execute multiple SQL statements in order to modifyall aspects of a column (i.e., an IDBField). If that's really true then a redesign of the sqlModifyField() methods may be required such that directly executes the statement(s) rather than just returning the SQL string.Please test this feature carefully (make backups!) and report here how it works!!!Thanks for your understanding.I tested it with CDO I-Build I20130406-1405 but it still has an error:!MESSAGE CDO server starting[ERROR] Can't call rollback when autocommit=truecom.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Can't call rollback when autocommit=true at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:532) at com.mysql.jdbc.Util.handleNewInstance(Util.java:406) at com.mysql.jdbc.Util.getInstance(Util.java:381) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926) at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4628) at org.eclipse.net4j.db.DBUtil.rollback(DBUtil.java:470) at org.eclipse.net4j.db.DBUtil.fixNullableIndexColumns(DBUtil.java:337) at org.eclipse.net4j.db.DBUtil.readSchema(DBUtil.java:277) at org.eclipse.net4j.internal.db.DBDatabase$1.run(DBDatabase.java:60) at org.eclipse.net4j.internal.db.DBDatabase$1.run(DBDatabase.java:1) at org.eclipse.net4j.db.DBUtil.execute(DBUtil.java:754) at org.eclipse.net4j.internal.db.DBDatabase.<init>(DBDatabase.java:56) at org.eclipse.net4j.db.DBUtil.openDatabase(DBUtil.java:186) at org.eclipse.emf.cdo.server.internal.db.DBStore.doActivate(DBStore.java:624) at org.eclipse.net4j.util.lifecycle.Lifecycle.internalActivate(Lifecycle.java:76) at org.eclipse.net4j.util.lifecycle.Lifecycle.activate(Lifecycle.java:162) at org.eclipse.net4j.util.lifecycle.LifecycleUtil.activate(LifecycleUtil.java:114) at org.eclipse.net4j.util.lifecycle.LifecycleUtil.activate(LifecycleUtil.java:104) at org.eclipse.emf.cdo.internal.server.Repository.doActivate(Repository.java:1874) at org.eclipse.net4j.util.lifecycle.Lifecycle.internalActivate(Lifecycle.java:76) at org.eclipse.net4j.util.lifecycle.ShareableLifecycle.internalActivate(ShareableLifecycle.java:43) at org.eclipse.net4j.util.lifecycle.Lifecycle.activate(Lifecycle.java:162) at org.eclipse.net4j.util.lifecycle.LifecycleUtil.activate(LifecycleUtil.java:114) at org.eclipse.net4j.util.lifecycle.LifecycleUtil.activate(LifecycleUtil.java:104) at org.eclipse.emf.cdo.server.CDOServerUtil.addRepository(CDOServerUtil.java:291) at org.eclipse.emf.cdo.spi.server.RepositoryConfigurator.configure(RepositoryConfigurator.java:116) at org.eclipse.emf.cdo.internal.server.bundle.CDOServerApplication.doStart(CDOServerApplication.java:61) at org.eclipse.net4j.util.om.OSGiApplication.start(OSGiApplication.java:63) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.equinox.internal.app.AnyThreadAppLauncher.run(AnyThreadAppLauncher.java:26) at java.lang.Thread.run(Thread.java:679)Please reopen thye issue. Thanks!Lothar, the rollback problem hides the first exception: catch (SQLException ex) { rollback(connection); throw new DBException(ex); }Can you please set a breakpoint on rollback(connection) and paste the value of ex.getMessage()?(In reply to)I did. Here's the exception:java.sql.SQLException: Can't call commit when autocommit=truecommit 3b76805b60dc8b72903a0c597bbbbb1c266bff0a(In reply to)Thanks! Confirmed in IDE:[INFO] CDO server starting[WARN] Detected crash of repository administration[INFO] Repaired crash of repository administration: lastObjectID=OID110, nextLocalObjectID=OID9223372036854775807, lastBranchID=0, lastCommitTime=1,364,234,706,298, lastNonLocalCommitTime=1,364,234,706,298[INFO] The internal schema migration has fixed the following nullable index columns:- ALTER TABLE CDO_PACKAGE_INFOS MODIFY URI LONG VARCHAR NOT NULL- ALTER TABLE CDO_OBJECTS MODIFY CDO_ID BIGINT NOT NULL- ALTER TABLE CDO_LOCKS MODIFY AREA_ID LONG VARCHAR NOT NULL- ALTER TABLE CDO_LOCKS MODIFY OBJECT_ID BIGINT NOT NULL- ALTER TABLE CDO_BRANCHES MODIFY ID INTEGER NOT NULL- ALTER TABLE CDO_COMMIT_INFOS MODIFY COMMIT_TIME BIGINT NOT NULL- ALTER TABLE CDO_PROPERTIES MODIFY NAME LONG VARCHAR NOT NULL[INFO] Repaired crash of repository qa_tests_marketplace: lastObjectID=OID825, nextLocalObjectID=OID9223372036854775807, lastBranchID=1, lastCommitTime=1,364,440,703,454, lastNonLocalCommitTime=1,364,440,703,454[INFO] Security extension starting[INFO] Security extension started[INFO] Net4j extension starting[INFO] Net4j extension started[INFO] CDO server startedAre you going to create an I-Build with that change soon?Excellent!Done:Available in R20130613-1157 (4.2)This bug fix causes another bug:Can the migration SQL be made sensitive to the case used for the tables?Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	17.0
id=491859	REOPENED	EMF	cdo.core	4.6	PC Windows 8	P3 major	Eike Stepper	2016-04-17 03:17 EDT by	Thorsten Schlathölter	2016-07-31 01:03 EDT (	0 users	CreatedPatched TransactionCommitContext classIf an object in a containment hierachy gets replaced the integrity check of CDO by mistake complains about a stale reference.Consider this model in which the line represent containments:SE1 - SE2 -SE3 \ \ \ SE5 \ / SE4 \ SE6Note that the containment is modelled with an individual feature with name "parent".Now SE4 is replaced by SE7. PseudoCode for replacement:SE7 = new SE();SE7.getSEChildren().addAll(SE4.getSEChildren());SE1.getSEChildren().set(indexOfSE4, SE7);->detachedObject = [SE4]dirtyObjects = [SE1, SE5, SE6]dirtyDeltas = [..., parent->ChangedToSE7, parent->ChangedToSE7]Now in the org.eclipse.emf.cdo.internal.server.TransactionCommitContext.XRefContext the following situation arises when adjustReferences is called:dirtyObjectSE5 is called with feature "parent". Feature parent still holds SE4. Since SE4 is deleted this situation is considered as "introduction of a stale reference". This is despite the fact that the relevant feature is changed in the same commit from SE4 to SE7.I have added a patched class that solves the issue. I am sure the patch must be revised, I am not sure about the isContainer check. Note again that th feature which changes is the "parent" feature which is at the same time a cointainer feature for the element. Note that there are different type of containers possible in the model.	I can't reproduce the problem with these test cases:public class Bugzilla_491859_Test extends AbstractCDOTest{ @Override public synchronized Map<String, Object> getTestProperties() { Map<String, Object> map = super.getTestProperties(); map.put(IRepository.Props.ENSURE_REFERENTIAL_INTEGRITY, "true"); return map; } public void testExchangeContainerObject() throws Exception { skipStoreWithoutQueryXRefs(); // Init CDOSession session = openSession(); CDOTransaction transaction = session.openTransaction(); CDOResource resource = transaction.createResource(getResourcePath("res")); Category category0 = getModel1Factory().createCategory(); resource.getContents().add(category0); Category category1 = getModel1Factory().createCategory(); category0.getCategories().add(category1); Category category2a = getModel1Factory().createCategory(); category1.getCategories().add(category2a); Category category2b = getModel1Factory().createCategory(); category1.getCategories().add(category2b); Category category2c = getModel1Factory().createCategory(); category1.getCategories().add(category2c); transaction.commit(); // Test Category categoryNew = getModel1Factory().createCategory(); categoryNew.getCategories().addAll(category1.getCategories()); category0.getCategories().set(0, categoryNew); transaction.commit(); } @Skips(IModelConfig.CAPABILITY_LEGACY) public void testExchangeContainerObject2() throws Exception { skipStoreWithoutQueryXRefs(); // Init CDOSession session = openSession(); CDOTransaction transaction = session.openTransaction(); CDOResource resource = transaction.createResource(getResourcePath("res")); Directory directory = SecurityFactory.eINSTANCE.createDirectory(); resource.getContents().add(directory); Role role = SecurityFactory.eINSTANCE.createRole(); directory.getItems().add(role); Permission permission1 = SecurityFactory.eINSTANCE.createFilterPermission(); role.getPermissions().add(permission1); Permission permission2 = SecurityFactory.eINSTANCE.createFilterPermission(); role.getPermissions().add(permission2); Permission permission3 = SecurityFactory.eINSTANCE.createFilterPermission(); role.getPermissions().add(permission3); transaction.commit(); // Test Role roleNew = SecurityFactory.eINSTANCE.createRole(); roleNew.getPermissions().addAll(role.getPermissions()); directory.getItems().set(0, roleNew); transaction.commit(); }}Thinking again, with commit 3a3450b0674c078900bd1373ea075e040516c425 (see) the xref-checking of container references was removed completely. Can you please try again with a newer CDO version?CreatedTest caseCreatedModified base.ecoreAdded the following two model elements:DocumentElementI have double checked the situation. The problem only shows up if the SE1 element is replaced before SE4 is replaced. SE1 is contained itself by a single valued reference. I have added a test case and a modified base.ecore with respective model elements.The fix is committed to master:If you do another replacement at the end of the unit test, the test fails again..... // Now replace element by element_new replace(element); transaction.commit(); // Now replace element by yet another element_new replace(element); transaction.commit();Sry. The correct code is:// Now replace element by element_newElement newElement = replace(element);transaction.commit();// Now replace element by yet another element_newreplace(newElement);transaction.commit();New Gerrit change created:Moving all unaddressed bugzillas to 4.6.	9.0
id=332672	REOPENED	EMF	cdo.core	4.6	All All	P3 enhancement	Eike Stepper	2010-12-15 14:04 EST by	Lothar Werzinger	2016-07-31 01:02 EDT (	2 users	Build Identifier: Currently there is no API to get the differences between two branches.Please provide an API to get the differences between two branches.As a workaround one can today create a fake merger that does not merge and access the differences from there:class FakeMerger implements CDOMerger{ public CDOChangeSet target; public CDOChangeSet source; @Override public CDOChangeSetData merge(CDOChangeSet target, CDOChangeSet source) { this.target = target; this.source = source; // return null, and therefore do NOT do an actual merge return null; }};FakeMerger fakemerger = new FakeMerger();CDOTransaction mergetransaction = transaction.getSession().openTransaction(testbranch);mergetransaction.merge(mainbranch.getHead(), fakemerger);mergetransaction.rollback();Reproducible: Always	I would also be great if the API supported a diff between a historic model state and a branch. For example, what changed since 3/1/2010 for branch foo. Another example, what's the diff between branch foo at 3/1/2010 and MAIN today.CreatedPatch v1CreatedPatch v2Committed to HEADDoes not work correctly, yet...As collecting the diff is most likely a long running operation, would it make sense to pass in an optional IProgressMonitor?New API:CDOChangeSetData CDOSession::compareRevisions(CDOBranchPoint source, CDOBranchPoint target);CDOChangeSetData CDOView::compareRevisions(CDOBranchPoint source);CDOTransaction CDOSession::openTransaction(CDOBranchPoint target, ResourceSet resourceSet);CDOTransaction CDOSession::openTransaction(CDOBranchPoint target);CDOView CDOSession::openView(CDOBranchPoint target, ResourceSet resourceSet);CDOView CDOSession::openView(CDOBranchPoint target);(In reply to)All of these should work. Tests in org.eclipse.emf.cdo.tests.CompareTest.(In reply to)I hesitate to add IProgressMonitor to our API a second time.Usually you'd schedule the compareRevisions() call to a background thread anyway.(In reply to)That's true, but it might still be nice to know how far along it is (if that information is available).Oh, and I did not quite understand the(what second time?)I was referring to CDOTransaction.commit(IProgressMonitor). Since CDO is supposed to run outside of Eclipse that turned out as a poor choice.I se(In reply to)I see. Well you could create your own version of a ICDOProgressMonitor that allows an easy adaption for eclipse users likeIProgressMonitor monitor = //get the Eclipse monitortransaction.commit(new CDOProgressMonitor(monitor));that way you can support progress monitors that are eclipse independent.We have that in Net4j: OMMonitor / EclipseMonitor ;-)Moving all open enhancement requests to 4.1Moving all open issues to 4.2. Open bugs can be ported to 4.1 maintenance after they've been fixed in master.Moving all outstanding enhancements to 4.3Moving all open enhancement requests to 4.4Moving all open enhancement requests to 4.4Moving all open bugzillas to 4.5.Moving all unaddressed bugzillas to 4.6.	21.0
id=175681	REOPENED	GMF-Tooling	Core	2.0	PC Windows XP	P3 normal	Artem Tikhomirov	2007-02-27 06:48 EST by	Michael Moser	2010-07-19 22:09 EDT (	0 users	When generating diagram code from the attached .gmfgen file (all model files included) I get:Exception occurred while generating code...java.lang.RuntimeException: Unknown viewmap: org.eclipse.gmf.codegen.gmfgen.impl.ParentAssignedViewmapImpl@eaa0eaa (requiredPluginIDs: null, layoutType: UNKNOWN) (getterName: getFigureUpdatesFigure, setterName: null, figureQualifiedClassName: org.eclipse.gmf.runtime.draw2d.ui.figures.PolylineConnectionEx) at org.eclipse.gmf.internal.xpand.ast.ErrorStatement.evaluateInternal(ErrorStatement.java:47) at org.eclipse.gmf.internal.xpand.ast.Statement.evaluate(Statement.java:27) at org.eclipse.gmf.internal.xpand.ast.AbstractDefinition.evaluate(AbstractDefinition.java:94) at org.eclipse.gmf.internal.xpand.ast.ExpandStatement.invokeDefinition(ExpandStatement.java:190) at org.eclipse.gmf.internal.xpand.ast.ExpandStatement.evaluateInternal(ExpandStatement.java:161) at org.eclipse.gmf.internal.xpand.ast.Statement.evaluate(Statement.java:27) at org.eclipse.gmf.internal.xpand.ast.AbstractDefinition.evaluate(AbstractDefinition.java:94) at org.eclipse.gmf.internal.xpand.XpandFacade.evaluate(XpandFacade.java:60) at org.eclipse.gmf.codegen.util.CodegenEmitters$XpandTextEmitter.generate(CodegenEmitters.java:807) at org.eclipse.gmf.internal.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:319) at org.eclipse.gmf.internal.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:306) at org.eclipse.gmf.codegen.util.Generator.generateLinkEditPart(Generator.java:363) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:135) at org.eclipse.gmf.internal.common.codegen.GeneratorBase$1.run(GeneratorBase.java:448) at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1798) at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1780) at org.eclipse.gmf.internal.common.codegen.GeneratorBase.doRun(GeneratorBase.java:445) at org.eclipse.gmf.internal.common.codegen.GeneratorBase.run(GeneratorBase.java:86) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesOperation.run(ExecuteTemplatesOperation.java:175) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Prior validation of all involved files (.gmfgraph, .gmfgen) did not indicate any error...Michael	CreatedThe model that yields the crashThe model that yields the crashBTW: This is on GMF 2.0M4 (using eclipse 3.3M5).Check leonardo2.gmfgraph. There's Connection named ProcessUpdatesArtifactConnection which references UpdatesFigure. The figure (of type PolylineConnection) is child of another PolylineConnection, namely ReadsFigure. There's no way to use child of a figure as a graphical element for connection. I believe UpdatesFigure is simply misplaced, as the rest of the figures in the model are correctly placed as top-level figures under FigureGallery. Just move UpdatesFigure out of ReadsFigure into FigureGallery and that should fix the issue.While I fully agree with the analysis and the proposed fix (thanks!) I still find it, well - let's say: not very graceful that the code generation fails on me with a Runtime Exception and an error description out of which a "normal" user (as I consider myself) can't make much sense. If code-generation fails on me after prior validation failed (and gave me some proper indication) I would happily accept that, but since the prior validation did not signal any problem I consider such a subsequent crash not exactly expected behavior.So, IMHO one should thus redirect this bugzilla toward the validator instead of just closing the issue.MichaelSounds reasonable, can be checked in .gmfgraph.[GMF Restructure]: product GMF and componentModels - Graphical was the original product and component for this bug	5.0
id=181771	REOPENED	GMF-Tooling	Core	2.0	All All	P3 normal	Artem Tikhomirov	2007-04-10 10:54 EDT by	Artem Tikhomirov	2010-07-19 22:21 EDT (	0 users	Generator should tolerate absence of both containment and child meta features in gmfgen as they may be omitted in certain cases ().	Right now generation fails with exception (NPE) according toGenerator produces FIXME comments plus compilation problems instead of NPE now.I've just adopted 2.0 M7, and I find that the CreateTypeNodeCommand.javajet template produces the following text in my xxxCreateCommand when there is no containment feature specified for the mapping: false /* FIXME no containment feature found in the genmodel, toolsmith need to specify correct one here manually If you rely on superclass behaviour, simply delete this comment */The word 'false' causes code generation to stop and report the following error:"Can't organize imports due to syntax errors in the compilation unit xxxCreateCommand"need to come up with better idea how to indicate location to fix, without breaking organize imports[GMF Restructure]: product GMF and componentGeneration was the original product and component for this bug	5.0
id=134381	REOPENED	GMF-Tooling	Core	1.0	Macintosh Mac OS X - Carbon (unsup.)	P3 major	Artem Tikhomirov	2006-04-01 15:36 EST by	Jaime Romanini	2010-07-19 22:17 EDT (	2 users	No explicit message, this bug is produced with the same test case of theeach gmf* is valid.this is the workspace's log.-------------------!ENTRY org.eclipse.gmf.codegen 4 0 2006-04-01 16:27:32.052!MESSAGE NLS missing message: problems in: org.eclipse.gmf.codegen.util.messages!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.053!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.056!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.059!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.062!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.065!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.068!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.071!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.074!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.077!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.079!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.082!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.085!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.088!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.091!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.094!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.097!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.100!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeGraphicalNodeEditPolicyGenerator.generate(NodeGraphicalNodeEditPolicyGenerator.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeGraphicalNodeEditPolicy(Generator.java:405) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:197) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.103!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) ... 16 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.policies.NodeItemSemanticEditPolicyGenerator.generate(NodeItemSemanticEditPolicyGenerator.java:723) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateNodeItemSemanticEditPolicy(Generator.java:414) at org.eclipse.gmf.codegen.util.Generator.generateNode(Generator.java:198) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:111) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)!SUBENTRY 1 org.eclipse.emf.codegen 4 0 2006-04-01 16:27:32.106!MESSAGE !STACK 0java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateInitDiagramFileAction(Generator.java:612) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:158) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)Caused by: java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.editor.InitDiagramFileActionGenerator.generate(InitDiagramFileActionGenerator.java:523) ... 15 moreRoot exception:java.lang.NullPointerException at org.eclipse.gmf.codegen.templates.editor.InitDiagramFileActionGenerator.generate(InitDiagramFileActionGenerator.java:523) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:324) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:383) at org.eclipse.emf.codegen.jet.JETEmitter.generate(JETEmitter.java:364) at org.eclipse.gmf.common.codegen.GeneratorBase$JetAdapter.generate(GeneratorBase.java:341) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:207) at org.eclipse.gmf.common.codegen.GeneratorBase.doGenerateJavaClass(GeneratorBase.java:195) at org.eclipse.gmf.codegen.util.Generator.generateInitDiagramFileAction(Generator.java:612) at org.eclipse.gmf.codegen.util.Generator.customRun(Generator.java:158) at org.eclipse.gmf.common.codegen.GeneratorBase.doRun(GeneratorBase.java:264) at org.eclipse.gmf.common.codegen.GeneratorBase.run(GeneratorBase.java:69) at org.eclipse.gmf.internal.codegen.popup.actions.ExecuteTemplatesAction.run(ExecuteTemplatesAction.java:102) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)	CreatedThe environment configuration for the bugThis is a gzip compressed fileIs the problem persist? Could you please validate it with latest RC build?Can't runt through the test case as there's no .gmfgraph model (which makes it pain to validate models). Please feel free to reopen if the problem persists.I encountered the same problem, when I want to generate my GMFGEN Model. All 5 models (ecore, genmodel, gmfgraph, gmftool and gmfmap) are valid, but I get this error on generating the gmf genmodel (using context menu on Mapping "Create generator model..."Error message showed in the dialog (on the last page after pressing "Finish"): The object 'org.eclipse.emf.codegen.ecore.genmodel.impl.GenFeatureImpl@842e3b (property: Editable, notify: true, children: false, createChild: false, propertyCategory: null, propertyFilterFlags: null, propertyDescription: null, propertyMultiLine: false, propertySortChoices: false)' is not contained in a resource.The used platform is eclipse Europa withEMF 2.3.1.v200709252135GEF 3.3.0.v20070620GMF 1.0.100.v20070921-0000-7d-ETjEYjiMWQYLSEejlRjypkm71Createdworkspace project to see this bug (including all models)I'll reopen to take a look into the problem. However, GenFeature that is not kept in any resource is quite odd problem. Could you please make sure you've reloaded .genmodel prior to the transformation?Ok, I deleted the genmodel completely and used the "New EMF Model..." button in the "create generator model" Wizard. The problem still exists.But, I think I have an answer to this exception. The M32Actions.ecore contained in the attachement refers to Ecore.ecore, but in a different way.I used e.g. eSuperTypes="".Now I changed the links to look like eSuperTypes="platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EClass".Afterwards I was able to generate my gmfgen model.So in the end, it would just be more helpful, to get more exception information than in the header of the Wizard.[GMF Restructure]: product GMF and componentGeneration was the original product and component for this bug	8.0
id=349445	REOPENED	TMF	Xtext	2.0.0	PC Mac OS X - Carbon (unsup.)	P3 major	Project Inbox	2011-06-15 10:11 EDT by	Sebastian Zarnekow	2011-11-09 14:47 EST (	1 user	Access to the resourceDescriptionData has to be guarded by ensureLoaded() in all cases.	Pushed to master.Just wanted to report that I applied your fix (injected the patched ClusteringBuilderState) and it does seem to resolve the issue during startup. Apparently though, that's only half of the story. I have pretty much the same issue during cleaning of a project:- I have an editor open that is properly linked- I do a project clean- The editor gets a lot of error markers (I guess that's ok; while doing a clean build I don't expect cross references to be resolved)- Once the clean build is done, the error markers remain and I can't follow the cross references (F3). - When I close and open that editor, things are fine again. - I also have a second editor that's open but not visible (another tab). Once the cleaning is done, that editor seems to be fine. Very strange. I disabled the IResourceScopeCache just to make sure that I wasn't looking at a caching issue but that didn't help. Currently, I kind of suspect that after the clean build, a refresh of the editor's state is omitted but I'm not familiar with that part of the code. I'll get back when I know more.Hi Mark,thanks for the follow up. A build will trigger a IResourceDescription.Event that contains a list of deltas. This event finally ends up inDirtyStateEditorSupport#isReparseRequired(XtextResource, Event)where IResourceDescription.Manager#isAffected(Delta, IResourceDescription)is used to decide whether the editor has to be re-validated or not. Could you please verify that these methods are actually called in your case? Did you do any customizing in the implementation of the IResourceDescription.Manager?I'm using the DefaultResourceDescriptionManager. When I request a clean build, the isReparseRequired method is invoked twice for the resource corresponding to the open editor. In both cases, it returns false. Note BTW that the editor window itself already has lost its semantic highlighting and already contains annotations of broken cross reference when entering the isReparseRequired method for the first time. So there must be another trigger to refreshing the editor.I suspect that this is the problem: When I request a clean build, a DirtyStateEditorStateJob is created and runs. That job will eventually reparse the content of my editor. While that job is running, the builder starts and iterates over all resources to perform the clean build. It too will reparse the content of my editor (well, I guess the content of the underlying file of the editor). Unless, those two happen in complete isolation and the update to the ResourceSet occurs atomically, I think this is a race. To confirm that this is happening I have the following to stack traces that were simultaneously visible in my debugger:Thread [Worker-39] (Suspended (breakpoint at line 27 in AbstractParser)) VhdlParser(AbstractParser).parse(Reader) line: 27 LazyLinkingResource(XtextResource).doLoad(InputStream, Map<?,?>) line: 151 LazyLinkingResource.doLoad(InputStream, Map<?,?>) line: 69 LazyLinkingResource(XtextResource).reparse(String) line: 173 DirtyStateEditorSupport$UpdateEditorStateJob$2.process(XtextResource) line: 143 DirtyStateEditorSupport$UpdateEditorStateJob$2.process(Object) line: 1 DirtyStateEditorSupport$UpdateEditorStateJob$2(IUnitOfWork$Void<T>).exec(T) line: 36 XtextDocument$XtextDocumentLocker(AbstractReadWriteAcces<P>).modify(IUnitOfWork<T,P>) line: 49 XtextDocument$XtextDocumentLocker.modify(IUnitOfWork<T,XtextResource>) line: 189 XtextDocument.internalModify(IUnitOfWork<T,XtextResource>) line: 98 DirtyStateEditorSupport$UpdateEditorStateJob.run(IProgressMonitor) line: 131 Worker.run() line: 54 The LazyLinkingResource is org.eclipse.xtext.linking.lazy.LazyLinkingResource@d21532ea uri='platform:/resource/demo/top2.vhd'Thread [Worker-46] (Suspended (breakpoint at line 27 in AbstractParser)) owns: VhdlClusteringBuilderState (id=1870) VhdlParser(AbstractParser).parse(Reader) line: 27 LazyLinkingResource(XtextResource).doLoad(InputStream, Map<?,?>) line: 151 LazyLinkingResource.doLoad(InputStream, Map<?,?>) line: 69 LazyLinkingResource(ResourceImpl).load(InputStream, Map<?,?>) line: 1494 LazyLinkingResource(ResourceImpl).load(Map<?,?>) line: 1282 XtextResourceSet(ResourceSetImpl).demandLoad(Resource) line: 255 XtextResourceSet(ResourceSetImpl).demandLoadHelper(Resource) line: 270 XtextResourceSet(ResourceSetImpl).getResource(URI, boolean) line: 397 VhdlClusteringBuilderState(ClusteringBuilderState).writeNewResourceDescriptions(BuildData, IResourceDescriptions, CurrentDescriptions, IProgressMonitor) line: 238 VhdlClusteringBuilderState(ClusteringBuilderState).doUpdate(BuildData, ResourceDescriptionsData, IProgressMonitor) line: 93 VhdlClusteringBuilderState(AbstractBuilderState).update(BuildData, IProgressMonitor) line: 107 XtextBuilder.doBuild(ToBeBuilt, IProgressMonitor, IXtextBuilderParticipant$BuildType) line: 158 XtextBuilder.fullBuild(IProgressMonitor, boolean) line: 182 XtextBuilder.build(int, Map, IProgressMonitor) line: 85 BuildManager$2.run() line: 629 SafeRunner.run(ISafeRunnable) line: 42 BuildManager.basicBuild(int, IncrementalProjectBuilder, Map, MultiStatus, IProgressMonitor) line: 172 BuildManager.basicBuild(IProject, int, ICommand[], MultiStatus, IProgressMonitor) line: 203 BuildManager$1.run() line: 255 SafeRunner.run(ISafeRunnable) line: 42 BuildManager.basicBuild(IProject, int, MultiStatus, IProgressMonitor) line: 258 BuildManager.basicBuildLoop(IProject[], IProject[], int, MultiStatus, IProgressMonitor) line: 311 BuildManager.build(int, IProgressMonitor) line: 343 AutoBuildJob.doBuild(IProgressMonitor) line: 144 AutoBuildJob.run(IProgressMonitor) line: 242 Worker.run() line: 54 The LazyLinkingResource is org.eclipse.xtext.linking.lazy.LazyLinkingResource@dc84320f uri='platform:/resource/demo/top2.vhd'I must say that it's unclear to me why the UpdateEditorStateJob is actually created. It's triggered because org.eclipse.xtext.ui.editor.DirtyStateEditorSupport.UpdateEditorStateJob.run(IProgressMonitor).affectedResources is not empty. Don't know why because I'm working with a completely clean project.Whatever the reason for this, the UpdateEditorStateJob and the Builder probably need more synchronization.Hi Mark,I guess you are right. The scheduling rule that is used for the update editor job may not be sufficient. We'll investigate further for SR1.Regards,SebastianWe've noticed that something similar seems to be happening when a project is first created. Our new project wizard creates a project with a single file that's immediately opened. That file is syntactically colored but not semantically. Since, the project starts building immediately, I suspect that a similar race is present between the builder and updating the editor. I'll dig a bit deeper to see whether I can find a workaround since this is quite a critical problem for us.Hi Mark,to verify your assumption, you could override DirtyStateEditorSupport.createUpdateEditorJob() and the IWorkspace.getRuleFactory().buildRule() as the scheduling rule.(In reply to)I've added this scheduling constraint. It's _slightly_ better. Previously, when I had an open editor and did a clean build, the editor would lose its semantic highlighting. Now, it does not. What's still broken is when I perform _two_ clean builds back to back while an editor is open. So, I start a clean build and while that is running I start another one (that's of course waiting for the first). Right when the second one starts, the editor again loses its semantic highlighting.I suspect that semantic highlighting sees an empty global scope right before the second clean build but I'm still investigating. I would expect that there is a time-window during which the global index is empty or incomplete and in the process of being refilled. During that period, the highlighter can't follow cross file references. During that window, I see two sensible strategies:- Let the highlighter run but re-trigger it once the global scope is rebuilt.- Block the highlighter from running until the global scope is rebuilt. I think the first strategy is probably what Xtext is trying to do but I'm not sure. If so, there's probably a refresh trigger missing somewhere. That refresh would re-highlight the broken editor.I've been following the execution of the refresh of the editor after the second clean. I see that a UpdateEditorStateJob is (re-)scheduled. It doesn't do anything though. I think the cause is that affectedResources is empty. Digging deeper, the cause seems to be that collectAffectedResources filters out the current resource:...List<Resource> resources = resourceSet.getResources(); for(int i = 0; i< resources.size(); i++) { Resource res = resources.get(i); if (res != resource && res != null) { URI uri = res.getURI();...The resource of the open editor is present in the event.getDeltas () but this filter blocks it from ending up in the result List.I don't know why this filter is present. I would be inclined to remove it?The resource itself should not be contained in the list of affectedResources because these will be unloaded. You should make sure that isReparseRequired returns true, instead.I noticed that removing that filter is not a good idea :) I now added the following code which triggers a refresh of the editor after the second consecutive clean build. Seems to do the trick. (I also have the code in place that uses the builder's scheduling rule for the editor update).In DirtyStateEditorSupport: @Override protected boolean isReparseRequired(XtextResource resource, Event event) { return super.isReparseRequired(resource, event) || isCleaned (resource, event); } private boolean isCleaned(XtextResource resource, Event event) { ImmutableList<Delta> deltas = event.getDeltas(); ResourceSet resourceSet = resource.getResourceSet(); URIConverter converter = resourceSet.getURIConverter(); for (Delta delta : deltas) { if (delta.getOld() == null) { final URI newUri = delta.getNew().getURI(); final URI normalizeNewUri = converter.normalize(newUri); if (normalizeNewUri.equals(resource.getURI())) { return true; } } } return false; }Not 2.1	13.0
id=329125	REOPENED	TMF	Xtext Backlog	unspecified	PC Mac OS X - Carbon (unsup.)	P3 normal	Project Inbox	2010-10-29 20:19 EDT by	Mirko Raner	2016-08-24 12:52 EDT (	4 users	Build Identifier: 3.6.1 (Helios SR1)Seefor details.Reproducible: AlwaysSteps to Reproduce:To reproduce, run the unit tests in the attached projects.	CreatedA zip file containing the projects that exhibit the described behavior.In the attached project GrammarATest will pass and GrammarBTest will fail.The two grammars only differ in the "Text" production.This is a parser related issue. To summarize your tests:the string------This & That------can be matched by------Text: (elements+=EntityReference|elements+=SpecialCharacters|elements+=PlainText)+;EntityReference: AMPERSAND entity=IDENTIFIER SEMICOLON;PlainText: {PlainText} (PCDATA|INDEX|COLON|DASH|DOT|SEMICOLON|AMPERSAND|NameOrKeyword|'='|'['|']'|'\\');terminal AMPERSAND: '&';------but when changing "Text" to------Text: elements+=(EntityReference|SpecialCharacters|PlainText)+;------the following error is raised: "required (...)+ loop did not match anything at input '&'"Mirko, can you turn off backtracking in your grammar? It's "evil" because it hides syntactic ambiguities.In your case, the string "& id ;" can be parsed as PlainText as well as as EntityReference.However, this doesn't explain why the one grammar "works" and the other one doesn't.Thanks for looking into this, Moritz!I was aware that parsing of "& id ;" is ambiguous, and I actually enabled backtracking on purpose, as a quick and easy way to resolve this particular ambiguity (and a couple other similar ones). The goal is that "& id ;" gets parsed as an EntityReference, but "& id <something other than ';'>" gets parsed as PlainText.I'll check my original grammar to see whether I can resolve the ambiguities without backtracking, but luckily the work-around of using multiple elements+=... assignments works for now.closing this due to the last comments.There might be a misunderstanding here. This problem still persists and is not fixed yet. The syntax (var+=RuleA|var+=RuleB)+ should be the same as var+=(RuleA|RuleB)+, but it isn't.As Moritz summarized:So, whereas there is an easy work-around, Xtext doesn't really behave the way it should, and I think the underlying problem should be investigated and fixed. I suggest reopening this bug.thanks for clarifying.With current Xtext master, the grammars from the example projects produce ambiguity errors when running the MWE2 workflow. However, reordering the alternatives such that the call to EntityReference always comes first helps (there are only warnings left, no errors).With or without the change, the generated Antlr files differ only in some parentheses and variable names in the Text rule, but semantically they are identical. The generated method names in the GrammarAccess differ correspondingly (e.g. getElementsPlainTextParserRuleCall_2_0() vs. getElementsPlainTextParserRuleCall_0_2()) but I don't think it makes sense to try making these identical.So I suggest closing this as fixed.Hi Bernhard,thank you for looking into this, but I think you're missing the point:(In reply to Mirko Raner from)For all documents the parser should behave the same for (var+=RuleA|var+=RuleB)+ as it does for var+=(RuleA|RuleB)+.This is not about the order of choices inside the grammatical alternative and also not about the GrammarAccess.CreatedReduced exampleCreatedExperimental modificationsHi Moritz,(In reply to Moritz Eysholdt from)No, that's exactly how I understood this - but maybe I wasn't very precise. Anyway, what I did miss is the part about enabling backtracking, so only the Antlr grammars could be generated but not the parser. That's why I compared the Antlr grammars and all I saw are differences the IMO are irrelevant (except possibly the GrammarAccess stuff, which is why I mentioned it).These differences in the Antlr grammar are the same with or without backtracking. However, after enabling backtracking, parser code can be generated and the example actually produces no errors in the first case but a grey error marker in the second case as reported, which puzzled me a bit. The message in the problem view is the following: "required (...)+ loop did not match anything at input '&'".To me the Antlr grammars seem to be equivalent. There are only two differences:1. The local variable names in ruleText (lv_elements_0_0 vs. lv_elements_0_1, lv_elements_1_0 vs. lv_elements_0_2 and lv_elements_2_0 vs. lv_elements_0_3)2. The parentheses are chosen to be set differenly, namely:( (( {...} lv_elements_0_0=ruleEntityReference {...} )) | (( {...} lv_elements_1_0=ruleSpecialCharacters {...} )) | (( {...} lv_elements_2_0=rulePlainText {...} )))+vs.( (( {...} lv_elements_0_1=ruleEntityReference {...} | {...} lv_elements_0_2=ruleSpecialCharacters {...} | {...} lv_elements_0_3=rulePlainText {...} )))+As an experiment, I created a reduced version of the example grammars (attached).Additionally, I changed the Xtext Antlr Grammar generator to insert one additional pair of parentheses in String ebnf2(Alternatives it, AntlrOptions options, boolean supportActions), and then I got the same error for the first grammar as well, this time with a red error marker, not a grey one as before (also attached). The differences in the generated Antlr grammar are minimal - in the first reduced example grammar, except for whitespace, it is only two additional pairs of parentheses, both directly inside another pair of parentheses.A few superfluous parentheses shouldn't make a difference in meaning, but apparently they do, so to me it seems like this is actually a bug in the used Antlr version's way of handling parentheses in + repetitions.Correction: It seems like this is actually a bug in the used Antlr version's way of handling duplicate parentheses inside alternatives in + repetitions.I suppose there are good reasons why Xtext is bound to Antlr 3.2.0 and not any newer release of Antlr 3 (breaking stuff etc.). So the question that remains for this issue whether we want to work around this bug or not, and if so, whether we want this case of ambiguous grammar to work with backtracking. If it is ok for this kind of grammar to fail, it would be easiest to insert that additional pair of parentheses - then parsing would fail in both cases. However, I guess the desired behaviour would be for both grammars to work (which I suppose would bis also safer regarding breaking existing languages), so it would actually be necessary to be more careful about inserting duplicate parentheses.I made an experimental patch for avoiding double parentheses, and it seems to help.CreatedEXPERIMENTAL patch for avoiding unnecessary parentheses(This patch is untested and incomplete)GitHub Pull Request 90 created by [stadlerb]Created pull requestI tried carefully not to break anything but before I wrote additional tests, the existing tests in org.eclipse.xtext.tests didn't uncover any bugs although some were present at intermediate stages. So somebody who knows the code well should have a good look before merging.	16.0
id=359576	REOPENED	TMF	Xtext	2.0.1	All All	P3 normal	Project Inbox	2011-09-30 10:58 EDT by	Jan Koehnlein	2015-03-19 05:51 EDT (	3 users	We need this to run the JvmModelGenerator correctly.	Hmmm, thinking again, the final modifier cannot be extracted from parameters in binary class files, so it might lead to inconsistencies. Alternatively, we could always generate final parameters in the JvmModelGenerator. Opinions?+1 for always using final for parameters. The validation treats them as final anyway.I'll close this one as won't fix since I don't see a way to populate #isFinal from the reflection layer.Could it still be worthwhile to add isFinal/setFinal in JvmFormalParameter to allow for custom implementations in languages that use Xbase? The default value could be set to true, and the parts in the validator/generator could check isFinal (so the existing languages won't break).I'm asking because in one of my DSL I had to consider parameters as non final by default, and since there's no way to store such information in the model, I had to redefine entire methods (both in the validator and JvmModelGenerator) just to deal with them. Not to mention having a custom implementation of JvmFormalParameter to store the final/nonfinal feature.In case, I can try to provide a patch.(In reply to Lorenzo Bettini from)Could you please outline the use case for writable parameters?(In reply to Sebastian Zarnekow from)Well, simply the possibility to define methods where parameters are non-final by default, as in Java, to make my DSL method definition correspond to a Java method definition. I know it's a bad habit to make parameters non final and writable, but in my DSL I have to respect the Java shape and semantics of methods' parameters :)Hi Lorenzo,given that there is currently no way to read the 'final' flag from the class file, the argument 'non final parameters are like in Java' is not entirely convincing to us. In fact JvmFormalParameter#isFinal would answer kind of arbitrarily for all parameters that are contained in TypeResources. Therefore such an API is nothing we want to expose.Another option would be to make it easier to customize the final/writable state of a parameter. If you can come up with some API that would help you to implement your semantics, please provide a Gerrit changeset.Hi SebastianI could think of two possible solutions (without touching JvmFormalParameter):1. introduce a method in the XbaseJavaValidator to easily delegate the decision whether a JvmIdentifiableElement is to be considered writable or not; this could be used for variables, fields and parameters and used in checkAssignment(XExpression expression, EStructuralFeature feature, boolean simpleAssignment). It could be easily redefined in custom implementations. Similarly, introduce an overloaded method in JvmModelGenerator override void generateParameter(JvmFormalParameter it, ITreeAppendable appendable, boolean vararg, *boolean writable*, GeneratorConfig config), the current implementation would call it with writable=false, and a custom implementation, in this case my custom implementation, would call it with writable=true.2. introduce some kind of XbaseModelHelper (or XbaseModelExtensions?) to be used in the validator and in the model generator, with a method isWritable(JvmIdentifiableElement)I would tend to prefer the second approach, that could also be used for other customizable behaviors concerning the Xbase model. For example, in the DSL I was talking about, also variable declarations, which have the syntax of Java variable declarations, are non-final by default. (This customization was easier, but to avoid overriding many methods in the validator and the compiler, I chose to have a derived XVariableDeclaration model class that defaults isWritable to true.)Storing the final/nonfinal state in the model would still require the programmer to have a custom JvmFormalParameter, but besides that he would only need to customize the XbaseModelHelper without touching the validator and the generator.In any case, if you think such additions are not worthwhile, this is not a blocking issue, at least for me :)I think a holistic approach would be nice, that allows to customize the 'nature' of local variables and formal parameters. E.g. it would also be interesting to allow name shadowing in some sense.So a combination of both approaches would eventually be interesting: Having a single method in the validator, code generator etc that handles this stuff but its implementation delegates to a utility (maybe called LocalVariablesAndParameters). Would you be willing to work on that? It would likely need a few iterations, though.I'd like to see some convincing use cases for such an enhancement.@Sebastian: yes, I'd like to work on that, and I'll try to do that in the next weeks.@Sven: I tried to give an idea of the use cases in some of my DSLs scenarios.(In reply to Lorenzo Bettini from)Lorenzo,thanks for your help on this. Before you put effort into the topic, we should all agree on the advantages / cost of such an abstraction.As far as I can tell, your use case was mainly a DSL where you 'had to consider parameters as non final by default' but that doesn't explain your intend. Also the idea 'to make my DSL method definition correspond to a Java method definition' cannot be fulfilled since the JVM model that is created from Java binaries will never be allow to distinguish between final and non-final params without an additional annotation.Could you elaborate more on the use case, please?(In reply to Lorenzo Bettini from)You were mentioning that it has to be like in Java, but not why.Also I was curious about what Sebastian had in mind, when he mentioned name shadowing.(In reply to Sven Efftinge from)Currently we only allow to shadow 'this' and 'it' in Xbase, though Java allows to shadow more names. One could think of this to be a constraint on JvmFormalParameter similar to the fact that they are final. That's why I brought this into the discussion, too.(In reply to Sebastian Zarnekow from)Where is that? Do you have an example?In general I think it is bad if many usages of Xbase have slightly different semantics or syntax, as that harms reusing people's knowledge about xbase and will cause surprises when people have to work in two or more different xbase languages. The other reason I'm sceptical is that feature resolution is already very complicated not only for users but also implementation wise.That said I know that there are people who just want to have it in a certain way and that there might also be very isolated user groups, in which case a changed semantic wouldn't cause such irritations. But I think we shouldn't compromise the main code base for those situations but rather do the heavy lifting in their code bases.So maybe something in between, i.e. extracting a missing template method here and there that let you do this stuff, would be a good compromise.(In reply to Sven Efftinge from)Basically everywhere where it is allowed to shadow the name 'it', e.g. lambda parameter names, or parameters of methods in anon classes.(In reply to Sven Efftinge from)I think that's already mostly the case, but still you'd have to figure out all of the necessary places.I'm not convinced by the #isFinal thing or relaxation of name shadowing either. Still it would be interesting to discuss the reasons why one would want to have that.	16.0
id=351970	REOPENED	TMF	Xtext	2.0.0	All All	P3 normal	Project Inbox	2011-07-13 09:24 EDT by	Moritz Eysholdt	2016-01-13 05:31 EST (	1 user	We export the package org.eclipse.xtext.util twice:/org.eclipse.xtext/emf-gen/org/eclipse/xtext/util/org.eclipse.xtext.util/src/org/eclipse/xtext/utilThis causes package-imports (in MANIFEST.MFs) to fail when they refer to org.eclipse.xtext.util.	I don't see how we can solve this without removing or changing public API.There is a possibility: right now this package is exported by those two bundles:org.eclipse.xtext 2.8.4.v201508050135org.eclipse.xtext.util 2.8.4.v201508050135but xtext bundle depends AND re-exports org.eclipse.xtext.util bundle. By reexporting the bundle all exported packages are also exported.So all what we need is to *move* org.eclipse.xtext.util.XtextAdapterFactory and org.eclipse.xtext.util.XtextSwitch classes from org.eclipse.xtext bundle to org.eclipse.xtext.util (and same for source code). Not sure if this is doable by changing the source paths because XtextSwitch seem to depend on other xtext classes, but at least at "deployment" level, after compiler has generated classes this should work.Since the package is the same and since the org.eclipse.xtext bundle re-exports the org.eclipse.xtext.util bundle classes, there will be no breakage for any client. The only clients who could notice the difference will be those who used org.eclipse.xtext.util bundle without using org.eclipse.xtext, and I doubt there were many and I also doubt they will be affected in any way.Beside the fact that exporting different contents under the same package name is a clear violation of any good practices, this causes issues in our environment because we have *patched* xtext bundle (but neither xtext.util bundle nor package) and the MWE build in the Eclipse can't build anything after the patch because the classloader denies to load classes from same package if the signing information of those classes differs:247 [main] INFO clipse.emf.mwe.utils.GenModelHelper - Registered GenModel '' from 'platform:/resource/org.eclipse.xtext.common.types/model/JavaVMTypes.genmodel'336 [main] ERROR mf.mwe2.launch.runtime.Mwe2Launcher - Problems instantiating module com.advantest.itee.GenerateFlowProgrammingLanguage: java.lang.SecurityException: class "org.eclipse.xtext.util.XtextSwitch"'s signer information does not match signer information of other classes in the same packagejava.lang.RuntimeException: Problems instantiating module com.advantest.itee.GenerateFlowProgrammingLanguage: java.lang.SecurityException: class "org.eclipse.xtext.util.XtextSwitch"'s signer information does not match signer information of other classes in the same package at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:95) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:62) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:52) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.run(Mwe2Launcher.java:78) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.main(Mwe2Launcher.java:36)Caused by: org.eclipse.emf.common.util.WrappedException: java.lang.SecurityException: class "org.eclipse.xtext.util.XtextSwitch"'s signer information does not match signer information of other classes in the same package at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.create(Mwe2ExecutionEngine.java:157) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.inCase(Mwe2ExecutionEngine.java:104) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at org.eclipse.xtext.util.PolymorphicDispatcher.invoke(PolymorphicDispatcher.java:296) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalSwitch(Mwe2ExecutionEngine.java:66) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalApplyAssignments(Mwe2ExecutionEngine.java:142) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.inCase(Mwe2ExecutionEngine.java:114) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at org.eclipse.xtext.util.PolymorphicDispatcher.invoke(PolymorphicDispatcher.java:296) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalSwitch(Mwe2ExecutionEngine.java:66) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.inCase(Mwe2ExecutionEngine.java:80) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at org.eclipse.xtext.util.PolymorphicDispatcher.invoke(PolymorphicDispatcher.java:296) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalSwitch(Mwe2ExecutionEngine.java:66) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.create(Mwe2ExecutionEngine.java:62) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:93) ... 4 moreCaused by: java.lang.SecurityException: class "org.eclipse.xtext.util.XtextSwitch"'s signer information does not match signer information of other classes in the same package at java.lang.ClassLoader.checkCerts(ClassLoader.java:952) at java.lang.ClassLoader.preDefineClass(ClassLoader.java:666) at java.lang.ClassLoader.defineClass(ClassLoader.java:794) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:449) at java.net.URLClassLoader.access$100(URLClassLoader.java:71) at java.net.URLClassLoader$1.run(URLClassLoader.java:361) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:425) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) at java.lang.ClassLoader.loadClass(ClassLoader.java:358) at java.lang.Class.getDeclaredConstructors0(Native Method) at java.lang.Class.privateGetDeclaredConstructors(Class.java:2595) at java.lang.Class.getDeclaredConstructors(Class.java:1914) at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:243) at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorBindingImpl.java:96) at com.google.inject.internal.InjectorImpl.createUninitializedBinding(InjectorImpl.java:629) at com.google.inject.internal.UntargettedBindingProcessor$1.visit(UntargettedBindingProcessor.java:51) at com.google.inject.internal.UntargettedBindingProcessor$1.visit(UntargettedBindingProcessor.java:35) at com.google.inject.internal.UntargettedBindingImpl.acceptTargetVisitor(UntargettedBindingImpl.java:42) at com.google.inject.internal.UntargettedBindingProcessor.visit(UntargettedBindingProcessor.java:35) at com.google.inject.internal.UntargettedBindingProcessor.visit(UntargettedBindingProcessor.java:27) at com.google.inject.internal.BindingImpl.acceptVisitor(BindingImpl.java:93) at com.google.inject.internal.AbstractProcessor.process(AbstractProcessor.java:55) at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:178) at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:103) at com.google.inject.Guice.createInjector(Guice.java:95) at com.google.inject.Guice.createInjector(Guice.java:72) at com.google.inject.Guice.createInjector(Guice.java:62) at org.eclipse.xtext.XtextStandaloneSetupGenerated.createInjector(XtextStandaloneSetupGenerated.java:29) at org.eclipse.xtext.XtextStandaloneSetupGenerated.createInjectorAndDoEMFRegistration(XtextStandaloneSetupGenerated.java:23) at org.eclipse.xtext.generator.Generator.<init>(Generator.java:125) at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:526) at java.lang.Class.newInstance(Class.java:383) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.create(Mwe2ExecutionEngine.java:155) ... 28 more	2.0
id=365870	REOPENED	TMF	Xtext	unspecified	PC Windows 7	P3 enhancement	Project Inbox	2011-12-07 06:53 EST by	Kai Kreuzer	2011-12-07 07:42 EST (	1 user	Build Identifier: Xtext 2.2In Xtext/Xbase 2.2 the OnTheFlyCompiler has been removed as it introduced an undesired dependency to JDT in the xbase bundle.As this feature is very useful to create bytecode on the fly, it would be nice if this feature could be re-introduced in an optional bundle (not in xbase.ui as the feature is UI independent and rather used in optimized headless runtimes).Reproducible: Always	It has been moved to org.eclipse.xtext.xbase.junitPlease reopen is I miss something.Well, this place implies that it is not considered a feature anymore, but merely a helper class for testing, right?Adding the xbase.junit bundle to your runtime and thus having junit in there as well does not sound like a valid solution to me.I see it's not ideal, but that's the tradeoff. OnTheFlyCompiler is really just a thin (and a bit hacky) wrapper around JDT's Main.We are not going to put it somewhere else and make it a first class feature. You can use it, but it's internal API and we might change it or even move it again eventually.We can leave the feature request open, since it's a valid feature request. But for now chances aren't good that we do something about it.Thanks Sven. I perfectly understand your point of view and that you do not want to put any effort on this to make it a supported and official feature.So I will live with that status, but leave the request open just in case somebody wants to jump on it in future.	5.0
id=389147	REOPENED	TMF	Xtext	2.4.0	All All	P3 enhancement	Project Inbox	2012-09-10 05:37 EDT by	Sebastian Zarnekow	2016-09-14 13:15 EDT (	3 users	Consider the following use casemyMethod(Object o) { }myMethod(int i) { }doStuff() { var i = 1 return myMethod(i) vs return myMethod(println(i))}Since println currently returns an object, adding logging to the return expression will change the semantics of the method. Therefore I suggest to add overloaded variants for print and println similar to java.io.PrintWriter but with a return value	GitHub Pull Request 5 created by [cdietrich]fixed in Xtext 2.11reverted change caused by negative side effects on the type inference	3.0
id=367198	REOPENED	TMF	Xtext	2.0.1	PC Windows XP	P3 normal	Project Inbox	2011-12-20 10:00 EST by	Missing name	2012-01-17 10:37 EST (	1 user	Build Identifier: 20110916-0149I get the following exception :0 [main] INFO lipse.emf.mwe.utils.StandaloneSetup - Registering platform uri 'C:\work_b5_privat\Privatschutz\integration.kdv'1468 [main] INFO ipse.emf.mwe.utils.DirectoryCleaner - Cleaning C:\work_b5_privat\Privatschutz\integration.kdv\de.allianz.vak.integration.amis.kdv\..\de.allianz.vak.integration.amis.kdv\src-gen1734 [main] INFO ipse.xtext.generator.LanguageConfig - generating infrastructure for de.allianz.vak.integration.amis.kdv.definition.KDVDialogDefinition with fragments : ImplicitRuntimeFragment, GrammarAccessFragment, EcoreGeneratorFragment, ParseTreeConstructorFragment, ResourceFactoryFragment, XtextAntlrGeneratorFragment4358 [main] INFO clipse.emf.mwe.utils.GenModelHelper - Registered GenModel '' from 'file:/C:/work_b5_privat/Privatschutz/integration.kdv/de.allianz.vak.integration.amis.kdv/src-gen/de/allianz/vak/integration/amis/kdv/definition/KDVDialogDefinition.genmodel'8467 [main] ERROR enerator.CompositeGeneratorFragment - java.lang.reflect.InvocationTargetExceptionorg.eclipse.emf.common.util.WrappedException: java.lang.reflect.InvocationTargetException at org.eclipse.xtext.generator.parser.antlr.AntlrToolFacade.runWithParams(AntlrToolFacade.java:134) at org.eclipse.xtext.generator.parser.antlr.XtextAntlrGeneratorFragment.generate(XtextAntlrGeneratorFragment.java:46) at org.eclipse.xtext.generator.CompositeGeneratorFragment.generate(CompositeGeneratorFragment.java:81) at org.eclipse.xtext.generator.LanguageConfig.generate(LanguageConfig.java:69) at org.eclipse.xtext.generator.Generator.generate(Generator.java:351) at org.eclipse.xtext.generator.Generator.invokeInternal(Generator.java:125) at org.eclipse.emf.mwe.core.lib.AbstractWorkflowComponent.invoke(AbstractWorkflowComponent.java:126) at org.eclipse.emf.mwe.core.lib.Mwe2Bridge.invoke(Mwe2Bridge.java:34) at org.eclipse.emf.mwe.core.lib.AbstractWorkflowComponent.invoke(AbstractWorkflowComponent.java:201) at org.eclipse.emf.mwe2.runtime.workflow.AbstractCompositeWorkflowComponent.invoke(AbstractCompositeWorkflowComponent.java:35) at org.eclipse.emf.mwe2.runtime.workflow.Workflow.run(Workflow.java:19) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:97) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:73) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:64) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:55) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.run(Mwe2Launcher.java:74) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.main(Mwe2Launcher.java:35)Caused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.eclipse.xtext.generator.parser.antlr.AntlrToolFacade.runWithParams(AntlrToolFacade.java:132) ... 16 moreCaused by: java.lang.NoSuchFieldError: ruleMemo at org.antlr.tool.ActionAnalysisLexer.<init>(ActionAnalysisLexer.java:50) at org.antlr.tool.ActionAnalysisLexer.<init>(ActionAnalysisLexer.java:32) at org.antlr.tool.Grammar.examineAllExecutableActions(Grammar.java:1281) at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:567) at org.antlr.tool.Grammar.<init>(Grammar.java:456) at org.antlr.Tool.getGrammar(Tool.java:331) at org.antlr.Tool.process(Tool.java:267) at de.itemis.xtext.antlr.toolrunner.AntlrToolRunner.runWithParams(AntlrToolRunner.java:40) ... 21 more11248 [main] INFO org.eclipse.xpand2.Generator - Written 47 files to outlet [default](src-gen/de/allianz/vak/integration/amis/kdv//kdvdialoge)11248 [main] INFO .emf.mwe2.runtime.workflow.Workflow - Done.Reproducible: AlwaysSteps to Reproduce:1. run mwe-file2.3.	This indicates that you are using an incompatible Antlr version. Current Xpand version requires 3.2.0, previous versions require 3.0.1.Please check your configuration.CreatedMy eclipse ConfigurationMy eclipse ConfigurationHow can this happen for a new installed eclipse version ???There are no updates available !As an attachment my configuration.Problem occurs while executing Xtext's generator component. Moving bug to Xtext.Configuration contains Indigo versions.- MWE 1.1.1- Xpand 1.1.1- Xtext 2.0.1- Antlr 3.2.0From the configuration I do not see why this error should occur. You could try the Xtext 2.0.1 distribution from itemis.This problem was solved by an update of xtext to version 2.2.1 .	5.0
id=328477	REOPENED	TMF	Website	1.0.1	PC Mac OS X - Carbon (unsup.)	P3 enhancement	Project Inbox	2010-10-22 09:51 EDT by	Sven Efftinge	2014-10-29 09:03 EDT (	36 users	we think it would be a good idea, to list and feature all the coolthings people have built around Xtext on Xtext.org.For that matter, we would like to have a dedicated additional page "Community".If you have developed or came across something you'ld like to see there,please provide the following information as a comment to this bugzilla:- name- description (max. 2 sentences)- link- license (any license, even commercial is ok)- category (language, framework, documentation)- version (0.7.x, 1.x, latest Milestone)- author	- name: VClipse- description:VClipse is an Eclipse-based integrated development environment (IDE) for product modeling for the SAP Variant Configurator (VC). VClipse supports the specification of objects and dependencies in a textual domain specific language calld VCML. This enables the use of standard text comparison tools and version control systems in the model development process.- link: www.vclipse.org- license: EPL- category: language- version: 1.0- author: Tim Geisler, Aleksey Shumilin- namefj-eclipse- descriptionan Eclipse-based IDE for Featherweight Java, implemented using Xtext.- link- licenseGPL- category (language, framework, documentation)language- version (0.7.x, 1.x, latest Milestone)1.0- authorLorenzo Bettini- nameSWRTJ: Sugared Welterweight Record-Trait Java- descriptiona Java-like language where units of objects' functionality are modeled by traits and by records (a construct that complements traits to model the state part of objects).- link- licenseGPL- category (language, framework, documentation)language- version (0.7.x, 1.x, latest Milestone)1.0- authorFabio Strocco, Lorenzo Bettini- name Xtext Typesystem Framework- description (max. 2 sentences) A framework that supports the efficient implementation of typesystem rules for Xtext languages. Especially useful if your languages has expressions, statements, different (combinable) data types.- link- license (any license, even commercial is ok) EPL- category (language, framework, documentation) framework- version (0.7.x, 1.x, latest Milestone) 1.x- author Markus Voelter ()- name: DOT for Zest- description: A Graphviz-compatible DSL for the Eclipse Visualization Toolkit- link:- license: EPL- category: language, visualization- version: 0.9.1- authors: Fabian Steeg, Michael Clay- name: Elysium- description (max. 2 sentences): LilyPond IDE for Eclipse- link:- license (any license, even commercial is ok): EPL- category (language, framework, documentation): IDE for a DSL for musical notation- version (0.7.x, 1.x, latest Milestone): 0.1.0.qualifier (pre-alpha)- author: Dénes Harmath- name: Fornax Sculptor- description: You express your design intent in a textual DSL, from which Sculptor generates high quality Java code and configuration.- link:- license: Apache 2 License- category: Productivity Tool- version: 0.7.x, 1.x- author: Patrik Nordwall and others- name: Semantic Application Design Language (SADL) Version 2- description:The Semantic Application Design Language (SADL) is a language for buildingsemantic models and expressing rules that capture additional domainknowledge. The SADL-IDE (integrated development environment) is a set ofEclipse plug-ins that support the editing and testing of semantic modelsusing the SADL language. - link:- license: EPL- category: language- version: 1.0.1- author: Andrew Crapo, John Interrante, David Bracewell, Saurabh Gupta- name: eTrice- description eTrice is a Modeling Tool for distributed eventdriven realtime systems based on Realtime Object Oriented Modeling (ROOM), not UML. Textual and graphical ROOM editors editors and codegenerators and runtime libraries for Java, C++ and C will be provided.- links:soon:- license: EPL- category: language amd framework- version: 0.1 in January 2011- Henrik Rentz-Reichert, Thomas Schuetz- name: EMF Customizer- description : EMF Customizer is a model (Ecore based) customization/styling/refining CSS like textual DSL (Domain Specific Language) targeting MDSD tool chains end users. - link :- license : EPL- category : language- version : 1.0.0- author : Cédric Vidal- name: protobuf4e- description : Editor for Google's Protocol Buffers data interchange file format. - link :- license : EPL- category : language- version : 1.0.0- author : Cédric Vidal- name: EMF Scaffolding- description : Implementation of the principle of dynamic inplace scaffolding with EMF presented in July 2009 at Eclipse Acceleo Day:- link :- license : EPL- category : language and framework- version : 1.0.0- author : Cédric Vidal and Jérôme Benois- name: LLVM4e- description : Xtext based Eclipse editor for LLVM (Low Level Virtual Machine) Assembly Language *.ll files- link :- license : EPL- category : language- version : 1.0.0- author : Cédric Vidal- name: Eclipse b3- description : new generation of Eclipse technology to simplify software build and assembly. - link :- license : EPL- category : build and assembly system, pde build, maven/tycho, buckminster/b3- version : 0.1.0 incubator- author : Henrik Lindberg- name: AMP Agent Modeling Platform- description : extensible frameworks and exemplary tools for representing, editing, generating, executing and visualizing agent-based models (ABMs) and any other domain requiring spatial, behavioral and functional features- link :- license : EPL- category : agent-based models- version : 0.8.0 (currently incubation)- author : Metascape, LLC- name: EMF Query 2- description : search and retrieval of emf model elements in a structured format with an additional advantage that resource loading is minimized during execution - link :- license : EPL- category : modeling, emf framework- version : 2.0.0- author : ?- name: CamelSplit- description : Text-based DSL Editor for Camel and Eclipse- link :- license : ?- category : Editor- version : ?- author : Oisin Hurley- name: xtext-forms-integration- description : Sample RCP application to demonstrate how Xtext editors can be integrated within Eclipse UI forms- link :- license : EPL- category : Editor- version : ?- author : Mikael Barbero- name: applause- description : open-source tool chain to produce native apps for different devices such as Android, iPhone and iPad- link :- license : EPL- category : model-driven development for mobile devices- version : ?- author : Heiko Behrens, Peter Friese- name: mod4j- description : open source DSL-based environment for developing administrative enterprise applications- link :- license : EPL- category : model-driven development for administrative enterprise applications- version : 1.0.0- author : Jos Warmer- name: relaxNG for eclipse- description : Provides support for editing RELAX NG documents in the Eclipse IDE. Integrates with standard WST XML editor to provide content completion and validation of edited XML file based on it's RELAX NG schema.- link :- license : ?- category : Editor, XML, WST- version : ?- author : Dave Carver- name: ARText- description : ARText, a textual language for the specification of AUTOSAR systems- link :then ARText subproject- license : closed source, only for artop members- category : automotive, IDE, autosar- version : ?- author : Sebastian Benz et al- name: Axdt- description : ActionScript3 development tools. It uses Mirror resources to integrate declarations parsed from html and xml ActionScript Docs similar to the Xtext Java integration. - link :- license : EPL- category : language- version : 0.0.82- author : Martin Schnabel- name: alloy4eclipse- description : specification and analysis of models in the Alloy4 language on the Eclipse platform.- link :- license : GPL- category : language, SAT solver - version : 0.2- author : Antoine Bourre and Francois Blarelcool stuff !- name: KIELER- description: an evaluation platform for new methods in model-based software design (automatic layout, graphic/ textual dynamic views, focus on context, simulation, codegen,...)- link: rtsys.informatik.uni-kiel.de/~kieler- license: epl (open source)- category: IDE- version: 1.x- author: Rtsys group, Dep. of Computer Science, Uni KielI've put the site online :Please check whether all the information is correct.For additional projects or updates to any existing entries, please use the following format:<tr> <td><a href="">APPlause</a></td> <td> Open source tool chain to produce native apps for different devices such as Android, iPhone and iPad </td> <td>EPL</td> <td>Language, Framework</td> <td>1.x</td> <td>Heiko Behrens, Peter Friese, et al</td> </tr><tr> <td><a href="">BusinessAppTester</a></td> <td> Allows you to reuse JUnit test classes by seperating the data from the unit implementation class. Uses Xtext to define test class specific domain models. </td> <td>EPL</td> <td>Testing, Framework</td> <td>0.8</td> <td>Florian Pirchner, Ekkehard Gentz</td> </tr>Added BusinessAppTester, thanks.A small correction: Elysium's current version is 0.1.x.(In reply to)The version column is not about the version of the project, but the version of Xtext being used.Additions buinessAppTester:I am sorry. 0.8 is the version about the businessAppTester.We are using Xtext 1.0.0- Aranea- Messaging and infrastructure layer that uses Xtext for generating the message and support classes.-- MIT- framework- 1.x- Patrick RuckstuhlAdded Aranea. please use the following format for future updates: <tr> <td><a href="">Aranea</a></td> <td>Messaging and infrastructure layer that uses Xtext for generating the messageand support classes.</td> <td>MIT</td> <td>Framework</td> <td>1.x</td> <td>Patrick Ruckstuhl</td> </tr>Also fixed the version for BusinessAppTester.i am not sure if it is a good idea to include the xtext version in the table.this information might be out of date sooner than later.also the table does not look so nice with this information.imo each project should (or is) documenting better the xtext verison.- name : Poseidon for DSLs- description: Framework for creating graphical tools for DSLs, based on internal XText models. Poseidon for UML 8.0 as a sample DSL platform- link:- license : closed source- category: framework- version 1.0.1- author: Gentleware AG(In reply to)<tr> <td><a href="">Poseidon for DSLs</a></td> <td>Framework for creating graphical tools for DSLs, based on internal XText models. Poseidon for UML 8.0 as a sample DSL platform </td> <td>closed source</td> <td>Framework</td> <td>1.0.1</td> <td>Gentleware AG</td> </tr>added Poseidon.@Berni if it turns out you are right, we can consider removing the version. For now it should be pretty much up to date :-) It helps users to filter out uninteresting projects, because they are still using 0.7.x I can imagine that projects who updated to a new version of Xtext are able to provide a short note. But we will see.Name: xDGL Data Generation LanguageDescription: xDGL is a free plugin on eclipse Helios 3.6 fully compatible with eclipse data tools platform DTP. Works perfectly with dozens of RDBMS databases. xDGL was invented by Abubaker Mahmoud, a Canadian Computer expert. xDGL is simple to learn and fast to execute. In one xDGL program file you can include unlimited number of tables definition to generate very hetergenious data. xDGL is designed to solve the problem of most data generators systems works in english. xDGl works in any language that could be written in the UTF-8 encoding. xDGL is the first Java Data Generation Language, the first Eclipse language for Data Genration. xDGL is built in Java, Eclipse and the great xText Framework.Link: Download it it is Free from the web site:License: CommercialCategory: LanguageVersion: 1.0 BetaAuthor: Abubaker Mahmoud.email:- dslmeinte's example DSLs- Various DSLs for technical domains (data modeling, dynamic screens, XSDs, WSDLs)-- MIT license- examples- 1.0.y (works at least on y=1, 2)- Meinte Boersma- dslmeinte's example DSLs- Various DSLs for technical domains (data modeling, dynamic screens, XSDs, WSDLs)-- MIT license- examples- 1.0.y (works at least on y=1, 2)- Meinte Boersma<tr> <td><a href="">Joliepse IDE</a></td> <td>Joliepse is an Integrated Development Environment (IDE) for the JOLIE programming language, the first full-fledged programming language based upon the service-oriented programming paradigmand support classes.</td> <td>GPL</td> <td>IDE</td> <td>1.x</td> <td>Diego Castronuovo (castronu at gmail dot com)</td> </tr><tr> <td><a href="">nusmv-tools</a></td> <td>The nusmv-tools project provides a set of tools for the model checker <a href="">NuSMV</a>. Xtext is used to create an Eclipse editor for the NuSMV input language. The editor is further enhanced by static analysis checks (shown as Eclipse error markers) performed by an OSGi-fied version of NuSMV itself. </td> <td>EPL</td> <td>Model Checking</td> <td>1.x</td> <td>Siamak Haschemi</td> </tr>(In reply to)<tr> <td>Geppetto</td> <td>Integrated development environment for the Puppet System Admin tools. (The PP manifest language is Ruby like).</td> <td><a href="">Cloudsmith/Geppetto at github</a></td> <td>EPL, Apache</td> <td>2.x</td> <td>Henrik Lindberg, Cloudsmith Inc.</td></tr>published the last entries.The Typesystem Framework is now also compatible with the 2.x train of XText, I have created a beta release. Please update the version compatibility tag in the listing on the community site.- name: XTypeS- description: XTypeS (Xtext TypeSystem) is a DSL (implemented in Xtext itself) for writing type systems for languages implemented in Xtext. It then generates Java code that can be used in your language implemented in Xtext for scoping and validation (XTypeS also generates a validator in Java).- link:- license: GPL- category: language- version: 1.0.2- author: Lorenzo BettiniPlease provide the HTML code as described in #25(In reply to)Done.(In reply to)<tr> <td><a href="">XTypeS</a></td> <td>a DSL for writing type systems for languages implemented in Xtext. It then generates Java code that can be used in your language implemented in Xtext for scoping and validation (XTypeS also generates a validator in Java). </td> <td>GPL</td> <td>Language</td> <td>1.x</td> <td>Lorenzo Bettini</td></tr>Please replace the "nusmv-tools" entry:<tr> <td><ahref="">nusmv-tools</a></td> <td>The nusmv-tools project provides a set of tools for the model checker<a href="">NuSMV</a>. Xtext is used to create an Eclipseeditor for the NuSMV input language. The editor is further enhanced by staticanalysis checks (shown as Eclipse error markers) performed by an OSGi-fiedversion of NuSMV itself. Watch the <a href="">screencast</a>. </td> <td>EPL</td> <td>Language</td> <td>1.x</td> <td><a href="mailto://">Siamak Haschemi</a></td> </tr>Thanks,Siamak(In reply to)That information is actually not completely correct, because the current release (0.2.X) is not based on Xtext. Only the new, upcoming one, will be based on Xtext. - name: alloy4eclipse- description : specification and analysis of models in the Alloy4 language on the Eclipse platform.- link :- license : GNU LGPL- category : language, formal specification- version : 0.3 (upcoming)- author : Mohamed Bouragba, Mohamed Said, Maxime Kapusta and Yoann Vasseur.- name NanoWorkbench- description (max. 2 sentences) A Domain-specific Workbench (DSM) for the development of optical nanostructures. Especially used for the description of simulations and experiments- link- license (any license, even commercial is ok) GPL- category (language, framework, documentation) language, documentation- version (0.7.x, 1.x, latest Milestone) 1.x- author Siamak Haschemi (), Martin Schmidt (), Arif Wider ()(In reply to)<tr> <td><a href="">NanoWorkbench</a> </td> <td>A Domain-specific Workbench (DSM) for the development of optical nanostructures. Especially used for the description of simulations and experiments. </td> <td>GPL</td> <td>language, documentation</td> <td>1.x</td> <td>Siamak Haschemi (), Martin Schmidt (), Arif Wider ()</td> </tr>- name: Canappi- description:Canappi is a Development Hub, focusing on Mobile Application Development, that integrates tools, mobile platforms, libraries and back-end services. It is based on mdsl, a very compact mobile domain specific language. Platform specific code generation happens in on the ClougGen.org platform.- link: www.canappi.com- license: commercial- category: language- version: 1.0- author: Jean-Jacques DubrayVClipse has been migrated to Xtext 2.0. The new entry is as follows: <tr> <td id="name"><a href="">VClipse</a></td> <td>VClipse is an Eclipse-based integrated development environment (IDE) forproduct modeling for the SAP Variant Configurator (VC). VClipse supports thespecification of objects and dependencies in a textual domain specific languagecalld VCML. This enables the use of standard text comparison tools and versioncontrol systems in the model development process.</td> <td>EPL</td> <td>Language</td> <td>2.x</td> <td>Tim Geisler, Aleksey&nbsp;Shumilin</td> </tr>Also Elysium has been migrated to Xtext 2.0. The new entry is as follows:<tr> <td><a href="">Elysium</a></td> <td>LilyPond IDE for Eclipse</td> <td>EPL</td> <td>Language</td> <td>2.x</td> <td>Denes Harmath</td> </tr>added and updated. Please verify<tr> <td><a href="">OCL</a></td> <td>Editors for OCL expressions, documents, libraries. Standalone or embedded in Ecore.</td> <td>EPL</td> <td>Language</td> <td>2.x</td> <td>Ed Willink</td> </tr><tr> <td><a href="">BusinessAppTester</a></td> <td> MADS (Multipurpose Agricultural Data System) is a free open-source tool for modelling and analysis of agricultural activities - crops, livestock, forestry and others - in developing countries, at sector, regional or project level. . </td> <td>EPL, GPL</td> <td>RCP application</td> <td>1.0.0</td> <td>Michel Simeon</td> </tr>(In reply to)- dslmeinte's example DSLs for Xtext2- Various DSLs, currently mainly for SGML/XML parsing-- MIT license- examples- 2.0.y (works at least on y=1)- Meinte Boersma ()<tr> <td><a href="">Spray</a></td> <td>This project aims to provide Domain Specific Languages to describe Visual DSL Editors against the Graphiti runtime, and provide code generation (with Xtend2) to create the boilerplate code for realizing the implementation against the Graphiti framework.</td> <td>EPL 1.0</td> <td>Framework</td> <td>2.0.1</td> <td>Jos Warmer, Karsten Thoms et. al.</td> </tr><tr> <td><a href="">dom3editor</a></td> <td> This is a tool to help edit Dominions 3 mod files. It includes context coloring, code completion, error checking and integrated help. You can edit using the text editor or the form based entry view. </td> <td>GPL</td> <td>Language</td> <td>2.x</td> <td>Larry Moore</td> </tr>the contributions are now listed online.Here is another one:<tr> <td><a href="">Worthwhile</a></td> <td>Worthwhile is an IDE built around a simple WHILE language thatintegrates editing, running, debugging and verifying programs usingMicrosoft's Z3 prover. </td> <td>3-Clause BSD</td> <td>Language</td> <td>2.x</td> <td>Leon Handreke, Chris Hiatt, Stefan Orf, Joachim Priesner, Fabian Ruch, Matthias Wagner</td></tr><tr> <td><a href="">Xsemantics</a></td> <td>XSemantics is a DSL (implemented in Xtext) for writing type systems, reduction rules, interpreters (and in general relation rules) for languages implemented in Xtext. It then generates Java code that can be used in your language implemented in Xtext for scoping and validation (it can also generate a validator in Java). It is the successor of XTypeS. </td> <td>EPL</td> <td>Language</td> <td>2.x</td> <td>Lorenzo Bettini</td></tr>Great idea! Here is one I've been working on:- name: Xtest- description: Xtest is a unit-testing domain-specific scripting language for Java. Tests are run while you type and any time a related file is saved, marking exceptions thrown and failed assertions as errors to immediately notify you of test failures.- Link:- License: EPL- Version: 2.2- Author: Michael BarryI realized it was somewhat limiting for Xtest to work with only Xtext 2.2, so I back-ported 2.0, and 2.1 compatible versions and published an update site for the latest 2.3 compatible version. So Xtest is 2.x-compatible now :-) Here is the updated entry in your requested format:<tr> <td><a href="">Xtest</a></td> <td>Xtest is a unit-testing domain-specific scripting language for Java. Tests are run while you type and any time a related file is saved, marking exceptions thrown and failed assertions as errors to immediately notify you of test failures. </td> <td>EPL</td> <td>Testing, Language</td> <td>2.x</td> <td>Michael Barry</td> </tr><tr> <td><a href="">Yakindu Statechart Tools</a></td> <td> YAKINDU Statechart Tools (SCT) provides an integrated modeling environment for the specification and development of reactive, event-driven systems based on the concept of statecharts. It is an easy to use tool that features sophisticated graphical state chart editing, validation and simulation of statecharts as well as code generation. </td> <td>EPL</td> <td>Tool</td> <td>2.0.X</td> <td>Axel Terfloth, Andreas Mülder, et al</td> </tr>I've added the outstanding submissions.(In reply to)Update:- link:- version: 2.x<tr> <td><a href="">QVTc and QVTr</a></td> <td>Editors for QVT Core and Relational languages.</td> <td>EPL</td> <td>Language</td> <td>1.x</td> <td>Ed Willink</td> </tr>- name: LLVM IR SDK- description: A feature-rich LLVM IR editor plugin for Eclipse.- link:- license: BSD- category: language- version: 2.3.x- Alon MishneNotice that there's already another LLVM IR editor on this list, called "LLVM4e", but that other project was unfortunately stillborn (no source, binaries, or documentation ever appeared, and it was last updated on 2010).The changes will go live next Wednesday.- name: Jaspersoft Studio, Report Designer for JasperReports- description: The Expression Editor allows to compose Java-like expressions enriched with JasperReports specific tokens. The SQL Query Designer, in text mode, allows to edit simple and advanced SQL expressions.- link:- license: EPL- category: Report Designer- version: 2.3.x- Jaspersoft Studio Team (Veaceslav Chicu, Massimo Rabbi, Marco Orlandin and Giulio Toffoli)- name: SARL- description: SARL is a general-purpose agent-oriented language. It aims at providing the fundamental abstractions for dealing with concurrency, distribution, interaction, decentralization, reactivity, autonomy and dynamic reconfiguration. The language is platform- and architecture-independent. The default execution environment is the <a href="">Janus platform</a>.- link:- license: Apache 2 License- category: Language, Framework- version: latest Milestone- author: Sebastian Rodriguez, Nicolas Gaud, Stéphane Gallandupdated the website (sorry for the long delay)- Jextest- Language for writing Junit tests based on (simple) object state diagrams, i.e. diagram where states are objects (structures) and transitions are method calls. Jextest files are translated to Junit tests using Java inferrer. -(Norwegian)- EPL- language- 0.9- Hallvard Trættebergreopening<tr> <td><a href="">POOSL IDE</a></td> <td>POOSL IDE is an Eclipse-based tool for editing and debugging POOSL models (Parallel Object-Oriented Specification Language). It is used to describe and simulate (embedded) system architectures for early evaluation of key structural and behavioural concepts, requirements and performance.</td> <td>Closed source</td> <td>Language</td> <td>2.x</td> <td><a href="">Embedded Systems Innovation by TNO</a></td></tr>	79.0
id=402669	REOPENED	TMF	Xtext	2.4.1	PC Linux	P3 normal	Project Inbox	2013-03-07 11:12 EST by	Victor Noël	2013-05-31 12:47 EDT (	2 users	Hi,I have an Ecore model M1 for which I generate a Java API using the mwe2's EcoreGenerator component.I then have an Xtext grammar for which I generate a Java API using the xtext's EcoreGeneratorFragment fragment.Some of the classes of the grammar are extending classes from M1.When there is Custom implementations used in M1 for these classes, the generated implementations in the grammar do not refer to the Custom implementation but to the default one instead.Shouldn't EcoreGeneratorFragment take Custom implementation into account?Or is there another way of doing that?I saw that theseems to be talking about something similar, but when I read the content, I wasn't sure any more, I didn't understand anything from it and it didn't seem to be linked to my problem…	(In reply to)>So far I'm afraid it doesn't. A workaround is to introduce a new subclass inside your M1 that extends the class that has a "custom" implementation. On the grammar level you can then extend this new subclass.Hi,Thank you for the workaround, actually, that's exactly what I did :)This works properly if you add the lookup path for the referenced packages, e.g. this is how we generate Xbase itself:component = org.eclipse.emf.mwe2.ecore.EcoreGenerator { genModel = "platform:/resource/${projectName}/model/Xbase.genmodel" srcPath ="platform:/resource/${projectName}/src" srcPath ="platform:/resource/org.eclipse.xtext.common.types/src"}Please note the second #srcPath that refers to the common types. Please reopen if I missed something.Hi,Unfortunately, I generate my language using EcoreGeneratorFragment and not EcoreGenerator.EcoreGeneratorFragment does not have this srcPath property, and wouldn't know what to do with it.But maybe is there a way to generate a language (with an inferred meta-model) using EcoreGenerator?Hi, I think this is still a problem, and it is bothering when having rules that extends the commons type for example.See:Thank you	5.0
id=391210	REOPENED	TMF	Xtext	2.4.2	PC Windows 7	P3 major	Project Inbox	2012-10-05 06:10 EDT by	David Hofmann	2014-08-12 11:35 EDT (	3 users	CreatedEcore ModelMy grammar (derived from Xbase) is based on a model which extends Xbase classes (attached as screenshot).The grammar overwrites the XFeatureCall rule from Xbase as follows:grammar my.package.FeatureCallDsl with org.eclipse.xtext.xbase.Xbaseimport "platform:/resource/my.plugin/model/model.ecore"import "" as xbaseimport "" as typesXFeatureCall returns CustomFeatureCall: {CustomFeatureCall} (declaringType=[types::JvmDeclaredType|StaticQualifier])? ('<' typeArguments+=JvmArgumentTypeReference (',' typeArguments+=JvmArgumentTypeReference)* '>')? feature=[types::JvmIdentifiableElement|IdOrSuper] (=>explicitOperationCall?='(' ( featureCallArguments+=XExpression (',' featureCallArguments+=XExpression)* )? ')')?;When generating Xtext artifacts the following error occurs:...Caused by: java.lang.IllegalStateException: Problem parsing 'classpath:/my/package/FeatureCallDsl.xtext':[TransformationDiagnostic: null:7 Cannot add supertype 'XExpression' to sealed type 'CustomFeatureCall'. (ErrorCode: CannotCreateTypeInSealedMetamodel)] at org.eclipse.xtext.generator.LanguageConfig.setUri(LanguageConfig.java:190) ... 42 moreAs you can see in the model, CustomFeatureCall extends XFeatureCall, which in turn is an XExpression, so this should normally be possible.	Might be related to, but in my case no generated model is used. (I don't have permissions to set the see also field...)After getting error message like "cannot add supertype XExpression to XExpression" I figured out that the same class is referenced multiple times, but with different URIs.I could solve the issue by consistently replacing platform:/resource URIs with Namespaced-based ("http://...") URI references. This has to be done in:- The grammar imports and all involved extended grammar imports- In all referenced ecore models (also transitively)Open the .ecore files with a Text editor and replace all occurences ofplatform:/resource/org.eclipse.xtext.xbase/model/Xbase.ecore#with#then the error message disappears.***has been marked as a duplicate of this bug. ***I've got the same issue. In this case working with a grammar which extends a another one different to xBase. As commented incures my problem. Unfortunately, this need to be done in the third party extended grammar.Raising severity, since I don't find a proper workaround when you don't have control to the extended metamodels/grammars.I've created some branches in our respositories, just in case you require to reproduce my specific issue.You need to import "OCL examples" plugins from OCL Git repository [1], branch asbh/xtextBug. In those we have the extended grammars and metamodels.You need to import "QVTo examples" plugins from QVTo Git repository [2], branch asbh/xtextBug. In those we have the extending grammar and metamodels.The offending grammar:- /org.eclipse.qvto.examples.xtext.qvtoperational/src/org/eclipse/qvto/examples/xtext/qvtoperational/QVTOperational.xtextThe workflow which produces the error- /org.eclipse.qvto.examples.build/src/org/eclipse/qvto/examples/build/GenerateQVTOperationalEditor.mwe2The error:1631 [main] ERROR ipse.xtext.generator.LanguageConfig - [TransformationDiagnostic: null:84 Cannot add supertype 'ElementCS' to sealed type 'TagCS'. (ErrorCode: CannotCreateTypeInSealedMetamodel), TransformationDiagnostic: null:89 Cannot add supertype 'ClassifierCS' to sealed type 'ClassCS'. (ErrorCode: CannotCreateTypeInSealedMetamodel), TransformationDiagnostic: null:93 Cannot add supertype 'DataTypeCS' to sealed type 'PrimitiveTypeCS'. (ErrorCode: CannotCreateTypeInSealedMetamodel)]1633 [main] ERROR mf.mwe2.launch.runtime.Mwe2Launcher - Problems instantiating module GenerateQVTOperationalEditor: java.lang.reflect.InvocationTargetExceptionjava.lang.RuntimeException: Problems instantiating module GenerateQVTOperationalEditor: java.lang.reflect.InvocationTargetException at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:95) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:62) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:52) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.run(Mwe2Launcher.java:74) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.main(Mwe2Launcher.java:35)Caused by: org.eclipse.emf.common.util.WrappedException: java.lang.reflect.InvocationTargetException at org.eclipse.emf.mwe2.language.factory.SettingProviderImpl$1$1.setValue(SettingProviderImpl.java:56) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalApplyAssignments(Mwe2ExecutionEngine.java:143) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.inCase(Mwe2ExecutionEngine.java:114) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.xtext.util.PolymorphicDispatcher.invoke(PolymorphicDispatcher.java:291) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalSwitch(Mwe2ExecutionEngine.java:66) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalApplyAssignments(Mwe2ExecutionEngine.java:142) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.inCase(Mwe2ExecutionEngine.java:114) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.xtext.util.PolymorphicDispatcher.invoke(PolymorphicDispatcher.java:291) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalSwitch(Mwe2ExecutionEngine.java:66) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalApplyAssignments(Mwe2ExecutionEngine.java:142) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.inCase(Mwe2ExecutionEngine.java:114) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.xtext.util.PolymorphicDispatcher.invoke(PolymorphicDispatcher.java:291) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalSwitch(Mwe2ExecutionEngine.java:66) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.inCase(Mwe2ExecutionEngine.java:80) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.xtext.util.PolymorphicDispatcher.invoke(PolymorphicDispatcher.java:291) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.internalSwitch(Mwe2ExecutionEngine.java:66) at org.eclipse.emf.mwe2.language.factory.Mwe2ExecutionEngine.create(Mwe2ExecutionEngine.java:62) at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:93) ... 4 moreCaused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.emf.mwe2.language.factory.SettingProviderImpl$1$1.setValue(SettingProviderImpl.java:54) ... 37 moreCaused by: java.lang.IllegalStateException: Problem parsing 'classpath:/org/eclipse/qvto/examples/xtext/qvtoperational/QVTOperational.xtext':[TransformationDiagnostic: null:84 Cannot add supertype 'ElementCS' to sealed type 'TagCS'. (ErrorCode: CannotCreateTypeInSealedMetamodel), TransformationDiagnostic: null:89 Cannot add supertype 'ClassifierCS' to sealed type 'ClassCS'. (ErrorCode: CannotCreateTypeInSealedMetamodel), TransformationDiagnostic: null:93 Cannot add supertype 'DataTypeCS' to sealed type 'PrimitiveTypeCS'. (ErrorCode: CannotCreateTypeInSealedMetamodel)] at org.eclipse.xtext.generator.LanguageConfig.setUri(LanguageConfig.java:211) ... 42 moreCheers,Adolfo.[1] git://git.eclipse.org/gitroot/mdt/org.eclipse.ocl.git[2] git://git.eclipse.org/gitroot/mmt/org.eclipse.qvto.gitAnother smell about this issue, which should be easier to appreciate since the error is reproduced in the own editor:In the EssestinalOCL.text Grammar [1] (which doesn't extend any other one!), if we replace imports using the "platform:/resource..." by the corresponding nsURi one. That is, Replace:import "platform:/resource/org.eclipse.ocl.examples.pivot/model/Pivot.ecore" as pivotimport "platform:/resource/org.eclipse.ocl.examples.xtext.base/model/BaseCST.ecore" as baseimport "platform:/resource/org.eclipse.ocl.examples.xtext.essentialocl/model/EssentialOCLCST.ecore"by:import "" as pivotimport "" as baseimport ""Two errors come up in the editor (see screenshot1). For instance:"Cannot add supertype 'TypedRefCS' to sealed type 'CollectionTypeCS'."However, as we can check in the metamodel [2] "CollectionTypeCS" indeed has "TypedRefCS" as a supertype (see screenshot2).[1] /org.eclipse.ocl.examples.xtext.essentialocl/src/org/eclipse/ocl/examples/xtext/essentialocl/EssentialOCL.xtext[2] /org.eclipse.ocl.examples.xtext.essentialocl/model/EssentialOCLCST.ecoreCreatedUnexpected errors in editorCreatedMetamodel excerpt(In reply to)This is another form of meta-model schizophrenia.andare defined by projects developed before Xtext 2.2 introduced the requirement for all development time metamodel souirces to have an Xtext nature.Consequently the importgoes to the installed plugin while the relative reference fromgoes to the project Ecore file.Suggestion:It would be really helpful to expand the diagnostics to give full paths and more details.e.g. Cannot add supertype '' to sealed type 'EssentialOCLCST.ecore#/CollectionTypeCS' because 'BaseCST.ecore#/TypedRefCS is already a supertype.NB. The helpful/confusing/irregular provision of the nsURI as a development time resource should be unwound for these diagnostics.	8.0
id=410479	REOPENED	TMF	Xtext	2.4.1	PC Windows 7	P3 enhancement	Project Inbox	2013-06-11 10:05 EDT by	Robert Hilbrich	2016-08-24 01:54 EDT (	3 users	Hi,I use a grammar with contains 'Core'. This seems to crash the document partitioner. When I change 'Core' to 'Kern' everything works just fine.Here is an excerpt from the XText grammar:[...]// fails!Core: 'Core' name=ID '{'[...]// works!Core: 'Kern' name=ID '{'[...]Here is the error output:!MESSAGE org.eclipse.xtext.ui.editor.model.DocumentPartitioner - Detected unexpected state in document partitioner. Please file a bug with the following information attached:Document content after the event was applied:System name = "Small System";}Hardware { Board Board1 { Manufacturer = "Diehl"; RAM capacity = 10; ROM capacity = 10; Processor Processor1 { Manufacturer = "Intel"; Type = "i7"; Design assurance level = A; Core salkjlksaj ore Core1 { Capacity = 10; Architecture = "x86"; } } } Board Board2 { Manufacturer = "EADS"; RAM capacity = 5; ROM capacity = 5; Processor Processor1 { Manufacturer = "Intel"; Type = "i7"; Design assurance level = A; Kern Core1 { Capacity = 10; Architecture = "x86"; } } }}Software { Application A1 { Criticality level = A; Core utilization = 9; Required ROM capacity = 9; Identical parallel threads = 1; }}<<<Document event: offset: 281, length: 0, timestamp: 22text:> <Best regards,Robert Hilbrich	When I try this out with a small grammar like this:grammar org.xtext.example.mydsl1.MyDsl with org.eclipse.xtext.common.Terminalsgenerate myDsl ""Model: greetings+=Core*; Core: 'Core' name=ID '{' '}';I cannot reproduce the problem. Could you please provide a small grammar to reproduce the problem.Thanks.CreatedXText grammarCreatedExample file in the runtime eclipse(In reply to)I attached an XText grammar and an example to the bug description. In order to reproduce this bug, I simply create a new XText Project ("MyDsl") and use the grammar I provided above to generate the XText artifacts. When I try to enter an example file in the runtime eclipse, the error appears when I get to the "Core" definition.(In the meantime, I updated my installation to eclipse 4.3 RC3 and XText 2.4.2, however the behavior does not change.)I hope this helps,RobertI investigated this issue a little bit further. The following rules seem to cause the internal error:-------------Application: 'Application' name=ID '{' 'Core utilization' '=' utilization=INT ';' '}';-------------and-------------Core: 'Core' name=ID '{' 'Capacity' '=' capacity=INT ';' '}';-------------I suppose that the document partitioner has somehow difficulties in deciding which rule to apply when parsing the token 'Core'.Is this a bug or simply a restricted capability of the parser?Best regards,Roberta simple workaround (and in fact a best practice) is to not include whitespace in keywords but make them multiple keywords instead:Application: 'Application' name=ID '{' 'Core' 'utilization' '=' utilization=INT ';' '}';Jan proposed to add a warning and a quickfix for this case.the parser no longer crashes.additionally you get a warning regarding thespace in the keyword which needs to be fixed anyway in this usecase.quickfix seems not to be offered in this case.	9.0
id=407831	REOPENED	TMF	Xtext	2.4.1	PC Mac OS X	P3 normal	Project Inbox	2013-05-12 16:14 EDT by	Hendrik Eeckhaut	2013-05-13 03:33 EDT (	1 user	If a non-project file is opened with an Xtext editor (see #327374), "Open Declaration" and "Find References" does not work. Occurrence highlighting however, seems to work fine.	Open Declaration and FindReferences rely on the index which is maintained by the incremental eclipse builder. That one is based on the workspace, so only workspace resources are included in the index.I don't see how we could add support for indexing external files with reasonable effort. Keeping that state in sync would require some kind of lifecycle call backs which Eclipse doesn't provide for external files.Sorry I've read 'Open Type' not 'Open Declaration'.It goes wrong in GenericLanguageSpecificURIEditorOpener.open(...),Storage2UriMapperImpl.getStorages(uri) returns an emptySet for non-platform resources.	3.0
id=375140	REOPENED	TMF	Xtext	2.3.0	Macintosh Mac OS X - Carbon (unsup.)	P3 normal	Project Inbox	2012-03-23 03:21 EDT by	Serano Colameo	2012-08-13 04:58 EDT (	3 users	Build Identifier: Xtext 2.3.0.v2012032010341 [Worker-0] ERROR org.eclipse.xtext.builder.impl.XtextBuilder - java.lang.NullPointerException at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.serialize(JvmModelGenerator.java:1428) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.generateParameter(JvmModelGenerator.java:773) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.generateParameters(JvmModelGenerator.java:752) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator._generateMember(JvmModelGenerator.java:607) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.generateMember(JvmModelGenerator.java:1530) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator$1.apply(JvmModelGenerator.java:209) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator$1.apply(JvmModelGenerator.java:1) at org.eclipse.xtext.xbase.lib.IterableExtensions.forEach(IterableExtensions.java:389) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator._generateBody(JvmModelGenerator.java:214) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.generateBody(JvmModelGenerator.java:1506) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.generateType(JvmModelGenerator.java:149) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator._internalDoGenerate(JvmModelGenerator.java:133) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.internalDoGenerate(JvmModelGenerator.java:1491) at org.eclipse.xtext.xbase.compiler.JvmModelGenerator.doGenerate(JvmModelGenerator.java:122) at org.eclipse.xtext.builder.BuilderParticipant.handleChangedContents(BuilderParticipant.java:259) at org.eclipse.xtext.builder.BuilderParticipant.build(BuilderParticipant.java:194) at org.eclipse.xtext.builder.impl.RegistryBuilderParticipant.build(RegistryBuilderParticipant.java:60) at org.eclipse.xtext.builder.impl.XtextBuilder.doBuild(XtextBuilder.java:160) at org.eclipse.xtext.builder.impl.XtextBuilder.incrementalBuild(XtextBuilder.java:141) at org.eclipse.xtext.builder.impl.XtextBuilder.build(XtextBuilder.java:91) at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199) at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239) at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295) at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351) at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374) at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143) at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241) at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)Reproducible: AlwaysSteps to Reproduce:1. create xtext domainmodel example2. compile & start runtime eclipse env3. create a project & dmodel file4. add some entity definitions and save5. see stacktrace in details	ok, the problem seems to be in the inferrer.-------------------------------------class DomainmodelJvmModelInferrer extends AbstractModelInferrer { @Inject extension JvmTypesBuilder @Inject extension IQualifiedNameProvider def dispatch infer(Entity entity, IJvmDeclaredTypeAcceptor acceptor, boolean prelinkingPhase) { acceptor.accept( entity.toClass( entity.fullyQualifiedName ) ).initializeLater [ documentation = entity.documentation if (entity.superType != null) superTypes += entity.superType.cloneWithProxies val procedure = entity.newTypeRef(typeof(Procedure1), it.newTypeRef()) members += entity.toConstructor() []/*** disable the following statement block and it works... members += entity.toConstructor() [ parameters += entity.toParameter("initializer", procedure) body = [it.append("initializer.apply(this);")] ]************/Somehow the type of the constructors JvmFormalParameter is null...RegardsSeranoYou don't have xbase.lib on the project's class path, do you?(In reply to)Ups, that was it!ThanksSeranoI still would like to improve the behavior for this case.***has been marked as a duplicate of this bug. ***	5.0
id=415028	REOPENED	TMF	Xtext	2.4.2	PC All	P3 normal	Project Inbox	2013-08-14 04:16 EDT by	Jens von Pilgrim	2013-08-15 04:34 EDT (	2 users	The generated GrammarAccess class is created differently, probably due to different JDKs. I would assume that some map is used somewhere, and the order of the map is not the same for different JDKs. This leads to unnecessary diffs and commits if the code is developed by a team using some SCM tool. Maybe you could use a sorted map or something like that.The following code snippet shows the difference as they are created for my grammar (there are several similar lines): // -> Can not leave rule 'TerminalRule' since the current object 'TerminalRule' has features with unconsumed values: 'type':1, 'fragment':1vs. // -> Can not leave rule 'TerminalRule' since the current object 'TerminalRule' has features with unconsumed values: 'fragment':1, 'type':1As you can see, 'type' and 'fragment' are simply reordered.Regards,Jens	pushed to review. please verify.I wonder why there are these error messages at all in the grammar access.	2.0
id=427315	REOPENED	TMF	Xtext	2.5.0	PC Mac OS X	P3 enhancement	Project Inbox	2014-02-03 14:03 EST by	Sven Efftinge	2014-08-20 04:40 EDT (	2 users	Stepping and the like should be faster.	Please reopen with some steps to reproduce if the problem pops up again.Set a breakpoint in org.eclipse.xtend.core.tests.typesystem.AssignabilityTest.testFunctionTypes_08()And step through the execution flow.while running TypeReferenceAssignabilityTestUnfortunately not reliably reproducable.	4.0
id=418554	REOPENED	TMF	Xtext	unspecified	PC Windows Vista	P3 normal	Project Inbox	2013-10-02 17:24 EDT by	Ed Willink	2013-10-11 09:14 EDT (	1 user	M2 and earlier.When starting up a nested Eclipse with IOException breakpoints I regularly get the trace below. looks like the protocol for binary EMF files is slightly different.Thread [Worker-5] (Suspended (exception IOException)) owns: Object (id=1338) owns: GrammarProvider (id=1339) owns: Class<T> (com.google.inject.internal.InternalInjectorCreator) (id=1317) owns: Collections$SynchronizedMap<K,V> (id=1340) owns: ResourceServiceProviderDescriptor (id=1341) owns: ClusteringBuilderState (id=1342) XMLResourceImpl$1(BinaryResourceImpl$EObjectInputStream).fill() line: 2695 XMLResourceImpl$1(BinaryResourceImpl$EObjectInputStream).readByte() line: 2685 XMLResourceImpl$1(BinaryResourceImpl$EObjectInputStream).readCompressedInt() line: 2822 XMIResourceImpl(XMLResourceImpl).doLoad(InputStream, Map<?,?>) line: 219 XMIResourceImpl(ResourceImpl).load(InputStream, Map<?,?>) line: 1518 XMIResourceImpl(ResourceImpl).load(Map<?,?>) line: 1297 SynchronizedXtextResourceSet(ResourceSetImpl).demandLoad(Resource) line: 259 SynchronizedXtextResourceSet(ResourceSetImpl).demandLoadHelper(Resource) line: 274 SynchronizedXtextResourceSet(XtextResourceSet).getResource(URI, boolean) line: 201 SynchronizedXtextResourceSet.getResource(URI, boolean) line: 26 BaseEPackageAccess.loadResource(String, XtextResourceSet) line: 52 BaseEPackageAccess.loadGrammarFile(String, XtextResourceSet) line: 44 GrammarProvider.getGrammar(Object) line: 60 TerminalsGrammarAccess.internalFindGrammar(GrammarProvider) line: 37 TerminalsGrammarAccess.<init>(GrammarProvider) line: 33 NativeConstructorAccessorImpl.newInstance0(Constructor, Object[]) line: not available [native method] NativeConstructorAccessorImpl.newInstance(Object[]) line: 57 DelegatingConstructorAccessorImpl.newInstance(Object[]) line: 45 Constructor<T>.newInstance(Object...) line: 525 DefaultConstructionProxyFactory$1.newInstance(Object...) line: 85 ConstructorInjector<T>.construct(Errors, InternalContext, Class<?>, boolean) line: 85 ConstructorBindingImpl$Factory<T>.get(Errors, InternalContext, Dependency<?>, boolean) line: 254 ProviderToInternalFactoryAdapter$1.call(InternalContext) line: 46 InjectorImpl.callInContext(ContextualCallable<T>) line: 1031 ProviderToInternalFactoryAdapter<T>.get() line: 40 Scopes$1$1.get() line: 65 InternalFactoryToProviderAdapter<T>.get(Errors, InternalContext, Dependency<?>, boolean) line: 40 SingleParameterInjector<T>.inject(Errors, InternalContext) line: 38 SingleParameterInjector<T>.getAll(Errors, InternalContext, SingleParameterInjector<?>[]) line: 62 ConstructorInjector<T>.construct(Errors, InternalContext, Class<?>, boolean) line: 84 ConstructorBindingImpl$Factory<T>.get(Errors, InternalContext, Dependency<?>, boolean) line: 254 ProviderToInternalFactoryAdapter$1.call(InternalContext) line: 46 InjectorImpl.callInContext(ContextualCallable<T>) line: 1031 ProviderToInternalFactoryAdapter<T>.get() line: 40 Scopes$1$1.get() line: 65 InternalFactoryToProviderAdapter<T>.get(Errors, InternalContext, Dependency<?>, boolean) line: 40 FactoryProxy<T>.get(Errors, InternalContext, Dependency<?>, boolean) line: 54 SingleFieldInjector.inject(Errors, InternalContext, Object) line: 53 MembersInjectorImpl<T>.injectMembers(T, Errors, InternalContext, boolean) line: 110 ConstructorInjector<T>.construct(Errors, InternalContext, Class<?>, boolean) line: 94 ConstructorBindingImpl$Factory<T>.get(Errors, InternalContext, Dependency<?>, boolean) line: 254 ProviderToInternalFactoryAdapter$1.call(InternalContext) line: 46 InjectorImpl.callInContext(ContextualCallable<T>) line: 1031 ProviderToInternalFactoryAdapter<T>.get() line: 40 Scopes$1$1.get() line: 65 InternalFactoryToProviderAdapter<T>.get(Errors, InternalContext, Dependency<?>, boolean) line: 40 InternalInjectorCreator$1.call(InternalContext) line: 204 InternalInjectorCreator$1.call(InternalContext) line: 198 InjectorImpl.callInContext(ContextualCallable<T>) line: 1024 InternalInjectorCreator.loadEagerSingletons(InjectorImpl, Stage, Errors) line: 198 InternalInjectorCreator.injectDynamically() line: 179 InternalInjectorCreator.build() line: 109 Guice.createInjector(Stage, Iterable<Module>) line: 95 Guice.createInjector(Iterable<Module>) line: 72 Guice.createInjector(Module...) line: 62 Activator(Activator).createInjector(String) line: 67 Activator(Activator).getInjector(String) line: 55 XtextExecutableExtensionFactory.getInjector() line: 26 XtextExecutableExtensionFactory(AbstractGuiceAwareExecutableExtensionFactory).create() line: 49 ConfigurationElement.createExecutableExtension(String) line: 262 ConfigurationElementHandle.createExecutableExtension(String) line: 55 ResourceServiceProviderDescriptor.get(URI, String) line: 39 ResourceServiceProviderRegistryImpl$InternalData.getServiceProvider(URI, String) line: 40 ResourceServiceProviderRegistryImpl.getResourceServiceProvider(URI, String) line: 77 ResourceServiceProviderRegistryImpl.getResourceServiceProvider(URI) line: 93 UriValidator.isValid(URI, IStorage) line: 27 Storage2UriMapperJavaImpl$1.getURI(IJarEntryResource, PackageFragmentRootWalker$TraversalState) line: 217 Storage2UriMapperJavaImpl$1(SourceAttachmentPackageFragmentRootWalker<T>).handle(IJarEntryResource, TraversalState) line: 279 Storage2UriMapperJavaImpl$1(PackageFragmentRootWalker<T>).traverse(IJarEntryResource, boolean, TraversalState) line: 100 Storage2UriMapperJavaImpl$1(PackageFragmentRootWalker<T>).traverse(IPackageFragment, boolean, TraversalState) line: 88 Storage2UriMapperJavaImpl$1(PackageFragmentRootWalker<T>).traverse(IPackageFragmentRoot, boolean) line: 65 Storage2UriMapperJavaImpl$1(SourceAttachmentPackageFragmentRootWalker<T>).traverse(IPackageFragmentRoot, boolean) line: 168 Storage2UriMapperJavaImpl.initializeData(IPackageFragmentRoot) line: 230 Storage2UriMapperJavaImpl.getCachedData(IPackageFragmentRoot) line: 169 Storage2UriMapperJavaImpl.updateCache(IJavaProject) line: 323 Storage2UriMapperJavaImpl.initializeCache() line: 357 ClusteringBuilderState(AbstractBuilderState).load() line: 62 ClusteringBuilderState(AbstractBuilderState).ensureLoaded() line: 69 ClusteringBuilderState(AbstractBuilderState).getAllResourceDescriptions() line: 89 JdtToBeBuiltComputer(ToBeBuiltComputer).doRemoveProject(IProject, IProgressMonitor) line: 56 JdtToBeBuiltComputer(ToBeBuiltComputer).removeProject(IProject, IProgressMonitor) line: 52 JdtToBeBuiltComputer.removeProject(IProject, IProgressMonitor) line: 78 ProjectOpenedOrClosedListener.scheduleRemoveProjectJob(IProject) line: 125 ProjectOpenedOrClosedListener$1.visit(IResourceDelta) line: 102 ResourceDelta.accept(IResourceDeltaVisitor, int) line: 69 ResourceDelta.accept(IResourceDeltaVisitor, int) line: 80 ResourceDelta.accept(IResourceDeltaVisitor) line: 49 ProjectOpenedOrClosedListener.resourceChanged(IResourceChangeEvent) line: 87 ComposedResourceChangeListener.resourceChanged(IResourceChangeEvent) line: 29 NotificationManager$1.run() line: 291 SafeRunner.run(ISafeRunnable) line: 42 NotificationManager.notify(ResourceChangeListenerList$ListenerEntry[], IResourceChangeEvent, boolean) line: 285 NotificationManager.broadcastChanges(ElementTree, ResourceChangeEvent, boolean) line: 149 Workspace.broadcastPostChange() line: 396 Workspace.endOperation(ISchedulingRule, boolean, IProgressMonitor) line: 1531 RefreshJob(InternalWorkspaceJob).run(IProgressMonitor) line: 45 Worker.run() line: 53	For backwards compatibility the code first tries to load a *.xtextbin file and if that doesn't exist (i.e. it throws the exception from) it looks for the old xmi version. See org.eclipse.xtext.service.GrammarProvider.getGrammar(Object)I guess you have a language which you haven't regenerated recently so it still loads the grammar from *.xmi? Please reopen if I'm wrong.(In reply to Sven Efftinge from)That may be, but it's "classpath:/org/eclipse/xtext/Xtext.xtextbin" that is the URI of the problem resource.(In reply to Ed Willink from)Could you check whether the file is contained in the jar(org.eclipse.xtext) you are using and whether it has content?After instrumenting BinaryResourceImpl.EObjectInputStream.fill() it seems that for my grammar, a series of reads, none of which retuirn 0 or -1. Whereas for Xtext.xtextbin, a series of reads occur the last of which returns -1.It would seem that the Xtext processing is attempting to read excessively.	4.0
id=431213	REOPENED	TMF	Xtext	2.5.0	PC Mac OS X	P3 normal	Project Inbox	2014-03-26 06:35 EDT by	Moritz Eysholdt	2014-07-28 04:27 EDT (	2 users	newArrayList and newHashSet are quite convenient. It would be nice if there would be a utility function that can convert a self-implemented linked list into an Iterable or Iterator.I'm aware this scenario can easily be implemented using while-loop or a 'tradition' for-loop. However, both force me into imperative programming. Sometimes it's nice to stay functional.Example:----------------- Main.xtend -------------------import static extension IterableLiterals.*class Main { def static void main(String[] args) { val item = new MyLinkedListItem => [ name = "first" next = new MyLinkedListItem => [ name = "second" next = new MyLinkedListItem => [ name = "third" next = new MyLinkedListItem => [ name = "fourth" ] ] ] ] for (x : item.newIterable[i|i.next]) println("imperative:" + x.name) println(item.newIterable[next].map["functional:" + name].join("\n")) }}class MyLinkedListItem { @Property String name @Property MyLinkedListItem next}--------------------------------------------------------------- stdout ---------------------imperative:firstimperative:secondimperative:thirdimperative:fourthfunctional:firstfunctional:secondfunctional:thirdfunctional:fourth---------------------------------------------------------------- IterableExtensions.java -------------import java.util.Iterator;import com.google.common.base.Function;public class IterableLiterals { /** * Returns an Iterable that will return <i> head </i> as its first * item and use the function <i> trail </i> to compute all follow-up items. * * @param head * @param trail * @return */ public static <T> Iterable<T> newIterable(final T head, final Function<T, T> tail) { return new Iterable<T>() { @Override public Iterator<T> iterator() { return IteratorLiterals.newIterator(head, tail); } }; }}---------------------------------------------------------------------------- IteratorExtensions.java --------------import java.util.Iterator;import com.google.common.base.Function;public class IteratorLiterals { /** * Returns an Iterator that will return <i> head </i> as its first item * and use the function <i> trail </i> to compute all follow-up items. * * @param head * @param trail * @return */ public static <T> Iterator<T> newIterator(final T head, final Function<T, T> tail) { return new Iterator<T>() { private T next = head; @Override public boolean hasNext() { return next != null; } @Override public T next() { T oldNext = this.next; this.next = tail.apply(this.next); return oldNext; } @Override public void remove() { throw new UnsupportedOperationException(); } }; }}------------------------------------------------	Pushed to reviewI'd like to discuss the added value of this function.The potential use cases can be solved by using Guava's AbstractIterator or TreeTraverser. This has some syntactic overhead, but we currently don't see it used often enough to put a shortcut into the standard lib.Postponed until there are better use cases for this.	3.0
id=447805	REOPENED	TMF	Xtext	2.7.1	PC Windows 7	P3 normal	Project Inbox	2014-10-19 07:40 EDT by	Stephan Herrmann	2015-11-11 04:15 EST (	2 users	I have a maven project A containing Xtext models, which has a dependency on another Xtext project B. Models from A are referring to elements in models from B.Resolution of these xrefs sometimes fails. As debugging shows, this happens, when B is reachable from A by a dependency chain via some project C that is not an Xtext project (per nature & builder). If that dependency chain exists it does not deterministically help to have a direct dependency A -> B, B *may* still be found via C.I checked if it would be reasonable to enforce that any dependency exposing xtext models should have Xtext nature&builder, but in a plain Maven setting based on just one flat classpath I see no way to prevent exposure of Xtext projects via non-Xtext projects. (In an OSGi setting the problem would not occur as long as you prevent re-export of Xtext projects via non-Xtext projects, what we're talking plain Maven here).	Createdproposed fixThe bug can be traced down to method org.eclipse.xtext.ui.containers.JavaProjectsStateHelper.getJarWithEntry(URI)The attached modified version succeeds to fix the problem by also consulting the project as found in the storage. I could observe that storage2Project contains entries where (fragmentRoot extracted from storage2Project.getFirst()): fragmentRoot.getProject() != storage2Project.getSecond()I assume this happens as an optimization, avoiding to create multiple package fragment roots for the same library. The modified method recovers lost information, by mapping the given fragmentRoot back into the correct project.BTW, the final stanza if (result != null) result = fragmentRoot;looks funny. I'd expect either if (fragmentRoot != null)or if (result == null)but I don't really know what's supposed to be achieved here.BTW2: I found no easy way using guice to bind my custom version of JavaProjectsStateHelper in a multi-language setting. The easiest approach I found is applying my fix using Object Teams :)Is there a canonical way in Xtext to consistently override bindings defined in org.eclipse.xtext.ui.shared.internal.SharedContributionWithJDT.Delegate?I'll look into it.There is no canonical way to override the impl for all languages.You could of course use your own impl only for your languages, though.(In reply to Stephan Herrmann from)I think this is all that is needed, such that xtext enabled projects get preferred but in case there is none, we use the first java project found.(In reply to Sven Efftinge from)I think we should consider this for 2.7.3.Pushed to maintenance for review. Will cherry-pick for master(In reply to Sebastian Zarnekow from)Sorry, but this doesn't resolve the problem.I had to dig a bit deeper to find the root cause:In Storage2UriMapperJavaImpl.getStorages(URI) you are collecting a result list by adding pairs like so: result.add(Tuples.create(storage, root.getJavaProject().getProject()));Problem is: while "second" nicely enumerates all the projects that refer to the given jar, "first" constantly refers to one JarEntryFile, which seems to be rooted in the first of all relevant projects.So, when JavaProjectsStateHelper.getJarWithEntry(URI) loops over the result list, this loop is futile because it constantly uses the same "storage" (JarEntryFile) from storage2project.getFirst() over and over.We still need to be lucky to find the jar via an Xtext project, because only one JarEntryFile is ever tried.The information from storage2Project.getSecond() needs to be consulted one way or other, but never is.My proposed fix frommay not elegant, but it fixes the bug.FYI, inwe're facing a problem which reminds me of this bug:It seems that in both cases - we have several IPackageFragmentRoot;s capturing the references from different projects towards a shared library / jar- it is relevant via which chain of dependencies we reach a given jarJDT's Java model seems to deliberately implement the following anomaly: each IJavaElement (incl. IClassFile) has an ancestor of type IJavaProject, yet through caching several IClassFiles with different ancestry are folded into just one instance. In the context ofI observed situations like: type.getAncestor(IJavaElement.JAVA_PROJECT) != type.getParent().getAncestor(IJavaElement.JAVA_PROJECT)I'm wondering if the existing Xtext implementation is a workaround for a variant of this anomaly in JDT? Is Xtext, too, experiencing difficulties from too-effective caching in the Java model?Maybe not, because the problem inconcerns IClassFile, whereas Xtext seems to focus just on IPackageFragment and IPackageFragmentRoot, right? Just wondering...	9.0
id=463382	REOPENED	TMF	Xtext Errors	2.9.0	All All	P3 normal	Project Inbox	2015-03-29 06:03 EDT by	EPP Error Reports	2015-11-11 04:13 EST (	3 users	The following incident was reported via the automated error reporting: code: 0 plugin: org.apache.log4j_1.2.15.v201012070815 message: HIDDEN fingerprint: 89fd5c29 exception class: org.eclipse.xtext.formatting2.internal.ConflictingRegionsException exception message: HIDDEN number of children: 0 org.eclipse.xtext.formatting2.internal.ConflictingRegionsException: HIDDEN at org.eclipse.xtext.formatting2.internal.TextSegmentSet.handleConflict(TextSegmentSet.java:66) at org.eclipse.xtext.formatting2.internal.ArrayListTextSegmentSet.insertAtIndex(ArrayListTextSegmentSet.java:101) at org.eclipse.xtext.formatting2.internal.ArrayListTextSegmentSet.add(ArrayListTextSegmentSet.java:45) at org.eclipse.xtext.formatting2.internal.FormattableDocument.addReplacer(FormattableDocument.java:69) at org.eclipse.xtend.core.formatting2.RichStringFormatter.setNewLines(RichStringFormatter.java:231) at org.eclipse.xtend.core.formatting2.RichStringFormatter._format(RichStringFormatter.java:171) at org.eclipse.xtend.core.formatting2.RichStringFormatter.format(RichStringFormatter.java:472) at org.eclipse.xtend.core.formatting2.XtendFormatter._format(XtendFormatter.java:706) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:841) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:355) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:853) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter.formatExpressionsMultiline(XbaseFormatter.java:2362) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:2237) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:892) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter.formatCommaSeparatedList(XbaseFormatter.java:252) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter.formatFeatureCallParams(XbaseFormatter.java:362) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:674) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:865) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter.formatExpressionsMultiline(XbaseFormatter.java:2362) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:1395) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:889) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:1050) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:904) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter.formatExpressionsMultiline(XbaseFormatter.java:2362) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:1395) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:889) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:1124) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:901) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter.formatExpressionsMultiline(XbaseFormatter.java:2362) at org.eclipse.xtext.xbase.formatting2.XbaseFormatter._format(XbaseFormatter.java:1395) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:889) at org.eclipse.xtend.core.formatting2.XtendFormatter._format(XtendFormatter.java:649) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:832) at org.eclipse.xtend.core.formatting2.XtendFormatter.formatBody(XtendFormatter.java:298) at org.eclipse.xtend.core.formatting2.XtendFormatter._format(XtendFormatter.java:220) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:823) at org.eclipse.xtend.core.formatting2.XtendFormatter._format(XtendFormatter.java:135) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:931) at org.eclipse.xtext.formatting2.AbstractFormatter2._format(AbstractFormatter2.java:182) at org.eclipse.xtend.core.formatting2.XtendFormatter.format(XtendFormatter.java:850) at org.eclipse.xtext.formatting2.AbstractFormatter2.format(AbstractFormatter2.java:245) at org.eclipse.xtext.ui.editor.formatting2.ContentFormatter.exec(ContentFormatter.java:89) at org.eclipse.xtext.ui.editor.formatting2.ContentFormatter$FormattingUnitOfWork.exec(ContentFormatter.java:56) at org.eclipse.xtext.ui.editor.formatting2.ContentFormatter$FormattingUnitOfWork.exec(ContentFormatter.java:1) at org.eclipse.xtext.resource.OutdatedStateManager.exec(OutdatedStateManager.java:121) at org.eclipse.xtext.ui.editor.model.XtextDocument$XtextDocumentLocker.internalReadOnly(XtextDocument.java:512) at org.eclipse.xtext.ui.editor.model.XtextDocument$XtextDocumentLocker.priorityReadOnly(XtextDocument.java:477) at org.eclipse.xtext.ui.editor.model.XtextDocument.priorityReadOnly(XtextDocument.java:142) at org.eclipse.xtext.ui.editor.formatting2.ContentFormatter.format(ContentFormatter.java:102) at org.eclipse.jface.text.source.SourceViewer.doOperation(SourceViewer.java:1023) at org.eclipse.jface.text.source.projection.ProjectionViewer.doOperation(ProjectionViewer.java:1501) at org.eclipse.xtend.ide.editor.RichStringAwareSourceViewer.doOperation(RichStringAwareSourceViewer.java:260) at org.eclipse.ui.texteditor.TextOperationAction$1.run(TextOperationAction.java:128) at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) at org.eclipse.ui.texteditor.TextOperationAction.run(TextOperationAction.java:126) at org.eclipse.jface.action.Action.runWithEvent(Action.java:473) at org.eclipse.jface.commands.ActionHandler.execute(ActionHandler.java:122) at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:90) at sun.reflect.GeneratedMethodAccessor200.invoke(null:-1) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:483) at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:55) at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:247) at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:229) at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:132) at org.eclipse.e4.core.commands.internal.HandlerServiceHandler.execute(HandlerServiceHandler.java:149) at org.eclipse.core.commands.Command.executeWithChecks(Command.java:499) at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508) at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:210) at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.executeCommand(KeyBindingDispatcher.java:286) at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.press(KeyBindingDispatcher.java:507) at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.processKeyEvent(KeyBindingDispatcher.java:558) at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.filterKeySequenceBindings(KeyBindingDispatcher.java:378) at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.access$0(KeyBindingDispatcher.java:324) at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher$KeyDownFilter.handleEvent(KeyBindingDispatcher.java:86) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1262) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1060) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1085) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1070) at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1112) at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1108) at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1529) at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:4764) at org.eclipse.swt.widgets.Canvas.WM_CHAR(Canvas.java:343) at org.eclipse.swt.widgets.Control.windowProc(Control.java:4645) at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:339) at org.eclipse.swt.widgets.Display.windowProc(Display.java:5042) at org.eclipse.swt.internal.win32.OS.DispatchMessageW(OS.java:-2) at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2549) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3759) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1151) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1032) at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:156) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:648) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:337) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:592) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:138) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:380) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:235) at sun.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-2) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:483) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603) at org.eclipse.equinox.launcher.Main.run(Main.java:1465) General Information: reported-by: Tobse anonymous-id: ef35a7d7-0cbe-4995-a50b-ea7da1b26ef1 eclipse-build-id: 4.5.0.I20150203-1300 eclipse-product: org.eclipse.epp.package.dsl.product operating system: Windows7 6.1.0 (x86_64) - win32 jre-version: 1.8.0_25-b18The following plug-ins were present on the execution stack (*): 1. org.eclipse.core.commands_3.6.100.v20141026-0121 2. org.eclipse.core.databinding.observable_1.4.1.v20140910-2107 3. org.eclipse.core.databinding_1.4.100.v20141002-1314 4. org.eclipse.core.runtime_3.10.0.v20150112-1422 5. org.eclipse.e4.core.commands_0.10.2.v20140424-2344 6. org.eclipse.e4.core.contexts_1.3.100.v20140407-1019 7. org.eclipse.e4.core.di_1.4.0.v20140813-2240 8. org.eclipse.e4.ui.bindings_0.10.200.v20140424-2042 9. org.eclipse.e4.ui.workbench_1.3.0.v20150113-2327 10. org.eclipse.e4.ui.workbench.swt_0.12.100.v20150114-0905 11. org.eclipse.equinox.app_1.3.200.v20130910-1609 12. org.eclipse.equinox.launcher_1.3.0.v20140415-2008 13. org.eclipse.jface_3.11.0.v20150121-1751 14. org.eclipse.jface.text_3.10.0.v20150112-1146 15. org.eclipse.swt_3.104.0.v20150203-2243 16. org.eclipse.ui_3.107.0.v20150107-0903 17. org.eclipse.ui.ide.application_1.0.600.v20150120-1542 18. org.eclipse.ui.ide_3.10.100.v20150126-1117 19. org.eclipse.xtend.core_2.9.0.v201503270548 20. org.eclipse.xtend_2.1.0.v201503260847 21. org.eclipse.xtend.ide_2.9.0.v201503270548 22. org.eclipse.xtext_2.9.0.v201503270548 23. org.eclipse.xtext.ui_2.9.0.v201503270548 24. org.eclipse.xtext.xbase_2.9.0.v201503270548Please note that:* Messages, stacktraces, and nested status objects may be shortened.* Bug fields like status, resolution, and whiteboard are sent back to reporters.* The list of present bundles and their respective versions was calculated by package naming heuristics. This may or may not reflect reality.Other Resources:* Report:* Manual:Thank you for your assistance.Your friendly error-reports-inbox.	I can't do anything with this report because the message is hidden. The message usually contains the code snipped I need to reproduce the exception.FWIW, you may contact the reporter directly and ask him for details or to disable message anonymization. He left his email address [1].[1]Additional comment (just in case you don't know yet how bugzilla states are handled): You may mark this bug with the bugzilla keyword needinfo. If you do so the next user that experiences this issue gets a popup that points him to this bug report.If you close it as invalid or wont fix the reporting system assumes that this stacktrace does not describe a potential bug and will not notify other users.thx for the pointers! I'll leave this on 'needinfo' for a while.	4.0
id=481865	REOPENED	TMF	Xtext	2.8.0	PC Windows NT	P3 critical	Project Inbox	2015-11-10 13:17 EST by	Ed Willink	2016-06-06 07:22 EDT (	4 users	The generated SemanticSequencer contains:public void sequence(ISerializationContext context, EObject semanticObject) { ... switch (semanticObject.eClass().getClassifierID()) { case BaseCSPackage.IMPORT_CS: sequence_ImportCS(context, (ImportCS) semanticObject); which gives a syntax error if the extended editor providing sequence_ImportCS is not also regenerated with 2.9.0. With 2.8.4 the generation gave protected void sequence_ImportCS(EObject context, ImportCS semanticObject) { genericSequencer.createSequence(context, semanticObject); }ISerializationContext is not compatible with the former EObject. Hence the regression problem.	(This is an example of the kind of problem that would go away with flat editors: see)hi Ed,if you setgenerateSupportForDeprecatedContextObject = truein your SerializerFragment for your super-language, both 2.8- and 2.9-sublanguages are supported.(In reply to Moritz Eysholdt from)This option is not available for me in org.eclipse.xtext.generator.serializer.SerializerFragmentBut the super-language has already been generated. Compatibility requires an approach to allow the sub-language to comply with the already generated super-language.So you regenerated the sublanguage but not the super language? Why is that?I assume by sub we mean derived.I regenerated the derived language specifically to see whether Xtext 2.9 was compatible.The converse of regenerating the super-language is much more obviously breaking since new declarations are propgated to clineys.Regenerating the sub-language seems reasonable since it is solely a consumer.e.g. Anyone generating a Ybase++ should be able to do so without regenerating Ybase.As the mentioned property is set to true for xbase, too, I wonder if it should be true by default. Otherwise all sub-languages will see such compiler-errors and then be forced to set that property. If that is the case the property doesn't make much sense at all. Couldn't we just go back to that context object and live with it?This is still a problem in 2.9.0RC2.We need to add that property to the old fragment, too.fix merged in:The fix allows languages to generate a an API that will also work for sub-languages that are generated with Xtext < 2.9.Before a sub-language can be generated with Xtext 2.9, the super language must have been generated with 2.9.Doesn't work with Xtext 2.9.0 on an M4 platform.That is.I have a multi-layered grammar/editor all generated with Xtext < 2.9.I regenerate the most derived layer using Xtext 2.9 and still get inconsistent use of ISerializationContext.suggests it should just work.Reverting to Xtext 2.8.4, (harder than it should be since MWE2-lang 2.9.0M4 cannot be installed with Xtext 2.8.4) and regeneration works correctly.Ping. This was raised to critical by Sebastian. I reopened because it still doesn't work. Any plans?Hi Ed, as there seem to be quite some setup involved (super languages generated in <2.9) it would be cool if you could provide a zip and steps to reproduce it. Thank you!(In reply to Sven Efftinge from)Adolfo: Does the OOMPH OCL setup (? with an install upgrade to Xtext 2.9) then launch Run->Run Configurations...->MWE2 launch->Generate OCL All Editors reproduce?Sven: My understanding of yourwas that you recognized that expecting that everyone use an explicit backward compatibility generator option was unhelpful and so you were going to revert the interface change. Simple 'fix'; eliminate ISerializationContext to restore <2.9 compatibility, then look at providing the compatibility that is now required since this problem was allowed into the 2.9 release.(In reply to Ed Willink from)No, since all editors are regenerated. However, it can be reproduced if you only regenerate one of the derived ones, e.g.Run->Run Configurations...->MWE2 launch->Generate OCL CompleteOCL EditorIt can be reproduced with an Oopmh-based OCL Setup. I did the following:- A Neon Eclipse for committers.- OCL/Development setup (from Eclipse.org).- Run->Run Configurations...->MWE2 launch->Generate OCL CompleteOCL Editor- You then see compilation errors in the SemanticSequencer.As I've understood from this thread:- Xtext guys claim to have fixed: when regenerating super-language with Xtext 2.9, sub-languges in Xtext 2.8 should work without regeneration.- On the contrary, Ed claims to need: when regenerating sub-language with Xtext 2.9, it should always work, even if the super-language is Xtext 2.8 (i.e it's not regenerated with Xtext 2.9).hi Ed,(In reply to Ed Willink from)The following comment explains that this doesn't work:(In reply to Moritz Eysholdt from)the sub-language is the most derived language.I recommend to generate all super languages with Xtext 2.9.x with this configuration: SerializerFragment { generateSupportForDeprecatedContextEObject = true}After you did this, the sub-languages should work no matter whether they're generated with Xtext 2.8.x or 2.9.x.(In reply to Ed Willink from)"everyone" are the people who ship a super language, i.e. a language that is intended to have sub-language in *other* projects. This is true for Xbase and your languages, Ed. It is not true for the very most users because in case they have a super language, they only use it internally and don't encourage other to extend from it. Please comment if I'm missing users/projects here.(In reply to Ed Willink from)ISerializationContext is necessary to support the new grammar features (namely parserrule-parameters and parserrule-fragments) in the serializer. I'm not inclined to remove it.Am I missing something? What stops you from upgrading your super language to Xtext 2.9.x?(In reply to Moritz Eysholdt from)Hi Moritz; sorry lost your comment.Using "generateSupportForDeprecatedContextObject = true" and regenerating from the base language up now works, so progress based on base-language first is now possible. e.g. Neon base-editors can be used by Mars sub-editors.The converse does not work, so clients extending a Mars base-editor must use Mars rather than Neon tooling. Full compatibility requires a "suppressSupportForISerializationContext = true" so that Neon tooling can generate Mars-compatible editors.The latter is a much less important forward compatibility.But what does matter is the ability to generate editors that can be installed on a variety of platforms. Currently the Eclipse OCL/QVTd editors work on Xtext 2.3.1 allowing Juno platform users to install Eclipse OCL without needing to upgrade the Xtext that some other editor plugin may require. If Eclipse OCL's editors are generated with Neon Xtext tooling, they will not be installable on Mars.(There is no Javadoc on generateSupportForDeprecatedContextObject, so no hovertext help appears in the MWE2 editor. I think some documentation would be rather beneficial.)Closing this again also see my comment in.(In reply to Ed Willink from)Ok, Xtext doesn't support the latter kind of compatibility.As stated in. If you want to support Xtext 2.3.1, you need use the generator from 2.3.1.REOPENED becausea) it was not FIXED, possibly WONTFIXed(In reply to Sven Efftinge from)b) You made no comment on.c) It is causing trouble to a user on the Xtext newsgroup see "IllegalValueException when extending EssentialOCL".	18.0
id=511046	REOPENED	Papyrus	Views	3.0.0	PC Windows 7	P3 blocker	vincent lorenzo	2017-01-25 11:42 EST by	vincent lorenzo	2017-01-27 07:57 EST (	3 users	Since the plugin for Property view generation moved, the generation is broken. QVTo file path in java code ha not been updated (I will do it)plugin id in activator has not been updated (I will do it)(+ package has not been rename, but I don't have time for this work)	New Gerrit change created:Gerrit changewas merged to [master].Commit:This commit fix the bug, but doesn't rename the java package to be consistent with the new project name.I close the bugI reopen the bug, because the save of the generated files is broken too.New Gerrit change created:Gerrit changewas merged to [master].Commit:	6.0
id=386387	REOPENED	EMFT.facet	Main	0.2.0	All All	P4 major	Gregoire Dupe	2012-08-01 09:20 EDT by	Camille Letavernier	2015-09-15 08:47 EDT (	2 users	In the CustomizedTreeContentProvider, calling twice to getElements() with the same input returns two different elements.Consequently, TreeViewers cannot preserve the selection when they are refreshed. This also causes the tree to be collapsed after each modification.	I've committed a patch for the bug in the branch 0_2_1.Committed revision 2641.I've committed the same fix in the trunk.Committed revision 2642.The bug should be fixed. Camille, please, could you close this bug until you will be sure that the bug is fixed ?Regards,GrégoireThis only seems to work partially.When adding a new child B to an element A, all children of A (i.e. siblings of B) are collapsed. All other cases seem to work correctly.	3.0
id=111905	REOPENED	GMF-Runtime	General	1.0	PC Windows XP	P5 minor	Alex Boyko	2005-10-07 10:40 EDT by	Steven R. Shaw	2009-08-30 02:50 EDT (	2 users	- Remove special code for selectiing connectors since this has been implemented in the GEF selection tool.	Alex can check this one out.As I understood, we need to modify RubberbandSelectionTool according to the fixes that went in for MarqueeSelectionTool. However, there is still a difference in a way how connections are included into selection between these two tools. The GEF's MarqueeSelectionTool can include connection into selection if both source and target are inside the marquee rectangle, i.e. if both source and target nodes are included into selection. Therefore if marquee rectangle contains connection, but does not fully contain source and target nodes - connection is not selected. The GMF RubberbandSelectionTool doesn't care if source and target nodes are selected and simply selects a connection if it's inside the marquee rectangle, although source and target nodes may not be.I'm not sure what has to be done with this issue now. Is it ok to have MarqueeSelectionTool logic for selecting connections in GMF? or should we leave RubberbandSelectionTool and raise a feature request agaisnt GEF to support RubberbandSelectionTool connection selection?CreatedGEF MarqueeSelectionTool modificationAt the moment this migration is not possible due to the following reasons:1. Connectors selection (mentioned in the previous comment)Currently GEF MarqueeSelectionTool is selecting connectors only if it's source and target are selected nodes. Hence, this selection logic for connector's won't work for GMF, because in GMF we should be able to select connectors contained by the marquee rectangle regardless whether source and target (not necessarily nodes) are selected or not. Also filtering of edit parts that cannot be selected in the MarqueeSelectionTool cannot be adpated by RubberbandSelectionTool (edit parts off the current view port won't be selected)2. The auto-scroll capabilityThis features alters the way marquee selection rectangle is calculated and feedback added. The marquee rectangle start point should not be translated relative to feedback figure for RubberbandSelectionTool, but it must be translated in MarqueeSelectionTool, which is done in a private method.My opinion that instead of requesting new features from GEF's MarqueeSelectionTool, it's better to request more extensible MarqueeSelectionTool, i.e. simply modification of visibility for a couple of private methods and variables.I attached the patch for GEF MarqueeSelectionTool with a modification described above. The patch for migrated RubberbandSelectionTool for proposed MarqueeSelectionTool will be attached nextCreatedMigrated RubberbandSelection tool (for modified GEF MarqueeSelectionTool)The patch for Migrated RubberbandSelection tool for the modified GEF MarqueeSelectionToolThis migration is not possible right now:1) GEF's behavior for selecting connectors is different from the one from current RubberbandSelectionTool.2) Due to the auto-scroll functionality of RubberbandSelectionTool it calculates the bounds for the feedback differently from MarqueeSelectionTool and this affects the feedback drawn and calculation of edit parts within that are within the marquee rectangle. Also, GEF's mechanism for filtering out of edit parts that cannot be selected filters out edit parts outside of current view port (private MarqueeSelectionTool#isFigureVisible(IFigure) method)Marking this issue as to be fixed "later".LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and component Runtime Diagram was the original product and component for this bug	7.0
id=503567	REOPENED	Papyrus-rt	codegen	0.8.0	PC Mac OS X	P4 normal	Ernesto Posse	2016-10-04 13:41 EDT by	Charles Rivet	2016-12-15 09:58 EST (	4 users	From<begin copied text>The remaining issue is whether this fix could be used by codegen or not. Ernesto said that to be able to use this new way to identify system classes, the SystemElementUtils should in no way be dependent from the Papyrus ElementType framework.However, we have conclude here () to put this API in the core plugin (who has already dependencies over ElementType: use 2 extension points defined in org.eclipse.papyrus.infra.types.core.elementTypeSetConfiguration)Beside, in the implementation of SystemElementUtils, I am implicitly using org.eclipse.papyrusrt.umlrt.core.types.ElementTypeUtils;I think That both issues could be fixed (move the SystemEkementUtils to another plugin with no dependencies over elementtype, and change the implementation of systemElementUtils to remove the org.eclipse.papyrusrt.umlrt.core.types.ElementTypeUtils (very easy to do)Now, I can fix this 2 issues but Ernesto should test this fix and change the codegen implementation to remove all other local classes such as org.eclipse.papyrusrt.codegen.utils.RTSModelLibraryUtilsI have no idea of the side effect of this changes on codegen (Ernesto could comment and decide if it could be better to wait for 0.9.0 or if it could gain 0.8.0).<end copied text>	Well, I'm not sure what's the point of the new SystemElements profile. I've seen, but what we are doing in codegen is exactly what Christian suggested once: to know if an element is a "system element", simply check the resource it is located in. If it is the same as the RTS Model library, then it is a "system element". I'm not sure why we would need a whole profile for it, specially from the point of view of code generation. What we have now works, and critically, it doesn't depend on the element-types framework.So maybe there is some use-case for the new capability, but I don't see why we would need to use it in codegen, specially considering that the current solution is very simple and is working.Are there cases where the current solution used by codegen would not work?PS: the RTSModelLibraryUtils class is now in oeprt.external.predefined, and I would recommend *not* to remove it. It provides a facade that the code generator uses. If it is decided that the new utilities must be used, then I would strongly suggest to modify the implementation of the 'isSystemElement' method in that class, otherwise we would have to go all over the code generator adapting those calls. Facades are precisely to isolate this sort of changes and that's why that class exists.This is a continuation bug from a v0.8 bug. If you feel that all the fnctionality fromis done, you can just close this one.I don't see the reason for this one. As per Charles' suggestion, I'll close it as wontfix. If there are compelling reasons to actually use the new System Element Profile by codegen, then this bug can be reopened.I am not sure that having 2 different ways for identifying system elements is a good thing for maintenance.The only problem that I can understand and that can explain why we have 2 different implementations is the fact that the SystemElementsUtils is dependent from the Element type framework. Christian have already created a project to put in any plugins that could be used both by Core and Codegen. I planned to move SystemElementsUtils from the core plugin inorder to be used by Core and by Codegen. I look at the RTSModelLibraryUtils current implementation and I feel that the content of the rts library is hard coded in this class. isSytemElement method calls hasSystemAnnotation. there is also a method to add explicitly anootations to named elements: addSysAnnotation...At the end, if for Codegen, 1) it will be easier to update the RTSModelLibraryUtils each time the rts library change than using the current SytemElementUtils 2) the default language framework is not a usefull api to identify system elements (I think that codegen did not rely on this framework to get system elements)it is OK for me to not continue the effort to make the SystemElementUtils independent from the ElementType framework.I would really like to hear Christian's and Rémi's view on this as well.(In reply to Peter Cigehn from)Asma was writing on my behalf on her previous comment. The goal of the new plugin developed by Christian is to have a much lighter layer, usable even outside Eclipse. I feel always frustrated to have 2 different ways to achieve the same feature (twice a chance to have bugs...) This question should be more targeting new runtime & library developers IMO. Is there really a need to extend the system protocol for example? If not, a hard coded solution seems perfect. If this is crucial for toolsmiths, then I would find really critical to resue the same config for tooling and codegen.I feel we are running in circles with this issue.I completely agree that for maintainability it would be preferable to have just one way of doing it, the problem is this:1) the new System element approach relies on the element types framework2) the element types framework requires Papyrus to be running3) codegen has a critical requirement: it must be able to run in stand-alone, i.e., no Papyrus, not even EclipseIf anyone is able to figure out how to make the element types framework in a plain Java application, without Eclipse, then we can update codegen to use the new capability, otherwise we cannot use it because we would not be able to satisfy one of our key requirements.(In reply to Ernesto Posse from)Goal is exactly to extract non-element type dependents to this new plugin. And the SystemElementUtils should be part of it. So this class would not depend any more on the element type (or be part of a plugin that depends on element types), you could reuse it.As far as I remember, I think there is only one method that depends on the element types (and that could be rewrite not to be element type dependent)Ok, if the system element approach can rid itself from the element types, then we can replace our current approach.So maybe this bug could be reopened, but it should be made dependent on the bug that deals with removing the element types from the system elements plugin.In terms of implementation, I wouldn't remove org.eclipse.papyrusrt.codegen.utils.RTSModelLibraryUtils, but rather just modify its implementation of the isSystemElement method, to cause the least amount of disruption otherwise we would have to modify the code generator in many places. This utilities library provides a useful façade for the code generator. The rest of the tool doesn't need to care about it.Cool, I created(to track the change of the SystemElementUtils).should be resolved before opening this bug.(In reply to Ernesto Posse from)Reopening again, now whenhave been written and this bug marked as depending on it.After discussing with Ernesto and Simon, moving to future as it does not affect the capability to generate code. I would, however, still be a good idea to harmonise this and provide a single, consistent API for all Papyrus-RT components.	13.0
id=495574	REOPENED	Viatra	Query	1.3.0	PC Windows NT	P3 normal	Zoltan Ujhelyi	2016-06-07 04:04 EDT by	Balazs Grill	2017-01-25 08:07 EST (	1 user	CreatedStack traceIf the target platform is inconsistent while building viatra queries, the builder puts a 'null' marker on the first line of all VQL's. It is expected that the builder throws an error in this case, but it should contain more information about how it went wrong. From the error log it looks like NPEs are thrown by XText.	Can you detail how the target platform was inconsistent? I am asking this because we have some basic safeguards in place that verifies that viatra query runtime is in place. If not, the projects are not compiling at all; and so I could not reproduce your issue.Looking at the trace it seems that some kind of Exception class was not found during code generation; but VIATRA uses only exceptions defined in VIATRA or the JDK itself.This means, your target platform was broken in a way that lies about whether VIATRA and a corresponding JDK is available, but is not in practice; but I cannot imagine how that could happen.Cannot reproduce the issue. If some reproduction steps are available, lets reopen this.It has occurred again: it seems it is caused by the viatra base plugins in the workspace, which has incompatible versions with the ones in the target platform (and the installed instance).I have 1.2.1 installed, and in the TP, and some plugins (runtime, runtime.base, runtime.localsearch, runtime.matchers) from the master.Postponed.	4.0
id=141900	REOPENED	EMF	SDO	2.2	PC Linux-GTK	P5 minor	Elena Litani	2006-05-15 17:39 EDT by	CDE Administration	2009-08-30 02:48 EDT (	4 users	OS : RHEL 3.1Must fix or not a must fix: YESBuild date: 0514Blocking: NOLanguage: deBitmap Location: V:\defects\25.001200.jpgTester Name: Ruth NestvoldSteps to recreate the problem: 1. Expand the models project and select the org folder. Copy the folder and paste it under the src folder of the new empty project.2. Right click the new empty project and select New > Other... Expand the Eclipse Modeling Framework and Example EMF Model CreationWizard categories and verify their contents:3. Select EMF Model and click Next. Verify the dialog?s appearance:4. Click Next. Verify the dialog?s appearance:5. Ensure Annotated Java is selected and click Next. Verify the dialog?s appearance:6. Ensure library is selected and click Finish. Verify that My.genmodel is created.7. Close the generator (the editor titled My.genmodel).8. Expand the models project. Right click library.xsd and select New > Project... Expand the Eclipse Modeling Framework category, select EMF Project and click Next. Verify the dialog?s appearance:9. Name the project library and click Next. Verify the dialog?s appearance:10. Select Rose class model and click Next. Verify the appearance of the dialog:11. Click Browse Workspace... and verify the appearance of the resulting dialog:12. Expand the models project and select library.mdl. Click OK to clear the dialog. Back in the wizard, click Next.Verify the appearance of the dialog: Click Finish13. The generator should be opened in the final step of the previous part. If it is not open, expand the library project, the model folder,and double click on library.genmodel.14. Open the Generator pull-down menu and verify its contents:15. Select Show Annotations from the menu Generator.16. Right click the top-most Library object in the editor and verify the contents of the pop-up menu:Note that only the first 9 and the last 2 menu items (those outlined in red) are contributed by EMF.17. Select Show Properties View from the pop-up menu.Problem Description: The string "Multiple Editor Pages" is in English.This article was reassigned from Category:''TVT/Testing''.	Created25.001200.jpg<cde:tctdetail>Testcase: 25.001200Project: WSW32Component: CDE - EMF/SDOPriority: 4Subject: DE : EMF - XSD - English string "Multiple Editor Pages"Article ID: 499Originator:</cde:tctdetail>This string hasn't been translated yet. Please retest after the latest properties files have been translated.3. Select EMF Model and click Next. Verify the dialog?s appearance:4. Click Next. Verify the dialog?s appearance:5. Ensure Annotated Java is selected and click Next. Verify the dialog?s appearance:8. Expand the models project. Right click library.xsd and select New > Project... Expand the Eclipse Modeling Framework category, select EMF Project and click Next. Verify the dialog?s appearance:9. Name the project library and click Next. Verify the dialog?s appearance:LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.	5.0
id=433429	REOPENED	ECP	Navigator	1.2.0	PC Windows 8	P5 normal	Project Inbox	2014-04-24 10:56 EDT by	Annamalai Chockalingam	2015-11-19 07:11 EST (	2 users	Hello ThereOn Model Explorer, Export Project Wizard in File Extension displays *.xmi. But on export gives u a file appended with *.xmi.espNot sure of the meaning of the .esp extension that is attached to the exported project.When i try to Import Project using the Import Project Wizard, i will not be able to as again the File Extension displays as *.xmi and our project extension is *.espI need to remove the .esp and then import the project again in. Is this a bug or a feature that i am missing something on.RegardsMalai	Projects are now exported as .esp and can be imported as .espThe commit was never accepted.	2.0
id=366208	REOPENED	EMFT.facet	Main	0.2.0	PC Linux	P5 normal	Project Inbox	2011-12-09 10:28 EST by	Gregoire Dupe	2013-12-27 08:31 EST (	0 users	since:java.lang.AssertionError: expected:<1> but was:<2> at org.junit.Assert.fail(Assert.java:91) at org.junit.Assert.failNotEquals(Assert.java:645) at org.junit.Assert.assertEquals(Assert.java:126) at org.junit.Assert.assertEquals(Assert.java:470) at org.junit.Assert.assertEquals(Assert.java:454) at org.eclipse.emf.facet.widgets.nattable.tests.swtbot.NatTableUITests.testAddQueryColumn(NatTableUITests.java:218) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) at org.junit.internal.runners.statements.FailOnTimeout$1.run(FailOnTimeout.java:28)Stacktracejunit.framework.AssertionFailedError: java.lang.AssertionError: expected:<1> but was:<2> at org.eclipse.emf.facet.widgets.nattable.tests.swtbot.NatTableUITests.testAddQueryColumn(NatTableUITests.java:218) at pde.test.utils.PDETestListener.testFailed(PDETestListener.java:124) at org.eclipse.jdt.internal.junit.model.RemoteTestRunnerClient$7.run(RemoteTestRunnerClient.java:551) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.jdt.internal.junit.model.RemoteTestRunnerClient.notifyTestFailed(RemoteTestRunnerClient.java:549) at org.eclipse.jdt.internal.junit.model.RemoteTestRunnerClient.access$17(RemoteTestRunnerClient.java:544) at org.eclipse.jdt.internal.junit.model.RemoteTestRunnerClient$TraceProcessingState.readMessage(RemoteTestRunnerClient.java:171) at org.eclipse.jdt.internal.junit.model.RemoteTestRunnerClient.receiveMessage(RemoteTestRunnerClient.java:374) at org.eclipse.jdt.internal.junit.model.RemoteTestRunnerClient.access$27(RemoteTestRunnerClient.java:373) at org.eclipse.jdt.internal.junit.model.RemoteTestRunnerClient$ServerConnection.run(RemoteTestRunnerClient.java:271)	Back to normal inwithout any corresponding changes:- [Unit Test Failure][0.2/3.8][0.2/4.2] org.eclipse.emf.facet.widgets.nattable.tests.swtbot.TableEditabilityTest.testNonEditabilityOfNACellsIn the revision 1144 () the editor maximizations have been disabled because they are not supported by E4. This disabling cause the failure of TableEditabilityTest.testNonEditabilityOfNACells().I’ve re-enable the missing maximization. It should work in build based on 3.8 and we will see if it breaks the build based on 4.2. (détails)- [Unit Test Failure][0.2/3.8][0.2/4.2]org.eclipse.emf.facet.widgets.nattable.tests.swtbot.Test.testBug344925Trying to get more information by listening the log. (détails)- [Unit Test Failure][0.2/3.8][0.2/4.2]org.eclipse.emf.facet.widgets.nattable.tests.swtbot.Test.testBug344925Add a dump of the table model. (détails)Succeed inSucceed inREOPENED: new failure injava.lang.AssertionError: expected:<1> but was:<2> at org.junit.Assert.fail(Assert.java:91) at org.junit.Assert.failNotEquals(Assert.java:645) at org.junit.Assert.assertEquals(Assert.java:126) at org.junit.Assert.assertEquals(Assert.java:470) at org.junit.Assert.assertEquals(Assert.java:454) at org.eclipse.emf.facet.widgets.nattable.tests.swtbot.NatTableUITests.testAddQueryColumn(NatTableUITests.java:220) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) at org.junit.internal.runners.statements.FailOnTimeout$1.run(FailOnTimeout.java:28)Also failing inexpected:<1> but was:<2>Stacktracejava.lang.AssertionError: expected:<1> but was:<2> at org.eclipse.emf.facet.widgets.nattable.tests.swtbot.NatTableUITests.testAddQueryColumn(NatTableUITests.java:220)	4.0
id=414378	REOPENED	ECP	Editor	unspecified	PC Windows 7	P5 normal	Eugen Neufeld	2013-08-04 10:08 EDT by	Jonas Helming	2016-04-05 07:53 EDT (	0 users	if we change this, we possibily need to migrate	A GroupedGrid Row is not a Composite Collection, as else it would be possible to put them anywhere in the model. E.g you could add it to a ColumnLayout (VerticalLayout) directly. And it is a special sub element of the GroupedGrid Layout which can only be used there.Makes sense, but why is not a renderable though? Currently it does not inherit common attributs such as rules (attachements in the future)This bug hasn't had any activity in quite some time. Maybe the problem got resolved, was a duplicate of something else, or became less pressing for some reason - or maybe it's still relevant but just hasn't been looked at yet.If you have further information on the current state of the bug, please add it. The information can be, for example, that the problem still occurs, that you still want the feature, that more information is needed, or that the bug is (for whatever reason) no longer relevant.--The automated Eclipse Genie.	3.0
id=306355	REOPENED	MDT.MoDisco	Contribution	0.8.0	PC Windows XP	P5 enhancement	Fabien Giquel	2010-03-18 09:08 EDT by	Nicolas Guyomar	2011-09-26 11:06 EDT (	4 users	CreatedHibernate Configuration ModelDiscoverer for Hibernate Configuration fileModel, discoverer and tests	Createdorg.eclipse.gmt.modisco.hibernate.config.discovererHibernate Configuration DiscovererCreatedorg.eclipse.gmt.modisco.hibernate.config.testsTests relative to Hibernate Configuration DiscovererCreatedorg.eclipse.gmt.modisco.hibernate.configHibernate Configuration ModelCreatedorg.eclipse.gmt.modisco.hibernate.config.discovererHibernate Configuration DiscovererCreatedorg.eclipse.gmt.modisco.hibernate.config.testsHibernate Configuration Discoverer TestsHi Nicolas,Thank you for this contribution.Please consulton 306365. This comment is available for this one.Fabien.For consitency, MoDisco Technology roadmap will focus on standard Java technologies (ex : JEE JPA). Old Hibernate configuration files are not. Including a partisan third-party reference to this framework should be reviewed.Moreover Hibernate is delivered under not EPL-friend LGPL license.WONTFIX for the time being.Contribution not relevant anymore.After some discussion about such a contribution. The decision is to try to integrate it, in some new not-standard-JEE MoDisco feature.	9.0
id=306360	REOPENED	MDT.MoDisco	Contribution	0.8.0	PC Windows XP	P5 enhancement	Fabien Giquel	2010-03-18 09:30 EDT by	Nicolas Guyomar	2011-09-26 10:51 EDT (	4 users	Hibernate Mapping Discoverer Model, Discoverer and Tests	Createdorg.eclipse.gmt.modisco.hibernate.mappingHibernate Mapping ModelCreatedorg.eclipse.gmt.modisco.hibernate.mapping.discovererHibernate Mapping DiscovererCreatedorg.eclipse.gmt.modisco.hibernate.mapping.testsHibernate Mapping Discoverer TestsHi Nicolas,Thank you for this contribution.Please consulton 306365. This comment is available for this one.Fabien.For consistency, MoDisco Technology roadmap will focus on standard Java technologies (ex : JEE JPA). Old Hibernate configuration files are not. Including a partisan third-party reference to this framework should be reviewed.Moreover Hibernate is delivered under not EPL-friend LGPL license.WONTFIX for the time being.Contribution not relevant anymore.After some discussion about such a contribution. The decision is to try to integrate it, in some new not-standard-JEE MoDisco feature.	7.0
id=365991	REOPENED	EMFT.facet	Main	0.2.0	PC Linux	P5 normal	Gregoire Dupe	2011-12-08 04:07 EST by	Gregoire Dupe	2013-12-27 08:31 EST (	1 user	Since:test timed out after 30000 millisecondsStacktracejava.lang.Exception: test timed out after 30000 milliseconds at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:187) at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150) at org.eclipse.swt.widgets.Display.syncExec(Display.java:4331) at org.eclipse.swtbot.swt.finder.finders.UIThreadRunnable.run(UIThreadRunnable.java:76) at org.eclipse.swtbot.swt.finder.finders.UIThreadRunnable.syncExec(UIThreadRunnable.java:172) at org.eclipse.swtbot.swt.finder.widgets.AbstractSWTBot.syncExec(AbstractSWTBot.java:503) at org.eclipse.swtbot.swt.finder.widgets.AbstractSWTBot.notify(AbstractSWTBot.java:141) at org.eclipse.swtbot.swt.finder.widgets.AbstractSWTBot.notify(AbstractSWTBot.java:129) at org.eclipse.swtbot.swt.finder.widgets.AbstractSWTBot.notify(AbstractSWTBot.java:119) at org.eclipse.swtbot.swt.finder.widgets.SWTBotTree.notifySelect(SWTBotTree.java:285) at org.eclipse.swtbot.swt.finder.widgets.SWTBotTree.select(SWTBotTree.java:211) at org.eclipse.emf.facet.widgets.nattable.tests.swtbot.NatTableUITests.testOpenLoadCustomizationDialog(NatTableUITests.java:441)	This test does not fail in my development environment.I've tried to solve the problem by adding a wait section after the opening of the "Load a Customization" dialog.-> Committed revision 1254.My try of fix looks good. The test didn't failed inSucceed inSucceed inREOPENED: New failure in:java.lang.Exception: test timed out after 30000 milliseconds at java.lang.Thread.sleep(Native Method) at org.eclipse.swtbot.swt.finder.utils.SWTUtils.sleep(SWTUtils.java:200) at org.eclipse.swtbot.swt.finder.SWTBotFactory.sleep(SWTBotFactory.java:459) at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:396) at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:372) at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:360) at org.eclipse.emf.facet.widgets.nattable.tests.swtbot.NatTableUITests.testOpenLoadCustomizationDialog(NatTableUITests.java:360) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) at org.junit.internal.runners.statements.FailOnTimeout$1.run(FailOnTimeout.java:28)Back to normal since (at least) :REOPENEDFails again in :java.lang.Exception: test timed out after 30000 milliseconds at java.lang.Thread.sleep(Native Method) at org.eclipse.swtbot.swt.finder.utils.SWTUtils.sleep(SWTUtils.java:200) at org.eclipse.swtbot.swt.finder.SWTBotFactory.sleep(SWTBotFactory.java:459) at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:396) at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:372) at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:360) at org.eclipse.emf.facet.widgets.nattable.tests.swtbot.NatTableUITests.testOpenLoadCustomizationDialog(NatTableUITests.java:444)Back to normal inIt fails again inI've added screen shots.Committed revision 1473.Back to normal in	11.0
id=152165	REOPENED	GMF-Tooling	Core	1.0	PC Linux	P5 enhancement	gmf.generation-inbox	2006-07-28 12:07 EDT by	Goulwen Le Fur	2010-07-19 22:19 EDT (	1 user	It would be useful if an unique modeler could be defined for metamodels which use more than one root element extending the same EClass.e.g. I have an abstract root element "Document" and three subclasses "Article", "Book" and "Manual". It would be useful if the modeler wizard display a "Choose Element" page and offer to create the three types of document as a root model element.	Sounds like an enhancement toolsmith could manually add if needed.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentGeneration was the original product and component for this bug	3.0
id=157488	REOPENED	GMF-Tooling	Core	1.0	All All	P5 enhancement	gmf.models-inbox	2006-09-15 11:41 EDT by	Tanyu Trifonov	2010-07-19 22:23 EDT (	0 users	Scenario:I want to overwrite handleNotificationEvent for all generated XXXEditPart to listen for changes - but it's annoying and if I add new component I値l have to overwrite the same method again and againthe same is for XXXViewVactory - I have to modify createStyles to add one more style.I've got the following hierarchy: AbstractWidget - is abstract class and all concrete widgets extends it. I believe it will be very nice if I've got generated AbstractWidgetEditpPart and AbstractWidgetViewFactory. I'll be able to edit just the abstract classes and to get the modification in my sub-classes easily.The other possible solution is to make the management similar as EditPolicy - where I use extension point - org.eclipse.gmf.runtime.diagram.ui.editpolicyProviders and in my class to install edit policy to EditPart if EditPart is one of those I'm interested.	I feel your usecase is better handled with custom/extended templates. E.g. we could provide .jetinc fail="silent" withing NodeEditPart.javajet for you to able inject any code (e.g. handleNotificationEvent) into generated code. Same for view factory.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentModels was the original product and component for this bug	3.0
id=143783	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P5 normal	Inbox	2006-05-25 13:55 EDT by	Maged Elaasar	2010-07-19 21:54 EDT (	0 users	the PathmapManager API is now internal and there is no public way to just apply it to an arbitrary resource set.	Component changed as wellMarking as REMIND, please reopen if you need this changeLATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentRuntime Common was the original product and component for this bug	4.0
id=145094	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P5 normal	Inbox	2006-06-02 12:31 EDT by	Yves YANG	2010-11-19 09:42 EST (	0 users	I run into a problem with a Rectlinear router. Caused by: java.lang.NullPointerException at org.eclipse.gmf.runtime.draw2d.ui.geometry.PointListUtilities.calculatePointRelativeToLine(PointListUtilities.java:1780) at org.eclipse.gmf.runtime.diagram.ui.figures.LabelLocator.getReferencePoint(LabelLocator.java:112) at org.eclipse.gmf.runtime.diagram.ui.figures.LabelLocator.relocate(LabelLocator.java:90)	***has been marked as a duplicate of this bug. ***Please provide a concrete scenario or example and/or retry in latest GA build.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentRuntime Common was the original product and component for this bug***has been marked as a duplicate of this bug. ***	5.0
id=114233	REOPENED	GMF-Runtime	General	2.0	All All	P5 enhancement	GMF Inbox	2005-10-28 15:23 EDT by	Richard Gronback	2010-07-19 12:25 EDT (	4 users	The runtime should optionally provide alternative persistence mechanisms made available via extension points.	What milestone will this be targeted for.Does "Version 2.0" in this bug imply that this feature is not targeted by GMF 1.0 releas??????? I propose to leave all other tasks in favor of this oneYes, it's not targeted for GMF's 1.0 release.IMHO if GMF is for users and not just for GMF developers team,it will be nice to have it ASAPIMHO priorities should be reshuffled in favor of the most requested by users features (cf. GMF, JWT newdgroup list!):- customizable pluggable persistence- customizable loadable palettes - interoperabilty- standartization-based from the start terminology, concepts, artifacts and methodology- etc.And API, OCL, EMF.Edit, JET, rules, etc. tuning may have lower priorities and be postponed in favor of these tasksI don't speak from the GMF team, but I'm sure they would love to have all the features in the world. The reality is that the team has their priorities and issues.If GMF isn't for you, than you can use GEF and EMF by themselves.I think you should appreciate that IBM and Borland created such an interesting project.Sincerely I shall be grateful for anything usable in my immediate work.My interest is not extendable out of few weeks prototype creation.I do it or I am out and even not for Java area.I am not student, academic or life-term/budget researcher.If projects are publisized as the ultimate platform and IDE miracle and I got instead problems, scheduled issues and "interests", then they just destroy my life and reputation.Just try to explain to my client what is the problem of extending already existing (old technology) Swing/AWT application features through Eclipse plugin while I have difficulties even reproduce them there.I understand that the main problem with Eclipse, like with any other Open Source venture, is that they are somewhat self-oriented to developers of those projects themselves and not to users.I find the dedication and support, its time already deviated to me, from GMF Borland team to be exceptional even in comparison to commercial products and, if I burn my time here, volunteering my time as tester and features priorities requester, it is just because I have got the confidence that Borland team is user-oriented and explicitly interested in user's feedback/opinion and any involvement. I wish I could return anything helpful and compensating their time after catching the train but for this I should stay with my client requirements.Sincerely,Guennadi Vaninerelatively to GEF with EMF I even cannot find free functional tools supporting them (except GMF ECore Diagram Editor). Please see my bug reports on Sample ECore Model Editor and posts in newsgoups (e.g. JWT) and forums (Omomdo, MyEclipse). IMHO there is absolutely no need to exaggerate in publicity of Eclipse putting developers in kamikaze projectsGuennadi VanineThis is possible by simply extending the existing framework and providing your own persistence mechanism. Extensibility framework is not required.Resolving as RESOLVE REMIND. Reopen with more information if this is not the case.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentRuntime EMF was the original product and component for this bug	10.0
id=288459	REOPENED	M2T	Xpand	unspecified	PC Windows XP	P5 normal	Karsten Thoms	2009-09-03 07:56 EDT by	Markus Voelter	2010-08-09 09:45 EDT (	4 users	If you import a meta model in Xpand, Xtend or Check that does not exist, you get no error message. Instead, an error message "meta model xyz not found" should be reported.	Fixed for Xtend/Check. Namespace imports are now mapped to type NamespaceImportStatement, which has an analyze() method that is called from ExtensionFile. An unknown import is reported as "Namespace XYZ not found."For Xpand this won't be solvable, since IMPORT statements can either refer to metamodel namespaces or to namespaces on which Xpand definitions are searched.Any idea how to detect and signal invalid IMPORTs in Xpand or can we close this bug now?The implementation of NamespaceImportStatement#analyze() had to be extended. In the case that the JavaBeansMetaModel is used and Java namespaces are imported the import statement was marked with error, although the import is correct. ExecutionContext#getNamespaces() cannot return Java package names since they are unknown.To solve this problem I called the analyzation of NamespaceImportStatements at the end of ExtensionFile#analyze now. This way the type system is initialized with all used types. This way as fallback all known types can be searched whether one is from the imported namespace.Consequence: It cannot be distuinguished whether an imported namespace does not exist or, when JavaBeansMetaModel is used, just no type from this namespace is used. The error message now is "Namespace x::y is unknown or unused."Added three tests to ExtensionAnalyzationTest:- testNamespaceImport_Success- testNamespaceImport_InvalidImport- testNamespaceImport_UnusedA similar approach can be used for Import statements in Xpand.Createdmylyn/context/zipDetecting unknown or unused namespaces in Xpand was a little bit more tricky. Detecting IMPORTs that belong to namespaces of types is identical to analyzation in NamespaceImportStatement.Imports that belong to imported templates must be detected through the target definitons of EXPAND statements. The IMPORT values have to match the namespace fragment of the qualified name of the target definitions. In order to determine the target definition class ExpandStatement got a new instance variable targetDefinition with getter. This variable is set when analyzeInternal() or evaluateInternal() is invoked. ImportDeclaration#analyze() now gets all ExpandStatements of the current template with the help of a visitor and searches for a target definition that matches the given import.If neither a known type nor a target definition's template file namespace matches the IMPORT value an issue is raised.Added new test case ImportDeclarationTest.Createdmylyn/context/zipGood you fixed that.Some comments:1) Note, that due to dynamic polymorphism there's no single targetDefinition but multiple possible ones. It's not a problem in your case, since you're only interested in the namespace, but having the newly introduced getter will confuse this. Developers might missuse that feature in future. Maybe we could store the resolved namespace only?2) I'ld prefer a warning if an import has not been used.Will consider Sven's comment.- ExpandStatement only stores the target namespace- Issues are created with warning levelI'ld expect an error marker for «IMPORT metamodelDoesNotExist»but I get only a warning.There are more problems around this one:Xtend:import metamodelDoesNotExists;in an *.ext file does not lead to an error marker andimport metamodel; // <- this one is unusedwill not create a warning.Check:import doesNotExists; <- this one gets a warningimport unused; <- this one is not highlighted at allI'ld expect an error marker for the first one and a warning for the second.I used a recent nightly build (> M7)The behavior of error marker for Check and extensions files is the same.Karsten described inthat we can not distuinguish between not used and not existing namespaces. Also Sven mentioned that he would except a warning for a not used namespace. Therefore a warning marker is raised with message "Namespace x::y is unknown or unused."RegardsDarius (In reply to)	12.0
id=230644	REOPENED	EMF	Releng	unspecified	PC Linux	P5 normal	Marcelo Paternostro	2008-05-06 19:11 EDT by	Nick Boldt	2009-08-30 02:49 EDT (	0 users	(This bug was found in trying to diagnose why the SDK features don't include the example.installer plugins.)Back in EMF 2.3M5, when we redid all the features, we created a script [1] that would check CVS for a list of all the plugins, filter them, and insert that XML into feature.xml for the three SDK features.[1] org.eclipse.emf.releng/scripts/genFeatureSDK.shI updated it today to ensure that it's getting the example.installer plugins correctly, and these are now being added into the emf and xsd sdk feature.xmls.HOWEVER... the build still contains feature.xml which does not contain any plugins. Compare what's in CVS [2] with what's in the latest builds -- the built version contains no <plugin> tags.[2]And look at what's happening in the latest builds -- note the replaceText == '':preProcess:[emf.build.ReplaceText] file:'null'[emf.build.ReplaceText] newFile:'null'[emf.build.ReplaceText] number of filesets:'1'[emf.build.ReplaceText] beginToken:'<!-- TemplateEntriesBegin -->'[emf.build.ReplaceText] endToken:'<!-- TemplateEntriesEnd -->'[emf.build.ReplaceText] replaceText:''[emf.build.ReplaceText] The contents of '/home/www-data/build/emf/downloads/drops/2.4.0/N200805061710/eclipse/features/org.eclipse.emf.ecore.sdo.sdk/feature.xml' was changed. Writing it back to the file[emf.build.ReplaceText] The contents of '/home/www-data/build/emf/downloads/drops/2.4.0/N200805061710/eclipse/features/org.eclipse.emf.sdk/feature.xml' was changed. Writing it back to the file[emf.build.ReplaceText] The contents of '/home/www-data/build/emf/downloads/drops/2.4.0/N200805061710/eclipse/features/org.eclipse.xsd.sdk/feature.xml' was changed. Writing it back to the fileSo, bottom line... we are effectively changing the feature.xml, with all the subfeatures and plugins listed, to the feature.xml.template, with NO plugins listed. I'm guessing this was not what we intended last year, but seeing as no one has noticed in over a year... does it matter? Should the SDK features include all the plugins as well as the features, or is that pointless overkill? And if we don't need to include the features, then is genFeatureSDK.sh effectively obsolete?	Moving to LATER -- this won't get done for 2.4.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.	2.0
id=333362	REOPENED	MDT.MoDisco	Infrastructure	0.9.0	PC Windows XP	P5 minor	Project Inbox	2010-12-31 09:48 EST by	Fabien Giquel	2013-05-24 04:07 EDT (	3 users	This failure appears only on Hudson, since M4 was built.	CreatedStack trace on hudsonA fix tentative has been commited into head (rev 3672).Since we couldn't find the reason for the NoClassDefFound, I have removed the use of the WorkspaceModifyOperation altogether.Test FacetTests.passes, so I'm marking this as solved.Hello,The remove of the use of WorkspaceModifyOperation may hide a real bug. I reopen this bug to remember that this problem must be understood and explained.Regards,Gregoire DupeWe will switch to EMF Facet before to try to solve such bugs. => P5	5.0
id=326533	REOPENED	MDT.MoDisco	Infrastructure	0.9.0	PC Windows 7	P5 minor	Nicolas Bros	2010-09-29 09:14 EDT by	Nicolas Bros	2011-09-28 07:36 EDT (	2 users	- Create a MoDisco project- Create a query setYou get an error "Plug-ins declaring extensions or extension points must set the singleton directive to true".	I cannot reproduce anymore. When I create a MoDisco project, the singleton directive is set.I encountered this error again.To reproduce:- create an Acceleo project- do "Configure > Convert To MoDisco Project"- create a query set in the projectDecreasing priority: this is not a blocker, it can be easily fixed by the user, by doing what the warning suggests.We will switch to EMF Facet before to try to solve such bugs. => P5	4.0
id=334116	REOPENED	EMFT.facet	Main	0.1.0	All All	P5 enhancement	Nicolas Bros	2011-01-12 10:04 EST by	Nicolas Bros	2011-10-25 11:51 EDT (	2 users	In many cases (Query view, FacetSet view, Customization view, EPackage view, Discoverer view, etc.) we need a view with the following features:- an Eclipse view containing a tree viewer (with columns) displaying a provided set of elements- the columns have to be definable by an extension/configuration of the view- the columns have to be sortable- the column sizes have to be saved between two uses of the view (including after a restart of Eclipse)- the view registers an extensible popup menu- the view has to implement a "delayed-refresh" (only refresh after a delay after the last refresh request, in order to avoid multiple useless consecutive refreshes)- the extension/configuration of the view can provide a method to define what happens when an element in the view is double-clicked.Class AbstractCatalogView was created to factor out common functionality and duplicated code between all the "catalog" views in MoDisco (for queries, facets, customizations).With, I fixed the problem that AbstractCatalogView saved column widths for all subclasses, refactored AbstractCatalogView, extracted a new PersistableColumn class to factor out functionality needed for the new discoverers UI, and created wrappers for JFace columns that work for both tables and trees, so as to be able to handle both in the same class instead of duplicating the code for each.In parallel, AbstractCatalogView was copied into EMF Facet, and renamed to AbstractTreeView.Now, in order to reduce maintenance cost by eliminating redundancy, we would like to merge these two forked classes back into one (which will live inside EMF Facet).	Fixed in revision 200.marking as fixedHello,Documentation (Javadoc) of the class AbstractCatalogView is missing. This class has been designed to be reused, a good documentation is then required.Regards,Gregoire Dupe	3.0
id=157363	REOPENED	EMFT	Website	unspecified	PC Windows XP	P5 normal	Nick Boldt	2006-09-14 13:50 EDT by	Nick Boldt	2009-08-30 02:49 EDT (	3 users	Seefor details	Createdpatch for 9 EMFT projects (20 files) - Teneo has no javadoc yetCommitted a fix for the OCL, Query, Transaction, and Validation components.Sorry, Nick, but the attached patch's attempt to auto-generate the <plugin> elements didn't work -- a test build ended up with a garbled mess. So, for this release, I just hard-coded the values. I'll try the automation again for 2.0.I'm leaving this bug open for others in EMFT to borrow.Committed fix for EMFT JET.Didn't apply Nick's patch for this release. Reasons:1) less risk to just put the <plugin id=".."/> elements in plugin.xml manually.2) Nick's change to plugin.xml assumed the doc plug-in was a directory an included a doc.zip file. EMFT JET, and others now leave their doc plug-ins jarred, and do not not include a doc.zip.Will try Nick's more extensive scripts once we're finished with this release.Paul - did you ever get around to applying this fix?Martin - do you have javadoc yet?There is javadoc but I don't publish it (yet).Does this patch then apply to Teneo?gr. MartinNick:What I HAVE done: made my doc/plugin.xml correctly indicate which plug-ins the Java doc is for.What I have NOT done: updated the javadoc script to actually compute what plugins should be in the doc/plugin.xml list. I tried to apply the patch, but, alas, to much time seems to have passed. I'll try to allocate a bit more time, and apply it manually.Can be reopened if required, but I think this is all done or no longer relevant.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.	8.0
id=343533	REOPENED	EMFT.facet	Main	0.1.0	All All	P5 trivial	Nicolas Bros	2011-04-21 09:53 EDT by	Nicolas Bros	2011-09-29 13:41 EDT (	2 users	One of the requirements from the simultaneous release is that "Projects must use ICU4J, where appropriate, to excel in NL support." (seefor the exact rules)So, we must check that we are not using any forbidden types, preferably with a suitable tool.	I committed one such tool in revision 557.It uses the JDT Search API to find occurrences of the forbidden types in the workspace:/org.eclipse.emf.facet.dev.core/src/org/eclipse/emf/facet/dev/core/CheckICU4JHandler.javaI worked well in my runtime workspace, but when I tried to run it on my main workspace, I got a lot of false positives from referenced libraries. Reopening.I got rid of the false positives by filtering out binary members.Committed in revision 558.Note: the wording I used in my previous comment wasn't clear ("I committed one such tool"). So, I wanted to make it clear that this is a tool I wrote myself, and there is no need for an IP review.Hello Nicolas,Is this tool launched during each build and provide a report?Regards,Gregoire(In reply to)No, it must be launched manually from a workspace containing the plug-ins to check. I don't think it is possible to run it during the build.(In reply to)Ok, I reopen this bug because such tools have to be launched during each build to be relevant.Here is some ideas: - use MoDisco (n-1 version to avoid cyclic dependencies), - use text search.Regards,Gregoire Dupe	7.0
id=344097	REOPENED	MDT.MoDisco	Technologies	0.9.0	All All	P5 trivial	Nicolas Bros	2011-04-28 05:02 EDT by	Nicolas Bros	2011-09-28 16:04 EDT (	2 users	Createdorg.eclipse.modisco.kdm.uml2converter.testsI'm committing a migrated org.eclipse.modisco.kdm.uml2converter.tests, even if it doesn't pass yet because of.	Committed in revision 4360.Reopening to remember to fix the test.	2.0
id=151466	REOPENED	Modeling	Releng	unspecified	PC Windows XP	P5 enhancement	Nick Boldt	2006-07-21 16:41 EDT by	Nick Boldt	2009-08-30 02:48 EDT (	0 users	Per Kenn's suggestion, identify which bugs in a given build are in progress vs. closed. This depends on, which will give us two states of bugs:ASSIGNED (in progress, eg., ". . .")FIXED (completed, eg.,)I'm thinking of adding a new column into the release notes left of the cvs-delta icon which would show either the in progress ellipsis or the completed checkmark, depending on which state the bug was in when processed for inclusion in the release notes.	***has been marked as a duplicate of this bug. ******has been marked as a duplicate of this bug. ***Moving up to Modeling > RelengMoving to REMIND, as the bug on which this depends () has been retargetted for Bugzilla 3.2.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.	5.0
id=132887	REOPENED	M2T	Jet	0.8.0	PC Windows XP	P5 enhancement	Paul Elder	2006-03-22 14:55 EST by	Paul Elder	2009-08-30 02:49 EDT (	1 user	It is desirable to add other kinds of tests to a <c:choose> block. The <c:when>and <c:otherwise> tags derive from AbstractChooseAlternative, which is currentlyinternal.	A better solution is to use the org.eclipse.jet.xpathFunctions extension point to define a custom function, and then use the standard <c:when> tag.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.	2.0
id=218658	REOPENED	M2T	Jet	0.9.0	PC Windows XP	P5 enhancement	Paul Elder	2008-02-12 12:41 EST by	Paul Elder	2009-08-30 02:49 EDT (	0 users	Currently, JET requires the full Eclipse SDK + EMF as an execution environment.Refactor the JET runtime so that:* The core template expansion engine runs on any 1.4 or later JRE* Dynamic template loading can be accomplished in Equinox or RCP* Runtime Dependencies on EMF, JDT and the Eclipse workspace are optional, and their absence results in a graceful deterioration of functionality	Moving out of Ganymede release. Changes to modularize will have a significant impact on API, and should be done very early in a release schedule.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.	2.0
id=110541	REOPENED	GMF-Tooling	Core	unspecified	PC Windows XP	P5 enhancement	Steven R. Shaw	2005-09-25 14:00 EDT by	Min Idzelis	2010-07-19 12:18 EDT (	0 users	Add Missing implementations ofdrawPath(Path)fillPath(Path)getAlpha()getAntialias()getFillRule()getInterpolation()getLineCap()getLineJoin()getTextAntialias()rotate(double)scale(float,float)setAlpha(int)setBackgroundPattern(Pattern)setClip(Path)setFillRule(int)setForegroundPatter(Pattern)setInterpolation(int)setLineCap(int)setLineDash(int[])setLineJoin(int)setTextAntialias(int)shear(float,float)to MapModeGraphics, RenderedMapModeGraphics, PrinterGrahics,RenderedPrinterGraphics, ScaledGraphics	drawPath(Path), fillPath(Path), rotate(double), scale(float, float), setBackgroundPattern(Pattern), setClip(Path), setForegroundPattern(Pattern), setInterpolation(int), shear(float,float) are not implemented by the org.eclipse.draw2d.ScaledGraphics class. Logged bugzilla 111360 against GEF.Here is the response from GEF: "The thought is that if you want to use advanced graphics, then don't use ScaledGraphics. The purpose of ScaledGraphics is to work around the lack of advanced graphics in previous releases of SWT, or on current platforms that don't have advanced graphics present. Implementing any of the methods you mention would require that we avoid emulating zoom and switch over to the advanced graphics zoom."We would need to migrate the MapModeGraphics to use the advanced graphics scaling instead of ScaledGraphics in order to support this. This should be considered an enhancement request that would be dependent on GEF's implementation of advanced graphics zoom support.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentUI was the original product and component for this bug	4.0
id=119694	REOPENED	GMF-Runtime	General	1.0	PC Linux-GTK	P5 normal	Tom Macdougall	2005-12-07 13:19 EST by	Steven R. Shaw	2013-05-10 03:37 EDT (	3 users	In RedHat, in a Japanese session.(You do not need to install Language packs, and if you don't know Japanese, you probably shouldn't install them.)Drop a note with text "MyNote" on a Diagram.Double-click the name on the diagram to rename it.Backspace through the old name.Shift-Space enables/disables the Japanese IME "kinput2" (which interacts with the canna-server to get you a list of Japanese characters.Type "amerika", which is converted to underscored hiragana on the fly, but you will only be able to see the first character. See the purple circles in the attached screenshot.EXPECTED #1: resize based on the text under consideration.Space to scroll through your options for this pronunciation.Enter to select your choice. Unfortunately, Enter is also sent to the Drawing Surface to say the name is complete,when you've only actually selected something from the IME. This leads to a ModelViolation warning because the old name has been deleted and so the new name appears to be blank for the moment.EXPECTED #2: Rename operation should continue until a second Enter is sent.If you rename a note into completely Japanese characters, the text mysteriously disappears from the drawing surface. The name will only appear if the name is a mix of Japanese and English characters.EXPECTED #3: Text composed of only Japanese characters ought to appear.	This could be a generic issue in RedHat Japanese. Should verify if same issue occurs in Java editor.Targetting 1.0.1 for further investigation. Could be fixed indirectly or related to.The fix to 127433 does not fix this problem.This problem does not occur in the Java editor. The java editor opens a different control that is not bounded by the editor window nor the application. The Cell editor appears to be opening a similar control but it is bounded by the existing cell editor bounds. I believe if we could set up the unbounded version then this may suffice as a solution.Note that if the user selects the note as a whole and types using the IME. A control appears in the top left corner of the diagram and then is not bounded by the diagram nor application.The functionality available through the IME to the CellEditor is insufficient to respond appropriately to the key stroke events performed. The IME appears to be intercepting the events before the text bounds are recalculated by the CellEditorLocator. The CellEditorLocator's relocate method is not called once the IME is initiated. I posted a question to the SWT newsgroup about catching keystroke events before the IME consumes them. The answer was that there is no SWT API which can perform the task [Ref: org.platform.swt newsgroup, search on IME].Since there is now wway to fix, marking as RESOLVED REMIND, the submitter to re-open once they have provided required priority info.LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and component Runtime Diagram was the original product and component for this bug	6.0
id=132076	REOPENED	GMF-Runtime	General	1.0	PC Windows Mobile 2003	P5 normal	Tom Macdougall	2006-03-15 22:09 EST by	Freddy Lu	2010-07-19 12:28 EDT (	5 users	Description: Error box "Could not accept changes" appears in Logic Diagrams, Perferences. Build date: I20060309 Language: Traditional Chinese OS: Windows Server 2003 JDK version: IBM JDK 1.5Steps to recreate problem:1- Click Perferences -> Logic Diagrams -> Printing. >> Page Setup appears. do not change any value in Page Setup.2- Click Rules & Grid.<ERROR> Message box "Could Not Accept Changes" appears with the description "The currently displayed page contains invalid values." This message does not appear all the time. Sometimes the error box does not show up, but it does not change to Rules & Grid page when Rules & Grid item clicked.Expected output: Rules & Grid page shows up when Rules & Grid	CreatedScreen shot for Error box.CreatedScreen shot for page content not updated.Perhaps the validation criteria for the grid values is not localized?The problem looks like a program defect. It usually appears in the first time applying changes by clicking Rules & Grid(even leave default value). Please update me if any action to be taken. Thanks.Removing target milestone. This defect will be prioritized relative to other defects.Does the problem occur when switching between other preference pages and then the ruler and grids page (e.g. Logic Diagrams->Appearance)? If possible, could you please send me the translation properties files for the environment that you used.Hi Tom,This bug has been sitting too long, currently the GVT testing team has no resources or environments to answer your question. I will update you once I find a resolution to resource shortage problem. -Cindy SuMarking as RESOLVED REMIND, the submitter to re-open once they have provided required infoLATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentRuntime Diagram was the original product and component for this bug	10.0
id=140192%0D%0A	REOPENED	GMF-Runtime	General	unspecified	PC Windows XP	P5 normal	Tom Macdougall	2006-05-04 12:53 EDT by	Loic JULIEN	2010-07-19 12:27 EDT (	0 users	When I close our Data Model, if some diagrams are opened, they are also getting closed. I then get Null Pointer in the DiagramInputEditor.InputEditor is trying to retrieve the Editing Domain for that Diagram; however, Resource has already been unloaded and no Editing Domain is available anymore.Could we check for null values?Here is the stack trace:Thread [main] (Suspended (exception java.lang.NullPointerException)) org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditorInput.getStorageUnitFile() line: 188 org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditorInput.getAdapter(java.lang.Class) line: 143 org.eclipse.ui.ide.ResourceUtil.getFile(org.eclipse.ui.IEditorInput) line: 57 org.eclipse.ui.views.markers.internal.ProblemView(org.eclipse.ui.views.markers.internal.MarkerView).focusSelectionChanged(org.eclipse.ui.IWorkbenchPart, org.eclipse.jface.viewers.ISelection) line: 1078 org.eclipse.ui.views.markers.internal.MarkerView$2.selectionChanged(org.eclipse.ui.IWorkbenchPart, org.eclipse.jface.viewers.ISelection) line: 473 org.eclipse.ui.internal.PageSelectionService(org.eclipse.ui.internal.AbstractSelectionService).fireSelection(org.eclipse.ui.IWorkbenchPart, org.eclipse.jface.viewers.ISelection) line: 156 org.eclipse.ui.internal.PageSelectionService(org.eclipse.ui.internal.AbstractSelectionService).setActivePart(org.eclipse.ui.IWorkbenchPart) line: 282 org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged(org.eclipse.ui.IWorkbenchPartReference, org.eclipse.ui.IWorkbenchPartReference) line: 59 org.eclipse.ui.internal.WorkbenchPagePartList(org.eclipse.ui.internal.PartList).setActivePart(org.eclipse.ui.IWorkbenchPartReference) line: 126 org.eclipse.ui.internal.WorkbenchPage.setActivePart(org.eclipse.ui.IWorkbenchPart) line: 3139 org.eclipse.ui.internal.WorkbenchPage.activate(org.eclipse.ui.IWorkbenchPart) line: 588 org.eclipse.ui.internal.WorkbenchPage.makeActive(org.eclipse.ui.IWorkbenchPartReference) line: 1150 org.eclipse.ui.internal.WorkbenchPage.updateActivePart() line: 1130 org.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents() line: 1306 org.eclipse.ui.internal.WorkbenchPage.deferUpdates(boolean) line: 1295 org.eclipse.ui.internal.WorkbenchPage.closeEditors(org.eclipse.ui.IEditorReference[], boolean) line: 1269 org.eclipse.ui.internal.WorkbenchPage.closeEditor(org.eclipse.ui.IEditorReference, boolean) line: 1324 org.eclipse.ui.internal.EditorPane.doHide() line: 54 org.eclipse.ui.internal.EditorStack(org.eclipse.ui.internal.PartStack).close(org.eclipse.ui.presentations.IPresentablePart) line: 498 org.eclipse.ui.internal.EditorStack.close(org.eclipse.ui.presentations.IPresentablePart[]) line: 205 org.eclipse.ui.internal.PartStack$1.close(org.eclipse.ui.presentations.IPresentablePart[]) line: 105 org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(org.eclipse.ui.internal.presentations.util.TabFolderEvent) line: 81 org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder(org.eclipse.ui.internal.presentations.util.AbstractTabFolder).fireEvent(org.eclipse.ui.internal.presentations.util.TabFolderEvent) line: 267 org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder(org.eclipse.ui.internal.presentations.util.AbstractTabFolder).fireEvent(int, org.eclipse.ui.internal.presentations.util.AbstractTabItem) line: 276 org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder, int, org.eclipse.ui.internal.presentations.util.AbstractTabItem) line: 1 org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(org.eclipse.swt.custom.CTabItem) line: 67 org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(org.eclipse.swt.custom.CTabItem) line: 580 org.eclipse.ui.internal.presentations.PaneFolder$3.close(org.eclipse.swt.custom.CTabFolderEvent) line: 187 org.eclipse.swt.custom.CTabFolder.onMouse(org.eclipse.swt.widgets.Event) line: 2107 org.eclipse.swt.custom.CTabFolder$1.handleEvent(org.eclipse.swt.widgets.Event) line: 292 org.eclipse.swt.widgets.EventTable.sendEvent(org.eclipse.swt.widgets.Event) line: 66 org.eclipse.swt.custom.CTabFolder(org.eclipse.swt.widgets.Widget).sendEvent(org.eclipse.swt.widgets.Event) line: 925 org.eclipse.swt.widgets.Display.runDeferredEvents() line: 3346 org.eclipse.swt.widgets.Display.readAndDispatch() line: 2966 org.eclipse.ui.internal.Workbench.runEventLoop(org.eclipse.jface.window.Window$IExceptionHandler, org.eclipse.swt.widgets.Display) line: 1914 org.eclipse.ui.internal.Workbench.runUI() line: 1878 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) line: 419 org.eclipse.ui.PlatformUI.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) line: 143 org.eclipse.ui.internal.ide.IDEApplication.run(java.lang.Object) line: 95 org.eclipse.core.internal.runtime.PlatformActivator$1.run(java.lang.Object) line: 78 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(java.lang.Object) line: 92 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(java.lang.Object) line: 68 org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.Object) line: 376 org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.String[], java.lang.Runnable) line: 169 sun.reflect.NativeMethodAccessorImpl.invoke0(java.lang.reflect.Method, java.lang.Object, java.lang.Object[]) line: not available [native method] sun.reflect.NativeMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) line: not available sun.reflect.DelegatingMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) line: not available java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object...) line: not available org.eclipse.core.launcher.Main.invokeFramework(java.lang.String[], java.net.URL[]) line: 336 org.eclipse.core.launcher.Main.basicRun(java.lang.String[]) line: 280 org.eclipse.core.launcher.Main.run(java.lang.String[]) line: 977 org.eclipse.core.launcher.Main.main(java.lang.String[]) line: 952	Hi Loic,Would it be possible for me to reproduce your problem, I am not sure what your environment has in it. The exception that you are getting may be masking a different problem.Marking as RESOLVED REMIND, the submitter to re-open once they have provided required infoLATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.[GMF Restructure]: product GMF and componentRuntime Diagram was the original product and component for this bug	4.0
