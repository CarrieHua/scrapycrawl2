id=1202300	 
id=1329485	 '"Tabs were deleted" -- you mean your open tabs were no longer open, leaving you with no open tabs? Or did you expect your tabs from some other device to open on your new device? "Lost the history" -- you mean all your history disappeared on the device? Did it disappear anywhere else? Did you delete your browser history on any other device in the interim?', "Tabs deleted" Correct, all my open tabs closed. "Lost the history" - the history of the device for the couple of weeks i had been using it was deleted then it syncd all other device history, this is the worst part, I know it did this as very specific things I looked up are not in history, I never delete history anywhere.' 
id=1301358	 " First off, I want to apologize for Firefox burning through your data plan. That's never fun :( Just to get an idea of what's happening when syncing, how many bookmarks/logins do you have on your FxA account? Also, is this an account that has been active for a while and has a significant amount of browsing history attached?", my phone is 12-15 hours on wi-fi at home and the rest hours on cellular. first time i saw this and never happens until this morning. my account is always logged in to iPhone and macbook and updated the app regularly how can i see the rest information you want?', How do you know it's due to syncing? My iOS 9 device doesn't break down cellular data usage -- I only know that Firefox has used 800MB since May. Do you have any tabs open? 45MB in 20 seconds sounds very unlikely to be Sync -- your Sync account has a quota of 25MB, and if a sync fails for some reason we don't immediately start again. If Sync were involved I'd expect it to accrue an absolute upper bound of about 25MB every fifteen minutes with the app in the foreground. That doesn't mean it's not the culprit, but I'd like more information if you have it." 
id=1257829	 
id=1260009	 
id=1172287	 'What does Safari do here?', (In reply to Aaron Train :aaronmt from ', ) ', Which info? I test with iCab mobile upload support for websites with file. I think for Firefox iOS is the great feaures. Why iOS is restricted.', I'm asking, what is the behaviour of Safari when testing your problem?", (In reply to Aaron Train :aaronmt from ', ) ', Anyways, I just checked. I see the same behaviour in Safari as is in Firefox. When I tap the file upload button, I get a bottom prompt to use Photo Library or Take Photo or Video. Both options work for me. I don't know what iCab Mobile is, but I used directupload.net in the screenshot.", (In reply to Aaron Train :aaronmt from ', ) ', Sorry this is iCab Mobile. ', You has right. Safari and Firefox support for upload, only iOS Photo Library. But iCab mobile support for upload: - iOS Photo library - And other files as mp3,txt etc... The trick by iCab mobile is, it used file manager. Test yourself. Please go to network menu -> uploads via -> iCab mobile This great features', Why??' 
id=1232182	 
id=1236392	 
id=1200791	 'Note that Firefox for iOS uses WKWebView, and support for that is unfinished: ', As pointed out by one of its authors on #media, this is another approach that is worth evaluating: ', Maria: a card for this is probably worthwhile.', The size of binaries concern me: ', is 72.4 MB Building from src, 63M\tsrc/out_ios/Release-iphoneos/libWebRTC-ios-min.a', Bowser now uses WKWebView. Our WebRTC "hack" is now rock solid thanks to moving to WKWebView with proper support for injecting custom JavaScript before page loads: ', OpenWebRTC adds ~20 MB to a distributed app on iOS.' 
id=1256083	 'I forgot to mention as far as WebVR support goes on mobile. Android Firefox nightly is the ONLY browser with full support right now as they just only fixed orientation api bugs there and waiting for a full release. Android Chrome Dev has WebGL rendering bugs and broken. IOS and Safari is fully broken for VR.', Confirming Apple's disabling mechanisms force video into a native player for Firefox also, just tested it. Intentional sabotage from the looks of it on their part. If there is a way to get both CORS working as for some reason CORs is fully functional on any Firefox browser apart from IOS and to force inline video playback that will make Firefox useful for VR on IOS. Right now IOS is useless. VR is exploding right now and I believe it will expose Apple's flaws. If the Firefox issues are related to and reliant on Webkit CORS support for WebGL then there might be problems sadly.", I've now confirmed unfortunately Firefox on IOS uses webkit. So it also caught into the Webkit CORS problem rendering WebVR on IOS useless. I'm not sure if this is anything you can do unless patch the webkit yourself. There is tickets related to this. ", ', Thanks for all the investigation Daniel! Unfortunately we are unable to ship a patched version of WebKit inside Firefox for iOS so we'll need to wait for Apple to address these bugs as part of their OS releases :( Best thing we could do is submit patches to WebKit for the next OS release.", I have been keeping an eye on those tickets to hurry them up. So if possible leave this ticket open and I will notify once it's been committed perhaps. Thanks." 
id=1310400	 'Hello, Can you retrieve the crash report generated on your device and attach it to this bug? * Start by opening up the Settings app. * Navigate to General -> Privacy -> Diagnostics & Usage -> Diagnostic & Usage Data. * Select a Firefox crash from the list. This will start with \u201cFirefox\u201d and contain the timestamp of the crash. * Tap on the crash and you will see a text field with a crash log. Long press to Select All and then Copy the crash text. * Paste it into something you can get off of your device (for example, an email to yourself).' 
id=1224483	 'For me, double tap is nice idea. It may improve user experience. Such functionality can be done relatively easy using two tap gesture recognizers.' 
id=1325466	 'Dan please refer to our Bugzilla Etiquette and Contributor Guidelines ', specifically 1.2 re: aggressive demand and tone', OK. Make that: Often a user might not be the sole owner of the device, especially in families / locations with less resources. (Such users may even have a single icon with their name as title, filled with icons of the apps they use, to keep them separate from the other users of the device.) The very much would like to use Firefox in their own language, while not at the same time messing up the rest of the device incurring the rath of the parent / owner. And / or not having to remember to restore the rest of the device's settings when handing it back to the owner." 
id=1325310	 
id=1296636	 "JavaScript cannot be run in Safari either. The difference is that Safari is displaying a warning message saying 'Cannot Run Script' while Firefox is sending 'javascript:;' to the default search engine. Stephan is there anything we can do here?", I've used bookmarklets on Safari for iOS for saving items to Pocket on iOS 7 so I'm not sure if Safari has removed the functionality or not but I doubt it. We should probably be able to support bookmarklets as well. From my understanding of the code, this might not be a bug necessarily but missing functionality. I'll throw this in our nomination list so we can start a conversation about it in the upcoming triage meeting.", Tracked in AHA-230' 
id=1264279	 'The Expected/Actual results above are incorrect. Here are the correct ones. Actual results: - The sync is not performed while the application is running in background (the time of the last sync does not change) Expected: - Sync is performed on the background', Does it really not sync, or does it not update the UI? (Enter and leave settings very quickly to check this) Does a timed sync occur if you wait 15 minutes while the device is locked? Our only expectation here is that we sync when you exit the application -- that is, when you hit the home button -- so I think this bug is INVALID. We don't expect a sync to occur when the device locks automatically.", The reason this issue was logged is that different behavior was observed while locking device using auto lock and using device lock button: - when using the lock button, it was observed that sync is performed almost instantly after device was unlocked - when the device auto locks, it was observed that after unlocking,sync is performed after a longer period of time.(this is probably a scheduled sync and not a \u201csync on exit\u201d)', As it stands, syncEverything() runs on applicationDidEnterBackground as per ', As such, the app will sync when the home button is pressed and when the device auto-locks. The update to the lastSyncFinishTime happens when the last sync job is finished. You can see the exact time stamp in the logs on the message: ', The only time this will fail is when sync takes longer than 10 minutes allowed by iOS. In that case, the expiration handler is run without the lastSyncFinishTime to be updated. I wouldn't expect the sync to start spontaneously after being in the background for 15 minutes. If anything, I would expect the lastSyncFinishTime to be inaccurate due to be a record of the last attempted sync that finished (successful or unsuccessful), i.e. overly frequent, rather than under frequent as this bug would suggest. Is your sync job especially long? Are these STR reliable?", Comparing the results using the same function(lock device) but through different methods should have the same behavior. It was noticed that this is not the case. While using the lock button to lock device, it can be observed that the Feature "Sync on exit" is functional (the sync is done within second after lock - this can be seen in the in the sync time in settings). While the device auto-locks using auto-lock iOS function, it was noticed that sync is not performed upon exit but rather when returning to the application( this also can be seen in settings in the last sync time). The sync will be performed after ~ 2 minutes when returning to the application.' 
id=1250157	 'It looks like there is a well known crash exactly like this when using 3D touch in UIImagePickerViewController (', ), however we don't use that controller. It may be related, however, so this is probably something related to the UICollectionView in the tab tray." 
id=1281498	 "I'm unsure of how often this will happen. First of all, it's crashing in the Swift framework when trying to convert a NSDictionary -> Swift Dictionary so this isn't happening in our code. Its trying to convert the parameter passed into our observerForKeyValue call that we listen on contentSize changes with. This function gets called all the time when the user is scrolling through a web page since it handles the moveable toolbars. I find it super weird that this will crash only once considering how often this function is called. I feel like this is a random bug in the Swift framework when trying to convert a NSDictionary. I would consider marking as either tracking+ or WONTFIX and re-evaluate options if its actually causing problems.", Is this reproducible in any way enough to raise a radar?', Suspected WebKit bug, so removing tracking version.' 
id=1298032	 
id=1250159	 
id=1250154	 
id=1261394	 'Looks like this is an iOS Bug: ', LAContext throws an exception which is undocumented. Also doesn't implement a failable init in Swift :(" 
id=1279165	 'Hey Catalin could we have some more info on this? Were you syncing while you backgrounded the app? Any info would be appreciated.', Sorry, but I don't have any other info since I wasn't able to reproduce after a re-install. I don't believe that Firefox was syncing when the crashes occurred." 
id=1249649	 'Here are some places where this is discussed: ', Worried about "Unless I disable bitcode in all of the targets (in this case, Alamofire, Pods, Custom Framework, App), I can\'t run it on device."', This is the full crash: Incident Identifier: 86963DF7-2A5F-4DAE-9068-EB1E9D76117E CrashReporter Key: 0fce5ccfe7d924dfbe65792ee7ecab6e37f835b5 Hardware Model: iPhone8,1 Process: Client 9047 Path: /private/var/mobile/Containers/Bundle/Application/452FE1FB-3C9D-42E3-B56F-7D83081358E4/Client.app/Client Identifier: org.mozilla.ios.Firefox Version: 2006 (2.0) Code Type: ARM-64 (Native) Parent Process: launchd 1 Date/Time: 2016-02-18 18:34:32.32 +0100 Launch Time: 2016-02-18 18:34:32.32 +0100 OS Version: iOS 9.2.1 (13D15) Report Version: 105 Exception Type: EXC_BREAKPOINT (SIGTRAP) Exception Codes: 0x0000000000000001, 0x00000001200f9088 Triggered by Thread: 0 Dyld Error Message: Dyld Message: Library not loaded: @rpath/SnapKit.framework/SnapKit Referenced from: /var/mobile/Containers/Bundle/Application/452FE1FB-3C9D-42E3-B56F-7D83081358E4/Client.app/Client Reason: no suitable image found. Did find: \t/private/var/mobile/Containers/Bundle/Application/452FE1FB-3C9D-42E3-B56F-7D83081358E4/Client.app/Frameworks/SnapKit.framework/SnapKit: mremap_encrypted() => -1, errno=12 for /private/var/mobile/Containers/Bundle/Application/452FE1FB-3C9D-42E3-B56F-7D83081358E4/Client.app/Frameworks/SnapKit.framework/SnapKit Dyld Version: 370.6 Binary Images: 0x10005c000 - 0x100307fff Client arm64 <410fa65c62133486b86c65a51aea7edd> /var/mobile/Containers/Bundle/Application/452FE1FB-3C9D-42E3-B56F-7D83081358E4/Client.app/Client 0x1200f8000 - 0x120127fff dyld arm64 <9e98992ceed735e2ac4784cb28efe7c1> /usr/lib/dyld', More info on the "mremap_encrypted() => -1, errno=12" part ', Shout out for help ', Showing up as new signatures for users on 2.1', Showing up plentiful in 3.0 signatures', Seems to be out of our control and an issue with iOS ', Currently completely dominating our 4.0 signature listings in the organizer as of 05/12/16', *** ', has been marked as a duplicate of this bug. ***', "This appears to happen when the device itself runs too low on memory. It\'s an iOS bug that should be fixed in iOS 9.3.2 (in beta 4 at the moment of writing). The users that experience have many apps crashing for them during launch. The only way they can solve it is by restarting their device. The issue is caused by apps using too many (third party) Frameworks. So you can either remove Frameworks (by for example copying third party code into your project) or wait for users to get the iOS update with the fix."', iOS 9.3.2 is out, we should monitor to see if these signatures drop.' 
id=1271576	 'Hello Stefan, the secure flag was checked by mistake. Can you please remove it? Sorry for the inconvenience.', I notice there are no steps 7 and 8, per ', . Can you clarify the steps?', (In reply to Al Billings :abillings from ', ) ', Please see below the correct steps to reproduce: 1. Sign to Firefox account with synced tabs and browsing data from the history panel 2. Wait for Firefox to finish sync 3. Minimize Firefox by pressing the home button 4. Return to Firefox 5. Repeat steps 3 and 4', Works for me, iPhone 6 (master checkout 05/15). This must be an issue with a record on your account. Thread 6 name: Dispatch queue: SwiftData queue: /private/var/mobile/Containers/Shared/AppGroup/EF855EAD-79D4-4877-9D79-CF0C9190AC80/profile.profile/browser.db Thread 6: 0 libsystem_kernel.dylib \t0x0000000197d9287c __kill + 8 1 libsystem_platform.dylib \t0x0000000197e5594c _sigtramp + 68 2 libswiftCore.dylib \t0x000000010224af70 0x10210c000 + 1306480 3 Storage \t0x00000001018473dc BrowserDB.(withConnection<A> (flags : SwiftData.Flags, err : inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> A) -> A).(closure #1) (BrowserDB.swift:250) 4 Storage \t0x0000000101879de8 SwiftData.(withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError?).(closure #1) (SwiftData.swift:116) 5 Storage \t0x0000000101863ee0 thunk (SQLiteBookmarksBase.swift:0) 6 libdispatch.dylib \t0x0000000197c456a8 _dispatch_client_callout + 16 7 libdispatch.dylib \t0x0000000197c50954 _dispatch_barrier_sync_f_invoke + 100 8 Storage \t0x00000001018682e0 SwiftData.withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError? (SwiftData.swift:117) 9 Storage \t0x000000010183fde0 BrowserDB.withConnection<A> (flags : SwiftData.Flags, err : inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> A) -> A (BrowserDB.swift:248) 10 Storage \t0x00000001018402c8 BrowserDB.withReadableConnection<A> (inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> Cursor<A>) -> Cursor<A> (BrowserDB.swift:264) 11 Storage \t0x000000010175ae78 SQLiteRemoteClientsAndTabs.getClientsAndTabs() -> Deferred<Maybe< ClientAndTabs >> (SQLiteRemoteClientsAndTabs.swift:193) 12 Storage \t0x000000010175df68 protocol witness for RemoteClientsAndTabs.getClientsAndTabs() -> Deferred<Maybe< ClientAndTabs >> in conformance SQLiteRemoteClientsAndTabs (SQLiteRemoteClientsAndTabs.swift:187) 13 Client \t0x000000010026a93c BrowserProfile.getCachedClientsAndTabs() -> Deferred<Maybe< ClientAndTabs >> (Profile.swift:393) 14 Client \t0x000000010027b200 protocol witness for Profile.getCachedClientsAndTabs() -> Deferred<Maybe< ClientAndTabs >> in conformance BrowserProfile (Profile.swift:392) 15 Client \t0x00000001002000f4 (RemoteTabsTableViewController in _392C62692D7959CC2F600BB6CBEB13E4).refreshTabs() -> () (RemoteTabsPanel.swift:610) 16 Client \t0x00000001001f401c RemoteTabsPanel.notificationReceived(NSNotification) -> () (RemoteTabsPanel.swift:101) 17 Client \t0x00000001001f419c @objc RemoteTabsPanel.notificationReceived(NSNotification) -> () (RemoteTabsPanel.swift:0) For investigation we might need access your databases and or account off the device.', Tested on build afdbc70. The issue was reproduced following the above steps using the account: User: ', Password: sv12test', I gave the profile a try on the iPhone 6 simulator and on device (iOS 9.3.1/6) and wasn't able to reproduce it from commit 11fe03e7832a894ffe0337370595de18cb043811. If the account has been used in the last 8 hours the data might have change in such a way that doesn't cause this crash :(", Assuming that this is a Fennec/Development build since it was built from master, the line that's throwing the crash is the following assert 1 . On a release build, this won't crash since asserts are ignored. Now, the actual consequence of hitting this assert is another thing. This bug 2 chronicles the life and times of this problem explaining how in some cases we may not be able to open a connection to SQLite. Since this won't crash on release builds, it might be worth moving to tracking+ for investigation later. 1 ", 2 ' 
id=1277249	 'On my iPhone 6, I am unable to move the handles around ' 
id=1263091	 
id=1298033	 
id=1250155	 "Let's see where we're crashing in AppDelegate.", This crashes on the last line of: // Workaround for crashing in the background when <select> popovers are visible (rdar://24571325). let jsBlurSelect = "if (document.activeElement && document.activeElement.tagName === \'SELECT\') { document.activeElement.blur(); }" tabManager.selectedTab?.webView?.evaluateJavaScript(jsBlurSelect, completionHandler: nil)' 
id=1231157	 'I just notice the "Firefox for Android" on top of my comment. This is wrong, of course. I didn\'t have any chance to select any other than "Firefox" when I submitted the bug. I edited it afterwards to be for "Firefox for iOS". I think the "Android" is from checking "happens on my phone or tablet".', I can't reproduce. Can you link to a simple test case? Here's what I'm trying: 1) Go to ", 2) Enter test:test as username:password. 3) Click the button. 4) See the alert dialog. The button in step 3 does an XHR for ', , which is also an authenticated resource in this directory. The text contents are shown in the alert dialog with no additional authentication prompt.', Thanks for your attention. I have a repro case for you. But first let me apologize. It's not an XHR, it's HTML5 audio. I wasn't that familiar with the code at that time, it's a huge WebApp that uses XHR for other ressources. I've built a simple example, just using the HTML5AudioElement. You can test here with the same user you used above: ", The problem might be specific to HTML5 audio (or media) functionality. And I think I may have found a second bug (more below). Login and hit Snap. It launches the Login dialog again and once you submit it it downloads the sound and plays it. You can repeat this and it will ask for the password again, each time you hit the button. I wrote in my initial bug report that the file is not played either. That\'s still true, but apparentally only in our WebApp. The audio player function in it is a bit more complex and I don\'t know where that might be failing. In my example it plays the sound, but launches the login each time. I think once this is fixed our WebApp should be playing the file as well. Now, for the second bug. Note, that I didn\'t tell you to hit Click. Do it now. Notice that nothing happens. It doesn\'t work in Firefox on Windows either. Now fetch the mp3 file and play it in any player on Windows (I tried several). Or other browsers (I tried only IE11). Works fine. Firefox on Windows sends this error to the console: "Media resource ', could not be decoded." I recoded the file twice with Foobar. Firefox still doesn\'t like it. The format of the file may still be incorrect, but if all other programs I tried can play it and recoding doesn\'t help, I rather guess there\'s something in the embedded player in Firefox that trips over the file and not a corrupted format.', Additional about the click.mp3 bug: Accessing the click.mp3 directly in Firefox on Windows gives a "Video can\'t be played because the file is corrupt." So, it can\'t determine the file format or determines a wrong one, it seems.', I can play click.mp3 in Firefox 46 for Mac. It correctly prompts on the 401, then test:test gives me a 200 and it plays.', Funny, yes, I can confirm that it works on Firefox (just downloaded and installed) on OS X. Windows is only on Firefox 44 (why?), I tested on Windows 10 and on XP. It doesn't work there. And it doesn't work on iOS 9. As this is a different bug, should I file it as a new one or can you split this thread to a new bug?" 
id=1261393	 
id=1239145	 
id=1221548	 'Reproducible.', You need to be logged in to Google+ to see this bug in action. This is what the console prints: 2015-11-05 21:41:33.136 Error Browser.swift:158 restore > creating webview with no lastRequest and no session data: nil', I think the BBC may have implemented this in the wrong way. On Mashable they also have G+ links and when I use those, the G+ page correctly pops up in a new tab and hitting the X button closes the tab. We still should not fail on this though. I think we should properly handle the above Error in Browser.swift and maybe just not do anything at all, or load an empty tab.', Also, when I try the STR in Safari, G+ also does not do the correct thing. When cancelling the post it should probably go back to the original page. But it does not, instead it shows some generic G+ page. I don't think this is surprising if it was supposed to run in a new tab.", func webView(webView:, createWebViewWithConfiguration: forNavigationAction navigationAction:, windowFeatures:) -> WKWebView? is not called when tapping the G+ link. So I don't think this is supposed to open a new tab?" 
id=1220378	 'Created ', ', PR: ', This patch pulls the handling of the `AVAudioSessionInterruptionNotification` out of the `AuralProgressBar.UI` class and moves it into `AuralProgressBar`. This lets us restart the audio engine only if there is still a load happening, when the progress is not `nil`. This is not the best patch, but I tried to do a minimal change to keep the risk low. I think we should do some followup work to make the `AuralProgressBar` better integrated.', Aaron, I tried my best to look at previous Audio regressions and test if those are still fixed after my changed. I think we are good, but maybe you can spend a little time on those too?', Comment on ', ', PR: ', Looks OK to me if it works. It seems like AVAudioEngine has been giving us a lot of trouble recently, so we might want to consider removing AuralProgressBar altogether if there are any more issues. It's a nice a11y feature, but it's not necessary and certainly not worth all the crashes/bugs it's been causing.", Just throwing this out there but if we're not feeling 100% on the fix, could we remove it from the 1.2 build and then add a fix for 2.0 to give it additional 'bake' time?", (In reply to Stephan Leroux :sleroux from ', ) ', As an alternative, I would consider disabling AuralProgressBar completely until we have a better implementation.', Oops that what I meant - remove AuralProgressBar, not this patch.', I filed ', lets decide during triage if we want to move this bug to 2.0', Moving this to 2.0 or a next bugfix release.', Looks like this has 2 r+'s and a PR with a comment on in. Should we land this?" 
id=1263704	 
id=1260852	 "Looking at iTunes backups of my app, I see logins.db.bak.1 (400KB+) and a new empty DB created. That means we failed to open the database. Sync did not re-fill the new database, which means our corruption-handling code didn't run.", Works for me on my iPhone 5 (9.3) and iPhone 6 (9.3). To re-test I re-downloaded 2.1 (via the purchased section on the App Store) on both and re-updated both. Both are signed into my personal account.', Hypothesis is that if this is Keychain related you will not be able to re-attempt on a device: the Keychain lives longer than the app. Potential STR: * Clean metal. * Install 2.1. Save logins. * Possibly: install 3.0 Beta or a developer build of some kind. * Upgrade 2.1 to 3.0 from the App Store.', From these, it sounds like either: 1. Logins DB became corrupted which it shouldn't have been. 2. Corrupted DB should repopulate new instance. 3. Both? Questions I have: 1. If a logins DB can be corrupted how does this happen and how is it related to the keychain? 2. If corrupted DB is encountered, what should happen?", (In reply to Stephan Leroux :sleroux from ', ) ', The first database operation will fail if the DB is malformed or our key is wrong. See BrowserDB.init: // Create or update will also delete and create the database if our key was incorrect. self.createOrUpdate(self.schemaTable) It might legitimately be corrupt (e.g., by the process being terminated and the filesystem lying about fsyncs), or we might not have the right key. Or any key at all. ', If .createOrUpdate fails in BrowserDB, we move the database and send NotificationDatabaseWasRecreated. BrowserSyncManager listens for that, calling into handleRecreationOfDatabaseNamed, which resets Sync for the collections stored in that DB. The end result is that we sync again, downloading everything from the server. We tested this extensively in ', and ', . Apparently in this case, on both of my devices, we did move the database. If we did reset the synchronizer (and the simplest explanation is that we did not), it certainly didn't affect the database that's in use by the frontend, or it didn't work for some other reason.", Created ', ', Commit ', I've created a patch that adds an option to our debug menu for clearing anything our app puts into the keychain to simulate the 'fresh metal' experience. Hopefully this will help with reproducing the issue. Next step is going to cherry pick this on top of our production release, rebuild, and try to reproduce.", Tried the following without being able to reproduce: 1. Installed 3.0 modified version with wipe keychain debug option 2. Wiped keychain items associated with Firefox 3. Install 2.1 4. Sync up logins 5. Install 3.0 modified on top of 2.1 6. Logins appeared.', Looks like Maria was able to reproduce a similar issue but with browser.db instead of logins. Correct me if I'm wrong Richard but this sounds like this might rule out an issue related to the keychain and provides more evidence towards DB recovery after a corruption/upgrade.", *** ', has been marked as a duplicate of this bug. ***', Will need a 'release branded' TestFlight build to further test upgrade scenarios over the App Store build.", Clearing NI for now. Let's see if we get any reports with the recent 4.0 release." 
id=1201227	 
id=1262566	 "We should be doing a couple of thingss: 1. Upon entering the Settings screen, start listening for network connectivity changes. 2. If offline, update visual state of sync now button to a disabled state (greyed out, messaging, etc) 3. If online, re-enable sync now setting The other part is if we lose connection during a sync operation. For this bug, let's address the more common case listed above first. I've filed ", as a follow up bug to handle mid-sync connection loss.', If it makes you feel any better, I discovered a way to repllicate this behaviour in desktop too.' 
id=1251262	 'Need strings?', Robin, any thoughts about what we should do here?' 
id=1193363	 
id=1144712	 'Created ', ipad-before-screenshot.png', Created ', ipad-after-screenshot.png', Created ', iphone-before-screenshot.png', Created ', iphone-after-screenshot.png', Created ', ', Pull request The only way I found for including the status bar in the screenshot is using UIScreen's snapshotViewAfterScreenUpdates method. However, while testing on the simulator I saw a few graphical glitches (see attached screenshots). It could be a simulator thing but, unfortunately, I cannot verify this assumption as I cannot build to a device due to missing provisioning profiles. Generally, using UIWindow's drawViewHierarchyInRect method did produce better results on the simulator (but without including the status bar). I also tried to combine both approaches by rendering on top of each other but this breaks in a multi-tasking scenario because there seems to be no way to determine the application windows' position on the screen (snapshotViewAfterScreenUpdates will capture the whole screen and the window could be in the left or right pane).", We can test this PR branch on a few devices to see how it works there. We all also have 8.x devices too. Aaron, do you have the ability to run this on a device and see if it makes a difference?', The code looks fine. Just want to be sure it makes an actual difference.', Hennes, I just tried on my iPhone 6s and the screenshot is completely blank. Not sure what is going on there. Looping in :sleroux because he may remember some of the details of screenshotting when he did the first version of this.', Comment on ', ', Pull request Switching reviewers.', I'm seeing the feedback image blank as well on my iPhone 6. Not sure what's causing it though. When I first implemented the screenshot logic I don't remember having a reason for using snapshotViewAfterScreenUpdates over drawViewHierarchy in rect. Actually I don't remember if the status bar was showing in the first implementation or not.", Saw the same', Sorry, I forgot to add myself to the CC list so I didn't get any update notifications on this ticket. It's weird that it doesn't work at all on the device but at least to some extent on the simulator. I guess using snapshotViewAfterScreenUpdates is not a valid option then. :(", Hey hennes, Did you still want to work on this? I was going to mark the current PR as obsolete if you wanted to give it another go.', Stephan, sorry, I'm currently out of ideas here. The current PR is definitely obsolete because it doesn't seem to work at all on a device. I'm not aware of any other options, sadly." 
id=1165748	 'Created ', ', ', Looks good. I vote we don't fix #1 right now, it should be apparent by the UI below which state you are in.", :darrin what do you think about an inverse of the RV indication icon, but keep it orange?' 
id=1242627	 "Ran the profiler with 28 tabs and wasn't able to notice a significant drop but there was a slight one. Looking at the profiler the culprit looks to be the preserveTabs invocation we make as a result of removing the tab. I also checked out the scrolling performance of the tab cell and noticed that we are adding/removing subviews every time a cell gets recycled (which is very bad considering we also instantiate a blur view as part of that). See attachments for the profiler outputs.", Created ', Screenshot 2016-01-26 14.15.33.png TabCell.applyStyle slowness', Created ', Screenshot 2016-01-26 14.17.52.png preserveTabs slowness', How much of the jank is fixed if we temporarily remove the call to preserveTabs?' 
id=1209282	 'Nice catch!', *** ', has been marked as a duplicate of this bug. ***', should this be mentored?', Yup' 
id=1277502	 "WKWebView has a built-in PDF renderer that does not use HTML at all, so any JavaScript expressions (such as the one we're currently using to find the selected text) is failing. If we want this to succeed, we either need to find a way to get the user's selected text in an arbitrary WKWebView, or use our own PDF renderer (such as PDF.js) from which we can fetch this sort of data." 
id=1158503	 'Related to ', (just the VoiceOver part, but I think it should be in one integral bug).', Created ', ', PR (Copied from Github) Finally got this working right. The idea now is that instead of setting contentInsets on the WKWebView's scroll view, the view is pinned to the toolbars using constraints so as they animate, the web view will expand. The additional trick in this branch is turning off the scrollView layer's maskToBounds property so the web content will render outside of the scroll view, beneath the toolbars. Additionally, I wrapped the showToolbars call in the scrollViewWillEndDragging method with a dispatch_async block to allow the scroll view to handle it's own animation first on the main queue and run the toolbar animation after so position:fixed elements on the page don't jump around. Last thing, I added a minimum content size for which the toolbars actually scroll away at. I noticed Safari does the same thing where if a page is too short or a fixed size, don't try to scroll away the toolbars.", Oops wrong bug.', :-)' 
id=1222993	 'Is this reproducible on Android? Can you attach a screenshot?', Created ', Safari vs firefox layout reader mode.jpg', Hey Aaron, Yes, this behavior is also reproducible on Android (same text display and alignment in reader mode). While accessing the same page on Safari and switching to reader mode it can be noticed that tables are kept (attachment added: "Safari vs Firefox layout reader mode")', After further investigation and comparing the desktop site to the mobile reader mode it seems that data is missing when switching from online view to reader mode. this issue seems to be influenced by the presence of tables in the page. As an example I\'ve compared "WW2 wikipedia" desktop page to the same page in iOS reader mode. The result is obvious since the first part of the page is not displayed at all in reader mode.' 
id=1247339	 
id=1188168	 'Created ', ', Link to Github pull-request: ', Comments are on the PR.', Comment on ', ', Link to Github pull-request: ', Nice, looking good!', Seen on Reddit as a complaint from a user using a new iPad Pro and keyboard' 
id=1224876	 
id=1203545	 
id=1271017	 'Created ', Screenshot 2016-05-06 20.34.46.png' 
id=1303790	 'Created ', ', Link to pull request By using en-US, we more closely match Android.' 
id=1252547	 
id=1240864	 'Created ', Result And when I tap on "example.org" I get this.', That\'s very annoying for nondomains like C libraries, to search for "stdlib.h" I need to add something to query, or I\'ll see "A server with the specified hostname could not be found." error :(', I seem to remember Brian working on this on Android\u2026 what do we do there, Brian?', Same thing -- any single-word result containing a period is considered a domain. We do already have a list of TLDs on iOS, so we could theoretically do a filter with those to make the detection more accurate. One difference on Android is that the first search suggestion result is always exactly whatever the user typed, but clicking it *always* triggers a search. We don't currently have the query-as-a-suggestion pill on iOS.", There is buttons row with different search engines, so I could type domain and search for it by tapping on one of these. But there\'s no engine which is set to default now. But there\'s loupe icon, and it allows you to open search setup. So maybe it\'s better to allow search by tapping on that? Or even better: add "open url" button for domains: when user inputs correct url/domain just after search suggestions would be block which opens it. I mean block like history and bookmark suggestions.', Created ', image.jpg It's suggestion from history", Created ', No suggestion It would be great if "foobar.com" would show here like "example.com" in previous screenshot.' 
id=1235860	 
id=1231537	 'Created ', Distorted Settings UI with biggest accessibility font size - cropped content in cells (e.g. "g" in "Login") - "When leaving private browsing" header seems to be not in the right place', Comment on ', Distorted Settings UI with biggest accessibility font size also: - headers (like "General", "Privacy") seem totally unproportional in size to the cell content font.' 
id=1183914	 
id=1321331	 
id=1254269	 'Workaround to restore the image for the associated tile is to close edit mode.', Steph to see if there's a simple fix (invalidate).", This is fixed on master (4.0) (8d169). I can't reproduce using the same steps.", Tested on build 4.0.0b1 The issue is still reproducible following the steps in the bug description, on IPad Air 2 iOS 9.3.1', Created ', Screenshot of the issue on IPad Air 2' 
id=1222521	 
id=1237477	 "Okay, so... a) we should coordinate with localizers. DDG hasn't been universally popular (some regions just don't have great results yet), IIRC. We're allowed to ship DDG wherever we want. b) I hate list.txt, and I'm sad that's how we're doing things.", (In reply to Mike Connor :mconnor from ', ) ', That's because we literally scrap Fennec for search settings and searchplugins. If we add DDG on iOS side, we should forget about syncing searchplugins (that's already broken because of Wikipedia, see ", ).', This is requested on SUMO ' 
id=1261169	 'To clarify: the reason for this is that storing this information will allow the iOS Sync client to make decisions about which clients to send repair commands to -- e.g., to desktop devices running Firefox 54 or later.' 
id=1297779	 
id=1164017	 "Might not be much we can do here. It might be worth looking at removing webviews from the view hierarchy more often. I put them there because otherwise i couldn't get screenshots. Now we actually store those (sometimes?)" 
id=1252469	 
id=1191585	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1194377	 'Can we delay creation of the webview? It only has to happen before the user (a) taps a tile or (b) finishes typing a URL or search, right?', Still an issue on master' 
id=1131262	 'Created ', IMG_0182.PNG' 
id=1166814	 'My browser DB from my 6S is 10MB: sqlite> select count(*) from favicons; 852 sqlite> select count(*) from visits; 36223 sqlite> select count(*) from domains; 1879 sqlite> select count(*) from tabs; 49 sqlite> select count(*) from favicon_sites; 2540 sqlite> select count(*) from history; 18185', Created ', Output of sqlite3_analyzer.' 
id=1255027	 'Load CNN.com 2016-03-09 10:44:49.422 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about 2016-03-09 10:44:49.559 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about 2016-03-09 10:44:49.561 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about 2016-03-09 10:44:50.277 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about 2016-03-09 10:45:12.432 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about 2016-03-09 10:45:12.480 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about 2016-03-09 10:45:12.483 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about 2016-03-09 10:45:12.764 Client 2012:156375 LaunchServices: ERROR: There is no registered handler for URL scheme about' 
id=1197831	 
id=1278572	 
id=1223410	 
id=1294224	 
id=1281805	 
id=1118403	 "I think confirmation dialogs for these are appreciated. Better would be if you could turn these off if the user doesn't happen to like them." 
id=1232704	 
id=1133563	 "I have a patch that resolves the panning speed increase which I'm folding in today (", ) but there is some more work to be done for the other bugs such as the jumpy google.ca issue. I have an alternative scrolling approach thats WIP that looks like it fixes the google.com issue and potentially some others as well that Ill be testing out later this week.' 
id=1212013	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", This bug is really in two parts: we have multiple SQL access layers (SQLite.swift and SwiftData), and we have potentially multiple sqlite libraries in play (sqlcipher.o and sqlite3.framework). I'm a little worried that the latter is contributing to database corruption: --- 2.2.1 Multiple copies of SQLite linked into the same application As pointed out in the previous paragraph, SQLite takes steps to work around the quirks of POSIX advisory locking. Part of that work-around involves keeping a global list (mutex protected) of open SQLite database files. But, if multiple copies of SQLite are linked into the same application, then there will be multiple instances of this global list. Database connections opened using one copy of the SQLite library will be unaware of database connections opened using the other copy, and will be unable to work around the POSIX advisory locking quirks. A close() operation on one connection might unknowingly clear the locks on a different database connection, leading to database corruption. The scenario above sounds far-fetched. But the SQLite developers are aware of at least one commercial product that was released with exactly this bug. The vendor came to the SQLite developers seeking help in tracking down some infrequent database corruption issues they were seeing on Linux and Mac. The problem was eventually traced to the fact that the application was linking against two separate copies of SQLite. The solution was to change the application build procedures to link against just one copy of SQLite instead of two. --- If we can't determine conclusively that we're not linking against multiple copies of sqlite (who knows what happens if we link one dynamically and one statically!), then I think we should go ahead and fix this bug as much as we're able. tracking?." 
id=1329807	 'Created ', Pull Request I've left some comments on GH." 
id=1314391	 'This has already been split into 2 parts. 1. I want to understand what top sites are 2. I want to understand what highlights are.' 
id=1260895	 
id=1202688	 'Might want new copy: "Last active"? Ryan, I think this was you. Is the clock wrong on the other device?', Unlikely as it\'s using a network clock, and also that\'s probably the last time I did use it. I think it\'s just how "today" is being calculated, no? (like last 24 hours or something? just a guess)' 
id=1130649	 "Yeah I setup Travis. I did not do much more than just put a .travis.yml in the project. I had hoped things would build but yes it fails on some git submodule. I don't want to spend much time on Travis now. But having that 3 line config in the project will at least tell us if PRs will build, etc. So that is a nice to have I think. Lets talk about git submodules on monday. I thought we avoided those .. for the same reason we put actual source code under ThirdParty. IMO that is still the best way to go to keep this project simple and 'check out and hit run in xcode' ..." 
id=1206386	 "Does this issue seem similar/the same? If it is I'll mark this as a dupe. ", (In reply to Stephan Leroux :sleroux from ', ) ', Hmm, I tried other pages and it only seems to happen on google search result page.', While I think this is the same bug, the PR in ', will fix this issue when merged.', Is this still an issue with ', fixed?', Worth retesting to see. I believe this should be resolved.' 
id=1155139	 
id=1270941	 '(In reply to Stefan Arentz :st3fan from ', ) ', Hi, The whole of Turn on search suggestions mirrored in the correct side same other RTL products.' 
id=1244040	 'I think this is WONTFIX. The page is loaded in a content view controller.' 
id=1254793	 'I have contributed this patch to Fastlane/Snapshot ', This patch has been included in the last fastlane code. It now supports the --derived_data_path parameter, which we should start using to make sure we keep the Derived Data (compiled project) around between invocations. This speeds up things considerably.' 
id=1146594	 'Picking this up.', Using this post v1 because this is a rather large refactoring with no obvious user benefits.' 
id=1210156	 "In triage we discussed making this a checkbox in Clear Private Data: Top Sites excluded domains That's doable for 2.0." 
id=1223402	 
id=1232523	 'Sounds like the same page jumping symptom in ' 
id=1221703	 'Nick, did you have to deal with this before?', I don't think we surface this kind of failure; we definitely don't have UI to say that your account disappeared from under you! Logs would make this bug a little more actionable, if you have them; otherwise Nick or I can grab them.", Default logs from the simulator, right after I hit "Sync now" (with a deleted account): ``` 2015-11-04 15:37:18.386 Debug SyncAuthState.swift:113 token(_:canBeExpired:) > Advancing Account state. 2015-11-04 15:37:18.386 Info FxALoginStateMachine.swift:57 advanceOneState(_:now:) > Advancing from state: married 2015-11-04 15:37:18.386 Debug FxALoginStateMachine.swift:61 advanceOneState(_:now:) > Checking key pair freshness. 2015-11-04 15:37:18.387 Debug FxALoginStateMachine.swift:66 advanceOneState(_:now:) > Checking certificate freshness. 2015-11-04 15:37:18.387 Info FxALoginStateMachine.swift:71 advanceOneState(_:now:) > Key pair and certificate are fresh; staying Married. 2015-11-04 15:37:18.387 Debug FirefoxAccount.swift:182 advance() > no advance() in progress; setting and returning new shared deferred. 2015-11-04 15:37:18.387 Info KeychainCache.swift:52 checkpoint() > Storing account.state in Keychain with label account.state.lCz1Q5Szu-I6. 2015-11-04 15:37:18.394 Debug FirefoxAccount.swift:191 advance() > advance() completed and shared deferred is existing deferred; clearing shared deferred. 2015-11-04 15:37:18.394 Info SyncAuthState.swift:116 token(_:canBeExpired:) > Account is in Married state; generating assertion. 2015-11-04 15:37:18.395 Debug SyncAuthState.swift:121 token(_:canBeExpired:) > Fetching token server token. ```', I guess this comes from caching the FxA certificate, it can happily keep syncing for a couple of hours before it needs to checkin again with FxA and discover that the account has been deleted, at which point it should definitely start reporting an error.', Yup. The only thing we fetch fresh each time is the token server token. If you need insta-logout, you need to tell the token server and/or implement a push-based system as part of the device manager.', This would reduce but maybe not eliminate the problem, since tokenserver tokens can also be cached. ', Let's do this one. I know Nick has been doing some work on WebPush for Android, is there similar work in progress for iOS?", Not yet. We've got GCM coming for Android; we'd need a deployed push-to-APNS bridge and an appropriate registration client for iOS, as well as all the wiring to FxA. Fortunately users don't delete accounts often, right?", Rather than talk about push, let's break down a few things we should do to make this better. The first is to observe account deletions instigated locally. (I think we don't allow this yet, but some iOS v2 interface will). This is the Firefox for iOS version of ", . The second is to make the login state machine recognize when the remote account has been deleted, and to message that the account has disappeared and clean up the device state as appropriate. This is the equivalent of Fennec's ", .', (In reply to Nick Alexander :nalexander from ', ) ', Wait -- this *is* ', . ', Let's mutate this ticket to be this. I think we'd see an error with error code 102 (account does not exist); we'd then use the API at ", to confirm the account is gone, and message as appropriate.', Related? ', (In reply to Ryan Feeley :rfeeley from ', ) ', Yep. I filed that ticket after witnessing this issue on Android.' 
id=1246182	 "We discussed this in the funnel review, and identified dependencies before this ships: * We need to make it easy to fill logins; a long-press context menu, for example. * We should support autocomplete, too. This is a security/usability tradeoff, and we fall on the usability side: simply disabling autofill looks like we're actively breaking the web. As such, I don't think this is a 2.0+, no?", I had it 2.0+ prior to the funnel meeting on Friday so I think this is 3.0+.', ni to get those dependencies filed.', Filed ', and ' 
id=1328871	 
id=1160785	 "I looked at this. The problem is that the order of these 2 events is not deterministic: 1. Reader Mode button state change 2. webView:didFinishNavigation: (where we post AXScreenChanged) I.e. most of the time, 2. happens after 1., so we can pass AXScreenChanged the parameter to say that reader mode is available (when it is, as learned from the Browser's ReaderMode helper's state). But sometimes 2. happens before 1., which makes it unreliable. So currently this is not reliably possible without some more involved tracking of state and of this actual order." 
id=1224382	 'Is this significant enough to warrant tracking as a feature card?', Sure!' 
id=1249855	 
id=1314384	 'We talked about this in the Android version of this, ', - the discussion is worth reading. - both mobile platforms should handle this in the same way - contrary to the title, we don\'t want to display the same AS items on all devices, but rather we want to display platform-specific items. On both mobile platforms we track "local" visits to a page (as opposed to "remote", from "other devices"), so we\'d like to use that to prioritize AS Actionable items: - prioritize locally visited history items in the top sites - ensure that highlights algorithm is the same as on other platforms. Still need to figure out how we might need to adjust it prioritize local visits - ideally we\'d like to have sync-aware telemetry to understand how people are using top sites (see Android ', in its early state)', tracks prioritization of local history in AS Top Sites on Android.' 
id=1270860	 
id=1127846	 
id=1227550	 'So, UIAppearance has been removed for this issue: ', , but we still need a better styling option for introduction of Lightweight themes etc, so we should use this bug to investigate css-like (or other) alternatives.' 
id=1173044	 
id=1265016	 
id=1323459	 
id=1230288	 'Created ', ', Link to Github pull-request: ', This is a follow-up from ', . Just dropping all references to the BVC and profile isn't enough \u2014 something is still holding a reference. So we forcibly close during applicationWillTerminate. In the newly introduced background() call we log our open file descriptors. If we see more than one reference to a DB, we might be in trouble. The big change here is that we don't routinely close the database connection when backgrounding. This avoids some flapping. Because we close the connection in applicationWillTerminate, this also makes sure that we close any connection we open in the background due to a delayed sync. We might consider doing the latter regardless.", Thoughts on my last remark? Should we be belt-and-braces closing connections in applicationWillTerminate?', I don't see any harm in belt and bracing. As we are not backgrounding we don't have to worry about the possibility of applicationWillTerminate not being called, and it should always be called when the app crashes so it seems a safe place to do it. I would rather be overcareful than undercareful at this stage.", According to the docs 1 , applicationWillTerminate won't be called if we've been suspended while in the background. What will happen in this case? 1 ", :', Looks like you added UIApplicationExitsOnSuspend in ', , so I guess that answers that question.', UIApplicationExitsOnSuspend is there in a "TESTING" commit. We won\'t land that. There\'s nothing we can do about being suspended just yet. We don\'t get told about entering that state. The best we can do is close connections when we\'re backgrounded, which we do, and close connections when we\'re done with them, which is more complicated than I\'d like to tackle right now, hence this bug :) The right fix, approximately, is to refcount our DB connections. We hold a reference somewhere, which is why we explicitly close.', Moving into the backlog. See branch rnewman/bug-1230288-db-connection for existing work on this bug.' 
id=1197056	 
id=1293512	 'Created ', ', pull request Support qr code by using AVFoundation framework.' 
id=1210134	 
id=1200699	 'Android (and Pocket, IIRC) have a resolved_url and resolved_title column. This serves several purposes: * It lets you save data up-front (e.g., Android share intent titles) even if you later want to store the page title * It lets you re-fetch later if a redirect changes * It gives you a list of things that need resolving! * It lets you detect re-adds of the original URL _or_ the final URL without doing post-fetch deduping', I came across this: ', . We can definitely do long running tasks such as URL resolving from the action. Another interesting thing we can do (maybe not for this bug) is execute a Javascript script while in Safari on the content that's displayed. Wonder if we can find a use for that.", I don't think we should be investing further in RL given the pending switch to bookmarks. We'll run into this again when we reach offline bookmarks." 
id=1258050	 
id=1226025	 'Do you know anything about this Stefan?', here is the webkit bug ', Unfortunately this is out of our control. We have to reach out to our WebKit colleagues and see if they are interested in fixing this for the WKWebView.', Adding a new webkit whiteboard tag to keep track of things that need to be fixed in WebKit.', this has been marked resolved in WebKit land' 
id=1171186	 
id=1262956	 
id=1314734	 'Also there seems to be no way to tinker with the date/time on simulator as well, as the time menu in Setting is not visible, and the simulator does not have an option to modify the time.', It's uniformly a good idea to make your API entry points take a time as input, rather than quietly retrieving the current time. The current time is global state. You shouldn't need to alter the device time in order to test your app.", Initial idea was to extract the browser.db (and tab state) after visiting some sites, and pre-load the file into the device/simulator prior to the testing. Then upon starting the app, it will show the highlights and history based on the information from the loaded browser.db I tried loading the xcappdata file fetched from the device and load it as Application Data in Edit Scheme -> Run -> Application Data, but 9 out of 10 times the XCode 8 was crashing with '(basePath) should not be nil.' Plus, since this would be copying the browser.db file into the shared app container, the contents of browser.db should be somehow fed into the app in the test code. (It looked to me that it did load the tab states though, although I couldn't re-verify it since xcode was crashing) It would be great if there a way to overwrite the contents of the browser.db from the source file provided, (probably needing a dev support on this)", In a UITest you can just do: (UIApplication.sharedApplication().delegate as? AppDelegate)?.profile and do whatever you like, right? You can directly add history via SQLiteHistory's APIs in your test setup code. We use this technique in UITests/Global.swift for SearchUtils.getDefaultEngine().", You probably don't want to directly write SQL into the database \u2014\xa0use the APIs.", So I have created a new test function here: ', the thing is, It builds fine, but when I try to run testHighlights, I get a mach linker error, something like: Undefined symbols for architecture x86_64: "Deferred.Deferred.value.getter : A", referenced from: XCUITests.ActivityStreamTest.((addSite in _82DE68B54E1F91CE283E2924CB71ABAB) (Storage.BrowserHistory, url : Swift.String, title : Swift.String, s : Swift.Bool) -> ()).(implicit closure #2) in ActivityStreamTest.o XCUITests.ActivityStreamTest.((clear in _82DE68B54E1F91CE283E2924CB71ABAB) (Storage.BrowserHistory) -> ()).(implicit closure #1) in ActivityStreamTest.o Looks like I need to include a module somehow, but the ClientTests/TestHistory.swift doesn\'t seem to have anything special in this Build Phases window though, and I can\'t seem to find a solution for this. another help would be much appreciated.', To resolve the linker errors, yo ll need to import both the Deferred and Shared library since `addLocalVisit` returns a `Deferred` value. After importing those, I ran into another error where it wasn't able to find the 'type metadata accessor for Client.AppDelegate' even though we import Client using @testable. Digging into this more, I think there is a fundamental problem here in that when yo re calling `UIApplication.sharedApplication.delegate`, yo re not getting an instance of the Firefox application's delegate but the XCUIApplication delegate. XCUITests run from another app and hook into Firefox so by doing this yo re actually not referring to Firefox. XCUITests are truly black box tests where we don't have access to the same memory/runtime methods you can invoke from Firefox. Unfortunately this doesn't help the problem of trying to load mock data for use in the test case. I think the only solution would be to figure out a way to pass in a profile to Firefox using launch arguments. I'm not sure how this is done though but I imagine there should be a way :/", I noticed that ClientTests/TestHistory.swift is in fact modifying the history data, and it is a subclass of XCTest as well. Is there another key difference between this test and the tests in XCUITests folder, other than the fact that one accesses the UI element and the other doesn't? I thought if we somehow edit the build setting, we could do what TestHistory.swift does as well.", TestHistory.swift is run with ClientTests which are unit tests where as in your case the test is part of the XCUITest target. IIRC the unit test bundle is loaded within the app so you have access to all of the APIS (white box testing) but the XCUITest is run outside of the application (black box testing).', After scouring for the relevant info on web, it seems that any modification to the app is actively discouraged, so even if I find the loophole, there's a chance that it'll be plugged in the future. I was thinking, perhaps we could define extra set of launch arguments to the ios app which could self-populate the profile with test data. (In normal circumstances, those arguments will not be called- like, currently used LaunchArguments.SkipIntro and LaunchArguments.ClearProfile) That way we don't violate the intent of XC UI Test, yet have a way to trigger the population of test data. Does it sound reasonable?", This sounds like the right approach but I think we can do even better. We can create a mechanism in which we load a specific profile from the launch arguments. The profile would be built using a premade SQLite snapshot containing a bunch of test data, cached Info.plist files to populate the profile's NSUserDefaults instance, and any other profile specific data we'll need to populate with. It would be great if we could pass in a filepath as a launch argument and have the app load in the profile data like that but I'm not sure if we can do that on iOS. Otherwise, we can find a way of bundling it in the app and having a set of profiles we can use for test.", So from the irc discussion, the way to do this would be: Devs: - Create a way to copy application data containing the browser database back to the application workspace (Currently there is a way to copy the browser.db to shared workspace, so the reverse should be possible) - Create an API call and expose it so above would be possible in test scripts QA: - Extract a browser.db with data populated from Firefox, and load it while the test is running (via the scheme setting) - In the test script, use the provided API to load the browser data into Firefox - Verify the bookmarks, history, and other data have been loaded - Run script' 
id=1228732	 'Sounds like a decent bug that can be mentored.' 
id=1186976	 
id=1232300	 'Yup, known limitation, and we should address it at some point!' 
id=1279179	 'about:credits would be also be neat since it could expose ', in the app itself.' 
id=1182350	 'N.B., we can pull logs via the Xcode device manager, so just writing them to disk is a good starting point for devs.', I've split out the basics into ", .' 
id=1205699	 "I want to land a string for this. How does 'View Later in Private' work?", It isn't clear if this is a desired use-case", Old topic we forgot about - moving this to tecgirl', This hasn't come up yet in any research but we could offer it and hopefully be able to track it soon to see if it has any engagement." 
id=1174052	 "Note that I'm reproducing this in the simulator, which of course has the precision of a mouse cursor.", Emily, could you look into this and compare to Safari? If it happens there, let's close.", checked in Safari. Clicking the arrow to the right of username on the simulator zoomed out with mouse precision, every single time, clicked & loaded Reports instead of opening a menu. Interestingly, when zoomed in in Safari, I also could not click the expand arrow - nothing happens at all. The menu does not expand and you are not taken to mozilla.org. From examining the CSS, the mozilla.org link is much larger on the page than the image suggests. Clicking the expand arrow more on the username side than the mozilla link side or middle in Firefox reliably produced just the menu. Also tried in Chrome, but Chrome kept forgetting that I had logged in with persona and so I couldn't even get to the test state....." 
id=1243527	 
id=1210119	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", Created ', Light-Weight Themes 1st pass attached for review.', Comment on ', Light-Weight Themes Looks great! Is there a choice to revert to default? (black) Related: Are we planning on just supporting default images/photos for now? Also maybe the ability to control the amount of blur. We talked about possibly having a color picker. Should we show the permission interaction here? On first access, the user will need to give permission to access the Camera Roll. What happens if they say no and want to say yes later?', Created ', Lightweight Themes (v2) Thanks Robin. I originally had an empty box with an X through it to show the default state. I guess it was confusing. I've now just replaced it with solid black so it's clearer. We could probably also include some other solid colours in the list of wallpapers (Firefox Orange & Blue, maybe). I've removed the blur and just put the black overlay over the whole image when choosing a bright photo, so that would dim it slightly to make the tiles pop, as well as the icons readable. I had just blurred the image because that's how it was in the files I was working from, but I think it's better to be without the blur all together than add the finickiness of a slider for controlling the blur. Along the lines of finickiness, I've left the idea of the colour picker out. It's not in the original user stories here, and I feel it creates a paradox of choice situation, where we're giving the user too many options. Either way, if/when there is interest, maybe something like the following could work: ", Also added is the permissions interaction, and what happens to tiles when scrolling under the header.', Comment on ', Lightweight Themes (v2) I think for the first round of lightweight themes, we should stick to default images that we know will render well. I have a few concerns about all themes in general, specifically; putting an image behind the status bar and using full-sized images on the tabs tray. On Android we limit the theme to the URLbar, with a dark grey overlay for the tab counter and menu icon, I imagine for similar reasons. I think the full-sized images can propose a couple of problems, 1) hindering navigation by causing distraction 2) confusing image with webview content. We'd likely have to use a 50% grey overlay for every photo chosen, and I have concerns about performance. Karen, can we update the User Story to cover default images for now and work on user photos next? Not having a color picker is fine, but could be part of the user story if we limit the range of color. Think of the themes I did for Kinderfox. Additionally, Apple seems to frown upon putting anything in the status bar, and want it to remain light or dark: ", In short, we should stick to how we render lightweight themes on Android to prevent these issues. This is a great start, but I think we should scale back a bit.', I like the idea of starting somewhere, and we can iterate on that. I think by having a repository of themes we know will render well is a wonderful start, including handling the 'status bar' area. BTW, it really is striking in the tabs tray area! That's totally where you get the full effect! Let's take the 'picture gallery' user story as it's own bug / card that we can hack on independently. I think giving users that ultimate preference / choice is preferable from a 'hey, this is cool!' talking point, but not a requirement for a first landing of the feature. Maria - could you please update the Aha card and spin out another one that can be funnelled?", I don't think this is very difficult to do, and I think it really adds a lot of value to the feature (we open up themes to *every iPhone wallpaper ever created* vs. the 4-5 we'd ship with and hope users like)... It sounds like we're just opting to defer solving the problem instead of just getting it right the first time (vs this actually being a simpler to implement/smaller scoped solution)... just my 2 cents!", We agreed to allow users access to their photos for their themes.', Created ', Lightweight Themes (Updated Strings) Mockup with updated strings attached. New Strings 1. Theme 2. Themes 3. Photos 4. Preview 5. Cancel 6. Set 7. Allow Firefox to use my Photos 8. Choose* Accessibility Strings 1. Choose Theme 2. Default Themes 3. My Photos 4. Preview Theme 5. Cancel 6. Set Theme 7. Allow Firefox to use my Photos 8. Back to Themes* * Unless the system provides a default string', 'Cancel' is already a string in the app 'Choose' has no system default", Created ', Strings Pull Request Pre-landing the strings for the feature ahead of string freeze.', Comment on ', Strings Pull Request Looks great, thanks Emily :)' 
id=1092560	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1312005	 'Created ', screenshot2.jpg', Created ', screenshot3.jpg', Did you have both pages open in separate tabs when you bookmarked the second item? If so, spidey sense tells me that this might be related to ', . If not, is the wrong title always consistent, or does it change?', The wrong title so far has been consistently wrong. Don't recollect if I had both pages open in separate tabs when I bookmarked the second item.", Oh, if you meant whether the title is consistently the same incorrect title (in my case: Fantasy In Indigo Decorative Tray, Small). The yes, it's always been this title." 
id=1188632	 
id=1258042	 
id=1138755	 "This is strictly polish. It's a great mentor bug!", What needs to happen: * When we connect to a Firefox Account, store a (hash of) the account email address in the profile. * When we see a can_relink_account message from the Firefox Accounts content server, check if the email address is changing. If it is, ask the user if they want to continue (using an Alert controller, I guess). Signal back to the content server as appropriate. * Test and profit!', Hi Nick, I would like to try to fix this bug, is this ok with you if ask you any questions that might come up ? I have some experience with iOS, but completely to new to Firefox codebase. Thanks, Kostas.', Kostas -- sorry that I didn't reply to this NI until now :( If yo re still interested, please always feel free to ask questions on the ticket. We try to be (much!) more responsive than I have been!" 
id=1225749	 'I believe this is intentional due to ', Yes, see ', .' 
id=1299322	 "Hey Gerald, Thanks for working on a patch for this. I can definitely see this being a useful option. Have you seen the latest work on master with the new minified URL bar? I landed it last week and it helps a bit with the URL bar disappearing act by transitioning into a smaller bar so it's not completely lost to the user. I still think having an option would be a needed feature though. Let me know if you want any help with setting up a pull request or reviews.", Created ', ', Pull request (In reply to Stephan Leroux :sleroux from ', ) ', Thank you for the encouragement Stephan. The minified URL bar is a nice touch (I saw it when I tested my patch), but for me it still doesn't address my concerns (mostly: distraction due to movement, and not knowing exactly how to get toolbars back), so I went ahead with my change. Here's my pull request, hope it's not too terrible -- I don't know Swift nor git! So please let me know if there's anything wrong with it.", Comment on ', ', Pull request Thanks for the patch. Looks like a good start! Just a couple of minor things. I left my comments on Github in the pull request. I can see the option 'Keep Toolbars' being a bit ambiguous at the level of 'General' settings. I wonder if we should create a new page of settings for 'Browser' settings as it's starting to get cramped or maybe rename it? Robin any thoughts?", Comment on ', ', Pull request Thank you for the review/feedback so far. Sorry for submitting an unfinished patch, I don't know where the working code has gone. :-( I'll resubmit a full patch next time I can redo the work..." 
id=1102516	 
id=1283339	 "Hi, Here is the What's New text thats ready for localization: -Add any search provider to Firefox -New menu in the toolbar for quick access to popular features -Ability to \u201cClose All Tabs\u201d and to recover them -Set a custom homepage and get access to your favorite web page faster -Synced tabs can now be found in the History icon", "-Synced tabs can now be found in the History icon" I would re-word that and remove icon.', (In reply to Aaron Train :aaronmt from ', ) ', I exposed the strings literally minutes ago :(', I have a PR ready just in case. Mike, should I proceed?', FWIW, several locales have already translated all the strings :/', (In reply to Th\xe9o Chevalier :tchevalier from ', ) ', And, given that next Monday is national holiday in US, I don't expect to see a reply until Tuesday evening EU time. I would carefully evaluate before changing this string at this point.", Hi, We just got a notification from legal about modifying or external language around "search" due to sensitivities around the Yahoo "sale" and our relationships with them. So we have to make a slight modification to our Whats new text in the app store. We\'d also like to add one new feature that was just added - performance improvements. Can we get the first two lines here updated and fast tracked? Sorry about the rush. The launch is next Wednesday. Ive included the original text and the new text for your reference. Original: -Add any search provider to Firefox -New menu in the toolbar for quick access to popular features -Ability to \u201cClose All Tabs\u201d and to recover them -Set a custom homepage and get access to your favorite web page faster -Synced tabs can now be found in the History icon New: -Under the hood optimizations. Users can now get to Web pages faster while seeing battery life savings. Of course, all devices and humans are different so results may vary. -Add any website specific search provider to Firefox -New menu in the toolbar for quick access to popular features -Ability to \u201cClose All Tabs\u201d and to recover them -Set a custom homepage and get access to your favorite web page faster -Synced tabs can now be found in the History icon', Thanks Mike, I exposed the new strings to localizers' 
id=1157306	 
id=1140449	 
id=1282178	 
id=1238831	 
id=1316562	 "Hi Barbara, Sure, here's the link you can use in the UI: ", I'll get the content up early next week. Need-infoing myself as a reminder.", I have a draft here: ', Please leave any feedback in the doc.' 
id=1184554	 'Lets disable it when in Firefox. Like we do with the Safari Reading List. I think we can simply exclude it by including its identifier in the exception list?', Well, this is strange. // Hide \'Add to Reading List\' which currently uses Safari. // Also hide our own View Later\u2026 after all, you\'re in the browser! activityViewController.excludedActivityTypes = UIActivityTypeAddToReadingList, "org.mozilla.ios.Fennec.ViewLater", browserToolbarDidPressShare(_:button:): Selected activity type: org.mozilla.ios.Fennec.ViewLater', --- As of iOS 8.1 UIActivityViewController ignores third-party values in excludedActivityTypes. The system options like UIActivityTypePostToFacebook and UIActivityTypePostToTwitter are okay, but anything that doesn't start with com.apple.UIKit.activity is ignored. I opened Radar #19430419 for this issue, and if you would also like this functionality please open a duplicate of it. --- ", Trying with 8.3, see if it's any better.", Not tracking; blocked on upstream. I'm going to land the trivial fix without review, but this isn't resolved.", This should do it. ', Unassigning and marking as tracking a future release to see if the upstream bug has been fixed. I can't view the duped rdar.", Robin, Darrin: if this is still applicable, we won't be able to remove our own extensions from the list.", I thought there may be a workaround for this, by essentially reverting half of the work for ', . By fixing ', , this means that the workaround no longer works, because of ', ref: ' 
id=1253045	 
id=1251635	 'WebKit: ', (fixed via ', )' 
id=1144767	 'As a workaround the forward button is accessible to get back to the page from the bottom home-screen toolbar.', Yeah, and the about:home page, like on Android, is not a webpage. Also it's navigation for swipes should probably be used to move between tabs/panels.", Yes, need to not conflict with content navigation.', I remember talking about this at one point. UX thought that we\'d not be adding more panels to about:home, which means we don\'t really need "swipe to move between panels". Is that a UX pattern on iOS anyway? We just need to decide which gesture should be more dominant, and go with it. The only caveat I would suggest is to not allow *both* types of gestures: swipe-between-panels if we have no back/forward, but otherwise use back/forward. That would really be confusing.', Last I recall we were reserving edge-swipes for between panels and Reader View articles only. You should not be able to edge-swipe back to the home panel. That said, currently this is the only edge-swipe that works. Edge-swipe = between home panels and Reader View articles (if more than 1) Navigation bar = disabled on panels' 
id=1205359	 'Hi there, Do you have steps to reproduce the issue or can you better describe each step (e.g, how you attempting to close a tab)', 2 Tabs opened - Click on Tab selection icon - Swipe a tab to close (didn't work first time) - Select a tab to browse - Click again on Tab selection icon - Try to swipe, works - Open N tabs and try to swipe to close, now works If I close Firefox and try to close in the first attempt it doesn't work, I need to select a tab and do the same process to work.", What device are you using?', I'm using iPod 5th generation to test", Hm, I can't reproduce. I opened two tabs (e.g, bbc.co.uk, yahoo.com). I then opened the tab selection screen and swiped both tabs off the screen fine (swiped left to right, note we don't support vertical swipe off). This works fine for me.", I tried only horizontal swipe. Well, let's see if someone else have same problem" 
id=1272765	 'Created ', Screenshot(updated) Personal Hotspot connection banner was not visible in the previous attachment.', Also visible with an in-call status bar, tested in simulator. Thanks for the report. Wonder what we can do?', Created ', in-call-status-bar-screenshot', Steph mentioned wanting to look into this.', Doesn't seem to be related to the notification status bar work I've been doing since this was found on 4.0. We don't account for the extended status bar height when calculating the offset we need to show the search engine bar while the keyboard is up. I'll file a patch with it. However, this exposes a larger issue across our app. We have a lot of view controllers that implement the KeyboardHelper/Delegate combination to determine offsets from the keyboard appearing. We use a lot of table views in the app when showing the keyboard and by using UITableViewController instead of UIViewController subclasses we actually get this calculation for free. The table view will automatically shrink/expand to compensate for the keyboard height which would eliminate the need to match animations and move things around. I would expand on this bug to move towards using UITableViewController but since this implements SiteTableViewController that becomes a much larger task. In the future, we should try to use UITableViewController when we can to get this free functionality and in cases that we can't, try to mimic the behavior of shrinking/expanding the content view instead of shifting elements around." 
id=1146389	 
id=1166084	 'The places where WKWebView gives us a WKNavigation are not the places we get the WKNavigationAction. That makes mapping a little challenging. We can do it wherever UI code triggers navigation, at least. The navigation types that they have -- reload, back/forward, form submit -- are almost entirely disjoint from ours -- bookmark, framed link, redirect. To do this right will be fairly invasive, I suspect.', I forked the immediately achievable parts of this into ', .' 
id=1258024	 
id=1170906	 "I can't actually reproduce using the STR in that bug.", I had a 100% reproducable case last night. But now I can't STR it either. Will give this another try." 
id=1298516	 
id=1143180	 'I would like to understand if this really is a concern. What is the actual risk here. If we think this warrants a redesign of reader mode then I would like to investigate if we can serve the readerized content via the embedded GCDWebServer. Because that means we can server the page with an Content-Security-Policy header included, which will very effectively block all (inline) script access and other kinds of content access that we may no allow from reader mode.', Doing a bit of research, I found the Content-Security-Policy HTTP header 1 that could be quite useful here. As of ', , we're changing about:reader content to be served via localhost. If we can attach the proper header to the data response, I think that should eliminate any XSS security threats. 1 ", (In reply to Stefan Arentz :st3fan from ', ) ', LOL. I need to read comments more.', Nominating this for v1.1. Keeping ', for v1, which should give us a good security base.', Although, as mentioned above, this probably isn't an issue anyway: the Readability result is no longer revelaed to the page with the PR for " 
id=1216720	 'This is a dupe, I think\u2026', This looks related but only covers the bottom border doing the weird animation: ', I have seen this myself; it's consistent. I haven't a clue what causes it. How we repopulate the TableViewController, I guess." 
id=1221563	 
id=1157052	 'Created ', iOS Simulator with Safari showing a custom popup for grooveshark I believe I saw this the other day on Firefox for iOS but there isn't a way to clear all storage to confirm this since it seems like they try to only show this once.", I guess a similar problem also happens with iPads: ', More library links: * ', * ', Cute. Thanks for filing.' 
id=1245131	 
id=1255579	 'I looked at the testTabManagerStoresChangesInDB. This is what happens: * We create some tabs in that test and then call TabManager.storeChanges() * storeChanges calls preserveInternal() which tries to create SavedTab instances * SavedTab.init?() returns nil because those tabs have no history So no tabs are saved.', Created ', ', Pull request These are not all the tests mentioned in this bug, but a whole bunch more. This just seemed a sensible bug to add them under rather than creating a whole new one.', v4.x 879ace7' 
id=1236391	 "I don't see that setting on my iPhone, interestingly. CCing Maria (product) and Robin (UX) to see what they think.", Oh, it's an iPad feature. I think we might be addressing this when we get around to a full iPad experience; Robin, do you have the bug # for that to hand?", There isn't a bug yet for Bookmarks on iPad, though there is a card: ", I'll definitely take a look at the possibility of including a toolbar for bookmarks navigation on iPad, I can see the value with a large number of bookmarks \u2014 especially folders.", Yeah, I find that on iPad, having a toolbar for bookmarks is a big help.', We'll deal with this as part of iPad designs. Not tracking." 
id=1201263	 'Created ', ', ', Hey guys, As part of the getting a start on addon-able home panels, I implemented this feature that let's move around the ordering of home panels. Let me know what you think! Figured I would get this pushed up and in a good state for now.", Comment on ', ', ', So far, it looks good, but I'm not sure about the value proposition here (that I mentioned this morning) until we either 1) enable turning on/off the ui for individual panels 2) allow for more than 5 panels. if we do, I had some older mocks for how the icons would balance. basically they would open up more so that the 5th icon would appear half on the viewport to give the user a hint that there's something there, and they would be able to swipe left for more. Let's also disable page scrolling for this screen, it's weird to have the page scroll when yo re trying to rearrange. I was unable to rearrange in iOS9, but it worked just fine in 8.4", Comment on ', ', ', f+ on dynamic panel loading. f- on customizing the panels at this stage. I think we need to be closer to a final UX story around disabling and choosing defaults. Customizing and rearranging are in distant third and fourth place, IMO.' 
id=1238315	 'We currently do not present the user with the option of closing private tabs when clearing private data. I was trying to recall to see what we do in Firefox for Android and I was puzzled to see that we close all Private tabs when the application is swiped away (wtf?). In any case, on both platforms, closing tabs on clear private data is not an option.', But we made a decision to close normal tabs on Clear Private Data. So why would we not do the same for Private tabs?', In my opinion, consistency across platforms is highly desirable, if possible. In addition, if "Clear Private Data" for all options ("Browsing History", "Cache", "Cookies", "Offline Website Data") is committed, then it is makes sense to extend that to mean all Private Data, including the data in session in a current window, to be cleared as well; since "Clear Private Data" was committed.', If I remember correctly, we actually MUST close all tabs on iOS because if we do not, then WebKit will just write back the data (cookies, cache, etc.) for those open tabs after we delete it. Private tabs do not persist that data, so we don't have to close them? Looping in Steph, who probably knows more details.", Yup but this is only relevant for normal, non-private tabs since ', Clearing normal tabs but not private tabs seems wrong to me. To magnify it, private tabs are not immediately visible to the user without switching to private mode so the user could have the false assumption that they are closed when in fact they are not. Two routes I see: 1. Stop closing normal tabs so the user understands that clearing private data != clearing tabs 2. Clear normal and private tabs I think option (2) makes the most sense. If we want to be conservative we can include an additional toggle that explicitly calls out the clearing of tabs. At least this way the user can decide for themselves since I can see losing tabs you might want to keep around after clearing private data to be annoying. As a side note, I'm a fan of platform consistency but if we can find a better option I say lets go for it.", Seeing this on the Support forums' 
id=1144756	 'kar: we have some improvements slated here. The new look is like this ', (It's not in v5.) Can you speak to this when you get it? Separate but related: the final tab is flush to the bottom of the list in this layout. We need to find a way to add a border below the bottom-most tab's container. My expectation is that we'll center each tab in it's background container rather than place them at the top of their container.", I think that would be *better*, although I think it's because we're taking the screenshot of the site that's making it feel awfully busy and hard to discern where one ends and the other begins. I think being able to swap the screenshot for the 'solid background + site logo' would help, but I also know not all sites support that. I'll definitely look out for it when I have a build with it landed (I could look to installing nightly if yo d like some earlier feedback, although I am curious as to the impressions of our larger audience as this is a comment made by a few folks in our group)", Minusing until we have a final implementation.', *** ', has been marked as a duplicate of this bug. ***' 
id=1272372	 "iPhone 6 (9.3.1) => Installed Firefox 3.0, opened 58 tabs (via Popup test) => Downloaded the application container, verified tabState.archive was available and that its contents contained entries of 58 tabs with the URLs from the popup test => Backgrounded the application by hitting the home-button => Opened the App Store, searched for Firefox and hit the upgrade button => Upgraded to Firefox 4.0, session restored all 58 tabs + 'What's New' tab No luck with this simple test. Can I induce a memory pressure warning on device (perhaps prior to upgrading or during upgrade?) to see if that does anything? Perhaps induce a memory pressure warning on startup post upgrade too?" 
id=1217862	 
id=1229387	 
id=1196238	 "Unstated requirements: * Users can delete desktop bookmarks. * Bookmarks are hierarchically rooted under the Desktop Bookmarks pseudo-folder. This should already work. * Users can navigate the bookmark hierarchy. This should already work. Unstated non-requirements: * Users can't edit or move bookmarks. Karen, if you want the Awesomebar to search bookmarks (right now it only searches history), now is the time to file that bug.", (In reply to Richard Newman :rnewman from ', ) ', ', Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", Landed, merging disabled, for 3.0: 3537ddf', Unassigning meta bug.' 
id=1247341	 
id=1223017	 "I think this might be fine -- I don't remember that simply opening the DB can cause a blocking WAL replay. We could set SQLITE_ENABLE_SQLLOG in our build and see what prints\u2026", In ordinary circumstances, this call takes a few hundred microseconds to complete. I'm going to see if there are circumstances in which that's not the case -- e.g., if I can trigger a WAL autocheckpoint on open.", What's the harm in moving this in the background thread in case? I see that this is all being caused from the lazy loading of the places DB in BrowserProfile. Could we maybe remove the lazy load property and replace it with a deferred call to load the DB?", Long story. We open the DB (in the sqlite sense) when initing the SwiftData object. Whether that happens on the main thread or not, if we still need to block to service a delegate method or finish an initializer, we're still screwed. That is: it's not the DB open that's the problem, it's _any access to data storage_ on the main thread. The problem isn't that we open the DB in the init inside .db.getter, it's that we init BrowserProfile on the main thread and doing so needs to touch history (in order to invalidate top sites, in this case). There isn't any difference between a blocking dispatch_once call that returns the BrowserDB and blocking on a Deferred guarded by dispatch_once that resolves to a BrowserDB. We could consider lazy-opening the DB, but that just punts the pain until a less controlled time. In this particular trace, we could run top sites invalidation on a background queue. But we didn't invalidate at all before the last 1.2 builds, so I assume this isn't the issue. On a broader note: some of our lazy vars exist because it's otherwise not possible to express the co-dependencies between members -- e.g., needing prefs to create an object. I don't remember if this is one of them.", N.B., we dereferencing self.profile.{history,\u2026} in a bunch of places. The best fix for decoupling opening, I think, is to not open the database connection when initializing BrowserDB.', \u2026 and then everything that holds on to a BrowserDB needs to be aware that it can't, for example, initialize synchronously.", I wrote up some of those thoughts in ', . I fixed the AppDelegate-blocking DB touch in ', . Beyond that, let's measure." 
id=1212426	 'Nick, can you mentor this, perhaps for Steph, James, or Emily?', (In reply to Richard Newman :rnewman from ', ) ', Yes, absolutely. Details on X-If-Unmodified-Since and 412 responses can be found at ', . The code change required is including ifUnmodifiedSince: 0 to the two relevant PUTs at ', and just below it. (Those two can be simultaneous, BTW.) In success cases, advance as before. The error case is when you see a 412. Handle that by adding a new terminal state (say ClientRaceDetected) to the SyncStateMachine, like ClientUpgradeRequired. (See ', and ', .) The terminal state should just fail; next sync, we'll try again. The hardest part of this will be testing, since MockSyncServer doesn't handle X-I-U-S for individual PUT requests. And since it will probably take a custom subclass to arrange for the desired 412 Conflict response.", 1.2?', Yes, if Nick can mentor it in the right timeframe.', Does this need to go in 1.3?', (In reply to Stefan Arentz :st3fan from ', ) ', No. Tracking+, whatever that is for iOS.', Nick, Richard, what do we need to do with this bug? It keeps popping up in triage.', (In reply to Stefan Arentz :st3fan from ', ) ', This is handling an edge of an edge race condition, and will make this client much more robust than other clients. Feel free to de-prioritize.' 
id=1250217	 
id=1271051	 
id=1216272	 
id=1228089	 'Created ', ', PR - some questions in the PR', Comment on ', ', PR - some questions in the PR Left some answers on the PR!', Left a couple of comments on the PR. I think it will make more sense to combine this patch with the snack bar view patch since this patch doesn't actually add any functionality - just debug logging.", Comment on ', ', PR - some questions in the PR Clearing r? until patch is revised.', Created ', ', Pull request', Comment on ', ', Pull request Hey. Yo ve deleted some files from another package as part of this patch, which I think must have been a mistake. Could you please update the patch to leave the file deletions out? Thanks", Comment on ', ', Pull request LGTM. Thanks :rawisa Sorry it took me so long to get around to it. It got lost in my review queue.' 
id=1173381	 
id=1319700	 
id=1252549	 
id=1244262	 
id=1255357	 
id=1135777	 
id=1198416	 
id=1278673	 
id=1130498	 'This was taken off of the list of V1 requirements. Not needed. Removed as a blocker.' 
id=1300449	 
id=1305774	 
id=1217848	 "Why do we need buildasaur for nightly builds? Can't we do that with a normal Xcode Bot that follows master - like we did for 1.0? (I have no strong opinion here, i'm just curious if buildasaur has an advantage for nightly)", No, I just thought that was what we were using now. I'll change the bug title to reflect" 
id=1277259	 'The released version is also affected.', Note that this behaviour is not consistent with Safari, which allows the text selection to be changed as expected (despite presumably using the same PDF reader).' 
id=1247115	 "And that's rdar://24571325 (", ).', Maybe this is fixed on iOS 9.3' 
id=1291456	 
id=1257574	 'Created ', ', PR: ', Created ', ', PR: ' 
id=1267265	 
id=1170696	 "We should also check that long-pressing to trigger the context menu doesn't conflict with other interactions; e.g., ", .' 
id=1270976	 
id=1240685	 
id=1261186	 
id=1252543	 
id=1206553	 
id=1231532	 
id=1255097	 'Created ', 1255097.png' 
id=1244106	 
id=1197833	 
id=1181777	 'Also ', Discussed about it in ', , not in scope for v1, but definitely a must have as the project gets more complex.' 
id=1263570	 'This is also reproducible in Chrome iOS (WKWebView). ' 
id=1164963	 '(In reply to Brian Nicholson (:bnicholson) from ', ) ', Unfortunately that is something that requires months, and manual work from me over 70 repositories. We might even fail to get higher resolution icons for some search engines. I think the solution here is simply to know that a lot of searchengines will have 32px icons, and adapt the layout. Side note: ', added high-res icons on iOS, they're still 32px in Fennec even for en-US.", (In reply to Francesco Lodolo :flod (UTC+2) from ', ) ', Definitely -- I wasn't proposing this as the fix to ", , but as an orthogonal change. We're updating en-US icons to look better, so I expect that we'd want other locales to look better, too. ", Yeah, but this is changing soon in ', .', In the meantime, maybe a good short-term solution for iOS would be to update these plugins ourselves, which we can do since they're included directly in the firefox-ios repo.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', I don't think you can. You might be able to fix some of them, but you will still have searchplugins with smaller icons because they're not shipping in en-US (side note: don't touch Yahoo Japan), so IMO you need a layout fix if a searchplugin as a smaller icon." 
id=1242100	 
id=1228912	 'See also ', And this is fixed in the maintained version: - /// :param: keyName The key to check for. - /// :returns: True if a value exists for the key. False otherwise. + /// - parameter keyName: The key to check for. + /// - returns: True if a value exists for the key. False otherwise. public class func hasValueForKey(keyName: String) -> Bool { - var keychainData: NSData? = self.dataForKey(keyName) - if let data = keychainData { + let keychainData: NSData? = self.dataForKey(keyName) + if keychainData != nil { so this will be part-fixed by ', . Not a complete fix, because we need to address migration.', PRAGMA rekey changes the encryption key for a SQLCipher database (', ). From reading the SQLite docs, it looks like if you provide a nil for the existing key then that will encrypt an unencrypted DB (', ) Hold that. SQLCipher have provided a migration guide - ', Created ', Output from Testing of issue :rnewman - I tried to replicate the issue on my 6S and wasn't able to reproduce the nil key issue at all. I was able to reproduce the corrupt DB though.", Able to repro nil key on simulator though (also 6S)', The simulator behaves in a different way. Specifically, if the SecItem contains an access group attribute (which we use) the Add operation fails on the Simulator with errSecNoAccessForItem. If you look at Apple's GenericKeyChain sample code, they special case running on the simulator and remove the kSecAttrAccessGroup attribute for every operation. Otherwise they fail. SwiftKeyChainWrapper does no such check. Is that happening?", Will be solved by ', .', Richard, should this get closed now? Was it ever a real security issue or just a sec-audit sort of thing?', Yeah, not a sec bug, but it's still a valid bug, so let's leave it open." 
id=1254158	 'Created ', screenshot 2', Created ', screenshot 3 Not even a zoomed in 32x32 *.ico looks as bad as screenshot 1 ', Meta bug plz!', Filed ', .' 
id=1209052	 'Catalin, are you able to reproduce this on your iPad?', *** ', has been marked as a duplicate of this bug. ***', I have more notes on the bug I duped to this one. Copying here for easier reference: While typing a URL, if I pause for a moment while a set of suggestions is displayed, the suggestion gets inserted into the URL bar, resulting in this screenshot: ', Even though the inserted text is displayed as highlighted, suggesting that continuing to type will replace that and let you continue typing the URL yo re trying to enter, instead that text is kept as part of the URL, resulting in you getting something you don't expect if yo re not paying attention. Note: The fact that the keyboard is missing in this screenshot is apparently a capture glitch due to the 3rd party onscreen keyboard I'm using.", (In reply to Aaron Train :aaronmt from ', ) ', I can't reproduce on current TestFlight build (1103) using Swiftkey and Fleksy keyboards. In my case, the behaviour is: If I don't have a history of what I'm typing, no suggestions are inserted into the URL If I have a history, then the autocomplete suggestion is inserted into the URL bar, but I don't see any editing issues here. Tested on: iPad Air (iOS 9) iPhone 6 Plus (iOS 9) @sheppy: What keyboard did you use?", I'm using Swiftkey, for what it's worth.", I just downloaded it from the store (1.1 1113) and am having trouble when using SwiftKey. If I try to delete the URL a letter at a time by holding in the delete key, the suggestion keeps getting added back in. IOS 9.1; SwiftKey 1.4.2', (In reply to Dan Mellem from ', ) ', I see the same behaviour on Safari when using SwiftKey', I haven't experienced this with Safari. The only similar thing I've seen with Safari is autocomplete expanding the URL but deleting essentially extends the highlight. With SwiftKey, there's no highlight, so the deleting ends up taking you to the end of the suggestion again.", This happens with every third-party keyboard I've tried, and still happens even on the latest 1.4 TestFlight builds. It makes the URL bar a pain to use increasingly often as the number of bookmarks and/or history entries go up." 
id=1232810	 'Created ', English, German, Dutch, Korean string examples. (Pardon the weak translation.) With :rnewman's string, which I prefer.", Looks great! ', N.B., when we're implementing this, we should make sure that roots -- toolbar, menu, unsorted, mobile -- cannot be deleted, returning no edit actions when asked by the table view.", Strings landed.', Strings finally really landed: a1cf994' 
id=1246689	 'To provide a little colour on this: we absolutely should allow the user to manage her Firefox Account. We need to navigate to /settings?email=... or ?uid=... (like ', ). Then we need to handle a bunch of new messages: changed password, deleted account. We want to handle messages for, or work with the FxA server team to hide the UI, for display name and display avatar. (Handling avatars might require OAuth support to talk to the profile server, but we may be able to avoid that by only taking avatars from the fxa-content-server messages.) We might move the code to use a WebChannel (see ', for the Gecko implementation) from the fxa-content-server, to modernize this.' 
id=1136862	 "How do we triage this? This shouldn't be v1." 
id=1267213	 'Recently Bookmarked will appear if a bookmark has been made on any device in the past 30 days (connect to Recently Bookmarked on Desktop, sync with Mobile/ on another mobile device). \r \r If user is not connected to a firefox account, the Recently Bookmarked folder should still appear but be disabled\r \r Recently bookmarked folder should be created in the bookmarks code & returned as part of the tree, rather than in the UI layer. ', Hi Emily! This looks like it is up for grabs. Would it be okay if I give this a shot?', I believe we can only support populating the 'Recently Bookmarked' folder with bookmarks made on the local device because we don't actually sync when a bookmark was created from other devices. This might be confusing from a user's point of view since not 'all' of their recent bookmarks will be in the folder so I'm not sure if there is value in doing this yet. If yo re interested in picking up bug, would ", interest you?', Sure, I'd love to! Thank you. Quick check about this one though, does it depend on the following? ", I believe ', is the one blocking this from being implemented.', I'd call ", a soft blocker. That is: we'd get _some_ value from this feature without it, and heuristics reduce the impact -- see ", . And for non-Sync users, it doesn't matter at all :D" 
id=1147453	 "On Android, that icon (Book with a +) should switch to a Trash Can. Then, it should be followed by a toast. Does it not do that for you Karen? Depending on how yo re adding this to the List (from the menu or from Reader View controls), I think this might already be a known bug.", How long has the 'pop up' at the bottom been in Android (after I long-tap the Reader View icon in the URL bar)? I had no idea that was there until I started looking for it - is it possible to move that notification below the URL bar since that's where my eyes are focused? I totally missed it - and maybe it's also become the article I was adding had some dark images at the bottom of the page so I just don't see it. Having that kind of notification when I long tap the icon in the URL for iOS would also be vital - I presume that's coming (and that would resolve this bug). Changing the summary line to reflect that this is down to the long tap action.", We don't support long press here on iOS yet, but this bug will be to track the indicator. We'll file a separate bug to support long press. Assigning to UX to get some icons/design.", Created ', 1147453.mov With the latest updates to Reader View, it is much more obvious that an action has occurred. Now, when you tap the "Add to Reading List" icon, it will turn into a trash can, and the inactive indication dot with highlight. See attached movie for example.' 
id=1297754	 
id=1212018	 '2.0+? What is required here to get this done?', Per Stefan: When we moved to Xcode 7, we lost our ability to do nightly builds and automated testing. This bug/card is about getting that going again.', Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages." 
id=1128609	 
id=1191476	 
id=1215854	 
id=1220325	 
id=1110214	 
id=1206477	 
id=1244065	 'Works for me, same device - residential WiFI. Sounds like This is the sign-in endpoint URL you are accessing: (1.4)', and 2.0b4: ', See if you can access that in a browser on your office network.', Hi Aaron, Yes this seems to be a connectivity issue, when the wifi signal is not strong the connection error is triggered. This message might be triggered to soon. In my opinion, an error should be triggered after a minimum of three failed connection attempts. Please note that the error is triggered if the wifi is low, not disconnected.', Would be nice to have some more info or a Try Again button on the error page.' 
id=1166806	 'There are two places this could happen. 1. We get a response from the server that parses as JSON, but some or all of the records in the response fail Record<T>.fromEnvelope \u2014 e.g., they don\'t decrypt, or they decrypt to an invalid payload. This happens in the StorageClient, and we immediately drop those malformed records. 2. HistoryPayload.asPlace yields a Place that doesn\'t apply. If the URI is invalid we\'ll crash (but I\'m about to turn this into a plain String op). It\'s not possible that we\'ll cause a URL uniqueness conflict, because we switch the local GUID if one exists, prior to applying. No NOT NULL constraints should fail, because we\'re applying from a parsed record with non-null fields. So a failure here would most likely be a DB error. We can\'t many of get the kinds of failures that desktop sees, such as "invalid visit type" from PlacesUtils, because we either bake that validation into our parsing (e.g., we silently drop invalid visits in HistoryPayload), or we don\'t do the validation at all. tl;dr: failure to apply records is much less likely to happen here than on desktop (or even on Android), so I don\'t think this is as urgent as it might appear.', And yet: 2015-05-21 19:15:40.817 Error HistorySynchronizer.swift:53 allSucceed: Record application failed: Optional(Abort due to constraint violation UNIQUE constraint failed: history.url) Digging into how that happened now!', Can't repro. My guess is ", .', My other guess is that we were triggering the application of records in parallel!', This is part-done, but we should make sure it's rock solid by 2.0 (or sooner if we get lots of user complaints!).", Do we want to schedule this as part of 2.0?' 
id=1169281	 'also, phishing' 
id=1238098	 "Let's investigate." 
id=1226391	 'Are we able to do this? I forgot who mentioned it but there was some talk about being able to have this enabled by default and allowing the user to opt-out when prompted for the crash.', As I understand it, defaulting on means the user does not seem the prompt UI. There was talk of defaulting it to on for the test group as that group is invite/selected individuals only. That's still fine with the one requirement that you notify them of that change to default. St3fan mentioned that there is an email list for contacting all people on testflight and that would do nicely. For the crash reporter on the general population, mirroring the desktop behavior is generally wise, as the rationale for crash reporter behavior is the same across platforms eg, that a user cannot make a meaningful decision about it until the first crash has happened and the user is in that context.", We can't just do that without clearing up privacy, and we are not even sure that we want to do this ebcause it loses valuable information we prompt for. I'm in discussions about how far we can and want to go, please hold off on any actions on this so far.", Oh, sorry, this is about iOS, I mistook it to be more general. I think we probably still need to (for privacy reasons) prompt at least before sending the first crash report as we do for Firefox OS, can that be done? Otherwise, yes, I think we should be sending crash reports whenever possible.', The user will be prompted when returning into the app from a crash. The options that can be selected are: Send Always (Opt-in and don't show the prompt again - just send) Send (Send this crash report but prompt the user if we crash again) Don't Send (Ignore this crash report but still prompt the user if we crash again) Theres a bug in version 1.2 (current live version) where the crash prompt won't display after a crash which is why we're not seeing any crash reports being sent to crash-stats since by default crash reporting is off until the user answers the prompt. This should be resolved in 1.3 that's in review right now, so I don't think any additional action is needed for this bug unless we want to default the app to always send crash reports in cases where the prompt may not have been shown due to a bug.", Ideally, the UI should bias for always sending, like we do on Firefox OS, see e.g. the prompt here: ', (this is how it comes up by default, when unchecking the "always send" option, the "don\'t send button gets enabled).', Great suggestion - I like the idea of biasing towards always send. This looks like a version 2 of the current default system prompt we're using at the moment. I'll file another bug to see what we can do." 
id=1329637	 
id=1257060	 '(Quoting Anne (:annevk) from ', #c0) ', And the relevant WebKit bug is ', if needed.', Oh yay, I can\'t even remove that "just in case I misread that bug report" sec flag. Winning at Bugzilla.', (In reply to Richard Newman :rnewman from ', ) ', I'm assuming this means you want this opened up; Moving to moco-confidential in case I'm wrong - you should be able to clear that. :-)" 
id=1170367	 
id=1260765	 
id=1314387	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1270937	 
id=1265096	 'Hi, Here is the text for "what\'s new" -Search your bookmarks, history and tabs in your browser\'s URL bar. The awesome bar is now even more awesome! -Manage certificate errors when visiting a secure website (https) by viewing the certificate, temporarily ignoring the error or adding a permanent exception -Quickly open a new tab, a new private tab, a copied URL or most recent bookmarks in Firefox through iOS\u2019s today widget -Print web pages through Airprint printers', Hi, Please use this updated version: - Search your bookmarks and history in your browser's URL bar. The awesome bar is now even more awesome! - Manage certificate errors when visiting a secure website (https) by viewing the certificate and temporarily ignoring the error - Quickly open a new tab, a new private tab or a copied URL in Firefox through iOS\u2019s today widget - Print web pages through Airprint printers", Hi, Thanks, I exposed the latest revision to localizers. You can get the list of locales ready to push here: ', And get translations from the following views, by replacing <CODE> with a locale code from the link above: HTML view, for copy-pasting (look for \u201cWhat\u2019s new\u201d section): ', <CODE>/apple/release/html/ JSON API, in case you have a script to push the translations with Fastlane (look for \u201cwhatsnew\u201d object): ', <CODE>/ Please let me know if any of this is unclear', Theo, I sincerely apologize for the back and forth, is there any chance you can upadte the second bullet point to: -Manage certificate errors when visiting a secure website (https) by temporarily ignoring the error Last change.. I promise!', Updated the string', Coverage is in good shape, we have 14 locales ready. We\u2019re only missing da, es-MX, nb-NO and th.' 
id=1210146	 'N.B., with Sync enabled this becomes a little thorny: with the current history record format we are not able to sync deletions for _some_ visits for a site. If you visit google.com on Monday, then on Friday visit it again and choose "clear recent", we have two choices: * Clear the visits locally. Next time the google.com record is redownloaded by this device (e.g., after a node reassignment, after another client merges history, \u2026), the visits will reappear. * Clear the entire history for that URL. It\'ll look like you never visited google.com. Depending on the site, this could be harmful: perhaps the site will be conspicuous by its absence, or perhaps you killed useful history by accident (you searched on google.com, found a page, clicked a link and ended up on a porn site, and now you just removed google.com from your top sites). As with ', and ', , we should probably be careful to tell the user of the consequences of their actions.' 
id=1139057	 'After discussion with rnewman, tecgirl, and darrin, we are unlikely to support this for v1.' 
id=1189170	 "A note, just in case yo re tempted: don't vacuum within a transaction. Y'can't.", I did a little hacking on this. Things that will be potential trip-ups: Transactions should be async, giving us all of our nice Deferred chaining. They can encapsulate the creation, rollback, and committing of transactions. But all of these DB operations need to occur on a SQLiteDBConnection. Those are vended by SwiftData, and because we currently run all operations inside a withConnection block, we don't have to worry about references to those connections running away, or work being queued up on a connection that is subsequently closed. Additionally, we need to run the work itself on the connection's queue (through which we serialize operations). The queue is private, and again, work might reach the head of the queue after the connection is closed. Async work needs to check if the connection has been closed each time it runs! It's worth considering that SQLite transactions are scoped to the connection, not to the caller. So if work is interleaved on the connection's queue -- which seems bound to happen, given that callers get free access to call withConnection at any point, and seems to part of the value of doing all this! -- arbitrary work can happen within an open transaction. Not only does that confuse matters for the code that owns the transaction, but it also could lead to the work done by the intruder being rolled back unexpectedly. Worst-case we crash by attempting to vacuum while a transaction is open. A proper treatment of this hides much more of the guts of SwiftData. We could make transactions truly exclusive (so one would own the connection for the entire duration of a transaction). We could open another connection, issuing them from a pool and getting the scoping we need that way. Whichever approach we take, it seems likely that we can't safely coexist with SwiftData as it currently is used. That means a mini-rewrite." 
id=1268872	 
id=1162579	 
id=1204531	 'Created ', ', ', Attaching WIP patch for some of the attempts I tried if someone wants to pick this up.' 
id=1315115	 
id=1178582	 
id=1157374	 
id=1207681	 'The above was tested on an iPhone 6 (iOS 9) off master and test-flight builds.' 
id=1245632	 
id=1328536	 "Medium's favicon can be seen here: ", Freecodecamp's favicon can be seen here: ", In the example screenshot, freecodecamp's favicon is shown above medium's URL in the top site cell." 
id=1160759	 'I wonder if e.g. VoiceOver would visit elements in the right direction (that is RTL direction) in an RTL app, instead of the default LTR direction.', Looks like iOS 9 has really gone to great lengths to make RTL language users first class iOS citizens - see e.g. ', However until Firefox for iOS is translated into Arabic or Hebrew (which it strangely is not, at least I could not find it in the l10n repo), I would expect iOS would not "flip" the UI, leaving it in the current well tested LTR look. So it seems like no issue until Firefox for iOS is localized into Arabic or Hebrew (or other RTL languages).', Hello, my native language is arabic and I'm working with Mozilla Tunisia team on the arabic translation. I'll be happy to work on RTL support too.", Created ', Review of Firefox for iOS RTL' 
id=1236887	 
id=1249746	 'Is there a neat test profile I can use for profiling this?', I don't have one, but Kevin or Aaron might have a test FxA you can sign in to. Failing that, synthesize 400 with random domains and usernames\u2026" 
id=1190992	 "Probably a regression since I mentioned 'save password' as a step in ", There are 2 problems here: 1. The login form is injected into the page after the page has loaded and therefore is not detected 2. The form submission is handled in JavaScript (i.e. preventDefault is called on the form.submit event and the login is handled in JS) which means that the code that deals with reading and storing the login details is never activated. Solution to problem 1. is to use a MutationObserver to detect when a login form is injected after onLoad has been called No idea what the solution to problem 2. is', Wonder if ', is the same issue', Can I work on this one?', Certainly', We can certainly split this into two bugs, one for each issue in ', . Fixing issue 1 is a good start.' 
id=1130523	 'Requirements: Specify whether cookies are: Enabled Enabled, excluding 3rd party Disabled Ensure there is a user-configurable setting Default is parity with Firefox for Android (enabled) User Stories: As a user, I want more control on how the browser handles cookies by default to give me more control over my browsing experience. Acceptance Criteria: User-configurable option is available in an intuitive place Three options are available: enabled, enabled excluding 3rd party, and disabled Cookies are managed according to the setting choosen Additional Info: Parity with choices given in Firefox for Android', We do not have this kind of control over cookies. This is not something we can do because we do not control the networking.' 
id=1288158	 
id=1151490	 "Oddly the one case this seems fine is switching between applications in the running application list. Accessing Firefox from icon on the iPad Home Screen always displays a splash even if it's running.", Still see this on recent builds', I'm not seeing this on any devices except for the iPad Air which I see infrequently. I vote that we take this off tracking+ unless it's still causing frequent issues.", Will reopen if this becomes a problem.', This is still reproducible on my iPad Air. We can leave this open.', This doesn't seem actionable right now. And it won't block ship.", Seeing this also on a brand new (8.4) iPad Air 2. The time it takes to restore the application from the homescreen (', ) and see the splash (this bug) is quite slow in comparison to other apps.' 
id=1166388	 
id=1168849	 'Created ', ', Bookmark badge This has the stuff to query the db for bookmarks, so I thought yo d be a good reviewer. The two line view stuff isn't set up extremely well for this, but I don't really want to tackle that here (i.e. making us use one view type for top sites and history/bookmark panels).", Will this patch add bookmark badges to the search results rows as well (as shown in the mockup?)', Comment on ', ', Bookmark badge Comments on the bug. Main open question is RTL. Also interested in how VoiceOver interacts with this. Please look into those (and my comments on the PR!) before landing.', This will have some pref impact, so I think we voted in Triage to push it to 1.1.', Just pinging you so that this doesn't get lost rnewman (the PR is probably enough to prevent that though). I'll go mark the PR as a 1.1 feature as well.", Created ', ', Pull request chosen mostly because you reviewed the original :wesj patch', Comment on ', ', Pull request I don't have enough confidence in the perf impact to r+ this. See comments on the PR. I also would like to see this split into cleanup (if you still want to do it) and material changes. You might also choose to split this bug into the badging stuff and the data level stuff. The former can be ui-reviewed and landed independently.", Also a note to make sure the star cell doesn't impact a11y.", I'll be adding a grey star as a simple accessory view, and decorating search results, in ", .' 
id=1234089	 'This seems to be fixed already. Is it?' 
id=1258047	 
id=1268278	 
id=1138960	 'Hints at ', "Important: To prevent having multiple copies of Swift libraries in your app, make sure that Embedded Content Contains Swift Code is set to NO in your embedded content."', I flipped EMBEDDED_CONTENT_CONTAINS_SWIFT to No everywhere. But the resulting IPA still contains the Swift libraries twice. Going to ask on the Apple Forums.', Oh I just noticed that this only happens in the Enterprise builds. There are no duplicate libraries in the CI server build. So lets find out what the actual Distribution build looks like.', St3fan is going to investigate.', Need to backup my iPhone to iTunes so that we can see what kind of .ipa TestFlight put on the store. Assuming the TestFlight IPA will be the same as an App Store release .ipa file.', Asked on StackOverflow .. ', Fennec Nightly.ipa, the one the CI server builds, does not have the libraries included twice. Maybe we are doing a mixed debug/release build for the Firefox and Aurora targets.', Wonder if this is still happening' 
id=1237756	 'Roland, can you already create a placeholder page that we can link to?', joni please add a stub page for adjust ios today', Hi, Stefan and Roland. Here's the in-product placeholder link for Adjust: ", The link above will redirect to this SUMO page: ', . Is this the right title? When should we have the content ready (including localization?)', Joni, can I just link to: ', And let the locale be chosen by the Language: HTTP header?', hi stefan I don't know the answer to this question. And Joni is on PTO and back on Tuesday the 19th But perhaps kadir, mike kelly or michael cooper can answer: Kadir, Mike Kelly or Michael Cooper: Can FFiOS Product link to ", And let the locale be chosen by the Language: HTTP header?', We'd prefer the placeholder version of the link, because we can guarantee that link will work in the future, whereas the article may be renamed or moved in the future. This way even old version of the product will always have a working link. If the in-product link that Joni made is a burden on your system, the direct link will work without the above guarantees. In either case, the locale will be chosen by the HTTP Accept-Language header. The locale is included in the placeholder version of the locale so that Sumo could have the option of redirecting differently based on locale. That feature isn't in place for the adjust redirect.", We are using the suggested link: ', This is a good start for an article ', Support article is here: ', Should we resolve?' 
id=1250526	 'Card and ideas, plz!', FWIW, Chrome and Safari do the same (autofill). We could provide a snackbar that asks permission, with options each time only once and utilize Passcode/TouchID if enabled.', Covered in ' 
id=1217149	 
id=1152579	 'Something is slowly taking shape in my head. KIF is great at ensuring basic accessibility - ensuring everything has an accessibility label. However KIF will never be able to do proper testing of accessibility until VoiceOver has some scripting API to "drive" it. This is because VoiceOver has a big role in interpretation of the various accessibility attributes. E.g. KIF can find an element with accessibility label that VoiceOver will never present (one that has isAccessibilityElement == false). Or when a custom action is set on a cell that has isAccessibilityElement, VoiceOver presents the custom action for every element of that cell it lands on. Etc. But that should not mean we should not try to take the current KIF tests to the next level from the point of view of testing accessibility. Some ideas: - we could test accessibilityPerformEscape; from some hints, it seems this travels up the responder chain (it does at least to the view controller of a view), maybe UIResponder.targetForAction(withSender:) could be used here to get the object implementing the accessibility escape (usually a view controller) - we could definitely test custom accessibility actions: let action = filter(tabCell.accessibilityCustomActions, { $0.name == "Close" }).first XCAssertNotNil(action) action!.target.performSelector(action!.selector, withObject:action!) // then verify that the tab is closed I will consider contributing this to KIF itself (but only after writing some a11y tests for Firefox :-) - I shall think how we could test that views that should be hidden for accessibility are actually hidden. This is one of the things where VoiceOver probably does some complex interpretation of UIView hierarchy and various accessibility and non-accessibility attributes, but we at least could check it to some extent, taking `hidden`, `accessibilityElementsHidden`, `accessibilityViewIsModal` etc. into account. I vaguely remember KIF checking `hidden` in its code, so maybe it already does some part of this.', Sounds great. Thanks for all of the investigative work! :D' 
id=1255880	 "That sounds sane. We should bear in mind that we persist to disk constantly, so when we persist to storage for sync, we don't even really need to read the current tab state as it is - we only need to read the persisted state on disk. That means we could do that after the webviews have been discarded if we felt that would be better. What would constitute a significant amount of state change to trigger a sync? I guess creation and deletion of tabs themselves to any great number should count, but probably many site changes within a single tab would be less of a driver?", (In reply to Emily Toop (:fluffyemily) from ', ) ', See ', for some long-winded thoughts from me on this topic :)' 
id=1160681	 '(In reply to Richard Newman :rnewman from ', ) ', Should we do this: 1. Just like what implemented now, create a sqlite view maybe called ViewHistoryIDsWithFitestFavicons (like ViewHistoryIDsWithWidestFavicons) in the init() of SQLiteHistory before any query issued. OR 2. Add a', We can either do the work on insertion, annotating and paying attention to fixed sizes, or we can move closer to the favicon layer that we have on Android. Honestly, I'd like to spend less time on favicons in general.", Created ', ', Pull request', (In reply to Richard Newman :rnewman from ', ) ', Okay, Thank you. I will some bugs in other components. I have just make a PR that fixed the query process of history sites.', Comment on ', ', Pull request Clearing this because I think we're trying some other stuff. Also, this code is in a lot of flux right now :)" 
id=1224219	 'Assuming you mean "Send Tab" not "Sync Tab"\u2026 Do you have any other devices connected to the account that have synced within the last three weeks? If not, you should see: You don\'t have any other devices connected to this Firefox Account available to sync. Do you see that, or something else?', I see that that I am not connected to an account. I did mean sync tab', Created ', 20151112_085300.jpg', Created ', 20151112_085247.jpg', The devices previously synced to this account actually have not been syncing in the last 3 weeks. That might be it, I will try with the @mozilla account. But I did attach the screenshots for the wording of the Send Tab menu.', Had to reset the password, but confirmed after initial sync of three devices, the IOS device still shows "You are not signed into your Firefox Account" for version 1.1', This implies that one of the following is true. 1. There is no profile named "profile" in the shared container. 2. There is no dictionary under "profile.account" in the keychain. 3. There is, but it has a missing or non-1 version. 4. There is, but it\'s missing a configurationLabel,', For any of those to be true and for Settings to show that there's an account makes no sense. Have you tried restarting your device?" 
id=1182303	 'Created ', Example page to use on phones... (so annoying LOL)', Created ', ', PR - LAND AFTER v1 RELEASE!', Created ', Finite amount of alerts', Comment on ', ', PR - LAND AFTER v1 RELEASE! Looks OK to me with some cleanup.', I'll fix and land this.", Comment on ', ', PR - LAND AFTER v1 RELEASE! Brian, Two things: 1) change the black line to the same light grey as the other 2) change the switch active color to the same orange we use in Settings', Comment on ', ', PR - LAND AFTER v1 RELEASE! This isn't actually ready to land yet. Testing on a prompt dialog, we get this: ", We need to move the disable prompt to be under the the text field, which we can\'t do simply by injecting "\ "s as a whitespace hack (which this PR currently does). That means we\'ll need to fidget around with the existing dialog layout or create our own dialog from scratch. Note that Apple recommends against the former: "The UIAlertController class is intended to be used as-is and does not support subclassing. The view hierarchy for this class is private and must not be modified." 1 1 ', Since this will take some more work, going to re-nom this...I have a feeling we have higher priority items for v1.0.x/1.1.', Created ', ', Strings only PR: ', Strings only.', Landed strings: ', *** ', has been marked as a duplicate of this bug. ***' 
id=1264638	 
id=1259284	 "We're dropping this since for now there's no apparent way to clear the session cache, and the proposed interaction (Clear Private Data > Certificates) doesn't work without restarting the browser." 
id=1205494	 'Created ', It works! Shiver me timbers! It already works!', Although the top edges don't line up, which looks weird..." 
id=1196442	 "This is a mess, and yo ll probably never get 100% coverage, FWIW. The best thing you could probably do would be to download a bunch of old XCode versions, extract the SDKs, and dump symbols from those libraries." 
id=1210112	 'We need Apple to work with us on exposing these APIs. Filed a bug in WebKit: ', I'm looking into making a patch that we can submit.", Apple is discussing this internally. Not much for us to do here at the moment.' 
id=1223101	 
id=1292565	 'This is what ', (and the design part, ', ) are intended to address. ', gives some other scenarios, and outlines this one: --- * I'm switching accounts. Perhaps I want to take the data on this device with me (I changed email addresses), or perhaps I want to start from scratch on this device with whatever is in the new account. --- It seems reasonable to me to additionally request touch ID/passcode when signing in to a Sync account that has password sync enabled.", Mozilla Fennec does not have a gmail.com address. un-CC-ing myself.', *** ', has been marked as a duplicate of this bug. ***' 
id=1258026	 
id=1281294	 "This only occurs when the software keyboard is not shown, so it's probably part of the custom animation of the search bar that occurs even when no animation is taking place.", Needs testing to see if this occurs when using a hardware keyboard in a device' 
id=1183393	 'Created ', ', PR ', I also moved all the sql statements used here out of the create() method so that I could reuse them in upgrades wherever I needed. I also made downgrades do something. Looking into tests...', Comment on ', ', PR ', A couple of questions in the PR. Also we need to be careful when we land this and ', ! But to take a step back: if favicons are shared between sites, then two things can happen. * A site changes favicon URL (or a new site is recorded). We only know that if we visit the site, and we\'ll update our site mapping accordingly. This can leave orphan icons that we want to clean up, or it can \'refresh\' an old icon. * A favicon changes. We\'ll figure that out whenever we fetch the icon. So it seems to me that there *is* (at least one) date associated with the favicon itself, and it\'s the date last fetched, which is updated whenever we re-fetch it. Perhaps favicon expiration can be phrased in terms of two things: * When was an icon last used, and by how many sites? That\'s recorded by history and faviconSites. This bug is currently going in this direction. * When was an icon last fetched? I haven\'t had enough coffee yet this morning to turn this into a concrete "I think we should do X". But I do think it\'s worth being clear about which date we mean when we attach a date field to an icon object, and the above observations might eliminate the need to drop the date column from favicons, or even change the focus of this bug to "update favicons.date when we fetch", or something simpler than this.', Hmm... I could buy that we should keep the date field on the favicon itself as well. We don\'t actually check on each page load if all the icons we found exist (we do the first time, but on next load we\'ll use the cache). I would find that row a little confusing then. Does it mean "We checked and this image existed on date X" or does it mean "We last added a site that pointed to this icon on day X"... Maybe we\'re better to just dump icons if we ever can\'t load the url (that could happen because you visited the site or because you scrolled the history pane to the end).', Not really needed for 1.0. Someone will probably need to make favicon-expiration a lot better sometime soon though. We (I) basically punted on it for 1.0.' 
id=1250476	 
id=1262133	 ' ?', Steps to reproduce: 1. Launch an application on IPad Air 2 in portrait view 2. Slide the screen left to open split screen feature 3. Open Firefox in split screen in Private mode 4. Swipe right to exit split screen 5. Swipe left to open Firefox in split screen mode 6. Repeat steps 4) and 5) three time until the issue occurs' 
id=1143952	 
id=1228338	 
id=1326321	 'James had suggested that we find a way to maybe convert the page-metadata-parser/fathom.js stuff to not have to use babel.js. Since MobileSafari supports some ES6 features this might not be that big of a change.', We might be able to avoid using babel if we were on iOS10 only. But there is a lot of missing functionality on iOS9 ', We could try moving it into a webworker. Similar to what I attempted with Readability. ', We'll need to create a new dom with JSDOM to pass to fathom.", Farhan,should this be in our MVP list? Just double-checking before I set to P2', Yea it should be. I can do that.' 
id=1252921	 
id=1270488	 'Thread 6 name: Dispatch queue: SQLite connection: /private/var/mobile/Containers/Shared/AppGroup/89FF74FA-42A7-4213-9223-84AE1F052D22/profile.profile/browser. Thread 6: 0 Storage \t0x00000001019611c0 sqlite3GetVarint32 (sqlite3.c:27700) 1 Storage \t0x00000001019610d0 btreeParseCellPtr (sqlite3.c:56597) 2 Storage \t0x0000000101970b74 sqlite3BtreeDataSize (sqlite3.c:59631) 3 Storage \t0x000000010196b758 sqlite3VdbeExec (sqlite3.c:75455) 4 Storage \t0x000000010194bbb4 sqlite3_step (sqlite3.c:71811) 5 Storage \t0x000000010192f1d0 ConcreteSQLiteDBConnection.executeChange(String, withArgs : AnyObject? ?) -> NSError? (SwiftData.swift:624) 6 Storage \t0x00000001019301dc protocol witness for SQLiteDBConnection.executeChange(String, withArgs : AnyObject? ?) -> NSError? in conformance ConcreteSQLiteDBConnection (SwiftData.swift:600) 7 Storage \t0x000000010181bb40 SQLiteRemoteClientsAndTabs.(insertOrUpdateTabsForClientGUID(String?, tabs : RemoteTab ) -> Deferred<Maybe<Int>>).(closure #1) (SQLiteRemoteClientsAndTabs.swift:76) 8 Storage \t0x0000000101815640 partial apply for SQLiteRemoteClientsAndTabs.(insertOrUpdateTabsForClientGUID(String?, tabs : RemoteTab ) -> Deferred<Maybe<Int>>).(closure #1) (SQLiteRemoteClientsAndTabs.swift:0) 9 Storage \t0x00000001019036e8 BrowserDB.(transaction(synchronous : Bool, err : inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> Bool) -> NSError?).(closure #1) (BrowserDB.swift:274) 10 Storage \t0x000000010193618c SwiftData.(transaction(synchronous : Bool, transactionClosure : (db : SQLiteDBConnection) -> Bool) -> NSError?).(closure #1) (SwiftData.swift:157) 11 Storage \t0x0000000101935f10 SwiftData.(withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError?).(closure #3) (SwiftData.swift:131) 12 Storage \t0x000000010191fedc thunk (SQLiteBookmarksBase.swift:0) 13 libdispatch.dylib \t0x0000000198bb5950 _dispatch_client_callout + 12 14 libdispatch.dylib \t0x0000000198bbf1e0 _dispatch_barrier_sync_f_invoke + 72 15 Storage \t0x0000000101923f18 SwiftData.withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError? (SwiftData.swift:132) 16 Storage \t0x0000000101924624 SwiftData.transaction(synchronous : Bool, transactionClosure : (db : SQLiteDBConnection) -> Bool) -> NSError? (SwiftData.swift:172) 17 Storage \t0x00000001018fc4bc BrowserDB.transaction(synchronous : Bool, err : inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> Bool) -> NSError? (BrowserDB.swift:275) 18 Storage \t0x00000001018fc3fc BrowserDB.transaction(inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> Bool) -> NSError? (BrowserDB.swift:268) 19 Storage \t0x0000000101815440 SQLiteRemoteClientsAndTabs.insertOrUpdateTabsForClientGUID(String?, tabs : RemoteTab ) -> Deferred<Maybe<Int>> (SQLiteRemoteClientsAndTabs.swift:102) 20 Storage \t0x0000000101815078 SQLiteRemoteClientsAndTabs.insertOrUpdateTabs( RemoteTab ) -> Deferred<Maybe<Int>> (SQLiteRemoteClientsAndTabs.swift:63) 21 Storage \t0x000000010181a3f0 protocol witness for RemoteClientsAndTabs.insertOrUpdateTabs( RemoteTab ) -> Deferred<Maybe<Int>> in conformance SQLiteRemoteClientsAndTabs (SQLiteRemoteClientsAndTabs.swift:62) 22 Client \t0x00000001002d85a8 BrowserProfile.storeTabs( RemoteTab ) -> Deferred<Maybe<Int>> (Profile.swift:397) 23 Client \t0x0000000100258604 AppDelegate.(tabManagerWillStoreTabs( Tab ) -> ()).(closure #1) (AppDelegate.swift:535) 24 Client \t0x00000001000f8b68 thunk (PasscodeViews.swift:0) 25 libdispatch.dylib \t0x0000000198bb5990 _dispatch_call_block_and_release + 20 26 libdispatch.dylib \t0x0000000198bb5950 _dispatch_client_callout + 12 27 libdispatch.dylib \t0x0000000198bbf6ec _dispatch_after_timer_callback + 88 28 libdispatch.dylib \t0x0000000198bb5950 _dispatch_client_callout + 12 29 libdispatch.dylib \t0x0000000198bcc00c _dispatch_source_latch_and_call + 2048 30 libdispatch.dylib \t0x0000000198bb7ab8 _dispatch_source_invoke + 284 31 libdispatch.dylib \t0x0000000198bc2314 _dispatch_root_queue_drain + 716 32 libdispatch.dylib \t0x0000000198bc3c48 _dispatch_worker_thread3 + 104 33 libsystem_pthread.dylib \t0x0000000198d95228 _pthread_wqthread + 812 34 libsystem_pthread.dylib \t0x0000000198d94eec start_wqthread + 0', This is ostensibly because SQLite does not support writing to the same db from two different threads (it supports multithreaded reads). This is a relatively simple fix in the narrow sense: expose the syncQueue to allow clearing jobs to be run on it. This _does_ leave open the possibility of pressing clear private data and it not immediately happening, and not providing any feedback to the user that this is the case. The better fix would be to pause/cancel an ongoing sync which is probably beyond the scope of this release. Attaching a PR just in case.', Created ', ', Link to Github pull-request: ', (In reply to James Hugman :jhugman @jhugman from ', ) ', But SwiftData serializes all DB operations onto a single queue. So long as we're using the same reference to the DB handle -- i.e., the same SwiftData instance, probably inside the same BrowserDB instance -- then there is no DB concurrency. If we're not using the same SwiftData instance\u2026 that's a/the bug. I do agree that having CPD happen strictly before or strictly after any current sync, by running on the same task queue, is a good solution. But if that happens and CPD is still opening a second DB handle, then that's wrong.", Comment on ', ', Link to Github pull-request: ', Richard gave much better feedback than I would have provided above. I'm going to clear myself from review since this got bumped down to tracking+, unless there is something else you want me to check out!" 
id=1223974	 
id=1264248	 "3.0(11) is not affected so I'm assuming that this issue has something to do with ", I believe this has been resolved as part of ', . Catalin, could you retest to see if this is still an issue?', On master 57cc05c7, the 'Syncing...' state is still displayed briefly when foregrounding the app with the Settings menu open. Tested on iPhone 6 Plus (9.3.1) and iPhone 6S (9.2.1) " 
id=1205311	 'This is an iPad mini 1 on iOS 8.4.1 btw' 
id=1238379	 'Created ', Wow, this site is terrible Loading on *desktop* -- 30 seconds.', 54 requests. 5,981.79KB. 78.45 seconds. Yikes.', Let's bundle up some OOM bugs into a meta." 
id=1176271	 
id=1196243	 
id=1209941	 'This might be a non-issue if we support deletion of the default bookmarks: ', . I'm going to mark this as a dependancy.", Not sure if it's the same. I think this bug is for default bookmarks, not default top sites. Do we want to remove those as well?", We should allow removal of default tiles, is there an association if they become bookmarks?' 
id=1158510	 'The sequence I am thinking about for determining the title language is: 1. Does the <title> element have lang attribute? If yes, use it (and stop). 2. Does the URL response have Content-Language attribute? If yes, use it (and stop). 3. Does the webpage have meta http-equiv for Content-Language? If yes, use it (and stop). 4. If we made it here, set the language to nil (i.e. iOS default). For 2., as far as I looked, it seems there is no way with WKWebView to get our fingers on the HTTP response (e.g. NSURLResponse), so keep fingers crossed that iOS 9 adds it. I have no idea whether most webpages today that return Content-Language HTTP header also provide the same in the html meta http-equiv tag.', Some concept JS code that I think worked for 1. and 3. (I wrote it ~2 months ago...): var _firefox_Utils = { getTitleLang: function() { var lang = null; var titleElement = document.getElementsByTagName("title") 0 ; // 1. check which nearest ascendant (including title element itself) // has lang attribute set while (titleElement && lang == null) { lang = titleElement.getAttribute("lang"); titleElement = titleElement.parentNode; } // 2. if none, then use the HTTP response Content-Language header. // As we do not have access to the HTTP response, try at least the // http-equiv="content-language" meta element, if present if (lang == null) { var metas = document.getElementsByTagName("meta"); for (i = 0; i < metas.length; i++) { var meta = metas i ; if (meta.httpEquiv == "content-language") { lang = meta.content; break; } } } return lang; } }', The challenge you note in ', is very real: synced tabs, downloaded history, synced bookmarks, etc. -- all of which are shown in lists in the UI -- won't have language annotations. So I think this is legitimate, but in the foreseeable future this could only be for local data. For v1/v1.5 this might include the tabs panel and other 'active' UI elements, if we don't do that already. In the future we'd be able to extend storage to support language annotations for strings (so local history and bookmarks will work), and then in the far future sync these around. Thanks for the excellent report!" 
id=1188418	 
id=1137962	 'SDWebImage 3.7.3 (', ) or earlier ? resolved the issue.' 
id=1225164	 
id=1170810	 "In general our settings is full of sections with a single setting in them. it makes the list really long without much benefit. I'm going to nom this to have it cleaned up.", We'd take a patch, but not prio." 
id=1250238	 'For some links, this actually works: 1. Go to sso.mozilla.com 2. Long press on "Forgot password?" and Open in New Private Tab. The dialogue box that pops up immediately seems likely be the cause, but I haven\'t investigated further.', (In reply to nalcock from ', ) ', Rather it switches you to the private tab you just opened, which is not the intended function either.', The problem of not offering an affordance will arise with ', as well.' 
id=1271314	 'Related output 2016-05-09 10:35:39.382 Debug SQLiteBookmarksModel.swift:120 modelForRoot() > Getting model for root.' 
id=1198428	 'Seems like autoplay is turned off by default so not sure if we want to allow users to turn ON autoplay?' 
id=1231815	 'There was some discussion on IRC yesterday talking about new tab shortcuts.' 
id=1211348	 "Not sure if we want to do this. Chrome doesn't close the tabs when the app is backgrounded and keep them open. I think the experience would be too jarring for the user to come back to the app and have everything change. For example, if the user was in a private tab and they come back from being backgrounded, what do we show?", Not sure if this is something we want to address for 2.0? Adding :tecgirl as well.', Maybe remove this option and leave PB mode instead?', Leave the setting, kill the tabs\u2014if we indeed can tell the difference between a crash and a hard kill. If crash, offer to restore with dialog on next session. Do not offer to restore on kill.', On crash with "Close Private tabs when leaving private browsing" enabled: Oops! Firefox crashed Would you like to restore your private tabs? YES NO ', Would we show this as an additional dialog after the current \'Restore Tabs\' after a crash one? If "Close Private tabs when leaving private browsing" is disabled, we should restore all tabs and if it is enabled we show the \'Restore Private Tabs\' one as well?', (In reply to Stephan Leroux :sleroux from ', ) ', My assumption is that we're providing this prompt in case it's one of the tabs causing the crash, correct? Are we able to determine which tab caused the crash? If so, then we should not load that tab and load the rest automatically, and prompt for Private tabs. If not, then no, two dialogs is too much. Prompt to restore normal tabs. If they have the option to Close Private tabs enabled then kill those tabs. An expectation of loss should be apparent." 
id=1150744	 
id=1214665	 
id=1109645	 'iOS 9 work, I think.', Hi We are getting the callback `didReceiveAuthenticationChallenge` in iOS9. Previously (in iO8) we were not getting the `didReceiveAuthenticationChallenge` callback when `https:` protocol request was loaded in WKWebView. I want to work on it. Thanks' 
id=1153419	 "Note, we also whitelist mailto: on Fennec. We also whitelist tel: there, but we're careful to make sure the number isn't called (not possible on iOS)." 
id=1229214	 "This is what it'll look like in the log: BrowserDB.swift:192 createOrUpdate > Moving browser.db-shm and browser.db-wal\u2026 SwiftData.swift:83 getSharedConnection() > >>> Creating shared SQLiteDBConnection for /private/var/mobile/Containers/Shared/AppGroup/6F866643-7E94-4F16-B6BE-83BBF503ADC1/profile.profile/browser.db on thread <NSThread: 0x15c67acb0>{number = 2, name = (null)}. SwiftData.swift:397 init(filename:flags:key:prevKey:) > Opening connection to /private/var/mobile/Containers/Shared/AppGroup/6F866643-7E94-4F16-B6BE-83BBF503ADC1/profile.profile/browser.db. SwiftData.swift:379 prepareCleartext() > Enabling WAL mode. BrowserDB.swift:58 createTable(_:table:) > Try create BROWSER version 11 BrowserTable.swift:366 create > Creating 16 tables, views, and indices. SwiftData.swift:522 executeChange(_:withArgs:) > SQL error: SQL error or missing database no such table: tableList for SQL INSERT INTO tableList (name, version) VALUES (?,?)." 
id=1242626	 'User-requested on ios-feedback' 
id=1222936	 
id=1233147	 
id=1257612	 
id=1200221	 
id=1267331	 
id=1298022	 
id=1129225	 
id=1191799	 
id=1142491	 
id=1151960	 "Close this bug if we don't know of any other dependencies.", I don't like tracking meta bugs. Tracking the alamofire stuff (but I also think we probably don't need it, since sync likely isn't UA sniffing?)" 
id=1173353	 
id=1252545	 
id=1265696	 'This issue was reproduce on RC 5.1(1) on iPhone 6 (9.3.3) following the STR: 1. Open a PDF file with ~ 300 pages 2. Change device orientation to landscape 3. Quickly scroll down' 
id=1177618	 
id=1324596	 
id=1160198	 'I see this too, but not sure what the solution would be. This happens when a page loads behind the transparent toolbars, affecting their appearance.' 
id=1285008	 
id=1217751	 'Might be something out of our control', I don't see the relation. Especially since this isn't Gecko." 
id=1175604	 
id=1242106	 
id=1195764	 
id=1222514	 
id=1267225	 'Created ', Safari Pinterest Extension Results', Created ', FirefoxImageSearchResults.png', Created ', FirefoxPinterestExtensionResults.png', File radar for missing JS functionality for third party web app extensions.', Hey Emily, where does "Pinterest share extension" come from? Do I have to install that -- it doesn\'t seem to be in iOS stock.', Hi Mike, Yeah, you have to have the Pintrest app installed to see the Pintrest iOS extesion' 
id=1161261	 'By "header" do you mean the table view section titles (e.g. "Firefox", "robin\'s Firefox Developer Edition on tecmoz", ...)? These already seem to have a background of #F8F8F8 both in your screenshot and the current state of master.', The issue here is how the head of the table sections and the table cells are handling a blur render. So, on an iPad2, the headers render white, with the cells grey, whereas it should be the other way around. Hopefully with the blur-rendering issues on lesser powered devices in ', , this will be resolved.' 
id=1232843	 'Boris, have you tried how the "Speak screen" feature copes with Firefox for iOS and reader mode? That is different from "Speak selection". You swipe with two fingers from the top of the screen IIRC, and without VoiceOver.', Hi Macro, sorry for the delay. ', I did not try it before the original report, even though I knew about it. I was probably too excited about possibility of this directly in Firefox for iOS feature when submitting this bug :-) I tried Speak Screen now and it seems Speak screen does not cope entirely well. The most serious issue is that it does not scroll the view, more when Speak screen highlights words. This issue is present also in Safari, so I consider it a bug of "Speak Screen" (best to be reported to Apple, best with video). Apple probably can use e.g. `accessibilityScroll` to scroll the content from the "Speak Screen" feature, just like VoiceOver does. There is a workaround for the user - it is possible to freely scroll the article during it being read, so one can keep up with the Speak Screen location (and potential word highlighting) manually. Second issue is that Speak Screen reads the URL in the address bar before starting reading the article displayed in Reader View. It does not do it in Safari. I guess this is perhaps because Speak Screen reads only so called "speakable content" (e.g. you can verify it by trying Speak Screen on the home screen - it complains that "No speakable content could be found on the screen."), which could perhaps be defined by any text fields, maybe labels, plus any web views. The address bar is a text field, so maybe that is why it is read (and why the 3 Reader View buttons are not read). Perhaps marking the address bar when not activated with a static text or button trait could help to make "Speak Screen" fix it. Third issue is that the previous and next buttons seem to move by segments of text delimited by links (and non-links). Just like with VoiceOver. I personally think it would feel more natural for a person to move by sentences (or paragraphs). Again an Apple bug. So to sum it up, first issue is probably an Apple bug, second issue is potentially solvable in our code, third issue is definitely Apple bug. Long-term, it is best to fix all issues (file a rdar, try to fix our code). Also this pre-WWDC time of year is still a very good time to file bugs :-) at least if you expect them to be fixed in the next major release of OS X / iOS. I personally do not think that the situation warrants implementing a short-term solution using our custom code. We would be basically duplicating 95% of the non-trivial effort that Apple put into "Speak Screen" feature, just to fix a few bugs for which there is quite a usable workaround. So I propose to close this bug after I report the first issue (no auto-scrolling) and third issue (prev/next buttons) to Apple and open a follow-up bug about the second issue (position where Speak Screen starts).', Hi Boris, this sounds like an excellent path forward! Can you post the relevant radar numbers when you have them for reference, and then close this bug WONTFIX?' 
id=1297770	 "Looks like this issue is specific to iOS 8.x. I was able to reproduce on an iPhone 6S running iOS 8.4 but I couldn't reproduce on same device model running iOS 9.3.2" 
id=1098368	 'Let\'s not even start a WebView approach. It has too many security issues, will waste our resources/time and isn\'t what we want anyway. We are in no hurry to make the "feed" page. Do it right.' 
id=1261150	 'Created ', ', Pull request Fixed tiny visual bug.', Comment on ', ', Pull request Thanks for the contribution!', master ' 
id=1173164	 'Android equivalent: ', .', re: other two tracking bugs on ', for 1.0, should this?', Too big for 1.0, unless the perf impact kills us in the polls.' 
id=1185543	 '(In reply to Aaron Train :aaronmt from ', ) ', s/remove/remote', Also should suggest switch-to-tab.' 
id=1265444	 
id=1206479	 '*** ', has been marked as a duplicate of this bug. ***', We should fix this, as it's a user complaint.", *** ', has been marked as a duplicate of this bug. ***', The PR in ', will also fix this issue when merged.', The behaviour of the above fix was changed, and so this issue is still present.' 
id=1309255	 'Clarifying that this means roots, special places queries, and more besides.', (In reply to Richard Newman :rnewman from ', ) ', To steal Kit's comment from ", : I think it\'s easier to list what is syncable: menu, toolbar, unfiled, mobile, and their descendants. Everything else is non-syncable. The underlying problem is that in the past, desktop could well have synced almost *any* bookmark record, regardless of where it lived in the hierarchy. If we consider that addons might have created their own hierarchy under a different "root" and that we might have synced them, then it\'s effectively impossible to define the set of things that should be ignored. Assuming we can consider the entire tree as known by the server, and assuming that tree is complete and valid, then the definition above probably is useful - we can simply walk up to the root and see if it qualifies. Sadly though, I expect we will find such records on the server that form part of an orphaned branch, which would make it difficult to guess whether it is orphaned from a branch that would mean it can be synced, or one that isn\'t. That said though, I expect the vast majority to be exactly as described by Richard: * The root itself. * The left-pane root and the items directly under that root which places automatigically creates as necessary - these are the "special queries" shown as top-level items in the bookmarks sidebar (but note that this does *not* include copies of those items - it\'s perfectly legal to copy the "All Bookmarks" left-pane item and paste a copy into any other folder. I *think* we can develop heuristics to identify them, but I haven\'t looked closely at that.) The most recent analysis of the bookmark validation results implies that desktop will need to instigate a tree-wide repair of most users before we can sanely enable bidirectional sync for iOS, and that effort will necessarily need to face these same questions - so I suspect it will turn out that this burden is going to fall on desktop anyway (but having iOS skip the obviously-bad items might make sense regardless)', Yeah, that's the problem I'm trying to solve. iOS already knows which records aren't connected to the four roots it cares about\u2026 it just can't tell if those are the result of a partial write/missed delete/erroneous upload, or if they're something it can safely ignore. Deliberately ignoring the Places root record (if it arrives) actually makes our job a little harder, because we can't tell what the server things is outside our synced tree. We need some kind of heuristic we can use to recognize the root (fixed GUID?), the left-pane root (?), left-pane queries (are they all correctly pointing to the left-pane root?), and anything else you think might be hanging around. I know the ones from my profile: sqlite> select id, title, guid from moz_bookmarks where parent = 1; id title guid ---------- ---------- ------------ 4941 uTqj0oRQ_Lck 5065 iHjZXah7uyyG 4743 Reading Li readinglist 2 Bookmarks menu________ 3 Bookmarks toolbar_____ 4 Tags tags________ 5 Other Book unfiled_____ 474 mobile UjAHxFOGEqU8 4364 BxfRgGiNeITG Reading list is easy. Are these the left-pane queries? sqlite> select id, title, guid, (select url from moz_places where id = fk) from moz_bookmarks where parent = 5065 OR parent = 4941 OR parent = 4364; id title guid (select url from moz_places where id = fk) ---------- ---------- ------------ ------------------------------------------ 4365 History 5KiFoUj2pdYI place:type=3&sort=4 4366 Downloads Bl3n3gpKag3s place:transition=7&sort=4 4367 Tags 0_VQZv0ADDYK place:type=6&sort=1 4368 All Bookma NzOTUjQyXrY6 4939 History mpGbqa4W-qXO place:type=3&sort=4 4936 Downloads 3UHG3mTtOY5F place:transition=7&sort=4 4934 Tags -odCcmbgqK81 place:type=6&sort=1 4940 All Bookma sfXEBqQN7q0Z 5066 History k-DpvqH9TnVU place:type=3&sort=4 5064 Downloads bW_8_GEplDsh place:transition=7&sort=4 5061 Tags 0i6uBFPIzs7J place:type=6&sort=1 5068 All Bookma xnsv1Y4n3IDG", Those are, indeed, the left pane queries thrice duplicated. :-( If we buffer bookmarks on Desktop before applying them, we can filter out roots we don't care about. Of course, in case of a partial write or missed delete, we might end up with orphans that we need to ignore.", Created ', Snapshot of the bookmarks validator for my real account ', Yep, the root has a fixed GUID. ', These are the tricky ones :( The attached screenshot is what about-sync is showing for my "real" account. Note that in this case the validator is saying these records appear on the client and not the server, but that\'s simply good luck - if this device was running 49-ish and ever ended up doing a full sync I\'m confident they would be uploaded to the server. (I also just opened ', to say the validator shouldn\'t actually complain about them in this way - if all goes well, newer firefoxes will *never* upload them) What we seem to be seeing here is multiple copies of the left-pane special items. For some reason, I believe places decided my old left-pane items were invalid so it recreated them - my current, real left-pane root is *not* shown here - these are old ones. For context, look at your "Show All Bookmarks" rather than the bookmarks sidebar or popup. At index 0 is a "left pane root" - the parent GUID is "places" - this is the (invisible) root which holds all the top-level folders in "Show All Bookmarks". At indexes 1-4 are the "left pane items" - the top-level items in "Show All Bookmarks" - ie, "Downloads", "History", "Tags" and "All Bookmarks". They all point to the item at index 0 as the parent and have URLs place:type=3&sort=4, place:transition=7&sort=4, place:type=6&sort=1 while "All Bookmarks" is listed as a folder rather than a bookmark. At indexes 5-7 there are bookmarks with urls place:folder=TOOLBAR, place:folder=BOOKMARKS_MENU and place:folder=UNFILED_BOOKMARKS. All have their parent as the one at index 4 "All Bookmarks". These are, basically, shortcuts to our roots. The fact they are shortcuts is why places can nuke and recreate them at will - it\'s not touching the *actual* roots. At index 8, the above all repeat - it is a "left pane root" with the parent as "places", then the same funky bookmarks as listed above. IOW, it looks as though my client has 2 stale copies of the left-pane special items, which never made it to the server. Note also that if you manually create a shortcut, the URLs are different. For example, right-click "Bookmarks Toolbar", select "Copy", then paste it into, say "Bookmarks Men . In that case, the copy of the bookmarks toolbar has a URL of "place:folder=TOOLBAR&excludeItems=1&expandQueries=0", whereas the original left-pane shortcut for that just has "place:folder=TOOLBAR". So, without checking the validity of this, I\'m vaguely hoping the heuristics can look something like: * Any folder with a parent of "places" and no title is probably a left-pane root. * Any bookmark (not folder) which has a left-pane root as a parent is a left-pane folder. In the absence of that signal (eg, the parent missing), a place:type= or place:transition= item is almost certainly a left-pane folder. * Any folder which has a left-pane root as a parent is almost certainly the "All Bookmarks" left-pane folder. If the parent is missing I\'m not sure what to do here. * Any folder with place:folder=XXXX and without additional trailing query params is almost certainly a "left pane shortcut" inside of "All Bookmarks" (whereas ones *with* trailing query params are likely to be legitimate shortcuts created by the user) Or something like that :/ This is all off the top of my head and I need to spend some time doing further analysis of PlacesUIUtils (which is the code that manages these special items)' 
id=1284262	 
id=1232702	 'Boris, any idea?', Hey Aaron, not entirely sure from the description which button the user means, whether the "Bookmark" one in the bottom tray (next to "Back", "Forward", "Reload", "Share"), or the home panel "Bookmarks" button. I would guess it is the first one (the user mentions "bookmark", not "bookmarks", and is explicit about quoting the name, so I guess they know which one they mean). The user has two statements: 1. "button \'bookmark\' not knowing what it is for" 2. "It has no changes after pressing it." Re 1.: There, maybe the user has not used browsers much yet and does not know about bookmarking as such. Or the user finds the title "Bookmark" too vague (perhaps considering it as a noun, not a verb as it is). Re 2.: VoiceOver says "Selected, Bookmark" after pressing it (by double-tapping with VoiceOver when on the button). After that, when going to the button, VoiceOver says "Selected, Bookmark, button". So there is distinction with VoiceOver between a bookmarked and non-bookmarked page. But, if the user does not know what the button is for (see 1.), then the distinction makes no sense to them. So I guess the root problem is really 1. - the user does not understand what the button does. Maybe we could in general add hints to buttons for better UX with VoiceOver for less experienced users. Power users can disable VO hints. Non-power users are more likely to need them. Another thing we could do is to carefully think about the buttons that are rather check-boxes (I already met the problem previously and it is quite nerve-wrecking because I cannot think of a really satisfactory solution still) - how we name them (i.e. should be simply label it "Bookmark", and let the "selected" or lack of "selected" as said to the user communicate whether the page is in bookmarks? Perhaps add a hint to each state saying - "You have bookmarked this page. Activate to remove from Bookmarks", or "Removes page from bookmarks"; and "Activate to add this page to Bookmarks", or "Adds page to Bookmarks";;; or should we change the name of the button (label) in each state? like "Add to Bookmarks", "Remove from Bookmarks"?). So no clear conclusion (the input from the user is not that clear - especially would like to know if the user knows the concept of browser bookmarks), but it does still inspire some possible improvements to UX with VoiceOver.' 
id=1139577	 'Created ', Chrome screenshot Looks like Chrome supports downloads all-together', I think Chrome just calls it downloads... it animates the file downloading and then presents the standard Open In... dialog (I suppose pre-downloading the file like that is nice?) Good catch though Aaron!', Some browsers do in fact have a stash for putting downloads (Mercury Browser, for instance, does this). But IMHO handing them off to an appropriate app, if one exists, makes more sense.', Created ', ', PR: ', This isn\'t ready for review yet. Just putting it up for any feedback. This uses our SnackBars as a way to show downloads: 1.) We prompt for saving with a snackbar. If you select "Download", we 2.) use a different snackbar to show download progress. When its done, we 3.) use a third one to ask if you want to open it. Opening will (always) have options like Mail or Message so you can send the file to someone. Some other apps (IRCCloud for me) also appear as I have it now. video at ', This also makes it so that you can get to it downloaded files through iTunes File Sharing.', Comment on ', ', PR: ', Working pretty well now. Updated snackbars to behave a little more like Android super toasts (button on the right) when there's only one button. Also using constraints better so the animations are smoother.", Comment on ', ', PR: ', Wes can you please rebase this one before I look at it?', Weird, the commits in this PR make no sense. Can you double check if this PR is correct?', Grr. I rebased but then used commit --ammend which shoved my patch on top of head. I split things out a lot more here. My git patch-splitting skills are still... growing, so I see a few things still in the wrong place here (DownloadManager.swift is added to the project in the progress bar patch for example), and a few things that could be split up more. Hopefully its more readable though...', I added in a beginBackgroundTask request commit here as well. That should keep us alive in the background for a bit longer (until the download is finished).', Ping?', Also, I should note that these downloads are stored in a different place than our normal profile. Our normal profile isn\'t easily exposed in iTunes as downloadable (not to say there aren\'t other things that will back it up or expose it, but it doesn\'t show up here). I think I need to move these to a special "Downloads" folder so that its easy to cleanup/delete-them-all at times though.', Talked to mfinkle about this a bit (and general worry about a new feature being added). If we punt on this, I think we at least need to show something on these types of links. An error page or a snackbar to say "Can\'t open this".', Clearing needinfo because we are moving this to v1.1.', Comment on ', ', PR: ', Clearing review request because we are moving this to v1.1.', Visit ', (Content-Type: application/zip), we open the zip in the browser, potentially blowing bandwidth on a larger file for example. Expected to see an error if we won't hand off like Safari; please investigate ", for 1.0', "Open in Safari" does not work ', Because we have a string ".... we\'re working on it".', Let's create a feature card and add to our roadmap for future planning" 
id=1157527	 "Is there discussion in those links? Or has github buried it so deeply it's not easy to find?", Oh joy, you can't deeplink commit comments across a rebase. I thought they fixed that? nalexander: --- This has been a bugbear for ages. Let's reduce this, a lot, and upload our client record more frequently too. --- me: --- I don't think reducing it is necessarily the right approach. It's three weeks so that, when you go on vacation for two weeks and want to send tabs to your desktop before the flight home, your desktop still appears in the list! I agree with uploading more frequently, but the TTL here will always be a bad compromise. --- The compromise here: a shorter TTL means that dead clients disappear sooner, but a shorter TTL means that live clients will occasionally disappear just because they haven't synced recently. For example, I rarely boot my Windows machine; if I haven't used it in the past three weeks, I can't see its tabs or send pages to it. If we dropped the TTL to one week, none of my tablets would show up, either. This (as I note in the comment above) is particularly significant when traveling, which is a big first-world use case for task continuity. In the very very worst case: Day 0: leave on trip. Day 1: send a tab to your desktop. Day 22: desktop's client record, complete with sent tab, is TTLed. Day 23: get home. Sent tab will never arrive, because the record was deleted by the server! Compare that to the downside of a long TTL: when you lose a phone, it'll stick around in your lists for weeks." 
id=1246610	 "Is it possible this was occurring as part of a redirect loop? I can't reproduce this in the latest master." 
id=1170399	 
id=1125329	 
id=1097400	 "I'm going to re-purpose this ticket to track surfacing notifications when Firefox recognizes that your account needs verification or you need to enter your password again.", After discussion with rnewman, tecgirl, and darrin: we are not going to surface any out of App notifications when your Firefox Account is in a bad state or you are unable to Sync. There are two reasons for this: 1) it's not very iOS like to nag; apparently even email clients, etc, wait to show bad account state (password needed, etc) until the App is in the foreground; 2) we're not intending to support background sync for v1, so there is very little likelihood of finding that the Account state is bad when we're not in the foreground anyway." 
id=1237074	 'Brian, could you write up some more details?', It all starts with our custom context menu hack. WKWebView doesn't have a proper API for exposing a context menu, so we have to add touchstart/touchend to the content page to detect long presses, after which we show our own dialog. Apparently, there's a bug in WKWebView where the touchend event isn't fired if we're using VoiceOver (filed as ", ). That would cause the context menu to appear every time a link was clicked: since we would detect a touchstart but no corresponding touchend, it looked like the user's finger was being held down. Through experimentation, I found that mouseup *is* fired, so we used that as a workaround to detect when the finger is lifted in ", . Unfortunately, using mouseup introduced other regressions. For whatever reason, simply having a mouseup event listener registered on the page would cause elements to be highlighted on tap (', ). I think we also ran into issues where the context menu wasn't appearing on some pages. The fix for ", was to simply disable the custom context menu for VoiceOver users, falling back to the built-in WKWebView context menu for those users. We still show the custom context menu for non-VoiceOver users. So that's where we are now, and this bug is about figuring out a way to bring back our custom context menu for VoiceOver users without breaking other things." 
id=1141790	 
id=1270940	 
id=1202678	 "As an alternative, can we consider a 'Always open a private browsing tab by default' option? Because that is basically what this feature means I think, turning the browser into a private browser by default.", Also, technically there is no 'closing down the browser application'. Does this means 'when iOS moved the app to the background' or 'when you move away from it' or 'when you hard kill it' ? We cannot always see the difference. But 'closing' is most certainly not a thing on iOS.", I can understand that argument, and can look into that approach. However from an intuitive user perspective where many understand 'clearing' often more than what PB does, I think we'd get more usage out of 'clear on exit'. It was an explicit request for Android and it's been talked about already on iOS, so I'd rather not try to educate users on another path. re: the idea of 'closing'. Yes, I know it's an ambiguous definition, even on Android these days. Which is why UX needs to figure out what that could inherently mean to a user (we understand the intent, but figuring out how to translate that to implementation is the tricky bit) Let us look into it a bit more!", Needs more UX consideration for mobile' 
id=1177383	 
id=1134902	 
id=1213206	 'This happens because a sync is initialized right after creating the account (before verifying the email address).', Don't think a strange change is needed" 
id=1210150	 
id=1238024	 
id=1314383	 
id=1256592	 'Does this also reproduce in Chrome for iOS?', This issue is not reproducible on Chrome for iOS.', Thanks Catalin.' 
id=1109710	 
id=1266762	 
id=1205838	 'I think the first question is what the scope here is: (1) submit data compatible with the full main ping format documented in 0 or (2) submit data compatible with the top-level ping format 1 and iOS specific payloads (2) seems much more reasonable. If we want some/all measurements to easily show up in telemetry.mozilla.org then maybe generating data compatible with the histogram / keyedHistogram format there and feeding t.m.o from it would be feasible. 0: ', 1: ', I'm not convinced we need full compatibility with the desktop ping format. I bet a lot of the data won't make sense. Please start with the kinds of questions we need to answer and figure out the data to collect from there. That was we can solve incrementally by building the data for the most important question first and working down the list. Mark, yo ve got client engineers to work on this?", (In reply to Benjamin Smedberg :bsmedberg from ', ) ', Happy to remove some optional parts and start with a smaller set of data, but I want it to be compatible with Mozilla's core formats. ", Keep in mind: I don't want to grow separate server-side analysis systems. I want to use the same ones we already have in place. The less we need to re-invent, the better chance we have of actually getting metrics. ", I have client engineers ready to help the Telemetry client engineers. Telemetry has to be involved. This is your domain. You can't ignore Mobile. Sorry if that that was not your the purpose of your question, but I have seen that question before.", As we'll be writing two new network clients, I'd like one of the outputs from this effort to be an API spec for the ping service; I can't find one. Am I looking in the wrong place?", Just as with android, there\'s still a pretty fundamental question to answer about what a "session" is on a mobile device. Sure, we should use common systems as much as possible. The question of whether that\'s possible really depends on what questions you\'re trying to answer on iOS. So we really can\'t say whether the existing data formats or reporting system(s) are going to be useful until know what kinds of questions the data is intended to answer. Is this data going to feed executives? PMs? marketers? engineers? What are their actual requirements?', (In reply to Richard Newman :rnewman from ', ) ', Do you mean a server or client side API? Server-side we have the expected common format specd: ', mreid, can you expand on the end-point? I would love to see that documented either in e.g. the in-tree docs or on the wiki.', (In reply to Georg Fritzsche :gfritzsche from ', ) ', Server-side. I don't expect much or any client submission code to be reused, but I found the reference to TelemetryController which'll suffice as inspiration. ", Yeah, that's what I'm after -- data format is one thing (and I'm glad that's documented!), but I'd like to know the endpoint and protocol details: what headers are sent with 503s to indicate backoffs? how does the server indicate a malformed payload, and what should the client do about it? how do we tell a client that this service has been permanently EOLed? do we support 301s? etc. I'd like to see enough of that written down that it's possible to write a client and have it work without too much trial and error.", (In reply to Benjamin Smedberg :bsmedberg from ', ) ', For FHR we defined a session as the period between onResume and onPause -- i.e., the total time that the browser activity is in the foreground (and the screen is awake, IIRC). That\'s further divided into cold and warm starts: cold is when Gecko needs to be started in order to render pages. This approach is just about the only thing that makes sense on a platform where the OS is in charge of when your application is started and stopped. (Disregarding bugs, that means our "eyeball time" -- sum of all sessions -- for Android is both accurate and precise, which is nice.) ', (In reply to Benjamin Smedberg :bsmedberg from ', ) ', Firefox for iOS won't be so very different from our Android and Desktop browsers. The same general questions will be of interest. The dashboard for Firefox for Android 1 is the same type of executive level data we'd like to see for iOS. Telemetry histograms and UI Telemetry serve developers well on Firefox for Android. I'd expect the same to be true for iOS.", (In reply to Richard Newman :rnewman from ', ) ', The server's behaviour is documented here: ", The server does not care if a payload is malformed - it is accepted and stored regardless. If it is malformed (ie. does not pass validation), it is sent to a separate backend storage location for further analysis. Note in ', that the full spec is not yet implemented in the heka-based pipeline, but if you code against that, you will be futureproof (at least as far as ', ).' 
id=1265014	 
id=1278333	 'There are two things going on here: * the down state images for the MenuItemViews are missing. This is ok, because we fallback to adding a tintColor. This is all done at ', * the MenuItemViews are _not_ buttons, so don't have down states. (.Highlighted). This should probably be addressed, but there is no urgency for it right now." 
id=1180634	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks for your work! Comments in the PR.', *** ', has been marked as a duplicate of this bug. ***', What prevents this from landing?', Looks like Boris left some comments for review for arkratos to address. This code is also pretty stale since in the meantime there has been a lot of work done on the transition animation code. I can probably update this - doesn't seem to be a lot of code changes." 
id=1258049	 
id=1189063	 "Heh, I'm just bumping into this, too. Fun times!" 
id=1139045	 "Now that the Sync state machine handles meta/global records correctly, we can expose the Choose What to Sync checkboxes in settings. rnewman and I have discussed, and we intend to only PUT new meta/global records synchronously. That is, we'll block the UI during an update PUT so that we know our meta/global changes really happened." 
id=1200694	 '*** ', has been marked as a duplicate of this bug. ***', Is this still outstanding?', There are two cases that I tested: If you long press on a link in Twitteriffic and then share to Firefox, we only have the URL. This is not surprising, because nobody has loaded the content. Twitteriffic just has the link. If you open a link in Twitteriffic in the built-in SafariWebViewController and then share to Firefox, we also only get the URL. This is unexpected. I would assume that loading that page in the SFWC would result in it knowing both URL and Title and passing that to the share extension. The first is an unimplemented feature. The second may be a bug in our code that warrants some research.' 
id=1283576	 
id=1174019	 
id=1310468	 'This affects testChangingDynamicFontOnHistory in ', as well.' 
id=1245296	 
id=1326564	 "What do you mean with 'to load Fennec'. Where is the delay? What do you have on screen when it hangs?", If you are talking about initial app launch it could be related to how slow enterprise builds take to load. I find that compared to a build compiled from my desktop, enterprise builds take about 2x longer to launch. I don't understand why. If you have any thoughts on this would love to hear em.", This is my own build, so it doesn\'t suffer from the enterprise slowness (which a year or two ago we hypothesized was due to cert checking). In any case, I\'m measuring from the view being displayed until it being populated, rather than raw startup time. Stefan: I mean if I set "New Tab" to "Show your Top Sites", close Settings, hit Menu, hit New Tab, I get a new tab with the four pager icons above a big white area, and then 2+ seconds later I get content. If I open reddit.com in that tab, then hit Menu > New Tab, it takes about a second to show the content. The only time that the grid and Highlights list are shown immediately is when I haven\'t navigated _anywhere_ since the last time I showed Top Sites. It\'s also relatively slow to switch from the History or Bookmarks panes to Top Sites -- feels like about 600-800msec. If I swipe away Fennec in the app switcher and do a cold launch, it takes about 2 seconds again from showing the four pager icons until Top Sites and Highlights are populated. That\'s a long time to look at a big white rectangle, and a big motivation for my turning off Top Sites.' 
id=1147136	 
id=1259587	 "My first suspect is that the tests use app.swipeLeft(), which doesn't seem to be RTL-aware.", This seems to be fixed now.' 
id=1239023	 
id=1266694	 ' ', This is a followup bug from ', ' 
id=1273482	 'Created ', ', ', Comment on ', ', ', Don't think this patch actually changes anything. I think the issue might be rooted in how we respond to fast user interactions poorly which sounds like a deeper issue." 
id=1210114	 
id=1270850	 "I'm not able to reproduce this. Can you attach a crash log? Which device are you using? On my iPhone 6 (4.0 build 11) => Launched Firefox => Tapped the tab button, tapped the private toggle => Tapped Learn More => Tapped the tab button, tapped Settings => Tapped Done Tapping Done works for me. Do you have any missing steps here?", (In reply to Aaron Train :aaronmt from ', ) ', After tapping the "Learn more" button(visible in private browsing) and before the page is opened there is a shot time in which the user can still tap on the Settings button while in tabs tray. When tapping on the settings button while the page is loading the done button will not be functional. Please see a video of the issue for more information: ', .' 
id=1223105	 
id=1180241	 
id=1247885	 
id=1258040	 
id=1170935	 "Yeah, we should do async loading and avoid the join wherever possible. In theory we can fetch the icons for only the first N in the main query itself, but it's probably not worth the effort. (Also lol we have a favicons component)" 
id=1266445	 
id=1314365	 'Besides the empty state explanation for the new tab experience (', ), is there any other UI we're showing to educate the user what AS/Highlights are?" 
id=1282176	 
id=1182260	 'The above article should not be detected by reader-view. The article is not reader-capable in Safari. I have no idea who is working on readability detection.', Should this be moved to Toolkit?', Nevermind, please move as fit', Stefan, is iOS still running the readability parse method to determine whether or not to show the button? In general, the readability github repo is the best place to report reader view issues, although I don't think working on that is high on anyone's priority list: ", Yeah it is. Is there a better way now? Lets move this to ', There is also a isProbablyReaderable method which performs some estimations as to whether or not calling parse will succeed.' 
id=1238809	 
id=1251632	 
id=1144765	 
id=1205317	 
id=1121628	 
id=1146386	 
id=1292089	 
id=1188497	 'Note that suggestions appear when you start backspacing.', Unable to reproduce the problem. I could see the suggestion as soon I type in the address bar. I changed iPhone Language to Simplified Chinese in iPhone and iPad Simulator.' 
id=1218737	 
id=1250280	 
id=1152335	 'Please consider adding these as dependents: - ', - Location label in url bar does not provide the webpage address for accessibility (says just "URL") - ', - Reading List cell actions not invokable with VoiceOver - ', - Reading List item does not announce if it is read/unread with accessibility - ', - Language metadata for saved webpage titles - ', - Reader view does not respect Content-Language http equiv tag' 
id=1216634	 'We landed on the decision to remove the nav bar on home panels, and only show it on a webview. If the user navigates all the way back to the panel, they can start their navigation over again (to go forward).', This doesn't seem critical - moving to + but feel free to argue with me if thats wrong." 
id=1245089	 'This blocks having useful crash reports.', Stefa has a patch in the works to remove openssl.' 
id=1135898	 
id=1249152	 
id=1201259	 
id=1300641	 
id=1315954	 '(In reply to Khaled Hosny from ', ) ', Hi Khaled, For RTL It should be mirrored.' 
id=1165898	 'Assuming this went to my screens, I can update the README. We had a bit of shuffling with our enterprise account at Invision which may have caused some links to break.', The link works for me (goes to my iOS v1 collection), from private window on Nightly and Chrome. Maybe was an InVision outage?', The link works for me now. Invision *was* up yesterday, not sure why it would not load.' 
id=1321695	 
id=1209537	 'I think this is by design. /about/home is actually mapped to a web server handler that returns a 200 with an empty body. Brian, any thoughts?', I'm not sure what the performance implications are of trying to fetch a resource on our client server. Might be negligible, but would be nice to clean up anyway. A few ideas: * Hardcode an exception for localhost or about pages so that we don't try to fetch favicons for these URLs. * Put an actual favicon in the place where the server is checking. It will try (and succeed) the first time, then use the cached favicon for all future home visits. * Continue returning an HTTP error, but make our favicon cache smarter by recording failures so that we don't retry on every visit. With options 2 and 3, we could also consider preloading the cache to prevent the first-run hit. But again, I'm not sure how much effort is worth spending to optimize this." 
id=1196227	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1291724	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1168502	 'Richard, is this as simple as doing a sync in the OnLocationChange notification, or are there other changes we need here?', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Most likely we'd add a small layer of indirection. We don't want to sync for every URL you visit. Every time a visit causes a write to history (we ignore some types and schemes, remember!), briefly consider whether to sync. We can do that based on time, score, or some combination of the two. If the score gets high enough, kick off a delayed background sync, just as we do for login changes: ", As I mentioned in triage, the combination of sync on launch (', ) and sync on exit (', ), along with the existing 15-minute timer (which we can drop to 5 minutes) makes this bug much less important \u2014 desktop has score-based syncing, but yo d have to click links like a pro StarCraft player to sync more frequently than every five minutes." 
id=1203546	 "Requirements: Re-work the design (images and messaging) of the current on-boarding tour to take into account feedback from our participant feedback (dScout cohort) Reinforce the sync proposition (allows us to engage with notifications as well) Other messaging ideas: Extensions View Later Out of scope: any changes to call-to-actions User Stories: As a Firefox iOS user, I want to be informed and welcomed on how I can leverage all important features that Firefox provides. As a new user, I want to learn how I can use Firefox accounts to keep all my information stored for easy access on all platforms As an existing user, I want to sync with my Firefox account to retrieve all information I've previously stored on my Firefox sync account. Additional Info: Mostly a content generation task, not engineering.", *** ', has been marked as a duplicate of this bug. ***' 
id=1137521	 'Could clear the old ones before saving the new favicons works? Just like clear the old one in Browser object first. (Refer to: ', )', How can I assign this issue to me?', I can assign it over to you :)' 
id=1252548	 
id=1228087	 'Created ', iOS Chrome I think the way this is implemented on the mockup could lead to problems: - It blocks UI elements; - There's no way to cancel it; - Intrusive; I believe this could be changed to a suggestion while the user types an URL, like the iOS Chrome app does.", Along with the UX concerns, one of the technical struggles we had with this mockup was that showing a toast like this 'globally' causes issues with how we interact with it at various areas of the app. For example, what happens if I'm deep in a settings back when I come back to the app and this appears? Would we unroll the view controller stack to show a new tab? I really like the approach Chrome took here in utilizing the existing autocomplete list area to show this. I know this is a feature we've had on the backlog for a while now and would be great to have. Would you be interested in taking a look at building this feature out and coordinating with a designer? :tecgirl, would you be interested in being a UX mentor for this and working with Bunn? I can assist with any technical reviews and mentorship.", Sure :)', SGTM', :tecgirl how do you want to tackle this? Should I wait for a mockup from you? btw, feel free to assign this ticket to me. Thanks.', (In reply to Bunn :bunn from ', ) ', Let me go over the mocks and compare with our most recent versions of Fx and iOS 10 to see what may have need to change and if updating the mock is necessary.', Created ', Open In mocks so I just took a look at the old mocks and the banner appears at the bottom of the viewport, and will anchor above the nav bar if the nav bar is present. this would not interfere with any navigation in any view.', Oh, cool. Yeah, it's different (and better) from the other one linked here ( ", ) But still, this looks a bit intrusive right? Let's assume I have a copied link into my clipboard, then I open Firefox, but I don't want to navigate to the copied link. How do I make this banner to go away? Maybe tapping anywhere else on the screen? This could be confusing and conflict to actually tapping on a website link Maybe we could add a cancel button? This would work, but it's extra work for someone who doesn't want to go to the copied link. And more UI elements on the screen. The pro/cons in my opinion for the Chrome behavior: Pro: - Not intrusive - Only appears when the user is in fact trying to navigate to another URL, so although it's hidden, it will be presented at the right time. Cons: - If the user does in fact wants to navigate to this specific copied link, it's one extra step compared to this mocks you attached: Tap on the navigation bar. Mocks you attached: Pros: - Easier/faster to open the link I have copied; Cons: - Intrusive in case this is not my goal (Open the copied URL) - I don't see a way to cancel in case this is not my goal (Open the copied URL) Robin, what are your thoughts on this? Thanks.", (In reply to Bunn :bunn from ', ) ', I'm wondering where the original mocks came from for this bug, since the specs seem to be missing. I can definitely see the pros/cons in Chrome's approach, and we were aiming more for the Pocket-like approach; auto dismissal (10s), and the option to disable it in Settings. I'll add the Settings screen. Apologies for not having the full specs here, it looks like this was picked up after getting a bit dusty. So, thank you!", Created ', Open-in-Firefox.png', Created ', Video example I\'m having a hard time with this feature because of the reasons :sleroux mentioned here: ``` Along with the UX concerns, one of the technical struggles we had with this mockup was that showing a toast like this \'globally\' causes issues with how we interact with it at various areas of the app. For example, what happens if I\'m deep in a settings back when I come back to the app and this appears? Would we unroll the view controller stack to show a new tab? ``` I\'ve recorded this video just as an example of different layout hierarchies that the bar would need to handle and what happens if it\'s only set to be displayed on the main browser view: - The bar is added on the browser, just like the toolbar. - Then I select the tabs option, the animation changes the views layout (structure changes) - Then I select the "home" page. (structure changes) - Then I go back to the browser (structure changes) There\'s a bunch of structural changes on the views that this bar would need to handle to avoid animation flicks and problems like that. I\'m not saying it cannot be done, but it significantly increases the feature complexity. And this is just a simple example of all scenarios that this "global" view will need to handle correctly. - What happens if the user is on settings? Should we display the bar or not? - If yes, how should it be handled? the entire navigation stack should be dismissed? - If not, should the auto dismissal time (10s) start counting when the user returns to the app or only when the user goes back to the main browser view? - If the user has a link on the clipboard, opens the app, press the home button, then opens the app again, should we display the bar again with the same link? Thanks.', I think now that it's constrained to above the toolbar along the bottom within the browser's view it's less global than it was before but there are still some challenges. ", With the banner only apparent on the Home or Browser views, we shouldn't need to show anything when the user is in settings. ", I can see this 10 seconds starting when the banner first appears. For example, if the user is in the settings screen then goes back the browser, the banner would appear and the timer would start. Essentially we would tie this with BrowserViewController's viewWillAppear. Adding the banner on top of the toolbar might be tricky though since when a user taps on the URL bar we show the HomePanelViewController above it. We'll need to make sure the banner still appears above it. ", :tecgirl would be better to ask but I would think that we only show the link once. On next launch, if the link is still in the clipboard we would just ignore it since the user most likely already saw the option to navigate to it anyways. Lastly, thanks for taking a look and diving into this!', Created ', TabAnimation Hello, (Happy new year) can I assume that if the user tapped on the tabs button, the clipboard bar needs to go away "forever"? I\'m asking that because the possibilities are: 1 : - Tap on tab bar - Clipboard bar shrinks with it - Select a tab - Clipboard bar expands with it or 2 - Tap on tab bar - Clipboard bar shrinks with it - Select a tab - Clipboard bar is gone Personally I prefer #2 because if I\'m switching tabs, it means I\'m not interested on the clipboard content anyways. Also, #1 brings more questions: - Does the auto dismiss timer stops counting when I\'m on the tabs view? - The UX of selecting a tab and seeing the clipboard bar going away right after could look kinda "clunky" I like the approach of if the user tries to do anything not related to the clipboard it means the user is not interested on the clipboard content, and it\'s fine to dismiss it if the screen changes. What do you think? I\'ve attached a video with #1, where the clipboard bar expands back with the content (and I think it looks a bit weird, IMO when expanding back the clipboard should be hidden already) so you can understand what I\'m talking about. Thanks', I agree - If the user is navigating to the tab view to switch to a new tab I also feel that they are not just choosing to go to the tab view, but also choosing to ignore the copy URL option. :tecgirl would have a better opinion though!', Oops - meant to NI :tecgirl' 
id=1206789	 'Chrome apparently does not support DNT due to platform limitations: "Chrome on iOS now uses WKWebView to provide a more stable and faster browser. As a result of this move, the Do Not Track preference is no longer available due to iOS constraints. If Apple makes changes to allow this feature, Chrome will make Do Not Track available again in iOS." ' 
id=1314357	 
id=1226468	 
id=1250973	 
id=1315653	 
id=1263594	 'Is this reproducible in Safari?', The issue is reproducible on Safari as well. Please see the attached screenshot.', Created ', Issue on Safari.PNG' 
id=1217846	 
id=1254317	 'Supposedly fixed at one point by ', I'm not able to reproduce this issue on 3.0(3) - iPhone 6 Plus (9.2.1). After crashing Firefox (using the STR from ", ) the tab counter was set to the correct value.', (In reply to Catalin Suciu :csuciu from ', ) ', I don't either, except it did happen once for me. I have a screenshot even but I doubt it would be much help to upload it. While trying to figure out what else I did in that time, I remember (but not sure if for this exact crash) a dialog about sending crash report that I don't see now - what governs displaying such dialog?", Perhaps we should just lie? There _will be_ a tab open by the time you try to do something with it...', I'm unable to reproduce this for now - there are for sure some conditions under which tab count will be 0 but it may not be useful to keep this bug open until clear repro steps will be available." 
id=1291452	 
id=1179800	 'Created ', sadness.png', Created ', sadness.png' 
id=1247022	 "When the page is navigated from by tapping on such an ad, the JavaScript statement in updateFindInPageVisibility is never completing. Any JavaScript statement that is attempted to be executed at this point will fail silently, never halting (even trivial statements). This is why the selections never get cleared, though I'm not quite sure why this occurs yet." 
id=1199983	 '+1 Please let me grab the scroll bar to allow me to slide faster! This is mostly apparent when reviewing compiling build logs for software in the browser.' 
id=1267247	 'Created ', ', Pull request This is a first cut at U2F implementation. Would love feedback from the iOS team about whether it should be factored differently (Stefan, I assume you can dispatch as appropriate). For example, we could certainly handle the ECDSA and crypto testing stuff as a separate bug, or the OpenSSLToken parts could be split out into a separate Swift file.', This is pretty good for a first iteration. Bad news: we are trying to get rid of the OpenSSL dependency :-) Does iOS provide the crypto needed? Is ECDSA something it supports? Is there another (lightweight) implementation that we could use? We can hold to OpenSSL for a while, but for various reasons we want to get rid of it in the future. Anything at ', that we can use or import?', How do we test this? How do we see this in action? Can you post a link to a (test) site that supports this and some guidance on how to get it going? From a user perspective.', has a "canned demo" of what this can look like based on their SDK. As for Testing, ', is the link to official info on the FIDO Alliance's certification service. There is a detailed document available that explains all the errors that might be encountered during verification.", :st3fan - The simplest, most turn-key test/compliance tool is probably this one: ', I have a very trivial tool online at ', as well.', Note that I don't think ", works with Fx/iOS because it relies on WebCrypto (which is missing there). I have been using ', for my interop testing. :st3fan - It looks like there might be some stuff there that does ECDSA sign/verify 1 , but it's not clear that it does everything we need (e.g., Certificate stuff). Perhaps we could meet half-way by formatting the ECDSA keys we export in a way that's compatible with what Apple crypto wants to do, but punting the actual use of it to a follow-up? 1 ", Comment on ', ', Pull request Thanks, Richard! I put comments on the Github-side, and this meta-comment: ', I'm going to feedback+, but I'd like to get an r? after any rework from the other reviews. Thanks!" 
id=1297782	 
id=1170695	 
id=1270975	 
id=1319082	 'On step 3, how are you disconnecting the device? If on an Android device: ', . If on an iOS device: ', . If through Device Manager or something else\u2026 well, they can't actually remove data from your Sync account! Devices _should_ age out of the device list after three weeks. It's quite possible that on iOS we don't locally obey that TTL, but I don't see a bug on file. In short: this is currently expected behavior, and nobody has been sufficiently motivated to do the work needed to fix it.", Is this because we haven't implemented the device registration API on iOS to properly identify a user's device? ", I'll investigate and see if we need a bug on file for this.", (In reply to Stephan Leroux :sleroux from ', ) ', No. AIUI, the FxA web device manager simply doesn't know enough to reach into the user's sync account and delete the corresponding record. The first two bugs I linked to are about us not deleting the data ourselves.", The device list on the web is up-to-date. Do you think this is still an FxA issue? I'll loop our team in if so.", Only if you deleted the device through the web, and expected it to be removed from Sync. If you just disconnected your FxA on Android or iOS, then this bug is a nice simple dupe -- see ', .', This is accurate, and FxA doesn't have enough information to do this correctly even if it wanted to. ", But this is a totally reasonable expectation for a user to have, so we should figure out a path forward here. My tentative proposal is that we should start treating the FxA device list as canonical - if you\'re not in the FxA device list, you\'re not connected to sync and shouldn\'t show up in any of the client-side sync devices UI. * FxA will now auto-create a "placeholder" device record for sync clients that don\'t know how to do it themselves, so there\'s minimal risk of a device being missing from the FxA list. * It\'s much easier for the user to manage the FxA list than the one in the clients collection in sync, meaning users can effectively purge their old devices. Of course, I\'ve no sense of how complicated that might get for the client-side code! But it seems like the "right" thing to work towards.' 
id=1252475	 
id=1235446	 
id=1169322	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', "it freezes at times and it starts lagging when typing\u2026for example I\u2019ll start typing a letter t for example and then I\u2019ll type the letter h and it will lag a second or two before it shows up, and then when I type the letter e, the lag is now two or three seconds"' 
id=1127039	 'General thoughts are that we could drop this for v1.', Requirements: Save data inputted in supported form fields User Stories: As a user, I want to limit the amount of typing I need to do on my mobile/tablet to make my experience quicker, easier and more accurate. As a user, I want to have an option of all relevant previously-used form data when I come across a similar form field in order to limit the amount of typing I need to do. Acceptance Criteria: Form data is saved' 
id=1187235	 
id=1222002	 "Related videos are under the big main video. Reproducible. Works ('Copy/'Save Image') in Safari. However on desktop, one can open those links in new tabs fine.", Needs investigation.' 
id=1311083	 
id=1125830	 
id=1267211	 '(In reply to Emily Toop (:fluffyemily) from ', ) ', I had to read this a few times to make it match up to my understanding: when you say 'tree structure' and 'desktop bookmarks' you mean the Desktop Bookmarks folder, right? To rephrase: The current bookmark tree structure is rooted in the local/merged mobile bookmarks folder (mobile______). The local and merged mobile bookmarks that are children of mobile______ are displayed in the first list you see. A fake Desktop Bookmarks folder (desktop_____) is prepended to the list if non-empty, and the three/four remote roots (toolbar_____, menu________, unfiled_____, mobile______ (optional)) are children of that folder. In the fully merged case, there is no remote mobile folder. ", So where do the local mobile bookmarks go? Or do you mean visually merging the two? ', The UI will care about at least one thing: you can't edit or delete unmerged remote mobile bookmarks, by definition. So if yo re intermixing the list, yo ll have different behaviors for adjacent items. (The column for this is already returned from queries and handled by the list items, so this should Just Work\xae.)", It's possible then that I have misunderstood this requirement. I read it as currently our bookmarks structure _as displayed to the user_ is: * local mobile bookmarks * desktop folder -> - toolbar folder - unsorted folder - remote mobile folder - other folders Of these, the subfolders of desktop are the actual folders that live on the server What we want to do is display _all_ mobile bookmarks at the root alongside the local mobile bookmarks, despite the fact that is not where they actually live. Therefore we have to somehow tell the UI to display things that way. I was envisaging that we did this when we requested our bookmarks rather than have the UI layer understand these things. We would then need some kind of translation/mutation of the actual bookmarks structure to some structure that is purely there for the UI to understand, and translate it back again when changes are made. If this is not the requirement, and everything is perfectly fine the way it is, I am unsure what the requirement is wrt the simplification of the UI from the users perspective.", Okay, I think we're on the same page. I'd technically phrase this as: include (as best we can) buffer mobile bookmarks in the top-level mobile bookmarks list. There's one outstanding question: do you want this to apply to just the entirely-unmerged state, or also to the synced-but-now-can't state? Regardless, this means undoing part of ", , which added remote mobile bookmarks to Desktop Bookmarks, particularly the changes to SQLiteBookmarksModel line 203 and 742. The direction-aware part on line 121 will need to change to also fetch from the buffer, but how you alter that code depends on what the fallback behavior should be. Areas of complexity and concern: * The root view will now include some editable and some non-editable items. * Yo ll have to figure out how to order these -- some kind of timestamp. * Yo ll have to figure out what happens when the buffer and local+mirror both include a record with a given GUID. You can provoke this situation by syncing bidirectionally, then by introducing corruption, then deleting, adding, and changing some mobile bookmarks. You can write a test for this. * When there's a folder in one of the two sequences -- buffer or local+mirror -- yo ll have to decide whether to recursively query both stores as you descend into it. That gets hairy real fast.", (In reply to Emily Toop (:fluffyemily) from ', ) ', Yes, this ^ Uneditable items will show the management options but they will be disabled. They will appear in ascending order. The user *could* manually reorder these on Desktop, but we're not providing this functionality at this time." 
id=1147451	 
id=1212017	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages." 
id=1224679	 'See ', Presumably the page should have reloaded after the web content process died? As this is reproducible still on iOS 9.1, what can we do?', I ran into this issue again on build 1302' 
id=1170597	 
id=1237274	 'Worth revisiting and seeing if any of these are still an issue.', Re-tested and updated all dependencies.' 
id=1260896	 'Proposed implementation outline: The bookmarks synchronizer owns a RecoveryPlan. There is a small amount of long-lasting account- or server-scoped state (e.g., requests made, commands sent, records known to be missing?), which exists to avoid cycling through the same work endlessly without making progress. Naturally there is also some plan-scoped state: attempts made, missing records, etc. When the buffer is found to be inconsistent, a plan is built. This encapsulates the set of records that would need to be updated or added in order to move us closer to consistency, and also the steps we\'ll take to get there. Starting inputs: * State extracted from the buffer and mirror. * The set of clients, versions, etc. Inputs over time: * Received commands. * New/changed buffer records. (The mirror can\'t change under us.) * Invalidating events (changed syncID, node reassignment, changed FxA, etc.) I use the term "plan" to indicate that this (a) starts out with a prediction, (b) is effected over time, (c) eventually succeeds, fails, or is superseded by a new plan. When records in the buffer change, the plan is updated to match. When all of the plan\'s needs are met, it\'s done and can be discarded; the validation/plan/execute cycle begins again. The plan doesn\'t execute immediately; we might be seeing partial writes, so no need to flip out immediately. We wait a reasonable amount of time before acting. The internal life of a plan might vary; we might decide that the server is in such bad state that we need a reset, or we might decide that we can use commands or sentinel records to trigger uploads from other devices. The latter will need a small state machine to track advancement. We expect most situations to be simple, and thus most plans to be simple: an input set of inconsistent or missing records, a single other client, and resolution after a finite number of steps (usually just one or two).', Triage: is this still needed considering all the work that's being done.", Mark: what's the status of recovery from corrupted server states?", (In reply to Richard Newman :rnewman from ', ) ', That's a good question. I wish I had a good answer. My approach so far has been to first identify and fix scenarios where we know desktop causes bad state (eg, ", , ', ), then to work out how to best repair such issues already caused - my thinking is that it\'s better to repair after we are confident we aren\'t going to continue to cause the corruption. The other well-known problem is simply IDs missing from the server caused by limitations in the tracker. This *is* something we could repair sooner rather than later. However, the question here is "how?". One scenario is as outlined above - wait for a client to notice it missing and to try and message other clients to upload the missing records. The main problem I see with this is that it relies on those other clients being smart - we\'d need to make all 3 clients both detect missing records, and also trigger the other clients to upload the missing items. IOW, it seems unlikely we would complete that this year. Another option is that desktop (and maybe other clients later) would periodically ask the server for all IDs it knows about, compare that with all IDs locally, and upload the missing items. This doesn\'t rely on other clients even noticing missing items. However, it is a relatively expensive operation for outliers with a huge number of bookmarks. However, it is much less expensive than the client trying to fix other structural issues as this operation only requires a list of IDs rather than the full records. So TBH I\'m not sure how to proceed here, but agree we need a plan. What do you think?', (In reply to Mark Hammond :markh from ', ) ', I agree, but it'd be nice if we could pipeline the programming work some. ", Missing records would be a good start, but IIRC we rarely see missing records alone -- they come with other missed changes. ', A much more limited version is: iOS is the implementation that cares most, and it's also the one that already knows what's missing. I don't think we need to build detection (or, indeed, handling of absences!) into every platform in order to get value out of this. It's worth noting that it's way more efficient to detect a problem when yo re downloading and processing changes. Android is already working on two-stage buffer/application like iOS has, at which point it'll be easy to spot issues there, too. ", Regardless of the approach we take, there are two parts: * Recognizing when there's a problem. IMO a signal from another client is a decent first step for that. * Fixing the problem. This bug and ", are two approaches to the latter: this bug is to have the detecting client delete and send resetEngine; the other is to be a little more specific and hands-off. I'd prefer the latter. It seems like there's a lot to figure out about how desktop might trigger detection and how it would detect inconsistency, so I'm leery about waiting for that. If indeed we reach a point where desktop doesn't corrupt server data, then perhaps we don't need to do the work for desktop to detect corruption at all -- corruption should be rare, and so it's okay to have the mobile device ask for a fixup and otherwise fall back to SUMO.", (In reply to Richard Newman :rnewman from ', ) ', Can you clarify here? ', mentions "flagging records for reupload", which I assumed was mainly for missing records. I guess you also mean "we have an item, but some of the content is missing/invalid, so please re-upload it". I\'m having trouble seeing why it is likely another client would upload anything different than what is already on the server, and what would happen when the record re-uploaded still isn\'t suitable. ', Fair enough - I'm more than happy to work with iOS on the desktop side of this as a priority. ", Yes, that's true - I was suggesting that for items that are simply missing, it's probably not *that* expensive for desktop to upload them without signals from other clients, and would help the user should they go and connect another desktop device to the account. I agree that without far more work, desktop can't efficiently handle problems other than items missing. ", As above, I'm fine with that, although I do think the problem of missing IDs could be worthwhile without that signal as it will fix the problem for users without an iOS device attached. ", Fair enough - it need not be either/or, so I fully support us reacting to such a signal. Given we are worried about more than just missing records, are we sure a resetEngine() isn't what we want here, forcing the client to consider every bookmark? ", SGTM.', (In reply to Mark Hammond :markh from ', ) ', Yes. More specifically: we have several records that, when considered together, are inconsistent; please reupload them all. ', ', (duped to tracker work in ', ) is exactly this problem. If you just make the client reupload the records, the corruption goes away. Say desktop at some point failed to track a record change (e.g., during deduping, or moving a bookmark soon after creation). The new, moved bookmark will be on the server, and iOS can see that its parent record doesn't know about it. iOS has enough context that it knows which parts of the tree are inconsistent, so it can request reupload of dodgy records. We'll ask for the parent record, and desktop will regenerate its parent list when uploading, perhaps fixing the inconsistency. It won't always succeed, but we can definitely do more than just find missing records. One way of looking at this is that there's rarely such a thing as a missing record. The missing record is usually referenced somewhere else in the tree\u2026 ", True. I'll be as supportive as I can if you want to work on that :D ", My worry about resetEngine alone is that it downloads every record from the server, with the server record winning, which will destroy the local state we're trying to keep on the supposedly pristine client. My worry about having another client delete records from the server then call resetEngine is that, well, it's deleting data from the server and hoping someone can replace it. And we might not excise all the bad bits, so we might still get corruption. And if send resetEngine to the wrong device, the bad bits won't be reuploaded! It's risky. Requesting upload (", ) is much safer, in that it's much more specific: either nothing happens or known-good records make it up to the server.", As originally filed, this bug was "delete records and reset desktop". ', was "tell desktop that records X, Y, and Z are missing". The latter involves more implementation work on desktop, but (a) we also plan to have desktop play the \'conductor\', not just the \'orchestra\', and (b) it seems more likely to produce good results. So let\'s morph this bug to be the iOS implementation part of ', , and a nice repository of discussion.' 
id=1202690	 
id=1270957	 
id=1173109	 
id=1227832	 '*** ', has been marked as a duplicate of this bug. ***', This is unneccessarily stopping users of the Chinese App Store that don't want/need these localisations from using Firefox on iOS. Why not launch as-is then add these things in an update?", (In reply to Simon Blanchard from ', ) ', Some discussion has reply to ', . Let us continue to discuss it there.' 
id=1155143	 
id=1294101	 
id=1139079	 
id=1171516	 "So I was able to update the status bar theme whenever the More screen is displayed but there is no way to get a callback into when the More screen is dismissed to change the color back without using private APIs :( I'll file a radar for this.", Opened radar: ', Can we remove the tracking+ flag on this for now?' 
id=1263339	 "There's also a bug in StorageClient: public func post(lines: String , ifUnmodifiedSince: Timestamp?) -> Deferred<Maybe<StorageResponse<POSTResult>>> { let deferred = Deferred<Maybe<StorageResponse<POSTResult>>>(defaultQueue: client.resultQueue) if self.client.checkBackoff(deferred) { return deferred } let req = client.requestPOST(self.collectionURI, body: lines, ifUnmodifiedSince: nil) That last 'nil' should be 'ifUnmodifiedSince'." 
id=1232528	 'Created ', image.png Screenshot.', Like the FxA scroll fix.', Confirmed. You can see this best when you are on a page where you can pan up and down to show/hide the toolbar. It looks like the inset between the keyboard and the horizontal scrollbar is exactly the same height as the toolbar. Maybe we change the insets globally instead of just the top?', We don't set any contentInsets on the web view but we do adjust the top/bottom constraints for the dynamic url bar. I think what's happening here is that the constraint is set to include a toolbar and the reason we're seeing web content below the scroll bar is because the web view doesn't clip to it's frame." 
id=1170362	 "Wasn't there a discussion about this? I thought we decided to skip the scheme prompt (Safari), or was this a security problem?", I agree, showing the full url by default makes no sense. We should look at what other apps do. Like Safari, Chrome, Reeder.', Don't believe there's a way to extract an application name from an NSURL. Safari/Chrome skip the prompt." 
id=1314385	 
id=1246254	 
id=1182664	 
id=1163210	 'This is probably micro-optimization. I\'m not even sure its that. I mean, most of the hard work you mention above happens in any case. i.e. we check a version in the db, decide whether to create or update the tables based on that. If any of them need to updated, we do existence checks, make the changes, and then update the db version itself (and if ANY of them fail). Right now we DON\'T have to create every table on first run, precisely because of this. We just create the ones we need, which are probably history, favicons, visits, and some join tables between them. In most cases, they probably exist and are the right versions, so we probably just go "hey, do i have version 1 of this, yup!" and are done. That\'s opposed to a single "Hey is the db version 1. Yup" call, but since we only have 6? (a dozen?) maybe tables, its a trivial amount of time. We could slurp up the versions db into a cursor and not requery it if we don\'t need to (its 6 rows long, so holding it in memory is probably trivial). I expect sqlite already does, making these queries basically zero time operations. I\'d be happy to move them into a transaction if they aren\'t already (but at one point they were...) In fact, its even nicer than that because, even though one table needs an upgrade, the rest can go about their business happily. i.e. upgrading the logins table doesn\'t have to happen at startup, and doesn\'t have to bother the other tables when it happens. I\'m dubious there\'s a good optimization here (and dont\'t seen any data to show there\'s a problem).', Is this measurable? I did not see any of this code run when I was profiling the app. We need some numbers first before we start optimizing this.', All perf bugs have an implied "measure this and decide" clause :)', Created ', Image Looks like this is somewhat a concern when profiling my first gen iPad mini but there are some other issues that look more pressing.' 
id=1227592	 'Email sent to ', I have been in contact with ', who has pointed me to ', which is another extension SDK for a third party password manager. Currently, we use the one-password-extension sdk, which is compatible with 1Password, LastPass and pwSafe. We would like to be able to standardize on one SDK, so as to reduce the amount of code (and thus the number of bugs) we need to ship to offer the user an adequate choice, and would like to encourage communication between password managers to come up with that common API and/or SDK.', I don't want us to play whack-a-mole with integration APIs. Let's push for standardization here. Blog post, James?" 
id=1141702	 
id=1265018	 
id=1155133	 'I can pan diagonally fine, used ', on latest available builds. WFM.', Upgraded to build #8. I'm not sure it was this way with build #7, but now I *can* pan diagonally. *BUT*, when starting to pan either horizontally or vertically, I'm stuck in that direction. I need to *start* with a diagonal pan to be able to pan diagonally afterwards.", (In reply to Mike Hommey :glandium from ', ) ', I thought that was our design. We use "axis locking" to make horizontal or vertical panning more constrained, once we determine you are panning in a cardinal direction.', I personally find this annoying. But if it's supposed to be this way, I guess there is no bug...", This is the default behavior in iOS, all apps and browsers work this way. I think we should stick with it, otherwise the app would feel out of place.' 
id=1302815	 'Created ', ', GitHub PR', Comment on ', ', GitHub PR LGTM with comments addressed.' 
id=1210144	 
id=1197068	 "This should probably be morphed/checked to see if error codes can/may be translatable. Stephan? If it's just a missing translation for this particular locale we can move this bug to Mozilla Localizations.", The unlocalized title is coming from the HTTP error and we don't bind the title of the error to our localized strings files. We need to add map an entry from our localized strings to the error's NSLocalizedDescriptionKey using NSError's userInfo property: ", (a bit down the page). So this is two parts: 1. Engineering work to add in the mappings to expose these error strings to localizers 2. Localize the missing network errors', Just curious, but does overriding the translation really work here? The value stored under NSLocalizedDescriptionKey in the userInfo dictionary should already be translated. Because of this, I had assumed the translation look-up to be performed at the time the NSError is created which happens inside of CFNetwork using the CFNetwork string resources. Shouldn\'t that look-up completely ignore any translations we add to the main bundle? These are the strings I was able to grep from the CFNetwork resources: $ find /System/Library/Frameworks/CFNetwork.framework/Resources/ -name *.lproj -exec ls {}/Localizable.strings \\; -exec cp {}/Localizable.strings ~/Desktop \\; -exec plutil -convert xml1 ~/Desktop/Localizable.strings \\; -exec grep -A 1 "Err-1007" ~/Desktop/Localizable.strings \\; /System/Library/Frameworks/CFNetwork.framework/Resources//ar.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u064a\u0648\u062c\u062f \u0627\u0644\u0643\u062b\u064a\u0631 \u0645\u0646 \u0639\u0645\u0644\u064a\u0627\u062a \u0625\u0639\u0627\u062f\u0629 \u062a\u0648\u062c\u064a\u0647 HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//ca.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>massa redireccionaments HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//cs.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>p\u0159\xedli\u0161 mnoho p\u0159esm\u011brov\xe1n\xed HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//da.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>for mange HTTP-omdirigeringer</string> /System/Library/Frameworks/CFNetwork.framework/Resources//Dutch.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>te veel HTTP-omleidingen</string> /System/Library/Frameworks/CFNetwork.framework/Resources//el.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u03c0\u03ac\u03c1\u03b1 \u03c0\u03bf\u03bb\u03bb\u03ad\u03c2 \u03b1\u03bd\u03b1\u03ba\u03b1\u03c4\u03b5\u03c5\u03b8\u03cd\u03bd\u03c3\u03b5\u03b9\u03c2 HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//English.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>too many HTTP redirects</string> /System/Library/Frameworks/CFNetwork.framework/Resources//es_MX.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>demasiados redireccionamientos HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//fi.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>liikaa HTTP-uudelleenohjauksia</string> /System/Library/Frameworks/CFNetwork.framework/Resources//French.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>trop de redirections HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//German.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>Zu viele HTTP-Umleitungen</string> /System/Library/Frameworks/CFNetwork.framework/Resources//he.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u05d9\u05d5\u05ea\u05e8 \u05de\u05d3\u05d9 \u05d4\u05e4\u05e0\u05d9\u05d5\u05ea \u05e9\u05dc HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//hr.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>previ\u0161e preusmjeravanja HTTP protokola</string> /System/Library/Frameworks/CFNetwork.framework/Resources//hu.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>t\xfal sok HTTP \xe1tir\xe1ny\xedt\xe1s</string> /System/Library/Frameworks/CFNetwork.framework/Resources//id.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>terlalu banyak pengalihan HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//Italian.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>troppi HTTP ridiretti</string> /System/Library/Frameworks/CFNetwork.framework/Resources//Japanese.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>HTTP \u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u591a\u3059\u304e\u307e\u3059</string> /System/Library/Frameworks/CFNetwork.framework/Resources//ko.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>HTTP \uc7ac\uc774\ub3d9\uc774 \ub108\ubb34 \ub9ce\uc74c</string> /System/Library/Frameworks/CFNetwork.framework/Resources//ms.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>terlalu banyak ubah hala HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//no.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>for mange HTTP-omdirigeringer</string> /System/Library/Frameworks/CFNetwork.framework/Resources//pl.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>zbyt wiele przekierowa\u0144 HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//pt.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>demasiados redirecionamentos de HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//pt_PT.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>demasiados redireccionamentos HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//ro.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>prea multe redirec\u021bion\u0103ri HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//ru.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u0430\u0434\u0440\u0435\u0441\u043e\u0432\u043e\u043a HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//sk.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>pr\xedli\u0161 ve\u013ea presmerovan\xed HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//Spanish.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>demasiados redireccionamientos HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//sv.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>f\xf6r m\xe5nga HTTP-omdirigeringar</string> /System/Library/Frameworks/CFNetwork.framework/Resources//th.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u0e21\u0e35\u0e01\u0e32\u0e23\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e40\u0e2a\u0e49\u0e19\u0e17\u0e32\u0e07 HTTP \u0e21\u0e32\u0e01\u0e40\u0e01\u0e34\u0e19\u0e44\u0e1b</string> /System/Library/Frameworks/CFNetwork.framework/Resources//tr.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\xe7ok fazla HTTP y\xf6nlendirmesi</string> /System/Library/Frameworks/CFNetwork.framework/Resources//uk.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u0437\u0430\u0431\u0430\u0433\u0430\u0442\u043e \u043f\u0435\u0440\u0435\u0430\u0434\u0440\u0435\u0441\u0443\u0432\u0430\u043d\u044c HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//vi.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>qu\xe1 nhi\u1ec1u chuy\u1ec3n h\u01b0\u1edbng HTTP</string> /System/Library/Frameworks/CFNetwork.framework/Resources//zh_CN.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u592a\u591a\u7684 HTTP \u91cd\u5b9a\u5411</string> /System/Library/Frameworks/CFNetwork.framework/Resources//zh_TW.lproj/Localizable.strings \t<key>Err-1007</key> \t<string>\u592a\u591a HTTP \u8f49\u5740</string> All of these should (theoretically) show up as long as the app is configured to be localizable in the respective locale. I\'m not sure how this is handled in Firefox on iOS though because the project file only lists English as the development language and no translations. Peter, what is the locale in which the screenshot was taken?', The screenshot was taken in zh-TW, I didn't test in in other locales listed above.", *** ', has been marked as a duplicate of this bug. ***', Re-summarize this better if need be', From the duplicate report; strings shown in English with device set as `pl` Error-1200, should be: /System/Library/Frameworks/CFNetwork.framework/Resources//pl.lproj/Localizable.strings \t<key>Err-1200</key> \t<string>Wyst\u0105pi\u0142 b\u0142\u0105d SSL i nie mo\u017cna ustanowi\u0107 bezpiecznego po\u0142\u0105czenia z\xa0serwerem.</string> /System/Library/Frameworks/CFNetwork.framework/Resources//pt.lproj/Localizable.strings' 
id=1180953	 
id=1288448	 "I'm personally interested in the persistence story here. Our work on Datomish aims to generalize the kind of limited metadata storage used in the desktop AS add-on: ", Being JS, Datomish isn't directly applicable to iOS\u2026 but we've talked in the past about converging. :jsantell has been doing a lot of work locally in Tofino for extracting cards from pages, including cool stuff like Amazon reviews, which seems to have a lot of overlap with this bug. I encourage you to chat to him about that." 
id=1162577	 
id=1144338	 '(In reply to Jeff Beatty :gueroJeff from ', ) ', In case of Italian I did move them in the right place, so I'd expect the screen to be fully localized ", Just want to make sure before I try to clean up the files and move them in "Client/Localizable.strings".', (In reply to Francesco Lodolo :flod from ', ) ', Some more context. My file had 72 strings against 58 of English, run a script to remove obsolete files (r139210), and then realized I was missing 4 strings (added in ', ), which are basically the strings that were moved from one file to the other. If this doesn't create a fully localized build, I clearly don't want to repeat the procedure for other locales.", Installed XCode 6.2, imported translation and exported, found a ton of new strings (I wonder if we can ignore tests...). See ', for details. Then imported the strings, run the simulator, everything seems localized but the Boorkmarks button. Could it be a problem with that specific button? See also comment in other bug, I think yo re actually looking at English in this screenshot.", It seems indeed not localizable (from what I understand of Swift code, which is very little) ', Please also add a note that it\'s a verb, not a noun, as in "Add to bookmark".' 
id=1232301	 
id=1226026	 'Brian, Steph: do we support deleting logins on the iOS device? Nick: could you spend half an hour reading Logins/LoginsSynchronizer/SQLiteLogins to see if you see any problems I miss?', \u2026 which implies that the initial sync completed syncing logins. ', \u2026 which implies that there's either a wipe command or real records (deleted or malformed) on the server.", Looks like we have PasswordsClearable which calls into SQLiteLogins:removeAll(). PasswordClearable is called when clearing private data from the Settings. From SQLiteLogins:removeAll(), 1. Clear all newly created local logins "DELETE FROM \\(TableLoginsLocal) WHERE sync_status = \\(SyncStatus.New.rawValue)" 2. Mark older local logins for deletetion "UPDATE \\(TableLoginsLocal) SET local_modified = \\(nowMillis), sync_status = \\(SyncStatus.Changed.rawValue), is_deleted = 1, password = \'\', hostname = \'\', username = \'\' WHERE is_deleted = 0" 3. Copy mirrored bookmarks into our local table and mark them as deleted "INSERT OR IGNORE INTO \\(TableLoginsLocal) (guid, local_modified, is_deleted, sync_status, hostname, timeCreated, timePasswordChanged, password, username) " + "SELECT guid, \\(nowMillis), 1, \\(SyncStatus.Changed.rawValue), \'\', timeCreated, \\(nowMillis)000, \'\', \'\' FROM \\(TableLoginsMirror)" 4. Update entries in the mirror table to is_overridden = 1 "UPDATE \\(TableLoginsMirror) SET is_overridden = 1" Only things I can see that might be problematic is step 3 and 4. Also, for some reason we don\'t actually use removeLoginByGUID in the app anywhere - just in tests...', (In reply to Stephan Leroux :sleroux from ', ) ', Yup, that's what I thought -- nothing but CPD. So a user who's never cleared will never have deleted records in the DB.", another user with the same symptoms confirmed that he cleared private data: ', (in german). he makes a point there that maybe it would be better if "saved logins" weren\'t selected by default while clearing data...', (In reply to Richard Newman :rnewman from ', ) ', I never got to this, but I'm not likely to get to it any time soon :(" 
id=1157358	 
id=1310470	 
id=1170213	 "Yeah, we looked into this in an earlier PR. Thanks for filing. Note that the way we use D<R> makes for easy chaining -- you explicitly don't need to check for errors, so long as the types match, because our control flow utilities will chain the failed Result through. That's what all of the >>> and >>== ops do; it's a lot like .then().then().catch() in JS. Using Deferred.{bind,map}, and in a top-level .upon() block: yes, you need to check whether you got a success value or an error, but I view that as very much a good thing. The pattern that seems to be arising in the codebase is: * Deferred for async. * Result for a chainable success/failure. * Optional for success-but-no-value. * Enums for success-in-multiple-ways. In particular, we do just about everything with Deferred<Result<T>> -- because everything is async and everything might fail -- right up until we need to assign the T to something or directly process it on the main thread, at which point we use .uponQueue to run a block. (Sync's many status results are enums, and in a few rare places we do D<R<T?>>.) As for the overlap between Cursor and Result: the simplest two ways out are to make Cursor a Result, or to remove success/failure from Cursor. The former is difficult because Result isn't a protocol; if we wanted to go this way, we'd have to fork Result (which I'm OK with, but it's not an afternoon project). The latter is what I started to do, but it involved a fair amount of hacking away at UI code, primarily because the UI code tends to use blocks -- perhaps obviously, lifting success/failure out of Cursor involves switching things to be optional, introducing error args, or switching that code to take a Result<Cursor>. Given that both of those approaches involve some amount of work, I opted to simply leave the redundancy for now. As we hit the storage APIs in turn and rework them (as we did for history), the amount of work involved in the second approach will shrink; when we get to the point that every data access API returns a D<R<C<T>>>, it should be a mechanical change to remove success/failure from C<T>. What about the third option, I hear you cry: just using Deferred<Cursor<T>>? Impedance mismatch is the short answer. We'd need to have two duplicate ways of doing control flow based on success or failure: one for Result and a special one for Cursor. This is essentially making Cursor into a Result but without unifying the types. (There are other reasons too -- e.g., sanity: having a cursor that can't give you rows because it's not really a cursor, it's a wrapper around an error code, feels like an abuse of the type system -- but that's the practical one for me.)", Heh. I actually liked this about Cursors holding these errors. i.e. If you ignored them yo d just get zero length cursors and life could go on. But I agree, that doesn't match up well with either system (explicit failure callbacks or callbacks taking errors as arguments)." 
id=1256423	 'Associated integration: ' 
id=1270855	 
id=1215288	 "Step one: measure what kind of impact we get from persisting, say, six tabs. Step two: if it's non-trivial, replace the RemoteTabsTable interface with one similar to BrowserHistory \u2014 that is, specialized, with the remote tabs creation code the only thing left in the Table." 
id=1227154	 "Thanks for the report. Are you able to capture a screenshot from your device and attach it to this bug to demonstrate the problem yo re seeing?", I'm sure it's not a bug, because I'm able to reproduce something like it, and looks like it's because new suggestions are loaded while you finger didn't touch the screen", Saw this on an iPhone 4' 
id=1134757	 
id=1288121	 
id=1258044	 'Also: Deleting a folder shows an alert with "This folder isn\'t empty. / Are you sure you want to delete it and its contents?" Cancel / Delete.' 
id=1146423	 "We'll track fixing the animation" 
id=1148589	 
id=1152549	 
id=1217059	 "Also 2015-10-21 10:07:05.907 Client 20314:4036074 10:07:05.906 ERROR: >aqme> 300: Audio device 0x48: error 'who?' fetching sample rate, or sample rate is 0. Defaulting to 44100. immediately before.", And if I breakpoint on exceptions, we get the (red herring?) before all of this: * thread #23: tid = 0x3d95ea, 0x0000000107693c6b libc++abi.dylib`__cxa_throw, queue = 'CAListenerProxy', stop reason = breakpoint 1.1 * frame #0: 0x0000000107693c6b libc++abi.dylib`__cxa_throw frame #1: 0x000000010961495f CoreAudio`AudioObjectGetPropertyData + 391 frame #2: 0x000000010b32dbdf AudioToolbox`int HALProperty::get<unsigned int>(unsigned int, AudioObjectPropertyAddress const&, unsigned long, void const*, std::__1::vector<unsigned int, std::__1::allocator<unsigned int> >&) + 111 frame #3: 0x000000010b3276a3 AudioToolbox`AQMEIO_HAL::Scope::UpdateStreams() + 739 frame #4: 0x000000010b327386 AudioToolbox`AQMEIO_HAL::UpdateStreams() + 54 frame #5: 0x000000010b32be72 AudioToolbox`AQMEIO_HAL::HALListener_DeviceConfig(void*, unsigned int, CAListenerProxy::HALNotification const*)::$_3::operator()() const + 210 frame #6: 0x000000010b32629a AudioToolbox`AQMEIO_HAL::HALListener_DeviceConfig(void*, unsigned int, CAListenerProxy::HALNotification const*) + 90 frame #7: 0x000000010b32b92c AudioToolbox`___ZN15CAListenerProxy20DispatchNotificationEbPNS_8ListenerEPNS_12NotificationE_block_invoke + 76 frame #8: 0x0000000107777ef9 libdispatch.dylib`_dispatch_call_block_and_release + 12 frame #9: 0x000000010779849b libdispatch.dylib`_dispatch_client_callout + 8 frame #10: 0x000000010777e988 libdispatch.dylib`_dispatch_queue_drain + 2215 frame #11: 0x000000010777dea9 libdispatch.dylib`_dispatch_queue_invoke + 601 frame #12: 0x0000000107780af2 libdispatch.dylib`_dispatch_root_queue_drain + 1420 frame #13: 0x0000000107780561 libdispatch.dylib`_dispatch_worker_thread3 + 111 frame #14: 0x0000000107ac9a9d libsystem_pthread.dylib`_pthread_wqthread + 729 frame #15: 0x0000000107ac73dd libsystem_pthread.dylib`start_wqthread + 13", I can't reproduce on a device with a wired pair of headphones." 
id=1145587	 
id=1169888	 'Does this happen in Safari?', This, in fact, appears to happen, to some degree, on Safari.', Created ', Airbnb screenshot I saw this too.' 
id=1160640	 
id=1140493	 'Cc to', Cc to :dusek .. we are not blocking on this for v1, but we would take a patch.', (In reply to Stefan Arentz :st3fan from ', ) ', Currently it says either "Reader Mode" or "selected, Reader mode". I will think whether that is OK, or whether having more explicit labels is better. (btw., the proposed ', from ', changes the label from "Reader Mode" to the correct term "Reader View"). To sum it up, a patch itself is trivial, but the decision what is the correct label is less trivial :-) I will think about it.' 
id=1238902	 
id=1229706	 'Is this possible, or something not applicable on iOS?', We will discuss it but I don't think we are going to do this." 
id=1210111	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages." 
id=1144840	 
id=1196340	 
id=1176323	 
id=1267784	 
id=1258025	 
id=1237631	 'Why not just choose "Close Private Tabs (When leaving Private Browsing)" in Settings?', This feels like _good_ behavior. If you were doing something you don't want to be conspicuous, closed all your tabs by hand and quit the browser, then yo ll breath a sigh of relief when Firefox opens as if nothing were different about your last session, no? The opposite -- we open on the Private Browsing 'mask' screen, no tabs open -- makes you look shady. I doubt users will confuse the two (ours is way more obvious than the tiny purple mask on desktop)." 
id=1186573	 'v2?', Ya I think it would be something we can do in v2 - do we have a tracking flag for v2 potentials?', Dupe of ', :p', Let's mark this as 2.0+ and we'll re-triage everything in the 1.1 timeframe.", *** ', has been marked as a duplicate of this bug. ***', Please reset the 2.0+ flag.', tecgirl \u2013\xa0have you any designs for this yet?', Sure do! It's not spec'd yet since it was bumped down the priority list. ", Two widgets: Firefox \u25cf New Tab \u25cf New Private Tab (shows on lock screen) \u25cf if URL on clipboard Go to copied URL (only shows if phone is unlocked) Firefox Recent Bookmarks \u25cf Display last 5 bookmarks with favicon and title Does not require user to be signed in Has empty state (only shows if phone is unlocked)' 
id=1225259	 'PR submitted: ', In the course of doing this I noticed that OpenInFirefoxClient might be wrong. Note that we escape twice: firefoxURLString appendFormat:@"%@//open-url?url=%@", firefoxScheme, encodeByAddingPercentEscapes(urlString) ; NSURL *firefoxURL = NSURL URLWithString: firefoxURLString stringByAddingPercentEncodingWithAllowedCharacters: NSCharacterSet URLQueryAllowedCharacterSet ;', James, could you look at the open-in thing?', Does this also mean that we double decode in Firefox? That would be a bug we need to fix on our side then.', I've also been looking at Opener ", which is accepting contributions. ' 
id=1194563	 
id=1275318	 "I have closed the PR, I'm didn't have time to look at this recently due to a release, will take a look this week.", Do you still need to do things at your (Dashlane's iOS app's) end?", No, should not be a need, we've not had a problem with other 3rd party apps so far (Chrome, CaptainTrain for example). I'll just need to update 'isPasswordManagerActivityType' correctly.", Ok, Rew. Please let me know if there's anything I can do to help you land this PR.", Hey James, I'm running Firefox locally to see how the extension/password manager part works. It looks like the client it self cannot autofill the fields in a webview, and relies on the password manager to do the autofill. Is that correct? If so, we don't yet support webview autofill for 3rd party apps. For example, the Chrome app is requesting for the login/password from our extension and then the client itself is autofilling what is needed in the webview. If the Firefox client has the ability to take a login/password and fill the webview itself, then I'd love to see how we can get this working with Dashlane.", Hi Rew, We're shipping with the one-password-extension (", ) library. We're using that to prepare the JSON to be passed to Dashlane, and to fill the webview once Dashlane comes back. i.e. we're filling our own webview, using the one-password-extension library. All Dashlane needs to do is provide the login data back to us in the JSON format that one-password uses. As I understand it, that shouldn't be too dissimilar to what you are already doing.", Comment on ', ', PR: ', ', Clearing needinfo from Rew. Dependency now on Dashlane's iOS app." 
id=1228336	 
id=1314359	 'Question for product/UX: How is delete different from dismiss (', )?', If I look at the Desktop implementation and labeling, it says "Dismiss" "Delete from History" so I assume Dismiss is removing it from the New tab view but not from your history. I hope that helps.', (In reply to Barbara Bermes :barbara - NI please! from ', ) ', yes, this.' 
id=1300740	 
id=1238330	 "Let's take a look.", I have been unable to replicate this in 2.0(3)', I'm able to reproduce this issue every time I follow the steps from ", . I'm loading ", , tap on article, wait for five minutes then go back to the main page Result: The clock from top left is five minutes behind. Reloading the page will update the clock to the correct time. Device: iPhone 6 Plus (9.2.1) Build: 2.0(4)', Reported on the forums today ', This problem exists in Safari as well. Reproduced this in Safari on iOS 9.2 on my iPad Air. i) Open reddit.com, take note of content on the front page ii) Close the tab iii) Leave iPad idle for a while (overnight for me) iv) Open a new reddit.com (see new content), tap any newly submitted content v) Hit back, see content from yesterday We should file a radar on Apple.' 
id=1282092	 'This patch brings the L10N tests up to date with v5 and adds more accessibility identifiers and more screenshot tests.', Comment on ', ', PR ', :thumbsup:' 
id=1193398	 
id=1176154	 'Rather than sorting this out now, in ', I'm just doing this: #if MOZ_CHANNEL_DEBUG static let IsDebug = true #else static let IsDebug = false #endif", I think checking for DEBUG is better. Since it can be turned on for any of the channels if needed?', I have doubts about that -- if we conditionalize it on DEBUG (i.e., on for a debug build), you will lose your passwords when you flip between Debug and Release builds. What we want (for turning off login crypto, at least) is "== developer channel". As far as I can see (and this seems to be what Wes did when landing SQLCipher) is to use MOZ_CHANNEL_DEBUG, which is "not Nightly Aurora Release or Firefox". Wes, is my reasoning right?', AFAIK, yep. Maybe we should rename it.' 
id=1321850	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1217871	 "Having the screen on alone does kill battery -- I see this to some extent on my iPhone 6 using Feedly, Pocket, and Facebook. A 6s+ has an even bigger screen, so chews through even more battery. But let's see if we can get to the bottom of this. * Do you have Sync set up? Sync, if set up, will try to sync every fifteen minutes. That means your phone's radio has to wake up and enter high-power mode for a little while, which will have an effect. * Does this happen on other sites? If you read, say, Reddit all morning, do you see different results? My suspicion is trackers on that page that keep the JS engine running and occasionally hit the network. * Do you see similar behavior if you use Safari?", Would be worthwhile to enable Energy logging usage ', We can then import your data into the energy diagnostics instrument and filter on the fennec process', Strange part is that I wasn't seeing this about a week ago. I was actually really surprised when I got into the office and the battery was still around 85% while heavily using it on the subway when I initially got the 6s+. Not really sure why it changed so dramatically. ", Nope, Syn isn't currently setup. Just the plain vanilla browser with no bookmarks etc.. ", Not sure.. But I suspect you might be right.. Sky is a pretty bad website when it comes to tracking/ads. I'll try using several other websites today when I travel back home and see if I get the same results. ", I've only used Safari for the first 2-3 days before switching over to FX but I don't remember seeing anything like this. I'll try the same use case on Monday and see what happens. I'll try different websites with FX/Safari and report back some results mid next week. ", Awesome, thanks for the link :) I'll attach some logs once I have the data.", The subway is one of the most horrible environments for the phone's radio. It will constantly try to connect/reconnect to the mobile network, which causes a huge power drain. This happens on all platforms, from Android to Blackberry. I don't want to write this off too quickly and we should investigate, but I would rather do power monitoring in a well connected environment first to find out if we are doing something bad. Measuring in a known bad environment is not going to give us good results.", (In reply to Stefan Arentz :st3fan from ', ) ', Yeah, that's my suspicion -- that these pages are doing background requests which keep the radio alive and trying to connect to the network for the entire subway ride. There's not much we can do about that, I suspect, beyond unloading background tabs (which will give a terrible UX).", (In reply to Stefan Arentz :st3fan from ', ) ', Fair enough :) I'll attach some initial logs from a controlled environment using the energy logging mentioned in ", . In the meantime, I'll go through the same use cases that were suggested in ", : * try going through the same use case using Safari * try going through the same use case using FX but with a different website If I notice differences between the two browsers, I'll start adding some logs.", (In reply to Richard Newman :rnewman from ', ) ', One thing we can do is handle offline support better. I think when you currently flip your phone to Airplane Mode, we make it impossible to switch to tabs that you have previously loaded. I am not sure what happens, but often they immediately flip to the No Network error page. I know sometimes Safari evicts background tabs, and then it will be tough to read them offline. But I wonder if we do something that may trigger the error upon tab switching.', We can also profile with the Energy Usage tool in Instruments. I quickly did that when opening a bunch of tabs from skysports.com. I noticed some very heavy CPU usage (it is not a light site by any means) but it did calm down completely after everything had loaded. Towards close to zero energy usage. So i *think* idle/loaded tabs behave ok.', I recorded the energy usage for both FX 1 and Safari 2 while going through the same use case I mentioned in ', . * turned off wifi and used LTE * used each browser for about 20 minutes * opened a bunch of articles, read through some articles, browsed through the Sky Football website etc.. * also opened Ars Technica here and there and read through 2-3 articles From what I noticed while recording, it seems like both browsers used about the same amount of energy.. but I'm no expert at interpreting the data so I've linked them below. I'll record the energy usage while I'm untethered while I head home tonight and will attach the logs as well. 1 ", 2 ', may be related. That is most certainly a regression. It is more about long time energy usage than this specific bug though. Not duping. I would like to keep this one open too until we understand how to interpet the attached logs. (Thanks Kamil!)', Here are two more logs that I took while commuting into the office. The ones listed below resemble the environment that I was originally in when I observed ', happen. I did two passes, one with the network disabled 1 and one with the network enabled 2 . * left the office and started opening 10-20 articles that I wanted to read before I got into the subway * the network fluctuated between 3G/LTE/No Service * when I reached area's that did have a network available, I would open a few more articles 1 ", 2 ', Here's another large profile log that I captured while commuting 1 . This one has the network logging enabled as well. In this particular instance, the battery went from about 60% to 28% or so within an hour and a half. 1 " 
id=1223081	 
id=1144758	 '*** ', has been marked as a duplicate of this bug. ***', Onboarding should help (and this probably isn't going to move for v1 at this point)." 
id=1179877	 
id=1237612	 'I was looking around as to why we have SQLite/sqlcipher in the project still and trying to find ways to avoid building it each time and came across this bug. Looks like theres a new repo that combines the two projects into one: ', . Is it possible to pull down this using Carthage or do we have custom code in our sqlcipher integration that prevents us from doing so?', The reason I took SQLite.swift out ofcarthage was because it didn't build through Carthage due to sqlcipher issues. They were planning on solving those due to a combined library. If that has now been finished then we should integrate it through Carthage. When that is done, we need to create a new bug around removing SQLite.swift entirely. We should also test whether we still need to ship a second version of sqlcipher & whether we can remove the second.", I tried this again, but unfortunately there are still issues with the SQLiteCipher repository (', ). As soon as ', is merged, we should be good to go, but there's been little activity on it recently." 
id=1200268	 'This sounds great. +1' 
id=1261805	 "Thats a system dialog, so you can't hide it by changing its opacity. It might be possible to dismiss the dialog somehow when you enter the task switcher." 
id=1252550	 'Description is translated in ', but "what\'s new" and screenshots are not.' 
id=1131737	 
id=1164173	 'I would also like a description, especially because the user has no influence in naming the bookmarks. I could add a PR, when I know what you would like to see. If I compare the cells to the ones in the history, and would aim for consistency, I would add the description in a line below (smaller grey font).', NI'ing :tecgirl on this. I assume if we wanted to add the description, it would look similar to the history items?", Does Desktop and Android support holding a description in Bookmarks DB? If not, I wouldn't be too eager to add data to iOS that can't easily be sync'd across platforms. If we decide to do this, and we need to add support for it on Desktop and Android, we need to coordinate.", The user can\'t edit the description, it is derived from <meta name="description"> as mentioned by Aaron Train.', Yes. We -- and Sync -- support description, tags, keyword.', Can you explain where I have to save the bookmarks on my Mac Firefox browser to make it work? I tried multiple times now to synch them but nothing is showing up. And when they are synced, the can be found in a new tab, in bookmarks right? That's where I can only see cells with favicon and title", (In reply to alx91 from ', ) ', Yo ll need to be using Firefox for iOS built from ", ; 1.0.1 as available in New Zealand and Canada doesn\'t have bookmark sync. You\'ll need to sign in with the same Firefox Account as on your desktop. Then you\'ll see all of your desktop bookmarks in a folder called "Desktop Bookmarks" in the bookmarks UI (tap the star icon on the home screen).', The decision to leave descriptions from Bookmarks was intentional; if a user saves the page, they likely know what the title was (or what they were looking at), therefore they don't need a description. It also helps lessen any confusion between the Bookmarks and History panels. For comparison, Chrome and Safari follow this format.", FWIW, desktop doesn't show bookmark descriptions by default in either the list view or the focus view; you need to add a column, click an arrow, or open Properties. Desktop also doesn't search the description from the Awesomebar. Adding the data to the DB and syncing it is easy, but we don't really use it anywhere.", OK sync works with the current version on the repo. I understand Robin's point to just show the title so there is no confusion between Bookmarks and History. But shouldn't the User be able to edit the title at least? So instead of just having the option to delete a page by swiping left, we could add an edit button which just opens a popup to change the text. The title usually is descriptive and the user should know what he bookmarked, but there can be exceptions.", Here is an implementation that lets a user change the bookmark title. Safari also gives the option to edit a bookmarks title (and url, which I think is weird) after it was created (longpress on CollectionViewCell). What do you think? FYI, there are no test written yet and no localization. ', Could you please file a separate bug for that? Once filed and linked to a PR we can discuss both the what/when and how.', Created: ' 
id=1221254	 "I've seen something similar happen when on running Clear Private Data from the Settings where the selectedTab didn't match the new tab since we had not navigated to the BVC yet. Bit unclear as it was a little while ago but might be of help." 
id=1228091	 
id=1310071	 'Additional info: --------------------------------------- Safari - the gifs can be saved successfully Chrome - only the first frame is saved', See also, ', Perhaps the fix implemented there from a while back needs a little bit of adjustment?', Can be tested by pasting the image into an iMessage.', Check the Photo Gallery', Can we please have a concrete STR for this bug?', In iOS 10, the gallery still does not permit full viewing of GIF's (all frames), regardless of how they are saved to the photo roll (any app). To view saved GIFs on iOS 10 (this is silly) => Open the Photos app. => Open the camera roll album. => Tap the gif you would like to view. => Tap the Action button => Select 'Email Photo.' With GIFs saved in Safari, they are played with all frames viewed With GIFs saved in Firefox, only the first frame is viewed To reproduce, visit ", , tap any trending GIF, long press and save it to the photo album (after granting permission)' 
id=1173382	 
id=1123970	 'At the current time, it appears only global objects Firefox creates are: window.__firefox__, and the two global properties created by Readability.js: window.Readability and window.root.' 
id=1147066	 
id=1272259	 'Not tracking for now since we have no leads to make a fix. If you see this again, more specific steps would be helpful!' 
id=1162742	 
id=1184146	 'Created ', portrait.png', Open questions: * UX, any screams? * Wes, is this going to fuck us on favicon load? I seem to recall you saying we already take 500msec on this load; doubling the number of returned rows will also double the number of favicons.', I would prefer the grid be evenly distributed, filling according to viewport size and orientation.', What's the bug here? We should fill in the entire screen if there's enough entries. The fact that suggested sites are showing here tells me that you don't have enough to fill the screen? Do you want to change the arrangement of rows/columns if that happens? The query is slow for me with a large history db. I'm looking into ways to fix that. I don't expect upping the limit from 12 to 24 to have much impact though.", Let's punt this to 1.1 unless we can scope this down." 
id=1305800	 
id=1217850	 
id=1267330	 
id=1161373	 "Yeah, these APIs are from the old Mock ones. Note, they're also buggy. I have some changes in ", (waiting one week+ on a review...)' 
id=1158207	 'This should not be tracking. We disabled the backforward list UI and are moving it past v1, so this bug can move along with it.' 
id=1270978	 
id=1303742	 "I have to admit that I don't know if there are rules concerning removal of strings still used in release version... Also, better not to translate on master as this wouldn't happen.", (In reply to Delphine Leb\xe9del :delphine - use need info from ', ) ', Yes, in this case not translating master would hide that problem but in general it doesn't change much.", Delphine owns mobile, including iOS, so not sure why the needinfo for me. The rule is indeed to not remove strings from en-US if they're still shipping, in fact they haven't been removed from the l10n repository yet, they will be removed when localization for 6.0 starts. The problem is that yo re localizing against master, and we've warned you in several occasions that this could happen.", Do I understanding correctly that these strings somehow won't be removed for 6.0 localization?", If they're already removed from master, they should not be in 6.0, as far as I can understand their development cycle.", Then this problem seems general and will affect all locales in case of 5.x release after l10n drivers will "allow" 6.0 translations.' 
id=1228043	 'More documentation: "Receipt Validation Guide" ', File format description: ', The country code may not actually be part of this file?', The immediate need for this is not there anymore since we decided to show the China changes based on the users locale. I think this is still a good candidate also to optimize search engine selections so i don't want to close it just yet.", Just to confirm: the locale-based approach gives Chinese-language users the *choice* of Sync server, right? It doesn't force them to use the Chinese server?", (In reply to Richard Newman :rnewman from ', ) ', Correct. If the locale is zh_CN then a toggle will appear under the Sign In button to select the chinese sync servers. If you are logged in, that toggle will not show. Screenshot at ', Note that the button will only appear for zh_CN and is therefore not localized. So the english placeholders in that screenshot are not included in the final patch. It will all be zh_CN.' 
id=1156075	 "Given kar's support for shipping iOS v1 without being able to configure the set of synced datatypes, this becomes relatively more important. See also ", and ', .', After ', this will be due to one of two things: * A FatalError raised from ClientsSynchronizer. This is not common. * An EngineNotEnabledError raised from TabsSynchronizer.' 
id=1186013	 "We aren't looking at v1 for this, are we?", No. Maybe 1.1.', Robin do we have anything for this (mockups, strings) or will this slip to 2.0+?', Created ', openURLs-1.png Example 1, where the toast appears over the top sites panel.', Created ', openURLs-2.png Example 2, where the toast appears over a restored state.', The toast would persist until the user either taps the 'Go' button or engages with the viewport, where it would fade away after 2 seconds. UI spec to follow.", Comment on ', openURLs-1.png What if I want to type in an address or search?', Generally, a bit concerned with blocking such critical UI with this toast. What if it was at the bottom of the screen? Also, I\'ve seen some apps show it as the first row in the awesomebar results (so once I\'ve clicked on the URL bar, its #1 with a "From your clipboard" icon/label)... thoughts?', :darrin, I was hesitant to put it at the bottom because if you just actively copied a URL, you most likely would want to just tap Go when you open the app (or use the View Later extension!). We could also add it to the awesomebar results so you could retrieve after you have dismissed this. I'll update openURLs-2 to show you what it could look like above the nav bar.", Created ', openURLs-2.png', Landed strings in a28941a in case we get around to this by 1.1.', I propose adding a preference to disable this feature, just in case it annoys people. Me, I can't wait for it -- I was just about to file a bug suggesting it when I found this one. But I bet there are people who don't want the interruption, too.", Confirming placement will be above the nav bar (', .)', (In reply to Eric Shepherd :sheppy from ', ) ', A great suggestion, filed: ', Per contributor suggestion, let's update the string to 'Paste and Go' and allow the user to paste whatever is on their clipboard.", suggestion ref: ', Update update, string should be "Go to copied link" (to match what we\'re doing with the Today widget). Bryan, where are you at with this?', for sure! And, I've finished the custom view, just need to iron out the interaction kinks in the app" 
id=1252544	 
id=1244111	 "I tried to replicate this using 1000 artifically generated logins but wasn't able to reproduce this on the latest master branch (5.0). Couple of questions: 1. Do you notice any logins missing from the list? Logins that potentially could be missing are ones that don't have a http/https prefix. You can verify this by comparing the logins on desktop. 2. Are all of the logins' domains well-formed? I've seen this problem occur when not all of the logins would appear on iOS. Might be worth retesting this on the latest code.", I cannot reproduce on latest master branch (5.0) and release 3.0 (11) using iphone 6 with IOS 9.1 On desktop I have three logins with: "chrome://Firefox Accounts", "ftp.//ftp.softvision.ro" and "chrome://isread..."which are not listed in the logins list on IOS.' 
id=1324558	 "I vaguely remember talking about how we shouldn't expect to have the same data points between platforms but I can see us having value in compare apples w/ apples when looking at the sync data. Do you think this would be a requirement to get any valuable information from the Sync Ping?", For reference, iOS currently pokes the DB to get an idea of what could be happening: ', (In reply to Stephan Leroux :sleroux from ', ) ', In theory it would be perfect if the validation results were identical, but in practice I think that will be difficult. There might be some things we can consolidate though which probably is valuable. The desktop validator is at ', and the comments near the top of that file show what we record. From a quick look, we probably have finer-grained info that iOS might have, but they were decided based purely on "what inconsistencies are possible" rather than "what inconsistencies lead to a particular bad outcome" (which IIUC is where iOS is coming from) For example, I expect that what you record as "MissingStructure", in desktop might be a combination of "orphans", "multipleParents", "deletedParents", "duplicateChildren", "childrenOnNonFolder", "parentNotFolder", "clientMissing", "serverMissing", "serverDeleted" etc - however, I\'m not convinced iOS should try and replicate all of them. Indeed, once we do a little more analysis, I expect we will find that many of these cluster (eg, an "orphan" is probably associated with, say, "serverDeleted" or "serverMissing" etc). Given all that, I think that iOS should do the smallest necessary to expose its concept of "invalid", and we can allow our dashboards or other ad-hoc telemetry to try and group these into buckets based on that device submitted the ping. As a followup next year we can consider working with Android to come up with a set of validation issues that all platforms report consistently.', Note that it would be relatively straightforward to extend the set of validations on iOS \u2014 e.g., a query for children with multiple parents is very easy to express \u2014 and we will likely do so as part of repair, because we'd need to determine which records to fetch." 
id=1223460	 
id=1258801	 
id=1127042	 'General thoughts are that we could drop this for v1', Requirements: Provide options for filling in a supported form field with all applicable relevant content (data) User Stories: As a user, I want to limit the amount of typing I need to do on my mobile/tablet to make my experience quicker, easier and more accurate. As a user, I want to have an option of all relevant previously-used form data when I come across a similar form field in order to limit the amount of typing I need to do. Acceptance Criteria: Relevant form data derived from previously-entered form fields is available to the user when the same form field is encountered' 
id=1229027	 
id=1242105	 
id=1187318	 
id=1145817	 'I think this is fixable. Desktop Firefox needs the fix though. I think we have something in progress but nothing has landed yet.' 
id=1232837	 '- a teacher handing 20 iPads to each student with the same Wikipedia article in Reader View wants to disable the ability of the kids to switch the Reader View off.\r \r - a museum wants to show an article in Reader View next to an exhibit, disallowing the guests to turn the Reader View off\r \r - (I did not yet give it much thought, so there might very well be other scenarios; But Reader View is a clear example of one feature where Guided Access makes sense) ' 
id=1246890	 "I don't see anything in the code that will specify which login will be used when the page is loaded. This is, fortunately, an edge case. I don't think it should track." 
id=1168395	 'Track the individual peieces', There is some stuff missing for Swedish in the Settings: ', and the Start up guide: ', fyi //Swedish L10n' 
id=1136875	 
id=1267217	 "Even when the user is not signed in to a firefox account, the Desktop Bookmarks folder should be present as a child of the Mobile root folder.\r \r If the user is not signed in to a firefox account, selected the Desktop Bookmarks folder from the bookmarks panel should present them with a 'Sign in to Firefox Sync' screen that will allow them to sign in to their Firefox account, or create a Firefox account. " 
id=1212021	 "Wanted to put an update on this as I've been on/off trying to get something going here. Turns out inverting these two view controllers is like pulling the string on a sweater. There's a lot of implicit responsibilities that the BVC does on app startup that makes it difficult to just flip the two. For example, the BVC acts as a singleton that we send requests to for opening links, loading queued tabs and handling restoration. These cases rely on latching onto when the app starts to properly run (load queued tabs that were queued from view later, restoring previous tabs, crash reporter, etc). On top of this, some of the muddiness of how we're using the TabManagerDelegate comes into play. For example, the TabTrayController uses these methods for configuring adding/removing of cells from the collection view which breaks when tab restoration happens on startup. The more I try to poke the bear I realize it might make sense to think about a more serious refactor of Tab Tray/BVC. I feel like a lot of the complexity of state management in the BVC and the variety of callbacks we have seems needless but that could be my 20/20 hindsight talking. Anyways if anyone has additional thoughts on this or alternate strategies let me know!", Can we simplify the problem by pushing some stuff into the AppDelegate (or creating an intermediate object)? Stuff like loading the tab queue is *called* from AppDelegate, and the implementation is only in BVC because it needs access to profile.queue and the tabManager. If the set of open tabs and the profile move out of BVC, then so can queuing, and restoration, and\u2026, and\u2026.', I was able to move out the tab queue stuff out of the BVC pretty easily. After some more looking, the key to making everything make sense for the inversion is removing the selectedTab state from the tabManager. The current BVC works by always checking and invalidating this selectedTab property but when we move to the Tray->BVC model, the BVC's selectedTab becomes the tab that was pass to it - making a ton of the conditional statements simpler. We no longer need to map the singleton nature of the BVC to this selectedTab property which frees up the TabManager to be more concise in it's responsibility by focusing on adding/removing of tabs. I'm going to go down this path a bit and see if the forest clears up. WIP -> ", Un-assigning and de-prioritizing for now.' 
id=1297768	 'Filed radar: ' 
id=1128612	 "If possible then I would make it more formal than String:AnyObject (Why AnyObject? - can options be nil?) Every time we use AnyObject we bypass Swift's features to write really strict and predictable code. I'm not saying there are no use cases for AnyObject, but we should avoid it as much as possible I think. How about using an Enum with associated values? You could do something like: enum QueryOption { case IncludeFavicons(Bool) case SortKey(String) case FilterKey(String) } typealias QueryOptions = QueryOption " 
id=1206478	 'On my iPhone 6, the entirety of the content is displayed and scrolls fine. However I did see in console a memory pressure warning 2015-09-21 10:49:44.044 Client 649:565301 Received memory warning. 2015-09-21 10:49:44.052 Debug BrowserViewController.swift:109 didReceiveMemoryWarning() > BVC received memory warning Scrolling ways down and then tapping the status bar to scroll back up to the top caused some latency and responsiveness issues' 
id=1231054	 
id=1177428	 
id=1166810	 
id=1135177	 'This is not a target membership issue. What you see is a symptom of dependencies between code. It is normal and expected that multiple pieces of code that depends on eachother are part of the same target. If they were not then the target would not link. I also think it is perfectly normal that all the sources in Client are also part of ClientTests; the latter contains tests for the former. So of course there is a dependency on that code.', Sure, but I'd argue that ClientTests shouldn't be creating any dependencies on UI components since they aren't UI tests. When unit tests require you to import views and controllers, something in your dependency chain needs to be fixed. (In reply to Stefan Arentz :st3fan from ", ) ', Yeah, that's all I was trying to say :)" 
id=1197626	 'Created ', Screenshot.', Note that this is the same behaviour as Safari. This functionality is built into WKWebView and it appears that we cannot actually override it ourselves. See: ' 
id=1309253	 
id=1294195	 'Worth noting this only happens when the debugger is connected.' 
id=1223406	 'We currently work off a heavily modified version of Result so I am going to leave this in third party for now. We may want to consider creating a fork of the original repo, updating with our changes and carthageising this version at a later date.' 
id=1235168	 'One generates (and opens) a PDF of a document (e.g. contract, invoice, delivery note) in a company web information system (using Firefox for iOS) and then wants to print the document. ' 
id=1248807	 'Same issue was fixed in build 1303. See ', I reproduced the issue on iPad Pro (9.3.1) and Firefox 3.0 (11). If you open the share menu in landscape mode and then rotate, it will disappear and appear again if you rotate back to landscape mode. If you open it in portrait mode and rotate, it will appear misaligned to the left and then get back to the right position when you rotate back to portrait mode.' 
id=1194852	 'We ignore this in Top Sites now.' 
id=1145602	 
id=1246448	 
id=1232657	 
id=1311080	 
id=1257191	 'Worth sharing this with the Swift compiler team.', Mentioned it to Joe here: ', I think part of the investigation would be to distill this into a sample for them to check out.' 
id=1199701	 'Created ', ', ', Comment on ', ', ', LGTM' 
id=1329647	 "We're going to delay resolve this as the user can navigate to the page anyways - just not the reader mode version. It would be great if we could show a reader-mode version of the history item in the background version list. Maybe a special item. Any ideas :tecgirl?" 
id=1141715	 'Created ', iOS Simulator Screen Shot Mar 10, 2015, 2.39.44 PM.png', Are these the "alt" text?' 
id=1270939	 '(In reply to Stefan Arentz :st3fan from ', ) ', Page 6?' 
id=1173101	 
id=1161151	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1109786	 'At some point we ought to split this bug up (and ', , too) -- they\'re so coarse-grained that they can\'t possibly be achieved in a single release. I\'ll be filing additional dependencies of this bug\'s dependencies to track individual features, such as "history sync". Each of those are certain to come with storage changes and other companion bugs.' 
id=1243811	 
id=1210149	 
id=1278470	 'This sounds like ', .', (In reply to Aaron Train :aaronmt from ', ) ', It's a different issue from that one. Predictive typing just adds an extra letter of the first word you type." 
id=1281758	 "I don't think we should or can chase the long-tail of these bugs. If you opt in to break the web by hiding images you are doing so at your own risk. I dislike how we prominently display this web breaking feature in our toolbar menu instead of an advanced setting.", Agreed. :dxue can you look at this please?', (In reply to James Hugman :jhugman @jhugman from ', ) ', I totally agree with you to move the feature from toolbar menu to an advanced setting, but I hope the browser can provide an extra option to users that they can choose to display this feature or not in toolbar menu. Because in China, the data for mobile is limited, users are always to save their data charges with no image mode. I think it is a frequently used feature for some people, so it will be more convenient for them in toolbar menu. The most commonly user case is turn on the feature in 3G/4G, and turn off in WiFi. There is another reason that most of local browsers in China put the feature on toolbar menu.' 
id=1254714	 ":bnicholson - The 0.15 requirement is there for building for release rather than necessarily building for development. In 0.11 carthage doesn't copy the frameworks in a way that allows recent app store code signing to work properly, and so submitting for beta or release doesn't work. If all you intend to do is build for development, 0.11 is fine. carthage.sh is separate as it's called from both update.sh and checkout.sh" 
id=1145228	 "I've been working on this. Can I officially take the bug?", Absolutely!', :BigxMac Where are we at with this? I was just filing a fresh bug for it. Slightly updated mock: ', Unassigning due to inactivity. BigxMac, feel free to take again if yo re working on it.", Created ', syncCaret.zip', in da process of a fix!', Created ', ', PR - make bnicholz fix the rest // my parting gift TODOs: 1. make the caret animation and placement UI-approved 2. make sure the offset doesn't screw up where the user is on the tabs panel (aka when a row is collapsed, the tableView doesn't scroll down 16 rows or whatever). 3. It crashes when you press the caret after the initial pull to refresh; after that, it doesn't crash anymore.", Comment on ', ', PR - make bnicholz fix the rest // my parting gift Two nits: 1) The caret is vertically-bottom aligned. Please vertically-center align it. 2) Add a bottom border to the headers so when they are collapsed they don't bleed together. The border we use on the History panel headers (Today, Yesterday, etc.) for time would be perfect.", Comment on ', ', PR - make bnicholz fix the rest // my parting gift Removing review flag since there's a good amount of work left outlined in ", and ', .', PR became dormant: ', Closed for now but can be reopened if we plan on coming back to this feature.' 
id=1263102	 
id=1219867	 'Brian, do you have any example of this in use? I\'m curious because I don\'t see any options in Chrome\'s Settings, so if the tag is there, it\'s obviously dormant (why?). I could see exploring this for Lightweight themes, however the current work for themes on iOS places imagery behind the URLbar rather than filling it. That doesn\'t stop us from giving this a shot, since it definitely supports our customization story. I\'ve floated the idea of having a color picker for Lightweight themes, with the idea of tinting the URLbar, so this may work. Please clarify what you mean by "page\'s dominant color for favicons" \u2014 I\'m not sure I understand the use case there.', Created ', Chrome on Android (In reply to Robin Andersen :tecgirl from ', ) ', Interesting -- I see this work on Android, but maybe Chrome on iOS doesn't support it yet for some reason. One example is www.weather.com (screenshot attached). ", On Android, we use the "dominant color" in places where we want to have a background color for favicons (e.g., top sites). Maybe we don\'t have any need for this on iOS since we use blur instead.', Created ', Aqua theme-color tag Just experimenting with the theme-color meta tag briefly, just to see how it might look if it was implemented. This is what the preliminary appearance looks for a sample website. Obviously, the way the colour is used would have to be tweaked, and more of the interface styled using the colour too, but it goes some way to showing how it could behave.' 
id=1168106	 
id=1194714	 '"URL bar is unresponsive." What does that mean?', Created ', IMG_2402.PNG This screenshot is a good representation. I tap 'backspace' or any other letter on the keyboard and nothing else happens. I have to cancel the URL or do something else in the browser so the whole browser isn't locked up - just typing in the URL bar", (In reply to Karen Rudnitski :kar from ', ) ', This looks like a problem with that Swype keyboard.', FWIW, I wasn't swiping - just tapping. But yes, the keyboard is enabled (how else would I comment on facebook posts?!)", Just confirmed this is a Swype specific issue. I am able to reproduce this issue with the Swype keyboard enabled and not with the standard keyboard. This does not immediately mean that it is a Swype keyboard problem, we may be doing something special in our location bar textfield that does not play well with custom keyboards. Needs more research.', Swype was a featured app and has 400+ reviews, so this isn't a tiny user base.", I remember it making mainstream headlines when Swype was finally able to support i-Devices! And I, for one, can't live without it :/", I have narrowed this down a little bit: When pressing the backward delete button on the Swype keyboard, AutoCompleteTextField.deleteBackward() is not being called.', Interesting to note is that Safari also has problems with the Swype keyboard. It does deletes characters correctly but it fails to update the blue selection that is shown over the suggested part.', There are some hints at ', On iOS9 things do work a little better, although the Swype keyboard is broken in other ways.', When using Swiftkey and Fleksy keyboards, the autocomplete suggestions are not dismissed when When pressing the backward delete button. ', Please check the video and see if this is the same issue as the one initially reported in this bug.', Note - this works fine in Safari but not in Firefox (using Swype).', I believe some custom keyboards handle text changes of the input target field. For Swype, I guess they replace the inputting word with their suggestion time to time. They hold the inputting word until the word is "committed" or the app changes the text field\'s text (especially, imagine some messaging app\'s "Send" button). Other example, Japanese custom keyboards have their intermediate input state (which is consisted some inputted Hiragana characters) until resulting Kanji word is commited. Those custom keyboards reset their holding intermediate state by app\'s text change. By this, I guess Swype loses inputting character (this bug), and Japanese custom keyboards lose Hiragana inputting state (users can\'t input Kanji words, which I experience). Avoiding text change of inputting text field must fix this. (For example, use an overwrapped UILabel to show uninputted suggestion by Firefox and not change the text itself.)', Thank you for the useful input!', I have added some feedback to the AutocompletingTextfield. This is what I found out: Swype: s l backspace backspace MOO AutocompleteTextField.SELtextDidChange (completionActive=false) Moo AutocompleteTextField.textFieldDidBeginEditing MOO AutocompleteTextField.highlightAll Moo AutocompleteTextField.textField(, shouldChangeCharactersInRange: (0,0) replacementString: s MOO AutocompleteTextField.SELtextDidChange (completionActive=false) MOO AutocompleteTextField.SELtextDidChange (completionActive=true) Moo AutocompleteTextField.deleteBackward MOO AutocompleteTextField.removeCompletion MOO AutocompleteTextField.SELtextDidChange (completionActive=false) iOS Built-in Keyboard s l backspace backspace backspace MOO AutocompleteTextField.SELtextDidChange (completionActive=false) Moo AutocompleteTextField.textFieldDidBeginEditing MOO AutocompleteTextField.highlightAll Moo AutocompleteTextField.textField(, shouldChangeCharactersInRange: (0,0) replacementString: s MOO AutocompleteTextField.SELtextDidChange (completionActive=false) Moo AutocompleteTextField.textField(, shouldChangeCharactersInRange: (17,0) replacementString: l MOO AutocompleteTextField.removeCompletion MOO AutocompleteTextField.SELtextDidChange (completionActive=false) Moo AutocompleteTextField.textField(, shouldChangeCharactersInRange: (14,1) replacementString: MOO AutocompleteTextField.removeCompletion Moo AutocompleteTextField.textField(, shouldChangeCharactersInRange: (1,1) replacementString: Moo AutocompleteTextField.deleteBackward MOO AutocompleteTextField.removeCompletion MOO AutocompleteTextField.SELtextDidChange (completionActive=false) MOO AutocompleteTextField.removeCompletion Moo AutocompleteTextField.textField(, shouldChangeCharactersInRange: (0,1) replacementString: Moo AutocompleteTextField.deleteBackward MOO AutocompleteTextField.removeCompletion MOO AutocompleteTextField.SELtextDidChange (completionActive=false)' 
id=1226242	 "Stephan hooked Breakpad into Fennec for iOS, and Ted is our Breakpad expert, adding both of them here. Stephan, any idea what's up there? Is Breakpad not working right in our iOS builds?", Is it possible that reports are simply not being processed or shown? Is there any raw data for submitted reports on crash-stats Kairo?', So I think I see what the issue is here. Now that I have a crash I can reproduce on the App Store build I can see what's going on. 1. When the App Store app crashes, the 'Send Crash' prompt is never shown to the user. Since crash reporting is off by default, there's a very good chance no one has manually turned it on in the settings page which is why we're not seeing any crashes in the app. 2. After turning on crash reporting manually, I was able to crash the app and verify a request was sent to the crash-stats server. It created a new crash as expected: ", . However, when I do a query for all crashes in FenneciOS that are marked with the 'release' release channel, nothing shows up.", (In reply to Aaron Train :aaronmt from ', ) ', No, the search shows all submitted crashes that we could process (the only issue could be a systemic corruption of the data that makes the processor fall over, but I would have heard about that from the Socorro team, I think). (In reply to Stephan Leroux :sleroux from ', ) ', Why is it off by default? Sending crashes is on by default on all our other products (with a prompt on every crash for desktop/Android*, and on the first crash for FxOS). *subject to change based on discussions going on right now', I know before we had to make it opt-in because we didn't have prompt when a crash occurred but now that we have the prompt I feel like that can change to being opt-out.", (In reply to Stephan Leroux :sleroux from ', ) ', That would be great, would match our other products.', Just to add some more detail, the report crash dialog is showing but only in cases where there are tabs open with history. Filed ', to track a fix for that.', Also ', for the opt-in issue.' 
id=1178585	 
id=1256474	 
id=1314382	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1328579	 'Created ', Sync Panel.PNG', Created ', "Sign in" page.PNG', Created ', "Create a Firefox Account" Page.PNG', // TODO UX Right now the flow for sign in and create account is the same ', let fxaOptions = FxALaunchParams(view: "signup", email: nil, access_code: nil) Not sure if one can pass a create param for the deep link?' 
id=1264911	 
id=1282790	 'The issue with qwant is that their search input form has no `action` attribute (which is not conforming to the standard).', This doesn't fix the issue (we'd like Qwant to be usable as a 3rd-party search engine), but it at least ensures the button to add a search engine will only be shown when it can find actually construct a query URL for the search engine: " 
id=1210130	 'See also ', .' 
id=1159270	 
id=1288160	 
id=1258048	 
id=1223133	 
id=1139038	 'For v1 on iOS, we\'re going to sync the intersection of {engines enabled on the server} and {engines that Firefox for iOS can sync}. We are going to allow new account creation, but we may not allow to customize the list of synced engines. We may need a server-side ticket to optionally suppress the "customize sync" checkbox during account creation for iOS. kar signed off on this verbally in today\'s iOS stand-up.', Confirmed!', *** ', has been marked as a duplicate of this bug. ***' 
id=1250530	 
id=1144202	 'SVN repo directory has been created. You should be able to see son in the dashboard soon: ', ' 
id=1281461	 "Version 5.0 (12): Steps to reproduce: 1. Open Firefox -> Menu 2. Swipe left the menu to reach the last slide. Expected results: - When the focus is on the second slide, first page menu dot is light grey and the second is dark grey. Actual results: - Page dots menu don't update correctly: the first dot is dark grey and the second is light grey, even though the focus is on the second slide.", Created ', Cljy1p-WQAAvy9N.jpg:large.jpeg', I can't reproduce on master (e8f885). I launched Firefox, visited Twitter.com, opened the menu and swiped left and I see the correct indicator dots." 
id=1295351	 "A quick win here until we have push on iOS would be to do only the sending part: Send a request to fxa/account/devices/notify after syncing the clients collection if we wrote in another client's record." 
id=1271802	 
id=1169909	 'Is this the same as ', ?', No, what happens now is that sometimes, scrolling stalls for a while, as if there were a very long GC pause. That said, the urlbar disappearing/reappearing cycle is more what I filed this bug for.', (', still exists, but is a separate problem)' 
id=1172526	 ' has strings.' 
id=1151451	 "Wes, there is not much I can do about this in the Share extension. What do you think of this bug? Is there any way we can handle this in the bookmarks panel? I guess we should at least show a placeholder icon if we were not able to previously grab a favicon? I'm moving this to the Favicons component.", Hmm... When we add a favicon, I guess we could also try to link it to any bookmarks of the same url. i.e. we'd get it the first time you loaded the page. Alternatively, I do have some code lying around that will pull the page using libxml and try to parse out a favicon from that...", I split this up into ', and ', . Morphing this to the bigger project of fetching these if they don't exist. Note we already DO lookup a favicon in history when you add a bookmark. This would be about loading the page and getting the favicon if that fails.", Careful. Remember that Sync will be adding hundreds of bookmarks and thousands of history items in one go, then periodically adding large chunks of your activity on other devices. Quite apart from the perf/bandwidth insanity of fetching all of those pages just to get the icons, this storm of activity would leak a bunch of (potentially sensitive) saved URLs from your past onto your current network. I'd be happy to see us punt this until we decide to implement a batch favicon service \u2014 which can be as simple as sending up a bundle of URL hashes over HTTPS, and getting back a collection of icons, backed by shared deduping storage. (At scale, of course.)" 
id=1243411	 'You go into settings, tap on "Send Anonymous Usage Data" or the "More Info..." link (see Step_1.jpg) and it gives you a broken link image (see Step_2.jpg) ', Hey Kristjan, Please describe the steps needed to reproduce this error and add any necessary images as attachments to this bug. Thanks, Jeff', Created ', step_1.JPG You go into settings, tap on "Send Anonymous Usage Data" or the "More Info..." link (see pict)', Created ', Step_2.PNG This is the result', This happens for me too.' 
id=1210113	 
id=1258032	 
id=1168690	 'This is part of the state machine completeness work.' 
id=1250511	 'Created ', simple mockup', See also Private Browsing tabs' 
id=1143956	 'We *should* also be able to distinguish: --- In ', additional optional fields were added: os string: an OS name, most likely one of \u201cDarwin\u201d (Mac OS X), \u201cWINNT\u201d (Windows), \u201cAndroid\u201d, or \u201ciOS\u201d. appPackage string: an unambiguous identifier for the client application. For Android, this is the package (e.g., org.mozilla.firefox_beta). For desktop this is the value of Services.appinfo.ID. application string: a human-readable application name, such as \u201cNightly\u201d or \u201cFirefox\u201d. formfactor string: a value such as \u201cphone\u201d, \u201clargetablet\u201d, \u201csmalltablet\u201d, \u201cdesktop\u201d, \u201claptop\u201d, \u201ctv\u201d. device string: a description of the hardware that this client uses. Currently only supported by Android; returns values like \u201cHTC One\u201d. If these fields are missing, clients are expected to fall back to behaviors that do not depend on the missing data. --- That is: Windows/Mac/Android/iOS, release channel, and (for Android and iOS), tablet/phone/etc. Fall back to generic mobile versus laptop/desktop.', This just got a little more complicated, then: we want to expose: * form factor (mobile/desktop, phone/largetablet/smalltablet, desktop/laptop, tv) * Firefox channel (Release, Beta, ...) * Possibly OS (Android, Windows, Mac, Linux) That's a lot to display in an icon! tecgirl, can you make a call on what we display in v1 and prepare the assets? I would tend to form factor first, then some reflection in the form factor icon of the OS (that is, can Apple phones look different than Android phones, etc).", I would probably ignore the release channel altogether, and just emphasize OS and form factor.', Created ', syncedDevices.zip device assets attached.', tecgirl: I\'m going to land these, but I think the "desktop" set is actually "laptop", and we probably still want "desktop". Otherwise, looks good!', yeah I lumped laptop and desktop together. can make a quick ambiguous tower.', New book title: Robin Andersen and the Ambiguous Tower.', Created ', desktop-laptop.zip I made a tower, didn't care for it\u2013sorry :rnewman the band will have to wait. Made an ambiguous flatscreen desktop icon instead. Changed 'desktop.png' to 'laptop.png'." 
id=1216976	 
id=1283210	 '* When going back, we call restoreSpoofedUserAgentIfRequired 1 , which pulls the User-Agent HTTP header from the request we\'re using to go back. * For most sites, WKWebView (correctly!) remembers the UA used to load the page when going back, and the User-Agent field will be "" unless that page was loaded with RDS. * For some inexplicable reason, the Facebook/Twitter pairing causes `newRequest.valueForHTTPHeaderField("User-Agent")` at 1 to be set to the desktop UA when going back to Facebook. Seems like an iOS bug; it doesn\'t make sense that the UA header from one site would be carried over to a separate request. This bug seems to be specific to facebook.com/twitter.com. When switching either of these sites out in the STR above, the bug doesn\'t happen. 1 ', 2 ' 
id=1223985	 "The obvious fix for this is to put it in BVC\u2026 but that means we won't load queued tabs until you show the home panels. Perhaps that's OK?", Created ', ', Link to Github pull-request: ', With the addition of NSUserActivity handling for the Today Widget/3D Touch links, the existing patch for this won't work correctly. Closing PR for now as it's become dormant. PR Link: " 
id=1295005	 'Environment: iPhone 6S Plus, running iOS Version 9.3.4', Tested for this problem this on Firefox for IOS 5.1(3) beta running IOS 9.3.5. This problem did not occur. Firefox offered to save my Seneca email account login, successfully saved it when I accepted, and I was able to use those saved credentials to login to my account after closing and reopening the web browser.' 
id=1236545	 'Will be resolved as part of ' 
id=1314363	 "I'm unclear what 'save for later' means in the context of AS/Highlights. Currently we support two ways of persisting data that is used by AS: 1. Saving history as user navigates between pages 2. When users add a bookmark Highlights are generated algorithmically so if we wanted to 'save' a highlight I'm not sure where we would put it?", I talked to bbell about this. This is talking about pinning an item to the highlights or a reminder for a specific highlight. Something like (remind me of this highlight next week). Bryan thinks this is not a top priority for V1. So what should happen to this user story?', I made it a P3 for now, and looks like its the same with the breakdown bug, just so we don't lose them." 
id=1316346	 
id=1214964	 'Heh, I was just about to file this after I dug out some cocktail recipes this evening. \\o/', The reason this happens is that when we return to the home panel, we re-create the whole thing from scratch, therefore losing any state that the bookmark panel had when we navigated away. We can remember the selected bookmark folder when we navigate through by adding it as an extra fragment after the selected panel number in the about:home url, but then when we restore, we restore only that folder and it's subfolder, not any of it's parents as there is no way currently to find the parent of a given folder inside the bookmark model. There are 2 solutions that I can see. 1. We remember not just the current folder, but also all the parents for the folder inside the url. Then we can create a new BookmarkPanel for each folder and add to the viewControllers array inside the UINavigationController creating the history. 2. We add a way of navigating back up the folder structure from a given folder inside the BookmarkModel. We can then construct a similar viewController array to push onto the navigation controller stack. I'm going to try 1 as it doesn't involve touching existing bookmarking code, even though it feels like the hackier solution. I'd like to look at doing 2 in the longer run, but it feels far too risky this close to RC.", Created ', ', Pull request', Comment on ', ', Pull request Looks good to me', Robin found some gaps, and Emily is on PTO tomorrow, so I'm going to finish this up.", Two cases that don't work correctly: * Returning to the Bookmarks view from a page doesn't hide the bottom nav bar. * Multiple tab usage is totally borked: I've managed to get Desktop Bookmarks to not respond after switching to the History tab, to get an automatic switch to the folder open in another tab from the simulator getting focus, and Stefan has seen Back take you to a previous page in another tab, rather than back to the hierarchy.", Also just found another issue: I was navigating between bookmark page and the bookmarks panel and got the app to crash here: ', Think we just need to throw that upon block onto the main queue.', UX Nit: After resolving the crash with uponQueue(mainThread..), there's a flicker when navigating back from a page to the bookmarks panel when the panel was a subfolder. The root bookmarks panel view appears first for a second before the subfolder panel shows. I think this is being caused by the delay of showing the UINavigationController with it's rootViewController right away and then waiting for the DB operation to fetch the folder hierarchy to determine which panel we should show next. I'm going to push up the crash fix commit up for now though.", Got another crash: I was going back and forth again and got force unwrap exception occurring here: ', It occurred when trying to trying to grab a bookmark from the subscript getter here: ', I don't know if this is specific to this bug/branch in particular though. :rnewman, is this bug more related bookmark sync or maybe the timing of it all?", The only things we return from the DB are bookmarks and folders (check the factories, which are guarded by asserts), so that force-unwrap should be safe so long as the index is in-range. My suspicion is that the UI yo re tapping on is providing the index, but the cursor is from a different bookmark list, and so yo re getting a nil out of the subscript, which we're then force-unwrapping.", This is a giant barrel of monkeys wielding screwdrivers, so let's punt this to 1.2 and ship what we have.", I don't remember why I assigned myself this. Maybe in hopes of the BVC refactor this would be resolved? In any case this seems like a +." 
id=1286394	 'Do we have a working default fallback? Would this fail to draw on a tile on the revised homescreen panel?', If we wanted to render an SVG there are native iOS solutions we can investigate such as ', . We may need to revisit this in the context of the Activity Stream work as we'll be pulling in richer content such as SVGs, GIFs, Videos, etc." 
id=1223095	 
id=1218233	 '(In reply to Richard Newman :rnewman from ', ) ', Not exactly since the bug summary says "auto-fill" and we don\'t auto-fill in private windows, only autocomplete. It seems like you may be using autocomplete and auto-fill interchangeably though we consider them separate things in the password manager. AFAIK, FxiOS hasn\'t implemented any login selection UI regardless of whether in a private context or not. ', Nit: I believe we only offer auto-fill, not autocomplete currently. ', This will leak your identity to the webpage in a private context so I don't think this is a good idea. ", If we can do this in a way that the webpage doesn\'t see then that would be great e.g. as a toolbar above the keyboard. iOS Safari adds a "Autofill password" entry on that toolbar (beside the < > for field navigation (like Shift-Tab + Tab) IIRC and if there are multiple we could probably pop up a widget for the user to choose the desired one.', (In reply to Matthew N. :MattN from ', ) ', Yeah, my terminology is imprecise. Thanks for the clarification; I've tweaked the summary to better express what I mean.", Presumably the needinfo is "how important do you feel this is?". I\'d aim for 1.3! PB mode is pretty hamstrung without it, and this shouldn\'t be super difficult to do, but I think much of our 1.2 work will be on pure reliability.', Sorry - should have clarified. We were discussing what the difference between auto-fill/auto-complete is and determining what the correct way of resolving this is. I agree with having it in 1.2 if it's reliable/low risk.", ni to Maria to file a card and link this up to 2.0 passwords stuff.', Created Aha card and linked to this bug: FIOS-219 - Make Logins available in private browsing mode', The following requirement (from security team) should be included as part of this bug fix: * No password filling on HTTP sites', Fixing this bug as: * offer logins in private browsing using the same mechanism as non-private browsing. * do not offer logins in either private browsing or non-private browsing for http pages * do not offer to save new logins or changed logins in private browsing. Current auto-fill/auto-complete: * on load and on blur events of the username field, the password is filled. This against the advice in ', Created ', ', Pull request', (In reply to James Hugman :jhugman @jhugman from ', ) ', We don't want to do this until we have autocomplete and manual fill. Can we shift this logic into a separate PR for ", ? (And file bugs for those things?)' 
id=1291937	 "Hmm we shouldn't be calling reloadData each time the cell gets moved. We're not changing the underlying ordering until we've committed the change by placing the cell down. I'm always down for fixing animation bugs so let me know if you want any help debugging this.", I couldn't see any placed that reloadData() would be being called \u2014\xa0it just looked similar to the problems with top tab dragging we were getting when reloadData() was being called while dragging. I haven't looked into it yet." 
id=1188419	 'We should also see if the protocol supports backoff indicators (e.g., 503 + Retry After), and make sure the client respects them.' 
id=1200386	 
id=1148015	 
id=1225174	 
id=1280461	 
id=1206997	 
id=1183277	 
id=1167352	 'I should probably clarify here. What I saw was Login button not being as responsive as I expected. I believe what happened was the keyboard was engaged while hiding a "save this password" prompt at the bottom of the page. I navigated away to a different tab. When I came back, login had processed and "save password" was still open at the bottom of that page. I\'m not sure if the save password confirmation actually caused a lag, or if I was just unable to see that a call to action was on the page. Might it be possible to put "save password" at the top of the page? Photos of flow coming next. Christopher', Created ', LoginButtonAppearsNonResponsiveButPromptHidden.PNG First step, user visits a page they haven\'t entered yet to input a new login credential. Crucial element here, the keyboard is covering a "Save this Password" prompt at the bottom of the page. Is this the case? Can the prompt be above the keyboard as an interstitial step?', Created ', SavePasswordPromptPersistingLater.PNG After suspecting login failure and navigating to a new tab, I returned to the previous tab. Prompt to save password that was hidden in the first step is now available to me.', I'd be really surprised if this dialog was blocking anything. Usually, the keyboard will go away when you submit a form and this becomes visible.", Created ', PossibleBackgroundCauseOfLoginStall.png I believe the cause of the issue in first attachment is this. There was actually a hidden save password prompt beneath the keyboard in the first image. If the user clicks "Done" on the keyboard before clicking "Log In" they should be able to see this. However, because Log In is available above the keyboard already, a user will typically click directly on that, missing the save password prompt. I\'m not sure if this can be changed, or if we can do the save password prompt in a different way.', (In reply to Wesley Johnston (:wesj) from ', ) ', The login wasn't blocked per se. It was happening in the background. First time login on a new device sometimes takes longer than a repeat login. (As the service wants to validate the source of the login if on an unknown device.) Because the progress bar in Fennec didn't show anything happening for a long time, my user error was just to presume that the button click wasn't working. This probably isn't a mainstream use case on iPhones to use browsers to log into sites that also offer native apps. So I'm not sure many people will notice this.", I think this is probably related to showing feedback faster on taps: ', but there's also a potential bug here about the keyboard. I'll file that..." 
id=1255449	 
id=1158638	 'No longer sure it is that a good idea, as the URL would end up being too verbose with all the slashes and hyphens and periods that a normal user does not care about (and if they do, they will spell it using Characters rotor), and would make it less comprehensible (URLs usually do contain user-comprehensible words like article title words). Also in English (US), VoiceOver reads "period" instead of "dot" (in Czech, it reads the correct term btw.). Maybe make punctuation spoken only for the host part of the URL (the domain) and not the path part. Still leaving it open though, to have a sleep or two on this.' 
id=1160786	 '<rdar://problem/20940938>: "WKWebView does not pass accessibilityPerformMagicTap up the responder chain"' 
id=1204479	 
id=1145315	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1267670	 'Created ', iOS-menu.gif .gif to add to the Firefox for iOS Release Notes' 
id=1228744	 
id=1190847	 'Adding items to the reading list is definitely too cumbersome atm. Since the hamburger menu now exists, I suppose the function should go there alongside "Add Bookmark".' 
id=1288094	 'Have you tried using the "Request Desktop Site" option in the menu?', Oh wait, this is on iPhone? Wrong component then.', Yes, any desktop or laptop with a standard size display will get the maximum webpage layout provided by the host server. However, I believe this override should be a configuration parameter regardless of the device. It could be some large screen users might want to decrease the display size to the mobile size for convenience. Here is the test I performed. I installed FF on iPhone and brought up usatoday.com. I scrolled to the bottom of the their webpage and selected "full site." I had mirroring turned on and connected to an Apple TV box which was connected to a large HDTV. I was able to display "almost" the same full screen that I get on my 1600 x 960 laptop screen. (Maybe a few pixels of height less) This is what I want for all webpages even those that don\'t provide their largest webpage rendering. This test also worked for Safari. There are already generic "Air Servers" for laptops available so that iPhones screens can be displayed to computer screens directly from Apple AirPlay. Though the usatoday.com page layout was the same as the FF laptop interface it was still restricted due to the mobile format of the page layout. If FF would override the mobile setting page when first launched mirroring should give me the exact same screen that I get on the larger screen. Laptops and desktops are becoming smartphone cradles. I also intend to backfeed my latptop keyboard as a bluetooth keyboard that can be connected to the iPhone. Why you ask? So I can perform all of my Internet interactions through my iPhone but still view them on a larger screen and keyboard. This paradigm shift eliminates the need for tethering by making the smartphone the Internet provider and browser but not the only display. Just like have a computer with multiple displays. This should be a high priority feature to implement.', Stefan, can you make sense of the feature request ask here?', Regarding ', , this is exactly what I am requesting (almost). Safari already has a built in option that will redirect to the web host and request the full screen webpage. (as stated in ', ) However, I would am requesting that a full page display apply to all pages that would be accessed by changing a FF preference. You need to look at Safari and their full size webpage feature.' 
id=1313100	 
id=1240961	 
id=1243019	 "Have been directed here from the Support Forum to post a report re the Firefox iOS application's Bookmarks frustrations ... Apologies if I lack the technical expertise necessary ... It's great to have Firefox (v2.1) on iPad and Sync it with Firefox on my Desktop PC, but one really frustrating thing is the total inability to edit Bookmarks within the iOS App. Rename, edit the URL, sort within a folder or delete. This can only be done in the desktop program. There also appears to be no way to delete a Bookmark which I added using the iOS App and now just won't go away how ever many times I sync with my Desktop, despite it having been deleted from the Desktop Bookmarks. This is a major frustration. Quicker access to the bookmarks would also be appreciated, with just one tap, instead of four!", Created ', ', ', Comment on ', ', ', Left feedback on the PR!', Created ', ', ', Comment on ', ', ', Minor comments about pluralization/values.', Comment on ', ', ', Merging in strings PR for v5.0 cut.', Strings: master 06f5d565fc1d9aea22cf7ecb846fd2369fed1441', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', ', Clearing review flag for now.', I believe we were holding this until bookmarking Sync is done. Seeing as how this is requested time and time again from users, we should start to evaluate tracking.' 
id=1291462	 
id=1143816	 
id=1266236	 
id=1317542	 
id=1135980	 'Dupe of ', (domain auto-completion, like in android)' 
id=1198418	 'Perhaps most obviously: * Before form-filling passwords.', (In reply to Richard Newman :rnewman from ', ) ', ^ That was my first thought when Aaron mentioned it in #mobile. I can't see a benefit from general browser access. Private Browsing, certainly.", + Logins management', Created ', TouchIDPasscode.png Touch ID & Passcode flow for Logins and Private Browsing instances.', :tecgirl/:mpopova, would it make sense to create a separate AHA card for this? It's related to both private browsing and password management but I see it as a separate thing.", Yes, this needs its own Aha! card. A card for Master Password exists (', ) but this is beyond that. I don't have the permissions so I'll leave it up to Maria.", Created ', ', Link to Github pull-request: ', Oops - realized this is attached to the meta bug not the strings bug. Updating.', I notice in the mocks that we have a section that allows the user to configure areas of the app where Touch ID can be used. How does this configuration work for passcode and not touch ID?', (In reply to Stephan Leroux :sleroux from ', ) ', My initial reasoning is that passcode must be enabled prior to using Touch ID. So, by default passcode covers both instances for users that don't have Touch ID. My concern was for the user who may have a Touch ID device, but choose not to enable the feature, therefore not allowing them to choose which area of the app to protect (all or nothing). To simplify this, let's just the a toggle to enable Touch ID, and only apply it for Logins Management at this point. I'll attach an updated screen.", Created ', TouchID&Passcode-On-TouchOn.png Possible new string: Require Passcode Updated string: Use Touch ID (was Use Touch ID for )', I've been working on the passcode input screens for creating, changing, and validation of a passcode and I think we might be missing some strings for the screens to make sense. For example, when changing a passcode, I assume that we would want to ask the user to input their old passcode and then ask them to enter a new one. The current copy we have available are: 1. 'Enter a passcode' 2. 'Re-enter passcode' 3. 'Turn off your passcode.' 4. 'Set Passcode' 5. 'Turn Passcode On' 6. 'Turn Passcode Off' Ideally for these states we would want to ask the user 'Enter your passcode' then 'Enter a new passcode' in the case of changing your passcode. Another thing that we probably want to include is some copy/UX for error states. For example, when using the system passcode UI, they display a red bubble with text indicating number of attempts. Not sure if this is something we want to do but one slightly confusing thing is if the user enters their passcode and fails to match it in the confirmation screen, we don't have any copy or UI to indicate to the user that the passcodes didn't match. On the branch where I have the passcode screen built I'm just scrolling the user back to the previous input screen. Anyways I'm worried that this late in development with strings being frozen that we might not be able properly convey to the user the interactions of the passcode screens. I'm thinking this may need to be pushed to a follow up (2.1/3.0) release. Thoughts?", We don\'t necessarily need to tell the user how many times they\'re allowed to attempt, but we may need strings and a course of action if X-attempts are made and if they don\'t match. For excessive attempts: "Maximum attempts reached, signing you out of Firefox Sync" (that way, they can sign back in to sync to begin the process again) For mismatched passcodes: "Passcodes didn\'t match. Try again." (shown on the passcode entry screen)', I did some research on the LocalAuthentication API used for Touch ID and have found out the following: 1. Allowing users to use Touch ID in our app is pretty straight forward. If the user has setup Touch ID and everything is working fine, we can simply provide a system-provided prompt asking the user to authenticate with their finger and know when it passed/failed. 2. There are a variety of errors that can occur when using Touch ID 1 . A few of them are simple to handle (UserCancelled) but others would require some copy to give feedback to the user about why it failed. This copy is not provided by the system. 3. Touch ID has the ability to 'fallback' onto another form of authentication. This fallback mechanism is a custom authentication scheme provided by the app developer. For example, account login password or custom passcodes. The system does not provide a default for a fallback. Regarding 2.0 feasibility, even going with the Touch ID route we would need additional copy to convey errors to the user which would require new strings. For post-2.0 implementations, we can provide a custom passcode solution but this would not solve the forgotten passcode dilemma. A simple solution we could do for a fallback is to: 1. Require users who want to use Touch ID/Authentication to access logins/private browsing to use a FxA account. 2. Use the FxA sign in as the fallback authentication mechanism. This solution would leverage the existing infrastructure for FxA account management. I'm not sure how that process works but we can include tie-ins with the app such as launching the forgot password pane or invoke the API to reset the password. 1 ", We should stick to the original plan of local passcode and optional touch id for those folks who have supporting device.', I think we are over-complicating this. Here are some thoughts: First, a user *always* needs to set a passcode.(In reply to Robin Andersen :tecgirl from ', ) ', Why do we want to connect this to Firefox Sync? Lets keep this simple and do not lock people out or disconnect them from Sync. This is absolutely not needed. It only complicates things.', (In reply to Stephan Leroux :sleroux from ', ) ', ', The fallback is our app specific passcode. The passcode is a requirement to be able to use TouchID. Without the passcode set, you cannot enable TouchID. So we do not need some special fallback. We just need to show our existing passcode dialog. ', We can be simple about this: forgotten passcode means you have to delete the app, set it up again. This is security. No backdoors, no complicated fallbacks via mechanisms not in our control (FxA).', I think we still want to implement a limit to the number of times a person can enter an incorrect passcode to prevent brute-force attacks. Orignally we were trying this to FxA but since we\'re not doing that not do we just want to do a simple timeout? Maybe an hour? The messaging would probably change I\'d imagine to something like the following: "Incorrect passcode. Try again (2 attempts remaining)." "Incorrect passcode. Try again (1 attempt remaining)." "Maximum attempts reached. Please try again in an hour."', (In reply to Stephan Leroux :sleroux from ', ) ', Careful about l10n for plural forms.', What's the recommended way of handling these plural forms? Is the fear that the translations might be verbose in some cases?", See ', .', Looks like we don't have this infrastructure in place. As a compromise we could reword it to be: 'Incorrect passcode. Try again (Attempts remaining: N).' This way we don't have to worry about plural rules.", This just reminded me that I may have not attached the updated mock (there are so many related bugs!) We don\'t have to tell the user how many attempts are remaining. Let\'s just decide on a number and present them with a message if they hit it: "Max attempts reached." and present < Back', Created ', TouchIDPasscode.png', Removing meta bug from tracking list.', Unassigning myself from the meta since dependent bugs have assignees.' 
id=1297823	 
id=1329826	 "Sounds similar to the previously reported crashes (I see you already add this bug as See Also on that one). From the previous discussion, we found two potential causes of the crash - one of which would not produce a crash log so that might be a thread to pull here. If the app gets terminated because of a memory issue, the device won't produce a crash stack but stores a JetsameEvent log. You can see if there was a log produced under Settings -> Privacy -> Diagnostics & Usage. They should be named JetsamEvent-YYY-MM-DD. The running theory that we have is that when your device is syncing any data from FxA, in some cases we buffer the pulled down data in memory before writing it to disk. In cases where you have many many bookmarks/history/logins/etc items, this can cause the memory to blow up. We've added a patch that should have resolved this for history but that might be faulty or another data type is causing this issue. This would explain why yo re only seeing this issue when you can connect to the internet as we can't snarf down the FxA data otherwise. Related, :rnewman filed a bug recently where he noticed all of his FxA data being re-uploaded and downloaded - even after performing an initial sync 1 . You might be encountering this if yo ve already synced down your data and performed an upgrade to a newer beta version which would further support the memory-blowing-up theory. 1 ", Sounds like the crash conditions could be boiled down signing in with a massive profile and having the client crash on initial pulldown.', (In reply to Stephan Leroux :sleroux from ', ) ', I do have these logs for each time it crashes and they list Firefox for iOS ("Client") as the largest process. ', OK, I've CC'd myself on that bug and will test again after it's fixed. Let me know if you need more info.", I vaguely remember when you were trying out the login manager you were experiencing UI performance issues because of how many logins you had from a test profile. I'm curious - do you have a substantial set of data yo re syncing (bookmarks/history/logins)? Sounds like the memory issue is the problem here which leads me to believe: 1. We missed something in the history memory patch 2. There is another memory issue occurring with a different Sync data type (logins/bookmarks/tabs)", (In reply to Stephan Leroux :sleroux from ', ) ', I do have 627 saved logins (which I believe is down from that last bug report) and I use Firefox Nightly as my primary browser on desktop with a profile I've had around 7 years. I think I have somewhere around 3000 bookmarks. I usually have over 800 tabs but I think I'm down to around 200 now." 
id=1324450	 'Unable to reproduce this on 6.0b7', I'm unable to reproduce this issue on 6.0b8." 
id=1298066	 
id=1317536	 '(Obligatory back-pointer to ', .)', I find this bug rather annoying.', See if this also is happening on our AS panel top sites.', Created ', ', Pull Request', Comment on ', ', Pull Request Worth noting that this behavior will be less desirable in certain situations (e.g., I have ', as a top site; ', is useless on its own), but I expect that as a sum, this will be an overall improvement. Left one comment about components being stripped using domainURL -- I don't think we'll want to remove the www/mobile/m prefix.", Isn't this the exact opposite of ", , desktop's behavior, and the end result we worked out in ", ? What we wanted to do was roughly what desktop does: - If there's a clear winner, use that: if you go to the same TechCrunch article fifty times, because you love it, then we should take you there rather than techcrunch.com. - If there isn't, use 'greatest common sub-path': perhaps you always go to amazon.com/mp3. Or say I visit pages under ", a lot, I'll end up with a 'reddit' tile\u2026 and it should take me to /r/cats, not /. - Otherwise, use the domain. We didn't get all the way there, but it's pretty likely that /r/cats will 'win' the tile, and so *mostly* Fennec's Top Sites does what you expect. If it doesn't, it will at least take you somewhere yo ve actually been. Where that falls down is Gmail and the like, which have a broad spread of URLs, and each one is useless\u2026 but the best URL for Gmail is ", , so we're back to greatest common sub-path. If, on the other hand, you always go to bbc.com/news, this PR will cause your tile to always take you to bbc.com/. That's a regression -- yo re introducing predictability, but it's a predictably bad result! My opinion: if you want to fix this, do it right: calculate a 'winner' URL for a domain as part of the Top Sites computation, and use that for the tile. This PR alone isn't worth the churn in the user experience.", Top Sites shouldn\'t only support links to domain home pages. Top Sites should have a long (ish) view of a users activity and present to them their "for sure top utilized" sites. It should avoid recently interacted content since that\'s what highlights is meant to address. If a user is in fact a repeat user of a specific article and they have been for a long while then that would definitely be a Top Site. The desktop team has worked a long while on Top Sites, while its still not completely perfect it has been getting pretty good, can we look into evaluating the system the Desktop Team is using and mimic that or simple use that same system for mobile?' 
id=1323045	 "If yo re feeling super helpful, you could run current master of the firefox-ios repo in Simulator from Xcode, sign in with your Firefox Account inside the simulator, and get a stack! The README in the repo should be up-to-date enough that you can build and run without too much trouble.", I can confirm this. It seems to happen somewhere shortly after startup on probably 98% of invocations. It typically happens between 1-10 seconds (often 3-5) after startup. Things I've tried so far: * rearranging bookmarks in the bookmarks window on the desktop, and waiting a while * turning off bookmark sync on firefox on desktop, turning it back on, and waiting a while this is on an iPhone 6+ running 10.1.1 (currently, though I've been offered a 10.2 upgrade which I'll probably accept before too long). I'll see about generating a build...", And if you kill Firefox (swipe away in the app switcher), go into airplane mode, then launch Firefox, you don't get a crash?", It didn't crash on master. Lots of complaints in the sync debug log, which I saved. I can upload it somewhere, if you like (not sure if these logs can contain personal info or not).", Will try the airplane thing momentarily.', Indeed, starting in airplane mode hasn't crashed after a couple of minutes.", Fantastic! That implies it's a bug we fixed already. Could you email me all of the sync logs you grabbed? (They shouldn't be personally identifying, but I can at least filter out the irrelevant bits if we need to live on this bug.)", Sent.', I thought this might be ', , but that wouldn't cause a crash, and would have been resolved with unchecking bookmarks. Other than that, the log doesn't look too concerning. ", is a possibility. Let's hope that this continues to work for you in 6.0, Dan; I'm happy to have a successful mystery. I'll ping Stefan to see if we can add you to Test Pilot to try out the 6.x branch on your device.", And by Test Pilot I mean TestFlight. \u2615\ufe0f', Possible related bug from a jailbroken device: ', Interesting. My device is not jailbroken, FWIW.', We can also reach out to ckarlof, who mentioned a very similar sounding crash on his iPad.', Yes, I am experiencing similar symptoms on my iPad mini.', *** ', has been marked as a duplicate of this bug. ***' 
id=1314044	 
id=1325717	 
id=1314641	 
id=1324374	 "Investigate to see how critical this bug is. Might be related to about: pages we've had issues in the past with.", May be related to ', (about:srcdoc)', This bug has to do with readermode.js and the checkReadability() method. If you disable this script the page works fine.' 
id=1290302	 'Comment on ', Simulator Screen Shot Jul 28, 2016, 4.24.54 PM.png Un-anchoring the Smart Folders is fine here, especially for smaller viewports. Time headers should still stick.', Comment on ', Simulator Screen Shot Jul 28, 2016, 4.24.54 PM.png Screenshot doesn't show functionality. Please attach PR. :)", Hey Robin. I haven't actually done this yet. I just wanted to get an okay from you before I (or someone else) started work on this. Once it is done I'll make sure that you have a look at it first :)" 
id=1134351	 'We will need to surface: * Firefox Cloud Services Terms of Services and Privacy Notice; * Firefox license and rights; * Firefox for iOS contributors; * Mozilla Manifesto? among other things. darrin suggests just adding buttons/links at the bottom of the settings panel for now.' 
id=1315627	 
id=1291831	 'Also\u2026\xa0pulling page down to refresh devices does not update the list' 
id=1319875	 'Created ', Logs', I presume you haven't tested on iOS 10 because there's no jailbreak for 10?", Anything to go by in the attached logs? (Note they are from September, however that was our last shipped client).', The last thing in the log each time is: 2016-09-30 09:52:07.907 Debug Profile.swift:1161 syncWith > Syncing clients\u2026 2016-09-30 09:52:07.907 Debug Profile.swift:1032 syncClientsWithDelegate(_:prefs:ready:) > Syncing clients to storage. 2016-09-30 09:52:07.908 Info Synchronizer.swift:157 init(scratchpad:delegate:basePrefs:collection:) > Synchronizer configured with prefs 'profile.sync.synchronizer.clients...' 2016-09-30 09:52:07.908 Debug ClientsSynchronizer.swift:309 synchronizeLocalClients(_:withServer:info:) > Synchronizing clients. 2016-09-30 09:52:07.910 Debug StorageClient.swift:733 getSince(_:sort:limit:offset:) > Issuing GET with newer = 1475221379250. 2016-09-30 09:52:09.130 Debug StorageClient.swift:347 failFromResponse > Status code: 200. This is the first record decryption performed by Sync with collection keys, and the first write into the clients DB, but without a crash report these logs aren't much use.", *** ', has been marked as a duplicate of this bug. ***' 
id=1321694	 
id=1314269	 'Created ', Screenshot 2.png' 
id=1289480	 'Sign-in confirmation also breaks the sign in user flow if the user sings in through the last slide of first run. It redirects the user to his homepage (tiles) without mentioning that an additional step is required.', Here is another related bug which is focused on login from History but still related to login confirmation causing a bad user flow: ', *** ', has been marked as a duplicate of this bug. ***', Tracking 6.0 in iOS triage.', IIUC the next step here, is for someone on the FxA side to summarize in more detail what the problem is and what the solution might look like. Unfortunately I haven't had the bandwidth to do that and I'm about to head out for a conference - :stomlinson could you please either do that or delegate it? Of particular interest would be, how Android manages this flow and whether we can get to a similar experience here.", Created ', fennec_signin_confirmation.mov For comparison, I made a short screencast of the sign-in flow on Fennec, noting how it manages the transition between the various screens. As a starting point, I think working towards using the same flow on iOS would be valuable. :rfeeley :st3fan does this seem like something we can aim for from a UX perspective?', Created ', ios_signin_confirmation.mov To ensure we're all talking about the same thing, here's a video of the current sign-in flow on iOS.", So AFAICT next steps here are to: 1) Agree on what behaviour we\'d like from a UX perspective 2) Come up with an implementation plan and timeline for both Client and Server side 3) Decide if we can add any short-term improvements on the meantime by tweaking things server-side We\'ve had a few discussions about us being able to change the timing of the "login" message from FxA web content to the browser, but doing so will expose a lot of edge-cases. I think the right place to fix this is in the client itself.', Oh, I meant to ni? Alex on this for input as well...', Hi Ryan, thanks for providing those recordings. I completely agree. Ideally we get the two user flows to be as similar as possible. The main thing I see that needs resolving is the redirect to Settings. If we can have that FxA confirmation page to stay put, users will see the message and will solve the problem. There is already a back button at the top already so they can easily navigate back to setting once their email is verified. As per the best way to achieve this, I will let engineering figure out if it's client or server side. As a reminder, we observe the same behavior when users login via History and during First Run. If we prevent the automatic redirect, we should resolve the user flow everywhere so long as there always a button at the bottom of the confirmation page to close the dialog or move to the next step/page. rfeeley: can you identify if (and what) buttons should go at the bottom of the confirmation message after login?", I count three ways to get to the FxA sign-in screen on iOS: * From the last slide of the first-run experience * On the "history" view, selecting "Synced devices" then "Sign in to Firefox" * By manually navigating in through settings and choosing "Sign in to Firefox" Stephan, are there any others we should be aware of?', Nope that should be all the ways.', A phased approach will probably work best to "fix" the problem of iOS taking control of the UI immediately w/o the user seeing the "Confirm your email" screen. FxA based nomenclature: authentication broker - a construct that acts as environment specific configuration/state manager. There are distinct auth brokers for e.g., Desktop firstrun, Desktop "about:accounts", Fx for iOS, and Fx for Android because each of these flows are slightly different. CWTS (Choose What To Sync) - CWTS is UI that allows a user to select which types of data to be synced. Phase 1) The content server delays sending the `login` message for an short amount of time, perhaps 5-7 seconds. This will give users enough time to read the "Go confirm your email" message, but (hopefully) not enough time to close the window or browse away before the `login` message is sent. If the `login` message is not sent before the user browses away, then Fx for iOS will never know the user is signing up/in. We might be able to mitigate this with some clever use of the `beforeunload` DOM event handler. This change will only affect the "fx_ios_v1" authentication broker. This can be rolled out within a couple of weeks. This will *not* affect the already existing but unused "fx_ios_v2" authentication broker. See "*" below. Phase 2) The iOS client stops taking over the UI upon receiving the `login` message and updates the `context` query parameter used to open FxA from "fx_ios_v1" to "fx_ios_v2". iOS will instead continue to display the FxA window, start its internal state machine, and wait for verification. The "back" button will continue to be available in the FxA container window, a user that clicks this button will be taken to the previous screen. If it\'s the settings screen, the existing "verify your email" message will be displayed. If another screen, it\'s state should be updated to reflect the fact that the user must verify their email. * - an `fx_ios_v2` authentication broker already exists 1 that enables CWTS and uses WebChannels instead of CustomEvents to communicate. The corresponding change to Fx for iOS was never written and the `fx_ios_v1` auth broker is still being used. :rfkelly today noticed that on signup, the user has no ability to select which data types to sync. Neither FxA nor Fx for iOS present UI. This is a separate issue that we should resolve. Since the fx_ios_v2 auth broker is not currently being used, we could re-purpose it to act exactly like the fx_ios_v1 auth broker, except it will not contain the delay. 1 - ', Sounds like a good plan, and I think we should try to do the phase-1 part ASAP. I filed a bug for it here: ', We've completed Phase 1 of ", , and it will go live with the next deploy of FxA. I think we should still try to get Phase 2 done, bringing the flow here into closer alignment with the flow on Android. But this will require non-trivial amounts of client-side dev work so most likely it will need to wait for prioritization on Fx-iOS dev side.', *** ', has been marked as a duplicate of this bug. ***', From ', ', This seems like the cause of ', . I wouldn't be surprised if this happens somewhat frequently for users and when it does it has the consequence of forgetting the users account. This in turn would force them to re-enter their credentials which just adds more barrier to getting sign ups. ", I'm assuming from the behavior this isn't in place today. Is this solution or something similar possible to implement in the interim until we can rejig the user flow to handle Phase 2?", Clearing ni? :rfeeley since I don't think the question I asked him is particularly relevant anymore", (In reply to Stephan Leroux :sleroux from ', ) ', Correct, this behavior is not in place today unless somebody did it while I wasn't looking. I just opened 1 to try using a beforeunload handler to send the `login` message. Thanks for reminding us Steph! 1 - ", One idea we have in triage was if we could do something on the client side to prevent the delayed redirect back to settings. Unfortunately, since signing into FxA remembers if yo ve previously confirmed a device, we won't always be shown the 'Confirm Email' screen so by disabling the redirect code, the user will stay stuck on the loading FxA screen after signing into a device they have signed into before.", Would it help if FxA showed a more appropriate screen in this case?' 
id=1311405	 'do we need mocks for this?' 
id=1318719	 
id=1311160	 
id=1130528	 '*** ', has been marked as a duplicate of this bug. ***', See ', for discussion of what this ticket might track.', mfinkle - is this really a P2 do we think? Was questioned in last triage.', (In reply to Jenn Chaulk (:jchaulk) from ', ) ', P2 came from CAT2, which was shown to *not* be "priority", so I would think this *could* be a P3, but allowing the user to change the search provider is fairly important.', Just a fyi, An user on Firefox Support forum is looking for this feature, since he use startpage as default search engine. ' 
id=1320911	 
id=1311408	 
id=1311169	 
id=1311144	 
id=1320961	 
id=1293798	 '*** ', has been marked as a duplicate of this bug. ***', Documentation on Mozilla push service: ', For upcoming features which rely on push messaging instead of polling (such as send tab), we'll need to register and communicate with the FxA push endpoint to receive push notifications." 
id=1320774	 
id=1311399	 'Moving to new, actual user story for metadata related work.' 
id=1311150	 "This is your regularly scheduled reminder that GROUP BY in SQL is tricksy (e.g., individual values in a non-grouped column don't necessarily come from the same row!), and so careful review is worthwhile.", Let's assume data like this: CREATE TABLE peeps ( age INTEGER, name TEXT, candy TEXT, shoesize INTEGER ); INSERT INTO peeps VALUES (15, 'Alice', 'Gobstoppers', 7), (15, 'Barbara', 'Gummy worms', 6), (16, 'Carly', 'Red vines', 8), (16, 'Davina', 'Candy corn', 6); Let's say you want a representative of each age: GROUP BY leaps to mind, just as it might when yo re implementing this bug. So you write: SELECT age, name, candy, shoesize FROM peeps GROUP BY age; What you expect is this: age name candy shoesize ---------- ---------- ----------- ---------- 15 Barbara Gummy worms 6 16 Davina Candy corn 6 What a compliant SQL engine can give you is this: age name candy shoesize ---------- ---------- ----------- ---------- 15 Alice Gummy worms 6 16 Davina Candy corn 8 That is: there is no rule to say that values produced by grouping must come from the same contributing row. Alice is 15, yes, but she doesn't like gummy worms. Another member of the set of 15-year-olds does. SQLite will almost always do what you expect, but when you throw joins, virtual tables, assorted index walks, aggregate operators, etc., you cannot rely on it, and that behavior might change in the future.", Here's how you do it correctly: ", ', SQL: it ain't easy.", Created ', ', PR' 
id=1321297	 
id=1318715	 
id=1329727	 
id=1322521	 
id=1322130	 
id=1311164	 "Desktop currently uses embed.ly to grab a 'provider' name from a visited page. Since we're not using embed.ly on mobile, we'll need to add a new ruleset to page-metadata-parser that extracts the provider name. According to the embed.ly documentation 1 this is simply described as 'the name of the resource provider'. Will need some investigation as to what that actually means... 1 ", Not sure where the best place for this bug to live... Any ideas? Not sure if we need to move it to a fathom component (if it's available).", I guess I can duplicate it for Android. Even though we will investigate and write the ruleset only once, there will still be a little piece of work on both platforms for integrating the new rule set. The actual bug for writing and discussing the ruleset will probably live on GitHub (I'll file one): " 
id=1315293	 
id=1320769	 
id=1311942	 'This issue is no longer reproducible on latest master (6.0). The current behavior is: 1. Open 6 tabs 2. In first tab open news.google.com 3. Tap on a news link Result 1: The newly opened tab will be the second tab in the list, adjacent to the news.google tab 4. Tap on a second news link Result 2: The newly opened tab will be the third tab in the list, adjacent to the tab open at step 3. This behavior is consistent with Firefox for Android which behaves exactly the same, but inconsistent with Firefox for desktop which opens every new tab right next to the current one. Steph, is this the desired behavior?', Forwarding NI to :tecgirl as she would know better if this is what we want to do. IMO I think being consistent with Android is probably better than Desktop.', Actually, I think being more consistent with Desktop and other mobile browsers makes sense here. A new tab from an existing page should open next to it, and a new tab created from the menu would show at the end of the list.', I just tested this on the current master and it works exactly like what Robin said. If a new tab(s) is opened from a link (e.g. Google News), the new tab(s) appear after the original tab and subsequent tabs that have been opened. If I then press New Tab from the menu, the tab then goes to the end of the list. Does this sound right? Because if it is, this bug is already resolved.' 
id=1320917	 
id=1285300	 'Created ', Slack for iOS Upload.png', If there are no new bookmarks to download, an attempt to sync involves only a cheap database check for consistency, then a real attempt to do the work. The only way it\'d heavily drain battery is if the cheap check passed but the real attempt failed, and you are a heavy Firefox user (lots of bookmarks, lots of time with Firefox open on your phone). Do you still get battery drain if you uncheck "Bookmarks" in the Sync preferences pane on your desktop? Note: doing so will turn off bookmark sync for all of your devices, and if you re-check it, you will probably find that your bookmarks sync successfully -- the root cause of this issue is that desktop routinely uploads corrupt data to the server, and unchecking and re-checking the box will cause it to do a fresh (and likely successful) reupload.', Yes, this appears to be the case. If I uncheck 'bookmarks' as per the workaround then battery usage drops dramatically.", How many bookmarks do you have, Nick? sqlite3 places.sqlite "SELECT COUNT(*) FROM moz_bookmarks" in your profile directory should work. We shouldn\'t bother trying again if the last merge attempt failed for inconsistency and nothing new has been buffered since the last attempt. Emily, did any work along those lines make it into the tree?', I don't believe any of that work has made it into the current codebase. It was one of the next things on the list to tackle.", 1052 bookmarks (I know, I know)' 
id=1321581	 
id=1311396	 
id=1254402	 'Looking through the discussion ', , would it make sense to implement this prior to implementing atmoic uploads/batching so we can upload batches more intelligently?', There's no way to use a custom server config on iOS, and these numbers aren't likely to change much, so if we're careful about not shipping batch uploads until the batch API is supported in prod, we can hard-code numbers. The _right_ thing to do is to use this API, and it shouldn't be hard to do\u2026\xa0but it doesn't block.", This is now actionable -- the server code is deployed -- so we should do this. Clearing triage flags for re-triage. This allows the client and server to negotiate how many records we put in each HTTP POST (typically more than the default of 100). This means we can do dramatically better wrt power and network usage, allow syncs to complete more quickly, and also let us adapt to network types if we so choose.' 
id=1321293	 
id=1320821	 'Created ', Pasted image at 2016_11_28 11_00 AM.png Here is an example for Desktop. For iOS specfic screenshots please ask Bryan Bell' 
id=1320254	 'This is an iPhone bug.', Tested on 6.0b4 and latest nightly (5d7484369). I can confirm that this issue occurs. The video comes in full screen and starts playing after Firefox has been backgrounded and restored. On Safari and Chrome the video does not start in full screen after Firefox it has been reopened. Issue is reproducible only on iPhones.' 
id=1317543	 'Some direction: The reason the query is slow is that it walks history, filtering out deleted items, joining against domains and visits, grouping, paring out unvisited items\u2026 then finally orders and limits. 2|0|0|SCAN TABLE history 2|1|1|SEARCH TABLE domains USING INTEGER PRIMARY KEY (rowid=?) 2|2|2|SEARCH TABLE visits USING COVERING INDEX idx_visits_siteID_is_local_date (siteID=?) 1|0|0|SCAN SUBQUERY 2 1|0|0|USE TEMP B-TREE FOR GROUP BY 1|0|0|USE TEMP B-TREE FOR ORDER BY 4|0|0|SCAN TABLE favicon_sites USING COVERING INDEX sqlite_autoindex_favicon_sites_1 4|1|1|SEARCH TABLE favicons USING INTEGER PRIMARY KEY (rowid=?) 3|0|0|SCAN TABLE history USING COVERING INDEX sqlite_autoindex_history_2 3|1|1|SEARCH SUBQUERY 4 USING AUTOMATIC COVERING INDEX (siteID=?) 0|0|0|SCAN SUBQUERY 1 0|1|1|SEARCH SUBQUERY 3 USING AUTOMATIC COVERING INDEX (id=?) When we have lots of history, what we should do is invert this: walk the visits table in descending order (which handily excludes unvisited history), searching into history/domains by ID, filtering by URL, and then fleshing out whatever else we need by joining back against the visits table and icons. This should get us into an index walk on visits, rather than a table scan on history, and allow us to scale to very large quantities of history. Note, however, that there are two kinds of history lookup: by visit descending, and by frecency with a URL/title match. The latter can still be improved (it\'s slow, but hard to tell), but won\'t benefit from walking the visits index. Here\'s some code to explain a query within Firefox itself: private func explain(query: String, args: Args?) { db.runQuery("EXPLAIN QUERY PLAN " + query, args: args, factory: { row -> String in log.debug("\\(row 0 as! Int)|\\(row 2 as! Int)|\\(row 2 as! Int)|\\(row 3 as! String)") return "" }) } Used like this: ... let factory = SQLiteHistory.iconHistoryColumnFactory self.explain(sql, args: args) // Tada! return db.runQuery(sql, args: args, factory: factory)' 
id=1303322	 'This issue is only reproducible on master as the Top Tabs for iPad feature is not yet released. The feature is enabled only on master.' 
id=1315299	 'The crash logs you attached looks like ', . Is this the correct log?', Created ', Client 08-11-16 19-01.crash This is the correct crash log. Sorry for the inconvenience.', Timestamp is a UInt64, so I betcha this isn't going to be happiness if it sees a time from the future: if NSDate.now() - (lastSyncTime ?? 0) > OneMinuteInMilliseconds && !(self.refreshControl?.refreshing ?? false) {" 
id=1297341	 'Crash logs?' 
id=1311042	 'Critical bug - pull up into sprint for when we branch for v6.x' 
id=1311683	 'This is a layout crash related to ActivityStream Top Sites. Happening because in let columnPosition = row % horizontalItemsCount horizontalItemsCount = 0' 
id=1299150	 'We should track this for 5.2 if 5.1 is affected.', This is related to TopTabs. I'm going to leave it for now." 
id=1306315	 'James, I remember you were working on a related bug and there was some kind of issue with localization. Do you recall that bug?', Steph, this was the bug you had in mind: ', .', (In reply to Ryan Feeley :rfeeley from ', ) ', This change affects only Activities management screen or also things like share menu? ', Is this accurate? In share extension menu we have Firefox icons and only in share extension management we don't have reference to Firefox. I'm asking because with proposed changes we might be unable to fit with translated string. (en-US grows from 8 to 17 characters, pl would probably need 30)" 
id=1291718	 'Some of the initial design work for surfacing error states ' 
id=1285664	 "I have a working demo for this feature, but it's lacking any interface at the moment. ", In this branch, I\'ve overridden the functionality of the style ("Aa") button in the Reader View toolbar so that tapping it once starts/pauses the dictation. :tecgirl, would you be able to look over the feature and see what you think regarding a way to trigger this function? An obvious solution would just be to add another button to the toolbar, but that could make things a little crowded. Thanks!', Created ', ', Pull request', Created ', Simulator Screen Shot 24 \u0430\u0432\u0433. 2016 \u0433., 13.09.11.png', Created ', Simulator Screen Shot 24 \u0430\u0432\u0433. 2016 \u0433., 13.09.28.png', let me noodle on this a bit as far as the UI is concerned. Adding the functionality to the toolbar isn't so bad, but I'm thinking it should be an audio icon (speaker or similar) and I'm wondering about how to best display the toolbar \u2013 it is crowded and confusing. I've been meaning to revisit it anyway. :) does this read in whatever the region language is set to?", I was thinking the same thing regarding the icon \u2014 it's not quite so clear at the moment. Also, I wasn't sure whether it would be desirable to have more controls (e.g. rewind), but I couldn't comfortably fit them in the toolbar, so I left them out for now. It does read in the correct language as long as the web page has the right locale metadata, and will fall back to the user's language preference if not.", Resetting assignee. Note that there are pending reviews here.', Robin, did we ever figure out a UI for this?', Comment on ', ', Pull request Removing myself from review for now since this still has pending UI.' 
id=1305477	 
id=1314406	 "After talking with Bryan Bell this feature isn't required for V1. I'm going to move it to the backlog." 
id=1309258	 "Do you have Sync set up? (This affects whether your data comes back.) Do your local bookmarks disappear too? (If you don't have any, create some and see\u2026) What device are you using? Which version of iOS?", (In reply to Richard Newman :rnewman from ', ) ', Will report back in a couple of days. ', iPhone SE ', iOS 10.0.2 (14A456)', Thanks for the details! Is Firefox ever crashing that you can see? My suspicion is that this is an iOS 10 app shutdown crash that we and some other companies are seeing, and it's corrupting your bookmarks and history database. We recover by starting from scratch. The complication there is that yo re not using Sync, which is the most likely reason we're still around in the background\u2026 Do you ever use the Share extensions to View Later, Add to Firefox, or otherwise?", (In reply to Richard Newman :rnewman from ', ) ', Not crashing, but the page loading in text only is kind of annoying. That's when I manually close the app by double tapping the home button and swiping it up. Not sure this is related though. ", I think so? I have add to instapaper, but I'm not sure it's part of the share extensions. How do I check that?", (In reply to Mason Chang :mchang from ', ) ', Firefox's own share extensions are available for use in other apps. In, say, Twitter, bring up the share sheet, swipe to the right, and customize each row. In the top you can Add to Firefox (bookmarks or reading list), and in the bottom you can Send to Firefox (send tab, view later). If yo ve never shared a link to a Firefox icon, it's safe to say you haven't used these!", Just an update, the random text only webpage doesn't seem to be correlated. Just out of the blue though, all my history, including bookmarks, also get deleted.", Is this still happening every couple of days for you?', Investigate restoring after a corrupted DB.' 
id=1302998	 'This issue is reproducible only on master as the re-arranging tabs feature from top tabs is not yet released. The feature is enabled only on master.' 
id=1321208	 'Created ', Bookmarks Panel', Potentially a duplicate of 1320139 but I'll keep this open since it mentions the tab tray as well.", Double check that we follow expected behavior for PDFs and it shows on the panels correctly.' 
id=1302732	 'This issue is also reproducible on 5.2(1) released version.' 
id=1183693	 
id=1326567	 "This is cool but the only problem I see with this is that if a use wants to actually see the full site, they're going to be punted over to Safari (with the back button in the top left corner to go back to Firefox). Is this something we want? This sounds more like a UX/product issue. Flagging people to see what they think.", :bkmunar why would they be punted to Safari? we already support this on the tabs tray.', What Aaron is asking for is the Apple built in version of what we do in the Tabs Tray so it will punt it to Safari, not Firefox. I'm assuming we could still build the same functionality however, it would have to be custom made (which I think we have?).", link for reference', In Safari, on peek, there is no way to view the full site whilst holding down your finger. If you drag upwards you get 'Open in New Tab', 'Add to Reading List', 'Copy', 'Share'. We should support the same." 
id=1289908	 ' has been opened for the fact that the device ID isn\'t sent with a tab, so let\'s leave this bug as just the title. Ryan, if you care strongly about the quotes being included when there\'s no title, we probably need another desktop bug for that along the lines of "don\'t use quote characters around the URL when there is no title" as even when this is fixed we can expect some tabs to arrive without a title.', I'm attempting to come up with a cross-platform approach that degrades gracefully." 
id=1287798	 
id=1224184	 'Is this only on planet.mozilla?', Any complex page will do. The more complex it is, the longer the delay.', Hey Markus, Thanks for filing this! Yo re suspicions on the web view being resized and causing the delay sound accurate. When the web view is scrolled, we're resizing the frame of the web view (using layout constraints) as the url bar is moving up and down. The second scroll action might be delayed because of a relayout happening within the web view. If this occurs on complex web sites only then it sounds like it might be the culprit. Could you link a few more sites yo re having issues with?", Sure. ', ', ', I can reproduce this issue on iPhone 4S running iOS 9.3.2. Tested on latest master.' 
id=1292173	 
id=1311898	 
id=1271379	 "After doing some research, I found that the PLCrashReporter callback must be async-signal-safe 1 , which restricts the code we can call to a small set of OS-level functions. That means it's not feasible to send a realtime ping in the crash signal handler (though it is theoretically possible if we were to write async-safe networking code). The standard approach for doing this on iOS is to send the ping after the app relaunches. 1 " 
id=1167490	 'This is a good bug to get someone looped in to Sync, and also will help with robustness.', Richard can you give us an idea about how important this bug is and how soon this needs to be addressed?', It needs to be done at the same time as we do GUID reassignment, otherwise we violate some invariants. I don\'t recall whether we already do this for bookmarks, for history, or for passwords. More thorough explanation: For example, say we have a history item for "', " with GUID "abcdefghijkl". A record exists on the server for the same URL with GUID "defghijklmno". When we process the incoming record, we choose to use one of the two, usually the remote GUID, because it\'s not acceptable for two records to both refer to the same URL. But we can\'t typically guarantee that our GUID never \'escaped\' (e.g., when disconnecting and reconnecting, or if we got interrupted some time). So if we ever reassign a GUID, we need to delete the old GUID from the server. The best way to start this is by writing some tests.', :markh is this something we should include for 'repair' of detected corruption?", (In reply to Edwin Wong :edwong from ', ) ', desktop already deletes the GUID in this case. ', has a change so a bookmark is "logically" deleted in this case, but even without that patch, it does a "physical" delete.' 
id=1314532	 'Created ', Screenshot 2 (After tap).png', Interesting observation - while I am able to reproduce this from items on the "new tab" page, the same behavior is not observed when I open a page by directly inputting the URI of the page on the url bar.', Eklavya, you could try disabling the internet connection and then try the experiment. I tried what you did - input the URL on the URL bar. And, I see the stop button never gets enabled.' 
id=1324165	 "Please include the last pipe(|) character while visiting the link. Bugzilla doesn't seem to identify it as part of the link: ", |' 
id=1313317	 "Hi, I'm interested to work on this bug, is it still valid?", Yup! I'll assign it to you.", Hey there, this seems like a good first bug. What is FxA?', I'm currently downloading the 9.3 simulator to reproduce this issue and start debugging. Any hint on where the problem might be?", Hi Henrique try using the steps Catalin mentioned in the first comment to reproduce the bug. Make sure to also test on iOS10 as well. ', is a good place to start' 
id=1294814	 'Is this a regression? This used (does?) to work. Is it only a particular image?' 
id=1308280	 
id=1309018	 "A similar problem exists on the History Panel's sub-panels: 1. Tap the Recently Closed Tabs button in the History Panel 2. Open a new tab from the Menu 3. Tap the tabs button and go back to the tab where the Recently Closed Tabs panel is open Yo ll notice that the view goes back to the top/main History Panel." 
id=1252117	 
id=1296260	 'Tested on Firefox 5.1b3 and RC 5.1(1): Device: iPhone 6 S iOS: 10b7 The issue is still reproducible following the above STR.', I can reproduce this issue on iOS 10b8 on my iPhone, but not on my iPad.', After some exploration, it seems that this doesn't happen all of the time. Sometimes it shows double prompt, sometimes it doesn't so it may in fact be an issue on both the iPad and potentially iOS9 devices. Unfortunately I had to update the only touch ID device I had to iOS 10 to work on this issue. Simon do you mind testing this on an iOS 9 device with touch ID? Since the issue is intermittent it might take a few back and forths in order to get the double prompt.", (In reply to Stephan Leroux :sleroux from ', ) ', Tested on iPad Air 2 - iOS v9.3.3 I managed to reproduced the double prompt issue several times but with no luck of finding reliable steps to reproduce. It mostly occurred when accessing logins after Firefox was backgrounded and restored. Also noticed a strange behavior that might be related. When tapping on the login quickly the Touch ID promt will be displayed again. See video: ' 
id=1299504	 
id=1298038	 "How do we use PLCrashReporter right now? Maybe crashes from there can be sent to a small server somewhere and then we could symbolicate it on the server. We'd have to write it ourselves and seems like something we probably wont get to. The best open source tool I could find for this was ", but its old and unmaintained.', We use PLCrashReporter only for detecting a crash and showing a prompt to the user asking if they want to restore their tabs 1 . This was mostly to replace Breakpad 2 which we were using before but had a hard time supporting it for iOS. The original motivation behind using Breakpad was to be able to hook iOS into Mozilla's existing crash reporting infrastructure 3 . Unfortunately, crash-stats.mozilla.org accepts minidump crash reports 4 where as PLCrashReporter encodes crashes in a .plcrash or .crash. One potential solution would be to convert the .crash files to the minidump format and send that instead. I think there are tools available to do so but haven't looked into it too much. Also, crash-stats.mozilla.org is a Socorro 5 instance so we already have a frontend built for supporting crash reports. 1 ", 2 ', 3 ', 4 ', 5 ' 
id=1237407	 'We now have a dedicated URL for this purpose: ' 
id=1303379	 
id=1324438	 
id=1299652	 
id=1323958	 
id=1216203	 'This issue is still reproducible on latest master on phones. I cannot reproduce on Safari.', Let's retest this on the latest master build and prioritize from there.", Tested latest master on iPhone SE running iOS 9.x The 'Write a comment' input box gets overlapped by the bottom toolbar when the 'Comment' button is taped. If the bottom toolbar is in view when tapping on 'Comment', the text box is correctly displayed above the toolbar." 
id=1325313	 'Thanks for reporting this. Please edit the task summary to actually summarize the "bug in firefox iOS" that you experience.', Re-summarized based on my interpretation. I'm pretty sure our Reader View button (when available via certain content) is marked an accessibility element and has an accessibility hint and accessibility label. If that's not the case, it should be trivial to add. What device, iOS version and version of Firefox are you using @Sankararaman?", iOS 9', Tested on iPhone SE (9.3.2) and iPhone 7(10.0.1). When opening a page with reader mode available VoiceOver does not notice it in Firefox. This is not the case in Safari. VoiceOver notices reader mode when available.' 
id=1311407	 
id=1282965	 
id=1303052	 'This issue is also reproducible on 5.2(1) released version.' 
id=1289066	 'Works on Release Candidate 5.0', Is this Facebook specific? Or does this also fail for other login forms?', I've investigated this issue a bit more and, when I open Facebook by tapping on the default top site tile, I'm getting the phone version of the site. In this case when I try to login, the prompt is not displayed. If I open Facebook via URL bar, then I get the tablet/desktop version of the site, and in this case the 'save login' prompt is displayed.", I was also thinking if there's a UA discrepancy. In any case, the tablet tile default we ship should match user-entry, if not, that's really silly. There should be no better served site. The tile URL we ship should match the equivalent of the user-entered site.", *** ', has been marked as a duplicate of this bug. ***' 
id=1279333	 
id=1281542	 "Isn't this okay? Yo re turning on a specific mode that will last for that browsing session \u2014\xa0it doesn't need to apply specifically to every single page (i.e. including special local pages).", (In reply to Nathanael Alcock from ', ) ', Right, the hiding of images should apply for the browsing session. Please clarify what about:home is here, Top Sites or the chosen Home page?', All non-content. I just found it odd that we allow you activate that mode (which showcases no visible change on non-content) whilst on any panel (e.g, top-sites). The menu items I would expect to see would be context sensitive to what I am viewing. If hide images does nothing on non-content, I would expect it to not be visible for activation in menu. To me it sounds like a mode error as the interface is in a different state.', Moving out of 6.0 release. Not sure what the state of no image/night mode. Is this still under development?', Both night mode and no image mode were on hold as the bugs shook out. Stalled due to team changes.' 
id=1218962	 'Bulk assigning P3 to all open intermittent bugs without a priority set in Firefox components per ', .' 
id=1312453	 
id=1264584	 'Mark, is this something we should deal with in Firefox for iOS?', (In reply to Stefan Arentz :st3fan from ', ) ', Probably - IMO users are not likely to actually hit this as they don't regularly disconnect then reconnect devices. However, desktop did it in the referenced bugs by doing simple stripping of devices that have another device with the same name and haven't synced in over a week - which isn't perfect, but possibly better than nothing.", We believe this should be fixed by using fxa's device manager registration work." 
id=1304415	 
id=1283178	 'Created ', screenshot' 
id=1322206	 'This behavior was added intentionally as part of ', . The issue is that pages can do something like this: 1) badsite.com uses window.open() to open ', . 2) The origin of the new window is blank since we're trying to establish a connection. 3) badsite.com is able to manipulate the contents of that window, showing a spoofed Amazon UI. Due to the above, I was about to mark this bug as WONTFIX, but we might actually be able to handle this more intelligently in certain situations. decidePolicyForNavigationAction includes a navigationAction, which includes a navigationType property. If we see that navigationType == LinkActivated, I think it would safe to show the URL immediately, which would solve the bug as reported. We'd need to be careful to *not* show the URL if it's opened via other means, such as window.open()." 
id=1310283	 
id=1151336	 "Apple has made some provision for these situations that I intend to use for Account storage (although I'm not sure we do yet). See 1 . Specifically, Account stuff (email, uid, service endpoints) will be kSecAttrAccessibleAlways and State stuff (session tokens, oauth tokens, certificates, etc) will be kSecAttrAccessibleAlwaysThisDeviceOnly. (I see no reason to have to unlock the device first, etc.) 1 ", The User Defaults system has a similar concept, but it's only accessible through CFPreferences: ", There's a hacky way or two to detect restore: ", ', ', I just restored a phone backup to a new iPad. Firefox appeared. As expected, it's not signed in to sync. But it had my open tabs and my history. That means that: * The clients and commands tables are cloned from my phone. * Potentially the client ID is the same. * History local/remote bit is wrong. * If we add source device to history (", ), it'll be wrong, too.", Tracking nom to think about this in the context of overall sync reliability. Firefox has been out for long enough now that users will be upgrading and buying second devices, and multiple devices is the value prop for Sync.' 
id=1319834	 
id=1233036	 '*** ', has been marked as a duplicate of this bug. ***', Copying from ', : ', Still reproducing on latest master (0da9bd79a)' 
id=1257390	 'This issue is still reproducible on latest master (0da9bd79a8efda)' 
id=1289106	 "Testing on 5.x branch, it looks like this happens on there as well but is a lot less noticeable. I think it might be because of the presence of the top tabs work on master. I think the animation needs a bit of work and I'm not sure if this is something we want to address for this point release. I'd really like this see this fixed for 6.0 though. I'm going to move it to 6.0 for now.", Some notes from investigating: The animation issue is most likely being caused by the way we delete each tab. Tapping 'Close All Tabs' tells the tabManager to remove each tab one by one internally. As a side effect, the delegate method tabManager(didRemoveTab:) gets called each time. In the TabTrayController, this method queues up a performBatchUpdate call which deletes a single tab. By queuing up many of these batch calls - each containing only one deletion - the collection view is struggling with handling the deletion animations for that many calls. As a test, I replaced this with a single batch call and passed in all the index paths and it works (and looks) way better. The tricky thing with the way this code is structured is that the internal logic inside TabManager has full control over how the Tab Tray handles the deletion of the tabs. This was fine when we were handling each tab individually since the way the TabManager handles deleting a single tab maps one-to-one with how we want to present it visually. Now with batch deletion, this abstraction falls apart. To make matters worse, the TabManagerDelegate pattern is used throughout the app so modifying that won't work." 
id=1321019	 "Reader mode urls show up in history if you visit them in the same session. But when restoring session history they are removed. Also Reader mode urls don't to have an icon. They should have an icon that indicates that it is a reader url.", Is this resolved with your session restore fixes?', No. I created this one after. The session restore patch was getting a bit large. It was really 3 bugs in one commit. So I created this bug to track the left over issues with session restore.' 
id=1297332	 'Pretty good chance that this is a Model bug, not a home screen bug per se.', I observed similar behavior. Additionally, my Firefox iOS bookmarks don't get listed in the Mobile Bookmarks folder. A few questions worth considering: What is the Mobile Bookmarks folder supposed to contain? Why is it listed within the Desktop Bookmarks folder? And why don't the Mobile Bookmarks folder's items match with the bookmarks made from within Firefox for iOS.", (In reply to Maurya Talisetti from ', ) ', The contents of the Mobile Bookmarks folder on your desktop. That's where Android puts its bookmarks, and when bidirectional syncing is enabled for iOS (", ), this will go away. ', "Desktop Bookmarks" is really "Server Bookmarks". ', Because we don't sync bookmarks yet: we show what's on the server in a way that makes it possible to use your existing bookmarks read-only.", Thanks Richard! So, the bug is simply as described in the Description. That there is no back button after entering the Mobile Bookmarks folder.', I filed that a long time ago as ' 
id=1288465	 "Would it be better to have some visual indication of a tab being dragged, or is the fact that they're long-pressed on it intention-enough to not need to make any additional visual signals?", highlighting the selected tab (and dimming the rest slightly) would be a helpful visual aid.', Nathanael's WIP PR here: " 
id=1207920	 'log: ', repository: fx-team start_time: 2015-09-23T15:31:37 who: nigelbabu at gmail dot com machine: bld-linux64-spot-427 buildname: b2g_fx-team_flame-kk_eng_dep revision: 19b55237cb36 command timed out: 14400 seconds elapsed running 'scripts/scripts/b2g_build.py', '--target', 'flame-kk', '--config', 'b2g/releng-otoro-eng.py', '--gaia-languages-file', 'locales/languages_all.json', '--gecko-languages-file', 'gecko/b2g/locales/all-locales', '--repotool-revision', 'v1.12.16' , attempting to kill", log: ', repository: mozilla-central start_time: 2015-09-23T16:30:33 who: nigelbabu at gmail dot com machine: bld-linux64-spot-491 buildname: b2g_mozilla-central_nexus-5-l_eng_periodic revision: f1dffc8682fb Automation Error: mozprocess timed out after 600 seconds running './config.sh', '-q', 'nexus-5-l', '/builds/slave/b2g_m-cen_n5-l_eng_dep-0000000/build/tmp_manifest/nexus-5-l.xml' timed out after 600 seconds of no output Return code: -9 Automation Error: mozprocess timed out after 600 seconds running './config.sh', '-q', 'nexus-5-l', '/builds/slave/b2g_m-cen_n5-l_eng_dep-0000000/build/tmp_manifest/nexus-5-l.xml' timed out after 600 seconds of no output Return code: -9 Automation Error: mozprocess timed out after 600 seconds running './config.sh', '-q', 'nexus-5-l', '/builds/slave/b2g_m-cen_n5-l_eng_dep-0000000/build/tmp_manifest/nexus-5-l.xml' timed out after 600 seconds of no output Return code: -9 command timed out: 3600 seconds without output running 'scripts/scripts/b2g_build.py', '--target', 'nexus-5-l', '--config', 'b2g/releng-otoro-eng.py', '--gaia-languages-file', 'locales/languages_dev.json', '--gecko-languages-file', 'gecko/b2g/locales/all-locales', '--repotool-revision', 'v1.12.16' , attempting to kill", log: ', repository: b2g-inbound start_time: 2015-09-23T14:30:17 who: nigelbabu at gmail dot com machine: bld-linux64-spot-1058 buildname: b2g_b2g-inbound_nexus-4_eng_periodic revision: 52fb47ac7186 Failed to log stats. Exception = Errno 185090050 _ssl.c:340: error:0B084002:x509 certificate routines:X509_load_cert_crl_file:system lib command timed out: 3600 seconds without output running 'scripts/scripts/b2g_build.py', '--target', 'nexus-4', '--config', 'b2g/releng-otoro-eng.py', '--gaia-languages-file', 'locales/languages_dev.json', '--gecko-languages-file', 'gecko/b2g/locales/all-locales', '--repotool-revision', 'v1.12.16' , attempting to kill", log: ', repository: b2g-inbound start_time: 2015-09-23T11:30:18 who: nigelbabu at gmail dot com machine: bld-linux64-spot-430 buildname: b2g_b2g-inbound_flame-kk_periodic revision: 1716866eebca command timed out: 3600 seconds without output running 'scripts/scripts/b2g_build.py', '--target', 'flame-kk', '--config', 'b2g/releng-private-updates.py', '--gaia-languages-file', 'locales/languages_all.json', '--gecko-languages-file', 'gecko/b2g/locales/all-locales', '--config', 'balrog/production.py', '--repotool-revision', 'v1.12.16' , attempting to kill", log: ', repository: mozilla-central start_time: 2015-09-23T13:19:30 who: nigelbabu at gmail dot com machine: bld-linux64-spot-311 buildname: b2g_mozilla-central_emulator-debug_dep revision: 1450aeb71693 command timed out: 3600 seconds without output running 'scripts/scripts/b2g_build.py', '--target', 'emulator', '--config', 'b2g/releng-emulator.py', '--debug', '--gaia-languages-file', 'locales/languages_dev.json', '--gecko-languages-file', 'gecko/b2g/locales/all-locales', '--repotool-revision', 'v1.12.16' , attempting to kill", log: ', repository: mozilla-inbound start_time: 2015-09-23T19:32:15 who: nigelbabu at gmail dot com machine: bld-linux64-spot-1057 buildname: b2g_mozilla-inbound_nexus-5-l_eng_periodic revision: febb7ebc1644 command timed out: 3600 seconds without output running 'scripts/scripts/b2g_build.py', '--target', 'nexus-5-l', '--config', 'b2g/releng-otoro-eng.py', '--gaia-languages-file', 'locales/languages_dev.json', '--gecko-languages-file', 'gecko/b2g/locales/all-locales', '--repotool-revision', 'v1.12.16' , attempting to kill", log: ', repository: mozilla-inbound start_time: 2015-09-23T20:28:34 who: nigelbabu at gmail dot com machine: bld-linux64-spot-424 buildname: b2g_mozilla-inbound_flame-kk_eng_dep revision: c0b4cc5553c0 command timed out: 3600 seconds without output running 'scripts/scripts/b2g_build.py', '--target', 'flame-kk', '--config', 'b2g/releng-otoro-eng.py', '--gaia-languages-file', 'locales/languages_all.json', '--gecko-languages-file', 'gecko/b2g/locales/all-locales', '--repotool-revision', 'v1.12.16' , attempting to kill", Bulk assigning P3 to all open intermittent bugs without a priority set in Firefox components per ', .' 
id=1323248	 "To flesh this out a little: The reason we use singleton DB references is to ensure that we don't accidentally open the DB twice. This might happen when triggering the share extension from inside Firefox itself. Multiple DB connections leads to occasional hard-to-fix bugs around concurrent writes. It's conceptually neater to have the profile hold a reference to the DB, eliminating the singleton, but of course if we then instantiate the profile more than once, we'll open the DB more than once. The fix for this is probably to do something a little like we do on Android: a static map from directory to profile, memoizing the profile itself. The share extensions and the main app would have a reference to the same profile instance. The trouble there is that we'd have to get the closing lifecycle right again\u2026" 
id=1299506	 "This would be awesome to have for the first version of AS. I'm going to add this to phase 1 of AS and hopefully, we can add it in for the first launch of AS." 
id=1326391	 'Created ', Simulator Screen Shot 30-Dec-2016, 3.43.17 PM.png On this screenshot you\'ll see that a google favicon is displayed on a linkedin top site. On tap, it navigates to "linkedin.com". Usually a google favicon is matched with a yellow background. Notice how it\'s a pink background.' 
id=1237657	 'Alongside this, we should write up a support document that explains how to use this to include logs in a bug report, and add a link to that document to the GitHub page and the /topic in #mobile and #sync.', I love the idea of including some debug/diagnostic in the app but I think it needs a bit more discussion first. What is the proposal? Specially, what do we actually include under the Advanced settings menu? What options have the most value for us? This needs to be a a bit more concrete before we can work on it.', Proposal: Add new settings section, entitled: Advanced Settings Include only 1 new setting in this section, for now. The will be the setting currently entitled 'Debug: copy databases to app container'. Rename this setting to something sensible (not sure what right now. Perhaps 'Save App State for Debugging' (I'm terrible at naming things. This one's for :tecgirl) Ship. Does this sound sensible?", Couple of thoughts: Just copying files to the app container is not useful on production builds. Because there is no way to get to those files. You can\'t actually take them off the device. When we debug things, what is the thing we miss most? Is it access to log files or is it databases? I think we should start with a single: "Email diagnostic info to Mozilla" option, which opens a Mail composer with the logs attached next time you start the application. (We should already have this actually) Lets be very careful with making databases available easily. I think this is potentially a big security/privacy issue. (Logs are too, but to a lesser extent since we try hard not to log anything personal like URLs)', (In reply to Emily Toop (:fluffyemily) from ', ) ', I agree with the attaching to an email (fastest/easiest) and the string, but I wonder if we could/should still store it for users that know how to access files in iTunes? As a backup option? Necessary?' 
id=1149650	 '*** ', has been marked as a duplicate of this bug. ***', First thing I tried with to do with top-tabs.' 
id=1319421	 
id=1322448	 'Created ', ', ', (In reply to yxu from ', ) ', Sorry,the ', ', \u2192 ', , ', ', \u2192 ', (In reply to yxu from ', ) ', Sorry,the ', ', \u2192 ', , ', ', \u2192 ', Is it possible to make the same screenshots as in the blog post in English? Then we can better understand what this is about.', Created ', first run the request that appears in the application when users normally first run firefox on China licensed iPhone with iOS 10', Created ', user setting Unfortunately the request doesn't appear all the time. User needs to manually enter iOS settings turn off and open the WLAN Assist switch to make it appear.This option only appear in China licensed iPhone with iOS 10." 
id=1127067	 ' META IOS-4 tagging removed for search pusposes' 
id=1157383	 
id=1279916	 
id=1279913	 
id=1094193	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1204411	 'Why is this still an issue?', (In reply to jyriturkia from ', ) ', Because nobody has built it yet. Happy Christmas!', I wonder if there's a way to donate somewhere to help fund this particular issue? Cheers" 
id=1127002	 'Create some bugs for: * Interact with FxA * Create sync engines * Exchange creds with token server * Handle the download, merge and upload systems * Figure out the background services' 
id=1134063	 'This bug encompasses the feature in settings where a user can select from either a pre-defined, shipped set of themes (iphone size pngs), or choose an image from the ios photo gallery to use as the theme. This does not cover AMO integration or installing themes from the browser.' 
id=1134057	 'We could use some UX on the look/feel', Created ', Settings - Signed In v1.png Is 'Send Feedback' enough here? What is the exact feedback mechanism we're planning to use?" 
id=1127054	 'Background service to poll feeds to display in the Home Panel, if we decide to do this for v1.', META IOS-83 tagging removed for search purposes as not part of V1' 
id=1134061	 'This bug should cover the ability to display the theme image in every area defined in the mockups (behind the tab tray, behind the URL bar curve, etc).', Created ', ', PR ', This is a start at this. We have to show... a lot of background images here because some of them are in front and some are behind the browser. Alternatively, we could maybe put a single image behind the urlbar/statusbar? I can try and split it up a bit more, but starting reviews/feedback.', Comment on ', ', PR ', Added a bunch of comments for nits that you can probably ignore but also left some about some architecture things we can change.', Comment on ', ', PR ', Updated. Created a ThemeImageView: UIImageView class that you can basically use wherever you want a theme image. It will automatically update itself when the theme image changes. I left the Weak-list of images in to manage that which means LightweightThemeManager still knows something about views, but it isn't setting constraints on them anymore. I think that's what you wanted (I like this better).", Comment on ', ', PR ', It's old, but I think this review was supposed to be directed toward sleroux :)", Comment on ', ', PR ', Looks like this patch is pretty bit-rotten. I tried to rebase from RC master but a lot of things went awry. Going to - this and we can come back and pick off the commits and pieces of work for it to work on latest RC.' 
id=1130512	 'This bug is about creating new, tablet or landscape based layouts for the Reading View. This is a v1 stretch goal and is not likely to happen for v1.', This won't happen in v1", For v1 we are currently doing the same as on Android, which means we already support both portrait and landscape mode on both phone and tablets. Or is this bug about something different?', META IOS-53 - tagging removed for search purposes', I can work up a quick spec for margins for landscape. The L+R margins should be increased (especially for iPad). Wider columns are more difficult to read.' 
id=1130518	 'Not needed for v1. We want to match Firefox for Android.' 
id=1243590	 
id=1243588	 
id=1243592	 "The user story description in this bug is inaccurate. We don't measure taps. Stefan, can you note in this bug a description of what is measured and then resolve it? Thanks, Mika", As of Firefox for iOS v5.0 we have implemented the following two types of telemetry: Search Counts ', Session Times ', We do not measure UI telemetry (taps) in v5.0.' 
id=1243587	 "Sounds like we're going to tackle ", first.' 
id=1223660	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR - see screenshot', Created ', Screen Shot 2016-01-27 at 2.25.16 PM.png review this!', Comment on ', ', PR - see screenshot Code looks good - just one nit. Initially I was a bit confused as to what this setting meant though. 'Go to Copied URL When opening Firefox' implies that we will navigate to the URL whenever its on the pasteboard instead of showing the option to go to the url instead. Would it make more sense to name this option: 'Show Open Copied Link Banner' 'When opening Firefox' or something along those lines?", "Offer to open links on clipboard" or "Offer to open copied links"', "Offer to open copied links" +1', string change?? ^', (In reply to Stephan Leroux :sleroux from ', ) ', +2' 
id=1151727	 'Keeping the search term in the bar is also the same behaviour as Safari.', Darrin, what do you think of this one? Do we want parity with Safari?', I'd love to see this happen. I don't think there will be any objection, especially if we Matthew is willing to take a stab at it. I can provide a mockup if we want to take this forward...", Thanks :darrin. I'll get onto looking at this over the next few days. If you want to provide a mockup sometime I can make sure the UI is designed to be consistent with your requirements.", Should have a WIP branch on GitHub shortly.', Hey Matthew -- still looking at this?', Sorry for my belated reply Brian. Yes, still working on this - should have a fix done in a few days. Pinged you an email offline.', Hi all. Sorry for the lack of action here - I got a bit busy with work-related things. I am still hacking on this bug and will have an update shortly.' 
id=1219748	 'If we can get STR, this would make a great upstream bug.', Catalin, can you find STR?', I've tried all kind of scenarios based on the 'steps' from the description, but I couldn't reproduce the crash.", I'm able to reproduce this crash using the following steps: 1. Open Firefox 2. Visit www.ziare.com 3. Long tap on a link and 'Open in New Tab' 4. Repeat step 3 for ~15 times Result: Firefox crashes", Created ', Client 04-01-16 14-26.crash', Each new background webpage adds 4MB to the memory stack. This fluctuates a little but doesn't really get cleaned up. The app crashes at around 102/103MBs memory on my device. This looks like a springboard crash as no crash stack gets logged anywhere on the device it seems.", I know that Safari limits the number of tabs that can be opened to ~28. Going by the math this looks like 28 * 4mb = 112mb which looks similar to our upper limit. I wonder if limiting number of tabs is something we should consider.', I am all for that. Exceedingly large numbers of tabs make little sense IMHO on mobile. On desktop, sure. I tend to have 2-3 windows each with 15-20 open tabs on them but I also have the space to make sense of that level of compartmentalisation and organisation. On a mobile screen I just don't. The only reason I have many tabs open in Safari is that it just keeps opening them when I click on something in another app. Which begs the question. If we limit our tabs to, say 20, what do we do when someone selects ViewLater or sends a tab from another device? Do we fail to open those tabs? Do we replace the oldest or least recently used tab? Or do we just say 'yo ve reached the tab limit, please close some tabs before we can open your queued tabs'?", I think conserving the tabs you already have open is more important than opening new ones. Removing a tab should always be an explicit action. It does get challenging though having to provide error UX across various errors such as ViewLater though. I remember trying to add a 'Sent!' toast but wasn't able to because action extensions don't normally have UI unless presenting in a full modal view controller. Seems like this plays into our tab management story as well because we should make it easier for users to know about their open tabs and remove all of them at once. Total side note, for example, it would be cool if we could close the current tab I'm on without having to navigate to the tab tray. I run into the same situation with Safari all the time where it just keeps opening tabs for sessions I don't want to be long-lived. NI'ing Robin - any thoughts?", Not sure if conserving the tabs you already have is always the priority. If I have just ViewLatered a tab, that means I actually want to read that soon. However tabs may already exist for a site I opened 2 months ago, never looked at again and have utterly forgotten about. I can't help thinking some way of tracking which tabs are our most recent/frequent and then using that to determine which tabs we can clean up (especially at restoration etc) and which our user is most likely to want around would be useful. We could then do things like 'Yo ve reached your tab limit. Would you like to close <3 least recently used tabs> in order to open the tabs yo ve sent from your desktop?' which would feel very personal.", (In reply to Stephan Leroux :sleroux from ', ) ', I\'d rather we didn\'t force the user to choose. Pushing them into an active resource management role -- "oh, if I want to click that link, I need to go close some open tabs" -- feels very Windows Mobile. (That\'s why I suggest zombies: the limit\'s high enough that it won\'t bother most users, it works fine if you _do_ actively manage tabs, and it\'s better than a big STOP sign.) ', Both of those -- current tab, and close all -- are part of FIOS-224, which I think Robin's already thinking about.", Can we avoid the need to address a limit in most of the app, and certainly the UI -- both of which seem like a horrifying ball of wax -- and instead just re-zombify tabs oldest-first? So you could have 10 or 15 live tabs, altering the limit based on memory pressure, and if you open more we start putting them to sleep at the oldest end of the queue. That logic could presumably be jammed into TabManager without significant pain. Re-zombifying would involve pickling the back stack (which we already do?) and killing the webview so it releases all of that retained memory, including the retained memory on the other side of the IPC bridge.', (Yeah, that comment didn't post because I mid-aired with Steph, so imagine I posted that at ", .)', (In reply to Emily Toop (:fluffyemily) from ', ) ', As a user, I expect to be able to open as many tabs as I want, and close them when I want. It\'s not uncommon for me to churn through a forum looking for threads about a problem, opening a dozen or more tabs to read in the background. We have a "99+" label for the Android tabs tray, and it does see use. On Android we zombify tabs when we run out of memory. It\'s also worth thinking about iPad, here. The iPad is a desktop replacement for a lot of people. ', And it makes closing them a huge pain in the ass with its stupid rolodex layout.', ', Just to confirm the zombie theory (which we all pretty much know anyway), I just repeated the same test but with each background tab being opened as a zombie. our memory footprint never went over 50MB and I managed to open > 30 tabs with no crashy crashy. Shame they all display as blank tiles with no titles in the tab tray.', (In reply to Emily Toop (:fluffyemily) from ', ) ', That seems like a solvable problem! :D', (In reply to Richard Newman :rnewman from ', ) ', Indeed. Attempting to solve that right now.', Just want to point out that WKWebView already participates in the OS didReceiveMemoryWarning in some cases. If I open 40+ Google tabs, then go back and select one I opened earlier, the tab is gray, but then reloads along with the back stack. This zombification is done automatically, though the unzombification (reload-on-select) is triggered by us at 1 . *Note that the above is only true if you run the app outside of Xcode.* For reasons unknown, the OS seems to maintain a tight grip on content processes when running from Xcode, and didReceiveMemoryWarning is never fired. Generally, I've noticed the tab limit before crashing is much lower when running from Xcode versus opening directly from SpringBoard. That said, I'm still able to reproduce the steps in ", when not running from Xcode, and it still crashes at <15 tabs. It could be worth investigating why the OS events aren't kicking in in this situation (or if they are, why aren't they working?). We already know that we can't restore the back stack on our own because of ", , so I'd urge us to avoid homemade solutions to this if possible. 1 ", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Sorry, that should have been didReceiveMemoryWarning is never *handled* (by the WKWebView). It's still fired as we see in the Xcode log.", (In reply to Stephan Leroux :sleroux from ', ) ', My first thought is to keep all tabs and zombify. We should not replace tabs, ever. I can absolutely see adding "Close Tab" to the upcoming Menu as an option\u2014we\'re already offering it on the tabs tray (p&p). I assume if you close the tab you would expect to then be on the tabs tray? Then the question becomes; if you have this long grid of tabs, would you expect to be at the beginning or the end? Or would you expect to be on the next tab? Tab management would help in this regard. If we could group tabs, we could automatically cache (even for offline) and zombify the group. Stephan, have you seen how Pocket throws a toast up from Tweetbot? That\'s what I loosely based ours on.', One option is when we select 'Close Tab' from the menu while viewing a tab, we perform the animation to to tab tray then perform the deletion swipe animation on the tab. The result would be putting the user in the same place as if they went to the tab tray to delete the tab. Some benefits would be: 1. The user would have more context as to where the tab was deleted from. 2. Some browsers navigate automatically to the next tab after closing one but I don't think that's what users want to do after closing a tab. Anecdotally from my experience, if I'm closing a tab I either want to close all the tabs or I want to navigate to another that is usually not just the 'next' tab. I think taking the user back to the tab tray solves both of these if we were include a 'Clear all' option in the tab tray. ", Yup I remember looking into putting up a toast but ran into difficulties being able to show something from an action extension. I think the best thing we can do is start animating a view from the bottom modally then cancel it right away to trick the extension to display the toast. I'd like to go back and take another look at this because we definitely should have some visual feedback.", So, I have tracked this bug down to this line of code: webViewContainer.insertSubview(webView, atIndex: 0) at line 1423 in BVC browser(browser: Browser, didCreateWebView webView: WKWebView) Remove this one line and all our multiple tab issues go away. Adding a subview to the webViewContainer for every tab we open regardless of whether we're displaying it or not seems silly, especially as we add it as a subview again at tabManager(tabManager: TabManager, didSelectedTabChange selected: Browser?, previous: Browser?) Problem is, when I remove that line, some of our background opened tabs then open scrolled part way down the page when you select that tab, but this feels like a solvable problem.", (In reply to Emily Toop (:fluffyemily) from ', ) ', Well, removing this one line and the snapkit stuff below it and then relocating the snapkit stuff to didSelectedTabChange', Created ', ', Pull request', Comment on ', ', Pull request no test added for this as the bug causes the app to get killed with no errors and I thought that would screw up the whole test suite rather than just fail the one test, which might not be a desirable outcome. Happy to add a test if you think it would be useful here though. I was kinda 50/50 and landed on the side of less work ;)', Comment on ', ', Pull request Nice, it makes sense that this would fix the Open in New Tab part of the STR since the web view content process isn't actually created until it's attached to a superview (you can see this when switching tabs -- the progress bar appears and starts loading only after selecting them). Effectively, this is like passing zombie: true to addTab() in TabManager.swift, causing creation/adding of the web view to be delayed until it's selected. I'm still a bit concerned about the underlying crashes/memory pressure from having N active web views; that is, once the tab has been selected once and its web view has been initialized, we're still at the mercy of the OS to zombify the web view (actually selecting these tabs still causes my iPod touch to crash at ~10 tabs when running from Xcode, for example). Not running from Xcode, I definitely notice some perf improvements with this PR applied, though -- maybe detaching the web views from the container hints the OS to zombify them sooner? In any case, this seems like a good idea. One suggestion: if we notice perf improvements with fewer attached web views, seems like we might attach as few as possible (i.e., only one child on the container at a time). Also, tabs opened via Open in New Tab will no longer have thumbnails since they aren't loaded. I'd file a follow-up so it's on the radar, though I'm not sure how we can fix it if we go this route.", So it looks like I should reduce my tab cleanup max tabs code to start cleaning up tabs after 5 open tabs rather than 20. How about we actually create a UIView subclass for the webViewContainer that handles it's own webView stack? Then it doesn't matter where we add new webViews it will always ensure that there are only the requisite number of webViews to prevent a memory issue. Then, if we add a webView later that is already on the stack we can just move it to the top rather than re-adding it. We can then go back to adding on new webView to get the screenshot to the tab.", Comment on ', ', Pull request Looks good to me just one question. I like the idea of extracting out the container management logic from the BVC and into it's own thing. I don't think we would want to subclass UIView to add in business logic for removing/adding subviews though since UIView should focus more on view-specific stuff. What about creating an NSObject subclass that contains the logic and owns a container view that we reference from the BVC instead?", Comment on ', ', Pull request Looked at the new commit adding the container class and looks good - just added some comments which yo ve already addressed. While I was running the app in the simulator I did notice that the memory used of the app was still going up pretty significantly so I'm not sure how much of an impact this patch seems to have. I ran instruments on the simulator to get an idea of what else might be going on and found some interesting things. I've attached a couple of screenshots: the first being on app launch (base) and the second after opening 16 tabs in the simulator. It looks like we are dramatically allocating and not releasing memory that is being created from SELdidClickAddTab and the animationTransition calls. Digging in a bit further, it looks like both of these calls are related to screenshoting. The SELdidClickAddTab call generates the screenshot using the extension method on UIView but doesn't seem to ever release it. Looks like some other people have been noticing this as well: ", ', Not sure yet but I think looking at how we capture the image and refer to it within our app might lead to some more clues. Additionally, the animationTransition call makes reference to the transition snapshot we take to do the animation which I think is also keeping the snapshot around indefinitely after the animation if finished. I feel like if we address these two address we'll be able to dramatically improve our memory situation. Lastly, I've also included the profile dump generated from instruments. I feel like this patch should also get added since it could have been also accounting for some of the memory but we should also look into this snapshot stuff.", (In reply to Emily Toop (:fluffyemily) from ', ) ', Why 5?', Created ', Memory Profiling', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Because it's a small enough number that it should never cause a crash problem on any device, and large enough that we retain the ability to go back to the previous tab without having to do a whole bunch of extra work. When I allowed only 1 web view on the container view then viewing the tab previous to the one I am currently on caused it to reload and re-render, whereas if I don't remove and re-add I can return to my previous tab without a refresh. 5 seemed like a good number to keep around to ensure your most recent tabs are around. Basically it was an arbitrary number.", (In reply to Stephan Leroux :sleroux from ', ) ', My 2\xa2: I think this is worth looking into before or instead of introducing another layer of indirection and putting the number '5' anywhere :D", :bnicholson I've updated the PR with the changes I mentioned above if you want to re-review.", About the arbitrary 5 limit: I tested the didReceiveMemoryWarning callback at 1 , and I do see the URL bar updated with "LOW:MEMORY" when adding multiple tabs (both when running from Xcode and independently). Can you see if this is triggered for you? If so, this could be a good option for deciding when to detach those views. 1 ', Comment on ', ', Pull request Doing some testing on my iPod touch, I'm actually not seeing any improvements with this PR over master. On both builds: When running from Xcode, I'm able to exactly reproduce ", : Open in New Tab about 15 times on m.ziare.com, and the browser crashes. When not running from Xcode, I don't crash, but things get really pretty slow after 15 tabs or so are opened. This is evidence that the OS zombification is kicking in. Flipping the r+ since I think this still needs some more investigation.", hiding webViews makes no difference to the crashes here.', (In reply to Brian Nicholson (:bnicholson) (on PTO through February 3) from ', ) ', Interestingly, when I apply this patch I don\'t see "LOW:MEMORY" anywhere and when outside of a debugger (in case the debugger is the thing that is preventing the low memory warning being fired) with this patch and a call to clear all the background webviews when the low memory warning is fired, the crash still occurs. On my 5s the app gets slower and slower and slower as it approaches 16 tabs, but still doesn\'t display the LOW:MEMORY warning. It appears things are happening a little differently on your device than mine.', Further investigation: It is definitely the adding of the WKWebViews as a subview that is causing the problems. Adding a UIWebView or simple UIView at the same place does not crash the app. Removing all delegates, helpers & configurations and adding a simple empty WKWebView with no request loaded does crash everything though. However, when creating a sample app that just adds as many WKWebViews to a UIViewController as requested doesn't cause a crash. So, it's not screenshotting (that only occurs when URL is loaded and everything crashes even if I remove screenshotting), it's not loading of URLs, it's not anything else we do with delegates (as I've removed all of them) and it's not helpers. And yet we get a crash. Examining the WKWebView source right now in an attempt to understand what happens when the WKWebView renders." 
id=1109806	 "Dolske has a patch that gets Firefox for OSX to handle a handoff from Safari on iOS. I'll bet we need that part in place for Firefox (iOS) -> Firefox (OS X) to work.", covers making desktop Firefox respond to Handoff, so that activity on an iOS device can be handed off to Firefox (eg, load a page on mobile safari, continue viewing it on desktop). Yo ll want to look at the Apple docs for NSUserActivity. It's fairly trivial for simple URLs (which is what we're mostly concerned about in the browser)... To receive a handoff (ala ", ), there's just some minimal glue to indicate you can receive web activities, and implement a handler that gets called. To publish a handoff looks about as simple -- although it appears that requires being an Apple-signed app, so I wasn't able to trivially test it. The magic happens through NSUserActivity, which allows an app to pass blobs of data around to instances of itself on other devices, plus an optional URL fallback when a native handler isn't available. (For example, a map app might handoff detailed state to another instance of itself, with a fallback to ", ). Web browsers can simply pass around just URLs. (Our use case is a little special; remember that when reading the docs or you might be confused. They're geared towards native apps, with URLs as a simplified fallback.) FWIW, we could actually do Handoff better than Safari, by using the data blob to pass additional state (such as what we use for session store). (In reply to Stefan Arentz :st3fan from ", ) ', AIUI activities with a URL can be received by any app supporting that, but otherwise you can only send data blobs to other instances of your app. ', It requires iCloud, but I haven't seen a clear description of the actual mechanism. I think I read that it's using iCloud to pre-pair your devices with Bluetooth, and that the actual handoffs (or announcements of availability?) are done via BT. Presumably that allows things to work without internet access (after initial paring), but I haven't tested. ", ', allows desktop to receive URL handoffs. But it appears to publish one needs to be a signed app in their App Store. So that's probably not possible with Firefox, although perhaps we can work around it by having a minimal helper app or something...", Let\'s think about this for our longer-term roadmap. Potential: * Opening links from Safari on desktop. * Opening links from Firefox on desktop, pending other work, and perhaps not possible. * Sending links to desktop. Anything we need to do here? * FxA signup? * Detecting handoff interaction _on desktop_ and offering: * Firefox for iOS in general, if not installed * FxA, if installed but not in FxA * Reminder to use Firefox for iOS, if we\'re sending from Safari but we have "ios" clients connected to Sync?', Created ', ', Pull request', Comment on ', ', Pull request A couple of nits but it works.', (In reply to Emily Toop (:fluffyemily) from ', ) ', Thank you for your review!! I updated my patch. So could you review again?', Comment on ', ', Pull request Noticed this has a blank reviewer so I'll pick it up and check it out.", Comment on ', ', Pull request Thanks for the patch and sorry for the churn on this. I left some comments on the PR with some suggestions and a couple of questions but I think everything looks sane. I'll flip the r+ when we hash out some of the questions.", (In reply to Stephan Leroux :sleroux from ', ) Thank you!! I updated my PR and answered your question. Please review again.', Comment on ', ', Pull request Clearing r? until new patch is available.' 
id=1268939	 ' Added an alert that asks the user to remove logins when signing out of Firefox.', Created ', ', ', Thanks for the patch Jacob, let's start with some feedback.", Okay. I was thinking when the user logs out, it would make sense to ask to clear private data too. But maybe showing 3 different alerts is too many?', This might be a bit more complicated than it sounds. Firstly, I can't tell from ", or the bug title if you intend this to prompt the user, Robin; I hope we would, and Jacob's PR does, but\u2026 Secondly, I think we have some logic in other CPD places that checks whether there's anything to prompt about, so we should follow that pattern here -- there's no point in prompting if there's nothing to clear. Thirdly, along the same lines, we probably shouldn't prompt if yo re not syncing passwords in the first place. Users aren't necessarily syncing passwords just because they're signed into Sync. Imagine how this user would feel: * Use Firefox for iOS for a while. Saves a bunch of passwords. * Sets up Sync on her desktop. Chooses to sync bookmarks and history only. * Signs in to that FxA on her iPhone. * Finds that she doesn't like having her history all mixed up. Signs out of her FxA. Expected: she still has her logins on her phone. Actual: she's lost all of her saved passwords (or she's prompted and might mis-click). They're entirely gone, and were never synced anywhere. (This is part of ", and ', , so cross-linking those.)', So, check for stored logins, and check for syncing of logins only prompt is both are true, and have a confirmation? Seems like a lot of alerts. Maybe have a button below the logout button called "reset" that would logout, clear private data, and logins?', (In reply to Jacob White from ', ) ', IMO: only show an alert at all if the user is syncing logins _and_ there are stored logins. Otherwise, just sign out. Only one or zero alerts.', actuaoly, I'd think it should be the opposite, if yo re syncing logins and yo re logged in. There's no risk to losing logins if logging out removes logins.", Although there is no risk to the user losing their logins since they are attached to their FxA, I feel like they should be aware of the 'removal' from the local device since it might appear as a hidden side effect of signing out. Has Logins, No FxA -> Logins stay, no prompt Has Logins, FxA, No Password Sync -> Logins stay, no prompt Has Logins, FxA, Password Sync -> 'Passwords will be removed from this device but still be available on other connected devices' No Logins, *, * -> No-op As for the code, we have a few alerts we build up from UIAlertController in an extension. If yo re adding a prompt that's probably the best place to add it. For checking if the user has logins that are 'syncing', you can use the hasSyncedLogins method on the profile object. I used this within the Logins list view for determining what kind of prompt to show when deleting logins 2 . I believe you can use this check to determine if the user has both logins and if they are syncing so you don't need to do two separate checks. :rnewman would know more though if this is the right call to make. 1 ", 2 ', If they're not signed into a Firefox account, then there's nothing to log out of. So there's only 3 cases to consider: Logging out with logins and login sync -> prompt Logging out with logins and no login sync -> prompt Logging out with no logins -> no prompt Also, yo re suggesting notifying the user that their logins won't be deleted instead of prompting them to delete the logins? Here's the latest changes: ", I'm not sure we need to prompt the user in this case since nothing changes. I could see us telling the user that they are safe to log out without losing their logins but since we plan on prompt for the opposite case - deleting them with password sync on - I don't think we need both. ", Sorry - I meant the opposite. Prompt the user only when we're removing any logins due to signing out so they user is aware of the (potentially unaware) side effect. ", I've left some comments on the commit. Thanks for looking into this!" 
id=1164236	 'The intro wizard has changed significantly so the previous assessment of its accessibility is no longer valid. Right now, there are these accessibility issues: - no way to go to the next/previous screen - there are no longer the Next/Previous buttons, scrolling gestures do not work; only by a workaround - double-press-and-hold, then flick right/left - scrolls accordingly - the adjustable page indicator cannot be adjusted - images are not conveyed to accessibility (no descriptions) - e.g. the first image contains a hint where the tabs button is with respect to other UI elements, and that it contains a number of tabs. This is a useful "101"-type information that should be conveyed to a VoiceOver user too - "Start Browsing" should be invokable by accessibility escape gesture', Created ', ', Pull Request The bug will not be fixed after integrating this first PR. (That will only happen after integrating a second PR which I anticipate in 1-2 weeks.) So please do not close this bug after merging this first PR.', It's usually a good idea to open a separate bug per pull request; I would have suggested creating a separate bug specifically for landing the early strings (this helps reduce clutter and avoid confusion). No big deal though. Thanks! ", What prevents this from landing?', I haven't finished it yet (though I have some intermediate state in my git on my laptop). The original pull request was just for translatable strings, with actual work to follow in another pull request.", Hey Boris, I noticed that there are a couple of new strings added in this patch: ', Do you know if these made it onto master? We're currently string frozen for 1.0 so any additional strings will unfortunately need to be added to the 1.1 release.", Hello Stephan, yes, the strings luckily made it, the only thing left now is to finish the actual code :-)', Awesome :) Thanks for all the hard work on the accessibility stuff btw!', (In reply to Stephan Leroux :sleroux from ', ) ', Thanks :-)' 
id=1324557	 "Let's not call these 'trackers'. Call them 'stats' or something!" 
id=1210109	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", Created ', IOS Menu Proposal 2015-02-10', Hey. I\'ve been looking at the menu screenshots. Just a couple of first impression clarification questions. Some of them may feel obvious, but as they say, "When you make an assumption, you make an ass out of you and umption". 1. For the Panel Icons in the popover, do these replace the panel icons in the Home Panel itself, or are they just quick links to the associated home panel item (I would guess the latter but checking)? 2. How does the addition of a bookmark from the popover affect the UI? Does the same button display filled and replaced with "remove bookmark" or similar without dismissing the popover? 3. When presenting Settings from the popover, does this present settings over the top of the browser, or open the tab tray and present settings from there? I would expect that it would present over the top of the browser so dismissing it leaves you at the browser. 4. Will there ever be fewer than 3 tools in the popover? If so, should 2 tools be displayed side by side or stacked on top of each other? 5. Will there ever be more than 5 panel icons in the panel bar? If so, does the panel bar also need to page as the tools panel does?', (In reply to Emily Toop (:fluffyemily) from ', ) ', The latter is correct! ', I think the pop-over can close after pressing the action. This might be a cool spot for a little animation where the star turns blue and stays on screen for a moment after pressing it, before it disperses. Just a little bit of visual feedback. ', Your expectations are correct: "present over the top of the browser so dismissing it leaves you at the browser" ', I don't think there will be ever be fewer than three. ", No, there will never be more than 5. The only thing that may need to page as tools are added is the tools panel.', Sorry, another comment. On portrait the menu is on the toolbar that is attached to the webpage, yet on landscape it is accessed through the URL bar. When we're displaying the home panels or on a brand new tab with no webpage loaded yet this means we will not be able to access this menu in portrait. I guess they always have the tab tray to open new tabs and access settings, so being on the home panels will mean everything behaving exactly as it does currently and people will never need to access find in page or bookmarking when there. There just feels like an inconsistency there between access to functionality according to orientation. I am sure you have given long and serious thought over this already. If you could let me know if there need to be any changes to how/where the toolbar gets displayed in portrait mode to counter this that would be ace.", (In reply to Emily Toop (:fluffyemily) from ', ) ', Great catch, Emily. Robin and I just discussed this and feel some changes to the panel view will help. For one thing, in portrait mode all the panel items are hard to reach. That means I have to really stretch and switch to two hand usage to hit those panels. What we're proposing is that the panel icons be moved to a bottom bar which contains the menu icon. This will be consistent with the rest of the screens and allow users to access the panels quickly as well as launch new tabs and access the settings. Mockup: ", Robin will address the visuals in her menu spec.', Designs: iPhone: ', iPad: ', :tecgirl Can I just confirm the rules around when each menu item should be displayed? New Tab, New Private Tab, Settings -> Tabs Tray, Browser, Home Panels Add/Remove Bookmark, Find In Page, View Desktop Site -> Browser', Confirmed.', I have a question,when the screen is protrait,why all the important function buttons were put at the bottom tool bar ,just only set the multitab button at the top bar.maybe under some situation,I have to frequently move my finger up and down to switch newtab and multitab.', Comment on ', IOS Menu Proposal 2015-02-10 Marking obsolete as there are now official designs from Robin.', (In reply to Gong Xudong from ', ) ', We did a lot of research on how users hold their phones and found that in portrait mode it makes the most sense to have the menu at the bottom as this enables users to access the menu and it's settings with one hand. This includes the ability to open new tabs, so users don't need to go through the multi-tab screen as much any more, unless they are managing their tabs. In landscape, the menu appears in the top bar as it is easy to access using only your thumbs.", Created ', UCbrowser design UCbrowser design', (In reply to Sevaan Franks :sevaan from ', ) ', I absolutely agree that puting the menu at the bottom.so users can open the newtab and setting with one hand. whether we could put the multitab at the bottom,takeing the "share" button\'s position.comparing the two buttons\' touch time and frequency would be helpful to decide which button should be put here.But in china,almost all the mobile browsers put the multitab at bottom.maybe chinese users don\'t like to share page. you could refer the ', .', (In reply to Gong Xudong from ', ) ', Thanks Gong, we'll take that in to consideration. In the meantime, maybe we can add a shortcut to the multitab view if a user long-presses on the New Tab icon in the menu. And if they long-press on New Private Tab, it would go to the Private Browsing multitab view.", (In reply to Sevaan Franks :sevaan from ', ) ', In fact\uff0cI don\'t think the long-press for some function is a good design,that\'s a trade off.if we could directly show what user\'s can do ,why we hide this function in long-press behiovr.On ios 2.0 version,a lot of chinese users ask how they can open the desktop sites.they don\'t konw long-press the refresh button could pop out "requesting desktop sites".In china, we have a common sense,taking the users as idiots,they don\'t have any background knowledge,they do like this ,just because they don\'t need to thinking,absolutly intuitive.', Created ', iPad portrait', Created ', iPhone Portrait', :tecgirl - the changes in the latest version of the menu mockups includes some closed tabs notifications. Are these tied in with the menu story or are they a separate one (just want to know if there is anything in these designs I should ignore for the menu)?', (In reply to Emily Toop (:fluffyemily) from ', ) ', :fluffyemily - Good eyes, you! The toast is part of design for Tab interactions (', ), with the action included in the menu design.', :tecgirl - can there be assets for this soon?', Created ', Menu Items Early Implementation Screenshots.zip', Comment on ', Menu Items Early Implementation Screenshots.zip Here are some very early screenshots. They are: Normal iPad and iPhone menu Private iPhone, showing HomePanel layout and multiple page layout Some feedback would be aces. Please note 1. I have not added any official icons yet. Some of them are totally the wrong size for the menu 2. There are no toolbars yet so the iPad popover is just being displayed from 0,0 3. I am having trouble with the tint colour on the toolbar icons, but I think that's because they are incorrect in the first place and so applying the tint is doing something odd. I'd like to revisit the question of the colour of the toolbar icons when I'm using the correct assets.", :tecgirl I've got a couple of questions regarding rotation. If the menu is being displayed in iPhone portrait (i.e. from the bottom of the screen) and then the user rotates to iPhone landscape (where the menu should display in a popover from the top of the screen), how should that rotation be handled? Should I dismiss the menu and redisplay it from the urlBar, then do the same when rotating back to portrait? Feels like a scenario I should have asked about before....", (In reply to Emily Toop (:fluffyemily) from ', ) ', The menu should be closed on rotation. The user can reopen it again if they like. ', We can just dismiss it and leave it closed. Thanks!', Created ', menu-assets.zip', :tecgirl - we seem to be missing new icons for the following actions: A Stop Reload icon (unless we want to use the existing ones) x1 & x3 sizes for the share icon.', Created ', bottomNav-assets pdated :fluffyemily replace all of the bottom nav with these. they are the same size, but are a bit darker to match the new menu icons. thank you!', Created ', ', UX Review Hi :tecgirl, I'm sticking this under the umbrella issue as it's probably easier to keep this separate from the specific tech stories. Please cast your beady eye over the menu as is and let me know all the things that I missed :)", Comment on ', ', UX Review UI does not change if menu > npt. then, menu > nt. menu again and the ui is still in 'private mode'. Occurs the other way as well (npt > menu > nt) in any view (webview, tabs tray, panels). The panel icons are roughly half the size they should be. 44x44 @2x ", The menu asset varies in color (is lighter on the menu). It should be the same asset. Is the alpha adjusted? It's also 4px lower on the menu, so your eye jumps a bit. ", Close all tabs =', Damn, bugzilla just stripped everything I wrote when an emoji was dropped. No love. Again: Close all tabs = thumbs up! Keeping Bookmark star animation = 2 thumbs up!! Everything else (animation aside) and all of your work thus far on this = \u2605\u2605\u2605\u2605\u2605', :tecgirl - Just pushed a new version with those changes. Looking forward to hearing what I should do next on the animation.', :fluffyemily \u2014\xa0panel icons look good on normal browsing mode \u2014 though nothing happens when I tap them. panel icons are missing in pbm.', :tecgirl third time lucky?', Menu without toolbar work landed as ', All the strings landed in this PR use the English string as identifier, they should have a separate string ID based instead. I also wonder about the different wording: "Request Desktop/Mobile Site" vs "View Desktop/Mobile Site" in this new menu. Is the difference wanted? What\'s the reasoning behind it?', (In reply to Francesco Lodolo :flod from ', ) ', On Mobile, it's a request, since sometimes the site cannot return a Desktop version.", (In reply to Emily Toop (:fluffyemily) from ', ) ', So close! when in Private Mode, if a panel is chosen from the menu, the UI switches back to normal. It should remain with Private UI until user switches back.', (In reply to Robin Andersen :tecgirl from ', ) ', Let me clarify the question. Right now I see 4 strings in the code. Two preexisting: * Request Desktop Site * Request Mobile Site And two new added here: * View Desktop Site * View Mobile Site', (In reply to Francesco Lodolo :flod from ', ) ', This is because the strings were created before that work happened, and then I forgot to migrate them over after the work was done. Will raise a bug for this and get on it right away. Thanks for spotting it!', (In reply to Francesco Lodolo :flod from ', ) ', The strings are View Desktop/Mobile Site on the menu as that was what they were on the mocks. Let me know if you want me to change them to Request instead.', :tecgirl have added a n(In reply to Robin Andersen :tecgirl from ', ) ', :tecgirl - Fixed bug under ' 
id=1314390	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1144859	 'Created ', Settings UI View with Access Project Documentation I based the UI on what currently shows on the InVision project. The copy reads "Access Project Documentation" but perhaps "Access Documentation" is sufficient. I placed the Table View Cell in the last position of the Settings Table View as I believe it has the lowest contextual hierarchy.', Hmm, would this be different from a Help link? Maybe my mockup wasn't clear, but I think the 'Help' link was supposed to go to the docs :)", Created ', Removing uneccessary table cell. "Help" will now direct users to the documentation.', Comment on ', Removing uneccessary table cell. Nice! This should open the Help docs in a new tab maybe? i.e. dismiss the Settings panel and open a new tab (vs showing the help docs in a webview within settings...)' 
id=1143158	 "darrin: just surfacing this for you to be aware of. It's not a v1 thing, but we will want split-pane mocks at some point.", This looks very difficult :( The UIKit framework mandates that a UISplitViewController be the root controller and take the entire screen, at least in the past: ', . This is not feasible for a home panel. See ', for reference.', sachin: this is a more open ended, challenging ticket. Interested?', Yes, I am interested, I will try to find more about UISplitViewController.', Just a small update on how the development is going as it has been a very long time. Added current UI its a work in progress. ', (In reply to Nick Alexander :nalexander from ', ) ', (In reply to Sachin Irukula from ', ) ', Hey! Progress updates are appreciated, and this looks really good!', Created ', ', Pull Request', Comment on ', ', Pull Request I'm going to redirect this review.", Sachin this looks great. But, I would like to show this to the UX team first before we land this. There are a couple of things that we need to figure out. For example empty states (what to show where), pull to refresh (where? and what happens in the empty state). Is this something we also want on the iPhone 6 Plus? (Mail.app has a similar layout in landscape there) So, please be patient and I'll see if we can do this for v1.0. Otherwise it will very likely move to a followup release that we will do quickly after v1.0.", (In reply to Stefan Arentz :st3fan from ', ) ', I don't think its possible to implement this for iphone 6 plus unless there is a way of detecting current device as iphone 6 plus and handle controllers similar to the way ipad and iphone are handled currently. In mail app split view controller is the root view controller and in firefox that's not the case.", I found this on SO that might temporarily work: ', I find it strange that Apple did not take the iPhone 6/6+ in consideration when building UITraitCollection/Size classes. I feel like that's the right abstraction to use to differentiate between the screen sizes but it seems them overlooked this case when developing it :(", (In reply to Stephan Leroux :sleroux from ', ) ', I found this SO during development but I didn't want to take exact size into account because that can change with the release of new iphones all the time.", Adding this to triage to find out if we want to have this in V1 or not.', Comment on ', ', Pull Request Removing review flags. This can be looked at post V1.', Because we're skipping this for v1, I'm going to close the PR. We'll continue to track this bug, and we can either reopen the PR or rebase and open a new one. " 
id=1134262	 "I'm in favor of just making the webview private entirely if we can. Is there some real reason we need to expose it? i.e. the delegates seems like something easy to wrap. The back/forward list is something we can forward across a bridge. We can have a generic getView() method for attaching it to the BVC (yeah, that exposes it slightly, but at least attempts to make it somewhat generic).", (In reply to Wesley Johnston (:wesj) from ', ) ', I wouldn't say it's easy to wrap. Aside from the webView delegates themselves, we'd have to wrap all of the WK* classes used in these delegates: WKWebViewConfiguration, WKNavigationAction, WKWindowFeatures, etc...", I don't think hiding the WKWebView is going to help us at all. Instead I think we should embrace the WKWebView API and not try to abstract it away. It will only introduce extra layers and make things more complicated. I don't see a good reason to do that. Right now the API of Browser is pretty much a copy of what WKWebView exposes. What is the point of having functions like goBack() { webView.goBack() } ... this does not add anything except for indirection. I think if we feel a need to customize the behaviour of WKWebView, we should make Browser a WKWebView subclass. I think this is what we had in an initial revision of the app." 
id=1247340	 '*** ', has been marked as a duplicate of this bug. ***', Please assign to me, I'd like to work it." 
id=1152380	 "We're not going to do this for v1, since we're not intending to ship Reading List sync for v1. We're unlikely to get Profile/Avatar support for v1, and that's the only other OAuth service we'd care about." 
id=1245217	 'Created ', ', PR: ', This patch improves L10N snapshots. The output can be seen at: ', Making incremental changes to get more coverage. * Adds screenshots for lots of empty states * Adds a l10n-screenshots.sh script to run them for a number of locales * Adds `accessibilityIdentifier`s where needed * Introduces a MOZ_SKIP_WHATSNEW environment variable that UI tests can use I'll squash all the commits into one before merging this.", Going to add a number of incremental PRs to this bug to get L10N screenshotting in a good state.', Comment on ', ', PR: ', Updated patch. Many commits rebased into single commits: This patch improves L10N snapshots. The output can be seen at: ', This patch now has three main parts: * Adding more accessibility identifiers throughout the UI code. These are needed to properly locate UI elements. * The `TestAppDelegate` and `main.swift` are now aware when the app is run as part of a *Fastlane Snapshot* test. In that case the `TestAppDelegate` is used. And we skip the *What's New* page. * Added a bunch more snapshot test cases to get better coverage of the application The last commit in the patch is about adding `l10n-screenshots.sh`, which is a *temporary* script to run these screenshots. This only exists because I can't get Fastlane to work. I'm also happy to remove this script from this patch and just run a local copy until we have resolved the Fastlane issues.", I removed the hacks to disable things like What's new and the code to clean the profile. This is now handled by the TestAppDelegate that we already have. I only made it aware of Fastlane Snapshot tests and we do not skip the Intro in that case because that is something we actually want to screenshot.", Comment on ', ', PR: ', Looks fine to me!', Created ', Pull request Helping getting fastlane snapshotting back up and running by fixing some issues', Comment on ', Pull request LGTM' 
id=1158514	 'Boris, you interested in this?', Yep, will do after 2 other issues (', and ', ).', Upon rereading now, I can\'t believe how much I screwed up the original report. Here is a corrected version: Steps to reproduce: 1. Use iOS with English (US) UI 2. Open a webpage that does not use "lang" attribute in HTML, does not return Content-Language in HTTP response headers but has Content-Language in the meta section (e.g. <meta http-equiv="content-language" content="cs">) - e.g. open mobile version of idnes.cz and there open a link to any specific article. 3. Open Reader Mode 4. Launch VoiceOver and let it read the reader mode content (flick down with two fingers) Actual results: VoiceOver reads the whole reader mode webpage with English US voice (the default voice/language). Expected results: VoiceOver reads the whole reader mode webpage with Czech voice, as it has <meta http-equiv="content-language" content="cs"> and does not use lang attribute in HTML nor does the server return Content-Language in the HTTP response.', Also need to verify if with Content-Language header present in HTTP response, the same header gets also passed in HTTP response of the built-in server for the reader mode.', We will definitely take a patch for this, but taking it out of the tracking list.' 
id=1307166	 
id=1159439	 'I want this more than ever to open a few related remote tabs all at once; too many taps to get back to the list', This should be part of a larger context menu feature post v1', as we already have long press on top sites for deletion, we need to think carefully about how to make long press a consistent experience across all home panels - possibly a very good candidate for 3D touch?', See also ', (re-work/remove edit mode) so this can be compatible with Top Sites', Hi Bryan, can this be worked on? Or, would you suggest waiting on ', ?', Hey Maurya! I'd talk to :tecgirl about this since she makes these kinds of design decisions :)", Yes, this (and other related bugs) have been lingering for a long time. Let's add a contextual menu on longpress, with the options: Open in New Tab Open in New Private Tab Send to Device (if available) Remove and add 3DT functionality (Peek & Pop) with the same options if pulled up.", Hi Robin, do the Activity Stream developments require any change to this task's approach as you listed out in ", ? Just wanted to check with you before getting started. As a first step, ', has been completed. Contextual men s appear on AS Panel's top-sites and highlights sections.", Do we want the "Send to Device" option? The top-sites context menu has 5 options already. The highlights context menu has 6. So, would adding more options be ok UX wise? The "Share" option in the context menu will provide a shortcut route to the "Send Tab" option in the "Share Men .', (In reply to Maurya Talisetti from ', ) ', The menu is looking good! As far as functionality, 3DT is missing. (In reply to Maurya Talisetti from ', ) ', Let's leave Send Tab in the Share menu for now.", Created ', ', Link to Github pull-request: ', Created ', Landscape', It looks good so far, but there are a couple of bugs this causes. Refer to the attachment I posted. The landscape version of longer menus on iPhones get cut off! Once this is resolved, I'd be happy to retake a look at it :)", Created ', ', Link to Github pull-request: ', @bryanbell, could you help us with the icons for "Open in New Tab" and "Open in New Private Tab"?', Comment on ', ', Link to Github pull-request: ', I addressed a couple things that need to be looked at/discussed (e.g. the top sites image grabbing), and also Bryan Bell needs to get back about the icons in the context menu (or maybe Robin, wondering if she can just do it). Other than that, solid work - it's looking good! Reflag me when this stuff is done :)", Created ', ', ' 
id=1311690	 "Just ran into this by accident on sign-in. Is this still on track for 6.0? We don't tell a user at all to keep their device idle on the same view when confirming on their laptop or whatever.", Created ', ', Potential workaround...' 
id=1328123	 'Richard, can you find out if this happens on the v6.x branch and give us an idea if this is serious enough to block 6.0? We are on a very tight schedule. With 6.0 supposed to go in Review on Friday. So if this is happening on 6.0 we need to act fast.', There\'s no chance I can try to repro this on 6.x; I\'m traveling internationally (in the lounge right now) and over-committed until at least Friday morning. The only things that you might want to check immediately: - Does adding a passcode or touch ID have any chance of leaving logins.db in a bad state, thus causing a sync reset (particularly a reset of more than just logins)? This should be easy enough to determine just by watching logs in Xcode. - If logins.db is rendered unopenable, and is thus replaced, is the filename in the notification "logins.db" or something else? If it\'s something else, I would suggest blocking ship -- it\'s not a regression, but that would be serious. This should be easy enough to manually fake to test. Someone could also pre-emptively refactor that code to not use filenames for the notification, and instead to use some enum passed in when BrowserDB is instantiated. Everything else can realistically wait for a 6.x or 7.0, because the investigation will be more involved.', I can't reproduce these results on v6.x. I have tried adding a passcode and enabled touch id and i see nothing weird happen. My sync is pretty stable. I don't see any messages about logins.db or any retries.", Not that I can see. The only thing I can see in the code is both the touch ID/passcode metadata and logins.db SQLCipher key are both stored in the same keychain but the keys don't collide so I don't see how one would affect the other. ", I confirmed that if logins.db is unable to be created or opened, the NotificationDatabaseWasRecreated will pass the correct database filename to Profile.swift to only regenerate the logins.db and does not touch browser.db and vice-versa. I could preemptively refactor to enums but probably best to leave it along until we know what's going on just in case. Could this be related to our springboard/background crash at all? I can't see the DB being in an inconsistent state if the OS won't allow disk access at all in that case but who knows.", So then it's back to the root facts: - Somehow history and logins (and perhaps other engines?) were forced to re-sync from 0. - The server and local database still had all of my history data. - After downloading and applying all of the history records, Firefox decided that every record needed reupload. I haven't been node-reassigned. My #1 concern is the reupload of history. Everything else is an annoyance, but the reupload is a killer. I'll file a separate bug for that. (In reply to Stephan Leroux :sleroux from ", ) ', I'd be surprised: my profile wasn't missing data, which is why I hypothesized that we might be accidentally resetting timestamps too broadly." 
id=1320135	 
id=1308338	 'As the product manager of sync, I would like to measure the health of sync on iOS because it will help me better prioritize (and understand the impact of) new features and enhancements.\r \r Further more, this is a prerequisite for the Sync team to start using event telemetry to measure feature funnels and product performance across devices. ' 
id=1258273	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks for the patch Chris! I left some comments on the patch in Github.', Created ', ', Pull request Thanks for the feedback! I've addressed the comments; I am now using the media playback properties for iOS 9 and the deprecated ones for iOS 8.", Sorry for the lack of additional feedback on this bug. The code looks good but I would be more comfortable if this was paired with a test to verify the behavior of inline videos when toggling the switch. A UITest would be good to use here. We use KIF (', ) which makes it easy to simulate touches in the app by using accessibility labels. We have a collection of these tests under the UITests folder that you can use as a reference.', :sleroux, what do you think about landing this for 5.0?', We can land it for 5.0 and I'll file a follow up for tests.", Status?' 
id=1162778	 "This is kinda the mirror image of the problems we've discussed around Clear Private Data \u2014 there needs to be a strong intersection between these two features, and right now that's not the case. If we don't fix this properly in v1 (and I can imagine that being the case, because we do this badly on desktop and Android, too), then I'd certainly like to explore simple solutions to this specific bug. Happy to discuss further, and/or dig up the last wall of text I wrote on the topic.", Karen and I want to revisit this after v1. In the short-term, let's build a rickety bridge to smooth this out some. Robin, can you spend a very small amount of time on the simplest possible mocks?", Demoting from 1.1 moving to +', I guess the real question here is, "Why don\'t we clear the data if the user logs out?". If you never sign in, your data stays local until you \'Clear Private Data\'. But I think if you sign in, you\'re willingly connecting your account and the data associated with it. The assumption that you would be clearing that data if you Log Out could be a safe one. Is this something we can do? Can we clear all data if the user logs out? It would also make for a much cleaner string. Something like this: ', There are a few different sets of user behavior that all intersect with accounts and clear private data. * I want to keep this device how it is, but I want to turn off Sync. That might be because it just used up all of my data plan, I might be traveling, I might be tethering so I\'m on "pseudo-wifi", I might have hit a bug and I want to stop using it permanently. * I want to disconnect from Sync temporarily so I can reconnect to the same account, perhaps to force a full re-sync (because we no longer expose Reset Sync). Probably I want to keep my local data and re-merge -- perhaps the server doesn\'t have it all! * I\'m switching accounts. Perhaps I want to take the data on this device with me (I changed email addresses), or perhaps I want to start from scratch on this device with whatever is in the new account. * I\'m giving away this device. I want to sign out and wipe the local device. (I don\'t want to wipe the account, though!) This is one of the other-direction problems: when a user clears private data while signed in to Sync, we need to ask if it should also wipe other devices, or if they really mean to sign out and wipe this device. There are also two parts of user expectation that a na\xefve "clear on disconnect" doesn\'t touch: * I want to keep all of the information the device had before signing in -- that is, Sign Out is the opposite of Sign In. We\'re mostly unable to do this, with some exceptions, but communicating that is hard. * What happens if you\'re not syncing, say, history? Do we clear it or not? If not, you\'re left with a weird partial profile. These are not exhaustive lists! The upshot of these is that we really need to ask the user *something*. * If they clear private data but have Sync set up, we need to ask them if they want to sign-out-then-wipe, or wipe-this-and-other-devices. We have probably hit this once already: ', . * If they sign out of Sync, we ought to ask them if they want to wipe everything locally, wipe only the stuff they synced, or wipe nothing. And finally, we might consider having a pause button for Sync to discourage users from signing out. But that's another story :)", Some history: ', , ', , ', , ', .', Created Aha card: FIOS-226 - Improve "Clear Private Data"', is now the work associated with CPD. (Much more important, IMO.) This bug is for the other direction.' 
id=1225939	 "Aaron, have you managed to find an STR for this? I am trying but I can delete history rows till I'm blue in the face and can't get it to crash.", Same here, not sure', Have you tried deleting the last item in a section, or the last item total? Perhaps while syncing?', Yes, neither yield a crash.', Number 1 currently on 1.3', Currently #3 on 2.0', I just fixed something very similar to this for bookmarks. Might be worth seeing if it applies here, too. ', This is still showing up on 5.3 (and reports include iOS 10)', This crash is showing up in the organizer under App Store for 6.0 Beta 7' 
id=1130495	 '*** ', has been marked as a duplicate of this bug. ***', (Removing that dependency 'cos it's transitive on ", .)', For the record, there are no mocks for the Synced Tabs panel. I'm rolling my own, informed by the other panels (tabs look like history tabs, for example) and Android's panel (clients will have a grey background, for example).", tecgirl: it might not be v1, but I\'d love to get some UX input on how we could switch from a "client-centric" view to a "latest-tab-centric" view. Right now, we\'re going: client tab tab client tab tab with clients ordered with the most recently synced first and each client\'s tab ordered in the position it appears on that client. I think it\'s more helpful to do something like: most recent tab tab tab tab possibly without indication of the originating client, even. But the two views are used in different situations, so we might want a toggle. Can you opine?', Created ', ', Link to Github pull-request: ', Still several TODOs but best to land something. This will need a fresh Home Panel icon, too. I will file follow-ups as needed. The underlying Remote Tabs data store commit has r=rnewman, just waiting for feedback on this to land.', :nalexander - Based on some of our recent task continuity research we found some users to associate content based on which device it was on, but there could be an opportunity to improve upon that pattern by offering a different view choice\u2014one that allows simple date sorting, regardless of device. Most users will typically have 2-3 devices so showing a list that is purely time-based could work, rather than sorting by device\u2014but I would still vote for showing the device next to the entry. I'm willing to give that a shot for v2." 
id=1295148	 'The first phase of AS is similar enough to top sites that I dont think we need an opt in.', Moving out of phase one and under the general Activity Stream meta for later consideration.' 
id=1210757	 'Encountered the same issue on master 0e03028ac while scrolling on news.google.com homepage on iPhone 7 Plus (iOS 10.0.3).', This issue is reproducible only on iPhone 6 Plus and iPhone 7 Plus. The cause might occur due to the fact that these devices have a more dynamic scroll on this particular page.' 
id=1216459	 'Filed as ', Reminder to file as a Readability issue', Tossed back over the fence', Open bug for import new readbility', There is no newer version of readability.js. (The version on mozilla/readability is a few commits ahead but it is just documentation changes)', See ', . This doesn't happen on desktop or Android, so let's figure out what we're doing differently." 
id=1190602	 "Doesn't need to track v1, but this can be done in parallel with other work and should be on our radar.", Doesn't seem too bad(?), will work on once tracking bug to bug killer ratio is 1:1", jk that makes no sense, that means we have like 30 iOS peepz; ignore my comments after 4 pm', I would like to work on this bug can Some pointers would be good for me to carry on', Created ', ', Pull request Hope this bug is fixed :)', Tummala, we are not landing this bug for v1.0. Robin suggested some bigger changes to make it easier to navigate the licenses. That may also result in some native (Swift) work. Are you interested in that?', Comment on ', ', Pull request Removing myself from review. Will pick this up post v1.', Well Stefan I am currently not into Swift, may be after learning few things I will give it a shot :) thanks for the heads up any way, It's better to make this bug not valid or something like that", Reopening, this bug is neither reviewed or resolved.', Additionally, the CSS could use some love. :c0mrad3, please feel free to ping me for this.', Well as I stated in the IRC I will work on this one but I need some time and little help which tecgirl is willing to provide me :)', (In reply to Robin Andersen :tecgirl from ', ) ', hey @Robin Andersen can you please give me the links that you have told me to look at in the irc to fix this bug ie.. to make this licence more beautiful ? I forgot the link and not sure of the logs too', The file has been moved to ', and the link that I have asked was that ', I need more time to fix this bug, hope it's okay", (In reply to Tummala Dhanvi :c0mrad3 UTC+5.30 from ', ) ', Checking in, how's this coming along?", I am learning things from this awesome website ', and codecadamy ', I will fix this once I am comfortable with jquery If some one else want to work on this, please assign this bug to them Hope this is okay', That's fine. I will let you know that the jQ example was just an example of how to implement an accordion, but isn't necessarily the best way. See if you can do it in just CSS rather than relying on javascript.", Created ', Screen Shot 2016-09-30 at 2.08.48 PM.png Hi. I have a CSS-only solve for the accordion behavior (see screenshot). It's WIP but wanted to get input on whether the current plain styling will suffice, or if we want to jazz it up a bit.", (In reply to Joel Miller from ', ) ', Looks good! I can make the style changes to jazz it up :) Thanks, Joel!', Created ', ', Link to Github pull-request: ', PR attached. FYI, method used for the accordion adapted from here: ', Comment on ', ', Link to Github pull-request: ', Looks and works well! I'll work on making the styles a bit better." 
id=1277500	 'Reopening and marking as a dependency for ', .' 
id=1285758	 "Using version 4.0 on iOS 9.3.2 on an iPhone (I'm honestly not sure which model because I can't keep up with Apple mobile models).", Need a log. Can you run Firefox from Xcode, following the instructions in ', sign in to your Sync account, and give us the backtrace? This is easier than getting logs off a release build.', The alternative is to try to use iExplorer to pull logs from the app/app group, but I don't know if they're visible.", I'm not sure when I'll have time to look into this. I played around for 10 minutes and kept hitting walls. The build/test process is too hard :/ I'll keep the needinfo because I'd really like to get to the bottom of this.", If yo re around one of the firefox-ios developers, you might be able to sign in on one of their simulators with your FxA, repro, then wipe the simulator. With luck, the crash is being reported, but of course it's easier if we can see the data that's causing the problem!", Still a problem with the latest iOS app version. I still haven't found the time to get a working development environment for the iOS app. I tried when rnewman steered me in that direction a few months ago. But there were too many manual steps around things like provisioning keys. I really wish this were more turnkey. Not sure if this is Apple binding our hands or the bootstrap support for the iOS app not being as polished as it is for say Firefox desktop :/", Are you around one of the iOS developers? They should be able to help you get running in five or ten minutes. Last I checked, dev setup was pretty close to: * Install Xcode and command-line tools. * git clone the repo. * Run Carthage bootstrapping script per README. * open -a Xcode Client.xcodeproj * Hit "Run" to build and launch the app in the Simulator.', I guess my mistake before was I was trying to run things on my iPhone as opposed to a simulator. Those directions are much more complicated! Anyway, I had a bit more patience today and was able to build and run the master branch on my iPhone. Unfortunately, no crashes so far. I even logged in and synced (I suspect this bug has something to do with Sync). I'm still able to reproduce on the old app install. But I can't attach a debugger to that process to see what the crash is. I do have access to Mozilla's iOS development account. I wonder if I could download the right certificates to be able to debug to the production app that's crashing. I know little about iOS development though. So not sure what's possible...", I think debugging the release build is an impossibility, but you might be able to get a crash log off the device via the Xcode device inspector. If not, you might try uninstalling the app in the Simulator, build and install the `v5.x` branch, then try logging into Sync. It might be a bug we fixed between release and trunk\u2026', Created ', Client-2016-10-25-213324.crash I might be experience the same bug so attached is the crash pulled from ~/Library/Logs/CrashReporter/MobileDevice/iPhone/ after sync. This only happens on the release version; I have Beta (TestFlight builds) and Nightly (BuddyBuild) running on my phone normally and synced to the same account.', Created ', Client-2016-10-23-152701.crash Forgive me; I don't really know which file is related...", Hey Tim, Couple of questions: 1. Do you use Firefox Nightly on desktop? 2. Are you signed into Sync/FxA on Firefox for iOS?', 1. I use Aurora on desktop (currently 50.0a2) 2. Yes, on all three installs.', First attachment -> ', Second attachment needs symbols' 
id=1211202	 'Created ', 3DT-Homescreen-Assets.zip Icons for homescreen instances, including Reading List, should we decide to include it as a dynamic option.', Reopening to consider adding 3DT options to regular links, while keeping the current options provided by the action sheet.' 
id=1163283	 'It seems to be fixed in build 15.', ... and rehappens in build 19.', I can't reproduce, my zoom level and scroll position is restored on tap of back. I zoomed in on the last article on the front page, tapped the link and hit back and got the same view" 
id=1237736	 'Kyle is implementing Flash embed rewriting in Gecko (', ).', *** This bug has been marked as a duplicate of ', ***', Please look at the product carefully. Firefox for iOS does not use Gecko, so we can't reuse the implementation of ", .', Whoops, sorry, was cleaning up some other bugs and accidentally lumped this in with them.' 
id=1295149	 'Is this something you want to mock up or should we copy the WIP implementation on Android?', Attached is an InVision mockup of what this might look like. As we discussed this morning, we could forgo the view(s) specifically related to Test Pilot and just show a detail page for Activity Stream with a toggle to enable/disable. There's also some thoughts here for mobile snippets. ", The first phase of AS is similar enough to top sites that I dont think we need an opt in.', If you don't mind I'm going to reopen this for a later 'phase' of work. Doesn't have to be done as part of this phase but I think it's something we need to consider at some point in the future." 
id=1299994	 'Stefan can you take care of this and fix this up? This is the second request this has happened.', The only way to unsubscribe from TestFlight emails is to stop testing the app. You can do this in the TestFlight app in your device. Go to Firefox and hit the 'Stop Testing' button.", (In reply to Stefan Arentz :st3fan from ', ) ', Hmmm, now I have purged that iOS device without hitting that button... So I have no way to unsubscribe from that emails anymore? Also, if it cannot be unsubscrible from the "Unsubscribe" link in the email, why does the link exist at all? Just to fool your testers?' 
id=1314389	 'woops. Meant to close the breakdown.' 
id=1279862	 'Is this the behavior we want? We would save a tap but would hide some UI via the keyboard.', Tapping the URLbar isn't the same thing as creating a new tab, instead, the user is navigating elsewhere within the same tab, so the current behavior or tapping the URLbar to trigger the keyboard and panels is expected and fine.", Tapping the URLbar isn't the same thing as creating a new tab, instead, the user is navigating elsewhere within the same tab, so the current behavior or tapping the URLbar to trigger the keyboard and panels is expected and fine.", does this mean this bug is wontfix?', We need to talk about this bug. I think the current behaviour is very confusing.', Yes, this is the behavior we want. The URLbar should be focused if "Show a Blank Page" is selected for opening a new tab.', Is this bug still open, I would like to take this.', Created ', ', Pull Request', Comment on ', ', Pull Request Thank you for this patch! I've left a comment on Github", Created ', ', Pull Request', Comment on ', ', Pull Request Hi Tim. Thanks for your patch. It looks like Jaspreet submitted a patch thinking you weren't working on this anymore." 
id=1307822	 "Ok I did some sherlocking on some of the crashes I'm seeing in Xcode and found a potential culprit. One thing I noticed that was common among all the crashes JavascriptCore sleeps/waits on another thread when trying to malloc using bmalloc: Thread 3: 0 libsystem_kernel.dylib \t0x0000000185616314 __semwait_signal + 8 1 libsystem_c.dylib \t0x000000018553427c nanosleep + 212 (nanosleep.c:104) 2 libc++.1.dylib \t0x0000000185045994 std::__1::this_thread::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l> > const&) + 80 (thread.cpp:128) 3 JavaScriptCore \t0x000000018adc3384 void std::__1::this_thread::sleep_for<long long, std::__1::ratio<1l, 1000l> >(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l> > const&) + 76 (thread:441) 4 JavaScriptCore \t0x000000018adc2484 bmalloc::waitUntilFalse(std::__1::unique_lock<bmalloc::StaticMutex>&, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l> >, bool&) + 128 (StaticMutex.h:64) 5 JavaScriptCore \t0x000000018adc22c0 bmalloc::Heap::scavenge(std::__1::unique_lock<bmalloc::StaticMutex>&, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l> >) + 60 (Heap.cpp:112) 6 JavaScriptCore \t0x000000018adc2160 bmalloc::Heap::concurrentScavenge() + 80 (Heap.cpp:107) 7 JavaScriptCore \t0x000000018adc3470 bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>::threadRunLoop() + 92 (AsyncTask.h:121) 8 JavaScriptCore \t0x000000018adc339c bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>::threadEntryPoint(bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>*) + 12 (AsyncTask.h:106) 9 JavaScriptCore \t0x000000018adc364c void* std::__1::__thread_proxy<std::__1::tuple<void (*)(bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>*), bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>*> >(void*) + 92 (__functional_base:416) 10 libsystem_pthread.dylib \t0x00000001856db860 _pthread_body + 240 (pthread.c:697) 11 libsystem_pthread.dylib \t0x00000001856db770 _pthread_start + 284 (pthread.c:744) 12 libsystem_pthread.dylib \t0x00000001856d8dbc thread_start + 4 Looking at the bmalloc::Heap::scavenge method name, I predict that this method probably locks down a block of the heap to reclaim some resources while Springboard is trying to do the same thing which results in a deadlock. Looking at WebKit it appears that exactly what's going on with the scavenge call: void Heap::scavenge(std::unique_lock<StaticMutex>& lock, std::chrono::milliseconds sleepDuration) { waitUntilFalse(lock, sleepDuration, m_isAllocatingPages); scavengeSmallPages(lock, sleepDuration); scavengeMediumPages(lock, sleepDuration); scavengeLargeObjects(lock, sleepDuration); sleep(lock, sleepDuration); } ------ Anecdotally, I've also noticed springboard crashes while using MS Outlook on my device. I wouldn't be surprised if they are seeing the same issue since they probably use WebViews to render mail content. I'll see if there are any WebKit issues on file for this.", It's also worth noting that all of these crashes are being reported by iOS 10 users so there is a good chance that this is a bug introduced by WebKit.", Filed WebKit bug: ', I\'ve been doing some investigation on this and trying to reproduce the crash scenario and figured I would log some information pulled from IRC. Alexey on the WebKit team suggested analyzing the logs when it occurs for "was task-suspended with locked system files" which suggests that we\'re trying to write to disk when we\'re not supposed to. Since Springboard shut us down, this is likely caused by returning back to Springboard (ie. backgrounding the app) then trying to write to disk outside of our allotted background task time. :rnewman had a hypothesis that a sync operation that began running from normal app use (either user initiated or from a timed sync) was to blame for writing to disk since it\'s not wrapped with a background task identifier and could be causing issues after the background sync that started from the AppDelegate didBackground call finished. After some testing, I don\'t believe this to be true. To test, 1. I reduced the time interval to 1 second to force many sync operations to occur and try to always have one running while we have the didBackground task running. 2. Did a fresh install with a large profile to make the syncing operation longer. I wasn\'t able to reproduce the issue after various attempts of foregrounding->backgrounding. One reason I think its actually alright is the fix :bnicholson added to fix the termination crash with logins.db added the closed boolean flag which gets set within a block submitted to the sharedConnectionQueue 1 . Since all connections are pushed through this concurrent queue regardless of thread/dispatch queue, I don\'t see how its possible for a connection to be opened after the DB has been force-closed. The only minor thing I can see is instead of invoking the completion block for the sync task started in syncOnDidEnterBackground on a background global queue is to call it on a higher priority queue 2 . Even if the syncEverything uponQueue block isn\'t called, the expiration block would surely get invoked to clean things up so not sure if it matters. Anyways, figured I would log some thoughts about that. I\'ll continue to investigate other options. 1 ', 2 ', Steph and I brainstormed some ideas. * We only close the DB in a deinitializer, so it seems possible that we end our system background task before we're done closing the DB. * It's possible that we don't establish a background task in some circumstances. * We're not sure if all file writes will be done after sqlite3_close* is called. On the latter point: indeed, we call closeCustomConnection without immediately: true, so we use sqlite3_close_v2, which returns OK and shuts down asynchronously if any statements are non-finalized. That might be the case if we're relying on deinitializers to clean up statements, or if we're force-closing because our background task took too long.", I can't get the deinit to be called at the wrong time, testing in the simulator. More issues I've found through inspection: - transaction/withConnection in SwiftData fetches the ConcreteSQLiteDBConnection. Then withConnection enqueues a closure that captures the connection. It's safe and consistent for the DB to be forceClosed between these two points, but it means that the deinitializer won't run until the racing queued operation executes. That would provoke this bug: we would return from forceClose, nilling out the connection for future operations, and then end the background task\u2026 then go on to do another DB operation. - LiveSQLiteCursors retain their SQLiteDBStatement. The statement retains the connection. These cursors are returned by executeQueryUnsafe, and they only implicitly close the statement when closed. - SDRows retain their SQLiteDBStatement. If these are ever retained, the statement will keep the connection from closing. I don't think we ever hold on to an SDRow, because it doesn't make sense to do so outside a factory.", I've managed to reproduce ending the background task before a write, simply by capturing the connection as if a write were to race. I have not managed to reproduce the crash this way on the simulator.", If we're correct in thinking that this is due to the DB remaining open after a background task is supposed to be closed, I think there are only two and a half possible options: - Close the background task when the DB closes, chaining a callback through to the DB. - Force the DB to close when we close the background task. - Don't run database operations on a connection that's supposed to be closed. That is: when a closure reaches the front of the queue, check again to see whether the enclosing DB is closed, and abort (dropping the reference to the connection) in that case. The deinitializer will run very soon, but this might not be enough.", I've tried this on a 10.x device, with PRAGMA synchronous=FULL, and with several minutes of pauses and synthetic background writes. No crash. Steph, did you manage to repro these crashes without totally eliminating DB close code? If not, how comfortable do you feel about trying the blind fixes I suggest in ", ?', Hah. I might not have got a crash visible in the logs\u2026 but now I can\'t "press home to open" on my phone, so I appear to have killed Springboard\u2026', Sounds good. I haven't been able to reproduce this either but I think if we can attach a background task ID to the lifecycle of the database, this should rule out any crashes we would be happening because of DB closes. Rather than chaining in a callback, we could have SwiftData listen for the didBackground notification, setup a background task ID, and end it when we're deiniting after closeCustomConnection. We can also make that call immediate: true to rule out any residual writes.", There are two open databases, though; we want to end the background task when both are closed, and not wait forever if one of them was never opened. That requires knowledge that's spread across BrowserProfile and SwiftData. But yes, I'll try to keep it simple! We can't just do immediate: true, I think -- that means we'll see SQLITE_BUSY if there are unfinalized statements, which is probably no better.", Just realized this as I was implementing it. There's also no harm in spinning up a background identifier for each connection. The only thorn is that since Storage is used in extensions and extensions don't use UIApplication.sharedApplication getting a handle to it to start a background task is a bit tricky but I'll look into it. The docs also suggest creating background task identifiers at the start of tasks - they don't have to be created just in the didBackground callback 1 . The safest option would be to just create a background identifier whenever we create a connection and end it in the deinit. 1 ", So I took another look through and tried to put some more sleeps in some of the dispatch_sync calls to see if I can reproduce anything but there isn't anything I can do to actually reproduce the crash. I tried to reason about why these sleeps weren't doing anything and determined that: 1. dispatch_sync guarantees that the block submitted must be executed prior to continuing code execution. 2. forceClose's submitted block sets closed = true and releases the sharedConnection as SwiftData is the sole owner 3. When sharedConnection is released, sharedConnection's deinit submits a block to its own queue using dispatch_sync which guarantees that any previously queued operations initiated by withConnection must be resolved prior to closeCustomConnection call. Thus, when SwiftData's forceClose returns, we know that: 1. There are no more queued up accesses to the database _ahead_ of the close call. There may be some queued up behind it. 2. sharedConnection is nil for this database instance. 3. closeCustomConnection was called. Now, Profile.swift calls this twice in shutdown for each database: logins and browser. So we know that as long as browser db and logins db were created prior to calling shutdown, when shutdown returns, the connections must be closed (as long as closeCustomConnection actually works as expected). When shutdown returns, endBackgroundTaskId is called and everything should be fine. In short, I'm not sure if adding a background task inside SwiftData/ConcreteSQLiteConnection will do anything as we should have guarantees that closeCustomConnection will close. In saying so, I have another hypothesis. When we call shutdown on the profile, loginsDBCreated is false. While we're 'shutting down' another part of the application touches profile.logins (such as a logins helper connected to a web page). Since it's a lazy property, it will setup a new BrowserDB->SwiftData instance that disjoint from the shutdown call.", (In reply to Stephan Leroux :sleroux from ', ) ', That's not actually true -- the connection is captured by each item in the queue. See ", . ', So this is the bit that makes it work -- it's important that each closure in the queue behind the entry to forceClose is allowed to run and expire so that the refcount of the connection reaches zero, ultimately running the deinitializer and calling closeCustomConnection. ", My own experimentation agrees with this. It always closes correctly. ', That seems worth investigating. We need another state to indicate that we're shutting down.", Finally was able to reproduce this crash 100% of the time. ', Exploiting this a bit, STR: 1. Launch Firefox 2. Navigate to a page with a login page (facebook.com works pretty well) 3. When it starts to load, immediately background the app 4. Wait 5 seconds 5. Renter app Expected: Splash screen should not appear; User taken directly to Facebook Actual: Splash screen is show as if it was launching from cold start. -----', Created ', ', Link to Github pull-request: ', I'll start off by staying that this patch is more of a bandaid than anything since it doesn't actually address the issue of loginsDB created after a shutdown is called. I tried to go down the path of modifying logins/loginsDB to be an optional but the lazy nature of the variables and the singletons become pretty messy and a lot of call sites need to be changed for it to work. This approach is to simply avoid touching profile.logins to prevent the db to be created if we're shutdown. I ran some tests with this approach and it seems to solve the reproducible issue. I think what I want to do is land this 'fix' and see what happens to our crash rate. If we see that this fixes it, then it would be worth revisiting our database access abstraction.", Comment on ', ', Link to Github pull-request: ', See comment on PR. Nice fix!', master ', Looking at early results from the beta audience, it appears this hasn't been fixed. Along with the springboard crash, there seems to be another crash that looks similar happening on 9.3 devices. Not sure if that's because Xcode buckets everything crashing in main together or if they are actually related. I'll attach both logs.", Created ', iOS 10 deadlocc crash', Created ', iOS 9.3 crash', From a recent crash log from Beta 6.0 (3) ... Thread 8 name: Thread 8: 0 libsystem_kernel.dylib \t0x000000018d22f85c ftruncate + 8 1 Storage \t0x0000000100e1862c unixTruncate + 84 2 Storage \t0x0000000100e21468 sqlite3WalCheckpoint + 2028 3 Storage \t0x0000000100e20b30 sqlite3WalClose + 128 4 Storage \t0x0000000100e209c8 sqlite3PagerClose + 88 5 Storage \t0x0000000100e080a0 sqlite3BtreeClose + 316 6 Storage \t0x0000000100e0d35c sqlite3LeaveMutexAndCloseZombie + 176 7 Storage \t0x0000000100e14308 sqlite3Close + 428 8 Storage \t0x0000000100deb6f8 ConcreteSQLiteDBConnection.deinit.(closure #1) + 192 (SwiftData.swift:603) 9 libdispatch.dylib \t0x000000018d1051c0 _dispatch_client_callout + 16 (object.m:455) 10 libdispatch.dylib \t0x000000018d112860 _dispatch_barrier_sync_f_invoke + 84 (queue.c:3457) 11 Storage \t0x0000000100deb2d8 ConcreteSQLiteDBConnection.__deallocating_deinit + 256 (SwiftData.swift:528) 12 Storage \t0x0000000100df6d9c specialized SwiftData.withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError? + 844 (SwiftData.swift:0) 13 Storage \t0x0000000100de6e94 SwiftData.withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError? + 24 (SwiftData.swift:106) 14 Storage \t0x0000000100de548c DeferredDBOperation.main() -> () + 768 (DeferredDBOperation.swift:96) 15 Storage \t0x0000000100de63f4 partial apply + 24 (DeferredDBOperation.swift:0) 16 libdispatch.dylib \t0x000000018d105200 _dispatch_call_block_and_release + 24 (init.c:947) 17 libdispatch.dylib \t0x000000018d1051c0 _dispatch_client_callout + 16 (object.m:455) 18 libdispatch.dylib \t0x000000018d113444 _dispatch_queue_serial_drain + 928 (inline_internal.h:2421) 19 libdispatch.dylib \t0x000000018d1089a8 _dispatch_queue_invoke + 652 (queue.c:4859) 20 libdispatch.dylib \t0x000000018d113940 _dispatch_queue_override_invoke + 360 (queue.c:4896) 21 libdispatch.dylib \t0x000000018d11538c _dispatch_root_queue_drain + 572 (inline_internal.h:2458) 22 libdispatch.dylib \t0x000000018d1150ec _dispatch_worker_thread3 + 124 (queue.c:5548) 23 libsystem_pthread.dylib \t0x000000018d30e2b8 _pthread_wqthread + 1288 (pthread.c:2196) 24 libsystem_pthread.dylib \t0x000000018d30dda4 start_wqthread + 4 ... Interesting to see this thread calling into ftruncate - a disk write call - during the deadlock. My bet is that this disk access is what is causing the OS to kill us since we're not supposed to touch the disk when backgrounded. My hypothesis is that the database is being closed after we tell the OS we're done our background task. This potentially could be caused by a race condition.", Two crashes in the crashpoint for 6.0 beta 3 look like this: ... Thread 3 name: Thread 3: 0 Shared \t0x0000000100c14d44 static Bytes.decodeBase64(String) -> NSData + 152 (Bytes.swift:33) 1 Shared \t0x0000000100c14d24 static Bytes.decodeBase64(String) -> NSData + 120 (Bytes.swift:33) 2 Sync \t0x00000001012201e4 EncryptedJSON.cleartext.getter + 232 (EncryptedJSON.swift:68) 3 Sync \t0x00000001012ac234 specialized KeyBundle.(factory<A where ...> ((JSON) -> A) -> (String) -> A?).(closure #1) + 244 (KeyBundle.swift:157) 4 Sync \t0x000000010120b91c specialized Sync15CollectionClient.(getSince(UInt64, sort : SortOption?, limit : Int?, offset : String?) -> Deferred<Maybe<StorageResponse< Record<A> >>>).(closure #1).(recordify #1)(JSON) -> Record<A>? + 456 (Record.swift:53) 5 Sync \t0x000000010121f450 _TPA__TTSg5C4Sync11TabsPayload___TTRGRxC4Sync20CleartextPayloadJSONrXFo_oC6Shared4JSON_oGSqGCS_6Recordx__zoPs9ErrorType__XFo_iS2__iGSqGS3_x__zoPS4___ + 72 (StorageClient.swift:0) 6 Sync \t0x000000010121f81c _TPA__TTSg5C4Sync13ClientPayload___TTRGRxC4Sync20CleartextPayloadJSONrXFo_oC6Shared4JSON_oGSqGCS_6Recordx__zoPs9ErrorType__XFo_iS2__iGSqGS3_x__zoPS4___ + 12 7 Sync \t0x000000010121072c specialized specialized SequenceType.flatMap<A> ((A.Generator.Element) throws -> A1?) throws -> A1 + 420 (StorageClient.swift:0) 8 Sync \t0x0000000101208e18 specialized Sync15CollectionClient.(getSince(UInt64, sort : SortOption?, limit : Int?, offset : String?) -> Deferred<Maybe<StorageResponse< Record<A> >>>).(closure #1) + 568 (StorageClient.swift:782) 9 Sync \t0x000000010121e77c _TPA__TTSg5C4Sync11KeysPayload___TTRGRxC4Sync20CleartextPayloadJSONrXFo_oGV9Alamofire8ResponseC6Shared4JSONOS_18JSONSerializeError__dT__XFo_iGS2_S4_S5___dT__ + 120 (StorageClient.swift:0) 10 Sync \t0x00000001011f7844 specialized Sync15StorageClient.(errorWrap<A, B, C where ...> (Deferred<Maybe<A>>, handler : (Response<B, C>) -> ()) -> (Response<B, C>) -> ()).(closure #1) + 1128 (StorageClient.swift:408) 11 Sync \t0x000000010121e874 _TPA__TTSg5C4Sync11KeysPayload___TTRGRxC4Sync20CleartextPayloadJSONrXFo_iGV9Alamofire8ResponseC6Shared4JSONOS_18JSONSerializeError__dT__XFo_oGS2_S4_S5___dT__ + 120 (StorageClient.swift:0) 12 Sync \t0x00000001012b7e70 thunk + 88 (RequestExtensions.swift:0) 13 Alamofire \t0x000000010079461c Request.(response<A where ...> (queue : OS_dispatch_queue?, responseSerializer : A, completionHandler : (Response<A.SerializedObject, A.ErrorObject>) -> ()) -> Self).(closure #1).(closure #1) + 436 (ResponseSerialization.swift:142) 14 libdispatch.dylib \t0x0000000181f094bc _dispatch_call_block_and_release + 24 (init.c:760) 15 libdispatch.dylib \t0x0000000181f0947c _dispatch_client_callout + 16 (object.m:506) 16 libdispatch.dylib \t0x0000000181f154c0 _dispatch_queue_drain + 864 (inline_internal.h:1063) 17 libdispatch.dylib \t0x0000000181f0cf80 _dispatch_queue_invoke + 464 (queue.c:3644) 18 libdispatch.dylib \t0x0000000181f17390 _dispatch_root_queue_drain + 728 (inline_internal.h:1043) 19 libdispatch.dylib \t0x0000000181f170b0 _dispatch_worker_thread3 + 112 (queue.c:4249) 20 libsystem_pthread.dylib \t0x0000000182121470 _pthread_wqthread + 1092 (pthread.c:1990) 21 libsystem_pthread.dylib \t0x0000000182121020 start_wqthread + 4 (pthread_asm.s:190) ... Potentially something related to NSData usage? Might be red herring.', *** ', has been marked as a duplicate of this bug. ***', Showing up under Beta 6 reports', *** ', has been marked as a duplicate of this bug. ***', (From ', ) It looks like 8/10 of our libsystem_kernel crashes on v6.0b6 are caused by the deinit->closeCustomConnection->sqlite3_close inside ConcreteSQLiteDBConnection. Linking 1307822 since this looks to be the same issue.' 
id=1266091	 'AppDelegate uses String.unescape(), in StringExtensions: let str = CFURLCreateStringByReplacingPercentEscapes(kCFAllocatorDefault, raw, " .") TodayWidget uses: urlString.stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet()) These should match.', Created ', ', Pull request', This is a big problem. Because we have been telling people, via the open-in sdk, to use stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet()) to encode the firefox:// URL. If that is not working correctly then we should revert this fix and instead revert AppDelegate. When did the AppDelegate start using String.unescape() ? Please do not land this patch until we know what is going on here.', Comment on ', ', Pull request Marking this as - because this is the wrong fix.', I'm very confused about this. We need to be sure that our open-in handler deals with the correct escaping. Reading the AppDelegate makes me think it does not. It looks like there is double decoding going on. Marking as 4.0 Blocker because we need to be sure before we ship this.", Confirmed, there is a double escape happening at: ', Example. We try to open a google search for "cheese platter". This is correctly encoded as: firefox://open-url?url=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3Dcheese%2520platter by the open-in demo project. We receive this in application(application:, openURL:, sourceApplication:, annotation:): firefox://open-url?url=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3Dcheese%2520platter Which we parse with NSURLComponents and take the url parameter we have: ', Then we double decode it with url.unescape, which results in the following invalid and ignored URL: ', platter The fix here is to not url.unescape() - NSURLComponents has already done that.', This is a blocker for 4.0.', Escaping with urlString.stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet()) means that & and = weren't be escaped, so URLs that had their own query params e.g. ", were being included in the firefox:// url as firefox//open-url?url=https%3A%2F%2Fhost%3Fa=1&b=2 So when the firefox:// URL was being decoded in AppDelegate.swift, the query params are url = ', b = 2 i.e. so the Google Images search page is presented instead of the image result. ', The double unescaping of the URL is a second bug addressed in ', . Landing the original PR, as it fixes this bug. The fix here matches the encoding firefox-ios-open-in-client ', .', Comment on ', ', Pull request Flipping back to + now that we understand this bug and the related ', Merged and closed.', Verifying as fixed on build 4.0.0b7' 
id=1259748	 'AccountTests is fine. The only thing failing is UITests.', Need some more eyes on this. Best way to test this is this: * check out the ', branch * Select the Fennec scheme * Edit the scheme and then under the Build phase enable all checkboxes in the Test column * Hit Command-U to build and run all tests Building fails with the error in ', Here's a fix for the linker issues: ", What's happening is that the FxA/KIF targets have their build configurations named to 'Debug' and 'Release which are the defaults. For our builds, we have custom configurations (Fennec, FirefoxBeta, etc). This adds the Debug/Release paths to the 'Framework Search Paths' to allow our targets to reach in and grab them.", Including this change in the big Swift 2.2 ', *** This bug has been marked as a duplicate of ', ***' 
id=1257530	 'Created ', ', Github PR ', Comment on ', ', Github PR ', LGTM - Make sure to ask QA to test some upgrade scenarios.', Did some testing around upgrades: v2.1b4 -> v3.0b6 = \u2713 v3.0b6 -> master (4.0) = \u2713 v2.1b4 -> master (4.0) = \u2713 Not sure where or how it's crashing but I feel this patch will make things safer in case it happens.", master ccae0142f775d38a63d10967fbcf8dbe3fca9639', v3.x b1cac56' 
id=1256470	 'The interface mockup presented might not be the most accessible way to provide those options to the user. At the moment, it will look like you are toggling just Touch ID for Private Browsing / Logins, whereas it is more likely the user would want to turn off security entirely for those features (it would be strange for the user to want security for both, but only touch ID for one). Would this set of settings be more user-friendly? Turn Passcode Off Change Passcode Require Passcode (Immediately) Enable Touch ID x Use Touch ID & Passcode for: Private Browsing x Logins x ', Makes sense; though now we'll need to set them both to default to on, since one or the other would be weird and none would likely annoy users who didn't notice the toggles, set a passcode, and nothing happened.", Created ', TouchID&Passcode-On-TouchOn Updated.png', Created ', ', Pull request', Comment on ', ', Pull request Left comments on the PR. I think we need to rethink how we present and authenticate the user from the current model of using the TabTrayController.', Would it make sense to replace the term "Touch ID & Passcode" with something less technology-specific such as "Authentication" in the setting title and the subtitles for the specific features to enable authentication for? This way, we also don\'t have to have additional logic for having different label text depending on whether the user has Touch ID enabled.', From what I can tell, specifically labeling the feature seems to be the convention \u2014 though I can't find anything specifically calling it out in the docs. We should have a different label to let the user know what kind of auth they will be entering. I don't think the red thumbprint in the dialog is enough.", Comment on ', ', Pull request There's been a fair amount of refactoring since the earlier pull request, and I think all of the changes have been implemented. Would it be possible to take another look at it?", master 7e95b152aa21e60da4357133eec22cdb5c1dc1ba', *** ', has been marked as a duplicate of this bug. ***', Rolled back in: ', There were issues with these changes, especially with top tabs, so this is being re\xf6pened until those are fixed.', Created ', ', Pull request Here's my second go at implementing this feature. Deferred has been replaced with callbacks, and a significant number of bugs involved with the top tabs work have been fixed. Also added a couple more tests, which cover problems we had before. Sorry, I know this one is going to be a pain to review! However, it's still fundamentally based off the original patch, so that might make things a little simpler.", Moving to 7.0 to stabilize the 6.0 release.', Pending PR need review for 7.0?' 
id=1249607	 'We understand how frustrating crashes are and it would be valuable to receive specific details about your crash so that we can track down the cause. Here is an easy way for you to send us helpful crash logs: After a Firefox crash occurs, open the Settings app on your iOS device. Navigate to General > Privacy > Diagnostics & Usage > Diagnostic & Usage Data. Select a Firefox crash from the list. This will start with \u201cFirefox_\u201d and contain the timestamp of the crash. Tap on the crash and you will see a text field with a crash log. Press and hold the text to Select All, and then Copy the crash text. Open up your favourite email application. Paste the crash log into an email and send it to me (mouse over my account name in blue in this comment). You can also collect crash information via iTunes or XCode (for developers). If you wish to do so, please follow the instructions here: ' 
id=1267795	 
id=1246445	 'Created ', ', Pull req. Note that this is still not enough, because we crash the compiler: ', Comment on ', ', Pull req. These are not issues anymore in the final Xcode 7.3 release.', Created ', ', PR: ', Created ', ', PR: ', Comment on ', ', PR: ', Need a good amount of eyes on this patch. The first two commits about compile errors. The rest is about warnings. If I disable UITests then everything succeeds except testBookmark() and testTabManagerStoreChangesInDB(). We knew those were failing already, so that is nothing new. UITests has to be disabled because of ', Comment on ', ', PR: ', Looks good overall. Mostly nits and comments.', Comment on ', ', PR: ', LGTM!', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', This is ', with all the nits addressed.' 
id=1247558	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1254441	 'Created ', ', Github PR ', Comment on ', ', Github PR ', Just a couple of SnapKit/AutoLayout questions.', master af3ad2cd0eaa98b20af2866a1de5bb8332afe12e', v3.x f93aa7f' 
id=1128122	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1268263	 "I'm marking this as blocking 4.0 because this is a one line and low risk fix.", Created ', ', Pull request One line fix. I wanted to fix the url method argument being redeclared as String? but wanted to keep this minimal. ', Merged and closed.' 
id=1271674	 '"Optimizer team\'s taking a look. Worst case, you can try disabling optimization per-func with @_semantics("optimize.sil.never") attr"', Created ', ', PR: ', This patch changes the Swift Optimization Level from `-O -whole-module-optimization` to just `-O` for the *Storage* framework. This is a temporary solution until we have a better idea how to deal with ', or until Apple provides an Xcode update that fixes this issue. This fix now at least means we can continue to do builds. And the change is limited to *Storage*. The rest of the app compiles without issues with the original optimization settings.', Comment on ', ', PR: ', LGTM' 
id=1254566	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Github PR ', Comment on ', ', Github PR ', LGTM!', Comment on ', ', Github PR ', Worth testing on iPad since it can layout table cells differently. Everything else LGTM!', Created ', ', Github PR ', master 657b5b6a785b53ea2b9c4b48a2a7c01c6b441271', v3.x e878955 ', Don't know about TestFlight revisions but it doesn't look like it is working for sub-titles - ", Hey Stefan, The latest TF build (7) should have this patch. I don't think the screenshots have been updated yet since build 7 was made available on Saturday.", Then it doesn't work for sub-titles.", \u2026but it seems to work in TF build (8) :)', Fixed in ', probably.' 
id=1193069	 ' let urls = db.executeQuery("SELECT DISTINCT url FROM \\(TableHistory)", factory: { $0 "url" as! String }) versus "url TEXT UNIQUE, " + // May only be null for deleted records. That looks like one possible culprit.', I can repro with a SIGABRT at that line with a similar stack if I null out a URL in the DB. The log shows Could not cast value of type '__NSCFNumber' (0x10cd8ccf0) to 'NSString' (0x10bebd8e0). which is presumably a null -> 0 sqlite/SwiftData confusion.", Created ', ', Pull req.', Comment on ', ', Pull req. The code looks good. What scenario would we have a null url? Would this happen if we try restoring a saved 'home panel' tab?", This would happen if you have a deleted history item that hasn't yet synced to the server. There might be other root causes that I haven't yet identified.", b48f840' 
id=1247482	 'Feb 10 19:26:59 Aaron-Trains-iPhone SpringBoard 58 <Error>: SecTrustEvaluate leaf IssuerCommonName SubjectCommonName Feb 10 19:26:59 Aaron-Trains-iPhone SpringBoard 58 <Error>: SecTrustEvaluate leaf IssuerCommonName SubjectCommonName Feb 10 19:26:59 Aaron-Trains-iPhone kernel 0 <Notice>: xpcproxy 293 Container: /private/var/mobile/Containers/Data/Application/87208DF0-D202-452A-BC87-89B3E61CB3D5 (sandbox) Feb 10 19:26:59 Aaron-Trains-iPhone Client 293 <Warning>: \t Adjust a: PRODUCTION: Adjust is running in Production mode. Use this setting only for the build that you want to publish. Set the environment to `sandbox` if you want to test your app! Feb 10 19:27:19 Aaron-Trains-iPhone SpringBoard 58 <Warning>: Forcing crash report of <FBApplicationProcess: 0x15fc58440; Client; pid: 293> (reason: 1, description: org.mozilla.ios.Firefox failed to scene-create after 19.91s (launch took 0.09s of total time limit 20.00s)) Feb 10 19:27:19 Aaron-Trains-iPhone diagnosticd 85 <Error>: error evaluating process info - pid: 293, punique: 293 Feb 10 19:27:19 Aaron-Trains-iPhone SpringBoard 58 <Warning>: Finished crash reporting. Feb 10 19:27:19 Aaron-Trains-iPhone SpringBoard 58 <Warning>: BSXPCMessage received error for message: Connection invalid Feb 10 19:27:19 Aaron-Trains-iPhone SpringBoard 58 <Warning>: BSXPCMessage received error for message: Connection invalid Feb 10 19:27:19 Aaron-Trains-iPhone SpringBoard 58 <Warning>: HW kbd: Failed to set (null) as keyboard focus Feb 10 19:27:19 Aaron-Trains-iPhone mediaserverd 28 <Notice>: \'\' org.mozilla.ios.Firefox(pid = 293) setting DiscoveryMode = DiscoveryMode_None, currentDiscoveryMode = DiscoveryMode_None Feb 10 19:27:19 Aaron-Trains-iPhone com.apple.xpc.launchd 1 (UIKitApplication:org.mozilla.ios.Firefox 0xfa1f 293 ) <Notice>: Service exited due to signal: Killed: 9 Feb 10 19:27:19 Aaron-Trains-iPhone ReportCrash 294 <Warning>: saved type \'109_Client\' report (1 of max 25) as /var/mobile/Library/Logs/CrashReporter/Client_2016-02-10-192719_Aaron-Trains-iPhone.ips.beta Feb 10 19:27:19 Aaron-Trains-iPhone SpringBoard 58 <Warning>: Application \'UIKitApplication:org.mozilla.ios.Firefox 0xfa1f \' exited abnormally via signal. Feb 10 19:27:19 Aaron-Trains-iPhone UserEventAgent 26 <Warning>: 21676329626: id=org.mozilla.ios.Firefox pid=293, state=0 Feb 10 19:27:20 Aaron-Trains-iPhone duetexpertd 158 <Warning>: Error loading default properties for object x-apple-eventkit:///Event/p5833 from daemon: Error Domain=EKCADErrorDomain Code=1013 "(null)" Feb 10 19:27:20 Aaron-Trains-iPhone duetexpertd 158 <Warning>: Error loading default properties for object x-apple-eventkit:///Event/p5833 from daemon: Error Domain=EKCADErrorDomain Code=1013 "(null)" Feb 10 19:27:20 Aaron-Trains-iPhone duetexpertd 158 <Warning>: Error loading default properties for object x-apple-eventkit:///Event/p5833 from daemon: Error Domain=EKCADErrorDomain Code=1013 "(null)" Feb 10 19:27:20 Aaron-Trains-iPhone duetexpertd 158 <Warning>: Error loading to-many relation attendees from daemon: Error Domain=EKCADErrorDomain Code=1013 "(null)" Feb 10 19:27:20 Aaron-Trains-iPhone searchd 149 <Warning>: ====^^^^ DuetExpert missing data, count -> people:2 applicationDeepLinks:0 applications:8 requests:11 missingAllDataRequests:0', iPad eb 10 19:30:37 Aaron-Trains-iPad SpringBoard 53 <Error>: SecTrustEvaluate leaf IssuerCommonName SubjectCommonName Feb 10 19:30:37 Aaron-Trains-iPad SpringBoard 53 <Error>: SecTrustEvaluate leaf IssuerCommonName SubjectCommonName Feb 10 19:30:37 Aaron-Trains-iPad kernel 0 <Notice>: xpcproxy 351 Container: /private/var/mobile/Containers/Data/Application/FE67821C-8C18-4FC4-92EA-214E7BE01FBC (sandbox) Feb 10 19:30:37 Aaron-Trains-iPad Client 351 <Warning>: \t Adjust a: PRODUCTION: Adjust is running in Production mode. Use this setting only for the build that you want to publish. Set the environment to `sandbox` if you want to test your app! Feb 10 19:30:38 Aaron-Trains-iPad SpringBoard 53 <Warning>: BSXPCMessage received error for message: Connection interrupted Feb 10 19:30:38 Aaron-Trains-iPad SpringBoard 53 <Warning>: BSXPCMessage received error for message: Connection invalid Feb 10 19:30:38 Aaron-Trains-iPad SpringBoard 53 <Warning>: HW kbd: Failed to set (null) as keyboard focus Feb 10 19:30:38 Aaron-Trains-iPad mediaserverd 25 <Notice>: '' org.mozilla.ios.Firefox(pid = 351) setting DiscoveryMode = DiscoveryMode_None, currentDiscoveryMode = DiscoveryMode_None Feb 10 19:30:38 Aaron-Trains-iPad com.apple.xpc.launchd 1 (UIKitApplication:org.mozilla.ios.Firefox 0x1e59 351 ) <Warning>: Service exited with abnormal code: 1 Feb 10 19:30:38 Aaron-Trains-iPad SpringBoard 53 <Warning>: Application 'UIKitApplication:org.mozilla.ios.Firefox 0x1e59 ' exited voluntarily. Feb 10 19:30:38 Aaron-Trains-iPad kernel 0 <Notice>: xpcproxy 353 Container: /private/var/mobile/Containers/Data/Application/FE67821C-8C18-4FC4-92EA-214E7BE01FBC (sandbox) Feb 10 19:30:38 Aaron-Trains-iPad UserEventAgent 23 <Warning>: 281868001424: id=org.mozilla.ios.Firefox pid=351, state=0 Feb 10 19:30:38 Aaron-Trains-iPad Client 353 <Warning>: \t Adjust a: PRODUCTION: Adjust is running in Production mode. Use this setting only for the build that you want to publish. Set the environment to `sandbox` if you want to test your app! Feb 10 19:30:58 Aaron-Trains-iPad SpringBoard 53 <Warning>: Forcing crash report of <FBApplicationProcess: 0x1313d6200; Client; pid: 353> (reason: 1, description: org.mozilla.ios.Firefox failed to scene-create after 19.93s (launch took 0.07s of total time limit 20.00s)) Feb 10 19:30:58 Aaron-Trains-iPad diagnosticd 80 <Error>: error evaluating process info - pid: 353, punique: 353 Feb 10 19:30:58 Aaron-Trains-iPad SpringBoard 53 <Warning>: Finished crash reporting. Feb 10 19:30:58 Aaron-Trains-iPad SpringBoard 53 <Warning>: BSXPCMessage received error for message: Connection invalid Feb 10 19:30:58 Aaron-Trains-iPad SpringBoard 53 <Warning>: HW kbd: Failed to set (null) as keyboard focus Feb 10 19:30:58 Aaron-Trains-iPad SpringBoard 53 <Warning>: Unable to get short BSD proc info for 353: No such process Feb 10 19:30:58 Aaron-Trains-iPad SpringBoard 53 <Warning>: Unable to get short BSD proc info for 353: No such process Feb 10 19:30:58 Aaron-Trains-iPad mediaserverd 25 <Notice>: '' org.mozilla.ios.Firefox(pid = 353) setting DiscoveryMode = DiscoveryMode_None, currentDiscoveryMode = DiscoveryMode_None Feb 10 19:30:58 Aaron-Trains-iPad com.apple.xpc.launchd 1 (UIKitApplication:org.mozilla.ios.Firefox 0xa083 353 ) <Notice>: Service exited due to signal: Killed: 9 Feb 10 19:30:58 Aaron-Trains-iPad ReportCrash 354 <Warning>: saved type '109_Client' report (1 of max 25) as /var/mobile/Library/Logs/CrashReporter/Client_2016-02-10-193058_Aaron-Trains-iPad.ips.beta Feb 10 19:30:58 Aaron-Trains-iPad SpringBoard 53 <Warning>: Application 'UIKitApplication:org.mozilla.ios.Firefox 0xa083 ' exited abnormally via signal. Feb 10 19:30:58 Aaron-Trains-iPad UserEventAgent 23 <Warning>: 282355259959: id=org.mozilla.ios.Firefox pid=353, state=0", Random thoughts: \u2022 What did we land between the last good build and this one. Can anyone do some git magic on that? \u2022 We time out, could this be database? \u2022 Is this the first build with Xcode 7.2.1? \u2022 Why does this happen on TestFlight and not on a local development build.', It prints "Adjust is running in Production mode." so whatever is causing this must happen after that.', I created an L10N Aurora build from the v2.x branch and it crashes in the same way. ', Ah maybe ', I got some logging going on a build that crashes: Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Configuring window\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Setting UA\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Starting keyboard helper\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Starting dynamic font helper\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Setting custom menu items\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Creating Sync log file\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Creating corrupt DB logger\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Creating Browser log file\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Getting profile\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Starting web server\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Setting AVAudioSession category\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Configuring tabManager\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Initing BVC\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Configuring Breakpad\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Adding observers\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Done with setting up the application. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Did finish launching. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Setting up Adjust Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Making window key and visible\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Triggering log roll. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Done with applicationDidFinishLaunching. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Loading queued tabs in the background. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC viewDidLoad\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC super viewDidLoad called. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC adding footer and header\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC setting up webViewContainer\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC setting up status bar\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC setting up top touch area\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC setting up URL bar\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC setting up search loader\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC updating toolbar state\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC setting up constraints\u2026 Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC done. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC viewWillAppear. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC super.viewWillAppear done. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: Restoring tabs. Feb 10 21:13:33 Stefan-Arentzs-iPhone Client 863 <Warning>: BVC showHomePanelController. Feb 10 21:13:46 Stefan-Arentzs-iPhone SpringBoard 58 <Warning>: Forcing crash report of <FBApplicationProcess: 0x162265780; Client; pid: 863> (reason: 1, description: org.mozilla.ios.FennecAurora failed to scene-create after 13.61s (launch took 6.39s of total time limit 20.00s)) BrowserViewConroller.showHomePanelController() prints both at function entry and exit. It never exits. This must be a good hint. Was anything changed recently that is called from showHomePanelController() ?', May be a red herring ... because now we get killed at: Feb 10 21:20:37 Stefan-Arentzs-iPhone Client 872 <Warning>: Configuring window\u2026 Feb 10 21:20:37 Stefan-Arentzs-iPhone Client 872 <Warning>: Setting UA\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Starting keyboard helper\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Starting dynamic font helper\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Setting custom menu items\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Creating Sync log file\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Creating corrupt DB logger\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Creating Browser log file\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Getting profile\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Starting web server\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Setting AVAudioSession category\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Configuring tabManager\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Initing BVC\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Configuring Breakpad\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Adding observers\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Done with setting up the application. Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Did finish launching. Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Setting up Adjust Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Making window key and visible\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Triggering log roll. Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Done with applicationDidFinishLaunching. Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: Loading queued tabs in the background. Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: BVC viewDidLoad\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: BVC super viewDidLoad called. Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: BVC adding footer and header\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: BVC setting up webViewContainer\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: BVC setting up status bar\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: BVC setting up top touch area\u2026 Feb 10 21:20:38 Stefan-Arentzs-iPhone Client 872 <Warning>: BVC setting up URL bar\u2026', So could be timing related?', Removed Adjust. No change.', Tried ', with no success', New build with Swift Code Optimization (SWIFT_OPTIMIZATION_LEVEL) set to -Onone Works fine. Two suggestions: 1) Maybe we can try to do an optimized build with Xcode 7.2 to see if that makes a difference. I think the last build we did was with 7.2? 2) Ship with -Onone :-(', Last update before I sign off: I tested with Xcode 7.2 and it has the same behaviour: App compiled with -Onone starts fine App compiled with -O -whole-module-optimization hangs So lets ship an unoptimized binary!', Final update: The problem is -whole-module-optimization. SWIFT_OPTIMIZATION_LEVEL set to just -O gives us a good binary.', *** ', has been marked as a duplicate of this bug. ***', What introduced this?', Created ', ', Pull req. Have at. Note the project file change. You might need to revert 95cdde6 in order to test.', Comment on ', ', Pull req. Don't really understand what's going on, but if it works it works!", Comment on ', ', Pull req. Looks good and works for me as well!', 2898b98', master: 9eb4084' 
id=1182151	 'Created ', login.db crash', * You do not need to be logged into an firefox account to see this issue * This does not seem to occur in debug, but happens reliably on Aurora 23 * convo between fluffyemily & rnewman in IRC: \u2022rnewman> well, we have discovered iOS's DatabaseLockedException. ... 15:43 <\u2022rnewman> could you look to see if we close DBs in response to app lifecycle events? 15:45 <fluffyemily> looks like we only do sync stuff, and that doesn't touch the dbs 15:46 <\u2022rnewman> we disable timers 15:46 <\u2022rnewman> some theory is that this happens if you install an update while a background task was in progress 15:46 <\u2022rnewman> iOS will restore your app in the background and everything is fucked 15:46 <fluffyemily> we do nothing at all inside of applicationWillTerminate 15:47 <\u2022rnewman> so we should see if we can poke the profile DBs from there 15:47 <\u2022rnewman> I don't know if that'll recover your profile 15:47 <\u2022rnewman> rebooting might delete the lock files 15:48 <\u2022rnewman> I hit this with FB's share extension, and it would repeatedly and silently crash accessing its own cache.db 15:48 <\u2022rnewman> works now, after multiple reboots and app upgrades 15:53 <\u2022rnewman> fluffyemily: re mitigation: I strongly doubt that disabling password sync will help, but if you want to try it, just make LoginsSynchronizer return succeed immediately 15:53 <\u2022rnewman> smallest change 15:54 <fluffyemily> rnewman: I'm currently utterly failing to replicate the issue on the development build 15:54 <\u2022rnewman> yeah, won't be easy 15:55 <\u2022rnewman> if you want to try to repro, open the db and maybe trigger a write in applicationwillterminate", Found it! ', Nope, that had nothing to do with it :(', Crash stops when switching off DB crypto in BrowserProfile', We should consider to not have a dev-mode where crypto is turned off. I think it is bad to run with different profiles. If the only reason for that is that we can then easily 'sqlite logins.db' to debug things then I want to suggest that we simply print the key to the console. - Only when we run in DEBUG mode with the Client scheme, which is one we will never ship.", Created ', ', PR ', I can't reproduce this second crash. I'm pretty leery that it was caused by the first crash (which I think is fixed by the backout today). Best as I can tell this error is only caused by doing database access while the app should be in the background. Perhaps the first crash causes a background thread operation to continue while we should be backgrounded... somehow? This wraps out calls in runInBackgroundTask calls so that iOS should be a bit nicer to them (assuming they're not TOO long). That seems similar to what webkit does here: ", (but they have some different API's available it seems). That's pretty stab in the dark. This also turns on encryption in dev builds and prints the key to the console for them. I don't think there are any real races here to worry about... but still thinking. It would be nice to know if this helps the people who can repro this.", Couple of notes: We thought this may be related to the other bug that caused a crash on navigation or redirect. Since many login forms redirect after login. But this is not the case and that bug can be ignored in this context. What was not mentioned in the STR for this bug is that the crash happens when you switch away from the application, for example to lookup a password in your password manager. This is confirmed by the following console entry that is written before the app crashes: Jul 10 10:22:15 Stefans-iPhone-6 SpringBoard 57 <Warning>: Forcing crash report of <FBApplicationProcess: 0x152beb550; Client; pid: 7302> (reason: 4, description: <FBApplicationProcess: 0x152beb550; Client; pid: 7302> was suspended with locked system files: 10:23:21 /private/var/mobile/Containers/Shared/AppGroup/788DF85B-8678-417D-B13D-3244839BDBD6/profile.profile/logins.db) So this is not our code that crashes but it is IOS force killing our app because we have an exclusive lock open on logins.db. The interesting bit here is that this does not happen when encryption of the database is disabled. It only happens when we supply a key for logins.db. So we have narrowd this down to: "iOS kills us because logins.db is locked when encryption is enabled". The question now is, what does sqlcipher do on top of SQLIte that changes the behaviour. And how can we deal with that?', STR for this crash is easy: 1) Enable encryption on the development build in Profile.swift by uncommenting this: private lazy var loginsKey: String? = { // if AppConstants.IsDebug { // return nil // } 2) Run the Client scheme on your device 3) Press the home button to switch the app to the background. You should see this: 2015-07-10 11:40:24.220 Debug Profile.swift:459 endTimedSyncs(): Stopping history sync timer. Message from debugger: Terminated due to signal 9', Created ', ', PR: ', Assuming sqlcipher is keeping something alive (when a key is set) when we're suspended, (maybe it just keeps unencrypted pages in memory or something?) this closes the shared connection when we're suspended. Seems to fix the crashes. We close the connection within its sharedConnection thread, and will recreate it when its needed again. This should be safe.", Comment on ', ', PR ', LGTM', Comment on ', ', PR: ', Fantastic :-)', Emily, were you going to file a follow-up to this because it's still happening occasionally?", I've not actually seen this crash since July 15th 2015 so I'd say it was no longer a problem" 
id=1145637	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Currently on master no way to remove an item anymore so maybe this will be fixed as that code is being worked on.' 
id=1224849	 'Hard to tell if this particular log was for 32 or 64 bit but the 64 bit symbols look more promising: arm64: @objc BrowserViewController.webView(WKWebView, didReceiveAuthenticationChallenge : NSURLAuthenticationChallenge, completionHandler : (NSURLSessionAuthChallengeDisposition, NSURLCredential?) -> ()) -> () (in Client) (BrowserViewController.swift:1561) @objc BrowserViewController.webView(WKWebView, didReceiveAuthenticationChallenge : NSURLAuthenticationChallenge, completionHandler : (NSURLSessionAuthChallengeDisposition, NSURLCredential?) -> ()) -> () (in Client) (BrowserViewController.swift:1561) armv7 specialized _NativeSetStorage._find<A where ...>(A, Int) -> (pos : _NativeSetIndex<A>, found : Bool) (in Client) (TabManager.swift:0) specialized _NativeSetStorage._find<A where ...>(A, Int) -> (pos : _NativeSetIndex<A>, found : Bool) (in Client) (TabManager.swift:0)', Not sure if it's related but the crash looks like it starts from a UIAlertController. This might be happening in cases where we open a new tab from a popup or context menu?", My guess would be an HTTP Basic Auth prompt where the callback doesn't correctly retain something.", Turns out this is simple to reproduce We fail to show basic HTTP auth dialogs in private tabs which cause this crash.', Created ', symbolicated-crash.crash', Looks like a regression from ', since we disable the LoginsHelper for private tabs, but assume the helper is there to show these auth dialogs.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Separating logins detection/fill & authentication handling is definitely a good idea. Works great. Any chance of a test?', master: ', v1.x: ' 
id=1191428	 'Created ', ', Link to Github pull-request: ' 
id=1236956	 '~ #4 under the organizer for 1.3', func withConnection<T>(flags flags: SwiftData.Flags, inout err: NSError?, callback: (connection: SQLiteDBConnection, inout err: NSError?) -> T) -> T { var res: T! err = db.withConnection(flags) { connection in var err: NSError? = nil res = callback(connection: connection, err: &err) return err } return res } The error in this crash is in `return res`. `res` is implicitly unwrapped. If the body doesn't run, or the callback somehow returns nil (which shouldn't be possible), then this will fail, because `res` is never assigned. The body won't run in this case: ", That is, when we're unable to obtain a DB connection, `res` won't have a value, and it will crash right here. That this isn't our top crash implies that our DB layer is fairly reliable! `withConnection` is fundamentally wrong in this regard; it needs to return an optional, be provided a default, or be rewritten to use `throws` so it doesn't need to return, because it cannot guarantee that the provided closure will be called. `inout` error parameters are the devil. This doesn't strictly need STR; it's obvious what the bug is from code inspection. But if you want to try, just make `getSharedConnection` return nil sometimes.", Why getSharedConnection is failing is itself interesting. It's possible that the connection is being closed (forceClose does so, and could race), and it's possible that some other error is causing us to fail to open it in the first place. I encourage whoever takes this bug to dig a little deeper, adding some kind of diagnostics if necessary, to find out how this can occur.", My hypothesis here is that we're attempting to check the bookmark state of a URL (twice, but that's a red herring) at the same time as a write is occurring on a different connection. The attempt to fetch a connection in getSharedConnection will fail, presumably because of a SQLITE_BUSY. That'll lead to the callback not being invoked. The question for reproducing this is then: how do we provoke a write on a different connection? And how do we do so prior to the first retrieval of the connection in the main app? The latter points to this being the first launch of the browser -- much more work to do. So: * Clean install. * Perhaps Share a URL to View Later. This will cause a tab to be opened immediately on launch, in case we don't check isBookmarked for about:home. * Share a URL > Firefox > Add Bookmark. * Very quickly, launch Firefox and open a page. You might be able to reproduce this in the simulator: * Create the profile by launching the app. * Open a tab. * Close and kill the app. * sqlite3 browser.db * Begin a transaction and start a very large write, probably by reading a file that creates a new table and inserts lots and lots of data into it. * At the same time, relaunch the app. I'd try that first.", Created ', ', Pull request There are a number of potential causes of the failure to fetch a connection. This patch adds a throws to the withConnection function in BrowserDB that simply throws the NSError returned by SwiftData and then calling functions either rethrow or handle that error appropriately. This should prevent the crash and provide extra understanding of the cause of crash by logging the error generated. I have also added extra logging in SwiftData optional init in order to try and get a clearer understanding of why the connection failed.', Since the first accidental recreation I've not been able to provide an STR", The try/catches look good. Just need to also update where we call the throwing methods in StorageTests with trys.', I left some comments on the PR. Given that this isn't a complete fix, I'd rather see one that's less invasive -- rather than forcing all callers to `try`, instead guarantee that the callback will always be called. Callers should already be prepared for connection operations to fail, and will be checking the error parameter, so we can just make sure they get a connection that'll fail. I'd also like to make sure that we can easily spot this bug locally. That means crashing for this in debug builds!", Created ', ', Alternative patch.', Note that the underlying issue still persists, so I'll file a follow-up with my analysis from ", .' 
id=1182620	 'Please note that this happened after (among other things) I did "git clean -xffd" in my checkout that I checked out months ago (and then only updated using git pull and ./checkout.sh) - maybe some stuff that was earlier present got removed but no-one would not notice unless doing a new checkout (or git clean -xffd)?', Managed to overcome it by running manually commands from the amalgamation target of sqlcipher: ./configure --enable-tempstore=yes --with-crypto-lib=commoncrypto CFLAGS="-DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2" make sqlite3.c But now hitting another error: /path/to/Library/Developer/Xcode/DerivedData/Client-ddsfbzjydxjurcfycsxnaekdjddj/Build/Intermediates/Client.build/Debug-iphoneos/Storage.build/module.modulemap:2:12: error: header \'Storage-Swift.h\' not found header "Storage-Swift.h" ^ /path/to/firefox-ios/Sync/TabsPayload.swift:7:8: error: could not build Objective-C module \'Storage\' import Storage ^', (In reply to Boris Du\u0161ek from ', ) ', This was actually with an earlier commit (I tried that to see if the original error would still be reproducible - it was), when updating to ddea35aeb120e9b3649f92fdeedaf27bba7a3251, I am no longer getting the quoted error.', Is this still happening? I don't see build errors on the CI server. Did a Clean Build Folder help? (option-shift-command-k)", (In reply to Stefan Arentz :st3fan from ', ) ', For some reason, this is no longer happening (I did update to latest code, not sure if that did it).', Marking this as tracking. :sleroux and i just spent like 30 minutes to get this working for a production build to get past this. We ended up running the amalgamation script manually like :dusek did. After that the build worked. I think we may want to run the amalgamation manually once and then simply add the generated sqlite3*. ch files to the project and never run that build phase again. Or even include a precompiled .a in the project?', Not being an Xcode expert, but looking at the amalgamation target's Run script build phase - is it correct that is has sqlite3.c as its input and libsqlcipher.a as its output, when in fact sqlite3.c seems to me like an *output* (not input) of the step? (i.e. make sqlite3.c I suppose generates sqlite3.c). So maybe just the build phase' inputs and outputs are not correctly specified?", Created ', ', PR: ', This simplifies the sqlcipher target by removing all unused files, adding the generated sqlite3.c, sqlite3.h and sqlite3ext.h files to the project and removing the amalgamation step from the project.', Comment on ', ', PR: ', Fresh clone -> checkout -> archive works for me!', Added some documentation about updating sqlcipher in the project's BUILDING.md", Comment on ', ', PR: ', Works for me on clean checkout.' 
id=1254646	 'Created ', ', Link to Github pull-request: ', Reproducible by using the zh-CN locale. PR includes updated import script, the missing taobao engine, and other engines that have been updated since the last import.', Comment on ', ', Link to Github pull-request: ', Code looks good. I can't comment on the search engine definitions, but I assume that is all good. This also fixes the bug that the China team reported where the app crashes when opening the settings. Same crash point. I verified that this PR fixes that.", v3.x 24a91108238cd8762e5ddf6f188f1436214426af' 
id=1178362	 
id=1250151	 'Another report, same signature Last Exception Backtrace: 0 CoreFoundation \t0x180f6d900 __exceptionPreprocess + 124 (NSException.m:162) 1 libobjc.A.dylib \t0x1805dbf80 objc_exception_throw + 56 (objc-exception.mm:531) 2 CoreFoundation \t0x180f6d7d0 + NSException raise:format:arguments: + 108 (NSException.m:131) 3 Foundation \t0x1818e099c - NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description: + 112 (NSException.m:152) 4 UIKit \t0x186489bbc - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: + 6680 (UICollectionView.m:4168) 5 UIKit \t0x18648e640 - UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering: + 360 (UICollectionView.m:5135) 6 UIKit \t0x18648e4bc - UICollectionView _performBatchUpdates:completion:invalidationContext: + 84 (UICollectionView.m:5099) 7 UIKit \t0x185e4eae8 - UICollectionView performBatchUpdates:completion: + 64 (UICollectionView.m:5094) 8 Client \t0x100139bc8 specialized TabTrayController.(openNewTab in _D01B7308B30559EA93C63D3590DBCB98)(NSURLRequest?) -> () + 664 (TabTrayController.swift:556) 9 Client \t0x100135fe8 @objc TabTrayController.settingsOpenURLInNewTab(NSURL) -> () + 104 (TabTrayController.swift:700) 10 Client \t0x1000fdb94 OpenSupportPageSetting.(onClick(OpenSupportPageSetting) -> (UINavigationController?) -> ()).(closure #1) + 144 (AppSettingsOptions.swift:426) 11 UIKit \t0x185fb7c90 - UIPresentationController transitionDidFinish: + 1320 (UIPresentationController.m:290) 12 UIKit \t0x1860e0530 - _UICurrentContextPresentationController transitionDidFinish: + 44 (_UICurrentContextPresentationController.m:60) 13 UIKit \t0x185fbae88 __56- UIPresentationController runTransitionForCurrentState _block_invoke_2 + 188 (UIPresentationController.m:744) 14 UIKit \t0x185d8f284 - _UIViewControllerTransitionContext completeTransition: + 116 (UIViewControllerTransitioning.m:233) 15 UIKit \t0x185d8f070 - UITransitionView notifyDidCompleteTransition: + 252 (UITransitionView.m:259) 16 UIKit \t0x185d8eb6c - UITransitionView _didCompleteTransition: + 1164 (UITransitionView.m:228) 17 UIKit \t0x185d8e6cc - UITransitionView _transitionDidStop:finished: + 124 (UITransitionView.m:711) 18 UIKit \t0x185c9ae90 - UIViewAnimationState sendDelegateAnimationDidStop:finished: + 312 (UIView.m:1275) 19 UIKit \t0x185c9ad18 - UIViewAnimationState animationDidStop:finished: + 108 (UIView.m:1309) 20 QuartzCore \t0x183671c00 CA::Layer::run_animation_callbacks(void*) + 284 (CALayer.mm:6638) 21 libdispatch.dylib \t0x1809c15f0 _dispatch_client_callout + 16 (object.m:506) 22 libdispatch.dylib \t0x1809c6cf8 _dispatch_main_queue_callback_4CF + 1844 (inline_internal.h:1063) 23 CoreFoundation \t0x180f24bb0 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 12 (CFRunLoop.c:1613) 24 CoreFoundation \t0x180f22a18 __CFRunLoopRun + 1628 (CFRunLoop.c:2718) 25 CoreFoundation \t0x180e51680 CFRunLoopRunSpecific + 384 (CFRunLoop.c:2814) 26 GraphicsServices \t0x182360088 GSEventRunModal + 180 (GSEvent.c:2245) 27 UIKit \t0x185cc8d90 UIApplicationMain + 204 (UIApplication.m:3681) 28 Client \t0x1000e0fb0 main + 332 (main.swift:22) 29 libdyld.dylib \t0x1809f28b8 start + 4 (start_glue.s:78)', * On a device, visit apple.com * Send the tab to another device/simulator/client * Perform a manual Sync on the same device Switched over to a simulator at this point * Performed a manual sync * Opened a new tab Crashed. 2016-03-03 11:25:59.284 Debug BrowserViewController.swift:684 showHomePanelController(inline:) > BVC done with showHomePanelController. 2016-03-03 11:25:59.284 Client 25978:12551804 *** Assertion failure in - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: , /BuildRoot/Library/Caches/com.apple.xbs/Sources/UIKit_Sim/UIKit-3512.30.14/UICollectionView.m:4168 2016-03-03 11:25:59.290 Client 25978:12551804 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'attempt to insert item 3 into section 0, but there are only 3 items in section 0 after the update' *** First throw call stack: ( \t0 CoreFoundation 0x0000000104814e65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x0000000103b34deb objc_exception_throw + 48 \t2 CoreFoundation 0x0000000104814cca + NSException raise:format:arguments: + 106 \t3 Foundation 0x00000001037814de - NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description: + 198 \t4 UIKit 0x0000000105e18d81 - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: + 7853 \t5 UIKit 0x0000000105e21ee7 - UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering: + 415 \t6 UIKit 0x0000000105e21d25 - UICollectionView _performBatchUpdates:completion:invalidationContext: + 74 \t7 UIKit 0x0000000105e21cc8 - UICollectionView performBatchUpdates:completion: + 53 \t8 Client 0x000000010197dcc9 _TFC6Client17TabTrayControllerP33_D01B7308B30559EA93C63D3590DBCB9810openNewTabfS0_FTGSqCSo12NSURLRequest__T_ + 1033 \t9 Client 0x000000010197bd51 _TFC6Client17TabTrayController17SELdidClickAddTabfS0_FT_T_ + 33 \t10 Client 0x000000010197bda2 _TToFC6Client17TabTrayController17SELdidClickAddTabfS0_FT_T_ + 34 \t11 UIKit 0x00000001055b2194 - UIApplication sendAction:to:from:forEvent: + 92 \t12 UIKit 0x00000001057216fc - UIControl sendAction:to:forEvent: + 67 \t13 UIKit 0x00000001057219c8 - UIControl _sendActionsForEvents:withEvent: + 311 \t14 UIKit 0x0000000105720af8 - UIControl touchesEnded:withEvent: + 601 \t15 UIKit 0x000000010562149b - UIWindow _sendTouchesForEvent: + 835 \t16 UIKit 0x00000001056221d0 - UIWindow sendEvent: + 865 \t17 UIKit 0x00000001055d0b66 - UIApplication sendEvent: + 263 \t18 UIKit 0x00000001055aad97 _UIApplicationHandleEventQueue + 6844 \t19 CoreFoundation 0x0000000104740a31 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17 \t20 CoreFoundation 0x000000010473695c __CFRunLoopDoSources0 + 556 \t21 CoreFoundation 0x0000000104735e13 __CFRunLoopRun + 867 \t22 CoreFoundation 0x0000000104735828 CFRunLoopRunSpecific + 488 \t23 GraphicsServices 0x000000010ab33ad2 GSEventRunModal + 161 \t24 UIKit 0x00000001055b0610 UIApplicationMain + 171 \t25 Client 0x0000000101b4c4b7 main + 487 \t26 libdyld.dylib 0x00000001078d892d start + 1 ) libc++abi.dylib: terminating with uncaught exception of type NSException Sign up for free", Visible under 2.1 signatures too', Looks like the issue is being caused by the tab tray being out of sync with how many tabs the tab manager has. Usually the tray is kept in sync via the delegate methods but in viewDidDisappear, we remove the delegate from the manager. When the user goes to the settings page to sync the tabs, the tabs come down, populate the tab manager, but the state is not reflect in the tray because the delegate was removed 1 . Ideally we want to make sure we still listen to tab state changes even when the tab tray is hidden but still allocated. fluffyemily: Would it be possible to move the removal of the delegate to deinit? I notice that the commit mentions issues when implementing peek/pop so I don't want to just remove the line to remove the delegate. Another issue that I'm starting to see is that we abuse the delegate pattern by having many of these delegates to the tab manager. I think this might be better solved with an NSNotification since it seems that there are disparate components in the app that require knowledge of when a tab is added/removed. I think that issue is too large to fix in an uplift but something we should consider in our BVC discussions. 1 ", :sleroux The issue I was trying to solve with that commit is that we often have more than 1 tabManagerDelegate for the TabTrayViewController attached to the TabManager at any one time. Therefore, when we notify from the TabPeekViewController we might not end up notifying the right TabTrayViewController, which causes crashes as things get out of sync. If moving the removal of the tabManagerDelegate to deinit solves this problem then I have no problems with it. It's possible that the issue is that we have a retain issue with TabTrayControllers and therefore the delegates are not being cleaned up because the tabtraycontrollers are not being cleaned up.", Created ', ', Github PR ', Would you mind verifying that this doesn't break the peek/pop interactions?", Comment on ', ', Github PR ', Forgot Emily is at Mobile@Scale - mind giving this a try on your 6S Stef?', The thing to test is preview actions that affect the tab tray - delete tab essentially.', Comment on ', ', Github PR ', LGTM. Tested with preview on 6s and no crashing and everything behaves as expected.', Comment on ', ', Github PR ', LGTM', master 451665a7239c46cf2be3f47e3c903d88d2d710ec', v3.x c4b9bf2', *** ', has been marked as a duplicate of this bug. ***', Build: 4.0.0(1) Device: iPhone 6S (ios: 9.2.1) Steps to reproduce: 1. Launch Mozilla Firefox 2. Open a new tab and access Facebook.com 3. Open a new in PB tab and access Facebook.com 4. Open tabs tray 5. Hard press on an icon to open 3D Touch feature and swipe up to open the open options 6. Tap on the close tabs button 7. Return to the Facebook page in normal browsing 8. Open tabs tray 9. Hard press on an icon to open 3D Touch feature and swipe up to open options 10. Tap on the Close Tabs button 11. Open a new in PB tab 12. Hard press on an icon to open 3D Touch feature and swipe up to open options 13. Tap on the Close Tabs button and observe that the application will enter in an unresponsive state followed by crash Actual results: - The application will be unresponsive and crash Expected results: - The tabs should close The crash was reproduced on master 384acf1', Created ', Please see the attached crash log.', Please open a new bug.' 
id=1199338	 'Created ', ', ', Comment on ', ', ', Looks good & works too. Who could ask for more.', Merged' 
id=1211490	 'So this only happens when you have no private tabs open. If you have >= 1, it works fine.', Created ', ', ', I don't like this patch - mostly because it exposes a fundamental flaw in our app architecture. To avoid crashing, I'm relying on the isPrivate flag from the tab tray to tell the BVC to open the tab in the correct mode to prevent the crash. Ideally the BVC shouldn't be doing this and we shouldn't be using the tab tray as our source of truth for if we're in private mode but a lot of that work will be part of ", .', Merged' 
id=1218826	 'Created ', Crash', Symbolicated: SQLiteBookmarkFolder.subscript.getter (in Storage) (SQLiteBookmarks.swift:41) specialized BookmarksPanel.tableView(UITableView, cellForRowAtIndexPath : NSIndexPath) -> UITableViewCell (BookmarksPanel.swift:103) BookmarksPanel.tableView(UITableView, cellForRowAtIndexPath : NSIndexPath) -> UITableViewCell (BookmarksPanel.swift:0) Funny enough - the place where it crashes has this comment: // TODO: this is fragile. return bookmark as! BookmarkFolder', Which scenario would this not be a BookmarkFolder? class SQLiteBookmarkFolder: BookmarkFolder { private let cursor: Cursor<BookmarkNode> override var count: Int { return cursor.count } override subscript(index: Int) -> BookmarkNode { let bookmark = cursor index if let item = bookmark as? BookmarkItem { return item } // TODO: this is fragile. return bookmark as! BookmarkFolder } init(guid: String, title: String, children: Cursor<BookmarkNode>) { self.cursor = children super.init(guid: guid, title: title) } }', The query doesn't return anything but folders and bookmarks, so that cast should always succeed\u2026 if bookmark isn't nil. It could fail if our cursor index is out of bounds. The subscript operation will quietly return nil, and the cast will fail with EXC_BREAKPOINT. BUT OH HEY LOOK ", Sweet - that works. I've had to do this in the past but never new why but came across this: ", (see the accepted answer). Looks with UITableViews/UIScrollViews if there is an animation in-progress, the view outlives the VC so when the data source asks for data its gone.', Created ', ', ', I wasn't able to reproduce this crash but I think having this patch should prevent the issue or at least be useful to have.", Comment on ', ', ', r+ with comment. Does this apply to other view controllers?', This will apply to any view controllers that subclass SiteTableViewController which I believe includes Bookmarks, History, and Search. This doesn't include SettingsTableViewController or RemoteTabs but those use UITableViewController as their parent.", Merged cbc210e9a1033f2195fc0b25b8f7709853cdce47' 
id=1265846	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1275291	 'Created ', ', Pull request' 
id=1224853	 'Aaron, can you repro?', Nope. I don't see this on 1.2." 
id=1179919	 
id=1221247	 'Looks like the fix for ', didn't work. Aaron has a somewhat reliable STR so I'll dig into this.", I hit this demonstrating to Stephan during a Sync and after a Sync. I attempted a different folder and hit it as well. Trying a third time after a Sync and I couldn't reproduce it again. During a Sync, I can hit this 100%.", Looks like this bug is being caused by an explicit unwrapping of nil here: ', What's happening is that when we click on the cell, it's running cellForRowAtPath in the BookmarksPanel and providing it an out of bounds indexPath. In the case that I was able to reproduce, my 'News' bookmark folder has only one measly article but it tried to grab the 2nd entry which produced nil. What's strange is that cellForRowAtIndexPath would only get called for an out of bounds index if the numberOfRowsInSection was returning the incorrect number. If that's true, then it seems likely that there's a race going on between when we fetch the next/selected bookmark folder and when we reload the table view to update the number of rows in the section ", This would also explain why it's rare to reproduce.", Created ', ', Link to Github pull-request: ', Context: When a UITableView attachs to the window for the first time, reloadData is called. If we haven't fetched our folder yet, then we will be using the previous folder's source instead which causes the data source to be out of sync with what we want to show. This patch simply adds a check to make sure we only return the source.current.count after we've fetched.", Created ', ', Alternative patch.', Comment on ', ', Alternative patch. I like the alternative patch better than my boolean flag option. Lets go with that.', Merging this in for the build today. 79cae9af60146894bb6269e2a3e4ce00d150b939', Leaving sleroux as assigned so he gets blamed for the fallout ;)', *** ', has been marked as a duplicate of this bug. ***' 
id=1228019	 'Caused by duplicated line at ', and ', Duplication not present in v1.x. ', Duplicate line introduced ', introduced by ', Created ', ', Pull request', Merged.' 
id=1135241	 'DEBUG: faviconsMessageHandler message: { "', " = 0; "', " = 1; "', " = 1; "', " = 3; } DEBUG: readerModeMessageHandler message: { Type = ReaderModeStateChange; Value = Unavailable; } DEBUG: New readerModeState: Unavailable fatal error: unexpectedly found nil while unwrapping an Optional value', Yeah, I just hit this too.', This is trivial -- we're not testing the error. In my case, I hit this with a 404 favicon.", Is this fixed?', Yeah, looks like the fix got buried in the PR for ', .' 
id=1157831	 'Unable to create restoration in progress marker file 2015-04-23 14:17:24.954 Client 5201:2045956 *** Assertion failure in - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: , /SourceCache/UIKit/UIKit-3347.44/UICollectionView.m:3870', Created ', ', PR ', This moves all the collection view updates into the tabManagerDelegate calls.', Merged' 
id=1237007	 'Please reopen if this pops up again!' 
id=1250145	 'Can we submit an improvement to XCLogger to better handle with exceptions.', From the NSFileHandle docs under writeData (the origin of the exception): "This method raises an exception if the file descriptor is closed or is not valid, if the receiver represents an unconnected pipe or socket endpoint, if no free space is left on the file system, or if any other writing error occurs." We should probably test for each of these scenarios in our code to ensure that we do not try and log under these circumstances. ', :', Filed ', Created ', ', Link to Github pull-request: ', Created ', Link to Github pull-request: ', Let's try to fix this by wrapping the I/O in an Objective-C try/catch block. Here's the actual commit that adds the try/catch block; the other attachment simply adds this custom repo to Carthage. My proposal is that we give this test/ship in this for 5.0, making sure there's no build-related fallout. Once we release, we can verify that this actually fixes the crash. After that, we can open a PR to XCGLogger with our data, and we can point Carthage back to the actual repo when they accept our changes.", Comment on ', Link to Github pull-request: ', It looks like it _should_ work to prevent a crash. I guess we'll see :). Are we submitting this patch back to XCGLogger?", Comment on ', ', Link to Github pull-request: ', LGTM', (In reply to Emily Toop (:fluffyemily) from ', ) ', Yeah (see ', ). Plan to open a PR there once we have data confirming the fix.' 
id=1192826	 'Regression from ', .', Disabled in commit 72b1a19. Let's leave this open for a proper fix.", Presumably this only crashes if we've never computed the U-A string\u2026", I think this might need to be morphed slightly. * We should use an ephemeral session in the manager, not the default one -- we don\'t need to record anything to disk. * FxA and Token Server should set UAs, too, and also use ephemeral managers. * The UA actually -should not- be the same as the one the browser uses. It should be something like "Firefox-iOS-Sync/28 (Nightly)" to match Android.', Created ', ', Pull req. This establishes a manager for each client, setting the UAs to fixed strings. All managers are using an ephemeral configuration, which means nothing is persisted to disk. General consensus is that manager cleanup happens automatically on dealloc, which is why you don't see us doing that anywhere. There's also some version number and general UA cleanup.", Comment on ', ', Pull req. Looks good with some of the comments addressed!', Merged' 
id=1238006	 "10:28:37 st3fan | looking at the list of URLs .. i wonder if localhost:6571\\/errors\\/error.html is triggering something crazy that causes a lot of memory | usage 10:28:50 st3fan | i dont think anyone considered the error page code to be part of this crash before 10:28:54 AaronMT | yeah what's with error.html?url=<url> 10:29:05 st3fan | right. what actually happens. do we load all those? 10:29:36 st3fan | maybe error pages try to load the original page, even if they are zombified tabs? <- !! 10:29:47 st3fan | i'd love to see another tabState :) 10:31:19 st3fan | i'll add some thoughts to the bug", Created ', tabState-2.txt From another users iPad', Comment on ', tabState-2.txt Didn't get a different report from the user", With the attached tabState, I have narrowed it down to this: The last thing that happens before we crash and take down Springboard is that we load SessionRestore.html. SessionRestore does this: // ... Parse the list of urls and the currentPage from the history request parameter ... // First, replace the session restore page (this page) with the first URL to be restored. history.replaceState({}, "", getRestoreURL(urlList 0 )); // Then push the remaining pages to be restored for (var i = 1; i < urlList.length; i++) { history.pushState({}, \'\', getRestoreURL(urlList i )); } // THIS IS WHERE WE CRASH. WITH OR WITHOUT THE CODE BELOW // We\'ll end up at the last page pushed, so set the selected index to the current // index in the session history. history.go(currentPage); // Finally, reload the page to trigger the error redirection, which will load the actual URL. // For some reason (maybe a WebKit bug?), document.location still points to SessionRestore.html // at this point, so wait until the next tick when the location points to the correct index and URL. setTimeout(function () { document.location.reload(); webkit.messageHandlers.sessionRestoreHelper.postMessage({ name: "didRestoreSession" }); }, 0); The interesting thing here is that we crash also with the code that happening after pushState() REMOVED. The history.go() and the delayed document.location.reload() do not matter. So the mere fact that we call history.pushState() is causing WebKit to panic, do something crazy and cause memory usage that causes iOS to do a Really Low Memory Panic Attack and start killing apps.', I was thinking that the problem here is the error page URLs. So I changed Browser.restore() from: var updatedURLs = String () for url in sessionData.urls { let updatedURL = WebServer.sharedInstance.updateLocalURL(url)!.absoluteString updatedURLs.append(updatedURL) } to: var updatedURLs = String () for url in sessionData.urls { if ErrorPageHelper.isErrorPageURL(url) { if let url = ErrorPageHelper.decodeURL(url) { updatedURLs.append(url.absoluteString) } } else { let updatedURL = WebServer.sharedInstance.updateLocalURL(url)!.absoluteString updatedURLs.append(updatedURL) } } So that all the error.html URLs are replaced by the URL in the url= parameter. This makes no difference. Now I am thinking that one of these URLs is simply causing pushState() to crash.', No crash if i leave only the error.html URLs in the session data No crash if I leave only the non-error.htmlURLs in the session data So maybe it is the length of the browsing session that is causing this? We have 28 error.html entries We have 31 other entries Lets remove 10 from the end - no crash Lets remove 5 from the end - no crash Lets remove 2 from the end - no crash Lets remove 1 from the end - BOOM We crash when the last item in the list sessionData URL list is: ', What is special about this URL?', Note that we also crash on the last URL in the list, ', The URLs do not matter. If I replace the last two with ', and ', we also crash.', At this point I am going to come to the following conclusion: WebKit's history object and specificly pushState() are unreliable and have bugs that cause some kind of very large memory growth that causes the device start killing processes, starting with us. We can do two things: * We can shorten the list of restored URLs * We can disable session restore completely My vote is for #2 for 1.4 and possibly 2.0. When we have a better feeling about these APIs we should look into restoring only a limited tail of the tab history.", POC: ', Crashes Safari too.', " During the Safari Labs at WWDC Brady suspected it was a process communication issue, but I believe it\'s something related to serialization to disk of the history states. If I load the example on testing devices (which don\'t have anything special, not even apps installed), the but is not possible to reproduce right away. On the other hand, if you put Safari to background and come back, it triggers the error 100% of the times. "', Stefan found and commented on: ', disable session restore -> disable per tab history restore. Just restore tabs with their last URL.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', (Adding three reviewers because this is a fix for a critical and we cannot afford regressions. Please think of cases where this patch could fail or make things worse.) I started this patch by removing all code to support persisting tab history and restoring it through the `/session/restore` handler. But that turned out to be a very complicated task because the code is all over the place and touches lots of logic. So I decided to keep all that in place and instead introduce a feature flag `MOZ_PERSIST_SESSION_HISTORY` which can trigger a much simpler session save and restore if set to `false`. * Instead of saving the whole BackForwardList we just save the current item. So the `SessionData.urls` will contain one entry. * Instead of restoring through the `SessionRestore.html` mechanism, we simply take the one `NSURL` from `SessionData.urls` and load it immediately via `webView.loadRequest()` The flag defaults to `false`. There is no way to configure it per build but I think that is fine for now. This code is compatible with previously stored tab state from older versions. The format has not changed.', Aaron, Catalin, I can provide some guidance to test this. Maybe we can do a special build to trigger the crash based on some external condition. I have some ideas but will have to wait until Monday.', (In reply to Stefan Arentz :st3fan from ', ) ', It strikes me that this isn't actually necessary. On the one hand, it reduces the amount of data we store, and might reduce some crash vector. On the other, if it's an unnecessary change it's unnecessary risk, and it also means we can't quietly re-enable back stack restore for existing sessions, because the entries are no longer complete. Could you explain your reasons for doing this?", Is it enough of a fix to simply change these lines in SessionRestore.html: // First, replace the session restore page (this page) with the first URL to be restored. history.replaceState({}, "", getRestoreURL(urlList 0 )); // Then push the remaining pages to be restored. for (var i = 1; i < urlList.length; i++) { history.pushState({}, \'\', getRestoreURL(urlList i )); } // We\'ll end up at the last page pushed, so set the selected index to the current index in the session history. history.go(currentPage); to // Restore to the current page, because restoring history tickles ', . history.replaceState({}, "", getRestoreURL(urlList currentPage )); history.go(0); ? That is: we don\'t think there\'s a problem with a long URL containing session JSON. We don\'t think replaceState() or go() are problematic (right?). We don\'t think there\'s a problem in our Swift code. So can we just do less work in sessionrestore and avoid hitting the WebKit history API bug?', I would prefer not to get this through any of the SessionRestore.html code. It is hack, depends on all kinds of code paths. Less is better.', If we keep SessionRestore.html then we make a web server call, route pages through redirects via /errors/error.html, still touch the history/state code, do callbacks to native. I really prefer to replace all of that with a single 'loadRequest(url)'.", Comment on ', ', PR: ', If we're happy removing history restore stuff altogether, then I'd suggest doing that: delete SessionRestore.html, don't bother with a flag in AppConstants, and delete the existing code path rather than putting it behind a flag. Saves the chance of bitrot, no? Otherwise, this WFM.", I looked into removing it completely. But that means a refactoring of the code and I have a bad feeling about that risk-wise since this is something we want to land very soon. Follow the traces of SessionData and restore code .. there is a lot of it. I have bad feeling about so many changes right now. If we decide to get rid of it then I would prefer to do a simpler fix now and do a followup if we have more time. Like for a 2.1 or 3.0. Note that the feature flag also means that we can easily re-enable this if apple fixes WebKit. I'm curious what Safari does with session restore. Maybe we are overthinking this. Maybe the expectation from people is not really that they always have their full tab history available. Don't know.", Comment on ', ', PR: ', One thing I found and left a comment on is how we reference the restoring property from the BVC to configure some UI and the callback for when session restoration is complete. With the loadRequest the didRestoreSessionForBrowser callback won't be called and the UI might not be updated correctly. If we can replicate this callback and UI change with loadRequest that'd work but it seems like the minimal change of just loading the first entry in SessionRestore.html for now would be safer.", I can confirm that updateUIForReaderHomeStateForTab() is not being called via either didRestoreSessionForBrowser() or the KVO on URL via BrowserViewController.observeValueForKeyPath(). But this is correct: 1) With my patch, the didRestoreSessionForBrowser is not being called because we skip the whole JavaScript side of things, so it is simply never triggered. This is expected behaviour. 2) The call is not made in KVO not because we do not hit that part of the code but instead because there is explicit logic in the KVO listener to *ignore* the URL change is browser.restoring is set to true! This is all on purpose. Without (2) we would call updateUIForReaderHomeStateForTab() twice. Once when the restore is done and once when the URL changes. So, my suggested fix is that we do not set browser.restoring when MOZ_PERSIST_SESSION_HISTORY is false. What happens then is that the page loads normally, the URL changes and we respond to that in the KVO handler by calling updateUIForReaderHomeStateForTab() like we do for all page loads.', Hm browser.restoring is already false when MOZ_PERSIST_SESSION_HISTORY is false. Not sure why my breakpoint did not fire then.', Created ', ', Link to Github pull-request: ', Brian's fix that also only lives in the SessionRestore.html.", I'm having good success with Brian's fix. Tested with the following tabs: * empty * single page in hitory * multiple pages in history * multiple pages in history and then going back to a previous page Restores correctly on a clean install and also on the above test data generated on master.", Comment on ', ', Link to Github pull-request: ', This works for me. I also see no issues with the code.', Comment on ', ', Link to Github pull-request: ', Looks good to me as well. Followed similar steps to Stefan for testing.', v1.x ad1a3fa', has been identified as unrelated to this issue', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1182488	 "I can't recreate this? what simulator did you use?", I wasn't able to produce this on the simulator but I saw it on dev builds. As of Aurora 23 I'm not able to recreate either. I'm going to close as WFM.", I'm reproducing on latest dev build iOS simulator 8.4. Debug Browser.swift:223 fatal error: unexpectedly found nil while unwrapping an Optional value", Ah okay - reopening for investigation. Thanks for finding it!', Created ', ', Pull request', Hi Mosbah, Thanks for the contribution! The patch you submitted fixes the problem but I think there's a more fundamental issue here since the helperManager that we're explicitly unwrapping 'should' exist since without it we don't have any of the reader mode functionality. I looks to me the issue might lie in the createWebview method in Browser.swift where we don't instantiate the HelperManager if the webview is nil. It might be related to the way we're 'restoring' our tabs whenever the user comes back to the app. Interested in diving a bit deeper on this one?", Hi Stephan, That's what I was thinking too, I'll give it a look.", Status update?', Apparently this is a post-effect crash using anything in the bar...', I don't know what was the exact scenario but I can't reproduce anymore ..", *** ', has been marked as a duplicate of this bug. ***', Moshbah's patch should happen anyway. We should never force unwrap anything.", Created ', ', Pull request', Comment on ', ', Pull request Sounds good - I'll merge in the optional unwrap patch and leave this bug open for the nil HelperManager issue since we've already closed a bunch of duplicates to this bug for this issue.", Merged in optional unwrap patch. Thanks for the contribution Mosbah!', Follow-up?', Can't seem to reproduce this anymore. Will mark as WORKSFORME and we can reopen in the future if we see it." 
id=1147126	 "Thanks. I can reproduce. 2015-03-24 16:39:57.393 Client 3158:2234773 *** Terminating app due to uncaught exception 'NSGenericException', reason: 'Your application has presented a UIAlertController (<UIAlertController: 0x125521d20>) of style UIAlertControllerStyleActionSheet. The modalPresentationStyle of a UIAlertController with this style is UIModalPresentationPopover. You must provide location information for this popover through the alert controller's popoverPresentationController. You must provide either a sourceView and sourceRect or a barButtonItem. If this information is not known when you present the alert controller, you may provide it in the UIPopoverPresentationControllerDelegate method -prepareForPopoverPresentation.' *** First throw call stack: (0x184c96530 0x195c540e4 0x189be2be0 0x1897a3614 0x1897a2090 0x189526b8c 0x1894985f0 0x184c4ed98 0x184c4bd24 0x184c4c104 0x184b791f4 0x18de9b6fc 0x18950a10c 0x100092f58 0x100092f98 0x1962d2a08) libc++abi.dylib: terminating with uncaught exception of type NSException -- iPad Air (8.1.3)", Think this is fixed with ', ?', No, this needs a separate fix. I have a pretty good idea how to deal with this. Patch incoming.', Created ', ', PR: ', Present the UIAlertController in a UIPopoverPresentationController if available.' 
id=1207299	 'Unfortunately no clear hints in the trace where this is originating.' 
id=1162313	 "I can't seem to reproduce this one at all anymore :\\ If yo re able to reproduce it let me know. It happened to me about a week back so not sure if it's relevant anymore.", Let's re-open this bug if you run into this again" 
id=1236544	 "Looks like this crash in 1.3 was not that frequent and I'm not seeing it at all in the 1.4 release. Marked as resolved for now." 
id=1255430	 '*** ', has been marked as a duplicate of this bug. ***', I believe this is the cause of ', . Marking as dupe. *** This bug has been marked as a duplicate of ', ***' 
id=1209108	 'All the above reports seem to be from 1.1b1102, do we have the archive/symbols to take a dive into?', Needs symbols.', from brief google search 'EXC_BREAKPOINT most of the times tells you that yo re referencing a symbol or framework which doesn't exist. That could be because the phone is jailbroken or because you say yo re App is compatible with iOS version X but yo re using frameworks/methods that are only available in more recent version. So check for that also.' ", Ugh. So it turns out that the iOS 9 SDK now produces DWARF v4 debugging symbols instead of v3 and Breakpad's dump_syms utility only supports v2/v3. Since it's a relative new format (2010) there isn't any support for it yet in Breakpad. The other caveat is that the Breakpad team is focusing on a new tool called Crashpad that will act as the successor to Breakpad. Ted says they are still going to be using the utility tools from Breakpad but there doesn't seem to be any DWARF v4 planned yet so our symbols are essentially useless for now.", Filed a bug for adding this support: ', Finally got it symbolicated!: ', Looks like it was crashing somewhere in the WKNavigation delegate didFinishNavigation but I'm not seeing any of these crashes in recent builds. Potentially an issue in this build only that got resolved? Hard to tell the exact cause since there are no line numbers...", Closing as WORKSFORME as it hasn't appeared in later builds.", ?', Showed up as an EXC_BREAKPOINT in ', with roughly the same stack. (That was my own crash on that bug, FWIW.)', Ya this definitely seems like 1207179', *** This bug has been marked as a duplicate of ', ***' 
id=1188086	 'From the log on my simulator 2 CoreFoundation 0x0000000105651b9d + NSException raise:format: + 205 3 Foundation 0x00000001047026ae - NSRLEArray objectAtIndex:effectiveRange: + 142 4 Foundation 0x000000010471a029 - NSConcreteMutableAttributedString addAttribute:value:range: + 209 5 Client 0x00000001030b1d9b _TFC6Client21AutocompleteTextField25setAutocompleteSuggestionfS0_FGSqSS_T_ + 3963 6 Client 0x00000001030a73c2 _TFC6Client10URLBarView25setAutocompleteSuggestionfS0_FGSqSS_T_ + 194', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good to me! A few comments in the PR.', Merged PR: ' 
id=1247310	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', master 3736b4705c1625e44552ee4cf072bf5ce28d4ca1' 
id=1291532	 'Created ', ', pull request "zh_CN" should be the only parameter to the value of "IsChinaEdition"', I am confused about this change. When we implemented this, it was said that it was very important that people have the choice to select either the global mozilla servers or the china specific servers. This is why we have a checkbox in the settings that maps to the "useChinaSyncService" preference. With your patch, you are ignoring that checkbox and force people to always use the china servers. That does not sound correct to me?', (In reply to Stefan Arentz :st3fan from ', ) Hi Stefan, Actually I didn't change the rule about sync service. I just changed the rule about homepage. If the user have changed 'useChinaSyncService' to false and 'Regin & Language' to 'zh_CN', and then update the browser to V5.0, the preferences for home page will be set to global. In another way, if the user have changed 'useChinaSyncService' to true and 'Regin & Language' to all except 'zh_CN', and then update the browser to V5.0, the preferences for home page will be set to Chinese. Therefore, whether switch to ChinaEdition should only be determined by the 'Language & Region', should not be affected by other settings.", Comment on ', ', pull request isChinaEdition shouldn't be using useChinaSyncService. Now that we're not using useChinaSyncService, please could you change ", to use isChinaEdition. Rest of the patch looks good though.', (In reply to James Hugman :jhugman @jhugman from ', ) I have changed this code. Please help me review it. Thank you.', Comment on ', ', pull request Comments in the PR.', (In reply to James Hugman :jhugman @jhugman from ', ) ', I have finished\uff0cif you have any question please let me know.', Comment on ', ', pull request r+ with nit. Well done!', (In reply to James Hugman :jhugman @jhugman from ', ) If there is no problem, please help me land this pull request to master before v6.0 released. Thank you.', Merged.' 
id=1250156	 "Believe this is a dupe of 1250151. Although it isn't the same stack trace, the underlying bug looks to be the same. *** This bug has been marked as a duplicate of ", ***' 
id=1209071	 'Sounds like a dupe of ', , but a log would confirm.', *** This bug has been marked as a duplicate of ', ***' 
id=1250149	 '*** ', has been marked as a duplicate of this bug. ***', Able to reproduce with both data: and javascript: schemes in a playground.', Created ', ', Pull request', Comment on ', ', Pull request Makes sense to me!', Merged.', v2.x 68b89cf' 
id=1239597	 "Tested with a few different links on iOS 9.2 and I can't reproduce this issue. For example, I'm loading ", , which loads correctly. When the page is fully loaded, an 'Open with...' button, which opens the 'Share' menu, will show up in the top right corner. dadimpoldwan, can you please provide a link to a pdf file that you used to reproduce this issue", the link you provided results in the same bug. the pdf is displayed but once you tap on "open in..." the entire app hangs and has to be reloaded.', Tried to reproduce on my iPhone 6 (9.2.1), I get a share-sheet with: * Notes * Copy to iBooks * Copy to iTunes * Copy to Chrome * Copy to Kindle * Copy to OneDrive * Copy to Dropbox * Copy to Drive With majority being apps I have installed. Perhaps one needs at least one of the default system apps available (which should be there no problem) -- jailbroken? If this is a crash can you check for Settings > Privacy > Diagnostics & Usage Data > and check for "Firefox_" with a timestamp of the crash. Tap on the crash and you will see a text field with a crash log. Long press to Select All and then Copy the crash text. Paste it into something you can get off of your device (for example, an email to yourself) and attach it to this bug.', I tried to reproduce on iPhone 6 Plus (9.3.1) and iPad Pro (9.3.1) and it didn't crash (Firefox 3.0 (11)). I guess it's no longer an issue on the latest versions of iOS and Firefox." 
id=1178350	 'Created ', ', PR ', Comment on ', ', PR ', LGTM if it works. Thanks for cleaning up after me!', Merged.' 
id=1256326	 'Looks like I already filed this whoops *** This bug has been marked as a duplicate of ', ***' 
id=1135981	 'Error>: CGBitmapContextCreate: unsupported parameter combination: 16 integer bits/component; 64 bits/pixel; 3-component color space; kCGImageAlphaPremultipliedFirst; 960 bytes/row. fatal error: Array index out of range', Created ', ', PR Pull request: ', Thanks, Stephan!' 
id=1190871	 'Created ', Partial Pull request This issue has been fixed as part of ' 
id=1176906	 '(In reply to Andreas Wagner :TheOne from ', ) ', I was coming here to file the exact same bug using the exact same example. :) I confirm your bug.', Fixed on master. I mentioned this one to Wes couple days ago. Able to reproduce on Build #22 but not on master.' 
id=1179915	 'Status update?', Created ', ', Pull request', Tried to open up the suspect code in an attempt to figure out more clearly where the problem is', Comment on ', ', Pull request I think this is the same bug as ', . I also couldn't find any real code pointing to the problem but added a fix to the incorrect use of adding/removing child view controllers that we had. I think it would be useful to add this safer code in just in case that fix doesn't resolve the issue." 
id=1189985	 'Very similar to ', . Stack: Modified rows: 0. 2015-07-31 16:12:15.498 Client 76437:4909158 *** Assertion failure in - UICollectionViewData validateLayoutInRect: , /SourceCache/UIKit_Sim/UIKit-3347.44.2/UICollectionViewData.m:426 2015-07-31 16:12:15.502 Client 76437:4909158 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UICollectionView received layout attributes for a cell with an index path that does not exist: <NSIndexPath: 0xc000000000050016> {length = 2, path = 0 - 10}' *** First throw call stack: ( \t0 CoreFoundation 0x000000010c35cc65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x000000010b884bb7 objc_exception_throw + 45 \t2 CoreFoundation 0x000000010c35caca + NSException raise:format:arguments: + 106 \t3 Foundation 0x000000010b49998f - NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description: + 195 \t4 UIKit 0x000000010d69468b __45- UICollectionViewData validateLayoutInRect: _block_invoke + 1125 \t5 UIKit 0x000000010d693d9d - UICollectionViewData validateLayoutInRect: + 3092 \t6 UIKit 0x000000010d657850 - UICollectionView layoutSubviews + 194 \t7 UIKit 0x000000010d0b39eb - UIView(CALayerDelegate) layoutSublayersOfLayer: + 536 \t8 QuartzCore 0x000000010ceaeed2 - CALayer layoutSublayers + 146 \t9 QuartzCore 0x000000010cea36e6 _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 380 \t10 UIKit 0x000000010d0a7635 - UIView(Hierarchy) layoutBelowIfNeeded + 607 \t11 UIKit 0x000000010d19441e - UINavigationController _layoutViewController: + 1135 \t12 UIKit 0x000000010d18bb51 - UINavigationController _repositionPaletteWithNavigationBarHidden:duration:shouldUpdateNavigationItems: + 370 \t13 UIKit 0x000000010d192181 - UINavigationController _updateBarsForCurrentInterfaceOrientation + 79 \t14 UIKit 0x000000010d19ab11 __84- UINavigationController willTransitionToTraitCollection:withTransitionCoordinator: _block_invoke + 528 \t15 UIKit 0x000000010d7835ae - _UIViewControllerTransitionCoordinator _applyBlocks:releaseBlocks: + 217 \t16 UIKit 0x000000010d780ace - _UIViewControllerTransitionContext __runAlongsideAnimations + 139 \t17 UIKit 0x000000010d4ac10e __58- _UIWindowRotationAnimationController animateTransition: _block_invoke + 58 \t18 UIKit 0x000000010d0ac3e2 + UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:factory:animations:start:animationStateGenerator:completion: + 473 \t19 UIKit 0x000000010d0ac637 + UIView(UIViewAnimationWithBlocks) animateWithDuration:delay:options:animations:completion: + 57 \t20 UIKit 0x000000010d4ac090 - _UIWindowRotationAnimationController animateTransition: + 408 \t21 UIKit 0x000000010d084a09 - UIWindow _rotateToBounds:withAnimator:transitionContext: + 761 \t22 UIKit 0x000000010d086c77 - UIWindow _rotateWindowToOrientation:updateStatusBar:duration:skipCallbacks: + 1741 \t23 UIKit 0x000000010d0875ba - UIWindow _setRotatableClient:toOrientation:applyTransformToWindow:updateStatusBar:duration:force:isRotating: + 559 \t24 UIKit 0x000000010d08652e - UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating: + 116 \t25 UIKit 0x000000010d0864b4 - UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force: + 36 \t26 UIKit 0x000000010d086361 - UIWindow _setRotatableViewOrientation:updateStatusBar:duration:force: + 122 \t27 UIKit 0x000000010d0853fe __57- UIWindow _updateToInterfaceOrientation:duration:force: _block_invoke + 98 \t28 UIKit 0x000000010d08534e - UIWindow _updateToInterfaceOrientation:duration:force: + 391 \t29 UIKit 0x000000010d085790 - UIWindow _updateInterfaceOrientationFromDeviceOrientation: + 316 \t30 CoreFoundation 0x000000010c32c54c __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 12 \t31 CoreFoundation 0x000000010c22aa04 _CFXNotificationPost + 2484 \t32 Foundation 0x000000010b3db968 - NSNotificationCenter postNotificationName:object:userInfo: + 66 \t33 UIKit 0x000000010d2ace19 - UIDevice setOrientation:animated: + 282 \t34 UIKit 0x000000010d048007 - UIApplication handleEvent:withNewEvent: + 1507 \t35 UIKit 0x000000010d04849a - UIApplication sendEvent: + 79 \t36 UIKit 0x000000010d033b4f _UIApplicationHandleEvent + 593 \t37 GraphicsServices 0x000000011031638c _PurpleEventCallback + 756 \t38 GraphicsServices 0x0000000110315e74 PurpleEventCallback + 35 \t39 CoreFoundation 0x000000010c2906a9 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 41 \t40 CoreFoundation 0x000000010c29061b __CFRunLoopDoSource1 + 475 \t41 CoreFoundation 0x000000010c285e68 __CFRunLoopRun + 2200 \t42 CoreFoundation 0x000000010c285366 CFRunLoopRunSpecific + 470 \t43 GraphicsServices 0x0000000110314a3e GSEventRunModal + 161 \t44 UIKit 0x000000010d0338c0 UIApplicationMain + 1282 \t45 Client 0x0000000109c33e27 main + 1047 \t46 libdyld.dylib 0x000000010efda145 start + 1 )", Created ', ', Pull request', Comment on ', ', Pull request Seems to work well. Yay for tests!' 
id=1298029	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good. I see now how explicit unwraps just cause problems down the road ;)', master a3e64e43e0ded7d5f709b86304b848b464e7926f', Uplift me!', v5.x 0a6e334' 
id=1274568	 "Please note that Mozilla's mobile browser does not and has never owned a gmail account.", After playing around a bit with this, it seems the main point of contention with the @ . url is the square bracket . There is a great discussion in this SO post 1 talking specifically about the square brackets and other reserved characters and how they affect a URL being valid. Since this only occurs on iOS 8 and not 9, it would seem they've addressed this bug inside WebKit. As for a fix for Firefox, ideally we would treat this kind of input as a search instead of a URL but our current way of validating URLs by using NSURL says it's a valid URL. This falls into the area of validating URLs ourselves since square brackets are definitely acceptable in other parts of a URL. I don't think filtering URLs through a regex would be worth the potentially trouble to fix a bug on a low adoption iOS version. I would remove this from 5.0+ -> + unless there is a neat fix we can do to change this to return searches instead of URLs. 1 ", Alternate steps to reproduce on IOS 9.x : 1. Go to Firefox for desktop and add some bookmarks 2. Edit one of the bookmarks on desktop by right click and entering properties 3. Type in the URL field @. which will default to ', 4. Sync Firefox on desktop and mobile device 5. Go to the bookmark location on mobile device and scroll to the edited bookmark', Closing as we no longer support 8.x' 
id=1221235	 ' frame #3: 0x0000000100b573f4 Storage`Storage.SwiftData.withConnection (flags=ReadWriteCreate, cb=(Storage`partial apply forwarder for Storage.SwiftData.(transaction (Storage.SwiftData) -> ((db : Storage.SQLiteDBConnection) -> Swift.Bool) -> Swift.Optional<__ObjC.NSError>).(closure #1) at SwiftData.swift), self=0x000000012fd8c480)(Storage.SwiftData.Flags, cb : (db : Storage.SQLiteDBConnection) -> Swift.Optional<__ObjC.NSError>) -> Swift.Optional<__ObjC.NSError> + 736 at SwiftData.swift:105 frame #4: 0x0000000100b57624 Storage`Storage.SwiftData.transaction (transactionClosure=(Storage`partial apply forwarder for Storage.BrowserDB.(transaction (Storage.BrowserDB) -> (inout Swift.Optional<__ObjC.NSError>, callback : (connection : Storage.SQLiteDBConnection, err : inout Swift.Optional<__ObjC.NSError>) -> Swift.Bool) -> ()).(closure #1) at BrowserDB.swift), self=0x000000012fd8c480)((db : Storage.SQLiteDBConnection) -> Swift.Bool) -> Swift.Optional<__ObjC.NSError> + 148 at SwiftData.swift:140 frame #5: 0x0000000100b437b8 Storage`Storage.BrowserDB.transaction (err=<no summary available>, callback=(Storage`partial apply forwarder for Storage.BrowserDB.(run (Storage.BrowserDB) -> (Swift.Array<(sql : Swift.String, args : Swift.Optional<Swift.Array<Swift.Optional<Swift.AnyObject>>>)>) -> Shared.Deferred<Shared.Maybe<()>>).(closure #1) at BrowserDB.swift), self=0x000000012fd300f0)(inout Swift.Optional<__ObjC.NSError>, callback : (connection : Storage.SQLiteDBConnection, err : inout Swift.Optional<__ObjC.NSError>) -> Swift.Bool) -> () + 140 at BrowserDB.swift:225 frame #6: 0x0000000100b45708 Storage`Storage.BrowserDB.run (sql=4 values, self=0x000000012fd300f0)(Swift.Array<(sql : Swift.String, args : Swift.Optional<Swift.Array<Swift.Optional<Swift.AnyObject>>>)>) -> Shared.Deferred<Shared.Maybe<()>> + 136 at BrowserDB.swift:356 frame #7: 0x0000000100afbb84 Storage`Storage.SQLiteHistory.clearHistory (self=0x000000012fd9ec50)() -> Shared.Deferred<Shared.Maybe<()>> + 804 at SQLiteHistory.swift:148 frame #8: 0x0000000100b022c4 Storage`protocol witness for Storage.BrowserHistory.clearHistory <A where A: Storage.BrowserHistory> (A)() -> Shared.Deferred<Shared.Maybe<()>> in conformance Storage.SQLiteHistory : Storage.BrowserHistory in Storage + 44 at SQLiteHistory.swift:142 frame #9: 0x00000001000e1a20 Client`Client.HistoryClearable.clear (self=0x000000013103bdb0)() -> Shared.Deferred<Shared.Maybe<()>> + 160 at Clearables.swift:36 * frame #10: 0x00000001000e1b6c Client`protocol witness for Client.Clearable.clear <A where A: Client.Clearable> (A)() -> Shared.Deferred<Shared.Maybe<()>> in conformance Client.HistoryClearable : Client.Clearable in Client + 52 at Clearables.swift:35 frame #11: 0x00000001002a18e4 Client`Client.ClearPrivateDataTableViewController.(_=0, clearable=Clearable @ 0x000000016fdbe118) -> (__ObjC.UITableView, didSelectRowAtIndexPath : __ObjC.NSIndexPath) -> ()).(closure #2) + 80 at ClearPrivateDataTableViewController.swift:111 frame #12: 0x00000001002a194c Client`reabstraction thunk helper from @callee_owned (@unowned Swift.Int, @in Client.Clearable) -> (@owned Shared.Deferred<Shared.Maybe<()>>, @error @owned Swift.ErrorType) to @callee_owned (@in (index : Swift.Int, element : Client.Clearable)) -> (@out Shared.Deferred<Shared.Maybe<()>>, @error @owned Swift.ErrorType) + 48 at ClearPrivateDataTableViewController.swift:0 frame #13: 0x00000001014614ac libswiftCore.dylib`ext.Swift.Swift.CollectionType<A where A: Swift.CollectionType>.map <A><B where A: Swift.CollectionType> (A)((A.Generator.Element) throws -> B) throws -> Swift.Array<B> + 728 frame #14: 0x000000010029fe80 Client`Client.ClearPrivateDataTableViewController.tableView (tableView=0x00000001308e5c00, indexPath=0xc000000000000116, self=0x000000013144da30)(__ObjC.UITableView, didSelectRowAtIndexPath : __ObjC.NSIndexPath) -> () + 832 at ClearPrivateDataTableViewController.swift:111 frame #15: 0x000000010029ffcc Client`@objc Client.ClearPrivateDataTableViewController.tableView (Client.ClearPrivateDataTableViewController)(__ObjC.UITableView, didSelectRowAtIndexPath : __ObjC.NSIndexPath) -> () + 92 at ClearPrivateDataTableViewController.swift:0', ClearPrivateDataViewController: clearables .enumerate() .filter { (i, _) in toggles i } .map { (_, clearable) in clearable.clear() } .allSucceed() .upon { result in This is blocking the main thread until the DB operations complete. The DB operations are likely flushing the WAL and autovacuuming.', I saw the clearables run with vacuum successfully: 2015-11-03 11:49:54.313 Debug ClearPrivateDataTableViewController.swift:114 tableView(_:didSelectRowAtIndexPath:) > Running clearable Client.HistoryClearable on thread <NSThread: 0x170074d40>{number = 1, name = main}. 2015-11-03 11:49:54.317 Debug BrowserDB.swift:231 vacuum() > Vacuuming a BrowserDB. 2015-11-03 11:49:54.317 Debug ClearPrivateDataTableViewController.swift:114 tableView(_:didSelectRowAtIndexPath:) > Running clearable Client.CacheClearable on thread <NSThread: 0x170074d40>{number = 1, name = main}. 2015-11-03 11:49:54.347 Error Browser.swift:157 restore > creating webview with no lastRequest and no session data: nil 2015-11-03 11:49:54.375 Debug ClearPrivateDataTableViewController.swift:114 tableView(_:didSelectRowAtIndexPath:) > Running clearable Client.CookiesClearable on thread <NSThread: 0x170074d40>{number = 1, name = main}. 2015-11-03 11:49:54.394 Error Browser.swift:157 restore > creating webview with no lastRequest and no session data: nil 2015-11-03 11:49:54.416 Debug ClearPrivateDataTableViewController.swift:114 tableView(_:didSelectRowAtIndexPath:) > Running clearable Client.SiteDataClearable on thread <NSThread: 0x170074d40>{number = 1, name = main}. 2015-11-03 11:49:54.436 Error Browser.swift:157 restore > creating webview with no lastRequest and no session data: nil 2015-11-03 11:49:54.457 Debug ClearPrivateDataTableViewController.swift:114 tableView(_:didSelectRowAtIndexPath:) > Running clearable Client.PasswordsClearable on thread <NSThread: 0x170074d40>{number = 1, name = main}. The .upon block never ran. Clearing data *again* leaves us blocked in executeQueryUnsafe: * thread #6: tid = 0x1581, 0x0000000100c1b5a0 Storage`sqlite3VdbeMemClearAndResize(pMem=0x0000002800000028, szNew=1) + 120 at sqlite3.c:65731, queue = 'SQLite connection: /private/var/mobile/Containers/Shared/AppGroup/2F521F0E-131E-472A-B0F4-2AA0467B7EEC/profile.profile/browser.db' frame #0: 0x0000000100c1b5a0 Storage`sqlite3VdbeMemClearAndResize(pMem=0x0000002800000028, szNew=1) + 120 at sqlite3.c:65731 frame #1: 0x0000000100bf60c0 Storage`sqlite3ValueSetStr(v=0x0000000105740300, n=-1, z=0x000000010573f280, enc='\\x01', xDel=0xffffffffffffffff) + 68 at sqlite3.c:67098 frame #2: 0x0000000100c17070 Storage`sqlite3VdbeTransferError(p=0x000000014fd64180) + 132 at sqlite3.c:69659 frame #3: 0x0000000100bede7c Storage`sqlite3VdbeReset(p=0x000000014fd64180) + 60 at sqlite3.c:69718 frame #4: 0x0000000100bede00 Storage`sqlite3_reset(pStmt=0x000000014fd64180) + 64 at sqlite3.c:71408 frame #5: 0x0000000100bef4a8 Storage`sqlite3Step(p=0x000000014fd64180) + 52 at sqlite3.c:71764 Presumably this is because we're not getting any rows back from the VACUUM cursor.", Ugh. We're vacuuming within a transaction. That doesn't work.", Created ', ', Pull req.', I tested with a long sleep inside the vacuum operation, and we don't block the main thread.", Comment on ', ', Pull req. Works for me and the patch looks good - just a super minor nit.', cf08175 Thanks for spotting my error, Aaron!' 
id=1167233	 'Crash in tab.expireSnackbars()', If those frames are relevant, then this sounds like ', .', This is still reproducible on master (05/26). Just tap CPD.', Created ', ', PR ', I'm still thinking about this a bit, but figured I'd get some other ideas/opinions.", Updated the PR with something much simpler. The webView manages to continue firing events after we've removed its Browser from the tabManager. There's a small possibility of a race there. I detached the navigationDelegate (just like we remove all the other delegates) to prevent us from listening to navigation events at that point.", Comment on ', ', PR ', Might want to move this into TabManager as mentioned in the PR.' 
id=1223842	 'This crash has been resolved by the fix whereby we stop force unwrapping the local webserver on start. *** This bug has been marked as a duplicate of ', ***' 
id=1222545	 'Some notes from when I was investigating this: * I think the highlight becoming stuck is related to the text field being empty while changing the highlight state. * In the past, I was able to avoid this on iPhones using the hack at ', . That is, we make the text field non-empty first. This workaround doesn't seem to work on iPads. * I have a branch that adds logging in a few places and increases the delay before the autocompletion kicks in: ", . Hasn't revealed anything useful yet.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM!' 
id=1224852	 'This looks a lot like ', which is resolved in 1.2. Let's mark this as duplicate for now and see after 1.2 is out. *** This bug has been marked as a duplicate of ", ***' 
id=1215972	 'Reproducible on master. * With headphones plugged into your iPhone visit a site with some sort of streaming media content (e.g, ', ) * Start watching a video * During playback hit the power button on your iPhone to turn the screen off * Remove headphones * Turn on the phone and open Firefox, it will consistently crash', Created ', ', PR: ', This patch includes some minor changes to the handling of audio session interruptions. * When we receive a `AVAudioEngineConfigurationChangeNotification` we only rebuild the audio node graph and do not try to start the audio again * We now also listen to `AVAudioSessionInterruptionNotification` where we either stop the two `AVAudioPlayerNode` instances or we (re)start the engine. Tested with the reported STR: * With headphones plugged into your iPhone visit a site with some sort of streaming media content (e.g, ', ) * Start watching a video * During playback hit the power button on your iPhone to turn the screen off * Remove headphones * Turn on the phone and open Firefox, it will consistently crash Also tested with *VoiceOver* enabled to make sure that the `AuralProgressBar` keeps working.', Comment on ', ', PR: ', Hello Stefan, and sorry for the delay. Being no AVAudioEngine expert in the first place (I still wrote the code, though), and having briefly looked at the diff seeing everything you are doing looks reasonable, it's a +1 from me. (I noticed that AuralProgressBar has been disabled in the meantime until other issues with it are resolved.)" 
id=1166860	 'STR taken from ', Steps to Reproduce: 1. Open cnn.com 2. Click the first article you see 3. Verify it has reader mode available (Reader mode icon appears in URL bar) 4. Tap the "Back" button 5. Tap the "Forward" button, verify Reader mode is still available (be patient, it appears ~5 seconds after the webpage loads) 6. Tap the "Back" button 7. Tap the "Forward" button First time going back is ok. Second time crashes.', This is the WebKit code. See the FIXME comment. Means we can expect nil. void NavigationState::LoaderClient::didFinishLoadForFrame(WebPageProxy& page, WebFrameProxy& webFrameProxy, API::Navigation* navigation, API::Object*) { if (!webFrameProxy.isMainFrame()) return; if (!m_navigationState.m_navigationDelegateMethods.webViewDidFinishNavigation) return; auto navigationDelegate = m_navigationState.m_navigationDelegate.get(); if (!navigationDelegate) return; // FIXME: We should assert that navigation is not null here, but it's currently null for some navigations through the page cache. WKNavigation *wkNavigation = nil; if (navigation) wkNavigation = wrapper(*navigation); navigationDelegate webView:m_navigationState.m_webView didFinishNavigation:wkNavigation ; }", Ugh. Yay for other people's bugs! Still, should be an easy fix." 
id=1250153	 'Created ', ', PR: ', This patch removes a implicit `try!` and replaces it with a `do/try` and some basic logging.', Comment on ', ', PR: ', This one is strange. Aside from not being able to delete the file from the disk (which seems unlikely), we might be accessing the TabManager from different threads. There are multiple paths that can fire off preserveTabs(), and if multiple threads end up executing clearExcluding at the same time, we\'ll probably hit this crash when the second thread tries to delete a file that\'s already been deleted. In addition to the fix here, it\'d be a good idea to throw more "assert(NSThread.isMainThread())"s throughout TabManager -- preserveTabsInternal() in particular. TabManager isn\'t thread-safe, and bad things will happen if we try to use it concurrently.', Yeah if we think thread safety is an issue here then we need to add more asserts to the code. Most of TabManager is covered by those it seems, but there are a few cases where storeChanges() can be called without a check for the main thread. I think that belongs in a different patch though?', master: 2c26456 v4.x: 0af04ea' 
id=1207671	 'Crashed in private func deleteHistoryTileForSite(site: Site, atIndexPath indexPath: NSIndexPath) { profile.history.removeSiteFromTopSites(site) >>== { self.profile.history.getSitesByFrecencyWithLimit(self.layout.thumbnailCount).uponQueue(dispatch_get_main_queue(), block: { result in self.updateDataSourceWithSites(result) self.deleteOrUpdateSites(result, indexPath: indexPath) }) } }', Reproducible on Test Flight as well', My diagnosis: The UICollectionView thinks that this is a deletion. It has invariants, such as "if the collection has N items, and you delete 1, it\'ll have N-1 items". That\'s not true for top sites as implemented. If you hide a domain from top sites, when we requery you\'ll get the same limited number of results, with the removed domain gone but the next-highest-ranked domain added at the end of the list. (The invariant will hold if you have a very small number of visited domains, which is presumably why this didn\'t come up in testing.) We have three choices here. 1. Don\'t treat this as a deletion as understood by UICollectionView; remove or suppress the invariant, or take a different code path. 2. Fetch one fewer item when requerying. This is kinda weird. 3. Don\'t requery: remove the tile instead. It\'ll reappear with another item next time the user visits Top Sites, so might also look a little strange. None of this is storage related, so moving this to Home Panels.', I cannot replicate this at all. If anyone can come up with a reproducible STR then happy to revisit, but there is nothing obvious in the code that would lead to this.' 
id=1256616	 'Created ', Client 15-03-16 16-23.crash', Thread 2: 0 libswiftCore.dylib \t0x0000000101e78e4c 0x101d30000 + 1347148 1 libswiftCore.dylib \t0x0000000101e78e4c 0x101d30000 + 1347148 0x00117308 (in Sync) value witness table for (PartialParsedJSONResponseSerializer in _4DB685CA83BA70DD968224D5256BDB6D) (in Sync) + 52 specialized specialized SequenceType<A where ...>.flatMap<A><B where ...>((A.Generator.Element) throws -> B?) throws -> B (in Sync) (BookmarksDownloader.swift:0) ThreeWayTreeMerger.init(local : BookmarkTree, mirror : BookmarkTree, remote : BookmarkTree, itemSources : ItemSources) -> ThreeWayTreeMerger (in Sync) (ThreeWayTreeMerger.swift:755)', Thread 0 is doing deallocation in the middle of a table view layout pass. This is the thread that provoked the termination by taking too long. 3 UIFoundation \t0x00000001933c62d0 - _UIFontCacheKey dealloc + 140 4 libobjc.A.dylib \t0x0000000197005ae8 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 508 5 UIKit \t0x0000000187ab723c - UITableView layoutSubviews + 192 6 UIKit \t0x00000001879c77ac - UIView(CALayerDelegate) layoutSublayersOfLayer: + 644 7 QuartzCore \t0x00000001871c6b58 - CALayer layoutSublayers + 148 There's a lot going on in the background, so the layout pass doesn't complete within 5 seconds, so we get terminated with badf00d: Exception Type: 00000020 Exception Codes: 0x000000008badf00d Exception Note: SIMULATED (this is NOT a crash) Highlighted by Thread: 0 Thread 2 is processing downloaded bookmark records (", ). Thread 4 is away doing disk IO for prefs: 7 Foundation \t0x00000001832c9428 - NSUserDefaults(NSUserDefaults) synchronize + 36 Thread 5 is making an HTTP request. 5 CFNetwork \t0x0000000181bb5b84 + NSURLConnection(Loader) _resourceLoadLoop: + 412 Thread 6 is doing blocking socket IO: 0 libsystem_kernel.dylib \t0x0000000197957368 __select + 8 1 CoreFoundation \t0x00000001823f6670 __CFSocketManager + 648 My guess is that this is one of three things: 1. Disk or IO system contention. 2. Deadlock between main thread and a background thread. 3. The main thread being blocked on database access. I cannot reproduce this on my device.', Device: Tablet iPad Air 2 Build: v3.0b6 steps to reproduce: 1. Open Firefox 2. Sign in to FxA from the welcome tour or from the "Synced Tabs" panel 3. Wait ~25seconds 4. Try to switch between home panels => Firefox becomes unresponsive 5. Close Firefox 6. Re-open => "Firefox crashed" dialog is displayed', Sometimes the crash dialog is not displayed and I cannot use Firefox anymore. Closing and re-opening Firefox a few times, still makes Firefox unresponsive.', I am worried about this bug being a bigger issue in the ThreeWayMerger. Hints that this is something bigger: we have also disabled the SyncTests/TestBookmarkTreeMerging test on CircleCI because it kept timing out the tests. We thought this was a test issue with databases being locked, but if it looks very similar to what is happening on a real device then we need to investigate if the code has the potential to lock things I think.', There is no tree merger code running in 3.0 or master. Teo's device was only running the initializer, which doesn't do any work. In any case, the tree merger itself is relatively simple, operating recursively on shallow immutable trees, and should always either finish or crash. We've always had issues with DB locking in tests -- the write lock tests for SwiftData fail intermittently. That's unlikely to be the cause of issues on a real device, where the lifecycle is much simpler.", (In reply to Teodora Vermesan (:TeoVermesan) from ', ) ', Teo, how many bookmarks do you have? (You should be able to find out from desktop Firefox, or SELECT COUNT(*) FROM moz_bookmarks; in desktop's places.sqlite) Can you share with me your FxA credentials for this account?", I have 577 bookmarks. I will send you an email with the credentials, since its my personal FxA.', Thanks, Teo. I'll try again to see if I can repro.", Found _even dirtier_ data. ', . Thanks for the help investigating, Teo; I'll grind through this until your profile works.", Fixed via ', Definitely needs verification!' 
id=1237005	 "A WebKit completion handler was deallocated before the request it was tied to completed. My guess: This could be WebKit's fault. More likely it's ours: that we're losing a reference to something (apparently from a UIAlertController) before either allowing a request to complete or explicitly canceling it.", #1 on 1.4', Could this be a delayed auth dialog. We can test with a page that waits 5 seconds and redirects to a basic auth site. While that happens we can switch tabs to see if this happens.', Good call. I believe I am hitting this: Set a JS alert to go off after a few seconds Switched tabs to ', See auth prompt, wait for JS alert, *crash*', Aaron can you link to a test page and STR?', So I found a solution to the crash but I have a question about what we should expect in this scenario. The issue we're running into is trying to display another alert prompt after another has been shown will result in the second one not showing which in turn causes the required completionHandler to not be called. A simple fix is to check to see if we are already showing a prompt and to silence any prompts from displaying if there is one already being shown. Another alternative is to dismiss the one being shown and present the new one. I don't recall but on the web I believe it dismisses the existing alert if another one wants to display, correct?", What does Safari on iOS do? What does Firefox do on Android? alerts (and other JS dialogs) are supposed to be modal. Is this an issue if two sites in two tabs both try to show an alert? (Are our alerts tab-scoped, as they should be?)', The current behavior is that alerts are not tab-scoped. Any time a backgrounded tab wants to display a prompt, it will try to do so even if that site is not in the foreground. In Safari on iOS, any prompts for background tabs are queued until the site is brought back into the foreground. The root cause of the crash is the completionHandler that is passed to us from the runJavaScriptAlertPanelWithMessage callback is never called because the backgrounded tab's UIAlertController we try to display is forcibly cancelled by the system. The BVC can only 'present' one view controller at a time. If the handler is not called an exception occurs. The completionHandler doesn't need to be invoked in the callback method though. The exception will only be thrown if the reference to the completionHandler is lost. This makes sense because our current solution calls the handler in the UIAlertController action handlers which maintains a reference to the completionHandler. I purpose we emulate what Safari does and queue up any prompts we need to display while the WebView is not in foreground. Upon tab selection/foreground, we replay the prompts. I'm going to work on patch for this. Any cases you can thing of that this wouldn't work for?", Not sure if we're supposed to let the JS alert() call complete until the alert has been dismissed: supposed to be modal. But I certainly think we should scope alerts to a tab.", Good call - I'm going to move the completionHandler invocation from the action callback into the UIViewController lifecycle so we properly trigger it when the modal is dismissed.", Created ', ', Link to Github pull-request: ', As mentioned in the bug, this patch implements tab-scoping for alerts that are generated from web pages. Before, when a backgrounded tab were to request showing a prompt, the BVC would blindly obey and try to fire the prompt. If a prompt was already being shown, this would fail and result in the provided completion handler to never being called - resulting in a runtime exception. We still listen for prompt requests from pages but check to see if the requesting web view is in the foreground. If so, we go ahead and show the prompt as we did before. If the page is backgrounded, we store the information needed to display the prompt at a later time. Upon foregrounding of the tab, the prompts are dequeued in FILO order as expected. Since this touches the browser lifecycle and changes the way we handle the prompt callbacks I wouldn't mind some extra eyes on this patch. This applies to all web-generated patches. The only exception not handled yet is Basic Auth prompts.", Comment on ', ', Link to Github pull-request: ', This looks great. Lets get this landed soon so that QA can test this very well.', master e96fa89444b6d893e8703934253b069f14c9819d', Aaron this patch changes how we handle alerts in a bigger way. Do you think you can create some good test scenarios not just for this specific crash but also for generic alert handling?', As a side note, I did some investigation today into the WebKit2 source and I'm pretty confident that the prompts will trigger regardless of if they are backgrounded or not. The prompt invocation from WebCore gets bubbled right up through to the UIProcess without any filters checking for foreground/background of pages. As a matter of fact, on desktop Safari just overlays prompts on top of each other for Aaron's test page :\\", With 2.0b4: * No crash on my small test-case \u21b3 background JS alert is displayed on access of it's associated tab * Accessing our UI does not suppress dialogs from displaying (e.,g timed JS alert) - can these be suppressed? * Ran into another crash \u21b3 Visit ", \u21b3 Open the share sheet at the bottom and wait 6 seconds, then switch back to content The above might be reproducible using other means.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', After an unreasonably long time trying to get Xcode to recognise the new UITest, I finally got it running. Looks good. Works nicely and the alert appears on the first tab even after leaving it for a good long time.', master 79e743eaa4a3181df1031e2093210fb87e2a06c3' 
id=1199365	 'Created ', ', ', Comment on ', ', ', Nit: Bug # is wrong in the commit, but looks fine otherwise!', Merged' 
id=1212866	 'Need the crash report to see the other threads. My suspicion is that something is blocking on the DB somehow.', Catalin, are you familiar with pulling crashes from the devices window in XCode (bottom of document)? ', Created ', Client 13-10-15 10-40.crash Crash report from Aurora 1107.', Symboolllllls', Shared symbols with :sleroux', Xcode was unable to automatically symbolicate the Sync lines in question in Thread 6 but I was able to manually symbolicate them: LivemarkPayload.toMirrorItem(UInt64) -> BookmarkMirrorItem (in Sync) (CleartextPayloadJSON.swift:41) LivemarkPayload.toMirrorItem(UInt64) -> BookmarkMirrorItem (in Sync) (BookmarkPayload.swift:490) protocol witness for MirrorItemable.toMirrorItem<A where ...>(UInt64) -> BookmarkMirrorItem in conformance LivemarkPayload (in Sync) (BookmarkPayload.swift:476) BookmarksMirrorer.((applyRecordsFromBatcher in _CBD19FB4AE13E2D54D4F7F455AAFC646)(BookmarksMirrorer) -> () -> Deferred<Maybe<()>>).(closure #1) (in Sync) (BookmarksDownloader.swift:111) thunk (in Sync) (BookmarksDownloader.swift:0) specialized SequenceType<A where ...>.flatMap<A><B where ...>((A.Generator.Element) throws -> B?) throws -> B (in Sync) (BookmarksDownloader.swift:0) BookmarksMirrorer.(go(BookmarksMirrorer) -> (InfoCollections, greenLight : () -> Bool) -> Deferred<Maybe<()>>).(closure #1) (in Sync) (BookmarksDownloader.swift:111)', Thanks, Ste f|ph ! *** This bug has been marked as a duplicate of ', ***' 
id=1183486	 'Archive for Firefox 1.0 (24): ', I don't know how to manually symbolicate. You may be able to simply import this xcarchive in the navigator and then drop the crash report in there too. Not entirely sure.", Created ', URLBarCrash.crash Added symbolicated crash', I'm having a hard time reproducing this on latest master and build 24 from builds/AuroraV24 branch. The symbolicated crash is pointing me to L135 in HomePanelViewController where we are removing the current panel's view from the superview. I have a hard time seeing why this would crash. The only thing I can think of is that view is not allocated yet and is actually nil which is causing an explict unwrap crash. A safe fix would be to just check to see if the current panel's view even has a super view and only remove it if it's actually being shown. Was there any other tips to reproduce this so I can reliably put the fix in?", Another report on ios-feedback ', Created ', ', PR ', (In reply to Stephan Leroux :sleroux from ', ) ', Just hurrying, really. Timing-related bugs are a bear.', Comment on ', ', PR ', Hm, we probably do this incorrectly in all of the other places we add/remove controllers. Think those are worth fixing too?', Created ', ', PR ', I did a search for where we addChildViewController/removeFromParentViewController and updated those parts as well.', Comment on ', ', PR ', Nice, hopefully this fixes the crashes!', Merged' 
id=1211493	 'Crashes at ', These should not be removable. My testing suggested that they were not (I couldn't swipe them), and they shouldn't show in the bookmark star. How are you removing these, Aaron?", Happens with local bookmarks too', Swipe and delete.', (In reply to Richard Newman :rnewman from ', ) ', Only because by star doesn't work at all for me on master ", I have a sneaking suspicion that this is caused by the factory switchout Emily noted here: ', That's now fixed.", Cannot reproduce with current master. Aaron, does this work now?', Just curious - is there any indication to the user that this bookmark is not removable from the BVC UI? Could we have a different color for the selected bookmark icon? I could see it being frustrating from a user perspective.', They don't respond to swipes, they don't show in the bookmark star, and everything under Desktop Bookmarks is read-only. I think that's a reasonable amount of clue to offer.", Yeah unable to swipe to delete on master, so I can't reproduce this anymore. However, I still think we need to not show misleading UI with the star on the toolbar for synced items.", Actually I hit this swiping to delete Mozilla Project default bookmark', (In reply to Aaron Train :aaronmt from ', ) ', We don't do so. We only show a star if the item is locally bookmarked.", (In reply to Aaron Train :aaronmt from ', ) ', Ah, easy fix. I'll land without review.", 64db372', (In reply to Richard Newman :rnewman from ', ) ', I loaded a Synced bookmark, on the bottom toolbar the star was unfilled. As a user, I would have expected it to be filled since it is a bookmark.' 
id=1182290	 'Stack please!', 2015-07-09 14:13:16.855 Client 4658:196933 *** Terminating app due to uncaught exception 'NSGenericException', reason: 'Your application has presented a UIAlertController (<UIAlertController: 0x7fb52b456490>) of style UIAlertControllerStyleActionSheet. The modalPresentationStyle of a UIAlertController with this style is UIModalPresentationPopover. You must provide location information for this popover through the alert controller's popoverPresentationController. You must provide either a sourceView and sourceRect or a barButtonItem. If this information is not known when you present the alert controller, you may provide it in the UIPopoverPresentationControllerDelegate method -prepareForPopoverPresentation.' *** First throw call stack: ( \t0 CoreFoundation 0x00000001116e1c65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x0000000110c09bb7 objc_exception_throw + 45 \t2 UIKit 0x0000000112acc03a - UIPopoverPresentationController presentationTransitionWillBegin + 2650 \t3 UIKit 0x00000001124c7d39 __71- UIPresentationController _initViewHierarchyForPresentationSuperview: _block_invoke + 1305 \t4 UIKit 0x00000001124c6380 __56- UIPresentationController runTransitionForCurrentState _block_invoke + 189 \t5 UIKit 0x00000001123dc5ec _applyBlockToCFArrayCopiedToStack + 314 \t6 UIKit 0x00000001123dc466 _afterCACommitHandler + 533 \t7 CoreFoundation 0x0000000111614ca7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23 \t8 CoreFoundation 0x0000000111614c00 __CFRunLoopDoObservers + 368 \t9 CoreFoundation 0x000000011160aa33 __CFRunLoopRun + 1123 \t10 CoreFoundation 0x000000011160a366 CFRunLoopRunSpecific + 470 \t11 GraphicsServices 0x0000000115120a3e GSEventRunModal + 161 \t12 UIKit 0x00000001123b88c0 UIApplicationMain + 1282 \t13 Client 0x000000010f312445 main + 997 \t14 libdyld.dylib 0x0000000117fc1145 start + 1 ) libc++abi.dylib: terminating with uncaught exception of type NSException", Thanks. Let's get an assignee.", I think I know the problem and will find a fix for it', Fixed! iPads don\'t like UIAlertControllerStyle.ActionSheet, so I just made the "Clear Everything" dialogue be a UIAlertControllerStyle.Alert. It makes the dialogue look different for phones (instead of sliding up and having the options stacked vertically, it fades into the center with the options displayed horizontally), but it\'s nice and consistent. Also, BNicholz says it\'s iOS convention to put destructive actions like "clear" on the left versus the right (we have it switched right now). Will probably file a follow up bug to change that? Thoughts?', Created ', ', PR Because you implemented settings!', Comment on ', ', PR If it works for you, it works for me. (wesj did the actual work here, IIRC.) File bnicholson's follow-up, please, and can you audit the code to make sure we never use this bad combination of flags?", *** ', has been marked as a duplicate of this bug. ***', Note: This missed Build #24' 
id=1282380	 "I'm unable to replicate this crash on my iPhone 6 (9.3.2) on 5.0b13. Perhaps there's a scenario condition missing.", I'm not able to reproduce this issue on the latest betas. I'm marking the bug as WFM and re-open in case I see the crash again" 
id=1166108	 "I can't seem to reproduce this either on device or on the simulator using a 3G connection. WFM?" 
id=1218827	 "I've tried to reproduce this on the following popovers on iPad, iPad Air, iPad Air 2 on iOS 9.1. No crashing. Can anyone think of anything else that might cause it? Popovers: * Initial tour * URLBar long press actions popover * Settings * Share/Actions toolbar button menu * Web View Link Long Press actions popover steps I tried to reproduce crash with each popover on each device. * rotate * enter app switcher * rotate * return to firefox * open multitasking * rotate to landscape * change size of multitasking window. * open firefox as multitasking window * close popover. * enter/exit app switcher", Unable to replicate this crash. Can reopen if it happens again with better stack trace/STR.', ? ', suggests that it might be due to interacting with dropdowns in web content. Another page I found suggests that this might be because a UIPopoverController is deallocated before being presented, with the fix being to have a strong property hold it.', This stack is also very snapshot-heavy, so my guess is that we're snapshotting while being backgrounded while hitting the share button or a menu in web content.", High up on 1.4, nothing on 2.0 so far. All iPads/Pro devices in the signatures.', Reproducible on master (2.0) Visit ', on an iPad, open the drop-down on the right side 'View Fares From', background the application: 016-02-08 15:46:47.128 Client 39415:24025635 *** Terminating app due to uncaught exception 'NSGenericException', reason: 'UIPopoverPresentationController (<UIPopoverPresentationController: 0x7f9c494dbe40>) should have a non-nil sourceView or barButtonItem set before the presentation occurs.' *** First throw call stack: ( \t0 CoreFoundation 0x0000000107b9fe65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x0000000106ebfdeb objc_exception_throw + 48 \t2 UIKit 0x0000000109355b63 - UIPopoverPresentationController presentationTransitionWillBegin + 3407 \t3 UIKit 0x0000000108b0d8dc __71- UIPresentationController _initViewHierarchyForPresentationSuperview: _block_invoke + 2035 \t4 UIKit 0x0000000108b0b50e __56- UIPresentationController runTransitionForCurrentState _block_invoke + 309", Needs an assignee for 2.0', The popover for HTML elements seems to be owned by WKWebView, so I don't think we can fix this directly. As a workaround, we can try removing focus from any active <select> elements when backgrounding, which should dismiss the popover. This is also reproducible in Safari. Filed ", .', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r+ with comments. Please file a follow-up to remove the workaround.' 
id=1179922	 
id=1212699	 'Crashes here @ userContentController(_:didRecieveScriptMessage:) ', * thread #1: tid = 0x2b686, 0x0000000101667200 libswiftCore.dylib`swift_bridgeNonVerbatimFromObjectiveC + 292, queue = 'com.apple.main-thread', stop reason = EXC_BREAKPOINT (code=1, subcode=0x101667200) frame #0: 0x0000000101667200 libswiftCore.dylib`swift_bridgeNonVerbatimFromObjectiveC + 292 frame #1: 0x00000001023b5d40 libswiftFoundation.dylib`Swift._forceBridgeFromObjectiveC <A> (Swift.AnyObject, A.Type) -> A + 396 frame #2: 0x00000001023b5b04 libswiftFoundation.dylib`static ext.Foundation.Swift.Dictionary<A, B where A: Swift.Hashable>.(_forceBridgeFromObjectiveC <A, B where A: Swift.Hashable> (Swift.Dictionary<A, B>.Type) -> (ObjectiveC.NSDictionary, result : inout Swift.Optional<Swift.Dictionary<A, B>>) -> ()).(closure #1) + 164 frame #3: 0x00000001856d2594 CoreFoundation`__65- __NSDictionaryI enumerateKeysAndObjectsWithOptions:usingBlock: _block_invoke + 88 frame #4: 0x00000001856c0298 CoreFoundation`- __NSDictionaryI enumerateKeysAndObjectsWithOptions:usingBlock: + 224 frame #5: 0x00000001023a08bc libswiftFoundation.dylib`static ext.Foundation.Swift.Dictionary<A, B where A: Swift.Hashable>._forceBridgeFromObjectiveC <A, B where A: Swift.Hashable> (Swift.Dictionary<A, B>.Type)(ObjectiveC.NSDictionary, result : inout Swift.Optional<Swift.Dictionary<A, B>>) -> () + 504 frame #6: 0x0000000101665104 libswiftCore.dylib`swift_dynamicCast + 1224 frame #7: 0x00000001016660f4 libswiftCore.dylib`_dynamicCastFromExistential(swift::OpaqueValue*, swift::OpaqueValue*, swift::ExistentialTypeMetadata const*, swift::Metadata const*, swift::DynamicCastFlags) + 244 frame #8: 0x0000000101664e2c libswiftCore.dylib`swift_dynamicCast + 496 * frame #9: 0x000000010018d9e4 Client`Client.LoginsHelper.userContentController (userContentController=0x000000013fc6bbf0, message=0x000000013fd0a1b0, self=0x000000013fc21240)(ObjectiveC.WKUserContentController, didReceiveScriptMessage : ObjectiveC.WKScriptMessage) -> () + 132 at LoginsHelper.swift:47 frame #10: 0x0000000100192998 Client`protocol witness for Client.BrowserHelper.userContentController <A where A: Client.BrowserHelper> (A)(ObjectiveC.WKUserContentController, didReceiveScriptMessage : ObjectiveC.WKScriptMessage) -> () in conformance Client.LoginsHelper : Client.BrowserHelper in Client + 84 at LoginsHelper.swift:46 frame #11: 0x0000000100272eb4 Client`Client.(userContentController=0x000000013fc6bbf0, message=0x000000013fd0a1b0, self=0x000000013fba3090).userContentController (Client.(HelperManager in _51AAA34A1E0B8817D1AAA32D321A88D7))(ObjectiveC.WKUserContentController, didReceiveScriptMessage : ObjectiveC.WKScriptMessage) -> () + 936 at Browser.swift:365 frame #12: 0x0000000100273050 Client`@objc Client.(HelperManager in _51AAA34A1E0B8817D1AAA32D321A88D7).userContentController (Client.(HelperManager in _51AAA34A1E0B8817D1AAA32D321A88D7))(ObjectiveC.WKUserContentController, didReceiveScriptMessage : ObjectiveC.WKScriptMessage) -> () + 92 at Browser.swift:0 frame #13: 0x000000018bbbcebc WebKit`ScriptMessageHandlerDelegate::didPostMessage(WebKit::WebPageProxy&, WebKit::WebFrameProxy&, WebKit::SecurityOriginData const&, WebCore::SerializedScriptValue&) + 228 frame #14: 0x000000018bb657b4 WebKit`WebKit::WebUserContentControllerProxy::didPostMessage(IPC::Connection&, unsigned long long, unsigned long long, WebKit::SecurityOriginData const&, unsigned long long, IPC::DataReference const&) + 212 frame #15: 0x000000018bb67694 WebKit`void IPC::handleMessage<Messages::WebUserContentControllerProxy::DidPostMessage, WebKit::WebUserContentControllerProxy, void (WebKit::WebUserContentControllerProxy::*)(IPC::Connection&, unsigned long long, unsigned long long, WebKit::SecurityOriginData const&, unsigned long long, IPC::DataReference const&)>(IPC::Connection&, IPC::MessageDecoder&, WebKit::WebUserContentControllerProxy*, void (WebKit::WebUserContentControllerProxy::*)(IPC::Connection&, unsigned long long, unsigned long long, WebKit::SecurityOriginData const&, unsigned long long, IPC::DataReference const&)) + 112 frame #16: 0x000000018b9c1bac WebKit`IPC::MessageReceiverMap::dispatchMessage(IPC::Connection&, IPC::MessageDecoder&) + 120 frame #17: 0x000000018bb47488 WebKit`WebKit::WebProcessProxy::didReceiveMessage(IPC::Connection&, IPC::MessageDecoder&) + 32 frame #18: 0x000000018b97d658 WebKit`IPC::Connection::dispatchMessage(std::__1::unique_ptr<IPC::MessageDecoder, std::__1::default_delete<IPC::MessageDecoder> >) + 136 frame #19: 0x000000018b97f704 WebKit`IPC::Connection::dispatchOneMessage() + 120 frame #20: 0x000000018730f300 JavaScriptCore`WTF::RunLoop::performWork() + 916 frame #21: 0x000000018730f7ac JavaScriptCore`WTF::RunLoop::performWork(void*) + 36 frame #22: 0x00000001857385a4 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24 frame #23: 0x0000000185738038 CoreFoundation`__CFRunLoopDoSources0 + 540 frame #24: 0x0000000185735d38 CoreFoundation`__CFRunLoopRun + 724 frame #25: 0x0000000185664dc0 CoreFoundation`CFRunLoopRunSpecific + 384 frame #26: 0x00000001907b8088 GraphicsServices`GSEventRunModal + 180 frame #27: 0x000000018ad3ef44 UIKit`UIApplicationMain + 204 frame #28: 0x000000010027ca40 Client`main + 528 at main.swift:22 frame #29: 0x000000019aba28b8 libdyld.dylib`start + 4", Created ', ', ', Looks like another Swift 2.0 NSString->String coercion issue. Ive also added guard just in case something wonky happens and the client doesn't crash because of it.", Comment on ', ', ', I'm curious about what's going on here. Are we passing nil or some other non-string value, and then that gets handled differently by NSString? If so, we might want to fix this by fixing the messages we're passing instead of trying to work around it. If that's not it, this LGTM if it works, though I'm a bit confused about what's happening.", The JS passes in a string dictionary every time but for some reason the WKScriptMessage converts the JS dictionary to a NSString:NSString dictionary. The failure was coming from trying to convert this to a String:String dictionary. I also found it strange since NSString <-> String in Swift but I do remember us having issues with this when we upgraded to Swift 2.0. :rnewman I remember we talked about this before. Did you find out the reasoning why we were having issues?', This is strange; both strings and dictionaries should bridge. We have some code like this in the tree: ``` init?(object: AnyObject?) { if let dict = object as? NSDictionary { if let uri = dict "uri" as? NSDictionary { ``` but I imagine it\'s not a good example to follow. Something to explore: WKScriptMessage.body can be NSNumber, NSString, NSDate, NSArray, NSDictionary, or NSNull. Definitely a ! cast is a bad idea, but you might want to just log what the body is and follow the STR -- you might find that it\'s not a dict at all.', Ah ha - found what\'s really going on here. Turns out this gets called multiple times and message.body is a dictionary but the 4th time it gets called, the actionOrigin property is null: WKScriptMessage.body is a __NSDictionaryI WKScriptMessage.body: { actionOrigin = "', "; requestId = "1.681865858764413e+308"; type = request; } 2015-10-15 09:49:31.331 Debug SQLiteLogins.swift:217 getLoginsForProtectionSpace > Looking for login: ', WKScriptMessage.body is a __NSDictionaryI WKScriptMessage.body: { actionOrigin = "', "; requestId = "1.1869645113762185e+308"; type = request; } 2015-10-15 09:49:31.331 Debug DeferredDBOperation.swift:91 main() > Modified rows: 0. 2015-10-15 09:49:34.334 Debug SQLiteLogins.swift:217 getLoginsForProtectionSpace > Looking for login: ', WKScriptMessage.body is a __NSDictionaryI WKScriptMessage.body: { actionOrigin = "', "; requestId = "7.010650894511895e+307"; type = request; } 2015-10-15 09:49:34.334 Debug DeferredDBOperation.swift:91 main() > Modified rows: 0. 2015-10-15 09:49:37.140 Debug SQLiteLogins.swift:217 getLoginsForProtectionSpace > Looking for login: ', WKScriptMessage.body is a __NSDictionaryI WKScriptMessage.body: { actionOrigin = "<null>"; requestId = "3.610530205580255e+306"; type = request; }', Created ', ', 9e34dcc9cd9782948d51013c59b1f998362700f8 This should work better. The issue was that actionOrigin not only returns null, but it returns an NSNull instance, not a nil String or NSString which is why it can't be converted. I've made the dictionary values less strict by using AnyObject and added checks to make sure we're using a String instance.", Comment on ', ', 9e34dcc9cd9782948d51013c59b1f998362700f8 Looks OK to me, though I'm not sure why we want to bother passing null at all if we're just going to throw it away. If actionOrigin is null, can we just not send the message in the first place?", I can add a check in LoginsHelper.js to not send a message if the actionOrigin is null (if that makes sense logically from the LoginHelpers side - not sure what an actionOrigin = null means). I think there's still some benefit in having the looser AnyObject constraint in the dictionary though.", (In reply to Stephan Leroux :sleroux from ', ) ', Yup. Let's be safe/correct *and* not send malformed/pointless messages.", Created ', ', Added short circuiting of sendRequest is actionOrigin is null', Comment on ', ', Nice.', Merged' 
id=1214794	 'Aborts on ', Looks like I hit an 'x' on a top-site too (in the middle of the Sync) which triggers this crash.", Was there any console output associated with this crash? Usually there is something that says the number of items after/before updating isn't the same for these types of crashes.", 2015-10-14 15:17:23.173 Debug DeferredDBOperation.swift:91 main() > Modified rows: 1. 2015-10-14 15:17:23.174 Debug SwiftData.swift:126 transaction > Op in transaction succeeded. Committing. 2015-10-14 15:17:23.178 Debug SwiftData.swift:126 transaction > Op in transaction succeeded. Committing. 2015-10-14 15:17:23.179 Debug DeferredDBOperation.swift:91 main() > Modified rows: 0. 2015-10-14 15:17:23.179 Client 441:47907 *** Assertion failure in - _TtC6ClientP33_C9DFE36B31E426C19626C23F17C1D22922TopSitesCollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: , /BuildRoot/Library/Caches/com.apple.xbs/Sources/UIKit/UIKit-3505.17/UICollectionView.m:4211 2015-10-14 15:17:23.181 Debug SQLiteHistory.swift:684 insertOrUpdatePlace(_:modified:) > Inserting remote history item for guid KJgdvJmlr6po. 2015-10-14 15:17:23.183 Debug SwiftData.swift:126 transaction > Op in transaction succeeded. Committing. 2015-10-14 15:17:23.184 Client 441:47907 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of items in section 0. The number of items contained in an existing section after the update (12) must be equal to the number of items contained in that section before the update (3), plus or minus the number of items inserted or deleted from that section (1 inserted, 1 deleted) and plus or minus the number of items moved into or out of that section (0 moved in, 0 moved out).'", In other words: if an edit session begins before a first sync and ends after it, we will crash because the new cursor has more items than the old one.', :rnewman, do we have a way of invalidating the cursor when it becomes stale? Like a notification?', Not that currently exists. But I don't think cursor invalidation would solve this problem, for two reasons: 1. We've already displayed results, loaded from an array, that was populated from a DB cursor. There isn't much to invalidate! We could try to redisplay when a sync has added data, but that means we might interrupt your edit mode, and we have to deal with *when* we redisplay -- every ten rows? Every thousand? 2. Even if we invalidate the cursor, the invalidation can occur inside an edit window, or even during the row removal itself; we can always perform an edit and end up with more items afterward. The only way to get real consistency is to open a transaction at the start of edit and re-query inside the transaction, blocking Sync from writing. That sucks for obvious reasons. So I see two solutions here: * After removing an item, do not requery and redisplay *within the edit*; treat the top sites tiles as a separate snapshot that just happen to cause database writes. Remove the item itself from top sites, and kick off a requery asynchronously. * Remove this constraint, because it clearly doesn't match the way we use collection views.", Sorry just to clarify - which constraint are you referring to in the second solution?', The constraint that raises the NSInternalInconsistencyException itself. If we could configure UICollectionView to not complain, life would be great! But I think our code is buggy. Here's what I think is happening here. private func deleteHistoryTileForSite(site: Site, atIndexPath indexPath: NSIndexPath) { profile.history.removeSiteFromTopSites(site) >>== { self.profile.history.getSitesByFrecencyWithLimit(self.layout.thumbnailCount).uponQueue(dispatch_get_main_queue(), block: { result in self.updateDataSourceWithSites(result) self.deleteOrUpdateSites(result, indexPath: indexPath) }) } } We're removing from top sites, then fetching the new cursor. We update our data source to that new cursor, which is fine. Then we run deleteOrUpdateSites, providing the same cursor that we just set, which doesn't contain the removed item. This doesn't make sense. We should *either* delete the site using the UICollectionView API, *then* refresh, or we should delete from the data source then use updateDataSourceWithSites. We shouldn't do both.", The cause of this is that if we delete from top sites before the panel has been updated with the newly synced items, when an item is deleted, it is trying to insert an item at an index which is far > than the next one available in the list. STR 1. from a fresh start, go to 3 websites creating 5 items in your top sites 2. sign in to firefox account causing a sync. 3. put top sites in edit mode 4. wait for sync to complete 5. delete item from top sites result: 2015-10-28 10:16:43.249 Client 2130:100791 *** Assertion failure in - _TtC6ClientP33_C9DFE36B31E426C19626C23F17C1D22922TopSitesCollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: , /BuildRoot/Library/Caches/com.apple.xbs/Sources/UIKit_Sim/UIKit-3505.16/UICollectionView.m:4059 2015-10-28 10:16:43.255 Client 2130:100791 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'attempt to insert item 11 into section 0, but there are only 5 items in section 0 after the update' *** First throw call stack: ( \t0 CoreFoundation 0x00000001067e0f65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x0000000105b04deb objc_exception_throw + 48 \t2 CoreFoundation 0x00000001067e0dca + NSException raise:format:arguments: + 106 \t3 Foundation 0x0000000105752ae2 - NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description: + 198 \t4 UIKit 0x0000000107ccdf59 - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: + 7853 \t5 UIKit 0x0000000107cd6c3e - UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering: + 415 \t6 UIKit 0x0000000107cd6a7c - UICollectionView _performBatchUpdates:completion:invalidationContext: + 74 \t7 UIKit 0x0000000107cd6a1f - UICollectionView performBatchUpdates:completion: + 53 \t8 Client 0x0000000103e7d918 _TFC6Client13TopSitesPanelP33_C9DFE36B31E426C19626C23F17C1D22919deleteOrUpdateSitesfS0_FTGO6Shared5MaybeGC7Storage6CursorCS3_4Site__9indexPathCSo11NSIndexPath_T_ + 1416 \t9 Client 0x0000000103e86f50 _TFFFC6Client13TopSitesPanelP33_C9DFE36B31E426C19626C23F17C1D22924deleteHistoryTileForSiteFS0_FTC7Storage4Site11atIndexPathCSo11NSIndexPath_T_U_FT_T_U_FGO6Shared5MaybeGCS1_6CursorS2___T_ + 304 \t10 Shared 0x0000000104a06828 _TTRGrXFo_iq__dT__XFo_iq__iT__ + 24 \t11 Shared 0x0000000104a44471 _TPA__TTRGrXFo_iq__dT__XFo_iq__iT__50 + 97 \t12 Shared 0x0000000104a45404 _TTRGrXFo_iq__iT__XFo_iq__dT__ + 36 \t13 Shared 0x0000000104a4546c _TFFC6Shared8DeferredP33_64863D17A065AD747F9AFBDCF9C2ED6A5_fillurFGS0_q__FTq_14assertIfFilledSb_T_U0_FT_T_ + 92 \t14 Shared 0x00000001049f2ee7 _TTRXFo__dT__XFdCb__dT__ + 39 \t15 libdispatch.dylib 0x000000010a0feef9 _dispatch_call_block_and_release + 12 \t16 libdispatch.dylib 0x000000010a11f49b _dispatch_client_callout + 8 \t17 libdispatch.dylib 0x000000010a10734b _dispatch_main_queue_callback_4CF + 1738 \t18 CoreFoundation 0x00000001067413e9 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 9 \t19 CoreFoundation 0x0000000106702939 __CFRunLoopRun + 2073 \t20 CoreFoundation 0x0000000106701e98 CFRunLoopRunSpecific + 488 \t21 GraphicsServices 0x0000000109a9dad2 GSEventRunModal + 161 \t22 UIKit 0x00000001074b1676 UIApplicationMain + 171 \t23 Client 0x0000000103f9c187 main + 487 \t24 libdyld.dylib 0x000000010a15392d start + 1 ) libc++abi.dylib: terminating with uncaught exception of type NSException At this point, the code is trying to insert an item at index 11, when the number of items in the collection view at this time is 5, causing a crash. The problem is this line: self.collection?.insertItemsAtIndexPaths( NSIndexPath(forItem: numOfThumbnails - 1, inSection: 0) ) where it inserts only the last item from the result set not all the missing items The solution, therefore, is to add all missing items to the collection view, not just the last one. This leads to an interesting situation whereby your top sites during editing are not actually representative of the top sites yo ll see if you return to the window later. Therefore I am going to refresh the collection view when editing finishes, so your final result is correct, but you don't lose the items you may have wanted to delete during the editing process.", Created ', ', Pull request', Comment on ', ', Pull request Patch looks good and prevents the crash. Left some nits. The out of order thing with the top sites still bothers me though. I've had it happen where it can look pretty broken. For example, deleting an item next to the suggested site tiles makes the x appear on top of the suggested site. I feel like we could land this patch for 1.1.1 to resolve the crash but do a follow up to properly respond to history changes. We don't use CoreData but something like what NSFetchedResultController does would help in this case where we invalidate the dataSource/collectionView when content in the history table has changed.", Careful with that. Naively invalidating top sites on history change will run a 400msec+ query\u2026 and it'll block the next insert until it completes. Then it'll complete, and we'll insert the next history batch. Then we'll invalidate again\u2026 In other words: your history sync will take forever and your device will melt because you happened to be on Top Sites when we synced. We'd need to be careful to do it only when a sync finishes\u2026 which brings us back to square one, because we might edit mid-sync.", Ah right since Top Sites isn't just history items but items that have to run the frecency calculation gauntlet. Could we do the following: 1. Instead of requerying the DB after each delete, deletions occur in a memory snapshot of the data for the lifetime of viewing the top sites panel 2. Items that are deleted are marked in memory so when the user navigates away from the top sites panel, we run those deletions on the db at that point in time. The idea is that while we're viewing Top Sites, everything is fixed - it's operating on a read only snapshot of the data which we mark with deletions. We then commit/reconcile these deletions to the DB when we navigate away. This way what the user sees is constant but we still remember what they wanted to delete after the sync.", One of the reasons I didn't look at the underlying data model with this was that there are a number of other bugs currently that put the future of top sites in it's current guise in question. I therefore wanted to resolve the crasher in a less risky way for 1.x and leave the more existential top sites questions to be dealt with in those bugs. But yes, I agree that a 'moment in time' snapshot of top sites data when viewing would remove the risk of a lot of these issues and will lessen user confusion when their top sites are different after they have closed editing than when they press 'done'.", (In reply to Stephan Leroux :sleroux from ', ) ', That's kinda my first suggestion in ", . Note that we are able to do the write to the DB! We just shouldn't update the contents of the panel *inside* the edit. Update the snapshot, do the animation, submit the deletion\u2026 and then queue up a refresh when they leave edit mode." 
id=1224854	 'Looks like this is resolved in 1.2 as part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1263627	 'Created ', Link to Github pull-request: ', Created ', ', Link to Github pull-request: ', Note that there's still a tricky case this bug doesn't handle: links from reader mode. Filed ", .', This looks good. I would just like to see a unit (or UI) test that shows that these loads are now failing.', Comment on ', ', Link to Github pull-request: ', LGTM Just needs a test. If the test needs to run against an external site, maybe just move it to a separate LiveTests case so that that we can control when it runs?', Added a test in the PR. Unfortunately, I don't think this is ready yet after more testing. In addition to ", mentioned above, there's another tricky exploit: 1) Use window.open() to go to some invalid URL. 2) This will load an error page. 3) With the reference to this opened window, set win.location.href to the malicious sessionrestore URL. Like ", , this exploits the fact that requests from localhost pages are allowed to load other localhost pages. To fix this properly, I think we'll want to remove that rule, meaning localhost pages will be treated the same as any other page. That means if we want to access local pages from other local pages (which we currently need for error pages, session restore, etc.), we'll have to route these requests through messages to Swift, where we can then create explicit PrivilegedRequests.", PoC of exploit from ', : ', Use the "window error + session test" button.', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Link to Github pull-request: ', Updated with stricter requirements and tests. Now, no pages (including local ones) will be able load other local pages directly; the only way to load anything on localhost is through PrivilegedRequest. That means if local pages want to load another URL or even reload the current page, they'll have to funnel that request through the Swift layer to make the request privileged. I created a shared LocalRequestHelper to handle these messages.", Comment on ', ', Link to Github pull-request: ', This is a great patch. I left a few comments though.', master: ', v4.x: fe4bdfe', Think this is causing bug ' 
id=1247305	 "Can't reproduce with those steps on iPad mini with either 8.3 or 9.2.1.", I can (In reply to Richard Newman :rnewman from ', ) ', I can reproduce on an iPad Air2 on 9.2.1.', Bug is caused by some code in `viewWillTransitionToSize` which, when called, dismisses any presented view controller and represents in the new size. However, because when the animation occurs the view is no longer being displayed at all (viewWillTransitiionToSize gets called on backgrounding) it crashes as it has nothing to present the view from. I'm proposing to fix this by dismissing the presented view controller on backgrounding and ensuring that the animation only occurs if the presented view controller is currently being presented.", Created ', ', Pull request', Comment on ', ', Pull request Works great!' 
id=1244088	 'Created ', Client_2016-01-29-150251_Florins-iPhone.ips.beta Attached is the crash report', Yikes. Regressed since\u2026 1.3, I guess.', Can we get this assigned?', *** This bug has been marked as a duplicate of ', ***' 
id=1240041	 '#2 in 1.4 release crashes.', Sorry that is false. This is one is lower down the list.', This hasn't shown up on the 2.0 listing, maybe gone, maybe our ~100 testers have not hit it.", Needs to be tested with iPad. May be related to a different way we present the share sheet there.', Open the the share sheet, tap more, background the application', Another unrelated signature it looks like actually :/ 2016-02-10 11:40:55.457 Client 1657:650540 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present modally an active controller <Client.BrowserViewController: 0x7f893a840800>.' ", Presently #1 (number of devices) in the organizer Last Exception Backtrace: 0 CoreFoundation \t0x181ce5900 __exceptionPreprocess + 124 (NSException.m:162) 1 libobjc.A.dylib \t0x181353f80 objc_exception_throw + 56 (objc-exception.mm:531) 2 CoreFoundation \t0x181ce57d0 + NSException raise:format:arguments: + 108 (NSException.m:131) 3 Foundation \t0x18265899c - NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description: + 112 (NSException.m:152) 4 UIKit \t0x1872031f8 - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: + 12372 (UICollectionView.m:4324) 5 UIKit \t0x187206640 - UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering: + 360 (UICollectionView.m:5135) 6 UIKit \t0x1872064bc - UICollectionView _performBatchUpdates:completion:invalidationContext: + 84 (UICollectionView.m:5099) 7 UIKit \t0x186bc6ae8 - UICollectionView performBatchUpdates:completion: + 64 (UICollectionView.m:5094) 8 Client \t0x10014f228 specialized TopSitesPanel.(deleteOrUpdateSites in _C9DFE36B31E426C19626C23F17C1D229)(Maybe<Cursor<Site>>, indexPath : NSIndexPath) -> () + 1104 (TopSitesPanel.swift:210) 9 Client \t0x100154c2c partial apply for TopSitesPanel.((deleteHistoryTileForSite in _C9DFE36B31E426C19626C23F17C1D229)(TopSitesPanel) -> (Site, atIndexPath : NSIndexPath) -> ()).(closure #2) + 68 (TopSitesPanel.swift:141)', This is number 1 on 2.0', Last Exception Backtrace: 0 CoreFoundation \t0x181ce5900 __exceptionPreprocess + 124 (NSException.m:162) 1 libobjc.A.dylib \t0x181353f80 objc_exception_throw + 56 (objc-exception.mm:531) 2 CoreFoundation \t0x181ce57d0 + NSException raise:format:arguments: + 108 (NSException.m:131) 3 Foundation \t0x18265899c - NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description: + 112 (NSException.m:152) 4 UIKit \t0x1872031f8 - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: + 12372 (UICollectionView.m:4324) 5 UIKit \t0x187206640 - UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering: + 360 (UICollectionView.m:5135) 6 UIKit \t0x1872064bc - UICollectionView _performBatchUpdates:completion:invalidationContext: + 84 (UICollectionView.m:5099) 7 UIKit \t0x186bc6ae8 - UICollectionView performBatchUpdates:completion: + 64 (UICollectionView.m:5094) 8 Client \t0x10014f228 specialized TopSitesPanel.(deleteOrUpdateSites in _C9DFE36B31E426C19626C23F17C1D229)(Maybe<Cursor<Site>>, indexPath : NSIndexPath) -> () + 1104 (TopSitesPanel.swift:210) 9 Client \t0x100154c2c partial apply for TopSitesPanel.((deleteHistoryTileForSite in _C9DFE36B31E426C19626C23F17C1D229)(TopSitesPanel) -> (Site, atIndexPath : NSIndexPath) -> ()).(closure #2) + 68 (TopSitesPanel.swift:141) 10 Shared \t0x100b1c0c8 partial apply for Deferred.((_fill in _64863D17A065AD747F9AFBDCF9C2ED6A)<A> (Deferred<A>) -> (A, assertIfFilled : Bool) -> ()).(closure #2) + 124 (Deferred.swift:44) 11 libdispatch.dylib \t0x181739630 _dispatch_call_block_and_release + 24 (init.c:760) 12 libdispatch.dylib \t0x1817395f0 _dispatch_client_callout + 16 (object.m:506) 13 libdispatch.dylib \t0x18173ecf8 _dispatch_main_queue_callback_4CF + 1844 (inline_internal.h:1063) 14 CoreFoundation \t0x181c9cbb0 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 12 (CFRunLoop.c:1613) 15 CoreFoundation \t0x181c9aa18 __CFRunLoopRun + 1628 (CFRunLoop.c:2718) 16 CoreFoundation \t0x181bc9680 CFRunLoopRunSpecific + 384 (CFRunLoop.c:2814) 17 GraphicsServices \t0x1830d8088 GSEventRunModal + 180 (GSEvent.c:2245) 18 UIKit \t0x186a40d90 UIApplicationMain + 204 (UIApplication.m:3681) 19 Client \t0x1000bcfb0 main + 332 (main.swift:22) 20 libdyld.dylib \t0x18176a8b8 start + 4 (start_glue.s:78)', Unsuccessful attempts at reproducing this * Various top-site deletions at once * Various deletions and then a manual sync * Various deletions from random positional index * Interactions with edit-mode enabled in-tab and other tabs This needs investigation as it continues to be our number one top-crash.', There are at least two bugs here. ', is in the AirDrop list: 13 Sharing \t0x1936abe7c - SFAirDropActivityViewController browserDidChangePeople: + 320 (SFAirDropActivityViewController.m:1011) ', is deleting a top site: 8 Client \t0x10014f228 specialized TopSitesPanel.(deleteOrUpdateSites in _C9DFE36B31E426C19626C23F17C1D229)(Maybe<Cursor<Site>>, indexPath : NSIndexPath) -> () + 1104 (TopSitesPanel.swift:210)', I don't see the original stack under 2.1 however the second stack with 8 Client \t0x10014f228 specialized TopSitesPanel.(deleteOrUpdateSites in _C9DFE36B31E426C19626C23F17C1D229)(Maybe<Cursor<Site>>, indexPath : NSIndexPath) -> () + 1104 (TopSitesPanel.swift:210) is dominating the 2.1 reports currently", I can reproduce this if I fudge the code a bit. Specifically, if I change the data source immediately before calling deleteOrUpdateSites such that the "result" used in that method is stale, we\'ll break in performBatchUpdates since the deletions/insertions (based on the stale cursor) won\'t match the actual number of thumbnails.', Created ', ', Link to Github pull-request: ', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Link to Github pull-request: ', Needs fixin'.", Comment on ', ', Link to Github pull-request: ', Let's try this again!", Comment on ', ', Link to Github pull-request: ', r+ with comments.', v.3 04cbe6b' 
id=1202662	 'This is an update running on a background thread when the database handle is closed.', If my diagnosis is correct, this also affects 1.1.', Created ', ', master pull req. Want two sets of eyes on this.', Comment on ', ', master pull req. Looks good with Emily's comment resolved.", v1.0: 8d1d59a master: d2c1aa2 Let's hope this goes away in the new build." 
id=1177253	 '*** ', has been marked as a duplicate of this bug. ***', Jun 24 23:50:28 Stefans-iPhone Client(CoreFoundation) 394 <Notice>: *** NSForwarding: warning: object 0x14cda4a70 of class 'Client.BrowserToolbarHelper' does not implement methodSignatureForSelector: -- trouble ahead Jun 24 23:50:28 Stefans-iPhone Client(libswiftCore.dylib) 394 <Notice>: Unrecognized selector - Client.BrowserToolbarHelper methodForSelector: \\^J", Fixed with ', *** ', has been marked as a duplicate of this bug. ***', Crashes on iOS 9 beta 1 on my iPhone 4S aswell, but st3fan said there would be a new build later today that will fix it :)', Now it works with build 24 :)' 
id=1199368	 'On current v1.0? I wonder if this is related to ', .', Nope, this was me testing the swift-2.0 branch yesterday. Blocking 1177383.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r=rnewman,sleroux' 
id=1215558	 "I'm pretty sure I just saw this on my device with 1107 -- spinner appears, then crash.", I think I might have repro'd this with a one-line code change. #0\t0x0000000104de199f in _swift_abortRetainUnowned () #1\t0x0000000104de1986 in swift_retainUnowned () #2\t0x0000000101395bee in BrowserProfile.BrowserSyncManager.onFinishSyncing(NSNotification) -> () at /Users/rnewman/moz/git/s2fxios/Providers/Profile.swift:536 #3\t0x0000000101395d4a in @objc BrowserProfile.BrowserSyncManager.onFinishSyncing(NSNotification) -> () () #4\t0x000000010280087c in __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ () #5\t0x00000001028005bb in _CFXRegistrationPost () #6\t0x0000000102800322 in ___CFXNotificationPost_block_invoke () #7\t0x0000000102845a72 in - _CFXNotificationRegistrar find:object:observer:enumerator: () #8\t0x00000001026fb909 in _CFXNotificationPost () #9\t0x0000000101394d7e in BrowserProfile.BrowserSyncManager.syncLock.didset at /Users/rnewman/moz/git/s2fxios/Providers/Profile.swift:484 #10\t0x0000000101394bed in BrowserProfile.BrowserSyncManager.syncLock.setter () #11\t0x0000000101394e1a in BrowserProfile.BrowserSyncManager.(syncLock.materializeForSet).(closure #1) () #12\t0x0000000101394ff5 in BrowserProfile.BrowserSyncManager.(endSyncing in _8B55E06CDD7E68DC6BC252D6F91FAD70)() -> () () #13\t0x00000001013a8114 in BrowserProfile.BrowserSyncManager.((withSyncInputs in _8B55E06CDD7E68DC6BC252D6F91FAD70)<A> (BrowserProfile.BrowserSyncManager) -> (String?, function : (SyncDelegate, Prefs, Ready) -> Deferred<Maybe<A>>) -> Deferred<Maybe<A>>?).(closure #2) at /Users/rnewman/moz/git/s2fxios/Providers/Profile.swift:711 #14\t0x0000000101c23568 in thunk () #15\t0x0000000101c61471 in partial apply for thunk () #16\t0x0000000101c62404 in thunk () #17\t0x0000000101c6246c in Deferred.((_fill in _64863D17A065AD747F9AFBDCF9C2ED6A)<A> (Deferred<A>) -> (A, assertIfFilled : Bool) -> ()).(closure #2) at /Users/rnewman/moz/git/s2fxios/ThirdParty/Deferred/Deferred.swift:44 #18\t0x0000000101c0fc67 in thunk () #19\t0x0000000105531df5 in _dispatch_call_block_and_release () #20\t0x000000010554d4a7 in _dispatch_client_callout () #21\t0x0000000105538599 in _dispatch_root_queue_drain () #22\t0x0000000105538218 in _dispatch_worker_thread3 () #23\t0x0000000105890a9d in _pthread_wqthread () #24\t0x000000010588e3dd in start_wqthread () I get this if I comment out the assignment to self.clients: private func reloadClients() { reloading = true profile?.getClients().upon({ result in self.reloading = false if let c = result.successValue { //self.clients = c dispatch_async(dispatch_get_main_queue()) {", BrowserSyncManager doesn't own its profile (because that would be a retain cycle). That's the 'unowned' here. profile is being deallocated before our block is done running. It's a member of the view controller, but nothing else in ClientPickerViewController actually uses its profile member once we kick off a fetch, so perhaps we're being eaten alive by the optimizer?", Created ', ', Pull req. Fixing bugs by reading code, hoooooooooooo :lion-o:', 423170a', Fingers crossed this is the fix!' 
id=1205685	 'Run simulator, unplug headset. ', sleroux found ', Created ', ', Pull request', Comment on ', ', Pull request Code looks good but I was unable to replicate the issue as well. When I tried running the app in the simulator and removed my headphones the notification was not fired so I'm not sure if I'm doing it right.", *STR:* Open FxiOS on device Browse to Soundcloud.com start playing audio plug in headphones *expected result* music continues playing through headphones *actual result* browser crashes', I've actually fixed it now ", 2545a46569bfa06c0ab73840908a8417a8190e3f' 
id=1278933	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1229792	 "RXMLElement wasn't built with Swift in mind since it's been ~2 years since the last update. The swift generated method returning an explicitly unwrapped String doesn't work because the method can definitely return a nil value 1 . Two options are: 1. Rewrite our swift code to avoid this potential pitfall by not using a switch statement. 2. Replace RXMLElement with a modern XML library that has better support with Swift Code Option (1) doesn't seem that reliable since this issue can manifest itself anywhere we use RXMLElement while option (2) would require more work to add a new library and rewrite the code using it. :fluffyemily, I remember you mentioning replacing RXMLElement with SWXMLHash since we unnecessarily have two XML parsing libraries in the project. Where did you end up landing on this? 1 ", Yeah, Rapture, despite being a really nice library, was neither Carthage supported or actively maintained and so I started replacing it with SWXMLHash and removing it entirely from the project. There was a wip branch here: ', but I never finished it (got distracted by more important things). I felt first step was replacing Rapture with SWXMLHash, then second step was trying to find an XML library that was carthage compliant & actively maintained that offered everything that Rapture did.', Re-summarize? I thought this was bad in that we crashed on load of Time.com. I take it this isn't 1.3 critical?", Sometimes when grabbing the favicon links from the page the code returns nothing but Swift throws an exception because it force unwrapped the nil from RXMLElement. This isn't 1.3 critical since the bug started happening after some refactoring we did in FaviconFetcher (", ) and that patch isn't being uplift to v1.x. This only effects master/2.0.", Got it. I can reproduce. Visited Time.com, connected Sync, Synced. Visited Top-Sites and crashed.', Noting this yields a crash loop if about:home is restored.', I'm confused now. Does this affect 1.x or not?", (In reply to Stefan Arentz :st3fan from ', ) ', Master/(2.0)', I have a commit in my stack that just puts an if-let around the switch, which fixes this crash. I'm going to cherry-pick that right now because this is blocking testing. We can file a new bug to rewrite the world if necessary.", 4d86ed5' 
id=1311973	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1183407	 'Which build? Stack?', IIRC this was build 22. Can't repro right now.", *** This bug has been marked as a duplicate of ', ***' 
id=1241190	 'Needs symbols.', Symbolized Client parts: specialized SpotlightHelper.update( String : String , forURL : NSURL) -> () (in Client) (SpotlightHelper.swift:0) specialized SpotlightHelper.userContentController(WKUserContentController, didReceiveScriptMessage : WKScriptMessage) -> () (in Client) (SpotlightHelper.swift:124) @objc SpotlightHelper.userContentController(WKUserContentController, didReceiveScriptMessage : WKScriptMessage) -> () (in Client) (SpotlightHelper.swift:0) protocol witness for BrowserHelper.userContentController<A where ...>(WKUserContentController, didReceiveScriptMessage : WKScriptMessage) -> () in conformance SpotlightHelper (in Client) (SpotlightHelper.swift:120) specialized (HelperManager in _51AAA34A1E0B8817D1AAA32D321A88D7).userContentController(WKUserContentController, didReceiveScriptMessage : WKScriptMessage) -> () (in Client) (Browser.swift:414) @objc (HelperManager in _51AAA34A1E0B8817D1AAA32D321A88D7).userContentController(WKUserContentController, didReceiveScriptMessage : WKScriptMessage) -> () (in Client) (Browser.swift:0)', This is on the 2.0 signature listing in XCode.', We need some movement on this bug. It is the top crasher for our most recent two 2.0 builds. I a very worried about this because this code is running every single time a page finishes loading. So the changes that this becomes a real production top crasher are extremely high. If we can't figure out what is happening here then we have to think about delaying shipping Spotlight until it is more stable.", I can't see the crashes in Organizer right now. Is this 8.0 only, 9.0 only? The code flow seems to be (if I'm reading the log right, and then referencing the code): userActivity = NSUserActivity(String) userActivity.webpageURL = url", I also thought that this might be to do with how well or poorly we\'re validating what is coming out of the JS. The JS guarantees to produce a dictionary of String: String . The handler gets called on each page load, with a dictionary with keys "title" and "description". If the values don\'t exist, from the HTML, the JS defaults it to an empty string.', Discussion with :sleroux and :st3fan Two theories: a) something strange is coming back from JS, but swift isn't handling it well. b) NSURL can contain some badly formed URLs that don't pass muster for the NSUserActivity. (a) has form in the LoginsHelper, ", but the null case is specifically handled in the JS so it passes back an empty string, rather than NSNull or nil. (b) sounds plausible. The webpageURL isn't actually needed for the functioning of this feature. Using something else just means that users who uninstall Firefox won't fall back to using Safari, and the results go simply away after uninstall (I think).", Created ', ', Pull request', Comment on ', ', Pull request Looks good. I tried running on device and searching spotlight for 'about' but the about tab but it wasn't showing up so I wasn't able to test this through spotlight.", Merged.', *** ', has been marked as a duplicate of this bug. ***' 
id=1179911	 'Crash @ tableView.endUpdates()', *** This bug has been marked as a duplicate of ', ***' 
id=1261854	 'Created ', ', PR: ', Comment on ', ', PR: ', The helper requires a (non-nil) Browser in init. So I guess what's happening is that the tab is removed while the web view is in the middle of a page load, destroying the Browser, and the web view sends a reader message during this short window before it's also destroyed?", I think that is what is happening. Because browser is weak, it can never be force unwrapped. That is just asking for trouble. So that is a good fix, but I am worried that there is a deeper problem. Hopefully the symptoms will show better after this fix.', master: 3263418 v4.x: 4ac799b' 
id=1166019	 'Sure, can you please let me know what I need to do to get a crash log? Thanks', Possibly ', This should summarize: ', Obviously, use the right app name, not "Chrome_" :)', {"app_name":"Client","app_version":"1.0","bundleID":"org.mozilla.ios.FennecAurora","adam_id":0,"os_version":"iPhone OS 8.3 (12F70)","slice_uuid":"b4e86c6b-b2be-384f-94f3-624a0c35df8b","share_with_app_devs":false,"build_version":"7","is_first_party":false,"bug_type":"109","name":"Client"} Incident Identifier: DF69B4EA-2BFB-464E-8DC0-D6EA8FD87A03 CrashReporter Key: 888221da7c2cad00989eee64925aebc89a79b9fc Hardware Model: iPhone7,2 Process: Client 620 Path: /private/var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Client Identifier: org.mozilla.ios.FennecAurora Version: 7 (1.0) Code Type: ARM-64 (Native) Parent Process: launchd 1 Date/Time: 2015-04-09 18:52:00.141 +0100 Launch Time: 2015-04-09 18:35:18.430 +0100 OS Version: iOS 8.3 (12F70) Report Version: 105 Exception Type: 00000020 Exception Codes: 0x00000000dead10cc Highlighted Thread: 0 Application Specific Information: <FBApplicationProcess: 0x155e630a0; Client; pid: 620> was suspended with locked system files: /private/var/mobile/Containers/Shared/AppGroup/2D852465-466C-4821-ABC7-12395FD95E10/profile.profile/browser.db Thread 0 name: Dispatch queue: com.apple.main-thread Thread 0: 0 libsystem_kernel.dylib \t0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib \t0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation \t0x00000001831df720 0x183100000 + 915232 3 CoreFoundation \t0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation \t0x00000001831092d0 0x183100000 + 37584 5 GraphicsServices \t0x000000018c91f6f8 0x18c914000 + 46840 6 UIKit \t0x0000000187ccefa8 0x187c58000 + 487336 7 Client \t0x000000010016fcb4 0x1000c8000 + 687284 8 Client \t0x000000010016fcf4 0x1000c8000 + 687348 9 libdyld.dylib \t0x00000001950caa04 0x1950c8000 + 10756 Thread 1 name: Dispatch queue: com.apple.libdispatch-manager Thread 1: 0 libsystem_kernel.dylib \t0x00000001951c8c24 0x1951c8000 + 3108 1 libdispatch.dylib \t0x00000001950ade6c 0x19509c000 + 73324 2 libdispatch.dylib \t0x000000019509f998 0x19509c000 + 14744 Thread 2 name: WebThread Thread 2: 0 libsystem_kernel.dylib \t0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib \t0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation \t0x00000001831df720 0x183100000 + 915232 3 CoreFoundation \t0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation \t0x00000001831092d0 0x183100000 + 37584 5 WebCore \t0x0000000191b04890 0x191a54000 + 723088 6 libsystem_pthread.dylib \t0x000000019527fdc4 0x19527c000 + 15812 7 libsystem_pthread.dylib \t0x000000019527fd20 0x19527c000 + 15648 8 libsystem_pthread.dylib \t0x000000019527cef4 0x19527c000 + 3828 Thread 3 name: JavaScriptCore::BlockFree Thread 3: 0 libsystem_kernel.dylib \t0x00000001951e3078 0x1951c8000 + 110712 1 libsystem_pthread.dylib \t0x000000019527ef28 0x19527c000 + 12072 2 libc++.1.dylib \t0x00000001941c8cac 0x1941c0000 + 36012 3 JavaScriptCore \t0x00000001846fd620 0x1846e4000 + 103968 4 JavaScriptCore \t0x00000001846f8b9c 0x1846e4000 + 84892 5 libsystem_pthread.dylib \t0x000000019527fdc4 0x19527c000 + 15812 6 libsystem_pthread.dylib \t0x000000019527fd20 0x19527c000 + 15648 7 libsystem_pthread.dylib \t0x000000019527cef4 0x19527c000 + 3828 Thread 4 name: JavaScriptCore::Marking Thread 4: 0 libsystem_kernel.dylib \t0x00000001951e3078 0x1951c8000 + 110712 1 libsystem_pthread.dylib \t0x000000019527ef28 0x19527c000 + 12072 2 libc++.1.dylib \t0x00000001941c8cac 0x1941c0000 + 36012 3 JavaScriptCore \t0x00000001849a6edc 0x1846e4000 + 2895580 4 JavaScriptCore \t0x00000001849a6f80 0x1846e4000 + 2895744 5 JavaScriptCore \t0x00000001846f8b9c 0x1846e4000 + 84892 6 libsystem_pthread.dylib \t0x000000019527fdc4 0x19527c000 + 15812 7 libsystem_pthread.dylib \t0x000000019527fd20 0x19527c000 + 15648 8 libsystem_pthread.dylib \t0x000000019527cef4 0x19527c000 + 3828 Thread 5 name: com.apple.NSURLConnectionLoader Thread 5: 0 libsystem_kernel.dylib \t0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib \t0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation \t0x00000001831df720 0x183100000 + 915232 3 CoreFoundation \t0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation \t0x00000001831092d0 0x183100000 + 37584 5 CFNetwork \t0x0000000182bea890 0x182b4c000 + 649360 6 Foundation \t0x0000000184129db4 0x184034000 + 1007028 7 libsystem_pthread.dylib \t0x000000019527fdc4 0x19527c000 + 15812 8 libsystem_pthread.dylib \t0x000000019527fd20 0x19527c000 + 15648 9 libsystem_pthread.dylib \t0x000000019527cef4 0x19527c000 + 3828 Thread 6 name: com.apple.CFSocket.private Thread 6: 0 libsystem_kernel.dylib \t0x00000001951e3498 0x1951c8000 + 111768 1 CoreFoundation \t0x00000001831e5124 0x183100000 + 938276 2 libsystem_pthread.dylib \t0x000000019527fdc4 0x19527c000 + 15812 3 libsystem_pthread.dylib \t0x000000019527fd20 0x19527c000 + 15648 4 libsystem_pthread.dylib \t0x000000019527cef4 0x19527c000 + 3828 Thread 7: 0 libsystem_kernel.dylib \t0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib \t0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation \t0x00000001831df720 0x183100000 + 915232 3 CoreFoundation \t0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation \t0x00000001831092d0 0x183100000 + 37584 5 CoreFoundation \t0x000000018315b358 0x183100000 + 373592 6 CoreMotion \t0x0000000183b14364 0x183acc000 + 295780 7 libsystem_pthread.dylib \t0x000000019527fdc4 0x19527c000 + 15812 8 libsystem_pthread.dylib \t0x000000019527fd20 0x19527c000 + 15648 9 libsystem_pthread.dylib \t0x000000019527cef4 0x19527c000 + 3828 Thread 8: 0 libsystem_kernel.dylib \t0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib \t0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib \t0x000000019527ceec 0x19527c000 + 3820 Thread 9: 0 libsystem_kernel.dylib \t0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib \t0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib \t0x000000019527ceec 0x19527c000 + 3820 Thread 10: 0 libsystem_kernel.dylib \t0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib \t0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib \t0x000000019527ceec 0x19527c000 + 3820 Thread 11: 0 libsystem_kernel.dylib \t0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib \t0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib \t0x000000019527ceec 0x19527c000 + 3820 Thread 12: 0 libsystem_kernel.dylib \t0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib \t0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib \t0x000000019527ceec 0x19527c000 + 3820 Thread 13: 0 libsystem_kernel.dylib \t0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib \t0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib \t0x000000019527ceec 0x19527c000 + 3820 No thread state (register information) available Binary Images: 0x1000c8000 - 0x100283fff Client arm64 <b4e86c6bb2be384f94f3624a0c35df8b> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Client 0x10032c000 - 0x1003abfff Storage arm64 <610259663b383f7e875d86e1e4ad4077> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Storage.framework/Storage 0x100424000 - 0x10046ffff Account arm64 <abec8e982f963b30ae0322fee7af2246> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Account.framework/Account 0x1004a4000 - 0x1004d7fff Shared arm64 <000a3efa472432beaf14e21f2bd25b8c> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Shared.framework/Shared 0x100518000 - 0x1005cffff FxA arm64 <f3077ff939463167ae93982a0ca158b4> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/FxA.framework/FxA 0x100628000 - 0x10065ffff XCGLogger arm64 <6ebd2e9a431037e893a9343d8999a33d> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/XCGLogger.framework/XCGLogger 0x10067c000 - 0x1006b7fff Sync arm64 <3210472b29b23807a41162d3bcdce157> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Sync.framework/Sync 0x100704000 - 0x100767fff Alamofire arm64 <86023dd825293274a0be30788c94d46f> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Alamofire.framework/Alamofire 0x1007d4000 - 0x100803fff SWXMLHash arm64 <0b07279e47fd36c99eb8641872f5c208> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/SWXMLHash.framework/SWXMLHash 0x100828000 - 0x10084bfff Snap arm64 <6e2b679e19cb389cb389d8768227217d> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Snap.framework/Snap 0x10087c000 - 0x100a07fff libswiftCore.dylib arm64 <5b3c2ad007c73590aabdc2554ff30d4a> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftCore.dylib 0x100b68000 - 0x100b7ffff libswiftCoreGraphics.dylib arm64 <4df212c0adc635d39677885bf1eb5500> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftCoreGraphics.dylib 0x100ba4000 - 0x100ba7fff libswiftCoreImage.dylib arm64 <652ee890902b3ea68b86a72cd280faa5> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftCoreImage.dylib 0x100bc0000 - 0x100bc7fff libswiftDarwin.dylib arm64 <6883570852443a6db73321866cb0c1c2> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftDarwin.dylib 0x100bf0000 - 0x100bf3fff libswiftDispatch.dylib arm64 <cd8f8e2d57113862afda4788f098adaa> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftDispatch.dylib 0x100c18000 - 0x100c63fff libswiftFoundation.dylib arm64 <44c6c5841e3b3c9486958cbf1a534bd4> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftFoundation.dylib 0x100c98000 - 0x100c9ffff libswiftObjectiveC.dylib arm64 <252990df94bf3dc899190b1d8df925df> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftObjectiveC.dylib 0x100cb0000 - 0x100cb3fff libswiftSecurity.dylib arm64 <c6fd1c806cfe38cba2b21c780642b0fb> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftSecurity.dylib 0x100ccc000 - 0x100ccffff libswiftUIKit.dylib arm64 <607f7c198f783fea841ce232f2981202> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftUIKit.dylib 0x100cf4000 - 0x100d13fff Base32 arm64 <2b8e4bbb601537039d71abfe6c398681> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Base32.framework/Base32 0x1200c0000 - 0x1200e7fff dyld arm64 <75c68bbe28b13fcd91014f15139742dc> /usr/lib/dyld 0x181804000 - 0x1818fefff RawCamera arm64 <ebb36059ba8a3c1d8caba3cbfa039d63> /System/Library/CoreServices/RawCamera.bundle/RawCamera 0x1819d4000 - 0x181b68fff AVFoundation arm64 <c69cb19d6db0339bbfb4c18fa7f4f26c> /System/Library/Frameworks/AVFoundation.framework/AVFoundation 0x181b6c000 - 0x181bd0fff libAVFAudio.dylib arm64 <fdd31b28c0ec3f76b8f0fa9a057e43d9> /System/Library/Frameworks/AVFoundation.framework/libAVFAudio.dylib 0x181bd4000 - 0x181c13fff AVKit arm64 <662188dbb9233944bbffc40c217bba7f> /System/Library/Frameworks/AVKit.framework/AVKit 0x181c14000 - 0x181c14fff Accelerate arm64 <a2161063fee1315193bc488d0354f43e> /System/Library/Frameworks/Accelerate.framework/Accelerate 0x181c18000 - 0x181c2afff libCGInterfaces.dylib arm64 <6dc1d203e31b34698c3b0c3c396dc2d4> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/Libraries/libCGInterfaces.dylib 0x181c2c000 - 0x181e4bfff vImage arm64 <74eb7b77dbcd321db86e784be9353a08> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage 0x181e4c000 - 0x181ef3fff libBLAS.dylib arm64 <56e8b79c2c03379dad45fe2ea1a4052f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib 0x181ef4000 - 0x18226efff libLAPACK.dylib arm64 <fd491ae19b12315babb621650a0eef76> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib 0x182270000 - 0x182285fff libLinearAlgebra.dylib arm64 <9307063a5e1833abbb857a9ec4c5369e> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLinearAlgebra.dylib 0x182288000 - 0x1822f0fff libvDSP.dylib arm64 <d4d2b4a941213e2b81f3ddafd6b8a312> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib 0x1822f4000 - 0x182317fff libvMisc.dylib arm64 <92a0dd635be43dfe8c128c888ef37c0e> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib 0x182318000 - 0x182318fff vecLib arm64 <9248f57f1d8430219a810aa93254f157> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib 0x18231c000 - 0x18234bfff Accounts arm64 <4199851056d4376aa4d8668b83c85454> /System/Library/Frameworks/Accounts.framework/Accounts 0x182350000 - 0x1823cefff AddressBook arm64 <73735c2a294139e5b99ada613fc861ea> /System/Library/Frameworks/AddressBook.framework/AddressBook 0x1823d0000 - 0x182523fff AddressBookUI arm64 <860bc29210ba3d7c80dc83a83388e31c> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI 0x182524000 - 0x182538fff AssetsLibrary arm64 <06c85b7fcfaf3722b6e7a89a1ed5559e> /System/Library/Frameworks/AssetsLibrary.framework/AssetsLibrary 0x1826ec000 - 0x1829acfff AudioToolbox arm64 <760c2dc59fa13660a769cc1b052d41e6> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox 0x182b4c000 - 0x182d5ffff CFNetwork arm64 <df5535d1633f375aa889f755db0a93b9> /System/Library/Frameworks/CFNetwork.framework/CFNetwork 0x182d60000 - 0x182dfcfff CloudKit arm64 <c24c6a0eeb1a38b598fafc24e9974595> /System/Library/Frameworks/CloudKit.framework/CloudKit 0x182e00000 - 0x182e65fff CoreAudio arm64 <b85ca2cdb29639ccb5f6405baf597027> /System/Library/Frameworks/CoreAudio.framework/CoreAudio 0x182e8c000 - 0x182eadfff CoreBluetooth arm64 <fbd7cbc4b2533ea38844bf98757ce58d> /System/Library/Frameworks/CoreBluetooth.framework/CoreBluetooth 0x182eb0000 - 0x1830fcfff CoreData arm64 <af13d4e830e13607b745fe57f90e5d5e> /System/Library/Frameworks/CoreData.framework/CoreData 0x183100000 - 0x18345efff CoreFoundation arm64 <6548b13bef1f3f958d96266f7c4c44e0> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 0x183460000 - 0x1835c2fff CoreGraphics arm64 <92162d42d08d357ab66302a38d724828> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics 0x183618000 - 0x18361afff libCGXType.A.dylib arm64 <8f40b7d9b97b344f9c7a5a0b79bdc2b7> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGXType.A.dylib 0x18361c000 - 0x183627fff libCMSBuiltin.A.dylib arm64 <a40d7bdbbe6c3317bcf4c20c085df848> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCMSBuiltin.A.dylib 0x18381c000 - 0x18383afff libRIP.A.dylib arm64 <975284709e51353690ec8a651b43c1db> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib 0x18383c000 - 0x18396efff CoreImage arm64 <d7a2122dc8173803bc220fde3cfebfdf> /System/Library/Frameworks/CoreImage.framework/CoreImage 0x183970000 - 0x1839cefff CoreLocation arm64 <a166ad7f12f93406b54ae6a170fb38ee> /System/Library/Frameworks/CoreLocation.framework/CoreLocation 0x183a08000 - 0x183acbfff CoreMedia arm64 <403a9798401c3b70a207e0e236454c0d> /System/Library/Frameworks/CoreMedia.framework/CoreMedia 0x183acc000 - 0x183bbafff CoreMotion arm64 <61338e072f2a385ab4e315975f23eea2> /System/Library/Frameworks/CoreMotion.framework/CoreMotion 0x183bbc000 - 0x183c2dfff CoreTelephony arm64 <450440ee68593b8e9c951cdf838264f3> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony 0x183c30000 - 0x183d38fff CoreText arm64 <4a9633cee0393585a98fcf07410e0828> /System/Library/Frameworks/CoreText.framework/CoreText 0x183d3c000 - 0x183d59fff CoreVideo arm64 <217e5b69f6d03f8893f01de3e40915a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo 0x183d5c000 - 0x183e80fff EventKit arm64 <f7af75b17dac3c5aa8dc91a1edd1df37> /System/Library/Frameworks/EventKit.framework/EventKit 0x184034000 - 0x18428cfff Foundation arm64 <509b484fb7b634b19673d50296d8278f> /System/Library/Frameworks/Foundation.framework/Foundation 0x1842c0000 - 0x1842e9fff GSS arm64 <3dae218853563b1a985b80d6a353bad8> /System/Library/Frameworks/GSS.framework/GSS 0x1843d4000 - 0x18443ffff IOKit arm64 <311bed1f2b893195b8c0564d8925bfa2> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit 0x184440000 - 0x1846e3fff ImageIO arm64 <7d3c81746f2c3f1488b3efc633d21633> /System/Library/Frameworks/ImageIO.framework/ImageIO 0x1846e4000 - 0x184b85fff JavaScriptCore arm64 <1ad0ed311f3e3897bac70f3388fc05be> /System/Library/Frameworks/JavaScriptCore.framework/JavaScriptCore 0x1854c0000 - 0x1854c6fff MediaAccessibility arm64 <4e3e82a2b09a38fcbf01843f97d5e604> /System/Library/Frameworks/MediaAccessibility.framework/MediaAccessibility 0x1854c8000 - 0x1856ebfff MediaPlayer arm64 <fb0500c5695c36b5b54865f533cc899e> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer 0x1856ec000 - 0x185b0afff MediaToolbox arm64 <c2103a7dd16e3f67abfe898b039061e7> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox 0x185b0c000 - 0x185be0fff MessageUI arm64 <000bbe6f4a8c32bda9c8ea674a7f200d> /System/Library/Frameworks/MessageUI.framework/MessageUI 0x185be4000 - 0x185c5cfff Metal arm64 <eb54636e26cd3dee870fa5e4fb708fe6> /System/Library/Frameworks/Metal.framework/Metal 0x185c60000 - 0x185d11fff MobileCoreServices arm64 <daa61b358c17365792c20df791224e26> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices 0x186f8c000 - 0x186f96fff OpenGLES arm64 <8824bb82d43937a9b0aa3870ece35772> /System/Library/Frameworks/OpenGLES.framework/OpenGLES 0x186f9c000 - 0x186f9dfff libCVMSPluginSupport.dylib arm64 <34760639fb2331dcaa229ba0e418c1af> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib 0x186fa0000 - 0x186fa3fff libCoreFSCache.dylib arm64 <e6f967504d5937d59223598de12969ab> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib 0x186fa4000 - 0x186fa8fff libCoreVMClient.dylib arm64 <30969b8fde9f36c4a6a0293c03e74e5f> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib 0x186fac000 - 0x186fb6fff libGFXShared.dylib arm64 <5942ea8060c63e86b3ffbfb76b061276> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib 0x186fb8000 - 0x187003fff libGLImage.dylib arm64 <3e46a6b44be93e5689e4851c76b2db04> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib 0x1875a0000 - 0x187732fff QuartzCore arm64 <e47923f08f343c3e98e77f22f674f234> /System/Library/Frameworks/QuartzCore.framework/QuartzCore 0x187734000 - 0x187780fff QuickLook arm64 <c7ce94fecae33d839b804000f2ecca60> /System/Library/Frameworks/QuickLook.framework/QuickLook 0x1879b8000 - 0x187a0cfff Security arm64 <80b60ba1feba39afb6686e342398cce1> /System/Library/Frameworks/Security.framework/Security 0x187a10000 - 0x187aa5fff Social arm64 <69ffda9178d03ca2853a7b9b279a685d> /System/Library/Frameworks/Social.framework/Social 0x187be0000 - 0x187c53fff SystemConfiguration arm64 <633d8a8abeaf3abda9b0401146f2b668> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration 0x187c58000 - 0x1885d8fff UIKit arm64 <f67965f71974303e90cfaed997ae36a3> /System/Library/Frameworks/UIKit.framework/UIKit 0x1885dc000 - 0x188655fff VideoToolbox arm64 <1468c96c3448370bbb407644bedbb368> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox 0x188690000 - 0x1888f4fff WebKit arm64 <5e03a0bc7ab436ba900562cceb681ef4> /System/Library/Frameworks/WebKit.framework/WebKit 0x188d30000 - 0x188d3dfff AOSNotification arm64 <bfc45391892b3510ac92ba9362e5100c> /System/Library/PrivateFrameworks/AOSNotification.framework/AOSNotification 0x188ed8000 - 0x188f36fff AccountsDaemon arm64 <e819e315efce3a178391a7dfbee95db0> /System/Library/PrivateFrameworks/AccountsDaemon.framework/AccountsDaemon 0x188f38000 - 0x188f5ffff AccountsUI arm64 <a73a4482c3c535a19ca6bb66dfd32d52> /System/Library/PrivateFrameworks/AccountsUI.framework/AccountsUI 0x188f60000 - 0x188f65fff AggregateDictionary arm64 <cfa106cd07b430a6959f9127a6c3363a> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary 0x189168000 - 0x18916bfff AirPlaySupport arm64 <9379098c9eed33088c7096882eec570d> /System/Library/PrivateFrameworks/AirPlaySupport.framework/AirPlaySupport 0x1893c0000 - 0x189408fff AppSupport arm64 <d088c6263b4932aebd9dcf2a14aadef2> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport 0x18940c000 - 0x189467fff AppleAccount arm64 <0374ffa0f0563b108aa7a58f2c72f39f> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount 0x189578000 - 0x1895c4fff AppleJPEG arm64 <621fe1223e9038a09023dd6c558ce423> /System/Library/PrivateFrameworks/AppleJPEG.framework/AppleJPEG 0x1895d8000 - 0x1895ecfff ApplePushService arm64 <38b2aec9a5b5357aa8e1060d28992da3> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService 0x1895f0000 - 0x1895f9fff AppleSRP arm64 <8f0cacbeabdf39b3815a72e7ec9e8668> /System/Library/PrivateFrameworks/AppleSRP.framework/AppleSRP 0x18960c000 - 0x189617fff AssertionServices arm64 <e0f182c7fdcd34a1a4acfe0bd4c7eae3> /System/Library/PrivateFrameworks/AssertionServices.framework/AssertionServices 0x189618000 - 0x189635fff AssetsLibraryServices arm64 <e28e74aed7103573b9416e016525ac04> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices 0x189638000 - 0x189678fff AssistantServices arm64 <f8cc50774cbf3007bd3944592b1608e8> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices 0x1896b4000 - 0x1896b7fff BTLEAudioController arm64 <ea2ff306f28638ca8bc7a4f02d3c8f1e> /System/Library/PrivateFrameworks/BTLEAudioController.framework/BTLEAudioController 0x1896b8000 - 0x1896d4fff BackBoardServices arm64 <ff372ac34d6430829a97778caad5bdf4> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices 0x1896dc000 - 0x189719fff BaseBoard arm64 <ab16c3464cfb3319bf31202639bb4a90> /System/Library/PrivateFrameworks/BaseBoard.framework/BaseBoard 0x189734000 - 0x18973bfff BluetoothManager arm64 <ab5e74eff0cb32f88338de3fed9495d8> /System/Library/PrivateFrameworks/BluetoothManager.framework/BluetoothManager 0x18973c000 - 0x18976cfff Bom arm64 <45c2562173063fb2bd0e71bbc3423915> /System/Library/PrivateFrameworks/Bom.framework/Bom 0x18986c000 - 0x189875fff CacheDelete arm64 <c5cb9203a779314ea5616b6cb35c39a0> /System/Library/PrivateFrameworks/CacheDelete.framework/CacheDelete 0x1898c8000 - 0x1898f8fff CalendarFoundation arm64 <ce2278a234d0300a8e1c55d93179a8ea> /System/Library/PrivateFrameworks/CalendarFoundation.framework/CalendarFoundation 0x189a44000 - 0x189a4efff CaptiveNetwork arm64 <0f8d341d0a8f3828b9485b189d04e126> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork 0x189a5c000 - 0x189ba8fff Celestial arm64 <0b8842c85d7139848f5e049e8e784c47> /System/Library/PrivateFrameworks/Celestial.framework/Celestial 0x189bc0000 - 0x189bdbfff CertInfo arm64 <6b1190299a103de8a81018e7ed211103> /System/Library/PrivateFrameworks/CertInfo.framework/CertInfo 0x189bdc000 - 0x189be2fff CertUI arm64 <5172b3a96c1736b390833483c0832e79> /System/Library/PrivateFrameworks/CertUI.framework/CertUI 0x189d48000 - 0x189d6cfff ChunkingLibrary arm64 <d38656203ca635b883d96b9c82d4cb59> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary 0x18a238000 - 0x18a30afff CloudPhotoLibrary arm64 <f78c8689515a326c8ebe8878d4bb4c52> /System/Library/PrivateFrameworks/CloudPhotoLibrary.framework/CloudPhotoLibrary 0x18a318000 - 0x18a366fff ColorSync arm64 <af03d31eeea73ffda8259033308781de> /System/Library/PrivateFrameworks/ColorSync.framework/ColorSync 0x18a368000 - 0x18a36afff CommonAuth arm64 <f6c3ca737c12362baa27b4d67391b85d> /System/Library/PrivateFrameworks/CommonAuth.framework/CommonAuth 0x18a36c000 - 0x18a37efff CommonUtilities arm64 <cf917a1cdf503940a9879dda3ea7eae4> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities 0x18a380000 - 0x18a384fff CommunicationsFilter arm64 <f57b126af38139b280188f1e33ae77a2> /System/Library/PrivateFrameworks/CommunicationsFilter.framework/CommunicationsFilter 0x18a470000 - 0x18a475fff ConstantClasses arm64 <b1cc336c6ea1319f8131623918110a89> /System/Library/PrivateFrameworks/ConstantClasses.framework/ConstantClasses 0x18a478000 - 0x18a4b6fff ContentIndex arm64 <11771c1154c63b2ea6b3a2759116f76a> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex 0x18a4b8000 - 0x18a4c0fff CoreAUC arm64 <ac7f4428bde93a379e4710ff07f8cd82> /System/Library/PrivateFrameworks/CoreAUC.framework/CoreAUC 0x18a4fc000 - 0x18a55cfff CoreDAV arm64 <0eb42897b04c35558a55ac357b4f4eb5> /System/Library/PrivateFrameworks/CoreDAV.framework/CoreDAV 0x18a560000 - 0x18a588fff CoreDuet arm64 <2325864ac79931d08384cad9a5c2378c> /System/Library/PrivateFrameworks/CoreDuet.framework/CoreDuet 0x18a594000 - 0x18a5a7fff CoreDuetDaemonProtocol arm64 <8e9b82e37ab1398fb75be0114863b188> /System/Library/PrivateFrameworks/CoreDuetDaemonProtocol.framework/CoreDuetDaemonProtocol 0x18a5b0000 - 0x18a5b2fff CoreDuetDebugLogging arm64 <9a52d10bde253ae196a436618e6245af> /System/Library/PrivateFrameworks/CoreDuetDebugLogging.framework/CoreDuetDebugLogging 0x18a758000 - 0x18a890fff CoreMediaStream arm64 <e22f7a3741a33ebd9f7bf3930974f204> /System/Library/PrivateFrameworks/CoreMediaStream.framework/CoreMediaStream 0x18a894000 - 0x18a944fff CorePDF arm64 <48261152791832da9b786ccb6e676ce4> /System/Library/PrivateFrameworks/CorePDF.framework/CorePDF 0x18a9b8000 - 0x18a9c3fff CoreRecents arm64 <cd48e7d3e01439e1b592864083e40954> /System/Library/PrivateFrameworks/CoreRecents.framework/CoreRecents 0x18aa58000 - 0x18aa7cfff CoreServicesInternal arm64 <c35ab32d16e839e5bd3a2d4357cd512b> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal 0x18ace4000 - 0x18ad78fff CoreUI arm64 <8e5f6e68de253eb98752939e94219aa8> /System/Library/PrivateFrameworks/CoreUI.framework/CoreUI 0x18ad7c000 - 0x18ae16fff CoreUtils arm64 <835930892f3f3c28823421061c40dad7> /System/Library/PrivateFrameworks/CoreUtils.framework/CoreUtils 0x18ae18000 - 0x18ae1efff CrashReporterSupport arm64 <939d8e00b1a8388eaf6721fe6fed8d07> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport 0x18ae20000 - 0x18ae26fff DAAPKit arm64 <996db669e80833e0a44db31c6e094693> /System/Library/PrivateFrameworks/DAAPKit.framework/DAAPKit 0x18ae28000 - 0x18ae33fff DCIMServices arm64 <da6697519919326580a81258865cf9de> /System/Library/PrivateFrameworks/DCIMServices.framework/DCIMServices 0x18ae34000 - 0x18ae83fff DataAccess arm64 <7024476be74c3c1d9d7958544753e6d2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess 0x18b0e0000 - 0x18b106fff DataAccessExpress arm64 <ba41527f2d0136f787281ddbbe9d2015> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress 0x18b114000 - 0x18b130fff DataDetectorsCore arm64 <18f1d4d28f803ef6a60812bed08a4f67> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore 0x18b138000 - 0x18b154fff DataDetectorsUI arm64 <62a16bec373d3bfb95c8ad835ed3624b> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI 0x18b158000 - 0x18b15ffff DataMigration arm64 <ac8e9c98ebaf3b3facc8a35d4a5f662d> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration 0x18b17c000 - 0x18b17dfff DiagnosticLogCollection arm64 <446ae998ec433acdac17d08dfb63094d> /System/Library/PrivateFrameworks/DiagnosticLogCollection.framework/DiagnosticLogCollection 0x18b180000 - 0x18b1a0fff DictionaryServices arm64 <d911eb3e1549338d8a3da77f3cf030ca> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices 0x18b1c8000 - 0x18b1eefff EAP8021X arm64 <6201a1545ea735eaa654e6c4f19fce9c> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X 0x18b310000 - 0x18b327fff FTAWD arm64 <f00339a73278354ab23259a161733430> /System/Library/PrivateFrameworks/FTAWD.framework/FTAWD 0x18b328000 - 0x18b32afff FTClientServices arm64 <41e3fe196535314d955d8adf52731b2d> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices 0x18b32c000 - 0x18b35efff FTServices arm64 <063fb60e8c3031189f047aaf77127419> /System/Library/PrivateFrameworks/FTServices.framework/FTServices 0x18b360000 - 0x18b78dfff FaceCore arm64 <6c9c849bf1173e1892729204b96c95bb> /System/Library/PrivateFrameworks/FaceCore.framework/FaceCore 0x18b814000 - 0x18b814fff FontServices arm64 <9d2ca68913c53fef976aabcdb3f2bb7c> /System/Library/PrivateFrameworks/FontServices.framework/FontServices 0x18b818000 - 0x18b8f8fff libFontParser.dylib arm64 <3e696fd5c611305eaee6bad27362f029> /System/Library/PrivateFrameworks/FontServices.framework/libFontParser.dylib 0x18b8fc000 - 0x18b90bfff libGSFontCache.dylib arm64 <c98491fefd2a34f5a1a5fab3cce3d478> /System/Library/PrivateFrameworks/FontServices.framework/libGSFontCache.dylib 0x18ba18000 - 0x18ba38fff FrontBoardServices arm64 <06e8a3da46443f858df92288b8b009bf> /System/Library/PrivateFrameworks/FrontBoardServices.framework/FrontBoardServices 0x18c5e0000 - 0x18c5f9fff GenerationalStorage arm64 <c02d99b6f6e138249504e2a9a598e9b1> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage 0x18c5fc000 - 0x18c911fff GeoServices arm64 <624b0528e79e3bd78cf8e4ca477e207b> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices 0x18c914000 - 0x18c927fff GraphicsServices arm64 <75b91070a0e7388fb904347f318b8cc0> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices 0x18ca80000 - 0x18cae8fff Heimdal arm64 <d7f823808ea338e189ab8f504eccb3a8> /System/Library/PrivateFrameworks/Heimdal.framework/Heimdal 0x18cbfc000 - 0x18cc96fff HomeSharing arm64 <9d9df9ed1dc53162a89400f3c5a786df> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing 0x18cd00000 - 0x18cd6bfff IDS arm64 <f4cb70b71d3b31729bdaa04281def4ee> /System/Library/PrivateFrameworks/IDS.framework/IDS 0x18cd6c000 - 0x18cd9afff IDSFoundation arm64 <9411f337675431bd9d1ee6ca7f2e9810> /System/Library/PrivateFrameworks/IDSFoundation.framework/IDSFoundation 0x18cd9c000 - 0x18ce08fff IMAVCore arm64 <cdbed1a9f5133baf95c2752c1c967aed> /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore 0x18ce0c000 - 0x18cecffff IMCore arm64 <11b18dde1abd3553a034dc30ed2f5954> /System/Library/PrivateFrameworks/IMCore.framework/IMCore 0x18cf80000 - 0x18cff1fff IMFoundation arm64 <49f257517bed3c80a505c395449ab8a4> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation 0x18cffc000 - 0x18d003fff IOAccelerator arm64 <95ab3e3274d630779faccf8902ddc494> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator 0x18d008000 - 0x18d00efff IOMobileFramebuffer arm64 <079c9947522f331b8837714ca08e0966> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer 0x18d010000 - 0x18d016fff IOSurface arm64 <202149d941b339f1a765e48058a523ea> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface 0x18d018000 - 0x18d01afff IOSurfaceAccelerator arm64 <9aaea96dbea43a648fa78e7f43f769cd> /System/Library/PrivateFrameworks/IOSurfaceAccelerator.framework/IOSurfaceAccelerator 0x18d378000 - 0x18d37efff IncomingCallFilter arm64 <f850d702dc973d508bcc890a93616bdb> /System/Library/PrivateFrameworks/IncomingCallFilter.framework/IncomingCallFilter 0x18d380000 - 0x18d387fff IntlPreferences arm64 <0ba4276ecf8831378d3576dd145e3282> /System/Library/PrivateFrameworks/IntlPreferences.framework/IntlPreferences 0x18d388000 - 0x18d3cdfff LanguageModeling arm64 <f484305f34db38e7be02f5cd0b37404b> /System/Library/PrivateFrameworks/LanguageModeling.framework/LanguageModeling 0x18d460000 - 0x18d4a8fff MIME arm64 <692dce99d89d32298da32bbde8c18a63> /System/Library/PrivateFrameworks/MIME.framework/MIME 0x18d4ac000 - 0x18d518fff MMCS arm64 <780e63b11aeb3997b5bafb50d6b21b03> /System/Library/PrivateFrameworks/MMCS.framework/MMCS 0x18d57c000 - 0x18d58afff MailServices arm64 <61cef8e55a8f3747b5adeecb2f430e77> /System/Library/PrivateFrameworks/MailServices.framework/MailServices 0x18d5c8000 - 0x18d686fff ManagedConfiguration arm64 <b8ba68326c7030c1803e9f01edcefe02> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration 0x18d698000 - 0x18d699fff Marco arm64 <f08df1984df33a7c80d2a2d9f8537c71> /System/Library/PrivateFrameworks/Marco.framework/Marco 0x18d69c000 - 0x18d720fff MediaControlSender arm64 <efb209af426c3d2bb592c4e8f2648a27> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender 0x18d7d4000 - 0x18d7ecfff MediaRemote arm64 <29897add26cf34f7b92dc012ed32f883> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote 0x18d7f0000 - 0x18d805fff MediaServices arm64 <98515a962b2f335da9efb5f14931c42f> /System/Library/PrivateFrameworks/MediaServices.framework/MediaServices 0x18d808000 - 0x18d824fff MediaStream arm64 <a5f65807eb863acf9a749e88e6c6b731> /System/Library/PrivateFrameworks/MediaStream.framework/MediaStream 0x18d8a4000 - 0x18d9a1fff Message arm64 <2b6c7c4d05c23c12add40cc85a849458> /System/Library/PrivateFrameworks/Message.framework/Message 0x18d9ac000 - 0x18d9affff MessageSupport arm64 <9852ca056bd13fb1b1d9254aa015cc3a> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport 0x18d9c0000 - 0x18d9cffff MobileAsset arm64 <b09857caa4663e268cbf77652e40c7df> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset 0x18d9fc000 - 0x18da08fff MobileBluetooth arm64 <5fe32739d757359f963b4c926f472374> /System/Library/PrivateFrameworks/MobileBluetooth.framework/MobileBluetooth 0x18da30000 - 0x18da39fff MobileIcons arm64 <d594044fabbc31af991af3b8af4530a5> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons 0x18da3c000 - 0x18da45fff MobileInstallation arm64 <096c77b57b62337bb756b2b347fb0768> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation 0x18da48000 - 0x18da57fff MobileKeyBag arm64 <0e6f9d62dfe23cbca54b4d1a14f76149> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag 0x18da94000 - 0x18da97fff MobileSystemServices arm64 <54153419dcaa356fb42fd86b712a4cf2> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices 0x18dac0000 - 0x18dad1fff MobileWiFi arm64 <b033fc6a7d7b39debe0d81296dce51e1> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi 0x18db28000 - 0x18dd30fff MusicLibrary arm64 <8febe3b9c72a311f9cf0f8a95e52b821> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary 0x18df10000 - 0x18df29fff NanoRegistry arm64 <c977913607563f28963a336adaf69c22> /System/Library/PrivateFrameworks/NanoRegistry.framework/NanoRegistry 0x18df68000 - 0x18df6efff Netrb arm64 <28eb6839c8f63101816697fa19770689> /System/Library/PrivateFrameworks/Netrb.framework/Netrb 0x18df70000 - 0x18df77fff NetworkStatistics arm64 <b120e0e7ff6d36889b917c7ca2e5f978> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics 0x18df78000 - 0x18df9afff Notes arm64 <685e6f78db0e3adf9f233115bef345b1> /System/Library/PrivateFrameworks/Notes.framework/Notes 0x18dfa4000 - 0x18dfa7fff OAuth arm64 <e8987386b74a365582fa85fef51bc127> /System/Library/PrivateFrameworks/OAuth.framework/OAuth 0x18e770000 - 0x18e7befff OpenCL arm64 <9ad1144d2c4333b980276e2c4e6ac4fa> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL 0x18e93c000 - 0x18e965fff PersistentConnection arm64 <6723595bce1937c3a45fbb85baff8c55> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection 0x18eaf4000 - 0x18edeefff PhotoLibraryServices arm64 <661e8f4bffb93a70905bbe78f38b5564> /System/Library/PrivateFrameworks/PhotoLibraryServices.framework/PhotoLibraryServices 0x18edf0000 - 0x18edf9fff PhotosFormats arm64 <492afd457a413838925220729b7ca800> /System/Library/PrivateFrameworks/PhotosFormats.framework/PhotosFormats 0x18edfc000 - 0x18ee49fff PhysicsKit arm64 <6a97907da3523632b9e4848047aa8f4a> /System/Library/PrivateFrameworks/PhysicsKit.framework/PhysicsKit 0x18ee4c000 - 0x18ee66fff PlugInKit arm64 <abb4118758ff3394be7af8851961f0a9> /System/Library/PrivateFrameworks/PlugInKit.framework/PlugInKit 0x18ee68000 - 0x18ee70fff PowerLog arm64 <e938cd724d08330995b5f601f8dd14f6> /System/Library/PrivateFrameworks/PowerLog.framework/PowerLog 0x18f0d0000 - 0x18f198fff Preferences arm64 <c569face087f3dbc91f616b0b69f6516> /System/Library/PrivateFrameworks/Preferences.framework/Preferences 0x18f1e8000 - 0x18f2a9fff ProofReader arm64 <5d4f70ce92443a24b01e5c2186abfb15> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader 0x18f2ac000 - 0x18f2d9fff ProtectedCloudStorage arm64 <d928e44bb8ce3522a7bb283faaa5047b> /System/Library/PrivateFrameworks/ProtectedCloudStorage.framework/ProtectedCloudStorage 0x18f2dc000 - 0x18f2eafff ProtocolBuffer arm64 <479705f12ac2303b931994a7b06663bf> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer 0x18f32c000 - 0x18f3aafff Quagga arm64 <66a25218aec23c18b9a18d8f810c5258> /System/Library/PrivateFrameworks/Quagga.framework/Quagga 0x18f3ac000 - 0x18f3b5fff QuickLookThumbnailing arm64 <195ff028b269356eab3e5b1ba59f59ce> /System/Library/PrivateFrameworks/QuickLookThumbnailing.framework/QuickLookThumbnailing 0x18f70c000 - 0x18f7b4fff SAObjects arm64 <56ba1d3456133884a61b2dd27ca74be2> /System/Library/PrivateFrameworks/SAObjects.framework/SAObjects 0x18f890000 - 0x18f8d9fff Sharing arm64 <45756d6c197930558ef1ebd1adfae97a> /System/Library/PrivateFrameworks/Sharing.framework/Sharing 0x18f9a8000 - 0x18f9c8fff SpringBoardServices arm64 <c2866d40ee023cf9bb04fd7e58d20be2> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices 0x18fdc8000 - 0x18ff26fff StoreServices arm64 <6f1976a1f8de3576bab51f432d4fd363> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices 0x190024000 - 0x190027fff TCC arm64 <b82f927439b13660b90c1669424d0c88> /System/Library/PrivateFrameworks/TCC.framework/TCC 0x190088000 - 0x1900d5fff TelephonyUtilities arm64 <1f7cc967cc793f8bac3cc3b7f0f906c4> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities 0x1900fc000 - 0x190eb5fff KBLayouts_iPhone.dylib arm64 <ab8f676ccb6a3f95b3c3df8c3ff75e62> /System/Library/PrivateFrameworks/TextInput.framework/KBLayouts_iPhone.dylib 0x190eb8000 - 0x190ee6fff TextInput arm64 <a1c4cabe458432e5a1f44ba76562f5fb> /System/Library/PrivateFrameworks/TextInput.framework/TextInput 0x190fcc000 - 0x1910a6fff UIFoundation arm64 <cd7d7fc27ec53df5977d9ee67ee0c54a> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation 0x1910d8000 - 0x1910dbfff UserFS arm64 <e5ebd8c9ae653364a9165ece0a913713> /System/Library/PrivateFrameworks/UserFS.framework/UserFS 0x191934000 - 0x191958fff VoiceServices arm64 <14360e38ed6530b0a4b425cf59e2e6c4> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices 0x191a0c000 - 0x191a34fff WebBookmarks arm64 <7545a4b6e2b83edda152ca880a2531be> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks 0x191a54000 - 0x19298dfff WebCore arm64 <adb10f951502364aa9574d0d292bb430> /System/Library/PrivateFrameworks/WebCore.framework/WebCore 0x192990000 - 0x192a61fff WebKitLegacy arm64 <4b9e1233412b38c08667bea57820c69a> /System/Library/PrivateFrameworks/WebKitLegacy.framework/WebKitLegacy 0x192c50000 - 0x192c57fff XPCKit arm64 <68a3cf7fd92630fa8593f41da4a44659> /System/Library/PrivateFrameworks/XPCKit.framework/XPCKit 0x192c58000 - 0x192c61fff XPCObjects arm64 <094176983b743647b4f4f961675409f2> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects 0x192e98000 - 0x192ec3fff iCalendar arm64 <4e98d67b7cbe31d5ab9dc37386f2d851> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar 0x192ef0000 - 0x192f32fff iTunesStore arm64 <ecba8ce199b131dc9c34de6055ce1826> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore 0x193a8c000 - 0x193a95fff libAccessibility.dylib arm64 <72f6e8d3b4393171adad94e3bb413237> /usr/lib/libAccessibility.dylib 0x193d2c000 - 0x193d47fff libCRFSuite.dylib arm64 <be077716ac813f089f62203291996e66> /usr/lib/libCRFSuite.dylib 0x193d88000 - 0x193ebffff libFosl_dynamic.dylib arm64 <bb3d2b69a7f3305c84970bab2c92a1ee> /usr/lib/libFosl_dynamic.dylib 0x193ee4000 - 0x193efefff libMobileGestalt.dylib arm64 <0d296a1f3cbd39bca52fdaa3b4df2a34> /usr/lib/libMobileGestalt.dylib 0x193f30000 - 0x193f31fff libSystem.B.dylib arm64 <9e8736fd5dda318abe4e597a531a625f> /usr/lib/libSystem.B.dylib 0x193fb4000 - 0x194002fff libTelephonyUtilDynamic.dylib arm64 <f3b516b737b63a46b0a4b1e41ed9e7d4> /usr/lib/libTelephonyUtilDynamic.dylib 0x19412c000 - 0x194156fff libarchive.2.dylib arm64 <940f023a5f5f3aa19366e25514485721> /usr/lib/libarchive.2.dylib 0x194158000 - 0x194158fff libassertion_extension.dylib arm64 <e06a4dfa6008338b934ee537d58d54c3> /usr/lib/libassertion_extension.dylib 0x194198000 - 0x1941a8fff libbsm.0.dylib arm64 <9e2235e821063e82a304719b1f4cf5f9> /usr/lib/libbsm.0.dylib 0x1941ac000 - 0x1941bcfff libbz2.1.0.dylib arm64 <a4e3b1006e6c37d3816f612caa78bdf2> /usr/lib/libbz2.1.0.dylib 0x1941c0000 - 0x194216fff libc++.1.dylib arm64 <fd4810a47e6b31d3b5a8ceedf8ac6937> /usr/lib/libc++.1.dylib 0x194218000 - 0x19423afff libc++abi.dylib arm64 <2d2238a0320c395dbd802981c0b1a5fe> /usr/lib/libc++abi.dylib 0x194240000 - 0x194251fff libcmph.dylib arm64 <51052b48f1053799a834ca4a8e71b581> /usr/lib/libcmph.dylib 0x194254000 - 0x19425cfff libcupolicy.dylib arm64 <082e83a4bd1a371bb6efa2b7d9007097> /usr/lib/libcupolicy.dylib 0x194298000 - 0x1942b5fff libextension.dylib arm64 <e2ed78a202593605b32575c0f22e08ea> /usr/lib/libextension.dylib 0x1942e4000 - 0x1942e9fff libheimdal-asn1.dylib arm64 <61576927c939371c86216b7f14aed420> /usr/lib/libheimdal-asn1.dylib 0x1942ec000 - 0x1943dffff libiconv.2.dylib arm64 <f735f961ee3e380ea18bb26f937c708e> /usr/lib/libiconv.2.dylib 0x1943e0000 - 0x1945c7fff libicucore.A.dylib arm64 <4d8191c3315c3f5ca890c19e30dcd75b> /usr/lib/libicucore.A.dylib 0x1945dc000 - 0x1945ddfff liblangid.dylib arm64 <02a03c3dba573ae0ab3b32911c77efba> /usr/lib/liblangid.dylib 0x1945e0000 - 0x1945ecfff liblockdown.dylib arm64 <f3fabf14927e30f4889f04efcd61711c> /usr/lib/liblockdown.dylib 0x1945f0000 - 0x194609fff liblzma.5.dylib arm64 <f16086f89f1032d1aa3b80b559eddca9> /usr/lib/liblzma.5.dylib 0x1949e0000 - 0x1949f8fff libmis.dylib arm64 <3929204949543825a23a02585a45eff8> /usr/lib/libmis.dylib 0x1949fc000 - 0x194a2cfff libncurses.5.4.dylib arm64 <4c95738f8d96355faec9d8a2fbba9a44> /usr/lib/libncurses.5.4.dylib 0x194a44000 - 0x194c40fff libobjc.A.dylib arm64 <963fc34f80f9303da52a020af5a63e74> /usr/lib/libobjc.A.dylib 0x194d28000 - 0x194d45fff libresolv.9.dylib arm64 <7793473e15e13911809cb6a8162c0b94> /usr/lib/libresolv.9.dylib 0x194d78000 - 0x194e55fff libsqlite3.dylib arm64 <a97fddbf637f349ab395149f86cd80be> /usr/lib/libsqlite3.dylib 0x194eac000 - 0x194edefff libtidy.A.dylib arm64 <74b893a0811730c8a33c8f56d841b292> /usr/lib/libtidy.A.dylib 0x194ee0000 - 0x194ee9fff libtzupdate.dylib arm64 <71b844bdf79533ce82bca79265a4d354> /usr/lib/libtzupdate.dylib 0x194ef0000 - 0x194fdefff libxml2.2.dylib arm64 <73e5c4db073c3f97b3d7a78fdc531e86> /usr/lib/libxml2.2.dylib 0x194fe0000 - 0x195009fff libxslt.1.dylib arm64 <e84a63dc1cdf33f38edcd1963e8bcac0> /usr/lib/libxslt.1.dylib 0x19500c000 - 0x19501dfff libz.1.dylib arm64 <263f8bc085593d578ea393ba40438ee3> /usr/lib/libz.1.dylib 0x195020000 - 0x195024fff libcache.dylib arm64 <69f2d8d4d9ed3393b4e44bc425b538f2> /usr/lib/system/libcache.dylib 0x195028000 - 0x195034fff libcommonCrypto.dylib arm64 <c126afa9b4eb3f8cbb5fee48a17b56c6> /usr/lib/system/libcommonCrypto.dylib 0x195038000 - 0x19503bfff libcompiler_rt.dylib arm64 <7d48e08690f43daeaf8fdcb82d3ebb74> /usr/lib/system/libcompiler_rt.dylib 0x19503c000 - 0x195043fff libcopyfile.dylib arm64 <126799884b2231498c7a5697b769aff5> /usr/lib/system/libcopyfile.dylib 0x195044000 - 0x19509bfff libcorecrypto.dylib arm64 <eeae3730f4bb3c8e91bd85f00b2314ce> /usr/lib/system/libcorecrypto.dylib 0x19509c000 - 0x1950c4fff libdispatch.dylib arm64 <91f808be126a33b982d5880c2454afde> /usr/lib/system/libdispatch.dylib 0x1950c8000 - 0x1950cafff libdyld.dylib arm64 <cdf00d005c2f30efa821536ccb0b70f4> /usr/lib/system/libdyld.dylib 0x1950cc000 - 0x1950ccfff liblaunch.dylib arm64 <0d5f253a83673ecb9a55f667adf2c205> /usr/lib/system/liblaunch.dylib 0x1950d0000 - 0x1950d5fff libmacho.dylib arm64 <08dc912ff3123d2abc59dd17889f2abc> /usr/lib/system/libmacho.dylib 0x1950d8000 - 0x1950d9fff libremovefile.dylib arm64 <d5239b98479b37538d63f1fd0fe35905> /usr/lib/system/libremovefile.dylib 0x1950dc000 - 0x1950f1fff libsystem_asl.dylib arm64 <314e1ff76a71372ca4bc80351f984376> /usr/lib/system/libsystem_asl.dylib 0x1950f4000 - 0x1950f5fff libsystem_blocks.dylib arm64 <b120e51ddfeb3a1ca33f448f54412428> /usr/lib/system/libsystem_blocks.dylib 0x1950f8000 - 0x195178fff libsystem_c.dylib arm64 <043c87b4428d34d4985264cebab5f687> /usr/lib/system/libsystem_c.dylib 0x19517c000 - 0x19517efff libsystem_configuration.dylib arm64 <a666b752b9ea3289998dcf502fdeed0f> /usr/lib/system/libsystem_configuration.dylib 0x195180000 - 0x195181fff libsystem_coreservices.dylib arm64 <f73841bdf9a03defa5893ff3053889fa> /usr/lib/system/libsystem_coreservices.dylib 0x195184000 - 0x195194fff libsystem_coretls.dylib arm64 <e5edf64e24403daa997390669c136d6f> /usr/lib/system/libsystem_coretls.dylib 0x195198000 - 0x1951a0fff libsystem_dnssd.dylib arm64 <c3c32be935df34b99c9f7acf5c29d3ff> /usr/lib/system/libsystem_dnssd.dylib 0x1951a4000 - 0x1951c5fff libsystem_info.dylib arm64 <7568980767d3355b99464736b574ff14> /usr/lib/system/libsystem_info.dylib 0x1951c8000 - 0x1951e8fff libsystem_kernel.dylib arm64 <7cd96299577530ebbca0cb44625702a7> /usr/lib/system/libsystem_kernel.dylib 0x1951ec000 - 0x195208fff libsystem_m.dylib arm64 <4f59e5b4cf4935ada2e457a196730c2a> /usr/lib/system/libsystem_m.dylib 0x19520c000 - 0x195225fff libsystem_malloc.dylib arm64 <56245a320c8a39f5b6057a9e99cac10d> /usr/lib/system/libsystem_malloc.dylib 0x195228000 - 0x19525ffff libsystem_network.dylib arm64 <45c9566df16c3ae8ac52b39cafc30094> /usr/lib/system/libsystem_network.dylib 0x195260000 - 0x195266fff libsystem_networkextension.dylib arm64 <2d758a26b5c23b969bfdb2c759752531> /usr/lib/system/libsystem_networkextension.dylib 0x195268000 - 0x195272fff libsystem_notify.dylib arm64 <c9c3de7c1a60336caf14918b9b087245> /usr/lib/system/libsystem_notify.dylib 0x195274000 - 0x195278fff libsystem_platform.dylib arm64 <c1774ebd3158311c8ee629808cbf8e77> /usr/lib/system/libsystem_platform.dylib 0x19527c000 - 0x195284fff libsystem_pthread.dylib arm64 <e33298efd42037c2b571cde172635e5a> /usr/lib/system/libsystem_pthread.dylib 0x195288000 - 0x19528afff libsystem_sandbox.dylib arm64 <edbadf71bd723d298ae9d5ad3d88ea86> /usr/lib/system/libsystem_sandbox.dylib 0x19528c000 - 0x19528ffff libsystem_stats.dylib arm64 <3ff8d305985431a9b00a9be30ea1d06e> /usr/lib/system/libsystem_stats.dylib 0x195290000 - 0x195296fff libsystem_trace.dylib arm64 <85a38582fb75355d92d3f50ca8c00b23> /usr/lib/system/libsystem_trace.dylib 0x195298000 - 0x19529dfff libunwind.dylib arm64 <ff63fb2532113013bd0a9da1f3df5911> /usr/lib/system/libunwind.dylib 0x1952a0000 - 0x1952c3fff libxpc.dylib arm64 <b870b51daa853686a7d9acd48c5fe153> /usr/lib/system/libxpc.dylib', Ok I think that should be the right one - if not, please just let me know!', Perhaps related to 17:31:13 < st3fan> ', 17:31:34 < st3fan> "For SQLite/Core Data, processes using databases in DELETE journal mode will be instantly killed instead of suspended. Processes using database in WAL journal mode will only be jetsam\'d if they attempt to hold a write transaction open at the time of suspension. "', Is this related to the SQLite interruption code? Or the lack of that code when this was filed?', Still happening?', This is no longer happening for me, fwiw - seemed to be fixed in the last build or so', Thanks. One less bug for Stefan.' 
id=1146838	 'Marco, we need some guidance here I think. It is pretty easy to add accessibility labels to the individual tabs, but what should their contents be? The page URL? Or the page title? Or both? Or a custom formatted text?', I'd say the Page Title, as is usual for the tabs in Safari, or in Firefox for Android, fo that matter. And then give each of the AccessibilityElements all the actions there are. e. g. if you can tap on it to activate and swipe it to close the tab, if VoiceOver doesn't pick up on these automatically, add the AccessibilityCustomActions to it so the VoiceOver rotor can be used to perform all actions in a controlled fashion.", The only remaining issue, AFAIK, is that the "Sign In" button (i.e. the title view) is completely inaccessible (i.e. can\'t be reached with VoiceOver neither using swipe gestures, nor using touch exploration). My guess is it could be a UIKit accessibility bug (when UINavigationItem contains `titleView` instead of `title`, accessibility might get confused), but will probably look at it sometime again and see if that is the case and if there is any workaround possible.', Added a commit to the pull request to fix the "Sign In" button. Turned out to really be a very bizarre AppKit accessibility issue with a (hopefully acceptable) workaround.', Created ', ', Pull request Flagging myself just so this doesn't get overlooked, but if anyone else wants to take this review that'd be super.", Comment on ', ', Pull request A couple comments in the PR. Can you update it, and I'll land it.", (In reply to Wesley Johnston (:wesj) from ', ) ', I will do it today (and then say so here).', (In reply to Boris Du\u0161ek from ', ) ', OK, now it's done. Please take a look.", I was wondering if the PR could get reviewed? (I just rebased btw.)', wesj, does this need re-review? Or missing anything else to move forward with it? This bug is keeping me from testing some essential parts of the app. :)', I again rebased the PR, fixing conflicts. I would appreciate a review.', Looks good. merged. Sorry for the delay.', Thanks.', Did this make the cut for build 8? If so, the fix doesn't work. if not, I'll have to be patient for the next build. Build 8 didn't have any change to the behavior, e. g. still only the tabs tray being one big blob without any discernable controls.", If git tag AuroraV8 is to be trusted, then it unfortunately did not make the cut by approx. 15 commits (or 1 day). So you will have to wait for the next build (i.e. AuroraV9 I guess).', OK, then that answers it. Thanks!' 
id=1176017	 'This is as a result of greying out the buttons on about:home on new tab', Extra points for a test.', I can probably take a look at this', Created ', ', PR BNicholz <3333', currently adding tests for Newman's +", points*', Comment on ', ', PR Looking good -- left some comments in the PR. Nice test!' 
id=1124848	 "We'll take patches for this, but not block for the immediate first release.", I also experience this bug in Firefox for Android. Stock, unrooted Nexus 4 running Lollipop 5.1.1 (latest stagefright OTA fix). Bug was present both in Firefox for Android versions 39 and 40. Changing the text size setting does not affect the Firefox menu text sizes nor any of the text in any websites.', (In reply to anon39483 from ', ) ', This bug is specific to iOS efforts. Text size adjustments in Firefox for Android can be misleading as its useful only on unoptimized for mobile for content \u2014 it has no affect on UI nor mobile-optimized content.', Created ', ', Pull request Hey Stephan, here's a first try at this one. What do you think about the approach? * Introducing a `DynamicFontHelper` (singleton) * Moving from `UIConstants.*` fonts to `DynamicFontHelper.defaultHelper.*` fonts * Introducing new `UIConstants.*` fonts for the chrome (looks like Safari keeps the chrome unchanged too) * Making sure autolayouted tableviews automagically reflow to the new font size when the setting changes * Using a notification for the other cases Once we're set on the design code-wise, I'll make a bunch of screenshots with different Text Size settings so this can be thoroughly ui-reviewed. Please let me know if there's any good unit-tests/UITests to add too! Cheers!", Comment on ', ', Pull request Huge thanks for this patch. We've been wanting to get this in but haven't got around to it. I like the approach you took with creating the DynamicFontHelper and having it listen to the UIContentSizeCategoryDidChangeNotification notification and forwarding the change to it's listeners. Left some small nits on the PR. Overall I think this looks pretty good visually. The text sizes scale to sizes which makes sense and I'm surprised that our layouts are holding up to the changes. For testing, you have two options: 1. We use KIF 1 for automated blackbox UI testing. We have some test cases setup in the UITests folder in the project that you can use as a reference to get started. Most of the labels should have a way to refer to it using accessibility labels so you can use that to test the font changes. I'm not sure how to change the text size in the settings app using KIF though. 2. FBSnapshotTestCase 2 . This is more of a unit test for views. This is a new framework that I've recently added to allow us to do 'Ref testing' for our native views. I'm not sure if it's applicable here but you can check it out if you see it working better. These tests are located under NativeRefTests. There isn't any test cases yet on master but you can check out this branch 3 for how I've used it for an upcoming feature. 1 ", 2 ', 3 ', && ', Comment on ', ', Pull request Comments addressed and tests added :) I just pushed new commits to make it easier to review but let me know if you want me to squash. Darrin, not sure what\'s the best way to ui-review this. You can install this build and play with the accessibility settings or I can make screenshots of each screens at the "extremes" maybe (smallest font, biggest font etc...), let me know what works best :)', This looks great! I tried it at the largest and smallest sizes and things seem to layout properly. Not sure if this was meant to be a full pass, I noticed a few areas that didn't respond to the text size (intro tour, for one).", Comment on ', ', Pull request Looks good - thanks for the tests! :darrin, do we want to do an audit of which screens we want to apply dynamic text to before landing this?', (In reply to Darrin Henein :darrin from ', ) ', The settings were already "dynamic", this patch adds support for: - the various home panels - the reader mode - the tab tray Missed the intro tour :)', Comment on ', ', Pull request Just rebased and pushed a new version with support for the Intro :)', Comment on ', ', Pull request Looks good! I noticed the tab counter is bigger than it was though. Maybe the scale is off for that case?', (In reply to Stephan Leroux :sleroux from ', ) ', It's part of the chrome and should have a constant size, I'll push a fix!", I'm going to go ahead and land this. If we have any other screens we've missed we can create new bugs.", Master 59337262d0d4551c9be428f29122c9c1600716ab' 
id=1194726	 'I consider this a blocker for shipping.', Reproduced this again this morning have left the browser open overnight. Touching any tab I had opened just loaded a blank page with no address.', I was able to replicate this yesterday on beta #33, then this morning I opened the app and had 5 fewer tabs than the night before and they all worked just fine..... Cannot seem to replicate this on developer version or aurora.', when this happens, force quitting the app and then restoring from scratch brings back all the empty tabs', :aaronmt can you check the console logs if this happens? if it is easy to reproduce can you connect your device to xcode tomorrow morning and then activate the app while having the console log open in the device navigator?', I checked this morning again and there was nothing related in the devices log.', tried simulating a memory warning in simulator to force zombification of tabs on both device and simulator to no effect', Created ', ', Debug Patch Added some debug in some likely places to try and help figure out what is happening here.', Comment on ', ', Debug Patch Lets do it.', This is reproducible after about an hour maybe a bit more. I checked my device console afterwards in XCode with build #35 and didn't see anything searching for Firefox. ^ Did the above patch even make it to Test Flight #35?", nope. It looks like this patch from rnewman reverted all the debug logging I put in: ', Most of my tabs came back without issue. One tab opened with a grey background and then reloaded. I saw this in the console: Aug 19 08:39:02 Stefan-Arentzs-iPhone com.apple.WebKit.WebContent 1246 <Error>: Compiler cache open failed with status = 206', Created ', 1194726.mov Video from my iPhone this morning, tapping the Polygon tab in the bottom right', iPhone 6 (8.4.1); Firefox 1.0 Build #35 Visit in a new tab each of: * ', * ', * ', * ', * ', Leave the browser in the foreground. Turn off the screen and return to the phone maybe an hour to hour and a half later. Awaken the device, Firefox should still be front and centre. Open the tab drawer and tap any of the open tabs you had. What will happen is what you see in the video, the tab content vanishes, the URL associated with the tab vanishes so you effectively lose what you had open when you touch a tab. I have apps open on my phone (e.g, Twitter/Yelp/Safari/Soundcloud/Hangouts/Mail/Messages) as well.', This is the only thing shown in my console Aug 19 12:38:15 Aaron-Trains-iPhone ReportCrash 2250 <Error>: task_set_exception_ports(B07, 400, D03, 0, 0) failed with error (4: (os/kern) invalid argument) Aug 19 12:38:15 Aaron-Trains-iPhone ReportCrash 2250 <Notice>: Not saving Jetsam log because no data from the kernel. Aug 19 12:38:15 Aaron-Trains-iPhone UserEventAgent 21 <Notice>: jetsam: kernel termination snapshot being created', Aug 19 12:41:47 Aaron-Trains-iPhone Client 2361 <Error>: assertion failed: 12H321: libxpc.dylib + 71720 6AAD6868-FD5B-3002-9EF4-5897E6B452AF : 0x7d Aug 19 12:43:21 Aaron-Trains-iPhone Client 2361 <Error>: CGBitmapContextCreate: unsupported color space. Aug 19 12:43:21 Aaron-Trains-iPhone Client 2361 <Error>: CGContextDrawImage: invalid context 0x0. This is a serious error. This application, or a library it uses, is using an invalid context and is thereby contributing to an overall degradation of system stability and reliability. This notice is a courtesy: please fix this problem. It will become a fatal error in an upcoming update.', Running a debug DEBUG Did disconnect Left the phone sleep for over an hour. Awakened it, switched to a tab I had open 2015-08-19 15:02:14.709 Debug Profile.swift:516 beginTimedSyncs(): Starting sync timer. 2015-08-19 15:02:14.722 Debug BrowserViewController.swift:257 loadQueuedTabs(): Loading queued tabs in the background. 2015-08-19 15:02:14.799 Debug DeferredDBOperation.swift:91 main(): Modified rows: 0. 2015-08-19 15:02:14.800 Debug BrowserViewController.swift:271 dequeueQueuedTabs(): Queue. Count: 0. 2015-08-19 15:02:14.801 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-19 15:02:18.464 Debug BrowserViewController.swift:257 loadQueuedTabs(): Loading queued tabs in the background. 2015-08-19 15:02:18.468 Debug DeferredDBOperation.swift:91 main(): Modified rows: 0. 2015-08-19 15:02:18.470 Debug BrowserViewController.swift:271 dequeueQueuedTabs(): Queue. Count: 0. 2015-08-19 15:02:18.471 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-19 15:02:20.629 Debug BrowserViewController.swift:257 loadQueuedTabs(): Loading queued tabs in the background. 2015-08-19 15:02:20.631 Debug DeferredDBOperation.swift:91 main(): Modified rows: 0. 2015-08-19 15:02:20.631 Debug BrowserViewController.swift:271 dequeueQueuedTabs(): Queue. Count: 0. 2015-08-19 15:02:20.634 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-19 15:02:34.907 Debug BrowserViewController.swift:257 loadQueuedTabs(): Loading queued tabs in the background. 2015-08-19 15:02:34.928 Debug DeferredDBOperation.swift:91 main(): Modified rows: 0. 2015-08-19 15:02:34.929 Debug BrowserViewController.swift:271 dequeueQueuedTabs(): Queue. Count: 0. 2015-08-19 15:02:34.930 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing.', This is also reproducible on my iPad Air (8.4.1) so I know this is not device specific.', Looks like ', Or ', Aaron: could you try this out? ', (In reply to Richard Newman :rnewman from ', ) ', Nice find! (In reply to Richard Newman :rnewman from ', ) ', Not able to reproduce on a 64-bit build.', If it's the content process dying, could we do some kind of hack where we check to see when it crashes then recycle the WKWebView instance? Like dealloc/realloc a new one ?", (In reply to Stephan Leroux :sleroux from ', ) ', Yeah, that's what we were discussing on IRC: the trick is figuring out when it's dead, and then making sure we can actually swap it out. My fear is that the process is still alive, just wedged: when the process is really dead (kill -9 in Simulator) we get a grey box and the content process restarts on demand. Knowing that this works with arm64 but doesn't work in a universal binary is frustrating, because as Stefan notes, we can't ship that. That does make me wonder if there's a build setting that will get us what we want, though, at least for modern devices.", Created ', ', PR: ', Listen for when URL is nil and reload URL request. Group reviewed during bug chat.', I too can still reproduce the issue on latest TestFlight.', There's a regression with this patch where after running into this state, any panel switching interactions automatically switch to the top-sites panel (e.g, trying to access bookmarks).", Created ', ', Pull request Call me crazy but: Through the whole "Kill the WebContent process" it seems as if what is actually happening is that sometimes the reloadFromOrigin() (or reload()) from the original fix from Brian) is failing - and then we just do nothing. I\'ve ensured that we always remember the last request (we were not remembering the lastRequest when we first restore!) so that if the reloadFromOrigin() fails, we re-request the URL. It _seems_ to work...... The listening to the URL nullifying seemed to do nothing useful here....', Comment on ', ', Pull request Looks reasonable to me! I feel like this could be the actual issue.', Merging this in for testing in a TF build.', With #38, I hit a couple tabs with the content process dying and reloading the page after an hour but did not hit the entire tab loss issue (original issue). I can test again overnight.', Lets test overnight and decide early friday morning.', I was able to reproduce this using TF 38. Waited an hour and opened the app and saw a blank tab. Luckly, I had Instruments connected to the WebContent process and when this happened a low memory warning happened and caused the WebContent process to restart (I think) since I'm seeing it reenter the foreground from the background. This also matches the logs that Aaron sent over where the device was generating Unknown logs (which are caused from low memory issues) and the logs are reporting that the WebContent process is taking up too many pages in memory. The other thing I found was that WebKit has an enum for error codes under WKErrorCode and one of the codes is for WebContentProcessTerminated. My hypothesis is that in the scenario where the WebContent process dies (due to memory issues), when we navigate to a new tab and call loadRequest, the failed navigation callbacks get called with an NSError that has this error code. We currently don't check for this code so I propose we try to catch it and show a UIAlertView if we hit it. If this is the case, then we know that: 1. The issue is being caused by the process being terminated 2. We have a reliable way of detecting that and acting on it The other half of the problem is figuring out how to recover from this state but I think ", might give us some hints.', WKErrorCode.WebContentProcessTerminated is interesting. Are we sure that is sent back to us because I think the current error handling code, through the two delegate methods, should in theory catch this and show an error page. Or are the delegates not setup when this error happens? We swap the delegates in and out based on the current tab, so maybe we never see it?', Created ', ', ', Comment on ', ', ', I've tried adding a check for it in our didFail delegate calls as well as some logging and reload. Might be worth trying it out in a TF build?", Looks like that patch didn't result in any logging or fixes for the problem. At this point, let's summarize: The assumption we've found is that the cause for the blank tabs/url is from com.apple.WebKit.WebContent process crashing. After some profiling, it seems that the crash is memory related as a low memory warning occurs before the resulting blank tabs on an iPhone 5 (32-bit device). Some workarounds we've tried include: 1. Attaching KVO on the WKWebView's URL property. The hypothesis is that when this process crashes, the URL property is set to nil and in turn we can listen to this change. The result is that the KVO handler is fired but nothing happens when handling the callback in the foreground. 2. WebKit has an enum for different error codes it can produce. One of the error codes is WKErrorCode.WebContentProcessTerminated. The hypothesis was that if the process crashed, we would receive a NSError from the WKWebView delegate method that had this error code. After adding some logging and a basic webView.reload call in the callbacks for didFailProvisionalNavigation/didFailNavigation, these logs were never triggered indicating that WebKit is not sending this error code back.", * ', * rdar://17358828', Memory exhaustion test case: ', Kills the content process in about 5 seconds on my 6.', I think ', did something good. Note that you have to replace the println() with NSLog() to see it in the Device Console Log in Xcode. It seems println only shows up in the debugger console, and when run in the debugger, the app EXITS when in low memory conditions it seems. Not sure why, tha could be a webkit thing that only happens in debug. I tested like this: Run Client on your device from Xcode. Kill it and start it up from the home screen. It can't run under the debugger or things will work in a different way. Then open a few tabs with apps like theverge and polygon and then run :rnewman's mem.html Without my patch: I see that didReceiveMemoryWarning is being called. I see that things die. Like WebContent and WebKitNetworking. The mem.html tab usually goes grey. When I move back to theverge it is grey and it tries to reload. But I get our error page with a 'internal webkit error' message. Or it does not reload at all. (Is this internal webkit error page a side effect of :sleroux's WKWebKitErrorCode patch? - I have never seen it before.) With my patch: Same as above, but the tabs pretty much always reload correctly when activated.", Created ', ', ', Yet another patch. Adds resetProcessPool to KVO listener.', Re: Build #41, iPhone 6 * After an hour, on access of tabs they grey out and reload. ** "URL IS NIL! WE ARE RESETTING PROCESS POOL"" is posted to log Emily are you able to reproduce this still on $latest Test Flight?', On my iOS9 device I still get a blank tab: I also get the warning in my logs: <Warning>: URL IS NIL! WE ARE RESETTING PROCESS POOL However, I now ONLY get a blank tab on restored tabs that are never opened, meaning, no WKWebView was ever created for that tab. So it cannot be that a processPool death on the webView for that tab is the cause for this. Spanner -> Works. Soz peeps. But by no means should that mean we should hold off on the RC. I am exite.', Comment on ', ', ', This landed.', dupe radar filed with Apple: ', (In reply to Emily Toop (:fluffyemily) from ', ) ', wrong link ^^', I filed a ticket under WebKit's bugzilla instance - maybe we can get some answers from that team for a workaround or a more exact cause: ", More people struggling with this: ', Will file a follow up bug to see if we can properly resolve this in 1.1 using new iOS 9APIs.', Going to resolve this as WONTFIX and I will file a bug about the new iOS9 APIs.', See ' 
id=1172954	 'This state persists until application is killed and reopened.', *** ', has been marked as a duplicate of this bug. ***', As mentioned in ', , this is due to the web server port changing when we resume. This should have been fixed by ', -- did this regress somehow? Also note that this isn't specific to about:home. Alternate STR: 1) Open a page in reader mode 2) Push the device Home button 3) Reopen the app 4) Refresh the page", Created ', ', Link to Github pull-request: ', Weird, this should have been fixed, ', was specifically about that. Reading the fix now to understand what is going on.', Comment on ', ', Link to Github pull-request: ', @thebnich You asked this before: ', My response was this: ', So there was a reason that we set it. I don't know if that is still relevant though. Needs some more testing I think. See what happens with this option set to `false` when you switch out and in the app when a reading mode or error page is open. Specifically, can you still reload those pages? And what happens to older items in the BackForwardList that still point to the old port?" 
id=1194564	 'Works for me, build #33 (iPhone 6/8.4.1). Have you updated to the latest build on TestFlight? What device? Any other steps to reproduce?', Created ', IMG_1072.PNG', Same hardware and SW version as you. I am making a bit of progress. The first two tiles always launch the articles when I try to scroll. Scrolling on their page is really hard then and the performance on my end is pretty bad. Just opening the first article and no reaction to any scrolling on the article page. I have normal fingers with human skin, no gloves and not using anything (pen etc) else to scroll.', Oh I bet I know what yo re running into as I can reproduce myself, yo re initiative a scroll from within a video div block. E.g, ", initiate a scroll from within that top video where it says 'Discover' and it won't scroll down. Stephan, I don't see Safari doing this. Is there something we should be doing here?", If you don't see that 'Discover' overlay on the video, tap play and back out and it appears. I don't know if this is what the reporter sees but I can reproduce this which might be a different issue?", I'm able to reproduce it in the Discover overlay you mentioned. Not sure what could be going on in this case. I do know that divs with overscroll soak up touch events which prevent you from scrolling if yo ve started to scroll horizontally for example but I'm not aware of any issues with video divs. We'll need to investigate this further.", I dont see that problem anymore (for now). Was it fixed?', Doubt it. The player was likely cancelling interaction events associated with scrolling. This bug needs a test-case showing the problem in comparison to Safari. From then, we can dig into what we are doing differently if anything.' 
id=1261851	 'Is there a set default passcode timeout (15 min?)? If not, should we add one?', We don't have a timeout period when looking at logins at the moment. We have a setting 'Require Passcode' which specifies a timeout period but is currently used as the 'remember' duration after a user entered their passcode. For example, if the user sets it to 15 mins and enters their passcode, they can access logins without inputting their code for 15 mins. We could use this interval as the 'timeout' period as well. This would look something like Immediately -> Locks logins on background N Minutes -> Logins are accessible in the background until timer goes off. If user returns back to app after timeout, they are required to enter passcode again. One UX concern is that the Touch ID modal is displayed on the previous screen. If we come back from background and the user is using Touch ID, would we show the modal on top of the logins or push the user back to settings and request the modal from there?", Created ', ', Link to Github pull-request: ', Note: This patch resolves both the logins being available while returning from background and the blurring of sensitive content while being backgrounded. Security++.', (In reply to Stephan Leroux :sleroux from ', ) ', Yes, the modal should appear if 'Immediately' has been chosen or the timeout has been reached, on top of the blurred view.", Comment on ', ', Link to Github pull-request: ', Enable auth on return if interval limit has been reached', I tested using a 1 minute interval inside the logins list page and the app prompts for authentication after returning from the background when backgrounded for > 1 minute. Are you seeing different behavior?', Comment on ', ', Link to Github pull-request: ', Looks good, just a few questions.', (In reply to Stephan Leroux :sleroux from ', ) ', I have mine to to "Immediately" and I can see my logins for .5s before the passcode prompt overlays. I have video that I can share privately (since they are my actual logins).', In the .5s are the logins blurred or are they unblurred? I can't seem to reproduce the issue where the logins are not blurred upon coming back into the app.", Moving to 5.0 as per discussion last week.', Forgot to re-NI', :sleroux \u2014 ', you can see the login for just a moment before the passcode.', Comment on ', ', Link to Github pull-request: ', I've moved the protocol extension into a subclass and extended the list/detail view controllers. With the previous approach, I found a bug where while on the detail page, the notifications were also being sent to the list view controller. Using the subclass approach also makes it simpler so I opted for that. Any issues you were seeing before :tecgirl should be resolved now.", Comment on ', ', Link to Github pull-request: ', LGTM. Nice work with all the tests! Having issues running them though...not sure whether that's just my build.", Comment on ', ', Link to Github pull-request: ', No delay! Woot!', Land it?', There's an issue with the tests and the new menu that's causing some problems. I flagged fluffyemily in the PR but I'll NI here just in case.", :sleroux : yes, there is a bug in menu whereby we are not checking that the number of menu items is 0 before we try and use it in a division. The main problem, however, seems to be that the test is trying to perform actions before a page has loaded. In fact, it seems as if the page never actually loads, so we are in a Loading state rather than on a webpage or a home panel. I think that needs to be addressed - I'm sure it never used to behave like that on these tests.", :sleroux: just added a link to a PR containing a fix for the menu issue: ', master c4b40b0a759e083ed284dfdb3ea46fa0081c75f5' 
id=1263584	 'Thanks for the report. This is also not reproducible in Chrome on iOS (WKWebView).', (In reply to Aaron Train :aaronmt from ', ) ', I just want to clarify. This also was not reproducible in old Chrome on iOS (so before their recent upgrade to WKWebView). It's interesting Chrome seemingly fixed it in the old UIWebView, but the fact it happens in Firefox and Dolphin does make me wonder if it's actually an Apple bug. I may be able to produce a test case for that, if necessary, and report to Apple, but certainly a workaround would be appreciated if one exists :)", This bug is a duplicate of ', , which we will release as part of iOS 4.0. Chris, we are also trying to figure out if this bug warrants a quicker 3.1 bugfix release. Can you give us an indication of urgency? Is using about:blank or frames without a src a very common technique? *** This bug has been marked as a duplicate of ', ***', Hi Stefan Apologies for the dupe report. I had a search but missed it as I was searching for the cause rather than the effect. The author of that report is actually one of our customers. I'm a developer of XenForo, they are a user of the XenForo software. This issue effects every XenForo customer so it has the potential to be fairly significant. That said, we've only received one report so far. Is this a fairly new bug? We were somewhat surprised we hadn't seen it reported before. In terms of your wider user base it can potentially be an issue with any rich text editor, but I think I've specifically only seen it in the Redactor editor (the old version, versions 8-10). Incidentally we've worked around it in XF 1.5.8 (eta 4-6 weeks away). Thankfully you append FxiOS X.X to the UA string so we can disable the editor for Firefox but obviously this isn't an ideal user experience, though better than literally nothing! Chris", Stefan, I made a comment on the PR that fixes this regarding maybe special casing javascript: too. Further, I have checked some of the other rich text editors, CKEditor, TinyMCE and Froala and none of them seem to be affected because none of them rely on the load event. It's true that they all tend to rely on either a blank src, no src, or about:blank / javascript: but they don't necessarily rely on the load event on the iframe. This reduces the scope to any application that implements the Redactor I editor which is a fairly popular choice. Chris" 
id=1278564	 'The troubleshooting link also leads to an article with no content.', One failed state (of how many?) that is reproducible. => Bookmark any site => Sync Now on your device => Sync Now on desktop => Modify the page title on desktop => Sync Now on desktop => Sync Now on your device This will yield 'Syncing has failed.'", I get "Sync is unavailable". The first time was after a long delay, so probably some progress was made syncing.', Just updated to v5.0.0 (10) and still having syncing issues', The message I get is: Syncing has failed. The link to troubleshoot still goes nowhere.', (In reply to Aaron Train :aaronmt from ', ) ', Can this case be fixed for 5.0?', I don\'t think so. I ran this scenario to see what kind of error was occurring and it looks like it\'s failing when merging bookmark changes. The reason being reported is the "Tree is unrooted" 1 . :rnewman might have some more insight as to why this is the case. 1 ', If the sequence in ', is accurate, then the steps will be as follows: ', This should automatically trigger a sync, uploading two records (the parent and the new record). ', This should download and merge. ', This should do nothing. ', This should upload a new version of the new record. ', This should do nothing. ', This should download the single modified record, which will only be value-different from a known merged tree record, with no structural changes. That should be fine. One of these things might be happening: * The initial addition/merge is not resulting in a sane mirror state, and so indeed the newly changed record isn't overlaying on the borked mirror -- the bug is earlier in the flow. * There's a bug in the tree extractor or overlayer. This bug is later in the flow. * The changed server record has actually moved, and the server is now inconsistent. This would happen if you picked a new parent folder for it during a sync (", ). This is a desktop bug. It should be pretty easy to see what's happening if this repros.", Failing test: ', Working on this today.', Created ', ', Pull req.', From the PR: The issue here is that a value-only change doesn't result in a remote (or local) tree. There was a sanity check in the merger to make sure that we weren't called with nothing to do, because upstream callers should short-circuit in that case. That check turns out to be too aggressive. This PR adds a test and makes it work by removing that check. We also need to remove an observational test elsewhere that verified the sanity check itself, and thus would now fail.", Comment on ', ', Pull req. Nice catch! Simple patch and test passes. LGTM!', master: d4eb0e9 v5.x: 0cb44c3' 
id=1232504	 'One more thing for - FFx-iOS_AppStore-iPadPro_es-CL_Fast-Phone-Website.png In the actual iPad image it says "A\xf1ade" but we typically use "Agrega" for es-MX.', Fast-Phone-Website and Sync screens updated for review: ', All screens renamed as MX!', Thanks for the review and approval. Mark it as fixed now.', Note: Exported assets from previous upload had some extra white space. They have now been revised to correct size: ' 
id=1181238	 'Think I know the problem since this also happens: STR: 1) Go to yahoo.com 2) Tap the search text field. 3) Tap the URL bar, cancel, then same error happens', Created ', ', PR', Comment on ', ', PR Still breaks in a number of other situations as pointed out. Rather than trying to hide the input switcher, we should figure out why the input switcher is breaking constraints to begin with.', Changed it!', Also, emily wrote the function so she will add some backup review', Comment on ', ', PR Nice fix! Looks good to me with a suggestion in the PR.', Comment on ', ', PR LGTM', *** ', has been marked as a duplicate of this bug. ***' 
id=1175792	 'Sounds like a fairly recent regression if we just noticed this now. Able to git bi-sect?', Noticed this after clearing private data, opened a new tab afterwards and the old URL from a previous page I had visited was there', Created ', ', Pull request' 
id=1160756	 "From brief look, this would probably just require adding new cases to the ReaderModeFontSize enum, and adjust the Reader mode's CSS to include styles for these (i.e. after the maximum .font-size5, have also .font-size6, .font-size7 etc.).", Created ', ', Pull request', Darrin/Robin, what do you think of these new font sizes?', I think all we would need to do here is expand how many steps we can are utilizing. Currently we are only using 4 (total), while Safari has 11 (3 down, 8 up from default). My suggestion: expand steps to 12: 4 down, 8 up.', 9 up would be one more than Safari. Wouldn't that make us better?", Removing ni.', :wesj actually, I added 1 extra step to the smaller size, so yeah, we're one-upping already.", Comment on ', ', Pull request Looks good, but I think we want one more size as mentioned in ', .', Robin, I am not sure how to exactly implement this. In the pull request, I am using these sizes in pixels for main body text (let's focus on those for main body text as they are the most important, I will be able to adjust the other 2 types of sizes based on the answers to questions below): size1: 14px size2: 16px size3: 18px size4: 20px size5: 22px size6: 25px size7: 28px size8: 31px size9: 35px size10: 40px size11: 45px size12: 50px The size1 to size5 were already there before the PR. I left the default to be size3. So now we have one default size (size3), 2 steps down (to size1), 9 steps up (to size12). I was thinking adding one size smaller than size1 (e.g. size0), having size of 12px or 13px, and moving the default size to be size4 instead of size3. This would make us have the required number of steps up and down. It would make the default font size ~10% bigger though (from 18px to 20px). So I was wondering if you are OK with this, or have some other suggestion on how to achieve the suggested number of sizes/steps. Thanks.", The default body text is spec'd to 16px (1em), so how does the below work? (body copy sizes only, we can also figure out what the h1 sizes are) 12px\t0.750em\t 13px\t0.813em\t 14px\t0.875em\t 15px\t0.938em\t 16px\t1.000em\t(baseline) 17px\t1.063em\t 18px\t1.125em\t 19px\t1.188em\t 20px\t1.250em\t 21px\t1.313em\t 22px\t1.375em\t 23px\t1.438em\t 24px\t1.500em", Boris, where are we at with this?', Hi Robin, apologies for being unresponsive lately. I will finally get to a response during the next 2 days.', Hello Robin, the sizes you proposed, that is 13 levels (1 default + 4 smaller + 8 larger) ranging 12px - 24px in body font size, are in my opinion insufficient w.r.t maximum size. I have no problem with the number of levels or the smallest size, but the biggest size is IMHO too small. You are proposing maximum body (.content) size of 24px, in the pull request I originally proposed 45px (i.e. roughly twice as bigger) as that is comparable to the maximum Reader body font sizes Safari uses (and which is beneficial to people who have some more serious visual impairment, which was my primary motivation for this, but I could imagine this might be useful even during some presentations of content to public). I updated the pull request attached to this bug to have new code that: - is rebased on latest master - reflects the total number of 13 size levels you suggested (as opposed to 12 I originally proposed), including 4 steps down / 8 steps up from the default - respects the 16px default body font size - stipulates a 48px maximum body size (slightly bigger than Safari\'s maximum, and is roughly the threshold that with any bigger size, it would no longer be an exception that one word does not fit on the width of a screen of iPhone in portrait mode) - stipulates geometric series (i.e. each next value is the same multiple of the previous one); specifically with size5 being 16px and size13 being 48px, I got that the size of each level should be ~14.7% more than the previous level. I think this "feels" more natural than increasing linearly (i.e. by a fixed number of pixels each level), but I could be wrong. The results (after some adjustment for 2 smallest sizes, and one overriding of rounding in size12) for the body size are: size1: 10px size2: 11px size3: 12px size4: 14px size5: 16px size6: 18px size7: 21px size8: 24px size9: 28px size10: 32px size11: 37px size12: 42px size13: 48px I am attaching a screenshot of each size (source: ', ) I am also attaching a Numbers table where I calculated the sizes (you can modify the "Anchors" table, i.e. which 2 levels have fixed values and which are those, and the "Body sizes" table recalculates). I also left there values for hypothetical levels beyond 13 (see note about iPad below) for an idea how the sizes could evolve, or to enable experimenting with smaller changes between each level (i.e. to anchor size5 @ 16px, and size17 @ 48px). (both attachments will be in follow-up comments, as they can\'t be attached to this comment directly) Could you please tell me what do you think about these body sizes? Would you like me to use different sizes? I should also note that Safari makes the last 2 steps a big increase (i.e. while other steps increase by approx. 1-2 px, the last 2 steps both increase by 8px. But I find no reason why we would want to emulate that behavior as well. One last thing: I think it would be proper to have even bigger maximum size on iPad (to use the larger screen estate), but I propose not to complicate things with it now and to leave it for a follow-up bug. I am just mentioning it in case you would like to somehow consider it already now. I have modified the other 2 size types (1 for headings, 1 for domain/caption/credits), but only to the extent to bring them up to date with your recent changes (i.e. to make size6 of "h1" bigger than the new size5). I think that, as you suggested, it\'s better we work out the body sizes first and then specify the other 2. Looking forward to your feedback, and once again sorry for the delay in my response.', Created ', Reader View body sizes screenshots Screenshot of Reader View's body size for each of the 13 sizes. (source page: ", )', Created ', Reader View body size calculation Numbers table I used to calucate sizes of Reader View\'s body font, and that can be used to experiment with them. Modify entries in the "Anchors" table, and the sizes in "Body" table update.', I think the table you worked out is great. I did only intend for 12 steps, but see now how it became 13. The rest look good and scale nicely. I am working on the CSS for iPad right now, and would like to take a look at this on iPad. Do you have a branch I can test with? Thank for you for your work on this!', (In reply to Robin Andersen :tecgirl from ', ) ', Yes, branch accessibility-', -readermode-bigger in my fork of firefox-ios on github (i.e. dusek/firefox-ios): ', Also there is a pull request for exactly this branch: ', Also on iPad, I think one way to approach it would be that we could simply expand the number of sizes (i.e. add size14, size15 up to size21 as suggested above) (simply add them to the ReaderModeFontSize enum and then define them in the CSS), and have the Swift code return different value for ReaderModeFontSize.isLargest (it could return Size13 on iPhone and Size21 on iPad).', Over to st3fan for landing. Robin, chime in if anything more is needed from you!', I have merged this. If iPad specific changes are wanted then we can do that as part of ' 
id=1266628	 'Created ', SC-QWERTY.png', Created ', SC-10Key.png', Created ', Japan-Kana.png', Bingqing, can you tell us if this is a regression in 4.0? Is there anyone on the Beijing team who would like to take this bug on or at least investigate at a more technical/debug level? Would this block the 4.0 release? (We have about a week to deal with this then)', Marking as 4.0 Blocker for now.', (In reply to Stefan Arentz :st3fan from ', ) ', This issue can be reproduced on 3.0(11), so I think this is not a regression in 4.0. ', @DongShengXue is investigating now. ', I don't think this block the 4.0 release, but it would be great if the fix can land in 4.0.", I spent some time researching this. It only duplicates the first character and if you delete the character it doesn't reappear the next time you type. It also only happens if you have a url already in the bar. In an empty URL bar it doesnt occur.", The issue occurs because of the multistage nature of Chinese/Japanese keyboards. When performing multistage input the UITextField will hightlight text to show that it is still editing this text. But firefox will sometimes manually edit the attributedString to remove the hightlight (to remove autocomplete) and sometimes this happens incorrectly. The issue happens here ', I'm stumped on how to fix it though short of detecting the keyboard type.", Created ', ', Pull Request I ended up fixing this by calling "removeCompletion" earlier than usual. The issue is that the system is calling "setMarkedText" and if we call "removeCompletion" there it removes completion on what the system is trying to highlight for multiInput. By calling "removeCompletion" earlier in the "removeCompletionIfRequiredForEnteredString" when the system calls "setMarkedText" it doesnt try to remove the multiInput text.', (In reply to fpatel from ', ) ', The patch fixed some cases of this bug, but not all issues. For example, I input "bai" in address bar, the "du.com" is the hightlight text, then I tap "d" on keyboard, the result is two "d" in address bar.', Created ', ', Pull request ', - Duplicate characters will be input when using original Simplified Chinese and Japanese keyboards', ', Detecting the keyboard type, removed hightlight text in edit mode when the keyboard is "zh-Hans" or "ja-JP"', Comment on ', ', Pull Request Removing review since it sounds like there are still some issues to work out with this approach.', Could you please attach a screen shot as an example. I'm having trouble understanding exactly how this occurs.", I've update the PR. Can you try to see if it works for you now. I've attached a video describing what I think you were doing. Please let me know if I got it right ", (In reply to Farhan Patel from ', ) ', Farhan, my understanding is that yo re trying to reproduce the issue that DongShengXue mentioned in ", , right? If so, I want to say that\'s the problem when using the Japanese keyboard - Kana. But it\'s a little different from what I saw when I used Chinese keyboard. p.s. I guess those two problems are caused by the some reason. Here are the steps to reproduce and the results ( using Chinese keyboard ): ---------------------------------------------------------------- 1. Launch Firefox and goto a newtab 2. Change the keyboard to Simplified Chinese - Pinyin(QWERTY) 3. Type a url in the empty address bar (e.g. google.com), and stop typing at "google." ==> The url will be auto-completed, and "com" are full selected 4. Continue to type the letter "c" ==> Two "c" have been input. The url now is like google.cc 5. Change the keyboard to Simplified Chinese - Pinyin(10key) 6. Type a url in the empty address bar (e.g. google.com), and stop typing at "google." ==> The url will be auto-completed, and "com" are full selected. 8. Tap "ABC" just once. ==> The number "2" and letter b have been input. The url now is like google.2b', Created ', candidate-1.png (In reply to Farhan Patel from ', ) ', About your patch, here is the problem. 1. Change the keyboard to Simplified Chinese - Pinyin(QWERTY) 2. Type "bai" in the address bar ==> There are some candidates of Chinese characters above the keyboard, and "bai" in the address bar are all selected. Pls refer to the attchment "candidate-1.png" 3. Tap "Go" ==> "bai" have been input into the address bar without being selected. 4. Continue to type "d in the address bar ==> Actual results: ----------------- NO candidates of Chinese characters above the keyboard. The characters have been input into the address bar immediately without being selected. Pls refer to the attchment "candidate-2.png" Expected results: ------------------ There should be some candidates of Chinese characters above the keyboard. Additional info ------------------------------------ When using Chinese - Pinyin(10key) and Japanese - Kana, the candidates can be shown correctly. Pls refer to the attchment "candidate-2.png"', (In reply to Bingqing Li from ', ) ', Sorry, it should be "candidate-3.png"', Created ', candidate-2.png', Created ', candidate-3.png', (In reply to DongShengXue from ', ) ', Farhan, the patch upload by DongShengXue fixed those issues. Could you help to review this patch?', I just wanted to use a patch that fixed the issue in a more generic way. The issue might occur with other keyboards as well and adding a specific check for Chinese/Japanese was something I wanted to avoid if I could.', I see the issue now. I think we might just go with your patch for now. and then we can work on a more permanent solution for later. Thanks for all your help tracking this down!', master 4c84ffd57f9f952bc6b1fb853f1cd8227d2de1d9', Filed follow up bug for finding a more generic way of handling this: ', v4.x ff42ddd', *** ', has been marked as a duplicate of this bug. ***', Hi Farhan, The patch seems only for ja-JP and zh-Hans, but it also happens on zh-Hant platform. (See ', )', Doesn't look like we're fixing what's left of this for 4.0 thus not a blocker as it shipped in 3.0. Let's open a new a bug for fixing what's left.", The new bug I opened should support handling all locales - not the hardcoded ones ', .' 
id=1231666	 '(and reproduced over home WiFi)' 
id=1222459	 'Steps to Reproduce (New profile, launched in landscape) i. Visit ', ii. Visit Top-Sites iii. Delete ', iv. (Firefox Help and Support becomes editable) \u2013 delete Firefox & Support * A wild Firefox & Support appears * v. Continue to delete Firefox & Support * A wild Firefox & Support appears * Rotate device back, see old Reddit tile appear Nominating this to major because user deleted data seemingly re-appears. Reproduced this on simulator', The hardest problems in computer science are cache invalidation and cache invalidation.', Tested on the release build 1.0.1(44) and the issue could not be reproduced', That's 1.0.1", This is also reproducible after a Sync and deleting the last top-sites in the grid', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Bootiful.', Merged ca9443f7878baad374cb1d565ea9c19d537468c5' 
id=1166740	 '* ', Created ', ', PR ', Comment on ', ', PR ', Marking this patch obsolete in favor of wes's patch to back out the gesture recognizer: ", Marking resolved as ', 's patch has been landed." 
id=1177089	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1268298	 'I just tried this with a profile containing 1000 logins generated from Alexis to add some variety and I was unable to see the spinner freeze and the UI seemed to remain responsive. I have a feeling that it might not be related to the number of logins but maybe an issue with parsing an interesting URL (no scheme prefix, special characters, etc)', Yeah, I also suspect it's not related to the count as it would have eventually worked after some number of minutes. How about the following less common URIs that I have in my profile: * chrome://FirefoxAccounts * ", * ', * file:// * or any of the above with `httpRealm` containing spaces or hyphens I did have an invalid hostname for one of my logins "', " (missing the square brackets) because I was testing stuff before fixing ', . New invalid IPv6 entries shouldn't appear.", (In reply to Matthew N. :MattN (behind on reviews) from ', ) ', I deleted that invalid origin, forced a sync on both desktop and iOS but I still get the spinner indefinitely.', After some profiling, it looks like it might actually be the number of logins. The code for sorting the logins based on subdomain/domain/hostname is dreadfully slow. I was able to replicate the UI freeze/spinner for about 6 seconds before it finished using a profile with ~200 logins on my iPhone 6. I'll look into optimizing that and push up a patch to see if that resolves the 'infinite' spinner.", Created ', Link to Github pull-request: ', Part 1 fixes the crazy sortInPlace I was doing after inserting a _every_ login into a section. Part 2 optimizes it further by moving the section computation into the background to keep the UI responsive while logins are loading. First fixup commit was to resolve an issue with setting the dataSource's data in the background while calling reloadData on the main thread making the data source out of sync/race condition-y. Second fixup cleans up some old Selector syntax that was left over from a bygone era...", Comment on ', Link to Github pull-request: ', Yikes, can't believe we were sorting the sections for every single login. Much better!", master 4841728e468c395544f20b248a6ac426233333bd' 
id=1194567	 'Good find.', Created ', ', Link to Github pull-request: ', Probably doesn't need to be a Security-Sensitive Core Bug since we won't ship v1 without this fixed. I don't have permissions to toggle the checkbox, though.", Let's wait until it's fixed and TestFlighters/self-installers are upgraded. Small amount of harm, but nonetheless.", Comment on ', ', Link to Github pull-request: ', The code looks fine, but from the patch alone I can't tell whether this (partially or completely) fixes the bug. Two substantive questions on the PR.", Comment on ', ', Link to Github pull-request: ', Great catch and the fix looks good. Does this same problem apply to any of the other scripts? Are there more places where we use browser.url instead of mainFrame.request.url?', (In reply to Stefan Arentz :st3fan from ', ) ', Not that I've looked at so far, but I'll keep an eye out." 
id=1231940	 'Kar sees this on other sites', Does the page jump up and down a bit in this case?', Very slightly, yes.', dupe?', Don't think so. Brian, can you see what events trigger on my report above?", Trying to repro, I found that single taps always open the link for me (AaronMT confirmed this too in IRC, so maybe something changed since this was filed). I still do see the cell highlight/viewport flicker reported here. Long pressing to show the context menu doesn't work, though. Removing the mouseup listener (", ) fixes this, but it doesn't fix the highlighting/viewport issues. Since the single tap link issue is no longer reproducible and the context menu is mostly fixed by ", , that leaves this bug to just be about fixing the highlight and viewport quirks.', Steph, do you know the dupe about viewport jumping?', Created meta issue tracking related viewport/url issues.', Tested on iPhone 7 (10.0.3) and iPhone SE(9.3.2). The issue is not reproducible on master 1bc8bb71f.' 
id=1258983	 'Is this a WebKit bug? If it is, lets file a bug with them?', Triage: won't fix." 
id=1094306	 "I'll take this and do it as my first delve into the new code base.", In the medium term I plan to kill all "database"-ey concepts altogether, at least from the viewpoint of UI code -- giving the front end direct access to a database just doesn\'t make sense for sync (particularly for queued insertions or writes). Thinking in terms of "models" that expose something like a cursor is fine, but even that cursor will be more sophisticated than just a list of records.', Pull request ', Created ', ', Pull request', This was merged: ' 
id=1127053	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1189915	 'Created ', ', PR making up for lost time jumping from a plane LOL', Comment on ', ', PR Two comments on the PR.', Comment on ', ', PR 1) The webview loads with no way to go back\u2014my biggest issue ATM (IDC what Chrome does). The interaction feels weird that it loads in the browser with the URL bar and bottom nav. We could either enable the back arrow to go back to Settings or open in an overlay with a close x . 2) The License could use some formatting. a. \'FIREFOX FOR IOS\' should be \'Firefox for iOS\' b. "Licenses". Let\'s find a way to break them up, endless scroll is endless.', Ignore the above comments, they should have gone on ', Comment on ', ', PR The user has no way to go back! So they're left with using the tab tray to navigate elsewhere. If possible, enable the back button.", Both Licenses and Privacy Policy should use the same page-loading technique that Sign In uses. Should be a five-minute fix, Bryan.', Comment on ', ', PR Left some additional comments on the changes and animation glitch', Comment on ', ', PR Just one comment about the string but other than that LGTM!' 
id=1140007	 'Created ', ', PR: ', This patch adds an InfoPlist.strings to the project where the value of the NSLocationWhenInUseUsageDescription field in our Info.plist can be localized.' 
id=1151038	 'This icon crashes no matter where I hit it from.', This worked fine on my iPhone 5S.', I thought maybe it had to do with my Bluethooth keyboard on my iPad, but it still crashes when I turn Bluetooth off.', I don't see any paper airplane icon on the page.", It's the Sharing control at the bottom of the iPad screen.", Ah, we changed that icon on newer builds. This should be fixed now. *** This bug has been marked as a duplicate of ', ***' 
id=1214673	 'Better yet, all bookmarks one adds are not tappable.' 
id=1281939	 'i tried this on my phone right now and it works? what device did you try this on? is this already fixed?', I'm having trouble replicating it now, too. I'll keep an eye out for it \u2014 it seemed to be happening all the time, when I encountered it. It was on an iPhone 6s (simulator).", I've been testing these dialogues extensively, and I haven't seen it since, so I think it's likely to have been a simulator graphical glitch. We can always reopen the bug if it appears again." 
id=1171985	 "Any ideas, Nick? I think I've seen this myself.", (In reply to Richard Newman :rnewman from ', ) ', My guess is this means that we got the sign-in bundle from the fxa-content-server and started to sign you in, but there was a problem. The keyFetchToken is single use, so we can't try again. To get a new keyFetchToken, we ask for your password. I have seen this when you race to advance the state machine twice; somebody will win the race to use the keyFetchToken first; the second person will fail to get keys and go back to the beginning. We need to (and I thought we did) advance the login state machine upon getting the sign-in bundle from the fxa-content-server.", *** This bug has been marked as a duplicate of ', ***' 
id=1238185	 'Is Settings > Firefox > Debug Settings | Skip Session Restore off?', "Skip Session Restore" is off. I haven\'t changed any of those Debug Settings. I didn\'t even know they existed! :)', This should be fixed in the next update. *** This bug has been marked as a duplicate of ', ***' 
id=1226644	 'Created ', what I see in Safari', This is reproducible on other sites with applications as well. E.g, yelp.com, on 'Open in App' it wants to open another iTunes link (i.e, itms-apps://itunes.apple.com/app/id/n)", -canOpenURL: failed for URL: "twitter://user?screen_name=jhugman" - error: "This app is not allowed to query for scheme twitter" -canOpenURL: failed for URL: "itmss://itunes.apple.com/us/app/twitter/id333903271?mt=8&uo=rwoiah" - error: "This app is not allowed to query for scheme itmss" Also: -canOpenURL: failed for URL: "soundcloud:stream?adjust_reftag=c1yClFss5d1Ym" - error: "This app is not allowed to query for scheme soundcloud" Testing if we can openURL without testing for canOpenURL.', openURL without checking canOpenURL is madness. The best way for us to solve this is to collect various schemes together and register them in LSApplicationQueriesSchemes, though this may not be popular in review. It's certainly not ideal/scalable. :sleroux \u2013\xa0what say you?", A repository of schemes: ', On one hand, maintaining a list of schemes that we can open in LSApplicationQueriesSchemes is annoying but on the other not having some of the popular websites open in their native apps (Facebook, Twitter, etc) is a pretty bad experience. I'm not sure whether we want to use the large handleopenurl.com list or create a more curated version of it. Not sure what security issues there could be with importing all of the ones in handleopenurl.com", Suggestion: The immediate problem here is built-in schemes. We can worry about third party schemes later. We don't need to register the 'Apple' schemes in LSApplicationQueriesSchemes. The list of Apple schemes is known and we can simply hardcode it in the app. That will make at least things like tel/sms/imessage/facetime/itmms work, which I think is priority #1.", By hardcode I mean in the Swift code. Not in LSApplicationQueriesSchemes. So we would recognize them and simply openURL() with or without a confirmation dialog (based on the scheme - for example for tel: we do show a dialog)', This bug is specifically about third party schemes and doesn't need to touch swift. We already look after the Apple defaults in ", I don't think handling all the schemes in handleopenurl.com is feasible, yet alone a good idea, however I put it there for reference. There's a tension here between special casing a few of the larger apps' schemes, for the benefit of user experience, and supporting the web and web standards by not supporting non-standard schemes. My preference is to go with user-experience, but I think I need some more data as to which schemes look for.", (In reply to James Hugman :jhugman @jhugman from ', ) ', Are you sure, because the title says "they want to open iTunes links" and Gavin mentions "Opening itmss" - which is an app store link scheme. I don\'t think we cover all the different app store links well right now. Maybe it used to work on iOS8 where canOpenURL() worked without restrictions. But on 9 we need a much more complete list of iTunes App Store (and Music Store, etc.) links built in the app. Lets keep this bug specific to app store links and open a new bug for third party schemes. This bug is an easy one to fix (we need to recognize the app store schemes) and third party schemes is more complicated.', Gavin is looking to open the twitter app. Aaron is trying to open the Yelp app. They're getting the dialog only after `canOpenURL` has returned `true`, so if they're seeing an itunes scheme (itmss or itms-apps) in the dialog, we already know we can open it. The 'Open in app' button seems to try successive URLs with different schemes; twitter, then itmss, then http, and the user gets the dialog for the first one we know can open externally. Renomming for triage.", (In reply to Stefan Arentz :st3fan from ', ) ', "They want" as in "tapping the link ends up trying to open itmss links", not "the user wants...". As mentioned in ', , this is about the twitter.com "Open in App" link not doing the right thing.', Created ', what I see in Firefox now (build 1310) Behavior seems to have changed now. I now get a kCFErrorDomainCFNetwork error 305 page when clicking the Twitter "Open in App" link.', Created ', ', Link to Github pull-request: ', That PR fixes the Twitter issue for me. As James mentioned, that\'s obviously a Twitter-specific solution, and probably you\'ll want to expand this to other popular schemes as well (Facebook, etc.). But I think properly handling Twitter/FB links is a baseline prerequisite, and we shouldn\'t let a more generalized solution block "making shit work".', The "end up opening itunes links" behavior is probably site-specific (lots of sites try timeout-based redirects to the app store to handle the "app not installed" case).', Comment on ', ', Link to Github pull-request: ', Feedback left in PR.', Created ', ', Link to Github pull-request: ', Added comments, and questions in the PR.', Prepared ', to test in Safari.', *** This bug has been marked as a duplicate of ', ***' 
id=1184233	 'Marking as tracking+ since all dependencies are also tracking+', I created a meta bug to track these issues as I'm finishing up a patch that will resolve the core issues with the animation that manifests itself through these bugs.", Created ', ', PR ', See PR for commentary. I'd also like to add some UITests for the navigation changes.", Comment on ', ', PR ', Hey Aaron, I was wondering if it would be possible to check a build of this patch for any regressions since it's a pretty large patch. Let me know if you have the bandwidth.", (In reply to Stephan Leroux :sleroux from ', ) ', Mentioned in IRC but also mentioning here, one issue I'm seeing with ", applied is that with if you close a tab (e.g, the 5th, of 5 tabs open), the remaining 4 bounce down kind of janky (the same applies to landscape). When that happens, the position of the top row of tabs is set as a lower Y-axis than it initially is when you open a new tab that overflows the overall position causing the top tabs to be partially drawn off-screen. However, the animation whilst closing a 7th tab brings down 4 to the bottom quicker but the top two tabs come in a tad slower. Tested this on my iPhone 6.', Thanks for giving this a test Aaron. I notice this issue on the test flight build 26 so I don't think it's specific to this branch. I'll file a separate bug for it.", Bug for issue found: ', Comment on ', ', PR ', Looks good! I still wish the transitioning code was a little more split up into lots of little functions instead of two huge ones, but thats a nit.', Thanks for the review Wes - I'm going to spend some time cleaning up these methods into smaller ones that DRY up the code a bit before merging.", Merged' 
id=1109647	 'I hope to have this done by tomorrow. Got most of the UI in it, just need to get the animation of progress and test in other devices.', Created ', ', Pull request Attaching Chuong's PR. As mentioned there, we should probably wait until tab support lands before tacking more stuff onto browser.", New pull request now taking into account for the multiple tabs ' 
id=1263658	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1217858	 
id=1229215	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1153618	 'Is this something we should address now?', Yes we need to fix this or at least make it easier for contributors to deal with this. It is all complicated. It requires people to setup profiles in their developer.apple.com account and make changes to the project. We can facilitate *some* of this to make it easier I'd love to do this but right now it is low priority. It would be a good contributor bug though. Maybe just documenting things is good enough for now. That could also be a contributor bug if we don't have time for it soon.", Here is a first iteration of some documentation. Work in progress but should be complete. I just followed the steps for 'Run on a device' and it works. I'd love to understand the pain points and what to explain in more detail. ", Minor issue: "Note: When we mention YOURREVEREDOMAIN below," Should be "Note: When we mention YOURREVERSEDOMAIN below," (Missing the "S" in "REVERSE") Instructions are pretty straightforward. I actually used Xcode to create the provisioning profiles which was easier for me than doing them manually... Perhaps a bit of description about *why* the different profiles/entitlements are needed (and roughly how they are set up) - so one could create them with whatever naming they like? (just a suggestion)', Nathan can you explain how to create the profiles using Xcode? Did Xcode offer you to Fix things and you simply let it do that? Did you still have to change the bundle identifier or did Xcode create wildcards? (I'm pretty sure we tried that in the past and got into trouble with the app extensions not working that way. If that has improved recently then maybe that is a better way to do this?)", I just used the "Fix" link that Xcode provided. I created the App Groups and the App IDs - and I changed the values in the Fennec.entitlements and appropriate Info.plist files. Then, the "Fix" links worked for me within Xcode itself. It\'s possible the app extensions aren\'t working. Should they be extensions *from* the firefox app *to* other apps, or *from* other apps *to* the firefox app? (i.e., I don\'t know how to test that extensions are working...all I know is I was able to build, deploy to my device, and open a website)', The extensions should show in both Firefox and in other apps like Safari. You do have to enable them first in the Share Menu. (Just flip the switch in the More... section)', Going to close this and merge the BUILDING.md docs. Can be a work in progress.', I found the documentation has outdated for the introducing of ViewLater. I have updated it, would you like to merge that? ', Done. Thanks!' 
id=1175897	 "I don't see it twice on my iPhone 5s, only unlocalized.", There are two Send Tab strings: Extensions/SendTo/Info.plist Extensions/SendTo/SendTo.strings The first is the name of the Send Tab action in the Share menu. The second is the title of the modal view that shows up when you select the Send Tab action. I can provide screenshots of both. Let me know. I'm looking into why this is not appearing localized.", Not sure what the question is. I just tried with simulator: * If I import the Italian XLIFF file in XCode, I have one Send tab and it's perfectly localized. * If I import using scripts/import-locales.sh, same result. But strings on SVN changed in the last week, so not sure if that's the reason it got fixed from the current Testflight build.", :flod I am confused. What did you see correctly localized? The title of the dialog or the title under the button/icon in the (system-provided) Share menu? (I'm pretty sure the action title in the share menu is not localized - i almost have a patch for that)", Created ', Simulator screenshot Both if I understand the question. The only weirdness is the first device being identified as $(MOZ_BUNDLE_DISPLAY_NAME) in the list of devices', Created ', ', PR: ', TL;DR The Send Tab action title is now correctly localized when presented in the system-provided Share sheet. This patch fixes a couple of things: * We never correctly converted Info.plist sections in the XLIFF to a `.strings` file. They would end up in the project as `XX.lproj/Info.plist`, which is wrong. They are now written to `XX.lproj/InfoPlist.strings` so that the strings are correctly picked up by iOS. * The `xliff-cleanup.py` script was broken and I think it never correctly processed `Info.plist` sections anyway. * The l10n scripts normally ignore the `CFBundleDisplayName` but we now make an exception if that key is found in `Extensions/SendTo/Info.plist`', I don't understand why that worked for you. It should not work. It most certainly did not work for me in Dutch :-/", This patch also makes sure the NSLocationWhenInUseUsageDescription key is output to Client/XX.lproj/InfoPlist.strings. I don't think it correctly worked before.", (In reply to Stefan Arentz :st3fan from ', ) ', Are those strings translated for Dutch? Maybe it\'s same weird XCode caching from when I tried to import the file from within XCode (but I also always run "git clean -fd" in the repo).', Comment on ', ', PR: ', Freaking XCode cache... Did Product->Clean and the button was in English. Patched version works as expected.' 
id=1254548	 'Works for me. Do you have concrete steps to reproduce with a particular site?' 
id=1120776	 ' handles showing the default search engine as the first list item. Let\'s make this about using the default search engine when pressing "go".', Created ', ', Pull request', Comment on ', ', Pull request Some comments, but nothing to hold this up.' 
id=1196132	 'Created ', ', Pull request', So oddly enough, this fixes this crash: ', I did some debugging and it looks like calling the beginRefresh + refresh from viewWillAppear will randomly crash the app when switching between panels fast. Not exactly sure the reasoning but this will fix it!', Comment on ', ', Pull request LGTM - I'll follow up with a patch that fixes the crash issue", Merged' 
id=1134231	 " Power button and home button same time to capture an iOS screenshot. I don't want to shake (non-standard in Apple) my device to file bug reports. It's a $600 device that will crack on the hardwood. ", You can upload an attachment from Camera Roll, but really this should be done on a computer to have a better detailed bug-report.', yes, we know *how* to take a screen shot, but it's how we get that screen shot over to us in a way that has low barrier to entry (low friction) is the intent here! I believe Darrin or Stefan mentioned that Apple already supports shaking, which is lovely. If there's another key combination that we can use that doesn't involve physical violence against your device, I'm all ears - although I suspect a nice little 'shake' would do nicely. uploading into bugzilla from your device is a HARDSHIP. I've been forced to do it a few times, and I hate it. We just won't get good feedback unless we can lower that barrier to submit, hence trying to find an alternative (fine with email as we can have non-QA eyes watching the email address for action).", Hey there, As of iOS 7, the application can now listen for screenshot events: ', . A good starting point for this feature would be to show the new email screen with the screenshot attached and the subject field prepopulated when this notification gets fired. It would also avoid the need to knock sense into your phone :)', Patch/PR Submitted: ', Love the concept and the idea. BTW (and I don't read code as a matter of course, so asking!) - I presume that this only happens when you take a screen shot within the Firefox client app only and not when you take a screenshot outside of the app? Thanks!", Yup that's correct - it will only work while within the Firefox client app.", beauty!', Stephan this is a great patch. I think this is a good start. Can you conditionally compile this code in like this: ', (MOZ_CHANNEL_AURORA will not be set yet, but I'll merge that later today - should not matter though) S.", Created ', ', PR: ', Thanks Stefan! I've updated the PR with the MOZ_CHANNEL_AURORA Flag and rebased your changes off master.", I merged this in. Thanks you so much for the contribution.', Follow-up item at the end of the PR. Posting it here so it doesn't get lost: ", ', I already changed the email to our official feedback email that we gave to our internal testers.', Can we dynamically pull in the build # into the subject line so it corresponds to the correct build? If not, let's just remove the version number from the subject line so no one gets overly confused :)", It already does. The subject line reads: Feedback on iOS client version v1.0 (5) S.', aye aye aye. right. Thanks :/' 
id=1168501	 'We want this for history sync. Necessary: backoff!', Created ', ', Pull req. This is on top of basic backoff handling, earlier in the PR. We kick off a 15-minute timer when the app is foregrounded, and stop it when we go bye-bye. Backoff handling -- or no account, or any other NotStarted cause -- will cause the sync to short-circuit fail with no work being done, so this timer is very cheap; this is a little simpler than twisting together both the app lifecycle and account state.', Comment on ', ', Pull req. LGTM. Just added a comment about the weak AppDelegate.profile, which I think may not be correct or at least not do what you would expect.' 
id=1146356	 'The more I try and the less I understand what XCode does. 1. I opened the project in XCode (I also run git reset --hard origin/master;git clean -fd to make sure there were no extra/changed files), and exported localization (only English is available at this point). Then I compared en.xliff with my file, and removed all extra strings/files. This is the resulting change ', 2. I then imported the localization in XCode. I didn't get any window to warn me about missing strings. 3. At this point I go to export, and find a bunch of untranslated strings that were not in the English file when I exported it in #1. Right now I restored again my previous version ", Is someone able to reproduce this and, more important, explain what's going on?", I will spend time on this tomorrow to figure out what is going on.', I think it makes sense to cancel tomorrow's strings export to localizers so that this can be sorted out. No sense in generating a possibly broken export and exposing it to 31 locales.", I think we need to find a way to update localized files soon, especially if we ask people to test l10n in dog-fooding builds. ', Since XLIFF files are "self-contained", this dashboard works on the assumption that all needed strings are inside the file, it doesn\'t compare each localized file to a reference (en-US). In other words, it currently says that there are 27 complete locales, but there are actually 3, 2 if we don\'t count en-US. If needed I can rewrite the system to compare localization to en-US, but it would be better to actually add the missing strings to each localization. Thoughts?', I would like to close this bug because I think we got most of this covered with the scripts and workflow we created in the past month. If anyone objects or thinks there is something that needs to be done on top of that work, please re-open.', Reopened this bug so that we can implement the final step of a more automated way to export strings and update all locales. Notes from ', Add new strings to en-US on SVN (current process) * (st3fan) exports en-US and commit to SVN - ', * (flod) copy en-US to /templates and run "clean-xliff.py templates" to remove English translations (file will be used by Pootle) * (flod) run update-xliff.py to update all locales from en-US (except \'pl\')', Just for reference this is the current bash script I use # Move in the repository cd ~/mozilla/svn/l10n-misc/trunk/firefox-ios # Copy en-US file in templates cp en-US/firefox-ios.xliff templates # Clean up the file in template /home/flodolo/mozilla/clean-xliff.py templates # Update other locales (script excludes pl and en-US) /home/flodolo/mozilla/update-xliff.py .', Created ', PR: ', This patch automates all the steps needed to export strings.', Comment on ', PR: ', It looks good but I can't make it work locally, it fails (timeout error) on both my Macs on ", It might just be my system, but it would be good to double check with someone else. The diff is always pretty big for Pootle locales (we clean up the messy export), but no need to worry. The best way to double check a diff is to compare 'it' (there shouldn't be changes, unless there are last minute commits with strings) or other locales at 0 strings missing.", Reopening, hopefully one last time. I missed that the order of called script was different from the one I suggested. The way it currently is, it adds target-languages="templates" to the template file. ', merged ' 
id=1233183	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Cool beans.', Comment on ', ', Link to Github pull-request: ', LGTM, but could we move it up a bit? See the vertical positioning of our other empty panel states. I'll work on making better UI (and when we're not string frozen), but this is good for now.", Created ', Before', Created ', After I've adjusted the title so now it's visually balanced with the search bar white space. How does this look?", (In reply to Stephan Leroux :sleroux from ', ) ', LGTM', master 75d654aba047ad8ea43d53755d3581df6a4b6eba' 
id=1179815	 'This seems fixed on master' 
id=1257818	 'Created ', ', Pull request on GitHub', I will need someone to merge this (or gain access to the repo).', Merged ' 
id=1126484	 'Created ', ', PR: ', This patch makes the following changes: Include Fira Sans and Charis SIL in the application - currently we include all variants. I'll file a followup bug to narrow down our included fonts. Change the Reader.css to use Fira Sans and Charis SIL Change the ReaderMode.js to patch the relative font sources from the CSS into full URLs that point to our embedded server. Font loading from the embedded server works great and fast. I see no noticable delays when enabling Reader Mode.", "Narrow down the included font assets" - ', Comment on ', ', PR: ', r=me with some questions/comments.', Squashed and Merged.' 
id=1200226	 "For this bug, we'll remove the workaround KVOURL code where we reset the process pool to resolve this issue.", Created ', ', ', This patch removes the resetProcessPool call from KVOURL and memory warning callbacks. We'll probably want to see what impact this change has on the white screen issue.", Created ', ', ', v1.0 Patch', Comment on ', ', ', I'm mildly concerned that we're changing two things at once here, but it's not a bad starting point if yo re confident.", I think we should remove the resetting of the content pool from both because I feel like if we don't remove it from the memory callback, the issue might not be resolved in that case.", Any thoughts on this :st3fan?', I think this is the right thing to do.', Merged' 
id=1137462	 'Created ', ', Pull request This implements the fixes. I also did some other random cleanup as I went through here (like showing urls' when we don't have titles).", Comment on ', ', Pull request Added some small comments in the PR. My main concern is that there is too much hardcoded.', Nick mentioned he was taking this over. See some notes and query plan analysis in <', >.', Did this land?', *** ', has been marked as a duplicate of this bug. ***', Well?', The first suggestion in the initial comment here is already implemented. The second isn't really needed (we've revamped the in-memory partitioning a few times). I'm closing this as Fixed. We can open a meta somewhere to track general perf improvements, (but I think we have that already somewhere...)" 
id=1147844	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1212421	 "Context: these are real folders in the Sync data, complete with titles. On Android we show the strings from the data, with the obvious complication that maybe the data was created by the Android device itself! That's where the localization comes from: the locale of the creating device at the point of creation. I believe, but haven't 100% verified, that desktop is different, using shipped/localized/hard-coded strings for some of these folders. Mobile Bookmarks is the exception, I believe. Addressing this bug would mean identifying some of these special folders and ignoring the strings they carry with them in favor of the ones we ship in code. The value is obvious: if you e.g., use English Firefox on desktop for some reason, yo ll still get localized strings on your phone. There's a risk of confusion: depending on localization, you might get different names for the same folder on different platforms.", We definitely need to do this for mobile bookmarks, which desktop calls "mobile". Yeah.', Created ', ', Pull req. Tackled this in the course of addressing ', . Screenshot to show it works is on the PR.', Tracking 1.1 \'cos it\'s fixed and the appearance of desktop\'s "mobile" is horrible.', Comment on ', ', Pull req. LGTM' 
id=1161626	 "This involves some crazy state that I'd like to improve. We have this boolean homePanelIsInline flag that we set in some cases: ", It controls the layout of the "home" panel set of pages. i.e. are they shown above the bottom toolbar or over the top of it. When hitting "back" to return to about:home, I think we want to show the footer. Otherwise, it should be hidden. TBH, just glancing at this code, I don\'t actually see that flag set anymore. Amazing ideas for how to do this better would be welcome.', Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1280016	 'Strings landed in ', , and there is an explanation why "Night Mode" and not "Night Mode On" ', How they are different?', Looks like the feature is disabled, I have no clue how they're used. I assumed one was a title, and the other 2 button labels. @James Can you clarify how these strings are used (screenshots would help) and help updating the localization comments?", Created ', ', Link to Github pull-request: ', :flod \u2013 I've removed the toggle versions of each, as they are both unused.", Do you have a screenshot of these two features? Personal suggestion: stop using 'title' in string IDs when the string is not a title. If those are button labels, comments are clear, string ID is confusing.", Created ', Simulator Screen Shot Jul 29, 2016, 4.31.19 PM.png Screenshot showing toggled off night mode and no image mode.', Created ', Simulator Screen Shot Jul 29, 2016, 4.31.42 PM.png Screenshot showing night mode and no image mode toggled on.', Added screenshot showing menu labels. TBC: What do you want me to change these to? "Menu.NightModeTurnOnAction" and "Menu.NoImageModeTurnOffAction" would be the least intrusive change, though I can change it to anything else you\'d like, e.g.: "Menu.NightMode.Action.TurnOn"', Thanks for the screenshots. Both .Button or .Label instead of title work for me, e.g. Menu.NoImageModeTurnOnAction.Label It would also be nice to explain in the NightModeTurnOnAction string that 'On' has been kept out because it was considered redundant, but that's the general meaning.", Comment on ', ', Link to Github pull-request: ', Looks good. Do you want to revise the patch with the .Label instead of including Label in the name as discussed above? Feel free to land once that's done.", I think the second commit covers the renaming. Unless I'm missing something?", Yup sorry didnt see that. Merged in master 412365a097b4fcf3cb8f58ccd1d166b433501fdb' 
id=1170726	 'Created ', ', Pull Request', Comment on ', ', Pull Request ', Comment on ', ', Pull Request Looks good with nits cleaned up.', Created ', ', PR', Comment on ', ', PR Note that since the PR attachment is already here, you can just edit the existing attachment by flipping r+ -> r? without creating a new attachment.' 
id=1237573	 'Created ', ', Pull request I guess the question we need to ask is whether we want to leave all of our ThirdParty dependencies that will never become carthage dependencies as imported code, or whether we want to include them as submodules (shudder) or something else.....', Comment on ', ', Pull request I like the idea of using the source since its simple. To make things cleaner I wonder if we can create a ThirdParty.framework target that bundles all the un-Carthaged code into a framework. At least that way the mental model of loading in dependencies is the same.', Oooh. Nice idea. That would prevent each third party dependency building every single time and help with speeding up the build (which is one of the things I am hoping this work will achieve).' 
id=1183214	 'Are we shipping any default bookmarks in 1.0?', Needs strings?', (In reply to Richard Newman :rnewman from ', ) ', No strings. Just display the 2 default bookmarks. If we ever add a Desktop Bookmarks folder, that title will be localized, but that's not happening in the foreseeable future.", Created ', ', PR ', Getting UX feedback before I ask for review here, since adding these as REAL default bookmarks will probably be a different patch (changes to the db creation).', Created ', defaultBookmarkIcons.zip Default Bookmark favicons.', (In reply to Wesley Johnston (:wesj) from ', ) ', Looks good. One nit, though: even though the delete interaction is disabled, yo re still able to shift the cell by swiping left.", Comment on ', ', PR ', This shows the suggested sites in bookmarks iff there are no bookmarks in the root folder. As soon as you add a bookmark they go away. (i.e. This is the empty state so we disallow deleting these even).', Comment on ', ', PR ', Looks good! I left a comment about the issue you mentioned in IRC yesterday about the slight jiggle on the default bookmark cell. Question though, do we have default bookmarks on desktop? The concept of having default bookmarks seems weird since it's an area of the app where the user explicitly curates. Is this to avoid adding new strings for a empty bookmarks screen?", (In reply to Wesley Johnston (:wesj) from ', ) ', I'm kinda in favor of not adding them as real bookmarks at all. Doing so involves DB writes on startup, making sure we don't sync them, etc. etc. It also leads to the problem we have on Android: if you change your locale later, these default bookmarks stay hard-coded to the locale at insert time. If we have a solution that just shows them at the end of the list, shows them with the correct localized string (when we implement that: ", ), and doesn't add them to the DB, then I'd prefer that approach.", This (sorta does that) although these actually go away as soon as you start using bookmarks on your own. i.e. they\'re only for the "empty" state right now.' 
id=1250187	 'Created ', Simulator Screen Shot Feb 22, 2016, 1.42.27 PM.png What do you think of this for presenting the error message? Only issue is when rotating to landscape there isn't much room to show the error.", Can we force portrait orientation?', I believe so. I don't see that being a problem to force passcode to be portrait.", Comment on ', Simulator Screen Shot Feb 22, 2016, 1.42.27 PM.png I can see how this is better for accessibility, but it's bit dark. Could we match the red and radius of the native error? See: ", R: 186, G: 32, B: 36 Radius: 40px', I can give that a try. Also I noticed in the new mocks that you use a label instead. Want to do that instead?', :sleroux, I think the above is likely better for accessibility.', Landed with patch for ', master 6c697ce68692401b4ca6e6b0f4980fde02d7828f' 
id=1100584	 
id=1261431	 'flod pointed out that we may still want separate strings for settings items and subsection titles in ', , so ignore point 2 above.', Created ', ', Link to Github pull-request: ', Would like to get strings figured out before the 4.0 freeze. Here's one approach -- curious to hear everyone's thoughts!", Comment on ', ', Link to Github pull-request: ', I personally think this is a good idea because of the reasons you said. It makes bookkeeping the strings a lot cleaner (as long as we label the strings per section (e.g. Top Sites, History Panel, etc.) and maintain a consistent format). It does take a little more work to add a new string, like you said, but I think it's worth it than just throwing a bunch of NSLocalizedStrings into classes, some assigned to a variable and some not, etc. The work it takes to maintain the cleanliness is worth it in the long run! (and good and helpful for the l10n team too, I presume)", Comment on ', ', Link to Github pull-request: ', Yup - I like it! Only thing I would add is when we start moving strings over to the Strings.swift file we can 'group' them using extensions to clean it up a bit instead of comments.", (In reply to Stephan Leroux :sleroux from ', ) ', Good idea! Updated the PR. Merging so that we can use String.swift for incoming PRs with string changes. I think the most important thing is that we agree on a format for l10n string IDs; we can always change the Swift code later if we want. ', Comment on ', ', Link to Github pull-request: ', I'll also update the README with details about using NSLocalizedString with value and string IDs.", NI on Stefan in case he's the one doing the export for v4.0 As a consequence of this PR, a lot of strings move around, because an entire file moves from 'Client/LightweightThemes.strings' to 'Shared/Supporting Files/LightweightThemes.strings'. You can get an idea by looking at my diff between v3 and v4 ", Two issues: * If these strings are actively used in v3.0, once we export the strings for v4.0 we basically lose them for any v3.x * If we do this, we need to run a script that rename the file for all locales, and only after that we add new strings. Otherwise, the update script will lose all of the existing translations (the script stores translation by file:id).', Thanks for catching this. Going to move these strings back in ', .' 
id=1191824	 'I am going to close this as WONTFIX. I am fairly sure this is because we switched implementation of how tiles are displayed and stored so it would be a one-time upgrade issue.', I see the same thing just doing a regular session restore. Not sure if this is intentional or not, close the browser, re-open, see all tabs in the drawer wont load at all until you touch them. Why isn't the page cached?", This will happen after updating to a build with ', since we changed the way screenshots are stored. It should only happen once (i.e., any new screenshots should persist). (In reply to Aaron Train :aaronmt from ', ) ', We intentionally load tabs lazily to improve startup perf and reduce data usage (same as Firefox for Android).' 
id=1129306	 'Created ', ', Pull request From the PR: This implements a passwords store using sqlite. It also includes the connection between this and content. That\'s mostly copied from Firefox\'s LoginManagerContent.js script. I\'ll upload a diff to the bug. My goal for now is to just be careful that 1.) We\'re never trusting any domains sent from content and 2.) We only fill logins in the top frame for the page. Happy to get lots of feedback on security implications. Also, this patch lands disabled (the actual saving of form data is commented out in PasswordsManager.swift. Since we don\'t have any sort of "Do you want to save..." prompt, I decided to just leave this off for now.', Created ', ', Diff with LoginManagerContent.js', Comment on ', ', Pull request I see two major issues: 1) we're not being careful escaping and encoding JSON. You could convince me it's not a concern here, but I'd want a good explanation in the code comments of why not, and it's a huge red flag. 2) I don't see abbreviating password to anything, pretty much ever. Let's be descriptive! The database munging looks fine. I didn't really look at the password JS dump -- I'm not the right person to try to apprehend 600 lines of JS right now. If it still needs eyes, re-request and I'll set aside time for it.", Comment on ', ', Pull request Updated the PR', Comment on ', ', Pull request Looks good to me. Rebase, fold down, include bug number in commit message (please), ship it!' 
id=1142546	 'Created ', ', Pull request', hennes, i would like to keep this PR open until we have a use case for opening things in new tabs. I'm going to remove the review flag, but keep the PR open.", Sure, sounds good. Let me know if/when anything else is needed here.', As ActivityStream is replacing the home panels soon. We will be adding the functionality there instead.' 
id=1151961	 'Created ', ', PR ', So I believe this should update the favicon icons for a bookmarked page on each page load since from what I can see the favicon.js script gets run on load which triggers the FaviconManager to save favicons. I just piggyback on that response and update the favicon ID link in the bookmarks table if the page we're on is bookmarked. Also fixes a bug with the >>== terminal definition where we were passing in a second generic parameter when it only needs one.", Merged' 
id=1216142	 'Seems fixed on 2.1+' 
id=1228059	 'XCode decided to launch old builds instead of actually installing new builds' 
id=1164152	 'Pretty sure it was working when I landed it! Can you repro on a fresh install (e.g., in simulator)?', Fresh install seems fine (Reset the simulator). This was in the iPad-retina simulator originally. I guess I can also try running an upgrade and seeing what happens...', I tested the upgrade case before I landed, too. Any chance you ran a build from my WIP branch before I finished it up and landed it?', No idea. I'm fine closing this (upgrades aren't really supported yet anyway)." 
id=1186120	 'Created ', ', PR', Comment on ', ', PR Looks good!' 
id=1111103	 'Created ', ', Pull request Shows how to use core-data for these api's a bit. I'd like to abstract this a bit more in the long term. i.e. My old favicon code had a cache protocol protocol Cache<Key, Value> { subscript(Key) -> Value clear() } that could be backed by a memory or a CoreData store (or sqlite if we eventually want it instead...). Its still unclear to me how much of a memory store CoreData has, but I think putting the abstraction in place would still make it easier to opt in a new cache if we want. For now, this is a simple flip. I'll pull apart the old favicon in some new bugs to use this, and then hook it up to the new browser code.", This PR also includes 250 files for MagicalRecord, which was also part of another PR. Is that correct? And it includes changes to the Reader part. Maybe those should be separate (bug & PR) too? I like the usage of Core Data, it seems to simplify things a lot. I added a few comments inline in the PR.', Comment on ', ', Pull request I'm +'ing this but I think the println()s should be removed and ideally the PR should be split up. (Magical Record inclusion in a separate commit and the Reader changes in a separate bug / pr)", I removed the println's. MagicalRecord is a separate commit. I haven't found a good way in git to do these types of PR's where one depends on another. Do you know of a way?", (In reply to Wesley Johnston (:wesj) from ', ) ', GitHub only really allows two ways: * You issue the second pull request against the first -- i.e., merging into wesj/foobar instead of master. This obviously makes the merge button do insane things, so it isn\'t recommended. * Only issue the second pull request when the first one has been merged. Both of these suck. This is one reason why we have been very thorough about including bug numbers in every commit in android-sync, even if you end up with "Part 9" etc., and I apply that same style to the work I\'ve been doing in firefox-ios -- e.g., ', When you look at the second pull request, you can spot where the bug number in the commit stream changes to match the one in the pull request description, and just start reading there.' 
id=1173356	 'No Sync? Got a device log?', I just reproduced this in my simulator. Here's the console log: DEBUG Did open IPv4 listening socket 6 DEBUG Did open IPv6 listening socket 7 INFO GCDWebServer started on port 53591 and reachable at ", 2015-06-10 11:24:17.257 Debug BrowserDB.swift:65 init(files:): Initializing BrowserDB. 2015-06-10 11:24:17.258 Debug BrowserDB.swift:124 createOrUpdate: Create or update tableList version 1. 2015-06-10 11:24:17.259 Debug BrowserDB.swift:78 createTable(_:table:): Try create tableList version 1 2015-06-10 11:24:17.260 Debug BrowserDB.swift:124 createOrUpdate: Create or update logins version 1. 2015-06-10 11:24:17.260 Debug SQLiteLogins.swift:55 exists: 0 logins tables exist. 2015-06-10 11:24:17.260 Debug BrowserDB.swift:78 createTable(_:table:): Try create logins version 1 2015-06-10 11:24:17.261 Client 57051:2996286 Warning: Unable to create restoration in progress marker file 2015-06-10 11:24:17.282 Debug BrowserDB.swift:124 createOrUpdate: Create or update favicons version 0. 2015-06-10 11:24:17.282 Debug BrowserDB.swift:78 createTable(_:table:): Try create favicons version 0 2015-06-10 11:24:17.282 Info BrowserTable.swift:64 init(): SQLite version: 3.8.5 (3008005). 2015-06-10 11:24:17.282 Debug BrowserDB.swift:124 createOrUpdate: Create or update BROWSER version 4. 2015-06-10 11:24:17.283 Debug BrowserTable.swift:248 exists: 0 tables exist. Expected 4 2015-06-10 11:24:17.283 Debug BrowserDB.swift:78 createTable(_:table:): Try create BROWSER version 4 2015-06-10 11:24:17.362 Debug Profile.swift:341 beginTimedHistorySync(): Starting history sync timer. DEBUG Did open connection on socket 14 DEBUG Did connect DEBUG Did start background task DEBUG Connection received 350 bytes on socket 14 DEBUG Connection aborted with status code 405 on socket 14 DEBUG Connection sent 113 bytes on socket 14 DEBUG Did close connection on socket 14 VERBOSE ::1c1e:d158:0:0:53591 ::314f:d0dc:a79c:ed:53592 405 "GET /about/home/" (350 | 113) 2015-06-10 11:24:17.598 Debug Profile.swift:170 onLocationChange: Ignoring navigation for nil. DEBUG Did open connection on socket 17 DEBUG: readerModeMessageHandler message: { Type = ReaderModeStateChange; Value = Unavailable; } DEBUG Connection received 311 bytes on socket 17 2015-06-10 11:24:17.611 Debug BrowserViewController.swift:1497 readerMode(_:didChangeRead DEBUG Connection aborted with status code 405 on socket 17 erModeState:forBrowser:): New readerModeState: Unavailable DEBUG Connection sent 113 bytes on socket 17 DEBUG Did close connection on socket 17 VERBOSE ::1c1e:d159:0:0:53591 ::314f:d0dc:a79c:ed:53593 405 "GET /favicon.ico" (311 | 113) DEBUG Did disconnect DEBUG Did end background task', The DB tables aren't persisting across restarts. Which is weird. Can you grab your browser.db out of the Simulator and run PRAGMA integrity_check? Suggestions: * We should explicitly WAL checkpoint after a createOrUpdate in BrowserTable. * We should explicitly sqlite3_finalize our statements, rather than doing it in a deinit. The sooner that gets started, the less likely we'll miss a finalize due to an app kill.", DB plz!', Created ', profile.profile.zip I attached the profile I have along with browser.db you were looking for. Also ran integrity_check on it: sqlite> PRAGMA integrity_check; ok', Looks like the tablelist isn't being created...", \ufeff\ufeff12:31:21 <@rnewman> sleroux: opening browser.db causes the WAL to replay, so it jumps to 76KB 12:31:26 <@rnewman> and all the tables are there This looks totally valid when opened locally.', Full WAL checkpointing doesn't help. This isn't limited to history, either: 2015-06-10 13:02:29.062 Debug BrowserDB.swift:72 init(files:): Initializing BrowserDB. 2015-06-10 13:02:29.065 Debug BrowserDB.swift:134 createOrUpdate: Create or update tableList version 1. 2015-06-10 13:02:29.067 Debug BrowserDB.swift:85 createTable(_:table:): Try create tableList version 1 2015-06-10 13:02:29.068 Debug SwiftData.swift:119 transaction: Op in transaction succeeded. Committing. 2015-06-10 13:02:29.069 Debug BrowserDB.swift:134 createOrUpdate: Create or update logins version 1. 2015-06-10 13:02:29.069 Debug SQLiteLogins.swift:55 exists: 0 logins tables exist. 2015-06-10 13:02:29.070 Debug BrowserDB.swift:85 createTable(_:table:): Try create logins version 1 2015-06-10 13:02:29.070 Debug SwiftData.swift:119 transaction: Op in transaction succeeded. Committing. ... so for some reason on relaunch the DB is just blank.", Somehow we're getting .bak files created when setup seems to complete.", Created ', ', Pull req. Inside-out bugfixing: this fixes the SQL, and adds logging that would have shown the bug.', Stefan: if ', got into Build 20, we'll need to respin a Build 21.", Comment on ', ', Pull req. Doh. Thanks.', Comment on ', ', Pull req. Looks good! Works on my simulator and device now.', Ok we will need to do a new build then!' 
id=1265700	 'Hi Emily, I am interested in this bug ans want to resolve this bug. Can you please assign this bug to me? Also could you please give me some guidelines regarding how to solve this bug? Thankyo , Hi, Firstly, thanks so much for having a look at this. Please don't hesitate to contact me with any questions. The Open In view is added to the webViewContainerToolbar, which is inside the webViewContainer, when we detect a PDF has been loaded AND we have an app on our device that can open it. The banner appears at the top of the page, just below the URL bar. It is added to the view on line 2118 of BrowserViewController.swift in a function called addOpenInViewIfNecessary(url:), and removed in removeOpenInView(). The webViewContainerToolbar is hidden and displayed depending on whether or not there is anything inside it. When we scroll the webview, it scrolls over the top of the webViewContainerToolbar. What is happening here is that, somehow, the Open In button is still pressable despite no longer being visible on the screen. It seems that the webView WKScrollView is propagating the touches down to the toolbar. There are 2 solutions to this that I can see, 1. Instead of scrolling the webview over the top of the webViewContainerToolbar, we either scroll the webViewContainerToolbar off the screen too, or we hide it when it is no longer visible, so it is no longer available to receive touches. 2. We prevent the touches from being propagated through the WKPDFView & WKScrollView down to the view beneath. As the hide animation for the webViewContainerToolbar is rather jerky at the moment, I think I would prefer a solution that also fixed that animation jankiness so suggest that you pursue solution 1 initially.", Its hard to work on....Can you suggest me any easy bug. I am new to MDN and want to contribute. Please help me Thanks', Hey, I've just push a few new bugs into Good First Bugs. Take a peek and see whether any of these take your fancy. ", (In reply to Emily Toop (:fluffyemily) from ', ) ', Hi Emily, Link is not showing any results.', How about you give this one a go? ', Hi Emily, Not sure if this is a bug, and if worthwhile, but I found that the "Open in..." button doesn\'t appear on the simulator. It only seems to be appearing on a device. Should we file a bug for that?', Maurya, the Open In button not appearing on the simulator is not a bug. The Open In button only appears if there is an app on the device that can handle PDF's. By default on the simulator there is not PDF capable app. We do this check by checking for the presence of iBooks, which is installed by default on all devices and so is a good indicator of whether a PDF enabled app is present on the device. If you need to test this on a simulator, then you can change the check in the OpenInPDFHelper (", ) to not perform the canOpenURL check. This will enable the Open In button to appear on the simulator.', Created ', ', Link to Github pull-request: ', review ping', Hi Emily, would you be able to review this? If you are unavailable, should I ask somebody else to review it?', Comment on ', ', Link to Github pull-request: ', Looks good! Thanks for picking this up.', master ', Hi Stephan, Though it's working, I faced some problem which I described in some comments on the PR (in case you missed it). Would you be able to comment on that? ", ', I've added some responses to the PR!" 
id=1131284	 'Since filing this bug, the designs have changed: ', . The current mockups have a static set of icons, no text, and no overflow for V1.', Created ', ', Pull request', Comment on ', ', Pull request LGTM. Followup bug to put colors into a Colors.swift file?', (In reply to Stefan Arentz :st3fan from ', ) ', Already filed (', ).' 
id=1194411	 ' *** This bug has been marked as a duplicate of ', ***', I think your device is in a bad state, Stef. In normal circumstances this is mostly fixed, hence the dupe.', What do you mean by bad state?', I mean there's something -- a queued command for a non-existent remote device, something malformed on the server or locally, or something we haven't figured out yet -- that's causing your device to fail to sync clients. That means that each time you show that panel, there's no cached data. It tries to sync, evidently fails after some effort, and shows nothing. In normal circumstances there's cached data which displays instead.", OK, much clearer, I will try to verify that after sorting out other sync issues, thx.', After signing out and in on all devices there is no lag anymore (second build 33).' 
id=1145388	 'It is not implemented yet. But lets keep this on file.', This is still problematic. Items one adds to one's reading list will never be marked as unread.", You can mark items as read manually but they are never automatically marked as read. I'm not sure if this is design intentional but this goes against user expectation.", Created ', ', PR: ', This patch marks reading list items as read when you open them. This is a very basic start. Let me know via *UI Review* if this is good enough via v1.', Comment on ', ', PR: ', I would really like to see a test for this too.', Added a UI test. Merged. ' 
id=1206734	 'Created ', ', ', Comment on ', ', ', Can't see this issue anymore :)", Merged' 
id=1156289	 "I think this actually happens now since I now set the constraints on the web view to be connected to the top url bar area. The progress bar actually renders outside the URLBarView's area so even when scrolled down you should see the progress bar loading, then the toolbars come in when the page is loading. I see this happening right now on master if you want to confirm.", I see this too. Thanks!' 
id=1221189	 'Looks like this is similar to ', &sourceid=Mozilla-search Symbolicated: specialized TabTrayController.tabManager(TabManager, didRemoveTab : Browser) -> () (in Client) (TabTrayController.swift:0) @objc TabTrayController.tabManager(TabManager, didRemoveTab : Browser) -> () (in Client) (TabTrayController.swift:0) protocol witness for TabManagerDelegate.tabManager<A where ...>(TabManager, didRemoveTab : Browser) -> () in conformance TabTrayController (in Client) (TabTrayController.swift:567) specialized TabManager.(removeTab in _932D52E6383C2B96DB066936B32B3140)(Browser, flushToDisk : Bool) -> () (in Client) (TabManager.swift:297) specialized TabTrayController.swipeAnimator(SwipeAnimator, viewDidExitContainerBounds : UIView) -> () (in Client) (TabManager.swift:260) @objc TabTrayController.swipeAnimator(SwipeAnimator, viewDidExitContainerBounds : UIView) -> () (in Client) (TabTrayController.swift:0) protocol witness for SwipeAnimatorDelegate.swipeAnimator<A where ...>(SwipeAnimator, viewDidExitContainerBounds : UIView) -> () in conformance TabTrayController (in Client) (TabTrayController.swift:633) SwipeAnimator.((animateAwayWithVelocity in _19062815A85343D765266DB68529FEB8)(SwipeAnimator) -> (CGPoint, speed : CGFloat) -> ()).(closure #2) (in Client) (SwipeAnimator.swift:73)', Can't seem to reproduce this on master or in the 1113 build. Looks like it's related to swiping away the tabs from the tab tray. :AaronMT, have you seen this at all or have been able to reproduce?", No leads still, we'll have to see if this happens once released", Haven't seen this recently." 
id=1167216	 "This wasn't visible before because of 1137051. we'll track but its low priority.", This is because we actually switch between a UILabel and a UITextField and the two don't overlap perfectly.", Created ', ', Pull request', Have rewritten BrowserLocationView and URLBarView to use only one UITextField instead of a UILabel/UITextField combo', Comment on ', ', Pull request Sorry, this slipped by my radar :( I put some comments in the PR. I think we need to make sure the spacing stays the same and the select-ed behavior isn't regressed either.", Created ', ', Pull Request Updated as requested. I've used a much better strategy that uses autolayout for the display of the reader view button and the lock icon.", Comment on ', ', Pull Request Looks good! Thanks, I think this is a good move for the way this is built.' 
id=1177877	 "(Ingl\xe9s?) Can you see if there's a crash report on your device? If so, can you attach it to this bug? In iOS, Settings -> Privacy -> Diagnostics & Usage Data Select a Firefox crash from the list. This will start with \u201cFirefox_\u201d and contain the timestamp of the crash. Tap on the crash and you will see a text field with a crash log. Long press to Select All and then Copy the crash text. Paste it into something you can get off of your device (for example, an email to yourself) and attach it to this bug.", Same here! I use Firefox for iOS on my iPad and iPhone; if I clear/delete my privat data on my iPhone, there isn't a crash. If I do the same on my iPad Firefox crash and there aren't any reports in Diagnostics & Usage Data. And I don't have the switch button for the Tabs, too!", *** This bug has been marked as a duplicate of ', ***' 
id=1123512	 "good. then we won't need to keep prefixing with moz* too.", Part of ' 
id=1255143	 'Created ', 1255143.png', Created ', ', Link to Github pull-request: ', Looked dormant, so went ahead and made this quick change.', Comment on ', ', Link to Github pull-request: ', Thanks Joel! Looks good.', master ' 
id=1135768	 '*** ', has been marked as a duplicate of this bug. ***', I am going to say that darrin's WIP tree at ", fixes this ticket, since it shortens the tabs animation that wesj mentions from 0.5 seconds to 0.2 seconds. (It does other things too, but let's call it that for convenience.)", Created ', ', Github PR I will take the review and landing of this ticket.', Comment on ', ', Github PR I landed this with some pretty major changes: 1) general style nits and clean up, including extracting TabTrayControllerUX struct of constants. 2) remove blur effect -- see comment. It was popping terribly and fixing it would include adjusting the screenshot/view replacement, which I can't do now. 3) simplify the text layout -- see comment as well.", kar: the tab tray animation speed was a significant concern from our early testing. I think it's worth advertising that this has dropped the speed from 0.5 seconds to 0.2 seconds.", Love it - thanks.' 
id=1198046	 'Created ', ', Pull request Same fix as ', , which only fixed BrowserProfile.', Comment on ', ', Pull request Thanks for the explanation!', 1c95a56' 
id=1266332	 'Created ', ', Pull request', Comment on ', ', Pull request Yep.', #merged: ' 
id=1147000	 'Created ', ', Pull request', Comment on ', ', Pull request Land this if you must, but I'd prefer a proper solution. Maybe make index Int? and do the right thing on nil?", Comment on ', ', Pull request Fair enough, updated with a not lazy solution :D', Comment on ', ', Pull request lgtm.' 
id=1278671	 'Resolved with patch on meta.' 
id=1160201	 "Leaving this tracking-? until product tells me they want don't want it for v1. We only allow clearing all history right now.", Based on external feedback, I think we should track this for v1', I would like this to be in the 'bottom of the list' in case it needs to drop. I would like to ensure the other higher priority items and bugs are handled first. This can go into v1.1 if need be - we wouldn't block on v1 without this (unlike some other items we have in the list)", This should be easy, because we already support this for bookmarks. I'll do this now I'm elbow-deep in history.", Merged: 09dce88' 
id=1169750	 'Created ', PR ', Looks like I forgot to remove the autoresizing constraints as well as the constraints for the tab button clone inside the URLBarView.', Created ', ', Pull request', Comment on ', ', Pull request Nice!', Merged' 
id=1226464	 'Related? ', Possibly related, but unlikely -- these two queries run serially.', Hi Brian, I don't see this query being called twice. I tried the both cases (bookmarked page and non-bookmarked page). Is there any other use case where this could potentially be called twice? The query is called only when BrowserViewController.updateURLBarDisplayURL(_:) is reached. And this appears to be happening only once per page load.", Yeah, I'm only seeing this called once now, too. This probably got fixed somewhere else down the line. Thanks for looking!" 
id=1171626	 'ReadabilityBrowserHelper.init?, browser.webView! -- but .webView is nil. This is running on the main thread, triggered via ReadabilityOperation.main:50. Should be pretty easy to solve via inspection.', The blue dot is just an indicator. It is not a button. To toggle the read/unread state, swipe the cell to the right. This is a major regression and can be summarized as 'Opening an item from the reading list causes a crash' This must be because of some other unrelated changes. I'll investigate.", This is because of the lazy loading of the WKWebview that was introduced recently.', Created ', ', PR: ', This patch fixes a regression that was introduced after the lazy loading of the `WKWebView` was implemented. The `ReadabiltyOperation` requires the `Browser.webView` to be present so this patch simply calls `createWebview()` to ensure that.', Comment on ', ', PR: ', Looks good to me!', Robin, this crash is fixed. But see ', about the blue dot not being a button. Please file a bug if that needs to change.' 
id=1238114	 'Created ', ', Link to Github pull-request: ', Along with the notes on the PR, I've setup a Fennec app in our iTunes account that we can start building Fennec builds with.", Comment on ', ', Link to Github pull-request: ', Let me know once we've got the new app set up on TestFlight and I'll look at updating the fastlane stuff to work with it.", The app has been setup in iTunes named 'Fennec web browser' and uses the same bundle ID we were using for debug (com.mozilla.io.Fennec). I've already gone ahead and generated the distribution provisioning profiles for the app + extensions so I think it should be good to go for the fastlane stuff. Let me know when the fastlane stuff has been updated and I can give it a whirl by using it to build our first 2.0 TF build.", com.mozilla.io.Fennec - > org.mozilla.ios.Fennec', I hate to ask this, but if we are going to put the app on TestFlight as Firefox Beta, do you think we should use org.mozilla.ios.FirefoxBeta instead? And leave .Fennec as is and make that the build that developers run locally? (Currently)', Sure that works. I just need to setup the bundle id and generate some profiles which doesn't take long. At least with this patch I only need to change it in one place and it updates across the extensions :)", Another issue that I thought of when we were discussing the various release channels is the potential need for a 3rd app. The problem our TF users are running into is that they are unable to run the 'stable' beta build alongside the production build because they use the same bundle identifier. They would only be able to run Firefox Beta and (production or stable). If we wanted to go with the nightly/stable model we would need: 1. A nightly build from master using the Fennec bundle ID 2. A stable build from the 3.X branch using the FirefoxBeta ID 3. A production build for 3.X using the Firefox ID This would mean that our TF channel under the current Firefox app becomes obsolete and those users would be transferred to a Firefox Beta app. Thoughts?", How about these three channels: 1. Nightly - Only from our Xcode Server, so not for a general audience. Although we could do Enterprise builds for Mozillians. 2. Stable build, org.mozilla.ios.Firefox - TestFlight Channel for 'the next release' - So less frequent and pretty much to test what we will put on the app store. 3. Beta build, org.mozilla.ios.FirefoxBeta - TestFlight channel for following new features. - More frequent. Stable'ish, but may contain features that are not completely done, or may not appear in the final build. 1 can be on a CI server. 2. Builds for 2 are made when we have tagged a release. So this gives us some extra bake time of 'the real thing' that we are about to push to the store. 3. Builds are made as soon as something lands. Or at least once a week or so. This is where we want most people to be since it lets us asses improvements in general, wether they land on production builds or not.", I like the idea of Nightly being an enterprise build since that can be automated unlike the TestFlight builds. The downside of enterprise builds is we would restrict nightly builds to LDAP Mozilla employees which is probably fine for now until we have a need to give it to external users. Ideally Nightly would also replace the L10N builds since the localizers have LDAP IIRC. When the release branch is cut and it's ready to ride the stabilization train, I can see the build being promoted to FirefoxBeta for external users. After the bake time period (6 weeks) we would promote it to release. I don't see the need for the Firefox TestFlight channel though unless we wanted a third bake time but that sounds like an Aurora channel to me that we wanted to avoid. I'd also prefer to use FirefoxBeta as the bake channel since it still allows users to use the live version of Firefox. I don't know about the idea of 'stable-ish' and building when features are done since that seems kind of random. Ideally when we cut the release branch for beta we should be feature complete and the only things we should be uplifting are fixes. If a feature isn't complete it rides the next train. If you want to use features as they come off the wire they should be on Nightly and unlocked when ready using feature flags. TL;DR 1. Nightly -> Enterprise LDAP 2. Beta -> N.X (N=Release Version) release branch, bake period (6 weeks?) 3. Firefox -> Production release", Comment on ', ', Link to Github pull-request: ', This PR includes all of the project settings clean up work I mentioned in the meeting yesterday. Couple of things: 1. This has been rebased from master so it includes all of the Carthage goodness 2. Our Client scheme is no more. I've replaced it with 'Fennec' to better map to the debug/development nomenclature.", Comment on ', ', Link to Github pull-request: ', So much cleaner. Looks awesome. These all run on simulator just fine from inside Xcode. There are export/build problems though. Archive works, but export won't let me export as an ipa when building with Xcode (running the Fennec scheme) There are some issues when running using fastlane too. Details can be found in the PR.", Created ', ', Link to Github pull-request: ', Build tools patch', master a6aa5802e419125d735b424a784b00f3c85c0e3a', build-tools master 6237f8a60ebe7b93c543328dbc84b3de102e50f7' 
id=1108880	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good to me!', Merged.' 
id=1263586	 'Tabs toolbar issue: ', Created ', ', Pull request', Comment on ', ', Pull request This menu is looking awesome! I think a lot of the comments regarding architecture of the actions from ', apply here. I think this looks good to go for being 'toolbar-ified' as part of ", when this lands. I'll make sure to pull down and integrate it into the bar." 
id=1250946	 'I need to update the firefox:// URL scheme (because opening the containing app can only be done via a call to openURL). Right now, we can only open URLs in a non-private tab, by passing a url query parameter. I propose a second query parameter, so a new private tab is: firefox://?private=true firefox://?private=true&url=', (modulo appropriately URL encoding) Second: I propose we change the default behaviour when no url is present to be changed from opening the app to the current tab to opening a new tab. Both open a new tab: firefox:// firefox://? :sleroux, :st3fan, what say you?', Make sense. I think the only thing we'd want to do is formally document that it means for the parameter to be absent (private=false) somewhere. Not sure if we have documentation about this anywhere. ", Do we know if anyone is using this API already? With apps like Outlook/Airmail supporting Firefox I wonder if there is already an assumption around how this API works. I'd just be worried about breaking API changes. Also, if we wanted to expose an API for just opening the app I feel like we hamstring ourselves here unless we add a new parameter like 'justopen' which seems a bit jank. An alternative could be passing in about:blank into the URL parameter to open a blank new tab since that would align with the existing usage of opening a tab..", The only thing I could find was :bkmunar's docs from Open In Firefox. Otherwise, the only documentation is the code itself. ", ', In the absence of error handling, 'just open' the app is the default error behaviour. I don't think we should be advertising this as part of the API. Digging further in (lots of duplicated code due to #available(iOS 9, *)) checks, it seems that the default behaviour is to open a new tab in whatever mode (private or not) the tab tray is currently in. ", I considered this, though that does prevent us adding 'new tab' behaviour, such as opening a default new tab page, or going straight to the tab tray.", Please may I have some assets for this? I'm happy to use recycled assets, though you may not be :) \u2013\xa0New Tab, .Normal & .Highlighted states - New Private Tab, .Normal and .Hightlighted states. Thank you muchly.", True. The more I think about it, the more I realize that we probably don't ever want to 'just open' the tab since the schemes are really meant for invoking an action in the other app. I don't see why another app would want to open FF and do nothing. ", By using train of thought in the previous example this makes more sense. Other applications probably don't want to do nothing. They most likely will want to open a new tab for themselves and perform some kind of action on it.", Created ', TodayWidgetAssets.zip', Created ', ', Pull request I've got everything working, though would like some feedback on the rebase which caused me some issues, and some SnapKit layout problems I'm having (Private Tab button).", Comment on ', ', Pull request Left feedback on the PR.', Created ', iPhone screenshot', Comment on ', ', Pull request I added the height using 2x the button size.', Comment on ', iPhone screenshot Looks good! Can we reduce the label size to 14pt and give it a bit of space from the icon? Say, 10px?', Comment on ', ', Pull request Looks good. Left a couple of minor suggestions in the PR. I wasn't able to test this as I couldn't build it in Xcode 7.3 (compiler issues)", Nits addressed. Merged.', Design at ' 
id=1193028	 'Also happens with ', Created ', ', ', Merged' 
id=1144511	 'Created ', ', PR: ', This patch changes reader view to serve content via the built-in web server. This results in much better interaction with the `WKWebView` because we now display reader view content by calling `webView.loadRequest()` instead of `webView.loadHTML`. This also solved the following two issues: * 1144291 - Navigating to a reader mode page from the history stack results in blank page * 1144510 - Reader view content is cached permenantly This patch is also the beginning of cached and offline reader view content. Standard practice now is to store the readerized content into `~/Library/Caches/ReaderView/XX/YY/ZZZZZZZZ/content.json` - there is currently no way to expire this content, but that will likely be hooked up when we do reading list syncing. There are a couple of outstanding bugs that need to followup this one because I did not want to combine too much in a single PR. Including: * 1144404 - Reader Mode URLS (about:reader) should not be part of history * 1145231 - Internal Reader View URLs should be hidden', Comment on ', ', PR: ', Some comments in the PR, but looks good with those fixed.' 
id=1153310	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1272237	 'Created ', ', Pull request', Comment on ', ', Pull request May also be linked to ', .', Added strings for v5.x ', How is this going otherwise?', (In reply to James Hugman :jhugman @jhugman from ', ) ', Pull request has updated', Comment on ', ', Pull request I have rebased on master', Comment on ', ', Pull request I've added some comments to PR. Yo re getting really close. Have a look at the comments, and then r? again.", Comment on ', ', Pull request update pull request', Comment on ', ', Pull request Good job, well done. I've added some comments in the PR, including asking for some followups.", Should be uplifted with ', .', v5.x a94f621', This bug seems to cause regressions with styling on pages, see bug ' 
id=1205004	 'After implementing webViewWebContentProcessDidTerminate: in the TabManager, I see that it gets called when the blank tab of death appears. Thinking about a simple strategy now to reload the tab.', Created ', ', PR: ', Work in Progress', Comment on ', ', PR: ', This patch reloads the tab if we get a notification that the tab's content process has terminated.", Copying some thoughts/questions from IRC: 4:26:49 PM <bnicholson> st3fan: so we've been using webkit's automatic webview termination for zombification on low memory 4:27:09 PM <bnicholson> which plays pretty nicely with iOS since we reload whenever we select those tabs again later 4:27:17 PM <bnicholson> what effects will your PR have there? 4:29:24 PM <bnicholson> st3fan: i used to hit this bug all the time in 8.4, but haven't seen it at all in 9...still wonder if apple fixed it for us 4:29:43 PM <bnicholson> st3fan: AaronMT: could we get a confirmation that this is even still happening? 4:31:42 PM <AaronMT> bnicholson: I'll try with tabs left open overnight tonight Just want to make sure we aren't trying to fix a problem that doesn't exist :) NEEDINFO'ing Aaron for the QA results.", Yeah, I wasn't able to reproduce this on 9.0.2 (iPhone 6). Tried again with ~45 min this morning and same result.", This patch deals with the new `webViewWebContentProcessDidTerminate` delegate method. If that delegate method is called, we do the following: We find the `Browser` (tab) instance that owns the `WKWebView` that has just died. If that `Browser` is the currently selected one, we reload it right away. If it is not then we set its `webContentProcessDidTerminate` flag and reload it when it becomes active again. This needs a thorough review before it lands. Added both :bnicholson and :sleroux since they probably know this code the best.', (In reply to Aaron Train :aaronmt from ', ) ', I was actually able to reproduce this on iOS 9.0: I got the blank tab and I saw that new webViewWebContentProcessDidTerminate: method being called as a result of that. If we think this is not needed anymore then I am happy to just let the PR sit there for a while until we have a better understanding. Personally I think that new delegate method exists for a reason and we need to handle it. But, I agree that it is all poorly documented and hard to reproduce.', Comment on ', ', PR: ', Just one nit.', I don't see how this patch would add any additional risk and seems like a possible solution so I'd say go ahead and land it.", (In reply to Stefan Arentz :st3fan from ', ) ', Personally, I'd vote for this since I'm also not able to reproduce this myself. I've left my 9.0 idle a few times overnight, and the tabs that I switch to are gray, not white. They immediately load when I select them. Is this a speculative fix, or have you verified that this works? As mentioned before, we already do this here: ", . Your PR also just reloads the tab, so I can't see how this could possibly fix anything new... ", I agree it exists for a reason: apps have the option of handling this however they want to. They could update the tab titles, visual state, send some telemetry pings, etc. WKWebViews die by design: it would be too much memory pressure to keep a bunch of unused pages around. If reloading to force the web view to stay alive was the right solution, I think Apple would have just prevented them from dying in the first place rather than exposing this delegate, no? Forcing them to stay alive seems to be against the spirit of the API. (In reply to Stephan Leroux :sleroux from ', ) ', See above comments and ', ...if we immediately reload all tabs when the system kills them, that means we'll never have *any* zombified tabs. I've seen lots of users that collect 30+ tabs in a session. 30+ active browsers on a phone will almost certainly cause the app to OOM.", Comment on ', ', PR: ', Oh hey, you changed the PR from when I last looked! Sorry, I thought this was still using the brute force reload-when-terminated approach. I agree that this seems fairly risk-free. This seems to be a better fix for the hack at ', -- should we consider just removing that now?', Landed as a simplified patch that only reloads the selected tab. Not background tabs. THat case is already covered by other code that checks if webView.URL goes nil.' 
id=1285010	 'Created ', ', Pull request', Comment on ', ', Pull request I'm not sure how this patch works. Could you address the comments in the PR, and/or write something down how it does work (if it does). If it does work, there is a bunch of dead code which can be deleted.", Yeah, I must have made some mistake in Git when I was committing the changes: I've recommitted the lines that were left out in the PR. Sorry about that.", Created ', Screen Shot 2016-07-27 at 7.00.05 PM.png Seeing this bug with links longer than screen shot.', Comment on ', ', Pull request Looks good, but please could you check the bug in above comment', Created ', Simulator Screen Shot 27 \u0438\u044e\u043b\u044f 2016 \u0433., 13.45.11.png When I copy a long URL, it truncates it like in this screenshot. Is this only happening for certain URLs, or on a certain device for you?', I can't reproduce now. I'll file another bug if/when I see it. r+!" 
id=1165120	 'Is this going to be possible? Right now I just checked in a static list here (from Fennec with the AMO and Marketplace links removed): ', while I waited to see what the search engines group did. Sounds like we can do something similar to what they did here?', We're not currently localizing suggested sites at the moment, so I don't really have an answer to this question. Technically they're localizable in region.properties, practically we never implemented any policy (what to accept, etc.) nor started accepting localizations for the ones shipping in en-US.", Darren, do content services have plans for suggested tiles on iOS? Also looping in mconnor. I'm not convinced that we should tie the suggested sites to our update cycle. Do we have any existing data processes to update iOS fx with server-provided data snippets?", Currently there's not much infrastructure for pulling down snippets at runtime (we do pull from a local url, which should also work for a remote one, but that about it). I assume we will sometime, but its not for v1.", @axel we currently do not have this on the roadmap. Maybe in the future, but right now, Content Services is focused on desktop.', Going to make sure that the redirects work right right now. Also going to update the SUMO link to the iOS page in this bug.', Created ', ', Update urls This updates the urls to be local agnostic. It doesn't fix the titles though :(", Comment on ', ', Update urls LGTM' 
id=1229078	 'master: 88217ea', Uplifted: 3ed3912' 
id=1175639	 'Created ', ', Pull request A little one fixing a bug I introduced.', Comment on ', ', Pull request LGTM' 
id=1242360	 'Created ', ', Link to Github pull-request: ', Instead of resetting to the top of the page when the query changes, we can try to resume from the last match position.', Comment on ', ', Link to Github pull-request: ', Looks good and works pretty well! I found another bug while testing but filed it elsewhere since it wasn't related to this patch ", .' 
id=1187381	 'Looking at the debug logging: "Candidate:", <div class=\u200b"bbccom_advert bbccom_display_none" id=\u200b"bbccom_leaderboard">\u200b\u2026\u200b</div>\u200b "with score 483.6082923488763" "Candidate:", <div id=\u200b"bbccom_leaderboard_1_2_3_4" class=\u200b"bbccom_slot bbccom_standard_slot bbccom_visible" aria-hidden=\u200b"true">\u200b\u2026\u200b</div>\u200b "with score 244.30212289111623" "Candidate:", <div id=\u200b"site-container">\u200b\u2026\u200b</div>\u200b "with score 78.99633292201811" "Candidate:", <div class=\u200b"story-body__inner" property=\u200b"articleBody">\u200b\u2026\u200b</div>\u200b "with score 148.26828069861975" "Candidate:", <div class=\u200b"story-body">\u200b\u2026\u200b</div>\u200b "with score 88.84532230081409" i.e. the ad has a score of 483, the content has a score of 148, hence, we give you the ad :) Looking into why...', PR ', I'm seeing this issue on multiple BBC pages on iPhone 6 (iOS 9) and iPod Touch (iOS 9).", I've been trying to reproduce this but I have not been successful. Maybe (hopefully) this is resolved due to ", . If I'm wrong, feel free to reopen the bug! :)" 
id=1120465	 'Created ', ', Pull Request' 
id=1134050	 'Created ', ', Original Pull request Here's Lyle's original PR. I'm landing a rebased version of it. Will kill this PR. Thanks!", Merged: ', *** ', has been marked as a duplicate of this bug. ***' 
id=1195797	 'Created ', ', Pull request', Comment on ', ', Pull request Looks great, thanks! Will this show any time we don't have local data to present? I'm certain I've seen the white panel after I'd synced once before.", Comment on ', ', Pull request LGTM', Looks like this is good to go - I'm going to merge it in for the build tonight" 
id=1145915	 'Fixed with ' 
id=1209083	 ':aaronmt I cannot replicate this on current master. Is this still a problem?', Re-open if I see this again', This is still reproducible albeit not 100% of the time. I was in settings, I clicked done, I tapped on the first about:home tab I had open. Results: see screenshot', Might be related to private tabs since we hide the web content and it appears gray so that might be it.', Created ', ', ', I wasn't able to reproduce this at all but I'm pretty sure I spotted the problem. :AaronMT, did you get a STR for this?", No specific steps', Merged' 
id=1157922	 'Created ', ', Pull request Robin, what do you think?', (In reply to Brian Nicholson (:bnicholson) from ', ) ', :bnicholson, the assets I supplied are 60,96,128 \u2014 so the @3x is 128 \u2014 which now I am assuming may be too large by double on all sizes. can resize to whatever we need. I also like the slight radius that antlam had on his versions.', Created ', ', Pull request', Comment on ', ', Pull request Few nits in the PR comments to make the code more stable.' 
id=1291389	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks -- nice to get these cleaned up a bit.' 
id=1168402	 'Matej, any suggestions to the copy in the above-linked mockup?', Troy, can you have a look at this? I wonder if there\'s some existing copy from the Reading List work you\'ve already done that could work here. One thing I noticed in the first one is that it should be "Reader View" instead of "reading view." Thanks.', Hey I don't think I have much that works for this purpose, but the copy that is already there is pretty good. I just made a few edits to better match the language we've been using. Let me know what you think: Welcome to your Reading List Open articles in Reader View by tapping the book icon when it appears in the title bar. Save pages to your Reading List by tapping the book plus icon in the Reader View controls.", Created ', Screenshot 2015-07-02 12.05.55.png Screenshot for the localizers' 
id=1179798	 'Actually it seems like simply entering into edit mode activates this state where no new content will populate about:home', I'm testing this on Aurora 24 and can't seem to reproduce the issue. Are you referring to newly visited sites do not show up on the top sites panel if there is room or not filling in the 4th row at the bottom of the screen on iPhone? Currently we're only showing 3 rows in portrait iPhone.", Seems to WFM on master too, I'll re-open if I see this again.", This is still occurring on master. I removed a top-site on about:home, followed by opening a new site in a new tab. On switch to about:home, I do not see the new site added.', I think this is a dupe of ', after playing around, I might be running into slow writes.', *** This bug has been marked as a duplicate of ', ***' 
id=1232846	 'I cannot reproduce this issue on latest master (0da9bd79). Tested on iOS 9 and 10.' 
id=1125996	 'Created ', ', Pull request', Comment on ', ', Pull request After discussing this on IRC we think this is a good way to extend the tap area outide of the visible view border.' 
id=1136951	 'Created ', ', Pull request', Comment on ', ', Pull request I don't really understand the desire to keep the Search controller delegate separate from the home ones. They're basically the same interface with slightly different method names." 
id=1199981	 'Created ', ', pull request', Thanks for the fix! Looks good :)', Hmm, I'm still seeing these errors when running on my iPod touch (iOS 9).", Something may have gone awry with a merge. Fixed again via 5af6800.' 
id=1187789	 'Created ', ', Link to Github pull-request: ' 
id=1147508	 'Going to dupe to ', for general tab drawer perf issues *** This bug has been marked as a duplicate of ', ***' 
id=1212093	 'Created ', ', Pull req.', Comment on ', ', Pull req. nits, one substantive comment on GH.', Nick: please post-review skim these commits. 65302b4' 
id=1161265	 'Created ', iOS Simulator Screen Shot May 4, 2015, 2.44.01 PM.png', I have a fix for this in ', .', This seems fixed with latest build.', Yep, thanks!' 
id=1170690	 'Would be a good idea for me to start learning how to write/add to tests? anyone wanna instruct me on the protocol for this?', Clear Private Browsing tests: Clears site data (including top sites) Clears history Clears cache Clears cookies Clears passwords', Added UI tests for site data and history. Still needed -> tests for cache, cookies and passwords', I'll grab this since this should go hand-in-hand with ", .', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good - some really great tests!' 
id=1098675	 'Looks you added them to Info.plist already ', Lets keep this open because at this point it is unclear what fonts we actually need in the app. When the UX design solidifies we should be able to make a proper list of the fonts and variants that we need.' 
id=1128774	 "There are no errors in the Xcode console. I tried to debug this using the Safari Develop console, but the console just closes itself when this happens. So far, it's been a big pain to debug. Through some elimination, it looks like it could be related to reader mode. I commented out the ReaderMode helper creation in BVC didCreateTab(), and the STR don't seem to work anymore. Thought it might be memory related, so I added logging to didReceiveMemoryWarning() in BVC, but it's not called.", I'll take a look at this in more detail. Assigning to myself since the Reader Mode hint seems to be strong.", The first thing I noticed is that GMail does a couple of redirects. It looks like it does these redirects by settings window.location, which is why I don't see redirect responses from the HTTP requests. We run Readability every time we get a onShow event. But in this case, gmail also triggers that location change pretty much immediately. I would think that should not make a difference, but it seems it does. Couple notes: While this is happening we do not call into the page with webView.evaluateJavascript() so we can eliminate that. Commenting out the calls to webkit.messageHandlers.readerModeMessageHandler.postMessage() makes no difference, so it also has nothing to do with messaging back to the native code.", Created ', ', PR: ', This patch adds an extra check to `checkReadability` to find out of the body of the document actually has child elements. If it has not then we can already say that the page is most likely an empty page used to redirect to another page. The redirection is certainly what GMail is doing. Unfortunately I don't yet fully understand the underlying issue. My gut feeling says it is a race condition in the WKWebView code where it executes a User Script while the page is suddenly being reloaded. I think it could be worthwhile to write an isolated test case so that we can submit this to Apple if this guess is correct.", Comment on ', ', PR: ', Sadly, doesn't fix the issue as mentioned in the PR.", Created ', ', Pull request Here's another attempt. Haven't been able to hit the bug with this applied.", Comment on ', ', Pull request Nice one. Seems to work well. Lets include this but also file a followup that we should optimize this later (if possible) because from a performance and memory perspective I don't think it is awesome to serialize the DOM and then parse it again. One way to optimize this is to look at the failing DOM and make a decision to not call Readability() at all, earlier. I tried doing that by looking at the number of child nodes in the body but obviously that is not enough.", Merged. (In reply to Stefan Arentz :st3fan from ', ) ', Yeah, it's hard to say what the perf impact of this is. We actually do this in Gecko too 1 , though the parsing part happens in a web worker. 1 " 
id=1141907	 'Created ', ', Link to Github pull-request: ', No live testing, but soon enough.' 
id=1202816	 "We won't be adding copy within the app but will add something to the app description instead. Arcadio, I think we need to add this to the existing app description copy?", Stephan, Thanks for the ping. CC'g Mike Han. We might also add this to the What's New section in the app description." 
id=1227857	 'Created ', Pull request', v1.x d1fe41e' 
id=1215938	 'Not blocking, but it does look bad. Should be a quick/easy fix. 1.2?', Created ', webviewShareDeviceNull.png Here's the mock screen (with the updated string).", Created ', Simulator Screen Shot Oct 19, 2015, 9.27.56 AM.png Want me to center align the 'not signed in' one as well?", Created ', ', ', Low risk, low hanging fruit patch for 1.1', 758d34d9f7ef9c872b4ee8b44fc7dc10fbbe9acf Merged' 
id=1173181	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1240405	 'Created ', ', PR ', This patch adds new string tables that were introduces as part of 2.0.' 
id=1110358	 'Created ', ', x-github-pullrequest', This has been merged into master.' 
id=1185545	 'Created ', ', Pull request The text wasn't set in bold but it used the default black text color instead of the lighter TableViewRowTextColor (UIColor(red: 53.55/255, green: 53.55/255, blue: 53.55/255, alpha: 1.0)) used in the other cells.", Comment on ', ', Pull request Looks good! Thanks for the contribution :)', Merged' 
id=1145335	 'Created ', ', Link to Github pull-request: ', Whoever can apply and test locally first, gents. I tested that the browser and the StorageTests both work in the simulator and on the device.', Comment on ', ', Link to Github pull-request: ', rnewman reviewed on GH and IRC.', stefan: look here first if there are integration issues overnight.', Looks good to me. All builds are happy!' 
id=1206546	 'nextbus.com is an invalid cert. www.nextbus.com works. That means this is ', . We might consider scoping this down to the smallest thing we can, 'cos it's pretty painful.", *** This bug has been marked as a duplicate of ', ***' 
id=1155694	 "Is this still up to be worked on? If so I'll take it", Yes, it's still on the table. We're still figuring out if its scope is going to expand, so please hold tight for a couple of days!", ni on Karen for a decision in the next couple of days.', Stefan tells me this already happened (somewhere else), so sorry Jared, this bug ain't this bug! Morphing this into another work item that might be coming down the pipe. It'll be big, so not a good first bug.", We're leaving this." 
id=1289197	 'The API for this appears to be private, so we may not be able to do this exactly yet. Instead, the Go button could simply have no action for a whitespace-only query.', Created ', ', Pull request' 
id=1220664	 'This is a Nice to Have, but not a necessity. Let me see what I can come up with.' 
id=1231472	 'Created ', Screenshot of the situation (emphasis by red box mine)', Interested in picking this one up?', (In reply to Stephan Leroux :sleroux from ', ) ', Sure! :)', Created ', ', Pull request Here we go!', Comment on ', ', Pull request Looks great thanks for the patch!', Master 26886e0b66eeef687f3c2d58a9f9d5604f93fb3b' 
id=1177493	 'Created ', ', PR', Why do we allow pull to refresh in Settings?', Comment on ', ', PR LGTM', *** ', has been marked as a duplicate of this bug. ***' 
id=1244097	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', There is a bug in the code in `canPerformAction` on the menu handler, but it's not been noticed as that method doesn't get called (more info in the comment on the PR ", ). Once this has been dealt with I'll r+ it.", master ccd133fb55c65ca216d7519cd17d3fd66b46a6f2', Comment on ', ', Link to Github pull-request: ', Sorry, forgot to flip the toggle' 
id=1123424	 'Looks like this is relevant: ', "The pageshow event is fired when a session history entry is being traversed to. (This includes back/forward as well as initial page-showing after the onload event.)" I think this should replace our global "mozCheckReadability();" that currently is in ReaderMode.js', Yeah, IIRC we use "pageshow" for Reader on Android too. One piece of feedback that we get from time to time on Android is "Can the reader check be done sooner?" although this is usually on the initial network-fetch display of the page. People would like to see the Reader icon ASAP instead of waiting for the page to load and display. Just something to keep in mind.', Another potential tip: Watch out for multiple events being fired due to frames/iframes. On Android we do checks to make sure the event/notification is for the topmost DOM window.', (In reply to Mark Finkle (:mfinkle) from ', ) ', I think this already happens on iOS because we trigger things on main frame load. As result the reader button appears almost instantly while the progress bar is still somewhere halfway.', (In reply to Mark Finkle (:mfinkle) from ', ) ', ', I'm not sure if this event actually fires for frames. There also doesn't seem to be a way to check that because the PageTransitionEvent does not contain any target info.", Fix is part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1135180	 'Created ', ', Pull request This adds a join-table for bookmarks <-> favicons. The table is smart enough to query history for a favicon if you don't provide one. It adds the entry to the bookmarks and favicons table, and then updates it own bookmarkId <-> faviconId mapping. I also added a test (basically a copy of the History test we have for the same thing). I also (after a long rabbit hole) removed the files: argument from the Favicon constructor which isn't used anymore here. I left that in since its nice cleanup.", Comment on ', ', Pull request I find this approach (with a separate table, rather than a SQlite view) fraught, but it looks like we do this in another place. I have some questions but nothing major. Perhaps bnicholson can take a look as well? Brian certainly has a keener eye for formatting and Swift style than I do.', Comment on ', ', Pull request Looks mostly fine. I'm curious why id is optional and title isn't.", Comment on ', ', Pull request I updated this to just use the bookmarks table. Much simpler. You mind looking again nick?', Comment on ', ', Pull request I have no major problems with this, but I don't understand how this works over time and am worried that our bookmark -> favIcon association is wrong. I feel like it should be bookmark -> site -> favIcon. What happens if a user creates a bookmark (setting the favIcon.id), and then visits the bookmark and sees a new favIcon. Is the favIcon corresponding to favIcon.id updated already? Does the new favIcon have the same id as the old favIcon?", (In reply to Nick Alexander :nalexander from ', ) ', These favicons won\'t update. i.e. favicon id\'s are associated with a url. If the image at the url changes, the favicon would update. We currently don\'t delete old favicon entries when a site changes what it provides (we should). i.e. if a site changes its favicon links, we\'d have issues right now (that\'s a bug, I\'ll file it). I\'m hesitant to associate bookmark\'s with sites to avoid the complexity when it comes time to do something like "Clear history" i.e. we\'d have to remove Sites that had visits but weren\'t bookmarked I\'d guess, or had no visits or bookmarks.', (In reply to Wesley Johnston (:wesj) from ', ) ', I should also note sdwebimage is doing the disk caching of these for us, and its pretty aggressive. If you visit a site a lot, it probably won't delete the old data for awhile. We should look into providing a maximum age for a cached image for it to use and occasionally forcing it to prune/reload them.", Merged ' 
id=1210788	 'We discussed in triage that this is an expectation mismatch. Probably the easiest solution is to add "and reading list items" to the explanatory text in the empty PB tabs tray.', We're going to get rid of separate Reading List by the time we get to this bug." 
id=1159765	 'Created ', ', Github PR', Comment on ', ', Github PR Nice. Looks good to me.', Merged ' 
id=1169286	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Two questions in the PR.' 
id=1235406	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good! Thanks for the patch.', Landed master c797e5a702acce7dc4e84edbb14ec82690100dd6' 
id=1181716	 'The back/forward breakage is probably due to ', .', Repro or WFM?', Still reproducible. STR: 1) Create a new tab. 2) Go to any URL. 3) Close and reopen the browser. 4) Close and reopen the browser again. 5) Go back. about:home the fails to load. Looks like it's related to localhost pages and multiple restores.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I tested this by going in airplane mode to get an error page and did some restorations and it seems to work for me. Left a comment about something Emily landed earlier this morning that might effect this.' 
id=1248990	 'Created ', ', Link to Github pull-request: ', Saw this when testing the ref test fixes you had a PR for. Just needed to re-record the tests.', master 62d21cd3e488cc75b98249308f2b198e2503185d' 
id=1094233	 
id=1127036	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1189548	 'Created ', ', Link to Github pull-request: ', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Sorry, step 1 should have been "Long press URL bar". This happens when using the URL bar context menu, not the UITextField Paste.', The fix looks fine but DomainAutocompleteTests and testURLBarContextMenu in SearchTests still fail for me.', (In reply to Emily Toop (:fluffyemily) from ', ) ', I ran the tests on iPhone 6, 6 Plus and 5S', Those should be fixed in ', ; can you try with that PR applied?', landed, and I rebased the PR. Everything should be working now with this last fix.' 
id=1139645	 'Created ', After the second + press' 
id=1201105	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Changed data url in google.xml', Created ', GoogleLogosAtTheBottom.png', Merged.' 
id=1269401	 'Created ', AddSearch.zip' 
id=1149683	 'Created ', ', PR: ', This patch adds a long press gesture handler to the reading view button in the location bar. If pressed long, the page is added to the reading list. There is currently no feedback. Asking @darrinhenein and @tecgirl to give this a try and see if we need some kind of visual feedback. (How about a sound clip - of pages turning. Only half joking.)', Comment on ', ', PR: ', LGTM', I filed a related ', : "Adding item to Reading List by long-pressing Reader mode button issues no feedback" Some ideas for feedback form included there.' 
id=1162736	 'So I notice the current behavior is that by default the Home Panel screen hides the toolbar. When the user navigates to a link, the toolbar appears. In the case of navigating to about:home, the toolbar is shown during the Home Panel then flickers away and comes back when you navigate. Should the Home Panel always display the toolbar?', Ah ignore that last comment. I see the issue now :)', Created ', ', PR ', Doesn't seem to be an issue anymore on latest master. I think the change I made to the constraints on on the header/footer views in the past week resolved this issue. Let me know if you can reproduce it.", Still seeing this (what you described in ', , I think). Were you looking at something else in ', ?', Strange -- I'm seeing the issue in ", as well now. I'll investigate.", Created ', ', PR ', Comment on ', ', PR ', Looks good to me. Not sure what the `url == AppConstants.AboutHomeURL` check was for...maybe an artifact that got left behind by refactoring at some point.', Merged' 
id=1192909	 'Created ', ', Pull request on Github' 
id=1213623	 'Can you grab crash reports from the device via Xcode?', (In reply to Richard Newman :rnewman from ', ) ', sorry, my mac desktop's SSD died; waiting for replcaement, will provie it as soon as it gets back.", Sorry, I can't find the firefox log in the list of logs (I use the official 1.0 release). I do have my ipad configured to automatically send crash report, so hopefully you would have received it (accessed via XCode -> Organizer -> selecting the tab crashes. interestingly, 4 times prior this I had tried to start FFiOS and it crashed very shortly after showing the mozilla start image. I then when into xcode and deleted some logs (other application crashes) and now it starts again ! I have now enabled Aurora 1.1 on my iPad, will post a crash report if I can find it", Can't reproduce the iPad crashing but I got again the crash on startup. It seems that it's due to iOS killing the application because it failed to open within 20s. Crash report attached and Screen capture once it restarted (after the 3rd go)", Created ', Client 29-10-2015, 7-39 AM.crash crash report', Created ', 1.jpg Screen capture showing crash when it did end up starting', I really want to see that storage stack's symbols. It has an fsync at the top\u2026 Also interesting that Breakpad is blocked on reading prefs\u2026", Thread 0: Client Frames: BrowserProfile.(places in _A76D479B096E6A9510AC7CA65ECAC689).getter (in Client) (Profile.swift:249) protocol witness for Profile.history.getter in conformance BrowserProfile (in Client) (<unknown>:256) specialized BrowserViewController.viewDidLoad() -> () (in Client) (BrowserViewController.swift:247) @objc BrowserViewController.viewDidLoad() -> () (in Client) (<unknown>:0) Thread 2: Storage Frames: unixSync (in Storage) + 76 sqlite3WalCheckpoint (in Storage) + 2072 sqlite3WalClose (in Storage) + 128 sqlite3PagerClose (in Storage) + 92 sqlite3BtreeClose (in Storage) + 320 sqlite3LeaveMutexAndCloseZombie (in Storage) + 176 sqlite3Close (in Storage) + 428 SQLiteDBConnection.(closeCustomConnection in _3F4389F18684E136A114953F0C3F855C)() -> NSError? (in Storage) (SwiftData.swift:385) SQLiteDBConnection.deinit (in Storage) (SwiftData.swift:337) SQLiteDBConnection.__deallocating_deinit (in Storage) (<unknown>:0) SwiftData.deinit (in Storage) (<unknown>:0) SwiftData.__deallocating_deinit (in Storage) (<unknown>:0) SQLiteQueue.init(db : BrowserDB) -> SQLiteQueue (in Storage) (SQLiteQueue.swift:20) SQLiteQueue.__allocating_init(db : BrowserDB) -> SQLiteQueue (in Storage) (<unknown>:0)', As for Breakpad, looks like it's running synchronize on NSUserDefaults which makes sure that values we store get persisted. See ", . I don't think should be causing any issues.", This needs some thought. We do manually checkpoint when tables are created or updated, but not otherwise, so we're reliant on automatic WAL checkpointing during use. I would be very surprised if replaying the WAL took 20+ seconds, but I guess it's possible. If that were the case, it would manifest in this way. The default page size is 1024B. The default autocheckpoint limit is 1000 pages: 1MB of data in the WAL. The best way to repro this would be to do a large history sync that writes just under 1MB of data into the WAL then crashes. Then upgrade Firefox such that a database schema update occurs (because that's what's happening in the wild). If that takes more than 20 seconds due to filesystem contention, we'll be killed with a stack like this one. Other possibilities: It's possible that our DB recovery strategy -- move and recreate -- is wrong and is interfering with WAL shutdown. It's possible that we have a race somewhere else -- e.g., in our file handling around the DB itself -- and we're not able to checkpoint. It's possible that these devices are tickling a sqlite bug or a sqlcipher bug.", Notes: * On HFSX (iOS) we should be using a page size of 8192, or even higher (32KB). SQLite defaults to 1024. See the ol' ", . PRAGMA page_size=8192; VACUUM; * We should be more tightly controlling our WAL: ', PRAGMA wal_autocheckpoint = 16; /* number of 32KiB pages in a 512KiB journal */ PRAGMA journal_size_limit = 1536; /* 512KiB * 3 */ * Consider vacuuming after Clear Private Data.', Default: PAGE SIZE: 1024 AUTOCHECKPOINT: 1000 JOURNAL SIZE LIMIT: -1', Jean-Yves, do you have Sync set up?', Created ', ', Pull req.', (In reply to Richard Newman :rnewman from ', ) ', Yes. Isn't that the whole point of using Firefox on iOS ? :)", Also, maybe things like Profile.history.getter should return a deferred and do their init/open work on a separate thread to not block the main one.', (In reply to Stefan Arentz :st3fan from ', ) ', Yes, something like that. We currently rely on laziness and backgrounding elsewhere to make sure things don't run on the main thread, and of course the DB work is done on the DB queue, but there are probably places that end up blocking the main thread if, e.g., profile.db is still dispatch_once'ing. Note that making that change has the potential to be a little delicate; we'd use a single Deferred to bottleneck access, but we'd still need the getter to ensure that we only try to initialize the filling value once.", PR updated. What we do: * Part 1: switch to a 32KB page size, 16-page checkpoint size, and 48-page journal limit in SwiftData. This aligns with the recommendations for use of SQLite at Mozilla (which apply just as well to iOS devices as they do to the broad range of desktop machines we target). As noted in ', , this should keep our journal smaller, avoiding these long replays, and should also reduce I/O time in general due to the larger page size. * Parts 2 and 3: checkpoint on the DB queue after we write in bookmark and history syncs. This reduces the likelihood that we\'ll have a big WAL to replay later: we\'ll never finish a history sync without emptying the WAL. * Part 4: after a Clear Private Data that wipes history, issue a VACUUM against the DB. I also added a pointer to the "err, don\'t do that" bug -- with Sync enabled we shouldn\'t just clear everything.', The revised PR looks good just that part 4/3 are backwards in your commit history. I did some reading on WAL and checkpointing and saw the 'Avoiding Excessively Large WAL Files' second near the bottom of this page: ", . Sounds like we could be experiencing checkpoint starvation or failure during large writes where checkpointing is cancelled due to other connections being made. For example, syncing on start collides with various reads across the app which cancels the checkpointing operation constantly, making it grow very large. I seems like this patch would help in alleviating that right?', (In reply to Stephan Leroux :sleroux from ', ) ', Nah, GitHub just shows commits in date order. They're in the right order in the branch. ", We only have a single connection (SwiftData manages and it and serializes queries), so *in theory* we shouldn't be doing that. But: WAL automatic checkpoints do interact with both readers and writers -- long-running reads will block a checkpoint. And: large WALs make reads slow. So it's possible that Top Sites is taking more than 20 seconds to query because of a huge WAL on a slow device... and because Top Sites has an open read transaction we can't autocheckpoint the WAL! Top Sites querying is one of the earliest things we do, thanks to commits like 17417c5. So once it takes more than 20 seconds to run that query, we'll never recover.", Comment on ', ', Pull req. Part 1 is voodoo with all those magic numbers, but looks fine to me!', Resolving this one. We can open another bug if we have other problems! 4dbacea' 
id=1144354	 "Does this work on-device? I recall some oddities in the Simulator's handling of locales, so trying to decide if this is a bug-bug or a doc-bug.", None of us (l10n-drivers) are part of the TestPilot program yet (I don't have an iOS device), so we can't confirm if this is a bug-bug.", Created ', iOS Simulator Screen Shot 18.mar.2015 13.07.39.png I ended up installing XCode and trying, seems to work fine here. One thing I\'m noticing: you should at least see "Gestore", not "Carrier" in the top left corner, so something might not be right in your simulator.', Sounds important!', Or maybe not, read ', Just tried it on device and accept-lang header settings are respected properly.', (I think it's either INVALID or WORKSFORME)" 
id=1204541	 "I've tried to use the MPNowPlayingInfoCenter API for updating the in-progress video/audio info in the control center when the app goes into the background but the API doesn't seem to be doing anything. This might be an issue with how WKWebView presents it's video player since it's different than a normal MPMediaPlayer. I've also found this SO thread mentioning it might not be possible: ", Anyone have any other ideas? I've also posted a question on SO: ", After some testing, it seems we match Safari's behavior where the control center playing information is clearing when the private tab is closed. Marking this as WONTFIX but keeping an eye out to see if we can do better." 
id=1272224	 'This is reproducible in Safari as well. It looks like this is recently fixed in Webkit ', Resolving as WONTFIX as it is not our bug.' 
id=1152885	 
id=1164904	 'Looks like the key chain access group is automatically and correctly chosen if it is specified in the entitlements. What needs to happen is that we use the same serviceName everywhere. This defaults to the bundle identifier, which is obviously different between main app and extensions.', Fixes as part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1217562	 'Created ', ', PR: ', This patch updates the following dependencies to more final versions: * Alamofire * XCGLogger * Snap The first two used a beta version that is causing trouble with app store submission. (iTunes Connect will reject versions like `3.0b2`) The latter was pointing to a swift-2.0 branch that is not used anymore, so I updated it to their last stable version.', Comment on ', ', PR: ', r+ if (a) tests pass, and (b) you bump Cartfile.resolved, too.', Moving this to 2.0. I'm running in incompatibility problems with Alamofire because their API changed. We missed months of updates between their swift-2.0 branch and the current stable 3.1.1 so I think it is too risky to do now. For the 1.2 release I will just fix the version numbers manually." 
id=1228828	 
id=1175134	 "I'd like to accept this bug.", Created ', ', PR: ' 
id=1242077	 "Can't reproduce." 
id=1187176	 'This is actually really bad.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Comments on the PR.' 
id=1253656	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Removing review for now until rnewman's comments are addressed.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looking good! I'm confused about a few things, though -- left some comments/questions in the PR.", Created ', ', Link to Github pull-request: ', Also added comment: ', Created ', ', Link to Github pull-request: ', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks great. Thanks!' 
id=1208999	 "The user didn't bookmark them, so not a bug." 
id=1276891	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1157553	 'Hi Richard, unfortunately this report is not very useful because it does not describe the problem well. If you have time and can still reproduce the problem, please read ', and add a more useful description to this report.', Andre - While true, ', is not full of helpful descriptive text, I think this bug is a placeholder for Richard. It's likely that no one else but Richard will be taking this bug.", Pre: 3456084', (Sorry, that\'s "pre" stuff.)', Time to capture some notes about visits. The Sync history record format 1 is "open-world": 1. the set of items is not comprehensive -- you might have visited URLs that are not on the server. That\'s true for two reasons: clients upload no more than 5,000 history items (my profile has over 100,000), and no more than 30 days\' worth; and the server discards history items after 60 days 2 . 2. the set of visits for each item is not comprehensive -- you might have visited a URL more times than the history record indicates. That\'s because desktop includes no more than 10 visits in a payload 3 . Changing these two assumptions would be impossible: 1. 100,000 history records is prohibitive to store or download for each user. 2. the max size of a Sync record isn\'t enough to store 4,000+ visits (apparently I visit Twitter and Facebook a lot). As such, my neat formalism -- throw away remote visits and replace them every time we download a changed record -- can\'t be used. Furthermore, we\'re not able to delete individual visits without extending the record format to include a notion of a deleted visit. That\'s possible, but not something to address right now. As a result, we always need to do additive merging, and we need to carefully consider how deletion works -- it\'s not possible for us to tell other clients to throw away all visits but _these_, only to throw away all visits for a URL, and only if they\'ve already synced and have the right GUID! *shakes fist at Sync* 1 <', > 2 <', > 3 ', .', Created ', ', Pull req. Time to get started on this. One thing still needs to be done, which I'm about to file: we currently record all visits with type = 0 (unknown), which means we won't sync them. N.B., the patch order makes much more sense when not viewed on GitHub.", Comment on ', ', Pull req. Comments on GH up to part 5. tl;dr: this looks pretty great. I'm a big fan of commented SQL over abstraction. Perhaps I delude myself. This needs a moderate dose of test writing, which I will consider doing myself in exchange for money. I think bnicholson or wesj should be involved in the visit tracking review.", Fortunately Wes reviewed the visit tracking stuff yesterday :D Swipe-to-remove is cargo-culted from bookmarks, so doesn't really need review.", Still to do before I land this: * Unhook the tabs trigger. Still to do before I enable this: * Make sure uploading of deletions occur. I think it doesn't. * More tests and testing. * Implement a very basic scheduler to run syncs.", Merged: 78668bd Will file a bunch of follow-ups.', *** ', has been marked as a duplicate of this bug. ***' 
id=1195204	 'Boris, do you know if this is a final decision made by Apple for iOS 9, or if this might be a glitch in the current betas? The beta cycle is not over yet, and VoiceOver has seen some refinements over the past few iOS 9 builds that make me feel cautious about jumping to conclusions here.', I do not know whether this is a final decision (and whether this is a decision at all), but after thinking again about accessibilityElements, I concluded that I might have simply relied too much on the current behavior of iOS 8 than on the documentation - I could not find the documentation is not specific about what happens when you return an element from accessibilityElements that is hidden, so I feel it is simply a little bit of a gray area. I figured being explicit in code about the elements desired as children is the safest approach. One other possibility is that we might not be posting AXLayoutChanged when hidden status changes. But I think this problem was present right after the launch of app, i.e. when the lock image has never been displayed yet (so no way for VoiceOver to have "memorized" it), so I am inclined to think this is not the case. Maybe a question to Apple\'s accessibility developer list about what is the intended behavior in such a case (i.e. returning `hidden` `UIView` from `accessibilityElements`) could help.', (In reply to Boris Du\u0161ek from ', ) ', "I could not find" shouldn\'t have been there :-)', Boris, thanks! I am fine with being explicit about behavior, but I think we should still ask the accessibility dev list whether the changed behavior in iOS 9 is intentional. Are you willing to do that? You are into the code more than I am.', It starts to get more interesting, I probably jumped to conclusions too quick. I just tried a minimal example to return a mix of hidden and non-hidden UIViews from accessibilityElements and VoiceOver on iOS 9 behaves as I would expect (and not as it behaves in Firefox's location bar) - it presents only the non-hidden elements. So it might be about AXLayoutChanged after all. Will look into it more to be more positive about what is going on (and also about what is *not* going on). Stay tuned :-)", I can confirm that these buttons are always accessible to VoiceOver while swiping, but not by touch exploration. iPhone 6, latest iOS 9 beta. More irritatingly, the "lock" icon is the first element in the accessible sequence, so it gets VoiceOver focus each time the app is opened and one is on the Home screen of Fennec.', Created ', ', Pull Request I know this is at the eleventh hour (or maybe rather "past midnight"), but if this could make it into 1.0, it would be great. And for the record, testing on iOS 9 with Xcode 6.4 sucks :-) - Archive (complete recompile every time) - then Export Ad-Hoc - then Upload app to device in Xcode Devices window... (i.e. Cmd-R does not work - complains about unsupported iOS version)', We've already cut an RC1, so I'm afraid this'll only go out in 1.0 if we need to cut another release for some reason (either before hitting the big red button or if we're rejected and need to resubmit). Otherwise it shouldn't be long before our first point release. We're aiming for fairly rapid releases for bug fixes. Thanks for the painful testing!", Marco - you can see the commit message for a bit more details, but to cut it short: AXLayoutChanged does not change a thing in this case; I had to manually filter elements returned by accessibilityElements (which btw. I think I started using in the first place to influence order of items when swiping...)', (In reply to Richard Newman :rnewman from ', ) ', you mean the one in the suit case to which only the President has the codes? (just kidding ;-) ', This is great :-) Thanks for all the release info too, good to know.', Comment on ', ', Pull Request Looks fine to me. Thanks!' 
id=1168194	 'Created ', ', PR ', The status bar overlay ended up scrolling away with the content. I've changed it so now it's fixed to the top and changes it's height depending on the topLayoutGuide's length which changes when the status bar frame notification fires.", Comment on ', ', PR ', Great!', Merged.' 
id=1311082	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1221972	 "Let's investigate, see if this is widespread or easily reproduced. If not, we can punt it into the future.", I've been able to reproduce in the simulator if I'm really quick. What's happening is the popover controller is getting set to position (0, 0) when the long press event fires: ", The docs say that locationInView finds out the gesture's touch point in the context of the given view: ", : My guess is that in this transitional state, the gestureRecognizer in the previous page is firing but the page the user is viewing is now the new page which doesn't map to the recognizer anymore. In this scenario, we probably should disable the popover if we're long pressing during a page load since when the page does finish loading, the context menu won't be pointing to the correct item even if we could find the correct position.", Created ', ', Link to Github pull-request: ', Patch for ignoring context menu when page is loading.', Not 100% sure if this is a solution that we want. I'm playing with Safari and I think it manages to transfer the long press gesture to the next page's context but I might not be fast enough in triggering it.", Haven\'t tried this yet, but I assume this means we can\'t use the context menu until the page has completely finished loading. I wonder if that will be a problem, particularly on slower connections? A couple other ideas that come to mind: * Keep track of the web view state using the navigation delegates so that we can get a more fine-grained load state other than just "loading" or "not loading". We could, for example, update some state variable for didStart, didCommit, didFinish, etc., and then only show the menu if it\'s didCommit or later. * Bail if the position given by locationInView is (0, 0). This will only work if the position is always (0, 0) in these cases, and it\'s a bit hackier since we\'d be basing the fix on this indirect state, but it would be pretty straightforward (and more reliable during page load) if it worked.', I did some more investigation in this bug and found another issue: 1. Navigate to www.bbc.com and select and article link 2. Start a long press gesture right afterwards 3. Hold down long press until after page loads 4. Let go of long press. The context menu appears again at the top left at position 0, 0 but the contents of the context menu is that of the new page and not on the originating element. This is probably being caused by how we trigger the long press events through our JS. The touch start event fires in the new page's JS and when the long press is fired it reads the new content. Unfortunately I don't see a fix for this since we're limited to using JS to handle this sort of thing. From looking at the WebKit gesture handling code, it looks pretty robust with checks to make sure the point that is touch is valid and returns the correct element info. It would be great if we can latch onto that event if possible.", Do you think the second option in ', would work? That is, bail if `gestureRecognizer.locationInView(view)` is (0, 0).', Created ', ', Link to Github pull-request: ', Thought I'd give this approach a try, and it seems to work well enough.", Comment on ', ', Link to Github pull-request: ', Works for me. Good find though on the touchstart firing twice.' 
id=1246636	 'Not reproducible in Safari.', Tested on latest master and this issue is no longer reproducible' 
id=1125820	 'duplicate of ', ????', *** This bug has been marked as a duplicate of ', ***' 
id=1136488	 
id=1187490	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1178888	 'Lars, Lonnen: what plates would we need to start spinning on your end to make this happen?', FYI I did some exploratory work this morning into integrating Breakpad and was able to get a version of it compiling into a dynamic framework so we can pull it in with Carthage. I had a talk in the #breakpad channel with ted/rhelmer about how to move forward on this. One thing I wanted to confirm before moving forward is if this will interpret swift crashes correctly as well.', Socorro, in some of its older modules, has hard coded OS names. The amount of effort in getting Socorro to support iOS crashes hinges on what strings breakpad/stackwalker use identify the OS when processing a crash. I don\'t recall the relationship between OSX and iOS. If they share the same roots and an iOS crash identifies itself as being "Mac OSX", then Socorro problems will be minimal. Otherwise we have three options: 1) sweep the Socorro codebase and eliminate the hard coded OS names heavy 2) add "iOS" to the hard coded legacy modules less heavy 3) use processor rewrite rules to rewrite "iOS" as "OSX" and allow those two OSes to be lumped together trivial Lonnen will have more of an idea of how this fits into the grand scheme and schedule of Socorro development.', Next step is to get a sample crash or five from iOS. I'd like to support iOS and I think we can use transform rules to get there quickly. Need a better sense of scope.", What would you need to get this started from the iOS side? I've done some preliminary work in getting Breakpad into our iOS project. Would we need to fire away some crashes to crash-stats? Alternatively I could generate crash reports locally from Breakpad and send them over.", Please generate a few and send them our way. We're flexible on the means for that... I'm not sure how big they are.", (In reply to K Lars Lohn :lars :klohn from ', ) ', There's a bug around somewhere to do that in the long run, but I don't think we need to rush that atm. ", I think that's what we should do for now, just like we already are doing it for Android->Linux.", Created ', iOS Crash.zip I've integrated Breakpad into the iOS client and managed to grab a crash from the device. I've zipped up the .dmp and breakpad symbols along side of it. I'm in the middle of getting the app to start dumping crashes to the server so I'll let you know when that's setup,", I have Breakpad working with Firefox for iOS but it seems the only thing that's missing is a proper server URL to start submitting our crash logs to. I've tried using ", and ', but I'm getting an internal server error back. Any clue on what the URL should be?", Created ', crash-reports-log.chls I've attached a log of the request/response from Charles (", ) if that helps with debugging.', Are you using the parameters that e.g. ', has on there?', Ah no - forgot the query params. I've added them in and still getting the 500 internal server response: POST /submit?id=org.mozilla.ios.Fennec&version=1.0&buildid=26 HTTP/1.1 Host: crash-reports.mozilla.com Proxy-Connection: keep-alive Accept-Encoding: gzip, deflate Content-Type: multipart/form-data; boundary=---------------------------000041A710D63AF1 Content-Length: 159851 Accept-Language: en-us Accept: */* Connection: keep-alive User-Agent: Client/26 CFNetwork/711.0.6 Darwin/14.0.0", This might be a silly question but do I need an API key with crash-stats in order to submit crashes to crash-reports.mozilla.com/submit? If so, how would I get one? I also notice that the application ID we're using for FF is string formatted like so: {ec8030f7-c20a-464f-9b0e-13a3a9e97384} and I'm sending the bundle identifier. Is this another requirement?", Ah nevermind - found the problem. Breakpad by default expects a Google server. I've updated it to use Socorro and it's reporting fine now. Here's a test exception I was able to send: ", Created ', ', PR ', Comment on ', ', PR ', Going to move this PR into a sub bug and change this to meta', Looking at ', - first, it\'s awesome that we have something working there! Second, the "product" is right now set to "Client", which is quite suboptimal. It should be something like "FenneciOS" or similar. Also, we should send a "BuildID" and "ReleaseChannel", even if we generate something that just sounds right, as we have a lot of stuff on the crash-stats side that expect them. A BuildID that is based on a timestamp of when the build was compiled would be great, say 20150722033000 for a compile that started on 2015-07-22 at 03:30:00. The ReleaseChannel can be just "release" for release builds, possibly a "nightly" for daily test builds, basically anything that fits what desktop and Android Firefox have so we can run the same kind of analysis functionality. Also, what\'s confusing is that there is a "Version" field set to 26 and a "version" field set to "1.0" - it would be best to have a "Version" field that is whatever we consider the official version of Firefox for iOS, as that\'s what we look at in analysis - if a "version" exists as well, it should be the same as "Version". See the Metadata tabs of e.g. ', (FennecAndroid nightly) or 8c94b771-c52d-4ca1-9874-7bf032150720 (Firefox release for Mac OS X) for what fields we send on other products.', Hey Robert, I've added the following parameters so it's in parity with Android: ReleaseChannel Vendor ProductName I can also add BuildID but was wondering if you knew where the script that generates this for Desktop/Android is on mozilla-central. I can just copy that over and add it to our build chain. At the moment I can send the app's bundle identifier as the ProductID but it looks like Android and Desktop have a ProductID formatted like so: {3c2e2abc-06d4-11e1-ac3b-374f68613e61}. Should I be sending a similar token for iOS?", From all I see, ', is what's generating a build ID when none is fed to the build process, called by ", - but for our nightly and release builds, an ID is actually fed into the process by the releng scripts. Ben, can you help regarding where the releng process does that? sleroux, I think you probably can use the simple variant that make-platformini.py is using. Regarding the ProductID, for Gecko applications it's either a UUID in the form you pointed to above or a string like e.g. ", - I think we should prefer the latter form.', Thanks for the info Rob. I've attached a similar date generation script for the BuildID to execute on every build so I don't think I'll need any additional info on that. It runs as a pre-action before compiling the application so there shouldn't be any additional work needed. As for the AppID, I'll send over ", .', That sounds good! Also clearing the request from Ben in this case.', We're about to put out a build with breakpad/crash-stats included to our external testers and was wondering a couple of things: 1. Is there a simple way for us to get a list of crash reports for a given version/build number without additional API work? So far I've only been able to query by a specific ID. 2. For symbolication, who would be the right people to talk to attach the symbols to the test build? Is there additional work needed for this to happen on the Socorro side? Thanks!", (In reply to Stephan Leroux :sleroux from ', ) ', You just need to get a token with symbol upload permission, and then you can upload symbols to Socorro's symbol upload API. Log in to ", with Persona, then file a bug (CC lonnen) asking for symbol upload permission for your account (like ', ). Once you have that you can generate a token ( ', , make sure to select "Upload Symbols Files"), and then you can follow the directions at ', or use a script like ', to upload a symbols.zip file. Let me know if you have any other questions about that.', (In reply to Stephan Leroux :sleroux from ', ) ', Queries are the way to go right now, we'll need to set up a product in Socorro to make things easier and we'll need to feed release information to Socorro in some way. I'm on vacation until Monday, let's clear the details for this next week, it's all server-side so should not block the build itself. That said, Rob, are you able to help here with what we need to get this up on Socorro? For the symbols stuff, Ted is the better contact anyhow. :)", (In reply to Stephan Leroux :sleroux from ', ) ', You should be able to search by version and buildID on ', does that work? crash-stats also has an API at ', but I think the search should do what you need. ', I think ', and ', cover this.', Yup - being able to filter by product/buildid is perfect for now. As for uploading symbols, how would I upload symbols for different architectures (armv7/arm64) and should these files follow some sort of naming convention? Thanks again for all the help on getting this setup - almost there!', (In reply to Stephan Leroux :sleroux from ', ) ', Redirecting this question to ted - I think we have different debug IDs for different architectures, but not sure. ', Hey Ted, I wanted to follow up about how we can get our iOS logs symbolicated. I have symbols for some of the builds already on crash-stats but was wondering what needs to happen to get the logs that are already there symbolicated.', (In reply to Stephan Leroux :sleroux from ', ) ', We should be able to just reprocess the crashes, now that the symbols are available. Generally crashes are processed right after being collected, and we re-process if something changes (symbols, processor code, etc.) Should we re-process all crashes with "iOS" as OS name, and how far back?', I have the symbols uploaded for version 1.0.0 buildid 30, 31, and 32. I'm not sure if there is a special format for this to automagically happen but I've prefixed each symbol file with the release channel like so: aurora.1.0.32.armv7.sym Where aurora = release 1.0 = version 32 = buildid armv7 = architecture", Ah, it's not well-documented (and peterbe has been bugging me to write the docs I said I'd write), but the symbols need to be in a specific directory structure, specifically: <filename>/<debug id>/<filename>.sym If you look at the first line of the .sym file (starts with MODULE) yo ll see the debug ID (the GUID there) and the filename is just the filename of the binary or dylib. There's a concrete example on the Breakpad wiki: ", The stackwalker looks up symbol files by using the filename and debug ID from the minidump. Let me know if that helps or if you need more info.', For the time being, I'm going to mark this as WONTFIX. Apple's Xcode crash reporter has been giving us all of the information we have needed so far (sybmbolicated crashes, crash rates, etc). When we want to investigate additional crash reporting options, we can reopen." 
id=1199808	 'Created ', ', Link to Github pull-request: ', Does this turn off optimization for release builds? Also, IIRC we turned on whole-module optimization because the alternative is per-file, which is slower because of linking. Does this regress our build time?', (In reply to Richard Newman :rnewman from ', ) ', No, WMO is still enabled for all non-Debug builds. ', After doing a clean and build, build time seems about the same to me (~1 min for full build, with following incremental builds taking <5s).', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Actually, this is quite a bit *faster* than before. I'm pretty sure incremental builds were taking 15+ seconds for me before." 
id=1267205	 'Only surface if the action taking place is at risk: when attempting to manage\r If state is good (connected, stable) \u2014 no message, hooray!\r If state is stale (connected but unable to sync) \u2014 provide messaging and SUMO link on first action instance and update Sync status in Settings\r Do not let user update synced data \r If state is bad (no successful sync) disable all record editing capabilities \u2014 provide messaging on first action instance and update Sync status in Settings \u2014 this is the Read Only state \u2014 we can\u2019t allow record changes if they risk being overwritten if a successful sync ends up taking place. \r \r Statusbar notification message \r Show on action, first instance only, auto-dismissal\r \r STRINGS WIP \u2014 SUGGESTIONS WELCOME\r \u201cFirefox is unable to sync\u201d\r \u201cFirefox is experiencing issues\u201d\r \u201cUpdating bookmarks is currently disabled\u201d\r \u201cFirefox is unable to sync your bookmarks at this time\u201d\r \u201cSync currently unavailable\u201d\r \u201cBookmark sync currently unavailable\u201d\r \u201cFirefox Sync is unavailable\u201d\r \u201cSync failed\u201d ', :tecgirl the designs here call for a 'warning' symbol on the settings page in both amber and red. Do you have an asset for that? Also, what are the exact colours for amber and red?", Created ', ', Pull Request', Comment on ', ', Pull Request Left some comments mostly around the BrowerProfile changes. Front end stuff looks good!', (In reply to Emily Toop (:fluffyemily) from ', ) ', Amber: R245 G166 B35 A100 Red: R255 G0 B26 A100', Created ', Caution.zip Caution assets in amber and red.', We need a link to the SUMO page for troubleshooting sync issue on iOS. I've been told that you are the person to ask Joni. If you could provide the link to where it will be we can add it to the code before the page is ready. Thanks.", Comment on ', ', Pull Request :fluffyemily \u2013 what's the best way to test this with the errors?", Created ', Sync Status Fail', Created ', Sync Status Stale', Created ', Sync Status Stale Long Text', (In reply to Robin Andersen :tecgirl from ', ) ', :tecgirl I've attached some screenshots of the different states to demo it.", (In reply to Emily Toop (:fluffyemily) from ', ) ', Hi Emily, here's the link you can use in the code: ", It will redirect to an upcoming support article.', Comment on ', ', Pull Request Left some additional feedback and talking points on the PR.', This was because all of the other syncs are referred to in the singlular (tab, history, reading list) and so I felt it would be consistent to refer to bookmark sync in the same way. This can be changed. ', I will update these comments ', I understand. I will ask :tecgirl if she has any preferences for how the language should change', (In reply to Emily Toop (:fluffyemily) from ', ) ', Sorry, I should have specified that my doubt is for (boormark, tab, login), while it obviously make sense to have singular for History.', There are a few localization issues with the strings landed in this bug. Since we're close to the string extraction, I think it would be important to at least improve the localization comments. ", And then use Bookmark, Tab, Login, History to replace the variable. My first question is why singular, "Bookmark" vs "Bookmarks"? Besides that, it should be specified in each of the 4 strings (module names) that they will be used in SyncState.Partial.Title. SyncState.Partial.Title is almost impossible to localize as it is, it\'s a natural sounding sentence only in English. It might be worth providing an alternative in the comment, e.g. "Sync\'s module for %@ is experiencing issues", or "There are issues with the module Sync - %@". One final question: * "Sync is offline", "Sync is unavailable": Sync is the feature name. * "Sync failed", it sounds more like "sync", as an abbreviation for synchronization. Does that make any sense? It doesn\'t help that "sync" is always spelled lowercase in the comments, in past comments the feature was called out as Sync.', (In reply to Francesco Lodolo :flod from ', ) ', I am unsure how to proceed with these strings. Yes, Sync is the feature name, but that is because it synchronizes your account and so is a synchronizer. When you are unable to synchronize, Sync is unavailable. When synchronizing your account fails, Sync has failed. I am struggling to come up with phrasing that separates the two. How about, * "Sync has failed to complete" * "Sync is experiencing issues syncing %@" (i.e. Sync is experiencing issues with Bookmarks) I\'ve made the component names plural for consistency.', Created ', ', Pull request', (In reply to Emily Toop (:fluffyemily) from ', ) ', I think for "Sync is offline/unavailable" is quite easy to understand that the reference is to the feature name, not the action. I\'m mostly asking to be consistent in the comments. For example, for "Sync is unavailable" the comment is "Title sync status message when sync failed to start.", it should be something like "Title for Sync status message when Sync failed to start." ', What about "Syncing has failed"? As I said, it sounds more like the action than the feature. Try imagining that the feature name is "Persona" (internal joke intended\u2026) instead of "Sync": does the sentence still work? If it does, then it\'s good. In this case, I don\'t think "Persona has failed to complete" sounds great. ', As long as you specify in the comments how strings are used, and they\'re not reused elsewhere, it\'s good. About reuse: in this case %@ is accusative "sync bookmarks", some languages might need a different form for "bookmarks are syncing" (nominative).', Comment on ', ', Pull request A couple of notes on the comments but it looks good to me, with the only doubt about "Sync failed to complete".' 
id=1279455	 'Created ', ', Pull request', Comment on ', ', Pull request Feedback in the PR', merged: ', v5.x 16206ba' 
id=1147426	 'Created ', Safari (Screenshot)', Can you retest this.', for reference, ', probably fixed this.' 
id=1224618	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1161210	 'Created ', ', Pull request' 
id=1170581	 'Created ', Screenshot 2015-06-02 11.15.18.png', Does this need to be sec-sensitive?', No it doesn't. Sorry not sure how that flag got turned on :/", Created ', ', PR ', Added some changes to improve the startup time of the app. Removed the layoutIfNeeded call when updating the tab count as it's not needed. Also removed the showToolbars call that was happening when the user selects a tab as the toolbars will always be shown if we are selecting a new tab and not calling it avoids a layout pass.", Merged.' 
id=1097401	 'Good enough.' 
id=1128363	 'Created ', ', Pull request', Created ', ', Pull request I updated the PR with some of your comments. Thanks nick!' 
id=1141843	 "In order to make batch downloads interruptible, we very likely want to extend the Sync 1.5 protocol to return not just an offset, but also an absolute timestamp/version for resuming. I'll chat to Tarek about this sometime.", Part 0: getting tests and such working again for the code I landed last year. ', Incremental merge of work so far: ', Done!' 
id=1151700	 'Seems like this is fixed in Version 1.0 (7)' 
id=1215762	 'Afaict the behaviour in 1.1 is the same as in 1.0.1. We only show the toolbar if the BackForwardList is not empty. In other words: when you can go forward.', Darrin, does this really mean: "The user should not be able to hit back on the first page they visit to go to the home panel they came from." ? I think it makes sense to not have Top Sites always as the first (fake) item in the BackForwardList. But that is a change from what we hae been doing since 1.0.', Created ', ', ', Here's a simple patch that removes 'inlining' of the the HomeViewController. We've had this in since 1.0 and I think it had a purpose back then but not sure if it was something we wanted to keep in for 1.1.", Stefan \u2013 You should be able to go back from the first page, but we remove the toolbar once yo re back on the home panel (so you can't go forward, but you would be on home panel that you just left so the link you followed *should* be there).", Comment on ', ', ', This works as expected, which is great! Moving forward we should look long and hard at the home panel state preservation, i.e. if I start from a nested folder in Bookmarks, going back should show me that folder I came from. This is good to land for 1.1 though :)', Comment on ', ', ', LGTM', Don't think this is a regression -- we've always shown the toolbar after going back to the home panel since we didn't want to lose the ability to go forward. Do we really want to break that? If I have a lot of history built up in my back/forward list for a tab and I hit back one too many times, I have no way to get back to those entries. It'd be a lot safer to simply prevent people from going back to the home panel at all once they've gone to the first site for that tab, and this is what Firefox desktop and Chrome do. Would that be an option?", Created ', ', ', This patch fixes the tray animation to account for navigating back to a home panel when there is a toolbar.', Comment on ', ', ', LGTM', Comment on ', ', ', Nice. Simple fix :)', Comment on ', ', ', for the jank.', 656723244e91308fccae3aaffb872929c07053d1 Merged' 
id=1163282	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks for patch. Let's get it reviewed.", Ignore my last comment. Was for a different bug.', Created ', ', PR: ', This patch makes sure that the restored `selectedIndex` is in range of the tabs we have. If it is not then we open the first tab, if available. (It is unclear how this could happen though, but I think we got crashes on this code. So this makes it more robust.)', (In reply to Stefan Arentz :st3fan from ', ) ', My guess is this was happening from closing all tabs, then closing the browser. ', prevents this, but that just landed last Wednesday, so that fix probably wasn't in last week's build." 
id=1173105	 'Again, ', allows tapping the magnifying glass to access these settings. Not perfect, but certainly an improvement.' 
id=1227686	 'Created ', 2015-11-21+10.42.56.png', LOL hello again', Created ', ', PR - tryna get Darrin's approval first", oops, wrong bug i closed hehe', Comment on ', ', PR - tryna get Darrin's approval first Not exactly what I had in mind, I dont think it should come in front of the table view. See Mail.app and the refresh behavior it has... refresh view should come from behind the table, and disappear behind it (and in fact, collapse) when the user scrolls back up.", *** ', has been marked as a duplicate of this bug. ***', I'm guessing this was already fixed on another bug/task? From what I see the UI looks fairly different from the reported screenshot. Also, I see the comment on GitHub: (", ) "@bkmunar I believe this has been resolved as part of the panel clean up work you did. Is that correct? If so, feel free to close this." It looks to me that we can close this ticket and GitHub PR as well.', Created ', Trying to reproduce the issue.', This bug was for a section that now lives under the 'Synced Tabs' button instead of being a top level panel. I'm pretty sure this issue is no longer valid. Thanks for checking in and closing the PR!", Stephan, the Github PR is still open ( ', ) I can't close it :)", My apologies - I've gone ahead and closed it." 
id=1239722	 'Created ', ', PR Comment about the PR: "This isn\'t great -- we\'re making assumptions about the state of BVC (a view) to decide when to add a new tab (our model). Ideally, we\'d tease apart the coupling of adding a tab and inserting the web view. This might be OK for now until we can do our BVC refactor." This was the simplest solution besides doing more complicated things to get around the BVC implementation.', Comment on ', ', PR Comments on the PR.', Please make this trigger in the next TestFlight build.', In the call to openURLInNewTab, I don't see any code that guards the URL from being written to a user's history and thus being Synced. We should not be writing to history.", (In reply to Aaron Train :aaronmt from ', ) ', Why not? It's a page you visited, and you might want to get back there.", Followup fix landed ', Concerns: On clean installation \u21b3 First run startup performance seems impacted on my iPhone 6 \u21b3 Tour \u2192 Sign into Firefox \u2192 WNT tab briefly shown \u21b3 Now three default tiles with effectively two Support (', ) tiles \u21b3 Blank top-sites thumbnail tab in the tab drawer is opened with Firefox \u21b3 On 1.4 we show Mozilla/Mozilla Support in the thumbnail \u21b3 Tapping on the newly added top-sites does not take me back to the release details page Gripes: A first run experience should not require the first thing for a user to do is clean up top-sites \u21b3 Injected history for this page Other: For the added history item, the row item has "What\'s new in Firefox for iOS 2.0 | Administration" in the title, also asked on ', Do we have an update here on the aforementioned issues?', We could add a visit type annotation to openURLInNewTab, such that it'll be automatically filtered out of history and thus won't appear on Top Sites.", On upgrade \u21b3 The opened URL takes on the first position on top-sites', Created ', ', PR for not showing URL on clean install', Comment on ', ', PR for not showing URL on clean install LGTM', Does not show on upgrade. See comments in original PR.', Created ', ', PR fix for clean install', Patch looks good to me. I tested in the Simulator by first installing the app with MOZ_VERSION = 1.9 and then installing a new build on top of it with MOZ_VERSION = 2.0. Adding :sleroux because I am not entirely sure if BVC.viewDidAppear is the right place for this. I think that means the code will also fire if you for example switch from Tab Tray to Browser?', viewDidLoad I think makes sense because it will only be called once while the app is loaded since we never dealloc the BVC. These steps make sense for testing it since the MOZ_VERSION property overrides the project file versioning.', If there are more bugs concerning this, please file follow-ups. Opening a what's new tab feature happens on upgrade, not clean install." 
id=1252255	 'Created ', ', PR: ', Please test on master. I can now succesfully do builds on device or for Aurora.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', I think I'm still getting mixed results with this patch. Needs more testing.", Looks like I forgot to remove the Carthage Build Phase from some test targets. Will provide new patch.', PR Updated. Should be good to do.', Comment on ', ', PR: ', Update the carthage.sh file to ensure that the correct carthage version is being used & we're good to go. Nice find. Feel a little stupid for not having thought of that before...", Comment on ', ', PR: ', Looks good - just the checkout.sh change Emily mentioned.' 
id=1194313	 'Created ', sync-now.mov This seems to be happening only on a device (6, 8.4) and not in the sims. For clarification, the text size should remain what "Sync Now" is. DefaultStandardFontSize, I believe.', Created ', ', rubberstamp PR', Comment on ', ', rubberstamp PR This only needs Robin's review." 
id=1185038	 'We only suggest history.', *** ', has been marked as a duplicate of this bug. ***', Morph?', This will involve touching the getFilteredSites* queries, figuring out how bookmarks affect frecency, where to put bookmarks that have no visits, and also badging results with a star.', Targeting 1.0.x would be my preference, but could fall back to 1.1 :)', See also ', for showing remote tabs.', Pains me we don't have this yet but 2.0-", Requested ', Dependency resolved/re-summarize so I can find this better', Created ', search-Bookmarks-2.png Surface Bookmarks to the top of the list, in order of last-accessed if there are multiple results. Add Bookmark star to cell, vertically centered, 16px from right edge. Truncate long titles with an ellipsis if they reach within 16px to the left of the Bookmark star.', Created ', bookmark-awesomelist.zip', Robin: what\'s the limit on returned bookmarks? E.g., if I search for "http", at what point should we split and start showing history?', (In reply to Richard Newman :rnewman from ', ) ', I think 5 is sufficient. That's enough to fill the viewport on our smallest supported device when the keyboard drops on tap and isn't overwhelming.", I've got this done apart from showing the star in results and excluding bookmarks from the subsequent history rows.", Created ', ', Pull req. I noticed that table rows have an accessory view already, so I skipped the heavyweight approach in ', and decided to use that. The data access part of this isn't 100% polished: * We don't seem to retrieve favicons correctly. * We don't de-dupe bookmarks on URL. * We don't decorate history items that are bookmarked but aren't in the initial bookmark set (part of ", 's scope). * We don't de-dupe history items that are also in the initial bookmark set, so they can be shown twice. I don't know if those limitations should stop us landing this -- it's better than nothing, but fixing those might involve another database change. We could land in two parts.", Robin gave ui+ over IRC. Tested on 5S and 6+.', Note that another way of doing this storage-wise is to FULL OUTER JOIN bookmarks to history, rather than to union two subqueries. That'd fix some of those limitations, with some cost and some edge cases (e.g., what do we GROUP BY on?).", Comment on ', ', Pull req. Sorry for the delayed review. just a couple of nits. LGTM.', Thanks, Emily! I'll file follow-ups for anything I don't address immediately.", I'm just wrapping this up with a commit that fetches icons.", Merged: ' 
id=1265350	 'The discussion in ', suggests that this should be closed as INVALID. I can put this as a setting with minimal additional complexity that defaults to false, though this feels like needless complexity. Is it worth it? Do you have strong feelings tecgirl?', Sure, I think it is not necessary to set home page as new tab page.', (In reply to James Hugman :jhugman @jhugman from ', ) ', Agreed, not necessary.', Closing as WONTFIX.' 
id=1274070	 'Created ', ', Link to Github pull-request: ', Adds the current time, timezone, and HTTP header as specified by the doc linked above.', Looks good :)', Comment on ', ', Link to Github pull-request: ', Seems reasonable to me.' 
id=1145240	 'tecgirl: over to you for assets.', Created ', panelIcons.zip assets attached. also included are the active states. note we're not putting settings in this panel but we are putting sync.", Created ', ', Link to Github pull-request: ', tecgirl: before: ', after: \ufeff', The bottom border doesn't look great -- instructions (or PRs) gratefully accepted.", :nalexander, I'm not thrilled about the border but it will have to do for now." 
id=1288864	 'Created ', Topsites screenshot sample A rough Idea of how this might look.', Created ', Ipad topsites sample', Created ', replacing only topsites panel Instead of replacing all the home panels we could instead only replace the top sites panel.', I've made good progress on replacing only topsites. To test it out check out this branch. ", The current implementation of the HomePanels does not cache the panels when switching in-between them. To improve performance of the topsites. I cache the topsites panel when switching between panels. I've modified the AS project by removing lots of unnecessary elements that were not used in the mobile version. The context menu which had things like (remove from AS, Open new tab, etc). This would work better built as native elements. We already have existing elements in iOS we can use for this. To get this to be a complete shippable replacement for the current topsites I would need to add - Context menus to edit/open new tab/hide links - Pipe real content from iOS - CSS improvements - support for localization (AS is only in english. Maybe we launch this only in EN regions first?) - A few tests :P", Another key component that would be required to ship this that I forgot to mention The ability to remotely update the topSites panel.', After much discussion we decided not to go this route. Due partly to the iOS version of AS not having a similar UI to desktop.' 
id=1220301	 'Is it sufficient to put a guard let _ = self.profile.account else { return } before the beginTimedSyncs()?', I'd use guard self.profile.hasAccount() else { return } but yes, that's the idea! Note that we also need to add a call to beginTimedSyncs in BrowserSyncManager.onAddedAccount -- we would no longer be automatically running a timer before you sign in, so we'd need to start one when the account is added.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', master: ' 
id=1230577	 'Shouldn\'t be related to Sync: no account set up (which will be the case if you skipped the tour) means we\'ll short-circuit, and you should see a warning in the log. private func withSyncInputs<T>(label: EngineIdentifier? = nil, function: (SyncDelegate, Prefs, Ready) -> Deferred<Maybe<T>>) -> Deferred<Maybe<T>>? { if let account = profile.account { \u2026 } log.warning("No account; can\'t sync.") return nil', Per IRC doesn't affect v1.3, which also implies that it's not related to sync scheduling. (The code for that is the same on both branches.)", I can't repro this pause on current master. If I hit pause in Xcode immediately after tapping the URL bar, I see main-thread CPBitmapStore openAndMmap:withInfo: being called from UIApplicationMain, but no real slowdown.", When I hit pause during the hang on my iPhone 6, it breaks on frame 21: * frame #21: 0x000000018804b814 UIKit`- UITextField becomeFirstResponder + 64 * frame #22: 0x0000000100117860 Client`Client.URLBarView.(self=0x000000013fe38050) -> (Swift.Optional<Swift.String>, pasted : Swift.Bool) -> ()).(closure #2) + 148 at URLBarView.swift:480', NI to see if this still happens' 
id=1166781	 'Which means we should have an empty placeholder? Or do we cancel out?', Is this a regression? We should flip to Top Sites if this is empty.', To expand a bit more, it looks like we aren't updating results in general any time we hit the backspace/delete key.", Is this still happening in the nightly build? I don't think it is. Aaron can you confirm?", Yes.', Created ', ', override func deleteBackward() in AutoCompleteTextField', Comment on ', ', override func deleteBackward() in AutoCompleteTextField Looks good to me. Removing rnewman. Please land.', Backed out due to regressions. STR: 1. Enter "yah" that should autocomplete for "yahoo.com" 2. Hit backspace twice "yahoo.com" then gets suggested again. That is, it takes two deletions every time i want to go back a character: one to clear the suggestion, another to actually do the deletion. Note that we want our autocompetion logic to mirror desktop, where show autocomplete suggestions only when entering new characters -- never when deleting them. Friendly reminder to try running tests -- this PR causes DomainAutocompleteTests to fail. ', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Comment on ', ', PR ', LGTM -- some suggestions for tests in the PR. At minimum, please make sure SearchTests.swift is passing.', I have found bug which is regression of this issue. ', I have found another bug which is regression of this issue. ', Let's get a handle on this", Should consider backing out again due to regressions, but let's see where we stand with the proposed fixes. Thanks, codester!" 
id=1177386	 'Created ', ', PR: ', This patch inverts the comparison on `protectionSpace.authenticationMethod` so that we better check for *Basic* and *Digest*. I think this fails on iOS 9 because they now actually trigger `NSURLAuthenticationMethodServerTrust`. (Which we can then use to verify the SSL chain!)', Fixed. But also needed the following followup fix: ', Which calls the completionHandler with NSURLSessionAuthChallengeDisposition.PerformDefaultHandling if we don't know how to handle it. (Ie, when it is not Basic or Digest auth)" 
id=1323981	 "This is not an issue after all. Multiple versions of Firefox were installed on the device and the wrong icon for 'Send tabs' was selected as they are identical for both Nightly and Release version. After testing with only Nighlty installed the issue was not reproduced. Marking as invalid." 
id=1123391	 'Fix is part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1197337	 '(In reply to Darrin Henein :darrin from ', ) ', Based on the user comment above, I worry that could still get misinterpreted. Maybe something like one of the following: "Easily switch between open pages with tabs" "Use tabs to switch between open pages" "Keep multiple pages open in the background with tabs"', Robin please dupe thanks bye', The first slide is the only one that lacks any sort of possessives, so perhaps the first one, "Easily switch between open pages with tabs" makes the most sense, in attempt at keeping tone.', This string is in PR ', , waiting to land.', Landed.' 
id=1169269	 '*** ', has been marked as a duplicate of this bug. ***', *** This bug has been marked as a duplicate of ', ***' 
id=1278488	 'Resolved with ' 
id=1134904	 '*** ', has been marked as a duplicate of this bug. ***', This can be broken down a bit more, so I'll morph this into simply persisting the list of URLs. We can worry about history for each tab separately.", James, think you could take a look at this? I don't know if anyone on the team has a very strong grasp with application state/persistence on iOS yet, so it'd be great if you could take over. Perhaps there's some event we're guaranteed to get before the app is closed, and we could dump out a list of URLs there? I've worked on session restore on the Android side, so happy to help if needed!", N.B., open tabs is something we will be syncing, so do loop me in on this; it'll be a particular approach to persistence. I have some opinions about necessary flags and schema.", Filed ', for restoring tab history.', Initial pass on this: store it in response to UIApplicationDelegate events. However, if we're going to be re-using the data for sync (and others) we should be touching Storage already. (I'm a bit reluctant to be touching NSUserDefaults which would be the cheap and cheerful and wrong way of doing it).", (In reply to James Hugman :jhugman @jhugman from ', ) ', Yep, looks like we'll want to use applicationDidEnterBackground() since applicationWillTerminate() isn't guaranteed to be called 1 . So these are the Android onPause() and onDestroy() equivalents for iOS. ", Yeah, I\'d avoid using prefs. How about just writing out a JSON file? It\'s flexible, and it\'s what we use on desktop/Android, so it seems like the logical choice here. You could add a write() method to FileAccessor.swift, then write out the session file using profile.files.write(). As a first pass, I\'d just write out the bare minimum we need to restore the set of URLs. Something like this: {selectedIndex: 0, tabs: {url: "', "}, {url: "', "}, ... } ', Care to elaborate? For an initial approach, I imagine we'd be fine simply writing the minimum possible (an array of URLs) and expanding from there. Session data is transient, so I hope we can just tack on any necessary Sync-specific additions when they're needed. 1 ", reply to Richard Newman :rnewman from ', )', (In reply to Brian Nicholson (:bnicholson) from ', ) ', We need to support the following: * A way for us to find out if the set of tabs has changed since we last synced. That can be as simple as a switch that the browser flips every time it writes, and Sync flips back when it's uploaded. * Individual records need to support these fields: ", That means we should be writing out: title: title of the current page. urlHistory: array of page URLs in the tab\u2019s history. icon: favicon URI of the tab. lastUsed: Unix epoch (in seconds) at which the tab was last accessed. The simplest version of this is a single URI in a one-element array for urlHistory, no known icon, and 0 for lastUsed. Sync uploads the entire bundle of tabs at once, so a snapshot approach is convenient. Note that incoming synced tabs will be in this format, too; a shared representation might make things simpler somewhere.', Pragmatism aside (famous last words), I'm inclined to want to put tab data (esp tab history) in to Storage at the time that the tab loads a new URL. The sync file should be generated from Storage (and parsed and moved into Storage) with the sync code. This stops us having to touch the filesystem at the time when we least want to.", Firefox on Desktop and Android conceptually share the session store mechanism. Some notes: * Session is stored in a JSON file * Session data is written in two ways: delayed and immediate * Delayed is the default method and used for various triggers: * Loading a URL * Opening/Closing a Tab * Switching Tabs * Immediate is used only when we feel the app could be killed soon: * When app goes into background * Delayed writes wait a number of seconds before saving to disk and any new delayed write request resets the timer. * Immediate writes check to see if a Delayed write is queued and forces an immediate flush to disk. We do not try to make the Session JSON format match any other data format, i.e. Synced Tabs, since the two have already diverged on Desktop and Android.', Also note that Desktop and Android versions of the Session also track "closed tabs" so we can undo a closed tab.', Created ', example sessionstore.js from Android Here is a simple session file I grabbed from Android', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', My preferred option was to listen to the onLocationChange events and update an OpenTabs object hanging off the profile in Storage.xcodeproj. However: the TabManager keeps track of tab indexes, rather than tab ids, which means reconstructing the current of TabManager isn't possible with this approach. Two alternatives: 1. add ids, and closed datetime to the tabs. The book keeping to restore a tab session, may not be as bad as I fear. 2. serialize the tab manager more directly, without creating any extra data structures. Panic write a JSON file when needed. This may get ugly when it comes to re-inflating tabs later on. It may also get ugly when we start taking closed tabs into consideration. For implementation speed going with 2. If this turns out to be adequate, it'll be a genius idea and we did the right thing. If it's as ugly as I expect, we'll need to re-write it, but we did the right thing re: time-to-market. :)", Created ', ', ', Implemented using a JSON object written to disk. A new Storage object called OpenTabs. It doesn't actually store anything, just facilitates writing a JSON blob to disk by serializing TabManager. It's hacky because: a) we need something fast b) we will want something that's not horrible in the future Also added a restore.", Why is this not implemented with the *State Preservation and Restoration* infrastructure that is part of the UIApplication lifecycle? This is documented at ', There is no need to manually send notifications around because the application delegate will receive the following two callbacks: * `application:shouldSaveApplicationState:` * `application:shouldRestoreApplicationState:` And for `UIViewController` instances there is the `UIViewControllerRestoration` protocol that needs to be implemented. I think it is a bad idea to reinvent this. Specially because the application can also launch in the background for different reasons. Like periodic sync or network callbacks made from app extensions. In those cases we do not actually want to restore the UI. And I think the current approach does do that. While if we follow the official protocols for this, iOS will prevent that from happening because the state management is done by the OS at the right time.', This is useful, thanks :st3fan. This appears to be able to avoid a JSON blob on disk which is perfect.', Comment on ', ', ', I left some drive-by comments, as did Stefan. I strongly agree with him: you should hook into the application lifecycle interface, rather than rolling our own. Yes, there's a small impedance mismatch between that and real-time tab syncing... but honestly, I'd rather this code be rock-solid and work well for its primary purpose than have quicker turnaround for tabs, particularly when we'll probably sync those on exit, not during use. I'll give more substantial feedback after that rework.", Comment on ', ', ', Happy to check canOpenUrl() for any scheme that we can't open. However, we need to be able to open up for non-scheme based URLs. Related docs: ", wrong bug.', Comment on ', ', ', Re-worked based on feedback, and discussion with :mfinkle. Much simpler implementation which does the same, but is not tied to Profile. Known bad: Whitespace and comments change in an unrelated file.', Comment on ', ', ', I'm happy to land this after cleanup (maybe just cherry-picking!), but it's definitely a stopgap. (We can use the same hooks, and we'll probably still use this mechanism to persist more UI-level stuff, but tabs are a meatier deal than this can solve alone.)", Comment on ', ', ', James, I like this approach. Looks clean. Can you rebase your PR branch and squash the commits into one? Then I'd like to just take one more peek to be sure. Right now there is a lot of stuff in the PR that should not. Probably because of the PR is a bit stale. Ping me on irc if you need help with git magic please.", This doesn't work. Correct me if I'm wrong please * I have open tabs * I swipe fennec off my running application list * I re-launch the browser, none of my tabs are restored", This is working for me in all the scenarios I've tried so far. I have open tabs. I've stopped the app in multiple ways: * returning to the springboard (this doesn't kill the app) * swiping from the running apps list (which Fennec is foregrounded and backgrounded) * power cycling the device. Each time the previously open tabs are restored. This is an iPad Mini 3, iOS 8.3.", Opening a new bug for ', (In reply to Aaron Train :aaronmt from ', ) ', (', )', Created ', ios-tab-crash-2.mov this is possibly related to the app trying to load a Reader View URL, but I'm currently stuck in a crash pattern. Here you can see the app load, the thumbnails not load, then the app crashes." 
id=1181425	 'I would like to take on this bug', Are you sure this is a bug? I see the same behaviour in the system Settings.app', Not necessarily a bug but something we should do for polish. We need to turn off selection for the table view since the rows themselves are not selectable: ', Created ', ', Pull Request', Comment on ', ', Pull Request Looks good. Left some cleanup comments in the PR.', Looks good. Thanks for the contribution! ' 
id=1234883	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1248661	 'I think that command should be brew install ', Created ', ', Pull req.', Comment on ', ', Pull req. Looks like the new link properly downloads Carthage 0.11. Looks good to me.', 74abd18' 
id=1127027	 'This feature was removed in Aha! This can be closed.' 
id=1139075	 
id=1201079	 'This is because we dump the URL directly, which has the path. We might be able to simplify.', Created ', ', PR: ', This patch makes sure that we do not display a trailing slash for an `NSURL` that has an empty (`/`) or `nil` path component. If the `NSURL` contains a non-empty path that ends with a trailing slash then we do not do anything. This is because that will actually result in a different URL. So for example `', ` will not be changed. This is the same as *Firefox Desktop* handles it. I have merged this logic in `absoluteStringWithoutHTTPScheme`, which is called by the `BrowserLocationView.updateTextWithURL()` to update the currently displayed URL. Because this now does more than just remove the `http://` part, I have renamed that function to `absoluteDisplayString`. Also included tests to make sure this works on URLs with and without trailing slashes with both empty and non-empty path compoments.', Comment on ', ', PR: ', LGTM', Comment on ', ', PR: ', LGTM', Still see this on master (89db3d3) Test URLs: aaronmt.com, polygon.com, ip9.com', (In reply to Aaron Train :aaronmt from ', ) ', Ok, just noticed this landed on 'v1.0'. I'll check back again.", Created ', ', PR: ', Same as ', but converted to Swift 2.0 for the master branch.', Comment on ', ', PR: ', Usually safe to just land these uplifts without additional review (unless rebasing required significant changes).', still not merged? I see this on master still', Thanks, merged ', .' 
id=1149219	 
id=1189400	 'Hey Alex, just to double check a) what language is your device set at b) what device are you using? Just curious to see how can I reproduce this locally on my device (iPhone 6)', Also, can you attach a crash report from your device? Start by opening up the Settings app. Navigate to Settings - Privacy - Diagnostics & usage - Diagnostics & usage Data Tap on the crash, typically with Firefox in the name and you will see a text field with a crash log. Long press to Select All and then Copy the crash text. Paste it into something you can get off of your device (for example, an email to yourself), and then save it to a file and attach to this bug.', a) English b) iPhone 6 Crash log: app_name":"Client","app_version":"1.0","bundleID":"org.mozilla.ios.FennecAurora","adam_id":0,"os_version":"iPhone OS 8.3 (12F70)","slice_uuid":"b4e86c6b-b2be-384f-94f3-624a0c35df8b","share_with_app_devs":false,"build_version":"7","is_first_party":false,"bug_type":"109","name":"Client"} Incident Identifier: DF69B4EA-2BFB-464E-8DC0-D6EA8FD87A03 CrashReporter Key: 888221da7c2cad00989eee64925aebc89a79b9fc Hardware Model: iPhone7,2 Process: Client 620 Path: /private/var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Client Identifier: org.mozilla.ios.FennecAurora Version: 7 (1.0) Code Type: ARM-64 (Native) Parent Process: launchd 1 Date/Time: 2015-04-09 18:52:00.141 +0100 Launch Time: 2015-04-09 18:35:18.430 +0100 OS Version: iOS 8.3 (12F70) Report Version: 105 Exception Type: 00000020 Exception Codes: 0x00000000dead10cc Highlighted Thread: 0 Application Specific Information: <FBApplicationProcess: 0x155e630a0; Client; pid: 620> was suspended with locked system files: /private/var/mobile/Containers/Shared/AppGroup/2D852465-466C-4821-ABC7-12395FD95E10/profile.profile/browser.db Thread 0 name: Dispatch queue: com.apple.main-thread Thread 0: 0 libsystem_kernel.dylib 0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib 0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation 0x00000001831df720 0x183100000 + 915232 3 CoreFoundation 0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation 0x00000001831092d0 0x183100000 + 37584 5 GraphicsServices 0x000000018c91f6f8 0x18c914000 + 46840 6 UIKit 0x0000000187ccefa8 0x187c58000 + 487336 7 Client 0x000000010016fcb4 0x1000c8000 + 687284 8 Client 0x000000010016fcf4 0x1000c8000 + 687348 9 libdyld.dylib 0x00000001950caa04 0x1950c8000 + 10756 Thread 1 name: Dispatch queue: com.apple.libdispatch-manager Thread 1: 0 libsystem_kernel.dylib 0x00000001951c8c24 0x1951c8000 + 3108 1 libdispatch.dylib 0x00000001950ade6c 0x19509c000 + 73324 2 libdispatch.dylib 0x000000019509f998 0x19509c000 + 14744 Thread 2 name: WebThread Thread 2: 0 libsystem_kernel.dylib 0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib 0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation 0x00000001831df720 0x183100000 + 915232 3 CoreFoundation 0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation 0x00000001831092d0 0x183100000 + 37584 5 WebCore 0x0000000191b04890 0x191a54000 + 723088 6 libsystem_pthread.dylib 0x000000019527fdc4 0x19527c000 + 15812 7 libsystem_pthread.dylib 0x000000019527fd20 0x19527c000 + 15648 8 libsystem_pthread.dylib 0x000000019527cef4 0x19527c000 + 3828 Thread 3 name: JavaScriptCore::BlockFree Thread 3: 0 libsystem_kernel.dylib 0x00000001951e3078 0x1951c8000 + 110712 1 libsystem_pthread.dylib 0x000000019527ef28 0x19527c000 + 12072 2 libc++.1.dylib 0x00000001941c8cac 0x1941c0000 + 36012 3 JavaScriptCore 0x00000001846fd620 0x1846e4000 + 103968 4 JavaScriptCore 0x00000001846f8b9c 0x1846e4000 + 84892 5 libsystem_pthread.dylib 0x000000019527fdc4 0x19527c000 + 15812 6 libsystem_pthread.dylib 0x000000019527fd20 0x19527c000 + 15648 7 libsystem_pthread.dylib 0x000000019527cef4 0x19527c000 + 3828 Thread 4 name: JavaScriptCore::Marking Thread 4: 0 libsystem_kernel.dylib 0x00000001951e3078 0x1951c8000 + 110712 1 libsystem_pthread.dylib 0x000000019527ef28 0x19527c000 + 12072 2 libc++.1.dylib 0x00000001941c8cac 0x1941c0000 + 36012 3 JavaScriptCore 0x00000001849a6edc 0x1846e4000 + 2895580 4 JavaScriptCore 0x00000001849a6f80 0x1846e4000 + 2895744 5 JavaScriptCore 0x00000001846f8b9c 0x1846e4000 + 84892 6 libsystem_pthread.dylib 0x000000019527fdc4 0x19527c000 + 15812 7 libsystem_pthread.dylib 0x000000019527fd20 0x19527c000 + 15648 8 libsystem_pthread.dylib 0x000000019527cef4 0x19527c000 + 3828 Thread 5 name: com.apple.NSURLConnectionLoader Thread 5: 0 libsystem_kernel.dylib 0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib 0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation 0x00000001831df720 0x183100000 + 915232 3 CoreFoundation 0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation 0x00000001831092d0 0x183100000 + 37584 5 CFNetwork 0x0000000182bea890 0x182b4c000 + 649360 6 Foundation 0x0000000184129db4 0x184034000 + 1007028 7 libsystem_pthread.dylib 0x000000019527fdc4 0x19527c000 + 15812 8 libsystem_pthread.dylib 0x000000019527fd20 0x19527c000 + 15648 9 libsystem_pthread.dylib 0x000000019527cef4 0x19527c000 + 3828 Thread 6 name: com.apple.CFSocket.private Thread 6: 0 libsystem_kernel.dylib 0x00000001951e3498 0x1951c8000 + 111768 1 CoreFoundation 0x00000001831e5124 0x183100000 + 938276 2 libsystem_pthread.dylib 0x000000019527fdc4 0x19527c000 + 15812 3 libsystem_pthread.dylib 0x000000019527fd20 0x19527c000 + 15648 4 libsystem_pthread.dylib 0x000000019527cef4 0x19527c000 + 3828 Thread 7: 0 libsystem_kernel.dylib 0x00000001951c8e0c 0x1951c8000 + 3596 1 libsystem_kernel.dylib 0x00000001951c8c84 0x1951c8000 + 3204 2 CoreFoundation 0x00000001831df720 0x183100000 + 915232 3 CoreFoundation 0x00000001831dd674 0x183100000 + 906868 4 CoreFoundation 0x00000001831092d0 0x183100000 + 37584 5 CoreFoundation 0x000000018315b358 0x183100000 + 373592 6 CoreMotion 0x0000000183b14364 0x183acc000 + 295780 7 libsystem_pthread.dylib 0x000000019527fdc4 0x19527c000 + 15812 8 libsystem_pthread.dylib 0x000000019527fd20 0x19527c000 + 15648 9 libsystem_pthread.dylib 0x000000019527cef4 0x19527c000 + 3828 Thread 8: 0 libsystem_kernel.dylib 0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib 0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib 0x000000019527ceec 0x19527c000 + 3820 Thread 9: 0 libsystem_kernel.dylib 0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib 0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib 0x000000019527ceec 0x19527c000 + 3820 Thread 10: 0 libsystem_kernel.dylib 0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib 0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib 0x000000019527ceec 0x19527c000 + 3820 Thread 11: 0 libsystem_kernel.dylib 0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib 0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib 0x000000019527ceec 0x19527c000 + 3820 Thread 12: 0 libsystem_kernel.dylib 0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib 0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib 0x000000019527ceec 0x19527c000 + 3820 Thread 13: 0 libsystem_kernel.dylib 0x00000001951e3c78 0x1951c8000 + 113784 1 libsystem_pthread.dylib 0x000000019527d2d8 0x19527c000 + 4824 2 libsystem_pthread.dylib 0x000000019527ceec 0x19527c000 + 3820 No thread state (register information) available Binary Images: 0x1000c8000 - 0x100283fff Client arm64 <b4e86c6bb2be384f94f3624a0c35df8b> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Client 0x10032c000 - 0x1003abfff Storage arm64 <610259663b383f7e875d86e1e4ad4077> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Storage.framework/Storage 0x100424000 - 0x10046ffff Account arm64 <abec8e982f963b30ae0322fee7af2246> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Account.framework/Account 0x1004a4000 - 0x1004d7fff Shared arm64 <000a3efa472432beaf14e21f2bd25b8c> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Shared.framework/Shared 0x100518000 - 0x1005cffff FxA arm64 <f3077ff939463167ae93982a0ca158b4> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/FxA.framework/FxA 0x100628000 - 0x10065ffff XCGLogger arm64 <6ebd2e9a431037e893a9343d8999a33d> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/XCGLogger.framework/XCGLogger 0x10067c000 - 0x1006b7fff Sync arm64 <3210472b29b23807a41162d3bcdce157> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Sync.framework/Sync 0x100704000 - 0x100767fff Alamofire arm64 <86023dd825293274a0be30788c94d46f> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Alamofire.framework/Alamofire 0x1007d4000 - 0x100803fff SWXMLHash arm64 <0b07279e47fd36c99eb8641872f5c208> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/SWXMLHash.framework/SWXMLHash 0x100828000 - 0x10084bfff Snap arm64 <6e2b679e19cb389cb389d8768227217d> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Snap.framework/Snap 0x10087c000 - 0x100a07fff libswiftCore.dylib arm64 <5b3c2ad007c73590aabdc2554ff30d4a> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftCore.dylib 0x100b68000 - 0x100b7ffff libswiftCoreGraphics.dylib arm64 <4df212c0adc635d39677885bf1eb5500> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftCoreGraphics.dylib 0x100ba4000 - 0x100ba7fff libswiftCoreImage.dylib arm64 <652ee890902b3ea68b86a72cd280faa5> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftCoreImage.dylib 0x100bc0000 - 0x100bc7fff libswiftDarwin.dylib arm64 <6883570852443a6db73321866cb0c1c2> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftDarwin.dylib 0x100bf0000 - 0x100bf3fff libswiftDispatch.dylib arm64 <cd8f8e2d57113862afda4788f098adaa> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftDispatch.dylib 0x100c18000 - 0x100c63fff libswiftFoundation.dylib arm64 <44c6c5841e3b3c9486958cbf1a534bd4> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftFoundation.dylib 0x100c98000 - 0x100c9ffff libswiftObjectiveC.dylib arm64 <252990df94bf3dc899190b1d8df925df> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftObjectiveC.dylib 0x100cb0000 - 0x100cb3fff libswiftSecurity.dylib arm64 <c6fd1c806cfe38cba2b21c780642b0fb> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftSecurity.dylib 0x100ccc000 - 0x100ccffff libswiftUIKit.dylib arm64 <607f7c198f783fea841ce232f2981202> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/libswiftUIKit.dylib 0x100cf4000 - 0x100d13fff Base32 arm64 <2b8e4bbb601537039d71abfe6c398681> /var/mobile/Containers/Bundle/Application/AAEF604C-F485-451C-A09A-75C9DBA62496/Client.app/Frameworks/Base32.framework/Base32 0x1200c0000 - 0x1200e7fff dyld arm64 <75c68bbe28b13fcd91014f15139742dc> /usr/lib/dyld 0x181804000 - 0x1818fefff RawCamera arm64 <ebb36059ba8a3c1d8caba3cbfa039d63> /System/Library/CoreServices/RawCamera.bundle/RawCamera 0x1819d4000 - 0x181b68fff AVFoundation arm64 <c69cb19d6db0339bbfb4c18fa7f4f26c> /System/Library/Frameworks/AVFoundation.framework/AVFoundation 0x181b6c000 - 0x181bd0fff libAVFAudio.dylib arm64 <fdd31b28c0ec3f76b8f0fa9a057e43d9> /System/Library/Frameworks/AVFoundation.framework/libAVFAudio.dylib 0x181bd4000 - 0x181c13fff AVKit arm64 <662188dbb9233944bbffc40c217bba7f> /System/Library/Frameworks/AVKit.framework/AVKit 0x181c14000 - 0x181c14fff Accelerate arm64 <a2161063fee1315193bc488d0354f43e> /System/Library/Frameworks/Accelerate.framework/Accelerate 0x181c18000 - 0x181c2afff libCGInterfaces.dylib arm64 <6dc1d203e31b34698c3b0c3c396dc2d4> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/Libraries/libCGInterfaces.dylib 0x181c2c000 - 0x181e4bfff vImage arm64 <74eb7b77dbcd321db86e784be9353a08> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage 0x181e4c000 - 0x181ef3fff libBLAS.dylib arm64 <56e8b79c2c03379dad45fe2ea1a4052f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib 0x181ef4000 - 0x18226efff libLAPACK.dylib arm64 <fd491ae19b12315babb621650a0eef76> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib 0x182270000 - 0x182285fff libLinearAlgebra.dylib arm64 <9307063a5e1833abbb857a9ec4c5369e> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLinearAlgebra.dylib 0x182288000 - 0x1822f0fff libvDSP.dylib arm64 <d4d2b4a941213e2b81f3ddafd6b8a312> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib 0x1822f4000 - 0x182317fff libvMisc.dylib arm64 <92a0dd635be43dfe8c128c888ef37c0e> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib 0x182318000 - 0x182318fff vecLib arm64 <9248f57f1d8430219a810aa93254f157> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib 0x18231c000 - 0x18234bfff Accounts arm64 <4199851056d4376aa4d8668b83c85454> /System/Library/Frameworks/Accounts.framework/Accounts 0x182350000 - 0x1823cefff AddressBook arm64 <73735c2a294139e5b99ada613fc861ea> /System/Library/Frameworks/AddressBook.framework/AddressBook 0x1823d0000 - 0x182523fff AddressBookUI arm64 <860bc29210ba3d7c80dc83a83388e31c> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI 0x182524000 - 0x182538fff AssetsLibrary arm64 <06c85b7fcfaf3722b6e7a89a1ed5559e> /System/Library/Frameworks/AssetsLibrary.framework/AssetsLibrary 0x1826ec000 - 0x1829acfff AudioToolbox arm64 <760c2dc59fa13660a769cc1b052d41e6> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox 0x182b4c000 - 0x182d5ffff CFNetwork arm64 <df5535d1633f375aa889f755db0a93b9> /System/Library/Frameworks/CFNetwork.framework/CFNetwork 0x182d60000 - 0x182dfcfff CloudKit arm64 <c24c6a0eeb1a38b598fafc24e9974595> /System/Library/Frameworks/CloudKit.framework/CloudKit 0x182e00000 - 0x182e65fff CoreAudio arm64 <b85ca2cdb29639ccb5f6405baf597027> /System/Library/Frameworks/CoreAudio.framework/CoreAudio 0x182e8c000 - 0x182eadfff CoreBluetooth arm64 <fbd7cbc4b2533ea38844bf98757ce58d> /System/Library/Frameworks/CoreBluetooth.framework/CoreBluetooth 0x182eb0000 - 0x1830fcfff CoreData arm64 <af13d4e830e13607b745fe57f90e5d5e> /System/Library/Frameworks/CoreData.framework/CoreData 0x183100000 - 0x18345efff CoreFoundation arm64 <6548b13bef1f3f958d96266f7c4c44e0> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 0x183460000 - 0x1835c2fff CoreGraphics arm64 <92162d42d08d357ab66302a38d724828> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics 0x183618000 - 0x18361afff libCGXType.A.dylib arm64 <8f40b7d9b97b344f9c7a5a0b79bdc2b7> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGXType.A.dylib 0x18361c000 - 0x183627fff libCMSBuiltin.A.dylib arm64 <a40d7bdbbe6c3317bcf4c20c085df848> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCMSBuiltin.A.dylib 0x18381c000 - 0x18383afff libRIP.A.dylib arm64 <975284709e51353690ec8a651b43c1db> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib 0x18383c000 - 0x18396efff CoreImage arm64 <d7a2122dc8173803bc220fde3cfebfdf> /System/Library/Frameworks/CoreImage.framework/CoreImage 0x183970000 - 0x1839cefff CoreLocation arm64 <a166ad7f12f93406b54ae6a170fb38ee> /System/Library/Frameworks/CoreLocation.framework/CoreLocation 0x183a08000 - 0x183acbfff CoreMedia arm64 <403a9798401c3b70a207e0e236454c0d> /System/Library/Frameworks/CoreMedia.framework/CoreMedia 0x183acc000 - 0x183bbafff CoreMotion arm64 <61338e072f2a385ab4e315975f23eea2> /System/Library/Frameworks/CoreMotion.framework/CoreMotion 0x183bbc000 - 0x183c2dfff CoreTelephony arm64 <450440ee68593b8e9c951cdf838264f3> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony 0x183c30000 - 0x183d38fff CoreText arm64 <4a9633cee0393585a98fcf07410e0828> /System/Library/Frameworks/CoreText.framework/CoreText 0x183d3c000 - 0x183d59fff CoreVideo arm64 <217e5b69f6d03f8893f01de3e40915a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo 0x183d5c000 - 0x183e80fff EventKit arm64 <f7af75b17dac3c5aa8dc91a1edd1df37> /System/Library/Frameworks/EventKit.framework/EventKit 0x184034000 - 0x18428cfff Foundation arm64 <509b484fb7b634b19673d50296d8278f> /System/Library/Frameworks/Foundation.framework/Foundation 0x1842c0000 - 0x1842e9fff GSS arm64 <3dae218853563b1a985b80d6a353bad8> /System/Library/Frameworks/GSS.framework/GSS 0x1843d4000 - 0x18443ffff IOKit arm64 <311bed1f2b893195b8c0564d8925bfa2> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit 0x184440000 - 0x1846e3fff ImageIO arm64 <7d3c81746f2c3f1488b3efc633d21633> /System/Library/Frameworks/ImageIO.framework/ImageIO 0x1846e4000 - 0x184b85fff JavaScriptCore arm64 <1ad0ed311f3e3897bac70f3388fc05be> /System/Library/Frameworks/JavaScriptCore.framework/JavaScriptCore 0x1854c0000 - 0x1854c6fff MediaAccessibility arm64 <4e3e82a2b09a38fcbf01843f97d5e604> /System/Library/Frameworks/MediaAccessibility.framework/MediaAccessibility 0x1854c8000 - 0x1856ebfff MediaPlayer arm64 <fb0500c5695c36b5b54865f533cc899e> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer 0x1856ec000 - 0x185b0afff MediaToolbox arm64 <c2103a7dd16e3f67abfe898b039061e7> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox 0x185b0c000 - 0x185be0fff MessageUI arm64 <000bbe6f4a8c32bda9c8ea674a7f200d> /System/Library/Frameworks/MessageUI.framework/MessageUI 0x185be4000 - 0x185c5cfff Metal arm64 <eb54636e26cd3dee870fa5e4fb708fe6> /System/Library/Frameworks/Metal.framework/Metal 0x185c60000 - 0x185d11fff MobileCoreServices arm64 <daa61b358c17365792c20df791224e26> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices 0x186f8c000 - 0x186f96fff OpenGLES arm64 <8824bb82d43937a9b0aa3870ece35772> /System/Library/Frameworks/OpenGLES.framework/OpenGLES 0x186f9c000 - 0x186f9dfff libCVMSPluginSupport.dylib arm64 <34760639fb2331dcaa229ba0e418c1af> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib 0x186fa0000 - 0x186fa3fff libCoreFSCache.dylib arm64 <e6f967504d5937d59223598de12969ab> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib 0x186fa4000 - 0x186fa8fff libCoreVMClient.dylib arm64 <30969b8fde9f36c4a6a0293c03e74e5f> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib 0x186fac000 - 0x186fb6fff libGFXShared.dylib arm64 <5942ea8060c63e86b3ffbfb76b061276> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib 0x186fb8000 - 0x187003fff libGLImage.dylib arm64 <3e46a6b44be93e5689e4851c76b2db04> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib 0x1875a0000 - 0x187732fff QuartzCore arm64 <e47923f08f343c3e98e77f22f674f234> /System/Library/Frameworks/QuartzCore.framework/QuartzCore 0x187734000 - 0x187780fff QuickLook arm64 <c7ce94fecae33d839b804000f2ecca60> /System/Library/Frameworks/QuickLook.framework/QuickLook 0x1879b8000 - 0x187a0cfff Security arm64 <80b60ba1feba39afb6686e342398cce1> /System/Library/Frameworks/Security.framework/Security 0x187a10000 - 0x187aa5fff Social arm64 <69ffda9178d03ca2853a7b9b279a685d> /System/Library/Frameworks/Social.framework/Social 0x187be0000 - 0x187c53fff SystemConfiguration arm64 <633d8a8abeaf3abda9b0401146f2b668> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration 0x187c58000 - 0x1885d8fff UIKit arm64 <f67965f71974303e90cfaed997ae36a3> /System/Library/Frameworks/UIKit.framework/UIKit 0x1885dc000 - 0x188655fff VideoToolbox arm64 <1468c96c3448370bbb407644bedbb368> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox 0x188690000 - 0x1888f4fff WebKit arm64 <5e03a0bc7ab436ba900562cceb681ef4> /System/Library/Frameworks/WebKit.framework/WebKit 0x188d30000 - 0x188d3dfff AOSNotification arm64 <bfc45391892b3510ac92ba9362e5100c> /System/Library/PrivateFrameworks/AOSNotification.framework/AOSNotification 0x188ed8000 - 0x188f36fff AccountsDaemon arm64 <e819e315efce3a178391a7dfbee95db0> /System/Library/PrivateFrameworks/AccountsDaemon.framework/AccountsDaemon 0x188f38000 - 0x188f5ffff AccountsUI arm64 <a73a4482c3c535a19ca6bb66dfd32d52> /System/Library/PrivateFrameworks/AccountsUI.framework/AccountsUI 0x188f60000 - 0x188f65fff AggregateDictionary arm64 <cfa106cd07b430a6959f9127a6c3363a> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary 0x189168000 - 0x18916bfff AirPlaySupport arm64 <9379098c9eed33088c7096882eec570d> /System/Library/PrivateFrameworks/AirPlaySupport.framework/AirPlaySupport 0x1893c0000 - 0x189408fff AppSupport arm64 <d088c6263b4932aebd9dcf2a14aadef2> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport 0x18940c000 - 0x189467fff AppleAccount arm64 <0374ffa0f0563b108aa7a58f2c72f39f> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount 0x189578000 - 0x1895c4fff AppleJPEG arm64 <621fe1223e9038a09023dd6c558ce423> /System/Library/PrivateFrameworks/AppleJPEG.framework/AppleJPEG 0x1895d8000 - 0x1895ecfff ApplePushService arm64 <38b2aec9a5b5357aa8e1060d28992da3> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService 0x1895f0000 - 0x1895f9fff AppleSRP arm64 <8f0cacbeabdf39b3815a72e7ec9e8668> /System/Library/PrivateFrameworks/AppleSRP.framework/AppleSRP 0x18960c000 - 0x189617fff AssertionServices arm64 <e0f182c7fdcd34a1a4acfe0bd4c7eae3> /System/Library/PrivateFrameworks/AssertionServices.framework/AssertionServices 0x189618000 - 0x189635fff AssetsLibraryServices arm64 <e28e74aed7103573b9416e016525ac04> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices 0x189638000 - 0x189678fff AssistantServices arm64 <f8cc50774cbf3007bd3944592b1608e8> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices 0x1896b4000 - 0x1896b7fff BTLEAudioController arm64 <ea2ff306f28638ca8bc7a4f02d3c8f1e> /System/Library/PrivateFrameworks/BTLEAudioController.framework/BTLEAudioController 0x1896b8000 - 0x1896d4fff BackBoardServices arm64 <ff372ac34d6430829a97778caad5bdf4> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices 0x1896dc000 - 0x189719fff BaseBoard arm64 <ab16c3464cfb3319bf31202639bb4a90> /System/Library/PrivateFrameworks/BaseBoard.framework/BaseBoard 0x189734000 - 0x18973bfff BluetoothManager arm64 <ab5e74eff0cb32f88338de3fed9495d8> /System/Library/PrivateFrameworks/BluetoothManager.framework/BluetoothManager 0x18973c000 - 0x18976cfff Bom arm64 <45c2562173063fb2bd0e71bbc3423915> /System/Library/PrivateFrameworks/Bom.framework/Bom 0x18986c000 - 0x189875fff CacheDelete arm64 <c5cb9203a779314ea5616b6cb35c39a0> /System/Library/PrivateFrameworks/CacheDelete.framework/CacheDelete 0x1898c8000 - 0x1898f8fff CalendarFoundation arm64 <ce2278a234d0300a8e1c55d93179a8ea> /System/Library/PrivateFrameworks/CalendarFoundation.framework/CalendarFoundation 0x189a44000 - 0x189a4efff CaptiveNetwork arm64 <0f8d341d0a8f3828b9485b189d04e126> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork 0x189a5c000 - 0x189ba8fff Celestial arm64 <0b8842c85d7139848f5e049e8e784c47> /System/Library/PrivateFrameworks/Celestial.framework/Celestial 0x189bc0000 - 0x189bdbfff CertInfo arm64 <6b1190299a103de8a81018e7ed211103> /System/Library/PrivateFrameworks/CertInfo.framework/CertInfo 0x189bdc000 - 0x189be2fff CertUI arm64 <5172b3a96c1736b390833483c0832e79> /System/Library/PrivateFrameworks/CertUI.framework/CertUI 0x189d48000 - 0x189d6cfff ChunkingLibrary arm64 <d38656203ca635b883d96b9c82d4cb59> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary 0x18a238000 - 0x18a30afff CloudPhotoLibrary arm64 <f78c8689515a326c8ebe8878d4bb4c52> /System/Library/PrivateFrameworks/CloudPhotoLibrary.framework/CloudPhotoLibrary 0x18a318000 - 0x18a366fff ColorSync arm64 <af03d31eeea73ffda8259033308781de> /System/Library/PrivateFrameworks/ColorSync.framework/ColorSync 0x18a368000 - 0x18a36afff CommonAuth arm64 <f6c3ca737c12362baa27b4d67391b85d> /System/Library/PrivateFrameworks/CommonAuth.framework/CommonAuth 0x18a36c000 - 0x18a37efff CommonUtilities arm64 <cf917a1cdf503940a9879dda3ea7eae4> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities 0x18a380000 - 0x18a384fff CommunicationsFilter arm64 <f57b126af38139b280188f1e33ae77a2> /System/Library/PrivateFrameworks/CommunicationsFilter.framework/CommunicationsFilter 0x18a470000 - 0x18a475fff ConstantClasses arm64 <b1cc336c6ea1319f8131623918110a89> /System/Library/PrivateFrameworks/ConstantClasses.framework/ConstantClasses 0x18a478000 - 0x18a4b6fff ContentIndex arm64 <11771c1154c63b2ea6b3a2759116f76a> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex 0x18a4b8000 - 0x18a4c0fff CoreAUC arm64 <ac7f4428bde93a379e4710ff07f8cd82> /System/Library/PrivateFrameworks/CoreAUC.framework/CoreAUC 0x18a4fc000 - 0x18a55cfff CoreDAV arm64 <0eb42897b04c35558a55ac357b4f4eb5> /System/Library/PrivateFrameworks/CoreDAV.framework/CoreDAV 0x18a560000 - 0x18a588fff CoreDuet arm64 <2325864ac79931d08384cad9a5c2378c> /System/Library/PrivateFrameworks/CoreDuet.framework/CoreDuet 0x18a594000 - 0x18a5a7fff CoreDuetDaemonProtocol arm64 <8e9b82e37ab1398fb75be0114863b188> /System/Library/PrivateFrameworks/CoreDuetDaemonProtocol.framework/CoreDuetDaemonProtocol 0x18a5b0000 - 0x18a5b2fff CoreDuetDebugLogging arm64 <9a52d10bde253ae196a436618e6245af> /System/Library/PrivateFrameworks/CoreDuetDebugLogging.framework/CoreDuetDebugLogging 0x18a758000 - 0x18a890fff CoreMediaStream arm64 <e22f7a3741a33ebd9f7bf3930974f204> /System/Library/PrivateFrameworks/CoreMediaStream.framework/CoreMediaStream 0x18a894000 - 0x18a944fff CorePDF arm64 <48261152791832da9b786ccb6e676ce4> /System/Library/PrivateFrameworks/CorePDF.framework/CorePDF 0x18a9b8000 - 0x18a9c3fff CoreRecents arm64 <cd48e7d3e01439e1b592864083e40954> /System/Library/PrivateFrameworks/CoreRecents.framework/CoreRecents 0x18aa58000 - 0x18aa7cfff CoreServicesInternal arm64 <c35ab32d16e839e5bd3a2d4357cd512b> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal 0x18ace4000 - 0x18ad78fff CoreUI arm64 <8e5f6e68de253eb98752939e94219aa8> /System/Library/PrivateFrameworks/CoreUI.framework/CoreUI 0x18ad7c000 - 0x18ae16fff CoreUtils arm64 <835930892f3f3c28823421061c40dad7> /System/Library/PrivateFrameworks/CoreUtils.framework/CoreUtils 0x18ae18000 - 0x18ae1efff CrashReporterSupport arm64 <939d8e00b1a8388eaf6721fe6fed8d07> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport 0x18ae20000 - 0x18ae26fff DAAPKit arm64 <996db669e80833e0a44db31c6e094693> /System/Library/PrivateFrameworks/DAAPKit.framework/DAAPKit 0x18ae28000 - 0x18ae33fff DCIMServices arm64 <da6697519919326580a81258865cf9de> /System/Library/PrivateFrameworks/DCIMServices.framework/DCIMServices 0x18ae34000 - 0x18ae83fff DataAccess arm64 <7024476be74c3c1d9d7958544753e6d2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess 0x18b0e0000 - 0x18b106fff DataAccessExpress arm64 <ba41527f2d0136f787281ddbbe9d2015> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress 0x18b114000 - 0x18b130fff DataDetectorsCore arm64 <18f1d4d28f803ef6a60812bed08a4f67> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore 0x18b138000 - 0x18b154fff DataDetectorsUI arm64 <62a16bec373d3bfb95c8ad835ed3624b> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI 0x18b158000 - 0x18b15ffff DataMigration arm64 <ac8e9c98ebaf3b3facc8a35d4a5f662d> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration 0x18b17c000 - 0x18b17dfff DiagnosticLogCollection arm64 <446ae998ec433acdac17d08dfb63094d> /System/Library/PrivateFrameworks/DiagnosticLogCollection.framework/DiagnosticLogCollection 0x18b180000 - 0x18b1a0fff DictionaryServices arm64 <d911eb3e1549338d8a3da77f3cf030ca> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices 0x18b1c8000 - 0x18b1eefff EAP8021X arm64 <6201a1545ea735eaa654e6c4f19fce9c> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X 0x18b310000 - 0x18b327fff FTAWD arm64 <f00339a73278354ab23259a161733430> /System/Library/PrivateFrameworks/FTAWD.framework/FTAWD 0x18b328000 - 0x18b32afff FTClientServices arm64 <41e3fe196535314d955d8adf52731b2d> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices 0x18b32c000 - 0x18b35efff FTServices arm64 <063fb60e8c3031189f047aaf77127419> /System/Library/PrivateFrameworks/FTServices.framework/FTServices 0x18b360000 - 0x18b78dfff FaceCore arm64 <6c9c849bf1173e1892729204b96c95bb> /System/Library/PrivateFrameworks/FaceCore.framework/FaceCore 0x18b814000 - 0x18b814fff FontServices arm64 <9d2ca68913c53fef976aabcdb3f2bb7c> /System/Library/PrivateFrameworks/FontServices.framework/FontServices 0x18b818000 - 0x18b8f8fff libFontParser.dylib arm64 <3e696fd5c611305eaee6bad27362f029> /System/Library/PrivateFrameworks/FontServices.framework/libFontParser.dylib 0x18b8fc000 - 0x18b90bfff libGSFontCache.dylib arm64 <c98491fefd2a34f5a1a5fab3cce3d478> /System/Library/PrivateFrameworks/FontServices.framework/libGSFontCache.dylib 0x18ba18000 - 0x18ba38fff FrontBoardServices arm64 <06e8a3da46443f858df92288b8b009bf> /System/Library/PrivateFrameworks/FrontBoardServices.framework/FrontBoardServices 0x18c5e0000 - 0x18c5f9fff GenerationalStorage arm64 <c02d99b6f6e138249504e2a9a598e9b1> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage 0x18c5fc000 - 0x18c911fff GeoServices arm64 <624b0528e79e3bd78cf8e4ca477e207b> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices 0x18c914000 - 0x18c927fff GraphicsServices arm64 <75b91070a0e7388fb904347f318b8cc0> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices 0x18ca80000 - 0x18cae8fff Heimdal arm64 <d7f823808ea338e189ab8f504eccb3a8> /System/Library/PrivateFrameworks/Heimdal.framework/Heimdal 0x18cbfc000 - 0x18cc96fff HomeSharing arm64 <9d9df9ed1dc53162a89400f3c5a786df> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing 0x18cd00000 - 0x18cd6bfff IDS arm64 <f4cb70b71d3b31729bdaa04281def4ee> /System/Library/PrivateFrameworks/IDS.framework/IDS 0x18cd6c000 - 0x18cd9afff IDSFoundation arm64 <9411f337675431bd9d1ee6ca7f2e9810> /System/Library/PrivateFrameworks/IDSFoundation.framework/IDSFoundation 0x18cd9c000 - 0x18ce08fff IMAVCore arm64 <cdbed1a9f5133baf95c2752c1c967aed> /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore 0x18ce0c000 - 0x18cecffff IMCore arm64 <11b18dde1abd3553a034dc30ed2f5954> /System/Library/PrivateFrameworks/IMCore.framework/IMCore 0x18cf80000 - 0x18cff1fff IMFoundation arm64 <49f257517bed3c80a505c395449ab8a4> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation 0x18cffc000 - 0x18d003fff IOAccelerator arm64 <95ab3e3274d630779faccf8902ddc494> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator 0x18d008000 - 0x18d00efff IOMobileFramebuffer arm64 <079c9947522f331b8837714ca08e0966> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer 0x18d010000 - 0x18d016fff IOSurface arm64 <202149d941b339f1a765e48058a523ea> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface 0x18d018000 - 0x18d01afff IOSurfaceAccelerator arm64 <9aaea96dbea43a648fa78e7f43f769cd> /System/Library/PrivateFrameworks/IOSurfaceAccelerator.framework/IOSurfaceAccelerator 0x18d378000 - 0x18d37efff IncomingCallFilter arm64 <f850d702dc973d508bcc890a93616bdb> /System/Library/PrivateFrameworks/IncomingCallFilter.framework/IncomingCallFilter 0x18d380000 - 0x18d387fff IntlPreferences arm64 <0ba4276ecf8831378d3576dd145e3282> /System/Library/PrivateFrameworks/IntlPreferences.framework/IntlPreferences 0x18d388000 - 0x18d3cdfff LanguageModeling arm64 <f484305f34db38e7be02f5cd0b37404b> /System/Library/PrivateFrameworks/LanguageModeling.framework/LanguageModeling 0x18d460000 - 0x18d4a8fff MIME arm64 <692dce99d89d32298da32bbde8c18a63> /System/Library/PrivateFrameworks/MIME.framework/MIME 0x18d4ac000 - 0x18d518fff MMCS arm64 <780e63b11aeb3997b5bafb50d6b21b03> /System/Library/PrivateFrameworks/MMCS.framework/MMCS 0x18d57c000 - 0x18d58afff MailServices arm64 <61cef8e55a8f3747b5adeecb2f430e77> /System/Library/PrivateFrameworks/MailServices.framework/MailServices 0x18d5c8000 - 0x18d686fff ManagedConfiguration arm64 <b8ba68326c7030c1803e9f01edcefe02> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration 0x18d698000 - 0x18d699fff Marco arm64 <f08df1984df33a7c80d2a2d9f8537c71> /System/Library/PrivateFrameworks/Marco.framework/Marco 0x18d69c000 - 0x18d720fff MediaControlSender arm64 <efb209af426c3d2bb592c4e8f2648a27> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender 0x18d7d4000 - 0x18d7ecfff MediaRemote arm64 <29897add26cf34f7b92dc012ed32f883> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote 0x18d7f0000 - 0x18d805fff MediaServices arm64 <98515a962b2f335da9efb5f14931c42f> /System/Library/PrivateFrameworks/MediaServices.framework/MediaServices 0x18d808000 - 0x18d824fff MediaStream arm64 <a5f65807eb863acf9a749e88e6c6b731> /System/Library/PrivateFrameworks/MediaStream.framework/MediaStream 0x18d8a4000 - 0x18d9a1fff Message arm64 <2b6c7c4d05c23c12add40cc85a849458> /System/Library/PrivateFrameworks/Message.framework/Message 0x18d9ac000 - 0x18d9affff MessageSupport arm64 <9852ca056bd13fb1b1d9254aa015cc3a> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport 0x18d9c0000 - 0x18d9cffff MobileAsset arm64 <b09857caa4663e268cbf77652e40c7df> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset 0x18d9fc000 - 0x18da08fff MobileBluetooth arm64 <5fe32739d757359f963b4c926f472374> /System/Library/PrivateFrameworks/MobileBluetooth.framework/MobileBluetooth 0x18da30000 - 0x18da39fff MobileIcons arm64 <d594044fabbc31af991af3b8af4530a5> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons 0x18da3c000 - 0x18da45fff MobileInstallation arm64 <096c77b57b62337bb756b2b347fb0768> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation 0x18da48000 - 0x18da57fff MobileKeyBag arm64 <0e6f9d62dfe23cbca54b4d1a14f76149> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag 0x18da94000 - 0x18da97fff MobileSystemServices arm64 <54153419dcaa356fb42fd86b712a4cf2> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices 0x18dac0000 - 0x18dad1fff MobileWiFi arm64 <b033fc6a7d7b39debe0d81296dce51e1> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi 0x18db28000 - 0x18dd30fff MusicLibrary arm64 <8febe3b9c72a311f9cf0f8a95e52b821> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary 0x18df10000 - 0x18df29fff NanoRegistry arm64 <c977913607563f28963a336adaf69c22> /System/Library/PrivateFrameworks/NanoRegistry.framework/NanoRegistry 0x18df68000 - 0x18df6efff Netrb arm64 <28eb6839c8f63101816697fa19770689> /System/Library/PrivateFrameworks/Netrb.framework/Netrb 0x18df70000 - 0x18df77fff NetworkStatistics arm64 <b120e0e7ff6d36889b917c7ca2e5f978> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics 0x18df78000 - 0x18df9afff Notes arm64 <685e6f78db0e3adf9f233115bef345b1> /System/Library/PrivateFrameworks/Notes.framework/Notes 0x18dfa4000 - 0x18dfa7fff OAuth arm64 <e8987386b74a365582fa85fef51bc127> /System/Library/PrivateFrameworks/OAuth.framework/OAuth 0x18e770000 - 0x18e7befff OpenCL arm64 <9ad1144d2c4333b980276e2c4e6ac4fa> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL 0x18e93c000 - 0x18e965fff PersistentConnection arm64 <6723595bce1937c3a45fbb85baff8c55> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection 0x18eaf4000 - 0x18edeefff PhotoLibraryServices arm64 <661e8f4bffb93a70905bbe78f38b5564> /System/Library/PrivateFrameworks/PhotoLibraryServices.framework/PhotoLibraryServices 0x18edf0000 - 0x18edf9fff PhotosFormats arm64 <492afd457a413838925220729b7ca800> /System/Library/PrivateFrameworks/PhotosFormats.framework/PhotosFormats 0x18edfc000 - 0x18ee49fff PhysicsKit arm64 <6a97907da3523632b9e4848047aa8f4a> /System/Library/PrivateFrameworks/PhysicsKit.framework/PhysicsKit 0x18ee4c000 - 0x18ee66fff PlugInKit arm64 <abb4118758ff3394be7af8851961f0a9> /System/Library/PrivateFrameworks/PlugInKit.framework/PlugInKit 0x18ee68000 - 0x18ee70fff PowerLog arm64 <e938cd724d08330995b5f601f8dd14f6> /System/Library/PrivateFrameworks/PowerLog.framework/PowerLog 0x18f0d0000 - 0x18f198fff Preferences arm64 <c569face087f3dbc91f616b0b69f6516> /System/Library/PrivateFrameworks/Preferences.framework/Preferences 0x18f1e8000 - 0x18f2a9fff ProofReader arm64 <5d4f70ce92443a24b01e5c2186abfb15> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader 0x18f2ac000 - 0x18f2d9fff ProtectedCloudStorage arm64 <d928e44bb8ce3522a7bb283faaa5047b> /System/Library/PrivateFrameworks/ProtectedCloudStorage.framework/ProtectedCloudStorage 0x18f2dc000 - 0x18f2eafff ProtocolBuffer arm64 <479705f12ac2303b931994a7b06663bf> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer 0x18f32c000 - 0x18f3aafff Quagga arm64 <66a25218aec23c18b9a18d8f810c5258> /System/Library/PrivateFrameworks/Quagga.framework/Quagga 0x18f3ac000 - 0x18f3b5fff QuickLookThumbnailing arm64 <195ff028b269356eab3e5b1ba59f59ce> /System/Library/PrivateFrameworks/QuickLookThumbnailing.framework/QuickLookThumbnailing 0x18f70c000 - 0x18f7b4fff SAObjects arm64 <56ba1d3456133884a61b2dd27ca74be2> /System/Library/PrivateFrameworks/SAObjects.framework/SAObjects 0x18f890000 - 0x18f8d9fff Sharing arm64 <45756d6c197930558ef1ebd1adfae97a> /System/Library/PrivateFrameworks/Sharing.framework/Sharing 0x18f9a8000 - 0x18f9c8fff SpringBoardServices arm64 <c2866d40ee023cf9bb04fd7e58d20be2> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices 0x18fdc8000 - 0x18ff26fff StoreServices arm64 <6f1976a1f8de3576bab51f432d4fd363> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices 0x190024000 - 0x190027fff TCC arm64 <b82f927439b13660b90c1669424d0c88> /System/Library/PrivateFrameworks/TCC.framework/TCC 0x190088000 - 0x1900d5fff TelephonyUtilities arm64 <1f7cc967cc793f8bac3cc3b7f0f906c4> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities 0x1900fc000 - 0x190eb5fff KBLayouts_iPhone.dylib arm64 <ab8f676ccb6a3f95b3c3df8c3ff75e62> /System/Library/PrivateFrameworks/TextInput.framework/KBLayouts_iPhone.dylib 0x190eb8000 - 0x190ee6fff TextInput arm64 <a1c4cabe458432e5a1f44ba76562f5fb> /System/Library/PrivateFrameworks/TextInput.framework/TextInput 0x190fcc000 - 0x1910a6fff UIFoundation arm64 <cd7d7fc27ec53df5977d9ee67ee0c54a> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation 0x1910d8000 - 0x1910dbfff UserFS arm64 <e5ebd8c9ae653364a9165ece0a913713> /System/Library/PrivateFrameworks/UserFS.framework/UserFS 0x191934000 - 0x191958fff VoiceServices arm64 <14360e38ed6530b0a4b425cf59e2e6c4> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices 0x191a0c000 - 0x191a34fff WebBookmarks arm64 <7545a4b6e2b83edda152ca880a2531be> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks 0x191a54000 - 0x19298dfff WebCore arm64 <adb10f951502364aa9574d0d292bb430> /System/Library/PrivateFrameworks/WebCore.framework/WebCore 0x192990000 - 0x192a61fff WebKitLegacy arm64 <4b9e1233412b38c08667bea57820c69a> /System/Library/PrivateFrameworks/WebKitLegacy.framework/WebKitLegacy 0x192c50000 - 0x192c57fff XPCKit arm64 <68a3cf7fd92630fa8593f41da4a44659> /System/Library/PrivateFrameworks/XPCKit.framework/XPCKit 0x192c58000 - 0x192c61fff XPCObjects arm64 <094176983b743647b4f4f961675409f2> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects 0x192e98000 - 0x192ec3fff iCalendar arm64 <4e98d67b7cbe31d5ab9dc37386f2d851> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar 0x192ef0000 - 0x192f32fff iTunesStore arm64 <ecba8ce199b131dc9c34de6055ce1826> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore 0x193a8c000 - 0x193a95fff libAccessibility.dylib arm64 <72f6e8d3b4393171adad94e3bb413237> /usr/lib/libAccessibility.dylib 0x193d2c000 - 0x193d47fff libCRFSuite.dylib arm64 <be077716ac813f089f62203291996e66> /usr/lib/libCRFSuite.dylib 0x193d88000 - 0x193ebffff libFosl_dynamic.dylib arm64 <bb3d2b69a7f3305c84970bab2c92a1ee> /usr/lib/libFosl_dynamic.dylib 0x193ee4000 - 0x193efefff libMobileGestalt.dylib arm64 <0d296a1f3cbd39bca52fdaa3b4df2a34> /usr/lib/libMobileGestalt.dylib 0x193f30000 - 0x193f31fff libSystem.B.dylib arm64 <9e8736fd5dda318abe4e597a531a625f> /usr/lib/libSystem.B.dylib 0x193fb4000 - 0x194002fff libTelephonyUtilDynamic.dylib arm64 <f3b516b737b63a46b0a4b1e41ed9e7d4> /usr/lib/libTelephonyUtilDynamic.dylib 0x19412c000 - 0x194156fff libarchive.2.dylib arm64 <940f023a5f5f3aa19366e25514485721> /usr/lib/libarchive.2.dylib 0x194158000 - 0x194158fff libassertion_extension.dylib arm64 <e06a4dfa6008338b934ee537d58d54c3> /usr/lib/libassertion_extension.dylib 0x194198000 - 0x1941a8fff libbsm.0.dylib arm64 <9e2235e821063e82a304719b1f4cf5f9> /usr/lib/libbsm.0.dylib 0x1941ac000 - 0x1941bcfff libbz2.1.0.dylib arm64 <a4e3b1006e6c37d3816f612caa78bdf2> /usr/lib/libbz2.1.0.dylib 0x1941c0000 - 0x194216fff libc++.1.dylib arm64 <fd4810a47e6b31d3b5a8ceedf8ac6937> /usr/lib/libc++.1.dylib 0x194218000 - 0x19423afff libc++abi.dylib arm64 <2d2238a0320c395dbd802981c0b1a5fe> /usr/lib/libc++abi.dylib 0x194240000 - 0x194251fff libcmph.dylib arm64 <51052b48f1053799a834ca4a8e71b581> /usr/lib/libcmph.dylib 0x194254000 - 0x19425cfff libcupolicy.dylib arm64 <082e83a4bd1a371bb6efa2b7d9007097> /usr/lib/libcupolicy.dylib 0x194298000 - 0x1942b5fff libextension.dylib arm64 <e2ed78a202593605b32575c0f22e08ea> /usr/lib/libextension.dylib 0x1942e4000 - 0x1942e9fff libheimdal-asn1.dylib arm64 <61576927c939371c86216b7f14aed420> /usr/lib/libheimdal-asn1.dylib 0x1942ec000 - 0x1943dffff libiconv.2.dylib arm64 <f735f961ee3e380ea18bb26f937c708e> /usr/lib/libiconv.2.dylib 0x1943e0000 - 0x1945c7fff libicucore.A.dylib arm64 <4d8191c3315c3f5ca890c19e30dcd75b> /usr/lib/libicucore.A.dylib 0x1945dc000 - 0x1945ddfff liblangid.dylib arm64 <02a03c3dba573ae0ab3b32911c77efba> /usr/lib/liblangid.dylib 0x1945e0000 - 0x1945ecfff liblockdown.dylib arm64 <f3fabf14927e30f4889f04efcd61711c> /usr/lib/liblockdown.dylib 0x1945f0000 - 0x194609fff liblzma.5.dylib arm64 <f16086f89f1032d1aa3b80b559eddca9> /usr/lib/liblzma.5.dylib 0x1949e0000 - 0x1949f8fff libmis.dylib arm64 <3929204949543825a23a02585a45eff8> /usr/lib/libmis.dylib 0x1949fc000 - 0x194a2cfff libncurses.5.4.dylib arm64 <4c95738f8d96355faec9d8a2fbba9a44> /usr/lib/libncurses.5.4.dylib 0x194a44000 - 0x194c40fff libobjc.A.dylib arm64 <963fc34f80f9303da52a020af5a63e74> /usr/lib/libobjc.A.dylib 0x194d28000 - 0x194d45fff libresolv.9.dylib arm64 <7793473e15e13911809cb6a8162c0b94> /usr/lib/libresolv.9.dylib 0x194d78000 - 0x194e55fff libsqlite3.dylib arm64 <a97fddbf637f349ab395149f86cd80be> /usr/lib/libsqlite3.dylib 0x194eac000 - 0x194edefff libtidy.A.dylib arm64 <74b893a0811730c8a33c8f56d841b292> /usr/lib/libtidy.A.dylib 0x194ee0000 - 0x194ee9fff libtzupdate.dylib arm64 <71b844bdf79533ce82bca79265a4d354> /usr/lib/libtzupdate.dylib 0x194ef0000 - 0x194fdefff libxml2.2.dylib arm64 <73e5c4db073c3f97b3d7a78fdc531e86> /usr/lib/libxml2.2.dylib 0x194fe0000 - 0x195009fff libxslt.1.dylib arm64 <e84a63dc1cdf33f38edcd1963e8bcac0> /usr/lib/libxslt.1.dylib 0x19500c000 - 0x19501dfff libz.1.dylib arm64 <263f8bc085593d578ea393ba40438ee3> /usr/lib/libz.1.dylib 0x195020000 - 0x195024fff libcache.dylib arm64 <69f2d8d4d9ed3393b4e44bc425b538f2> /usr/lib/system/libcache.dylib 0x195028000 - 0x195034fff libcommonCrypto.dylib arm64 <c126afa9b4eb3f8cbb5fee48a17b56c6> /usr/lib/system/libcommonCrypto.dylib 0x195038000 - 0x19503bfff libcompiler_rt.dylib arm64 <7d48e08690f43daeaf8fdcb82d3ebb74> /usr/lib/system/libcompiler_rt.dylib 0x19503c000 - 0x195043fff libcopyfile.dylib arm64 <126799884b2231498c7a5697b769aff5> /usr/lib/system/libcopyfile.dylib 0x195044000 - 0x19509bfff libcorecrypto.dylib arm64 <eeae3730f4bb3c8e91bd85f00b2314ce> /usr/lib/system/libcorecrypto.dylib 0x19509c000 - 0x1950c4fff libdispatch.dylib arm64 <91f808be126a33b982d5880c2454afde> /usr/lib/system/libdispatch.dylib 0x1950c8000 - 0x1950cafff libdyld.dylib arm64 <cdf00d005c2f30efa821536ccb0b70f4> /usr/lib/system/libdyld.dylib 0x1950cc000 - 0x1950ccfff liblaunch.dylib arm64 <0d5f253a83673ecb9a55f667adf2c205> /usr/lib/system/liblaunch.dylib 0x1950d0000 - 0x1950d5fff libmacho.dylib arm64 <08dc912ff3123d2abc59dd17889f2abc> /usr/lib/system/libmacho.dylib 0x1950d8000 - 0x1950d9fff libremovefile.dylib arm64 <d5239b98479b37538d63f1fd0fe35905> /usr/lib/system/libremovefile.dylib 0x1950dc000 - 0x1950f1fff libsystem_asl.dylib arm64 <314e1ff76a71372ca4bc80351f984376> /usr/lib/system/libsystem_asl.dylib 0x1950f4000 - 0x1950f5fff libsystem_blocks.dylib arm64 <b120e51ddfeb3a1ca33f448f54412428> /usr/lib/system/libsystem_blocks.dylib 0x1950f8000 - 0x195178fff libsystem_c.dylib arm64 <043c87b4428d34d4985264cebab5f687> /usr/lib/system/libsystem_c.dylib 0x19517c000 - 0x19517efff libsystem_configuration.dylib arm64 <a666b752b9ea3289998dcf502fdeed0f> /usr/lib/system/libsystem_configuration.dylib 0x195180000 - 0x195181fff libsystem_coreservices.dylib arm64 <f73841bdf9a03defa5893ff3053889fa> /usr/lib/system/libsystem_coreservices.dylib 0x195184000 - 0x195194fff libsystem_coretls.dylib arm64 <e5edf64e24403daa997390669c136d6f> /usr/lib/system/libsystem_coretls.dylib 0x195198000 - 0x1951a0fff libsystem_dnssd.dylib arm64 <c3c32be935df34b99c9f7acf5c29d3ff> /usr/lib/system/libsystem_dnssd.dylib 0x1951a4000 - 0x1951c5fff libsystem_info.dylib arm64 <7568980767d3355b99464736b574ff14> /usr/lib/system/libsystem_info.dylib 0x1951c8000 - 0x1951e8fff libsystem_kernel.dylib arm64 <7cd96299577530ebbca0cb44625702a7> /usr/lib/system/libsystem_kernel.dylib 0x1951ec000 - 0x195208fff libsystem_m.dylib arm64 <4f59e5b4cf4935ada2e457a196730c2a> /usr/lib/system/libsystem_m.dylib 0x19520c000 - 0x195225fff libsystem_malloc.dylib arm64 <56245a320c8a39f5b6057a9e99cac10d> /usr/lib/system/libsystem_malloc.dylib 0x195228000 - 0x19525ffff libsystem_network.dylib arm64 <45c9566df16c3ae8ac52b39cafc30094> /usr/lib/system/libsystem_network.dylib 0x195260000 - 0x195266fff libsystem_networkextension.dylib arm64 <2d758a26b5c23b969bfdb2c759752531> /usr/lib/system/libsystem_networkextension.dylib 0x195268000 - 0x195272fff libsystem_notify.dylib arm64 <c9c3de7c1a60336caf14918b9b087245> /usr/lib/system/libsystem_notify.dylib 0x195274000 - 0x195278fff libsystem_platform.dylib arm64 <c1774ebd3158311c8ee629808cbf8e77> /usr/lib/system/libsystem_platform.dylib 0x19527c000 - 0x195284fff libsystem_pthread.dylib arm64 <e33298efd42037c2b571cde172635e5a> /usr/lib/system/libsystem_pthread.dylib 0x195288000 - 0x19528afff libsystem_sandbox.dylib arm64 <edbadf71bd723d298ae9d5ad3d88ea86> /usr/lib/system/libsystem_sandbox.dylib 0x19528c000 - 0x19528ffff libsystem_stats.dylib arm64 <3ff8d305985431a9b00a9be30ea1d06e> /usr/lib/system/libsystem_stats.dylib 0x195290000 - 0x195296fff libsystem_trace.dylib arm64 <85a38582fb75355d92d3f50ca8c00b23> /usr/lib/system/libsystem_trace.dylib 0x195298000 - 0x19529dfff libunwind.dylib arm64 <ff63fb2532113013bd0a9da1f3df5911> /usr/lib/system/libunwind.dylib 0x1952a0000 - 0x1952c3fff libxpc.dylib arm64 <b870b51daa853686a7d9acd48c5fe153> /usr/lib/system/libxpc.dylib', Created ', crash-log.txt Whoops sorry - as a txt file this time :)', This looks like the wrong crash Date/Time: 2015-04-09 18:52:00.141 +0100', (In reply to Aaron Train :aaronmt from ', ) ', Hmm, sorry let me try again (I just grabbed the top one)', Hmm, that's weird - even if I view the LatestCrash-Client.ips, it is dated 2015-04-10? Is this issue possibly not generating a new crash log?", Fwiw, this crash is still happening for me on build 28. Nothing new in the logs each time :/', let's rule out a) rebooting the device, b) and any other customizations (e.g, 3rd party keyboard)? I still can't reproduce on my iPhone 6", (In reply to Aaron Train :aaronmt from ', ) ', a) rebooting the device has not stopped the issue unfortunately b) no custom keyboards installed', If it helps at all, I notice the following behavior: - If I focus on the address bar and type a 'w' character, I do not get a crash (assuming because it's looking for previous addressed that start with 'www' - Similarly, If I start by typing an 'h', I also do not get a crash (http(s)://). - If I start typing with a letter that matches a website address in my history, I do not get a crash. - If I start by typing any other letter that does not match any of the above conditions, I get a crash instantly. It's almost as if search is triggering the issue (as opposed to history).", Alex, what happens if you tap the tab tray, the settings cog, and then turn off all the search engines and search suggestions?', (In reply to Richard Newman :rnewman from ', ) ', Hmm, crash still occurs even with all search engines and search suggestions turned off :(', Created ', 2015-07-24_19-56-06.663_+0900-039e821be5130ff4dfccfb2389faecdc0afeca77.crash Could this be the crash I wonder (found in sent crash reports)?', I don't think so because the user in case just began editing the url field and hasn't typed anything yet. I assume that the crash would occur from a call to textFieldDidChange instead of didBegin.", Can't seem to reproduce this in build 29. Let's retest in the next release (30).", This is fixed for me in build 31 \\o/', Thanks, Alex!' 
id=1162611	 'We don\'t include our own record in our client DB: for (rec) in records { if rec.id == ourGUID { if rec.modified == self.clientRecordLastUpload { log.debug("Skipping our own unmodified record.") } else { log.debug("Saw our own record in response.") ours = rec } } else { toInsert.append(self.clientRecordToLocalClientEntry(rec)) } } neither do we insert our own tab record in our tabs DB: let allDone = all(records.filter({ $0.id != ourGUID }).map(doInsert)) so there should be nothing for the frontend to filter out, unless you\'re doing something I don\'t know about.', Yeah I think you are right. I think this bug was the result of some confusion after testing on the simulator where it seems every time I run the app I get a new client record. I'll investigate *that* one in more detail and close this one." 
id=1226300	 "We select the entirety of the address by default on focus but that is to be expected as default behaviour. I don't see any problems if you deselect the value of the address-bar and edit. I don't think any A11Y system options would modify this behaviour." 
id=1171463	 'Have not seen this since filing.', Scratch that, this still happens when you open a new tab from about:home', Created ', ', Link to Github pull-request: ', This is not quiet working yet. I tried a few approaches, but none of them seemed to give the expected result: - Creating an overlay view on top of the footer and showing it during the animation only (in the current commit) - Removing (from the superview) / hiding the footer during the transition - Removing the footer subviews during the transition From what I understand, the grey area is the footer, and it shouldn't be displayed during the transition to a tab from the tabs tray. To remove/hide views during the transition I used the transitionablePreShow and transitionableWillComplete delegate methods in BrowserViewController. Correct me if I'm wrong, and if yo re thinking about another approach please share. Thanks.", Hey Karim, It looks like the problem is the TabTrayController is making the false assumption in making room for the footer to fade in and the BVC is blindly animating the footer in without knowing what it's about to show. I propose that: 1. In the BVC's transitionWillShow, run a check on the tabManager.selectedTab's URL to see if it's a home URL. If it is, ignore resetting the transform. 2. In the TabTrayController's showFullscreen method, factor in the fact we're showing an about:home screen into the frame calculation so we don't leave room for the toolbar if not needed. There's already a flag for this but it's only taking into consideration the size class since we don't want to show the toolbars for landscape/iPad animations. Let me know if that helps.", Removing NI since sleroux gave some good hints :)', Resolved as part of ' 
id=1238036	 'Created ', ', Link to Github pull-request: ', touchesBegan doesn't get fired for WKWebView, presumably because they don't fire the super UIView.hitTest implementation triggers the touch events. As a workaround, we can hook into hitTest directly.", Comment on ', ', Link to Github pull-request: ', Looks like this works. Its kind of a hack considering this isn't what hitTest is meant for but if it gives us a way to perform the responder resignation then so be it. Only thing that this might break is webview interactions if it relies on not being the first responder but the actions I did (navigation, long press) worked fine." 
id=1315257	 'Created ', ', PR: ', This patch brings the L10N Screenshots back. See more details in the PR. I would like to land this on master but also uplift it to v6.x so that we can make screenshots of the product that we ship. The only changes in non-test code is the addition of accessibility identifiers. I think that is pretty low risk but let me know if you think otherwise.', Comment on ', ', PR: ', Looks good! Land away', thanks for letting me know about this, looks fine to me.', *** ', has been marked as a duplicate of this bug. ***', v6.x 8d7aebd' 
id=1183806	 'Created ', Second screenshot. Repeating the process gets me /errors/undefined.', Created ', ', PR', Comment on ', ', PR On the right track!' 
id=1250587	 "I don't see this now. The prefetch lists are sets, so this should no longer be possible." 
id=1104884	 'Closing this because this is not relevant anymore. We store new items in the profile and do not make network requests from the share extension.' 
id=1253441	 'Created ', ', Pull req.', c252ebb', v3.x d005c68' 
id=1116634	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1145596	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1132500	 'Wes do you think you can do a fix for this?', Yeah. I'll take it.", Created ', ', PR: ', Comment on ', ', PR: ', Sure.' 
id=1276545	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', Merged', v5.x 99b9334ea1ea9e0dfcdddab1d46f5ed09a72adfc' 
id=1208505	 'Resolved with: ', Oops wrong bug - meant to update ', Created ', ', ', Updated patch with review comments + Array extension extraction. Also, I tested this by creating a ObjC class that has a single static method called 'crash' which @throws an NSException to trigger an uncaught exception. I added this to the addTab button call so the app would crash whenever I opened a new tab. I tried: 1. 5 Open tabs with various histories = shows prompt 2. 1 tab with history = shows prompt 3. 1 tab with no history = no prompt 4. 2 tabs with no history = no prompt", Comment on ', ', ', I\'d love for the tiny change to BVC that actually fixes the bug to be in a separate commit, with the rest being "Pre" or "Part 0". It\'s hard to tell from the PR which part is important!', I've cleaned up the commits to be Pre: and Part with Part 1 containing the actual bug fix.", Merged' 
id=1157394	 'Created ', ', Pull request', Comment on ', ', Pull request I have one substantive request: filter for more specific types rather than search for and index childViewControllers directly. Other than that, I'd add some comments, tweak some names, and SHIP IT." 
id=1290370	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1168131	 "Strangely, I don't think this is possible. Action Extensions cannot open other applications. I know I have seen 'Open in Chrome' somewhere but I can't find it anymore. Do you have an example of an app where Open in Chrome, or Open in $AnyRandomOtherApp, works from the Share menu?", Interesting. I see a Send to Chrome in Twitterrific. But .. that is a custom action implemented in the Twitteriffic app and not an Action Extension that is part of Chrome.', Post v1', Marking as dupe of 1109684 which is where the work is happening. *** This bug has been marked as a duplicate of ', ***' 
id=1178780	 'Comment on ', ', ', Looks good! just a nit comment', Merged with nit fix.' 
id=1256605	 "I've been able to reproduce this and can try taking it from here if no one else is working on it. It looks like it might be a couple things. At least in the simulator the steps caused a crash. I haven't looked yet, but I assume that you are doing state restoration. So it looks like this screen may not have been updated to properly work with it yet. So I think there are really 2 bugs here: 1. The crash 2. Ensuring state restoration works for this view controller If that sounds about right to you guys I'll start putting together an actual solution and see what I can come up with.", Whoops...wrong bug.', Since I've accidentally chimed in...I was thinking about asking if I could take a stab at this bug too. The other I commented I accidentally above seems to have disappeared on me and I can't find it anymore.", Hey Kevin, Sure thing! I saw you commented on ', but it was already assigned. I'll assign this bug to you.", I think this must have been fixed in a previous update. I cannot reproduce this issue.', Following the reproduction steps listed I could not reproduce this with the latest builds of FireFox-iOS' 
id=1136236	 
id=1199584	 'Odd, I see the same thing in English too.', Does not affect TestFlight (i.e., v1.0.0). Trying to get logs from v1.0 branch now.', Scratch that, I can repro on v1.0.0.', Seems like either WebServer isn't running, or the URL we're computing for it is wrong. I can't repro this in simulator with v1.0, but I can on device with TF.", So GCDWebServer listens internally for when the application goes into the background/foreground and starts/stops itself. I have a feeling that between the app going into the background and then coming back to the foreground, we drop the 'singleton' instance or the handlers disappear. The other option is the web server isn't getting restarted properly but the code for that looks solid. I'll investigate further.", The issue is that the socket connection that accepts requests in GCDWebServer gets terminated when the phone becomes locked. We should not assume that we can keep a socket open indefinitely on iOS. Some more info on why this happens can be found here: ', . :st3fan, I remember you mentioning you had issues with configuring GCDWebServer to suspend on background because of a changing port issue which is why we configured it to not suspend. Do you recall what those issues were?', Clearing NI on this bug and moving it to same issue filed under a different bug', Resolved with the fix from it's dependent bug ", .' 
id=1266920	 
id=1147252	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1279319	 'Created ', Link to Github pull-request: ', Comment on ', Link to Github pull-request: ', comment left in PR', Comment on ', Link to Github pull-request: ', LGTM', master 5ad5508bf2be32791e544a1da3ef08145b8ef480', v5.x af4f6c6', " Sync notification displaying warning/error when sync completion completed successfully" Late Friday reading this bug summary but why would we should a warning or error on a successful Sync?', (In reply to Aaron Train :aaronmt from ', ) ', Nevermind!' 
id=1296941	 'Hmmm, it seems like that this report has been fixed by(', ): ', *** This bug has been marked as a duplicate of ', ***' 
id=1211984	 "My only advice is to make sure we add robust, not fragile, mechanisms. Using duct tape and band-aids to fix performance issues will cause pain in the future. Speaking from experience. If yo re going to cache, think about any other code paths that might use the frecency query now or later. Making a caching mechanism that improves performance lower in the layers might benefit more consumers.", More discussion is here: ', My perspective here is about balance. The right solution, as I see it, is to compute and store fine-grained frecency for each URL, which makes both the top sites query *and* awesomebar search faster. That involves schema changes, a migration, and figuring out when and how to compute and update these. Desktop has some inspiration to offer. It's not rocket surgery. That said, I think it's worth also investigating caching if we are confident that (a) it won't be much work, and (b) it'll buy us big wins with a simple approach, not whack-a-mole. If we can come up with a simple heuristic for when to snapshot, when to invalidate that snapshot, and we're done without significant regressions\u2026 great! Let's do that to make Top Sites snappy for now.", Would it make sense to borrow the heuristic that desktop is using? One idea that Richard and I were throwing around was calculating the frecency at a fixed future timestamp which would allow us to materialize the frecency values into a table for Top Sites. We would then to purge the table at that future timestmap and recalculate. From what I know, desktop does a similar thing where they calculate an approximate value for frecency on a daily(?) interval.', (In reply to Stephan Leroux :sleroux from ', ) ', In that I think we should move to bucketed persisted per-URL frecency, yeah :D ', That's part of persisting frecency, yeah -- on desktop we use idle-daily to update the stored value for each URL in the DB, using buckets for scoring. I think we were talking about doing something strictly simpler, as a pure cache -- a separate table that we fill with the results of the unchanged current query. So rather than func getTopSites { return SELECT ... FROM ... ORDER BY $complicated } we'd do func getTopSites { if (not recent enough) or (no cached top sites) { DELETE FROM cached_top_sites INSERT INTO cached_top_sites (SELECT ... FROM ... ORDER BY $complicated) } return SELECT * FROM cached_top_sites } That's *roughly* equivalent to storing precomputed frecency in a separate table, but it's simpler, in that neither the consuming code nor the frecency query need to change at all -- we just add a layer of indirection. I think if we spend the time to persist individual-URL frecency, then we're close enough to just doing the right thing and making it part of the main data model.", Thanks Richard - that clarifies it more. I don't see the harm in adding that patch for now to increase performance of top sites while we work on the database schema changes as more of a long term project.", Created ', ', ', In-progress work on caching frecency results for a faster Top Sites Panel. So far, 1. Added cached_top_sites table to store frecency values 2. Added getTopSitesWithLimit method to SQLiteHistory to return all top sites from cache if it's valid and dump/recalculate cache when cache is stale (> 1 day old). To do: 1. Need to hook into the various history events to update our cache (updateVisit, insertVisit, remove, etc). Not sure if hooking into Swift methods is the best way or adding triggers to the visits/history table would be best. 2. Instead of using 'now' for the frecency calculations, it needs to be set to a time in the future for the approximation otherwise the calculations will be wrong. Just need to refactor the frecency query methods to pass in a timestamp (which will be a day ahead of our last cached time). Richard, do you have any thoughts/concerns/suggestions about the current approach and where to go to next?", (In reply to Stephan Leroux :sleroux from ', ) ', Our writes are high-volume, so I'd be inclined to not do this with DB triggers just yet. Perhaps after a history sync to start with, and then we can focus on solving invalidation for the new-user case. ", The calculations will be wrong, but not in a way that matters. (We should really graph the current calculation!) ', Comments on the PR. Test and measure. Make sure we don't set the timestamp at the wrong moment -- we should blank it on purge and set it on update, always.", Thanks for the feedback. I've updated the PR with the suggested fixes and added some tests as well for the top sites stuff. ", Invalidation after syncing history works but I think we still need a way of invalidating in the new-user/non-FxA cases for an MVP of this feature since not having Top Sites update for a day isn't acceptable. Even something like invalidating on app launches would work for now.", Actually - I can probably hook into the applicationDidBecomeActive callback in BrowserProfile', Right now, we show top sites and block until we get results. I think this is strictly better and also simple: When loading top sites, show cached results if any exist. If not, show only suggested sites. This matches our first run behavior: yay! If: - There is no cache, or - Any pages have been visited since last cache update, or - This is the first launch of the browser, or - History has synced since last cache update Then: - In the background, invalidate the cache and trigger a redisplay. In the first run case, then, we'll show suggested sites. In the regular use case, we'll show your old top sites and almost never will they change\u2026 but they might change a little half a second after we show them. That seems fine to me. Additionally: when clearing history, or on any other significant event that causes us to purge the cache, also immediately recompute in the background. That'll make sure our cache is up to date when large changes occur. Thoughts?", That sounds more robust and makes sense. To clarify, we would be moving away from a 'cache this once a day' to: 1. If any of the events listed occur, set a flag indicating the cache is stale 2. When visiting TopSitesPanel, show cached TopSites immediately 3. If cache is stale, invalidate cache and redisplay with new data set In the cases of significant events such as clear history/app launches, the invalidation is immediate. I like this idea of splitting up smaller events into delayed updates and only using immediate invalidation in places where it makes sense like clear history.", The downside I see is the overhead of adding in these invalidation/stale state changes across the app vs something automatic like a DB trigger.', Comment on ', ', ', I've updated the PR to use explicit invalidation as mentioned in the previous comments. Works pretty well! The only slowness I'm seeing now is the layout code for the cells - the cache is fast.", Just curious: Is the new cache table for TopSites only, or can it be used for the filter-as-you-type frecency too?', (In reply to Mark Finkle (:mfinkle) from ', ) ', Just top sites. We don't see such significant performance issues with the awesomebar, because the text filter can dramatically cut down the solution space before joining and ordering. That also doesn't kill our time-to-display for the home page, so it's less urgent. The more thorough solution discussed earlier in this bug will improve both.", Updated PR with fixes ', This looks great. The very first time it runs on an existing profile, we get a flicker from just suggested tiles, then we show your real top sites. A possible fix for that is to check to see if we have a cache -- look at the timestamp pref? -- and decide to wait instead of showing the empty cached values. Over to Robin to see what she thinks of that flicker.', Not sure what the best way to fix this would be. We don't have a timestamp pref key anymore so we can't rely on that. It's also difficult to differentiate between a the cache not existing and it returning no results. Does this flicker only happen once whenever the user first loads the app with the caching patch and has a profile? If that's the case then it should only occur once in the history of the app while we populate the cache for the first time. I wonder if it's best to keep this instead of finding an exception to our 'show then refresh' logic in Top Sites panel?", Comment on ', ', ', I don't get a flicker at all from first run on top sites, in fact, nothing happens at all until I switch panels and come back. In this example, ", , I waited 20+s, switched to Bookmarks, back to Top Sites, back to Bookmarks, then back to Top Sites in order to see them load. No flicker, just a slight delay in loading the favicons, which doesn't bother me. Is this expected behavior? I hope not. So I'll + for no flicker, but not happy about having to hop panels for Top Sites to load.", That's no different to what we have now; yo re just wandering through a flow we don't normally see. What's happening there: * You signed in to Sync. You have a big account. Ten seconds from now we'll have downloaded your passwords and 2,000 bookmarks. Thirty seconds from now we'll have downloaded your 5,000+ history items, which we do in one go (", ). * At t=20 you switch to bookmarks, and can see Desktop Bookmarks. * At t=25 you switch back to Top Sites. We haven't finished downloading history yet, so you see only suggested sites. * At t=30 you switch back and forth again. You see nothing (because the cache is empty). We kicked off a query. When it's done (500msec later) we finish populating the cache and show your top sites. You see them appear. There are two immediate rough edges: 1. We don't redisplay home panels if a sync finishes while yo re on them. We probably should do so for Top Sites (it would reset scroll position for history and bookmarks, which would suck). 2. We don't display any indication that your useless top sites will eventually be filled with wonder. That's a problem with or without Sync, to be honest. Our first sync experience is pretty painful. We should consider showing some kind of progress somehow.", Merged c5c7d7162edf2ba7013bc1e023138b8f8d6f9935', Let's file separate bugs for any UI paper cuts we want to address for sync feedback", Follow-up for bustage: 73bc812' 
id=1170292	 ' Currently, the assets display at 40x40 when in portrait, 50x50 in landscape. However, the assets are 60x60. I removed the insets (just set them to 0) in BrowserToolbar.swift/NavButtonInset and the nav icons display in portrait at 60x60. Share/Bookmark remained at 40x40 until rotation, when the entire set displays at 50x50. On rotation back to portrait the nav icons display at 40x40, send and bookmark display at 60x60. So, by removing the inset padding and reworking and visually balancing all of the set to 50x50, it looks great! I did notice though that when on a panel and rotating to landscape, the reload, send, and bookmark icons appear active (though they are not on tap). Then, after rotating back to portrait, all icons appear active (when they should not). I also noticed that if you add a bookmark in landscape then rotate it to portrait the active bookmark icon does not persist (though the bookmark is still saved).', Created ', ', PR: ', Robin, your pull request contained some other unrelated changes so I cherry-picked your new assets commit into the PR for ', . I will file separate bugs, if we dont have them yet, for the issues you observed.', Resolving because I merged the assets from this bug into the commit of ', Comment on ', ', PR: ', Closing this since this has been merged via another pr.' 
id=1097124	 'Created ', ', Pull request', Created ', ', Pull request v2 Updated PR. The last one had mistakes from my lack of git skillz.', Landed this' 
id=1191059	 'Yeah, I was aware of this regression at the time, but forgot to file a bug for it. Thanks for taking it!', Created ', ', Pull Request', Comment on ', ', Pull Request Thanks, Boris!' 
id=1141598	 'Created ', ', PR: ', This patch hides the browser chrome when you enter reader view via either the reader view button or by opening a link from the reading list panel.', Comment on ', ', PR: ', We don't do this on Android -- why is it different on iOS? r=me assuming UX approves.", Reopening because we regressed on this.', Robin, I reopened this because we regressed on this bug due to changes in the way we implement the toolbars. But now I see Brian's comment that we don't actually open in full screen on Android. Just want to check with you if we still want to do this on iOS then.", (In reply to Stefan Arentz :st3fan from ', ) ', The current interaction is fine. Thanks!' 
id=1202092	 'Created ', ', Link to Github pull-request: ', Updated Clear Private Data tests coming in ', .', After testing the equivalent History > Clear Recent History... on desktop, I found that localStorage/sessionStorage are cleared in Cookies, *not* Offline Website Data as expected. I think we should consider merging these it\'s not obvious which settings clear which items, and most users won\'t know the difference anyway. Darrin/Robin, what do you think? FWIW, Chrome has a single pref for all cookies and storage: "Cookies and other site and plugin data".', Comment on ', ', Link to Github pull-request: ', LGTM', Going to land as-is; we can file a follow-up if UX finds anything that needs tweaking. ' 
id=1151552	 'I would prefer we disable these buttons when on any panel view. They provide no benefit to the user, and can cause confusion.', I think I fixed this in a previous bug???', Bryan, if this was fixed with a previous bug, can you please mark this one as a duplicate of that bug?', I don't see this behavior in current TestFlight. Bryan, please dupe if you have the #.", Pretty sure this one fixed it since I called the update page functions in more places where we weren't calling them i.e. didCommitNavigation, etc. *** This bug has been marked as a duplicate of ", ***' 
id=1215590	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good - just curious, where did you get this character list from?', From sections 2.1 and 2.2 in RFC 3986 (', ).', *** ', has been marked as a duplicate of this bug. ***' 
id=1282929	 '2016-06-29 13:19:32.198 Warning BrowserViewController.swift:2224 webView(_:decidePolicyForNavigationAction:decisionHandler:) > Denying unprivileged request: <NSMutableURLRequest: 0x147688840> { URL: ', ?Subject=Hello}', As does tel: 2016-06-29 13:35:38.556 Warning BrowserViewController.swift:2224 webView(_:decidePolicyForNavigationAction:decisionHandler:) > Denying unprivileged request: <NSMutableURLRequest: 0x148d21060> { URL: tel:1-888-555-5555 } Probably other protocols no good too', Created ', ', Link to Github pull-request: ', Our isLocal check returns true if the request has no host, which will be the case for all of these external URIs. Our local webserver is HTTP(S)-only, so there's no need to block other kinds of requests.", master: ', v5.x: fdd07d3' 
id=1239190	 'There are two kinds of things in an iOS share overlay: "send to" and "share to". This is a super confusing distinction, but so it goes. The top row is full of apps with full-color icons. "Firefox" lets you bookmark things. The bottom row lets you take actions directly, like copying to clipboard, with grey icons. We offer "Send Tab" and "View Later". If you don\'t see these, scroll all the way to the right and customize the menu. Extensions cannot open URLs, so we can\'t ship something we\'d call "View Now" or "Open in Firefox". I think "View Later" is what you\'re looking for. We also have ', on the way.', (In reply to Richard Newman :rnewman from ', ) ', > ', Ok, found them and enabled, thanks! Send Tab didn't work. Even though I have my account all hooked up, I got this error: ", ', Yeah, View Later sounds about as close as we can get, given the limitations of the platform. Either way, cannot really close this as WFM, since it doesn't ;) Changing to WONTFIX." 
id=1163151	 'Love commits without bug numbers, ', I think that we should add info about line break in comment also (easy too ignore if only actual line break in source file) before next strings export.', Created ', import.png Had a bit more time for testing. The string ID looks like this id="Are you sure you want to clear all of your data? This will also close all open tabs." Notice that there\'s no \ anywhere. Side note: the string has trailing whitespaces, so my editor was trimming them off. But check the screenshot to see what happens when you try to import the localization (you can try with Italian, it\'s up to date). The string is not recognized, and the string is displayed in English in the simulator. It doesn\'t improve if I run /scripts/import-locales.sh I think you need to back this out and restore the previous string. If you need to display these strings in two separate lines, we probably need two separate strings.', Created ', ', fix', (In reply to Stefan Plewako :stef from ', ) ', Import/export works as expected, I have some unrelated problem with building locally, so it would be great if someone could test if it works as expected in UI.', Unfortunately it doesn\'t work: export and import work great, but in the app it\'s displayed as a literal "\ ", not converted to a new line.', Created ', Italian Build Updated XCode to 6.3.2, now the exports has "\ " in the ID (see ', for Italian), and the code works. <trans-unit id="Are you sure you want to clear all of your data? \ This will also close all open tabs."> Should we consider this a WORKSFORME? Still a bit scared by seeing what tools will do.', Looks like tools don't like it: ", Shall we just use two separate strings?', So I actually chose the easy way out here and removed the newline character. See the attached screenshot how this looks. I think it is fine and it actually looks better in English because without the newline the last word 'data?' was alone on a single line. We must make note of this issue though for future strings. ", Created ', Screenshot 2015-07-02 14.39.28.png Screenshot of dialog after removing the newline' 
id=1184783	 'If we switch to Alamofire, see also ', .', Created ', PR : ', Pinging UX, but I'm going to pull the frontend changes out into a separate PR to make this less scary.", Created ', ', PR ', Leaving the old PR in place for reference, but this cherry-picks just the user agent bits.' 
id=1252167	 'Note that this may be a red herring. This possibly does not happen on a clean build with cleaned Derived Data.', *** This bug has been marked as a duplicate of ', ***' 
id=1194154	 '(In reply to Karen Rudnitski :kar from ', ) ', Karen, this is because on Facebook they add the target="_blank" attribute on all their links - this HTML attribute will force a new tab/window to open for all links. The articles on bbc do not have this attribute so therefore they will open in the same tab unless you explicitly request otherwise.', Got it - thanks' 
id=1145088	 'we will have to give you a URL it will be something like ', Let's use Roland's link: ", I've set up a placeholder page. We still have to add a logo and topic tiles, but the URL is good to go. I'll see if we have existing bugs for the logo. If not, I'll file one.", Mockup is ', .', *** ', has been marked as a duplicate of this bug. ***', Created ', Screenshot 2015-06-26 17.08.41.png Screenshot of the settings page with the Help item included.', Karen, Roland, I have added a Help item to the Support section in the settings that opens ', in a new tab. See the screenshot attached to this bug. Let me know if this is good enough. The mockup also shows a Feedback item. But I don't know where to point that to. Maybe we are skipping the Feedback item for v1?", Created ', ', PR: ', This patch adds a link to SUMO in the Support section of the Settings screen. It opens ', in a new tab when selected.', Comment on ', ', PR: ', Looks good!', Comment on ', Screenshot 2015-06-26 17.08.41.png Nit, but Support section should probably be at the bottom (perhaps above About, though the 'about' info is displayed differently in the mockups).", (In reply to Stefan Arentz :st3fan from ', ) ', 1. support link looks good 2. if by "feedback" you mean a link to the fab input.mozilla.org aka "input" run by rrayborn and the rest of my awesome colleagues in the user advocacy team, then yes, input is out for V1! input might be in V1.1 or even a wee bit later. Is that right :rrayborn?', That's correct- the integration of the input (feedback) api will either be v1.1 or v2.0" 
id=1155132	 'Version 13 has that now.', ,,, and it's now gone in build 19.", It looks like there is some visual feedback when tapping a link... if the page is zoomed more than a certain level. If not, nothing can be seen.', *** This bug has been marked as a duplicate of ', ***' 
id=1205877	 "We should be able to pull out proportions of engines from FHR. mfinkle might already have those numbers somewhere\u2026 If yo re a regular user of an engine we don't ship, this is a big pain point.", I found this bug because a user was asking on our support forum how to add search engines, and got even more confused by this article ', Title is misleading (you can't add searchengines), and localized versions have a different set of searchplugins than en-US. Not being able to add searchplugins might be a bigger problem for localized versions shipping with fewer searchplugins than en-US.", Maria, this should probably have an Aha card and be on your radar.', Thanks - Created card FIOS-233 Support 3rd party search engines', Created ', ', Pull Request', Comment on ', ', Pull Request Looking good! Left some more comments in the PR.', Comment on ', ', Pull Request Looks great! One nit on the toast font-weight (please increase by one weight).', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Pull Request Looks and works great! Adding some finishing touches, then will go ahead and land since Farhan is on PTO until next week.' 
id=1219485	 'Created ', ', Updating the link color on empty PB screen', Comment on ', ', Updating the link color on empty PB screen This will also change the color of the text selection in the URL bar when in private mode, which I believe is unintended. We'll need to make a new color constant for the Learn More link (or re-use the border color of the selected LocationView).", Created ', ', Added PrivateModeInputHighlightColor', Comment on ', ', Added PrivateModeInputHighlightColor + in that it does what yo re trying to accomplish. My only nitpick would be that my eyes go straight to the link now, its more visually prominent than even the white text above it. Given this is a secondary action (not req'd to proceed, and actually unnecessary once someone understands this mode\u2014at which point it should be pretty inconspicuous) I'll leave it up to you as to whether this is an improvement or not :)" 
id=1288438	 'Created ', ', Pull request', Comment on ', ', Pull request Looks great. Thanks for the patch!', master ' 
id=1166424	 'Created ', deviceType.zip device type icons (desktop and mobile).' 
id=1123373	 'Fix is part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1177112	 'Thanks for the report. I see this on my iPad in portrait, trying to scroll that list down reproduces that constant jump until you lift your finger. Maybe an easy fix? Steph?', This bug should have a more descriptive title of the problem too if a minimal test-case can be produced.', I've noticed this behavior on websites where the web content size is near the size of the viewport. I'm investigating another scrolling bug at the moment (", ) which will have some impact on this behavior so I'll keep this in mind when working on that bug in hopes of hitting two birds with one stone :)", More STR, google.ca (see privacy banner at top), scroll down, try scrolling up - the page jumps around There's a similar issue in Safari but not as jarring. I think we should track if this is reproducible on Google's front-page.", Should I rename the Bugname? What is the best title?', This is part of this larger issue which I've just attached a patch for: ", . It seems to resolve the support scrolling behavior but Google is still jumpy (but less than it was). Probably around the same amount of jumpiness as Safari is right now.', *** ', has been marked as a duplicate of this bug. ***', Tracking as it's fixed as part of ", Created ', ', PR ', I've attached a quick patch that fixes some of the jumpiness of the url bars while scrolling and will follow up with a patch for specific websites like google.com", Merged' 
id=1134796	 'Created ', ', Pull request', Comment on ', ', Pull request Removed myself from the review, I think wes and darrin got this covered.', Comment on ', ', Pull request Some nits, but looks fine.', Comment on ', ', Pull request Darrin, I went ahead and landed this to prevent the PR from getting stale. Obviously, nothing's final, so just let us know what changes yo d like!" 
id=1146511	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1278343	 'Created ', Showing the memory leak (before the fix)', Created ', After the fix', Created ', ', ', Comment on ', ', ', Nice catch! Just watch out for explicitly unwrapped weak refs.', Comment on ', ', ', master 03d48ebda778cef88f535194c16d781464c2d68c', v5.x 4fd4f17583b3bb151fad2de2e31c326d33b66b3c', *** ', has been marked as a duplicate of this bug. ***' 
id=1159348	 "Whoops, it's icon-60.png that's unassigned", I resolved all these Unassigned Images warnings by removing images from the assets that are not .. assigned. This resulted in the following images to be removed: \tdeleted: Client/Assets/Images.xcassets/AppIcon.appiconset/Icon-60.png \tdeleted: Client/Assets/Images.xcassets/backPressed.imageset/Back-arrow (Pressed).png \tdeleted: Client/Assets/Images.xcassets/backPressed.imageset/Back-arrow (Pressed)@2x.png \tdeleted: Client/Assets/Images.xcassets/backPressed.imageset/Back-arrow (Pressed)@3x.png \tdeleted: Client/Assets/Images.xcassets/deviceTypeDesktop.imageset/pc-iOS.png \tdeleted: Client/Assets/Images.xcassets/deviceTypeDesktop.imageset/', \tdeleted: Client/Assets/Images.xcassets/deviceTypeDesktop.imageset/', \tdeleted: Client/Assets/Images.xcassets/deviceTypeMobile.imageset/mobile-iOS.png \tdeleted: Client/Assets/Images.xcassets/deviceTypeMobile.imageset/', \tdeleted: Client/Assets/Images.xcassets/deviceTypeMobile.imageset/', \tdeleted: Client/Assets/Images.xcassets/reader.imageset/readerOff.png \tdeleted: Client/Assets/Images.xcassets/reader.imageset/', \tdeleted: Client/Assets/Images.xcassets/reader.imageset/', \tdeleted: Client/Assets/Images.xcassets/reader_active.imageset/readerOn.png \tdeleted: Client/Assets/Images.xcassets/reader_active.imageset/', \tdeleted: Client/Assets/Images.xcassets/reader_active.imageset/', \tdeleted: Client/Assets/Images.xcassets/sendPressed.imageset/Export (Pressed).png \tdeleted: Client/Assets/Images.xcassets/sendPressed.imageset/Export (Pressed)@2x.png \tdeleted: Client/Assets/Images.xcassets/sendPressed.imageset/Export (Pressed)@3x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconBookmarksSelected.imageset/Bookmarks (pressed).png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconBookmarksSelected.imageset/Bookmarks (pressed)@2x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconBookmarksSelected.imageset/Bookmarks (pressed)@3x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconHistorySelected.imageset/History panel (pressed).png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconHistorySelected.imageset/History panel (pressed)@2x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconHistorySelected.imageset/History panel (pressed)@3x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconReadingListSelected.imageset/Reading List (selected)@2x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconReadingListSelected.imageset/Reading List (selected)@3x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconSyncedTabsSelected.imageset/Synced Panel 2 (selected).png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconSyncedTabsSelected.imageset/Synced Panel 2 (selected)@2x.png \tdeleted: Client/Frontend/Home/Home.xcassets/panelIconSyncedTabsSelected.imageset/Synced Panel 2 (selected)@3x.png \tdeleted: Extensions/ShareTo/Images.xcassets/AddToBookmarks.imageset/AddToBookmarks.png \tdeleted: Extensions/ShareTo/Images.xcassets/AddToBookmarks.imageset/', \tdeleted: Extensions/ShareTo/Images.xcassets/AddToReadingList.imageset/AddToReadingList.png \tdeleted: Extensions/ShareTo/Images.xcassets/AddToReadingList.imageset/', \tdeleted: Extensions/ShareTo/Images.xcassets/AddToReadingList.imageset/', \tdeleted: Extensions/ShareTo/Images.xcassets/Icon-Small.imageset/Icon-Small.png \tdeleted: Extensions/ShareTo/Images.xcassets/Icon-Small.imageset/', \tdeleted: Extensions/ShareTo/Images.xcassets/Icon-Small.imageset/', Before I commit this, Robin, I think we either not use these or they have been replaced with newer versions. Can you verify?', From glancing at the naming conventions and the Universal assignments, these look OK to remove.', Created ', ', PR ', Merged.' 
id=1223237	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM - much cleaner with the restoration state in the TabManager' 
id=1234267	 'Created ', Screenshot 2015-12-21 12.47.19.png', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request', Comment on ', ', Pull request LGTM with the Cartfile.resolved changes reverted.' 
id=1168868	 'Emily, you interested in this?', Yeah, I can take this one', *** ', has been marked as a duplicate of this bug. ***', There's a suggestion in vague ", for changing the UISwitch tint colour for search settings. Not a whole lot of information but maybe this makes sense as a tweak to be included here.', Created ', ', Pull request', Comment on ', ', Pull request Looks good with mostly minor nits, but I'd like to understand what's going on in layoutSubviews before setting r+.", Comment on ', ', Pull request ', # for feedback', Comment on ', ', Pull request Nice, looks good!' 
id=1180722	 'Created ', ', ', Comment on ', ', ', Looks good!', Merged.' 
id=1248006	 'Created ', Screenshot 2016-02-12 13.48.07.png', Created ', Screenshot 2016-02-12 13.48.10.png', Created ', ', Stephan, here is the iPad Pro icon.', Do we also have an iPad Pro icon for the main application's icon?", (In reply to Stephan Leroux :sleroux from ', ) ', What size is that? I only see the @2x 83.5 slot. I can output whatever we need :)', Yup 83.5px', Created ', iPadPro-icon', Created ', Icon-iPadPro@2x', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', I'll need to uplift this to 2.x afterwards since it's blocking iTunes submission.", master 6488414bc4eb02d3d4541b5ab596f34bec8759c7', v2.x facb3d4', Looks like it's still giving me an error. The icon for Firefox is 167x166 instead of 167x167.", Created ', Icon-iPadPro@2x argh, sorry about that. here you go.', Created ', Icon-iPadPro@2x Replacement iPad Pro icon with the appropriate white background.', Follow-up on master: ', v2.x: ', I only did the main app icon; please scream if this also needs to be changed for the extensions.', Created ', Icon-iPadPro@2x final final!', master: ', v2.x: ' 
id=1092567	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1189127	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Karim can take a look at this too since he just added this canAutocomplete property that we're using.", Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1139051	 'Created ', ', Link to Github pull-request: ', Only partially tested against live servers. The login state machine patches are developing, though -- that's the real test.", Comment on ', ', Link to Github pull-request: ', Comments on GitHub.' 
id=1268554	 'Created ', Link to Github pull-request: ', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Works for me in the background/foreground case. Also checked for Touch ID since it 'technically' becomes reactive but it didn't fire which is ace.", master: ', v4.x: 45690f7' 
id=1148910	 'Created ', ', PR: ', This updates the Reader View Settings to the latest specification as documented in ', . Couple of notes: * This first iteration uses a standard UIPopover. So it does have an upward arrow and a blurred background. I had to timebox this but I can investigate if we can implement our own popover and make it look more like the specification. * Pretty much all colors, constants, paddings and offsets are in the `ReaderModeStyleViewControllerUX` struct which can be modified to tweak things. Let me know if anything is missing there. * I'll do a pass later on all the `*UX` structs that we have to move shared colors/fonts/etc to the `AppConstants` that are about to land. * The brightness slider is hooked up to the system brightness settings. I am following iBooks here where this slider is changing the system brightness settings. * The spec for the brightness slider has a smaller knob. It looks like iOS comes with just the default knob size. I tried a few things to scale that system knob image down but I don't think it is possible. So if we really want to change it we will need some custom images. (I don't know if we should. The knob size if obviously the way it is because it is a good tap area for your finger) * I was not sure what the disabled button color exactly should be. The spec says '44% of 0x333333' but I think we need to translate that to a proper color code. Right now i just set it to the system's `lightGreyColor`. * The row height is currently 50px as per spec. But I think it should be 44px instead to be in line with other UI elements like table views. Also gives a little more space on small devices.", Comment on ', ', PR: ', Some thoughts in the PR, but nothing big. Nice!', Merged with an additional patch to localize all the strings in the dialog. I did not things 'Serif' and 'Sans-serif' would be localized, but they are." 
id=1162558	 'I believe this is dupe or known and is part of a WIP in bug ', Stefan?', *** This bug has been marked as a duplicate of ', ***' 
id=1213016	 'Resolved by definition.' 
id=1250561	 "I don't want to introduce this complexity right now." 
id=1237976	 'This looks like a pretty bad regression. Any chance you are able to reproduce it on the current App Store (v1.3b1310) build?', (In reply to Stephan Leroux :sleroux from ', ) ', I can't reproduce on build 1310 but I've seen this issue on a second device - iPhone 6 Plus (9.2) - on build 1403.", Hey Emily, I remember we debugged a similar issue a while back when you were working on the 3D touch. I don't see anything in the 1.3->1.4 commit log 1 that would effect this which leads me to believe this is also an issue in 1.3. Do you remember what the problem was? 1 ", I fixed it as part of the 3D touch stuff so I don't know how it could have made it into 1.4. The problem was caused by line 120 in createWebView() in Browser.swift where we set the backgroundColor of the webView to webView.backgroundColor = UIColor.lightGrayColor(). I thought I deleted that line of code to fix it, but I can't see the change in the code any more....", Nope, I lie. This was the problem ', Hm I don't see any of the 3D touch changes in the diff so I think its safe to say that this is being caused by something else.", Might be worth looking for instances where a Browser is being strong retained when it should be weak though as that was the underlying cause for me.', 11:32 bkmunar:\ttry using "View Later" on a tab, close it, then try adding a new tab, you\'ll see the gray screen (just tested it right now)', Created ', Screen Shot 2016-01-13 at 11.24.43 AM.png Reproducible on simulator too', I see this as well after transitioning away from usage in Settings. Example, I was using the login manager to edit a login, deleted the login, and returned to the browser. The next time I accessed our tab switcher, I saw the grey background transitions.', Created ', ', Link to Github pull-request: ', Thanks for the tip Emily! Turns out it was both a strong ref and retain cycles :(', Comment on ', ', Link to Github pull-request: ', Good hunting there :sleroux. Can't replicate the gray background now. Now we're aware of the issue we're going to have to watch out for that in the future. Should we write a blog post/email to the team about this issue so everyone is aware of it? This has now arisen in 3D Touch, RDS & Extensions so it's potentially something we're going to come across a lot.", master 5037c17198a3673348096095356c05d7b26971c8' 
id=1130247	 'Looks like this is changed either in more recent xcode or with swift. Test code always compiles are part of a regular build.' 
id=1104353	 'Created ', ', Pull request This patch is too big. I can split it up if it will help...', (whoops please remove sec)', Wes, I don't think the ThirdParty/HTMLDocument dependency is included correctly. Is that a submodule? Can you instead simply checkout the project into ThirdParty/ and remove the .git directory? Until we figure out how git dependencies work correctly in Xcode and Xcode Server we are simply going to 'vendor' the dependencies. (including a copy in our project)", Comment on ', ', Pull request Clearing. This is being refactored into smaller pieces.', Fixed in ' 
id=1192637	 'Created ', ', ' 
id=1144291	 'Robin wrote: "Think of \u201cReader View\u201d as viewing the article with goggles on. So if you readerize an article, then nav back to a list, then forward, it would be the original view until you tapped the RV icon again." I have to see how this works out with the built-in history facilities and see if we can hook into it well enough to disable the current behaviour where we DO go back to the about:reader?url=.. page.', Fixed as part of ' 
id=1152611	 
id=1304554	 'Ah, just another side effect of the broken isWebPage check. *** This bug has been marked as a duplicate of ', ***' 
id=1164704	 'Created ', ', Link to Github pull-request: ' 
id=1241586	 'Did you get the "Do you want to save" prompt or "Do you want to update" prompt?', Autofill will select the first record which is incorrect credentials saved.', (In reply to Richard Newman :rnewman from ', ) ', Have yet to ever see an update credentials prompt. In this case I see the save password prompt.', I just tried these steps but wasn't able to reproduce it. I used the same username both times and the second time I entered the password it asked me to update. This is on build 2.0(1). Did you use a different username the second time around? Did you have a previous dropbox.com entry in your logins prior to executing these steps?", Created ', ', Link to Github pull-request: ' 
id=1167824	 "This is very rudimentary, but it'll stop us syncing when we shouldn't. " 
id=1310469	 "bnicholson told me it's actually fixed with: ", And just verified that the fix works on both simulator and device.' 
id=1221595	 '* Will entering edit mode unmask the current password? * Is there any way to unmask the current password without requiring edit mode?', * Yes, when the password field is selected, the password becomes unmasked. * Long pressing the password row/text field will show the text selection options which includes a 'Reveal' option.", :sleroux I'm not sure where yo re at with this (so forgive me if WIP), but I noticed that in 'Edit' mode, the selection circle appears and are selectable. I'm also not able to edit the entries or copy the username.", I think you might have been looking at the wrong branch (the select all/delete branch) since that's where the checkmark code lives.", Created ', ', Link to Github pull-request: ', Flagged both rnewman and bnicholson for database/UI code respectively.', Comment on ', ', Link to Github pull-request: ', Comments on the PR.', Comment on ', ', Link to Github pull-request: ', LG except the editable fields (username/password) should indent and headers turn grey when in 'Edit' mode.", Comment on ', ', Link to Github pull-request: ', LGTM', Comment on ', ', Link to Github pull-request: ', I've updated the PR to include the indent and header color change.", Comment on ', ', Link to Github pull-request: ', ', for the code change if yo re interested.", Comment on ', ', Link to Github pull-request: ', Updated patch looks sane to me.', Comment on ', ', Link to Github pull-request: ', Oops forgot to tag you Robin.', master f46afa4ca9be3b0d434a0f6e2d7dad255c9296ef' 
id=1245360	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', This is awesome. Super fast and the code seems to be much cleaner.' 
id=1256395	 "I'm closing the old tracker for v3.0 and v4.0, I don't think there is much value in keeping them open. If any bug still relevant for v5.0 is not tracked by ", , please add it there.' 
id=1124508	 'This seems to be caused because of: body { max-width: 35em; } Not sure why that is in there. On ipad things look much better without a max-width.', This was fixed with ' 
id=1147145	 'Note: this crash no longer happens on build 6, however this is because it now seems impossible to delete an item once added to Reading List.', (In reply to Alex Gibson :agibson from ', ) ', Let's get a new bug on that. *** This bug has been marked as a duplicate of ", ***' 
id=1136215	 'Created ', en.xliff Not sure if it's helpful, but here's the latest string set in the en source language. Flod, could you land this in the newly created SVN directories while we wait for Stefan to receive write access please?", Not sure what I should land: * I'd expect the file to have the same name for all locales. What name should I use? Are we tied on a specific name for Pootle? * This file has only 4 strings in it (actually, 2x2). Is it expected?", Oh, that's no good. Let me try to figure out what went wrong. On Pootle, I don't think we have a specific name. I think that firefox-ios.xliff is fine.", Created ', firefox-ios.xliff Alright, I think I fixed it.', Added in ', .', Jeff, would you mind documenting the steps you took to export those xliff files? Just some notes in this bug would be great. Also, thank you for doing the export. The iOS team is super busy. SO if it is easy for you to take doing the export from Xcode as part of the localization effort.', GRRRRRRR Ignore previous comment. Jeff, would you mind documenting the steps you took to export those xliff files? Just some notes in this bug would be great. Also, thank you for doing the export. The iOS team is super busy. So if it is easy for you to do the export from Xcode as part of the localization effort then that would be super awesome. I don't know how those roles are usually divided. Let me know what you think.", One thing that needs to be figured out is how to update the strings without losing existing localizations (i.e. merging the xliff file). Not sure if there's already a plan for that.", (In reply to Stefan Arentz :st3fan from ', ) ', 1) Clone the project repo from ', into a local repo. 2) Open up Client.xcodeproj in xcode. 3) With the Client project active (left-hand pane), click Editor->Export for localization. 4) Create a new folder outside of your local repo clone into which the en.xliff file will be exported. 5) Once exported, change the name of the file to firefox-ios.xliff. ', I would be happy to do that, it's easy enough. ", (In reply to Francesco Lodolo :flod from ', ) ', Agreed. We haven't come up with a good merge plan for that. Let's talk more about that this week.", Jeff, just a quick note that you can also do the manual export from the command line for multiple languages at the same time: % xcodebuild -exportLocalizations -localizationPath /tmp/ -project Client.xcodeproj \\ -exportLanguage en -exportLanguage de % ls -l /tmp/*.xliff -rw-r--r-- 1 sarentz wheel 7125 2 Mar 12:25 /tmp/de.xliff -rw-r--r-- 1 sarentz wheel 8477 2 Mar 12:25 /tmp/en.xliff Note that we currently only have the base English language configured in the project. We probably need to go into Client -> Info -> Localizations and add all the initial locales that we want. I can add this to my list.', Cool, thanks for that. This is good to know in case it comes up. I don't know if we'll ever need to export multiple languages, since I only really see us pushing localized content into xcode. Yes, if you could manage that, that would be really great.", Jeff what do you want to do with this bug? Do we close this? Was this bug about finding out how the export works?', Yes, let's fix it, bit we need to add a follow-up bug to automate pieces of the process.", Filed ', as a follow up.' 
id=1211745	 'WIP: ', \\o/ BookmarksDownloader.swift:120 applyRecordsFromBatcher() > Applying 100 downloaded bookmarks. SQLiteBookmarks.swift:483 applyRecords(_:withMaxVars:) > Inserting 540 children. SQLiteBookmarks.swift:491 applyRecords(_:withMaxVars:) > 1 unique parents to drop from structure table. SQLiteBookmarks.swift:517 applyRecords(_:withMaxVars:) > Inserting 333 records (out of 540). SQLiteBookmarks.swift:517 applyRecords(_:withMaxVars:) > Inserting 207 records (out of 540).', Created ', ', Pull req. Trying my luck with reviewers. This covers both this bug and ', .', Comment on ', ', Pull req. Found a simulator that refused to display bookmark folders - this patch fixed that so :+1: from me.', 71449b8' 
id=1160700	 'Created ', ', Pull req.', Comment on ', ', Pull req. A little worried we don't provide a good way to get to/delete these. But that's a separate bug.", Landed: 029a725' 
id=1170203	 "I don't believe this still happens. DB access is always on a background queue." 
id=1236716	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1314372	 
id=1249740	 'This is a common pattern for a record to include an option to Delete in this position. It\'s not immediately obvious that a delete option would be available by entering edit view. It would be odd to have "Open and Fill" and "Delete" in the same position. Yes, metrics would give us a better idea otherwise, but for now I say keep as-is.' 
id=1096727	 'Created ', ', Create account/provider APIs for login * Creates a simple Account API containing the Bookmarks provider * Refactors AccountManager to use Accounts * LoginViewController uses this API, so we now support real logins One problem is that you can't actually log out/switch accounts without restarting the app; this is an issue documented in ", . We'll have to figure out a reasonable workaround.", Comment on ', ', Create account/provider APIs for login I put some questions in the PR. Happy to + this if they're answered.", Comment on ', ', Create account/provider APIs for login Need to rebase before merging.' 
id=1127503	 
id=1190891	 'Created ', ', ', Merged.' 
id=1141393	 'Created ', ', patch1141393.patch', Comment on ', ', patch1141393.patch Review of ', ', : ----------------------------------------------------------------- wfm. Thanks, vlad! In future, we work with PRs against firefox-ios, which should be easier for you :)', Thank you Nick!' 
id=1270854	 
id=1151465	 "we're going with the native spinner for this interaction.", No spinner here. What we need is a simple page that says 'we cannot turn the requested page into reader view' or something similar.", Created ', ', PR: ', Work in progress. Still needs an image / spinner. And maybe quick look at strings / terminology.', Comment on ', ', PR: ', Removing this PR since I attached it to the wrong bug.', Going to mark this as a dupe because this error message is actually part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1215286	 'Created ', ', PR', Comment on ', ', PR See PR for comments.' 
id=1282715	 'I used another way to implement night mode. Now this problem has not existed.' 
id=1163117	 "The current copy that's in master was taken from ", , which Matej provided. I think we can consider it signed off (ni-ing Matej in case he wants to chime in)', (In reply to Darrin Henein :darrin from ', ) ', Nope. I'm good. Thanks." 
id=1227112	 ':tecgirl: can you please provide some clarification as to when the Sent to Device/Copy URL/Close Tab options should be displayed?', (In reply to Emily Toop (:fluffyemily) from ', ) ', Send to Device would show if the user is signed in to sync and has at least 1 connected device. Copy URL would show if the user is signed in yet has 0 connected devices or they are not signed in. Close Tab will show for any P&P instance on the tabs tray.', Created ', ', Pull request', Comment on ', ', Pull request We should be able to distinguish between tabs and tabs of panel views, so as not to offer "Add to Bookmarks" or "Copy URL" for a panel tab. see ', So far I\'ve only been able to find one example, but what would disqualify a P&P view from being able to provide "Add to Bookmarks"? see ', Holding + until we can resolve the first nit. The second may require a separate bug. I'll see if I can find another example.", (In reply to Robin Andersen :tecgirl from ', ) ', You might want to use self.profile.history.isIgnoredURL. That returns true for about:, for localhost pages, and whatever else we don't want to put into history.", Comment on ', ', Pull request Looking good, but I think this could make better use of delegates/interfaces to avoid coupling BVC directly to the controllers here. Also, note that I'm reviewing by code inspection only since I don't have a 3D Touch device; your call if you want another reviewer who can actually test it out.", Comment on ', ', Pull request Brian: I've addressed all your issues :tecgirl - I've address all of yours :st3fan - I've added you as you have a 3D touch device and can add additional testing.", :fluffyemily - did you intend on taking out "Add to Reading List"? I\'m not seeing that as an option anymore.', Comment on ', ', Pull request Nice, I think this looks better. I'd throw on my fluffy hat and encourage you to write a test for this, but I guess you get a free pass since 3D touch doesn't work in the simulator :D", Comment on ', ', Pull request Err, no idea why my review changed the attachment name to another bug. Sorry for the churn.', :tecgirl - have retrieved missing reading list option!', :fluffyemily \u2014 I'm still not seeing Add to Reading List as an option :( ", Created ', IMG_5871.jpg :tecgirl That is odd. This is what I see when I run the branch. I checked that all the code was on github. Which site were you looking at? Is it already in the reading list, in which case that option would not appear?', Comment on ', ', Pull request Looks good but I need a little more time for on-device testing for this one. I don't know how well the l10n scripts handle table names with spaces in them. Because they translate to file names. Emily I don't know if you have time to rename the string table, but if this turns out to be an issue after string freeze then we can probably handle it in l10n scripts.", Created ', Screen Shot 2015-12-18 at 4.25.30 PM.png See screenshot. I found a small bug. When you lightly press a tab, we provide a rectangle that should not be blurred out. Looks like it is a bit off because half the tab cell is part of the blurrrr.', Hmm I got the app in a state where we crash with "Array index out of range". STR: On a fresh install with no history/bookmarks: 1) Force press on the app icon and \'Open New Private Tab\' 2) Load anything in the tab 3) Open the tab tray 4) Force press on the one tab in there, and then select Close Tab 5) Leave Private Mode 6) Try to close the tab on screen At this point the app will crash. Also notice that even though we left Private Mode, the UI still looks like private mode.', BTW These 3D Touch features rock. Loving it. :-)', The peek for an top sites tab is empty: STR: 1) Create a new tab - Don't load anything just let it sit on the top sites 2) Open tab tray 3) Peek at the tab Expected: top sites Actual: empty preview Is this something we can do? If not, or if it makes no sense, maybe peek and pop should be disabled for tabs that do not have a page loaded? (about:blank?)", I have got my browser in a weird state where it shows a grey (or maybe translucent on top of black - which ends up being grey) background when you open and close a tab. The grey background only shows during the tab animation. Once the tab shrinks to its cell, the background of the tab tray changes back to black.', STR For the bug in ', : 1) Start the app cleanly 2) Open The Mozilla Project tile (dont think it matters how you load anything) 3) Open the tab tray 4) Peek the one tab there is and select Close Tab 5) Since it was the last tab, a new empty tab opens 6) Open the tab tray: Expected: the empty tab minimizes into its cell on top of a black background Actual: the empty tab minimizes into its cell on top of a grey background', (In reply to Emily Toop (:fluffyemily) from ', ) ', I did a clean install and all is well.', The crash from ', is hard to reproduce. But it has happened a couple of times for me now. Trying to find good steps for this.', (In reply to Robin Andersen :tecgirl from ', ) ', What is the reasoning behind this? Isn't Copy URL something that is always useful? Regardless of whether you are logged or have connected devices?", (In reply to Stefan Arentz :st3fan from ', ) ', :st3fan, this is for when we've maxed out 4 options. We *could* add another, but then the action menu starts to take over the viewport. We're currently offering: Add to Reading List Add to Bookmarks Copy URL/Send Tab Close Tab Send Tab would take the place of Copy URL with the basic assumption that the user intends on seeing the tab elsewhere, and supports Task Continuity when signed in. I agree it's always useful but we are restricted to the amount of options.", ', This is being resolved as a separate issue ', (In reply to Stefan Arentz :st3fan from ', ) ', The code loads the URL in the background and then displays it when it's loaded, but for about:home this results in a blank preview. Have updated to only load the URL if it's not one of our ignored URL's. In this case we will show only the screenshot.", (In reply to Stefan Arentz :st3fan from ', ) ', We do not provide any of these transitions - this is all the API's. At this point we have provided the ViewController in `previewingContext(previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -> UIViewController?` and it's before the VC has been fully presented. We have no route into the animation code at this point.", (In reply to Stefan Arentz :st3fan from ', ) ', This was caused by the TabManager hanging on to far too many delegates for TabTrayVC. When it called removeTab, it sometimes called the delegate method on a TabTrayVC for a privacy mode other than the one we were currently looking at and that would cause it to try and remove an index of -1. Solved by ensuring that the TabTrayVC removes itself as a delegate whenever it is hidden or dismissed, and re-adds itself when it is shown again to ensure that only the delegates we care about are called.', (In reply to Stefan Arentz :st3fan from ', ) ', This one was caused by holding a strong reference to the tab in the PeekVC which meant that it didn't properly get deleted when closing the tab from a Peek action. This left a zombie webView on the stack that wasn't being controlled by the browser tray animators, hence the evil gray background. Making the property weak resolved the issue.", (In reply to Stefan Arentz :st3fan from ', ) ', This works well now.', (In reply to Emily Toop (:fluffyemily) from ', ) ... ', Looks good!' 
id=1239028	 'Created ', ', Pull request Comments in the PR. Corner case discussed there is fixable by ', .', Comment on ', ', Pull request Code looks good and work for me in the simulator!', Merged!' 
id=1184650	 'Created ', ', PR ', Dumb db mistakes are the best kind. This makes the collectionView optional and predicates starting the query on having it. 2s queries down to 500-600ms. Still a ways to go, but we're getting there...", Boom!', Comment on ', ', PR ', LGTM with comments.' 
id=1172928	 'It looks like that there is no public API for detecting window.close events in WKWebview frameworks. There is some code in Webkit ', demonstrating a private API, but this doesn't seem to be working for us in Swift. Plus: private APIs.", Created ', ', Work in progress. Catching window.close events in user scripts (content js).', I filed ', The bug that I filed yesterday was closed as a dupe of ', which adds a webViewDidClose: delegate method to the WKUIDelegate. So that will allow us to do this without any JavaScript hacks. What I would like to suggest is that we do a simple solution now, like patching window.close(), which will probably catch 75% of the use-cases. And then replace that JavaScript solution with the new WKUIDelegate when we are ready for iOS9 later this year.', One-line fix in iOS 9. Let's punt this to 2.0.", Created ', ', PR: ', Work in progress but please take a look anyway. This may catch most cases. Except persona as noted below. This patches window.close to send us a callback so that the native code can close the tab. This work for the general case. It does not work for Persona because Persona is insanely complicated and they probably do something special.', Comment on ', ', PR: ', LGTM with a few comments.', Couple of notes: This works correctly on for example ', which opens a new tab with a Facebook login. After logging in the tab closes correctly and you are back at the original tab and logged in. On Persona this fails, but now I think this may not be an error in this code but an issue with Persona. I see a message about origin login.persona.org not matching login.mozilla.org. (This appears in the console for login.persona.org - dont forget to attach the debugger to the right tab)', Assuming we want to land this since it handles some cases on iOS 8. Filed ', for iOS 9 specifically.', Stefan, this needs landing.', I'll deal with the review comments on tuesday and land it then. Is there someone on the (old) Persona team who we can loop in to see if we can find out why this patch does not work for the Persona popup? Persona does crazy things, but I don't know enough about JS to understand what specifically.", I have addressed the review comments and landed this. Couple of notes: * There is a test page at ', that shows this fix in action. * For testing it is important to know that WebKit only lets you window.close() webviews that have a parent/child relationship. You can't just window.close() any window. * This does not work with Persona yet because I assume Persona does some more complicated things. I have reached out to people to get that fixed too, which can be done as a followup bug. ", Shane Tomlinson would be your best bet from the legacy Persona team. You might want to approach Ryan Kelly or Chris Karlof about getting some of Shane's time to look into this." 
id=1252086	 "I just tried to do this after removing FF from my simulator but was able to setup my passcode fine. I did notice however that after removing FF from the simulator, when I went into the Touch ID/Passcode settings screen, it was already enabled since it was cached in the keychain. After resetting the simulator's contents everything was fine. Do you have a STR?", I don't have STR, but I've ran into this issue and managed to grab a log ", When selecting 'Turn Passcode On', does the passcode screen show? Also, if it shows, is the keyboard not showing at all? Or are you able to enter a passcode but it doesn't save and has no effect?", I'm able to enter the passcode but has no effect.", Looking at the logs, it shows that the keyboard appeared for passcode input, a few seconds went by, and a bunch of the following errors appeared: ', From the delay and keyboard showing up, it looks like you tried entering the passcode but it never was able to be saved because the keychain rejected the change as shown from the error above. This error would make sense if this was reproducible 100% of the time because it relates to how we sign the build but its very confusing that it only happens periodically. I did, however, stumble across this lovely thread which seems similar to the situation we're seeing here: ", An potential workaround they suggest is to delay accessing the Keychain until after didLaunchWithOptions. Currently we touch the Keychain whenever we setup profile on app launch so we would have to investigate moving those parts out of the Profile initialization. Besides that I'm not sure what else could be going on.", This now works fine for me on the last 3.0 TF build.', Hey Catalin, do you mind trying to see if you can reproduce this in the latest TF build (3.0b6)? The error looks like something that could have been solved behind the scenes related to how the app is signed but want to make sure that this is no longer an issue since I know it's not reproducible 100% of the time.", So far I was not able to reproduce this issue on 3.0b6/3.0b7.', I'm going to go ahead and mark this as resolved. Feel free to reopen if it causes issues. Thanks for the test!" 
id=1109676	 'Been doing some work on this here: ', . There's a + button for adding tabs, but no way to switch between tabs yet. Currently, there's a TabManager that owns the tabs. The TabManagerDelegate is implemented by BVC to update the UI.", Created ', ', Pull request', Comment on ', ', Pull request This looks like a great first iteration. Lets merge it.' 
id=1193751	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1264707	 'Did you mean to assign this to Firefox iOS?', There's a bug for Android and one for iOS, so that the bugs can correlate to each product's relevant releases. From speaking with the iOS team on Friday, Brian Nicholson said that once this is ready on Android, he can run a script to sync up the engines for iOS. Therefore no substantial work required on the iOS side except to give the go-ahead to run the script (and obviously verify that it works as expected).", Mike, are we still moving forward with this for 5.0?', I'm going mark this as dependent on the Android bug. We were waiting for icons.", I got what I needed for this today. I assume we are past the time to be able to get this in 5.0?', I don't think it's too late -- we've done search imports on the stabilization branch in the past, and these changes are generally very low risk.", Sweet. I'll get a pull together. This will probably be a one off for now on iOS if that's OK (versus the search import). If yo d rather have Android first, I can do it that way.", Android imports are generally preferred since being out-of-sync with the Android repo makes it harder to pull in any other incoming changes, but as long as we do an Android import right before landing this (so that we have nothing we want to pull in now), it's probably fine.", What's the drop dead date for making the next Firefox iOS? We got the icon, but we will probably have to rework to match our UI.", These changes aren't completely in central yet, so I created a pull request. ", I realize this will be overwritten when the next pull of the searchplugins happens.', Created ', ', PR: ', Comment on ', ', PR: ', Fine with me -- just have to be aware of this in the meantime. I just did an import on master (72d6f52) so we have a fresh base to land this on.', An I free to merge this then? Thanks for your help.', Yep, please do!', master: ', v5.x: 9fc0c03' 
id=1144871	 'Created ', ', Pull request', Comment on ', ', Pull request Stream of consciousness comments on the PR, but this looks basically OK to me.' 
id=1273778	 'Created ', ', Pull request' 
id=1154551	 
id=1288119	 'I think this one is irrelevant now. The new mocks combine all the panels so updating bookmarks isnt required anymore.' 
id=1218836	 'Mind enabling the system setting to share Crash Data with App Developers? ', Better yet if you see the Firefox crash report on your device, can you attach it to this bug? ', Created ', mbest_crash1.txt Martin described two different crash scenarios that he\'s seeing: 1) Opening Firefox shows the launch screen, then immediately crashes and goes back to the SpringBoard. 2) Opening Firefox launches the app with 0 tabs and a crash prompt, asking to restore. If we choose Yes, the entire device reboots. #1 happened the majority of the time; he\'s able to hit case #2 after trying to open it repeatedly. He let me borrow his phone so I could grab some logs, and I was able to reproduce both cases. Neither contained stack traces or anything from our code, but there are a few hints. The logs for case 1 (attached) are quite bare and don\'t reveal anything immediately useful. The only seemingly relevant line is this one: "Service exited with abnormal code: 6", which isn\'t particularly useful. The logs for case 2 are a bit more interesting since they show several other apps crashing at the same time right before the reboot: Music, Skype, Hangouts, etc. -- all audio/video apps. Also interesting is that these apps all show lines like this one: com.apple.Music(pid = 1912) setting DiscoveryMode = DiscoveryMode_None, currentDiscoveryMode = DiscoveryMode_None In both logs, we have a similar line for org.mozilla.ios.Firefox. This suggests that the crash may be related to the AVAudioEngine, which we incidentally removed in the latest TestFlight build due to other bugs/crashes we\'ve found. I suggested that Martin try to update to see if the latest build resolves the crash.', Created ', mbest_crash2.txt Crash logs for case 2.', I'm clearing the need info after my phone was looked at.", Martin, did you try updating to the latest build from TestFlight? Any success?', Martin, can you tell us how you installed this build? And what version it is? If you installed via TestFlight then you can see the version number in the TestFlight app. If you installed via the App Store then you can see the version number in the install log in the App Store application.', Please don't update before we know the app version that is crashing.", Hey Stefan, Sorry but right after Brian took a look at my phone I reinstalled Firefox and it no longer shows the issue.', I\'m having the same issue with my iPad Air. The scenario that it starts loading a page but stops and crashes/resets the iPad. Crash report below... {"bug_type":"179","os_version":"iPhone OS 9.2 (13C75)"} { "scheduled" : true, "machine_config" : "iPad4,1", "log_version" : 2, "region_format" : "US", "os_version" : "iPhone OS 9.2 (13C75)", "language" : "en-US", "sessions_data" : { "app_arch" : "arm-64bit", "app_build_version" : "1310", "app_version" : "1.3", "app_adamid" : 989804926, "app_sessionreporter_key" : "D9E5E5B4-A453-4806-B90A-07ABD4C06C46", "app_storefront" : 143441, "app_bundleid" : "org.mozilla.ios.Firefox", "app_events" : { "date" : "2016-01-04T11:16:40-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 3 }, { "date" : "2016-01-04T11:17:58-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 3 } , "app_is_beta" : false, "slice_uuid" : "AB66E222-7CF3-396D-B7CC-2B6757AF9968", "app_cohort" : "3|date=1447624800000&sf=143441" }, { "app_arch" : "arm-64bit", "app_build_version" : "47.0.2526.107", "app_version" : "47.2526.107", "app_adamid" : 535886823, "app_sessionreporter_key" : "3C21A0CA-35C5-42F1-A24D-4906C65D69C5", "app_storefront" : 143441, "app_bundleid" : "com.google.chrome.ios", "app_events" : { "date" : "2016-01-04T11:16:30-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 5 }, { "date" : "2016-01-04T11:16:36-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 2 }, { "date" : "2016-01-04T12:11:01-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 687 }, { "date" : "2016-01-04T12:23:36-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 84 }, { "date" : "2016-01-04T12:27:24-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 636 }, { "date" : "2016-01-04T12:40:02-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 341 }, { "date" : "2016-01-04T12:51:56-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 9 } , "app_is_beta" : false, "slice_uuid" : "EA382548-2287-3A74-9EB0-202EBEFE2E51", "app_cohort" : "3|date=1352658600000&sf=143441" }, { "app_arch" : "arm-64bit", "app_build_version" : "11.1.66360", "app_version" : "11.1.0", "app_adamid" : 284815942, "app_sessionreporter_key" : "3C21A0CA-35C5-42F1-A24D-4906C65D69C5", "app_storefront" : 143441, "app_bundleid" : "com.google.GoogleMobile", "app_events" : { "date" : "2016-01-04T11:18:21-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 356 }, { "date" : "2016-01-04T11:25:45-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 12 }, { "date" : "2016-01-04T11:31:42-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 41 }, { "date" : "2016-01-04T11:32:30-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 801 }, { "date" : "2016-01-04T11:47:10-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 1433 }, { "date" : "2016-01-04T12:22:26-0500", "state" : "foregroundRunning", "type" : "app_session", "duration" : 72 } , "app_is_beta" : false, "slice_uuid" : "4EB34838-136D-3201-A4A1-A83C05EF76A2", "app_cohort" : "3|date=1313695800000&sf=143441" } , "log_timestamp" : "2016-01-04T13:15:33-0500" }', *** This bug has been marked as a duplicate of ', ***' 
id=1229901	 'Note: After navigating to a site, the tabs button does appear.', Dupe of bug ', ?', (In reply to Aaron Train :aaronmt from ', ) ', Maybe related. But yeah, we should have a tab button!', Here's a patch that always shows the restore prompt: ", . I do see the tabs button, but it's always set to 0 -- even after restoring the initial tab. We should show the actual tab count. I'll take a look.", Actually, the 0 count issue is already filed under ', , and I'm not seeing the issue filed here. We should WORKSFORME this unless anyone is still able to reproduce -- AaronMT/Steph, do either of you still see this?", I was only seeing this after a crash. Next time I find a reproducible crash and if I see this we can re-open.', I've uploaded a patch that you can use to simulate a crash. With this I'm able to see the tab button disappear while we show the 'Send Report' dialog: ", To simulate the crash, tap the 'Settings' button from the tab tray." 
id=1166289	 'Seems to be an about:home thing and restores itself on new tab opened', Still an issue on master (05/26)', *** ', has been marked as a duplicate of this bug. ***' 
id=1307477	 "AS is already disabled on beta/release channels! If yo d ever like to see what's enabled on different releases. You can view it here. " 
id=1254597	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM! Left some chatter on the PR.', Comment on ', ', Pull request Sorry! Moving this to feedback+ instead of review+ to resolve the rotation popover issue I mentioned in the PR.', Comment on ', ', Pull request Looking great to me.', Created ', ', Pull Request This is the merged pull request taken from original that got a tad screwed up with rebasing' 
id=1176984	 'I think we build with Swift 2 now (maybe?). Re-open if not.', We don't support Swift 2 yet :( Reopening ticket", Created ', ', 1bd57e5' 
id=1122705	 'Fix is part of ', Created ', ', Pull Request Fix for this bug and a bunch more.', Merged.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1134706	 '(In reply to Wesley Johnston (:wesj) from ', ) ', Can we get product input on this? Right now, we\'re using "default search engine" for search suggestions, and you can\'t turn them off. (And we don\'t let you opt in.) I just landed ', , which made the default search engine always exist, so you really can't turn them off. The mocks from darrin don't include disabling search suggestions (see 1 ). Is this actually a feature we want? Is it v1? 1 ", It actually *is* a feature we want. It is part of our 'giving users control of their privacy' story, in that some users don't actually want their search queries to be given over to providers. That's why we implemented it the way we did on Android - it was that balance of the usefulness of suggestions with those that wanted the control of what they were sending over to providers. how difficult would it be to implement search suggestions in the same manner as Android (ie prompting the users to turn them on)?", I agree with Karen. This feature is why we make Firefox.', I'm glad we all think this is valuable \\o/ Technically, I see no reason we can't do exactly as we do on Android: prompting in the search panel and exposing the option (and the suggestion provider) in the settings panel. I've modified this ticket to track prompting in the search panel and will file the settings panel ticket.", Created ', AwesomeScreen - Suggestion Opt-in.png', Created ', ', Pull request', Comment on ', ', Pull request Looks good!' 
id=1196782	 'Merged as part of ' 
id=1146398	 
id=1158953	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1278053	 'Note that Safari and Chrome for iOS correctly blocks each invalid https host even if same certificate is used.', Brian, looks like your code. Can you take a look?', Good catch. Yes, I'll fix this right away.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good. Do you think this we can create a unit test for this? Or maybe just for the lookup logic?', Marked as needsuplift, but I don't know if sleroux will see this bug since he has no secure bug privs? I'll cc him anyway.", (In reply to Stefan Arentz :st3fan from ', ) ', Thanks for the reminder -- we already have CertTests, so I updated it with origin support.', master: ', v5.x: 1711054' 
id=1293066	 '*** ', has been marked as a duplicate of this bug. ***', Paying bounty for the combined attacks in ', Created ', ', Pull request', Comment on ', ', Pull request Looks good!', master: ', v5.x: 9b5da75', *** ', has been marked as a duplicate of this bug. ***' 
id=1168693	 'Created ', ', Pull request', Comment on ', ', Pull request Comments on GitHub.', Comment on ', ', Pull request Current PR looks good.', c2655c3' 
id=1247895	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1180418	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', It looks like this still allows other characters that should be encoded, such as "+" and "?". Rather than starting with all valid query characters and blacklisting specific ones, I\'d create a whitelist from the ground up that includes only allowable characters. According to Wikipedia 1 : Letters (A\u2013Z and a\u2013z), numbers (0\u20139) and the characters \'*\',\'-\',\'.\' and \'_\' are left as-is. All other characters are encoded. So how about we create a custom character set with just those characters? 1 ', Comment on ', ', Link to Github pull-request: ', r=me with hardcoded string extracted.', Comment on ', ', Link to Github pull-request: ', Harcoded string extracted. r=bnicholson', Commit 2634ae35ebfef39e7f45abb81ac087b24f02d066' 
id=1233778	 "Ah favicons. This is an interesting problem. Unlike Top Sites, when dealing with Logins, we only have the website URL - not a Site object from the database. These URLS don't live in the History database. I feel like our current favicon/site abstraction doesn't handle this case well yet and might require some refactoring of how we do favicons as a whole unless I'm missing something?", Yeah, favicons are a mess :) But don't worry about Site; it's just a wrapper for a history item, and not a good one (e.g., it doesn't understand multiple icon sizes, it's reused as a Top Sites tile, etc.). You can do one of two things: 1. Try to add a faviconID to logins, just as we do for bookmarks. Yo ll need to know the icon in browser.db when you write the login. This has huge referential issues: if we delete favicons or lose browser.db, the favicon IDs will be invalid. 2. Look for the URL in history when you query. Both of these are more complicated than for plain history, because of course the logins table is in a completely different database, and so you have referential problems and can't just do a join. My recommendation is to load icons by history URL: 1. Fetch logins from logins.db. 2. Grab their URLs in memory. 3. Fetch icons by URL from browser.db, yielding an array of the same length. 4. Join in-memory and display. On Android we'd do 3-4 asynchronously, but I'll settle for blocking display in this case!", Created ', ', Link to Github pull-request: ', Adds favicons for login list and detail. Also includes an algorithm for finding the best fitting favicon for an image size.', Also resolves ', .', Comment on ', ', Link to Github pull-request: ', Comments on the PR.', Comment on ', ', Link to Github pull-request: ', Not a complete review, but should be enough to keep you busy!', As discussing in the PR this is going to get pushed back to 3.0. A temporary solution has been merged in with ', so we don't always see the default favicon.", Too much complexity.' 
id=1200627	 '1.0 is affected on the store', Probably an iOS 9 regression', Just tried this out in the iPhone 6 (9.0) simulator off of master and can't reproduce it. Is this still an issue?", This is reproducible still. This seems to happen after a Sync with excessive top-sites.', Just start deleting a bunch after a Sync and yo ll see what I see in the video.", Created ', ', ', Simple fix. Synced top sites asynchronously fetch their thumbnails and the background image background is default to black which caused the jarring effect. Just changed it to white.', Merged' 
id=1268080	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1148585	 "We don't query bookmarks in Android's Top Sites, right? This is probably a WONTFIX." 
id=1281404	 "I can't reproduce this. How reliable are these STR?", The issue was reproduced on build 5.0b12 following the above STR on iPhone 6 Plus (9.1), iPhone SE (9.3.2). The issue was reproduce 100% on iPhone 6 Plus, but in the case of iPhone SE, the issue was reproduced after repeating step 3 a second time. Please see the following URL for more information : ', I can also reproduce this on ', , so it doesn't seem to be specific to the about:blank page we're using. Since this isn't reproducible on any page with actual content, though, I think we can live with this bug. Please reopen if you disagree." 
id=1212862	 'Not sure if this is the same or related to bug ', *** This bug has been marked as a duplicate of ', ***' 
id=1162323	 'Created ', Screenshot (before)', Created ', Screenshot (after)', Created ', ', Link to Github pull-request: ', Stephen, how does this look? :D', Stephan*, sorry!', Created ', ', Comment on attachment Looks good!', *** ', has been marked as a duplicate of this bug. ***' 
id=1237695	 'Needs a follow up with a string to add a setting.', Created ', ', PR', Comment on ', ', PR LGTM', I merged it because we are doing a build.', Hello. Is this really a change for users? I can remember Chrome (and some other Google\'s product) disabled third-party keyboard once, But all of them finally returned back the feature by users\' feedback. They disabled the feature since the combination of UIWebView (not with WKWebView we\'re using) and third-party keyboard causes some kind of crashes on iOS 9.0-9.1, but the OS bug fixed on iOS 9.2. (So they could re-enabled the feature again.) "A ton of grief" is so severe problems? I can agree it\'s better to have a option disabling third keyboard support for user\'s choice, But disagree disabled by default.', Could you explain the reason why did you considered to disable 3rd party's keyboards?", Look at the bug tree rooted in ', . We can't add a user-toggled option for this, because doing so would require a string. So that'll happen in the next release.", *** ', has been marked as a duplicate of this bug. ***', The bug I submitted (1249840, now closed as a duplicate of this) also mentions that the stock iOS keyboard text prediction isn't working either. Is that something that is going to be addressed?" 
id=1171028	 "States are: Sign in account email|Verify your email address currently in grey, should be in orange account email|Enter your password to connect in orange account email|Unable to verify email address currently in grey, should be in orange account email|Disconnect It looks good, though the version number isn't in the default fontface ;-)", Version number and 'mozilla' are in Fira, as a hint towards our brand. Its subtle, but if we're shipping Fira Sans for RV, lets use it ;) Can you specify the 'orange' to use?", Note that "Logout" is a noun like "login". As an action, the verb "Log Out" (much like "Log In") is more appropriate.', Not blocking on polish at this point. Scream if this offends.', Created ', ', ', Comment on ', ', ', LGTM', Merged ' 
id=1183436	 'Hm, looks like a false alarm since I see the same thing using Safari. It works if I drag from the area above the circle caret rather than the caret itself.' 
id=1250514	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', works well', master: ', v3.x: ' 
id=1262227	 'd9439dc' 
id=1192155	 "Seems legit, but also some riskier edge cases. I don't think we should block 1.0 on this, but let's see what the triage crew says.", Created ', ', ', Merged' 
id=1130135	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1144146	 
id=1204056	 'Created ', ', ', Merged.' 
id=1152481	 
id=1164555	 'Just tried Xcode 6.3.2 GM and there is no problem there with optimized builds it seems. So we can flip the setting back to normal when we have switched to 6.3.2.' 
id=1241223	 'Per ', *** This bug has been marked as a duplicate of ', ***' 
id=1173833	 'Fixed: dbf335b' 
id=1186638	 'Created ', PR ', Request: split this into "add breakpad" and "use breakpad" commits; and see if we can do something less painful than checking in 1000 files of breakpad source.', Created ', ', PR ', This revised PR splits up the two pieces of work into two different commits. Also added some additional setup information as discussed with the Socorro team: ', Comment on ', ', PR ', If this works, LGTM with comments addressed.', Merged in breakpad integration.' 
id=1132181	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM Killlll it.' 
id=1194570	 'Created ', ', Pull req. Thorough review, please. Last commit not strictly necessary.', Comment on ', ', Pull req. Code looks good with some nits and a question at the end. Curious if returning 0 will effect any other call sites.' 
id=1145494	 'Created ', ', Pull req.', Comment on ', ', Pull req. Looks great, and great comments.' 
id=1135917	 'Created ', ', Pull request This just has us iterate over subviews of the VC until we find one in this touches x-range. It feels a lot better and should work fine (assuming our urlbar doesn't get much more complex).", Comment on ', ', Pull request LGTM!', Feels better to me' 
id=1147084	 'Resolved with fix in ' 
id=1266476	 'Created ', ', Link to Github pull-request: ', Couple of questions about the JSON that you posted: { "arch": "arm", "locale": "en", "device": "Apple-iPod5,1", "clientId": "E33FA481-33DF-4A30-9DBB-858E8BD2C5CC", "osversion": "9.2.0", "os": "iOS", "profileDate": 16892, "v": 3, "defaultSearch": "Yahoo", "seq": 3 } I think "arch" can be more specific. I see it is hardcoded. We should really ask the OS for the right value. Because it could be armv7, armv7s or arm64. Or whatever Apple decides to use for the iPhone 7. The "locale" looks too short. Shouldn\'t that be at least a full locale code like "en_CA"? Do we need the "Apple-" prefix for "device"? Maybe we can have a "vendor" field instead? In the PR you wrote "We don\'t send the pings on developer builds". What do we do for TestFlight and Aurora builds? I\'d like to get data for those too. Can we include a "channel" field in the Core ping so that we know what build this is?', (In reply to Stefan Arentz :st3fan from ', ) ', It was a pain to get that when I tried, and we could figure it out if needed based on the model. It didn't seem as important as it would be on Android since we don't have the fragmentation issues, but I can try again if we think it matters. ", The docs say "app locale", so it\'s whatever locales are available to the app. Since I\'m running a developer build, "en" is all that\'s available, so that\'s what we get. ', I think mfinkle can answer this one...I'm also curious why this was spec'd as a single field instead of two. ", That condition is guarded on AppConstants.BuildChannel == AppBuildChannel.Developer, so as long as TestFlight and Aurora builds use a different channel, we'll send the ping. ", We do :) Check the URL! It includes the version, build number, and release channel.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', This field was originally in the spec to handle "arm or x86", not to track the fragmentation of the either processor type. If iOS will also be "arm", so be it. We\'ll have other pings, like the crash ping, which can give more details when looking for a particular use-case of processor type. At the core ping level, the device will likely provide enough detail for dimensional analysis. ', Gecko, and the Android core ping, provide locales in AA-BB format. If that's not simple to do in iOS, then let's just send the AA_BB format. We do intend to have a single DB table with Android and iOS data intermixed (think Desktop and Windows, Linux and Darwin). If we ever try to do WHERE clauses on locale, we'll just need to be aware of the differences. ", We want to keep the core ping as small as possible, so we can send it under any network situation, Wifi or cell data. So we didn\'t want too many separate fields. We also considered the "how would we use this?" aspect and settled on a unique device field. If we had to do it again, I might consider using an Array, "Apple", "iPod5,1" , so we could easily separate the two components. Let\'s see how we end up using it. ', As I mentioned above, we\'ll be mixing Android and iOS data together. What are the possible values of "channel"? Obviously, on Desktop and Android they are "nightly", "aurora", "beta" and "release"', (In reply to Mark Finkle (:mfinkle) from ', ) ', Well this is one of my pet peeves .. :-) aa-BB is a language identifier aa_BB is a locale identifier Which are very different things and may not even have the same values. It sounds like that field should have been named "language" is that is what we want. If we accidentally called it locale but expect a language identifier then we should note that in the docs. Also, they can have shorter and longer forms: For language identifiers: language, language-region, language-script For locale identifiers: language, language_region, language-script, language-script_region None of this is in our control as it depends on user settings. But what should this be? System language or application language? The first is more interesting to me, nbecause that also tells me if people use a language that we do not support. (In that case the current method would default to \'en\' - which is the fallback language)', (In reply to Mark Finkle (:mfinkle) from ', ) ', Well this is one of my pet peeves .. :-) aa-BB is a language identifier aa_BB is a locale identifier Which are very different things and may not even have the same values. It sounds like that field should have been named "language" is that is what we want. If we accidentally called it locale but expect a language identifier then we should note that in the docs. Also, they can have shorter and longer forms: For language identifiers: language, language-region, language-script For locale identifiers: language, language_region, language-script, language-script_region None of this is in our control as it depends on user settings. But what should this be? System language or application language? The first is more interesting to me, nbecause that also tells me if people use a language that we do not support. (In that case the current method would default to \'en\' - which is the fallback language)', Comment on ', ', Link to Github pull-request: ', Updated. More notes: * After IRC discussions, we decided we do want to report the app locale. For format consistency, I did a s/_/-/ replace on the code. That means we\'ll report locales of the format AA, AA-BB, or AA-BB-CC. * This guards the ping on the existing "settings.sendUsageData" setting. As discussed earlier, we\'ll want to update the Sumo article since that\'s currently Adjust-specific. * Arch is still hardcoded as "arm". * No delay before sending the ping. * We only have two release channels now, "release" and "beta", that send pings. The "aurora" channel (used by l10n), the "developer" channel for local builds, and the unused (?) "fennec" channel all suppress the ping.', Comment on ', ', Link to Github pull-request: ', Look sane to me. We can file a followup for adding the Date HTTP Header, along with the next pieces of data.', Comment on ', ', Link to Github pull-request: ', Looks good, but I have one remaining question. The ping is currently triggered via application:willFinishLaunching:. That means that the ping is only sent the very first time the app is cold started. I just want to verify if that is correct because under the right conditions, an app can stay resident for days or even weeks. That means no pings all that time. (Days is very realistic, weeks could certainly happen if you are on a device with a good amount of memory and you never reboot it.) Do we instead need to send the ping when the app goes back into the foreground? What does Android do?', Android uses onCreate, which is the equivalent of our willFinishLaunchingWithOptions. Like iOS, Android's lifecycle rules make no guarantee about when an app will be killed, so we have parity there. Mark mentioned possibly using onResume on Android to dispatch pings more frequently in the future; we can do the same with applicationDidBecomeActive.", v4.x: 30c535f' 
id=1278792	 'Landed a first set of locales in v5.x (the same as v4.x), will review before launch ', Update on where we are at with locales on v5.x We currently have 64 localizations in the repository: ', 47 are completely localized ', We have decided to not drop any localizations from v4.0, so we will be at a total of 50 localizations (because we're keeping eo, tl and uz) List of locales not shipping in v5.x but currently complete: ar, fa: still blocked by lack of RTL support my: fonts not rendering, language not available on iOS ast blocked by ", : we need to have it added to builds. It's ready to go, tested by community and us, sign-off has been completed on bug ", I will update list of locales once we know for sure what's getting in. List of locales shipping in v5.x but currently incomplete: eo, tl, uz", List of locales is final as per ', . Complete list can be found here: ', Closing bug.' 
id=1160638	 'Created ', ', Pull Request', Merged.' 
id=1198906	 'Created ', Screen Shot 2015-08-27 at 12.30.44 am.png', You will need to update to XCode 4.', 6.4 that is' 
id=1169886	 'Mike, do you still see this?', I think I haven't seen this in a while.", Thanks, Mike.' 
id=1236567	 'Created ', ', Pull Request Sometimes we get an 0 length title rather than a missing one and therefore a tab title doesn't show. We now default to the tab URL if the tab title is empty.", Sorry folks. Wrong bug.', Unable to replicate. Feature works as expected from View Later.' 
id=1314367	 'Already implemented throughout various previous bugs.' 
id=1182274	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', This looks good to me. Are there UI tests to test the areas that are affected? Navigation, Reading View?', (In reply to Stefan Arentz :st3fan from ', ) ', Not really -- those are still in the works. I hit a number of other URL bar regressions while writing them, so trying to clear those out first.' 
id=1259252	 'Created ', ', PR - whoever gets to it first', Comment on ', ', PR - whoever gets to it first Looking pretty good so far - left some code comments and questions on the PR.', Comment on ', ', PR - whoever gets to it first Looks good! The clock icon is fuzzy, though. Check the resolution/display on that.', Comment on ', ', PR - whoever gets to it first second round', Comment on ', ', PR - whoever gets to it first Getting there! I like how the recent tabs implementation is now contained in its own module in profile. Let's tweak it a bit more so it exposes actual typed RecentTab objects (instead of generic string dicts) to make this more OO." 
id=1094940	 "And note that favicon here means 'any kind of image that identifies the web site' - there is a whole list of things that sites optionally make available. From iOS specific icons to Windows Phone tiles. The service should pick the best looking asset for the specific device type requesting it." 
id=1151432	 'Created ', ', PR ', I think the constraints fixes probably fixed this (I can't repro it), but I did notice these show on tabs other than the one they're relevant to. This fixes that bug (cause by ", fix).', Comment on ', ', PR ', Looks good. The snack bar animation looks a bit jank on the tab tray transitions but I feel like that's more part of the tab tray transition bug: ", . I think I'll make that bug a meta and file another bug under it", Filed animation bug under ' 
id=1270693	 'Created ', ', PR: ', This patch does three things: * Remove the shortcuts bar for less clutter and safari parity. See screenshots below. This only affects iPad and iOS9. * Enable `enablesReturnKeyAutomatically` so that the return key stays disabled unless there is content in the field * Change the *return* key to be *Search* instead', Comment on ', ', PR: ', Looks better!' 
id=1215260	 'Created ', ', Pull req.', Stefan or Steph: feel free to grab this little trio of bugs if yo re itching to make a build. The reviews are small.", Stefan reviewed on IRC. bee6d41' 
id=1162999	 "Couple of ideas for resolving this: 1. I've had problems in the past where tests were not being properly run because of logic that was being executed in the AppDelegate every time a test case started up. A solution would be to create a Test AppDelegate and have a build flag in main.m that would direct the app to the correct app delegate. The nice thing about this solution is that we don't add any test exceptions to the production code. 2. Another solution would be to hide certain functionality in app start up behind build flags that would be configured to avoid certain logic from running on app launch.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good!', Not related to this patch but there seems to be 2 failing tests: ', (In reply to Stephan Leroux from ', ) ', Yeah, wesj mentioned that too -- somehow related to the on-screen keyboard being enabled. I'll look into it." 
id=1226901	 "And let's make sure that we get these (a) into the logroller, and (b) into the log-emailer. I'd love to have them reported into crash-stats, too. Maybe include a counter of corruptions detected?", I can tackle this today. I'm going to assign you as the mentor on this :)", Created ', ', Link to Github pull-request: ', Pass at adding logging for corrupt DBs. Added it whenever SQLiteDBConnection errors on on executeQuery.', Updated PR with comment fixes, refactoring, and attaching to email logger.', Uplift 33b553ddcff86868c2fd254a3671a41bc6eeb4fd', Master: a8008af9616bbaa13d93ee1e1496992dff290864 (Don't forget the bug metadata, sleroux!)" 
id=1172274	 'Created ', ', PR ' 
id=1109663	 '*** ', has been marked as a duplicate of this bug. ***', Duping to ', and will create a new bug for the "Share from external app to Firefox" idea *** This bug has been marked as a duplicate of ', ***' 
id=1264286	 'Fixed with ', .' 
id=1193462	 "I don't know of a good reason why we couldn't just take them straight into sign-in; we just haven't built it yet.", Again doesn't this and ", depend on ', ?', This is also true for the tour.', Created ', ', ', I'm testing this now, particularly the case where you already have an account.", This is a no go. As it stands this PR takes you to a new Sign In page from the tour when you already have an account, and that will cause havoc. At the very least it should take you to the manage page -- the one you get to when you tap your account name in Settings. Alternatively we should consider taking signed-in users to Settings, where they'll be able to see the state of their account, tap Sync Now, or just head back to the browser. Other than that, this looks good.", Comment on ', ', ', Sounds like rnewman is more familiar with this flow than I am, so passing review to him.', Comment on ', ', ', I've updated the patch to include redirecting the user to the settings page from the signin button on the tour if the user is already signed in. Also added PR comment fixes: ", Merged' 
id=1154348	 'Created ', ', Github PR 335', Comment on ', ', Github PR 335 I merged it. Did not know it was such a small change :-/' 
id=1229658	 'Hi Shovav. Are you using any third party keyboards or is this happening with the default one?', I am using SwiftKey for iOS.', Shouldn't have to close the application to use the application. Let's see if we can reproduce this. Shovav, have you done any customization to the keyboard that can help us reproduce this? Using the latest version?", I have not modified/customized the keyboard in any way. Just installed it from the App Store and set it as my default keyboard. I am using the latest version of SwiftKey.', I've experienced the same problem on other third party keyboards with any apps AFAIK, but I've never gotten reliable STR or condition. (maybe have something to do with memory consumption over the whole system) I guess this is an iOS's problem, but I've not been able to report it by absence of reproducible way... So I'm curious on this problem...", Closing as WONTFIX because this is out of our control since the keyboards are managed by iOS. Also, as of SwiftKey 1.4.6 and iOS 9.2.1 things have been working very reliably for me. Please reopen if there is a more concrete STR.' 
id=1176299	 'Oops not an issue.' 
id=1322148	 'Hello Paul, I have tested this issue on iPhone 6S (10.1.1), iPhone 6 Plus (9.3.4), iPad Air 2 (10.1.1) and the slider is displayed correctly. Also crosschecked with Safari, Desktop and Android and the behavior is identical. Is there something specific that you are doing that may cause the slider to not be displayed? Also it would be very helpful if you can attach a video or screenshot of the issue.', The slider at the top of the site works for me on Firefox for iOS (iPhone 7+). In both Safari and Firefox, it requires a tap to activate the chevrons for navigation. Resolving until more information is added in this bug from the bug filer.' 
id=1254575	 'Created ', ', Pull Request Being reviewed as part of ' 
id=1121683	 'I have a branch ready that I will submit a PR for when the first iteration of the Reader Mode has been merged.', Created ', ', Pull Request', This is an implementation for a new BrowserLocationView that displays and manages the following items: * A padlock icon which is set when the requested URL is https * The URL location * he Reader Mode button', Comment on ', ', Pull Request LGTM', Ignore last comment. I typed in the wrong bug window again. Was for 1121228 instead.', Comment on ', ', Pull Request Heh, I saw this got merged early again. Not worth reverting again, but please at least comment on or file follow-ups for my last couple comments in the PR.', Updated PR here: ' 
id=1134480	 'Created ', ', Pull request This styles the dividers we have to match the mockups better (still needs tweaking) and adds them in history. The glass effect shows some of its "optimizations" here (i.e. you can see it do some strange things). Lets see what UX thinks.', Comment on ', ', Pull request Looks OK with cleanup. I know the PR for the first two commits landed, but I'm not sure about the third (Create a Join table for bookmark favicons). I guess this needs to wait for that commit since this depends on JoinedHistoryVisitsTable.swift?", Landed a second follow up PR as well: ', Another follow-up here: ' 
id=1277572	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', works well. A couple of nits in the PR', Merged into master. Needs uplift into v5.x', Created ', ', Link to Github pull-request: ', Please merge on uplift.', Merged into master, then uplifted to v5.x 7a215a2..6fc603e v5.x -> v5.x' 
id=1243156	 'Looks like inside the loginAtIndexPath the act of calling sectionIndexTitles is very expensive because it needs to calculate the publicSuffix of each URL which looks to be not cheap. See attached profile snapshot of behaviour while scrolling.', Created ', Screenshot 2016-02-02 16.38.45.png', Can we just precompute the domain, either in SQL or in the cursor factory?', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks great!', master b499bb258672f3b5350d841d9b95ba029498496d' 
id=1196276	 'Note: This occurred in build #36 Aurora', Great success! ', How often is this reproducible?', 100% of the time when switching between panels quick. I might have narrowed it down. The issue as introduced between builds 34->35. I'm going to take this to see if there is a quick fix for 1.0 because crashes suck.", Created ', ', ', Couple of things: 1. Safer target/action. I was able to get crashes from the selector being called on an invalid/deallocated target. I've made the add/removal safer by binding them to the willAppear/didDisappear events. 2. Added checks to make sure we only call endRefreshing if we are refreshing. 3. Renamed the refresh method and target selector. Looking at ", it seems that the crash is happening inside UIKit and might be a naming collision with 'refresh' considering it's a popular name for a method. Added just in case. I haven't been able to reproduce the crash with these fixes", Merged' 
id=1158532	 'This is WFM...', Hm, same' 
id=1223099	 'Created ', ', Pull req.', c2b2c2c', bnicholson spotted some really weird behavior caused by this commit. Inlining the method call fixed it: 02491fc' 
id=1168543	 "This happens even after uninstalling/reinstalling on iPod touch. Can't reproduce in simulator.", We trigger all of the table creation queries sequentially: func run(db: SQLiteDBConnection, queries: String ) -> Bool { for sql in queries { if !run(db, sql: sql, args: nil) { return false } } return true } but apparently the index creation query is actually running first, or in parallel in separate transaction. Lemme see if I can repro.', (this is my assumption because that query itself is well-formed, and we didn't abort due to a prior failure\u2026)", Initial guess was wrong. Current theory: Brian was using iOS 8.1.2, which has a sqlite version < 3.8, which is needed for partial indexes. ', This is easy for us to work around, so let's do that.", Created ', ', Pull req. Too lazy to create a parallel PR, sorry!', Comment on ', ', Pull req. Guess that means we need to be careful to check this flag whenever using partial indices. I wish we had a way to test this!', As expected, iOS upgrade fixes the issue.', will have us ship our own sql implementation anyway, so this won't be an issue anymore.", 433f577' 
id=1233472	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Line #74 let useTouchID = NSLocalizedString("Use Touch ID For:", tableName: "AuthenticationManager", comment: "List section title for when to use touch ID") Should be: "Use Touch ID for" lower case f in \'for\', no colon. "List section title for when to use Touch ID" Capitalize T in \'touch\'.', Comment on ', ', Link to Github pull-request: ', r+ with Robin's comments addressed.", Landed Master a11f0c93fedc84776d14677a9354a6cb01d4d1a5' 
id=1247657	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1188512	 'Anthony, can you adjust your illustrations?', This got fixed somewhere else' 
id=1138122	 'darrin: this follows the discussion from ', . Desktop has a toggle for providing search suggestions, and a drop-down for the list of search suggestion providers. How would you like the toggle and search suggestion provider UI to look? Right now we distinguish the first search engine and make it the search suggestion provider.', For now, lets do the following: Default Search Engine --------------------------------- Yahoo > --------------------------------- Show Search Suggestions? ( O) --------------------------------- Quick Search Engines --------------------------------- Google ( O) --------------------------------- Bing (O ) --------------------------------- Amazon ( O) --------------------------------- Twitter ( O) ---------------------------------', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1148429	 'Pre commit: 969b653 ', Created ', ', Pull req. This is getting close. You can kick off a new state machine, or restore one from prefs. It'll move through its lifecycle (success states only for now), persisting as it goes. Keys are kept in the Keychain. Next up will be hooking it into the app lifecycle, and then moving on to the synchronizer work.", befefd7' 
id=1200552	 'Created ', ', ', Comment on ', ', ', LGTM +1' 
id=1225257	 'Forgot the main part, on opening from a link into the background.', Could this be related to our alert box crasher?', Created ', ', Pull request There is scope for a followup bug here for when BVC isn't visible.", Comment on ', ', Pull request Looks good and works for me!', This merged. Remember to close the bugs.', Note this landed on master and is not on 1.3' 
id=1212660	 'Created ', ', Pull req. With ', worked around, I see my Android mobile bookmarks in my iOS profile.', Comment on ', ', Pull req. I don't have much context on the folder model code, but the changes looked reasonable to me...", Landed.' 
id=1162174	 'Does Safari have 1Password in their share sheet?', Created ', Not able to add 1Password to the action sheet', Created ', 1Password in action sheet in Safari', Safari has it, yes. I just added a screenshot of Safari (8602278). (I also added a screenshot of not being able to add 1Password in Firefox when tapping more, 8602277.)', The bug at ', seems to suggest that there now is a workaround possible. Will contact 1Password folks to find out more. (1Password people, do you like Timbits, Coffees, frappucinos? Let us know, half the Firefox for iOS team happens to be two blocks away from you on Adelaide St West. Would love to discuss this issue and get a workaround going.)', Hey Stefan, I was just working on it. I'll pushing a PR very very soon :-) I do love them all Timbits, Coffees, frappucinos :-) I am located in Montreal, but I may be in Toronto this summer and I'd love to see you then :-D Cheers! Rad", Created ', ', PR: ', I have conflicting thoughts about this pull request. First, I love this. I use 1Password every day and many people who will use Firefox for iOS probably will too. So this brings immediate value to people using our application. However, right now this is a 1Password specific integration and not really a workaround for app extensions in combination with the WKWebView in third-party apps. (Which is the real cause of why 1Password and LastPass only work in Safari). What I was really hoping for, was that the Chromium team was hinting, in that bug that I mentioned earlier, towards a non-specific workaround that would *any* password provider work. On a technical level, this is a simple patch and I have no objections including it. Also, not-excluding similar patches of other password managers. It is all pretty nicely hidden behind the UIActivityViewController, and we could create a more structured way to accommodate other parties. However, that may not be just a technical decision.', For the expediency of time and the high value of having this integrated, I'd like to see us move forward with the specific workaround. However, when we take a deep breath after v1 goes out, I'd like to revisit to see about integrated the more generalized approach since I would hate to see having specific code to each provider in the future (from an efficiency / scalability perspective).", Hey Karen and Stefan! Thanks for reviewing my PR :-) Any password manager which supports web view filling (UIWebView or WKWebView in the Firefox case) and which conforms to the App Extension API (', ), simply needs to add their extension\'s bundle identifier to the "isPasswordManagerActivityType()" function. \tprivate func isPasswordManagerActivityType(activityType: String?) -> Bool { \t\tvar isOnePassword = OnePasswordExtension.sharedExtension().isOnePasswordExtensionActivityType(activityType); \t\tvar isPasswordManager = (activityType == "bundle.identifier.for.another.password.manager") \t\treturn isOnePassword || isPasswordManager \t} Hope that this helps :-) Best', Rad, our built-in Send Tab action has disappeared now. It is available from other apps but not from within Firefox anymore.', Nice catch Stefan! I found the fix! I'll push it later on today! Cheers!", I just pushed the fix :-) The problem was caused by having both "url" and \u201cself" in the "activityItems" array: 1) Now that our BrowserViewController implements the UIActivityItemSource, self can be either the 1Password extension item or the selected tab\u2019s URL (see "func activityViewController(activityViewController: UIActivityViewController, itemForActivityType activityType: String) -> AnyObject?"). 2) Having both url and self (being the URL) meant that we had two URLs which rendered the NSExtensionActivationRule condition (NSExtensionActivationSupportsWebURLWithMaxCount = 1) false. Removing the \u201curl" "activityItems\u201d array fixes the issue. ', Note to self, I think this only works with the following NSExtensionActivationRule: SUBQUERY ( extensionItems, $extensionItem, SUBQUERY ( $extensionItem.attachments, $attachment, ANY $attachment.registeredTypeIdentifiers UTI-CONFORMS-TO "public.url").@count == 1 ).@count == 1', Hi Stefan, I was testing with the current beta version of 1Password. We fixed this on our end in the most recent betas. I just pushed the fix where I conform the 1Password custom activity type ("org.appextension.fill-browser-action") to "public.url". BTW, your predicate looks good assuming that "Send To" extension requires only a URL to show up in the share sheet. Best,', Rad, If the NSExtensionActivationRule change works then I don't see a reason to implement add the UTImportedTypeDeclarations. What do you think?", Hi Stefan, I like the NSExtensionActivationRule change as I have a soft spot for the NSPredicate :-) Adding the NSExtensionActivationRule predicate and removing the UTImportedTypeDeclarations works only when 1Password 5.4.2 is installed. It does not work when 1Password 5.5 beta is installed. So I decided to leave the UTImportedTypeDeclarations change and to change the NSExtensionActivationRule to the predicate that you sent me, this way we have the same share sheet in Firefox regardless of the version of 1Password that you\u2019re using. Thoughts?', Rad, just a quick note that I am putting this PR on hold until 1Password 5.5 has been released.', Stefan, this works for me too :-) I will comment here as soon as 1Password 5.5 hits the shelves. Thanks!', We most certainly want to include this but we are not blocking on it for our v1.0 release. Removing myself as the reviewer for now to clear my queue. We will most likely start looking at this bug again when the v1 storm has calmed down.', *** ', has been marked as a duplicate of this bug. ***', PR has a milestone 1.1, should this track?', As promised, I am letting everyone know that 1Password for iOS version 5.5 is out in the wild. The attached PR is also conflict free (I keep it in sync with master). Please feel free to merge it at your leisure. Thanks!', Darrin asked about UX related issues for this patch. This is the only thing I can thing of: I think we need a setting to disable our own password code. The reason is that if you are the kind of user that uses an external password manager then you are probably not interested in our dialogs that ask you to remember the password that your preferred password manager just filled in for you. They become an annoyance very quickly. So I would like to suggest a "Remember passwords for sites on/off " setting that can globally disable our password code. It will default to on of course.', (In reply to Stefan Arentz :st3fan from ', ) ', That's actually something that should be true for desktop Firefox too. /me goes looking to see if that's an extant bug, and to file it if it's not.", Just in case it comes up, I've filed a bug for disabling the password management stuff in Firefox desktop as ", .', To keep consistency with the proposed changes in ', , I will propose this option read: "Save logins" on/off ', (In reply to Darrin Henein :darrin from ', ) ', One wording trick is that turning this on doesn\'t mean that logins are automatically saved; it just means users will be asked to save them. Might be better worded as "Offer to save logins" or something like that (or some label text below explaining what it means, but that might just be clutter).', Should we also not *fill* logins?', Please reset the 2.0+ flag.', Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", I split out the settings work for this meta into ', .', (In reply to Richard Newman :rnewman from ', ) ', Note that we did expect to do this for this bug and even landed the string already.', Created ', ', PR: ', Work in progress rebasing onto master. Fails linking, even after clean and cleaning DerivedData.', Fixed build, and now functioning well with OnePassword but not at all with LastPass. The Swift is communicating with the extension, though LastPass is not recognizing what it's being handed. I have moved the ActivityViewController construction and behaviour into a ShareExtensionHelper, then put all the OnePasswordExtension specific code separated into a private extension \u2013 this sets us up well for experimenting with other Password Manager Extensions. Steph \u2013\xa0could you give some feedback re: BVC-refactoring-style?", This looks good! I like the separation of concerns and loose coupling between the properties/method invocations on the BVC from the helper by only passing in the tab and delegating the actual update BVC calls to a callback block. The rest of the code that remains in the BVC should definitely be part of the BVC since it handles presenting the pop over view controller.', Created ', OnePassword JSON payload OnePassword JSON payload from OPWebViewCollectFieldsScript and passed to the app extension.', Created ', GenericPasswordExtension JSON payload Collected by OPWebViewCollectFieldsScript before being passed to the app extension. This the same page as the OnePasswordExtension JSON payload.', Created ', OnePasswordExtension's OPWebViewCollectFieldsScript; prettified.", Created ', GenericPasswordExtension's OPWebViewCollectFieldsScript; prettified.", I've dug out the JS for both GenericPassword and OnePassword extensions to collect the file, in an effort to get OnePasswordExtension to work with LastPass. OnePassword works with the OnePasswordExtension with GenericPasswordExtension's js, but LastPass doesn't. Javascript of this size needs to be editable/inspectable. Are their any build instructions and sources for OPWebViewCollectFieldsScript and OPWebViewFillScript?", Created ', ', PR for onepassword-app-extension.', Contacted both LastPass and OnePassword to try and resolve this. The short term solution is either using `GenericPasswordExtension` or repackaging the NSExtensionItem for both LastPass (legacy API) and OnePassword & pwSafe (uses current API).', Comment on ', ', PR: ', Currently waiting on LastPass support. This will determine the next, finishing steps. Please can you review this but I'm not ready to merge.", Planning on testing and looking at this next week once I get my Find In Page branch up. Sounds like there's no rush since we're waiting on LastPass, but let me know if you need it reviewed sooner!", Comment on ', ', PR: ', Looks good. My only comment is about pinning the carthage dependency to a specific version. (1.6.4?) If that is possible.', Fixed nits and merged.' 
id=1237628	 'Created ', ', Pull request', Comment on ', ', Pull request Question in the PR, but nothing to stop a r+' 
id=1183329	 'Created ', ', Link to Github pull-request: ', We used to override the "should restore" logic in TestAppDelegate, but it looks like that got lost when FXCrashDetector landed. We have an IsTestRunning boolean in AppConstants, so we can just use that directly.', Comment on ', ', Link to Github pull-request: ', Looks good' 
id=1100607	 
id=1250300	 'Created ', ', Link to Github pull-request: ', master 0a9fbd0239d9d5ba8df226c60a1418b30fa2d22c' 
id=1261973	 "I'm going to mark this as WONTFIX because this has exact parity with Android. On Android we also just clear your data but we do not close any existing tabs." 
id=1283172	 '(In reply to Aaron Train :aaronmt from ', ) ', Whoops ignore that.', I think this is a duplicate of ', ?', *** This bug has been marked as a duplicate of ', ***' 
id=1130087	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1228290	 'Created ', ', Pull request Just fastlane integration, no snapshot stuff', Comment on ', ', Pull request My shell script-foo is pretty weak so I can't comment too much on that but the rest of it looks slick - just some nits. As a side note, I took a look into the build tools repo and there are some really great things in there like the enterprise uploader. I can't wait to get that going. Maybe we can use that as our nightly process and hook it up to the Mac mini.", Comment on ', ', Pull request It is a lot :-) Let's land it and start using it. Only way to iron out bugs and improve it is for us to use it. Do you need someone to create the build-tools repo or is that already happening?", :sarentz you can find the build tools repo here: ' 
id=1152336	 'Some hints at ', This has been fixed some time ago as part of the l10n import scripts.' 
id=1186481	 'Created ', Step2-OldURLsLostAsTabLoadAttempted.PNG -Click one of the tabs in your history. -User would expect the URL of the screenshot of the previously loaded URL to reload. -Instead the new tab loads with a bunch of tiles, but often not the specific URL you wanted shown as one of the tiles. Picture here depicts how new:tab overwrites the URL previously in the history for the tile clicked.', OK, this bug got confusing because of terminology. Here's how I'd rephrase: * Open multiple tabs. * Switch tabs to one (presumably one that's been zombified). * Observe that the home screen loads instead of the zombified tab, and is thumbnailed into the tab drawer.", Thanks Richard. That's a great write-up. This is intermittent. It seems to happen only to tabs that have been put in the background for 12 or more hours. I haven't seen it happen to tabs spawned inside one session.", Possibly related to session restore issues; will investigate.', I can't reproduce. Aaron, can you try?", Neither here. I tried simulating with a memory warning but on tap of the tab in the drawer I got the expected tab and not about:home (if I understand this bug correctly). This probably still happens but needs testing around the zombified state.', Renom'ing. Hopefully someone has working STR; can't block v1 otherwise. It's also worth noting that, for whatever reason, web view zombification (which is done by the OS) only happens when not attached to the debugger (i.e., running from Xcode).", I'll use the latest upgrade and see if it persists. Unless someone wants to look at my iPhone pre-update.", Build 32 I no longer see this bug anymore.' 
id=1173498	 
id=1112653	 "I'll knock this out tonight.", Created ', ', Pull req. WIP.', Comment on ', ', Pull req. This now passes tests. There's a little commented-out code, and I'm still thinking about the proper way to relate Profile and Account -- I don't think inheritance is really the right way to do it, but at least now we have a separate protocol, so this is a step in the right direction.", Comment on ', ', Pull req. Looks sane to me.', Gonna wait for a second opinion before I land this, 'cos it's a non-trivial change.", Comment on ', ', Pull req. Move fast, maybe break things. ' 
id=1132014	 'Created ', ', PR: ', (Stuffing this in Reading List, even though it's a Home Panel.)", Comment on ', ', PR: ', r=me with comments addressed.', *** ', has been marked as a duplicate of this bug. ***' 
id=1145431	 'This is still an issue in build 6', This should be fixed in newer builds.' 
id=1194556	 'Created ', ', Pull req.', Comment on ', ', Pull req. Code changes look good. Sorry for missing that <ClientPayload> error earlier - doesn't seem that ClientPayload isn't related to NSURLHTTPResponse in anyway." 
id=1191925	 'This is one of two things: * Contention. Sync does a lot of work. * A bug with the Sync Now button that causes it to block on the sync completing. That shouldn\'t be the case: profile.syncManager.syncEverything().uponQueue(dispatch_get_main_queue()) { result in if result.isSuccess { self.log.debug("Sync succeeded.") } else { self.log.debug("Sync failed.") } } dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 3 * Int64(NSEC_PER_SEC)), dispatch_get_main_queue(), { () -> Void in cell.textLabel?.attributedText = self.syncNowTitle cell.userInteractionEnabled = true }) but running with the debugger should make this obvious.', Will profile this to see what's happening on the main thread", Created ', ', ', Comment on ', ', ', Ship it!', Ship-ped!' 
id=1207179	 'As is tradition, I am unable to reproduce this kar bug. Tried with master and 1.1 on my iPhone 6. I can swipe back fine after reading an article. Logs/reports?', I have a bunch of Breakpad crashes. Let me see if I can find them on the server.', Reproduced just now. ', func webView(webView: WKWebView, didFinishNavigation navigation: WKNavigation!) { let tab: Browser! = tabManager webView tabManager.expireSnackbars() if let url = webView.URL where !ErrorPageHelper.isErrorPageURL(url) && !AboutUtils.isAboutHomeURL(url) { tab.lastExecutedTime = NSDate.now() postLocationChangeNotificationForTab(tab, navigation: navigation) fatal error: unexpectedly found nil while unwrapping an Optional value navigation is nil in TabManagerNavDelegate.webView:didFinishNavigation: (and thus in the BVC implementation).', I managed to repro that swiping *forward*, for the record.', Created ', ', Pull request', Verified: 2015-09-22 17:02:47.373 Warning BrowserViewController.swift:1517 webView(_:didFinishNavigation:) > Implicitly unwrapped optional navigation was nil. 2015-09-22 17:02:47.375 Debug Profile.swift:212 onLocationChange > Recording visit for ', with type 1.', (I groaned when I saw ', ) If you want me to grab any of my logs, let me know which ones (and where to find them), unless Richard thinks he is confident his STR is the same bug. Aaron - if you go to the telegraph (www.telegraph.co.uk), tap on the first article (surprise, it's about the VW scandal), let it load completely (the progress bar finishes) and then swipe back via gesture. Looks like it won't reproduce if the page didn't fully load - could you be doing that? Happens all the time on the bbc as well. Go to www.bbc.co.uk, tap on the first news article, let it load completely, then swipe back. Crash!", Comment on ', ', Pull request Is this an issue worth raising a radar over? Clearly WKNavigation is not supposed to be nil otherwise Apple wouldn't have specified the WKNavigationDelegate method to force unwrap it, but under certain circumstances it is, and the documentation never states that it should be treated as an optional despite the fact it might be. I was only able to replicate this on my iOS 8.4 device, never on an iOS9 one so it might be a backward compatibility issue, but that's still a bug IMHO.", rdar://22820815', *** ', has been marked as a duplicate of this bug. ***' 
id=1325672	 'Created ', ', PR Link', Merged: ' 
id=1232017	 'Created ', ', Pull request', Comment on ', ', Pull request Curious, what does 3DT do differently that causes this regression? Wish I had a 3DT device to play around with. Redirecting review to Steph since I think he wrote all this UIAppearance code and is more familiar with how it should work.', Comment on ', ', Pull request Code looks good to me. Using UIAppearance seems like a mistake for the theming stuff. Having to remove/re-add the URL and toolbars is dirty :(', :sleroux, :bnicholson Would we actually be better off looking at this properly and removing the use of UIAppearance for private tabs styling. This solution was pretty hacky, but the other solution was also pretty hacky as it meant overriding UIAppearance controlled component values, which then ignored subsequent UIAppearance changes. I could remove the UIAppearance setting stuff and just use the forceApplyTheme code to restyle everything on privacy mode change. Or the simplest solution for now, which was my original solution before I changed my mind, would be to just forceApplyTheme every time we change the theme. Which is also hacky.', I filed a bug for doing something other than UIAppearance here: ', Instead of using UIAppearance would we assign to the properties directly? If that's the case then it doesn't seem like a heavy lift to implement that as a fix for this bug as well.", Yeah, that's the way I imagine it. I'll start working on it....", Created ', ', Pull request So, I've removed UIAppearance and am setting values explicitly according to Theme. Would be interested in comments and ideas about how I can make the themeing better. I played around with a bunch of ideas around enums with values and describing the entire theme and getting each component to just pick it's values, but decided on having themeing handled wholly inside each component. Am not wedded to this solution if we think there is a better way to do it.", (In reply to Emily Toop (:fluffyemily) from ', ) ', If we're overhauling our theme design, maybe this would be a good time to try out NUI (", )? It's been on my todo list, and it has a promising set of features: it separates styles from the view implementations (like CSS), can change styles post-view-creation, etc...", I've used NUI in the past and had issues with perf when using the stylesheets and autolayout. Maybe things have changed since then? This was probably a year or two ago.", (In reply to Stephan Leroux :sleroux from ', ) ', Ah, OK. Too bad, it sounds really promising...but good to know someone has tried it already :)', Comment on ', ', Pull request Kinda sucks that we have to do all this manually. Would be very happy if we could find some styling framework (NUI or similar) that would allow us to separate the view from the styles.', So, I'm gonna go with this for this bug, but leave the UIAppearance removal issue live with comments on it about looking for a css-like styling alternative for the future" 
id=1178119	 "Moving to Firefox OS - General, because there's actually nothing on your side that you can do to fix this. I think it might be a duplicate of an existing bug about custom/per-locale CSS rules", Jet-lagged brain... Firefox for IOS, not Firefox OS.', Could you look into this? It seems to be seriously affected some locales.', Update: this is something that's hard to fix without new strings that are naturally in the desired case (which is how it should have been done to start with). We're past string freeze, so this'll ship for a few weeks in 1.0 and we'll fix it for 1.1. Sorry for the pain :/", Tried NSString.uppercaseStringWithLocale() as a quick fix but that has the exact same results as NSString.uppercaseString()', Stef, When you added uppercaseStringWithLocale, did you pass in NSLocale.currentLocale into the method? If that doesn't work, would the solution for this issue be to remove any 'force' capitalization (calls to uppcaseString() we make in our code and rely on the strings provided from localizers for this?", Yeah I tried uppercaseStringWithLocale(s, NSLocale.currentLocale()) and that did not give the expected results. Simply the whole string would be uppercased. I think it would be good if you could take another peek at that quickly. Maybe there is more to it. But if not then yeah lets just ask the localizers to do an uppercase version for those strings and get rid of uppercaseString() calls in our code.', Wait do we want just the first letter capitalized? For that we would use capitalizedStringWithLocale instead (', :).', No, this is TITLE CAPS. I tried a few variations in the playground, all of which were wrong. The only good solution is for localizers to do the work.', (In reply to Stephan Leroux :sleroux from ', ) ', Yes. Also consider that some locales simply don\'t like uppercase, and I have yet to find an usability study that confirms if using uppercase to convey meaning makes sense ("look, I\'m an header" or "I\'m more important than what\'s around me"). Just to give you a glance of the complexity using CSS ', Given Webkit's poor support, I'd be kind of surprised to find iOS in better shape.", Created ', ', ', Removing uppercaseString calls changes the following strings from being uppercased: L268 - HistoryPanel.swift NSLocalizedString("Today", comment: "History tableview section header") NSLocalizedString("Yesterday", comment: "History tableview section header") NSLocalizedString("Last week", comment: "History tableview section header") NSLocalizedString("Last month", comment: "History tableview section header") L159 - SearchSettingsTableViewController.swift NSLocalizedString("Default Search Engine", comment: "Title for default search engine settings section.") NSLocalizedString("Quick-search Engines", comment: "Title for quick-search engines settings section.") L815 - SettingsTableViewController NSLocalizedString("General", comment: "General settings section title") NSLocalizedString("Support", comment: "Support section title") NSLocalizedString("About", comment: "About settings section title") NSLocalizedString("Privacy", comment: "Privacy section title")', Does English still wants to use uppercase? In that case we need new strings like TODAY, YESTERDAY, etc. (without removing the existing one, per discussion on branching for v-whatever-the-next-version-is).', Robin's call.", No, we don't need to stick with all caps in English. Sentence case (Today, Yesterday, Last week, Last month) is fine.", Comment on ', ', ', Looks good to me.', As part of this fix, shouldn't we also change the strings to uppercase so that the localizers know that they need to uppercase their versions?", (In reply to Stefan Arentz :st3fan from ', ) ', I think we just agreed that English won't use uppercase (", ), so I don't see locales using uppercase either.", Merged', *** ', has been marked as a duplicate of this bug. ***' 
id=1310212	 'Created ', ', Github PR Link', - ReaderViewUITest: ReadingList related methods are commented, since KIFTest cannot swipe the list element. Also it only runs on iPad configuration - ReadingListTest: font change tests are commented - SearchTest: font change tests are commented, and Bing tests are comments out since location access request dialogs causes unresponsiveness with KIFTest - SessionRestoreTest disabled, since feeding JSON session data does not work. - TopsitesTests: font change methods are commented, and it only runs on iPad configuration - TopTabsTests: It only runs on iPad configuration - ViewMemoryLeakTests: disabled since getTopViewController() cannot return rootViewController anymore' 
id=1124489	 'What should the bundle identifier be? Should it change to Firefox or Fennec?', This has a good tutuorial on how to have different build flavours with different icons and bundle identifiers through the use of build configurations: ', (In reply to Aaron Raimist :aaronraimist from ', ) ', The bundle identifier will be either "org.mozilla.Fennec" or "org.mozilla.Firefox" depending on the build. These identifiers will be used for the nightly and release builds, respectively.', To non-mozilla people, please DO NOT register these names in Apple's developer console. These are app ids that we want to use. I'm changing this bug to private to prevent people from seeing this. I'm not behind my Work Mac at the moment so I can't login to the Dev Console so I can't see if we already registered these names or not. Again, please DO NOT REGISTER these. They need to exist in the Mozilla account only.", Here is the plan: THE FOLLOWING TWO ARE FOR DISTRIBUTION: In the App Store Dev Account: * org.mozilla.ios.Firefox - This build will be pushed to the App Store distribution In the Enterprise Dev Account: * com.mozilla.ios.Fennec - This build will be used for dogfooding distribution (Note the com. ... I think it is a good idea to have our internal enterprise stuff under a different namespace to avoid confusion) FOR DEVELOPING - MOZILLA DEVS ONLY Why is this different? Because we use keychain groups, shared storage and ios8 share extensions, you cannot run the app using the wildcard development provisioning profile. (Which is the common way for devs to run on their devices). So, we need a real provisioning profile, and a unique bundle identifier. * org.mozilla.ios.Fennec ($DEVNAME) So, the developer build will show up on your homescreen as for example "Fennec (sarentz)". The bundle ID will still be the same for every developer, but that is fine.', After chatting with :mfinkle org.mozilla.ios.Firefox - Release Channel (App Store) org.mozilla.ios.FirefoxBeta - Beta Channel (Most likely Testflight?) org.mozilla.ios.FennecAurora - Dogfooding Channel (Enterprise Account) org.mozilla.ios.Fennec - Development (For development via Xcode only*) *) Note that any registered developer can still build and run the app on their own device. This will require some configuration changes but we can document those to make it easier.', Sounds good to me', I am changing the title of this bug to simplify things a bit. It is a big task to move this forward because of the complexities of the xcode build system. So to start this bug will be to change the Release Build Configuration to generate Fennec Aurora builds for dogfooding. (This has been done and will be committed soon) I will file followup bugs to make similar changes for Development and App Store builds. The first, a Development build, has higher priority so i'll work on that as soon as the Fennec Aurora build changes are committed.", Created ', ', PR: ', TL;DR This patch includes a FennecAurora build configuration. This build configuration is used when you Archive a release build. If this is done on a build VM with the Enterprise certificates and provisioning profiles installed, the result is a build on the Fennec Aurora channel. The changes in this PR are all the result of flipping switches in Xcode. I have done my best to track down these changes in the UI to changes in the project files. They mostly matches, but ... it's complicated.", Just a quick note that besides the Fennec Aurora build, I can also still successfully run the app in the simulator and on the device.', Comment on ', ', PR: ', Haven't tried it out, but I'll take your word for it. Thanks for fixing this!", Merged with one additional commit for which I have no bug. Basically I think something was inconsistent with the project file, which Xcode corrected. ', Ill leave this open until I get a change to mark all the dependends.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1314358	 'As of now, deleting a highlight is done by long pressing to view the context menu from which the "Dismiss" option can be tapped. I feel it is more intuitive to slide to the left to delete a highlight. It\'s a gesture used for similar effect in many iOS apps like Mail, Whatsapp, iMessage and even Firefox\'s history items. So, may be something like, slide to the left to uncover options "More | Dismiss". On tapping "More", the context menu can then be displayed. Force slide to the left can "Dismiss", as can tapping the "Dismiss" option. However, for actions to be done on the top-sites, long press could be the only feasible option. Any thoughts, Robin?' 
id=1182173	 'Fixed with backout: ', .' 
id=1094358	 'The REST API has been deprecated.' 
id=1249190	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', If we land this feature, ', and ', are not necessary. @mpopova\uff0c please help us to send the illustrations to UX team. We strongly hope the feature can be land as soon as possible, because it is realy an important feature for browser in China.', Created ', home.html', Created ', China Localization(1).zip', Created ', Screenshot 2016-02-19 09.18.21.png Design Idea for home button and Customize Home Page', Discussing options with UX team to offer setting a homepage/startpage. Questions: Would you expect an option to open "Homepage" in a new tab? (I understand that is NOT a requirement based on ', ) How do you expect to access Homepage if "Home" button is not feasible (as described in your wireframes)?', If we open "Homepage" in a new tab, I think there are two issues should be resolved: 1. How to open history or bookmarks? 2. Homepage is a web page, is it necessary to show a homepage when adding a new tab?', So I understand that you do not want to load the home page every time in a new tab. What do you expect the experience would be: * When the user launches the app for the first time? * When the user launches the app subsequently (provided they have killed the app)? * When the user launches the app after an update (we currently open new tab with "What\'s New" content)? FYI - we are considering adding "Set a Homepage" option in the new Menu design (it has not been updated yet). (', )', (In reply to mpopova from ', ) ', If the homepage URL is not null, we should open the url at the first time, just like the fourth picture in "Screenshot 2016-02-19 09.18.21.png". ', In this case, I think that open a new tab, restore the opened tabs or reopen the homepage are all make sence. ', It is not necessary to open homepage in this case. ', It is really an awesome design, I have some questions about it: * The new tab will be changed\uff1f * What is its effect on this bug\uff1f', It is really an awesome design, I have some questions about it: * The new tab will be changed\uff1f No changes to new tab * What is its effect on this bug\uff1f Menu will have another option "Open Home page" (TBD)', Here is design of Home page (WIP): ', #', Chardis: Can you please confirm the portal page that should be set as default for China users?', (In reply to Maria Popova from ', ) ', Sure. We hope we can set ', to default. Thanks.', Thanks Chardis, Should we use the same portal on iPhone and iPad? Do you use this as a default page on desktop?', (In reply to Maria Popova from ', ) ', Yes, you can use the same portal on iPhone and iPad? We have another url(', ) for desktop, that url is just for mobile.', released on 5.0' 
id=1189991	 'Seems like cells are being reused and not being updated in the right places. Will take a look at after all my other stuff is finished (unless someone wants to take heh).', Created ', ', PR', Comment on ', ', PR Looks good!' 
id=1214680	 'Created ', newGoogle.zip updated Google search icon assets.', ab9970a' 
id=1140011	 'For space-constrained elements like buttons, it would be helpful to include maximum character available. Something like "MAX: 180 char" at the end of description.', Another comment about developer notes from a localizer: "Forward" could use a note - I assume here it just means "go forward to the next screen/men but if it\'s a verb/command (like "forward this email") it would be different. See also ', Created ', ', PR: ', Made sure all NSLocalizedString occurrences have a comment.', Comment on ', ', PR: ', Nice.' 
id=1162934	 'This should be fixed on master *** This bug has been marked as a duplicate of ', ***' 
id=1172065	 'Created ', quick-search-magnifying.zip', Also, note the removal of the vertical dividers, which were deemed unnecessary with the new square search icons.', Created ', ', ', Comment on ', ', ', LGTM', Some issues that surfaced while writing this patch will be addressed in ', .', Merged. ', *** ', has been marked as a duplicate of this bug. ***' 
id=1184239	 'Created ', ', Link to Github pull-request: ', Given all of the URL bar regressions, I think we should go back to how we did this before: use separate views for displaying and editing the page URL. Here\'s a mega-patch that does the following: * Moves the `AutocompleteTextField` back into `URLBarView`. * Creates an `inOverlayMode` variable to track whether we\'re in the panel overlay state. This is different from the `editing` state on a `UITextField` (we don\'t want to leave the mode just because the field loses focus). I decided to call it "overlay mode" instead of "editing mode" to avoid that confusion. * Removed lots of unneeded code, and lots of mini-refactorings. Overall, I\'m pretty happy with the changes, but sorry I didn\'t split this up more. I can try breaking this down into smaller commits if needed. **257 insertions(+), 398 deletions(-)** -- woohoo!', Note that this breaks some URL bar a11y (in particular, the a11y-enabled context menu that allows Paste & Go, etc.). I'll keep working on that, maybe as a separate follow-up if everything else looks OK.", When testing this out, note that this should fix all of the regressions blocking ', except for the domain autocomplete flicker.', Comment on ', ', Link to Github pull-request: ', Seems to work pretty well. Most of my PR comments were nits and naming stuff. Lets get it in and test(/write tests!).', Landed with comments addressed. ' 
id=1251367	 'Created ', ', PR' 
id=1109651	 'Fixed with ' 
id=1193396	 'Created ', ', Link to Github pull-request: ', Some quick data points, with the same screenshots: PNG: 1MB, 651ms 87kb, 320ms JPEG: 108kb, 88ms 32kb, 51ms Pretty huge data and perf wins. Setting ui-review? since this does affect the screenshot quality for the tab zoom animation when selecting a tab. To test this, open some tabs, then close and reopen the browser. All restored screenshots in the tab tray will then be from JPEGs.', Comment on ', ', Link to Github pull-request: ', Code is fine by me.', Comment on ', ', Link to Github pull-request: ', Thanks for the quick review!' 
id=1153846	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1205295	 'The alert "Unable to Download App" is a generic error message and can have various reasons, for example: * UDID is not included in the provisioning profile * The build was incorrectly signed or has broken entitlements * Device or iOS version is incompatible with the build * Device storage is full * Actual download error * App is over 50 MB and downloaded over a cellular connection * Date/time wrong on device Sometimes even a reboot fixes it, or resetting network settings in General > Settings. Check the device again.', <Error>: 0x10050c000 - MIBundle isApplicableToCurrentOSVersionWithError: : 333: The system version is lower than the minimum OS version specified for bundle at /private/var/mobile/Library/Caches/com.apple.mobile.installd.staging/temp.NsFgj2/extracted/Payload/Client.app. Have 8.1.3; need 8.2' 
id=1285944	 'Marking as WONTFIX as we are in the process of replacing this panel with a revised one from Activity Stream.' 
id=1166008	 
id=1242809	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1321726	 'Created ', ', PR Link', Merged: ' 
id=1134275	 'Created ', ', Pull request This leaves the glass effect over the status bar area. Works well on Yahoo.com. You can still see content scrolling there, which is a bit strange, but better than what we had (until we make a decision about what to do here).', Comment on ', ', Pull request LGTM' 
id=1254563	 'Created ', ', Pull request', merged 8d169ba7222c88463b8499d1c9f8fdb4e5a23432' 
id=1146366	 'Created ', ', Pull request Going to look into a kif test for this now...', Comment on ', ', Pull request I added a second commit here with a KIF test for this (and this button in general since we have no tests for it). Mind looking it over brian?', Comment on ', ', Pull request r=me, but I think there are a few things that need to be fixed. In particular, I think some of the accessibilityLabel changes should be reverted.' 
id=1277516	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1209692	 '+1 for bottom option.', Created ', ', PR', Created ', Screen Shot 2016-02-08 at 8.29.55 AM.png For whoever gets to it first!', Comment on ', ', PR Code looks good just one comment in the PR. Also Im assuming this is landing after we branch for 2.x since it has new strings?', Comment on ', Screen Shot 2016-02-08 at 8.29.55 AM.png One nit, add a comma after 'bookmark'. Sign in to get your tabs, bookmarks, and passwords from your other devices.", Comment on ', ', PR Removing r+ flag. See PR for additional comments.', Comment on ', ', PR Looks good!', See open dependency for text leaking outside the row' 
id=1158508	 'Btw. just the same problem with Switch Control (and the same proposed solution).', Pull request for SWTableViewCell: ', (Pull request with temporary fix for Firefox will (hopefully) follow tomorrow).', Created ', ', Pull request', Comment on ', ', Pull request Thank you for this contribution!' 
id=1291813	 'Created ', ', Pull request', Great. Thanks for getting to this so quick :)' 
id=1168503	 'Created ', ', Pull req.', Comment on ', ', Pull req. Nick reviewed on IRC.', 687f9d9' 
id=1233277	 'Created ', ', Link to Github pull-request: ', Closing this because it landed.', This did not land. ', landed, but didn't include the other strings in the same pull request. These strings still need to land for 2.0.", I decided I'd go ahead and land these on master. Nobody confirmed that we weren't actually string frozen yet, but that's the case as far as I can tell. a1cf994" 
id=1179863	 'Clarification: unfortunately we cannot open a web browser from this screen. Apple forbids that from Action Extensions. So if we cannot direct the user to SUMO then the best we can do is probably add an inline hint to tell the user to login via Settings -> Sign In.', Would this do it? You are not signed in to your Firefox Account Please open Firefox, go to Settings and sign in to continue.', Thank you Matej. Including these strings into the app now.', Created ', Screenshot 2015-07-02 15.22.06.png Screenshot for localizers' 
id=1257831	 "That control might also be localized, and show either non-latin numbers, or leads with % instead of the number or something like that. At least in turkish, a quick glance says that it's %50.", Created ', ', PR: ', This patch moves away from using the progress bar to find out of a page has loaded and instead waits for a specific element to appear. The element has to have an `aria-label` attached. For example, this is what one of our test pages now looks like: ``` <html> <head> <meta name="viewport" content="width=device-width"> </head> <body aria-label="body"> <a href="', " aria-label="link"><img src="image.png"></a> </body> </html> ``` We load it with: ``` loadWebPage("', ", waitForOtherElementWithAriaLabel: "body") ``` And you can reference the link with: ``` app.webViews.elementBoundByIndex(0).links "link" .pressForDuration(2.0) ``` (Future work, move the test pages into our repo too)', Comment on ', ', PR: ', All tests pass +1' 
id=1126488	 'Fixed with ' 
id=1137958	 'Created ', ', Pull request There's a lot of little parts here. I tried to pull it apart (mostly by file) in commits.", Comment on ', ', Pull request Comments in the PR.', Merged', I merged a follow up to fix the bottom toolbar: ' 
id=1188366	 'Created ', ', PR', Comment on ', ', PR Thank you, it looks much better, new link redirects to image with string visible.' 
id=1200239	 'Created ', ', ', Merged' 
id=1147920	 'Created ', ', PR: ' 
id=1162068	 'I will defer to Anthony, but some thoughts: ', Just the top part. ', Yes. ', Can probably still crossfade with the scroll progression, or scroll sideways (but then we have to deal with the arrows). Anthony?', Could we fade out the controls? I think we could make those more subtle as well. I'll have a go at that. But I like where this is sitting right now - we just have to do some tweaking a la different devices and some polish. Darrin and I can probably wrap up the polish? NI to not lose track of it", Yeah, let's get rid of the arrows. Fading in the text looks good too. Maybe it could be a bit quicker.", *** ', has been marked as a duplicate of this bug. ***', Steph can you help me get the Sign In button working? Everything else is there I think. ', Last time we spoke I mentioned moving the buttons out of the intro cards and have them on their own but that requires reworking the card views. I pushed a commit that's less invasive and subclasses the UIScrollView to allow touches to pass through where the signin button is so the cards can stay the same: ", Created ', ', ', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', ', LGTM!', I found a bug after landing this :-( The "Start Browsing" button does not seem to be hooked up. Tapping it does not dismiss the tour. Quick followup patch that we can attach to this bug?', Fixed in ', , merged. Thanks sleroux!', Sorry but we need to do one more followup. The button works on all pages of the tour except the last one. (This is a lesson for all of us to fully test all different flows of a UI. I probably only clicked the Start Browsing button on the first or second page :-/)', Oof. Looks like this was fixed in ', .' 
id=1224908	 'Created ', ', Pull Request', Comment on ', ', Pull Request LGTM', Since this has a patch, lets move this to 1.3. Note that we need to land this on both master and the 1.x branch.', Would it make sense to just wait until we make the cut and curate the bugs from the tracking-fxios list instead of uplifting it now?' 
id=1170749	 'Dupe :) *** This bug has been marked as a duplicate of ', ***', *** This bug has been marked as a duplicate of ', ***' 
id=1237578	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1183216	 'This is a five-minute fix, right?', ^ yes, I think she's just adding the icons now (helped with her with some placement code heh)" 
id=1100589	 
id=1129505	 'Created ', ', Link to Github pull-request: ' 
id=1151995	 'Pointing links to master for "Tap to reload (the) page" ', ', And adding a fresh one landed last night: "Not now". "Not now" ', "Not Now" ', Both they\'re marked as "button labels", I guess they should use a consistent case.', The second "Not Now" which is not in AuroraAppDelegate.swift will go away at one point I think when we move our Aurora builds also to TestFlight. Lets not spend too much time on it.', I fixed the "Tap to reload page" string at ' 
id=1191851	 'I installed build #28, loaded a bunch of sites, closed the browser, re-opened and installed build #29 and session restore worked and am not crashing on my iPad Air. Need more steps from the users.', Created ', crashlog.log Hitting this on my iPad Air after playing around, crash on startup', Created ', Client 2015-08-06, 1-51 PM.crash', I symbolicated some of the addresses and it looks like this is the culprit: 4 UIKit \t0x18a059b74 - UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering: + 9932 5 UIKit \t0x18a05c988 - UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering: + 352 6 Client \t0x1001757d4 Client.TopSitesPanel.(deleteOrUpdateSites in _C9DFE36B31E426C19626C23F17C1D229) (Client.TopSitesPanel)(Shared.Result<Storage.Cursor<Storage.Site>>, indexPath : ObjectiveC.NSIndexPath) -> () (in Client) (TopSitesPanel.swift:143) 7 Client \t0x1002a7ce8 Client.TopSitesPanel.((deleteHistoryTileForSite in _C9DFE36B31E426C19626C23F17C1D229) (Client.TopSitesPanel) -> (Storage.Site, atIndexPath : ObjectiveC.NSIndexPath) -> ()).(closure #1).(closure #1) (in Client) (TopSitesPanel.swift:129)', Looks like this crash is for deleting top sites and might not be related to the startup crash.', Here is what is output to my iPhone\'s console from the time I tap on the Fennec Aurora button and its termination: Aug 7 11:27:01 Erics-iPhone kernel 0 <Notice>: xpcproxy 319 Container: /private/var/mobile/Containers/Data/Application/B6ACBE26-0FB4-43F5-892C-3E63141182DF (sandbox) Aug 7 11:27:01 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:01 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:01 Erics-iPhone locationd 61 <Notice>: Gesture EnabledForTopCLient: 0, EnabledInDaemonSettings: 0 Aug 7 11:27:01 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone amfid 170 <Error>: SecTrustEvaluate leaf CriticalExtensions IssuerCommonName Aug 7 11:27:02 Erics-iPhone Client 319 <Error>: assertion failed: 12H143: libxpc.dylib + 71768 C9F3C08A-8A3B-3849-A905-D24911240853 : 0x7d Aug 7 11:27:02 Erics-iPhone Unknown 319 <Error>: Aug 7 11:27:02 Erics-iPhone iap2d 294 <Warning>: process org.mozilla.ios.FennecAurora is now running the foreground Aug 7 11:27:03 Erics-iPhone BTLEServer 130 <Notice>: (Note ) Received "Get Notification Attributes" command for notification #82 Aug 7 11:27:03 Erics-iPhone iap2d 294 <Warning>: process com.apple.WebKit.WebContent is now running the foreground Aug 7 11:27:03 Erics-iPhone iap2d 294 <Warning>: process com.apple.WebKit.Networking is now running the foreground Aug 7 11:27:04 Erics-iPhone backboardd 57 <Warning>: CoreAnimation: updates deferred for too long Aug 7 11:27:04 Erics-iPhone securityd 83 <Error>: securityd_xpc_dictionary_handler Client 319 copy_matching The operation couldn\u2019t be completed. (OSStatus error -50 - query missing class name) Aug 7 11:27:04 Erics-iPhone Client 319 <Error>: SecOSStatusWith error: -50 The operation couldn\u2019t be completed. (OSStatus error -50 - Remote error : The operation couldn\u201a\xc4\xf4t be completed. (OSStatus error -50 - query missing class name)) Aug 7 11:27:06 Erics-iPhone Client 319 <Error>: fatal error: Array index out of range Aug 7 11:27:06 Erics-iPhone mediaserverd 22 <Notice>: \'\' org.mozilla.ios.FennecAurora(pid = 319) setting DiscoveryMode = DiscoveryMode_None, currentDiscoveryMode = DiscoveryMode_None Aug 7 11:27:06 Erics-iPhone com.apple.xpc.launchd 1 (com.apple.WebKit.Networking.A594B6B0-BAF6-4F6D-A57C-7F273030F1D2 320 ) <Warning>: Service exited with abnormal code: 1 Aug 7 11:27:06 Erics-iPhone com.apple.xpc.launchd 1 (UIKitApplication:org.mozilla.ios.FennecAurora 0xe9cf 319 ) <Warning>: Service exited with abnormal code: 6 Aug 7 11:27:06 Erics-iPhone iap2d 294 <Warning>: process com.apple.WebKit.Networking is now terminated Aug 7 11:27:06 Erics-iPhone iap2d 294 <Warning>: process com.apple.WebKit.WebContent is now terminated Aug 7 11:27:06 Erics-iPhone SpringBoard 54 <Warning>: Application \'UIKitApplication:org.mozilla.ios.FennecAurora 0xe9cf \' exited voluntarily. Aug 7 11:27:06 Erics-iPhone assertiond 64 <Warning>: pid_suspend failed for <BKNewProcess: 0x125e16ba0; org.mozilla.ios.FennecAurora; pid: 319; hostpid: -1>: Unknown error: -1, Unknown error: -1 Aug 7 11:27:06 Erics-iPhone assertiond 64 <Warning>: Could not set priority of <BKNewProcess: 0x125e16ba0; org.mozilla.ios.FennecAurora; pid: 319; hostpid: -1> to 2, priority: No such process Aug 7 11:27:06 Erics-iPhone assertiond 64 <Warning>: Could not set priority of <BKNewProcess: 0x125e16ba0; org.mozilla.ios.FennecAurora; pid: 319; hostpid: -1> to 4096, priority: No such process Aug 7 11:27:06 Erics-iPhone iap2d 294 <Warning>: process org.mozilla.ios.FennecAurora is now terminated Aug 7 11:27:11 Erics-iPhone apsd 94 <Warning>: Silent Push: Deny app has no feature.', The parts that seem most interesting (I think the security stuff is unrelated, as part of some background task): Aug 7 11:27:02 Erics-iPhone Client 319 <Error>: assertion failed: 12H143: libxpc.dylib + 71768 C9F3C08A-8A3B-3849-A905-D24911240853 : 0x7d Aug 7 11:27:04 Erics-iPhone securityd 83 <Error>: securityd_xpc_dictionary_handler Client 319 copy_matching The operation couldn\u2019t be completed. (OSStatus error -50 - query missing class name) Aug 7 11:27:04 Erics-iPhone Client 319 <Error>: SecOSStatusWith error: -50 The operation couldn\u2019t be completed. (OSStatus error -50 - Remote error : The operation couldn\u201a\xc4\xf4t be completed. (OSStatus error -50 - query missing class name)) Aug 7 11:27:06 Erics-iPhone Client 319 <Error>: fatal error: Array index out of range', Hey Brian, I saw that since build 29 that yo ve merged in these two fixes related to session restore. ", ', It looks like the crash is coming from index out of range of an array during restoration. Do you think that these patches would address this issue? I know it's vague but we're having difficulties getting a proper crash report.", Hard to say. Looking at git blame, the fix in 1 did fix an array OOB crasher, but the line it fixed was introduced only the day before in 2 . So it doesn't look like this would be the same crasher since the code causing that crash wasn't even part of the last build. Do you think the symbols in ", are accurate? As you said in ', , it seems like they point to a top sites crash rather than a session restore crash. Emily did recently fix a top sites crasher (', ), though the STR I was using were only after an orientation change and weren't on startup. Maybe those fixes will help, though? 1 ", 2 ', Woke up this morning with Aurora crashing on launch for me. I'll take this bug and see if I can run the debugger on my build.", Alright - I managed to pull down a breakpad dump of the startup crash and translate it into a mac .crash file and was able to symbolicate the culprit: sleroux29795:startup2 sleroux$ xcrun atos -o Client.app/Client -arch arm64 -l 0x10009c000 0x10019c094 static Client.Browser.toTab (Client.Browser.Type)(Client.Browser) -> Storage.RemoteTab? (in Client) (Browser.swift:53) Looks like the issue is referencing the zero'th element of history items when populating RemoteTabs", Line in question: ', Created ', ', PR ', Comment on ', ', PR ', A fix has already been merged into master. See ', .', Resolving for now. Will retest in build 30.' 
id=1283142	 'Is this definitely incorrect behaviour? Safari does it too, and it seems like it might be related to selecting content \u2014\xa0if you long press on the background, you end up selecting the page, with the loupe appearing.', I'm assuming the flicker is the screen going dark and then coming back to light every tap? Because if so, Nathanael is right, I think, since I did try this on Safari as well and it does the same thing on Firefox (the whole flicker business seems to be Google's doing). Thus, I'm marking as WONTFIX until further notice!" 
id=1164167	 'We already update this when the shown tab "changes", but apparently showing this doesn\'t trigger those code paths? The interaction between about:home and the search pane and the wkwebview is... complex. The interaction with this toolbar is a bit too. I\'ll try to dump some links in here in a bit.', I am unable to replicate this. Unsetting the bookmark star either using the toolbar or swipe to delete in the bookmarks pane removes the highlighted star. Can you confirm this is no longer an issue - or let me know if I am looking at the wrong thing?', Yes. This is still problematic. Steps to Reproduce. i) Visit ', ii) Bookmark it, tap the star iii) Tap the address bar, go to the bookmarks pane, swipe/delete and hit cancel See the site is still bookmarked by the star icon on the bottom toolbar', Created ', ', Pull request', Comment on ', ', Pull request Yay!' 
id=1240998	 'Created ', ', Pull request', Sorry for the noise, updated the wrong bug.' 
id=1186263	 'First of all, I guess when I switched out the root view controller from BVC to a UINavigationController, it messed up the tests. I added a quick patch for that: ', Something strange is going on though - when I run the test, aboutHomeController doesn't get nil'ed out but when I run the app and put a breakpoint in the deinit method for HomePanelViewController, it gets called everytime which indicates that it is indeed getting released. Any idea on why it would not be nil'ing it out in the test case but does get nil'ed out when the app is run? Was wondering if yo ve seen this before with KIF.", Haven't seen this before, unfortunately. I'm pretty sure these tests were passing previously, though...I wonder if we'd be able to use git bisection to figure out which change broke them?", Still failing?', I fixed the failing ViewMemoryLeakTests when working on ', (see 1 & 2 ). Sorry, I didn't know there was a duplicate bug. I was able to work around the missing nilification by using an explicit autorelease pool. It appears to be a bug in KIF since it does not happen when deriving from XCTestCase. I reported a bug upstream (see 3 ). Stephan, maybe you could give my pull request another review (or close it in favor of your branch). 1 ", 2 ', 3 ', This is awesome! Thanks for fixing this bug - it was bother me for quite some time. I'll go ahead and mark this bug as a dupe of the other one. I looked over the PR and it looks good. *** This bug has been marked as a duplicate of ", ***' 
id=1131676	 '(The build is back on the Xcode server, but it is not correctly signed and will not start)', *** ', has been marked as a duplicate of this bug. ***', The app currently fails to install with the following error: "Application is missing the application-identifier entitlement" Full install log attached.', Created ', Device Log during Installation', ', I think the builds are fine now. But on both my iPad and iPhone I get: Feb 12 14:39:44 Stefans-iPad itunesstored 82 <Warning>: LoadExternalDownloadManifestOperation: Ignore manifest download, already have bundleID: org.mozilla.ios.Fennec I wonder if we need a special FennecNightly bundle identifier to avoid conflicts with normal Debug builds.', Related to the error in ', : ', ', ', Created ', ', PR: ', This patch changes the bundle identifier of our 'nightly' builds from org.mozilla.ios.Fennec to org.mozilla.ios.FennecNightly. This fixes a case where the app fails to install if you have previously run older builds. (Stefan & Robin are affected by this) Having separate bundle identifiers and app groups also allows you to have multiple channels on your device.", Comment on ', ', PR: ', Heh, I grabbed this review on GH before seeing my flag :) I did this locally already, so bombs away :)' 
id=1194414	 'This might be caused by ', , or another bug. Could you see if you have any error logs in about:sync-log on desktop?', Created ', log.txt Nothing recent, found errors only in older file from two weeks ago.', After signing out and in on all devices this works correctly again (second build 33).' 
id=1145393	 'Tracking? Not clear if intentional or not.', Pretty certain it's unintentional. Michael Verdi's video on the mailing list showed the statusbar switching to white-on-black when in the tab tray. As you can see in the screenshot, mine switched to white text, but didn't update the background color.", This appears to be resolved in build 6' 
id=1206901	 'Please note that fixed state of depended bugs means nothing in this bug context.', There is also similar bug about missing localization notes, ' 
id=1156405	 'rnewman: my plan for this is to surface the SyncAuthState directly to the Sync machine. The Sync auth state will expose an expired token on request, and also a valid token. The Account state machine will be advanced as necessary for both tokens. This inversion of control should allow an efficient authentication flow.', I *think* the Sync side of this is done; it requests an expired or not token: public class func getInfoCollections(authState: SyncAuthState, prefs: Prefs) -> Deferred<Result<InfoCollections>> { log.debug("Fetching info/collections in state machine.") let token = authState.token(NSDate.now(), canBeExpired: true) versus public class func toReady(authState: SyncAuthState, prefs: Prefs) -> ReadyDeferred { let token = authState.token(NSDate.now(), canBeExpired: false) Indeed, we\'re already mostly ready to take a TokenSource when advancing, which is the next step when we think we do need to sync: see advanceWithToken in InitialWithExpiredTokenAndInfo.', Created ', ', Link to Github pull-request: ', rnewman: I see one comment, which I'm happy to address. Add others as needed. I expect to morph remoteTimestamp into a local clock skew to have (more) accurate expired testing in a follow-up commit." 
id=1111837	 'Created ', ', Pull request', Oh I thought you r+ and merged it. Do you want me to remove it?', Comment on ', ', Pull request Heh, it's fine. I was just waiting for an answer to the single vs. multiple callbacks question. We can change it later if we change our minds." 
id=1167288	 'Created ', ', PR: ', Comment on ', ', PR: ', Let's file a follow-up to do this once, not N times.", Followup ' 
id=1231658	 'Created ', ', pull request', Comment on ', ', pull request Looks good - just one thing: Can you include the Bug # in the commit message as well so it reads: ', - Remove NSLocalizedString from zh-CN items in DefaultSuggestedSites.swift', Comment on ', ', pull request Looks good. Merged.', v1.x 1215f66' 
id=1310034	 'Hello Aniket. Thank you for submitting your issue. From my understanding i believe this is an iOS issue which probably cause the hang while to make the call. If this is the case this is not a Firefox issue and you should submit your issue to Apple: ', If this is not the case and the issue is Firefox for iOS related, can you please give more details about the issue (device, iOS version and Firefox version). Here are some guidelines to write a more accurate report: ' 
id=1178011	 'Created ', ', Pull Request', I was too fast making conclusions about reasons for why "Cancel" button is not available - the reason is actually different than the topTouchArea button. But the other reasons for making the topTouchArea are still valid.', Comment on ', ', Pull Request Note that the top bar button actually accomplishes two things: it shows the URL bar (as you mentioned), but it also scrolls the page to the top. I'm fine disabling this if you think it's not useful for accessibility, but just wanted to point out that it's not entirely redundant.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', The second one (scrolling to the top) seems to be possible to accomplish by the iOS standard of tapping the status bar (should work for any scroll view). Just tried with VoiceOver and it is the case even for the web view in Firefox. ', Yes, I think we want to disable it at this time, as it definitely does more harm than good.', Since we don't display the status bar in landscape mode, there isn't a way to trigger the scrollToTop action that the scrollView offers. I added a button to display the toolbars if they are scrolled away on landscape and another to trigger the scrollToTop action. I tried to replicate the behavior Safari has. Is there a way we can replicate that while still making it accessible?", (In reply to Stephan Leroux :sleroux from ', ) Thanks for the info, I did not notice these nuances before (nor the Safari behavior). I will try this out later today and comment.', (In reply to Boris Du\u0161ek from ', ) ', actually the day after tomorrow - today I am finished and tomorrow will be string-freeze changes for me. :-)', Comment on ', ', Pull Request Sorry Stephan for the huge delay. I tested with Safari. What it does is that it never hides the top bar in portrait when using VoiceOver. Firefox behaves the same, I guess this is due to the way VoiceOver interacts with the scroll view does not trigger the hiding behavior. In landscape, Safari hides the top bar even with VoiceOver (simply a matter of orientation). Firefox does not hide it just simple because of orientation. So here we are in better standing than Safari based purely on the hiding behavior of top tar being more conservative. Note that it is still possible to trigger hiding behavior with VoiceOver (using a workaround - double-tap and hold, then after sound move finger and it behaves like you were scrolling with one finger without VoiceOver). But I cannot imagine why VoiceOver users would want to do that (except perhaps only VoiceOver geeks just "playing around" and testing the UI to its limits). W.r.t. to scrolling to the top, there is always possibility to confirm any item in iOS status bar at the top. Having an accessible button for that directly in Firefox could be nice, but to tune this to behave as needed in all situations and the button to have the right dimensions and position etc., i.e. to polish it, would certainly require more time that is feasible, given other accessibility features I have in the pipeline, and given the approaching 1.0 freeze. (One more side note on parity Safari vs Firefox: in Firefox, tapping the top does both reveal the top bar and scroll to the top. In Safari, it does only reveal the top bar, which seems to me correct behavior, as revealing top bar and scrolling to top are 2 distinct things which I usually do not want to do at the same time.) So all in all, it seems a button to reveal top bar is not needed for VoiceOver, accessible button for scrolling can be considered as a low-priority feature for the future. I rebased the PR on the latest master and retested. Could you please consider my answer and possibly merge it (before v1.0 :-) ?', Comment on ', ', Pull Request Hey Boris, Thanks for the analytical investigation on this issue. Looks good - I'll merge this in today :)", Merged' 
id=1123809	 'Created ', ', Pull request Asking for feedback/review (i.e. you pick! :) )', Created ', ', Pull request. v2', Comment on ', ', Pull request. v2 Comments left on pull req; needs one more iteration on the visits schema, I think. Please file a follow-up to think about expiration!', Comment on ', ', Pull request. v2 Updated the PR. Using int for site ids. I'm not sure the best way to handle dates here, so I'm happy to get advice. NSTimerInterval's on iOS are doubles (in units of seconds), so that's what I'm storing now. There are plenty of other options if you want something different...", Comment on ', ', Pull request. v2 This looks good. My only big question is if we should turn the FavIcon detection into a UserScript and a BrowserHelper. (ReaderMode is a good example of something that runs on every page). I think that will speed things up since the script will be in the webview, ready to go, and it will also make the messaging nicer.', Argh. I was trying to remove the favicon code from this. It should be a separate PR I think. But if it slips in here and we're happy, I'm not going to force another review :) I also added an explicit ID column to the visits table now (but no guids!). I think at somepoint it would be nice to track a session of visits: Site A -> Site B -> Site C. We'll need IDs for something like that. Best to do it now I guess.", I landed this. Lets use follow ups for any cleanup we need.' 
id=1325315	 'Thanks for reporting this. Please edit the task summary to actually describe the "URL copy issue iniOS".', I assume this is with a blue-tooth keyboard connected to an iPhone or iPad? That would be incredibly odd that CMD-V works as intended but CMD-C doesn't.", Tested on iPad Air 2 (iOS 10.2) on Firefox 5.3(2). I have tested using a Bluetooth keyboard and can confirm that focusing on the URL bar and pressing cmd+C does not copy the URL. However when focusing on the URL bar and pressing cmd+A (to select the URL, after the selection handles are visible in the URL bar) and pressing cmd+C, the URL is correctly copied to pasteboard. See a video of this issue here: ', . Note: In Safari when focusing on the URL and hitting cmd+C the URL is copied to pasteboard.', *** This bug has been marked as a duplicate of ', ***' 
id=1266360	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1147024	 'Created ', ', PR: ', This patch fixes two bugs: * Fixes 1147024 - The Share To extension needs to use the shared application container * Fixes 1147084 - Hook up the Share To extension to the Reading List Provider Tested on both simulator and device.' 
id=1211218	 'a7c9508' 
id=1160399	 'Created ', ', Pull req. Tacking on test re-enablements on the end of the PR as I work on those.', Comment on ', ', Pull req. Comments (!) on GH.', Oof. 52 files changed, 1383 insertions(+), 1798 deletions(-)' 
id=1201109	 'My short-term hack for the bookmark star is to simply ignore desktop bookmarks altogether. This matches our revised Aha card of "it\'s just a tree in the home panel". I have this mostly done.', f5ad0aa Flipped around the dependency; Emily can finish up ', on top of this work, and we'll live with butt-ugly desktop bookmarks for now.", I manually verified that desktop bookmarks aren't deletable, but mobile bookmarks are. This seems to work fine without my editable changes that stick around in f0d3044aebf7ce150ae175f36e41ef7da7130d36, but we can cherry-pick that if necessary." 
id=1169836	 'Oops, wrong blocker.', Created ', ', PR ', Argh. There's a test for the placeholder... checking", (In reply to Wesley Johnston (:wesj) from ', ) ', Yeah, it's failing for me :)" 
id=1223890	 'Created ', ', Pull request The section header views are initially created with a zero width and height which conflicts with the required leading and trailing space around the title label. Reducing the priority of constraints kills the warnings on the console.', Comment on ', ', Pull request Thanks for fixing this! Just a couple comments in the PR.', Still see this on master', Thanks for reviewing Brian. I adapted the PR based on your comments. Is there anything else I should do?', Comment on ', ', Pull request Ah, this fell of my radar -- thanks for flagging me! Fix looks good to me :)' 
id=1149994	 'Created ', ', Pull Request', Comment on ', ', Pull Request Thanks :) Yay for a test!', Comment on ', ', Pull Request ' 
id=1214043	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1162739	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ' 
id=1281841	 'Created ', ', Pull request', Comment on ', ', Pull request Yup that would do it. Thanks for the fix!', master f0c5fe6ade9f5c6e8ec013a84d96ee60fcb7220d', v5.x 2ccbebb' 
id=1226571	 "FYI there's an open PR from a contributor that adds these - maybe we can work with that? ", Ah, thanks. That's certainly something we can base this work off, although :tecgirl's design doesn't call for the show bookmarks/reading list but adds some dynamic items instead.", Created ', ', Pull request', Comment on ', ', Pull request Code looks good - just some nits. Also left an issue I experienced with testing this in the simulator using the simulator plugin. Not sure if it's an actual bug or not though.", Comment on ', ', Pull request I believe I see some commentary on github about this, but when I tap on New Private Tab, the URLbar and tab counter UI is off, ', In a similar (yet inverted) fashion, this is what I see when tapping on New Tab: ', Additionally, the keyboard should be enabled for New Tab/New Private Tab, ready for the user to enter something. I will also add the correct assets for all instances, since I see we're just reusing what we have and they don't match. :)", Created ', ', Pull request Fixed a number of issues. Asking for another review as quite a bit has changed. 1. Fixed crash when opening tab from cold This needed to be done asynchronously otherwise BVC didn't actually exist when tab was created causing crash 2. Fixed failure to apply UIAppearanceTheme It seems that once you have applied UIAppearance values to a component, any changes made to those UIAppearance values will not be applied on those components until you remove and then re-add them to a view. Therefore I am forcibly applying UIAppearance themes when starting from a QuickAction. 3. Fixed crash when adding new tab with different mode when tab tray open Found a crasher whereby if you opened a tab in a different mode to the one currently in effect in the backgrounded app, while the app is in the TabTray then the collection view works out the incorrect number of cells and crashes when it doesn't match. Fixed by applying new theme just like a tap to the PB button when a collectionView already exists in the TabTray, rather than just updating the privateMode. 4. Feedback from @tecgirl and now new tabs open with the URL bar as first responder.", Also, still waiting for correct assets from :tecgirl for QuickActions', Comment on ', ', Pull request LGTM - just a nit. I can't seem to test it this morning in the simulator though (this simulator hack isn't working for some reason :( ) As a side note, seems like using the UIAppearance proxy for theming isn't the best choice for what we want. Looks like it's more for setting up a static theme at the beginning of the app whereas we're using it to dynamically update styles. I'll file a bug to investigate a more robust/dynamic way of theming.", Bug filed for themes: ', (In reply to Emily Toop (:fluffyemily) from ', ) ', I added these to the meta so as not to have to separate them: ', Comment on ', ', Pull request Great work, Emily! Note I dropped all the assets on the meta so they're in one place.", Comment on ', ', Pull request Added assets. Just need a quick +1 from you Robin.', Both added strings are missing localization notes, ' 
id=1238118	 'Created ', ', PR', Comment on ', ', PR See PR for comments.', This was not fixed for sure.', Created ', ', PR how are these?', Comment on ', ', PR Do you see "Sync Your Devices." on the screenshot behind ', (why link shortener btw)? It is better to describe UI element where translated string will be displayed. For example "Description on the introduction tour carousel slide" or "String spoken by assistive technology (like VoiceOver) stating on which page of the intro wizard we currently are. E.g. Introductory slide 1 of 3" or "Title on the introduction tour carousel slide". Screenshots are great when accurate but tend to become outdated easily.', Same question here: can someone summarize the current status of this bug? Which strings need a different comment, and if the current assignee is going to drive it to a conclusion?', As far as I can tell this changeset should have fixed the remaining issues ' 
id=1171657	 'Created ', ', Pull req.', Comment on ', ', Pull req. I don't have much comments on this code. Lets land it so that we can start testing it in the next build.", 9625e45' 
id=1183970	 'Created ', ', PR ', Comment on ', ', PR ', Test looks fine to me, but we have some infrastructure issues that could cause us some pain.', This works just fine when run as part of the larger suite on both iPhone and iPad so I say :+1:', This cannot land for 1.0 because of ', Fixing nits and adding 1.1 milestone to merge after string freeze!', Comment on ', ', PR ', ', ', <-- updated PR for v1.1', Created ', NEW PR', yo yo yo, is a branch ready for dis to merge?', Comment on ', NEW PR Made old patch obsolete as new patch fixes test case error', Created ', ', ', I pulled down Bryan\'s latest PR and both test cases were broken. Looks like the test relied on the page title on the top sites cell where now we show the domain. I fixed the delete top site test case by replacing the label it was looking for from "Page 1" -> "127.0.0.1" but I couldn\'t fix the basic UI test case because navigating to 127.0.0.1 will cause the error page to show since it\'s not a valid page. I\'ve removed that test case for now and kept the deletion one. Thoughts?', Comment on ', ', ', LGTM -- I hesitated to land this before because I wasn't sure how the NSLocalizedString change here would affect l10n exports. Takeaway from IRC was that this should land on master and the string itself should be uplifted to the v1.0 branch, but please double-check that that's correct.", No point in churning l10n strings for a test; bumping this to 1.1.', Sounds good - ya I was only going to merge this into master (1.1) and not port it back since it's just a test.", Merged' 
id=1109641	 "Buttons are private so can't be disabled from outside the toolbar class/object. Should we make them public? Or should we create 2 separate methods in toolbar for disabling each button? Also when should these methods be triggered? Should we use WKNavigationDelegate and may be trigger these methods from - webView:didCommitNavigation: - here we check if these is anything in the list, if there isn't, then we disable?", Brainstorming: It doesn't look like we have any code that tracks the WKWebView navigation progress yet. I assume the BrowserViewController could do that. The BrowserToolbar should probably have a method that allows the controller to update it's state after a page loads (or fails to load). We'll need to update the URL as well, for example. The state we pass into that BrowserToolbar method should have enough information for the toolbar to set the state of the buttons.", Using KVO you can watch the WKWebView's canGoBack and canGoForward properties and update the UI accordingly.", I like the KVO idea, it's similar to how the progress bar is being tracked. In addition to the KVO, you have to take into account when switching tabs now. So update the UI accordingly whenever a new tab is switched to since you are dealing with a new webView. This I would bet be made in -- didSelectedTabChange", Somebody already submitted a PR for it - ', . Haven't had time to look at it though.", Created ', ', Pull request apbendi has a PR for this. We can't use KVO directly as suggested in ", since canGoBack/canGoForward are not KVO-compliant properties. I suggest updating the back/forward state in webViewDidStartLoad, when a page begins loading.', Comment on ', ', Pull request Merged awhile ago. Looks like I forgot to update this bug.' 
id=1193067	 'Polish-plusing for initial release.', Resolved in ' 
id=1272258	 'Marking as dupe for 1271721 *** This bug has been marked as a duplicate of ', ***' 
id=1205047	 'Ryan, are we concerned about losing the context of what email/username is being saved? Perhaps "Save user@domain for domain.org?"', Yes, I erred on having too little info perhaps. Looking at a real world example: * Save ', for tumblr.com? This still seems too lean. Most verbose (and so the user knows it's Firefox talking and not the website) * Would you like Firefox to save the login of ", for tumblr.com? Quite an eyeful. Your turn!', Or\u2026 * Save ', login for tumblr.com? * Save Login * Don\u2019t Save', What about (subtle change)\u2026 * Save login ', for tumblr.com? * Save Login * Don\u2019t Save', Yes.', Created ', ', Patch for ', Here is a patch for this bug. Let me know if this looks correct. The strings here: ', should also be updated. Maybe: * Update login ', for tumblr.com? and * Update login for tumblr.com? with buttons * Don't Save * Update", Created ', With Patch: Simulator Screen Shot Oct 10, 2015, 8.39.55 PM.png', Sure. I\'d like to see a curly quote on "Don\u2019t" if possible (am thinking Bugzilla is gonna eat that character). What does it say when there is no username and it\'s just a password?', (In reply to Ryan Feeley :rfeeley from ', ) ', I\'ll update that button to say "Don\u2019t Save". With a username the text could be: * Update login ', for tumblr.com? Without a username the text could be: * Update login for tumblr.com? The word "login" could also be replaced with "password".', Yeah, ideally we use "password" whenever username is not present (or removed).', In conclusion: * Save login ', for tumblr.com? * Save password for tumblr.com? * Update login ', for tumblr.com? * Update password for tumblr.com?', Comment on ', ', Patch for ', There shouldn\'t be a "Not now", just a "Don\u2019t save". No?', Hey Aaron, Looks like there was a patch for this but it never got reviewed. Are you still interested in contributing the patch back into the mainline repo? If so, could you open a pull request to ', ?', Created ', ', Link to Github pull-request: ', Sorry about the delay. How does this patch look?', (In reply to aaronraimist from ', ) ', Also I accidentally created a new Bugzilla account. This patch is from me.', Brian, would it make sense to change to this use the new value-based localization stuff?', Yeah, we might as well add IDs if we\'re changing the strings anyway. Aaron, do you mind adding the "value" parameter to each of the NSLocalizedStrings you changed here? See ', for details/background (I'll eventually add this to the README once we have all the details sorted out).", OK, I have updated the pull request to add keys to all of the strings in LoginsHelper.swift. Let me know if there is anything else that should be changed.', Thanks for updating the PR Aaron! Looks good!', master 7320ae27304577f27451c182266cb4ec52324103', This bug removes several strings (7 if I counted them correctly) on master, which will become v5.0 If these strings are used in v4.0 as I think, we can't remove them until v5.x has branched. Basically we need to keep strings around for one more cycle when we remove a feature, and periodically clean up these extra strings. ", :flod, is this because we export our strings from master branch and not v4.x? If so, is there a reason why we need to export from master (which should be containing 5.0 work anyways) instead of v4.x?', It doesn\'t matter from where we extract strings, the problem is that we only have one repository for strings, and that\'s "by design" (we\'re even trying to move Firefox* to that kind of structure). We don\'t want to start messing with branches (no external tools support), or tags/releases (basically no chance to improve your localization within a cycle). Hopefully a practical example can be clearer. Current situation: master is 5.0, we have a branch with 4.0, l10n-repo is 4.0. Current release in App Store is 3.0. Fast forward 6 weeks: master is 6.0, we have a branch with 5.0, l10n-repo is still 4.0 because we haven\'t extracted strings yet. Current release in App Store is 4.0, localizers start working on 5.0. Fast forward 2 more weeks: we extract strings for 5.0. Master is still 6.0, l10n-repo now has 5.0 strings, current release in App Store is still 4.0. How do you release a 4.1 (if needed), given that the l10n-repo is missing a bunch of strings you removed in the 5.x development cycle? The only alternative to keeping strings around is to "freeze" l10n for 6 weeks: once you release v4.0, you store somewhere else the strings for that release and use them instead of the standard l10n-repo. The downside is that we lose any chance to improve localization in a minor release, and it complicates the build system.', ', Isn't that misleading? From reading the string I would expect old username to be presented and updated with just entered data (not listed) or password to be updated for presented login.", Yes it does seem to be a bit misleading. Only the password for the given username will be updated, not the username which the comment implies. I think something along the lines of: 'Prompt for updating a login. The first parameter is the username for which the password will be updated for. The second parameter is the hostname of the site.", I would also point out a bit of inconsistency in the new strings (didn't look at them yet) Save login %1$@ for %2$@? Update login for %1$@ on %2$@?", Created ', ', Github PR ', Here's the patch to re-add the old strings to OldStrings.swift so they are included as part of the l10n export.", Created ', ', Link to Github pull-request: ', :flod, Fixed that issue with the for vs on. :stef, Does this look better? I used :sleroux's wording.", Comment on ', ', Link to Github pull-request: ', The change in this case is minimal. Since we've started using proper string IDs, for bigger changes we'll need to start following these guidelines ", Comment on ', ', Link to Github pull-request: ', (In reply to Aaron Raimist :aaronraimist from ', ) ', Yes and the "for vs on" change makes it even better. Thank you.' 
id=1285245	 "I can't reproduce this on my iPhone 6 (5.0 RC #2). Long-tapping on the right column items (e.g, Tassimo) yields a context-menu with 'Open in New|Private Tab', 'Copy|Share Link', and 'Save|Copy Image'. This works for me.", This issue was reproduced on iPhone 6 Plus (9.1) and iPhone 6 (9.2.1). The issue was also tested on iPhone 4 S (9.3.2) and iPhone 6 Plus (9.3.2) and could not be reproduced on these iOS versions.' 
id=1153333	 'Might it make sense to have one bug with all the strings missing comments? It would probably be easier for devs. I have a similar one for "inconsistent" strings, and I\'m adding them there until it\'s fixed.', Sure! I will use this one.', No note for NSLocationWhenInUseUsageDescription', *** ', has been marked as a duplicate of this bug. ***', Also for "Double tap and hold to open history", "Tap to reload the page", "Tap to stop loading the page"', Whole Client/Intro.strings file: "Browse the web with multiple tabs just like you\u2019re used to.", "Connect to Firefox Accounts anywhere you want.", "Personalize your Firefox just the way you\u2019d like in the Settings area.", "Sign in to Firefox", "Start Browsing"', Stefan, please do not translate those yet. I have left those out on purpose from the last export because the text is not ready yet.', Sorry, they are translated already (and not only in pl).', (In reply to Stefan Plewako :stef from ', ) ', The only locales affected are it and pl (translating from XCode directly), and I think that we both know that we might be translating stuff not really final (like the other string with "\ " in it).', (In reply to Francesco Lodolo :flod (UTC+2) from ', ) ', Just to clarify, the comment was addressed to st3fan. Good to remember that we need localization comments when the strings are final ;-)', (In reply to Francesco Lodolo :flod (UTC+2) from ', ) Right\u2026 if the strings will get an update then we should catch that with no problem but that shouldn\'t mean that landing "not ready" stuff without comment about what it currently represents, is OK. The best place to warn that the text will change would be string comment/note\u2026', Fixed with ', If there are issues outside of the missing comment, please file separate bugs.', I still see comments missing for "Double tap and hold to open history" and "Tap to stop loading the page"', "Double tap and hold to open history" is commented out because we removed the \'open history\' functionality for v1. The second one I fixed in ', (In reply to Stefan Arentz :st3fan from ', ) ', What exactly do you mean by that?', (In reply to Stefan Plewako :stef from ', ) ', The string is literally commented out in the code ', But apparently the export process doesn't care ", Another one just added: ', I'm reopening since it was never properly fixed and new ones are arriving\u2026", ShortcutItemTitleNewPrivateTab "New Private Tab" ShortcutItemTitleNewTab "New Tab"', There is also similar bug about bad and wrong localization notes, ', At this point (we're not at 1.0 anymore), let's file individual bugs with remaining actionable items and block 1277326 (unless they're already covered by the existing dependencies)." 
id=1229129	 'Looks like the highlight is created by WKWebView automatically when we add a mouseup handler to an element. We use a mouseup handler as a workaround for context menu interactions with VoiceOver, so one fix could be to add that handler only if VoiceOver is enabled.', Hi, I'd like to work on this bug. Can I have more guidance and info as to how to proceed please?", Hi, EM -- thanks for looking into this! Due to ', , we need a mouseup listener at 1 to prevent the context menu from interfering with voiceover. Unfortunately, it seems like the presence of a mouseup listener is what causes *this* bug. The solution I'm proposing is to add this mouseup listener only when VoiceOver is enabled (that is, when it's needed). In order to do that, we'll need to listen for VoiceOver events to get their status. It looks like we can detect VoiceOver's state using UIAccessibilityVoiceOverStatusChanged 2 . If you add a listener for that event in ContextMenuHelper 3 , you can send a message to the content script (ContextMenu.js) to update a boolean flag that you create to hold this state. Finally, you can wrap the call at 1 with an if condition using this boolean, so that we only add the mouseup listener if VoiceOver is enabled. Note that this won't be the entire solution; we'll also need a way to keep this boolean in sync with the existing VoiceOver state every time a new page is loaded. For this part, you can send a message from ContextMenu.js simply to signal that the page has loaded; ContextMenuHelper can then respond with a message of its own with the VoiceOver state. To verify that your fix works, see the steps to reproduce in ", ; with the bug fixed, the tap highlight should be gone with VoiceOver disabled. Hopefully that's enough to get you started. Let me know if anything is unclear or if you have other questions! 1 ", 2 ', 3 ', Tried to reproduce this, I don't see a full paragraph highlight, however it is difficult to unselect a highlighted word. Tested on NYTimes on one of the front-page articles using latest TestFlight builds.", Another option we have is to simply disable the custom context menu altogether for VoiceOver users like we did in ', . This whole mouseup mess is a big hack, and the fix mentioned in ', would be a bigger hack on top of that, so I think removing it would be the safer option. If we want to go that route, we should remove the OS version check on this line: ', We can then remove the mouseup listener in ContextMenu.js, which is the source of this bug.', Created ', ', PR', Lets do this. But also please file a followup bug to fix this properly or at least to make sure we remember this change?', Comment on ', ', PR Looks good!' 
id=1165586	 "I can't reproduce this on master, maybe fixed via ", ? Do you still see this?', Is it in build 17? (I haven't upgraded yet)", I can reproduce on build 17.', I can reproduce on build 19.', What happens is the panning is x2 faster, because it's the sum of the urlbar translation and the webview scroll. To fix this, we could disable scrolling the webview while the urlbar appears/disappears.", Created ', ', PR ', When the user used to scroll, the header would move along with the page content which caused a weird parallax effect and the scroll speed to increase because the web view is being enlarged while also scrolling. For better control over the scrolling, I add our own pan gesture handler on top of the web view's and have them run simultaneously so I can force the scrollView's contentOffset to adjust for the delta change in the frame height. I also moved all of the scrolling behavior code into it's own controller object to clean up the BVC.", Hold off a bit on reviewing this - caught a couple issues last night and will update this morning.', I hit a pretty nasty layout bug (', ) while testing this, but that bug is reproducible on master, so this probably isn't related. I hit another less severe issue: 1) Go to test.com 2) Double-tap to zoom 3) Swipe left and right to overscroll the sides of the page Following these steps, the overscroll causes the page to flicker. Another approach that may be worth considering would be disabling the web scroll view as Karim mentioned in ", . In particular, we might be able to use shouldRecognizeSimultaneouslyWithGestureRecognizer/shouldBeRequiredToFailByGestureRecognizer to disable the OS panning while scrolling the toolbar, similar to what we do at 1 . I wonder if that approach might simplify things? 1 ', Hm not sure what could be causing that over scroll issue. I'm having a hard time reproducing it. As for the scrolling, I tried to use the delegate method for failing shouldBeRequiredToFailByGestureRecognizer and also the gesture's requireGestureRecognizerToFail but can't seem to get it to work. The problem I'm having is if I have the scrollView's panGesture only activate when our gesture fails, there is no way to go back. For example, while we're scrolling the headers, we can prevent the scroll view from scrolling. Then after we transition our gesture to a failed state (by setting enabled to false), we can let the scroll view scroll. If the user tries to scroll back up, causing the headers to animate in, there's no way to re-activate our gesture in a continuous way without lifting our finger off to restart the touch events. We could create a custom gesture recognizer and have more control over the toggling of the gesture states but the only way we can turn off the scrollView's panGestureRecognizer is by using the enabled flag. AFAIK, once we disabled it using enabled = false, there's no way to turn it back on and receive touch events from the same continuous touch. Let me know if you have any ideas -- I've been racking my brain on this one for a good while now.", Comment on ', ', PR ', Hm, I see what you mean. This PR works for me! I'm able to reproduce the flickering side overscrolling glitch fairly reliably with the given STR, so I wish I could be more helpful. Not sure what's going on at first glance.", I'm going to merge this in since it fixes the panning speed issue but I have a WIP patch that will resolve some of the flickering and jumping issues from this bug: ", .', Merged.' 
id=1175875	 'Marking as a dupe *** This bug has been marked as a duplicate of ', ***' 
id=1242481	 '48 locales (including en-US) are good to ship. ' 
id=1254324	 'This has been resolved with: ', Doesn't look like so since the issue is present also in just released TestFlight beta 3.0 (4).", Looks fixed in TestFlight beta 3.0 (6).' 
id=1120523	 'Part of ' 
id=1195986	 'Created ', ', ', Comment on ', ', ', This patch also addresses ', Merged.' 
id=1145971	 'This is the same Safari and Firefox on Android. If you want to copy the URL, we could make it easier. On Android we support a long-press on the URL toolbar, without going into edit mode.', hah!! Ok, you got me on this one - I never noticed that behavior in safari because I use chrome in iOS.. Just tried and sure enough the behavior does match that of safari's. So, feel free to close this out - the long press copy would be a cool feature though.", Created ', ', Pull Request Implemented the Copy Address, Paste & Go, and Paste behaviour as found in Firefox for Android.', Nominating this bug because it looks Matthew is very close to finishing this. But :darrin should probably have the final word on this UX-wise?', Just checked out this PR and it feels pretty good. Considering we have (most of) a patch I'm happy to include this in v1. We may want to finesse this interaction down the road, but I think its a nice feature to have included as is. ux+ from me ;)", Comment on ', ', Pull Request Looks good, though the iPad crasher should be fixed before we can merge.', Comment on ', ', Pull Request Flagging for review since the PR was updated.', Comment on ', ', Pull Request Just noticed that Darrin/Stefan are marked as mentors here, and Stefan has given some feedback already in the PR, so flipping review to him.', Comment on ', ', Pull Request PR has been squashed and rebased onto master, ready to be landed (hopefully...first time I have done this, so let me know if anything's wrong!).", Merged.' 
id=1158020	 'Created ', ', PR ', This code is a bit... messy. Didn't show up until I tried to do more. I need to write some tests here, but I'm out for a few days. Figured I'd put this up.", Argh, this review request never made it into my inbox :/ My rnewman/db branch has deletion (by URL -- i.e., unstar), parenting, mobile bookmarks, folders, and such, and also has killed BookmarksSqlite, so this PR might be obsolete :( Sorry!', I'm gonna grab what I can out of this on top of the bleeding edge.", Comment on ', ', PR ', UI stuff is rebased into ', , and will land with that.', This landed, but I actually can't see anything on the bookmarks panel anymore." 
id=1209097	 '*** ', has been marked as a duplicate of this bug. ***', This ticket was created in response to ', . While there is a prompt, it's not very informative. Letting the user know exactly what will be cleared, or providing options that can be selected (with some auto-selected), would be ideal. ", may possibly provide this.', Given the way sync works and the fact that this could also delete data on other devices, I think this is a good idea. We just need to nail down the copy, but something like this could work (if its accurate)? "This will delete data across any synced device and cannot be undone." ', What gets wiped on other devices depends on what yo ve opted into or out of syncing. So yes, we need to offer caution but also be precise. If Sync is set up (profile.hasAccount(), not profile.hasSyncAbleAccount()), then: If any of the selected items are things that we are able to sync (that is, we don't care if yo re only clearing cookies), then: This action could delete data from your synced devices and cannot be undone. I wouldn't say no to a Learn More link to explain how to figure out what to do. Otherwise: This action cannot be undone. If we're able to dig into the account object to figure out what the user has opted in to syncing (a fast path to get a Scratchpad's meta/global) then we can do a couple of smarter things: This action cannot be undone. (Not syncing any things we're deleting) This action will delete data from your synced devices. (More definite than 'could') or specific types This action will delete history and passwords from your synced devices. or even This action will delete 1,234 history items from your synced devices.", Some other bug implemented a yield on clear private data for history only when a connected account is detected', So, we seem to have a few scenarios that may require notification to the user here. Here are some suggestions for those scenarios. I'd be grateful for some guidance here. 1. We are clearing private data options that include History with a Firefox account. We have this currently. - title: Remove history from your Firefox Account? - message: History will be removed from all your connected devices. This cannot be undone. 2. We are clearing all private data options without a FxA - title: Clear Everything - message: Are you sure you want to clear all of your data? This will also close all open tabs and cannot be undone 3. We are clearing selected (but not all) private data that does not include history (regardless of FxA) - title: Clear Private Data - message: Are you sure you want to clear your selected private data? This cannot be undone. or, do we need to do the general warning for every Private Data clear and an extra one if yo re clearing history with an FxA?", A general warning should suffice, with an additional mention of history if yo re signed in. This action will clear all of your private data. It cannot be undone. CANCEL OK} This action will clear all of your private data, including history from your synced devices. CANCEL OK}", Created ', ', Pull request', Created linked bug for generating L10n snapshot tests for this. ', Comment on ', ', Pull request Looks good just some nits!', Comment on ', ', Pull request Emily, I'm not seeing updating strings\u2026 What I'm seeing SO: Clear Private Data This action will clear all of your private data. It cannot be undone. SI: Remove history from your Firefox Account? This action will clear all of you private data, including history from all of your synced devices. It cannot be undone.", Are they not the updated strings? Originally the no account case didn't exist and the text is as you specified, but I added the 'Clear Private Data' title. The with account case is present too. I changed the main body text as requested (but added the ' This cannot be undone' as I felt it was important) but haven't updated the title text from what it was before. If the title text should be different, please let me know what the title text should be. Or should I remove the title text completely? I've updated the bug again removing the titles and cleaning the wording.", Emily, I now see the updated strings. One nit; change the weight to normal. It seems to be using the bold title weight.', :tecgirl - amended the font weight.' 
id=1168429	 'I think we could probably live with this (IMO), but tracking for now.', Created ', ', PR ', Added a small patch for this where we disable toolbar scrolling while the user is zooming so the toolbars don't get all janky.", Closing this patch and bug and marking it as a duplicate of ', as this issue is a sub issue of that issue.', *** This bug has been marked as a duplicate of ', ***' 
id=1222848	 'As discussed in ', there should be no description text in the bookmark cell, because users might confuse it with the history items. But since you can have multiple bookmarks from the same host, it can happen that you have seemingly multiple identical items even though they differ. That's why I would suggest to allow a user to edit the title of a bookmark. An example implementation (without tests and localization) can be found in the attached PR and a short demonstration in this GIF : ", Created ', ', Pull request', Comment on ', ', Pull request From an experience perspective, I don't know if we want to do this yet. We don't support any kind of editing other than deletion, and I would speculate that users want to organize or reorder bookmarks more than they want to rename them. I'll need to look at this from a data model perspective. I'm about to bitrot the heck out of anything that writes to bookmark storage.", Would you suggest that we do anything in relation to modifying bookmarks? Or should it just be like it is?', I don't personally have a strong opinion either way. I value Robin's and Maria's opinions more.", Ok, then let's wait for their replies", Comment on ', ', Pull request I can see where this could be helpful, especially with long sub-domain titles and the examples yo ve provided. Though currently this only works on locally saved Bookmarks\u2014not synced. Not being able to edit all may cause confusion, and further confusion because they're unable to see mobile bookmarks on Desktop. I think we should hold off on it until bi-directional sync is fully in place so as not to confuse the user as to what they can/can not edit. I will + for the local instance which works and looks good. You might want to lighten the color on URL in the modal and restrict the URL character length (with truncation) so it doesn't end up taking up the whole viewport (a use-case, but we've seen it happen!).", Hey Robin, thanks a lot for the reply. I implemented your UI tips and here is what it would look like ', I used the already existing ellipsize() String extension out of convenience, if we want a trailing ... I would add another method to that extension. Should I write (add) tests to UITests/BookmarkingTests and ClientTests/TestBookmarks? I would also really like to know how you handle the localization of all your Strings? Maybe you can give me a link where I can read something about how it works for this project.', (In reply to alx91 from ', ) ', Tests are fantastic and always appreciated. ', We use NSLocalizedString. See, e.g., ', (In reply to Richard Newman :rnewman from ', ) ', I meant who is providing you with the Strings? And what is the workflow when you have new Strings to be translated.', (In reply to alx91 from ', ) ', Sometimes engineers; after all, we communicate with words all day, so some of us are pretty good at writing strings (at least a first stab). Often strings come from UX folk like Robin; they think about the whole experience, and typically have a good understanding of platform conventions. Very often it's a combination of an engineer like me and a designer like Robin; some such combinations work very well indeed. In particularly thorny cases, we ask Matej, our resident wordsmith, for his opinion. In all cases we get multiple eyes to make sure we come up with a good option! Strings land in the repo when we're not string-frozen. Localizers translate using tools against exports from the repo, and we import current strings each time we do a build. The only way this affects coding contributors, for the most part, is to delay the landing of some PRs until we're out of a pre-release string freeze.", Thank you, that is very interesting :)', *** ', has been marked as a duplicate of this bug. ***', is not an exact duplicate of this bug. I found this bug, as I mentioned. I argue there that both title and URL should be editable.', Did you see my implementation approach? How would you add the feature of editing the url? We might have a problem when the page doesn't have a title and the url is inferred from the url. Would changing the url affect the title in the same way?", (In reply to alx91 from ', ) ', I'm a user, not a developer. I just want to change title and/or URL of any bookmark I've created, using the keyboard. There is no reason to cross-check or validate either. It's essential functionality, IMO. One reason - though not the main one - is to create bookmarklets. I use these a lot. So do not validate the scheme.", I added some UI Tests for editing a bookmark title alongside checks for empty/whitespace-only strings. ', What do you think?', I could also try to help solving the other issues that my PR depends on, but it would be cool to get some feedback so I could implement suggestions and improvements first. Thanks!', Comment on ', ', Pull request Emily, could you take a look at this, please?', Comment on ', ', Pull request The overall implementation is good. Just need to be a bit more careful with force unwrapping things and localizing all the strings. It works well and the test is nice and thorough. Left a few nits in the PR.', *** This bug has been marked as a duplicate of ', ***' 
id=1126092	 "For 1 you can implement a BrowserHelper like the ReaderMode is. That gives you a clear API to inject some JS in the page and then probably at onPageLoad scan the page for icons. I just don't know if we can get to the icon image *contents* without loading them again.", Fixed in ' 
id=1233034	 'Was 2.0+, not happening. Needs a new target.', Created ', alexa-top5-iOS.zip Amazon Facebook Twitter YouTube Wikipedia', There are not other changes to the logic for displaying top sites', I made this bug dependent on 1205058 and 1248034 but that is more for reference than hard-blocking. We would still ship this independently if those two bugs are not resolved.', Created ', ', PR whoever wants to take it furst', Comment on ', ', PR LGTM!' 
id=1179804	 "This resolves itself on opening a new tab but if theres's an existing about:home tab opened after a CPD all content on it will remain.", Still reproducible.', Created ', ', Pull request refresh home panels after clearing private data', Comment on ', ', Pull request Nice, looks good!' 
id=1188011	 'Emily pointed out that this only happens when the Accessibility Inspector is visible. Would love to know why...', Saw this today again on simulator without any inspector visible', tested this with voiceover. It displays the same behaviour.', Created ', ', Pull request' 
id=1137265	 'Works for me. Is there a specific part of text in the page where this fails? I tried in a bunch of places and things just work as expected. iPhone 6+, most recent build.', (In reply to Stefan Arentz :st3fan from ', ) ', I should mention I'm on 73b1299e69df (latest commit on master). I'm trying to select anything in the actual article below the picture. iPhone 6 (8.1.3).", Device reboot fixed it.' 
id=1200210	 'Created ', ', Link to Github pull-request: ', Requires ', to be merged/resolved first.', Comment on ', ', Link to Github pull-request: ', LGTM', Comment on ', ', Link to Github pull-request: ', Sorry. LGTM!', Merged Master d441368007f6fd5d83d4fc50f5ba20ef40c50892' 
id=1147625	 ' *** This bug has been marked as a duplicate of ', ***', Not a dupe since this is about the tabs tray rather than the web content itself. We can fix the tabs tray by caching thumbnails, but ', will need more work.', Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1279905	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1100577	 '\u201cAn app that lets Firefox users continue their experience and manage their content wherever they are.\u201d - Working elevator pitch --- Use cases: \u201cAs a user I want to easily find and see my stuff when I\u2019m on my iOS device.\u201d \u201cAs a user I want to be able to continue reading from where I left off.\u201d \u201cAs a user I want to be able to choose how I open links.\u201d \u201cAs a user I want to be able to add Bookmarks and other items to my Firefox Account.\u201d \u201cAs a user I want to be able to send and receive a tab.\u201d \u201cAs a user I want to have access to the same Reading list on my iOS device.\u201d \u201cAs a user I want to be in control of my notifications.\u201d \u201cAs a user I want to log in to any app with my username and password that I saved in Firefox.\u201d \u201cAs a user I want to be able to re-search what I was looking for.\u201d' 
id=1183205	 'Related issue filed in ', This has bugged me for a while. This is due to bad keyboard handling on our part.', This also happens when you have an external keyboard attached. Or when you run in the simulator with the on-screen keyboard disabled.', Created ', ', PR: ', This patch changes the `KeyboardHelper` to have a `intersectionHeightForView()` method instead of a `height` property. ', This fixes the case where the FxA login has a abnormal bottom inset on iPad and it also fixes the case where all our views that deal with the keyboard (Search, Snackbar, FxA) have a large bottom inset when a virtual or external keyboard is used.', Comment on ', ', PR: ', Drive-by. sleroux can find what I missed if he chooses to :D', Comment on ', ', PR: ', I\'m still seeing an issue in the iPad Air 8.4 simulator when using the software keyboard where there\'s a gap between the bottom of the signin white background and the keyboard. Also, when you dismiss the keyboard, it seems to zoom into the webview that\'s displaying the signin page. STR: (To see soft keyboard, turn off "Connect hardware keyboard" under the simulator\'s Hardware menu) 1. Launch iPad Air 8.4 simulator in landscape 2. Navigate to Sync tab 3. Tap signin button 4. Tap signin 5. Tap email input field Also, whenever I see a mysterious 20px gap I usually associate it with a calculation related to the status bar (yay fun). Try toggling the in-call status bar state in the simulator and see if this changes to 40px. If it is a status bar issue, it might be related to similar issue I\'m looking at for the tab tray controller.', Created ', iOS Simulator Screen Shot Jul 15, 2015, 9.27.28 AM.png', Ugh I landed this before I saw your comment. I will leave this bug open and post a followup fix. Weird. I really tested this well on the iPad Simulator. But maybe not on the iPad Air simulator. I wonder if retina vs non-retina makes a difference.', Test plan for iPhone: 1) Start iPhone 6 simulator with on-screen keyboard enabled 1.1) Search: * Tap in location bar. Menu should popup. * Type in location bar. Search results should appear. Quick search bar should be attached to top of keyboard. * Hit cancel. Menu should go away. Quick search bar should go away. 1.2) Snackbars * Go to news.ycombinator.com * Hit the login link * Select the username field - Menu should appear * Login with foo/foo (non existent). Hit login. Menu should go away. Snackbar should appear, attached to bottom of screen. * Tap in a text field - Menu should appear. Snackbar should move up together with the menu. (THere is a 20 pixel gap which is a bug to be filed) * Hit Done. Menu should go away, snackbar should move down. * Hit Not Now, snackbar goes away 1.3) FxA Login * Go to settings, hit "Sign In" - Firefox Sync login web page appears * Tap in the email field. Menu apears. * Scroll the web view. Notice that the view has resized. No gap at bottom. 2) Start iPhone 6 simulator with on-screen keyboard disabled 2.1) Search: * Tap in location bar. No maenu should popup. * Type in location bar. Search results should appear. Quick search bar should be attached to bottom of screen. No keyboard visible. * Hit cancel. Quick search search bar should go away. 2.2) Snackbars * Go to news.ycombinator.com * Hit the login link * Select the username field - Only the bar with < > Done should appear at the bottom of the screen * Login with foo/foo (non existent). Hit login. Bar < > Done should go away. Snackbar should appear, attached to bottom of screen. * Tap in a text field - The bar < > Done should appear. Snackbar should move up together with the bar. (THere is a 20 pixel gap which is a bug to be filed) * Hit Done. Menu should go away, snackbar should move down. * Hit Not Now, snackbar goes away 2.3) FxA Login * Go to settings, hit "Sign In" - Firefox Sync login web page appears * Tap in the email field. On the <> Done bar appears. * Depending on phone size. Scroll the web view. (May fit on 6 and up) Notice that the view has resized. No gap at bottom.', Created ', ', PR: ', This sits on top of PR 739 which I landed too soon. Second PR for this bug. Introduced a KeyboardHelper delegate method that handles NSKeyboardDidShow. This only seems to be needed on iPad. I tried to make the delegate methods optional but that fails because the protocol and keyboard state are not ObjC compatible. (Only ObjC compatible protocols can be optional). I chose the easy way here and simply added the new (empty) delegate method to the other two places where we use the KeyboardHelper.', Comment on ', ', PR: ', Just left a comment about allowing optional protocol if you want it.', Land this please, Steph!', Merged' 
id=1129158	 'Created ', ', Link to Github pull-request: ', bnicholson: st3fan already looked at most of the code move/remove patches. Could you look over the last few, as described at ', ?', Comment on ', ', Link to Github pull-request: ', Looks good to me!' 
id=1142280	 ' ', Landed with a test.' 
id=1151791	 "I'm not able to reproduce this on master (latest code). We just published a build #7. Can you re-test?", Other than the fact that the \xbbShare to\xab thing is now just called \xbbFennec Aurora\xab, I'm getting the same result. I also deleted and reinstalled the app, but it doesn't change anything.", OK, the issue seems to be resolved in Build 8 now. FWIW, the problem didn't occur on my iPad, just on my iPhone 6." 
id=1191687	 'Brian, as you implemented the context menu, do you please have any first idea what could be going on, and hopefully also how to fix it?', Thanks for pointing this out -- I'll take a look today.", Hmm, I can't seem to reproduce this. Not sure if it matters, but are you using Yahoo as your search engine? About how often does this happen?", Oops, overlooked step 1 :)', (In reply to Brian Nicholson (:bnicholson) from ', ) ', That is a relief :-)', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', TL;DR: can still repro it with the "Learn about Mozilla Advocacy" link at ', Detailed version: The issue is no longer reproducible with the page I submitted. But it is reproducible with another page: On ', , with VoiceOver on, flick with one finger right until you reach the "Learn about Mozilla Advocacy" link (I counted you need to flick 5 times). Then quickly double-tap anywhere on the screen to open the link - the action sheet gets shown while the page is being loaded (i.e. I get the "Actual Results", not the "Expected Results"). (practical note for doing repro: When flicking right with one finger, don\'t let yourself distract with the weird scrolling behavior and VoiceOver cursor not being entirely on the right place on webpage - just keep going until "Lear about Mozilla Advocacy" link gets visible and VoiceOver says its name (when the link is visible, you can also simply touch it to focus VO cursor on it before doing the double-tap). Also, scrolling to the link before turning VoiceOver on to save you doing the flicking with one finger won\'t work - as soon as VoiceOver is turned on, VoiceOver scrolls to the top of the webpage. So you have ) If you have trouble with reproducing including working with VoiceOver, please let me know. Tested on latest master: 7e2a58a0eda9afc6bc87afe0b83a32fbfa75cef2', It looks like we aren't getting mouseup events in this case. I think the bug is that touchstart is fired at all for VoiceOver, which is particularly annoying since there's no matching touchend (filed at 1 ). All I can think of is to suppress the context menu popup if UIAccessibilityIsVoiceOverRunning() returns true, but that will break the context menu altogether for VoiceOver users. Boris, do you see this often?", 1 ', Not sure we have any good immediate options here, so bumping to 1.1.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', often enough - e.g. wikipedia main page ("language chooser") - open the "English" link I don\'t test with VoiceOver inside webpage content with VoiceOver too much to have a long list, but I had little problem to find a few examples when I tried. ', Seems that the issue is not present when running Firefox on iOS 9. Both cases (the "Mozilla Advocacy" link and the Wikipedia "English" link) I am aware of (I don\'t test inside webpages themselves with VoiceOver much) are present in iOS 8, but not in iOS 9 - in the latest master (a139c3a818fd4f16d12d2ea660d26a493140ccb9). Probably Webkit was fixed in this regard in iOS 9. So a solution could be to disable it as you suggested, but only on iOS 8 using a runtime check for iOS version on which we are running. (I did not test on iOS 9 with the Firefox version just *before* commit 43ccdf0a3257b171c8573b00608b2f3fe4a2fb4f (the one you fixed some of the occurrences of this issue), so cannot say whether removing that fix would keep things still working on iOS 9.)', Created ', ', Link to Github pull-request: ', Since the workaround didn't work for all cases, let's just fallback to the default WKWebView context menu for these users.", Comment on ', ', Link to Github pull-request: ', LGTM', v1.0: 3788ba0', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Hello Brian, just tried the v1.0 branch with 3788ba0. Unfortunately things are not fixed in iOS 9.0 with it. It seems you will need to keep the "mouseup" event listeners, with the difference between iOS 8 and 9 being that on iOS 9, this will suffice to provide the correct behavior, but on iOS 8, it will not (and that is why we are turning the context menu completely off on iOS 8). It also seems from this that the rdar you filed might be still valid for iOS 9.', Thanks for keeping an eye on this, Dusek. I merged the old fix back in: dfd639e Hopefully everything works as expected now. If we still see issues on iOS 9, we should probably fall back to the default WKWebView context menu for VoiceOver users like we do on iOS 8.', v1.0: af87b49' 
id=1203123	 'Created ', ', PR: ', This patch adds SQLite back to the Copy Frameworks build phase of the main *Client* target. Not sure why it got lost, could have been a bad merge.', Comment on ', ', PR: ', LGTM' 
id=1164081	 'Robin, can you export the images for this screen and attach or link them in this bug?', Created ', EmptyReadingListPanel.zip', Created ', ', PR: ', Comment on ', ', PR: ', This adds an empty state to the reading list panel according to the design at ', The only difference is that I made the welcome content centered in the panel. This looks better on iPad. Tested on iPhone 4S, iPhone 5, iPhone 6, iPhone 6 Plus, iPad. Both in portrait and landscape.', Comment on ', ', PR: ', Looks good!' 
id=1173203	 'Created ', ', PR' 
id=1319182	 "Adobe flash is free, you shouldn't have to use a password to get it. Download from ", This is not a bug in Firefox so I need to close this as a "bug". Please contact ', if you need further assistance.' 
id=1186010	 'Done.' 
id=1110688	 'Created ', ', Proposed patch. v1', I also see Apple sample code use `arc4random`. See ', - which has a note: ' 
id=1194387	 'Created ', Screen Shot 2015-08-13 at 3.08.03 PM.png Thanks for filing. Saw this just this past half hour too. Steps Visit ', Open a new tab Close new tab Switch back to Neowin', Created ', ', ', Comment on ', ', ', LGTM', Merged.' 
id=1131280	 'Created ', ', Pull request' 
id=1145380	 'This is still present in build 6', Created ', ', Pull request', Mosbah, I'm just looping in UX (via the ui-review) flag to see if this is what we want.", Comment on ', ', Pull request Please re-assign this code review when UX has approved this change.', Comment on ', ', Pull request I just built this PR on my device and can't tell what I'm supposed to be seeing... tapping top sites doesn't seem any different to me?", Comment on ', ', Pull request Happy to re-review when it's clear what to look for, I couldn't detect any change with this patch.", Comment on ', ', Pull request Same as :darrin, not sure what the difference is.', Created ', ', Pull request', Comment on ', ', Pull request Hey Shiv, Thanks for the patch! This looks and feels great. Adding Robin to approve the design change.', master 3ebc8cbe9cd55668e59578a2d51e30ac835e2bb4' 
id=1220842	 'Created ', ', PR: ', This patch disables the use of the AuralProgressBar. Until we have figured out how to manage its background usage better.', I wish this would have been communicated in the release notes for 1.2. VoiceOver users view this as a regression on our part.' 
id=1155990	 'Created ', ', Pull req.', Comment on ', ', Pull req. This looks good but file a followup to turn the numeric timestamp into a human readable string? (NSDataFormatter is your friend)', (In reply to Stefan Arentz :st3fan from ', ) ', That's the bug this one already blocks :D", ce8e099' 
id=1123499	 'I read news that Mozilla uses Yahoo for default search. When clicking suggested sit, it trigger a Yahoo search using what we typed in, not load the sit we clicked. I will work on it. and I think we should tell user which will trigger a search, which will lead to a new page in suggestion list, like safari does. Need a new bug for this?', Created ', ', Pull request' 
id=1166992	 
id=1146846	 'The UIAccessibilityScreenChangedNotification notification is posted, along with UIAccessibilityLayoutChangedNotification. These two are what makes VoiceOver go to the proper initial webpage element after loading a webpage. Please see ', Are you experiencing any issues with this? For me, after invoking webpage loading, when the webpage is loaded, VoiceOver plays the usual "Screen Changed" sound and goes to the proper initial element. Only improvement I could imagine is to focus progress bar after invoking page loading and before the page is fully loaded, so that especially on longer page loads, the user is informed about the progress (but that is for another bug).', Try activating a link on a page that loads a new page. I do get the notification when initially loading a page from the address bar, but not when a page is loaded coming from another page.', For me it works fine, both when activating a link on a webpage and going back using the scrub (dismiss) gesture. Using iOS 8.3 and Firefox for iOS master. Will test with iOS 8.2 and v7 this evening (I think I tested all these scenarios when I made the fix back in January.)', Al scenarios now work in build 7.' 
id=1177597	 'In iOS9 due to some bug `UIKeyInput` method `insertText` do not call. I have created pull request which resolve the issue. ', Created ', ', Pull Request', Comment on ', ', Pull Request Thanks for the pull request! On the right track, but we need to figure out a fix for this that doesn't flash the input each time a character is typed.", Comment on ', ', Pull Request Sorry, looks like the flicker issue is an existing bug on master. I'll give this another look.", Comment on ', ', Pull Request Seems to work well on English keyboards, though breaks Japanese as mentioned in the PR.', @brian thanks for the comments. Have not seen your comments yesterday in bugzilla. Resolved the flicker issue. I will am also looking in to japanese character issue. Will commit the changes after testing.', @brian update the pull request. Fixed flicker issue and japanese character issue.', Comment on ', ', Pull Request Going to try to look at this today when I get a chance.', This patch is a bit more complicated than I was expecting :) I probably won't have time to do a review today, so I'll get to it early next week. Sorry for the delay!", @brian. Updated the pull request to resolve commits.', @brian. Updated the pull request to resolve commits.', Hi @brian. Updated the pull request to resolve commits.', Comment on ', ', Pull Request iOS 9 fix looks OK, though I'll keep thinking about an alternative fix to the multistage input issue. I wonder if we can considerably simplify the flicker fix, though, as mentioned in the PR. Thoughts? Thanks for taking the time to investigate all of this!", Comment on ', ', Pull Request Hi Brian Thanks for suggestion. I have updated the pull request. Simplified the patch. Thanks for your help', @brian Updated the pull request to resolve conflicts.', Comment on ', ', Pull Request This looks and feels great! Thanks for all the hard work, codester! :)' 
id=1266148	 'Created ', new-bing.zip', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Since engines are now imported from Android, anything in SearchPlugins will be overridden the next time the search script is run. That means you\'ll want to make this same change to SearchOverrides/en/bing.xml. Note that the "proper" way to do this would be to change *only* the bing.xml in SearchOverrides, then run scrape_plugins.py. That\'ll update the en/bing.xml in SearchPlugins along with any other incoming engine changes from Android. (The en plugins are a special case as described at 1 , which is why we have to maintain those locally in SearchOverrides. That\'s because there is no en l10n repo.) 1 ', Makes sense. I remember you mentioning scraping scripts but couldn't find them. I've updated the PR to add the image to the SearchOverride/en/bing.xml file instead and ran the scrap_plugins.py to update the actual bing.xml file.", Comment on ', ', Link to Github pull-request: ', I think we're good here but just wanted to make sure to r+ before I uplift into v4.x", Comment on ', ', Link to Github pull-request: ', Looks fine!', master 696765783b0896930ce13f93d51b7b0c846cd092 v4.x deaaa9662900fd0e93d6a535e2207f69c4a7a780' 
id=1210798	 'Created ', ', ', Comment on ', ', ', LGTM', Merged' 
id=1159953	 'Created ', ', Pull request', Comment on ', ', Pull request If it works for you, it works for me.' 
id=1278667	 'Created ', ', ', Comment on ', ', ', Functions pretty well and code looks good! See PR for my first pass of feedback.', Comment on ', ', ', Looks like the bugs I've found and feedback have been addressed. Ready to go!", master 0c90be77a07e51bdc34b95250e29edaf3000b204 v5.x fa155c4' 
id=1223446	 'I found that this is consistently reproducible if: * The current tab is home (showing Top Sites) * I close/reopen the browser, restoring to Top Sites.', I bet this is being caused by the blurring happening on another thread and coming back to do a different cell. I'll investigate.", Created ', ', Link to Github pull-request: ', I've reverted moving the blurring operation on the background and kept it on the main thread. This will regress the perf by a tiny bit but it will work. I think what you were mentioning about UIKit behaving badly in the background is manifesting itself in this bug. Looking at the code, the cell that's getting passed through should get captured by the async/sync dispatch blocks 1 so that should be fine. The only thing I can think of is the writing into CGContext in the applyLightEffect logic 2 is behaving badly in the background. 1 ", 2 ', 1.2?', Yup - Landing this now', Landed 88d37a4fd1eb2275d55f80a0671a1babc784d173', Landed 88d37a4fd1eb2275d55f80a0671a1babc784d173', I'm still seeing this issue in the latest TF build (1302). Reopening.", Alongside the blur I am also seeing completely wrong respective Favicons for tiles; I filed bug ', Closing as a dupe of 1229460 since that's the actual issue *** This bug has been marked as a duplicate of ", ***' 
id=1294562	 'Created ', ', Pull request' 
id=1249019	 "Update: upgrading to 1.4 solves this problem, however I know most people don't perform regular updates.", 2.0 will also be out very soon which has a large number of crash fixes', Unfortunately we're aware of a pretty bad startup bug in versions < 1.4 but should be resolved for any versions 1.4 and above. As of iOS 7, apps should auto-update unless the user has explicitly turned that off.", I have version 2.0, using iPhone 6S with iOS 9.2.1 and facing same problem, it crashes every time' 
id=1169379	 'Created ', ', WIP PR ', Darrin mentioned tweaking this a bit on IRC. Putting this up for UX to play with.', Updated the PR to load favicons we don't have (only on the topsites panel). This is a bit complex (i.e. we load the HTML and parse with libxml (since it has an HTML parser), then download the images (storing them along the way) and return the largest one to you). Doesn't handle view recycling well right now, but TopSites doesn't really need that much anyway! Many of the sites without icons are desktop ones (twitter/facebook), so we end up with less than ideal icons, but its better than nothing at all. Much better.", Comment on ', ', WIP PR ', This updates to the new design (blurred icon behind a non-blurred icon, text on the bottom, square tiles). It also includes a FaviconFetcher that will go find and store favicons for sites. That only runs on top sites, and it caches the results so it shouldn't happen frequently (for synced sites that don't have icons). As I write that I realize sites that don't have icons at all could trigger it... I will dig into that (maybe we store a small default image if the fetcher finds nothing, and maybe we also set a max bytes we'd download here...) In the grand tradition of me, I'd still rather look into reviewing/landing this while I dig in there a bit. I also noticed the queries are still too slow. Going to try entirely async loading of these icons to avoid some database joins (i.e. query the db for the history entries, then start a batch request for icons for visible sites separately).", Comment on ', ', WIP PR ', Left some comments on the PR. The top sites panel looks great with the favicons!', I'm back if you want a third opinion on db stuff. Ping me on IRC!", :rnewman ya that would be great since I'm not too familiar with the DB changes", Comment on ', ', WIP PR ', I switch to defferred here and realized that the entire getFromHost (which is still poorly named) method was doing way more than I needed it too. You mind looking at the top commit here?', Landing', Comment on ', ', WIP PR ', Reviewed the top commit on the branch - looks good, just nits' 
id=1235602	 'String is now "Preview of %@" ', Comments updated as part of ' 
id=1094237	 
id=1258738	 'Patch for ', resolves this one as well. See ', for details.', *** This bug has been marked as a duplicate of ', ***' 
id=1189844	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks for the PR! Comments on GitHub.', Created ', ', Pull request', Comment on ', ', Pull request Clearing flag; needs some changes.', Created ', ', Pull request', Thanks for the fix, Atul! ' 
id=1139956	 'Safari and Chrome will link highlight grey, we should do the same', This is a regression caused by 1109666 - Customize behavior when long-pressing a link. The WKWebView does highlight links correctly but our custom handling of presses seemed to override and kill that.', Confirmed that the LongPressBrowserHelper causes this regression.', Created ', ', PR: ', This patch disables our own long press gesture recognizer and disables the reading list option in the default WebKit action sheet. The way this is implemented may look scary but this does not actually use private APIs. It simply uses the dynamic nature of Objective-C. The app store binary validator does not flag this as improper API usage.', As a nice side-effect of using the built-in gestures, things like long pressing on a phone number will also work much better. See ', Merged with r=bnicholson' 
id=1130490	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1104965	 'Created ', ', Pull request' 
id=1144470	 'This may actually be a false alarm and be an error displayed by the *original* page. Not by our readerized page.' 
id=1204545	 'Created ', ', ', Merged' 
id=1193010	 'Created ', ', ', Comment on ', ', ', Two comments on the PR!', Merged' 
id=1153157	 'This was fixed by ', *** This bug has been marked as a duplicate of ', ***', Created ', Fixed screenshot' 
id=1217671	 'I have a video if you need it.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM with one simplifying suggestion.' 
id=1284606	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1321210	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1305249	 "The good news is that the soft hyphen doesn't disappear, it's just not visible. Still trying to figure out if there's a way to avoid that conversion.", Created ', ', Pull request on GitHub I tried to come up with a solution for &#173; being converted to utf-8, but failed. One possible way is to .encode('utf-8') the translation and .replace the soft-hyphen, but then you need another hack to avoid etree.tostring converting & to &amp;. It's way to ugly, and I'm not even sure if the XLIFF should have an entity encoded like that. This is the diff generated by the script on the current version of the repo (on a branch) ", If you inspect the code in one of the translations that replaced &#173;, yo ll noticed that the special character is there, just not visible. It would be great to confirm that the new file works as expected, but not sure how (maybe one of the longest strings, like Norwegians or Dutch, if it's still wrapping). I currently don't have a working a running build in XCode.", Created ', Simulator (nl) Tried to import the Dutch file in XCode 8.0 (8A218a) and code from master, I'd say it works just fine.", Comment on ', ', Pull request on GitHub Carrying over r+ from GitHub' 
id=1175369	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1187276	 'Reproducible.', Almost certainly from ', ; nice catch!', (In reply to Emily Toop (:fluffyemily) from ', ) ', I'm not sure this part is true -- KIF enters text character by character, as a human would. I think this failure is due to the debounce from ", , where there's a 100ms delay from text entry until suggestions are shown. AutocompleteTextField.swift and SearchTests.swift assume suggestions are updated synchronously, so we'll need to add waits to account for the debounce.", Created ', ', Link to Github pull-request: ', Fix with test.', Note that the tests failing due to debounce should be fixed in ', .', Comment on ', ', Link to Github pull-request: ', Redirecting since I think Emily is on mfbtuk for the weekend.', Comment on ', ', Link to Github pull-request: ', Thanks to whoever reviews this.', Looks like SearchTests weren't fixed in ", as I hoped, so filed ', .', This works for when you are pasting using the long press paste from our ActionViewController, but if you are using iOS built in paste then suggestions still do not appear. I do not think this is completely fixed.', Comment on ', ', Link to Github pull-request: ', Paste was fixed as part of ', , so shouldn't need any additional changes here. I did add an extra paste test for good measure, though." 
id=1118532	 'Created ', ', Pull request This is a set of commits to basically give us what I described. Its got a lot of room to grow :) but I didn't want to try and tackle everything here. Thoughts? (Now I can get back to reviewing your stuff)", Comment on ', ', Pull request Reviewed on GitHub. A few nits and OO questions, but otherwise rock on!', IMO it's OK to delay upgrade handling to the point that we're unwilling to blow away users' data, if that makes for some flexibility for you.", Comment on ', ', Pull request Yep. I updated the pull request with some things we talked about. I also changed create/upgrade handling a bit. Before it was something like: // Create everything // Upgrade everything if we need to Now its // If we need to... // Create anything that doesn't already exist // Otherwise update it // If anything fails // If there's a backup file that's less than an hour old do nothing // Otherwise, backup the database and try to recreate it again from scratch", Landed in bug ' 
id=1195453	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1133567	 'Spoofing the same UA in desktop, when I click on the ".omniprompt-button" div I get redirected to ', , at which point Firefox gets mad at me for having a bogus proxy'd SSL cert. Looking at the Network timeline in Safari devtools (debugging the iOS simulator), it seems we make a GET to iTunes but it never succeeds. After 90 seconds it gave up: ", . Possibly iTunes is very picky about UA strings? Not sure.', related? ', Related to 1118404 - Make sure we do not auto-redirect/open iTunes Store links', I have a work in progress patch that correctly opens the App Store app. I just need to find out what the exact URL pattern is that we trigger on.', Created ', ', PR: ', This patch checks for http(s)://itunes.apple.com URLs and lets the OS open those. That means that for example app store buttons and the 'Open Native App' button on Twitter.com will trigger the App Store application to open.", Comment on ', ', PR: ', I'd prefer to avoid hardcoding urls if we can. Does the idea in the PR work?", Wes I'm afraid we have to hardcode a number of things. Check out this article that lists a whole number of different URL schemes and partial URL patterns we should detect: ", I'll rework the code to move the logic in a separate function and make it easy to maintain a table of these.", Quick Note: I created a new version of this patch that first checks for custom schemes like itms-apps. Sending that URL to UIApplication.openURL() does open the App Store app, but results in a "Twitter is only available for the iPad" error. When I trigger on the ', URL instead, things work correct and the App Store opens on the Twitter page. So I think there is no way around recognizing app store URLs. I will provide a hardcoded list of known URLs that iOS recognizes.', Wait what's the difference between this and ", (James landed ', )', I think 1118378 really is about non-http schemes like tel: or sms: and this is about properly handing itunes store http(s) urls. Related but not the same.', Same thing on Pinterest', Created ', ', PR: ', Updated patch. I originally thought we could even prompt for these. "Want to use the app?". The WKWebView docs even say you can hold the decision handler and call it after the user makes a decision. But it turns out, while you CAN do that, the webpage isn\'t blocked until you do. Most see the link not open and interpret it as a failure and then start trying other links.', Comment on ', ', PR: ', LGTM' 
id=1145727	 'Created ', ', Pull req.', Comment on ', ', Pull req. This landed.' 
id=1277194	 'Created ', Help setting displaying the exclamation mark icon', Created ', Screen Shot 2016-06-02 at 13.31.31.png Screenshot of what is happening on Nightly 5.0(7) running on iPhone 6S (9.2.1) On this device, both, the email address and the sync status message are shifted to the right sometimes after switching orientation', Hey Catalin, can you still reproduce this as I don't seem to be able to?", I'm no longer able to reproduce this issue on build 5.0b12" 
id=1168394	 ' *** This bug has been marked as a duplicate of ', ***', Thank you!' 
id=1222424	 'I\'ve done some tests and the problem occurs on iPad 2 too. The actual problem is that the "Mark as Read" button should not be displayed when arriving on the view, as on iPhone. This is an issue of the SWTableViewCell library used to handle the swipe actions and it occurs on iOS 9 only. It has been reported 1 and a hack is proposed to fix it. I tested it and it actually works. However, this is a hack... and is a workaround for the real issue I think. 1 : ', Thanks for the digging!', Yo re welcome :)", Hi, I would like to attempt this bug as a good first bug. University of Toronto, CSC302H1S-2015\t assignment. Patch by Feb 26,2016.', I will attempt to fix this as my first bug - CSC302 University of Toronto', disregard last comment', Created ', ', Pull request', Comment on ', ', Pull request Thanks loads for this. Sorry for taking so long to review it - it got missed in my review queue.' 
id=1257365	 '**2. tap the url bar**', I filed this yesterday! *** This bug has been marked as a duplicate of ', ***' 
id=1179067	 'I\'m hacking this now. I also think we should add a line to "Open later", which gets us close to tab queues.', Created ', ', Pull req.', For the record: the hack I wanted to use to launch Firefox from the extension doesn't work in 8.3 or later, so\u2026 let's morph! (Leaving the needinfo for Robin so she's forced to clear it. Heh.)", Watch the scope-creep', Over to Robin for icon and verb. CC antlam for verb alignment.', Scope can't creep on a feature that was entirely built in two hours :)", Blocking ', 'cos this adds strings.", Comment on ', ', Pull req. Only outstanding TODO is the icon, which Robin is providing.', Why is this in the Share extension and not a separate Action next to "Send Tab"? My gut feeling says that makes more sense.', Tab counter is not correctly incremented. 1) Open firefox, open a single tab with a random site 2) Switch to Safari 3) Queue 3 sites 4) Switch back to Firefox Expected: Tab counter is set to 4 Actual: Tab counter is set to 2', (In reply to Stefan Arentz :st3fan from ', ) ', I tend to agree. This would be a nice one-tap interaction, and we wouldn\'t even need UI (just label action "View Later" with firefox icon)...', Comment on ', ', Pull req. I\'m going to propose we delay landing just to get it in, and rather get it right: * I don\'t want to combine "permanent" save actions (bookmark/reading list) with what is basically "open in background" * this would be much better as a one-touch interaction, and probably doesn\'t need any UI', Dependent code landed, so the frontend implementation just needs to call profile.queue.addToQueue(item).value a la ', and everything else will Just Work\xae.', Not entirely sure why this is failing for me: 2015-07-06 16:35:37.442 ViewLater 13150:1395728 Failed to inherit CoreMedia permissions from 13137: (null) 2015-07-06 16:35:38.015 Error Profile.swift:42 init(profile:): Unable to find the shared container. Defaulting profile location to ~/Documents instead. 2015-07-06 16:35:38.018 Debug BrowserDB.swift:73 init(filename:secretKey:files:): Initializing BrowserDB. 2015-07-06 16:35:38.018 Debug BrowserDB.swift:137 createOrUpdate: Create or update tableList version 1. 2015-07-06 16:35:38.021 Debug BrowserDB.swift:88 createTable(_:table:): Try create tableList version 1 2015-07-06 16:35:38.021 Debug SwiftData.swift:125 transaction: Op in transaction succeeded. Committing. 2015-07-06 16:35:38.022 Info BrowserTable.swift:67 init(): SQLite version: 3.8.8.3 (3008008). 2015-07-06 16:35:38.022 Debug BrowserDB.swift:137 createOrUpdate: Create or update BROWSER version 5. 2015-07-06 16:35:38.024 Debug BrowserDB.swift:346 tablesExist: 0 tables exist. Expected 5 2015-07-06 16:35:38.024 Debug BrowserDB.swift:88 createTable(_:table:): Try create BROWSER version 5 2015-07-06 16:35:38.024 Debug BrowserTable.swift:225 create(_:version:): Creating 10 tables, views, and indices. 2015-07-06 16:35:38.026 Error SwiftData.swift:400 executeChange(_:withArgs:): SQL error: SQL error or missing database no such table: main.favicons for SQL CREATE VIEW IF NOT EXISTS view_favicons_widest AS SELECT favicon_sites.siteID AS siteID, favicons.id AS iconID, favicons.url AS iconURL, favicons.date AS iconDate, favicons.type AS iconType, MAX(favicons.width) AS iconWidth FROM favicon_sites, favicons WHERE favicon_sites.faviconID = favicons.id GROUP BY siteID . 2015-07-06 16:35:38.026 Error BrowserTable.swift:73 run(_:sql:args:): Error running SQL in BrowserTable. Optional("SQL error or missing database no such table: main.favicons") 2015-07-06 16:35:38.026 Error BrowserTable.swift:74 run(_:sql:args:): SQL was CREATE VIEW IF NOT EXISTS view_favicons_widest AS SELECT favicon_sites.siteID AS siteID, favicons.id AS iconID, favicons.url AS iconURL, favicons.date AS iconDate, favicons.type AS iconType, MAX(favicons.width) AS iconWidth FROM favicon_sites, favicons WHERE favicon_sites.faviconID = favicons.id GROUP BY siteID 2015-07-06 16:35:38.026 Debug BrowserDB.swift:91 createTable(_:table:): Creation failed. 2015-07-06 16:35:38.026 Debug SwiftData.swift:132 transaction: Op in transaction failed. Rolling back. 2015-07-06 16:35:38.026 Debug BrowserDB.swift:190 createOrUpdate: Couldn\'t create or update BROWSER. 2015-07-06 16:35:38.026 Debug BrowserDB.swift:191 createOrUpdate: Attempting to move browser.db to another location. 2015-07-06 16:35:38.027 Debug BrowserDB.swift:88 createTable(_:table:): Try create BROWSER version 5 2015-07-06 16:35:38.027 Debug BrowserTable.swift:225 create(_:version:): Creating 10 tables, views, and indices. 2015-07-06 16:35:38.029 Error SwiftData.swift:400 executeChange(_:withArgs:): SQL error: SQL error or missing database no such table: main.favicons for SQL CREATE VIEW IF NOT EXISTS view_favicons_widest AS SELECT favicon_sites.siteID AS siteID, favicons.id AS iconID, favicons.url AS iconURL, favicons.date AS iconDate, favicons.type AS iconType, MAX(favicons.width) AS iconWidth FROM favicon_sites, favicons WHERE favicon_sites.faviconID = favicons.id GROUP BY siteID . 2015-07-06 16:35:38.029 Error BrowserTable.swift:73 run(_:sql:args:): Error running SQL in BrowserTable. Optional("SQL error or missing database no such table: main.favicons") 2015-07-06 16:35:38.029 Error BrowserTable.swift:74 run(_:sql:args:): SQL was CREATE VIEW IF NOT EXISTS view_favicons_widest AS SELECT favicon_sites.siteID AS siteID, favicons.id AS iconID, favicons.url AS iconURL, favicons.date AS iconDate, favicons.type AS iconType, MAX(favicons.width) AS iconWidth FROM favicon_sites, favicons WHERE favicon_sites.faviconID = favicons.id GROUP BY siteID 2015-07-06 16:35:38.029 Debug BrowserDB.swift:91 createTable(_:table:): Creation failed. 2015-07-06 16:35:38.029 Debug SwiftData.swift:132 transaction: Op in transaction failed. Rolling back. 2015-07-06 16:35:46.164 Error SwiftData.swift:400 executeChange(_:withArgs:): SQL error: SQL error or missing database no such table: queue for SQL INSERT OR IGNORE INTO queue (url, title) VALUES (?, ?). 2015-07-06 16:35:46.164 Debug DeferredDBOperation.swift:91 main(): Modified rows: 0. 2015-07-06 16:35:52.177 ViewLater 13150:1395735 host connection <NSXPCConnection: 0x7a726e50> connection from pid 13137 invalidated "SQL error or missing database no such table: queue" Maybe something is missing from the original PR.', This may be due to missing entitlements so that the app cannot access the shared container.', Created ', ', PR: ', This patch adds a new View Later action extension.', Comment on ', ', PR: ', Code looks good! This feature rocks btw. Maybe not for v1 but I feel like we need some UI feedback when we go back into the app when restoring view later tabs. Like a toast that shows "opened up 3 viewed later tabs" or something.', Was there any discussion about the fact that Android uses "Open Now | Later" and iOS uses "View Later" ? Should we try to be consistent with features across platforms? I am also a little worried that the UX around this feature is not completely baked yet and it\'s adding some risk.', Robin and Darrin talked this through quite a bit, and settled on \'view\' as the verb. I started with "Open Later" in my proto, and UX definitely spent the time to make a firm initial decision. My personal opinion: I don\'t think cross-platform consistency is super valuable in this case; so much already differs that there\'s no shared framing, and probably not a ton of overlapping users. I trust Darrin and Robin to pick something they think will make sense to the iOS user base (and also to change their minds later if the evidence is there!). Re risk: the feature is really very simple (much simpler than the equivalent on Android), so the only risk I see is around strings. Worst case we\'re in string freeze and we just punt this to 1.1 by disabling the extension. We can weigh that option against negative or positive feedback from the experience during TestFlight. ni Robin to see if she has anything to add.', I still think "View" is appropriate, but I do want a toast to let the user know it was successful. I would like to at least implement the toasts I designed for "Send Tab". We can keep those strings as simple as possible. ', (Success) ', (Please try again)', -> ' 
id=1187677	 'Created ', ', PR ', Comment on ', ', PR ', LGTM', Merged' 
id=1279478	 'Created ', ', Pull request', Merged: ', v5.x ab6359c' 
id=1199836	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r=rnewman' 
id=1125835	 'I am going to merge the tests of GCDWebServer to WebServerTests.swift, Should I working on it?', (In reply to Aaron from ', ) ', No please wait with that. Note that this bug is more about designing a HTML template for displaying errors.', darrin: tecgirl: this needs UX love.', (In reply to Nick Alexander :nalexander from ', ) ', :nalexander / :wesj Do we have a list that outlines all of the error cases?', You might look at the strings for desktop/Android to see what kind of things can happen. Not sure how many of these are exposed to us on iOS right now: ', The strings are provided by iOS. Not by us. I think there are generally two cases: errors that we can recover from. (the NSError will have a recovery message included like 'Try Again') - those would also need some button or link in the page. errors that are fatal. I also am pretty sure that every error has a short (title) string and a longer description. We should confirm all of the above by printing some errors first so that :tecgirl can see what they would look like.", :st3fan, :nalexander, was there any movement on this error list? I have an idea of what we can do but want to make sure I'm aware of all the circumstances.", In general we have two things that we can display: * The URL of the site that we are trying to load. Either the full one or we can pick just the hostname from it. ("There was a problem loading www.apple.com") * The NSError that WebKit gives us. The first is always present. The latter too, but may have different bits of information. In general the error contains an iOS error code (a number) and the following localized texts: * localizedDescription * localizedFailureReason * localizedRecoverySuggestion * localizedRecoveryOptions The first, localizedDescription, is always present. This is a short string like for example: "The request timed out." "Not allowed to use restricted network port" "An SSL error has occurred and a secure connection to the server cannot be made." The rest is optional. Sometimes the localizedRecoverySuggestion is available. For example when connecting to a bad secure server: description: "An SSL error has occurred and a secure connection to the server cannot be made." recoverySuggestion: "Would you like to connect to the server anyway?" However ... there is no public API that we can use to actually recover. So I think we cannot use this just yet. Summarizing, I think unfortunately our error pages can only have three things: * The URL or Hostname of the page we were trying to load (note that the full URL will also be in the location bar) * The localizedDescription * The iOS Error Code (which may be useful - sometimes people can google for it to get more detailed info) Technical details: When an error occurs, we get an NSError that has the usual localized* descriptions. There is also a dictionary in the userInfo field of the nSError that has one interesting item: _WKRecoveryAttempterErrorKey=<WKReloadFrameErrorRecoveryAttempter: 0x7ff0b1b50830> Looking at the WebKit source code, this WKReloadFrameErrorRecoveryAttempter instance has a attemptRecovery method. Which is not documented but I assume this continues or retries the operation. We will have to file a bug with Apple to get this exposed publicly.', Interesting, I just caused a DNS lookup failure, and I am getting the following back: localizedDescription: The operation couldn\u2019t be completed. (NSURLErrorDomain error -999.) localizedFailureReason: nil localizedRecoverySuggestion: nil localizedRecoveryOptions: nil This is a pretty horrible error message. Safari shows comething different: "Safari cannot open the page because the server cannot be found." What I am going to suggest is that we default to the NSError.localizedDescription, except for a number of cases where we know we can supply a better error message (based on the NSURLErrorDomain). So we need to keep a list of error codes vs error messages for those that we want to override.', *** ', has been marked as a duplicate of this bug. ***', Created ', errorTemplate.pdf Error Template specs (pdf)', Created ', errorTape.zip striped tape assets', Created ', errorTemplates.zip template examples', Created ', ', PR ', This may need some more iteration with UX as well.', Also, tablets are looking awful. Looking at that now...', Cleaned up tablets a bit. Also need to keep these out of storage. Also need to tweak on the 4s a bit I think (reduce some top padding).', I really like this approach, I hope we can use this. I did find a serious issue that we probably need to resolve before landing this. You can reproduce as follows: 1) Go to ', 2) Tap on the third link (SSL Connect to bad port 80) You may have to tap the link twice. (That could be a hint why this is happening) What happens next is that the browser at *very* rapid pace repeatedly makes HTTP requests. Even if you navigate away from the page, it keeps doing this. Hitting the stop button makes not difference.', Without looking I'm guessing that the error page is throwing an error :) which starts an infinite loop. I'm going to look at fixing that, but also a mitigation... (i.e. if we're showing an error page for an error page, show something generic?)", Hmm.. I was sorta right. The original click on the link takes a long time to error out. I'm not sure why. Hitting reload on it while its in progress seems to trigger two failures in provisional navigation. One of those is because cancelling a load (i.e. hitting stop) fires the error handler. I caught those and made them not show error pages anymore. The reload request also fires some new load events, which (this time) fail really quickly then and shows the correct error. I think trying to show two errors at once for the same page was causing an infinite error page loop before. I added an exit out if we try to show an error page for an error page.", Also, git talked me into running 'git pull' which tried to merge with your old branch. I cleaned things back up here, but there's some extra deletions going on to do it.", (In reply to Wesley Johnston (:wesj) from ', ) ', Looks good. One nit: when rotating device, the stripes don't automatically expand the width. If I tap refresh, they will.", (In reply to Stefan Arentz :st3fan from ', ) ', Shouldn't the error template render for the last two errors? It did not for the last two tests (HTTP bad port and Random Failure). Also, triggering the loop was amusing. My console blew up!", Wes, can you needinfo me when I can look at this again?', Comment on ', ', PR ', Ready for review again. I think the header errors you saw were fixed by our other recent fix for fixed position headers. The redirect error from the people page actually isn't in good sentence case. Let get this in and fix that in follow ups.", Comment on ', ', PR ', Lets land this and see how it is received by our testers.' 
id=1161254	 'Created ', ', Pull request' 
id=1224692	 'I think how I got 1.2 is by installing 1.1 from the app store. Not logging in, but using it. Then installing the TestFlight 1.2 build on top of that. And logging in to my FxA account. Will verify steps.', The log shows a completely new set of DBs: 2015-11-12 16:59:31.702 Debug BrowserDB.swift:126 createOrUpdate > Create or update BROWSER version 11 on <NSThread: 0x137f31b00>{number = 3, name = (null)}. 2015-11-12 16:59:31.702 Debug BrowserDB.swift:378 tablesExist > 0 tables exist. Expected 10 35 minutes later you relaunch the app and the logins table is used for the first time: 2015-11-12 17:35:03.752 Debug BrowserDB.swift:37 init(filename:secretKey:files:) > Initializing BrowserDB: logins.db. 2015-11-12 17:35:03.754 Info SwiftData.swift:331 init(filename:flags:key:prevKey:) > Vacuuming to alter database page size from Optional(1024) to 32768. 2015-11-12 17:35:03.821 Debug SwiftData.swift:335 init(filename:flags:key:prevKey:) > Vacuuming succeeded. 2015-11-12 17:35:03.821 Info SwiftData.swift:340 init(filename:flags:key:prevKey:) > Enabling WAL mode. 2015-11-12 17:35:03.828 Debug BrowserDB.swift:126 createOrUpdate > Create or update tableList version 1 on <NSThread: 0x137d1aba0>{number = 1, name = main}. 2015-11-12 17:35:03.829 Debug BrowserDB.swift:128 createOrUpdate > Doesn't exist. Creating table tableList. 2015-11-12 17:35:03.829 Debug BrowserDB.swift:56 createTable(_:table:) > Try create tableList version 1 2015-11-12 17:35:03.836 Debug BrowserDB.swift:126 createOrUpdate > Create or update LOGINS version 2 on <NSThread: 0x137d1aba0>{number = 1, name = main}. 2015-11-12 17:35:03.836 Debug BrowserDB.swift:378 tablesExist > 0 tables exist. Expected 2 The next day, a sync finds a corrupt DB: 2015-11-13 15:31:19.831 Info SyncStateMachine.swift:88 advanceFromState > advanceFromState: Ready 2015-11-13 15:31:19.833 Debug Profile.swift:730 takeActionsOnEngineStateChanges > Already resetting clients (and tabs); not bothering to also reset tabs again. 2015-11-13 15:31:19.843 Debug Downloader.swift:55 resetDownloaderWithPrefs(_:collection:) > Resetting downloader prefs profile.sync.synchronizer.history..downloader.history... Previous values: nil, nil. 2015-11-13 15:31:19.851 Debug Downloader.swift:55 resetDownloaderWithPrefs(_:collection:) > Resetting downloader prefs profile.sync.synchronizer.bookmarks..downloader.bookmarks... Previous values: nil, nil. 2015-11-13 15:31:19.990 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 2015-11-13 15:31:20.049 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 2015-11-13 15:31:20.049 Error SwiftData.swift:312 init(filename:flags:key:prevKey:) > Unable to encrypt database Once the DB is corrupt, there's nothing we can do.", Hypothesis: the database was open and the app was killed by the updater, and that caused corruption on disk. If you can get into Settings and copy the DB file, and grab it off the device, then I can take a look.', No obvious culprits in ', TheLink saw this. It doesn\'t seem to be correctly recovered from: sync.20151121T000404+0100.log sync.20151121T000404+0100.log 00:05:09.370 Info SyncStateMachine.swift:88 advanceFromState > advanceFromState: HasFreshCryptoKeys 00:05:09.371 Info SyncStateMachine.swift:232 init(client:scratchpad:token:) > Inited ready 00:05:09.372 Info SyncStateMachine.swift:88 advanceFromState > advanceFromState: Ready 00:05:09.373 Debug Profile.swift:730 takeActionsOnEngineStateChanges > Already resetting clients (and tabs); not bothering to also reset tabs again. 00:05:09.389 Debug Downloader.swift:55 resetDownloaderWithPrefs(_:collection:) > Resetting downloader prefs profile.sync.synchronizer.bookmarks..downloader.bookmarks... Previous values: nil, nil. 00:05:09.407 Debug BrowserDB.swift:37 init(filename:secretKey:files:) > Initializing BrowserDB: logins.db. 00:05:09.412 Info SwiftData.swift:331 init(filename:flags:key:prevKey:) > Vacuuming to alter database page size from Optional(1024) to 32768. 00:05:09.632 Debug SwiftData.swift:335 init(filename:flags:key:prevKey:) > Vacuuming succeeded. 00:05:09.634 Info SwiftData.swift:340 init(filename:flags:key:prevKey:) > Enabling WAL mode. 00:05:09.650 Debug BrowserDB.swift:126 createOrUpdate > Create or update tableList version 1 on <NSThread: 0x181f7890>{number = 8, name = (null)}. 00:05:09.651 Debug BrowserDB.swift:128 createOrUpdate > Doesn\'t exist. Creating table tableList. sync.20151121T002222+0100.log 00:22:29.662 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update tabs version 2 00:22:29.663 Debug BrowserDB.swift:139 createOrUpdate > Table tabs already exists. 00:22:29.663 Debug BrowserDB.swift:126 createOrUpdate > Create or update commands version 1 on <NSThread: 0x16de7230>{number = 2, name = (null)}. 00:22:29.664 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update commands version 1 00:22:29.664 Debug BrowserDB.swift:139 createOrUpdate > Table commands already exists. 00:23:04.603 Debug BrowserDB.swift:37 init(filename:secretKey:files:) > Initializing BrowserDB: logins.db. 00:23:04.796 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 00:23:04.998 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 00:23:04.998 Error SwiftData.swift:312 init(filename:flags:key:prevKey:) > Unable to encrypt database 00:23:05.001 Debug BrowserDB.swift:167 createOrUpdate > Couldn\'t create or update "tableList" . 00:23:05.007 Debug BrowserDB.swift:168 createOrUpdate > Attempting to move logins.db to another location. 00:23:05.014 Info SwiftData.swift:331 init(filename:flags:key:prevKey:) > Vacuuming to alter database page size from Optional(1024) to 32768. 00:23:05.210 Debug SwiftData.swift:335 init(filename:flags:key:prevKey:) > Vacuuming succeeded. 00:23:05.211 Info SwiftData.swift:340 init(filename:flags:key:prevKey:) > Enabling WAL mode. 00:23:05.222 Debug BrowserDB.swift:56 createTable(_:table:) > Try create tableList version 1 00:23:05.238 Debug BrowserDB.swift:126 createOrUpdate > Create or update LOGINS version 2 on <NSThread: 0x16e736c0>{number = 1, name = main}. sync.20151121T003221+0100.log 00:32:27.300 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update tabs version 2 00:32:27.301 Debug BrowserDB.swift:139 createOrUpdate > Table tabs already exists. 00:32:27.301 Debug BrowserDB.swift:126 createOrUpdate > Create or update commands version 1 on <NSThread: 0x1667eb60>{number = 3, name = (null)}. 00:32:27.302 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update commands version 1 00:32:27.303 Debug BrowserDB.swift:139 createOrUpdate > Table commands already exists. 00:33:02.101 Debug BrowserDB.swift:37 init(filename:secretKey:files:) > Initializing BrowserDB: logins.db. 00:33:02.305 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 00:33:02.517 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 00:33:02.517 Error SwiftData.swift:312 init(filename:flags:key:prevKey:) > Unable to encrypt database 00:33:02.520 Debug BrowserDB.swift:167 createOrUpdate > Couldn\'t create or update "tableList" . 00:33:02.528 Debug BrowserDB.swift:168 createOrUpdate > Attempting to move logins.db to another location. 00:33:02.533 Info SwiftData.swift:331 init(filename:flags:key:prevKey:) > Vacuuming to alter database page size from Optional(1024) to 32768. 00:33:02.733 Debug SwiftData.swift:335 init(filename:flags:key:prevKey:) > Vacuuming succeeded. 00:33:02.734 Info SwiftData.swift:340 init(filename:flags:key:prevKey:) > Enabling WAL mode. 00:33:02.746 Debug BrowserDB.swift:56 createTable(_:table:) > Try create tableList version 1 00:33:02.764 Debug BrowserDB.swift:126 createOrUpdate > Create or update LOGINS version 2 on <NSThread: 0x16615ed0>{number = 1, name = main}.', This is the most trackingest-1.3 thing I can think of. So here I am.', And here we are corrupting browser.db immediately after a history sync: 01:04:17.635 Debug Downloader.swift:203 handleSuccess > Got success response with Optional(500) records. 01:04:17.636 Debug HistorySynchronizer.swift:195 onBatchResult > Running another batch. 01:04:37.336 Debug Downloader.swift:186 handleSuccess > Advancing baseTimestamp to 1447971482510 - 1 01:04:37.354 Info HistorySynchronizer.swift:174 go(_:greenLight:downloader:history:) > Green light turned red. Stopping history download. 01:04:37.357 Debug IndependentRecordSynchronizer.swift:85 uploadRecords(_:by:lastTimestamp:storageClient:onUpload:) > No modified records to upload. 01:04:37.464 Debug IndependentRecordSynchronizer.swift:99 uploadRecords(_:by:lastTimestamp:storageClient:onUpload:) > Uploading 29 modified records. 01:04:37.470 Debug IndependentRecordSynchronizer.swift:30 sequentialPosts(_:by:lastTimestamp:storageOp:) > Uploading 29 records. 01:04:38.277 Debug StorageClient.swift:329 failFromResponse > Status code: 200. 01:04:38.279 Debug SQLiteHistory.swift:920 markAsSynchronized(_:modified:) > Marking 29 GUIDs as synchronized. Returning timestamp 1448064274740. 01:04:38.343 Debug Synchronizer.swift:217 setTimestamp > Setting post-upload lastFetched to 1448064274740. 01:04:38.347 Debug HistorySynchronizer.swift:166 uploadOutgoingFromStorage(_:lastTimestamp:withServer:) > Done syncing. Work was done? true 01:04:38.348 Debug BrowserDB.swift:238 checkpoint() > Checkpointing a BrowserDB. 01:04:38.350 Debug HistorySynchronizer.swift:168 uploadOutgoingFromStorage(_:lastTimestamp:withServer:) > Done. 01:04:38.351 Debug Profile.swift:829 syncOnTimer() > Timed history sync succeeded. Status: Completed. 01:05:58.447 Debug Profile.swift:680 endTimedSyncs() > Stopping sync timer. 01:49:12.049 Debug Profile.swift:670 beginTimedSyncs() > Starting sync timer. 01:49:12.301 Info SwiftData.swift:340 init(filename:flags:key:prevKey:) > Enabling WAL mode. 01:49:24.978 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 01:49:25.194 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 01:49:25.194 Error SwiftData.swift:312 init(filename:flags:key:prevKey:) > Unable to encrypt database 01:50:17.751 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 01:50:17.985 Error SwiftData.swift:465 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 01:50:17.986 Error SwiftData.swift:312 init(filename:flags:key:prevKey:) > Unable to encrypt database 01:55:39.037 Debug Profile.swift:680 endTimedSyncs() > Stopping sync timer. 01:56:43.044 Debug Profile.swift:670 beginTimedSyncs() > Starting sync timer. The "Stopping sync timer", "Starting sync timer" lines indicate when we background and foreground the app. You see we sync, checkpoint, then 80 seconds later we enter the background. When we come back, 44 minutes later, the DB is corrupt. The SQLite docs have this to say: --- In WAL mode, the only time that a failed sync operation can cause database corruption is during a checkpoint operation. A sync failure during a COMMIT might result in loss of durability but not in a corrupt database file. Hence, one line of defense against database corruption due to failed sync operations is to use SQLite in WAL mode and to checkpoint as infrequently as possible. --- We\'re going against this advice a little, because checkpointing infrequently leads to large WAL files, which leads to long startups, which leads to us being killed on launch. Which is bad. We also go against this bit of advice: --- 2.2.1 Multiple copies of SQLite linked into the same application As pointed out in the previous paragraph, SQLite takes steps to work around the quirks of POSIX advisory locking. Part of that work-around involves keeping a global list (mutex protected) of open SQLite database files. But, if multiple copies of SQLite are linked into the same application, then there will be multiple instances of this global list. Database connections opened using one copy of the SQLite library will be unaware of database connections opened using the other copy, and will be unable to work around the POSIX advisory locking quirks. A close() operation on one connection might unknowingly clear the locks on a different database connection, leading to database corruption. The scenario above sounds far-fetched. But the SQLite developers are aware of at least one commercial product that was released with exactly this bug. The vendor came to the SQLite developers seeking help in tracking down some infrequent database corruption issues they were seeing on Linux and Mac. The problem was eventually traced to the fact that the application was linking against two separate copies of SQLite. The solution was to change the application build procedures to link against just one copy of SQLite instead of two. --- so perhaps this is down to ', . It just occurred to me that when we move the DB file out of the way, we might not move the .shm and .wal files. If we don't, bad things will happen. And another thing: do we close the DB correctly when we're done with it? Always?", Rephrased as actions: * Make sure we're checkpointing on a background queue. It's typically an fsync, and it doesn't have to be on the main thread. * Make sure we're recovering correctly by moving _all_ files. * Make sure we're closing the DB! * Fix ", .', *shakes fist at SwiftData* /// Closes a connection. This is called via deinit. Do not call this yourself. private func closeCustomConnection() -> NSError? { let status = sqlite3_close(sqliteDB) OH YEAH?', We close the DB connection via Profile.shutdown, in the background, on app background. So one hypothesis here is that something bad happens around that -- * We get closed twice -- once from Profile.shutdown, once from deinit. I'm adding a guard to avoid that. * We run operations on a closed DB connection. * We close the DB while a checkpoint operation is still running. Seems unlikely that this would take 80 seconds\u2026 * We close the DB while an fsync is occurring??", (In reply to Richard Newman :rnewman from ', ) ', True. But at least we always do it on the same thread: closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/browser.db on <NSThread: 0x7a066ce0>{number = 7, name = (null)}. closeCustomConnection() > Closed /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/browser.db. deinit > deinit: closing connection on thread <NSThread: 0x7a066ce0>{number = 7, name = (null)}. closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/browser.db on <NSThread: 0x7a066ce0>{number = 7, name = (null)}. closeCustomConnection() > Connection was nil. (Same is true of logins.db.)', This scares me. 2015-11-20 18:16:57.316 Debug SQLiteLogins.swift:179 notifyLoginDidChange() > Notifying login did change. 2015-11-20 18:16:57.317 Debug Profile.swift:569 onLoginDidChange > Login did change. 2015-11-20 18:16:59.790 Debug Profile.swift:680 endTimedSyncs() > Stopping sync timer. DEBUG Did enter background DEBUG Did close IPv6 listening socket 13 DEBUG Did close IPv4 listening socket 12 INFO GCDWebServer stopped 2015-11-20 18:16:59.832 Debug SwiftData.swift:433 closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/browser.db on <NSThread: 0x7a1d5940>{number = 9, name = (null)}. 2015-11-20 18:16:59.874 Debug SwiftData.swift:442 closeCustomConnection() > Closed /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/browser.db. 2015-11-20 18:16:59.876 Debug SwiftData.swift:372 deinit > deinit: closing connection on thread <NSThread: 0x7a1d5940>{number = 9, name = (null)}. 2015-11-20 18:16:59.876 Debug SwiftData.swift:433 closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/browser.db on <NSThread: 0x7a1d5940>{number = 9, name = (null)}. 2015-11-20 18:16:59.877 Warning SwiftData.swift:437 closeCustomConnection() > Connection was nil. 2015-11-20 18:16:59.878 Debug SwiftData.swift:433 closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/logins.db on <NSThread: 0x7a1d5940>{number = 9, name = (null)}. 2015-11-20 18:16:59.929 Debug SwiftData.swift:442 closeCustomConnection() > Closed /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/logins.db. 2015-11-20 18:16:59.931 Debug SwiftData.swift:372 deinit > deinit: closing connection on thread <NSThread: 0x7a1d5940>{number = 9, name = (null)}. 2015-11-20 18:16:59.935 Debug SwiftData.swift:433 closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/logins.db on <NSThread: 0x7a1d5940>{number = 9, name = (null)}. 2015-11-20 18:16:59.974 Warning SwiftData.swift:437 closeCustomConnection() > Connection was nil. 2015-11-20 18:17:00.614 Info Profile.swift:750 withSyncInputs(_:function:) > Syncing logins. \u2026 Yeah, we can end up with a sync running right after we background the app. This should not occur.', Sure enough, logins.db is left open when the app is backgrounded, because we open the DB again as soon as it's needed. Debug SwiftData.swift:435 closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/logins.db on <NSThread: 0x78fa9650>{number = 3, name = (null)}. Debug SwiftData.swift:444 closeCustomConnection() > Closed /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/logins.db. Debug SwiftData.swift:374 deinit > deinit: closing connection on thread <NSThread: 0x78fa9650>{number = 3, name = (null)}. Debug SwiftData.swift:435 closeCustomConnection() > Closing custom connection for /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/logins.db on <NSThread: 0x78fa9650>{number = 3, name = (null)}. Warning SwiftData.swift:439 closeCustomConnection() > Connection was nil. \u2026 Info Profile.swift:750 withSyncInputs(_:function:) > Syncing logins. \u2026 Debug LoginsSynchronizer.swift:163 synchronizeLocalLogins(_:withServer:info:) > Applying incoming password records from response timestamped 1448072831580, last modified 1448072221190. \u2026 Debug SwiftData.swift:308 init(filename:flags:key:prevKey:) > Opening connection to /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/16CEFA0F-B4F1-490A-8E17-8CAFEFE5E6EB/profile.profile/logins.db. Info SwiftData.swift:351 init(filename:flags:key:prevKey:) > Enabling WAL mode. Debug IndependentRecordSynchronizer.swift:85 uploadRecords(_:by:lastTimestamp:storageClient:onUpload:) > No modified records to upload. Debug IndependentRecordSynchronizer.swift:99 uploadRecords(_:by:lastTimestamp:storageClient:onUpload:) > Uploading 1 modified records. Debug IndependentRecordSynchronizer.swift:30 sequentialPosts(_:by:lastTimestamp:storageOp:) > Uploading 1 records. Debug StorageClient.swift:329 failFromResponse > Status code: 200. Debug SQLiteLogins.swift:823 markAsSynchronized(_:modified:) > Marking 1 GUIDs as synchronized. Debug Synchronizer.swift:217 setTimestamp > Setting post-upload lastFetched to 1448072831670. Debug LoginsSynchronizer.swift:142 uploadOutgoingFromStorage(_:lastTimestamp:withServer:) > Done syncing. I don't think that's intrinsically bad, but it's not what we expect to be happening.", Almost certainly we have a bug of our own. But these offer some hope if that's not the case: ", --- I\'ve dealt with a bug (unrelated to SQLite) that a tester of mine could create data corruption on an iOS device. The tester\'s device had a bad battery, so by the time the device thought it had minutes of power, it had seconds of life left, at best. The tester was quite adept at getting their device in a specific state that would cause our app to destroy a data file. I could never reproduce the condition on my device, and indeed this tester couldn\'t either. It had to be this specific device with it\'s battery. This is a lot of words to say: All sorts of bad things are possible when these devices start to lose power. I\'ve run into other issues that lead me to believe the OS is caching file writes until the app exits in some situations regardless of various sync calls, but I never did have time to track down if I was just fooling myself, or if the OS was indeed doing things to "help" me out. --- --- If the device runs out of power normally, your writes are guaranteed. However, your app will get no notice. It\'s equivalent to getting jetsamed during low-memory conditions. That said, it\'s possible to corrupt a database by forcing the device to power off (by holding the power and home buttons) while SQLite\'s writes are in flight. This is equivalent to the conditions of a kernel panic. Using the system-provided SQLite helps, the unix VFS is modified to be (somewhat) more robust on Apple\'s platforms. ---', Something else to consider: memory corruption (which we know Swift can cause: <', >) can result in DB corruption. In that case there's not much we can do.", Re ', : the reason why leaving the DB open is potentially bad: The FS is only fsynced when the DB is checkpointed, or -- presumably -- when the database FD is closed. If our process stays open, holding a connection to the DB on which it's done some writes, and is later jetsammed, it's conceivable that we'll have partial writes due to misbehavior at some level in the OS/FS/flash controller stack. (I'm also curious what happens when a checkpoint is running during termination.) Additionally, it's conceivable that one of the locking mechanisms in play is causing a later instance of the app to decide that the DB is locked. I'm guessing that our dodgy recovery code will then move only the .sqlite file (", ), and replay will decide that the DB is malformed, getting into a cycle of failure.', Further hypotheses: * Presumably we\'re also logging around these things. If we end up reusing a FD incorrectly, we\'ll write junk into the DB. * The logging I added indicates that we\'re doing some operations on two threads, which isn\'t right. 2015-11-21 13:04:33.025 Debug SwiftData.swift:395 checkpoint > Running WAL checkpoint on /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/F5454955-0A59-4AA9-8C74-577FBC270B43/profile.profile/browser.db on thread <NSThread: 0x79994740>{number = 3, name = (null)}. 2015-11-21 13:04:33.026 Debug SwiftData.swift:397 checkpoint > WAL checkpoint done on /Users/rnewman/Library/Developer/CoreSimulato DEBUG Did open connection on socket 21 r/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/F5454955-0A59-4AA9-8C74-577FBC270B43/profile.profile/browser.db. DEBUG Connection received 302 bytes on socket 21 2015-11-21 13:04:33.064 Debug BrowserDB.swift:126 createOrUpdate > Create or update commands version 1 on <NSThread: 0x79994740>{number = 3, name = (null)}. DEBUG Connection aborted with status code 405 on socket 21 2015-11-21 13:04:33.064 Debug BrowserDB.swift:128 createOrUpdate > Doesn\'t exist. Creating table commands. DEBUG Connection sent 113 bytes on socket 21 2015-11-21 13:04:33.064 Debug BrowserDB.swift:56 createTable(_:table:) > Try create commands version 1 DEBUG Did close connection on socket 21 VERBOSE ::1:6571 ::1:63372 405 "GET /favicon.ico" (302 | 113) 2015-11-21 13:04:33.065 Debug SwiftData.swift:395 checkpoint > Running WAL checkpoint on /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/F5454955-0A59-4AA9-8C74-577FBC270B43/profile.profile/browser.db on thread <NSThread: 0x79994740>{number = 3, name = (null)}. 2015-11-21 13:04:33.066 Debug SwiftData.swift:397 checkpoint > WAL checkpoint done on /Users/rnewman/Library/Developer/CoreSimulator/Devices/522A062C-9D9F-4011-BC6C-972FA475A849/data/Containers/Shared/AppGroup/F5454955-0A59-4AA9-8C74-577FBC270B43/profile.profile/browser.db. 2015-11-21 13:04:33.068 Debug BrowserDB.swift:126 createOrUpdate > Create or update clients version 1 on <NSThread: 0x799cdf40>{number = 6, name = (null)}. 2015-11-21 13:04:33.069 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update clients version 1 2015-11-21 13:04:33.069 Debug BrowserDB.swift:139 createOrUpdate > Table clients already exists.', From TheLink\'s last logs, our open DB FDs: 22: "/private/var/mobile/Containers/\u2026/profile.profile/logins.db" 23: "/private/var/mobile/Containers/\u2026/profile.profile/logins.db-wal" 25: "/private/var/mobile/Containers/\u2026/profile.profile/logins.db-shm" 26: "/private/var/mobile/Containers/\u2026/profile.profile/logins.db-shm" 27: "/private/var/mobile/Containers/\u2026/profile.profile/logins.db-shm" 8: "/private/var/mobile/Containers/\u2026/profile.profile/browser.db" 9: "/private/var/mobile/Containers/\u2026/profile.profile/browser.db" 11: "/private/var/mobile/Containers/\u2026/profile.profile/browser.db" 12: "/private/var/mobile/Containers/\u2026/profile.profile/browser.db-wal" 18: "/private/var/mobile/Containers/\u2026/profile.profile/browser.db-wal" 19: "/private/var/mobile/Containers/\u2026/profile.profile/browser.db-wal" 13: "/private/var/mobile/Containers/\u2026/profile.profile/browser.db-shm" That seems\u2026 not right.', --- Applications must finalize all prepared statements and close all BLOB handles associated with the sqlite3 object prior to attempting to close the object. If sqlite3_close() is called on a database connection that still has outstanding prepared statements or BLOB handles, then it returns SQLITE_BUSY. -- 2015-11-24 12:32:09.947 Debug Downloader.swift:203 handleSuccess > Got success response with Optional(500) records. 2015-11-24 12:32:09.947 Debug HistorySynchronizer.swift:195 onBatchResult > Running another batch. 2015-11-24 12:32:20.128 Debug Profile.swift:685 endTimedSyncs() > Stopping sync timer. 2015-11-24 12:32:20.135 Debug SwiftData.swift:445 closeCustomConnection() > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/CA882205-32AE-4531-BBCC-B80F45210030/profile.profile/browser.db on <NSThread: 0x12f56b050>{number = 10, name = (null)}. 2015-11-24 12:32:20.136 Debug SwiftData.swift:454 closeCustomConnection() > Closed /private/var/mobile/Containers/Shared/AppGroup/CA882205-32AE-4531-BBCC-B80F45210030/profile.profile/browser.db. 2015-11-24 12:32:20.141 Error SwiftData.swift:458 closeCustomConnection() > Got 5 while closing. 2015-11-24 12:32:20.141 Debug SwiftData.swift:445 closeCustomConnection() > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/CA882205-32AE-4531-BBCC-B80F45210030/profile.profile/logins.db on <NSThread: 0x12f56b050>{number = 10, name = (null)}.', What's happening there: We're in the middle of applying a history batch when the app is backgrounded. The regular backgrounding code runs, which attempts to close the database using sqlite3_close. It fails with SQLITE_BUSY because a prepared statement still exists. That leaves the database handle open. We nil it out regardless. Subsequent code running on the same queue comes to access the DB, finds it nil, and opens another connection. This *should* be fine\u2026 but it's not what we intend. The fix here is probably to just use deinit to close the DB, using refcounting, and to use sqlite_close_v2 to make sure that the connection eventually closes. (Part of the issue here is that SwiftData objects are Java-ish, not immutable: the same SwiftData object can represent a closed database and an open one, potentially with multiple connections over its lifetime. Confusing!)", Aaaand boom, I can repro this now. logins.db gets trashed every time Xcode kills the app. I'm concerned that this is specific to sqlcipher, because it doesn't affect browser.db.", I'm pretty sure this was fixed by the six dependencies, so resolving." 
id=1237323	 'Created ', Safari Prompt', *** This bug has been marked as a duplicate of ', ***' 
id=1170672	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Comment on GH. LGTM.' 
id=1183075	 'Currently having a hard time reproducing this bug. Not sure what caused it initially. More feedback would be great.', On master (85d17), reader-view is functional for me (iPhone 6) across a number of live articles', I'll take this and do more testing. We did get a bug report from a user with the behaviour that I saw initially so I want to see.", Having a hard time reproducing this bug. Marking as WORKSFORME but will open immediately when someone sees this again.', Seeing this again on master, investigating STR', Stefan, is this still on your plate, or should we put it back in the queue?', Works for me.' 
id=1260899	 'Created ', ', Link to Github pull-request: ', Figured I should probably attach this instead of having it live in Github. Sorry for the feedback flag!', I hope to get to this today. (Sorry for the Tofino-related delays!)', Comment on ', ', Link to Github pull-request: ', Reflagging for feedback on adding editable checks and tests. I know yo re busy but I wouldn't mind some feedback on the approach and questions I have about the unit tests. Thanks in advance!", master 5979d61c9ff72d00e4c18b85a4f805f9d86b36a4' 
id=1141847	 'Landed apart from prod URI switchover and hooking into pull-to-refresh. ', Syncing tabs *up* is now ', .' 
id=1097620	 'We are supporting two types of interactions in the share sheet: Sharing to the app and Sending to a device. On Android\'s share list, both are included and are "Add to BrowserName" and "Send Tab to Devices" \u2014 in the same list view. In iOS, these interactions are separated \u2014 but on the same Share Widget. I am for keeping "Send to Device" to keep parity with Android and Desktop (currently in Add-on form).', FWIW I\'ve always thought "Send to" was enough... adding "device" seems too long/ jargon-y', Created ', Screen Shot 2014-11-12 at 7.05.59 PM.png To give you an idea of what that would look like in the iOS Share Sheet, I have attached a screenshot. Note that the order of the actions is user configurable.', Thanks Anthony and Stefan. I am with Anthony, "Send to" may be enough. After all, if you can send to desktop, do users consider it to be a device? (it is, of course, but I am guessing \'Send to Device\' began with the intention of sending to mobile devices only).', I have mixed feelings about having two actions. I don't think it is bad per se, but I do think they could be all be under one Share Action. In the top row with a colorful icon. It would be one less thing for a user to make a decision about. Am I going to send or add? Hmmm. What is the difference? It would be one less thing to discover. (Initially those actions are not visible or even enabled I think, a user has to go to the last button, which is 'More...', and rearrange the firefox provided ones. But maybe more important: The top row actions, which are Share Extensions seem to be mostly about sharing the thing you are looking at with an *external* service or place in the cloud. While the bottom row, with Action Extensions, are mostly about things you do *locally* on the device. Like 'Copy' or 'Lookup in 1Password or 'Add to Home Screen'. Note that there absolutely is confusion about this in general. Just look at the all the ToDo list apps: Omnifocus has a Share extension while Wunderlist and Things have Action Extensions. Apple is definitely not super clear about where to put what. I have no clear opinion yet, just a gut feeling.", Interesting read: Apple's HIG about app extensions: ", (In reply to Robin Andersen :tecgirl from ', ) ', Just a point of clarification: We only support the "Add to <Nightly|Aurora|Firefox>" on Android these days. We used to support the "Send Tab to Devices" (and still do on Fx34 and Fx33). The only reason you see both is because we are in the transition period. You probably have Nightly and Release installed. Point being: We only really show up once in the list on Android. Since this seems like a OS integration issue, I think we should go with what feels right for the platform as a main priority. We should think about cross-platform consistency, but it might be secondary in this case.', (In reply to Stefan Arentz :st3fan from ', ) ', The actions we are trying to support: Adding a bookmark, Add to Reading List and Send to Device I find it interesting that bookmarks and reading list are already in the "actions" part of the sheet, presumably implemented by iOS itself. How concerned are we about user confusion? What can we do to help people understand which actions are Firefox-centric?', That confusion (what would "Add to reading list" mean in an Android share list?), combined with the various kinds of add/send operations we support, is why we opted for the ambiguous-but-suggestive "Add to Firefox". ("Add" makes some amount of sense as an umbrella for "send" if you consider that the Firefox you\'re adding it to might be your desktop.) Android also typically orders alphabetically, so "add" was much more attractive than "send" in every language I investigated.', (In reply to Robin Andersen :tecgirl from ', ) ', Figured I\'d reply with some history, here, \'cos I think I\'m the only person who\'s still around from 2011! Sending actually started desktop to desktop, but of course it was only called "Send Tab" -- no ambiguity. When it came time to give it a name as an Android intent handler, we settled on "Send to device", for a number of reasons: * No "tab", because the majority of interactions with this will be, e.g., sharing a link from Feedly, rather than sending a tab from a browser. * "Send" rather than "add" or "share", because at the time this was only for sending tabs. * "Device" because we couldn\'t assume desktop, laptop, or mobile -- you could be sending to your Android tablet, a Windows desktop, your work Android phone, whatever. There\'s also precedent here: Desktop shows "Tabs from other devices", and "device" is the term we use during various setup flows to talk about anything you might connect to your Firefox Account. (We really need good vocabulary for "black mirror", don\'t we? I guess we could just wait five years and call everything a phone.) * "Send to Firefox" was ruled out at this stage for two reasons: we couldn\'t assume what the destination was (Firefox, Nightly\u2026), but more importantly "Send to Firefox" felt misleading -- "why can\'t I send this to my reading list?". That\'s the point at which I filed the "Send to Firefox" bug, which evolved into "Add to Firefox" for reasons in ', , amongst other things.', Another thing I noticed is how Share Extensions are named. I have these on my iPhone: Message Mail Twitter Add to Firefox Facebook Instapaper Pocket Omnifocus Evernote Transmit See how we are doing something different there? All the other Share Extensions simply have the name of the application. The 'Share with...' is implicit in that list. I'll try to find out if this is a requirement or not.", (In reply to Mark Finkle (:mfinkle) from ', ) ', Also, they cannot be removed from the list. You can move them to the end of the list, but you cannot, like with third-party actions, hide them if you do not use them.', ', Although from both Richard's comment as well as this list, there seems to be a (not insane) idea to refer to this action as simply 'Firefox' or some iteration of, I fear that as a user, I would have no idea that I was sharing (adding) to my Firefox bookmarks, Firefox Reading list, or sending to another Firefox screen. I think we have value in sending tabs (URLs) to disparate areas of Firefox and these are different actions a user can make. We're also different in that if you share with Pocket, you know what's happening to it; whereas if you share with Firefox, you don't know which bucket it will end up in. If we were to simply utilize the Sharing extension, maybe being more explicit would serve the purpose? ie Firefox Reader; Firefox Bookmarks; Firefox <device>? BTW, I'm really loathe to perpetuate the 'device' nomenclature. It just doesn't feel right to refer to my desktop as a device. I think it works for phones & tablets, but not really for laptops & desktops. And in that sense, I personally lean to use 'Share' for adding to my Firefox bookmarks and reading list, but have another action for 'Send' that I can then distinguish with pushing data in real-time to another Firefox instance. I would also hope to have a list pop up with my Firefox instances connected to Firefox Accounts and simply use *those* friendly names to denote which instance I want to send it to.", Many of the above examples are for instances where there is only one action, so the product can get away with using the product name only. We are providing two, Add to Reading List/Bookmark *and* Sending a Tab. So it makes sense to use "Firefox" for the share extension, but "Send Tab" for the send extension.' 
id=1202772	 'Not something we can expect localizers to fix by 1.0.5.', Needs to land before string freeze this week', r=me. Landed 51f83ad.', Was other occurrences of "Sign in" left out intentionally? ', Yeah, this convention only applies to the settings screen. The other occurrences are buttons in the regular browser UI (the one you linked to was actually an unused button/string; I just removed this in 8f286575).' 
id=1270959	 'Created ', ', PR: ', Comment on ', ', PR: ', lgtm' 
id=1151716	 '9934d77' 
id=1163284	 "I'm nervous that we're seeing a 200-300ms double tap listener going on. I'm going to investigate for next week.", Tracking result: unassigning to free up work for others. Wes, steal back if you have results to show!', Is this still an issue with build 19+?', It seems it's not.", We think this was mostly the broken throbber code.' 
id=1173160	 "I'm not sure we do this. i.e. AFAIK typing 'f' autocompletes with facebook.com on Desktop/Android, and should for us. Without doing the query we can't even do that. I don't even think Android debounces, which is why I chased ", first her (but we should debounce).', (In reply to Wesley Johnston (:wesj) from ', ) ', Yeah, I'm torn. This also might not help at all -- longer strings don't eliminate the need to do a full table scan; they just reduce the number of results, and increase the wait before the first query runs. Only ", will fix that. The value I'm guessing that there is in this bug is that increased wait: we'll give the user time to get some characters in before we hammer the DB. Not ideal, but it might improve the experience. Should be easy to try this out and either do it as a short-term stopgap or WONTFIX." 
id=1282967	 'Created ', ', Pull request', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Pull request Looks good!', Comment on ', ', Pull request Nice fix, left a small comment.' 
id=1185054	 'Or the other question is, do we even suggest bookmarks if not why not?', *** This bug has been marked as a duplicate of ', ***' 
id=1252286	 'Created ', ', Link to Github pull-request: ', Removes our 90x90 iOS Wikipedia image and just uses the 96x96 icon we import directly from Android.', Question about non-English locales.' 
id=1194324	 "Isn't this fixed by emily?", Created ', Screen Shot 2015-08-13 at 10.05.35 PM.png Right after a Sync', duplicate of 1194274 *** This bug has been marked as a duplicate of ', ***' 
id=1230623	 'We can fake an applicationWillTerminate by backgrounding the app with UIApplicationExitsOnSuspend = YES in Info.plist. That gives us a little bit of out-of-order stuff -- our usual backgrounding code runs -- but it still works: In normal operation aWT is called much later, so this is fine. DEBUG Did enter background DEBUG Did close IPv6 listening socket 8 DEBUG Did close IPv4 listening socket 7 INFO GCDWebServer stopped 2015-12-04 10:39:02.096 Debug AppDelegate.swift:134 applicationWillTerminate > Application will terminate. 2015-12-04 10:39:02.116 Debug Profile.swift:244 shutdown() > Shutting down profile. 2015-12-04 10:39:02.127 Debug SwiftData.swift:424 deinit > deinit: closing connection on thread <NSThread: 0x12c61ade0>{number = 1, name = main}. 2015-12-04 10:39:02.135 Debug SwiftData.swift:487 closeCustomConnection(immediately:) > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/A84FCE11-91C9-4074-A0FC-5B72AC829F34/profile.profile/browser.db on <NSThread: 0x12c61ade0>{number = 1, name = main}. 2015-12-04 10:39:02.144 Debug Profile.swift:237 background() > Backgrounding profile. 2015-12-04 10:39:02.149 Debug SwiftData.swift:507 closeCustomConnection(immediately:) > Closed /private/var/mobile/Containers/Shared/AppGroup/A84FCE11-91C9-4074-A0FC-5B72AC829F34/profile.profile/browser.db. 2015-12-04 10:39:02.158 Debug Profile.swift:226 logProfileFDs() > Open file descriptors:', Sorry, clearer logs without uncommitted code! 2015-12-04 10:44:24.849 Debug Profile.swift:902 syncEverythingSoon() > Running delayed startup sync. 2015-12-04 10:44:25.009 Warning Profile.swift:858 withSyncInputs(_:function:) > No account; can't sync. 2015-12-04 10:44:25.559 Debug Profile.swift:770 endTimedSyncs() > Stopping sync timer. DEBUG Did enter background DEBUG Did close IPv6 listening socket 8 DEBUG Did close IPv4 listening socket 7 INFO GCDWebServer stopped 2015-12-04 10:44:25.589 Debug Profile.swift:224 shutdown() > Shutting down profile. 2015-12-04 10:44:25.598 Debug SwiftData.swift:424 deinit > deinit: closing connection on thread <NSThread: 0x157d31300>{number = 6, name = (null)}. 2015-12-04 10:44:25.609 Debug AppDelegate.swift:134 applicationWillTerminate > Application will terminate. 2015-12-04 10:44:25.616 Debug Profile.swift:224 shutdown() > Shutting down profile.", Created ', ', Link to Github pull-request: ', master: edb7d40 Any strong opinions about uplifting this?', No strong opinions, only questions. Will iOS call applicationWillTerminate just before device shutdown on battery depletion?', That's pretty much the only purpose of applicationWillTerminate in iOS4+: if the app is in the foreground and is about to be terminated. Otherwise we get an equivalent notification for entering the background. Apparently aWT t can be called when we're recently backgrounded but need to be terminated (memory pressure?), but I don't know the precise circumstances.", I don't think the circumstances are spelled out, but memory pressure is probably the main reason. THe docs say we do get 5 seconds to clean up in applicationWillTerminate:" 
id=1265389	 'Created ', ', Link to Github pull-request: ', Created ', Simulator Screen Shot May 16, 2016, 3.36.03 PM.png I think I'm missing a number of icons: shareMenu-pbm shareMenu-Engaged bottomNav-HomePage Screenshot shows homepage button in URL bar in private browsing mode with menu open.", (In reply to James Hugman :jhugman @jhugman from ', ) ', The share menu icons are the same as used on the bottom nav. They are in the send and send.pressed imagesets The label on that should read 'Send' and not 'Share'. bottomNav icons are attached to ", Comment on ', ', Link to Github pull-request: ', Works well! Just have some polish questions around strings/assets.', :tecgirl I've addressed :bnicholson's pbm issue with icons, though he has another one with taller/blurry send icon. ", Addressed all other feedback, ready for re-review.', Should be merged into ', Comment on ', ', Link to Github pull-request: ', Question about setting the pref on each init, but otherwise LGTM assuming the share menu assets get fixed.', Comment on ', Simulator Screen Shot May 16, 2016, 3.36.03 PM.png Looking good! Nits: The pagination dots will need to shift to grey for normal browsing mode. String update: Remove \'the\' from "You can change this at any time in the Settings" Possible bug: After setting a homepage, it displays in Settings but the "Show homepage icon" in menu is set to \'off\'.', tecgirl feedback: * Filed pagination dots color ', . * Updated String * Not sure what you mean. The toggle should switch the position of the homepage button (menu or toolbar).', Created ', Share menu image Do we have a bug on file to fix the share asset in the menu? The share button is a noticeably lighter shade of gray than the other menu buttons. It also appears taller since it's the only image in the menu that doesn't have padding -- see attachment.", Opened ', to track this there.', (In reply to James Hugman :jhugman @jhugman from ', ) ', ', - it doesn't! see ", (immediately after setting page)' 
id=1155209	 'STR: Open a bunch of tabs, close one in the middle, close and re-open the tray and see the gap', Created ', Screen Shot 2015-04-20 at 11.25.56 AM.png', *** This bug has been marked as a duplicate of ', ***' 
id=1177404	 'Created ', ', ', Comment on ', ', ', LGTM', Merged.' 
id=1254799	 'Created ', ', PR: ', r=me' 
id=1135175	 'Created ', ', Pull request', Comment on ', ', Pull request Awesome! Let's merge it and see how it performs. I thought we should do this with a pre rendered PNG. But if a path works fine then maybe that is more elegant. And it allows us to do more interesting animations probably." 
id=1123402	 'This may be related to 1123501 (Opening links on a page does not always work) and not be reader mode specific.', *** This bug has been marked as a duplicate of ', ***', Just to confirm that the links on the page mentioned in the first comment indeed work now \\o/' 
id=1197465	 'We certainly should!', *shakes fist at WKWebView*', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Let's land this after the v1 split. It can be our first trial run of backporting a v1.0.5 fix to master.", bnicholson: you can land this in both branches at your leisure :)', v1.0: 1e3994790c6e710c8387f834ffe387f47b1c4023' 
id=1146611	 'Created ', ', PR ', Does this seem reasonable? I don't know why we'd ignore protocols...?", The main reason to ignore protocols is as a security measure so that sites cannot transfer data to apps. Like x-some-app://foo?name=Stefan&personalData=LikesCheese .. I think if we prompt that is fine though? See my note about a few special cases. I think we should mostly follow Safari.', Comment on ', ', PR ', I think this is good. Let's merge it and see how it works in practice." 
id=1278555	 'Created ', ', Link to Github pull-request: ', Added direction to isEditable query so we can differentiate between local/buffer bookmarks. :rnewman if you have time for feedback on this it's always most appreciated!", Comment on ', ', Link to Github pull-request: ', Works well', master 2cfcba5d4bfa118450acbae277a1d94f6912d717', v5.x 1898dd8' 
id=1159562	 'Pull request being reviewed in ', .', With extra tests!' 
id=1223405	 'Resolved as part of ' 
id=1294175	 "Just a note that since 5.1 releases comes from 5.x branch, we'll just have to update this list for 5.1: ", Created ', ', Updated list of locales for 5.1 Attaching link to Delphine's r+ patch for tracking.", Merged in v5.x ', Added locales (if someone wants to relnote it): en-GB, hu, ne-NP, te.' 
id=1248790	 'This is lined up in my PR: ', Created ', ', Pull req. This already landed in master, but this is a slightly different implementation and also fixes the tests (which weren't runnable until recently).", Reverted temporary commit in master: 2a85b4d303e03299598950c7982a7dade3d6f6b4', 833d692' 
id=1181583	 '*** ', has been marked as a duplicate of this bug. ***', It's not obvious, but this is ", . That ticket has a patch waiting for review. *** This bug has been marked as a duplicate of ', ***' 
id=1234899	 'Created ', ', Pull Request', Here are some screenshots ', ', Comment on ', ', Pull Request Looks good!', master 42bc048701df02204bc96ce361ba28e11fcc7852' 
id=1258548	 'Created ', ', Github PR ', Fixes this and other related Top Sites issues we're seeing on master.", Comment on ', ', Github PR ', Looks good, just questions about where we want to define strings and a few other minor things.', master 8b9634067f5a4cfd2b85f341e522787fff470c07' 
id=1094199	 "Please prefix future bugs until there's a product/component", This is old from earlier prototype. no longer a concern' 
id=1201102	 ':st3fan have you seen this before?', I don\'t think any data goes missing. For example, this is how Cancel is exported: <trans-unit id="Cancel"> <source>Cancel</source> <target>Annuleren</target> <note>Alert Cancel Button Authentication prompt cancel button Button label to cancel entering a URL or search query Cancel alert view Cancel button Cancel button in the \'log out firefox account\' alert</note> </trans-unit> The multiple comments are put together in the notes field in the XLIFF. Needinfo :flod to find out if this really is something we need to address.', So where comments like "Cancel title from search engine picker" go? ', (see also ', )', (passing by, still on PTO until next Monday) That's export-locales.sh, but just as a side effect. Those warnings come from xcodebuild ", I don\'t think comments are lost, they\'re added to the same string. The only strange one is "Cancel", if I export now I get only the last comment ("Cancel title from search engine picker"), instead of all the previous ones.', Tool is stupid.', (In reply to Richard Newman :rnewman from ', ) ', Don\'t know what exactly "Tool is stupid." means but I\'m reopening as per ', .' 
id=1189413	 'Created ', ', PR ', Looks like the removal of this line was causing problems. I know both of you guys worked on this recently for fixing crashes and such. Is there any reason we should not do this?', Comment on ', ', PR ', This is a regression from ', . I think codester removed it because in general, deleteBackward() will end up triggering SELtextDidChange() because a character will be deleted. The initial highlight is an exception, though, since we set the cursor to the beginning of the text field when doing that highlight, meaning deleteBackward() has no characters to delete. Note that an alternative fix would be to remove this line 1 , but we probably don't want to do that since we want the URL bar to show the beginning of the text when we first select it. So in short, I think this fix is fine. It'd be good to have a simple test for this if you don't mind! 1 ", Added UI test for scenario: ', I'll go ahead and merge this in.", Merged.' 
id=1139457	 'Created ', ', PR ', This keeps us from scrolling the statusbar off screen, and switches its style (as you scroll) so that the text is visible.', Comment on ', ', PR ', Looks good to me. Also, I like this new behavior of the status bar.' 
id=1213318	 'Reviewed as part of ', . 055b4bb' 
id=1149585	 'Same behaviour on Twitter', Created ', ', PR: ', Bad last second rename hurt things here, but I also fixed a few other bugs. For instance, Twitter broke because it includes two forms, and we used the wrong one when deciding whether to save or not. I've also seen cases where two snackbars can appear. I limited the PasswordManager for each Browser to only showing one here.", Comment on ', ', PR: ', Looks good. I am seeing the snackbar for the first time when I log in to a site.' 
id=1268994	 'Created ', ', Link to Github pull-request: ', I noticed that Android still doesn't have search suggestions for Amazon. Posted a comment in ", to see if we can land it there, so that's one less override we'll need.", Comment on ', ', Link to Github pull-request: ', Robin, this resyncs all of our en-US search icons with Android. Can you make sure everything looks OK? Changes I notice looking at the before/after: * The Amazon "a" is larger * The Bing "b" is larger * The Google background gray is darker * The Twitter blue color is more neutral * The DuckDuckGo duck seems to be missing his eyebrows now :)', Actually, I think I had the screenshots backwards when comparing them. So look for the opposite of everything I just said!', Created ', QuickSearchIcons-updated Good eyes. :bnicholson! Yes, a few are off. I spoke with Anthony and we'd like to make sure these are the same on both platforms. Replace the iOS set with these and he'll match them with the right sizes for Android.", FYI the Android images are 96x96, whereas these are 30/60/90. Does iOS standardize on 30/60/90? I'm wondering what we should pick that we can use on both platforms. Otherwise, we'll still have to have separate search plugins for android and iOS...", I'll update them in ", (In reply to Robin Andersen :tecgirl from ', ) ', Hm, the goal here is to use the same engine icons that Android has. That way, we can re-run the import script to pull in whatever icons Android is using in the future -- and we won't need to tweak icons to be specific to iOS. If we have different sizes on Android, this change won't help much, since it sounds like we'd still be maintaining different images. As Mike said, it'd be nice if we can use the exact same set of images on both platforms (we already do use exactly the same icons that Android uses for every other locale, so I'm not sure why en-US would be a special case).", Comment on ', ', Link to Github pull-request: ', I don't think I am the best person to review search engine changes. Adding :flod because I thin he knows much more about this. Please feel free to re-assign to someone else if you know someone in a better position to review this.", Comment on ', ', Link to Github pull-request: ', I left a couple of questions in the PR but it looks good. Also tested locally and it works as expected.', Robin, do the images in the PR look OK for now? They're using the same icons Android is using, which means we'll be in sync. Once Anthony updates the icons in ", , we can run the script again to resync.', Yes, they're fine for now. Use Ant's icons from ", and we're good. His have slightly more corner radius, and that's OK." 
id=1162629	 'Robin, what do you think?', Stefan, could you attach the screenshot?', Created ', ', PR: ', First iteration to get this bug going. This patch simply filters out clients with no tabs. If there are no clients at all then the home panel shows the (unimplemented) empty state.', Comment on ', ', PR: ', First iteration looks good just super minor nit comment', Nit fixed!', We need a state where you have no devices at all or no devices with tabs. Robin, what do you think?', Robin, how about we use the same empty states here that we have for the Send Tab extension? We cover two cases there: "Not logged in to FxA" and "No other devices".', Stefan, works for me!', The no tabs state (and 'sync error' and 'no clients') has been implemented as part of ", *** This bug has been marked as a duplicate of ', ***' 
id=1183851	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks for the PR -- unfortunately, the fix will be a bit more complicated than this. We still want to update the URL when we're not in editing mode, so we'll still need to update the display URL on rotation. It needs to be a conditional update: ignore if we're in editing mode, but proceed otherwise. Also, we need similar checks for other parts of the URL bar, such as the lock icon and the reader mode icon.", Actually, with ', landed, we shouldn't need to update the display URL on rotation since the URL bar needs to respond only to the URL updated KVO event. We still need to handle the lock and reader icon as mentioned, though.", Would you please further explain what do you mean by "handle the lock and reader icon" ? With my fix : if we are in editing mode : lock and reader icons hidden -> rotation -> icons stays hidden if not in editing mode : lock and reader icons visible -> rotation -> icons visible editing -> rotation -> go button : icons visible I think that\'s normal behaviour no ?', (In reply to Mosbah from ', ) Steps: 1) Go to google.com, see lock icon. 2) Tap the URL bar, no lock icon (correct behavior). 3) Rotate, lock icon appears (incorrect).', Created ', Bug_1183851.gif : shows the behaviour after rotation', Fixed by URL bar refactor (', ).' 
id=1250749	 'Created ', panelHistoryCombined.zip', Created ', sync-devices.zip :bkmunar \u2014 device stack assets', Created ', RecentlyClosedHeader.png Visual update for "Recently Closed" smart folder screen. The header should match the pattern we\'re using elsewhere.' 
id=1174153	 'Does ', fix this?' 
id=1171522	 'Works in Safari. This might be bad for things like portals too. Ought to investigate.', I think this is related to: ', Let's land it and see if it fixes this", James, do you have context here?', As noted in ', , it didn't fix this issue and I'm still seeing it today on Version 2.1 (2).", MattN suggested that Persona might be using window.close() from the parent, using the reference of the child window: var win = window.open(...); win.close(); Seems like a plausible cause to me, and we should support this usage regardless.', I'm not sure but the code may be one of the two window.close at ", I've identified the case in which, and why, this does not work: When you open a new window using window.open() with a URI that is considered cross-domain, some of the properties \u2014 including, crucially, the window.close method, become read-only. To hook into window.close, we try to overwrite it, but with a cross-domain window pair, the attempt is simply ignored, and so the custom code is never run. Essentially, we can't modify opened windows in any way. This makes listening for events on them difficult, but I'm going to see if I can find a way round the problem.", Created ', ', Pull request', Comment on ', ', Pull request As mentioned over IRC, let\'s try out the "new" iOS9 webViewDidClose callback in WebViewUIDelegate (not sure how we missed this one before!). I think your proxy hack could be a good alternative if webViewDidClose doesn\'t work as we expect.', Comment on ', ', Pull request Looks great! Left a few minor comments in the PR, but looks good to land otherwise.', Low risk (and the BrowserHelper is disabled altogether for iOS 9+), so uplifting to v5.x since this bug can be annoying. v5.x: 7448fdc' 
id=1241823	 
id=1187089	 'Wes is tackling this in the main bug. *** This bug has been marked as a duplicate of ', ***' 
id=1118046	 '(Trying out our new "iOS 8" OS field!)', Created ', ', Pull request This removes Magical Record and instead inserts FMDB. I removed all of our current MR and ManagedObject code as well.', Comment on ', ', Pull request LGTM' 
id=1194770	 'Created ', ', Pull request', Comment on ', ', Pull request Top sites no longer show on rotation but there is now a fifth column. We previously had 4 rows.', Rows, not columns! ;)', Comment on ', ', Pull request Looks like there a bug with height/width caching their values because they are lazy properties. Left some commments on the PR.', Comment on ', ', Pull request Moving the lazy to getters gets us half way there - I'm still seeing the 5 rows on the TopSitesPanel. What I noticed is that transitionToOrientation gets called only once on init which causes the heights/widths to have the incorrect value of 667 (screen height) since the panel hasn't laid out it's subviews yet. I tried to override the view controller's viewDidLayoutSubviews method like so: override func viewDidLayoutSubviews() { super.viewDidLayoutSubviews() if let collectionSize = collection?.frame.size { layout.transitionToOrientation(UIView.viewOrientationForSize(collectionSize), atSize: collectionSize) } } And that seems to work since we're telling the layout to update after it's finished doing it's layout. I think with that snippet added, we're good to go on the patch!" 
id=1208518	 'Created ', ', Pull request', Comment on ', ', Pull request lgtm' 
id=1253482	 'Created ', ', Pull req. Stack 'em high. The thinking here is explained in the comment. I'm actually quite pleased by each of these bugs: they're all safe, self-recovering failure modes.", 7259073', v3.x 93d711d' 
id=1221709	 'Flagging me for additional review to make sure the DB stuff and tests are right.', Consider whether to also include Sync-related messaging here, a la ', .', Created ', ', Link to Github pull-request: ', Same logic as deletion from the list.', master 67e1533e308e93ff43a35688ec831d52154aecb3' 
id=1132795	 'Created ', ', Pull request Stefan, flagging you since you recommended looking at Carthage and should know how to fix Travis integration. Nick, flagging you since yo re usually interested in build-related things!", Comment on ', ', Pull request This is good stuff but we have a bunch of issues to work out before we can land this. See the comments on Github. I also filed an issue in the Carthage project to find out how to deal with our more complicated build config.', Comment on ', ', Pull request This seems sensible to me. I will try to get SwiftKeychainWrapper into Carthage, but it may not be the right fit since I want to apply some local modifications. Perhaps upstream will be interested, or perhaps I (mozilla?) will host the forked repo on GH and we can make that the Carthage endpoint. I needed to purge my derived data directory, but then my build succeed and all tests passed (including KIF tests, which I had not run before).', Merged...let's see what happens." 
id=1168136	 'Created ', ', PR: ', This patch adds support for a 'Compact Tab Tray' preference that shows more tabs horizontally when enabled.", Comment on ', ', PR: ', Looks like on first launch it's using compactTabs although the settings menu shows that compactTabs is not selected. Should the toggle be on by default or are we defaulting to non-compact tabs?", Fixed the settings, it should default to on, and merged.', Let's go back to 3 cols on iPad. 4 is too small.", Created ', ', Followup PR: ', This patch disabled compact tabs on iPad. It defaults to 3 columns and it does not show the Compact Tabs option in the settings.', Comment on ', ', Followup PR: ', LGTM' 
id=1145600	 "What's a tab slice?", Probably the thumbnails in the tabs tray.', Fixed in ', , merged.' 
id=1157402	 'Huh, this seems to have magically fixed itself in nightly/latest for me. We should confirm this with Aaron though.', Yeah I don't see it either, saw it in an earlier build" 
id=1125258	 "Hi Brian, Again, just posting this out in the open since you referred me to this bug report. It is solved, tested in simulator (don't have iOS 8 on my ios devices) and all of alert, confirm, prompt work. ", Created ', ', Pull request' 
id=1232554	 'This is failing on master for me.', Created ', ', Pull request The test still fails. Will raise another bug for that.', Comment on ', ', Pull request Works for me. Added a suggestion that might help clean up the method a bit.', *** ', has been marked as a duplicate of this bug. ***' 
id=1178787	 'Blocking ', \'cos this adds strings. Robin: just "Sync now"? Sentence case or title case?', will work on right after finished with openInFirefox', what're your thoughts on this tecgirl? (for when you get back from pto hehe), do you have some mocks in mind?", :rnewman I prefer sentence case but UX needs to discuss it more. : bkmunar Note the timestamp, blue a-link color (I think this is iOS native, we can make it 'Firefox blue', will check with darrin), and that each section of that cell has a different action. See this: ", (the caret takes you to FxA)', Won't this need strings?", :bkmunar after talking with Darrin, we\'re going with Title Case for "Sync Now". He also confirmed that we are using a custom blue for the tint-color, that is defined in UIConstants.swift (line 31).', Going to have someone review without timestamp and then issue a follow up bug (waiting for newman to get back from fun town)', Created ', ', PR nalexander for the UI stuff rnewman for the Sync stuff', Comment on ', ', PR This is reasonable work in progress, but I have questions: 1) the disclosure indicators seem wrong. The account status shouldn't show a disclosure indicator when no action is required. (I think you changed it to do so.) 2) the l10n should be the same as Synced Tabs. 3) I'm not confident `syncEverything() -> Success` is correct. At the very least, rnewman should weight in -- we talked about aggregating Sync results differently. I guess the real Sync's method must be `syncEverything() -> Success`; if it's good with Richard, it's good with me.", Oh, and: sorry for the delayed review. I'm trying to catch up.", Comment on ', ', PR Looks like Nick reviewed this.', There's a follow-up for styling (", ) but I think this can be closed out.' 
id=1187418	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', See review comment, then make sure it works. Ping if you need one of us to merge.', Merged PR: ' 
id=1199699	 
id=1147381	 'Created ', ', PR: ', This fixes a crash on the iPad that happens when we try to present the UIActivityController. Because we need to know the source view/frame of the button pressed, i have also added a reference to the button in the BrowserToolbarDelegate functions.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1136294	 "Some considerations: * we need to be very careful not to expose Personally Identifying Information in logs; * we need to rotate logs, so that we don't consume too much device space.", rnewman, stefan, wesj, bnicholson, mfinkle: if you have an opinion, please chime in. I want this for the FxA sign-in/sign-up flow and am volunteering to do something quick for my own purposes.', That library looks good. If we log to ~/Documents/Logs/ then it is simply to copy logs off the device with iTunes or Xcode. My only wish is that the library also supports logging to the console, visible in the Xcode console pane when running the app.', I'm glad yo re taking this...adding a proper logging library has been on my backlog for awhile. +1 from me.", Clearing info for ', . Wrong stefan ;)', +1 from me', Looks good to me too. Lets try!', Created ', ', PR: ', (In reply to James Hugman :jhugman @jhugman from ', ) ', James, please add PRs as a patch to the bug and then set one or two reviewers. I've done that already for this one. Just one quick comment that I added on Github and then we can merge this.", Created ', ', Pull request Updating to point to the new PR.', Looks like a good starting point.', Now has something which appears to be merging now. st3fan Please could you have a look?', (In reply to James Hugman :jhugman @jhugman from ', ) ', ', Merged this in.', Comment on ', ', Pull request Thought I already +d this since I merged this patch yesterday.', Comment on ', ', Pull request We never removed the explicit version from Cartfile, so I guess we can address that in a follow-up.' 
id=1211988	 'Was resolved as part of 1211991 *** This bug has been marked as a duplicate of ', ***' 
id=1279350	 'Oddly enough, this bug is reproducible in Safari. Maybe an issue with UITextField or NSAttributedString.', This graphical bug only appears in the iOS simulator, and not on the actual device.' 
id=1224440	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Awesome...DB upgrades are scary business, so I feel more at ease knowing we have some tests. Seems like the maintenance to keep these tests updated could be annoying, but worth it.', Comment on ', ', Link to Github pull-request: ', Yup - really liking this snapshotting model of testing the upgrades!', With review comments addressed: ', We might consider uplifting this to 1.x.', Uplifted to v1.x: 5aca27f' 
id=1161071	 'Darrin, can you maybe add some more hints from a UX perspective?', We already do this... does it not work? ', ', Portrait as well. We already do this... We also already have an API for showing and hiding these in BrowserViewController (i.e. hideToolbars/showToolbars).', *** ', has been marked as a duplicate of this bug. ***', I think aiming for safari/Facebook iOS parity is a good start. I can answer specific questions as they come up. I noticed the animation for 'snapping' is still pretty slow too.", Created ', ', PR Left comments on Github. Eventually I'd probably want to clean up the state that's being tracked in this VC since it feels a bit unwieldy. Also, Darrin mentioned some additional behavior where when the user is making small scroll adjustments upwards, the toolbars don't fade in right away. I haven't included that yet in this patch", Comment on ', ', PR Looking good to me. Left some questions/comments in the PR.', Comment on ', ', PR LGTM, with some minor cleanup suggestions in the PR.', I see the back/forward/etc buttons not entirely faded out in the iPad simulator. Follow up?' 
id=1097274	 'Printing out extensionContext!.inputItems from various apps: Opera Mini: (Does not show title) <NSExtensionItem: 0x17001a4b0> - userInfo: { NSExtensionItemAttachmentsKey = ( "<NSItemProvider: 0x17004c1b0> {types = (\ \\"public.url\\"\ )}" ); } Reeder: (Shows title) <NSExtensionItem: 0x174005ab0> - userInfo: { NSExtensionItemAttachmentsKey = ( "<NSItemProvider: 0x17405da00> {types = (\ \\"public.plain-text\\"\ )}", "<NSItemProvider: 0x17405da60> {types = (\ \\"public.url\\"\ )}" ); NSExtensionItemAttributedContentTextKey = <7b5c7274 66315c61 6e73695c 616e7369 63706731 3235320a 7b5c666f 6e747462 6c5c6630 5c667377 6973735c 66636861 72736574 30204865 6c766574 6963613b 7d0a7b5c 636f6c6f 7274626c 3b5c7265 64323535 5c677265 656e3235 355c626c 75653235 353b7d0a 5c706172 645c7478 3536305c 74783131 32305c74 78313638 305c7478 32323430 5c747832 3830305c 74783333 36305c74 78333932 305c7478 34343830 5c747835 3034305c 74783536 30305c74 78363136 305c7478 36373230 5c706172 6469726e 61747572 616c5c70 61727469 67687465 6e666163 746f7230 0a0a5c66 305c6673 3234205c 63663020 496e7465 726e6574 20467265 65646f6d 7d>; } Safari: (Shows title) <NSExtensionItem: 0x17000b210> - userInfo: { NSExtensionItemAttachmentsKey = ( "<NSItemProvider: 0x170051eb0> {types = (\ \\"public.url\\"\ )}" ); NSExtensionItemAttributedContentTextKey = <7b5c7274 66315c61 6e73695c 616e7369 63706731 3235320a 7b5c666f 6e747462 6c5c6630 5c667377 6973735c 66636861 72736574 30204865 6c766574 6963613b 7d0a7b5c 636f6c6f 7274626c 3b5c7265 64323535 5c677265 656e3235 355c626c 75653235 353b7d0a 5c706172 645c7478 3536305c 74783131 32305c74 78313638 305c7478 32323430 5c747832 3830305c 74783333 36305c74 78333932 305c7478 34343830 5c747835 3034305c 74783536 30305c74 78363136 305c7478 36373230 5c706172 6469726e 61747572 616c5c70 61727469 67687465 6e666163 746f7230 0a0a5c66 305c6673 3234205c 63663020 6e657765 73742073 75626d69 7373696f 6e73203a 20656d61 63737d>; supportsJavaScript = 1; } Tweetbot: (Does not show title) <NSExtensionItem: 0x1740066c0> - userInfo: { NSExtensionItemAttachmentsKey = ( "<NSItemProvider: 0x17405f7d0> {types = (\ \\"public.url\\"\ )}" ); } Chrome: (Does not show title) <NSExtensionItem: 0x17400d1b0> - userInfo: { NSExtensionItemAttachmentsKey = ( "<NSItemProvider: 0x174057dc0> {types = (\ \\"public.url\\"\ )}" ); }', I think we are doing things correct and that this is a third-party app problem. I have filed ', to see what the fine Chrome for iOS folks think about this.', This now seems to work correctly in Chrome. I see no action on the bug I filed with them but I think they are doing something different because our code to extract title and url has stayed the same.', Created ', Screen Shot 2015-04-06 at 11.51.08 AM.png See attached screenshot for how things look in Chrome now. Looks good.' 
id=1182673	 'Non-fatal I assume?', I would nominate this since conflicting constraints usually manifest themselves as broken layout/ui.', Created ', ', PR ', Spent time time trying to resolve the constraint error but couldn't find the exact issue was besides it being between the lock image view/text field inside BrowserLocationView. I just converted it to frame layout instead and it works fine for now. I feel like this might be a deep rooted issue with the way we're setting up constraints at the BrowserViewController/URLBarView level and I didn't really want to change that at this point.", Comment on ', ', PR ', I'd really like to avoid switching to frames as a workaround if possible -- it feels like we're digging ourselves deeper into a hole. It's definitely frustrating trying to iron out these layout issues, but band-aid fixes just create technical debt for the future, making it harder for ourselves later as the layout grows more complex. I spent a lot of yesterday and this morning looking into this, and I think I know what's going on. When we rotate, the toolbar layout is updated immediately before the new orientation is set. That means the back/forward/reload/etc. buttons are briefly crammed into the top URL bar before rotating, so the the text field doesn't fit with all of the fixed-width images around it (note that this error only appears if the reader *and* lock icons are showing). I'm not yet sure of the best fix, though. The gist here partially fixes the issue: ", The errors no longer appear for portrait -> landscape transition, but still happen for landscape -> portrait (I think it's because it waits longer to do the constraint changes, which helps us when the URL bar gets bigger, but hurts us when it gets smaller while the toolbar views are showing). Hopefully this helps -- I can keep digging for a proper fix if you want!", Good catch - that's probably what's happening. I would much rather go with sticking with Autolayout as well. Feel free to take this one to dig into if you want!", Another trick that might help but might involve a bit more code is instead of removing/replacing constraints, we can keep the same constraints all the time but update the value of the button widths to 0 when we want them hidden. I find a lot of the times you can get away with a set of static constraints and just update their values as needed.', Created ', ', Link to Github pull-request: ', Ugh, this bug was a bear to fix, and I'm still not sure I'm happy with the result. I think my initial guess was correct, but I couldn't figure a clean way to do this. Basically, when transitioning from portrait -> landscape, we need to wait until the rotation has happened before updating the toolbar (since updating will show the toolbar, and we can't show it in portrait), but when transitioning from landscape -> portrait, we need to update it before the rotation (since updating will hide the toolbar, and we can't show it in portrait). Happy to hear any ideas for improving this. The Apple-recommended way is to use multiple view controllers to avoid all these conditional layouts, though that wouldn't be very straightforward either...", Created ', ', patch.diff Figured out a way to avoid it to complain in a clean way. The problem is that when we call setShowToolbars, we're not just calling setNeedsUpdateConstraints but we're forcing it to updateConstraintsIfNeeded right after. Forcing these updates to occur is what's messing up the timing. Instead, we can call self.urlBar.layoutIfNeeded within the willTransition coordinator's animation block to tell the system to relayout the changes during the animation. If we just call setNeedsUpdateConstraints and take out the updateConstraintIfNeeded, the layoutIfNeeded call with update the constraints for us alongside the animation. I've attached a .diff file you can apply with the changes if you want. Besides that, the rest of the patch looks good. I like that we're moving to more static constraints with updates instead of remaking the constraints each time.", Hm, I tried the given patch, but I'm still seeing the SnapKit errors. Testing on an iPhone 5s on mozilla.org (where both the lock and reader icons are active).", Created ', ', Link to Github pull-request: ', What do you think of this alternate fix? By using lessThanOrEqualTo, we can set a size without strictly enforcing it when it doesn't fit. This keeps setShowToolbar simple without having to forward the coordinator, which I really didn't like.", Comment on ', ', Link to Github pull-request: ', Ah you know what - I was testing on an iPhone 6 :( I like this approach better than that one before but I was able to find a strange bug that made the back/refresh buttons result in a 0 width on landscape. STR: 1. Navigate to mozilla.org 2. Rotate to landscape 3. Tap url bar to edit 4. Tap empty area in top sites to hide keyboard 5. Rotate to portrait 6. Navigate to mozilla.org from top site tile 7. Rotate to landscape Expected: Toolbar buttons appear to the left of the url bar Actual: URL bar extends to the left edge of the screen', Comment on ', ', Link to Github pull-request: ', Nice catch -- thanks for those STR! Looks like the backButtonLeftConstraint was causing some issues. I removed it and don't see any regressions from it, but let me know if we still need it for some reason...", Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1127988	 'The problem is that we set Readability._uri.scheme to document.location.protocol, which as a trailing :', Fixed with ' 
id=1191368	 "Some of this is fixed in recent builds, particularly URL overwriting, but I still think we might have work to do to get out of the user's way.", We talked this morning and decided that some mitigation here is important for v1. I'll file a second bug to provide some clue to the user that restoration is happening -- e.g., a Chrome-like greyed-out snapshot. That won't track v1.", Does ', resolve this? I can't seem to reproduce any issues on testflight 31.", Good enough for me.' 
id=1141708	 'Currently photos are only rendering/display on iPad, not iPhones. ', Created ', iOS Simulator Screen Shot Mar 10, 2015, 12.44.43 PM.png', Moved to ' 
id=1151558	 'Created ', ', PR: ', Comment on ', ', PR: ', New PR after rebase.', Comment on ', ', PR: ', I sent a PR with some updates for transitioning to editing mode.', Merged.' 
id=1215685	 'Tested on latest Aurora build (1108)', I'm going to mark this a dupe of ", since they are the same/similar issue *** This bug has been marked as a duplicate of ', ***' 
id=1282956	 'Created ', Example issue #2', On an iPad, tap the private browsing icon several times rapidly. The tab count indicator animation will mess up and may settle at the incorrect number.', *** This bug has been marked as a duplicate of ', ***' 
id=1227618	 "I see 'ar' is already in the INCOMPLETE_LOCALES list, which means we skip it for production builds. Is that good enough for now?", (In reply to Stefan Arentz :st3fan from ', ) ', It seems to have still slipped through with the 1.2 build. See the list of languages in ', (In reply to Jeff Beatty :gueroJeff from ', ) ', I assume the list was updated after 1.2 was built. In any case, making sure we're excluding INCOMPLETE_LOCALES would be enough to exclude Arabic at this point." 
id=1163219	 "I guess it's also worth mentioning that the icon doesn't appear before they've selected Yes/No to that prompt, either. Maybe we can put it in the bottom footer for the unset case, then do some nifty animation that moves it to the top of the list if they choose Yes.", It's a bit odd that it doesn't show, but we don't show on desktop or Android\u2014do we need to remind you what your default is? If so, then we need to come up with a way to do this across platforms. Perhaps we should remove the icon from the search suggestions instead. Darrin, thoughts?", Created ', search suggestions desktop We certainly do show it on desktop. I'm not sure if people will find it confusing to not see their default in the quick-search bar. One thing I don't want to encourage is using the quick-search bar for all searches (when the Go button is much more convenient). I say we leave it as is, and make a note to follow up with some user testing.", I can't believe brian just unassigned himself to this. Maybe he can provide some pointers about where to look for emily.", See ', -- there's no engineering work to be done now, just UX testing/research.", Renom'ing for UX prioritization.", *** ', has been marked as a duplicate of this bug. ***', Also not obvious how to search if you disable search suggestions, nor obvious how to turn them back on if you accidentally hit no on first-run', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', This puts the default search engine as the first item in the bottom bar if search suggestions aren't being shown. I ended up working on this as part of ", -- note that private browsing is another case that will trigger this since we won't show suggestions. Darrin/Robin, do you think this is worth having?", Comment on ', ', Link to Github pull-request: ', I think it's worth having because it's not always obvious to the user what their default is, and including both Google and Y! (rather than one or the other\u2014as these two are the most common search engine choices) may help the user understand/engage with the quick search bar. I don't however, see the default search engine on the quick search bar when search suggestions aren't enabled in pull 1182. Were you asking if you should implement it or should I expect to see it? I say go for it. (Leaving my UI review on until you clarify.)", Comment on ', ', Link to Github pull-request: ', That pull request works for me, and looks great! Thanks Brian.', (In reply to Robin Andersen :tecgirl from ', ) ', Hmm, it's implemented, so you should see it... maybe try checking out the PR again?", Comment on ', ', Link to Github pull-request: ', Code looks good to me and works fine on device. Left a comment that we can address in the future.' 
id=1173087	 'Created ', ', Pull request', UX research shows that it's useful and we have a PR. Nominating as tracking to figure out where to go from here.", Before this goes anywhere, Maria will need to have a conversation with Joanne and Mike C. Please ensure this doesn't get put into code until agreement across all stakeholders have been made, including the 1l0n community folks for transparency (and agreement for which locales this should apply to). If this gets agreed, there should also be consistency across both Android and iOS.", This is good but it only works with US English and no other locales (testing it in UK English first time didn't make You Tube appear, I had to change region). We need to make a decision as to which locales we would want YouTube to appear for and migrate these changes to all necessary. It raises an issue with our search term detector as when You Tube redirects from desktop to mobile, it also opens a new page (so desktop -> mobile -> new page with results), which means our method of reserve engineering the search URL to get the terms doesn't work as the initial URL is further back than the current `WKBackForwardItem`. A bug should be raised for that when this lands.", Before this goes further, business agreements need to be made to ensure alignment, visibility and policy. That will include deciding on which locales. Mconnor - I'm NI'ing you for visibility, but likely a live conversation should be had with Maria to start with.", Relevant Research Reports: Oct Monthly Mobile: ', Nov Monthly Mobile: ', Mike C is drafting a proposal on search engines management. Includes: push additional engines per territories, which territories makes sense, how do we decide what to put in various places, Making consistent decisions across desktop and mobile.. To be circulated with product by 2/12.', *** This bug has been marked as a duplicate of ', ***' 
id=1239368	 'Created ', ', Pull request This is the last one. Next step will be migrating the project structure over to using Carthage built frameworks. Exciting!', Comment on ', ', Pull request LGTM' 
id=1317939	 "I don't think we have about pages except than about:blank on iOS, and having about:blank as title for that page is correct. Marking as RESOLVED INVALID." 
id=1184818	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1252172	 'This is the blocker that prevents us from using Carthage > 0.11', Created ', ', PR: ', This patch does two things: * It disabled `parallelizeBuildables` in all the application schemes - This works around the issues we are having with Carthage * It changes the Carthage version check to 0.15 instead of 0.11 I restructured the `carthage.sh`, `checkout.sh` and `update.sh` scripts a bit. I don't think they worked correctly. They would still continue if the `carthage.sh` check failed. The `carthage.sh` script now just fails and it does not automatically install carthage. Instead it will point the user to our `BUILD.md` page. (Which we need to update if this lands)", *** This bug has been marked as a duplicate of ', ***' 
id=1109778	 'No need for (ios) these days.' 
id=1145170	 "This is in, not sure why I didn't see this when I filed this, hideToolbars() in BrowserViewController wfm." 
id=1205973	 '(In reply to Francesco Lodolo :flod from ', ) ', ', ', Ironically caused by a bug that fixes another l10n issue (', ). ', ', NI for Stefan, mostly to make sure we don't export strings before this is fixed somehow.", (In reply to Francesco Lodolo :flod from ', ) ', These strings were introduced in 1.1 (', ). Can you explain what broke here?', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Yo re absolutely right. I wrongly assumed that they were there before the v1.1 cycle, while these strings are free to be moved or deleted. This bug involves only strings that were used in v1.0.", Created ', ', Link to Github pull-request: ', Will try to be more careful -- these are easy to break!' 
id=1273952	 'Created ', sendMenu.zip give these a go.', Created ', ', Link to Github pull-request: ', Asset drop!', Created ', Simulator Screen Shot May 25, 2016, 12.22.21 PM.png Looks great! Thank you.', Merged.' 
id=1288463	 'Created ', ', Pull request Long-press a tab to start re\xe4rranging.', Comment on ', ', Pull request This is awesome. Nice work!' 
id=1166731	 "This ticket is invalid now that we backed out wes's old gesture override code." 
id=1230418	 'Looks like ', . *** This bug has been marked as a duplicate of ', ***' 
id=1177201	 'Created ', ', Pull request', Than you very much for this patch :allengn! I am cleaning this up so that we can land this today. Just changing the strings to be localized.', Created ', Screenshot 2015-07-08 13.44.43.png Screenshot for localizers', Created ', ', PR: ', Comment on ', ', PR: ', Looks good to me - just left a comment about checking to see if we get an error back from the UIImageWriteToSavedPhotosAlbum method.', Is camera roll still present in current iOS?', Yes, Camera Roll is the 'global' Album that contains all photos.", If you use iCloud Photo Library there seems to be no Camera Roll album at all, there is All Photos album instead - maybe we could reword this to be more general and handle both cases?' 
id=1243655	 'Was this in 1.3 or 1.4? ', was fixed in 1.4. There was some FxA/Sync server downtime recently, judging by a spate of desktop/Android bugs with logs. Depending on the symptoms, you could have seen a generalization of that bug. Filed ', to get a notification.', I should have checked. It's at 1.4 right now, but I'm not sure when it initially became disconnected.", Okay, thanks. I'm gonna bet that ", was the cause; please reopen if you see this again! *** This bug has been marked as a duplicate of ', ***' 
id=1123381	 'This specially shows on iPad where there is a lot of white space in the margins. This is likely because of the removed media selectors from the css.' 
id=1155134	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1134802	 'Noticed this when I bookmarked a page in Reader View (bookmark had no title)', Created ', ', PR: ', This small patch simply adds a <title> to the reader view content. Now the title shows up correctly in History and on Tabs.' 
id=1197137	 'WFM iPhone 6 and iPad Air (sim)', However a user has reported the same ', So, it seems that these particular fields on Google are activated by listening to many of the same events that we listen to in ContextMenu.js. If you disable ContextMenu.js we get the performance back on Google search suggestions. Next Step: Take a look at what ContextMenu.js does and see how it is possibly preventing/delaying the code that Google uses here.', Created ', ', Pull request', Created ', ', Swift 2.0 version of fix' 
id=1146546	 '(In reply to :jgruen from ', ) ', *its', On Android, we don't use exact same curve as Australis. That was an intentional decision because of both the implementation, and the device type, made with the considerations of Shorlander. But, that being said, the screen shot does look a bit different to even Android. Wes, are we using the same curve as Android?", Yes. I haven't overlaid them, but all the parameters are exactly the same.", You said you had the desktop one Wes?', I found something in this bug: ', from when Desktop was going to ship SVG. It will take a little division to covert it to our w/h units. I hadn't got that far. Maybe someone in UX has a better version.", Created ', ', PR ', This is a mostly direct (rounding errors) move to what's in those SVG files. I'll upload an overlay image. Its close to desktops, but.. well desktop uses images right now and they've got aliasing built in. Its hard to compare. At this point, I think UX will have to hand refine, but figured I could give you a start.", Created ', Overlay', Created ', Sharp Curve Points Hrm, seems to be closer by overlay, but still has some rough edges.', Closing this with WORKSFORME because :darrin closed the PR for this one with "While I know this is the curve we use elsewhere, I think the extra control points add a few sharp-ish corners. I think what we have in trunk is fine for now."' 
id=1278396	 'Created ', ', ', Comment on ', ', ', Huge performance gain and great find. Just a small nit but I'd love to uplift this to 5.0.", check out ', for a discussion of a similar fix for a similar issue', Thanks Emily! I read through that discussion. Here are a few of my thoughts: ', Maybe they changed how WKWebViews work between then and now, but from my testing, inserting and removing WKWebViews from the container does not cause them to reload or re-render and saves all the back/forward information - they act the same as if they were all in a subview ', I still see this happening exactly as described in master today. I tested the PR with both running from Xcode and not running from Xcode and neither case crashed and both didn't slow down. ", Yeah I noticed this too, I thought if you hid the WKWebViews or set the alpha to 0, it wouldn't render. But I was wrong haha ", Yeah, that's the conclusion I came to too :)", I think it's worth a shot giving this a test since it resolve a lot of the gray screen/memory issues we've been seeing. Worse case it's an isolated commit that we can revert if needed.", master e03050c5df7be3b6d0bbbea5c90420d467dcc720', v5.x d447732' 
id=1159373	 'Created ', ', PR: ', I have simply uncommented the code for now and not actually removed all it's traces. Because we will very likely reintroduce this for a quick followup release.", Merged. r=me.' 
id=1168892	 'Created ', ', Pull req. Here's the minimal version of this: either we completed syncing the engine (which is all we can do now), or we have a number of reasons why we didn't start. We can flesh this out as we add capabilities (e.g., addressing ", ).', Comment on ', ', Pull req. I commented on GH. I worry that `accrue` is unnecessarily complicated, but meh... c'est la vie.", `accrue` is a slightly clarified and extended version of the `all` implementation, fwiw.' 
id=1180979	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1248063	 'Created ', ', Link to Github pull-request: ', Unclear why I'm hitting this and others aren't, but in any case, updating to 2.1.0 fixes the error for me.", Not needed. As mentioned in ', , I had to do a full clean build.', Nevermind, forgot this was a Carthage error, not an Xcode error. I'm still hitting this." 
id=1258188	 'Why is a powerful page like about:sessionrestore even callable by external content? iOS needs to implement an equivalent of CheckMayLoad() and only allow "web" schemes to be loaded from web content or external apps.', Agreed about sec-high. Filed ', to get this fixed.', I think the fix here will be to check the source frame and the request in decidePolicyForNavigationAction. I'll try to get a fix uplifted for 4.0.", *** ', has been marked as a duplicate of this bug. ***', Fixed by ', .', Setting the fxios fixed flags based on ' 
id=1148999	 'Tested on sound cloud. WFM. Reopen if we find a site where its busted.' 
id=1200744	 'Fixed via ' 
id=1213149	 'Sounds sensible. We should probably also log the error on start so we know what happened.', Created ', Screenshot 2015-10-08 09.45.39.png Not sure if it's helpful but I managed to replicate this in the simulator once by accidentally backgrounding the app while it was loading. What I find strange is that it's throwing an uncaught exception inside your do {} catch block which doesn't make sense...", Created ', ', Pull request', I'd consider this a topcrash as it's appearing on every 1.1 build with the most affected devices.", Comment on ', ', Pull request LGTM Lets get this in and see if the crasher goes away.' 
id=1226201	 'Created ', ', Link to Github pull-request: ', Not related to ', Comment on ', ', Link to Github pull-request: ', We should have a test for this.', Totally. I'm going to do some refactoring work on these methods to make it easier to write a unit test. I need to rewrite the way we handle delete anyways for ", so I'll do the work on that branch and come back to this one to add the test.", Anything for 1.4 here?', Yes - just merged in ', which is marked for uplift into 1.4. I'm going to resolve this bug and open a follow up to include a UITest for this case. master 6cc4f632b5a3c031f05900cf2becefcfabb2280f", Follow up: ' 
id=1171254	 'Created ', ', PR', Comment on ', ', PR Overall approach is looking good! Lots of cleanup suggestions mentioned in the PR.' 
id=1281679	 'Created ', ', Link to Github pull-request: ', Merged into master.', v5.x e4935fd' 
id=1104802	 'Fixed with ' 
id=1183738	 'Created ', ', PR', Comment on ', ', PR I think this is a good idea, but we should do this on the `didSelectedTabChange` in `BrowserViewController` rather than hooking into specific UI elements. For example, it's possible to change the tab without using the UI at all (if the page opens a new window).", alrighty tighty BNicholz' 
id=1130257	 'We are doing this on Desktop. So we certainly want to keep that the same on iOS.', Created ', ', PR: ', This patch changes the Print theme to Sepia. This is a basic implementation that changes the option name to Sepia and does minimal CSS changes to include new colors. We need to do a followup to bring the reader view CSS up to date with mobile or desktop. That work is not part of this bug.' 
id=1250563	 'Created ', ', Pull req.', Comment on ', ', Pull req. Fine by me. Interesting to see the abstraction breaking down a little; but worth noting that the crypto-middleware is still entirely encapsulated. Contrast to Android, where it bleeds right through.', 57df4d3' 
id=1144348	 'Created ', ', Pull request', Comment on ', ', Pull request I'll go with whoever decides to review first :D", Comment on ', ', Pull request LGTM. See PR for comments.' 
id=1152697	 'Hello Marco, I just tried it and there is no visual indication whatsoever that the item was added to the reading list. I filed a related ', : "Adding item to Reading List by long-pressing Reader mode button issues no feedback", it also mentions accessibility aspects.', Created ', ', Pull Request At least in some cases, VoiceOver UI is ahead of the visual UI and not the other way around :-).', Comment on ', ', Pull Request Looks pretty good overall. Left some comments in the PR.', Comment on ', ', Pull Request I addressed all review comments - please take a look at the latest comment on GitHub and hopefully merge. Thanks.', Comment on ', ', Pull Request Taking these reviews since st3fan is buried.', Comment on ', ', Pull Request VoiceOver feedback commit looks good.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', :bnicholson I addressed all the comments you had for other bug handled in the PR. A merge? :-)' 
id=1217435	 "This'll become an issue at scale.", Created ', ', Pull req. Adds a test. Manually testing right\u2026 now.', Comment on ', ', Pull req. LGTM', 58b1462' 
id=1263101	 'Two options here: 1) Prevent bookmarking error pages. 2) Extract the URL of the page being loaded from the error page URL and bookmark that instead.', Brian, Can you explain option 2? I'm not sure if you mean bookmarking the URL of the error page or the reloaded page.", I meant the reloaded page. On second thought, though, this option might not work well since we won't have the title or favicon of the page. Also, doing this would require changes to the bookmark detection in the menu to see whether a give page should be starred. So let's go with the easy choice: option 1!", Sounds right! Sure, I'll go with option 1 :)", Brian, How can I check if the currently loaded page is an error page? I believe we can add that check here: ', This is where the bookmark animation first happens before the flow moving on to saving the bookmark.', Hey Maurya, thanks for taking this! You can use ErrorPageHelper.isErrorPageURL() to determine whether a give URL is an error page. As for where to put this check, that depends on the UX we want. Robin, for pages that shouldn't be bookmarkable, what do we want to show? Should we gray out the bookmarks button? Hide it completely? Something else?", (In reply to Brian Nicholson (:bnicholson) from ', ) ', 1) Prevent bookmarking error pages \u2013 by disabling it in the menu (greying it out, no response on tap) Strangely, if I tap the bookmarked offline link 'The Internet connection appears to be offline\u2026' - it actually goes to the correct URL.", Created ', ', Link to Github pull-request: ', Hi Brian, I've made the bookmark icon to not be shown if it's an error page. There's one thing though. For tabs with nil url: - Prior to the change, the Bookmark icon was being displayed, though it would not action. - After the change, the bookmark icon is not being displayed altogether. Hope this is ok. Just curious though, why would we have tabs with nil urls?", Comment on ', ', Link to Github pull-request: ', Hey Maurya, thanks for taking this. Rather than removing the bookmark button from the menu, I think we actually just want to disable it/grey it out instead as mentioned in ', . (In reply to Maurya Talisetti from ', ) ', Yo re correct that we should treat nil URLs the same as error page URLs (that is, we should disable the bookmark button). ", Internally, WKWebView can dispose of its content whenever there's a low memory event. WKWebViews can consume a lot of memory, especially if the user has many tabs open, so this is how WKWebViews prevent apps from running out of memory and crashing. When this happens, the WKWebView URL will be nil until the WKWebView restores its content, which usually happens when it's visible again.", Hi Brian, I'm trying to disable the bookmark button and need your help with it. In BrowserViewController.observeValueForKeyPath(keyPath:object:change:context), I added an error page check that determines whether the bookmark button should be disabled. (", ), case KVOLoading: guard let loading = change? NSKeyValueChangeNewKey as? Bool else { break } toolbar?.updateReloadStatus(loading) urlBar.updateReloadStatus(loading) if (!loading) { /* added this if condition */ if let validUrl = tabManager.selectedTab?.url where ErrorPageHelper.isErrorPageURL(validUrl) { navigationToolbar.bookmarkButton.enabled = false } runScriptsOnWebView(webView) } However, this is not resulting in disabling the actions performed by the bookmark button. I\'m not worried about greying it yet (I might have to do a button.alpha = 0.66 as per an answer on SO). I don\'t see any line of code that changes the bookmarkButton.enabled property to "true" after the KVOLoading switch case is executed. The code execution (when the page is an error page), passes the if condition. Any suggestions what I might be missing?', Hi Maurya -- sorry again for the very late feedback. The company was all in London last week, so there weren't many opportunities to catch up with bugs. I promise to be much more responsive from now on! The bookmark button has been moved to the menu, so yo ll want to make your changes in the menu code. Whenever the menu is shown, we create an AppState instance 1 that describes the state of the application, and AppMenuConfiguration then reads that state to build the menu items 2 . To make the menu show a gray bookmark icon for unsupported URLs, yo ll want to change the menu bookmark code at 3 to also check whether the current URL is an error page, then return a DisabledBookmarkMenuItem (which yo ll have to create yourself) if it is. Hopes this makes sense. Let me know if anything is unclear! 1 ", 2 ', 3 ', Np Brian! I was on a small vacation myself :) Thanks for your suggestions, I'll look thru them.", Brian, There\'s one problem with creating a DisabledBookmarkMenuItem. After adding the change, on clicking the disabled icon, the menu disappears immediately 1 . This can cause the user to not realize that the site wasn\'t bookmarked and also not realize that the action is disabled. Is that ok? I would have rather hoped that clicking on the bookmark button would do nothing AND also keep the menu still visible. Since a \'nil\' action 3 is not allowed as per the MenuItem protocol 2 , a MenuAction needs to be created: private static var BookmarkDisabledMenuItem: MenuItem { return AppMenuItem(title: BookmarkDisabledTitleString, action: MenuAction(action: AppMenuAction.BookmarkDisabled.rawValue), icon: "menu-Bookmark", privateModeIcon: "menu-Bookmark-pbm") } Making the action property an optional will solve the problem as we will never call the performMenuAction() method 4 . However, I wonder if this is good design for iOS. Making a button not work might make the user think that the touch screen is not responding :) Or, do you think it might be better to display an alert saying that bookmarking of error pages is disabled? And then quickly dismiss the menu at the same time. 1 ', 2 ', 3 ', 4 ', Robin (our resident UX expert) suggested we disable the button and not have it respond to taps in ', , so let's try to follow that. Making the action optional seems reasonable to me -- I can imagine other scenarios where we'd want to disable certain menu buttons, too. CC'ing Emily since she owns the menu code and might have other thoughts.", My preferred solution would be: Add a 'disabled' flag to the `MenuItem` and toggle that depending on whether or not the we are offline. Then check the enabled value on each menu item on cell selection and disallow. To check on disabled, add an implementation for `collectionView(collectionView:shouldSelectItemAtIndexPath indexPath:)` to `MenuView` inside `UICollectionViewDelegateFlowLayout` and an extra protocol method onto `MenuItemDelegate` which will be called from this implementation. Then in `MenuViewController`, implement the new delegate method and return true or false depending on whether the menu item is disabled or not.", Hi Brian, In the solution proposed in ', , is there a way of initializing a computed type property by supplying an argument? In AppMenuConfiguration.swift: menuItemsForAppState(_:) { // ... if let validUrl = tabState.url where !ErrorPageHelper.isErrorPageURL(validUrl) { menuItems.append(tabState.isBookmarked ? AppMenuConfiguration.RemoveBookmarkMenuItem : AppMenuConfiguration.AddBookmarkMenuItem) } else { menuItems.append(AppMenuConfiguration.DisabledAddBookmarkMenuItem) } // ... } private static var DisabledAddBookmarkMenuItem: MenuItem { return AppMenuItem(title: AddBookmarkTitleString, action: MenuAction(action: AppMenuAction.ToggleBookmarkStatus.rawValue), icon: "menu-Bookmark", privateModeIcon: "menu-Bookmark-pbm", isDisabled: true) } Instead of creating another MenuItem for AddBookmark (AddBookmarkMenuItem and DisabledAddBookmarkMenuItem), do you know of any way to may be send an argument while initializing a computed type property? If that\'s not possible, I\'m wondering if the solution proposed in ', might be more suitable. Ideally, disabling MenuItem selection would be good. But, if we have to create MenuItems for both enabled and disabled scenarios, we might do enough by just making the MenuItem.action variable an optional.', (In reply to Maurya Talisetti from ', ) ', Not during initialization, but you could create a `var disabled: Bool` that you set after creating the item: let menuItem = tabState.isBookmarked ? AppMenuConfiguration.RemoveBookmarkMenuItem : AppMenuConfiguration.AddBookmarkMenuItem if let validUrl = tabState.url where ErrorPageHelper.isErrorPageURL(validUrl) { menuItem.disabled = true } menuItems.append(menuItem) With this approach, yo ll also want to set a grey color filter on the icons in AppMenuItem.swift if disabled is true.", Thanks Brian! Had some trouble understanding computed properties. I had to use 'var menuItem' instead of 'let menuItem' because it is a struct underneath.", Hi Brian, any suggestions on what we can do to apply color filters? I tried the options in UIImage+ImageEffects.h 1 , but the tint/blur is taking the form of a box rather than the shape of the icon (star shape for the bookmark in our case). 1 ', I think yo ll want to use a graphics context to recolor the UIImage. See ", , for example.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looking good! Left some comments in the PR.', Created ', ', Link to Github pull-request: ', Hi Brian, Made changes as per your suggestions.', Comment on ', ', Link to Github pull-request: ', Nice job! One suggestion about tweaking the check to be a little more generic, but other than that, this should be good to go.', Needinfo ping: See ', Sorry, missed your question. Thanks for the ping!', Created ', ', Link to Github pull-request: ', Robin, I want to highlight one thing about the solution: While all else is as expected, in the case when we try to load a bookmarked webpage without an internet connection, for example ', , on clicking the menu button on the toolbar, the icon "Remove Bookmark" (disabled) is displayed. Basically, I was wondering how elegant it is to display "Remove Bookmark" when the user actually can\'t perform that action because it is disabled. The behavior happens because on every page load we', Comment on ', ', Link to Github pull-request: ', Looks good to me. Thanks again!', Hi Brian, Could you merge the PR? Do you think there's a concern with the issue in ", , or should we check with Robin?', Created ', ', Link to Github pull-request: ', Updated PR to remove merge conflicts.', Comment on ', ', Link to Github pull-request: ', I think this is fine for now, but I'll leave the NEEDINFO open for Robin in case she gets a chance to look. Looks good, and thanks again for the PR!" 
id=1272056	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM - but I'm not really sure how l10n wants this to be formatted. Is this a correct way to localize this string, Stefan?", Since we still don't support correct plural forms localization (", ) and 0 and 1 cases should be less likely, that would be the best option I think. Thank you.', Merged and closed.', This bug is closed, I don't understand the point of blocking ", unless there are pending actionable items. Given the timeline (14 days ago), this is in the v5.x branch already.' 
id=1164837	 'Created ', ', PR ', I broke this awhile back on accident. These handlers can wait and call this callback later if they want.', Comment on ', ', PR ', LGTM', Argh. Forgot to merge this in!' 
id=1194683	 'Created ', ', ', Merged' 
id=1145588	 'Huh?', Need more data here. Can't reproduce.", This looks fine to me. Should we mark as fixed?', Aye' 
id=1276541	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', merged', v5.x 991d7e71a0ce5abf39e96e8169e0bd882eef0729' 
id=1221688	 'Created ', Screenshot 2015-11-04 14.09.41.png', Created ', ', Link to Github pull-request: ', Flagging bnicholson since Emily's on PTO", Note: This PR also includes ', . Was easier to do it all in one go.', Comment on ', ', Link to Github pull-request: ', :tecgirl I forgot to flag you for a UI review on the login detail screen. You can check it as part of this if you want as this includes the menu actions (no editing though).', Comment on ', ', Link to Github pull-request: ', Looks good! Just a few notes in the PR.', Thanks for the double pass on this. I've fixed up the nits and included the settings delegate (with test!) to this PR as well.", Landed master b98103973b5ccfd9b2008eb29bb04de54f862c73' 
id=1168041	 'Sorry, that should be: Note Safari on iOS does *not* exhibit this bug.', Looks like this has been fixed in build 19' 
id=1290154	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1232320	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1124531	 'This is about ', WebKit likes word-break: break-all it seems. .content code, .content pre { color: red; white-space: pre-wrap !important; word-break: break-all; margin-bottom: 20px !important; overflow: auto; }', Oops I added the color: red to test. Don't include that in a patch tomorrow.", (In reply to Stefan Arentz :st3fan from ', ) ', Makes everything you read feel important tho, don't it?", This was fixed with ' 
id=1136218	 'Created ', Screenshots of unlocalizable strings I localized the exported xliff file to 100% completion and imported the strings into xcode with no import errors. I also adjusted the runtime settings to run the os simulator and app in the appropriate locale (es-MX), as well as to call out strings that are unlocalizable. These screenshots are of strings that are not available in the xliff export for localization. In addition, the fx accounts page does not present the fx accounts page in the appropriate locale.', Just wanted to check in on how we're doing on this. I saw that there was a good sized update this last week in the number of strings so I assume it's going well.", See ', (forgot about this one). The "Boorkmark" button doesn\'t have a localizable accessibility string associated. ', Here's a list as of Right Now: ", Created ', ', Pull request', Comment on ', ', Pull request LGTM. Some comments on the PR.' 
id=1199367	 "The highlighting is the same as desktop which I believe is meant to only show the 'significant' and actual domain of the website to prevent malicious urls from pre-pending a bunch of garbage. Some more info: ", Created ', ', Pull req.', Comment on ', ', Pull req. LGTM. Hosts look far more sensible.', master: 5a3a6b7 v1.0: ccead83' 
id=1147157	 'Reproducible. The demo seems to adjust correctly as soon as a scroll happens.', We need to experiment with this more to see what we can do. We'll track for now, and re-evaluate later.", Created ', ', PR (Copied from Github) So this is kind of a gross hack but it works. It looks like there's an issue with WKWebView where it doesn't invalidate it's drawing area on orientation change. However, it does invalidate it whenever the content area is scrolled (see ", ). I added a small method as an extension to WKWebView that will nudge the content area by a single pixel which forces the content area to invalidate and added this to the traitCollectionChange callback in BrowserViewController.', Comment on ', ', PR Looks good! Left a few more questions/comments in the PR.', Comment on ', ', PR Great! Do you have permissions on Github to merge this?', Yup I do. I'll go ahead and merge it", Created ', ', PR Added a hotfix that solved a bug which was caused by these changes where the toolbar was not being positioned correctly after enter the tab tray, then the browser view controller, then rotating the de', Created ', ', PR Bit quick on merging the last patch. This patch includes fixes from wes's comment.", Also filed ' 
id=1211898	 'Looks like there was some recent work upstream that has DWARFv4 support which works! Closing this for now.' 
id=1279242	 'Created ', ', Link to Github pull-request: ', SQL queries are hard =(', Comment on ', ', Link to Github pull-request: ', :shakes fist at tricksy SQL:', master 6760314b9ff98f15a76976cfa72212a997d0e01f', v5.x 26f7ca8', Verifying as fix on 6ad4b686.' 
id=1170223	 'Created ', ', PR ', IRC r+ from rnewman ', Ship it ship it' 
id=1314376	 'Already implemented across various bugs.' 
id=1096941	 'Fixed with ', This adds the CORS support in the NGINX front proxy. Ideally I would like to have this in the Go app but this was the quickest way to get going now.' 
id=1224245	 'Created ', safari-top-sites.png For reference, here's how it looks in Safari, although these aren't the exact same sites. The only overlapping site is discogs.com which has a crisp thumbnail in Safari, so maybe it's possible?", Kind of off-topic but I'll point out that the Safari screen here is totally useless :) I was so psyched to see my actual top-sites from history in Firefox!", For favicons on Top Sites, we do the following: 1. If the favicon doesn't exist locally, see which favicons we can download 2. Download available favicons for that site 3. Use the highest resolution favicon available for Top Sites (For later reference, ", ) As for what's happening in the case, it looks like blurry icons are because those sites don't offer a high resolution one (or that the logic is broken). As for discogs.com, I think the opposite is happening. The icon is indeed a high resolution one but is being scaled down which produces the artifacts we're seeing. Worth a look to see if these low resolution icons do in fact not have higher resolution ones.", Also - thanks for filing the bug! Glad yo re psyched about seeing top-sites from your Firefox history. If you have any ideas on what else yo d want to see from top sites let us know!", developer.mozilla.org: <!-- third-generation iPad with high-resolution Retina display: --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="', "> <!-- iPhone with high-resolution Retina display: --> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="', "> <!-- first- and second-generation iPad: --> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="', "> <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: --> <link rel="apple-touch-icon-precomposed" href="', "> <!-- basic favicon --> <link rel="shortcut icon" href="', "> <!-- if IE > Definitely something is broken!', I explored this a little in ', . In most cases when I stepped through in the debugger I got multiple icons, in the right order. The truth is out there.', *** ', has been marked as a duplicate of this bug. ***', FaviconManager.swift seems to be doing the right thing, which is good. FaviconFetcher.swift has some issues with it, but on the whole looks fixable (mostly around preferring images with .png file extension to images with .ico) bugzilla.mozilla.org and addons.mozilla.org both only serve .ico favicons, which is a bit strange, but fixable by filing bugs. I've spent a bit of time looking at the YouTube favicon HTML and have discovered something odd: the HTML served to alamofire does not have png favicons, just ico favicons. I thought this may be some UA sniffing on YouTube's part, though I've been able to verify that alamofire.manager is being constructed with the correct UA. What I haven't done yet is verify that the UA string is being used in the WKWebView.", Created ', Icons coming from FaviconManager.swift', Created ', ', Pull request Favicons Fetching 16% less horrible.', Comment on ', ', Pull request LGTM.', Merged.' 
id=1260124	 'Invision mockups: iPad: ', iPhone: ' 
id=1127505	 'Here is a hint: "To configure an app extension target to use an embedded framework, set the target\u2019s \u201cRequire Only App-Extension-Safe API\u201d build setting to Yes. If you don\u2019t, Xcode reminds you to do so by displaying the warning \u201clinking against dylib not safe for use in application extensions\u201d. ', So... that's puzzling, because that setting *is* set to Yes for those targets.", Created ', ', Add flag. v1', I think that setting needs to be in the project that generates the framework? So in Storage/Storage.xcodeproj/project.pbxproj ?' 
id=1201898	 'It\'s definitely syncing tabs. The "last synced" time shown in the remote tabs panel is of the *other device*. That\'s why it\'s under the device name and in the same grey header bar. So your desktop last synced fifteen minutes ago. That time is either: * The newest touched tab, if there are any open * The time the machine last synced, if no tabs are open. Assuming you have tabs, this means you last switched tabs fifteen minutes ago. If that\'s not the case, you probably should file a desktop bug :D' 
id=1215491	 'We need to access the private _setOfflineApplicationCacheIsEnabled API for this.', Brian, could you file a WebKit bug for this?', Considering the API is deprecated and being removed in favor of service workers (', ), it's very unlikely they'll expose it. In fact, I think that's enough grounds to WONTFIX this." 
id=1163120	 'Created ', ', PR ', Hey Wes, I wonder if this could also fix this issue? ', Not as is, but it might help. The tricky part there is that we actually need to load a "blank" url in the tab in order to have about:home in the back-stack.', Updated this to not support zombifying anymore.', Comment on ', ', PR ', Nice, this looks good to me, though yo ll have to do a bit more rebasing after #521 (sorry). That PR adds a testWebViewDisposed to make sure the webview gets disposed when the browser is removed, so it'd be good to make sure that still passes with this (especially considering you moved some deregistration into the Browser deinit).", I'm reopening this bug because it broke opening reading list items. STR: 1) Add item to your reading list 2) Open item from the reading list panel The app crashes because browser.webView is nil.", Filed 1170906 for this. I'll track it there.", *** ', has been marked as a duplicate of this bug. ***' 
id=1227215	 'Forgot to change summary, this seems to happen after a hang or crash. I ran into it today again. I swiped Firefox away, re-opened and my counter was 0.', I'll have a look.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I was able to verify the fix by producing a real crash. Looks good!', This issue is still reproducible in build 2.0 (4).', Is the commit in the build?', Don't think it made the last build -- please check again on the next update." 
id=1302436	 'Created ', ', Link to Github pull-request: ', Wow I cannot believe I missed this, Sorry! The pings on GitHub don't work well because there is a lot of activity in the repo. It's always a good idea to flag for review here :)", Yeah I figured it's better to ping here than on github :)" 
id=1141530	 'Created ', ', PR: ', This patch fixes the linkage to sqlite. This just needed a small path change in the .modulemap file. The project file is also included in the patch because to be sure I also removed/added the sqlite.dylib file. So that is what you see changed in project.pbxproj.' 
id=1239073	 'Created ', Screenshot 2016-01-12 15.35.26.png Entering a passcode', Created ', Screenshot 2016-01-12 15.35.31.png Re-enter passcode', Note: Mocks show 'Cancel' in corner and no back indicating the screen should be presented modally.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I ended up adding the Keychain storage/validation work on top of this branch and also split the original PasscodeViewController into 'Entry' and 'Confirm' view controllers to clean up the logic between validation and configuration. Wouldn't mind another pass on this since it shifts around existing code, adds in areas where we will report errors and keychain validation.", Comment on ', ', Link to Github pull-request: ', Nice!', master a216f1254a08056caacc84c85cff3e5be669073e' 
id=1184700	 'Created ', ', PR - without timestamp', Bryan: lemme know when this is ready for re-review.', Comment on ', ', PR - without timestamp Looks good! A couple nits: Change the color from HighlightBlue to Grey. Change the weight from light to medium so it stands out more as a button. (I may change my mind about the weight, but give it a shot). Change the "Syncing\u2026" color from DestructiveRed to orange, like we use on the progress bar. Other than that, it\'s quick, the state switching is good, and it works!', Comment on ', ', PR - without timestamp Looks good with nits.', *** ', has been marked as a duplicate of this bug. ***', Looks great! Sync Now changed to Regular weight.' 
id=1193782	 "Just to clarify, is the issue that we didn't restore tabs or that it shows 0 instead of 1?", For me the issue is that it's showing 0 when we clearly have about:home open :)", Created ', ', ', Comment on ', ', ', Thanks for the detailed explanation. Looks good!', Although I am curious...I wonder what's causing this to happen? If tabManager.restoreTabs() restores 0 tabs, that means the last session was lost somehow, right?", Potentially - we did see this when upgrading some apps from testflight 31-32. I was able to reproduce it without doing an upgrade though so not sure if that's the only reason.", Comment on ', ', ', rnewman said to ship it in IRC - marking as reviewed.', Merged' 
id=1144909	 'Created ', ', PR #351', Comment on ', ', PR #351 Looks good to me.', Merged.' 
id=1109684	 "This is actually something we also want for Android -- deep linking for Twitter. Let's make sure those things agree.", To take this further, I think first we need to finalise the URI schemes Firefox will handle. Chrome handles following: googlechrome for http googlechromes for https googlechrome-x-callback for callbacks May be we need another for open in Firefox in Reading mode? Will these be ok? firefox firefoxs firefox-x-callback firefox-reader', Those sound good to me, but: * We support multiple release channels on Android. We might well do so on iOS. The choice we make here has to allow for that -- can multiple apps consume the same URL schemes? If not, are we happy with 'fennecs:'? * This is a public API, and once settled it's harder to change than other decisions. It would be worth starting a discussion on mobile-firefox-dev to get additional opinions before committing.", (In reply to Richard Newman :rnewman from ', ) ', I don't think they can. It is unclear what happens if multiple apps implement the same scheme. Probably random or some undefined order. In reality we will not be able to push a Beta or Nightly channel to the App Store anyway. Apple does not allow it. This is why there also is no Chrome Beta on the App Store. So the audience for this specific feature is *extremely* limited. So I would suggest that we do different schemes and that we create a small 'SDK' that third party apps can include. This SDK will basically wrap UIApplication.canOpenURL()/openURL() and by default just finds and delegates to the most 'stable' version of Firefox installed, with the option to specify a specific version if needed. (But I doubt third party apps would use that since it makes no sense on the App Store. It would be nice for our own testing and experiments though)", I'm a bit surprised this is tracking-... but Chrome has a pretty simple library that devs can use to do this (on their side, this doesn't include the code on our side). We should fork it: ", I think it's tracking- 'cos we wouldn't block ship on it. IMO we definitely want to do this, but we shouldn't rush something that we can't change later -- so let's aim for v1.1/v2.0. (If we can get a good, solid solution done sooner without slipping other goals, then great, of course.)", I would also like to see this included sooner than later. But I think think we should only ship this if we can also convince a bunch of third-party apps to use it. Examples that come to mind: Twitterific, Tweetbot, Reeder. These all support some form of 'open in $BROWSER_OF_CHOICE' if I remember correctly. I can send out some pings to developers and see what they think.", There's more discussion about this recently, and we decided tracking- back when June 2 was the expected ship date. Renominating to be sure this doesn't get overlooked.", *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', Currently working - here is my progress', Created ', ', PR (part 1) Beginning of starter implementation for opening links in FFX-iOS', Just a couple of small swift-ifications but otherwise good stuff :)', Comment on ', ', PR (part 1) LGTM', Comment on ', ', PR (part 1) I don't want to + this just yet because there are some issues in the PR that need to be addressed. Most important is using NSURLComponents to parse the incoming URL and to not use force unwrapping on NSURL(string:).", Comment on ', ', PR (part 1) Looks good, please merge.', mock upzz plzz!', Currently working on handling the UI for callbacks to Applications who open links in FFX-iOS and the client/app code for it!', Created ', Back to App.png Here is a quick mock of the back to app UI.', o0o0o0o0o0o0o0o mazin' mazing", Created ', Back to App.png', Created ', Back to App Landscape.png For landscape, it's going to be a bit tricky, but (I think/hope) we can do it. On load, display the caret and label\u2014but disable the rest of the nav. If the user taps on a link within that view, re-enable the nav and disable the caret and label.", Additionally, cap the label to 15 characters and use an ellipsis to truncate.', ooooo byootiful, thanks robin!', Created ', ', PR (part 2) just want the logic for handling the UI changes to be reviewed and refactored, etc.', Comment on ', ', PR (part 2) I doubt Stefan will get to this today (Canada day!). Let's see if I manage it.", Created ', Back to App.png updated with new caret asset example, more detail for text label.', Created ', Back to App Landscape.png updated with new caret asset example, more detail for text label.', Created ', backCaret.zip back caret assets.', :bkmunar you nipped out before I had a chance to answer so I\'m leaving this here\u2026 15:51 <bkmunar> i know you\'re on pto sigh, but wanna give me a brief talk about how to include assets with varying sizes? and/or point me to an example in the code? ahha sorry again >.< As far as I know, you use the UIImageView class. Example: In Client/Frontend/Reader/ReaderModeStyleViewController.swift 157 let brightnessMinImageView = UIImageView(image: UIImage(named: "brightnessMin")) 158 brightnessRow.addSubview(brightnessMinImageView) The image is located in ReaderSettings.xcassets Xcode now supports Asset Catalogs, so all you have to do is drag them here and it will automatically render a .json with the calls for the varying sizes. At first they will display below and you\'ll see three boxes @1x @2x @3x to drag them in. Make sure they are assigned "Universal" and you should be good to go! To make a new Asset Catalog, just find another .xcassets file and click the + on the bottom left of the asset list column. (at least, this is the easiest way I can find to do it)', Comment on ', ', PR (part 2) Feedback in the PR.', Comment on ', ', PR (part 2) revised code', Created ', Code for 3rd party SDKs, please review! "OpenInChromeAndFirefoxController"', Comment on ', Code for 3rd party SDKs, please review! "OpenInChromeAndFirefoxController" I don\'t like this for several reasons. First this code starts with "Copyright 2012-2014, Google Inc". It has their license on top. Which is really odd. Second, by supporting both Chrome and Firefox we now have become the maintainers of the Chrome code too. This is not what we want. My suggestion is to create a new project from scratch with three files in it: * OpenInFirefox.swift * OpenInFirefox.h * OpenInFirefox.m Both implementations do the same. One is for Swift projects, the other for Objective-C projects. The reason for providing both a Swift and Objective-C implementation is to make it simpler for developers to include their preferred implementation language.', St3fan: ok! I have the code for that too which I shall upload; My assumption to what Richard meant by adding Firefox support for the chrome code too was to fork it and add it in? So I did that and have my custom files too that are what you specified above. Thanks!', For reference, look at my OpenInFirefoxClient project on github, that has the code there (but needs to be updated a bit and will get to)', Created ', 3rd party code', Quick question \u2013 is there a reason we use a custom back caret vs. the system supplied one? I don't think we use a custom caret anywhere else, do we?", Darrin, it's because urlBar doesn't use the one apple provides (navigation toolbar or something?) which provides the back Caret for you, so we need to make a custom one (I believe)", Aka, if we don't use that class apple provides, we don't have access to that caret", :darrin - I prefer the native asset but Bryan ran into the above issue. I at least rounded it out a little to match the rest of the UI.', Comment on ', ', PR (part 1) Just for future reference, once the PR is merged and the bug is marked as RESOLVED/FIXED, it's best to open a new bug to address any follow-ups. Reopening the same bug for multiple PRs adds clutter and is harder to follow.", Comment on ', 3rd party code ', For the third party code, I created a new mozilla repository that we can move this to once r+'d: ", :bkmunar when in landscape, the navigation is disabled. The back caret and label display. If the user taps anything in the webview, the label disappears and becomes a back arrow. If the user goes back, the caret and label is displayed *and* the forward arrow. I'm making a new back caret that is essentially the back arrow without the line. If this doesn't make sense let me know and we can hop on a vidyo chat.", Created ', backCaret.zip updated backCaret', Comment on ', 3rd party code ', Comment on ', 3rd party code I removed myself from feedback to clear my queue. But if this patch is finished and you want a second pair of eyes on it, please add me back.', Comment on ', 3rd party code 3rd party PR looks OK to me. Can you squash all of these into a single commit before landing?', Comment on ', ', PR (part 2) Clearing review until new version is ready.', Done for v1 for now, will file separate bugs for v1.1 and on' 
id=1205800	 'Created ', ', ', Comment on ', ', ', Looks great!', Comment on ', ', ', This looks great, not sure if im settled on the transition from normal<>private tabs, but lets land this for now. Also I think the purple circle highlighting the mask icon in PBM is too large. I believe the spec has it at 32px, ui-review+ with that change.', Fixed nit and landed.' 
id=1273860	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', Merged, and closed.' 
id=1219241	 'Needs investigation.', Oddly, this is an issue that only manifests on device - I can't replicate it in the simulator. We are calling viewDidLayoutSubviews after starting to load www.ziare.com but before the redirect to m.ziare.com has taken effect from BrowserScrollController: animateToolbarsWithOffsets, causing the desktop site to partially render, before redirection causes the mobile site to render. This then loads to mobile site with an odd scroll position. If you open m.ziare.com directly, the odd scroll position rendering does not occur. However, since I loaded m.ziare.com directly, I have not been able to replicate the original redirection issue, even after clearing my cache....", Created ', ', Pull request', Comment on ', ', Pull request Unfortunately, I'm still able to reproduce this issue with the PR applied. I found that I'm also able to reproduce even if I go to m.ziare.com directly. Maybe it's a race affected by network, etc.? Otherwise, I wonder if they're serving different content to the UK.", FWIW, just tried reproducing in the simulator and saw the same issue there, too. Strangely, I've had trouble finding any cases where this *doesn't* happen, which sounds like the opposite of what yo re seeing!", Bugger. I was worried that would be the case. Once I stopped being able to replicate the issue it became very difficult to track down.', It's a latency thing. If I set the Network Link Conditioner to Very Bad Network I can reproduce this 3 times out of every 5. My patch did _something_. It is less frequent with this patch than it was before, but the problem still manifests.", I'm unable to reproduce this issue on latest master." 
id=1154554	 "FYI: TabManager takes a storage object to store these in a db (which I assume is needed here), but it isn't actually assigned right now. I've been meaning to fix that :)", Created ', WIP Feedback Request This all _seems_ to be working - I get a success response from the PUT, but I cannot then see the tabs I should have uploaded in about:sync-tabs when I sync my desktop.', Comment on ', WIP Feedback Request ', Created ', ', Pull request This one definitely works.', Comment on ', ', Pull request Close!', Created ', ', Pull request', Comment on ', ', Pull request Comments on the PR. Nice work!', This produces dodgy output: { "title" : "reddit: the front page of the internet", "icon" : null, "urlHistory" : "', ", "', ", "', " , "lastUsed" : "1437702183165" },', And it\'s in the DB: "', ","', ","', " ', Here's the error: history: displayURL + browser.historyList, var historyList: NSURL { func listToUrl(item: WKBackForwardListItem) -> NSURL { return item.URL } var tabs = self.backList?.map(listToUrl) ?? NSURL () tabs.append(self.url!) return tabs } so browser.historyList *already* includes every URL, including the current one. We then tag the URL on the front. That's wrong.", This breaks the remote tabs panel. 2015-07-23 19:54:51.021 Error SQLiteRemoteClientsAndTabs.swift:218 getClientsAndTabs(): Couldn't cast tab Optional(<RemoteTab clientGUID: nil, URL: ", , title: Support Forum | Mozilla Support, lastUsed: 1437706465816>) to RemoteTab. var acc = String: RemoteTab () for tab in tabCursor { if let tab = tab, guid = tab.clientGUID { <<<< if acc guid == nil { acc guid = tab } else { acc guid !.append(tab) } } else { log.error("Couldn\'t cast tab \\(tab) to RemoteTab.") } } Of course, it has no GUID, \'cos it\'s local. We don\'t filter them out when querying.', And another issue: on first sync we\'ll wipe the tabs DB as we apply incoming records. That\'ll throw away whatever we\'re about to upload. We should check for `clientGUID IS NULL` when wiping here. public func wipeTabs() -> Deferred<Result<()>> { return self.doWipe { (conn, inout err: NSError?) -> () in self.tabs.delete(conn, item: nil, err: &err) } } \u2026 // If this is a fresh start, do a wipe. if self.lastFetched == 0 { log.info("Last fetch was 0. Wiping tabs.") return localTabs.wipeTabs() >>== afterWipe } return afterWipe()', Created ', ', Pull request with fixes.' 
id=1229954	 'PR in ', . It's a one-liner.", v1.x: 15d4226 master: d114d5c' 
id=1323118	 "We disable custom keyboards because they were causing troubles. You can enable them in the settings 'Allow Third-Party Keyboards' in the 'General' section. Let us knwo if that helped, and if the iXhiamy works well, specially in the location bar.", Thank you, Stefan. I didn't they were disabled deliberately. After enabling iXhiamy, I can use it fine in the location bar." 
id=1177078	 '*** ', has been marked as a duplicate of this bug. ***', Seeing this on ios-feedback', Just a heads up, WKWebView cannot currently handle self-signed certificates (I happened to stumbled upon this while working on a project with WKWebView where I want to use self-signed certs for internal testing): ', Fixed in iOS 9 as navigating to pages with self-signed certificates now call didReceiveAuthenticationChallenge on WKNavigationDelegate so you can manually decide how to handle self-signed certificates.', Yes, in iOS9 we now have the option to do custom certificate validation and accepting self-signed certificates can most likely be build on top of that. We have a bigger plan of pulling in the Mozilla certificate validation code, but feel free to experiment with this to find out how well that new API works.', Going to investigate and breakdown for a potential mentor/contributor bug.', *** ', has been marked as a duplicate of this bug. ***', Did any of this land? If not, can we break this down?', Not sure why this is tracking 2.0. This is way too complex for 2.0. I'm moving it to + and I also have a plan to deal with all things related to custom cert validation but nothing is documented in bugs yet.", Created ', ', Link to Github pull-request: ', Going to split this into two bugs. This one will be about accepting certs, storing them in memory, and adding the simple accept/reject UI. The follow-up will add disk storage, including clearing the certs in settings. This one is mostly ready, but I want to do a bit more testing and add some test cases before flagging review. I don't expect the UI to change, though, so flagging for ui-review.", Robin, are the mocks at 1 finalized, or are things still in flux as we try to sync up with desktop? If the latter, do you think we could ship your earlier mocks (currently used in this PR) for 4.0, then converge with updated designs for 5.0? 1 ', Brian, the mocks have been updated (as of 20:08 this evening) and we should be going with a webview template, based on my mocks and not waiting for Desktop for 4.0', Comment on ', ', Link to Github pull-request: ', Functionality-wise, I think this PR is ready to land. It adds support for cert exceptions using the error page UI. This doesn't include permanent exceptions (", ); I'll try to have that bug up by tomorrow. The error page isn't at all styled/polished yet, but I'd like to land this so we can have the functionality/strings before 4.0. I figure we can iterate on the error page design on the stabilization branch since it's just tweaking HTML/CSS. Robin, can you double-check that the strings are all good to go? No ui-review yet -- I know the page looks hideous :)", Comment on ', ', Link to Github pull-request: ', One change: "Proceed if you accept the + potential risk - s".', Comment on ', ', Link to Github pull-request: ', Looks good! Just one edge case bug I found related to the history stack.', Comment on ', ', Link to Github pull-request: ', LGTM!' 
id=1122840	 'Created ', ', Proposed patch. v1 Let's see who gets to this first. This is a decent first step, I think.", This looks good to me. I'm curious why you decided to make Storage a completely new project instead of a new target within the Client project. I don't have a strong preference for either but a new target seemed more logical since that is also what happens to the embedded App Extensions for example.", I picked a new project for a few reasons: 1. It seems to offer the most potential for perf improvements. Dependent project + framework => only rebuilds when a file in that project has changed. It looks like the Swift compiler currently builds every Swift file in a project when any file in the project changes, regardless of any dependency analysis. That'll be fixed in time, but right now this seems to be the only way to make builds quicker. 2. Files can't easily span multiple projects. That's not the case for targets; it's easy for them to be members of multiple targets, which very much blurs dependency analysis. 3. Better modularity. In the course of splitting this up, you can see some of the public-ing I had to do, which encourages thinking about public/protected APIs. The same goes for tests, where Sync lives, etc. 4. This was an excellent experiment in how to set up a dependent framework project with a non-module header (sqlite3.h). If we can do this, we can take (or create) a dependency on just about anything, because this is just about as hard as it gets.", 1. It is not true. With a target you get the same build artifact, a framework, and the same rules for rebuilding that framework: only if one of the target sources changes. Or if the project that embeds the framework requests a full clean build. 2. This is an artificial reason. If you make a file a member of a specific target then it is perfectly clear when it should be built. For example, Xcode does not look at the files in our extensions when you make a change in the main application. That would be exactly the same with a framework target. No blurred lines. 3. Same with a framework target. I am worried that we are making our project already more complicated than it should be. For the wrong reasons.', To answer one of Stefan's 'angel' objections: ", I actually meant _human_ dependency analysis, not compilation. I'd assert that our abstractions are better if our tools help us to enforce modularity, rather than giving us a one-click checkbox to break it. Landed; if it gets too painful, then we can merge the projects and just do a target. ", Comment on ', ', Proposed patch. v1 Cleaning up. But also, we've hit some problems with this and test automation. I'm not sure if we want to revert it or not..." 
id=1254601	 'Created ', ', ', Not sure where the best place to put this feedback is so I'm just going to add it here: I've been playing around with a build of this on my device and I have to say moving the + to the bottom and keeping the tab tray button at the top feels more cumbersome than having both on top. Before, after paying the 'cost' of moving to the top corner, the next action of adding a new tab has zero cost where as in this model it's 2x - move up to get to tabs, move down to add tab. Is there any way we could move the tab tray button to the bottom as well?", Comment on ', ', ', Feedback provided in the PR', (In reply to Stephan Leroux :sleroux from ', ) ', We'd need to rework a lot of the UI to get the tab tray button to the bottom, but I can see where this could be a good idea. In fact, in my earliest wireframes (pre 1.0!) I had the Tab Tray button on the bottom bar. For now, could we disable the + for iOS 8 users since it will also be in the menu? Yo re right, it does feel a bit lopsided.", Yup we can disable the + for iOS 8 users. Just feels like we're punishing iOS 8 users by removing that button from the toolbar and making them go through the menu each time. We could move the menu to the right but then it wouldn't make sense when transitioning to the browser since it's centered there :( I've also left a comment in the PR with screen shots but I'll NI here as well. Question is : ", Comment on ', ', ', I've updated the PR with the new menu and animation. Should be good for review!", A couple of questions: 1. If the toolbar remains at the bottom of the screen in both portrait and landscape, should be menu present in Modal style in every case, rather than as a popover in landscape? 2. If the add tab button is always present on the left of the tabs tray toolbar, should it also be present in the menu? Or should there only be one add tab button present in the menu, for opening a tab in the opposite privacy mode? (i.e. New Private Tab when in normal mode, New Tab when in private mode)', Looks like I overlooked the mock up in landscape mode and assumed we were doing the popover since thats what we do for landscape in browser mode since we spawn the menu from the corner. I'll update to show it modally in both cases but keep it a reasonable width. ", :tecgirl mentioned above that we should hide the + button for users on iOS 8. Since those users don't have private mode, the toolbar looks pretty lopsided. For iOS 9, I think we'd want to keep the + around to keep visual balance between the mask button and + but I'll defer to :tecgirl if we want the duplicate button in the toolbar/menu.", I've updated the PR to fix up the comments and make the menu fixed width on wide screens.", Comment on ', ', ', Saw you had double feedbacked this. Did you want to re-review?', Comment on ', ', ', Just one small bug that I think will be easy to fix - no dismissal of the menu on rotation on iPhones (works as expected on iPad)', master 071437ac1f1cbb76b548a7e278c6e54e51c740bf' 
id=1196913	 "Here's a link to more info: ", **the app icon that is uploaded in itunes connect should not be rounded (should be square) and 1024x1024. (I see a lot of apps make this mistake where they upload a rounded icon and it tapers weirdly on devices.)', Created ', App Icon Squared .zip', Thanks for the fast turnaround! Its been uploaded. Updating to resolved.' 
id=1146464	 '*** ', has been marked as a duplicate of this bug. ***', Let's make sure these dialogs are hooked into the password save/fill system.", *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Comment on ', ', PR ', Looks OK to me with some comments. One thing that definitely needs to be fixed before landing is sorting out the localization strings, as mentioned.' 
id=1210124	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", **Additional Info:** - Feature built into IE for Windows Phone 8.1, Safari for iOS 9.0.2. Only users I know on either platform who don't regularly use go-to-desktop feature are young children." 
id=1159265	 "I noticed this too, and it seems we're not filling the new tab with any thumbnail or background (as we were before). Thanks for filing this.", Created ', ', PR 386 This patch adds a default background color to the tabs, which mitigates the poor animation a bit.', Merged, Aaron can you see if this fixes the problems you were seeing? We can close this bug if so, otherwise let's identify what else remains.", Slightly better, the roll-up of the blank about:home white screen filling up the content area from the bottom up still shows what looks like screen tearing', The slow pop-in of the main about:home top panel-bar (bookmarks, etc) might be of fault too.' 
id=1134786	 'Created ', browsingAssets.zip also included is the readermode on/off.', this is done?' 
id=1223132	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', UIImage *is* thread safe. But stuff that uses it might not be. So I think we can be more precise here.', Comment on ', ', Link to Github pull-request: ', Looks like the docs may be wrong -- see comments!', Looks like this might be a simulator-only bug. I can't repro on my device, and the issue reported at 1 is also simulator-specific. 1 ", Comment on ', ', Link to Github pull-request: ', Thanks for the CGImage suggestion. Creating a CGImage from NSData is pretty nasty, but I found yet another image API -- CIImage -- that UIImage accepts as a constructor. Better yet, CIImages can be created directly from NSData.', Comment on ', ', Link to Github pull-request: ', If this works, great. Something to think about, perf-wise: the image itself will be decoded as needed, almost certainly on the main thread. (That doesn't change with this patch.) CGImage gives us some control over when image decoding and caching happens: look up kCGImageSourceShouldCache and kCGImageSourceShouldCacheImmediately. If these have improved since iOS 7, this might allow us to force the UIImage to decode the source JPG or PNG on the background thread, buying us some responsiveness. If you still have a hacky CGImage-based branch around, maybe give this a shot for perf experimentation?", First measure, then change code :-) Add some logging around image decoding to find out how long it takes and on what thread it happens pls.', There is indeed a noticeable delay (~500ms) introduced this patch applied, when opening the tabs tray with 15 tabs open. Interestingly, this delay happens every time I open the tabs tray and not just the first time -- at worst, I was expecting CIImage to lazily decode the image just once on the main thread, caching the result for later. I never had a working CGImage implementation since I found CIImage before I got anywhere. I'll give it another go now.", Comment on ', ', Link to Github pull-request: ', CGImage looks like a dead end since, among other things, it requires providing the image width and height when we initialize it. Let's just go with the lock-based approach for now; it should be fine perf-wise since we'll be synchronizing access off the main thread. This also gives us a generic fix that we can use to replace all instances of UIImage(data: NSData).", Comment on ', ', Link to Github pull-request: ', If it works, LGTM.' 
id=1092564	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1180629	 'Created ', ', Pull Request', Comment on ', ', Pull Request FYI: Contains new strings.' 
id=1188921	 'Comment on ', ', ', Looks/feels good to me', Merged.' 
id=1247908	 'Created ', ', Pull request Being reviewed as part of ' 
id=1200658	 'I see issues with ', Karen, can you please add a few links to this bug where this happens?', www.bbc.co.uk/news/world-europe-34113471 (although when trying to find a link to make this work, I stumbled on www.dkrisel.com/en/blog/2013/0802_xerox-workcentres_are_switching_written_numbers_when_scanning and that worked)', (In reply to Karen Rudnitski :kar from ', ) ', I can see the Add to Reading List button in our toolbar fine. Tested on master.', All sites that Karen mentioned should just work. I think there is something bigger happening, possibly related to our internal web server. Trying to produce a good STR.', Created ', screenshot referenced in ', Ok, I have another example here that may provide more clues. I went to techcrunch.com and scrolled down to the 'latest' and tapped on the 'Mozilla Drops First Public Preview Of Firefox For iOS' article. It loaded, but the URL bar still states 'techcrunch.com' and hasn't loaded the exact article page (see attached screenshot as ", ). when I tap the RV icon, I see the progress bar, but then no change except that any icon in the URL bar disappears. If it also helps, I'm on 8.4.1.", (In reply to Karen Rudnitski :kar from ', ) ', Now that I read this, I'm interpreting this bug differently and it's sounding like bug ", Now that I read this, it's starting to sound like ", :)', Steph - that refers to the app being backgrounded, no? Which in my case it wouldn't be? (asking, because I don't know and/or yo re thinking that bug may resolve a larger issue)", It could be the case that you were previously using the, put the phone down for the bit and reopened it and saw it not working after that. This could also explain the infrequency of the bug. For example, if you navigate to a site that does work for reader view, then background the app or lock the phone then reopen it, it won't work the second time on the same site.", that would be a false assumption. This is me taking my phone in hand, navigating to the site, letting it load, pressing the RV icon, seeing the page 'load' but then nothing happen from that point on. Device still in hand. Have done the exact same thing just navigating to wikipedia, tapping on the 'article of the day' (hemmema), and this time the full URL loads, yet not the article in RV (and the icon disappears). Any logs that I could take? ... rnewman is in London next week and I could hand him my phone unless you want to tell me what to do in xcode.", I was just able to produce this on another tech crunch article: ', but only some of the time. I haven't been able to get a steady STR but I think I can reproduce it enough to investigate. :st3fan, mind if I take this one unless you have better STR?", Interestingly I'm able to reproduce this 100% of the time when following the same STR as this bug: ", . It looks like what's happening is that because the web server no longer accepts connects, it's not displaying the reader version of the page. The reason the icon still disappears is because that code lives in the user script which runs on the current page. I'm just about to land the patch that will fix that bug so we should do a test flight next week and see if we can still reproduce this after that fix as has landed.", (In reply to Karen Rudnitski :kar from ', ) ', That's the behavior I see in ", . It's exactly as if we load the same page again, but with no reader controls and no reader icon. If that's what you mean by this bug, Karen, then I guess I can repro weirdness myself without having to shoulder-surf :D If you mean something else, then let's split bugs!", Marking ', as a dependent issue to see if that fixes this issue. I'll keep this bug open in case that it doesn't and we can track the work to resolve any additional fixes here.", I'm pretty confident that ", will fix this.' 
id=1148666	 'Seems to also break the layering of the address-bar', Created ', ', Pull request', Comment on ', ', Pull request Looks ok I think. But see my comment about calling reloadData() from a random thread or during animation.' 
id=1212921	 'Created ', ', ', So turns out the root of the black tile issue wasn't that the image background was black but that the blur effect renders as black if there is nothing to blur behind it which is why it was black until the background image came. I've added toggling of the alpha on the effect view whenever we set/unset the image. This isn't the most elegant since we need to make sure to toggle alpha state every time we set the image but I'm hoping to make this better in the Top Sites Panel refactor.", *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', ', Our Top Sites code has gotten pretty complicated...looking forward to that refactor!', *** ', has been marked as a duplicate of this bug. ***', Merged' 
id=1281436	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM - small nit i think', Merged into master.' 
id=1162510	 'If i remove the table name, the string is merged into Client/Localizable.strings If I change it to "Shared", the destination is "Shared.strings" If I change it to "Shared/Sync", the string export fails. From a packaging perspective I think it is best if localized strings are packaged in the framework that contains the code with the actual NSLocalizedString() in it. That is what we\'ve been trying to do with the others. So I think that means I would prefer to change the tableName to "Shared" and then in the import-strings.py script we can do a quick special case to write this out to the right place.', Changing to "Shared" is totally fine by me.', Created ', ', PR: ', This is a fix for the Sync.strings files not being included in a strings import. It also includes a fix for a dependend bug that gives the Shared target a more traditional place in the project. See ', for details.' 
id=1225890	 'Added update to nb-NO and nn-NO from ', . Stefan, any help in figuring out this bug?', This patch looks good. I think we should land it. Is this urgent? Or can it wait until 2.0? I don't understand the process to do this. But I see people raise concerns about it for a while. So I think we should rethink this. Ideally it is just a simple 'pull from android' kind of thing to keep it all in sync. But I don't know if that is still possible with the customizations that we have been doing for iOS. (Search Codes & China specific?)", It's OK to land this in the 2.0 timeframe. As for China (or others), we can think of an exclusion list.", Comment on ', ', Pull request on Github I think the main reason we've diverged from the Android search engines is that we use different search codes on iOS. I was hoping we could eventually add another step to the import script that does a map/replace of Android->iOS search codes, allowing search engine imports to be automated again. If that's not an option, we'll have to remember to manually update this repo every time we change the Android engines, which is far from ideal.", Does this need to go into 1.4?', How urgent is this? Can this wait a few weeks?', It can definitely wait 2.0' 
id=1171055	 'Created ', ', Pull req. I think this is the spot.', Comment on ', ', Pull req. 12:29:13 < st3fan> 560 looks good.', Landed.', Thanks. Reminder: "login" currently occurs one other time ("to login to my Firefox"), but I was told that string needs a review. Also, the "log in button" text within the note changed by this bug should probably have stayed "login button", but it\u2019s only a note.' 
id=1183661	 'Oddly about:home re-appears if you tap the address-bar on the restored tab. We need to fix this awkward state.', Brian, could you merge these?', *** This bug has been marked as a duplicate of ', ***' 
id=1104120	 'Created ', ', PR: ', This patch gives the Share Extension the same name as the Application. So it would match the channel-specific app name: Firefox, Fennec, Fennec Nightly or Fennec Aurora. I think this naming is good since it follows what other apps do and also Apple's guidelines. (See App Extension HIG). We can tune this later if we need to do something different. This patch puts the right build settings in place to change it easily.", Comment on ', ', PR: ', This fits in with the existing system and other app labels, which is what we want here. Some discovery will be dependent on the user experimenting with this, but I don't think the ambiguity introduced by this label will affect usage (I'd argue that Share To is no less helpful)." 
id=1262374	 'Created ', Capture.PNG', So here's something else. I opened a new tab and went to adjust.com. I tapped 'log in' and got the sign-in dialogue box. I have my credentials in the log-in box and click 'sign in' and what happens? I don't sign in, but rather a new tab with the 'Nest Hub Shutdown' article loading - every single time. It's not letting me sign into adjust, but instead just opening up the 'sent tab' article instead.", BTW, I have decided it's not user error (ie in my attempts to refresh the tab). I have now had this tab opened on its own over 25 times now. Something to do with the sync service?", Hey Karen. There's an known issue about sent tabs being shown on desktop after each sync. Please see bugs: ", ', GREAT! And given it looks like it was just resolved / fixed, I'll wait another few days before trying again. Glad it was picked up! *** This bug has been marked as a duplicate of ", ***' 
id=1192388	 'Created ', ', ', Comment on ', ', ', This looks good. Just to be sure, I see this is also called for the Client scheme, which is not really one we distribute or run Archive on. Do we care about that?', Comment on ', ', ', Probably not but you never know when we might want to debug a debug build or something. I just added it to be consistent.', Merged', url: ', changeset: be13a2a84e69770bd8937fca372c04f0d348563c user: Gregory Szorc <', > date: Mon Aug 10 11:40:00 2015 -0700 description: ansible/hg-reviewboard: drop maximum requests in WSGI processes (', ); r=fubar This was recently changed in production as a way to try to keep memory leaks in check. url: ', changeset: 8f9f32ec31285555ca8a3ccfbee22605f8637ca5 user: Gregory Szorc <', > date: Mon Aug 10 11:42:20 2015 -0700 description: ansible/hg-reviewboard: more minor formatting changes (', ); r=fubar url: ', changeset: a0d3fce51aa8930f3eb0a00f6d303ac3d3b29c0c user: Gregory Szorc <', > date: Tue Aug 11 10:39:52 2015 -0700 description: ansible/hg-reviewboard: grab LDAP settings from a file (', ); r=fubar This is similar to what we do on hg.mozilla.org. This will eventually enable the pash files to not be templates. url: ', changeset: 18427d4f33dc48e18957e7a44cee710881ed9486 user: Gregory Szorc <', > date: Tue Aug 11 10:40:00 2015 -0700 description: ansible/hg-reviewboard: convert pash from templates to regular files (', ); r=fubar With LDAP credentials coming from a standalone file, there are no longer any substitutions in these files and they can be converted to regular files. We drop the docker-startup tag because there are no changes at container start time to make, so this isn't necessary.", Yay typo in bug number.' 
id=1144165	 'Created ', ', PR: ', Hide/show the reader mode controls when navigating within the same tab or switching between different tabs.', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR: ', Since this is so trivial I am going to go forward with this patch and merge it without review.' 
id=1130146	 'Also including the PRODUCT_NAME changes here, which is used as the final part of the bundle identifier.', Ignore that last comment.', *** This bug has been marked as a duplicate of ', ***' 
id=1271721	 '(In reply to Stephan Leroux :sleroux from ', ) ', 4 seconds seems comfortable ', Yes, a manual option should still be available ', Yes, these strings are a WIP. Let\'s simplify! "Sync failed" ^ + make the statusbar tappable to take the user to Settings', When syncing manually do we want to display 'Syncing...' for the duration of the sync, for the 4 seconds as well, or not at all?", (In reply to Stephan Leroux :sleroux from ', ) ', 4 seconds', Created ', Link to Github pull-request: ', *** ', has been marked as a duplicate of this bug. ***', Comment on ', Link to Github pull-request: ', Lookin' good!", master 11fe03e7832a894ffe0337370595de18cb043811' 
id=1164631	 "I'm not able to reproduce this in the latest aurora build (# 17)", Haven't seen this issue as well in a long time and should have been fixed as part of this patch " 
id=1228607	 'Created ', ', Link to Github pull-request: ', Steph, this was your log output, so flagging you. Emily, could you think about the sqlite implications, or punt to someone else?', Steph, this should go in Monday's build if possible.", N.B., it's actually kinda nonsense to try to do an integrity check on an encrypted DB without specifying the key. sigh.", master: 8eede6b', Uplifted: 3ed3912' 
id=1241450	 'This is related to ', . Again, the ViewLater tab is being opened when the app starts from the ViewLater extension and has nothing to do with the 3DTouch action. The ViewLater tabs are only ever opened on app start/foregrounding.', Closing as invalid as it is expected to open View Later tabs when foregrounding Firefox' 
id=1186692	 "Well, I was able to reproduce this multiple times in the simulator earlier today on different branches (including master). It's suddenly working again, so no idea what was going on there. Hopefully won't see it again!" 
id=1173886	 'To add some clarification, this situation only occurs when we are restoring with no tabs. In most cases it seems that we always have at least one tab.', I guess that drifts the topic into zombified tabs...', Someone got their bug number wrong. I'll chase that down.", Folks trying to chase that commit down: yo re looking for ", .', Now that we've replaced UIStateRestoration with our own restoration logic, we're not at the mercy of the the system's strange lifecycle logic for when things should be restored so this scenario should only happen in the rare exception that are no tabs to restore since there should always be at least one tab open. See ", for details.' 
id=1253223	 ' see sign-in-label.png --> the bottom choice was what was decided on by UX' 
id=1116535	 'Please ape Bookmarks!', Created ', ', Pull request', Comment on ', ', Pull request With a rebase, I think this mostly looks OK with my main concern being the thread safety with Core Data.', INVALID due to ' 
id=1132456	 'How about a simple standard modal dialog that says "A newer version of this application is available for download. Tap OK to go to the download site." Cancel OK I can keep this simple and add it today if we want this for test builds.', Love it.', Created ', ', PR: ' 
id=1124500	 'Created ', PR: ', This fixes a couple of small rendering issues: * 1127988 - Badly fixed protocol relative URLs * 1124506 - blockquote tags are rendered incorrectly * 1124504 - Lists are rendered incorrectly', Removing meta since there's a PR attached." 
id=1198986	 'Do we really? The license text is available in the store. If not, we should put this in Licenses -- "legalese".', Yes, just like we have it on Android. We need to have it easily accessible for users so they can refer to it at any time.', Created ', ', ', Created ', ', Swift 2.0 Implementation', Merged', Note flags, Steph.' 
id=1135921	 'Created ', ', PR 317', Comment on ', ', PR 317 ', Comment on ', ', PR 317 This looks good. There still is an issue with screenshots not always being the right size. I think I triggered it by opening a few tabs and then switching back and forth between landscape/portrait (on an iPhone 5S). Lets make that be a followup bug? Can you squash the commits into 1 before you merge?', Merged: ' 
id=1266661	 'Please note that this issue can be reproduced also by opening the new tab from step 5 via 3D Touch feature.', :simion - Do you have the 'Close Private Tabs When Leaving Private Browsing' option set to On in your settings? If you do, then this is the reason why your private tabs are being closed when you open a new non-private tab from Quick Actions and the Today widget.", The \'Close Private Tabs When Leaving Private Browsing\' option is set to On as mentioned in step 2). The issue is that the opened Private Tabs close only when switching between normal browsing and private browsing using the "Today widget to open Tabs" when the Private Browsing Tabs tray is opened. When switching between normal and private browsing from page view using the "Today widget to open tabs" or 3D Touch feature, the In Private Tabs will not be close.', Robin, do we want to do anything here?', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Since 'Close Private Tabs When Leaving Private Browsing' is set to ON , *any time* the user leaves PBM, those tabs should be closed. That includes if you leave the app in PBM and choose to open a New Tab from the Today Widget or 3DT." 
id=1211682	 
id=1278854	 'Did you manually sync both clients?', Both clients were manually synced before and after the tabs were sent. The functionality is correct though when using the 3D Touch function to send tabs on IPhone 6 S to desktop.', Gotcha. I can reproduce too. I see this on attempt to send. 2016-06-08 11:58:14.822 Client 4524:1149095 plugin org.mozilla.ios.Fennec.SendTo invalidated', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Whoops. Nice catch!', master 8df543bef2cabc0fc6dd65b64f4c1235147858f1', v5.x afeaa8e', Verifying as fix on master 6ad4b686.' 
id=1236636	 'Sim scaling and window semi-off-screen for bottom bar' 
id=1169889	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1314369	 ' *** This bug has been marked as a duplicate of ', ***', Wrong bug to mark as dupe.' 
id=1249635	 'Created ', ', Github PR Might make sense to wait for ', to land before this because this patch is built off of that one.', master c31639691fa35603b1b33cc6affd113403d9b61a' 
id=1094952	 'This viewer should be exactly the same as the viewer for Reader', (In reply to Stefan Arentz :st3fan from ', ) ', I hope this is a dupe of the Reader bug', (In reply to Mark Finkle (:mfinkle) from ', ) ', Yeah you are probably right if that means: When the user does does not explicitly use an Open in Reader action, this view will default to rendering a web page. And in that case we will also, if we detect the page can be turned into reader mode, show a Reader button somewhere.', No longer relevant with design changes.' 
id=1140535	 'Created ', ', PR: ', This patch adds a button bar to reader mode. Couple of notes: * I could not correctly get the scrolling of the toolbars to work with this new bar added. So to not block on that I have *temporarily* disabled the hiding of the button bars. I will file a followup to fix this as soon as possible. I'd like to land this first so that it can be looked at. * Not all the buttons work. This is because some of the underlying reading list storage has not been committed yet. I have added `TODO` comments in the code and will file a followup for the database changes needed. * I have removed the old hack of a long press on the star button to add an item to the reading list. This can now be done with a press on the Add to Reading List button in this new toolbar. Note the second point though, the button will not just yet change to a trashcan icon until the database changes have been done.", Comment on ', ', PR: ', Reluctant r+ since yo re adding one feature at the expense of another, so it's a net no gain. I'd prefer getting the URL bar issues sorted out before landing this, but I won't block you if you think it's useful to get this in now.", Another option would be to keep this on a separate branch in the repo, then you can continue working on this feature and landing commits there without having to make all these in-progress changes to master branch. Once everything working like you want it, you could then merge the entire reader button bar branch into master.', This was already landed. I'm filing a bug to fix the url bar hiding now and will address that asap." 
id=1151450	 'I could not reproduce this error. I successfully added it from Safari and opened it from Firefox in Reading View via the Reading List. Is it possible that there was no network connectivity when the item was opened from the reading list? I just filed two bugs to get rid of those TODO messages: ', ', I believe this just might be the issue of seeing the interstitial errors before the data came in (how quickly can we get that?). Feel free to dupe.', It depends. We load the original page in the background in a web view. So it may take a while if the page is complex or if the network is slow. I think there currently is a 10 second wait before we decide the page has failed loading. If that is too short then we can tweak that. I've duped this one to the 'we need a loading interstitial' bug. But please re-open if you think this is a different issue. *** This bug has been marked as a duplicate of ", ***' 
id=1201642	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', The UI should follow what we\'re doing in Settings, with top and bottom borders to help separation, and no subsequent dividers on the cells below the "Clear Private Data" button. As far as the toast is concerned, something would be nice, even if for a couple of seconds before it bumps you back to Settings. I would not leave the user on this screen after they\'ve completed the action.', Hey Robin, updated the cell styles. For the post-click toast/alert, do you know what we want now, or should I file a separate follow-up for us to decide on that UX?', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Brian, Go ahead and file separately, because this looks good, works, and is good for now. I do believe it can improved by either an alert with more information about what yo re clearing or a self-destructing toast that takes you back to Settings (like you have now).", (In reply to Robin Andersen :tecgirl from ', ) ', Thanks! Filed ', .', Comment on ', ', Link to Github pull-request: ', Plan to land this along with ', .', Comment on ', ', Link to Github pull-request: ', Nice patch series. The preamble guiding the reviewer is appreciated!', Merged 7eb679a.', ', "Clear Private Data" string shouldn\'t be one string but at least two (if not three).', Not sure why the needinfo for me, but I can confirm this is an issue, and I\'d suggest to file a new bug for it: while English might be fine with "Clear Private Data" used as both title and button label, other languages are not. One string, two different contexts that I can see. Sadly, as discussed in the past, there\'s no easy solution since we use the actual string as string identifier.', Filed ', ; hopefully we can address this by using a separate tableName.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Unfortunately not, ', (In reply to Stefan Plewako :stef from ', ) ', Hm, looks like it did actually separate two of them (see 1 and 2 ) -- but I forgot that the same string appears on the same settings panel (as the nav title and a button). We could create another tableName specifically for one of those, though that feels like a hack :\\ 1 ', 2 ', Can we use a string id (i.e. "clear_data_button") instead of the actual string as identifier? See "String Key Best Practices" section ', This seems like a good idea, though I'm not sure I fully understand the details. If we use a key, where do we map it to the actual string? Do we need to start manually maintaining an English string file like we do on Android?", I guess that's more of a question for Stefan, in case he's familiar with this approach. I can bring this up in our next iOS meeting.", Can we go with the table name solution here? It is correct that we should have probably used indirect keys instead of (ab)using the English base language string as the identifier. But I think it will be worse to change that now for just one string. It will also break our l10n flow because we are not prepared to deal with that. If we feel we need to use a different approach then we should turn that plan that for a next release and do it consistently through the whole product.', (In reply to Stefan Arentz :st3fan from ', ) ', I don't that's a good idea: changing all IDs mean invalidating all the existing translations. If we ever decide to use proper string IDs, that should involve a gradual approach, i.e. using it only for new strings." 
id=1215263	 'What actually happens here is that the UITableViewHeaderFooterView follows the user defined text size from Settings -> Display & Brightness -> Text Size. I think a solution is to implement our own header view that does not do this.', Created ', ', ', The issue wasn't being caused by dynamic type that was introduced in iOS 7, but was a regression added from ", . Moving the textLabel setup code into the init caused it to not correctly layout. If you were to scroll down and back up, yo ll see the label would become the correct size. To fix this, I've replaced the layoutSubviews code with autolayout and replaced the textLabel with our own label but expose it by overriding the default textLabel so consumers can still use it as it was. Another nice thing about overriding textLabel is that the titleForHeader delegate method still works even though it's a custom label!", Comment on ', ', ', I wasn't sure but do we want this left or center aligned?", For future reference if we do want to do dynamic type for custom fonts and such: ', (In reply to Stephan Leroux :sleroux from ', ) ', 7:24 PM <tecgirl> IMHO I prefer left aligned 7:25 PM <@rnewman> concur 7:25 PM <darrin> the committee has spoken ;)', Comment on ', ', ', LGTM, though I think 11 is a tad bit small. 13 is too big, 12 feels just about right. 11, 12, 13 comparison: ', I think we should definitely explore Dynamic Type \u2014 especially for tableviews like this.', Comment on ', ', ', LGTM!', Landed' 
id=1163068	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1227103	 ':tecgirl Sachin, a contributor, is working on this. He is asking if copied URL could also be copied Text as you may want to do a free text search rather than just paste a URL. Is this something we want to consider? If so, how would this work with the copy URL feature switch that is planned?', I think this is totally reasonable and we should do it. ', is still open 2.0 so I can comment to update the string and behaviour. For the toast and here, we would need to update the string to 'Paste and Go' and detect the query.", This isn't possible." 
id=1109667	 'Fixed with ' 
id=1172524	 '*** ', has been marked as a duplicate of this bug. ***', Duped bug is tracking, so carrying over flag and assignee.', I remember you mentioned you had an idea around this bug. I took a look through the sync code and found the TabSynchronizer's lastFetched Timestamp we're using to store the last fetch time. What are you thoughts on exposing this in the SyncManager vs. keeping the re-download heuristic internal to the sync framework?", lastFetched is a server timestamp, so we can't use that. (Which is one reason why it's not exposed.) We should be just saving some local clock timestamp in a successful refresh(), like barbarians.", Created ', ', PR ', This patch adds some throttling behind refreshing of the client/tabs on the RemoteTabsPanel so we're not hitting the network every time. Instead, a one minute delay is used since the last sync time.", Comment on ', ', PR ', Comments on the PR.', Merged.', *** ', has been marked as a duplicate of this bug. ***' 
id=1251689	 "I tried to pull some of our Adjust code out so it's not so tied to Profile and Client. Alas: ld: warning: linking against dylib not safe for use in application extensions: /Users/rnewman/moz/git/s2fxios/Carthage/Build/iOS/AdjustSdk.framework/AdjustSdk So I'm going to build a little dropbox instead, minimize coupling.", Adjust is a bad fit here.', Created ', ', Pull req.', Comment on ', ', Pull req. LGTM', Comment on ', ', Pull req. Rebased down. Now validates even if merging is disabled.', 85f783c', v3.x 2de524c' 
id=1184582	 'Created ', ', PR ', (In reply to Wesley Johnston (:wesj) from ', ) ', Looks good!', Comment on ', ', PR ', Padding out tests here a bit, but what do you think rnewman?', Too much risk for v1.', I pretty strongly disagree with this since its such common feedback (both here and Android). Maybe we move forward with a simpler solution for now? i.e. partition in memory and deal better with deletions in the future.', Apologies for the brief triage comment; we were running through the list. Acknowledged that feedback on top sites is generally poor for this and other reasons. At this stage -- weeks from ship -- I want to avoid us spending a lot of time iterating on either the UX (based on feedback) or storage (for perf), because we just don't have the time and can't afford the risk or the time spent on backing out stuff that didn't pan out. We have a big enough backlog that having this slip by two or four weeks doesn't seem like the end of the world, even though what we ship in v1 will be far from perfect. This _could_ make v1\u2026 _if_ we can scope it right down _and_ make sure we're not throwing the baby out with the bathwater. However, I'm not totally convinced that we can scope grouping/clustering down without taking on risks we don't understand: e.g., partitioning in memory means fetching more things from the DB and hoping for the best (likely bad news with data in the wild, and of course a perf hit). And yes, we'd probably need to turn off deletion of top sites, which will bring its own negative feedback in the absence of ", . Or we'll ship a confusing or surprising experience by making some decision about what to delete. My conclusion, then: if other simple top sites improvements like ", make top sites less painful (and it should, because no Gmail message or Google Maps link or individual bug should outweigh any of the pages yo ve visited locally) then I think the risk/reward for trying to get this into v1 doesn't make sense.", Robin: can we find some time this week to talk through the experience here?', (In reply to Richard Newman :rnewman from ', ) ', Meeting invite sent.', Conclusion from meeting: Part of this is scope/goal, and part of it is pitch. If we\'re pitching top sites as suggestions, then it matters less that they\'re directly entries from your history. In a sense they\'re computed/suggested bookmarks, not a slice of your history. The other part is that we really want to solve the "m." problem, which was one of the big motivations for filing ', in the first place. So we're going to do two things: * Make sure that deletions don't actually delete anything from history. Deletion doesn't make sense at this stage. That might involve adding a domains table so that we have a place to mark a 'hide' flag. I'll file that bug now. * Not just group on domain, but also eliminate www, m, and whatever prefixes desktop ignores in its newtab page. We'll also have to keep an eye on the wording and user feedback to make sure we're making people happy. This bug has a few details in it that are tricky, like grabbing the first/best/right favicon, excluding hidden top sites, and keeping within an acceptable perf envelope. As such we accept that this might slip from v1. But if it's done in time, without huge risk, then we'll take it: top sites is front-and-center and a big part of our perceived quality. Separately, we need to figure out where we want to go with top sites: towards curation, navigation/hierarchy, prediction, or suggestion. That's a much bigger conversation that Karen, Robin and I will have over wine some time.", Links from Wes for desktop's logic: ", ', First pass review comments left, Wes. Thanks for tackling the growing scope!', *** ', has been marked as a duplicate of this bug. ***', Updated the PR, but had some questions about comments.', Comment on ', ', PR ', General approach is sound, but I think there are some bugs introduced by the refactor.', I did! Updated. For the local insert case we actually have a connection we reuse a bunch (i.e. try to update with it, if that fails try to insert). Making that work with the remote stuff was going to require lots of moving, so I just reverted back to what you had originally.', Updated this a bit more again. It will now upgrade old users to the new db a little better.', I'm wrapping this up.", Urgh, this breaks a few tests, like ClearPrivateDataTests. Might be a tough landing.', Wes: the approach I plan to take for a less-expensive way to do the domain upgrade without adding function support: * Query for unique URLs. (One query.) * Domainify into pairs in memory. * Insert into a temporary table with two columns: URL -> domain. We can do this 500 at a time by query substitution into a multi-row insert. We'll do this within a transaction. That's ten queries for a large Sync user. * Update the history table to join against that table in a single UPDATE.", This also breaks our frecency perf test, because now we default to fetching icons, which is WAY more expensive: EXPLAIN QUERY PLAN SELECT history.id AS historyID, history.url AS url, title, guid, COALESCE(max(case visits.is_local when 1 then visits.date else 0 end), 0) AS localVisitDate, COALESCE(max(case visits.is_local when 0 then visits.date else 0 end), 0) AS remoteVisitDate, COALESCE(sum(visits.is_local), 0) AS localVisitCount, COALESCE(sum(case visits.is_local when 1 then 0 else 1 end), 0) AS remoteVisitCount FROM history INNER JOIN visits ON visits.siteID = history.id WHERE history.is_deleted = 0 GROUP BY history.id ORDER BY localVisitCount * 5 * max(1, 100 * 225 / (((1437144513605000 - (localVisitDate)) / 86400000000) * ((1437144513605000 - (localVisitDate)) / 86400000000) + 225)) LIMIT 10; => 0 0 0 SCAN TABLE history 0 1 1 SEARCH TABLE visits USING COVERING INDEX idx_visits_siteID_is_local_date (siteID=?) 0 0 0 USE TEMP B-TREE FOR ORDER BY versus EXPLAIN QUERY PLAN SELECT historyID, url, title, guid, localVisitDate, remoteVisitDate, localVisitCount, remoteVisitCount, iconID, iconURL, iconDate, iconType, iconWidth FROM ( SELECT history.id AS historyID, history.url AS url, title, guid, COALESCE(max(case visits.is_local when 1 then visits.date else 0 end), 0) AS localVisitDate, COALESCE(max(case visits.is_local when 0 then visits.date else 0 end), 0) AS remoteVisitDate, COALESCE(sum(visits.is_local), 0) AS localVisitCount, COALESCE(sum(case visits.is_local when 1 then 0 else 1 end), 0) AS remoteVisitCount FROM history INNER JOIN visits ON visits.siteID = history.id INNER JOIN domains ON domains.id = history.domain_id WHERE (history.is_deleted = 0) AND (domains.showOnTopSites IS 1) GROUP BY history.domain_id ORDER BY (localVisitCount * (5 + localVisitCount)) * max(1, 100 * 225 / (((1438225597320207 - (localVisitDate)) / 86400000000.0) * ((1438225597320207 - (localVisitDate)) / 86400000000.0) + 225)) + remoteVisitCount * max(1, 100 * 225 / (((1438225597320224 - (remoteVisitDate)) / 86400000000.0) * ((1438225597320224 - (remoteVisitDate)) / 86400000000.0) + 225)) DESC LIMIT 10 ) LEFT OUTER JOIN view_history_id_favicon ON historyID = view_history_id_favicon.id; => 1 0 1 SCAN TABLE visits USING COVERING INDEX idx_visits_siteID_is_local_date 1 1 0 SEARCH TABLE history USING INTEGER PRIMARY KEY (rowid=?) 1 2 2 SEARCH TABLE domains USING INTEGER PRIMARY KEY (rowid=?) 1 0 0 USE TEMP B-TREE FOR GROUP BY 1 0 0 USE TEMP B-TREE FOR ORDER BY 3 0 0 SCAN TABLE favicon_sites USING COVERING INDEX sqlite_autoindex_favicon_sites_1 3 1 1 SEARCH TABLE favicons USING INTEGER PRIMARY KEY (rowid=?) 2 0 0 SCAN TABLE history USING COVERING INDEX sqlite_autoindex_history_2 2 1 1 SEARCH SUBQUERY 3 USING AUTOMATIC COVERING INDEX (siteID=?) 0 0 0 SCAN SUBQUERY 1 0 1 1 SCAN SUBQUERY 2', Even with icons removed we're taking twice as long. That extra join (even when CROSS JOIN is used to get history first) and the grouping is pretty painful.", I managed to get this down to an 18% regression, which isn't bad considering the extra work being done (and some of that will be logging overhead). My PR is up to date: ", I'll tidy that, record a new baseline, and request review from Karim and Steph in the morning.", Created ', ', Pull req.', A UI question: where there's no page title, should we show the domain instead of the URL? Right now my top sites show Twitter mozilla/firefox-ios ", \u2026 so that would change to be facebook.com Tapping the tile still takes you to the winning individual history item, not the domain.', Comment on ', ', Pull req. Work looks good to me and works well. Just left a comment for curiosity.', (In reply to Richard Newman :rnewman from ', ) ', Yes, definitely strip out the protocol and display the domain, with as much directory as possible with truncation.', Comment on ', ', Pull req. Looks good.', Filed ', .', *crosses fingers* ', I'll be around today for any fallout.", *** ', has been marked as a duplicate of this bug. ***' 
id=1130517	 'This card was removed from requirements. Was created in error, probably a header. Removed as a blocker to V1 release.', META IOS-48 - tagging removed for search purposes' 
id=1193530	 'Created ', ', Pull req. If this is the same problem, this is the same fix.', Comment on ', ', Pull req. LGTM', 737802f' 
id=1144841	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1218830	 '97fe50b' 
id=1154402	 'Sorry so the above example would actually be: cell.textLabel?.font = UIFont.systemFontOfSize(17, weight: UIFontWeightNormal)', I ran into UIFont.preferredFontForTextStyle today. That would also allow our font sizes to adjust to the system setting for size (not just bold). Do we want that?', We should be good citizens and respect the user choices from Settings/General/Accessibility. With an adaptive layout this should indeed not be a problem at all. So I\'d vote for "yes, we want that!"', I agree with Marco. In general, it would be best for consistency on many levels (including accessibility) to use Dynamic Type (i.e. UIFont.preferredFontForTextStyle) where possible and where the designers allow that / OK that :-)', Created ', ', PR: ', This patch replaces calls to `UIFont(name:size:)` with `UIFont.systemFontWithSize(,weight:)`. This also replaces the usage of `UIAccessibilityIsBoldTextEnabled()` because systemFontWithName() will automatically return a bolder font when the user has enabled that feature.', The UIFont.preferredFontForTextStyle() call looks interesting. If we can use this then lets do this in a followup bug. I see it uses text styles like 'Heading', 'Body' and 'Footnote'. I am not entirely sure how that would map to our designs. Maybe that is more for structured content?", Comment on ', ', PR: ', LGTM!', Ya I've heard good things about UIFont.preferredFontForTextStyle but also have heard that the number of sizes you can choose from is limited to the following choices: let UIFontTextStyleHeadline: String let UIFontTextStyleSubheadline: String let UIFontTextStyleBody: String let UIFontTextStyleFootnote: String let UIFontTextStyleCaption1: String let UIFontTextStyleCaption2: String The other thing to watch out for is the font sizes can change depending on the user's text size preferences which can cause layouts to break if we made any assumptions about the size of any labels." 
id=1166116	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM. Are you sure the delete behaviour that you describe is not what we do want?', (In reply to Stefan Arentz :st3fan from ', ) ', Yeah, we should only show completions after inserting a character, never after deleting them. This is how desktop and Android work.', *** ', has been marked as a duplicate of this bug. ***' 
id=1176500	 'Created ', ', PR ', Adds the slight arc to the top left of the URL bar. Also needed to update the constraints/frame of the URL bar for the cancel button animation to work properly.', Comment on ', ', PR ', Looks great, ship it!', Comment on ', ', PR ', LGTM. Minor comment about maybe caching the UIBezierPath.', Merged' 
id=1229747	 'Is this potentially a dupe of ', ? Wonder if the same steps resolve this bug with the relayout. If not it might be another issue.', Yup, missed that one. Marking as dupe *** This bug has been marked as a duplicate of ', ***' 
id=1254577	 
id=1134532	 'Can you elaborate on what happens here? Any STR?', Created ', ', PR ', Comment on ', ', PR ', Dropped some comments on the PR. I like the idea of using a custom gesture recognizer to capture the touch events to give us more control over the behaviour. I would double check to make sure all the click events on links on web content still work though.', Update the PR with your nits. Clicking works fine. I did see this lockup once again though...', Comment on ', ', PR ', This feels awesome. After my changes, I noticed that there was jank when zooming into the web content but it seems like this custom gesture handling solves that :) Go ahead and land this patch down and I'll update mine with these changes.", Merged.', Filed ', for link scrolling bug. Merged PR.', Bah wrong ticket...', This regressed some stuff. Going to work out a "backout" tomorrow morning.', Created ', ', PR ', This backs this out. I actually would feel sorta OK just fixing up the canBePreventedBy method, but I think this is probably safer.', Comment on ', ', PR ', Ya I had a branch open that fixes another issue related with the reordering of the super calls which was causing issues on master after the build was cut but I feel safer for now landing this patch instead. I'll land this in so we can cut a hotfix build for the beta testers.", Merged.' 
id=1122224	 'Created ', ', Pull request', Already gave this a run through, but will do another review pass this afternoon.', I have a rebased and cleaned up pull request here: ', It compiles except for apparently missing sqlite3 itself; Wes, could you take a look?', Figured it out!', Merged: ' 
id=1146392	 'Works for me, uses the standard iOS bubbles', Works for me too.' 
id=1277584	 '(In reply to contact from ', ) ', That is not the Firefox UA. We identify as 1 . 1 ', Visit ', in Firefox I'll let others speak for the crux of this report.", I know that it's not the firefox UA, but that line in my log come from the firefox app when opening a new tab so there is something weird...", No response ?', Hey contact, Thanks for filing this - it's a great find. Currently, whenever loading the 'Top Sites' panel, we send out a web request to any sites that will be appearing on the panel that don't have a favicon. To do this, we make a request to the actual page and parse out the favicon links from the HEAD tag. Looks like in your case this request is trigger the mailer yo re testing. We really shouldn't be making a request at all - especially for just for the favicon. Instead of requesting for the favicon, we could show a default favicon icon.", Hi, Thank you for your answer, I think it would effectively be better to not make that request because it can lead to unexpected behavior, my mailer script sended 8 times emails to about 1000 customers as i opened 8 new tabs, not good :( Maybe you could just call the domain and not include the end of the url, in my case it could have call ', (where there is a favicon header tag) and not ', (where there is no html outputed as it is just a php script) Hope it will be fixed soon beacause I really enjoy to share my history between all my browsers :) For now I just disabled sync of history. Best regards Bastien', Or maybe you can just try to fetch ', (I think most of the time favicon are in the root folder)', To confirm: this is the top sites panel hitting your page when a) yo ve visited it recently/frequently on another device, but b) not on this one. The top sites panel tries to display a nice high quality favicon for each of the sites it is offering you (a list of recently/frequently visited sites in your history). If you haven't been to the page on this device, then you it downloads the HTML for that page, and looks for the something that looks like a favicon in the HTML. Once it has that, it downloads that with a GET request. It downloads the page, and not site, because some domains use different favicons for different pages on the same domain: google.com/maps v google.com. We should probably do a better job at caching the images we eventually download so we don't have to download the HTML each and every time, however there are many incidences of favicons being dynamically generated and/or changing frequently (e.g. social networks that display profile pics in favicons). The UA string you see is deliberately the same as the desktop user agent. We tried using the mobile UA string, but found that quite a few sites were browser sniffing, and sending us HTML pages which pointed to very low quality images because we were outside their list of recognized user-agents. Unfortunately these sites were large enough and numerous enough we could not ignore. We should do a better job at convincing them to a) not use browser sniffing b) recognize us as an iOS browser and c) not use browser sniffing. ", We use favicon.ico as a fallback of last resort: .ico is an old Windows format which has a maximum resolution of 32x32. This looks pretty horrible on today's high res screens. Unfortunately every other standard and convention on favicons require us to download and parse the HTML. ", That's a heck of a good example of unexpected behavior. I would not expect that from a GET request. - What happens when Googlebot crawls your site? (web crawlers use GET requests; the well behaved ones, I expect, you are preventing using ", ). - Do any of your users bookmark that page? If you want to use requests that cause those sorts of side-effects you should probably consider PUT, POST or DELETE requests instead. GET and HEAD requests are explicitly supposed to be 'safe' for clients to retrieve at will. ", You can workround this: visit the page in Firefox on your device, so the device has that page and favicon in its local history and image cache. However, this will only help you if yo re the only user of this page. Other users may've bookmarked this page and returned to it in any other browser, desktop or mobile. Web crawlers may try to spider the page, even if there is no link connection to the wider web. We are also looking to allow some customization of the new tab experience, including avoiding the top site panel altogether. btw: I am envious of your use of domain.com. :)", Hello, Thank you for this precise response. I understand better the problem of favicon. My page is never indexed by bots because it\'s not an url that bots are aware of, in fact it\'s just a php script launched with a cron job (running in command line), but as I\'am a web developper I have also the possibility to launch the script in my browser (it\'s only accessible from my ip address for test purpose). By doing my tests, i refreshed the page a large number of times and so the url became a "top visited website", leading to the problem I described before when opening new tabs on my mobile. I modified the script so it can no more be launched in a browser in a production environment. For the workaround of visiting the page on my mobile, not sure it would work because my page return nothing but a blank page, so no favicon there...visit the page in Firefox on your device, so the device has that page and favicon in its local history and image cache. However, this will only help you if you\'re the only user of this page. Other users may\'ve bookmarked this page and returned to it in any other browser, desktop or mobile. Web crawlers may try to spider the page, even if there is no link connection to the wider web. I think that a nice feature would be to have the choice of displaying this list or not (my teammate who has an andro\xefd phone has this feature if I\'m right). Just a question, wouldn\'t it be possible to save the favicon url beside the visited url in the synchronized history when pages are visited ? By doing that you would just have to fetch this url instead of parsing headers. Concerning domain.com, I would love to own it, but the real domain name I use is a bit less attractive :) Best regards and good luck finding a solution', Sorry, there is a part of your response after mine in that paragraph : For the workaround of visiting the page on my mobile, not sure it would work because my page return nothing but a blank page, so no favicon there... Regards', The real solution here is to stop your site sending emails for GET methods. This will fix the problem for all user-agents. ', It sounds like you and cron are the only intended users of this script. I'm a bit puzzled why this is attached to a web server at all. If yo re only using the browser as a convenient way to test your script, I would consider simplifying and launching it using /usr/bin/php from the command line. Attaching it to a webserver might be a valid thing to do as part of a wider webhook strategy, but triggering side effects (destructive or not) with a GET method is not the correct way to use HTTP. If you can't fix your site for _all user agents_, and you don't want to be launching this site from top sites, you can remove it by long pressing on the domain.com icon, then clicking on the close X. If you do want to launch domain.com from top sites then putting a favicon.ico in the root of your domain should stop this from happening too many times. There are bugs with the top sites panel, but this is not one of them. Good luck.", Thank you I know that I can use command line, It would be too long to explain why I have to use GET request and not /usr/bin/php on this website and I think that it's out of purpose here... By the way there are numerous case that require to lauch cronjob with GET request (shared hosting etc.) so I think I'm not the only one to do that. I don't focus on this particular website or on a user agent, from my point of view it's a general problem to fetch url silently for just a favicon, and Stephan Leroux seams to share this idea... You have acces to the favicon when the page is browsed on a browser, so why make an extra request later ? Store it the first time and retrieve it on the others synchronized browsers... The list of top visited site was far too long to remove manually each element, and does removing a top visited website will prevent him to appear again if I visit him often on my desktop browser ? Concerning your remark about adding a favicon.ico as it's allready the case, I have a favicon.ico at the root of my domain and the background request was done anyway each time i opened a new tab..." 
id=1168687	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1180037	 'Can no longer reproduce.' 
id=1247848	 "This doesn't work in Chrome for iOS either (WKWebView). I suspect there is no method available or no delegate method hooked up.", *** ', has been marked as a duplicate of this bug. ***', I'm pretty sure we don't support window.print on Android either.", Created ', ', PR: ', This patch adds support for `window.print()`. It does so by patching `window.print()` to our own handler, which sends a message to the native side of things. There we can use the standard iOS print infrastructure to print the `WKWebView`.', Comment on ', ', PR: ', LGTM - left a comment on the PR.', There was a question in the PR about supporting the onBeforePrint/onAfterPrint callbacks. I have been testing this and it seems that WebKit instead supports this via the \'print\' media query. var mediaQueryList = window.matchMedia(\'print\'); mediaQueryList.addListener(function(mql) { if (mql.matches) { document.getElementById("foo").innerHTML="beforePrint"; } else { document.getElementById("foo").innerHTML="afterPrint"; } }); Full demo at ', This is triggered correctly via both this window.print() implementation and the system Print action from the Share Sheet. So I think this is good to go in terms of WebKit compatibility.' 
id=1233655	 'Created ', ', pull request ', - Update the url of Tencent in SuggestedSiteData for zh-cn locale', Hi Stefan, Please help to review and land this pull request before release 1.4. Thanks.', Comment on ', ', pull request Looks good to me. I already landed this.', v1.x 5707759' 
id=1138639	 'Is this still the case? Not sure what all elements you meant, but at least the elements in location view and buttons in home panel switcher bar and navigation bar all contain accessibility labels.', Definitely improved, if there's anything missing I'll open a new bug." 
id=1188563	 '1.1 seems like a good target for this; we already have UI for bookmark deletion, so no string work.', Also, they're not added because they're the empty state. If we allow deleting them, that implies you can get back to a new empty state, which we don't have designed.", Robin and I discussed this today. We don't think this is a good thing to do, particularly given that it requires either building a second deletion mechanism (bad) or adding the defaults to the DB (also bad). If users use bookmarks, the defaults will be pushed down the list. If they don't, they won't see the defaults." 
id=1212728	 'Created ', ', Link to Github pull-request: ', pick up the latest search plugin from ', .', Comment on ', ', Link to Github pull-request: ', The change looks safe, but I have no idea if it's what we want. mconnor?", Comment on ', ', Link to Github pull-request: ', mconnor seems to be incommunicado. Mark, do you know if this is good to land for iOS?', Comment on ', ', Link to Github pull-request: ', I am pretty sure the Fx iOS does not support MozParam and that we don't use iOS specific Yahoo params, so this should be fine to land. Normally, I'd ask if Yahoo JP is different than Yahoo, but the same change was made on Android, so I think this is safe.", Rebased and landed. ed96246' 
id=1148469	 'Created ', ', Pull request', I think this is a good idea except for things like `UIFont.DefaultMediumFont()`. Two reasons. I think it is very confusing to add things to standard classes like this. What is ours, what is from the system. I think it also defeats the point of having things in a central location. So + on `AppConstants` but - on adding extensions to things like `UIColor` and `UIFont`. I would rather see AppConstants.DefaultButtonFont or AppConstants.HighlightColor.', I also don\'t want to stop using the following, which we are putting more and more above UI elements so that they are easy to tweak: private struct SomeThingUX { static let RowHeight = 20 static let FooButtonFont = UIFont(name: "Charis", size: 15) } I think we can simply reference AppConstants from there if defaults suffice. But my experience so far is that there are many things that need subtle non standard changes.', Yeah, looking around for things to pull in, this scared me a bit to be honest. We use lots of different paddings all over. It risks feeling a bit unpolished. Then again, sometimes things just need different paddings. I think for fonts, colors, and some basic dimensions though, this should be good (and won't require importing all of BrowserViewController to use).", *** ', has been marked as a duplicate of this bug. ***' 
id=1200555	 'Created ', ', ', Comment on ', ', ', LGTM' 
id=1170915	 'Created ', ', ', - Tab thumbnail code doesn't account for reader toolbar", I find it hard to see a difference between with and without this patch. Handing over to sleroux and darrin for some additional feedback.', Comment on ', ', ', - Tab thumbnail code doesn't account for reader toolbar Adding sleroux and darrin for additional feedback. I would not mind moving this to v1.1 if there is a risk of regressions.", Comment on ', ', ', - Tab thumbnail code doesn't account for reader toolbar Hey Allen, Thanks for the patch! I ran it on the iOS simulator and I'm still seeing the reader mode bar appear/disappear behind the screenshot turning the transition. I think what we need to do is animate the actual reader mode bar during the transition instead of including it into the screenshot. The BrowserViewController implements methods from the Transitionable protocol which get called during the different stages during the transition animation. This is where we do things like move/alpha the url bar and toolbars. What I propose we try doing is add the reader mode bar transition as part of this. The URL bar scales down along with the web page and moves down so it hides behind the tab. For the reader bar, I can see us doing something similar where it scales down and 'collapses' upwards during the browser -> tab tray animation. When the tab animates to the browser, the reader mode bar could 'expand' downwards below the url bar while the url bar expands upwards. Darrin, what are your thoughts on this kind of animation?", Will be resolved as part of the refactor involved with ', Resolved as part of ' 
id=1100761	 "Don't invest too much time into this -- anything that uses the REST API will get junked right up to the record level, so there will be necessary churn. (And apologies for the delay on that.) This is mocking rather than a test API, no?", Created ', ', Pull request This is what I have right now. We have to do something like this if we want any testing of the providers. We could alternatively hard-code some known working account credentials I guess. As long as we're just running these tests locally, the unreliability of using the network in tests wouldn't be quite as awful.", Comment on ', ', Pull request r=me with a few questions/comments in the PR.' 
id=1237644	 "This is also reproducible via the 'Show Intro' setting and following through the Sign-In slide.", About the user story, I wander why the user use the Chinese/China first, and then change the Lang/Region? For these users, what they really want when they change the Lang/Region? 1, If user changed the sync setting manually in Chinese/China, we keep the Sync server that user setted. 2, If user have connected to sync server, after disconnected from the server we keep the Sync server that user connected. 3, Other case, we revert back to the standard/China Sync server with Lang/Region. Is it make sence?', Created ', ', Pull request', I think it is an edge case that we can live with. So I would prefer to not fix this right now and leave it as is. Lets talk about a better solution post 1.4.', Comment on ', ', Pull request See comments in bug.', Some updates: ------------------------------------------------------------------------------------- I tried on v1.4(1404), this issue can be reproduced with the following steps: 1) Set region to China and language to simplified Chinese, then install Firefox for iOS(China Edition) 2) Disable the option for China-hosted Firefox Accounts/Sync service. 3) Enable the option for China-hosted Firefox Accounts/Sync service again. 4) Change the region or/and language to another one. e.g. Change the region to US or/and language to English. 5) Tap on "Sign in" ==> It will open the sign-in page of China-hosted Firefox Accounts/Sync service. If you never did step 2) and 3), it is able to switch back to standard Sync server after changing the region/language from China/Simplified Chinese.', Looks like this was addressed in this commit: ' 
id=1130112	 'Also change the PRODUCT_NAME per Build Configuration. The final bundle identifier is $prefix.$PRODUCT_NAME - We have Fennec (Debug) and FennecAurora at this moment.', *** This bug has been marked as a duplicate of ', ***' 
id=1225494	 "I've seen this behaviour in other applications as well, e.g, copying an image from Safari into Discord (a chat communication) pastes the image using the first frame of the GIF image. I see the behaviour in Firefox. It looks like this works in Safari. ", Animated GIF's only display the first frame in a UIImage (UIPasteboard image property). Not sure what sort of serialization or detection or changes we can do to detect if the incoming image is a GIF", To create a UIImage from a gif, you first have to create a CGImage using CGImageSourceCreateWithData and then convert that to a UIImage. There are a number of examples of how to do this, including here: ', Then you have to ensure the right image type is used when adding the gif to the pasteboard (kUTTypeGIF). We would need to add gif type URL detection and then handle the downloaded data differently from standard images, but this is all possible.', Created ', ', Pull request The fix is basically as suggested by Emily but I took two shortcuts: 1) I called out to SDWebImage (which was already included as a dependency) to generate a UIImage from GIF data. 2) Instead of detecting GIF images based on their URLs, I look for the image header in the NSData object. Now, after I threw everything together, I realized that I can't actually test this since I cannot build to my device because of code signing issues. In addition, none of the apps that ship with the simulator support pasting images. Therefore, it would be great if someone that is enrolled in the Mozilla development team could test this on a device. Note that on top of the image copying I also made the image download handle GIFs properly. However, since the photos app doesn't support GIFs, I couldn't really verify that either. This would only make a difference when photos are exported from the device.", Comment on ', ', Pull request :hennes - This doesn't seem to work for me: STR: Open giphy.com Copy any gif from the home page Open messages Paste Only 1 image from the gif get's pasted, not the entire gif. Not sure why this is happening, everything you are doing in the code seems sensible.", Any update on this?', My sincere apologies. Apparently I forgot to add myself to the CC list of this ticket so I didn't get notified about Emily's review. I'll have a look again and try to figure it out.", Following Emily's steps in the debugger, I could verify that images from giphy.com are correctly recognized as GIFs and the UIImage instance is created through calling animatedImageWithImages. That means something must go wrong with putting the image into the pasteboard. Googling around, I get the impression that we'd actually have to set the NSData instance for kUTTypeGIF instead of the UIImage (see for instance 1 ). I'm gonna put the relevant into a prototype app so that I can test this on a device. 1 ", Ok, I'm starting to think that this could be a limitation of the messages app. When I set the bare NSData of the image for the kUTTypeGIF key, I *do* get the animated image in the Apple mail and Gmail app. However, I do *not* get the animated image in the messages app or in WhatsApp. Interestingly, the same seems to be true when I copy the image from Safari. Are we really certain that it should work in the messages app as well?", Emily, any news on this? I think the current PR can be easily adapted to make the GIF show up correctly in the mail apps. I'm not sure what to do about the messages app, however. To me it does not look like that one supports GIFs.", Sorry! This seemed to have gotten lost in my review queue. I'll take a look this afternoon. So sorry.", So, checking for parity with Safari, when pasting a gif from giphy.com into Messages, the gif remains unanimated until you tap on the image, in which case it moves to full screen and animated. When pasting from giphy.com from Firefox, the gif remains static even when tapped and in full screen. We are looking for parity with Safari here. Having had a bit of a look around, the solution, is appears, is to add the gif directly as NSData rather than turning it into an image first. See PR comments for details.', Oh, I didn't try tapping it. Nice find. I updated the PR according to your comments. Thanks again for reviewing! :)", #merged target 4.0 d7d3287', thanks :hennes. It's merged now. Sorry it took so long for me to get to it." 
id=1191974	 'Current comment: "Show an input.mozilla.org page where people can submit feedback" Would "Menu item in settings used to open input.mozilla.org where people can submit feedback" work better? As a general approach, it would be really helpful to propose an alternative of what would work better in your opinion.', (In reply to Francesco Lodolo :flod from ', ) ', How would I know? From ', ? Not really. From ', ? Not really. If it is list item than fine, if it is a link than absolutely not. ', How I'm supposed to provide something other than in ", without becoming development team?', (In reply to Stefan Plewako :stef from ', ) ', You can ask to developers in the bug to explain where this string is used, since the comment is not helpful or plainly confusing. The development team doesn't have infinite resources, and doesn't always understand how a good localization comment should look like; the least that we can do is a) assume good intentions and b) try to help them.", (In reply to Stefan Plewako :stef from ', ) ', Hi Stef, Usually, when filing any bug, you should identify the expected "behavior." In the case of string comments, that is done by providing an alternative suggestion. That helps the dev team to not get stuck guessing what your expecting to find in a more accurate comment. Thanks, Jeff', (In reply to Francesco Lodolo :flod from ', ) ', Commenting in a closed bug is not helpful and a wast of time usually. Please stop suggesting that. ', I have no idea what is this about. I pointed quite clearly the problem in this followup bug. 10 months is more than enough to ask about unclear aspects in reported problem. (In reply to Jeff Beatty :gueroJeff from ', ) ', Please understand that by not being part of the development team and not having access to the materials that team is using in development (ios bugs and pull requests usually lack all info besides raw code) there is not much else external contributor could do to help in such closed process. EOT', (In reply to Stefan Plewako :stef from ', ) ', You should really try re-reading your comment, hopefully yo ll realize how rude your reply sounds. If that sounds perfectly acceptable to you, then I'm afraid I can't really help. Asking actionable items in a closed bug is not helpful, asking clarifications before filing follow-up bugs definitely is.", (In reply to Stefan Plewako :stef from ', ) ', Hi Stef, Without suggestions for alternative comments, I think we'll have to just close these bugs. Otherwise, we're all stuck trying to guess what yo re thinking, and that's not productive for anyone. An alternative option for you is to skip the bug all together and submit a pull request with a new, improved comment. Could you describe what additional materials you would need in order to provide such suggested alternatives? If there's a way we can be more open, it would be great to know so that we can improve. Thanks for your help. Jeff", (In reply to Jeff Beatty :gueroJeff from ', ) ', Screenshots in bugs, prototypes, designs, discussions about details and basically anything that makes possible to learn how the string is exactly used (without knowing the code or compiling it)', Comments updated as part of ' 
id=1203988	 'Created ', ', ', r=rnewman, attaching patch for reference', Created ', ', ', Swift 2.0/master patch', Comment on ', ', ', Wanted to double check - does this look better?', Comment on ', ', ', Small nit on the comment, but looks good, thanks.', Thanks! I've resolved the nit and merged in the PRs." 
id=1216921	 'Created ', ', ', Merged 107c6c41d452043ed4d6303a57ed0006021a98e2', After rotating from landscape to portrait, tabs are displayed on three columns, so verified as fixed using: Device: Ipad Air (IOS 9.0.2) Build: Version 1.2 (1201)' 
id=1283188	 "I'd use this.", From what I understand, this can't be done with public APIs (and why I still keep a personal email address in Mail.app for this scenario). We'd need to write our own library or use something like ", I asked some of the Outlook team, and got a pointer to Outlook's protocol handler: ", In particular: --- Compose Email ms-outlook://emails/new Compose a new email message. Should open on top of the current view if possible to avoid interrupting any user actions in progress. Optional Query Parameters: from => <upn:servertype>. Defaults to default sending email account. to => <emailaddress>,<emailaddress>,.... Defaults to no recipients. cc => <emailaddress>,<emailaddress>,.... Defaults to no cc. bcc => <emailaddress>,<emailaddress>,.... Defaults to no bcc. subject => <text>. Defaults to empty subject. body => <text>. Defaults to empty body. The account signature is appended to the body. --- So if I crack open Settings in Firefox and pick "Outlook", we should turn: mailto:?', ,', &subject=mailto%20with%20examples&body=', into ms-outlook://emails/new?', ,', &subject=mailto%20with%20examples&body=', and throw it at the OS. I tested this from Safari and it worked. The main work item is in deciding how we want to present the choice of email application to the user in Settings. Outlook itself could serve as inspiration here. Robin, do you have an opinion on that?', I think one approach may be to detect which alternative mail clients are already installed and if outlook is installed, have a picker show up to give the user a choice that they can choose to keep persistent. Similar to how intents are presented in Android.', I thin if we are indeed able to detect other mail apps (I thought that was some sort of security/permissions parameter set by Apple? I could be wrong.) then we should include at least the top 5 or so of the top mail apps to support. Why not?', Robin is correct: there is an OS limitation on `canOpenURL` to prevent apps from sniffing which other apps are installed. You get 50 distinct schemes to try, lifetime. We can burn one of those permanent slots on each possible mail handler if we wish, but this limit, alongside the need to compute the target URL for each, is why the trend seems to be to just hard-code a drop-down menu somewhere (cf Slack, Outlook).', *** This bug has been marked as a duplicate of ', ***', It's supported now :)" 
id=1152365	 'Fixed via ' 
id=1173773	 'Created ', ', PR ', Removing tracking flag since test-related bugs are never tracking+.', Merged' 
id=1320190	 'Created ', ', PR Link', Merged: ' 
id=1186576	 'Fixed by URL bar refactor (', ).' 
id=1164308	 'Created ', ', PR ', Comment on ', ', PR ', LGTM' 
id=1145435	 'This appears to be resolved in build 6' 
id=1132016	 'Created ', readingList.png' 
id=1241158	 'This is because when opening via a quick action from cold the flag we set to identify the required quick action is not being properly cleared. Therefore when you open via another action, the first action is executed again. When the second action is to open a private tab, this happens, but because the first action (open a normal tab) happens twice, the normal tab is the one displayed.', Created ', ', Pull request st3fan: chose you cos you have a 3D Touch device for testing.', Is this the same as ', filed today?', (In reply to Aaron Train :aaronmt from ', ) ', Meant bug ', (In reply to Aaron Train :aaronmt from ', ) ', No. This is a different bug. Will take a look at Meant bug ', Comment on ', ', Pull request Can't STR anymore. LGTM!" 
id=1157246	 'Still there in build 9 on testflight.', See also Save password dialog with the same issue ', I'm confused. Those strings are obviously localized in code: ", They aren't being picked up and used? Stefan, do you have any ideas why this would happen?", I see the strings for this in: <file original="Client/Localizable.strings" source-language="en" datatype="plaintext" target-language="en" ... <trans-unit id="A username and password are being requested by %@. The site says: %@"> <source>A username and password are being requested by %1$@. The site says: %2$@</source> <target>A username and password are being requested by %1$@. The site says: %2$@</target> <note>Authentication prompt message with a realm. First parameter is the hostname. Second is the realm string</note> </trans-unit> Maybe they were added after the last time we did a string export?', (In reply to Stefan Arentz :st3fan from ', ) ', This started on build 8, I never saw that dialog localized (note that my file is up to date with iOS code, not with the extracted en-US strings). Issue is somewhere in the code.', I see the same with my locale set to Dutch. I'll investigate why this is happening.", The problem is in the XLIFF. I am not sure yet if this is an export problem of Xcode or if this is something our export-post-processing scrripts are doing. In SVN I see this: 81 <trans-unit id="A username and password are being requested by %@. The site says: %@"> 82 \t <source>A username and password are being requested by %1$@. The site says: %2$@</source> 83 \t <target>Sono stati richiesti un nome utente e una password da %1$@. Il sito riporta: %2$@</target> 84 \t <note>Authentication prompt message with a realm. First parameter is the hostname. Second is the realm string</note> 85 \t </trans-unit> But that should be: 81 <trans-unit id="A username and password are being requested by %@. The site says: %@"> 82 \t <source>A username and password are being requested by %@. The site says: %@</source> 83 \t <target>Sono stati richiesti un nome utente e una password da %1$@. Il sito riporta: %2$@</target> 84 \t <note>Authentication prompt message with a realm. First parameter is the hostname. Second is the realm string</note> 85 \t </trans-unit> The <source> must not have positional string arguments.', Another option is that the culprit is xliff-to-strings.py, where we write out the name/value pairs as: "trans-unit.source" = "trans-unit-destination"; But I think that actually should be: "trans-unit id " = "trans-unit.destination";', As commented on IRC, the problem is not the extraction, since the file comes out that way with xcodebuild -exportLocalizations One note though: we might actually need to reorder variables, so positional arguments are actually useful in these cases.', Marking this as a dupe of ', *** This bug has been marked as a duplicate of ', ***' 
id=1113170	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1221589	 'Created ', ', Link to Github pull-request: ', I'm guessing it's not supposed to do anything right now and the associated functionality is coming in another patch?", do anything = perform a function once the Logins row is selected.', Nope - just adds it to the settings men , Landed 1c7b9a09e68e520a757d2d8a372c926ce5cd6372' 
id=1275358	 'This should be relatively easy, _but_ we are not already localizing the View Later or Send To extensions. ', sleroux: should I proceed?', I'd say go for it since its just the titles and we branched yesterday so I can't imagine it would be difficult to rexport. :st3fan?", Here's the results of my investigation: 1. We can do string substitution in the Info.plist files. Currently, $(MOZ_BUNDLE_DISPLAY_NAME) is a handy variable for the name of the app. 2. None of our extensions have localized Info.plist files. Each of them require a InfoPlist.strings file. This is straightforward to do, and we should probably do this for each of the 3. It is not straightforward to do both. That is to say: it is not possible (out the box) to do string substitution in the InfoPlist.strings file. Doing both involves adding build steps, which at this late stage, and for this many users feels risky. My recommendation is thus: we close this bug and open another to localize the View Later and Send To extensions.", Sounds like a plan. James, will you file the bug?', See ' 
id=1167738	 'Fixed in 4155dea, in particular 2d799e3: ' 
id=1289867	 'Would the developer be testing push notifications against a developer build of Firefox for iOS? We currently have three channels: Fennec (developer/debug builds) FirefoxBeta (Testflight beta audience) Firefox (Production) If so, I can make a sandbox and production push cert for the Fennec channel.', Also, whats the best way to send them over?', We have several platforms for push: updates-autopush-dev.stage.mozaws.net - our "dev" platform which should update with every code merge to master. This platform is the most up-to-date, but also can be unstable. updates-autopush.stage.mozaws.net - our "stage" platform. This platform is where we test tagged, candidates for release. It tends to be more stable, at the cost of not being updated as frequently. and of course: updates.push.services.mozilla.com - our production server, this is only updated after thorough checks are done on stage and systems are signed off by QA. We\'d prefer any level of consumer facing service go to our "production" system. (so in your case, FirefoxBeta and Firefox should probably point to our "prod" system.) As for development, I fully expect that there will need to be changes made on the server to better serve the data. Right now, for instance, the APNs code uses older field names than what the last iteration of the GCM code used. It\'s a minor fix, but I expect there to be others. As I understand, APNs allows you to create different app certificates. Each of our servers can be configured to use a different set of credentials, target points, etc. so that should not be a problem. If you prefer fast iteration at the cost of some potential instability, you should consider using the dev server. Jeremy Orem (oremj@) should be able to add the credentials to the servers. I would recommend sending the certs to him directly rather than adding them here. Does that help answer your question?', Yup this clears things up. ', Yo re correct - I can generate a push certificate for each of your environments. I think I'm just getting confused with the app's ability to register a cert for use on the APNS sandbox and production.", Fair enough. The server has a flag to indicate if the messages should go to the sandbox or not. Just be sure to include that info when you send the certs. (FYI, I remember that oremj will be out on PTO. Please cc travis@ who is covering for him.)', :jrcolin, this is finished right? I think we have all the certs setup now for push.', yes, we should have all the credentials we need at this point. Closing.' 
id=1178246	 'Re: ', Tracking?', Well, that explains why I'm not seeing passwords filled :)", Created ', ', Pull req. This should fix it. Untested, though.', Comment on ', ', Pull req. Tried this out with my LDAP login and it autofills correctly.', Merged. c16372a041de5aca48e9c64e2f540d7308b2dd8c' 
id=1232188	 'Created ', ', PR: ', This patch enabled retention tracking for Adjust. It also introduces a new *Send Anonymous Usage Data* setting which is used to disable the retention tracking. There are three parts to this patch: 1. I was manually creating links to `support.mozilla.org`. These links have a standard format. So I introduced a `SupportUtils` class with a `linkForTopic()` function in it. 2. The `AdjustIntegration` class now understands it also needs to enable retention tracking. 3. New setting to disable *Send Anonymous Usage Data*. Couple of things to note: * Previously, we would run the Adjust startup code in a `dispatch_async` block. I have removed that because the Adjust code expects to run from the main thread and also because I have measured the time it takes to start it up, which is just a few milliseconds and actually **less** than doing it via `dispatch_async`. * The `AdjustIntegration` class used to be a singleton. Now it is simply owned by the `AppDelegate`. This is because it needs to be initialized with the `Profile`, so that it can get to the settings. * There is still some debug logging, which I would like to keep until we know this code is all good.', Comment on ', ', PR: ', Nit/question re: topic naming, inline in the PR, but nothing that should hold up an r+.', Comment on ', ', PR: ', LGTM with a few comments in the PR.' 
id=1245219	 'Created ', ', PR: ', Two parts: * A way for tests to launch the application with a request to start with a clean profile * A test that generates snapshots of the Intro screen', Comment on ', ', PR: ', You may feel that we no longer need the profile wipe thing, but I actually feel it could be a useful thing to have in there even if we have no use for it right now. Ensuring that we start clean could be very handy for other test scenarios' 
id=1169859	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Seems fine. I tried pulling this into the Profile once, but it brings a bunch of dependencies, including GCDWebServer, into extensions, and GCDWebServer can't be run in extensions." 
id=1314362	 'Created ', Simulator Screen Shot Nov 7, 2016, 1.12.20 PM.png Pretty sure this is done on iOS. We've added a share button to the context menu which opens the system share extension. Can we close this user story?" 
id=1182200	 'Created ', ', PR: ', This changes the result of the authentication completion handler to `RejectProtectionSpace` which results in the page showing a Auth Required warning as happens on Desktop.', Comment on ', ', PR: ', Nice, that was easy! I suppose this allows us to close ', now?' 
id=1160467	 'I can only confirm that Build 9 from Testflight works fine for me in Italian. ', Wondering if it doesn't like the target-language as sv-SE.", (In reply to Francesco Lodolo :flod (UTC+2) from ', ) ', Tested locally in XCode, importing the localization and setting the Simulator to Swedish: * Current file -> Firefox in English * Replace "sv-SE" with "sv" for target-language, Firefox is correctly localized Which means we\'re probably going to have similar issue with zh-*, pt-PT. There\'s still a pending PR to update the script to update localized XLIFF files ', It would be easy to map a folder to a different locale code, not sure how well it would be digested by Pootle.', Xcode should replace the locale code with the one it wants. Martin, have you also tried making sure that your region settings are set to Sweden, as well as your language settings to Swedish? Another point is that what may have been made available is not the Aurora builds, but a Beta build. Meaning that it's possible no locales have been pushed into Beta. NI flagging Stefan to comment.", (In reply to Jeff Beatty :gueroJeff from ', ) ', Yea everything on my phone is set to Swedish: ', but as we talking too on irc seems to be some problem, but i am waiting for next beta to try it out thx for all help and stuff for checking this out so far :)', Adjusted the summary of the bug. We have three locale codes which do not adhere to BCP 47 where iOS does. In the case mentioned above, sv-SE is too elaborate of a locale code because the region designation is unnecessary, thus it does not adhere to BCP 47. iOS only recognizes sv, as that is recommended according to BCP 47. As flod pointed out above, the locale code doesn't map to what iOS will recognize, and thus doesn't open in Swedish. bn-IN (should be bn) and ga-IE (should be ga) are also affected by this bug. es-MX, pt-PT, zh-CN, and zh-TW are unaffected.", Added the mapping for these 3 locales to the same pull request (separate commit, can squash if needed). I also updated en-US (r140926) and used the script to update all other locales (r140927) in SVN.', (In reply to Jeff Beatty :gueroJeff from ', ) ', Jeff, where in BCP 47 does it say that the region designation "SE" is unnecessary and that the "SE" region designator is not valid? That does sounds more like an opinion to me :-) The ISO 3166 country code for Sweden is "SE" (see BCP 47 section 2.2.4 on the usage of country codes). It looks to me that Apple think the region designator is unnecessary in some cases (which doesn\'t mean that the region designator in those cases isn\'t valid) and the problem here is more of a technical nature.', I should have used the word redundant rather than unnecessary. It's not that the region designation isn't valid, it's superfluous for the locales mentioned here. Part of BCP 47 emphasizes simplification of locale codes. So for example, why identify the Ireland region when Irish is exlusively spoken in Ireland? It's a redundancy and BCP 47 would prefer using ga as the code, rather than ga-IE. The same is true with Swedish in this case. bn-IN is more of an Apple opinion issue. Clearly bn is spoken prominently in more countries than India, but they prefer to blur the country lines (as most companies do) and not use the region code. For Bengali, that tends to be the best practice. Besides Mozilla, I haven't found other companies who produce separate localizations for bn-IN and bn-BD.", (In reply to Jeff Beatty :gueroJeff from ', ) ', > ', No, Swedish isn't exclusively spoken in Sweden. Swedish is spoken in Finland (minority language), \xc5land (100%) and to some extent also in Estonia (very few, though - iirc there is a minority population on the island \xd6sel which speaks Swedish). So this is more of an opinion issue :-) Note that I don't have any strong opinion against dropping the existing region designators in this case (my guess is that the regional differences of sv are small, particulary when it comes to a browser UI), but they're currently used everywhere in mozilla-central (see for example ", ).', When I said the same is true with Swedish in this case, I was referencing the redundancy. I think we're getting distracted here. Please see ", to see the implemented fix for this.', Couple of quick notes: Interestingly when submitted Build #9 to TestFlight, the App Store validation only complained about fry-NL. (Frysian is not supported on iOS it seems). Not about any of the locales mentioned in this bug. The PR at ', looks good. :flod do you have permission to merge that or are you waiting for me? Ping me and I'll merge if needed. Sorry for the delay. Just to confirm, I don't have to do the same mapping in ", because I write out the .lproj files based on the target-language, which your patch updates correctly?', (In reply to Stefan Arentz :st3fan from ', ) ', Yes, will need someone to merge (also squashed the commits). ', I think so. This works for me: * Run the script xliff-to-strings.py (it will fail for br, empty targets). * Run the build in XCode. * Switch the simulator to Svenska, ignore the crash, restart the simulator and check that the URL placeholder is localized.', Stefan says this might be resolved already.', Can we ask the br maintainer to put a target-language in every <file> section? What is the procedure for that? Or can I modify the file in the SVN repository directly? Marking this bug as resolved.', (In reply to Stefan Arentz :st3fan from ', ) ', Breton uses Pootle. I think there were issues with the import/export last time, it should be fixed in the next export. Just to be sure I'll clean up the file and see what happens next time.", (In reply to Francesco Lodolo :flod (UTC+2) from ', ) ', Done in ', .', There is still problem for Swedish in Build 15', Reopening this because it seems the locale code mapping code that I implemented was not committed or did somehow get lost. This was reported for sv missing from TestFlight Build #15. This is also a note to add ga-IE and bn-IN to the same locale mapping list.', (In reply to Stefan Arentz :st3fan from ', ) ', The problem is that Pootle overwrites the target-language with set with the script. The solution is to run this script before importing the files ', Works now for Swedish in build #16' 
id=1249429	 'Created ', ', Pull req. See ', for some notes on this.', Comment on ', ', Pull req. Looks good.', c7eb9df' 
id=1094478	 "I'm assuming the password we're talking about is the FxAccount password? I don't know that we'd want to store any other passwords in keychain until we discuss the pros/cons a bit more.", We do this as of ', . (In reply to Mark Finkle (:mfinkle) from ', ) ', Yeah, just the FxA password. *** This bug has been marked as a duplicate of ', ***' 
id=1259225	 'Is this ', ?', Yup, it is.', *** This bug has been marked as a duplicate of ', ***' 
id=1190424	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good -- just want to understand some things better before giving r+.', including fix for ' 
id=1140025	 'This is currently being done using the scripts/import-localization.sh script. Manually.' 
id=1151343	 "Thanks. I have CC'ed Brian for review.", Just tested that this also enables Switch Control on the cells. Without this, SC users would not be able to use the Top Sites panel (with the exception of clicking items that are visible, i.e. ~ first 6 items).', (In reply to Aaron Train :aaronmt from ', ) ', Aaron, shall I CC Brian automatically on accessibility issues? CC you too?', (In reply to Boris Du\u0161ek from ', ) ', Check git blame on the files affected. I see all bugs in this component (maybe they do too, hopefully?) Thanks for asking though.', Created ', ', Pull request', (In reply to Boris Du\u0161ek from ', ) ', Thanks for the pull request! The usual Bugzilla protocol is the following: 1) Add the URL of the pull request as an attachment 2 ', ) Flag review? for one of the iOS peers (me, st3fan, wesj, nalexander, etc.) That'll add it to our queue so it doesn't get overlooked. Apologies for the silly system and all of the redundancies.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Heh, please ignore the review link from this comment after the 2. Bugzilla was trying to be clever.' 
id=1214837	 'ab9970a' 
id=1282102	 'Marking as worksforme as this should not be an issue anymore' 
id=1162995	 "Also just simply tapping the blue dot to begin with in reader-view doesn't change it to unread; is there supposed only be a tie-in with this if it's added to your reading list?", *** This bug has been marked as a duplicate of ', ***', Robin, what do you think of the second comment on this bug? I remember that it was mentioned last week but not sure what the outcome of that discussion was. Can you file a bug if we need a new behaviour for the blue button in case the article has not yet been saved to your reading list?', (In reply to Aaron Train :aaronmt from ', ) ', :aaronmt The read/unread dot is *only* enabled when the page is added to the Reading List. I am able to tap the blue dot to mark it unread in Reader View, which also reflects the state in Reading List.' 
id=1226820	 'Created ', ', Link to Github pull-request: ', This PR includes fixes for ', .', Comment on ', ', Link to Github pull-request: ', Looks good - just a question. Also, what are our plans with SwiftData? I see that we keep making small changes to it, making it out of sync with the dependency version. Do we have a fork that we maintain so we can track the drift between ours and theirs?', It's been utterly out of sync for a long time now; a very independent fork. I'm not even sure how much original code is left.", 3e791d5 Notably, closing the DB in my testing gets rid of the -shm and -wal files. I expect that to not always be the case.', v1.x: 071b78d' 
id=1172075	 'Dupe!' 
id=1184448	 'Created ', ', PR' 
id=1251585	 "Just saw you closed the PR. I noticed you were doing the 2.0 version check in code and that's probably why you closed the branch. As an alternative suggestion, what do you think about adding an override flag in our .xcconfig file that we can set for forcing the version to not show? For example, in Firefox.xcconfig: MOZ_OVERRIDE_SHOW_WHATS_NEW = NO/YES And in the check for displaying we use that boolean as a way to force not showing the whats new tab?", Yeah I think an xcconfig option would be really nice. I was thinking that maybe first time 2.1 installs still want to see it, but I think we could also just disable it completely for 2.1 if that is a better/easier step for now. How about we rethink the logic behind this and figure out how to deal with minor upgrades vs first installs, etc. We need to do this anyway for 3.0 I guess. Assuming we are going to have a What's New in 3.0 section.", Safest option for 2.1 uplift would be to just disable it completely for sure. Since it's on the 2.x branch we don't need to worry about having to back it out later. As for the toggling of What's New, I think that it should be an opt-in feature through configuration rather than opt-out. I feel like being explicit about when we want to enable it is better than trying to infer when to show using semantic versioning. For every version, we should be asking the question 'Do we want to show this and what do we want to show' and flip it on when necessary.", Created ', ', Link to Github pull-request: ', Isn\'t a really simple and future-proof way to do this to always truncate point releases in the version check? So 2.1 would be checked as 2.0, 3.5 would be checked as 3.0, etc? If we only ever use point releases for fixes, this saves us from doing this work again. Yes, the SUMO page will be titled "What\'s new in 2.0", but if we\'re not really promoting that 2.1 is different from 2.0, I don\'t see that as a big problem -- we\'re just trying to not show you the page twice.', Ya actually it would be a simple fix to alter the code to check for that as a fall back. Just saw your comment on the PR as well. I'll revise to check the major version instead of the full version to prevent the issue of now showing during first install.", Comment on ', ', Link to Github pull-request: ', Revised PR that adds major version checks for Whats New tab.', Comment on ', ', Link to Github pull-request: ', LGTM with PR comments addressed.', 2.x 23d28c3194ab6eee3a2f8d6a2939c89c8e14baa0' 
id=1193417	 'Created ', ', Link to Github pull-request: ', *** ', has been marked as a duplicate of this bug. ***', Oops, thanks for the marking the dupe. Didn't show up when I was filing. " 
id=1109653	 'Hope this should fix this - ', Hi Sachin, I think it is probably better to use a UIActionSheet instead of a table view. The Action sheet is what Safari uses and is more appropriate for these 'context menu style' popups.", Created ', ', PR', Sorry ignore my comment about the UIActionSheet. I was looking at the wrong bug.', Thank you for your contribution Sachin. I have also added your name to the AUTHORS file in the project. Let me know if you prefer not to be in there.', Thanks Stefan. I am happy to see my name in Authors list, something to boast of :-)', requested on ios-feedback' 
id=1272497	 'Crash log: {"app_name":"Client","timestamp":"2016-05-12 14:11:31.31 -0700","app_version":"4.0","slice_uuid":"530cf366-249d-3816-a87d-560c57bb028e","adam_id":989804926,"build_version":"11","bundleID":"org.mozilla.ios.Firefox","share_with_app_devs":false,"is_first_party":false,"bug_type":"109","os_version":"iPhone OS 9.3.1 (13E238)","name":"Client"} Incident Identifier: 1C95D267-E6D8-4892-85BC-6BC6811763AA CrashReporter Key: fe2a361ffa23e0e9ccf53318f74776ddcad3cddc Hardware Model: iPhone7,2 Process: Client 5815 Path: /private/var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Client Identifier: org.mozilla.ios.Firefox Version: 11 (4.0) Code Type: ARM-64 (Native) Parent Process: launchd 1 Date/Time: 2016-05-12 14:11:30.30 -0700 Launch Time: 2016-05-12 14:11:30.30 -0700 OS Version: iOS 9.3.1 (13E238) Report Version: 105 Exception Type: EXC_BREAKPOINT (SIGTRAP) Exception Codes: 0x0000000000000001, 0x000000012002d088 Triggered by Thread: 0 Filtered syslog: None found Dyld Error Message: Dyld Message: Library not loaded: @rpath/FxA.framework/FxA Referenced from: /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Client Reason: no suitable image found. Did find: \t/private/var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/FxA.framework/FxA: mremap_encrypted() => -1, errno=12 for /private/var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/FxA.framework/FxA Dyld Version: 390.7 Binary Images: 0x100024000 - 0x100297fff Client arm64 <530cf366249d3816a87d560c57bb028e> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Client 0x100378000 - 0x1003c3fff Alamofire arm64 <2e14b1202fb33bb7b7bd0c4971df75f6> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/Alamofire.framework/Alamofire 0x100488000 - 0x1004a7fff Breakpad arm64 <ef07f6534c5c309b991127b7c07181d2> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/Breakpad.framework/Breakpad 0x1004e4000 - 0x100507fff WebImage arm64 <e987c3cac8a130adbc004260e4b88c2a> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/WebImage.framework/WebImage 0x100550000 - 0x100573fff SWXMLHash arm64 <53840b86b6b23557ab787e470759b336> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/SWXMLHash.framework/SWXMLHash 0x1005c0000 - 0x1005dffff SnapKit arm64 <22d76e3fb891303aacfad9217c52ff55> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/SnapKit.framework/SnapKit 0x100644000 - 0x10066ffff GCDWebServers arm64 <22f42e169c7a3750b57c15c63f00bf42> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/GCDWebServers.framework/GCDWebServers 0x1006b4000 - 0x1006c7fff OnePasswordExtension arm64 <d139c82e379b3f8cbddd938c126f04b7> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/OnePasswordExtension.framework/OnePasswordExtension 0x1006e8000 - 0x100703fff XCGLogger arm64 <cab7c60b36ea3af6b06f412d55c0cb51> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/XCGLogger.framework/XCGLogger 0x100754000 - 0x10076ffff AdjustSdk arm64 <58b3dc4f513e3c0a968882537172004e> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/AdjustSdk.framework/AdjustSdk 0x1007a4000 - 0x100813fff Shared arm64 <a49a0b8f79b832baa90cba2b4258fe9b> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/Shared.framework/Shared 0x10089c000 - 0x100a8ffff Storage arm64 <e67fc7855f6d3bce915f15f33c7a1602> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/Storage.framework/Storage 0x100be4000 - 0x100c17fff Account arm64 <7a7b788165e53ce899b1b658f983400d> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/Account.framework/Account 0x100c58000 - 0x100c6ffff ReadingList arm64 <9e270b3932d134ab89076bdfd8992e4f> /var/containers/Bundle/Application/4A95CFB4-BDC1-4BBC-80BB-FDAD44A548E8/Client.app/Frameworks/ReadingList.framework/ReadingList 0x12002c000 - 0x12005bfff dyld arm64 <b9ab8d2475913f8c9974747a7feab615> /usr/lib/dyld', One review on the store: Crashes when opening The latest update does not open, it just crashes. Update: had to power off the phone and now it is working. Randall, does rebooting your phone fix this for you? If so, I suspect an OS/app store bug rather than it being our fault. If not, maybe a build bug\u2026', Strangely enough, restarting the device does seem to fix the issue.', *** This bug has been marked as a duplicate of ', ***', "This appears to happen when the device itself runs too low on memory. It\'s an iOS bug that should be fixed in iOS 9.3.2 (in beta 4 at the moment of writing). The users that experience have many apps crashing for them during launch. The only way they can solve it is by restarting their device. The issue is caused by apps using too many (third party) Frameworks. So you can either remove Frameworks (by for example copying third party code into your project) or wait for users to get the iOS update with the fix."' 
id=1144760	 'Flagging UX for mock and assets.', Created ', syncedDevices.zip assets attached for device types.', I just realized I added these to the wrong bug. Still putting together the UX for the nullstate and populated state. Will NI myself again.', Robin's got this.", Created ', emptySync.zip', Created ', panelSyncNull.png', When we address this, we should also make sure we cover the failure cases.', *** ', has been marked as a duplicate of this bug. ***', Implemented as part of ' 
id=1217934	 "It might be hard to notice via the video.. sometimes the jank is very subtle and sometimes it's really noticeable. I also noticed a lot of jank when I lock the phone while FX is opened... Unlock the phone and FX will transition into view which janks a lot most of the times :/", Yep, it's due to the blur we use on top-sites. :sleroux has a patch up as of today! ", *** This bug has been marked as a duplicate of ', ***' 
id=1286339	 'Created ', ', Pull Request Emily yo ve been working on tests. I'd love your feedback on this. I've also added a XCUI target.", Comment on ', ', Pull Request This looks good. I've left a comment in the PR about adding the resetApplication code to TestAppDelegate instead of the production code. Resetting state is one of the things I have been trying to sort out in UITests too - KIF makes this really hard and our tests rely too heavily on state created by other tests already for it to be an effective blanket fix. Starting afresh with new UITesting tests has always felt like a good idea. Do you think it might be useful to reset some of the UserDefaults/Preferences too? Not all of them should be reset - we don't want the intro tour to play every time we start a new test - but ensuring that we don't have to reset at the end of tests settings that can be toggled for things like search preferences, home pages and new tab displays. It might be nice to create a base XCTestCase class that has the RESET_FIREFOX flag attached in setup that all future tests will inherit from to ensure that every single test case we have will reset on start. Something I've been toying with as an idea is also providing a initialised, but completely empty, database that we could install with tests. So not just wiping all of our documents, cookie and caches, but ensuring that we start with no existing history, bookmarks or logins too. This will resolve a lot of the existing slowness in the UITests where we are resetting the data that is contained withing the app by following long winded UI actions.", Now that I've moved my resetApplication() into the TestAppDelegate. There is already a UserDefaults/Profile reset that happens per test ", I think it would be better if this wasn\'t implicit reset of the Profile. Right now if I add the "FIREFOX_TESTS" or "FASTLANE_SNAPSHOT" flag the profile will be reset. I would like to change the flags to not reset the state at all. This will be useful for writing tests that can check for persistence. I\'ll have to change the current tests that use the "FIREFOX_TESTS" and "FASTLANE_SNAPSHOT" to also contain the new reset flag. This also creates a change for the snapshot script. Is it alright for the DB to be reset between snapshots Stefan?', Comment on ', ', Pull Request LGTM', master 88ea5f5e0b24871132eba67dbfbe706212a70a14' 
id=1154088	 'Created ', ', Pull Request', Comment on ', ', Pull Request @sachin004: looks good. One change requested, then fold everything into one commit and I'll land it. Thanks!", Comment on ', ', Pull Request Landed! sachin, I noticed that this shows, for example, "37 seconds ago". Can we make that less precise, like "less than a minute ago" or something?', I think we have a big problem. Locales with complex plural form will never be able to localize strings like %@ years ago because "years" changes based on the number. Does iOS support proper plural forms?', If year is 1 then the output is "1 year ago" and if it\'s more than 1 then it\'s "%@ years ago"', (In reply to Sachin Irukula from ', ) ', Are you aware of the complexity of plural forms required by some languages? That's not 1 vs more than 1. ", IMO this should be backed out and a proper fix landed, unless iOS is unable to deal with plural forms (and it would be surprising).', "Handling Noun Plurals and Units of Measurement" ', No idea how that would look when exported in a XLIFF file.', Backed out: ', An alternative to this is to use concepts like "just now", "this morning", "yesterday", "last week", which avoids the need to handle plural forms altogether.', Ok, but how do we handle if its more than 1 day/week/month/year like 2 or 3.', (In reply to Sachin Irukula from ', ) ', Very carefully. For example, you might say: Just now This morning Yesterday This week Last week This month More than a month ago \u2026 and get l10n review before you commit! But if we do try to do real relative timestamps, you\'ll need plural forms. The link flod kindly posted explains how plural forms are supposed to work on iOS: a stringsdict file is used to \'dispatch\' to a range of strings identified by CLDR identifier 1 . If everyday localization is "string X in locale Y", plural localization is "string X in locale Y for plural count Z". The reason I suggest the option of simpler non-numeric forms like "today" and "yesterday" (which still aren\'t necessarily universal!) is that I don\'t know if Pootle (which IIRC is what we use) and our import/export pipelines correctly handle the use of stringsdicts. If they don\'t, then in the short term we simply must avoid the use of plural forms everywhere. 1 ', (In reply to Richard Newman :rnewman from ', ) ', Same here. I think we're late in the cycle to introduce a change of this scope: we'd need to see how the XLIFF looks with plural forms with a test app, then check if Pootle supports the format (teams not using Pootle are mostly using text editors) and update the current dashboard to parse these strings correctly. I wonder if we need so much granularity though. For example: Just now Today Yesterday This week This month This year More than a year ago We could expose the real timestamp with the last ones, as long as we format it correctly with iOS internationalization settings.", Folks, I don't think this needs to be re-opened, because what we're discussing is strictly an improvement to the existing behaviour. Not coincidentally, the existing behaviour is exactly what we do on Android in similar situations. sachin and I carefully handled separately the cases 0 (which doesn't appear), 1 (day, week), and more than 1 (days, weeks). We can add or refine the cases for languages that translate more than one differently in a follow-up. This is just like on Android, where we make a decent effort to hit more than just the English cases, giving a nod to 0/1/2+, and generally haven't killed ourselves to handle the nuances of 2+.", (In reply to Nick Alexander :nalexander from ', ) ', Android doesn't support plural forms (", ), iOS does. And they\'re not "nuances". How good would you feel with English saying "10 tab open" instead of "10 tabs open"?', (In reply to Francesco Lodolo :flod (UTC+2) from ', ) ', Sort of. iOS does, but not using the system we use, and we don't even know if the /upstream/ system (Pootle?) can handle this. ", I would say file a follow-up! This ticket makes the issue better: it\'s enough for en-US, which might be all we ship. I\'m all for getting this right, but I\'m not going to block v1 on "37 second ago" instead "37 seconds ago". Also, I\'m not going to spend a large amount of my time and a contributor\'s time getting this right for v1. Follow-up, triage, move on.', After heated discussion, let\'s go with a base NSLocalizedDateString and some progressive improvements on top, like: "Just now", "Today", "Yesterday". I feel like this kinda-sorta hits the most important use case, which is "I just refreshed, is this actually fresh?" sachin, do you want to update? (I can understand if you\'re done with this ticket.)', Yes, I will make the necessary changes. The following strings will be used for relative dates: Just Now, Today, Yesterday, This Week, Last Week, This Month, Last Month, This Year, Last Year, More than an year.', Not sure what to use after Last year, let me know if you guys have any suggestions.', (In reply to Sachin Irukula from ', ) ', Let's not worry about. It's just old: use NSLocalizedDateString and just show the date.", (In reply to Sachin Irukula from ', ) ', Let's use sentence case and simplify these a little: Just now Today at 12:34pm // Use the date formatter Yesterday This week More than a week ago More than a month ago // Any more than that and we don't care.", Comment on ', ', Pull Request Comments on GH. Good start, and thanks for digging back in to this!', Created ', ', Link to Github pull-request: ', *** ', has been marked as a duplicate of this bug. ***', FWIW, "nice relative time strings" actually depends on language, too. Different languages have different amount of days and weeks back and forth, for which they have "nice strings". I wonder, is there something like ICU on iOS?', ... maybe ', or a friend of that can help?', Comment on ', ', Link to Github pull-request: ', rnewman, yo ve been following this, and I'm not. Can you drive it across the line?", I merged this with some cleanup and rebased. 465c4e4. Notably, I changed to lowercase: "today at" not "Today at", because we\'re labeling this string, and Last synced: More than a week ago looks bad. ', covers doing better.', Follow-up to update the test: 8ec5ebb' 
id=1166018	 'This is not reproducible on my iPhone 6 (8.3). I tried this with Podcasts, Spotify and Music and Firefox did not suspend audio when launched into the foreground.', (In reply to Aaron Train :aaronmt from ', ) ', Ah, this happens when Firefox was not previously running', Steven will look into what's happening.", Created ', ', PR ', The AuralProgress bar, when created, setups a AVAudioEngine which blocks out the sound in the app. I've made the auralProgress property in the BVC an optional now so that it will only get created when the user turns on VoiceOver.", Hilariously, this also happens in the Simulator: it stops the audio in desktop iTunes.', Comment on ', ', PR ', Sounds like we might be trying a different approach, so removing r? flag for now.', Created ', ', Pull Request', Comment on ', ', Pull Request Nice, glad the fix is so simple!' 
id=1229482	 'Created ', ', Link to Github pull-request: ', Not sure what the intended behavior of the .gitignore changes were, so just taking a shot in the dark here. This assumes the ignored directories are all going to be top-level directories in the project.', Comment on ', ', Link to Github pull-request: ', Yeah, the aim was ignore top level directory's with those names. My bad. Thanks for picking it up.", No problem, easy fix. Thanks for the quick review! ' 
id=1306638	 "It's difficult to say precisely how many tests are passing, since some tests in UITests leave Fennec in a bad state so subsequent tests would fail. This should be tackled in a separate bug. However, when ran individually, about 50% of the test methods are passing after using KIF Framework 3.5.1", Created ', ', Pull request', Comment on ', ', Pull request Thanks for looking into this. I look forward to your tests :)', Thanks! Merged: ' 
id=1134331	 'darrin: presumably you have a strong opinion on what is desired. Transparent, white (page background?), revealing lightweight theme?', I think the ideal scenario would be to reveal the "underlying" tab tray view, with a threshold beyond which the tab snaps into its spot in the list. This would be a nice gestural way to get from a tab to the list (and further cement the relationship between the two!)', For now I have fixed this by setting the background color to a non-clear color. "Pinch to put back in tab tray" should be a bigger followup bug I think, if that fits in v1. ' 
id=1254567	 'Created ', ', Pull request', When I checked out the menu branch I noticed that yo re using the .Popover modal presentation style. I think this is what is causing the large space below the menu. According to the docs, .Popover on compact horizontal devices uses the full modal transition 1 . I think what you want to use is UIModalPresentationOverCurrentContext which will keep the view controllers below still appear but allow you to animate in the menu controller in a custom way. Although iPad supports popover, I would probably just use the custom animation transition for both since yo ll need it for iPhone anyways. For the custom animation, yo ll want to implement UIViewControllerAnimatedTransitioning 2 - similar to what I did for the BVC -> Tab Tray transition. 1 ", 2 ', :sleroux the OverCurrentContext does not provide the little arrow thing does it though? I can do that bit myself if I have to, but I'd rather not....", You can also give .None a try. I see that we use it in the Reader Mode bar when changing the style. This appears as the popover with the arrow thing on iPhone and iPad. Is this what you were looking for?', Actually, the function that sets the modal presentation style to .None for the ReaderModeBar never gets called (or if it does I can't find it). We actually set the modal presentation style to .Popover in line 2314 of BVC. Using .None creates the error ` Client.BrowserViewController _presentViewController:withAnimationController:completion: , /BuildRoot/Library/Caches/com.apple.xbs/Sources/UIKit_Sim/UIKit-3512.30.14/UIViewController.m:6360 2016-03-18 16:34:11.530 Client 19707:3148893 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'The specified modal presentation style doesn't have a corresponding presentation controller.'` What I don't seem to be able to do is change the colour of the arrow. It was deprecated in iOS9 (as was most of the UIPopoverController class). I'm reading about the animated transition thing, but it is beginning to look like we're going to have to roll our own arrow, unless I can figure that out.", Comment on ', ', Pull request Instructions and details can be found in the description of the PR. This is a V1 pass - very open to making changes.', Comment on ', ', Pull request Left some feedback on the PR!', Comment on ', ', Pull request Really nice so far. More feedback in the PR.', :sleroux I ended up using a collection view instead of the MenuPageView as I ended up losing my touches on the UIButton when I started trying to add actions. Can you take a peek and let me know what you think. Hopefully I've done it in a way that having a UICollectionView inside a UICollectionView isn't confusing as hell.", One concern I have is putting a UICollectionView inside another UICollectionView by adding it in a cell can hurt performance. It might not be a big deal in this case since we're not rendering many collection view-in-cells though. I think this can be solved using a single collection view with a custom layout that lays out its cells in 'page order' - ie. 1-3 on top, 4-6 on bottom of first page, then loop back to the top of the next page. I have a small prototype of a collection view layout that does something similar if you wanted to build on that? If performance is fine then it might not matter.", :sleroux - so how about this one? ', Looks good! Left a few small comments but I think it consolidates a lot of the layout code you had before.', Also, you can probably write some unit tests on just the layout to test the various extremes of the layout and verify the math now that it's in a separate object.", Comment on ', ', Pull request Nice! Thanks for addressing the comments - I think it feels more streamlined now. Just some super minor nits but all good.' 
id=1121084	 'Created ', ', Pull request', Comment on ', ', Pull request Yay content hugging. Looks good.' 
id=1146381	 "Probably want to create empty states & tips for the panels like we do on Android. Probably deserves it's own meta project.", This is now fixed' 
id=1277520	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1168512	 'History: 2d799e3 Tabs and clients: 752d18d onRemovedAccount takes care of the rest: // This will remove keys from the Keychain if they exist, as well // as wiping the Sync prefs. SyncStateMachine.clearStateFromPrefs(self.prefsForSync)' 
id=1223094	 'Created ', ', Comment on ', ', LGTM with some minor nits.', Comment on ', ', LGTM Agree with Brian.', Landed 12bf9a1488c966c48dee98c0d6c967f3e3bd5557' 
id=1291883	 'Stefan can handle it for you, send an email to sarentz @ mozilla. This is not a product bug.' 
id=1233284	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1179895	 'a44219b' 
id=1257884	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1126584	 'Created ', ', Link to Github pull-request: ', Hey peeps, here's a first experiment at embedding the FxA sign in flow into Firefox for iOS. I glued it in to an existing button in settings, just for testing. The patch shows an interstitial loading/error page which is replaced with the background loaded webview. If you log in with a valid FxA (pointing at dev servers right now, you may need to make a new account) yo ll see the settings UI update the email address. There's no persistence yet.", Comment on ', ', Link to Github pull-request: ', I added a bunch of notes to the PR. Some of it is just Swift code style stuff. But there are also some bigger questons about how things talk to eachother. I +'d this patch because I don't want to hold this up but I do think we should at least chat about some of the bigger points. They can also be followup refactoring bugs.", Comment on ', ', Link to Github pull-request: ', Sorry for the late review. Looks pretty good to me.' 
id=1200365	 "Tested on iOS9, iOS8.4 & iOS8.3. View later'd several tabs, all tabs appear when opening Firefox" 
id=1147935	 'Created ', ', PR:' 
id=1212472	 'Created ', ', Pull request', Comment on ', ', Pull request Looks great! Probably should have added this one earlier... Adding Robin sign off on the strings/dialog.', Nathanael, when I reworked the openURL code, I used the following page to test: ', And the following sheet for test results and expected behaviour: ', Oh, that's very useful \u2014\xa0thanks! Everything seems to still be working as it should after this change, thankfully!" 
id=1162127	 'TestFlight build #10 crashes on iPhone 5.', Making a new build with SnapKit 0.11. ', This did the trick. Testflight build #13 was successfull.' 
id=1237613	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!' 
id=1183257	 'This is mentioned on Build #24 on ios-feedback ', Wes, could you investigate?', This login is in an iframe. We intentionally don't inject the logins script in iframes yet, to avoid security issues there. We could though... I think?", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', This looks good to me, but I think it needs multiple sets of eyes.', Comment on ', ', Link to Github pull-request: ', I'm not too familiar with our passwords-message-passing mechanism, but this is fine with me if it works. We can do a more thorough security review as part of ", .', Created ', ', Link to Github pull-request: ', Will land in v1.1.', Tried applying on master locally but there's conflicts", Oops forgot to add a comment - looks like we can merge this after a rebase/Swift 2.0 update?', Updated and merged. ' 
id=1100593	 
id=1129556	 'Fixed by ', ?' 
id=1191866	 'Created ', ', PR: ', This adds a Send Feedback item the Support section. It opens ', )', Shouldn't we be pushing positive feedback to the App Store re: ratings and reviews?", right now, we need _a_ mechanism to provide feedback that isn't just a store review. We can look at trying to push folks down the two avenues maybe for v2, but it certainly isn't imperative for v1." 
id=1143154	 'rnewman: can you outline v1 of this? Can it just be a clients table and a tabs table, like in Fennec? Or do we need to build in a Sync store layer up-front?', I think this is a two-parter, with the other part being ', . That bug has some schema details for tabs itself. Because clients and tabs are unidirectional (see ', and friends), we don't really need to do anything special here: just a place to put client and tab records when we download them.", (In reply to Richard Newman :rnewman from ', ) ', Here, I'm thinking strictly of storage for Synced Tabs. I don't care if we store local tabs in the same DB/table but we don't *need* to, and since Sync's tabs format is relatively impoverished, we might want to split this storage entirely. So yes: two parts.", This should blocked the Synced Tabs panel. I am actively working on this.', Created ', ', Link to Github pull-request: ', rnewman: st3fan: still some things left to do here, but I thought I'd get feedback early. I kind of went for a hybrid: two GenericTables but some roll your own SQL in the middle. I originally intended to do a single LEFT OUTER JOIN like we do on Android, but it got a little... duplicative. So I went for two queries (clients, then all tabs). I don't like the callback interface but I don't care to depend on Result and Deferred just yet.", I think this looks good. My only request is to test with real timestamps. The changes that I made to support long long timestamps are probably ok but it would be good to see some more tests use it. (Just use 13 digit numbers to test with and see if they come back ok)', Comment on ', ', Link to Github pull-request: ', rnewman reviewed on GH and IRC.' 
id=1152100	 'Created ', ', PR : ', Here's what I threw together for this nick. What do you think? I'm sure I'm making some use cases hard. Are they use cases we care about?", Comment on ', ', PR : ', Sorry for the delayed review. I think this changed under me, and not for the better. I feel there are three commits here: 1) rewrite settings. I was mostly OK with this, just wanted to think over and discuss the hidden stuff. 2) add some clear data stuff. 3) add a pref for clear data. Please separate.', Created ', ', Link to Github pull-request: ', wesj: back to you. There were several small issues with your patch that were best handled by making each setting hidden/not hidden on the basis of account == nil. Dequeing cells is fine, except when it runs into iOS 8 bugs -- see comments and links in code.', Comment on ', ', Link to Github pull-request: ', I like this even better! Thanks! I'll rebase the clear private data stuff on it" 
id=1283152	 'Hey Aaron, when you say "selecting a tab via the men , which menu are you referring to?', The all-tabs button with the tab count indicator.', Video: ', Essentially, the web view is presented quicker than the tab select.', *** This bug has been marked as a duplicate of ', ***', Not related', I'll test after that lands *** This bug has been marked as a duplicate of ", ***' 
id=1164182	 'Created ', ', PR: ', Comment on ', ', PR: ', Forgot to mark this as reviewed.' 
id=1228094	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1173383	 'Fixed in ', .' 
id=1241010	 'Created ', App name.jpg', The long title looks will not be fully displayed.', @YF,It could be fully displayed.you can search "QQ\u6d4f\u89c8\u5668" on AppStore,there is your answer you want.', I think \u201cFirefox \u706b\u72d0\u6d4f\u89c8\u5668\u201d is enough. The main purpose is that make it easy for users to use "\u706b\u72d0" as a keyword, and also make it easy for Chinese users to know that Firefox is \u706b\u72d0. "Firefox-\u9ad8\u901f\u3001\u7b80\u6d01\u3001\u6613\u7528\u7684\u706b\u72d0\u6d4f\u89c8\u5668" does not make much sense to me.', app name\u4e2d\u7684\u5b57\u7b26\u6743\u91cd\u662f\u6700\u9ad8\u7684\uff0c\u8fd9\u6837firefox\u4f1a\u66f4\u9ad8\u7684\u641c\u7d22\u6743\u91cd\uff0c\u5728\u76f8\u5173\u7684\u5173\u952e\u5b57\u4e2d\u3002', (In reply to Gong Xudong from ', ) ', This is a hearsay, it also has many claims to the contrary. ', ', ', I agree with ', .', The current Keywords see: ', ', @dongsheng the app title is Firefox\u706b\u72d0\u6d4f\u89c8\u5668-\u66f4\u5feb\u3001\u66f4\u667a\u80fd\u3001\u66f4\u4e2a\u6027\u5316', @YF(Yang), Could you help us to change the App name from "Firefox \u7f51\u7edc\u6d4f\u89c8\u5668" to "Firefox \u706b\u72d0\u6d4f\u89c8\u5668 - \u66f4\u5feb\u3001\u66f4\u667a\u80fd\u3001\u66f4\u4e2a\u6027\u5316"? It\'s much more easier for Chinese users to know that "Firefox" is "\u706b\u72d0".', We can change the name by ourselve, sorry for the misunderstanding.', The current branding policy is *not* to translate/localize Firefox. This should remain in English. However, if you say people associate \u706b\u72d0 with Firefox and most users use \u706b\u72d0 to find Firefox, I need to provide this feedback to the branding team and get the 2nd round of discussion on the policy. As for the rest of the translation, I see the reason for going both ways, just Firefox \u706b\u72d0\u6d4f\u89c8\u5668 or the extended way to explain what it does "Firefox \u706b\u72d0\u6d4f\u89c8\u5668 - \u66f4\u5feb\u3001\u66f4\u667a\u80fd\u3001\u66f4\u4e2a\u6027\u5316". If you think this helps user understand we it does and why it is better, and there is enough space to allow the text to display on the landing page of the app, then go for it. Thank you, Peiying', fixed on v2.0' 
id=1186318	 'Created ', ', Link to Github pull-request: ' 
id=1112228	 'Created ', ', Pull request', Comment on ', ', Pull request This looks good to me.' 
id=1194449	 'Created ', ', Pull req. Fixing this outside-in: * If we fail to apply just a few history records, don\'t abort the sync. * If we get a URL like this, don\'t fail -- escape instead. Desktop Firefox thinks "|" is perfectly valid in a URL, and doesn\'t escape it. NSURL barfs. So we escape it.', e5ddcc6' 
id=1145399	 'This is still present in build 6', Created ', ', PR ', Comment on ', ', PR ', r=me with the crazy test hack fixed.' 
id=1221325	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1156590	 
id=1206944	 "The database is locked. Then we try to move it, but apparently nothing happens (presumably because the file is open). Then we run the table creation logic, which fails, because the DB already exists and is populated. I'd be a little surprised if this failure case were possible in the real world.", Handily, I just reproduced this in the simulator. So progress!', Created ', ', Pull req.', This fix isn't complete; turns out we have a lot of main-thread accesses of profile.{history,bookmarks,\u2026}, each of which can cause that thread to do DB init. We need to make sure that DB init is scheduled on the DB thread, always.", Okay, a much better stack. All of the DB operations already occur on the DB queue. The main concern was to make sure that we don't end up with multiple BrowserDBs. In addition to the fixes in the first three commits: * A little withExtendedLifetime cleanup. * Some naming clarification. (This confused Nick, so\u2026) * Some logging. * createOrUpdate multiple tables inside a single transaction. This knocks at least two transactions and commits off our first run startup. * Run those createOrUpdates in the background when we can. The background query execution works through dispatch_sync, so it blocks the main thread to simply initialize a table that we're not about to use. I'm not 100% sure on this change; in theory we could immediately have a foreground use that schedules a DB operation prior to the table creation. * Don't open multiple connections. This is a big one. * Use a dispatch_once singleton pattern to ensure that we only ever create one BrowserDB. lazy vars are not thread safe. This is. Over to you, Brian.", Comment on ', ', Pull req. Worth a second pair of eyes.', Comment on ', ', Pull req. Looks OK to me!', Comment on ', ', Pull req. Looks good', 98a84673ed7d957f8ce3c59d05bb77281830c40a', *** ', has been marked as a duplicate of this bug. ***', Two follow-up fixes: 52faac0' 
id=1289639	 'Already fixed in ', . ', *** This bug has been marked as a duplicate of ', ***' 
id=1310141	 
id=1167334	 'I think this due to a redirect on Google Accounts to Google Mail on Google. This is not reproducible on Twitter for example.', Yeah, we should probably also have a timer or some sort? Gmail seems important. Will track (and take).', Created ', ', PR ', This requires at most 5 seconds between redirects. That feels too long to me, but GMail is really slow to load (because WKWebview). The redirects for GMail are all JS ones as well, and I can\'t find any way to identify them as such (i.e. they show up as "Other" type navigations).', Comment on ', ', PR ', As mentioned in the PR, wondering if we can maybe use redirects to help us make our decision?', I was actually looking at the link type originally to see if it could tell us that it wasn't a user-initiated change. I hooked up redirects a bit, but it looks like one of the redirects isn't detected that way for us.", Created ', ', PR ', This is a run as using redirects. Like I mentioned, this doesn't work for GMail, but I think its nice to be able to detect these. This also pushes them out of history and some other stuff... any thoughts?", Comment on ', ', PR ', LGTM with comments on the PR.', Backed out due to ', . ', Status update, wesj?', Created ', ', Link to Github pull-request: ', This brings us closer to parity with Android.' 
id=1178015	 'Created ', ', Pull Request', Comment on ', ', Pull Request Looks fine to me with a minor comment in the PR.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Comment addressed with a revised commit in the same PR. (Shall I put you into review?(', ) again in such a situation so that you know there is something again for you to address?)', (In reply to Boris Du\u0161ek from ', ) ', to be precise, meant setting the "review?(', )" flag', (In reply to Boris Du\u0161ek from ', ) ', :bnicholson I guess ready for merge.' 
id=1244967	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1325439	 'Just a note that this works as expected. We are supposed to ask every time you make a change to these security settings.' 
id=1123989	 "Hey Brian, I haven't contributed to the project but have been following from afar and I might be able to make a suggestion. One thing I've done in the past is wrap any stylings on fonts/images/etc inside their own extensions on the framework classes that describe how the font is used - like extension methods named tabHeader, detailText, etc. The extension method can then delegate/proxy to a theme controller that has knowledge of the various themes available to the app. These themes can be stored in a plist file or some other format and be parsed into the controller. At runtime, when the user toggles different modes, the theme controller updates it's current theme and the associated proxied extension methods have the new theme. Another benefit of this approach is that it cleans up a lot of styling you need to do on your views in your view controllers and keeps the code DRY but not repeating the same fonts/colors/etc across the app. I haven't done this in Swift yet - only in ObjC - but I can't imagine it being that much different. Hope that helps a bit!", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Note that those answers are from before Apple introduced extensive theming support in UIKit. We should take advantage of that where possible I think. Check out ', for a quick intro to UIAppearance', I did something like this in ', . We need to pull out more, but I've been waiting to see what's duplicated to figure out what to pull out... Closing this though. *** This bug has been marked as a duplicate of ", ***' 
id=1135836	 
id=1266436	 'Duping forward I guess *** This bug has been marked as a duplicate of ', ***' 
id=1278678	 'Resolved with patch on meta.' 
id=1147070	 'Created ', First Run V1 - Slide ', Attaching a slide of the WIP. General framework - Image, copy, call-to-action, dismiss button.', Note: we should also look to measure how far users get in these 3 slides, duration spent perhaps, etc (if possible)', Stefan, any gauge of how much work something like this might be? ', Anthony, this is pretty simple to put together. My first thought is: how do we deal with the different screen sizes?', I wonder if we want to also try a "card" approach, where that same UI appears in a floating modal over the empty tab. This may scale better to iPad, etc?', Created ', First Run V1 - Spec.png Attaching spec from my convo with Stefan, still need to attach those header images. Stefan raised a good point, on smaller phones like the 4/4S, we might have to fix the height of the white area and let the green area (header image) resize dynamically.', Created ', Slides.zip Attaching illustrations', ^', Thanks Anthony. Those images look good.', Few comments: Slide 1 \u2013 We aren't using the double square tab icon on iOS, its just a rounded square right now. This should probably reflect that. Slide 3 \u2013 Do we want this device to look more like an iPhone?", Created ', ', PR: ', Created ', ', PR: ', This is pretty complete now. Darrin, I have moved most constants into the IntroViewControllerUX struct so that you can mess with them. There are still a few small things hardcoded though. The one thing missing is opening the Firefox Accounts dialog when you press \'Login to Firefox Accounts\'. I need some feedback about what happens then. This is what I suggest: * User taps "Sign in to Firefox" * The On-boarding dialog is replaced with a dialog that shows the FxA login screen * When logging in succesfully or cancelling, the Login screen disappears * The on-boarding dialog does not come back. You are immediately back into the browser Let me know if this sounds right.', This login flow sounds right to me. Anthony, any comments you want to make or is this fine?', Stefan, how easy/hard to add a button in Settings to re-popup the tour?', Darrin, do you want a button to just open the same tour again or a 'reset the tour so i see it next time i open firefox' ? (Both are relatively simple)", Just 'show the same tour again' immediately. Just will be nice to have something to point people to if they skip it or have questions etc. Thanks!", Darrin I think this is in pretty good shape. In the last changes to the PR i also included a Support section in the Settings that has a 'Show introduction again' row. Let me know what you think. Specially how the controllers transition. Our view controller 'stack' is pretty complicated and it is really challenging to show or animate things in the right order.", I think this is an AWESOME start :) One nit I\'d propose fixing before we land is making the whole tour view swipable (first thing I did was try to swipe the bottom text area to continue). Keep the arrow buttons functional. UX can then get feedback and tweak on our own, likely. "Show introduction again" should maybe become "Show Tour", but I\'ll see what desktop/other platforms call this on-boarding experience.', I think I want to land this with the right strings (Show Tour?) and the swiping behaviour you describe. Darrin, when you swipe the whole thing. What would move? The whole top and bottom part? What happens to the arrows? Would they scroll together with the other content? And then tapping the arrows will simply trigger a scroll to the left or right? That means I remove the cross fading that is happening now in the bottom part?', Follow up discussion in ', Comment on ', ', PR: ', Will file follow up bugs, ship it.', Merged with r=darrin', "Connect to Firefox Accounts anywhere you want." What does anywhere mean?', (In reply to Aaron Train :aaronmt from ', ) ', Copy TBD :)', Copy suggestions: SCREEN 1 Browse multiple Web pages at the same time with tabs. SCREEN 2 Personalize your Firefox just the way you like in Settings. SCREEN 3 Connect Firefox everywhere you use it. Sign in to Firefox', Created ', IntroScreens.pdf For the localizers. This PDF contains screenshots of all the screens in the introduction.' 
id=1189902	 '*** ', has been marked as a duplicate of this bug. ***', Created a separate bug to re-introduce the crash prompt we had before (', ) and set that as tracking+ for 1.0.5. Moving this one to 1.1.', Just revising the messaging here - do we want to include a never send option?', Created ', ', ', Strings needed for this patch. :flod, I added you as feedback to make sure the comment makes sense. Should I do this for other patches I open for strings?', It's OK to flag me for these strings, hopefully it won't take too much time to get an answer. I confess I'm a bit confused by both ", and the string comments: are these four strings used like radio options? Because I would expect at least one button to actually "Send" the report, and "Send report" be an option like "Send once". Is there a mock-up somewhere?', :flod no mock up unfortunately. This would show up as an alert prompt with the options as buttons either horizontally or vertically laid out. Might be more clear if I changed 'option' to button since they are buttons on the prompt and not radio/checkbox options.", Created ', Alert View Image Sample image of a vertical alert view', Created ', iOS-Simulator-Screen-shot-30-Dec-2013-09.50.43.png', Comment on ', ', ', Thanks, the image helps a lot. If, at some point, we can add a mockup somewhere and link it in the dialog title's comment, it would be great. That kind of UI is very confusing: it sounds like an option (noun), but it's an action (verb). As for the button layout, 2 on a row is probably risky if locales get particularly long.", Comment on ', ', ', LGTM', Landed - thanks for all the help :flod!', So looks like I closed this when the strings landed but the feature hasn't actually been implemented. Reopening to track implementing the actual feature.", After some research, it seems that desktop/android have a different way of presenting crash reporting to the user. Our model: 'Send Crash Reports' option is off by default. Alert is shown to the user after a crash occurs asking if they want to one time send, always send, don't send this time, or never send. Their model: 'Crash Reporter' option is on by default. This means that the user will be asked if they want to send a crash report after each crash. This does NOT mean it will report automatically. The user must consent to sending. After a crash, the user is presented the option to send with additional information if they want. If 'Crash Reporter' option is OFF, the crash reporter is never shown after crashes. I think we should consider using the Desktop/Android model because it will allow us to eventually build in the capability for the user to add additional information for each crash. In the current model, if the user selects Always Send, we won't have the crash to ask the user. I guess we could ask the user even if they allowed crash reporting to always happen but then it would be weird to just have them input some stuff without a send/cancel button. After that, it just degrades back to the desktop solution of asking the user each time... To make this change, we would need to need to: 1. Update the settings option with the messaging. We could reuse the same strings from Android. The option would change from Send Crash Reports | to: Crash Reporter | Firefox submits crash reports to help Mozilla make your browser more stable and secure We could just rip the strings from the Fennec Android so we wouldn't need to go through L10N. 2. Change the crash prompt to only display Send/Don't Send options. Side note: Doing this would also make managing the crash reporter state easier code-wise since we would just enable/disable the uploading of crashes after each crash instead of always checking an opt-in flag in our prefs. Thoughts?", I defer to Robin's judgement here. I don't think desktop is too much of an inspiration: prompting on each crash could be pretty tiring on iOS. I defer to Aaron's judgment on whether mobile users add useful crash comments\u2026", I would prefer our current model with the 3 choices rather than prompting every time. With our current model, we could still provide a way to add a second prompt for input if the user chooses Send Report but default to just sending without comments if they choose Always Send .', Created ', ', ', Created ', IMG_2869.PNG Here's what the crash prompt looks like", (In reply to Richard Newman :rnewman from ', ) ', I cant remember the last time a comment submitted (Android) was useful.', This adds a bunch of strings. Should we punt it to 2.0?', My bad. I see them in the TempStrings section now.', Comment on ', ', ', LGTM (assuming testing). I think some of this BVC code should be in TabManager, or close to it. I left a string suggestion re "Okay" versus "Restore".', Merged' 
id=1140005	 'There is no easy fix here. The solution is to pre-process the xliff files that are in the l10n repository before we import them into the Xcode project. We need to look at all <file> sections for Info.plist files and remove the strings that have either $(MOZ_BUNDLE_DISPLAY_NAME) or $(PRODUCT_NAME) as their value. We should simply remove the whole <trans-unit> node. If this is done for the Client/Info.plist one then the OS will simply default to the values that are in the actual Info.plist file, which has the proper substituted values. (Firefox, Fennec, Aurora)', As an additional step, we can then actually safely remove all <file> sections that reference an Info.plist file for which only the CFBundleDisplayName, CFBundleName and CFBundleShortVersionString strings are defined. There is no need for those files if they just contain what is alredy in the actual Info.plist file.', Created ', ', PR: ', Script to pre-process XLIFF files before we can import them in the project. This is to fix the issue where $(PLACEHOLDER) values from the Info.plist end up in localied files.', Comment on ', ', PR: ', Hey, sorry I was late to this party -- looks fine.' 
id=1201131	 "I'm looking at this for a little while. Note for those who come after: the failing AccountsTest has been changed so it doesn't fail, but still needs attention.", I think we're not retaining the request somehow, and so it's deiniting, which cancels the session.", Yup, that's it. Each Client has its own Alamofire.Manager. We don't use the client once it kicks off its request, so it's automatically released. When it's released, it releases the Manager. The Manager's deinit cancels all outstanding requests. Threading the client back through the call stack makes this test pass. I'd like to find a neater solution :)", Created ', ', Pull request', f80cd8d' 
id=1270266	 'User error. Works great. Sorry for the false alarm.', System set to en-US. Clean install of 4.0b7 (TestFlight Beta Channel) Search for 'us' results in a yahoo search ", Switch to system settings, switch language to English UK, Region to United Kingdom Open Firefox Last search still shows Yahoo. Because that is simply the last page loaded. Search for 'uk' results in a google search: ", Google.ca because I am in Canada. I assume that is expected?', Yes. Important part is the client which is there because you are UK. We're good." 
id=1162773	 'Note Android still has this problem too ', 687f9d9 We now clear clients, remote tabs, and history metadata when signing out. ', tracks deleting our own client record and tabs record from the server immediately before detaching.' 
id=1226606	 'Created ', ', PR: ', This patch upgrades XCGLogger to the most recent version.', Does this work? If so, want to flag review?', Closing this bug because this has already been done on master.' 
id=1238151	 ' doesn\'t look like the right URL. Would using "Cancel button label" for all these strings work?', (In reply to Francesco Lodolo :flod from ', ) ', Depends what "Cancel alert view" and "Cancel title from search engine picker" mean.', (In reply to Stefan Plewako :stef from ', ) ', Brian, can you help? They were introduce in ', ', The last being yours. My understanding is that this is always a "Cancel" button in the title, so having one common localization comment would make more sense.', These NSLocalizedStrings are both very old. The first was added back in April 2015: ', The second was added back in September 2015: ', The commits linked in ', changed the code around these strings, but the NSLocalizedStrings themselves weren't touched. I agree that we should update the comments for these. We should go through and do an audit, because there are probably a lot more strings that need updating, too.", Comments were unified in ' 
id=1171732	 'Created ', ', PR ', (In reply to Wesley Johnston (:wesj) from ', ) ', This list makes me giddy inside.', Pretty awesome! Comments left in the PR.', Updated. I'm not sure about the escaping question. I guess I think... no? This string is just used for prompts AFAIK, but maybe I missed something...", Argh. Git and me are not getting along today. Follow up: ', for test problems.' 
id=1184158	 'Created ', Screen Shot 2015-07-15 at 11.17.35 AM.png', Possibly, but I'd leave this open until fixed just to be sure.", Created ', Screen Shot 2015-07-20 at 12.00.22 PM.png Steps seem to be a little different now on master i) Visit ', ii) Tap the first featured article iii) Tap the address bar iv) Switch to Bookmarks v) Enter Reader Mode', Created ', Screen Shot 2015-07-20 at 12.12.31 PM.png On exit', Fixed by URL bar refactor (', ).' 
id=1130501	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1263652	 'Created ', ', Pull request', Comment on ', ', Pull request Code looks good and the animation is spiffy!', Looking good! But I feel it's a little awkward the way it expands from the middle outward...doesn't feel like the animation compliments the container this way. Would it be possible to make it slide up from the bottom of the screen, with the most minuscule bounce so it stops naturally? I'll see if I can find some examples anywhere.", Created ', ', Pull request I've updated the menu presentation animation to expand from the menu button. It still 'pushes' & 'pulls' the toolbar buttons off the toolbar, which I quite liked from the last one, but has the expand from bottom request from :sevaan. Hope you like this one more.", Comment on ', ', Pull request :fluffyemily \u2013 this is great! I'm really digging this iteration. it's springy and quick and feels right. well done! one ui nit: can we add the same radius used on the top of the webview menu to the panel view menu?", #merged: ' 
id=1193178	 'Created ', ', ', Merged' 
id=1144700	 'Is it missing, or just very slow to load?', Missing. Figure this might be wontfix if we create some initial bookmarks.', *** ', has been marked as a duplicate of this bug. ***', *** This bug has been marked as a duplicate of ', ***' 
id=1205098	 'Sounds like we want this, and should be pretty easy to do.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1217855	 'Created ', Build Tools Pull Request', Comment on ', Build Tools Pull Request Good stuff. Lets land it and start using it.' 
id=1305871	 
id=1175887	 'It seems that this string is in a separate table called "HistoryPanel". I bet we ignore it because it is not listed in xliff-to-strings.py', I think we miss a whole bunch of other string tables in the builds. Going to turn this bug into a more general bug.', This is extremely embarrassing. I have not kept xliff-to-strings up to date with the actual string tables that were introduced. So a number of strings that were recently put in separate strings tables were not included in the builds. I think what I would like to do, as a followup bug, is turn the logic of xliff-to-strings around and not work with a whitelist but instead with a blacklist. Or no list at all. Or add logic to detect new string tables in a better way. (Not sure at this point why there is a list at all)' 
id=1165745	 'Btw. I just managed to run Firefox for iOS with latest upstream WebKit (r184443, 601.1.33) on iOS 8.3 Simulator, and the problem still persists.', Thanks Boris, I am investigating and working on a fix.', Boris, curious, are able to run the latest webkit on the device too?', I added a console.log() at the end of ReaderMode.js and it seems the user script is not executed at all. It is not just pageshow not being fired, it is the page being cached. So yeah I think we need to move the call to _firefox_ReaderMode.checkReadability() to a different place unfortunately.', (In reply to Stefan Arentz :st3fan from ', ) ', No because I did not try. I did not try because I gave it 1% chance to work (I deemed that the device would be, unlike simulator, cautious not to allow things like making a new process etc., unless the framework would be signed by Apple\'s own certificate), but I might be wrong. In the webkit\'s build scripts, there is explicit support for *building* for device (the promising argument --device), but there is also note in the function for *running* with the built webkit for iOS saying "Only running Safari in iOS Simulator is supported now." (See ', ) It would be great for me to be able to run on device, as most accessibility stuff can be tested only on device with actual VoiceOver and Switch Control (Accessibility Inspector in the simulator is only for very basic testing).', (In reply to Stefan Arentz :st3fan from ', ) ', I discovered that console.log is unreliable with WebKit Inspector (it agrees in steps 1., 2., 3. below, in in step 4. 'pageshow' blinks very quickly and then disappears and it does not show anything for 4., 5., 6., 7.), and alert is reliable. My results with placing alerts into 'load' event, 'pageshow' event, and at the end of the script (I called that alert 'explicitload'): 1. Open cnn.com: 'explicitload', 'load', 'pageshow' 2. Open article: 'explicitload', 'load', 'pageshow' 3. back: 'explicitload', 'load', 'pageshow' 4. forward: 'pageshow' 5. back: 'pageshow' 6. forward: (nothing) 7. back: (nothing) So pageshow does work correctly in 4. and 5. where the page is apparently being served from cache (and 'load' and 'explicitload' are not fired), i.e. 'pageshow' is behaving as it IMHO should. Just for some reason, it works only once. On subsequent back/forward navigation, it stops firing. I would file a bug with webkit if I had easy repro of this with Safari on OS X (I tried).", Created ', ', PR: ', This patch moves the call to checkReadability() from the pageShow event handler to the native code. This is because the event works unreliable because of caching issues. (This is likely a bug in WebKit since pageShow should always fire, even on cached pages)', Comment on ', ', PR: ', LGTM!' 
id=1120730	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM', *** ', has been marked as a duplicate of this bug. ***' 
id=1196130	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM', Merged.' 
id=1146227	 'Created ', ', Link to Github pull-request: ', rnewman: yo ve seen this a few times. Please tweak and land this 'cuz I'm going to be in Android land for the rest of this week.", Landed.', Comment on ', ', Link to Github pull-request: ', This landed.' 
id=1168490	 "is there a particular page/screen that this happens on? I can't seem to replicate it....", Not that I know of. In most cases this should appear right after you submit a form and so the keyboard should be disappearing. You might have to just force a Snackbar to be drawn when the keyboard is up sometime. Or tap an input field while one is showing.', Created ', ', Pull request', Comment on ', ', Pull request LGTM.', Comment on ', ', Pull request Emily, please land!' 
id=1158216	 "Notes to self: * Some local timestamps are microseconds. Synced timestamps are all milliseconds. * Only Android records will have timestamps. Desktops don't upload them yet. That means we need to handle missing ones. * Furthermore, we have to handle records where our mirror record has *lost* fields.", Created ', ', Pull req. This needs rollup and more tests, but I think this is ready for review.', TODO: "httpRealm string: the HTTP Realm for which the login is valid. if not provided by the server, the value is the same as hostname"', Leaving my testing results: * Added on iOS * Added on desktop * Modified on each * Deleted on each * Form fill works correctly on desktop * Form fill is busted on iOS, but (a) it was busted before, and (b) I see that the DB is returning a matching row, so I'm confident that this is an issue in LoginHelper that we can fix separately. Desktop UUIDs and iOS GUIDs work correctly on both platforms, it seems.", Comment on ', ', Pull req. This looks pretty good. Do you have integration tests planned? I mean, tests where we hit the server from two client instances to see if they sync correctly? (I don't know if that is even possible, but I think that would be great to have on top of sync engines) I see you silenced the sqlite compile warnings. Maybe move that to a separate PR or at least a separate commit? I created ", for this.', Comment on ', ', Pull req. Comments on GH, but nothing major. The hard work was mostly in storage earlier -- bravo \\o/', I really want to do this, but it's a pretty big job -- basically implementing TPS for iOS. Not something we can do for v1, but it's an acknowledged chunk of debt. Thanks, both of you, for the thorough review! " 
id=1126481	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', This patch makes sure that changes to the reader view style settings are stored to the user's profile and also that they are loaded and used for subsequent uses of the reader view." 
id=1137415	 'This could be a good mentor ticket: a contributor could find hi-res favicons or other iconography for all of our search plugins, and then update the data: URIs at, for example ', It can look pretty bad having the search engine icon next to history result favicons in the search panel; I'm not sure what do about that, save for using hi-res favicons if we can, and using the favicons for the search engine results as well.", Just remember that we need to get some approval, even from the partners for any images we ship. Looping Kev in here just so he is aware.', Per ', , we're going to update the current white-bg search icons with the 'chiclet' versions for both mobile platforms. Attaching shortly.", Created ', Search Icons.zip', Should we remove the grey vertical dividers in the quick-search bar with these icons? Probably will look cleaner...', Also, just me or is the wikipedia icon cut off and the yahoo one empty in that zip?', :darrin, yo re right, thank you for noticing! re-uploading now.", Created ', Search Icons.zip', :bnicholson, where are we at with this?', No contributors have picked this up, so I'll go ahead and make the changes.", Created ', search-icons.zip try these!', Created ', google-updated.zip', Double checking is the Amazon/Wikipedia supposed to be black filled?', Yep, I believe these were the ones we had approved.' 
id=1147715	 'Created ', ', Pull req.', Comment on ', ', Pull req. nits, nothing more. SHIP IT!', There's some very worthwhile discussion here: ", Making sure we don't lose it!", 0e227ae' 
id=1212383	 'Created ', ', Pull request' 
id=1161620	 "I'll look into this.", Same here, on iPhone 5S (build 8-13)', Curious to hear the next round of feedback with these dependencies fixed!', I also encountered this problem on iPhone 5S (build 13).', Build 15: new tab (+, tabs tray) works great, tabs button (with tabs number) less so but still better, close tab still very hard to tap (maybe better but nor meaningfully).', Closing this for now -- we'll be listening for user feedback to gauge areas that still need work." 
id=1179811	 "I'll take 5 mins to see if there's a quick fix for this to see if it's worth tracking", Resolved as part of ' 
id=1237572	 "I've spent some time looking for an alternative and found one in the default iOS SDK. This is the same approach that a lot of the built in iOS apps (like mail/Notes) use. The UI is slightly different and so I'd like to get Robin to have a look first to make sure its okay. I've attached a small video that has both the current behavior and then the new behavior. If this new behavior is acceptable we can remove about 1300 lines of code. \u30fd(\u2022\u203f\u2022)\u30ce", Created ', readinglist.mov A before and after of the ReadingList action buttons.', This looks great, Farhan! GFI!', Created ', ', Pull Request', Comment on ', ', Pull Request Super nice. And I cannot cheer enough about the removal of a dependency, especially from ThirdParty. I would normally ask you to update the UITests (ReaderViewUITests) to reflect these changes in functionality (swipe left to reveal Mark As Read instead of swipe right) but seeing as those tests are broken because the accessibility label is an attributed string and Kif can't perform actions on those, then there doesn't seem much point. If you feel the need, you _could_ reimplement ReaderViewUITests in UITesting in a new target and actually get them to work, but don't feel obliged.", master f8c4e23633989fb79c62f174b21e8d3182779a7a' 
id=1170707	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', It's probably obvious, but we need to investigate whether this issue is being caused by anything in our Web content for FxA.", Still visible on Build #24. This is terrible UX.', (In reply to Aaron Train :aaronmt from ', ) ', I will try to get to this before I go on PTO this Friday but I\'m "a little busy".', Any update here?', I don't think this has anything to do with connectivity issues. It always happens, on both device and in simulator. Looks more like a state / ui out-of-sync issue.", (In reply to Stefan Arentz :st3fan from ', ) ', Stefan is correct. I dug into this and have a patch in the works. What is happening is that we've grown consumers of FirefoxAccount.advance(), and they're now racing at setup time. Different parts of the UI start advancing the account. One of the setup tokens from the fxa-content-server is single use; all advancers that try to reuse it fail. By the time the successful advancer finishes, parts of the UI have already seen an error (even though the final advance is successful). rnewman and I discussed how to lock this efficiently; patch inbound.", Created ', ', Link to Github pull-request: ', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Link to Github pull-request: ', st3fan is under water post-PTO, so redirecting to etoop, who has worked in this area.', Landed with r=etoop,st3fan f=rnewman. ', AaronMT: this could use verification. It should be as simple as not observing a "PW required" orange error when signing in to an existing Firefox Account.', AaronMT: further, any janky syncing or hanging pull-to-refresh, etc, that you observe should start by pointing the finger at this ticket.', (In reply to Nick Alexander :nalexander from ', ) ', Aye, looks good (In reply to Nick Alexander :nalexander from ', ) ', There's " 
id=1183213	 'commit b27936faa4698a2a95a63d017b761afb35794536 Merge: 12f4223 5a79385 Author: Robin Andersen <', > Date: Thu Jul 23 17:07:02 2015 -0700 Merge pull request #796 from mozilla/', -Update-Empty-Panel-States ', Update Empty Panel States Resolved?', Sorry for the delay! #presentationprobz' 
id=1100583	 '\u201cAs a user I want to be able to send and receive a tab.\u201d' 
id=1250182	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r+ with a few suggested fixes. Most importantly, let's use the system uptime instead of the clock.", master 6c697ce68692401b4ca6e6b0f4980fde02d7828f' 
id=1203508	 'Created ', ', Pull req. I think this is all we need. The names for the other folders are already in our tree, but in any case also arrive as part of the Sync records. Robin: if there\'s anything you think we need here -- "Not yet synced", some indication of read-only, anything -- please let me know.', Comment on ', ', Pull req. Looks great for now, let\'s address the accuracy of "Desktop Bookmarks" later on... ;)', Comment on ', ', Pull req. ', 4:28 PM <darrin> do we use \u201cDesktop\u201d on android? 4:27 PM <@rnewman> yes, same string 4:27 PM <@rnewman> it's not technically accurate, but it's close enough 4:28 PM <darrin> rnewman: my only concern was bookmarks from other non-desktop devices (tablets, etc) 4:28 PM <@rnewman> aye 4:28 PM <darrin> vs \u201cOther Bookmarks\u201d\u2026 but thats kinda ambiguous too 4:28 PM <@rnewman> right now those won't be uploaded unless they're Android or desktop, mind 4:28 PM <@rnewman> Synced Bookmarks isn't quite right either; only Non-Mobile Bookmarks would be accurate, and that sucks 4:28 PM <darrin> truth 4:28 PM <@rnewman> so we just shrugged and went for it :) 4:28 PM <darrin> Desktop Bookmarks for now then, show me where to sign 4:29 PM <darrin> we can address this in whole later on" 
id=1270996	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Changes look good but it looks like a couple of tests are now failing: ', Comment on ', ', Link to Github pull-request: ', Looks good!', Merged in to ' 
id=1216128	 'Created ', ', ', Comment on ', ', ', Much better, thanks! Land it :)', Merged', 26383ad' 
id=1164145	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good.', *** ', has been marked as a duplicate of this bug. ***' 
id=1228050	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1240832	 'Roland, can we already get a placeholder URL for this page?', hi and welcome back joni! please create the placeholder for stefan.', Sure thing, here's the placeholder link: ", here's the google doc with the draft: ", What is 'What's new in Firefox for iOS 2.0 | Administration | Mozilla Support'? What is the Administration bit in the title?", I don\'t see "Administration" in the title. Do you still see it, Aaron?', Nope.' 
id=1186030	 'Fixed with ', .' 
id=1131282	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1111018	 'Note from IRC: 14:13:54 <@rnewman> st3fan: I\'m not opposed to Core Data, so long as it gives me all of the fine-grained internal interfaces I need to translate those reorder etc. operations into a transaction log that I can replay either remotely or as a layer on top of a mirror store. The key point I want to emphasize here: we need to be able to track semantic operations (e.g., "visited this URL at this time for this reason"), and process them independently of the upstream data mirror so that Sync can do its work. We also need some interface for exposing some meta-state about that mirror, while still allowing certain kinds of reads and writes to the local endpoint. A wrapper around a database won\'t _on its own_ give us what we need. That doesn\'t mean it can\'t be layered on top to make building UI code easier, but I\'m very skeptical about magic bullets.', Created ', ', Pull request', +1 on MagicalRecord if we go the Core Data route. Looks like a nice abstraction while still able to access the standard Core Data APIs needed.', merged' 
id=1194408	 "Works for me on master, I've got a variety of devices. Have you tried pulling to refresh to get the device listing? Maybe @rnewman knows how to check if your account has any clients available", Stefan: do you see devices in the Remote Tabs panel (the cloud icon) in the main app?', Yes (with some lag, ', )', I think this is the same as ', -- if clients fails to sync, not only will your list here be empty, but your device won't upload tabs.", Don't know if that changes anything but history seems to sync just fine.", After signing out and in on all devices extension works correctly (second build 33). Aside from this case, shouldn't there be always some message displayed?" 
id=1145386	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1206732	 'I am unable to replicate this with the latest master on a 5S or 6S. Aaron, can you confirm that it is not longer a problem.' 
id=1156076	 
id=1221118	 'Created ', ', Link to Github pull-request: ', First pass at moving the blur off the main thread, into the background, with some memory caching for easier invalidation. Also added in a slight fade in effect for first load of background favicons.', Comment on ', ', Link to Github pull-request: ', Slightly concerned that touching UIImages off the main thread could have some undesirable side effects, so we should be on the lookout for any regressions.', Want to wait for 2.0 for this? It's not critical.", Comment on ', ', Link to Github pull-request: ', This feels really snappy and I love the fade-in of the blur when it becomes available.', (In reply to Stephan Leroux :sleroux from ', ) ', Would we be able to get it into a TF build soon? 1.2 would be nice given the perf wins, but I'd feel a lot better if we could get some testing first.", I know we just did a TF yesterday but I can land this for the next one. If we don't have enough time to test it it's an easy patch to back out.", Merged 0bbdef0de6d4eed8a21b44e0dab333735118c812' 
id=1231536	 'Do you have an example URL test-case?', Example link (shared hosting, mass IP): ', This is actually not an SNI problem. Instead the ', server is misconfigured and it does not send the correct Let's Encrypt intermediate certificate. For that reason Mobile Safari also complains about this site. I'm going to mark this as INVALID, but I do think we could improve our error messages. Not filing a bug for that since that will be part of a bigger 'do the right thing with SSL validation and UI' bug that we do not yet have.", Can you confirm your iOS (Safari) version (iPhone, iPad)? Ipad Air iOS 9.2 marks the site as secure. Google Chrome iOS 9.2 (47.0.2526.70) marks site as secure.', moscowre.ru works fine for me (testing current 2.0 TestFlight build).' 
id=1167014	 'Created ', ', Pull req. Tail-end of this PR.', Comment on ', ', Pull req. wfm.', 110264a' 
id=1244125	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1255134	 'Created ', 1255134-1.png', Created ', 1255134-2.png', Need new strings?', Created ', ', Link to Github pull-request: ', Looked dormant, so went ahead and made this quick change.', Comment on ', ', Link to Github pull-request: ', Thanks for taking a look at these dormant bugs. Left a comment on the PR about fixing a UITest.', master ' 
id=1123509	 "Could we inspect the URLs ahead of time (that is, before turning NSStrings into NSURLs), and handle them independently if they're about:something? I ask this having not even looked at the code (but having implemented a very simple WebKit-based browser in the past in iOS).", *** This bug has been marked as a duplicate of ', ***' 
id=1197848	 'Created ', ', Use a separate Alamofire.Manager for search suggestions. Switched to using the ephemeral configuration, which definitely will be a different config to the WKWebView. It isn't clear if this is definitively the right thing to do: search engine settings, e.g. safe search would be a counter example." 
id=1135385	 'I tried adding dankogai/swift-json as a Carthage dependency in ', , but it failed since the swift-json repo doesn't tag versions. I think I might have also tried SwiftKeychainWrapper and had the same problem.", How about we fork these for now to one of our local repos where we can set a tag and ask the project owners to fix this.', (In reply to Stefan Arentz :st3fan from ', ) ', This is an expedient approach. Worth noting that our version of SwiftKeychainWrapper is ahead of upstream. I don't think I am an admin for github.com/mozilla, but I can work with somebody (rnewman? mfinkle? margaret?) to get this done.", Forked ', and ', .', We've gone in a different direction and aren't bothering with Carthage for these." 
id=1146850	 'Also useful for toolbar bookmarking UITests', Currently it is announcing bookmarking by saying or not saying "Selected" (i.e. the UIAccessibilityTraitSelected), so it announces either "Selected, Bookmark", or "Bookmark". An example of a similar element is in iBooks, again with bookmark. The accessibility label there alternates between "Add Bookmark" and "Remove Bookmark". In Photos.app, favorites uses the trait as we currently do, i.e. announces "Selected, Favorites" or "Favorites", so Apple is not consistent in how to handle this type of element.', Not for me, and not in build 6 (the "official" one. In that build, the bookmark button even got a label of "Share", which is total bogus. And I don\'t see a selected trait being set or removed.', I was testing with master, which probably explains the difference. v7 got tagged in the repository recently, do you have access to that build so that could you test with that?', Fixed in build 7.' 
id=1210810	 'I think this is the same issue as ', .', This issue is no longer reproducible. Tested on latest master.' 
id=1278669	 'Resolved with patch on meta.' 
id=1223538	 'Added fix to deletion fix branch: ', Replaced with AS.' 
id=1294741	 'Created ', ', Pull request', Created ', ', Pull request' 
id=1266331	 'Seen this before manifest in other applications, iOS bug.' 
id=1169447	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1235840	 'What will happen when the translated string will be just few characters longer?', Don't worry about wrapping. If it wraps then we will make sure the UI responds to that. Either by shrinking the text or giving the item two lines." 
id=1182085	 "We shouldn't be reloading the page whenever opening the app the the browser view controller appears. For example, if we're offline we want to be able to see the previous loaded page without it trying to reload it. As far as the delay, I think this is happening from when the app gets terminated in the background and needs a full relaunch.", Running the app and looking at the code, this behavior doesn't happen whenever we're coming back into the app while we're backgrounded. If the app is killed in the background and requires a cold start, a cached screenshot of the app is displayed, which make the app look unresponsive, and the web page reloads. Note that this is similar behavior to Chrome. The only difference is that instead of displaying a cached screenshot on cold boot, they show a 'empty' version of the browser view which then transitions into the greyed out version actual web view to indicate it's stale/still loading. I think to fix this, we might need to work on the perception of what the user sees from a cold boot. Thoughts?", Won't block 1.0 - clearing tracking flag", From a quality standpoint we should track this post 1.0', will be the solution for this bug. Closing as dupe. *** This bug has been marked as a duplicate of ', ***' 
id=1094297	 'Created ', share.png', Wes, be aware that the UI for this dialog changed. It used to be that single button at the bottom but now there should be two buttons that don't trigger a detail view but instead simply let you checkmark the destination. See the top right screenshot at ", Created ', share-send.png UI Mocks', Closing this for now because this is not part of the current design.' 
id=1258810	 'Created ', ', PR: ', This patch removes the need for the *Base32* dependency. We only use that library for converting between hexadecimal `String` and `NSData`. That is a lot of overhead. This patch implements simple and unoptimized hex encoding/decoding. We only use this on short values like hashes so I did not spend a lot of time on making sure this uses as little memory as possible or runs as fast as it can. The advantages of getting rid of a dependency, and this on in particular: * We forked this dependency, so we don't have to own it anymore * Our `.ipa` size shrinks a bit * Build and Link times go down * App startup time goes down * Simplified build because there is less to do :8ball:", Comment on ', ', PR: ', Code looks good. Yay for removing dependencies!', Comment on ', ', PR: ', LGTM. +1 for :sleroux's test location comment" 
id=1249068	 'I anticipate, "Why can I delete the Amazon with the \'A\' tile, but not the \'Amazon.com\' tile".', Created ', ', PR r=bnicholson r=sleroux open to suggestions on for a better fix, but this works.', for whoever gets to it first*', Comment on ', ', PR This PR could use some simplification, and I have a feeling there's an easier way to do what yo re trying to do. Let's go over this more tomorrow.", Comment on ', ', PR Deferring to Brian. Feel free to re-add me if you want another pair of eyes.', Comment on ', ', PR Much better!', v3.x 242e7d1 ' 
id=1108093	 
id=1193013	 "Looks like some math miscalculations. I'll put up a patch shortly.", Created ', ', ', a75e0fb' 
id=1183905	 "I'll grab this one as I was just messing around with the Sync Now button.", Created ', iOS Simulator Screen Shot Aug 25, 2015, 3.25.15 PM.png', Hey Robin, How do you want the 'Last synced: xxxx' label to look like? I've attached a screenshot with what we're showing right now. Also, this is the code we have for converting the timestamp to readable text: ", Created ', 1183905.png Right-aligned (16 from right to align with carets/switches). UIColor.grayColor(), NSFontAttributeName: UIFont.systemFontOfSize(12, weight: UIFontWeightRegular) )', See ', , ', for some context around the kinds of time strings we support now, and where we'd like to end up. We can file a follow-up just like that if we'd like to tweak. Note that for this bug we don't just care about when we last tried to sync; we probably also care about when it last succeeded. Success is relative: there's a difference between anything succeeding and everything succeeding. I'm not sure what the right choice is out of those three.", My preference would be we either do it correctly (have a way of displaying the correct error states) or not at all. I think saying we last synced at a time when it was only a partial sync is misleading the user into thinking it worked and saying it outright failed all together isn't true either. Ideally we would add a status below Sync Now that said an error occurred while syncing and provide a way for the user to tap on it to display what it had problems syncing. I'm not a designer but we could do something like a tap the error message and have it expand in line to display what went wrong. In any case I think we should go all the way on this since it's not that much more effort to convey the right error states assuming we have an easy way to return failed state flags from SyncManager/Profile.", (In reply to Stephan Leroux :sleroux from ', ) ', Which we do: there's a fairly rich error hierarchy, so if we bypass the obvious -> Success version of syncEverything, we get per-engine descriptions of what went wrong. That's not always actionable, mind you\u2026", Where did we land with this? Do we want to show the timestamp to show overall sync fail/success even if sync partially fails or partially succeeds or investigate? I feel like showing additional UI for different syncing states shouldn't be a 1.0.* thing - maybe a 1.1. We can do just the timestamp for now in 1.0.1 - I guess it's better than what we have currently?", Yup. Let's just show the time for now. If you wanna go crazy, you could show a failed/incomplete last sync with a little bit of a red hue, or something like that. If the user taps it again, waits, and it's still red, it means things are repeatedly failing.", Created ', ', ', First pass at implementing a basic timestamp. I'll open a v1.0 patch when this is good.", Comment on ', ', ', Looks great!', Merged', Took a bit to find this bug (wrong reference in commit message) ', Stephan, can you explain how the "Last synced" string is used? Because we already have a "Last synced: %@", and there\'s a good reason for not concatenating strings (it makes grammar structure assumptions).', Thanks for finding this - I didn\'t know we already had a version of Last synced. In this case, it\'s used in the exact same way as it is for the synced tabs panel where it will display: "Last synced: just now" or "Last synced: yesterday". I\'ll file a follow up bug and get this resolved today.', Follow up bug: ', Created ', IMG_4066.png This doesn't work for Polish - message doesn't fit.", Thanks for the find - not sure what our options are here. I know we've used text shrinking in similar cases but the text already seems too small. Any thoughts :tecgirl?", New line maybe?', Created ', Polish example -\'Last\' Could we drop "Last"? "Synced" still relays the message.', Yup we can do that. It would require some adjustments from the l10n team but we're about 3 weeks out from release so I think we're good. :stef, would this work for Polish and other languages? Also, I remember seeing a website from :flod that let us see all these translations on a web page somewhere. Not sure if that was for desktop or not. Is there somewhere we can see all of the localized versions of a string?", (In reply to Stephan Leroux :sleroux from ', ) ', It's ", but it doesn't cover Firefox for iOS (might need to start thinking about it).", (In reply to Robin Andersen :tecgirl from ', ) ', It wouldn\'t work for pl at all. Keep in mind that "Sync now" in pl is much loneger ("Synchronizuj"), dates tend to be longer too and dropping "last" alone would force rewording of whole sentence to some harder to understand probably longer form.', Created ', Polish 'Last Synced' on 4s, 2 lines I played around with this for a bit, and I can get on board with two lines, but the visual balance would need to work out. If we could increase the cell but keep the strings vertically aligned between the dividing line, I'd be happy.", Was a follow-up bug ever filed for this issue?', Created ', "Last synced" translations Attaching a screenshot since this is still a local beta: all translations of "Last synced". As you can see Polish is far from being the longest, record belongs to Scottish Gaelic with "An sioncronachadh mu dheireadh: %@"', I just filed ', as a follow up bug to resolve this issue. Thanks for catching this through the cracks!' 
id=1238103	 "I've updated my test branch with some extensive logging to help pin down the issue. I've scoped the logging for logins only to display their hostnames and exclude anything else. :tecgirl when you get a chance could you try running this patch and sending over the logs? Branch: ", New commit: ', Created ', output logs from 6s sim', Looks like the logic for grabbing the baseDomain from the hostname URL is failing because 2 of the logins don't include the scheme: phonebook.mozilla.org pto.mozilla.org :rnewman, is this normal for Logins to have their hostnames not include a scheme? These logins were pulled down from the server without modification.", I think this is how we save Basic Auth logins on iOS, actually! I'm looking on my own desktop profile, and I have two entries for pto.mo -- one saved from desktop last year, and one saved from iOS this year. I wondered why we weren't autofilling those.", For Basic Auth, challenge.protectionSpace.host is a bare hostname, no protocol. When we come to save the login, login.hostname is bare. So this is definitely on us!', Proposed solution: we should be saving and querying the protocol (which is the field `protocol` on an NSURLProtectionSpace) as part of the URL for Basic Auth challenges, rather than just using the challenge host directly. If we want to be super thorough, we can migrate existing records, but we'd have to be careful to avoid collisions with existing records.", Proposing tracking because (a) we won't match synced basic auth logins from desktop, (b) we're polluting our logins DB, (c) it b0rks this feature.", I've been looking into this more closer and found that there is a a nomenclature problem between what we consider is a `hostname` and what NSURLProtectionSpace considers a 'host'. Theres a few things happening: 1. When encountering a regular login (non-Basic Auth), we create a credential using the url directly. For example, if I log into news.ycombinator.com, we invoke createWithHostname 1 and pass ", as the 'hostname'. Technically its not actually the host but the host + protocol. 2. When encountering a basic auth login, we create a credential using only the bare 'host' where 'host' is the proper definition of a URL host 2 . In the case of ", , the protocol is thrown away and we only store the host part. NOTE: Both these cases generate hostnames that are now synced with hostnames being valid URLS (', ) and invalid, host-only strings (pto.mozilla.org). 3. A Login struct represents its hostname data from an instance of NSURLProtectionSpace 3 . When we construct logins from the DB using the factory in SQLiteLogins 4 , we're assigning the full hostname stored in the DB as the host inside NSURLProtectionSpace. This logically doesn't make sense considering that a NSURLProtectionSpace's host property is supposed to only store the host and not the scheme/protocol + host. To reconcile the differences between host/hostnames, I propose: 1. Modify the factory to properly set the host and protocol params of NSURLProtectionSpace by converting the hostname into a URL and extracting the scheme/host from it. 2. Update the hostname getter 3 to not just return the protectionSpace.host but prefix it with protectionSpace.protocol + :// 3. Update the hostname constructor 1 to convert the hostname into a URL and assign the scheme/host to the NSURLProtectionSpace's protocol/host properties. This works for newly created logins but I'm not sure of a good plan yet to migrate or handle already created logins with bare hostnames. As a side note, this same discrepancy is the cause of basic auth prompts not being auto-filled. The NSURLProtectionSpace we provide the getLoginsForProtectionSpace method contains a proper host and protocol but the arguments we pass to the DB only consider the host 5 . 1 ", 2 ', 3 ', 4 ', 5 ', Created ', ', Link to Github pull-request: ', I've attached a WIP patch implementing the proposed solution w/o consideration for migration.", Comment on ', ', Link to Github pull-request: ', Comments left on the PR. Note in particular that we also should include non-standard ports in the URL. Re migration: we have a couple of options. We can "soft-migrate": * Don\'t sync rows that don\'t start with a protocol. * When we try to match one during an auth challenge, match against the DB without the protocol. * Example: we\'re on ', . Match "example.org" as well as "', " (and perhaps "', "). * If the challenge succeeds, replace the hostname in the DB with the correct expanded hostname, and mark the record as needing to be synced. Tada! We migrated one row. * Take extreme care: if the expanded URL exists in the DB already, simply delete this row, optionally updating the other row\'s password to match the one that worked. We can "hard-migrate": * Guess the protocol (https?), perhaps by checking history. * Assume no custom port. * Rewrite every row directly, marking them all as needing to be synced.', I've updated the PR to include the review nits and also started down the soft-migrate path. Couple of things: 1. Looks like whenever we build up the login using the factory, if no scheme is provided when building a NSURLProtectionSpace then it defaults to http. This actually works nicely because it forces Login.hostname to be a valid URL all the time. This resolves the bug where not all logins were displaying the LoginListViewController. 2. The soft-migrate works pretty well for a single entry that doesn't match. I've updated the query to search for scheme://host and just host 1 . When one entry is returned, this is great because we can just update the hostname and use that credentials. Ez-Pz. The complex part is when we find duplicate logins. You mentioned that we should simply delete the partial hostname entry if a full entry is available but how do we know that the password associated with that one is the 'correct' one? There is a chance that the locally generated one is newer/correct than the full url one, no? 1 ", (In reply to Stephan Leroux :sleroux from ', ) ', Yes, exactly. I wrote: -- Take extreme care: if the expanded URL exists in the DB already, simply delete this row, optionally updating the other row's password to match the one that worked. -- The end result should be: * The desktop row is preserved. It probably has the oldest GUID, and it's safest to keep the row that other clients are actively using. * The one that used to have the malformed hostname is marked as deleted for Sync. * The last password that successfully logged in is kept. The usual update login call path will probably take care of the last\u2026 and in the soft migration case, it's only use of a login that will cause migration, so yo re at the coal face at the right time. There's a pretty good chance that both rows will have the same password, so in that case you can just drop the malformed one altogether.", Comment on ', ', Link to Github pull-request: ', I've gone ahead and finished the soft-migration path by: 1. Bubbling up information allow me to know which logins contain malformed URLS by adding the hasMalformedHostname flag. Unfortunately since malformed hostnames look default to http://, there is no way of telling the difference between a valid http:// scheme and a malformed one. 2. For duplicate entries, find the first entry that matches the protectionSpace and is not malformed. For malformed entries, trim them from the DB.", Comment on ', ', Link to Github pull-request: ', Comments left. A few tweaks and at least one bug. Needs a basic test!', Comment on ', ', Link to Github pull-request: ', Addressed PR comments, fixed the bug, and added unit tests for the various scenarios.', One main concern \u2014 out-of-range.', master 4e77934bf9081dbcc8675880b35f3eb3f23c2040' 
id=1144510	 'This also solved the weirdness of using swipe gestures around readerized content.', Fixed as part of ' 
id=1272235	 'Created ', ', Pull request', Comment on ', ', Pull request Looking good. Lots of comments in the PR!', Yo ll need to set the locale to china. Flagging that we should probably have a Customize Menu settings page, because this isn't going to be the last thing that not everyone wants.", Added strings in ', How's this going otherwise?", (In reply to James Hugman :jhugman @jhugman from ', ) ', Pull request has updated', Comment on ', ', Pull request Excellent work! Well done.', Needs uplift?', v5.x c409923' 
id=1153300	 'This can be changed by getting an add-on, I have an add on of New Tab Homepage ', (In reply to Connor Smith from ', ) ', This is filed against Firefox for iOS.', Created ', ', PR ', Hey darrin, this implements add (and selecting) a new tab when the last one is closed. Some cleanup to do, but I wanted your feedback before I dug into it.', Comment on ', ', PR ', Seems like a good start, I'm seeing some weird behaviour though... i.e. I have 3 tabs open, closing the 2nd/3rd one opens up one of the other tabs as soon as it is deleted... etc. Might also need a slight delay between deleting the last tab and the new one transitioning in?", Comment on ', ', PR ', I updated this to show the animation's sequentially. i.e. we'll add/remove the tab, and the select it when that animation is done. Also added that to the newTab button's animation (do you want that darrin?)", Comment on ', ', PR ', Looks good, though I'm skeptical about the lines being removed in hideHomePanelController. Waiting for comments about those (either from you or the people pinged there) before switching to r+.", Comment on ', ', PR ', r=me with merge deletions reverted.' 
id=1165103	 'Created ', ', Link to Github pull-request: ', Built on top of ', , so you can ignore the first two commits.', Comment on ', ', Link to Github pull-request: ', Looks good. Just know that even though AuroraAppDelegate is a subclass and not used in a normal build. it is still compiled and included and its static initializers are still being called. I don't see anything in there that could cause troubles, but keep it in mind that this happens." 
id=1204927	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1305437	 'Created ', ', Link to Github pull-request: ', Looks good! Building tests with the fennec scheme will hopefully prevent this from happening again.', master ' 
id=1134010	 'Created ', ', Patch', Comment on ', ', Patch LGTM' 
id=1187360	 'Created ', Simulator screenshot I changed locally one my strings, adding both double and single quotes. <source>Save pages to your Reading List by tapping the book plus icon in the Reader View controls.</source> <target>Salva pagine in "Elenco lettura" toccando l\u2019icona con il libro e il simbolo \'+\' nei controlli della Modalit\xe0 lettura.</target> If I run the relevant part of scripts/import-locales.sh rm -rf localized-strings && mkdir localized-strings scripts/xliff-to-strings.py firefox-ios-l10n localized-strings I get in Client/it.proj/Localizable.strings "Save pages to your Reading List by tapping the book plus icon in the Reader View controls." = "Salva pagine in \\"Elenco lettura\\" toccando l\u2019icona con il libro e il simbolo \'+\' nei controlli della Modalit\xe0 lettura."; That\'s exactly the same result I get manually importing the file in Xcode, and simulator works displaying the escaped double quotes. What I\'m missing is why we are currently escaping single quotes, but I can\'t see anything break.', Created ', ', Pull request on Github', I landed this, but Stefan, please take a look when yo re back. See discussion on the PR.", I think I did not escape double quotes because older Xcode versions did not deal well with those. Even if escaped. There was a discussion on the Apple Dev Forums about this where one of the dev tech support folks highly recommended to use curly quotes and never ever use double quotes. Maybe they fixed it. Not sure. I thought it would be better to fail and tell people to use fancy quotes. Which look better anway.', Concur that we should use curly quotes whenever suitable for the locale. flod, can we communicate that preference to our localizers?', The error message about double quotes is still in the dashboard, I should probably remove it at this point. For single straight quotes: curly quotes (single or double) are a huge pain to type, I doubt this will have much success. Most keyboard layouts don't include them, so you need to remap your keyboard or use awkward combinations to get them. For example, for OS X and Italian it's SHIFT+OPTION+3, but there's no trace of it on the actual key, you just need to know it exists. FYI, English has a few strings with straight quotes, and I don't think anything broke. And we're at a point where we can't change them without asking people to relocalize these strings, since we're using the actual string as ID. * You don't have any other devices connected to this Firefox Account available to sync. * You don't have any tabs open in Firefox on your other devices. * You don't have any other devices connected to this Firefox Account available to sync. * Could not add page to Reading List. Maybe it's already there?" 
id=1120443	 'Created ', ', PUll Request' 
id=1145853	 
id=1277233	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1157845	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1168400	 "Robin, what's your preference for behavior here? We can get the copy once we decide.", We currently do not have the support articles for iOS (', ) to support a/the walk-through, I assume we need to file tickets for that (is that how SUMO is handled?). So for now we can have expand on the helper text.', For now I chose the easy way and removed the second text. So right now this screen will just display: "You don\'t have any other devices connected to this Firefox Account available to sync." Which is the same text we show in the Remote Tabs panel in case of the same situation. ' 
id=1179493	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1257392	 'This is actually the expected behavior; see ', . If you want to copy the URL, you can long-press the URL bar and choose Copy Address.', OK' 
id=1125960	 'Created ', ', Pull Request', As a bonus, the fix also prevents the text from zooming on orientation changes.', Reopening this bug because it seems the fix is not complete. I think we need a html { -webkit-text-size-adjust: none; } (Counterpart to -moz-text-size-adjust: none; which is already there) And a user-scalable=no in the viewport to prevent manual adjustment of the zoom level.', Resolving because I pushed a fix for the two things mentioned in ', last night.' 
id=1136900	 'Created ', ', Link to Github pull-request: ', bnicholson: the code here is pretty straight forward -- I'm working on re-implementing the existing work as we speak. darrin: you might steal this review? It's pretty clear. Yo ll want to provide fresh iconography for the Tab Tray at some point.", Comment on ', ', Link to Github pull-request: ', f+ from darrin on GH.' 
id=1187688	 'Created ', ', Pull Request Notify `didEnterText` after applying completion. This will update the cached query in `SearchLoader.swift` after applying completion.', Thanks for catching this!', @brian Updated the pull request.' 
id=1199860	 'Created ', ', Pull req.', b44dcec' 
id=1147493	 'This plan sound ok?', From a data storage perspective, yeah, that's fine. From a top sites perspective, this might need some additional thought to flesh out the expected user experience. Relevant: ", and ', . I think there might be some more value in first addressing redirects, mobile versions, etc. (', ) than in straight-up showing only one result per domain. Accurately determining what\'s a "site" is complicated, so we should tread kinda carefully here. Every Facebook page is in the same domain, every Blogger blog is in the same domain\u2026 but every Tumblr has its own subdomain. Some (all?) Google apps get a subdomain.', We did this in ', . *** This bug has been marked as a duplicate of ', ***' 
id=1212037	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", Created ', ', Pull request Includes build-tools changes found at ', Note: This is adding the ability to do automated screenshots. There are problems with the screenshot tests, but those will be resolved in ', How is this PR different from ', ? It looks like there is a lot of overlap.', Yeah, that's because it's a patch based off ", and so in a diff with master it looks the same. Maybe I should have raised the PR against the parent branch and not master so you could see the differences. Let me kill that PR and raise a new one.', Created ', ', Pull request', Includes PR against build tools: ', Comment on ', ', Pull request Good stuff. Lets land it and start using it.' 
id=1224826	 "I've asked in the report above if an FxA account was enabled. Not sure if bug ", is related (or if the reporter was using any system a11y features).', Fixed via ' 
id=1279787	 'Created ', Evidence that cross origin DOM data can be stolen If my PoC hosted on ', correctly works you can see same alert window that shows the DOM contents of Mozilla Hacks.', Brian: please take a look. In addition to the numeric 127.0.0.1 address alias (of which there are several equivalents) reader mode itself is acting dangerously by processing a javascript: url! Please go through any similar feature that takes parameters and make sure any URL parameters are restricted to http: and https: only. If they take any parameters that are echoed back in content at all the data must be sanitized. All non-static pages should have a <meta content-security-policy> in it (which should be supported on iOS 9.3) nominating for fxios tracking: this needs to be fixed.', Definitely should make sure these are all covered. ', Thanks, please consider IPv6 addresses as well.', Yikes, I wasn\'t aware that IP addresses could be expressed in so many different ways. With the list above, I see that it\'s also possible to create different combinations of the addresses listed there (e.g., "0x7f.1") or add zero padding to the different components (e.g., "127.0.0.0001"), so doing raw string comparisons is futile. That means the blacklist-based fix in ', is useless unless we're able cover all possible combinations, which will require breaking the IP down into components and normalizing them. Still worth doing, I think, but probably not something we'll have for 5.0. I'll focus on the critical issue of the reader mode interstitial loading arbitrary javascript: URLs in this bug, then file a separate follow-up to thoroughly blacklist all of the localhost equivalents.", Created ', ', Link to Github pull-request: ', Filed ', to fix the local IP matching rules.', Comment on ', ', Link to Github pull-request: ', Looks good, but is that the full fix? or do we also need ', to cover this?', This should fix this particular exploit. ', is useful for preventing similar bugs if we're doing unsafe things anywhere else.", master: ', v5.x: daf1152' 
id=1183080	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1170682	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Great! <3 Tests!', Reviewed and merged.' 
id=1128621	 'I tackled this this morning as part of DB evolution.' 
id=1191490	 'Created ', ', PR: ' 
id=1141850	 'First gist: ', Here's the raw work stream. Careful, it's big. It works, and it has tests. ", I'm flattening this into a more manageable (hah!) set of commits in a separate branch; that's the PR I'll submit for review.", My existing to-do list: * Make sure we set a parentName when inserting new bookmarks. This isn't ordinarily an issue, because we'll override the stored parentName when it's a special folder. * Multi-part upload timestamps are utterly wrong: every uploaded record gets the timestamp of the last part. This is non-trivial. * We batch uploads in chunks of 50. Often this is too small, and sometimes it's too large. We should use size-based upload. * Outgoing invalid records -- that is, serialization failures into BookmarkBasePayload -- don't seem to abort the sync. Quietly dropping those records on the floor is wrong. * Don't try a merge if the mirrorer aborts. * Test multi-depth folder deletion. * Test moving between roots. * Implement true three-way merge for values, and see if there's anything more we can do for folders. * In a value-based reconcile lookup, do we/should we limit the search to New local items? * My logs tell me that we sometimes prefetch duplicates in the same request (A, A, B, B). Why? * Make sure that prefetching never does redundant work. * Make sure we prefetch as much as we might need. * Check code for TODOs. * Make sure we have all the indices we need.", Created ', ', Pull req. Believe it or not, this is the flattened one.', (In reply to Richard Newman :rnewman from ', ) ', Consequence: should be none of note, but it makes me uneasy, so we should fix it. ', Consequence: uploading a very large record, or a certain combination of large records, will cause the upload to fail and your bookmarks to never sync. That's not good. ", Consequence: potential missing records on the server, propagating inconsistency. Not good. Most of the others are improvements or perf. These I'd want to fix before shipping.", (In reply to Richard Newman :rnewman from ', ) ', One more: * Handling detected wipes and storage format changes in BookmarksDownloader.', Done (but not tested; I'm on a plane) in Part 7. We accrue timestamps directly into the local completion op, and can replay them into the mirror once the uploads are done.", Performance: download + merge + upload on ~1600 bookmarks takes 9 seconds on my 6S. Download alone takes 5 seconds. In this case about 300msec went on upload. I'm happy with that. I expect a fair amount of the time goes to logging, which we can ramp down over time.", Created ', Logs.zip I'm sorry, but this doesn't seem to work for me. First I just deployed this version overriding my existing dev version that had no account attached at that time. added my account and waited for sync (which took a really tiny amount of time). I did not see either my dekstop bookmarks or see my mobile bookmarks on desktop. I also did not see my history synced over. I then deleted my app and tried from a fresh install. This is the log I'm attaching here. I added 3 sites to my bookmarks (bbc.co.uk, slashdot.org & theguardian.co.uk), then connected my FxA. Again, after a super quick sync time, I see my synced tabs, but no desktop history or bookmarks synced over.", Comment on ', ', Pull req. As a reviewer I tend to review such that I can address issues that may arise. In this case, I don't think that's possible -- it's rnewman in the next two months, and after that nobody.", (In reply to Emily Toop (:fluffyemily) from ', ) ', It synced (in 600msec!), but your bookmarks weren't consistent. 13:39:19.141 BookmarksDownloader.swift:93 go(_:greenLight:) > Downloading up to 100 records. 13:39:19.142 Downloader.swift:127 go(_:limit:) > Modified: 1455796035270; last 0. 13:39:19.143 Downloader.swift:152 downloadNextBatchWithLimit(_:infoModified:) > Fetching newer=0, offset=nil. 13:39:19.145 StorageClient.swift:699 getSince(_:sort:limit:offset:) > Issuing GET with newer = 0. 13:39:19.497 StorageClient.swift:330 failFromResponse > Status code: 200. 13:39:19.670 Downloader.swift:170 handleSuccess > Handling success. 13:39:19.673 Downloader.swift:204 handleSuccess > Got success response with Optional(83) records. 13:39:19.674 BookmarksDownloader.swift:102 go(_:greenLight:) > Done with batched mirroring. 13:39:19.701 BookmarksDownloader.swift:83 applyRecordsFromBatcher() > Applying 83 downloaded bookmarks. 13:39:19.740 SQLiteBookmarksSyncing.swift:469 applyRecords(_:withMaxVars:) > 9 folders and 15 deleted maybe-folders to drop from buffer structure table. 13:39:19.740 SQLiteBookmarksSyncing.swift:344 deleteStructureForGUIDs(_:fromTable:connection:withMaxVars:) > Deleting 24 parents from bookmarksBufferStructure. 13:39:19.741 SQLiteBookmarksSyncing.swift:477 applyRecords(_:withMaxVars:) > Inserting 62 children. 13:39:19.742 SQLiteBookmarksSyncing.swift:372 insertStructureIntoTable(_:connection:children:maxVars:) > Inserting 62 records (out of 62). 13:39:19.753 Downloader.swift:187 handleSuccess > Advancing baseTimestamp to 1455796035270 - 1 13:39:19.755 Downloader.swift:199 handleSuccess > Advancing lastModified to Optional(1455796035270) ?? 1455796035270. 13:39:19.757 BrowserDB.swift:287 checkpoint() > Checkpointing a BrowserDB. 13:39:19.757 SwiftData.swift:531 checkpoint > Running WAL checkpoint on /private/var/mobile/Containers/Shared/AppGroup/AFDA9BA5-C0A9-4EFA-8A3E-DE82F9B7FBEA/profile.profile/browser.db on thread <NSThread: 0x14865e5a0>{number = 10, name = (null)}. 13:39:19.758 SwiftData.swift:533 checkpoint > WAL checkpoint done on /private/var/mobile/Containers/Shared/AppGroup/AFDA9BA5-C0A9-4EFA-8A3E-DE82F9B7FBEA/profile.profile/browser.db. 13:39:19.781 ThreeWayTreeMerger.swift:994 produceMergedTree() > Remote bookmarks not fully rooted when overlayed on mirror. Partial read or write in buffer? 13:39:19.782 BookmarksSynchronizer.swift:124 synchronizeBookmarksToStorage(_:usingBuffer:withServer:info:greenLight:) > Bookmark sync took 644118\xb5s. But fallback mode behaves correctly: <fluffyemily> rnewman: yo ll be happy to know that once that crasher is removed, my bookmarks behave as expected (in fallback readonly mode)", 09b923a', Comment on ', ', Pull req. Only reviewed (or more accurately, skimmed) 1/3rd of the PR, but finally tried syncing my account and it works flawlessly. Excellent job!' 
id=1151725	 
id=1202810	 'Adding :rnewman because of possible FxiOS link (although he probably still watches the "Firefox:Sync" bugzilla category anyway)', Ryan: yes, I still follow Sync components, but not this one :) I don't think I'd point the finger at iOS here yet if this is really a deletion: it definitely doesn't support wipe, and a clean device won't have any reason to merge and upload deleted records. My speculation is the Nightly update (we occasionally see data loss due to shutdown of upgrade bugs) or a handshake bug between iOS and desktop. Dane: is there a signons.* in your profile directory? Is it mostly empty? Are there any .baks? Regardless, I recommend not trying to use Sync as a backup service. Even if the storage is mostly durable, it's not designed for recoverability, has no archiving or versioning, and if the data is gone from the server and no client has a copy, it's really gone.", Hi, Richard There is no signons.* directory or file in my profile directory. The closest to that name are signedInUserOAuthTokens.json and signedInUser.json. There are no *.baks anywhere, either. Given that data loss is a terrible thing, will there ever be a built-in option to export passwords? As it stands, passwords are more or less held captive by Firefox without any native way of saving them in the off chance that an update happens to whipe critical/sensitive passwords. If that's not ever going to be an option, will versioning in Sync, or a week's worth of syncs ever be available to revert data in case of loss?", (In reply to Dane MacMillan :danemacmillan from ', ) ', Sorry, logins.json. I was replying from my phone and didn't have a profile dir to refer to. ", I'm afraid I have no idea. They're just stored in a flat file, so that's easy enough. ", I very much doubt it. It's more likely that someone will build a new online password service.", There is a logins.json file, but unfortunately it's mostly empty, except for the handful of new credentials I have saved since yesterday's data loss.", If yo re on a Mac, you can try using Time Machine to recover an earlier version of that file. Same-disk Time Machine has saved my ass multiple times.", After a couple days of saving passwords, I synced with Firefox on iOS again and shortly afterwards realized that all my passwords were deleted again. I'm not certain there's a direct link, but on a purely anecdotal assumption I'd say there is.", And again. I've signed out on Firefox mobile for iOS. This will likely not happen anymore.", Dane: did you ever do Settings > Clear Private Data on your iOS device?', (In reply to Richard Newman :rnewman from ', ) ', I have, though I can\'t be certain of the timeline for cause/affect. At this point I have not made any grand attempts at restoring all the passwords I can remember, so I will test this out. One thing I *have* gotten suspicious about is this, though I could be way off, but it feels this way: For one, I have never had Firefox on iOS auto-fill any passwords or even offer that option when I know the password has been saved on desktop, so when I retype my credentials on iOS, I\'m asked whether I want to save them, and I choose "Yes." Anecdotally, anyway, it feels like saving them on iOS causes a sync, which then wipes every other password that may have been saved by the desktop version. I\'ll give this a test, too.', Do you think we can move this bug to the "Firefox for iOS" product category? It really feels like it should be there, and it would get more exposure. Until I used Firefox for iOS, my passwords were fine--for years. The day I installed the iOS version, suddenly they have been wiped from existence.', Okay, I realized I could do this myself.', I have the steps to reproduce this every single time: 1) Ensure that a desktop and mobile version of Firefox are both synced to the same account. 2) Save new password on desktop. Run sync. 3) Run sync on iOS app. Observe autofilled password on the site with newly-saved credentials. 4) On desktop, open "Saved Logins" and hit sync. Observe that passwords are still intact. 5) With desktop "Saved Logins" still open, go to iOS app -> Settings -> and click "Clear Private Data." Run sync on iOS. Run sync on desktop. 6) Observe that ALL PASSWORDS HAVE JUST DISAPPEARED on desktop and mobile. ---------- I have run through these steps multiple times with the same outcome: passwords are completely wiped. This is critical. This is not what "Clear Private Data" should do AT ALL.', Okay, the steps are even simpler: - Just ensure two devices are synced to the same account with some saved passwords. - Run "Clear Private Data" on iOS device. Hit "Sync now" on iOS - Open desktop device, hit sync, watch passwords disappear.', What yo re seeing is expected behavior. (It might still be surprising.) Clear Private Data clears all of your private data, including saved passwords. If yo re syncing passwords, and you delete them all, the deletions will propagate to other devices. The alternative is that we clear your data locally, and then Sync immediately downloads it again from the server. You either want your data deleted or you don't. What do you think Clear Private Data should do? ", (Firefox 1.1) provides UI to choose what to clear, so you can uncheck passwords if you don't want to clear them. ", will involve explaining your options here: to first sign out of your account and then clear data locally, or to clear your data everywhere (and perhaps other options, too).', I didn\'t expect it to empty out passwords. I didn\'t expect such a powerful action to be available without detailing what the action entails. I\'ve been using Firefox since it was released, so my expectation has been that I will be prompted to decide what to remove, and any lack of granular control should mean it\'s not going to overreach (until options are put in place to control this). There is just nothing in the UI that would indicate that, and I\'ve come to expect that such a powerful action wouldn\'t be so freely accessible without explicit forewarning and more detail. Sure, in retrospect, it makes sense that Clear Private Data would do that, but I\'ve also come to expect that private data is browsing history, active logins, and the cache. For as long as I can remember Firefox has provided that control over what data to clear when closing the desktop browser, for example. When asked "Clear Everything -> Are you sure you want to clear all of your data? This will also close all open tabs," there should also be some elaboration and more detail. Ultimately, I don\'t think a "Clear Private Data" option should be have been made available until that granular control was also made available, just like in the desktop (and I think Android) version. I\'m looking forward to version 1.1.0, then, if that control was added. It\'s very common to clear the cache and history, but not passwords. In the end my expectations were incorrect. Though, I\'m also a more technical user, so if I got trumped up by this, it\'s almost guaranteed less technical users will, too, until granular controls return. Firefox is new to iOS, so I look at it as the risk involved with testing new software.', Thanks for clarifying, Dane. We weren't able to implement fine-grained clearing of data on iOS 8 due to WebKit limitations, otherwise it would have been done sooner. Duping to ", . *** This bug has been marked as a duplicate of ', ***', Minor quality of life improvement I filed, we aught to at least prompt before hitting the nuclear option (', )' 
id=1270973	 "My hunch is that I don't think my patch caused it because I only modified the TwoLineTableViewCell file and the SiteTableViewController file, both of which do not affect the ReaderPanel. ReaderPanel uses the ReadingListTableViewCell as the cell class which inherits from SWTableViewCell.", Created ', ', PR', Comment on ', ', PR Looks good :-)' 
id=1215930	 '"An SSL error has occurred and a secure connection to the server cannot be made." Another one: "The network connection was lost."', (In reply to Stefan Plewako :stef from ', ) ', Was this on iOS 9?', (In reply to Aaron Train :aaronmt from ', ) ', I believe so, second one for sure and just found another one (thanks to ', ): \'The certificate for this server is invalid. You might be connecting to a server that is pretending to be "expired.badssl.com" which could put your confidential information at risk\'.', This should be translated /System/Library/Frameworks/CFNetwork.framework/Resources//pl.lproj/Localizable.strings \t<key>Err-1200</key> \t<string>Wyst\u0105pi\u0142 b\u0142\u0105d SSL i nie mo\u017cna ustanowi\u0107 bezpiecznego po\u0142\u0105czenia z\xa0serwerem.</string> /System/Library/Frameworks/CFNetwork.framework/Resources//pt.lproj/Localizable.strings This is the same as ', *** This bug has been marked as a duplicate of ', ***' 
id=1163800	 'Created ', ', Link to Github pull-request: ', Writing a test for this is on my to-do list once the search l10n code is more finalized.', Comment on ', ', Link to Github pull-request: ', Bombs away with thought to my comment and a test.' 
id=1240057	 "Likely caused by RDS where we decided to do this intentionally to avoid desktop -> mobile redirections. I'll verify this and handle these cases separately.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM. Works.' 
id=1252410	 'If all the above gets confirmed, we have a window to expose these changes today or tomorrow. We will also need to know if there is a character limit for the what\'s new section on the App Store and if it includes the title or not ("What\'s New in Version x.x").', Making sure Mike sees this bug on time', Adding Maria and Stefan who maybe are in charge of the appstore copy?', Quick update, current what's new copy for v2.1 is: --- \u2022 Support for third-party keyboards has been enabled (note that some keyboards have trouble with the Firefox location bar) \u2022 Fix for a bug where it was not always possible to edit passwords in the login manager \u2022 Fix for a possible crash on page load --- The only thing we need to know from now is whether translations for what's new section will be pushed to the App Store if we go down the path of localizing it. And if there is a char limit. Thanks!", Thanks for the update, Theo! Yes, this needs to be localized for the stores where we have the rest of the description translated in the respective language. Mike can provide additional details.', The what's New section is now being translated. You can check the status of the translation on ", You can copy/paste the text from one of the views: ', ', You can also get all that data from a public JSON API: ', I am keeping this bug open until we see the translations online.', 13 locales have already translated the What's New section (", ).', For the record, the 16 translations we provided for 2.1 are now obsolete since we shipped 3.0 last week. I am marking this bug as WONTFIX.' 
id=1110302	 'Fixed with ' 
id=1131162	 'Fixed this by going to Xcode > Preferences > Accounts > Mozilla Corporation > View Details, then clicking the refresh button a few times to have all of the provisioning profiles loaded.', I deleted three invalid provisioning profiles that were in the Developer Center Provisioning Profile list ("Fennec", "Fennec ShareTo", "Fennec SendTo"). I assume we can also delete all of the org.allizom.* profiles too since we changed the app ID, right?', Nooooooooo. Do not delete those. Those are actually in use for building the app.', I think we determined that this was actually fine over IRC.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', I'm not entirely sure actually. The Fennec Nightly builds now fail with a different error on my device. Which seems to indicate some signing or provisioning issue. Needs more investigation but I don't really have time for it right now." 
id=1194374	 'Apparently already filed! *** This bug has been marked as a duplicate of ', ***' 
id=1145317	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1274290	 'Created ', ', ', Comment on ', ', ', Going to mark this r- for the regular expression check against URLs. We should probably find a different approach.', Created ', ', Pull request', Comment on ', ', Pull request Approach looks good to me! Left a couple of comments in the PR for cleanup. Adding sleroux as a secondary reviewer since he might have other thoughts from the original PR here.', Comment on ', ', Pull request Looks good!', Comment on ', ', Pull request This approach looks safer than the previous regex we were using. Looks good!', is there anything that is expected from us sheriffs here ? like commiting to mozilla-inbound etc ?', (In reply to Carsten Book :Tomcat from ', ) ', Nope. I did not know about the new usage of that keyword there.', v5.x 3d0499f' 
id=1155335	 'Created ', ', PR: ', This patch hooks up the new ReadingList framework to the application and extension UI. I think overal this is pretty good but there ar a few `TODO` items left in the code for which I need to chat with UX first. There is also some code duplication that can probably be improved. I want to do those things as followups or simply a next iteration of this code. Right now I just want to get this into the hands of our testers so that we can get feedback on the stability of the ReadingList framework.' 
id=1166812	 'Karen, this is the bug to watch to know when history Sync will become available.', Four parts: 1. pull-to-refresh on the history panel 2. a trivial counter somewhere that counts visits and triggers a sync 3. possibly a timer 4. if our account is in a good state, a quick sync on exit. Things to pay attention to in some of these cases: 1. Sync only history. 2. Sync only if we've synced before, or only if we've synced recently, to minimize the risk of doing a big sync. 3. Sync only on wifi? 4. Remember to check for history sync enablement via meta/global!", Basics are done. Punting the other things out of this meta.' 
id=1220613	 '2015-11-02 10:12:22.970 Debug BrowserViewController.swift:114 didReceiveMemoryWarning() > BVC received memory warning On my iPhone 6, I could only open about ~12 tabs off of bbc.com before the browser was killed', On each new tab after things get pretty sluggish I see 2015-11-02 10:19:57.335 Error Browser.swift:157 restore > creating webview with no lastRequest and no session data: nil', I have a massive memory profile I can upload. Not sure if there's anything out of the ordinary, lots of callers in libraries libAVFAudio and ImageIO.", Embedded videos or audio? Different behavior with Xcode connected? Need to try with a production build on a disconnected phone. Let's get STR and explore.", This is reproducible on a disconnected build. Visit ', , long-tap on any article and open in background (~x10) Here's the article I opened in x10 tabs: ", With each tab opened, the time it takes to reveal the context menu on the news-link grew. No playing video or audio on the link, lots of images and text though (in that particular article). On a simpler site ', , open (~10-15) of Hearts on Twitter Scrolling the main Blog results in disappearing content and sluggish scrolling', Stefan's hypothesis is that we're preventing WKWebView from zombifying these tabs.", My hypothesis was wrong. I don't have a good explanation.", Reproducible on build 1405', :osunick probably running into this in ', v3.0b7 on iPhone 4S running iOS 9.0: - the page is almost unscrollable after opening ~4 background tabs - the content stops being displayed (grey page), followed by an OOM after opening ~7 background tabs', *** ', has been marked as a duplicate of this bug. ***', jhugman sent an email about failing WebViewMemoryLeak tests. Worth doing a quick investigation to see if these are just test failures or genuine web view memory leaks, which would be a big problem.', I verified that we do correctly dispose our web views via logging deinit, so the failure mentioned above is just an issue with the tests.', We've done some fixes around this code and is probably worth retesting to see if things have been fixed as a side effect of that work.", Tested on iPhone 6 Plus, iPhone SE, iPad Air 2. The issue is no longer reproducible. Opened ~ 40 tabs in background and the bbc.com page scrolls smoothly and the content is correctly displayed.' 
id=1177455	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1135178	 
id=1123409	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1197628	 'Created ', Screenshot 2.', Created ', ', ', Created ', ', Swift 2.0 version of fix', Comment on ', ', ', Just some nits - LGTM' 
id=1266086	 'Created ', ', Link to pull request Pull request for review. ', Adding ability for Firefox iOS to handle :hidden in list.txt', Comment on ', ', Link to pull request LGTM!', master: e7adf68 v4.x: 809f745' 
id=1146708	 'Created ', ', Link to Github pull-request: ', Rubber stamp?', Before: ', After: \ufeff\ufeff', darrin can follow-up to tweak the vertical margins if need be.', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1169284	 
id=1294218	 'Created ', ', Pull request' 
id=1235405	 'Created ', clear_search.png Sorry about this - I don't think this was part of the strings landing last Monday. This string is used for VoiceOver to tell the user about the 'X' button in the search field. Tapping the 'X' will erase the typed input and close searching. See the attached image for the behaviour. What are your thoughts on a better description?", (In reply to Stephan Leroux :sleroux from ', ) ', I'm not sure what you mean by that, it was merged to master on December 16 in ", ', Maybe something similar to other notes for VoiceOver strings describing not only the effects (search clearing) but also element (VoiceOver command). Try searching for VoiceOver on ', Ah makes sense. How about: 'Accessibility message e.g. spoken by VoiceOver after the user taps the close button in the search field to clear the search and exit search mode'", (In reply to Stephan Leroux :sleroux from ', ) ', Much better.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I'm not reviewer but the updated comment sounds clear enough for me.", master 4f060b3c479d1241fa597ec32b65c075d0c71de3' 
id=1223408	 '+1 :)', We are already using a mozilla fork of a wesj fork of the original repo. Not sure if this is Carthage compliant. We may want to consider moving back to tracking the bignerdranch repo for long term safety (although that will mean some migration work)', Created ', ', Pull request Part 1 of using carthage correctly - use Deferred from the carthage import' 
id=1210776	 'Created ', ', ', Updated PR with nit - merged' 
id=1248935	 'Created ', ', Pull request', Comment on ', ', Pull request Worked for me after I removed the L10Snapshot/MarketingSnapshot targets from the ClientRefTests target.' 
id=1094213	 "I would like to see a bit more of an abstraction layer between the UI code and the HTTP requests. It's a bit too raw right now and will encourage us to make coding decisions based on the temporary API." 
id=1181621	 'Created ', ', Pull request', Comment on ', ', Pull request I think Nick would make a better reviewer here since he wrote most of this code.', Comment on ', ', Pull request Notes on GH.', Comment on ', ', Pull request ', Comment on ', ', Pull request ', Created ', ', Pull request', I'll try to get to this review today.", I can't reproduce this\u2026 without the patch. Aaron, can you try again with current TestFlight?", Still reproducible on master', OK, the way I'd describe what I see is: An engine that was disabled (i.e., unchecked, not visible in the quick search bar) becomes re-enabled once it's been chosen as the search default. You can see that it was re-enabled if you pick a different engine afterwards. That seems totally fine to me. You enable it implicitly when you pick it, and it's not disabled again when you pick a different one. If you want to have only one enabled engine at a time, and you switch engines frequently, then flick the slider again once you switch. Thanks for the patch, allenngn, but I don't think this is a bug.", This was marked as tracking-fxios+, so shouldn't this at most be re-nomed so we can talk about it there? I think this should be UX's decision. FWIW, I agree this shouldn't be blocking v1, but I do think the PR is an improvement on the existing behavior.", Normally tracking doesn't imply that the resolution needs to be reviewed, but if you think this one is worth discussing, we can totally do that. IMO the logic added in this PR is simple, but the behavior it changes is likely to be so infrequent (and not undesirable!) that it's not worth the maintenance burden. Especially at this stage, weeks from release, I'm not inclined to land changes like this without it clearly fixing a bug that we care about.", I'm fine to call this RESO INVALID -- I believe my original code handled and explicitly tested this case." 
id=1201104	 'Almost done.', Note to self: this needs a small extension to track children of folders. Only separators have a 'pos' element.", f5ad0aa' 
id=1189540	 'Created ', ', Link to Github pull-request: ' 
id=1269315	 'Created ', Pull request', I can't seem to see the PR for this bug. When I click on the attachment it brings me to bugzilla and I don't see it in the PR listing on Github?", Comment on ', Pull request ', Created ', ', Pull request Added missing PR link.', Comment on ', ', Pull request Looks good - just a question about having a hardcoded default.', Hardcoded default is only needed until ', and this one are both fixed. Merged into ', (i.e. not master).', Merged into ', (PR for ', ).' 
id=1149678	 'Is this going to be done before shipping? If not, we may want to fix the white margin on the bottom of the screen on the iPhone 6 while the splash screen is displayed.', Presumably because it is tracking: +. There is also ', .', I have an idea that would alleviate the need to generate empty tab splash screen assets for every change in UI without too much change to the existing UI code. I can take this bug for later.', Unfortunately we won't be able to run any code during the launch screen process so my idea of reusing the custom view components we make in code like the URLBarView won't be possible. If we want to go with the empty UI approach, we'll need an image asset instead.", The app is launching much quicker now and I think the current white/grey splash screen is far less offensive. Proposing we leave it as is. Steph, can you just ensure what we have now works fine on all devices/resolutions? It's now using a LaunchScreen.xib I created, just let me know if we need any other verions of the png. You can mark this closed:wontfix when yo re ready :)", Looks good on all the devices and orientations.' 
id=1213554	 
id=1162734	 'See in action: ', *** This bug has been marked as a duplicate of ', ***' 
id=1171599	 'This bug is about displaying ', on the Remote Tabs Home Panel when the user is not logged in.', N.B., there are three null states: * Not logged in * Logged in but can't sync * Logged in but there are no other devices (synced successfully but no data) Then there's the semi-success case: * There are other devices, but they have no open tabs to show.", Created ', ', PR: ', This bug is about displaying ', on the Remote Tabs Home Panel when the user is not logged in. This patch actually also shows three addition states: * When the sync of tabs failed * When the sync was good but the user has no other devices with open tabs * When the sync was good but the user has no other devices at all It was easier to combine all these empty states in a single change. To keep this code simple, I have implemented this with custom `UITableViewCell` instances. Also, instead of doing a lot of conditional work in the UITableViewDataSource, like we do in `ClientPickerViewController`, I have chosen to instead make a few separate datasource/delegate subclasses that are swapped in and out depending on the state. This keeps the main `RemoteTabsPanel` class relatively small and moves the logic for each state case into a much smaller and independent classes.', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR: ', PR looks good - just some minor nitpicking comments. I really liked the error data source pattern + enum you used for the error states and custom error cells.', Fixed nits. Merged PR.', *** ', has been marked as a duplicate of this bug. ***', Added a follow-up to fix some of the non-localized wording: d9965ad' 
id=1204539	 'Created ', ', Pull request' 
id=1226461	 'I was not sure if the same "BrowserDB" will be used in this case. I hope it helps. extension SQLiteDBConnection { func tablesExist(names: Args) -> Bool { let count = names.count let orClause = BrowserDB.varlist(names.count) let tablesSQL = "SELECT name FROM sqlite_master WHERE type = \'table\' AND name IN (\\(orClause))" let res = self.executeQuery(tablesSQL, factory: StringFactory, withArgs: names) log.debug("\\(res.count) tables exist. Expected \\(count)") return res.count > 0 } }', These orClauses could be also written as inClauses in this case to keep it clean, which I forgot. extension SQLiteDBConnection { func tablesExist(names: Args) -> Bool { let count = names.count let inClause = BrowserDB.varlist(names.count) let tablesSQL = "SELECT name FROM sqlite_master WHERE type = \'table\' AND name IN (\\(inClause))" let res = self.executeQuery(tablesSQL, factory: StringFactory, withArgs: names) log.debug("\\(res.count) tables exist. Expected \\(count)") return res.count > 0 } }', Roland, please take a look at <', > and submit a pull request with your changes. You should also take that opportunity to make sure the project still builds and tests still pass. Thanks!', Hello Richard! I am not sure how to proceed with the pull request. I am not sure what the base and compare option is under "Compare changes".', One side is \'master\' in the main repo. The other is your feature branch in your fork. So you take the usual GitHub approach of: * Fork the repo. * Clone it. * Check out a branch to work in: `git checkout -b roland/bug-1226461` * Make your changes and commit your work: `git commit -m "', - Use IN when checking for tables."` * Push your branch to GitHub: `git push origin roland/bug-1226461` * Create the PR back to our `master` branch from your feature branch. The GitHub docs cover this in more detail: ', Thank you Richard. I have made the changes and created a PR. ', Thanks!', Created ', ', Pull req.', (Throwing this at Steph to review so he has an opportunity to get more familiar with this code.)', Comment on ', ', Pull req. Looks good - thanks for the patch!', Steph, could you rebase and land this?', master 83e21f15a3784253715d6acaa7d64ee241a84137' 
id=1272157	 'Created ', ', Link to Github pull-request: ', feedback in the PR', Comment on ', ', Link to Github pull-request: ', Finished up patch for review.', I am surprised that the homepage button is not available from the home panels menu. It makes sense to me that is where I would want to access my homepage from most frequently.', Comment on ', ', Link to Github pull-request: ', A couple of comments in the PR and a question that might be for :tecgirl rather than yo , Merged.' 
id=1152880	 'Fixed with ', Just a quick note about the code: I was able to get rid of the UIGestureRecognizer subclass completely. All code is now contained in a BrowserHelper which emits a delegate callback to the BVC which handles showing the actual action sheet.' 
id=1217523	 
id=1228824	 "Would you be willing to install a TestFlight build over the top? The current TF builds allow you to try various things, including sending logs for startup crashes. If so, please message me on IRC with your wife's Apple ID email address, and I'll get her added as a beta tester. Steph, do we have a wiki page somewhere with the docs for 1. send logs on start, 2. turn off session restore, etc.?", We walked through this on IRC. There's nothing scary in the logs. Disabling session restore got past the problem, so my speculation is OOM. That implies a few steps we could take: * We should detect a crash loop like this and offer to not restore your tabs. We used to have this. * We might consider keeping that debug option in Settings for release users, too! * We should create new tabs as zombies.", Hmm this should be showing. Might be related to ', . ', Not yet but I'll write one for future reference.", Let's see if we can add a debug menu option for sending session restore information to help with debugging. NI'ing me so I come back to create this bug.", This is probably a duplicate report of ', .', *** This bug has been marked as a duplicate of ', ***' 
id=1164897	 "This probably isn't blocking by itself, but it sounds like this is causing problems that are blocking.", Created ', ', PR ', Removed the hardcoded status bar heights everywhere except for the TabTrayController which will come as part of the refactor branch', Comment on ', ', PR ', This looks pretty good. One thing I found: In the simulator when I toggle the In-Call Status Bar (which is a double height status bar), the tab tray controller is correctly pushed down to make room, but it never goes back up when the bar goes away. This does work in the browserviewcontroller.', Created ', ', Commit Added a notification listener for whenever the status bar frame changes so we can update the layout accordingly.', Comment on ', ', Commit Awesome!', Merged' 
id=1304995	 'No sense of priority on this bug. Is it worth tracking?', Created ', ', pull request Update the url of JD in SuggestedSiteData for zh-cn locale', Comment on ', ', pull request ', Comment on ', ', pull request ' 
id=1174227	 'Favicons \u2013 the hardest problem in computer science', Did your favicon cleanup fix this, Wes?', HistoryClearable Confuse. I found that this bug is caused by clear history when clear private. Currently, when clear history, the client will clear the favicons together. (See it in ', after comment this 3 lines out the bug fixed). So the question is, should we clear favicons when clear browser history record? If the answer is no, then when we should clear the favicons? IMHO, I think add a alertaction in the setting tableview to clear favorite sites is a good solution?', See dep.', Created ', ', Pull request', I'm going to close this a dupe since I have a pretty-much-done patch for it in the other bug. Sorry :( But thanks for the patch. *** This bug has been marked as a duplicate of ", ***', (In reply to Wesley Johnston (:wesj) from ', ) ', Okay. Yo re welcome." 
id=1253638	 'Created ', ', Pull req.', Comment on ', ', Pull req. LGTM' 
id=1242025	 'It should be: Settings \u2192 Logins \u2192 Edit \u2192 select item \u2192 "Delete" in the upper left corner appears not localized.', Created ', ', Link to Github pull-request: ', I've copied over the localized 'Delete' string used for the Login Detail since we don't have one with a proper comment for the list view. This isn't ideal but I think it's too late to add a string with a different comment even though its the same string.", Comment on ', ', Link to Github pull-request: ', Comments actually don't affect localization -- it will show up as a duplicate entry of the same string with a different comment (as long as the key and table name are the same). That's the reason we were considering switching to a unique ID-based system for NSLocalizedString: strings in different contexts that are the same in English will have the same key, but those strings might not be the same in other languages, and there's no good way to separate them now (unless we put them in a different table, which is sometimes a hack). In this case, the string collapsing behavior will actually help you out since you don't want to introduce new strings now :)", master f40df4af1bebae616fc6d0596143932ea81a7ce5', v3.x 10e88e1' 
id=1187171	 "Ah. It's actually called once per entry in history during restore! func webView(webView: WKWebView, didFinishNavigation navigation: WKNavigation!) { hideNetworkActivitySpinner() storeChanges() } And even then it's wrong, seemingly missing history.", Culprit of slow startup? Ought to track, no?', Triage explanation: plus for this because it affects startup. Not plus for ', , even though we'd love a fix.", Created ', ', Pull request', Comment on ', ', Pull request Fixes look good but left a comment on resolving the issue pointed out in this bug.', I think the issue with storeChanges() getting called too often overall and the fact that storeChanges() is pretty heavy in it's implementation (delete all tabs from the db, create them all again AND write tabs to disk) will all come under ", with this one being purely about slow startup performance' 
id=1118378	 'I would like to work on this.', Is there a pull request for this? I see that something landed here: ', I think the work happened in ', unless there's more to do here", (In reply to Aaron Train :aaronmt from ', ) ', This is ', !', bnicholson: did this land already, without r+? My bad. I didn't mean to do that.", No problem, can you back it out and open a pull request?', This is not correct and actually a bit dangerous. For example in case of `tel:` we do not blindly want to pass that to `UIApplication.openURL()` because that will actually result in a phone call immediately. We should not default to `UIApplication.openURL()` - We can *only* do that for schemes that we know are OK to pass to the OS. In case of `tel:` we must show a confirmation dialog first.', Something we've already had a tester catch already (re: confirmation dialog on href rel:): ", Backed out: ', Thanks, bnicholson.', Created ', ', ', Added an UIAlertController.', Comment on ', ', ', Lets land this and ask Aaron to test this well. I think we also need to keep improving this list of schemes that we recognize. For example mailto: is now missing. There are probably a few more. ', has some hints too.', /me checks at ', I went through the docs in ', . There are a collection of standard link formats (some scheme based, some host based, some pattern based). This patch only handles the scheme based ones, but was written to the others.', Merged.' 
id=1132900	 'This has been done as part of getting the Aurora builds going.' 
id=1145604	 'Added close tab action with an X at the top right of the tab ', let me know your opinion.', (In reply to Sachin Irukula from ', ) ', Sorry wrong link please refer to ', Created ', ', Pull request This looks pretty good, with some comments in the PR. Adding feedback? for Darrin and Robin in case they want to offer some polish suggestions now for the close image/margins/animation. Otherwise, I can file a separate follow-up after this lands.', Comment on ', ', Pull request This looks fine to me! May need some polish once the collection view stuff lands (and a dedicated asset) but im fine to land as-is and do those as followups.' 
id=1195133	 'Created ', ', Option 1: don't fail when a URL doesn't have a domain.", Created ', ', Option 2: allow URLs with no domain. East-coasters for review.', The code for both look good. What does desktop do as far as keeping track of URIs with file://? Not storing them feels cleaner from the code side but I feel like as a user I'd want to see file URIs in my history. Would we have to rework the query for calculating frecency to ignore file:// urls?", Desktop stores file: URIs. (That's how downloads are stored, too, IIRC.) The top sites code already transparently drops history items that don't join against the domains table, I think. The confusion is that file: URIs that sync from Desktop aren't much use on your phone \u2014 the purpose of syncing them is for completeness, and to make stuff like file:///Users/sleroux/Dropbox/... work, but that falls down here.", Comment on ', ', Option 2: allow URLs with no domain. I like the second option because it is simpler.', Comment on ', ', Option 1: don't fail when a URL doesn't have a domain. This looks good but I prefer options #2 because it is simpler.", Comment on ', ', Option 2: allow URLs with no domain. Option 2 as well', Needs resolvin'.", We cherry-picked part 1 of option 1: ', and we'll leave part 2 until we need it." 
id=1276889	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1208565	 'Under UX consideration.', Yes, let's add the default highlight back to tab button. I can't even recall what we did for the URL bar. Did we highlight just the input grey?", I believe so... I don't remember specifying anything other than the default.", I think it's safe to say this isn't a 2.0 blocker.", Created ', ', Comment on ', ', LGTM Can we inverse the number and border color on tap?', Comment on ', ', On the right track, but I think we can clean this up a bit.', Comment on ', ', Moar comments.' 
id=1290732	 'I think this can be fixed by adding <meta name=referrer content=never> to Reader.html, that is a template HTML for reader-view. ', This is my live demo that injects above <meta> tag through a HTML injection bug I reported as ', . ', The demo expectedly strips REFERER HTTP header.', Created ', ', Link to Github pull-request: ', Fixes the PoC using the suggested meta tag.', Comment on ', ', Link to Github pull-request: ', Gonna just land this r=me since this is a trivial fix that I've verified.", master: ', v5.x: 2892365' 
id=1168193	 "Steph, I think you said you were interested in taking this, so I'm handing it off to you. Yo d probably be a better match with all the tabs/UI work yo ve been doing, but feel free to give it back if you don't want it :)", Yup sounds good I need to fix the swipe animation anyways because currently it stops rotating after the user stops panning.', ^^ Glad you caught that, was going to file it. Would be cool to continue the same rotation speed etc. throughout the animation', Created ', ', PR ', Fixed the animation bug mentioned above and also did some minor refactoring to clean up the animation code.', Comment on ', ', PR ', Looks good, just a couple questions for consideration in the PR.', Merged' 
id=1311081	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1178795	 '491c966' 
id=1187479	 'Is this a recent regression?', I do not know actually I was thinking this was regression of Bug-1186318. But I have checked it was previous than this commit.', I do not know actually I was thinking this was regression of Bug-1186318. But I have checked it was previous than this commit.', This works for me?', @bryan I found this on simulator "iPhone 6 (8.4)". One more thing do not tap on textfield after rotation. It is happening every time on my simulator.', Sorry my bad after rotation some how hardware keyboard connection got disconnected. But when I type with software keyboard it is working fine. Sorry for that', haha no worries! better to be safe than sorry' 
id=1257204	 'Adding ', as parent even though we would do this for 4.0 just so we don't lose track of it.", Hey Stefan, Do you have any suggestions over making this comment more generic? The current comment looks like: "Button in login detail screen that deletes the current login" Now that we use delete in both list of logins and detail page this doesn\'t make sense. Would something like this work: "Title for delete action when removing a login" Action indicating that it can be both the button in the detail page and also the action button in the top right in the list view.', When I read "Title for action" I think about window/screen/dialog title not a button label, I think "Delete action button label " would be more understandable. Making a comment more or less specific doesn\'t enable different string translations (only one per table/file with current ids) and only somewhat affects qa. I don\'t know also if changed comments are counted against the "string freeze". I would use more specific comments, like "Delete button label in login detail screen" and "Delete button label in logins list editing screen" in our case.', Comments updated as part of ' 
id=1136454	 'And then remove the FxA framework? Because I think that is the only thing we use from it now.', Created ', ', Link to Github pull-request: ', bnicholson: should be a quick once over if Travis doesn't complain.", (In reply to Stefan Arentz :st3fan from ', ) ', We're going to want it soon, though -- right when we generate certificates. I'm happy to investigate a lighter-weight solution in the interim.", I'm going to say this got IRC r+ from bnicholson and stefan. " 
id=1212010	 'Marking as dupe since I create a meta to track all this stuff under *** This bug has been marked as a duplicate of ', ***', Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", Link bugs that were resolved and resolve this one.', Need to update AHA card to use 1191058 instead of this bug but I don't have permissions.", Done, lmk if you need anything else updated.' 
id=1199749	 
id=1147417	 ' made this better (i.e. black text).', This has been fixed with the blurred status bar and dark status bar text.' 
id=1279401	 'Created ', ', Pull Request', Created ', leakafter.png', Comment on ', ', Pull Request Great find and informative post on SO!', master e8f885d0f169f55dd466838a09ba0a440b6bc83c', v5.x 4d83f60' 
id=1161179	 'Created ', Second tab displayed Exact scrolling offset of second tab (Firefox on Wikipedia) for anyone wanting to repro. To sufficiently reproduce for VoiceOver user on iPhone 5-sized device (this is screen dimension dependent), it is enough flick to the "Initial release Firefox...png" image and then flick left back to the "Last edited 2 days ago by". Then by direct touch find the Show Tabs button (not by flicking left, which would change the scrolling state) to switch back to the macrumors.com tab.', Created ', ', Pull request' 
id=1260855	 "Hello, Can I work on this under someone's guidance?", Yes. Adding a mentor to this bug to help you out.', Hi there Is this still an issue? I ran on iOS 9.3.1 and I am not able to reproduce it. Lower versions of iOS perhaps? Thanks', My bad overlooked the OS version.', This seems to be an iOS 8.x only issue. Since the deployment target on the master branch is 9.0, I believe this issue could be closed, right?', Yep, thanks.' 
id=1191381	 
id=1182752	 'Created ', ', Pull Request If it's too late for new strings, let me know and I will revise the PR to be without the accessibilityLabel's (which would still bring most of the improvement)." 
id=1151623	 'Created ', ', Pull req.', Comment on ', ', Pull req. Sure.', 09fb2b1' 
id=1163274	 'Created ', ', Pull req. There's one commit near the end of this PR. I added only two explicit indices. All of the UNIQUE and PRIMARY KEY columns get an index for free. So I added two: * An index on should_upload, because otherwise that'll be a table scan for a very small set. Thinking about this, I should make this a partial index on should_upload = 1. * A compound index on visits.{siteID,date}, because we're always doing a join and datewise comparisons in the same query.", I made the index partial and rebased.', Reviewed in GH. c68aac4' 
id=1227672	 'Created ', ', Link to Github pull-request: ' 
id=1173103	 ' will help I think, would love to re-test after this change.', Is there anything actionable to do here? I think this is just a dup of 1172065 and we should close it. Darrin?', It's a dupe as far as I'm concerned, unless there were other actionable items in mind. I'll close and we can open more specific bugs if they come up. *** This bug has been marked as a duplicate of ", ***' 
id=1252180	 'Note that this may be a red herring. This possibly does not happen on a clean build with cleaned Derived Data.', *** This bug has been marked as a duplicate of ', ***' 
id=1109789	 
id=1185006	 'Created ', ', PR', Comment on ', ', PR Several questions/comments left in PR.', Comment on ', ', PR LGTM' 
id=1265345	 'As per: ', This should be an auto-complete field.', Created ', ', Pull request', Comment on ', ', Pull request Found a bug. Otherwise, a couple of small comments on the PR.', Created ', ', Pull request Rebased, added tests. This is minimally functional, in order to see the whole feature working. Follow up bugs to be filed for: picking an open tab to use, search from history.', Comment on ', ', Pull request Removing r? fluffyemily, as she's out this week.", Comment on ', ', Pull request Looking good! Left some questions/comments regarding closures and retain cycles.', Comment on ', ', Pull request Addressed feedback, and r?', Comment on ', ', Pull request Nice, looks great!' 
id=1194307	 'Created ', SendTo 8-13-15, 5-29 PM.crash', Every time? Can you or Steph symbolicate this?', This looks like it was from build 29. Since build 29 is what we have on master, could this be the send tab extension from a local build instead of aurora/testflight? I'm not sure if I can symbolicate that without an .xcarchive. However, looking at the crash more closely, it looks like it's crashing on thread 5 with a call originating from our Shared.framework and ending in a JavascriptCore call. It also gets called from UIKit and WebCore. If I had to put my money on this, it would be the issue with getting the user agent from the WKWebView on a background thread. Also, I believe that code was in the Shared.framework 0 JavaScriptCore \t0x000000018698a860 0x186428000 + 5646432 1 JavaScriptCore \t0x000000018698a858 0x186428000 + 5646424 2 WebCore \t0x0000000196b7dab0 0x196704000 + 4692656 3 WebCore \t0x0000000196778154 0x196704000 + 475476 4 libsystem_pthread.dylib \t0x000000019a19cff8 0x19a198000 + 20472 5 libsystem_platform.dylib \t0x000000019a191e50 0x19a190000 + 7760 6 libsystem_pthread.dylib \t0x000000019a19a73c 0x19a198000 + 10044 7 WebKitLegacy \t0x000000019771ba38 0x197714000 + 31288 8 WebKitLegacy \t0x000000019771b284 0x197714000 + 29316 9 UIKit \t0x000000018a5c1a50 0x18a30c000 + 2841168 10 libdispatch.dylib \t0x0000000199f8580c 0x199f84000 + 6156 11 libdispatch.dylib \t0x0000000199f86650 0x199f84000 + 9808 12 libobjc.A.dylib \t0x0000000199768fc8 0x199760000 + 36808 13 libobjc.A.dylib \t0x000000019976f8f8 0x199760000 + 63736 14 libobjc.A.dylib \t0x0000000199779db8 0x199760000 + 105912 15 Shared \t0x00000001007a88cc 0x100750000 + 362700 16 Shared \t0x00000001007665a4 0x100750000 + 91556 17 Sync \t0x00000001003628f8 0x100300000 + 403704 -- Sherlock, out.", Emily, could you confirm that this crash only occurs without the fix from ', ? That merged three days ago, so I could imagine that you were testing on a branch\u2026', It was happening on beta, aurora and latest master (no I was not on a branch). Tested this morning with beta 33 and today's master it's all OK." 
id=1130609	 'Created ', ', Pull request', On iPad we don't show the toolbar at the bottom but it is combined with the url bar instead. How about we rename this bug so that this covers the iPhone case and then do a similar bug to introduce the iPad url/toolbar?", I think this code is ok but I have one design choice question. Instead of letting urlbar and toolbar have a background view and doing a transform on that background view ... why don't we just change the position of the whole urlbar and toolbar? They are anchored to the top and bottom of the screen with a constraint so to make them move up/down the only thing we need to do is move the contraint's constant to change the offset. I think if the BrowserViewController manages the position of urlbar and toolbar (it is the view *controller*) after all, the code would be much simpler. The view hierarchies of the urlbar and toolbar can be simpler and they don't have to contain any logic about their placement. (which should not be their concern)", Comment on ', ', Pull request I'm playing with this and I just noticed that when the top and bottom bar have moved off screen, you cannot tap those areas anymore. This is a side effect of keeping those views on screen while moving their contents. I really want to suggest to change this patch to move the position of the whole views instead of only their contents.", (In reply to Stefan Arentz :st3fan from ', ) ', Hmm.. I wanted them to be aware only because some of the mockups show a "small" urlbar at the top of the screen, which I assume is like the Safari shrunken urlbar. I assumed the view itself would handle that transition, and the view controller would be unaware of its appearance. But one thing that bothered me about this approach is that the two toolbars are not kept in sync in any way, so maybe this will make that feel a bit better. I\'ll try it.', I think you need to do two different things then: The top bar does not slide off screen, instead it just resizes, while being anchored against the top. When you resize the view, it's layoutSubviews will be called repeatedly. That could be a good place to slowly change the contents based on it's shrunken size. You could for example fade things out and in based on the percentage it has shrunk. The bottom bar has no special effects I think? So it can just move off screen. Btw be sure to test while you have the webview zoomed in. I saw some really strange things happening, like both bars moving to the left/right.", Created ', ', Pull request Updated. The view controller handles all the scrolling now. I couldn't get constraints to work, so I'm still using transforms right now. The clicking issues you saw were because we have contentInsets set on the webview. I add/remove them as you scroll now (necessary to make absolute positioned elements work as well...)", Comment on ', ', Pull request Looks good to me. Just two nits: there is something weird going on when you are at the bottom of the page, but we can do that in a followup fix the PR also contains some other changes, i think related to bookmarks or sharing. maybe a good idea to move those to a separate pr?', Yeah. Deleted the other changes. I also saw some of the problems you saw. They\'re related to us changing the content insets, which changes the scroll position of the page as we\'re moving. I also saw methods getting called concurrently sometimes. I\'ve fixed most of them, but still managed to make the urlbar "panic" very occasionally. I\'m fine fixing the rest in product.' 
id=1145231	 'Created ', ', PR: ', This patch introduces a `displayURL` in `Browser`. The `displayURL` is the 'real' URL that should be used for display purposes and for cases where the URL needs to be used in for example bookmarks, sharing, history. Currently the `displayURL` only knows about our internal reader view style urls, which are of the form `", `.', Comment on ', ', PR: ', LGTM with comments.', Created ', ', PR: ', Updated PR because I was not able to get the other one in a good state to merge. Dealt with the comments on the previous PR. Assuming r+ still stands so just putting this in for reference.' 
id=1206204	 'Created ', ', Link to Github pull-request: ' 
id=1155136	 'Not sure if this should be a different bug, but the horizontal scrollbar at the bottom of the screen kind of has a similar behavior with the bottom icons when scrolling down (and stays at half the size of those icons when scrolling up)', Hadn't tested in a while, but this appears to work properly in build 15." 
id=1273963	 "That's weird. Thanks for the report. I couldn't reproduce this in Safari but could in Firefox too.", The problem is that the alert dialog view is being dismissed (and so completion handler is being called) before button handler is being called. The same problem is causing the prompt dialog to call the completion handler erroneously when the user presses cancel (i.e. there's no difference between Ok and Cancel for text prompts)", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good and work for me!', Merged.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Hi it since is a duplicate bug, is it resolve? i saw the status was Resolved. but why firefox IOS version still return false on OK was click?', (In reply to tkchin from ', ) ', This is fixed in version 5.0 that will be released any day now.' 
id=1219956	 "Push is tracked elsewhere. Other than that, we'd need all clients to sync more often, which isn't something we can really do, or a different data format. Closing this." 
id=1166748	 "Yeah, that's the failure state of that pane. Duping! *** This bug has been marked as a duplicate of ", ***' 
id=1230567	 'I think this would require us to keep a separate history of the custom user agents used to load sites. However, there seems to be no clear way to identify back/forward navigations. We cannot use the proxy methods of the Browser class (goBack / goForward / goToBackForwardListItem) because swiping from the screen edges will bypass them. In addition, the only delegate method that seems to identify the navigation type is decidePolicyForNavigationAction which does, however, only have a combined BackForward navigation type so we cannot distinguish between the navigation directions.', Do we get the same WKNavigation instance for back navigation as on the original page load? If so, we can snapshot our UA override at the point of navigation, and look it up by WKNavigation during back. We could also keep a weak map of requested URLs and UAs. It might be inaccurate in certain back/forward flows. And a final suggestion: WKNavigationAction.targetFrame (or sourceFrame?) gives you the request used for the load. We can look at the request to find the UA.', Awesome suggestions Richard, I didn't think of any of these! :) (In reply to Richard Newman :rnewman from ", ) ', I checked and, unfortunately, we get a different WKNavigation instance when doing back/forward. Here's an example: (use URL bar) ", => <WKNavigation: 0x7fd573418ed0> (use URL bar) ', => <WKNavigation: 0x7fd5778128b0> (tap back) to ', => <WKNavigation: 0x7fd572df6930> (tap forward) to ', => <WKNavigation: 0x7fd5733afb60> I think the WKNavigation instance is only valid for one particular site load - no matter how it is triggered. ', Agreed, that could be an easy option with potentially small inaccuracies. ', This is very interesting. It seems that the requests on the sourceFrame and targetFrame properties do *not* store the HTTP headers so we cannot get the UA from them. However, WKNavigationAction has a separate request property for the current navigation which *does* include the headers. That means we might not even need to keep a separate history of the UAs but instead we could just enhance the decidePolicyForNavigationAction delegate method with something like if navigationAction.navigationType == .BackForward { let ua = navigationAction.request.valueForHTTPHeaderField("User-Agent") webView.customUserAgent = ua != UserAgent.defaultUserAgent() ? ua : nil } This would restore the originally spoofed UA for back/forward navigations. I ran a few quick tests and this is looking very good. I think I should be able to throw together a PR for others to check this out.', (In reply to hennes from ', ) ', I occasionally have my uses :) ', Awesome!', Created ', ', Pull request Here it is. The code change is minimal (as described above) and very similar to what we did in ', . The rest is tests. Brian, I added you for review since yo ve reviewed the rest of RDS changes as well.", Comment on ', ', Pull request Looks great -- thanks for keeping the tests up to date!' 
id=1254792	 "Paging more people because I am stuck and I don't know what else to try.", Ok this was because LD_RUNPATH_SEARCH_PATHS in the L10nSnapshotTests and MarketingTests only had: @executable_path/Frameworks I changed that to: @executable_path/Frameworks @loader_path/Frameworks', Also, no Target Application specific for the L10nSnapshotTests', Created ', ', PR: ', r=memyselfandi' 
id=1123387	 'Created ', ', Pull Request This patch includes a first iteration of a UI for Reader Mode that allows you to change the font type, font size and theme. Because it is unclear how this UI should be activated, it is currently behind a triple-tap in content while in Reader Mode. This will obviously change. There are a couple more things missing, like persisting these changes to the profile, but to keep this simple I am going to file followup bugs for those issues. Note that the buttons on the UI are all text for now. Waiting for more final artwork.', Preview of the feature in action: ', Comment on ', ', Pull Request r=me with comments addressed.' 
id=1197232	 "Steps to reproduce: -Open Twitter.com or Facebook.com in Firefox on iOS. -Find an article someone has shared. Click on link. -Firefox will often hang on the original click wrapper that the host platform wraps shared URLs with. For instance t.co. It doesn't seem to hang on any URLs native to the platform like pic.twitter.com. Just in links that open into new tabs.", Created ', FacebookHang.PNG Example of Facebook's hang on URL click-wrapper", Created ', TwitterHang.PNG Example of where Firefox hangs in opening sharing links in Twitter.', Created ', URLsThatCauseTrouble.PNG Example of URL types that cause problems for Firefox but not Safari.', Just a theory, I'm wondering if Facebook or Twitter have restrictions on unknown user agents trying to open shared links across tabs. This might be a restriction in their servers rather than in our software, considering it seems to affect both services. I can reach out to Twitter or Facebook if we think that might be the cause of this.", This and ', sound the same *** This bug has been marked as a duplicate of ', ***' 
id=1146583	 'Fixed with ' 
id=1278471	 "Do you have an example URL? I can't reproduce this on my iPad Pro (2016)" 
id=1159427	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1223400	 'There is an open pull request that removes the warnings (see 1 ). However, these are only warnings and on top they only affect the unit tests so there should be nothing blocking the build. 1 ', The PR was merged so there should be no warnings anymore.', Created ', ', Pull request Part 1 of using carthage correctly - move GDCWebserver in ThirdParty to reference version fetched by carthage', :sleroux - pinned GCDWebServer and SwiftKeychainWrapper to a particular version' 
id=1288781	 'FYI I submitted a pull request for this a few weeks back ', Ah, wish I knew about that -- would have saved some time! I ended up doing something a bit different that's hopefully still useful: ", This is intended to be a cross-platform client of the Fathom metadata parser that we can include directly in the Android/iOS browsers. extract.js 1 is where the shared code lives. On iOS, I think we'll be able to add this repo as dependency, including out/extract.ios.js as a content script, meaning people won't even need npm when building. 1 ", I think we can close this since the run-a-parser-in-the-browser bits are done. While there's still lots to figure out in terms of what metadata we want to extract and how we want to use that data, that's beyond the scope of this bug." 
id=1169143	 'Maybe this can be done in ', . *** This bug has been marked as a duplicate of ', ***', PR ', Created ', ', PR: ' 
id=1234835	 'WIP branch ' 
id=1248350	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1093903	 'Just an FYI to Geoff' 
id=1139068	 
id=1149213	 'Related to ', *** This bug has been marked as a duplicate of ', ***' 
id=1201071	 "I am going to close this because I cannot reproduce this. It is entirely possible that I was looking at old stale data. I have a whole bunch of 'Fennec on Iphone Simulator' devices so it is not entirely clear which one was most recent. In any case, i opened a few ", tabs (home panel, reading view) and synced and I could not repro.' 
id=1189296	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good.', Note that we can't land this until the FxA server is expecting it. ni on Ryan to let us know when that is.", The initial work to support the |fx_ios_v1| parameter landed in ', , and has been backported to train 42.1. If all goes well with testing, this should go to production this week.', Clarification - |fx_ios_v1| should read |context=fx_ios_v1|.', Support for the iOS-specific context string is now live in production, it should be safe to deploy the corresponding client change.', afd9981' 
id=1162609	 'Created ', ', PR: ', This is a fix for the Sync.strings files not being included in a strings import. It also includes a fix for a dependend bug that gives the Shared target a more traditional place in the project. See ', for details.', Comment on ', ', PR: ', The Python part makes sense to me. We should be able to remove the TODO a few days after the next export.' 
id=1281760	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!', merged master ', v5.x a2b2e94' 
id=1226269	 'Technically its pretty challenging to allow multi-touch deletion on the Top Sites panel. I have a WIP branch here ', but its buggy with duplicate tiles. To resolve the top crashing bug when two tiles are deleted at the same time, I force the user to only allow deleting one tile at a time. I think in general this is the right approach since when a user it trying to delete their tiles quickly and triggering the multi-delete they are probably trying to clear everything. In this case we should add a 'Clear All' button somewhere to allow users to do this. I'm going to close this as WONTFIX for now since I opened it as a response to the multi-delete bug." 
id=1171459	 "Let's just stop trying to screenshot about:home and other pages", Created ', ', One liner fix!', James, please check the github comments.', Fixed using AboutUtils. Rebased, and pushed to the same PR.', Actual change looks good, but the merge looks horrible (57 changed files for a 1 line change). I've added a suggestion to sort that in github. Once that's sorted, I'm a r+" 
id=1183785	 "Logout is intentionally less prominent by design. Also, very common on iOS (and mobile in general) to bury 'logout' or 'delete' actions at the bottom of a page. Account name should not be tappable until we have the profile web view to show.", Seen on ios-feedback', The tappable button has come up a few times', Tappable button is covered by ', , and we're not going to move Logout, so duping. *** This bug has been marked as a duplicate of ", ***' 
id=1250586	 'We now do so: ' 
id=1263175	 "I'd be happy to take this on." 
id=1104867	 'Created ', ', Pull Request Patch that makes the Send To extension push the shared item to your sync data.', This needs to be be revisted because I don't think this code works or is up to date with what we actually need to do.", I'm ripping out some of the old code now, and will get to this after ", .', Revised summary: This bug involves: * Listing remote clients, fetching if necessary. * Queuing a command for that remote client. We queue so that an immediate failure to send doesn't result in data loss. We also queue so that if our client set is blanked -- as it might be if your password changes or something else odd happens -- the 'wipe' event doesn't lose the tabs yo re trying to send. * Uploading the remote client record correctly.", Created ', ', WIP Feedback Request', Created ', WIP Feedback Request So, I've updated some of the code (including a complete DB rewrite). It's still a bit messy, but I'm conscious that yo re off on PTO from tomorrow and I still haven't figured out how to do the next bit yet (actually sending the data to the clients)! Also, there is a test deleteAllCommands that I can't get to pass and I don't know why. For some reason all the commands are still in the DB after I've deleted them and all the responses are successes.....", Comment on ', WIP Feedback Request St3fan: Can you please give me feedback on this code? See previous comments', I'll try to take a tropical look, too.", Comments: Split sdweb change out. Less confusion on backout. Trailing comma in 'queries' list is good style; turns a two line change into one line on addition. CommandSyncTable: fix header indenting, remove // on first line. Let TableClient -> TableClients, note that it is defined elsewhere.", Part of me wants the send logic to hide in RemoteClient, requiring the send extension to grab a client to send to, but 0fg for now. Looking at the sending bit shortly.', The downside of having a not null reference to the clients table is that we can't refer to a client that is ttled or deleted without careful attention in the clients engine. Also, wiping and redownloading clients will either fail with a constraint error or discard commands (or rely on transaction quirks and immediate insertion, which we don't do). That probably needs to weaken.", SQL stuff is super low level. We should kill a lot of lines in there. Next bit: when clients syncs, after download, check if we have outstanding commands. If none, we are done. Otherwise, for each destination client, construct a client record with the outgoing command. Ideally we'd preserve the entire downloaded record payload, but that's harder here. Upload that record with a PUT, specifying IfUnmodifiedSince with the record's last seen modified time. See how we upload ours elsewhere in ClientsSynchronizer. The put might fail with a consistency error (409? 412?), in which case we need to download and re upload. If you choose, you can implement this always as a download-then-upload. On a successful upload, delete the uploaded row from the commands table.", Created ', ', Pull request', rnewman: more updates.', simplified db. Removed unused methods. Returned RemoteClient with commands from getCommands() therefore not requiring 2 separate queries in syncronizer', I'll get to this first thing on Monday, Emily.", Comment on ', ', Pull request Not quite there yet; two bugs with the same root cause. Back to you, Emily!', Created ', ', Pull request here we go again' 
id=1130486	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1144350	 'Created ', ', Pull request A dumb write-on-load thumbnail implementation. Plan on handling in-memory caching and thumbnail expiration in follow-ups.', Comment on ', ', Pull request I want to change this caching/loading to use sdwebimage, but this seems fine for now.', *** ', has been marked as a duplicate of this bug. ***' 
id=1116537	 'Created ', ', Pull request Make the history panel work', Comment on ', ', Pull request Removing r? for now until these are rebased onto the non-Core Data implementation.', Created ', ', PR', Created ', PR Updated PR. I also reworked the one history test I have to be a little cleaner in here.', Comment on ', PR Lots of comments in PR, but they're all pretty minor, so this mostly looks good to me.", Created ', ', Pull request I\'m kinda confused about the r- and the "this looks ok" comment. Re-review if you want....', (In reply to Wesley Johnston (:wesj) from ', ) ', Heh, sorry -- I mostly r-'d because of the merge conflicts that were still in the commits, and just wanted to be sure those got fixed and rebased first. This looks fine (with the public accessors changed back to default, if possible).", We've landed this now in " 
id=1132486	 'When I print self.clientLastModified, I see correct values. So this is not a case where a timestamp in milliseconds does not fit in an Int type.', Yeah, looks like overflow to me; they're all wrong by the same amount. Swift Ints are signed and 32bit on a 32bit platform, if that's relevant -- max of 2,147,483,647. Probably want to explicitly use Int64 here. SQLite itself should automatically use up to 8 bytes for INTEGER columns, so I suspect the problem is higher up the stack -- perhaps an Int coercion reading back. If you can grab the DB, we can rule out the write-side part.", Reading these out of the db is a little bit of magic. We basically grab the column type and assume that we can convert to something based on it: ' 
id=1192903	 'Created ', time-profiler-newtab.trace.zip', I noticed the same thing -- I think this is actually a dupe of ', . Aaron, now that ', is fixed, can you confirm if yo re still seeing this?", Looks like that was it. Fixed via ' 
id=1194720	 'Created ', Screen Shot 2015-08-14 at 10.30.43 AM.png Screenshot of top row', I had this filed under a different title but I'll close mine", *** ', has been marked as a duplicate of this bug. ***', Created ', ', ', Merged' 
id=1145592	 'This works for me (minus the confirmation prompt: ', ) ', Having the site causing the issue at hand would help to diagnose this?', Jenn to go get a repro case.', Progress? If not, lets close this.', I think this is all good. Just asking Luciana if she can test again with the numbers that failed when she showed the bug to me.', Thank you, Stefan. I have been using the feature without problems. Visually, it is not fixed yet, but I am able to place calls using the link.', Created ', ', PR: ', This adds a special case for tel: links. We now do the same as Safari, show a dialog with just the escaped phone number (so that percent-escaped characters don't show) with a Cancel and Call choice. I think this is visually better and friendlier than the default we display for unknown external links. I think we can do much better with this code btw and also special case things like facetime: and sms:. And have a friendlier message than we have now. But lets move that to v1.1.", Can you explain what the string "Call" is used for? Button label to place a call, something else? The localization comment doesn\'t help at all.', I would assume alert == dialog, something similar to ', (Safari, ', ) but I'm afraid of string reuse (it wouldn't work for pl at all) like for ", (', ).', Correct, it is the alert button as in ', The second screenshot of the 'context' menu when you long press on a tel: link is provided my WebKit. So I assume that it is localized by iOS and we don't have to do anything. Maybe you can just confirm that?", (In reply to Stefan Arentz :st3fan from ', ) ', Unfortunately TestFlights 1.0 (9) (are there any updates for planned?) doesn't seem to directly support tel scheme and handling it more like normal links via Webkit.", Yeah it looks like the new Call dialog was merged after I made build #9. I'll work on a new build today.", In build 10 both show correctly and localized :)' 
id=1276543	 'Is this ', ?', (In reply to Aaron Train :aaronmt from ', ) ', Yes, the same issue', *** This bug has been marked as a duplicate of ', ***' 
id=1178633	 'Share > Add to Bookmarks and Add to Reading List from Safari both work for me.', CNET app problem I guess. Safari works and also tried a CBC application and iMore.' 
id=1310748	 'Interested in checking this out Joel?', Created ', ', Link to Github pull-request: ', Sure thing! Attached.', Comment on ', ', Link to Github pull-request: ', Thanks Joel!', master ', Hey Joel, if yo re interested in taking another bug that's more challenging, you can check out ", .' 
id=1245976	 ' // TODO: these might need to be weakened if real-world data is dirty. parentID: self "parentid" .asString!, parentName: self "parentName" .asString!, title: self "title" .asString!, Looks like real-world data is dirty!', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM!' 
id=1168130	 'Created ', tiles-delete.png', Could you hook me up with the various Close button assets? Probably be best to keep the x + red circle as it's own image.", Created ', delete-tile.zip', Created ', delete-tile.zip Now with 19% more opacity!', Created ', ', PR ', First pass at implementing deletion of top site tiles form the top sites panel. Matches android implementation where when tiles are deleted, the history associated with that tile is also deleted.', Comment on ', ', PR ', Some minor comments in the PR. Works great!', Created ', ', Commit ', I stumbled on some issues with the way I was inserting/deleting items from the collection view which was causing crashes and also bugs with the way the decorator view was rendering when updating the layout. I moved the remove button into the ThumbnailCell so it's easier to animate and keep on top of the thumbnail image and fixed up the logic for inserting and deleting cells. Mind taking a look at the revised changes? Also, I've disabled deleting suggested tiles for now as they will always come back since we're seeding the collection view with suggested tiles if there isn't anything available. There seems to be a lot more thinking that needs to go into 'removing' the tiles but I think this is a good start for now.", Comment on ', ', Commit ', This is working pretty well for me. One case I noticed that's broken: scrolling the list down to hide some of the thumbnails, then long-pressing, then scrolling back up. After these steps, the close button doesn't appear on the thumbnails that come back into view (this worked correctly on the first version of your PR). One other question: I noticed long-pressing the list of sites below the thumbnails also triggers the close buttons, but the buttons only appear for the thumbnails above the list. Should we change it so only the thumbnails area is long-pressable? If I'm farther down in the list without any thumbnails visible, then I long press, the only thing that happens is the Done toolbar appearing at the top, which is kind of confusing. Other than that, looks fine to me.", One other (less important) detail: we might want to turn off editing if the user taps the URL bar or opens the tab tray; it feels strange coming back to the Top Sites panel with editing still active. I'd be OK if this was fixed as a separate follow-up, though.", Thanks for taking a look at the changes. I've fixed the issues you mentioned above and I'll follow up with a patch to end editing when tapping the URL bar. I'll go ahead and merge this in then.", Created ', to track URL bar tapping issue. Merged.', I'm wondering what future interactions can be applied now with the inclusion of this addition. Long-tap on a top-site and open in background tab or bookmark (or anything in a context menu) can't be used." 
id=1124828	 'I also just discovered this setting is also present in another place outside of "Accessibility" section, and that is in Settings.app > Display & Brightness > Bold Text.', These are all excellent suggestions. Thank you.', I filed ', specifically for Reader Mode a11y changes.', Boris, I know yo ve helped with these in the past. Any interest in working on this too?", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Yes, I am still interested. I know I took a bit of a "vacation" from Firefox for iOS accessibility recently :-) I will look at this and the font-size bug in the coming days (I expect I will be able to post PR in 1-2 weeks). Please feel free to assign this (and the font-size bug) to me.', FYI, I just started working on this, so I expect a PR in 1-2 days.', Created ', ', Pull Request Already fixed: merged as ', Bug can be closed.' 
id=1221700	 'Created ', Screenshot 2015-11-27 13.17.36.png Noticed we have a similar X we're using for the top sites tile. I can make this into a template and shade it orange for top sites and gray for search view. It looks slightly different than the one in your mock up though. Do you want me to go ahead and use this one or a new one?", Created ', ', Link to Github pull-request: ', Taken from ', and rolled into it's own PR for easier consumption.", Comment on ', ', Link to Github pull-request: ', Added snapshots for the search view: ', Actually, let's use the same X we're about to use on the Find in Page bar. Attached (in case we can't use that asset directly\u2014see below ping for bnich) along with a screenshot for reference. Brian, what did you name the X in your branch? I don't see the assets yet in master so I don't know if you made an .xcassets for it or not.", Created ', clear.zip X asset', Created ', LoginsSearch.png Reference screen for updated X that matches the one we're using for Find in Page.", Updated PR with new x ', Comment on ', ', Link to Github pull-request: ', On the basis that my Xcode is playing up when it says it can't find the test case any more (it did at the beginning) I'm going to say this LGTM.", (In reply to Robin Andersen :tecgirl from ', ) ', I named it find-close, but could change that branch to use whatever name we pick here so it can be more generic.', I just named it 'clear' since that was the name of the image file.", Robin, would it make sense to do the ui-review when the screen is complete so you can see the interaction and how it works with the full screen instead of the individual component, or both?', Merged Master 75c8d71f4ff92b7df4f0014d89056ae2084ee22d We can do UI verification when it's part of a screen that we can display." 
id=1136220	 'Posted a message to the Apple Developer Forums about automating this process: ', There used to be an option to import xliff files from the command line, but that is now missing in action. Gut feeling says that Apple dropped this in favor of manual importing via Xcode because that lets people visually resolve conflicts. (Which is probably a good thing, but something I could live without for integration builds)', I see that there was a comment to your inquiry. Considering the possible difficulties associated with importing localizations, we should get the 14/28 locales who are complete in the dashboard imported into the Client.xcodeproj asap.', Created ', ', PR: ', Merged the PR. This works ok for importing locales. But there is an issue with exporting after this. Needs to be documented in the export bug and fixed.' 
id=1199370	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request There are no good solutions to this problem, because Top Sites is explicitly not Top URLs, and mapping multiple URLs to a single common URL can never be canonical.', Merged.', s/baseDomain/host', 3b80d036051235bebadf0fb07bb80d798019b5aa' 
id=1211982	 "After doing some work on the layout, using a basic flow layout won't work for this layout because of the way flow layout auto flows your items. For the various devices we have fine grained control over how many columns/spacing we want and we don't want the 'flowing' nature of flow layout. Closing as WONTFIX." 
id=1147175	 'Created ', ', Pull request This uses a "namespaced" SDWebImageCache object for storing these. That should allow us to delete them exclusively (we should also use this to keep favicons per-profile, I\'ll file a bug for that...)', I updated this to address some questions. Using our own cache for it actually causes some problems. Namley, imageView.sd_loadFromUrl(...) won't look there! There's no good fix I could find, so I actually just forked the method into a new: imageView.moz_loadFromCache(url, cache, completion) method. Its drastically simplified, but works well for this simpler use case.", Comment on ', ', Pull request Mostly looks OK to me, with some questions about the keys we're using.", I see the pull request already merged into master branch and hence this bug might be no more valid now.', Thanks, looks like we just forgot to close this. ' 
id=1279315	 'Created ', ', Link to Github pull-request: ', Let me know if this will provide the info you need to track down the error states.', Comment on ', ', Link to Github pull-request: ', This should cover exactly what I need - the errors that are displaying which statuses.', master c874f1f7c84fca23a240cc2584cb68a12ca4a814', v5.x 4b589d4' 
id=1160781	 'Created ', ', Pull request' 
id=1296840	 'I cannot reproduce the issue on the following page, with Firefox for iOS 5.0 (2) on iOS 9.3.4, on iPhone 4s ', Can you provide the URL of the page the issue happens? anyway, moving to Firefox for iOS - General for now.' 
id=1224300	 'it is on iPad 2 with iOS 8.3', I'm pretty sure Private Browsing is limited to iOS 9 and higher.", iOS 9 based on available APIs. (Hubert, iOS 9 on the iPad 2 is terribly slow)', EWONTUSE', Note that at no point the "What\'s new" say iOS 9 is needed for private browsing. That\'s part of the problem that WONFIXING will not address.', iTunes only shows a little of the description, but if you "...More" you\'ll see: BROWSE PRIVATELY - Your personal information belongs to you. In Private Browsing mode, Firefox won\u2019t remember any of your history or cookies, but new bookmarks will be saved. - Delete your browsing history, passwords and more in a single tap. - Choose the private data you want to remove. - **iOS 9 required for Private Browsing mode**', (In reply to Mark Finkle (:mfinkle) from ', ) ', Nope. See screenshot from the iPad I will attach in a second.', Created ', Screenshot from the app store. As I said, it doesn't show the requirement in the App Store description.", Store description ', Maybe we want to be picky, but what I posted is what one see when updating the app. Not the other one. But anyway. I seems it is not important.' 
id=1170237	 'See also ', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Reduced it by 20px so now the user needs to pull 60px in either direction to delete the tab. Thoughts?', Comment on ', ', PR ', This feels much better, feedback from some colleagues was positive as well. Lets land it and see if it addresses the issue people had.', Merged.' 
id=1236919	 'Created ', ', PR', Comment on ', ', PR LGTM!' 
id=1182612	 'Created ', ', Pull Request' 
id=1249840	 "Known issue. Third party keyboards are known to cause issues with Firefox. We've disabled support for the time being. ", However we are also allowing one at their own will to re-enable third party keyboard with caution. ', *** This bug has been marked as a duplicate of ', ***', The bug I submitted (1237695, now closed as a duplicate of this) also mentions that the stock iOS keyboard text prediction isn't working either. Is that something that is going to be addressed?" 
id=1096965	 'Created ', defaultFavicon.zip', Created ', ', Pull request', Comment on ', ', Pull request Looks good! For future reference, you should add an r? for someone when you put a PR on Bugzilla, just to make sure someone sees it (but we don't have that many PR's that its totally required right now)." 
id=1127606	 'Fixed by switching back to the OS context menu (', ).' 
id=1191058	 'I can run a quick profile on it but I would put my money on the blurs as they are computationally expensive to render. Just curious, how important is it to use blurring instead of a flat or alpha faded color?', Getting the right color from the favicons proved tricky, and less reliably well than the blurred version. Can we cache the blurred image so we only generate it once per favicon (favicons aren't likely to change often...)", Ya good idea - we can take a snapshot of the rendered blur and use that instead of dynamically blurring it since we don't need dynamic blurring.", Add perf test for timing on blur render', I know there was some discussion going on last Friday about which approach to take with this bug. NI'ing", I think we're done with this for v1, now we've killed the background blur. Punting to 1.x.", Still reproducible without background blur, especially seen on rotation', What's incomplete about this?", Stefan and I considered this "just about fixed enough but not going to be acted on further unless someone screams", which is the definition of INCOMPLETE.', This is even more noticeably worse on iOS9 IMO.', No patch here, re-opening', This also causes a terrible drop in frames when cycling through open applications on ones device and passing by Firefox on about:home, the application listing slows down to a crawl.', So interesting note: Yesterday we were talking about how when in the application switcher, the app is showing a screenshot instead of the actual app. Well this morning while using the messages app, I definitely saw the UI update while in the app switcher so I think that while in the switcher after being in Firefox we are rendering the blurs and everything which would cause the performance hit.', I'm going to start chipping away at some of the smaller sub-bugs to see if we can get something in for 1.1", Removing 1.1+ tracking since this meta won't be completed for 1.1 and is scheduled for 2.0", Majority of this bug is complete with the blur fixes. Micro perf improvement can be found here: ' 
id=1141575	 "I'll see if I can instrument and graph CPU/memory usage here while debugging.", Don't see this anymore on master, might have been fixed with drawer fixes.", 10 tabs on my iPhone 6 got me 2015-03-25 13:52:50.475 Client 6736:2474520 Received memory warning.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Did ', help this at all Aaron?', Nope. I still can't open more than ~8 or 9 tabs without 2015-04-27 15:30:21.983 Client 6898:2690095 Received memory warning. 2015-04-27 15:30:39.024 Client 6898:2690095 Received memory warning. and then death This might be another issue though.", I can investigate.', We've fixed a number of memory leaks since this was filed. Are you still seeing this, Aaron?", Yes, especially with compact tabs.', Hey Aaron, I ran this on my iPhone 6 with 15 tabs and ran the profilers on it and I'm seeing 55 FPS while scrolling and the memory seems to cap out at 20 mbs regardless of the number of tabs open. Are you still seeing this?", Aaron: reopen if this is still happening.' 
id=1215584	 'WFM.', Reopen if we can get STR or repro with tools.' 
id=1270859	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Merging this in for now to add follow up work for aurora builds.', master df9558a233a38dbec519c7a991213ebbcc5d468f' 
id=1151530	 "I would fix the margins and the vertical alignment, but I changed the font weight of the titles in the two-line cell and just haven't updated the mockups. I think the medium weight I changed it too looks much better on device, and is easier to scan.", (In reply to Darrin Henein :darrin from ', ) ', Ah, OK. Thought some of those changes may have been intentional, but just wasn't sure which ones. Thanks for the clarification!", Created ', ', Link to Github pull-request: ', Darrin, what do you think of these tweaks?', Created ', empty cells Looks great Brian! Is it an easy fix to make empty cells have the same margin/inset (see screenshot)? Bookmarks especially looks off, and has been pointed out by a few testers already.', *** ', has been marked as a duplicate of this bug. ***' 
id=1282887	 'Created ', ', Link to Github pull-request: ', Created ', Screen Shot 2016-06-29 at 15.05.45.png The patch causes the test to pass but I think highlights an error in the test. The test ensures that if we request desktop site on one item in the back forward list, it does not change the menu options when moving to another item. However when replicating this test on real sites, the test does not pass (on Simulator, iPhone 6, iOS 9.3 & iOS 9.2) STR Open a new tab Navigate to facebook.com (resolves to m.facebook.com) Navigate to twitter.com (resolves to mobile.twitter.com) Long Press on Reload button Select Request Desktop Site URL updates to twitter.com press back arrow URL is still m.facebook.com Long Press on Reload button Expected: Long press action is Request Desktop Site Actual: Long press action is Request Mobile Site', Interesting find! Digging in, here\'s what I found: * When going back, we call restoreSpoofedUserAgentIfRequired 1 , which pulls the User-Agent HTTP header from the request we\'re using to go back. * For most sites, WKWebView (correctly!) remembers the UA used to load the page when going back, and the User-Agent field will be "" unless that page was loaded with RDS. * For some inexplicable reason, the Facebook/Twitter pairing causes `newRequest.valueForHTTPHeaderField("User-Agent")` at 1 to be set to the desktop UA when going back to Facebook. Seems like an iOS bug; it doesn\'t make sense that the UA header from one site would be carried over to a separate request. This is a separate issue, so I filed ', with the above info. 1 ', 2 ', Comment on ', ', Link to Github pull-request: ', Cool, if this is an edge case caused by certain site combos cool. I was just unlucky in the 2 sites I picked to test this IRL then. I was, understandably, concerned that our test was testing the wrong thing if I could replicate it on the browser directly.' 
id=1201925	 'Hi Aaron, I submitted a PR for this: ', Over to a reviewer', Created ', ', ', Comment on ', ', ', This looks great. Thanks for the patch!' 
id=1163122	 "I dug into loading the WKWebView lazily and it seems that there is some high coupling between the non-browser HomePanelController and the way the BVC/TabManager is 'opening' it. In viewWillAppear, we're creating a new tab, which by definition is a Browser and requires a WKWebView to parse the inputted URL to determine if we should show the Home screen or not. It looks like it was designed so that the flow of opening a web page or home page uses the same logic within the TabManager. One idea is we could define a protocol interface named Tabbable which has definitions for methods a Tab would need (get snapshot, show, select, etc), refactor the Browser class to implement that interface, and create a separate, non-browser-based class called NativePanel or something that also implements the Tabbable protocol. We would also move all of the web-specific code into the Browser class from the TabManager. This would give us the following advantages: 1. Able to implement more native panel views without overloading the tab manager with panel specifics 2. Thin down the TabManager to be responsible for only the management of tabs and move browser specific logic to the Browser class 3. Increase startup performance by eliminating the need for a WKWebView load when the user is brought to a fresh instance of the app with no tabs and only the HomePanelViewController. On top of that, we would need to built our a thin router object that would handle determining what to show for a given tab when the BVC makes a request. Anyways, just my 2 cents on it. I think this might be more work than we originally thought.", After removing the layoutIfNeeded call and other minor adjustments, it looks like viewDidLoad is more performant now and only contributing to 4.1% (33ms) of the startup delay. The two larger culprits now are: 1. 18.1 % (145ms) BrowserViewControler.viewWillAppear -> TabManager.addTab -> Browser.createWebView 2. 16.0% (121ms) TabManager.init -> WKProcessPool.init As mentioned above, the current architecture of relying on a WKWebView for routing URLs and the high coupling between a 'Tab' and WebView makes it difficult to fix this without larger refactoring. Additionally, I found out that we do this same thing on Android to facilitate addons loading custom panels which is something we might want eventually. Not sure how to move forward with this for v1 The second point is related to the cost of create a WKProcessPool. Not sure if this is something we want to allocate on a background thread or not. Should I close this bug and open new ones?", (In reply to Stephan Leroux :sleroux from ', ) ', Even on Android we deliberately make home panel add-ons write their data into a Java-visible DB so we can show the home panel without the add-on being loaded. Perf now trumps possible add-on home panels later. ', Sounds like we need to delay WK stuff until after initial startup, presumably by rolling on with your Tabbable/Tab protocol suggestion. My feeling is that the perf impact is enough that we should do it now. ', Sounds like you have some fixes for this one, so let's get those in -- even small wins are wins. Then yes, another bug for delaying WK init.", Okay sounds good. The fixes I mentioned are already in master so I'll go ahead and close this and open a new bug for delaying WK stuff." 
id=1227518	 'We\'ve defaulted "Saved Logins" to not toggled in Firefox 1.3 (', ) as it kept causing trouble for users with unexpected behaviour as you outlined (', , ', ). While we're addressing that core problem, we've had this bug as ", and it was deemed WONTFIX. Should we wish to preserve the overrides we can open either this bug or the other again. *** This bug has been marked as a duplicate of ', ***' 
id=1173015	 'Looking at uz/firefox-ios.xliff, maybe it is this one causing trouble? <trans-unit id="Decrease text size"> <source>Decrease text size</source> <target/> <note>Accessibility label for button decreasing font size in display settings of reader mode</note> </trans-unit> That probably results in targets 0 .text to be None. Since there is no text in the element at all.', Hot fix while I am making a build .. needs to be turned into a real commit: diff --git a/scripts/xliff-to-strings.py b/scripts/xliff-to-strings.py index ee73960..63ebebd 100755 --- a/scripts/xliff-to-strings.py +++ b/scripts/xliff-to-strings.py @@ -50,7 +50,7 @@ def export_xliff_file(file_node, export_path, target_language): trans_unit_id = trans_unit_node.get("id") targets = trans_unit_node.xpath("x:target", namespaces=NS) - if trans_unit_id is not None and len(targets) == 1: + if trans_unit_id is not None and len(targets) == 1 and targets 0 .text is none None: notes = trans_unit_node.xpath("x:note", namespaces=NS) if len(notes) == 1: line = /* %s */\ " % notes 0 .text', I imagine that's the culprit. Is this the only locale affected? uz tends to work on Pootle, so I'm keeping my fingers crossed that this isn't systemic.", Have you already committed that? I updated my svn repo to make the fix myself and don't see the same error. I see a complete <target></target> tag set for that string.", I pushed a fix to the release branch which I will import on the main branch when i am done: ', Maybe one of the scripts that run before xliff-to-strings causes this <target/> element? I can investigate later.', Assigning to myself as a reminder to pull in the commit mentioned in the previous comment.', Fixed with ' 
id=1184767	 'Created ', ', Pull req.', Comment on ', ', Pull req. We have a really bad test for timing these queries (i.e. time to add 10000 visits, time to query 10000 visits). It would be nice to update it and get some real numbers as we change/improve this stuff. Different bug though.', Can you point me to the perf tests? The only thing I found was testGetPerformance in TestHistory, which only adds 10 sites with one visit each. I would like to have a clue of what the top sites perf impact is from this change (and thus whether I should add an approximation or pre-calculation before landing), and not having to write those tests would be awesome :D', I wrote a perf test. 500 sites, 20 local and 20 remote visits, fetching 10 sites by frecency 5 times. Old, simulator: 0.070sec. New, simulator: 0.140sec.', I think the perf difference is because the simpler query can use idx_visits_siteID_date as a covering index. So this should be pretty easy to fix.', Sorry, that is the perf test! I cut it down drastically at one point and never increased the timing, but it has enough bugs its just worth rewriting.', Second round of changes looks good to me. We should remember to set a baseline in XCode once this is running automation. (Also, yay for more tests here!)', Yay commit message typo. Note that I added an additional commit that upweights local sites super-quadratically, not linearly. That means a site yo ve visited four times on your phone counts as (4 * (5 + 4)) = 36 times on desktop. The reason for this: many users' desktop top sites (like Twitter and Facebook) will have thousands of visits. Those won't all sync -- there's a limit of 20 visits in a Sync record -- but after a few weeks, hundreds of visits will have made it to the phone for active sites. We can revisit the exact scoring algorithm as we get more experience." 
id=1252165	 
id=1193966	 "Steph, can you morph this bug to be one of those, and file another that's also nommed?" 
id=1144919	 'I\'d like to increase the scope of this ticket. We want to: 1) improve the look of the Delete button; 2) investigate adding a "long swipe left" to delete without confirmation; 3) try to add messaging saying that you can long swipe (if you\'ve never long swiped, and just used the regular delete button); 4) look into adding an "undo stack" of recently closed tabs. (This is strictly wishlist.)', I don't think we need a Delete button for tabs. I'd rather nail a more dynamic swipe gesture/interaction as outlined in ", . Let's address undo/recovery in another bug, probably not short term though.", We moved to a swipe-close without the button \\o/' 
id=1154927	 'Created ', ', PR There's going to be a bit of conflicts with the gesture patch you have but I think that they will merge together nicely once we fold one of them in. I also addressed the issue where on rotation, there would be a gap at the top of the web view that was being caused by the scroll view not updating it's bounds whenever there is no longer a status bar.", Closing previous PR in favour for PR submitted for this bug: ', Resolved as part of ' 
id=1166390	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1230233	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', Merged Master e035901a3aab293befcc4a52fa468c5332b9b292' 
id=1177109	 "Do you have a specific URL? I'm able to scroll on SUMO fine on articles, note there's a 'jumping' bug we have on file " 
id=1219326	 "We can change the tint colour automatically, but would it be possible to have just an altered set of the clock button asset? Currently, the hands on the blue version are white, rather than transparent, which does't work for the private themed clock button.", Created ', paneliconhistorySelected.zip Nice catch!', Created ', ', Pull request' 
id=1123086	 'This can be closed as fixed because it has been fixed by ', Thanks!' 
id=1254606	 'Created ', ', Pull request Just an update to the Carthange.resolved to include the latest version of mozilla/readability' 
id=1146489	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1196950	 'Created ', 1196950.png A few things are happening here. The widget doesn't support accessibility, so the font sizes are set. The systemFontOfSize is 15. On the 4s, 15 looks huge. FontOfSize 14 looks rather close to the visual spec (see attachment\u2014I only changed the 'Add to' strings to give an example). At 14, this localization renders nicely. That said, I'm not really a fan of static size text when it comes to localization, but it's good to have a starting point. Let's decrease systemFontOfSize to 14 if it doesn't cause any regressions elsewhere, or hardcode it to 14, *and* add the option of scaling it down to a minimum of 12 if the string reaches the max character limit. It doesn't make sense to truncate an action.", Created ', ', Link to Github pull-request: ', Created ', screenshot.png I left the default size to systemFontOfSize (15), but it now downscales for long strings, as shown in the screenshot. I set the downscale ratio to 0.8. Don't hesitate to tweak the values.", Comment on ', ', Link to Github pull-request: ', :karim - I applied to font change requested to ', , merge that, and we're good!", needs someone else to land it I imagine', Looks like :tecgirl's modification needs to be applied to Karim's PR then merged? I see the only difference between the two is the modification of the label text size from system size to 14. Is this correct? I can combine these and merge in int.", Merged fix into master and v1.0 branches.' 
id=1134792	 'Created ', ', Pull request WIP patch that creates a scrollable suggestion row. Darrin, I know you were still trying to figure out whether we want a scrollable or wrapping suggestion list, so hopefully it'll help to get an early feel for it.", Comment on ', ', Pull request Comments in ', .', Comment on ', ', Pull request Updated to use a wrapping flow layout instead of a scrollable one.', Comment on ', ', Pull request LGTM', Comment on ', ', Pull request Merged.' 
id=1159319	 'Created ', ', PR: ', Comment on ', ', PR: ', Looks good to me.' 
id=1223162	 'Schedule using AHA card.', Since the notification area is a custom view we're building, we can add more than text if we wanted to. Do you want to include a spinning sync icon or any other glyphs in the status messages?", Created ', ', Link to Github pull-request: ', (In reply to Stephan Leroux :sleroux from ', ) ', Let's animate the ellipsis!", Comment on ', ', Link to Github pull-request: ', Looks good!', Comment on ', ', Link to Github pull-request: ', Looks good. As long as our messages are always short, even when localized, this should work for most cases.', master 4593dfdcd17417cfc9d19a4acc80ea98da9db341' 
id=1234266	 'Looks like a regression from the UIAppearance changes.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request', Comment on ', ', Pull request Yay, it's fixed!", Went ahead and landed this since bkmunar is working on some URL bar stuff now, and this bug makes it more difficult. ' 
id=1168859	 'Maybe even portrait too, this is natural to the system rather than horizontal swipe', Going to change the threshold instead: ', We don't want to add vertical swiping for now. WONTFIX" 
id=1268529	 'NI for screenshots and deadline', Thank you all, we've come along quite a bit.", I have contacted individual teams that had completed v3.x but are still incomplete on v4.0. Some have already answered they are/will catch up. Waiting now for screenshots update to share on dev.l10n mailing list with localizers. Thanks!', I landed a first version of the list in ', It's the same as v3.x, minus es-CL (on team's request). Sadly that locale is not supported by iOS, and it doesn't make any sense for them to work on it. For the record, l10n file was removed in ", As soon as we have screenshots, we'll need to evaluate the status of Songhay, and also check how a few incomplete locales look (km, rm, tl, tr, uz).", Added ses to list of locales ', Per discussion with Delphine, I think we're good here. We added 'ses', no point in dropping the 3 missing locales for now, we'll need to re-evaluate them next cycle." 
id=1247944	 'Created ', ', Pull request When running fastlane against the carthage branch I encountered a build error where client-bridging-header.h couldn't find the adjust import. I realised I hadn't properly moved all the carthage dependencies from the bridging header to file imports. This resolves that.", Comment on ', ', Pull request LGTM' 
id=1148835	 'I have a WIP for this here: ', Created ', ', PR: ', Comment on ', ', PR: ', Approach is OK, but I think this could use a fair amount of cleanup first. Also, let's be careful to avoid regressing the toolbar behavior on about:home.", I've been playing lately and noticed that snackbar's don't show on about:home. We need to redo that approach. Its too fragile. I'll file a bug for it.", Comment on ', ', PR: ', I don't have much to add on top of brian's review. Just one thing: This introduced a regression with the share popover: on iPad, tapping the share button greys out the screen but does not actually show the popover. Can that be fixed as part of this PR? It is probably just a matter of specifying the correct source view/rect.", I'm taking my r+ and running!", Had to land a follow up: ' 
id=1212992	 "Apple's Reminders app does the same." 
id=1281476	 'Created ', ', Pull request Mocking FTW', Comment on ', ', Pull request The first test needs a tiny change, but otherwise, looks good.' 
id=1162555	 'Should have searched better. *** This bug has been marked as a duplicate of ', ***' 
id=1226004	 'I see no reason why not\u2026', Created ', ', Link to Github pull-request: ', For reference this was the original PR that we landed: ', Can we please verify that 1281 is the same?', For reference this was the original PR that we landed: ', Can we please verify that 1281 is the same?', It's not exactly the same; I resolved a conflict in .ja (presumably caused by ", ). It's based on the same diff, though.", mconnor, please retrospectively review. v1.x: ', master: ', I don't think iOS has MozParam support for prefs, so we need to change the Yahoo Japan commit to hardcode mozff as a normal param. Other than that everything else looks correct, thanks for the quick pickup!", v1.x: 2b181f1 master: f3aff16' 
id=1237903	 'In our opinion, the default suggested sites are more important than the history. When the user sync data from desktop or the browser in use for some time, the history sites will instead the default suggested sites, and difficult to get the default suggested sites back by delete history sites.\r BTW, we think it not make sence that the default suggested sites were displayed in bookmark panel\uff0c because they are not bookmarks. ', Created ', ', Pull request', Comment on ', ', Pull request (Copied from PR comment) As mentioned in the email, I think that we should separate 'Speed Dial' from 'Top Sites' for a couple of reasons: * What defines Top Sites is the fact that the more visited sites bubble to the top so having the default sites pinned to the top doesn't really match the use case for this panel. * I'm concerned about having locale checks being embedded in various parts of the data source as this makes it much harder to debug by introducing more code branches to follow. An alternative approach we can take is: * Extract locale checks from TopSitesPanel into HomePanels.swift where we configure which panels to show. Here we can slot in a new 'Speed Dialer' panel without impacting other locales. * Subclass 'TopSitesPanel' for the 'SpeedDialer' and implement the logic for keeping the tiles at the top. Ideally we would refactor 'TopSitesPanel' into a more generic 'Tiled Panel' class but we can address that when we start adding additional functionality to the dialer. Thoughts?", I have updated the patch that just want to express my meaning well. I know that some methods maybe not standard, the code is just for demo. The followings are what I have done: 1. The default suggested sites always on the top of the topsites. 2. Add a setting to general settings. 3. Users can enable/disable the setting to show/hide the default suggested sites on topsites panel. (In reply to Stephan Leroux :sleroux from ', ) Maybe we can explain it from the other side. We preset the more popular sites which are also the more visited ones for most people. For a few people who do not want to use these sites, they can hide the default sites by change the setting. In our opinion, 'Speed Dialer' will be much different than 'TopSitesPanel', such as add/delete/update features. 'TopSitesPanel' is good enough if we can make some small change to it, and 'Speed Dialer' is not necessary.", I've created a new bug to track this feature in the context of building a speed dialer panel for supporting this functionality. *** This bug has been marked as a duplicate of ", ***' 
id=1299535	 'Created ', Screenshot 2016-08-31 09.39.14.png', Hi, can I take this one?', Hi Nikolay, I\'d love for you to work on this bug. This is my most wanted feature. I wish I had the time to work on it but sadly I\'m too busy with other stuff. I\'d love if you\'d take it on and finally get this done! To assign a bug to yourself, you need to click the "take" link next to the "Assigned to" section. And then press save. This lets everyone else know that you are working on this feature and avoids cases of two people working on the same thing. As for where to start, The screenshots should be helpful and should give you a good starting place. The current search settings code is here ', If you need any help feel free to reach out to me on IRC. I'm in the #mobile channel -> @farhan", Hey Farhan, Looks like no one has been working on this issue yet. I would love to take it up, but for some reason I see no `take` link anywhere near `Assigned To: Nobody; OK to take it and work on it`. Also to begin with adding the 'Add Custom Search Engine' row, should I add another option to model.orderedEngines itself and handle it in an else? Or should I add an `else if indexPath.item < model.orderedEngines.count - 1{` condition for the Quick-Search engines, with the 'Add Custom Search Engine' option handled in an `else` in the UITableViewDataSource methods in the SearchSettingsTableViewController? I would really appreciate opinions on how I should move forward with this. Regards, Pushkar", Hi Pushkar! I know the screenshot doesn\'t suggest this but I\'d recommend you make a separate section with only the "Add custom engine button" Also add a title to the section similar to the 2 existing sections. Something like "Custom Search engines" Then in that section you\'ll have one item called "Add Custom Search engine" In the cellforRowAtIndexPath you\'d do something like else if indexPath.section == CustomEngineSection look at how the "SectionDefault" is done for an idea. Also if you are up for it. I\'d love if you could refactor the cellforRowAtIndexPath function. Having a large and growing if statement like that make for messy code haha. in that section you\'d create your cell that links to the new form that lets you add a new search engine. If you are more comfortable with having me follow along send me a link on IRC to your branch (@farhan) and you can ping me as you work on it for help :) I\'d recommend first writing the additions to SearchSettingsTableView before writing the new CustomSearchAddController. If you are up for it. Let me know and I can assign this bug to you.', Hey Farhan, Of course I'm up for it. And yep, a separate section makes sense. I'll see what can be done about refactoring it too. I'll begin work on the SearchSettingsTableViewController in a while, and will send you the link to my branch once I do.", Created ', Settings - ', Here's the latest Mockup of the Search Settings Page.", Created ', Settings - Search - Add.png Latest mock for the add form.', Created ', Settings - Search.png Search Settings Mockup', Created ', Measurements - Search - Prefs.png here are some helpful measurements needed to implement the mock-ups', master ', Thank you for all your work Pushkar! I can't wait to use this." 
id=1183690	 "The remaining dependency, autocomplete flickering, isn't directly related to the URL bar like the rest of these bugs. I think we can go ahead and close this." 
id=1171145	 'Failing code is the last line: private func removeCompletion() { if completionActive { let enteredText = text.substringToIndex(advance(text.startIndex, enteredTextLength))', We\'re calling advance({index position: 0}, 24) The current string is "', ", which has 24 characters. 24 is out of range. 23 works. endIndex is 23. I guess this is a failure to remove a completion when the entire completion has been typed. The docs: /// The position of the first `Character` if the `String` is /// non-empty; identical to `endIndex` otherwise. var startIndex: String.Index { get }', Created ', ', Pull req.', Comment on ', ', Pull req. Changing this over to bnicholson because he wrote most of this code.', Comment on ', ', Pull req. I'm a little confused about what's causing this. insertText() doesn't update enteredTextLength until *after* it calls removeCompletion(), so I would have expected enteredTextLength to be 23 in your case. I can't reproduce, so it's hard to investigate. Either way, this looks like a good safety argument to have." 
id=1250536	 'Sorry, I inadvertently submitted the bug for FF OS instead of FF for iOS ! I made the changes afterwards, but should I rather resubmit it correctly ?', We don't sync in response to tab operations, or browsing bookmarks, or just about anything \u2014 the only time a sync will run and do anything is: * soon after saving a password * soon after launching the browser * every fifteen minutes. So if yo re seeing stalls while using the browser a few minutes after opening, it's probably not Sync. If yo re seeing this soon after launching the browser, but more than a few seconds, Sync might be failing for some reason. We would need logs to determine that, and we don't currently have a way to get them from a release build.", Indeed, it seems it always hangs shortly after launching it, whatever I am doing at that moment. Let's say typically 15 seconds after launch. It freezes and eventually crashes one minute (or so) later.", Does it always crash? Do you have crash reporting and sharing with third-party developers turned on in the iOS settings app? Can you get a crash log from the device? Settings > Privacy > Diagnostics & Usage Make sure "Automatically Send" and "Share With App Developers" are both on. Tap "Diagnostic & Usage Data", and see if there\'s anything in there for Firefox.', @rnewman : The settings you mention were off. I\'ve juste truned them on. In Firefox itself, "Send crash reports" and "Send anonymous usage statistics" were on. In "Diagnostic & Usage Data" there are indeed some Firefox related logs. I attach one of them.', Created ', Log from "Diagnostic and Usage Data" (iOS)', Needinfo for symbols.', Symbolication from Thread 2: static Visit.fromJSON(JSON) -> Visit? (in Storage) (Visit.swift:74) static Visit.fromJSON(JSON) -> Visit? (in Storage) (Visit.swift:77) partial apply for thunk (in Sync) (HistorySynchronizer.swift:0) specialized specialized CollectionType<A where ...>.map<A><B where ...>((A.Generator.Element) throws -> B) throws -> B (in Sync) (HistorySynchronizer.swift:0) HistorySynchronizer.(applyIncomingToStorage(HistorySynchronizer) -> (SyncableHistory, records : Record<HistoryPayload> ) -> Deferred<Maybe<()>>).((applyRecord #1)(Record<HistoryPayload>) -> Deferred<Maybe<()>>).(closure #1) (in Sync) (HistoryPayload.swift:37) static (>>> infix<A, B> (Deferred<Maybe<A>>, () -> Deferred<Maybe<B>>) -> Deferred<Maybe<B>>).(closure #1) (in Shared) (DeferredUtils.swift:27) Deferred.(bindQueue<A><B> (Deferred<A>) -> (OS_dispatch_queue, f : (A) -> Deferred<B>) -> Deferred<B>).(closure #1) (in Shared) (Deferred.swift:94) partial apply for Deferred.((_fill in _64863D17A065AD747F9AFBDCF9C2ED6A)<A> (Deferred<A>) -> (A, assertIfFilled : Bool) -> ()).(closure #2) (in Shared) (Deferred.swift:0)', Well, that's a little confusing. ", Created ', ', Pull req. This shouldn't happen -- visit timestamps should always be positive, because it's not the 1960s. But if they're not (and somehow that seems to be the case here), we would crash.", Comment on ', ', Pull req. Could this happen if their devices have the wrong date set, or are timestamps always calculated server-side?', My device has the right date/hour, if it's the question.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', These visit timestamps are client clocks, so yes -- but they'd need to be set to a date prior to Jan 1 1970. Another hypothesis is that these microsecond timestamps at some point were chewed up and overflowed to yield a negative value. (In reply to PierU from ", ) ', This would be from another device some point in your entire history of using Firefox, at one moment in time, having a dramatically incorrect clock.', bcbe52f', v3.x 92f5c60', Just to confirm that the fix is OK in the 3.0 version : FF does no longer hangs.' 
id=1130228	 'Created ', ', Pull request Writing a navigation test with KIF was pretty nice, so I'd like to propose KIF as our framework of choice for automation. Granted, this is a pretty basic test, so there may be some bigger limitations with KIF that I haven't run into yet. Happy to hear everyone else's opinion.", Comment on ', ', Pull request LGTM' 
id=1104281	 'This has some good hints: ', The /// Style seems to work: ', The accepted answer in Stack Overflow also gives a good summary of what works right now. ', Nice. Just to repeat what is in the SO answer: Here are some things that work for documenting swift code in Xcode 6. It is very buggy and sensitive to colons, but it\'s better than nothing: class Foo { /// This method does things. /// Here are the steps you should follow to use this method /// /// 1. Prepare your thing /// 2. Tell all your friends about the thing. /// 3. Call this method to do the thing. /// /// Here are some bullet points to remember /// /// * Do it right /// * Do it now /// * Don\'t run with scissors (unless it\'s tuesday) /// /// :param: name The name of the thing you want to do /// :returns: a message telling you we did the thing func doThing(name : String) -> String { return "Did the \\(name) thing"; } }' 
id=1262945	 'Created ', ', Link to Github pull-request: ' 
id=1192480	 'Created ', ', Pull request Not an actual failure of functionality but caused by persisted history items across tests screwing up autocomplete. No need to rush this review for V1 release', Comment on ', ', Pull request Looks good - just a comment nit. Test works great for me.' 
id=1144251	 'Resolved as part of ' 
id=1204453	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1271880	 "Version 3.0 (11), iPhone 6S+. Outlook 2.2.9. Naturally, trying again tonight I can't repro and make it on an Okta screen from an internal Google Form. But I can repro general issues launching one app from another, so I think this is actualy an iOS bug I'm encountering on my device, not a Firefox issue. Safe to close." 
id=1152609	 'Base32 pull request: ', *** ', has been marked as a duplicate of this bug. ***', SwiftKeychainWrapper pull request: ', Base32 and SwiftKeychainWrapper PRs merged. st3fan's SWXML fork has my Swift 1.2 fixes, too. Nearly there.", Created ', ', Pull req.', This looks good. Should we coordinate this with the whole team before we do this? I'm all for doing this sooner than later.", Just to keep the bug up-to-date: there are a pile more fixes in my PR, and Stefan is carrying this forward to fix some broken stuff: 08:58:59 <@st3fan> bnicholson: i think the TwoCell* stuff needs a rewrite .. it is not very compatible with swift 1.2 anymore 09:12:55 <@st3fan> one more followup patch 09:13:32 <@st3fan> the LongPressGestureRecoginizer is badly organized and i don't really see how to easily turn that into swift 1.2 compatible code 09:14:23 <@st3fan> on second thought, it is fundamentally wrong to subclass UILongPressGestureRecoginizer and put logic and a reference to a webview in it 09:14:28 <@st3fan> needs a rewrite :-/ 09:16:35 <@st3fan> this suffers from the same flaws as the TwoCell* views .. you can't use self before a call to super.init() and they have a circular init dependency that jsut wont resolve in 1.2 09:20:11 <@st3fan> no we just need it to cancel out the original recoginzer that is on the WKWebView 09:20:31 <@st3fan> but the actual press handling logic should move into BVC probably 09:20:55 <@st3fan> i'll attack this - need to grab some lunch first , then i'll fix this His branch is at: ", Landed: ', I also fixed some deprecation warnings around calendar fields, and I set SWIFT_WHOLE_MODULE_OPTIMIZATION. Tests pass on my 8.2 device.' 
id=1164677	 'update: the asset actually looks good on the 6+, but is distorted on iPad 2, iPad Air, 4s, 5, 6.', Created ', ', PR: ', I merged this. Sorry for the delay.' 
id=1241504	 'Possible dupe of ', ?', Over to Catalin with the 6S', *** This bug has been marked as a duplicate of ', ***' 
id=1186939	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1228633	 '(In reply to Richard Newman :rnewman from ', ) ', I thought we counted this case as a transient failure. This is critical.', I just hit this on my personal profile on a real device, so this definitely happens in the wild. It's not a recoverable state if you don't remember your password. (Sometimes my wifi is flaky in the morning and I have wifi off and on, but I triggered a sync before I figured it out.)", We will take this for 1.3 but the code freeze is on Thursday so I've tracked it for 1.4 in case.", Nick, I know yo re in Orlando, but do you have an update on this? And while I'm writing: we should look at the other error codes we might get here and make sure we fix all of the transient cases, not just this one.", (In reply to Richard Newman :rnewman from ', ) ', No update, but it's in my queue. ", Roger that. I'm a little concerned that the `Deferred<State>` choice we made is no longer the right choice around... actually, I'm just going to look at this now.", Created ', ', Link to Github pull-request: ', Yo ll be pleased to know that the two tests fail if you revert the two relevant hunks \\o/", Research during reviewing: ', In particular: kCFURLErrorUnknown = -998, kCFURLErrorCancelled = -999, kCFURLErrorBadURL = -1000, kCFURLErrorTimedOut = -1001, kCFURLErrorUnsupportedURL = -1002, kCFURLErrorCannotFindHost = -1003, kCFURLErrorCannotConnectToHost = -1004, kCFURLErrorNetworkConnectionLost = -1005, kCFURLErrorDNSLookupFailed = -1006, kCFURLErrorHTTPTooManyRedirects = -1007, kCFURLErrorResourceUnavailable = -1008, kCFURLErrorNotConnectedToInternet = -1009, kCFURLErrorRedirectToNonExistentLocation = -1010, kCFURLErrorBadServerResponse = -1011, kCFURLErrorUserCancelledAuthentication = -1012, kCFURLErrorUserAuthenticationRequired = -1013, kCFURLErrorZeroByteResource = -1014, kCFURLErrorCannotDecodeRawData = -1015, kCFURLErrorCannotDecodeContentData = -1016, kCFURLErrorCannotParseResponse = -1017, kCFURLErrorInternationalRoamingOff = -1018, kCFURLErrorCallIsActive = -1019, kCFURLErrorDataNotAllowed = -1020, kCFURLErrorRequestBodyStreamExhausted = -1021, kCFURLErrorFileDoesNotExist = -1100, kCFURLErrorFileIsDirectory = -1101, kCFURLErrorNoPermissionsToReadFile = -1102, kCFURLErrorDataLengthExceedsMaximum = -1103, There are some really fascinating error codes in there; surprised nobody has hit this while roaming yet.', Comment on ', ', Link to Github pull-request: ', Two comments on the PR.', Reminder: when this lands on master, target-milestone=2.0. When uplifted to `v1.x`, clear needsuplift and set target-milestone=1.4.', (In reply to Richard Newman :rnewman from ', ) ', rnewman: I responded on the PR. Can you make any test changes you want, and then land? Otherwise, I should get to this by the end of the week. Thanks!', v1.x: 42e35c7 master: a9fe225', *** ', has been marked as a duplicate of this bug. ***' 
id=1253439	 "Perhaps something bad with my test profile's data; a full merge fails at the end with 2016-03-03 14:57:18.373 Debug SQLiteBookmarksSyncing.swift:344 deleteStructureForGUIDs(_:fromTable:connection:withMaxVars:) > Deleting 84 parents from bookmarksMirrorStructure. 2016-03-03 14:57:18.383 Debug SQLiteBookmarksSyncing.swift:372 insertStructureIntoTable(_:connection:children:maxVars:) > Inserting 333 records (out of 1727). 2016-03-03 14:57:18.388 Debug SQLiteBookmarksSyncing.swift:372 insertStructureIntoTable(_:connection:children:maxVars:) > Inserting 333 records (out of 1727). 2016-03-03 14:57:18.394 Debug SQLiteBookmarksSyncing.swift:372 insertStructureIntoTable(_:connection:children:maxVars:) > Inserting 333 records (out of 1727). 2016-03-03 14:57:18.402 Debug SQLiteBookmarksSyncing.swift:372 insertStructureIntoTable(_:connection:children:maxVars:) > Inserting 333 records (out of 1727). 2016-03-03 14:57:18.408 Debug SQLiteBookmarksSyncing.swift:372 insertStructureIntoTable(_:connection:children:maxVars:) > Inserting 333 records (out of 1727). 2016-03-03 14:57:18.414 Debug SQLiteBookmarksSyncing.swift:372 insertStructureIntoTable(_:connection:children:maxVars:) > Inserting 62 records (out of 1727). 2016-03-03 14:57:18.418 Error SwiftData.swift:160 transaction(synchronous:transactionClosure:) > COMMIT failed. Rolling back. 2016-03-03 14:57:18.418 Warning SQLiteBookmarksSyncing.swift:1088 applyLocalOverrideCompletionOp(_:itemSources:) > Got error \u201cAbort due to constraint violation FOREIGN KEY constraint failed\u201d", Created ', ', Pull req. The array form of db.run runs all queries in a single transaction. That fixes the first issue. I also tested the mirror->local flattening, and found some oddities. The second commit should prevent those from occurring.', Comment on ', ', Pull req. lgtm. It's *eventually* consistent, I'm sure :)", 8ac1d04', v3.x ba1fad1' 
id=1124506	 'Fixed with ' 
id=1232245	 'Looks like I lost track of how things work ', Removed the /scripts folder completely and moved it to ', Created ', ', Pull request on Github This should be good for review, but we need to make sure we don't have delays on the tools' side before merging.", *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Pull request on Github Emily can you merge this if it looks good?', PR merged. Not closing bug as there is a small amount of work to do to get things working with fastlane', Pushed some small fixes that I discovered while running the export-locales script: ', Created ', ', Improve workflow in export-locales.sh I'm making a few assumptions based on the existing paths (didn't find any documentation): * The firefox-ios-build-tools folder is placed at the same level as firefox-ios * The script is run from the main project folder as ../firefox-ios-build-tools/scripts/export-locales.sh Improvements: * Reuse existing virtualenv by default, since setting it up takes forever. Run with 'clean' parameter to set up a new virtualenv * Create a branch in the l10n repository, commit file individually. I've left the 'git push' command commented out, but it could be changed. Note: the main repository should really have firefox-ios-l10n and export-locales-env in .gitignore", Created ', ', Don't commit firefox-ios-l10-n repo for fastlane purposes", Comment on ', ', Don't commit firefox-ios-l10-n repo for fastlane purposes LGTM", Comment on ', ', Improve workflow in export-locales.sh LGTM Please test it well', Comment on ', ', Improve workflow in export-locales.sh LGTM Please test it well', NI for Stefan to merge the PR. Once merged we can close this bug for good.', Thanks Emily for the merge, we can close this bug.' 
id=1211744	 '71449b8 Reviewed as part of ', .' 
id=1199074	 "We can't search when change the default search engine to the Wikipedia(ja). And suggestion of search plugin does not display.", Created ', ', ', Swift 2.0 Patch', Created ', ', ', v1.0 patch', Comment on ', ', ', Question about the symbolCharacterSet().invertedSet, but LGTM otherwise.', Merged in master/v1.0' 
id=1160688	 'Created ', ', Pull req.', Comment on ', ', Pull req. Yup get rid of it. Sorry I did not do this. I just did not think of it when I imported the new code :-/', bd86d7a' 
id=1224224	 'iOS Safari does not support MSE: ', Firefox for iOS is just a wrapper of WebView just like all other browsers on iOS because Apple does not permit to use third-party browser engines on iOS. Is there anything we can do about this?', Nothing we can do about this right now. We're a WebKit browser." 
id=1295959	 " It usually complains about missing the Deferred framework if you haven't run the ./bootstrap.sh script. Make sure to run that prior to build. Also, I believe the latest release we support is 7.3 so it might be worth upgrading to that as well." 
id=1169998	 "Hmm\u2026 this seems to be totally intermittent. At first it wasn't working for any tabs / web pages. Now it suddenly started working again. Something odd, but will see if it happens again.", And now it's stopped working again :/", Do you have an example page where this happens?', It doesn't seem to be tied to any given URL unfortunately. I'm trying to work out a pattern, but it seems to randomly stop working and then start again.", bah! ```This gesture works on a single visible scroll view; if there are multiple scroll views (for example, a date picker) with this property set, or if the delegate returns NO in scrollViewShouldScrollToTop:, UIScrollView ignores the request. After the scroll view scrolls to the top of the content view, it sends the delegate a scrollViewDidScrollToTop: message.```', Created ', ', Pull request', Comment on ', ', Pull request r=me with a few comments in the PR.', *** ', has been marked as a duplicate of this bug. ***' 
id=1236709	 'Created ', ', PR', Comment on ', ', PR On the right track, but we don't want to leave overlay mode when selecting the home panels. Try it -- go to google.com, click the URL bar, then click one of the panel buttons. There's no easy way to get back to the page! Note that in AutocompleteTextField.swift, we have a highlightAll() method that makes this selection. We call this in autocompleteTextFieldDidBeginEditing in URLBarView, and that *should* be triggered every time the text field gains first responder. I'd start there -- can you verify that highlightAll() being called when it should be? If it is, try digging into the highlightAll() implementation to see if you can figure out why it's not working.", Comment on ', ', PR I can't seem to reproduce this\u2026 with out without using Search suggestions.", Comment on ', ', PR LGTM' 
id=1314371	 
id=1182323	 'Kill em all.', Post-triage thorough comment: Eventually we might want to do something like offer a streamlined re-login. Right now, though, if prefs stick around between installs but data doesn't, then sync won't work correctly. The short-term fix is to make sure that doesn't happen: a fresh install should act like a fresh install. This might have some bearing on ", , too.', Created ', ', PR ', This tries to detect "first-run" by the lack of a profile directory. If there isn\'t one, we clear any prefs/fx-accounts associated with this profile.', Comment on ', ', PR ', Questions/comments on the PR.' 
id=1096682	 'Created ', ', Pull Request This is a basic stubbed out version of this Adds a Favicons Protocol with a BasicFavicons implementation. Cursor protocol. ArrayCursor<T> implementation. And uses both on the tabs we have. I'm still not sure how to pass something like a Cursor<T>. I have a feeling it can't be done....", Comment on ', ', Pull Request Looks fine for now -- we can tweak stuff as we move along. (In reply to Wesley Johnston (:wesj) from ', ) ', So that's why getForUrls() uses ArrayCursor in the API rather than just Cursor? I agree that's something we should try to figure out, sooner than later, since it kind of kills the abstraction. Can you file a follow-up for this?", Merged.' 
id=1127497	 'This has been fixed as part of ' 
id=1201845	 'I have updated ', to document what to do if you are using a personal / free developer account with Xcode 7 (beta).' 
id=1141240	 'This should actually be doable using history.pushState() plus redirects (like we do for error pages).', This could be a slippery slope. Prepared to drop this from tracking if it becomes an issue.', Created ', ', PR', Comment on ', ', PR Getting closer! Left a number of cleanup comments in the PR. Looks like double-restores still aren't handled correctly yet.", Comment on ', ', PR This looks good to me, though if wesj has time to look today, it'd also be nice to get his feedback since he worked on error pages.", Comment on ', ', PR Thanks!' 
id=1215273	 "It looks like the state is changing but it's not being redisplayed for some reason. If I use the UI Inspector it goes blue.", I'm pretty sure we fixed this, but re-fix coming.", Created ', ', Pull req.', Comment on ', ', Pull req. 93b25c1' 
id=1151464	 '*** ', has been marked as a duplicate of this bug. ***', We should maybe have a threshold before showing this, to avoid creating and flashing a new view for a half second when the connection is fast.', What's the expected range of lag before the list is loaded? I have a simple loading animation, but I'm concerned it wouldn't really be seen for long and it would be odd to see something for maybe half a second\u2014not long enough to notice what it actually is and may cause confusion. My list shows up pretty fast (even on 4G) since it's not syncing with anything...it's local. I'm thinking maybe we just have a blank screen. Thoughts? WIP: ", Robin: this is about reader view, not the reading list. When it's a new item added from the share extension, we have to load the page from the network from scratch then readerize it, which can take anywhere from a few hundred milliseconds to a few seconds.", Doh! Yo d think *I* wouldn't mix the two up, but\u2014I did. Will update accordingly.", we're going with the native spinner for this interaction.", Reopening this. We can't show a native spinner. It is complicated :-/ This loading screen has to live in a web page. We can put a spinner in a web page though :-) I'm taking this bug and turning it into a bug to implement this.", Animating a spinner with CSS is actually pretty simple. Happy to help if needed.', Created ', Screenshot 2015-07-14 14.04.02.png Screenshots for localizers', Created ', ', PR: ', Work in progress. Still needs an image / spinner. And maybe quick look at strings / terminology.', *** ', has been marked as a duplicate of this bug. ***', Hey Darrin, is Stefan's screenshot along the lines of what UX wanted? Do you have mockups/assets you could share? We need to land this ASAP (preferably by this Friday) since this has string changes, and we're (hopefully!) about to go into string freeze. If needed, we could pre-land an incomplete version of this with all of the strings if UX needs more time to polish the visuals.", The screenshot I see seems to be of an error/failed state, not a loading state (and the strings seem that way too). Is this supposed to show while we load the page, or when it fails for some reason? Robin, what was your plan here? Regardless, if we can\'t use the native spinner, I don\'t think we need one for now. Probably some simple language like "Loading content..." will suffice (if it\'s just during loading, this will *hopefully* be no longer than a few seconds in most cases).', (In reply to Darrin Henein :darrin from ', ) ', Yeah, this bug actually has two parts: show some kind of loading page while we wait, and show some kind of error page if we fail. ', OK -- that should be simple enough to throw together. Mostly just concerned about the strings we want to use at this point.', Created ', ', Link to Github pull-request: ', Simple text-only loading/error page with a fade-in transition. Mostly concerned about strings right now as mentioned earlier since we're on the verge of a string freeze, but happy to address any UI polish, too.", Comment on ', ', Link to Github pull-request: ', Looks good. One nit: can we pull it up to anchor the top like the empty panels?', Merged without vertical centering. ' 
id=1163116	 'Is this just a matter of changing the dimensions of the images? If so, I can try to take a whack at it hehe', Hey Bryan, I've made a few changes to the view hierarchy and sizing in ", , so this bug may be resolved when that lands. Maybe hold off taking this for now :)', YAYYYYY one less bug is a happy firefox (on iOS)', Marking this as duplicate of 1162068 because that bug also includes a fix for a better layout on the 4S. *** This bug has been marked as a duplicate of ', ***' 
id=1227108	 'Created ', ', Pull request Hey :tecgirl. Wanted to run the behaviour past you as a check * Open Last Bookmark gets added to quick actions when you bookmark a page * Bookmark's title is displayed below 'Open Last Bookmark' * Open Last Bookmark action is then never removed, just overwritten with new data the next time you bookmark something. I chose this behaviour as I felt that always being able to get to your last bookmark would be useful and we no longer have any more important actions to knock bookmarks off the list. I can instead remove the action once you have opened the bookmark if you feel that is a better flow.", :fluffyemily - If we start prioritizing the dynamic options (that is, when we have enough working options to do so) we can think about dropping it in favor of something else but I think this works just fine as it is and we shouldn't assume the user would want it to be removed since they actively bookmarked it. It's good!", Comment on ', ', Pull request Looks good - left comments mostly nits about simplifying some of the code paths.', Also I wasn't able to test it because of force touch and the simulator plugin wasn't working :(", I just tested this and a bookmark shows on the homescreen 3DT menu but it opens to the Tabs Tray. :(', Update: now it works! IDK what was happening earlier, other than it was still plugged in to my machine.' 
id=1184603	 'Woo iOS 9.' 
id=1172694	 'The above was filed against my iPhone 6 on real hardware. I tapped the home button and tapped Firefox, hit home and hit Firefox again and compared it against Twitter. We are slow.', When I run this on my device after installing it from Xcode, it seems pretty responsive after each open and background, but I have definitely noticed this issue if the app is sitting for a while in the background. Are you seeing the same thing?', I do notice a slight delay when re-launching the app. Is this what you were referring to?', Yes. Especially when comparing it to other apps.', Was this running from Xcode using a debug build or from TestFlight/Nightly?', I see this with self-built builds and those from TestFlight.', I tried out some things: 1. I turned on all optimizations I could find using ', as a reference (strip debug symbols, -Ofastest code gen optimization) and ran the profiler on app foregrounds/backgrounds and I'm seeing only a 6ms delay within our app between home screen -> app foregrounded but still seeing that slight delay. 2. I created a empty project from Xcode with the same optimizations and I'm seeing the same amount of delay. I can't seem to find anything online about app store only optimizations but I feel like when a user installs a build from the app store vs Xcode or test flight, there is some something else happening that is causing the app to launch faster unless there are some other optimizations we can make. The only other thing I can think of is the inclusion of the double swift library.", I've also tried following some of the instructions here ", by configuring a debug target to use all of the release optimizations and I'm still seeing that very slight delay when launching the app.", Mentioned on ios-feedback I found this ', Emily posted a thraad of a similar problem Artsy is having with their Eigen project: ', I tried running the DYLD diagnostics they ran and I'm seeing about a 1.4 sec delay in loading in the dynamic libraries we're using which doesn't seem that absurd: total time: 1.4 seconds (100.0%) total images loaded: 252 (226 from dyld shared cache) total segments mapped: 75, into 3947 pages with 264 pages pre-fetched total images loading time: 1.2 seconds (87.6%) total dtrace DOF registration time: 0.10 milliseconds (0.0%) total rebase fixups: 78,822 total rebase fixups time: 25.34 milliseconds (1.7%) total binding fixups: 255,327 total binding fixups time: 109.64 milliseconds (7.4%) total weak binding fixups time: 1.26 milliseconds (0.0%) total bindings lazily fixed up: 0 of 0 total initializer time: 45.72 milliseconds (3.1%) libSystem.B.dylib : 41.29 milliseconds (2.8%) libBacktraceRecording.dylib : 0.46 milliseconds (0.0%) libc++.1.dylib : 0.03 milliseconds (0.0%) libobjc.A.dylib : 0.02 milliseconds (0.0%) CoreFoundation : 0.61 milliseconds (0.0%) vImage : 0.01 milliseconds (0.0%) libGLImage.dylib : 0.09 milliseconds (0.0%) libFosl_dynamic.dylib : 0.02 milliseconds (0.0%) CoreImage : 0.01 milliseconds (0.0%) libswiftCore.dylib : 1.86 milliseconds (0.1%) CoreTelephony : 0.02 milliseconds (0.0%) total symbol trie searches: 86178 total symbol table binary searches: 0 total images defining weak symbols: 25 total images using weak symbols: 68 Note: This process starts when the app is launched. I think there are two similar issues that we're talking about in this thread. The first is the very slight delay when tapping the app icon and the other is the app being responsive after launching from the background. Most of the times I've seen the app come from background and be responsive almost immediately but sometimes I've seen it take a delay. I think this is caused by the app being terminated in the background after it's been running for a long time.", (In reply to Stephan Leroux :sleroux from ', ) ', Video from my iPhone 6 ', Awesome thanks for the video Aaron. Ya that looks really bad. Is that from cold start or backgrounded?', Sorry also which build was that tested on?', (In reply to Stephan Leroux :sleroux from ', ) ', It was previously running. Running master, not attached to debugger. It's the time that the icon is greyed is what I'm curious is going on.", I created an empty default objective-c project with similar optimizations we make in the FFiOS client here: ', . Could you try build/running this and seeing if you still have the delay? I see a similar delay that I see for the FFiOS app but I can't get to be as pronounced as it is in your video.", (In reply to Stephan Leroux :sleroux from ', ) ', ', So the only thing I can think of is this delay that we're seeing for both the empty app and Firefox is related to certification revocation (", ). I think what might happen is since the build is not using an app store certificate, there's additional overhead in the app launch whereas apps that are downloaded from the app store probably have a faster way of checking this. I feel like this delay will go away when it's live on the app store.", We need to assess this in release, without TF certs.' 
id=1264641	 'Fixed as part of surfacing sync status ' 
id=1130520	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1154549	 "We're pretty close to this: BrowserProfile itself does some, and it owns a SyncManager that does the rest." 
id=1166266	 'Done.' 
id=1288116	 'The mocks have changed and all the panels have been merged later down the road. So this one is not required anymore.' 
id=1218833	 'Here\'s the root cause. We create the profile so we can add the submitted URL to the queue table. In doing so we hit this block of code: // If the profile dir doesn\'t exist yet, this is first run (for this profile). if !files.exists("") { log.info("New profile. Removing old account data.") removeAccount() prefs.clearAll() } removeAccount *is async* -- it returns a Deferred. By the time it does all of its work, we\'ve returned the inited profile\u2026 and in the case of ViewLater, we\'ve already done what we needed to do and deallocated the Profile instance. I think we need a few changes here. Firstly, we shouldn\'t be doing the full DB account removal work if we have no profile directory! There\'s no point. Secondly, we should be blocking here in the constructor on any initialization tasks, or we need to separate profile creation from profile ready and hold on to the profile in calling code until it\'s done initing -- the classic .init().then(...) pattern in promise-oriented programming. Thirdly, we can band-aid this particular problem by having BrowserSyncManager hold on to profile.prefs, which is the thing touched by an objc callback.', Created ', ', Pull req. ', Comment on ', ', Pull req. Appreciate the thorough explanation. LGTM!', c733fd0' 
id=1229869	 'We should investigate all of these issues together, and decide whether to remove third-party keyboard support altogether.', Chrome did the same, but not because of buggy text fields. They did it because they got crashes from third party keyboards.', SwiftKey 1.4.6 on iOS 9.2.1 behaves pretty well. See ', Marking as INCOMPLETE because it is not clear what the problem with SwiftKey is. Please reopen if there is a more concrete issue.' 
id=1254587	 
id=1193712	 'different workarounds ', also found ', After clearing private data my container does not contain a Cookies.binarycookies file, where prior it was available and parsing it shows a large number of Twitter and related auth cookies', We do everything we need can do: * Close all WKWebViews * Remove persistent data stores (verified they are gone) Opening up a new tab shows that the backend content process still had this data cached. When the app is quit, the backend process seems to sync its data back and the persistent data stores reappear.', Created ', ', PR: ', This is not awesome but it seems to be the only way. We will have actual data clearing APIs in iOS9. I am going to suggest that we use this until then. The problem is as follows: we close all webviews and we remove all persistent stores (include the cookie database) from disk. However, the content process, to which we have no access, still has this data cached. And it simply writes it back to disk. Exiting our app right after clearing these persistent stores also terminates or disconnects the content processes. So they cannot write the cached private data back to disk.', Also disabling CPD tests because they always fail with no way to recover from the exit(0)', Updated the patch with a new approach thanks to :sleroux "As part of clearing private data we now also create a new WKProcessPool. This prevents the content processes to write back cached data to the main process. (The data that we just deleted)"', Comment on ', ', PR: ', I logged into news.ycombinator/facebook/twitter, hit clear data, and everything was gone! Can't believe this works!" 
id=1134703	 'Fixed with ', Reviewed in person with :nalexander during work week.' 
id=1196771	 ' *** This bug has been marked as a duplicate of ', ***', Reopening this. We need to investigate this. It may be related to ', or may be a separate issue. Sharing a page from a different app to reading list results in a very different process (we run the readability code in a different webview, not connected to any of the delegates on which we made changes for ', ) - it is simpler so maybe also easier to debug.', File separate bugs?', I filed a new bug for the first issue to which I will dupe this bug. Will file a second bug for the other issue mentioned. *** This bug has been marked as a duplicate of ', ***', Filed 1200699 Reading list does not resolve shortened URLs' 
id=1146396	 'This works for me, latest build. I have a basic history UITest pending PR.' 
id=1158951	 
id=1278006	 'Created ', LeakFixed.png', Created ', ', Pull Request Have a look Emily! It's a small leak but the first one I found. It's actually real fun digging through instruments and finding leaks like this.", Comment on ', ', Pull Request nice catch', master 4242d2a1c99ca4c87e9bdaf388b1224abc5c8491', v5.x eea5117f1fbff2119bd6479cb5a97e24ea5b185f' 
id=1168692	 "Let's limit this to Firefox Account changes. Any other triggers should be handled explicitly.", Already works for tabs.', Created ', ', Pull request', Updated to include notification on all the other home panels', Comment on ', ', Pull request Just some small things - looks good otherwise!' 
id=1233724	 'Created ', ', Link to Github pull-request: ', Fixes the sort by domain issue. Also resolved two other bugs where the index view wasn't being sorted alphabetically and the logins within each section were not alphabetical by domain either.", Merged master b9fda14ecdf0c8477afd48543522ad87b1a1166a' 
id=1138713	 'Looks like this got fixed with the search suggestion style changes.' 
id=1188626	 'Created ', ', Pull req.', Comment on ', ', Pull req. Looks good! I gotta split up commits more like you do - this was very easy to read.', Thanks for the quick review! ', This breaks ClearPrivateDataTests, which relies on being able to visit localhost URLs in order to populate history. I'll fix the test.", This fixes that test. bnicholson cleared this approach on IRC, so landed without review. ' 
id=1200625	 'Created ', ', ', Merged' 
id=1148578	 'Created ', ', Pull request This is basically the Android algorythm 1 . Note, we don't include bookmarks yet here, so that bit isn't included. 1 ", Comment on ', ', Pull request I'm a little surprised this patch is so short, but LGTM if it works!", Reverting bug title change. Note frequency + recency = frecency :)' 
id=1162315	 'Also, I found it pretty meta that I encountered a bug while trying to file a bug...', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', This is some cleanup for these constraints (I reworked them so that the buttons are always below the text/image). I also gave these a min-width on tablets here, and tweaked the colors slightly.', Comment on ', ', PR ', Works well. Left a couple a couple of comments regarding the way we're sizing the SnackBar widget.", Updated this. I remember having issues if I didn't explicitly set a width originally here, but constraints seems smart enough to find a tight-wrapping height for me automatically now. I musta been missing one it needed originally. Changes are in their own commit.", Looks good - just a minor nit comment and a question', Merged' 
id=1212860	 'comment currently in relevant bit of code: ', Created ', ', Pull request', Comment on ', ', Pull request Left some questions on the PR.', Comment on ', ', Pull request Looks good - just one nit.' 
id=1225689	 "Oops, that's not Android...", *** This bug has been marked as a duplicate of ', ***' 
id=1101143	 'Created ', ', Pull request' 
id=1183434	 'Fixed by URL bar refactor (', ).' 
id=1130122	 'Just a note that this applies to all our dependencies. Our own app, its extensions, our frameworks and third party frameworks.', *** This bug has been marked as a duplicate of ', ***' 
id=1192011	 'We can very easily check whether a sync is in progress: take a look at the sync manager spinlock.', Another solution here is to pop the Settings view altogether after sign in. Robin?', (In reply to Richard Newman :rnewman from ', ) ', This works.', (In reply to Richard Newman :rnewman from ', ) ', The user should land wherever they started from when signing in. See ', . Also, what happened to ', ? If we can't implement a timestamp, could we modify the Sync Now button to reflect state? Syncing Synced for ~15min? Sync Now ", (In reply to Robin Andersen :tecgirl from ', ) ', Aggressive v1 scope happened :D ', Right now it flips between "Sync Now" and "Syncing\u2026". We\'ll use those same strings for this bug, \'cos we can\'t add more. Eventually we might do something more sophisticated, like KVO of a syncing state.', Might be fixed, might need more thought.', As part of ', , I've attached a NSNotification get gets fired when the syncing starts/finishes which updates the Sync Now/Syncing... label accordingly. The patch for that issue resolves most of the requirements for this issue except for displaying a last synced timestamp. Since we have a bug for that here -> ", I'm going to go ahead and mark this one as resolved." 
id=1143957	 'Created ', ', Pull request', Comment on ', ', Pull request I played with this on a bunch of device classes. Looks good.' 
id=1204050	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', ', Comment on ', ', ', I am still getting the janky animation on iOS9 so this has not resolved the issue.', I'm having a hard time reproducing the issue on this branch - which sim/device/version are you seeing this on?", I was on an iPhone 5S running iOS9. No animation issues on my iPod Touch running iOS 8.4', tried this again today after a full clean and it works fine now. Which was interesting as I actually edited the code yesterday as I was reviewing and got different effects. I guess the force clean was what was required.', r+', Updated with version check. Merged.' 
id=1152396	 "There's some sample code here for creating a singleton process pool for this exact reason: ", Created ', ', PR: ', This patch lets the TabManager manage a global WKWebViewConfiguration with a single WKProcessPool. All tabs that do not explicitly specify a custom WKWebViewConfiguration when created will use this shared one. We only have one TabManager instance in the application, which is why I decided to put this logic here.', Good test case: Try this, with and without this patch: 1) Open a new tab 2) Login to news.ycombinator.com (or any site) 3) Open a new tab 4) See that you are logged in The last step fails without this patch.', Comment on ', ', PR: ', I'm a little nervous about sharing a configuration, but I don't see anything in it that we wouldn't want shared, so maybe its fine..." 
id=1216977	 ':rnewman do you have a script to populate accounts with tons of bookmarks? Or know of a way to replicate a sync with a _lot_ of bookmarks?', I don't have a script to do it. Someone in QA might. You can do it manually in the simulator (or on device, by uploading a modified package) by adding a ton of rows to the DB. I have a clone of my own profile with a few thousand bookmarks, including 2000+ in the same folder, that I've been using for testing, and it's always been fine I'm on 9.0.2 on my own iPhone 6. I just reproduced with the latest TF. Never had a problem with earlier builds.", Xcode refused to attach to my TF build, so I couldn't get a stack. There's nothing in the log. I'll try reading code later.", I\'m now getting this, which I never saw before: 2015-10-21 09:22:37.263 Client 19705:3927410 Unable to simultaneously satisfy constraints. \tProbably at least one of the constraints in the following list is one you don\'t want. Try this: (1) look at each constraint and try to figure out which you don\'t expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you\'re seeing NSAutoresizingMaskLayoutConstraints that you don\'t understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) ( "<SnapKit.LayoutConstraint:0x7f84e26bae50@/Users/rnewman/moz/git/s2fxios/Client/Frontend/Home/BookmarksPanel.swift#353 Client.ChevronView:0x7f84e26acc30.left == _UITableViewHeaderFooterContentView:0x7f84e26b5170.left + 10.0>", "<SnapKit.LayoutConstraint:0x7f84e4b36960@/Users/rnewman/moz/git/s2fxios/Client/Frontend/Home/BookmarksPanel.swift#353 Client.ChevronView:0x7f84e26acc30.width == 20.0>", "<SnapKit.LayoutConstraint:0x7f84e4b37480@/Users/rnewman/moz/git/s2fxios/Client/Frontend/Home/BookmarksPanel.swift#359 UILabel:0x7f84e26bb460.left == Client.ChevronView:0x7f84e26acc30.right + 10.0>", "<SnapKit.LayoutConstraint:0x7f84e4b37820@/Users/rnewman/moz/git/s2fxios/Client/Frontend/Home/BookmarksPanel.swift#359 UILabel:0x7f84e26bb460.right == _UITableViewHeaderFooterContentView:0x7f84e26b5170.right - 10.0>", "<NSLayoutConstraint:0x7f84e4b3a690 \'UIView-Encapsulated-Layout-Width\' H: _UITableViewHeaderFooterContentView:0x7f84e26b5170(0) >" ) Will attempt to recover by breaking constraint <SnapKit.LayoutConstraint:0x7f84e4b36960@/Users/rnewman/moz/git/s2fxios/Client/Frontend/Home/BookmarksPanel.swift#353 Client.ChevronView:0x7f84e26acc30.width == 20.0> Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger. The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.', Created ', ', ', This patch fixes the constraint error we're seeing in the console that might contribute to the bookmark hang issue.", I tried this with 3500 unsorted bookmarks and things are lightning fast without hangs.', (In reply to Stefan Arentz :st3fan from ', ) ', With Build 1112 - so not with :sleroux's patch.", Landed that: 5cdd929 Let's see if that's the cause\u2026", Calling this done.' 
id=1283333	 'Delphine, to ship a specific locale, simply add it to ', It is important this is done in the v5.x branch.', ast added in ', @delphine We definitely need to go together through the process to edit this file in GitHub. Given the schedule, it's easier for me to edit the file this time. If I forget about this, please nag me ;-)" 
id=1173813	 'Comment on ', screenshot Fixed with ', ?', should this be marked fixeddd?' 
id=1164486	 "I think the actual problem is that we are holding a reference to the Browser.webView somewhere. The Browser is a WKScriptMessageHandler so it's WKWebView has a reference to Browser. That is fine because the webview is released when the Browser is released. But! If something outside of Browser is keeping a reference to the WKWebView then that release will not happen.", This also contributes to the startup time I think, according to WebKit bug ', WKScriptMessage.initWithBody:webView:frameInfo:name leaks an NSDictionary each time we open a new tab. I can't see what's in that dict, but perhaps it's the WKSMH\u2026", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Great fix.' 
id=1241215	 "Looks like window.find() is setting a selection, but there are no ranges found on the selection. That is, window.find() returns true, but window.getSelection().rangeCount is 0. That means we don't know where to create the rects for highlighting the matches. This also doesn't work in Safari, so I'd guess this site is doing something unusual. Probably not a high priority.", Same issue on ', on Firefox and Safari', I can not reproduce this issue now, for either of the sites listed. Might this have been resolved in the meantime?' 
id=1186613	 'Created ', ', PR ', I think this is probably v1.1 stuff since it will need bake time with some users to see if it works.', I'm going to clear the review flag for this, and we can rebase and ui-review closer to v2.", *** ', has been marked as a duplicate of this bug. ***', We already do enough in this area.' 
id=1252982	 'Hi Stephan, can you assign this to me?', Assigned it to myself. Let me know if anyone's already on it!", It's all yours!", Hey Maurya - thanks for taking this! I was on PTO last week but I'm back now if you have any questions about the bug or implementation details.", Stephan, I wasn't totally sure about my understanding. Is this along the lines of your suggestions for DRYing up the code? ", Note that I'm initializing the PasscodeViewController object within the respective settings' initializations. I think there might be a better way of doing this?", Hey Maurya, I apologize - I'm not sure if this bug is needed anymore after some work I did recently to add some Touch ID functionality. I'm not sure if there is value in DRY'ing up the code further at this point now that each setting has a single line. If yo re interested in taking on another bug, you can check out ", . Otherwise there are a bunch of others we've marked here: ", .', Stephan, Sure, no problem. I'll look at other bugs. Btw, it'd be helpful if you could still briefly review ", . I was trying to understand the code and your inputs would help! Also, are there other bugs which involve refactoring? Most bugs from the links you shared seem to need further discussions to arrive at a consensus on the feature.', Hey Maurya, ', The code looks good and was the approach I was talking about above. Super small nit: Since enabled is optoinal and Setting's constructor accepts an optional you don't need to do the optional unwrapping if check - you can just pass in the enabled? param. ", I don't think we have many bugs for just refactoring work. Most of the refactoring that gets done so far tends to be side product of feature development work. A new bug that we triaged this morning might be interesting to check out: ", . Don't think it requires much external input.", Stephan, thanks a lot for the review! Have been new to Swift, so this helps :)', Stephan, should we mark this bug as "RESOLVED WONTFIX" ?', Might make more sense to make it RESOLVED INVALID but it's already been resolved so we can keep it as RESOLVED FIXED :D" 
id=1145464	 'Created ', ', Pull req.' 
id=1194569	 'Created ', ', Pull request' 
id=1113961	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', It would be ideal if this were tab-modal rather than app-modal, too. Allowing other tabs to be used in the interim would potentially be very useful.', We made ', the tracking bug for this feature. *** This bug has been marked as a duplicate of ', ***' 
id=1276164	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM', merged #e3ff58a92338a814b10be44cedbe6d7939e5b784', v5.x 5e142460167ac494429256161b166f5dfd0275b2' 
id=1157303	 'See BrowserProfileSyncDelegate in Profile.swift.', OK, so what _should_ it do when tapped? And what should the icon be? And is there anything else this should do? And if you don't know, who's should I ask?", When the notification is tapped, we should load the provided URL in a new tab in Firefox. The icon should be a platform-suitable rendition of the Firefox icon. 302 :tecgirl for that, and any questions about the UX. Any strings should be localized, and ideally we can present both title (if known) and URL, but beyond that, it doesn't need to do anything else at this point. (Eventually we might want to go straight into our external app handler to avoid flicking through the browser UI to launch a map URL or open a tweet, but we can leave that until our external app stuff is stable.)", Created ', ', Pull request', Comment on ', ', Pull request Looks good! Just a few small comments in the PR.', Created ', New Tab Notification', Created ', New Tab Notification Actions', Created ', New Tab Notification Lock Screen', Created ', New Tab Notification Lock Screen Actions' 
id=1221594	 "In the designs, we have a footer with the label 'Last modified XXXX' where XXX is the last modified timestamp. Looking at our logins code we have a LoginUsageData protocol with the following: public protocol LoginUsageData { var timesUsed: Int { get set } var timeCreated: MicrosecondTimestamp { get set } var timeLastUsed: MicrosecondTimestamp { get set } var timePasswordChanged: MicrosecondTimestamp { get set } } Doesn't look like we capture last modified but we do know the last time the password was changed which is probably equally useful. One issue is that for local records this is always set to now. Is it possible to know the last time a local login's password was changed or maybe I'm looking at the wrong place? My WIP commit for this is here: ", Also, we should probably show an error dialog in the case the domain they modified the login to is invalid. I can land some basic copy today before the string freeze. Something like: 'Invalid website. Make sure that the website your login is for is a valid URL.'", I wonder if we should also warn the user if they entered a blank username/password.', Created ', ', Link to Github pull-request: ', Clearing copy flags because editing will be handled as part of ', Comment on ', ', Link to Github pull-request: ', Fix the failing tests and we're good to go.", Thanks for the quick review! I've fixed the tests and landed it. master b9b53299f484fd91659c6ce10b6042cad600ecd3", Going to reopen until dependency bugs are also finished.', (In reply to Stephan Leroux :sleroux from ', ) ', The database stores both last modified (see LocalLogin) and time changed in loginsL. getUsageDataForLoginByGUID returns timePasswordChanged values for both local and remote records. updateLoginByGUID and addLogin both set timePasswordChanged correctly. The field is there and should be correct. The only thing missing is populating the fields correctly in the Login instances when querying -- the search APIs (getLoginsForProtectionSpace, searchLoginsWithQuery, etc.) return LoginData instances rather than Logins, so those are stubbed out.', To clarify, Local and remote logins have timePasswordChanged. Local logins have local_modified when the login was last 'modified' Some questions: 1. How come we have a modified timestamp only for local logins and not remote records? 2. Would using the timePasswordChange suffice for the 'Last Modifed: xxxx' label? This doesn't really mean 'last modified' though but if there is no way to know when a remote login was 'modified' I don't see what else we can do? 3. Depending on (1, 2), how would one bubble up the last modified time using a LoginData instance? Only thing I can think of is we'd have to modified the UNION ALL query to include rows that are not in both tables and do some massaging to map a column into something that makes sense for both. Again, this doesn't really make sense either since timePasswordChanged != lastModifed.", Remote records have server_modified, which is a server clock value. Local records have local_modified, which is a client clock values. When a server record is locally modified, that password has *two* modification times: the timestamp of the last server record, and the timestamp of the last local modification that overlays the server record. Those timestamps are used to reconcile conflicts. Non-Sync code shouldn't be using *either* modification time -- they're not part of the value itself, and they don't appear in the Login object that frontend code gets to see. ", timePasswordChanged is the moment in time, from *a* client clock (not necessarily ours!), at which the password itself was changed. It should always be later than or equal to timeCreated, and earlier than or equal to timeLastUsed. timeLastUsed is optional. You should use timePasswordChanged to indicate Last Modified. ', Not last modified, time changed, but: most places that return LoginData should instead return Login, which is LoginData + LoginUsageData.', Resolved including password last modified fix.' 
id=1167804	 'Is this still happening?', Moving NI to agibson for checking build 18.', I just tried reinstalling the latest build from scratch, and I can't seem to reproduce this bug any longer :)", Great, thanks for checking!' 
id=1198893	 'Created ', ', PR: ', Up the deployment target from 8.0 to 8.2 for the main project, extensions and our frameworks.', Comment on ', ', PR: ', rs=me.', Additional commit because the deployment target was not correctly increased for two test targets: ', Commit pushed to master at ', ', fix ', - Handle {{xref_cssnumber}}' 
id=1147077	 'Created ', after.png', I don't see this in Nightly anymore." 
id=1278771	 'Related issue but patch should resolve this one as well: ', Marking as RESOLVED from patch for ' 
id=1211471	 'Created ', snapkit-log.log Possibly related snapkit log', Is this a mirrored (synced) bookmark, or did you bookmark this locally? The former shouldn't appear to be bookmarked at all. The latter should work as expected.", No syncing involved, no account hookup.', I think Steph was looking at this, based on IRC scrollback.', I'm able to reproduce this on master now. Whenever I tap on the bookmark button, it spins in place instead of jumping out and is not clickable afterwards. I just tried setting translatesAutoresizingMaskIntoConstraints to FALSE for the footerBackground BlurWrapper view and that seemed to get rid of the errors but I'm still seeing the unclickable bookmark problem.", I can take this one. I feel like it's something related to the introduction of this BlurWrapper.", So it looks like this bug was introduced after the bookmark sync stuff landed: ', What's happening is that the star animates in place but doesn't jump up. However, if you wait for 20 seconds, the star will do the jump and is able to be unbookmarked after that. I ran the profiler but didn't see the CPU spinning or anything during that time so there isn't contention happening on the main thread. :rnewman, is there anything during the bookmark sync that might cause an animation to be delayed like this?", My suspicion is that some work has jumped to the background thread, like\u2026 ', Betcha that should be .uponQueue(dispatch_get_main_queue(), \u2026)', Created ', ', ', Merged' 
id=1160594	 'Created ', ', Pull Request', Comment on ', ', Pull Request Just a minor not about the use of `description`. Other than that it looks good!', Merged', This bug introduced a couple of strings: "Mark as read/unread". But we still had "Mark as Read/Unread" (not the capitalization). Is the different capitalization actually wanted and/or needed?', I had no explicit intent with the capitalization. For the sake of consistency, I will change the strings from this bug to have the same capitalization as the ones already present (i.e. capitalized Read/Unread). Thanks for noting this.', Francesco, I reported ', for the capitalization and took the liberty of CC'ing you there. A pull request is already available for it." 
id=1295007	 'Environment: iPhone 6s Plus, iOS 9.3.4', I can't reproduce this with release 5.0. Bear in mind that on a 6S you need to long-press gently so that you don't trigger 3D touch." 
id=1224062	 'The release notes were for Xcode 7.1.1, but as stated in ', , people have been reported this as early as the 7.1 betas.', Created ', ', PR: ', This patch replaces all usages of sortInPlace with sort. See bug description why this needs to happen.' 
id=1169885	 'Yup, we don\'t do data migrations yet -- still pre-release. This was a deliberate tradeoff to avoid us having to do extra work that wouldn\'t affect release users. Sorry for any inconvenience. The newest build includes history sync, so we\'re now getting to the point that we have to do migrations. Please reopen if this is "lost history and now it won\'t stick".' 
id=1236565	 'Created ', ', Pull request Sometimes we get an 0 length title rather than a missing one and therefore a tab title doesn't show. We now default to the tab URL if the tab title is empty.", Comment on ', ', Pull request Moving to :rnewman as he's the only person other than :st3fan with a 3D touch enabled device I think.", Comment on ', ', Pull request I can't get any dynamic 3D touch actions to show at all. Robin gets a stale entry. How is this supposed to work, Emily?", Comment on ', ', Pull request Steps to test: * Use "View Later". * Open Firefox. * Close Firefox. * Long-press.' 
id=1249519	 "There's a new version (2.0) available in App Store. Can you still reproduce after the update?" 
id=1094490	 'Created ', ', Pull request It sounds like this is changing a lot, so maybe this is pointless, but I hate throwing away work :)', Comment on ', ', Pull request I think these ShareHandler changes should hold over in the new designs as well, so I kinda want them, but the list is dying :(', Closing this because this is not part of the Share To extension anymore. Sending to a device is now in the Send To extension.' 
id=1190599	 'Darrin, please decide which of the above is a better interaction.', Why not do exactly what we do when you tap "Sign in"?', Not enabling the URL bar and bottom navigation would be an even better call, since they're unused, anyway. +1 for using the topbar navigation with a back caret and label for Settings.", I like that one too! ^^' 
id=1259251	 'Created ', ', PR whoever gets to it first!', Comment on ', ', PR Can you put more information in the bug or PR? I'm not really even sure what this bug is about, or what I should be looking for. One thing I do notice is that all of the history cells look broken with this PR. Compare the margins, fonts, etc. of your screenshot with master.", Created ', ', PR', Created ', Screen Shot 2016-03-30 at 1.08.51 PM.png comparison between mock and simulator', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR I think this is on the right track, but it's pretty gnarly to create an individual lazy variable for each letter (which also wouldn't scale to other languages). Let's simplify this by making a dictionary that caches character -> UIImage pairs.", Comment on ', ', PR Left feedback on PR.', Comment on ', ', PR Image caching looks good, but some questions/comments about layout.', Comment on ', ', PR Still a bit more complex than I was hoping it would be, but I guess the rules for different borders and margins are non-trivial. Hopefully this complexity can go away once we update Remote Tabs to be like the rest of the panels.', Comment on ', ', PR oneee lasttt time~' 
id=1140396	 'This bug can be triggered by going into Client\'s "Build Settings" and changing "Optimization Level" for the "Swift Compiler - Code Generation" from "None" to "Fastest" Maybe that should also be the workaround for our builds.', Fixed (workaround) with ' 
id=1215118	 'Created ', ', Pull req.', ed38bc2 r+ on IRC.', Comment on ', ', Pull req. This has landed.' 
id=1201509	 'Related: Alamofire ephemeral. Account/FxAClient10.swift 217: let configuration = NSURLSessionConfiguration.ephemeralSessionConfiguration() We should use that if we need to make fetches in non-WebKit code.', Some notes: - Visited pages (URLs) Now that we no longer save a url to history when you navigate (', ), autocomplete/search suggestions no longer will populate with previously searched/navigated to items. - Search entries See comment above about visited URLs - Cookies Seems that using the non-persistent WKWebViewDataStore prevents cookies from being stored. I tried to navigate to ', in a regular tab and NSHTTPCookieStorage returned 1 cookie where as a private tab returns no cookies. - Temporary Internet files (cached files) WKWebViewDataStore is built to save any of these cached files to memory instead of disk which results in the WebDB/LocalStorage/IndexedDB folders on disk to not contain any entries for private tabs. - Form data (including usernames and passwords) The password manager and autofill logic we have is in our own control. Do we want to still ask the user to save their logins while in private mode? <- Darrin Some other things to consider: - Network requests we make external to the web content such as favicons Is there anything else anyone can think of that we are hitting?', Discussed offline, private tabs should not offer to save any personal data.', - UIPasteboard?', - In-progress video/audio via media center', - Private tabs should not be synced or appear in sync panel', Since this bug encompasses a bunch of other ones, I'm promoting this one to a meta bug." 
id=1151387	 'I forgot to mention: ', Created ', Pull request' 
id=1162997	 'Also this state is persistent in that for each new article viewed in reader-view, the trash-can will always be visible thus preventing the user from adding a new article to their list.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', Comment on ', ', PR: ', I'm assuming the issue was only when we were leaving the home panel? Looks good!", Merged.' 
id=1226858	 'Adding this as 1.3 because we need to deal with this before we cut a release.', Could you tighten up your ', into a concrete proposal? Is this bug just "add an equivalent of maemo-locales"?', (In reply to Richard Newman :rnewman from ', ) ', Basically yes, with the difference that I'd even suggest to have one file for each major version (shipping_locales_1_x.txt, shipping_locales_2_x.txt, etc.). Then drop this piece of code and read the .txt file when the flag --only-complete is set ", Created ', ', Pull request on GitHub Initial work, still need proper testing before review.', Comment on ', ', Pull request on GitHub This should be ready for review, but at this point I confess I'm pretty lost on how this script was/is used. The script searches for Client.xcodeproj at the beginning, which means it's built to run from the firefox-ios main code check-out. | |_ firefox-ios |_ firefox-ios-build-tools So, from the firefox-ios folder, run ../firefox-ios-build-tools/scripts/import-locales.sh If that's the case, all the calls with relative paths like scripts/update-xliff.py should fail. I've also changed the command line flag from --only-complete to --release. Code is not really efficient, but given the small number of locales it shouldn't be an issue. The alternative would be to have another Python script to clean up locales (it would be a lot shorter than the bash equivalent).", Comment on ', ', Pull request on GitHub Looks good. Thank you for this patch. I've also added shipping_locales.txt to the v3.x branch already: " 
id=1172111	 'Matej, here are a few more. These are all error messages which are presented like: ', (In reply to Stefan Arentz :st3fan from ', ) ', "You don\'t have any other devices connected to this Firefox Account available to sync." We\'re starting to expose Accounts more to users and we try to avoid "Firefox Sync" whenever possible. ', "You don\'t have any tabs open in Firefox on your other devices." ', "There was a problem accessing tabs from your other devices. Try again in a few moments." Both "fetching" and "cloud" feel a bit too technical.' 
id=1109658	 'Fixed with ' 
id=1264283	 "I'm closing the old tracker for v3.0 and v4.0, I don't think there is much value in keeping them open. If any bug still relevant for v5.0 is not tracked by ", , please add it there.' 
id=1193456	 'Good catch! ', Created ', ', Pull req.', Created ', iPhone 6 Simulator screenshot (Saves you grabbing and building the PR.)' 
id=1184536	 'Maybe we need to update Readability.js', *** ', has been marked as a duplicate of this bug. ***', There are other blogs and sites that I have ran into over the weekend where all we show is the title (e.g, any entry off of ', ). I'd like to see this fixed soon.", Also BBC News articles all failing', We are using the latest version, so this is an unfixed upstream bug.', The readability parse is actually working fine. We\'re losing data in the call to: webView.evaluateJavaScript("\\(ReaderModeNamespace).readerize()") My guess is that the result is larger than some max size, but I guess I can test with a tiny wikipedia page to see...', Created ', ', PR ', On master I visited ', and reader view just shows a title still', Hmm. WFM on iphone\'s but not ipads (sometimes). This IS a failure in the readability parser (i.e. for some reason its selecting an ad for content), but I can\'t reproduce it on Desktop. I don\'t think we should chase all "Readability failed" problems in a single bug here, so I\'ll open a different bug for this (and rename this bug to reflect the fix).' 
id=1154292	 "I don't see this behavior in master anymore." 
id=1229595	 'Would be a good first bug for anyone familiar with JS. Currently, we scroll to the result here: ', . We can add a scroll animation by finding the difference between the current scroll position and that position, interpolating positions between them, and using an interval to scroll to each. As a bonus, we could use an ease out curve to make the animation smoother.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Left a few more comments in the PR; looks good with those changes.' 
id=1176284	 'Created ', ', Pull req.', Comment on ', ', Pull req. LGTM' 
id=1243154	 "Hooray databases! :D We should do some or all of: * Make our queries faster. We haven't spent a lot of time measuring, assessing index cost/benefits, etc. * Not fetching everything at once. This is a sorted list, so paging it in in chunks shouldn't be impossible. * Showing a spinner.", Created ', ', Link to Github pull-request: ', Sorry Richard but I figured yo d probably be the best person to review this.", master 5865e3c5750750b468305957c971c4bfb2e36e47' 
id=1286983	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!' 
id=1166022	 '--- Locale-specific search defaults just landed yesterday in ', . Looks like that change didn't make it into build 15. All settings are cleared after uninstalling/reinstalling, so switching back to Yahoo as default is the expected behavior when the language is set to English. For other languages, the order will be whatever order is used in list.txt -- until the next build is released. --- *** This bug has been marked as a duplicate of ", ***' 
id=1254574	 'Created ', ', Pull request First stab at Actions concept. We have a MenuActions enum that enumerates the menu actions. We have a MenuActionDelegate that handle menu actions We have ActionHandlers that implement the Actionable protocol. We have an Action enum that enumerates the actions that can be handled by ActionHandlers. Each enum case requires all the things that the action needs in order to perform the action. The MenuHandler takes the MenuAction and translates it into an Action, and then passes that action to the most appropriate ActionHandler to handle. Here I have created a TabAction handler, listed all the tab actions and implemented those actions across the entire app, including from the appropriate menu items. N.B. - The first two commits were my first thoughts on the matter, and then I changed my mind when I realised that it just wouldn't work. Let this PR be a basis for discussion for the right way to handle Actions across the app.", Comment on ', ', Pull request Left some feedback on the PR!', Created ', ', Pull request Nothing fancy here, no major refactoring work - just getting the menu options working for Browser menu actions only (tab tray menu actions not available yet). Also covers the following bugs: ', ', ', ', ', ', ', Comment on ', ', Pull request Comments in the PR (historical).' 
id=1196258	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', This patch brings back the "Create an account" button on the empty state of the Remote Tabs Home Panel. It basically is ', reversed with Swift 2.0 fixes.' 
id=1134464	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1277525	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1210103	 "Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", Created ', Fx-iOS-Login-Management.png Questions: What are we calling this feature? Passwords? Logins? Password Management, Login Management? On Android we're calling it Logins then displaying Passwords as the header (and the local URL is about:passwords). In Settings it's Logins/Manage logins, with a choice to 'Remember passwords', which could be confusing if the user checks that and thinks they're only saving the password and not the full login. See how it can get confusing? Should we decide on a distinction?", I wouldn't mind getting a jump on prototyping some of the UI for this. Is it too early to start breaking this down?", (In reply to Stephan Leroux :sleroux from ', ) ', Dig in! The UI is pretty straightforward and follows the same styles as the other cells. The screen animations are basic, push left, push right. I'll put together a spec for the Search bar styles and Details screen layout.", I suggest we use "Logins", on Android I see "Logins" as the header - did they update it recently? I agree - sticking to same terms and language is important. (In reply to Robin Andersen :tecgirl from ', ) ', I know we've talked about using Touch ID/passcodes for PB Mode and the Logins manager but I've forgot how we want to use them. Do you have any additional details on how we want to use touch id/passcode for logins in particular or is it still WIP?", I have completed the flows for Touch ID for PB and Logins, but we need to break it off into its own bug so we're not blocking this work." 
id=1223098	 'Created ', ', Comment on ', ', Changes look OK, but looks like you have the wrong bug number in your commit (should be 1223098).', Comment on ', ', LGTM', Landed 12bf9a1488c966c48dee98c0d6c967f3e3bd5557' 
id=1168541	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1247633	 'Created ', ', Pull request', Comment on ', ', Pull request Works pretty well on first run but for some reason if it fails the first time, the second time I run it fastlane complains about an unclean folder because it creates a new README file under fastlane. Any idea where that comes from?', (In reply to Stephan Leroux :sleroux from ', ) ', I think I may need to add that fastlane README to the .gitignore', Created ', ', Pull request adding fastlane/README.md to .gitignore so that it doesn't get in the way." 
id=1257966	 'Created ', ', PR: ', This patch adds accessibility identifiers to the snackbar buttons and a L10N Snapshot test to make screenshots of both the first Save prompt and the second Update prompt.' 
id=1233418	 '(Matching other bugs)', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r+ with typo fix and Robin's updated strings.", Landed Master 8e649ea173d1242bc1f797508423ca328644ffcd' 
id=1138104	 'I think Brian is working on this, and might even have a different open bug for it.', Search engines are no longer displayed in the list, so hopefully this is fixed by ', .' 
id=1200418	 'Created ', ', ', Merged' 
id=1267651	 'Will be fixed with the Tab toolbar work - this is not the final design.' 
id=1148408	 '*** ', has been marked as a duplicate of this bug. ***', We are not going to fix this bleeding. Which is really just a side effect of the temporary hack that was put in to make the reading view toolbar fade out when the main toolbar scrolls away. Instead, this bug will now be about properly sliding the reading view toolbar up. Together with the main toolbar. In accordion style. So basiclaly the reading view toolbar moves up/down twice as fast as the main toolbar. When the main toolbar is halfway up, the reading view toolbar should be completely under it. Cc Darrin to confirm.', This sounds exactly like what I was thinking. Though I pictured it being more of a 'push', so the reading toolbar moves up and when it is 100% hidden the URL bar starts to move up, both moving at the same speed. See Facebook iOS for an example.", *** This bug has been marked as a duplicate of ', ***' 
id=1212536	 "Yeah, that's pretty bad. I assume this is due to a timeout for authentication?", (In reply to Aaron Train :aaronmt from ', ) ', I think I saw this earlier, and have to assume the Settings panel logic got busted somewhere along the way. Tapping the username shouldn't do anything when yo re in a healthy state. I can take this. (Leaving NI.)", This was fallout from ', , which simply added incorrect behaviour. 0351129b72be1617814be28ed1311962c366ad31', (In reply to Nick Alexander :nalexander from ', ) ', Oops: that's the bad commit. Patch incoming.", Created ', ', Link to Github pull-request: ' 
id=1225224	 'Is this a dupe of, sub-bug of, or split-out of ', ?', is a dialog for when the user Logs Out, which doesn't clear any data but stops syncing. This is for when Clearing Private Data. That dialog would provide them the option to go to the Clear Private Data view to do so.", (In reply to Robin Andersen :tecgirl from ', ) ', Ah, I'd morphed that bug to be both (because they're related), but I guess we can split and use this as one half. Do you still want to give the user a pointer to sign out from FxA? That is, if the user got to this point, they might: 1. Intend to delete their passwords everywhere. 2. Have made a mistake and want to cancel. 3. Want to wipe this device but not their account -- they didn't think to go sign out first.", (In reply to Richard Newman :rnewman from ', ) ', The messaging on the Log Out dialog lets them know that the local data will remain, but will give the option to clear by going to Clear Private Data. So if they tap Log Out they'll see that and would have all the available choices listed above. I guess I should finish up that bug\u2026", Note that we might fix the logins part by moving it into logins management, but we still need to prompt there. Before prompting we should make sure that: * The user has an account * Either the account isn't functioning, or: * They have chosen to sync the affected data type.", Prompting on clearing logins will be handled in ', (bulk), ', (single).', Created ', ', PR: ', This patch shows a confirmation dialog when you Clear Private Data with History selected when logged in to Sync.', Comment on ', ', PR: ', Adding a bunch of people just to make sure this gets attention sooner. Because if strings. Does not need 3 people review.', Comment on ', ', PR: ', r+ from me, ui+ from Robin, 'cos she came up with the strings in <", >. r+ with string updates, follow-up for conditional, and a couple nits.', All addressed. Followup files as ', *** ', has been marked as a duplicate of this bug. ***' 
id=1162143	 'This works fine for me. Do you have a page where its busted?', Interesting -- it WFM too in the simulator, but not on my iPod touch. Every page.', Hmm.. Works on my iphone 6...', Weird. I'll update the summary.", WFM on my iPhone 6 (latest code), I did file ', earlier in the week', This seems to be working for me now on the iPod touch, though Darrin and Steph said they hit this intermittently.', I think this is a dupe of another bug you were working on?', Yup, this is a dupe of ', *** This bug has been marked as a duplicate of ', ***' 
id=1170856	 'Pushed ', . Carrying over sleroux's r+ from ", since it's essentially the same fix." 
id=1183326	 'i found this first HA *** This bug has been marked as a duplicate of ', ***', Argh, I'll morph this bug into just the UI test that was also going to land.", Created ', ', Link to Github pull-request: ' 
id=1100600	 'Created ', sketch_105searchV1.JPG Attaching a sketch I did after our conversation about how to integrate aspects of Search into this product. Top --- - Idea for how we might incorporate basic "cards" of results in 105 - Outline of some use cases around a "quick search" type interaction (I.e. having a Search bar) - Example of how this UI/UX can answer the need to search up stuff that is NOT in the user\'s history while not seeming like a browser Bottom --- - Closer to our current experience - Opening your content that\'s on your iOS device - What happens when links are clicked in this WebView?' 
id=1237621	 "sleroux: I'm trying to carthagise the google breakpad project as I decided that it's too big and complex a project to try and squeeze into ThirdPary. I've got a branch that moves the Breakpad.xcodeproj to the root directory so that carthage can discover the project. ", It builds happily under `xcodebuild -scheme Breakpad -project Breakpad.xcodeproj build` but when I try and build it through carthage (carthage update --platform ios --no-use-binaries --verbose) it hangs when it hits breakpad. The hang is completely silent. It just stops. No xcodebuild output, no errors, nothing. So no clues at all. I've gone through the carthage github project trying to discover what the problem is, but so far no luck. I'm a little stumped. Before I raise an contact the carthage guys to get some help, can you cast your eyes over it and see if you can see what the problem might be?", Created ', Carthegise Breakpad', When I checked out your fork, I see that the latest commit moved Breakpad.xcodeproj to the root folder but I don't see it on my checkout nor do I see it at the root folder on Github. When I try to open .xcodeproject inside the src/client/ios directory there are no build schemes. Not sure what's going on here - seems like something weird is going on. Carthage could hang if there is no scheme available maybe?", Created ', Screen Shot 2016-01-11 at 5.06.24 PM.png When I look at github at the right branch (', ) I see Breakpad.xcodeproj as the first entry. There should not be any xcodeproj at src/client/ios (I can't see it either in github or in my local copy). Not sure why what you are checking out bears no resemblance to what's on github. Scary.", Ugh ignore me. I thought you were committing it on master because the Github page I opened was the branch page instead of the repo page. Nothing to see here. I'll give this a go.", Now that I'm on the right branch, I tried to build the Breakpad scheme within Xcode and getting a missing header error. Removing the dir prefix /common/linux works but falls to a similar error for the next line. ", Hmm, I thought I'd fixed all of those. Maybe it's not made it's way into github and that's why things are broken. Thanks for checking.", :sleroux: I've made a couple of changes and you should no longer get those linking errors, but still cathage does nothing. Can you take another look please?", So, I discovered the problem. the Breakpad project contains 2 other .xcodeproj's - one for the mac client and one for testing the mac client. Deleting these xcodeproj's makes everything work. Not sure if this is the right solution though. I'm going to try 2 other solutions 1. put a workspace in the root rather than the xcodeproj for iOS. Add all 3 xcodeprojects to the workspace and setup 3 schemes for each. When I tried this in the past Carthage would ignore the workspace and just look for projects, but it looks like it might well work now. 2. leave the iOS xcodeproject where it was (not worry about linking etc) and just delete the mac xcodeprojects and see if this works. Carthage used to not look for projects in subdirectories, only in the root, but this may have changed if building a root level project won't work if there are others (not that it's been documented anywhere if it has).", Created ', ', Pull request Moved all projects to a workspace. Much prefer this solution as far less fuxing about with header search paths and less disruption to the overall project structure. This should make it all much easier to maintain in future.', Comment on ', ', Pull request Cancelling review. This doesn't work after all (works fine from test project, not from firefox-ios)", Comment on ', ', Pull request Turns out there is a carthage bug whereby it can take up to 35 seconds to start building the dependencies. If it hangs, wait a bit.', Created ', Screenshot 2016-01-12 09.44.54.png I pulled down the latest from the PR and made sure to git clean -fdx before anything but I'm seeing a missing Breakpad iOS project and a bunch of schemes not related to iOS but a Mac framework one. Also, just to clarify, how would I test the carthageization of this? You linked the carthage command but do I run that from the FF-iOS repo and link it or from the Breakpad directory?", From inside the google-breakpad-ios project, run `carthage build --platform ios --no-skip-current`. This builds the project as if it were a carthage dependency. If it succeeds then we have a carthage compatible project. I tested the integration with fxios by replacing the Cartfile contents with `github "fluffyemily/google-breakpad-ios" "fluffyemily/make-carthage-compatible"` I then ran `carthage update --platform ios --no-use-binaries --verbose` which fetches, checks out and builds carthage dependencies. I don\'t know why you are seeing missing things. When I look at the project fetched by carthage from my branch everything is as I expect - Breakpad.xcworkspace at root level, src/clients/ios/Breakpad.xcodeproj renamed to src/clients/ios/Breakpad iOS.xcodeproj and the workspace containing 2 subprojects, Breakpad.xcodeproj and Breakpad iOS.xcodeproj. This is also what I see when I clone my repo to a new location and check out the fluffyemily/make-carthage-compatible branch. I wonder if it is not merging well with your base project....', Created ', carthage logs.zip I recloned sleroux/google-breakpad-ios and hub checkout'ed your PR. The Breakpad iOS project was missing from the workspace still so I removed the link and re-added the project. I tried to build the Breakpad iOS framework target in Xcode and it worked. When I tried to run the 'carthage build --platform ios --no-skip-current' command, the build fails with the follow carthage error log and console output.", Maybe its just my machine? I had an error show up related to an Xcode plugin I installed for some reason when trying to build with Carthage. I removed the plugin but I'm still seeing the build fail. Maybe jhugman can give this a pull/try?", Try updating your carthage. I remember I had another problem a couple of weeks back that made me update to 0.11 in order for things to work.', Ah there we go. Looks like I was using a pretty old version of Carthage (0.7). After updating to 0.11 I was able to produce the .framework. Still got the errors for the AddressBook class but it seemed to breeze past that. Also was able to pull in the dependency into FFiOS with no problems.', Comment on ', ', Pull request Not sure what's going on with my project file but everything is working as expected and compiles fine.", :sleroux - can you merge the PR and tag it so I can update the firefox-ios cartfile please?', I've merged and created a tag: " 
id=1261926	 'Nomming for prioritization.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request :rnewman - I added you in case you were interested, if yo re too busy don't worry.", Comment on ', ', Pull request I _think_ this looks pretty good. Just left a question about the alias. The feature works pretty well on my bookmarks and from what I can tell from the SQL changes to UNION -> UNION ALL and the added JOIN it looks good but my SQL-foo isn't the greatest so I'll defer to Richard if he has any additional comments.", merged behind feature flag ', v5.x 05006be3a52ad7c2cc4a8ba929f0e942591845f2' 
id=1129656	 "I'm fine with moving it in as a separate target. The main value is in building as a separate framework; the project separation just helps enforce target membership discipline.", This has been resolved by adding StorageTests to both the Client and Firefox Nightly schemes.' 
id=1203639	 'fixed as part of #1201504' 
id=1283158	 'Created ', ', ', Comment on ', ', ', LGTM', master ff3557dab5a92b06a02a4b34dedcbd460f4e2fd2' 
id=1164231	 'Created ', ', Pull Request', Comment on ', ', Pull Request Looks pretty good overall. Left some comments in the PR.', Thanks, sorry but I will be able to start looking at this again only on Tuesday, June 2 and forward.', No problem, just clearing my review request :)', Comment on ', ', Pull Request I addressed all review comments (save for one) - please take a look at the latest comment on GitHub and hopefully merge. Thanks.', Comment on ', ', Pull Request Taking these reviews since st3fan is buried.', Comment on ', ', Pull Request A few minor proposed changes in the PR; r=me with those addressed.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', :bnicholson I addressed all the comments you had. A merge? :-) (P.S.: hope the needinfo is OK - actually hoping it is useful: if not, please tell me)', NEEDINFO is fine. Thanks a ton for all of your contributions, as usual! ' 
id=1228180	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1271378	 'Created ', ', Link to Github pull-request: ', This sends an array of usage times with the core ping. A single usage time is defined as the time, in seconds, the application has been in the foreground. One useful metric this can help capture is determining how long users are using the app before they uninstall. Since sending the ping on each application foreground isn't sufficient to measure a user who only uses the application once, this PR changes the core ping triggers. Rather than sending the core ping on each application foreground, we'll now send the core ping to be sent after 1) the first application startup, and 2) each application background. Sending a ping on each background allows us to include the usage interval for that session. Sending a ping on the first run (or more specifically, first run with this patch applied) gives us a soon-as-possible data point that we can use to uniquely identify a user (so they'll at least be on the map after a crash-then-uninstall scenario). Other than the initial launch, I can't think of a reason we'd want to send pings on app startup/foreground, but happy to hear any arguments. The usage array works by appending the current usage time to the stored array, then clearing the stored array after a successful ping. That means the very first ping will have an empty usage array on the first run, and all subsequent pings will contain at least one value in the array. Generally, the array will have just one item since pings will usually succeed.", Georg and Michael talked a bit more about saving session times, since the spec was not what we thought it was. I think we did settle on using "usage" and an array of times only. Check with mcomella for more details, and you should probably redirect the review to him or someone else.', Comment on ', ', Link to Github pull-request: ', This looks on the right track if we're okay with potentially double-counting session data (my naive thoughts think it'd be better to drop data rather than double-count though). One thing we need to resolve before a proper r+ though: data format (", seemed to mostly resolve it, but do you feel we should discuss this more?).', Comment on ', ', Link to Github pull-request: ', Updated the PR to tally session counts/durations instead of an array of times. Not requesting review yet since we'll try to keep the iOS and Android ping version numbers in sync, and this is among the last of the changes Android is making.", Comment on ', ', Link to Github pull-request: ', Think this is ready for re-review now. Note that the PR currently includes ', , so just look at the last commit.', Comment on ', ', Link to Github pull-request: ', Seems reasonable to me, with my comments taken into account.', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1304053	 'Is this fixed by ', ?', Yep (or ', , which is a dupe that landed this morning). *** This bug has been marked as a duplicate of ', ***' 
id=1191902	 "I thought the default behaviour for UIVisualEffect was to render a grey screen 1 , which I don't see here... Steph do you have any idea why this isnt happening? 1 ", Yeah -- we intentionally changed that behavior in ', . What we do is look for all devices that don't support blur, and then we remove the blur for those devices.", Yup looks like we don't add a visual effect view at all when blur isn't supported: ", Hmm, seems that ', was supposed to replace only the panel background with a flat color, not *every* instance of the blur effect. The OS (generally) does a decent job of degrading, we should leverage that :/', Waiting on robin for her decision on what to do with the topsites.', at the very least we should have a fallback for the devices that can't support the blur, so let's add UIColor whiteColor to all of the affected backgrounds (page bg, tilesbg, etc).", Bryan, what's the scope of this, and how soon can you get it done?", Created ', ', The ui-review is more important, code can be changed. look at github picture and test code (remember to negate the isBlurSupported() to test on simulator)', Robin, happy with how the title bar loses it's definition on the white background? Not sure it looks right to me... ", See this on an iPad Air/3/2', Got this problem on my 4S with build 31 ', tough @rnewman said its already fixed in next build :)', (In reply to Darrin Henein :darrin from ', ) ', Tiles have been fixed, other blur issues addressed in ', .', 5c49889' 
id=1173411	 'Resolved as part of ', Created ', ', PR: ', Comment on ', ', PR: ', I'll take this because Emily is at WWDC." 
id=1241047	 'Created ', ', Pull request', But was due to select tab changing privacy mode of selected tab after tab counter value is updated in add tab. Fixed by updating the tab counter on tab select if privacy mode has changed.', Comment on ', ', Pull request LGTM' 
id=1186442	 'I see the localhost:port/errors/undefined error on tab restore where one of the tabs is about:home', I think I fixed this already? I'm reproducing it and it's not showing up for me?", <-- this is the bug; are you running a current build and triggering the sessionrestore?', I'm running master, ios-feedback post is on build #25.", Does it still happen?', *on master?', Any updates on this?', Yes, this is visible on tab restoration (at least for me) when an error page is in focus. E.g, visit a non existent page (i.e, ', ), close browser re-open browser, see localhost error address', @Aaron, got it, ill get on it', Created ', ', PR LOL', Comment on ', ', PR Since you don\'t have any description for your fix, I\'m guessing what\'s happening is that decodeURL is returning "localhost:port/errors/undefined", which we\'re returning? If that\'s the case, we should fix decodeURL to not return that in the first place, rather than trying band-aid the code that uses the bad result.', Comment on ', ', PR smiley crab' 
id=1252859	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', master b9d3b8d148159c11cdf4d59fe6de47a370f417a4', v3.x 37227ed44b9d2aaf87b76fc133c29a781cd4a73b' 
id=1131922	 'Closing this because this is not part of the current design.' 
id=1112411	 'Created ', ', Pull request', Comment on ', ', Pull request Wow this is some crazy looking UX. But, temporary. So lets go! :-)', :D' 
id=1194501	 'Created ', Screen Shot 2015-09-02 at 1.39.19 PM.png I just loaded something on an iPod touch with the WiFi dropped or somehow disconnected and I got a proper 'THe internet connection appear to be offline.' error message. See attached screenshot. We need an STR if this bug is about something different.", (In reply to Stefan Arentz :st3fan from ', ) ', Try with a phone in area with no signal. E.g, I get this all the time on the subway where connectivity can drop while entering a tunnel.', I have a feeling that this is a result of the web server's socket becoming closed after backgrounding the app or locking the screen. See ", for details.', Resolved with the fix from it's dependent bug ", .' 
id=1145408	 'Still an issue in build 6', Re-test? There is no delete anymore, there's swipe and x button There's known problems random tabs closing, but this bug in particular should be no more." 
id=1206998	 "This seems like a great idea. Do we want only 'Send Tab' to start?", I'd love the iOS share sheet to be in there; quick access to Pocket/Whatsapp/etc. That might even be enough as a first step, given that Send Tab will be in the share sheet.", Created ', ', Pull request This adds a "Share Link" option to the long press action sheet.', Has this been tested on iPad too?', (In reply to Stefan Arentz :st3fan from ', ) ', Good call, Stefan! I just tested on the iPad simulator and found that the second popover (after tapping "Share Link") was not positioned correctly because the tap location was queried too late from the gesture recognizer. I rebased the PR on master and added the fix.', Thank you :-)', Comment on ', ', Pull request Code looks good - just need one more rebase and Ill give it a test run and merge it in.', (In reply to Stephan Leroux :sleroux from ', ) ', Thanks for reviewing, Stephan. I just rebased the PR again.', Thanks for all the rebasing. master ecbd4ec8490a0fc6bd523da0c71d6257fb3ff9fa' 
id=1275202	 'Created ', ', Pull request' 
id=1156901	 
id=1167480	 
id=1255571	 'Created ', ', Pull req.', Comment on ', ', Pull req. Makes sense to me!', f8c2fc5', v3.x 2b94a62' 
id=1231955	 "Hey Teodora! I currently just tested this on master and wasn't able to reproduce it! I was wondering if maybe you can confirm on the most recent build before I mark this as possibly resolved?", Tested using: Device: iPad Air 2 Build: 1.4 (1405) I still reproduce the issue: The bullet is white after removing and re-adding to reading list.', Ah ok, I see, you have to remove and re-add to reading list from the reader view; thanks!', Created ', ', PR' 
id=1124478	 'This has been resolved with recent CSS changes to Reader.css' 
id=1094317	 'I still have an outstanding invitation to UX to meet an explain some of the constraints around what "off" and "on" might mean here.', Created ', ', Pull request This patch got a bit large, but the basic bits we need are in there. i.e. A data provider for Panels, and the ability to modify the order/enabled state using it. Happy to discuss changes in the PR.', Comment on ', ', Pull request Lots of nits and style fixes, but also some questions.', Created ', ', Pull request Updated for review comments. I haven't removed all the coupling. I'd love to see some pseudo-code describing what you want there in a bit more detail st3fan.", I'm wondering if we should still include this. I hate to throw away good code but it seems that UX is taking a completely different direction, getting rid of the whole tabbar. Which probably means we have to undo a lot of the work this patch is doing. So maybe we should keep things basic and as the way they are now in the app and wait until the direction is more clear?", Indeed, the Settings UI is currently conflated between two things: 1. Showing UI 2. Controlling Sync I think #2 is more important any way. If this bug is all about #1 and a different bug exists for #2, lets just hold off on this bug (or close it soon).', Is that UI actually controlling sync? Ie, turning off passwords will turn off password syncing on all your devices? Or is just telling *this app* what to sync and display?', (In reply to Stefan Arentz :st3fan from ', ) ', Yes. This is how Sync works, and why we'd like to change it. ", No. This is how we'd like Sync to work, but it doesn't.", Merged this.', Comment on ', ', Pull request Sorry I forgot to r+ this when I reviewed it.' 
id=1140010	 "I don't think we are going to do this for existing strings as it will chnge the structure of the exported xliff files in a significant way. We can only do this for completely new modules like extensions or bigger parts of the app that do not yet have strings." 
id=1151076	 'WFM, latest builds' 
id=1270432	 "If and when we want to support user re-ordering/removal of menu items within the same menu, this bug will mean we can't use long press to switch into menu edit mode.", Should there be any visual difference to indicate that there is a secondary action behind this menu? (e.g. 'Home\u2026', or a different tint?) Also: note to self: update the HIG docs for MenuView around secondary actions must have a confirmation dialog.", Let's descope the long-press on the home button. A user can still change their home page via settings, and we can spend a little more time thinking on this.", Created ', ', Pull request Added support for MenuItems and MenuToolbarItems.', I have contradictory thoughts on this, mostly based on a sunk cost fallacy. Do we want to land this anyway and refine it or is it the opportunity cost of using up the long press gesture?', Comment on ', ', Pull request LGTM. Just a couple of small things.', (In reply to James Hugman :jhugman @jhugman from ', ) ', I think it's the latter. If we eventually want users to be able to customize their menus (removing items, rearranging icons) then the natural way to do this on IOS is to long press on an icon to enter this edit mode. Long-pressing the Home button to change the homepage again is also not discoverable, and I also don't believe users will be changing their home pages often enough that a short cut is warranted.", This is a great reply, thanks. Is there anything to be saved from this PR even if we don't use it in the product? e.g. 3D touch? (:fluffyemily and I have an eye on splitting the menu out as a separate project)", This is a great reply, thanks. Is there anything to be saved from this PR even if we don't use it in the product? e.g. use a 3D touch gesture? (:fluffyemily and I have an eye on splitting the menu out as a separate project)", Addressed nits, and rebased. Not merged.', Merged though unused by homepage.', ', 3D Touch is a great idea. I just reviewed the HIG and no red flags have been raised. We should totally use it for this button to reset the current page as Home. It's a tiny, secret little shortcut, but could be handy. And those without devices that support 3D Touch can still edit their page through the Settings." 
id=1162843	 'I doubt people have built up enough of a corpus yet! For those that come after us: the implementation to change is in getFilteredSitesWithLimit:whereURLContains:orderBy:includeIcon: in SQLiteHistory.swift.', Created ', ', Pull request Here is a very compact approach for solving this. I'd appreciate some feedback on this since I'm not sure whether a more verbose version would be better.", Comment on ', ', Pull request Comments on the PR.', Looks like the PR needs another pass? :rnewman, do you want to slot this into our 1.1 milestone?', Maybe. I think it's a nice-to-have for now, just for risk reasons. I'll try to get to this before we start stabilizing. (Sorry for the delay, Johannes!)", No issue at all. I understand that this is a critical part of the app that should not be messed with carelessly. Just get back to me in the PR on GitHub whenever you want to proceed. :)', Landed! 5238e87' 
id=1214676	 'Created ', ', PR: ', This patch reverts back to the use of UIBarButtonSystemItem.Cancel for two buttons that are not localized correctly because of missing strings.', exposed (see ', ) bunch of l10n notes and at least two need rewording ("Cancel alert view", "Cancel title from search engine picker").' 
id=1226652	 "Linked bug to Logins Management feature meta. I guess we'll need some UI modifications to the current logins manager to facilitate this?", We just removed the ability to clear logins from the device without uninstalling the app. In the absence of this feature, or warnings and functionality when linking accounts, this can lead to leaking passwords between FxAs, amongst other things. Steph, please make sure this doesn't fall off your radar.", (In reply to Stephan Leroux :sleroux from ', ) ', Yes, I've started on those with options of clearing one/any/all, but now that I see Richard's comment I'm wondering if it was more intentional to leave it out altogether or simply provide a 'less easy' way to wipe all.", (In reply to Robin Andersen :tecgirl from ', ) ', Sorry, I was unclear. It's not at all intentional to have no way to delete all logins. I was referring to ", landing before this one -- it means that getting this done is now a little more urgent, because there\'s currently no way to, e.g., switch FxAs without unexpectedly merging your passwords. It was accidentally shitty doing that through Clear Private Data, but at least a user could figure out how to do it. Now -- between 1.3 and whenever this bug reaches release -- they can\'t. My perception of the appropriate level of less-easy: Edit mode, select all, Remove Selected, with a confirmation prompt like the one we\'ll still show for CPD ("this will delete the selected logins from your synced devices" or "this will permanently delete the selected logins", depending on whether you\'re signed in). I trust your judgment!', So the removal of 'Clear Passwords' is uplifted for 1.3 release and the login manager won't be complete until 2.0. Are we okay with shipping 1.3 with no way to clear passwords or do we need a temporary 'less-easy' way of clearing passwords?", It's not ideal, but I don't think we should hold the release. We just need to be aware that we have to recommend uninstalling then reinstalling to some users, and we shouldn't miss the next release.", See ', for inspiration.', Do you have the assets for the checkmark/empty circle when selecting the logins?', Created ', loginSelection.zip :sleroux sure do, here you go!', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r- on two of the storage parts. I skimmed the rest; bnicholson can do a more thorough job!', :sleroux, it looks like the assets yo re using are a bit off. The check looks to be from the UIKit, which is a bit off and the fox is larger and lighter, so I assume yo re reusing the one we use on the Settings screen. I'll attach a comparison of the mock to the current build and the default favicon fox.", Created ', logins-compare.png', Created ', favicon-fox.zip', Comment on ', ', Link to Github pull-request: ', rnewman's and tecgirl's comments aside, I think everything else looks good.", Comment on ', ', Link to Github pull-request: ', Reflagging bug for UI review with new checkmark and fox icon.', Comment on ', ', Link to Github pull-request: ', Assets look good, one nit though\u2026 When choosing to "Select All" the button label should change state to "Deselect All" and perform the action accordingly.', I couldn't reproduce the issue you were seeing with 'Select All' not selecting all and not updating the title of the button. How were you able to cause this?", I'm going to go ahead and land this and if there are any bugs we find we can file follow up issues.", master a39e055f41293abfe1ed1db35fc916a01dd8f3d2' 
id=1172054	 'v1 scope?', More, on the theme of affordances and actionable offers: --- 1. The only hint that the user should swipe to advance the Tour is the three tiny gray dots at the bottom of the page. My wife did not know that the dots are a common (but subtle) iOS UI pattern. So the first thing she did was tap the "Start Browsing" button, inadvertently skipping the rest of the Tour. 2. The Tour text does not describe *how* to access any of the features. "Browse multiple Web pages". OK. "Personalize your Firefox". Sounds good. But *how*? The Tour text does not refer to the UI controls in the graphics. 3. The Tour graphics are so minimalist that my wife did not realize they are an abstract representation of the Fennec UI that *she has not actually seen yet*. The graphics would benefit from animated arrows or highlights directing the user to the tab or settings button (and that are referenced from the Tour text). 4. On the finalize page of the Tour, my wife did not realize that "Sign in to Firefox" was optional. Not wanting to "create yet another account" when Safari doesn\'t need one, she almost gave up here. The description "Connect Firefox everywhere you use it" doesn\'t actually mean anything if I didn\'t already know what Firefox Sync is. Plus the Tour text does not actually use the term "Firefox Sync" or describe the benefits of Sync. My wife is not a Sync user because she uses Firefox on just one desktop computer and does not use Android, so she has had no need to know what Sync is. ---', *** This bug has been marked as a duplicate of ', ***' 
id=1184237	 'Difficult to test animations.' 
id=1251306	 'Created ', ', Pull req. Check the last few commits -- this builds on top of #1551. Commit messages are descriptive. You can test this as follows: * Clean install. * Flip AppConstants.shouldMergeBookmarks to false. * Sync with an account with bookmarks. * You should see Desktop Bookmarks, be able to browse it, etc. * You should not be able to delete desktop bookmarks. * You should be able to delete local mobile bookmarks. * You shouldn't be able to delete folders anywhere. * None of your local changes will be uploaded to the server.", Note that there's an async-fetch TODO in there. Working on that now, but won't be done today. I might just not bother with that -- it's a can of worms.", Done, and I fixed a few other lurking bugs while I was there.', Comment on ', ', Pull req. This still doesn't work for me (see attachments for logs). I tried in these 4 circumstances and got the same behaviour: On fresh install: shouldMergeBookmarks=false On fresh install: shouldMergeBookmarks=true On Upgrade: shouldMergeBookmarks=true On Upgrade: shouldMergeBookmarks=false Desktop bookmark folder still present but empty. Local bookmarks present.", Created ', emily-on-fresh-install.log', Created ', emily-onupgrade.log', f3d158c' 
id=1109649	 'I think the two main delegate callback methods that we should start off with are: 1. webView:didFailNavigation:withError: 2. webView:didFailProvisionalNavigation:withError: The latter I was able to use when we enter an invalid url and a request time out. Does anyone have advice on how we can reproduce the other events such as bad SSL, connection refused etc...? I am having trouble finding sample websites where we can reproduce the other situations. Also how should we be displaying the errors? Should we follow how Safari does it? (Printing the error message in the center)', (In reply to Chuong Vu from ', ) ', Ideally we\'d like the test suite to not require access to live sites, so this question should really be "how do we write a test for this?". I\'m not definite on the answer to that, but presumably we can host a server in test code and have it simulate whatever error conditions we wish, just as we do for JS unit tests in mainline Firefox: ', StackOverflow turns up some good options: ', Manual testing should be as simple as running something like: ', -- you can manually create a PEM cert which is expired or missing a root, launch the server, browse to it from the simulator, and verify that you get an appropriate SSL-related callback. Yo ll soon see why automating this is worthwhile, I think! ", I think that's a reasonable starting point, but I'd probably point to desktop/Android Firefox for inspiration over Safari. The important thing is that we can iterate once we have something working; UX will get involved and start doing what they do best!", (In reply to Chuong Vu from ', ) ... ', Chuong would you mind focussing on displaying the errors? I think if you just show them like Safari does, centered with a bigger font size and maybe within a simple box, that would be a great start. Right now we show nothing so having some feedback on errors would be good to have. Don't worry too much about the style of things or the wording of error presentation. I am curious though what kind of information we have about errors. Is there always a localized error message available? What other info does the NSError contain that we could display? We would be very happy with a simple first iteration.", Stefan, That sounds like a great idea. Unfortunately I won't be able to jump onto this for at least another week. So if anyone wants to jump on this, please free feel to do so.", I want to take this.', Looping in Darrin. Darrin, do you think we can give luanjiwi some ideas of how common error pages would look on iOS? Or is it too early for that? Otherwise I suggest that luanjiwi just follow the hints in ', and not worry too much about the style of error pages.', I am aaron in irc. I will display errors in my way for now, once you give me some advices, then I will follow it.', (In reply to Stefan Arentz :st3fan from ', ) ', That is a good plan. Get something started and then we can iterate.', Should I also build the test server to test all kind of errors, or just make it works, then you can lead me the way.', (In reply to Aaron from ', ) ', Aaron I am working on integrating a Python web server in the unit test framework. So we will be able to use that for tests. In the meantime I would suggest to test a bit manually for some common scenarios like: * getting a timeout from on ', * getting a DNS error on ', * getting an invalid ssl response on ', (note the port) * getting an invalid response on ', (note the port)', (In reply to Stefan Arentz :st3fan from ', ) ', Wow, Awesome, I can write a little Python, I can help if you need any. ', Working on it, I will make it the same as Safari.', Keep an eye on ', which has a patch to include the GCDWebServer. (Python turned out to be very diffiult to include). I'll be happy to help write a bunch of unit tests for this.", Had got the patch, I will write some unit tests for this. Python is more easy to built and configure a server, I think, pity. BTW There is already a web server on Mac OS X, is it possible that we could use it for test?', Need some help here. I use NSError.code provided by error delegates of WKNavigationDelegate to generate the error message. I searched Apple's document found NSError.code is under kCFErrorDomainCFNetwork domain. Is it right? I have pulled a request, thinking I can get some advices, but sill not. Not knowing if it is correct, I also can't write unit tests for it. I want to take another bug while this one is unsolved, is that ok?", Created ', ', Pull Request', Aaron, I'll take a detailed look in a bit. I think you are on the right track and I hope to merge this soon. Maybe after a few minor changes.", I am going to merge this with the comment that this is not perfect but it will give us a much better idea of what kind of usable information WebKit errors contain. I am also going to file a followup but to turn these error messages into a more final design.', I filed 1125835 as a followup bug.', Aaron, I'm sorry we reverted your patch. The team thought it would be good to rethink how we want to handle this bug.", It's OK : I will find myself a new bug to work on, any suggestion?", I'll take a look at this. We'll probably need some kind of about: hackery to put the error page in the history stack.", I assume we'll want something for v1.", *** This bug has been marked as a duplicate of ', ***' 
id=1144752	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1193386	 'Created ', ', Link to Github pull-request: ', I see that this will fix the bug, but it'll also do a full DB write and a full session store flush, with thumbnails, every time you switch tabs. That seems like a bad idea. Can we just not persist isSelected in SavedTab, and instead aggressively persist an index in `prefs`?", (In reply to Richard Newman :rnewman from ', ) ', A couple points worth noting: 1) Selecting a tab is relatively infrequent operation versus loading a new URL. We already call storeChanges in the latter case. 2) storeChanges is much less expensive with ', fixed. Right now, storeChanges actually stores the selected tab as a boolean on the SavedTab, rather than an index. This is slightly safer since we don't need to worry about the index getting out of sync for whatever reason (i.e., one of the tabs has no history and is skipped). It also feels a bit messy to have our session data spanned across three sources: the keyed archive, screenshots on disk, and now an index in prefs. Also worth noting that we do a full session flush for each of these events (and more!) on Android. I forgot about the DB flush, though. So how do you feel about a bool passed to storeChanges that allows us to bypass the `self.profile.storeTabs` call?", Yeah, but we also do the thumbnail -> browser zoom at the same time on switch, so anything we can do to save cycles is worth it. ', Yup. ', Yup, I quite agree. ', I'd split it into two methods (one of which depends on the other) and just call the one you want. This gets even better if we don't store thumbnails -- I don't mind at all if we write an updated set of open tabs, so long as we're not writing thumbnails or touching the DB!", (In reply to Richard Newman :rnewman from ', ) ', Yeah, we only write thumbnails that have changed, so there won't be many thumbnail writes. We should flush new thumbnails, though, because they're generated only when going to the tab tray. If we don't save them here, the screenshot from the previous tab may not be persisted at all.", Updated.', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1205294	 'Created ', IMG_0943.PNG', While we\'re at it, do we sync passwords yet? "Sync your tabs across devices"', We do sync passwords in 1.0. We should make sure we have strings for both bookmarks and not, and perhaps worded for desktop-only ("mirror-ish", not "sync"), so we can switch without revving locales.', <darrin> rnewman: well we should have bookmarks in 1.1 <darrin> so we can kill that but if its not <1.1 <@rnewman> we can\'t get anything into a 1.0 <@rnewman> but I\'d still be keen to have both strings available in 1.1 <darrin> rnewman: makes sense, just in case\u2026? <@rnewman> and perhaps something more ambiguous: "Get your tabs, bookmarks, and passwords from other devices" <@rnewman> because tabs don\'t really *sync* <@rnewman> and bookmarks won\'t for 1.1 <darrin> rnewman: lets track it then\u2026 can you add those comments into the bug? <@rnewman> aye', Created ', ', Pull request', Created ', 5S', Created ', 6+', Comment on ', ', Pull request Just a question about using a link in the localize comment.', Comment on ', ', Pull request I'm not sure this is really solving the problem. The header still states that 'Sync' is involved, for lack of actual product feature identity. But, if you two feel that this is at least less literal, I can go with it for now. I'm also not crazy about how 'devices' is orphaned on its own line (in English, obviously). I know I can't win attempting pixel-perfection with strings\u2014but I can at least hope to visually balance.", Orphan gone.', Both landed strings have inaccurate l10n comments.' 
id=1153652	 'Created ', ', Patch for issue', According to Darrin, we should not show the toolbar at all when we've opened a new tab with about:home. But if we come back to it later (by clicking back), we do want to show the toolbar so we can go forward again.", But isn't a bit of inconsistent behavior showing toolbar for something and hiding it for others?", Comment on ', ', Patch for issue Regardless of what we decide to do in the end, I think this PR is an improvement, so we should go ahead and land it. But let's put the controller logic in BrowserViewController instead of the toolbar as mentioned in the PR.", Comment on ', ', Patch for issue Thanks for updating! Left more comments in the PR.', Comment on ', ', Patch for issue Looks good, thanks!', Not to stop the party, but I'd like to keep this open until we have the desired behaviour as outlined in ", (', )... Or :bnicholson do you want to open and tracking? a follow up bug?', (In reply to Darrin Henein :darrin from ', ) ', Yep, filed ', .' 
id=1217860	 "Marking this bug as needsuplift for 1.4 since we can only 'test' this lane by making an actual build.", Created ', ', Pull request Adding you for review :sleroux so we can test this when you come to do the first 2.0 build', Comment on ', ', Pull request This looks awesome! I can't wait to try this out.", I tried this out but I'm getting an error because :beta lane is defined twice. I think the second one just needs to be renamed :fennec." 
id=1229217	 'Sorry, ignore -- bug from a local build!' 
id=1175899	 'this has already been fixed, but must merge', *** This bug has been marked as a duplicate of ', ***' 
id=1254561	 'Things that should be configurable per location (browser, home panels, tabs tray): * which menu items are displayable in which locations * the order in which the menu items are displayed according to location', Created ', ', Pull request', Comment on ', ', Pull request Found some issues. Pulling from review', Comment on ', ', Pull request Fixed issues...', Comment on ', ', Pull request Comments in PR.' 
id=1120827	 'Created ', ', Pull request' 
id=1146361	 'Created ', iPhone6-time-profiler.trace.zip Time Profiler from my iPhone 6, not that bad ~330ms with +~100ms in TabManager code', Aaron can you measure again and see if things improved?', No improvement. Finkle can check his iPod again.', Created ', startup.trace.zip Build #9 startup, iPhone 6 (8.3) Measured time from launch (suspended) through splash-screen to idle on about:home', Suggestion to shave of ~ 90ms Every time at app startup we create a UIWebView to get the User Agent and then modify it to include our own unique string. This is an expensive operation. We can assume that the User Agent only changes as part of an iOS upgrade so we should remember the current iOS version and user agent, compare the iOS version and skip the UIWebView creation if it is the same.', Suggestion to shave off 100s of ms When we restore your tabs, we ask the TabManager to create new tabs with a specific NSURL. This immediately creates a WKWebView instance. This is an extremely expensive operation. The more tabs people have open, the worse this gets. We should only fully restore the front tab. And restore the others lazily when they are opened.', Suggestion to shave off ~ 100ms BrowserViewController.viewDidLoad() takes about 200 ms. Half of that is the creation of the ReaderModeBarView. We should to create that view lazily when it is needed. Not always at app startup.', Can you file bugs for those things (and link them against this)?', In BrowserViewController.viewDidLoad we create a new tab if no tabs were restored. This tab will initially open with the home screen. Two things: Can we create the WKWebView for this tab lazily until the user opens a link? I think in BVC.animateToolbarsWithOffsets() we call layoutIfNeeded() twice: self.view.layoutIfNeeded() if animated { UIView.animateWithDuration(duration, animations: animation, completion: completion) } else { animation() } Can the above call to layoutIfNeeded() be moved into the 'if animated' block? I don't think it is needed if no animations are run?", I have been testing on an iPhone 6 and iPhone 5. Both are pretty fast. Like, a cold boot takes ~1.25 seconds. I would like to understand on what kind of device it takes many seconds to start.', Untracking the meta bug.' 
id=1223009	 'Created ', ', Pull request', Comment on ', ', Pull request Left a comment on the PR about withExtendedLifetime', Can we upstream the right fix to GCDWebServer?', patch submitted to GCDWebserver: ', The PR hasn't been merged yet, and I'm still seeing it on master :/" 
id=1158507	 'Created ', ', Pull request', Merged. Thank you very much!' 
id=1277515	 'Thanks for the list of strings, grouping it in a single bug to make it actionable. For the record, I close the other bug because it was missing such a list. Missing localization note for "Double tap and hold to open history" string ', Missing localization note for "Closing tab" string ', Missing localization note for ShortcutItemTitleNewTab ("New Tab") string ', Missing localization note for NSLocationWhenInUseUsageDescription ("Websites you visit may request your location.") string ', Missing localization note for ShortcutItemTitleNewPrivateTab ("New Private Tab") string ', Send Tab, ', View Later, ', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', (In reply to Francesco Lodolo :flod from ', ) ', This string is commented in the source and not available in the exported xliff file, not sure why it's in your export ", ', ', They all live here, completely different format from the rest of the strings ', It seems possible to add comments before a strings as /* comment */, but they're not exported in the XLIFF file. See also ", Any reason why we're using a .strings file? ", I'm not sure if it's possible to add comments for these two either, can't even understand for sure from which part of the code they come. Maybe this? ", Stephan, do you have any idea about the last two?', (In reply to Francesco Lodolo :flod from ', ) ', Last two = InfoPlist.strings and CFBundleDisplayName strings.', ', Yup this is where that string is coming from. The same issue about adding comments to the Shortcut strings applies to these as well since they are both InfoPList.string files.', Created ', ', Pull request on GitHub This PR fixes the only comment I can fix.', (In reply to Francesco Lodolo :flod from ', ) ', Strange, it does for me routinely on Xcode 7.2.1 (last working xcodebuild export version) and on a fresh clone on different machine with Xcode 7.3.1 on master via partial xcodebuild (line 944) and UI (line 778, no targets in file). Whats more, I think the comment should be added anyway to be ready when uncommented (and not to file a bug again).', Added comment. I'm using 7.3.1 and gtimeout to make the export completes within 15 minutes. The string was definitely not there with 7.3.0, and it also seems very old (1.1).", (In reply to Francesco Lodolo :flod from ', ) ', ehm, 15 seconds', master 6d24061729ec7ea1f392b71523412e4aa5b78b84', Adding in the bug a summary of the IRC discussion: it's currently not possible to move the strings out of InfoPlist.strings and Info.plist, which also means we can't have comments for those.", v5.x 70ed6ef1aca07711310123ed0f4720d8234f4bf8' 
id=1233193	 "By the way, if this doesn't get done, the workaround is to not offer deletion for non-bookmarks (easiest), or for folders that aren't empty (slightly less easy).", The storage part of this is done and landed: ', We should add a little more testing before we enable deletion in the UI. There's no rush to enable deletion, because you can't create folders inside Mobile Bookmarks, and we don't merge yet: ", .' 
id=1179846	 'Created ', ', PR: ', This patch catches the case where we do not update the status when the user adds the current page to either Bookmarks or Reading List. We don't really know if the user did, so we always update the state when the `UIActivityViewController` is dismissed with `completed` status. This patch also cleans up `updateNavigationToolbarStates()` a bit, which previously took both a `Browser` and a `WKWebView`. I don't think that made sense because the `webView ` was always `browser.webView`.", Comment on ', ', PR: ', LGTM' 
id=1188299	 'Created ', ', Pull request A change I swore I'd already made (sending commands as dict rather than string) wasn't there. Also ensured that a sync of clients is performed as soon as a tab is sent rather than waiting until the next scheduled sync occurs", Comment on ', ', Pull request This is so cool. LGTM', Comment on ', ', Pull request This isn't quite ready to go, so clearing the r+ for clarity.", Comment on ', ', Pull request LGTM with one comment nit. Tidy it, test it, land it! Thanks for being patient.' 
id=1200231	 'Created ', ', ', Merged' 
id=1126486	 'Recycling this bug to be the bug for all things related to assets and specs. Including the buttons, etc.', Created ', ios-reader-v1.pdf Design specs for Reading List/Reader View', Created ', rv-assets.zip Assets', Created ', Brightness Indicators', Created ', ReaderView-MenuFlyIn.mov A quick movie to show how menu animates in.' 
id=1212423	 
id=1267578	 "I have reproduced this issue, though haven't been able to deduce the difference between the buttons.", Created ', ', Pull request', Comment on ', ', Pull request Seems to work fine for me on the simulator but I find the PR description misleading because the only thing you changed was this constraint (', ) and disabling userInteractionEnabled on the subview. I'm guessing the userInteractionEnabled is what was the problem?", Comment on ', ', Pull request Re-reviewed with the missing commit. Makes sense!', Merged and closed.', Verifying as fixed on build 4.0.0b7' 
id=1147912	 'If formatting turns out to be difficult then we should at least url-decode the phone number when displaying it. So that "+1%20PIZZAPIZZA" becomes "+1 PIZZAPIZZA".', Prompts now show 'Cancel', 'Call' but the phone number is not formatted at all, e.g, (555)-555-5555, shows up as 5555555555", There are some usefull link, may help. For Formating ', NBPhoneNumberUtil *phoneUtil = NBPhoneNumberUtil sharedInstance ; NSError *error = nil; NBPhoneNumber *number = phoneUtil parse:@"12345671234" defaultRegion:@"US" error:&error ; NSString *result1 = phoneUtil format:number numberFormat:NBEPhoneNumberFormatRFC3966 error:&error ; //tel:+1-234-567-1234 NSString *result2 = phoneUtil format:number numberFormat:NBEPhoneNumberFormatE164 error:&error ; //+12345671234 NSString *result3 = phoneUtil format:number numberFormat:NBEPhoneNumberFormatINTERNATIONAL error:&error ;//+1 234-567-1234 NSString *result4 = phoneUtil format:number numberFormat:NBEPhoneNumberFormatNATIONAL error:&error ;//(234) 567-1234 For adding parenthesis ', As far as I can tell there is sadly no public interface in Cocoa for formatting phone numbers. Internally, iOS seems to use a database of localized formats stored in plists such as these: ', ', We could copy such a plist to the project and utilize it for formatting but I am not sure about potential copyright concerns as these do not seem to be public. Alternatively, we'd have to use a third party library like the one mentioned in the previous comment. Any opinions on which approach to take?", libPhoneNumber-iOS is Apache licensed, based on good upstream code, and seems to do the trick. If that doesn't turn into a giant bloated mess -- it looks pretty minimal, and it supports Carthage -- then I'd take that approach rather than importing a data format file and trying to hand-roll a formatter. It also gives us stuff like validation for free.", Created ', ', Pull request This PR adds phone number formatting based on libPhoneNumber-iOS. Results are a bit mixed at times (see comments on GitHub).', Sorry for the delay getting to this; it's on my list.", Sorry for the delay. I finally got around to rebase this.', Hey guys, could you give me a short heads up whenever you plan to review this so that I can give it a final rebase?', This is very cool. Couple of comments: A lot of the URL handling code has been simplified recently. Make sure you check that out. We now use Carthage 'propery' which means we don't want to import source code but instead let Carthage build the libPhonenumber framework. I have not looked at the code in detail but we show the same dialog for sms, facetime and facetime-audio URLs. Would be great if this patch also works with those. The last two can take either an email address or a phone number. Marking this as 4.0, i'd love to see this land. Thank you!", Oh, interesting! Thanks for the pointers. I'll give this another look.", Small update: I rebased the PR on latest master and switched to letting Carthage build the libphonenumber framework. After spending quite some time struggling with Carthage (which refused to checkout nested dependencies), I'm now at a point where the project compiles and runs again. I'll look into extending the formatting to SMS & friends next.", Good stuff! I'd love to include this for 4.0, but that means it needs to be finished within a week or so. Let us know if that is ok for you, otherwise someone else can pick it up to finish the last bit. (Which I think it just dealing with sms: and facetime:/facetime-audio: links?)", Stefan, sorry again for the delay. :( I just updated the PR with proper handling for tel:, facetime: and facetime-audio. It does not seem as if there is any existing handling for sms: URLs, however, which means that these go straight into UIApplication.sharedApplication().openURL(...). Should there be a prompt similar to the Call/Cancel prompt for the other schemes?', I was wrong .. we do pass sms: straight to Messages.app. ', The only three that we prompt for in the app are tel, facetime and facetime-audio. No prompt is needed for sms:', Comment on ', ', Pull request Just marking this as needing review again since the last time was 4 months ago and the code changed considerably.', Comment on ', ', Pull request Looks good! Thanks for updating this PR. Only suggestion I would make is to move the unit tests to SharedTests since thats where our test cases for classes that live in Utils are.', (In reply to Stephan Leroux :sleroux from ', ) ', Thanks for reviewing, Stephan! I move the utility class to Shared and its tests to SharedTests. PR is rebased on latest master.', Sorry that I wasn't fast enough to make this go into 4.0 btw. :(", Comment on ', ', Pull request Awesome, thank you!' 
id=1161630	 'Created ', ', PR ', This adds a method to the faviconTable for removing any unused favicons. It calls it when history or bookmarks are removed. Refactored bookmarks a little bit to make that happen (but not all the way it needs to go...)', Hmm... This is actually going to be a bit messy when this is more sync-aware. All our beautiful Cascades go away? I wonder if we'd be better to move these deleted entries to a different table instead of marking them the way we do.", (In reply to Wesley Johnston (:wesj) from ', ) ', When a user doesn't have an account, we can directly delete, rather than marking. In that situation the cascades will apply. And when they do have an account, and we're marking history with is_deleted, we're at least immediately discarding visits\u2026 which will cascade to visit_sites, which will orphan favicons, and this patch will work. (And then a few minutes later we'll sync, and the history rows will be deleted.) We don't sync favicons, so nothing to worry about on that front yet.", Comment on ', ', PR ', A few questions on the PR.', Comment on ', ', PR ', Updated with a run( (String: Args?) ) method.', Sorry, Wes -- could you rebase this?', Rebased. I know there's another bug being worked on for this somewhere.... I'll find and try to close it (gently).", *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR ', r+ with comments. Pretty much just wanting to make sure we're thread-happy and aren't doing two big subqueries and a table walk each time the user does a delete.", Test updates: ' 
id=1170744	 'Looking at it now, the spinner is gone and a bunch of history is there. It looks like it eventually completed. I\'m not sure where the initial "reconnect to Sync" came from. Obviously logs would help. Any instructions on how to provide those?', Sounds similar to the bug I filed earlier today: ', Sounds exactly the same. *** This bug has been marked as a duplicate of ', ***' 
id=1100586	 
id=1183215	 'Template: ', Created ', historyEmptyPanel.zip', Created ', ', PR waiting for UI to give me the padding specifics for the text', Comment on ', ', PR Looks good, but have some questions in the PR.', Comment on ', ', PR smelly caaat smelly cat. what. r. they feeding , Comment on ', ', PR Looks good.', Created ', mock up', Created ', Screen Shot 2015-07-28 at 9.26.53 AM.png', iPad layout?', That is a UX question ^^^', (In reply to Aaron Train :aaronmt from ', ) ', Given its simplicity, no iPad-specific variation at this time.' 
id=1250209	 'Curious if Chrome handles this.', Yes, Add to Passbook works inside Chrome', So this looks like URL handling. In both Safari and in Chrome it slides up to reveal this view: ', So it seems like it's OS-specific and doesn't require custom UX.", Created ', ', Pull request Happy for this one to not make it into 5.0, but it would be nice to see it sometime', Comment on ', ', Pull request Awesome :D It's be great if we could get this in 5.0 but I'm not sure with the addition of the strings. Also seems feature flaggable if we're worried about it but it seems pretty self contained.", merged ', hey :flod. This patch has new strings. Is it too late to add new ones for 5.0?', Switching NI to delphine for the question since she\'s the owner of Fennec l10n. By a quick look at the strings, I confess I have no clue what they do, and it would be helpful to have something in the notes. I had to Google to find out what a "pass" is in this context: ', e.g. "Title of the dialog displayed when adding a pass to the Passbook fails. See ', for context on Passbook."', Hey Emily, thanks for reaching out. I think in this case since we are not too late in the cycle, we can add these strings. Please take note of :flod's comment as well. Thanks!", v5.x c10c6775a196a16de92cd4a380e4c91700802881', (In reply to Stephan Leroux :sleroux from ', ) ', Were the comments fixed? I also don't see this anywhere ", I don't think so - I uplifted whatever was already merged into master. We can submit another patch for the comment fixes to v5.x on top of this change though. ", Still burning down the needsuplift list before pushing up the branch.', (In reply to Francesco Lodolo :flod from ', ) ', I've addressed the comments in ", which also now adds a few strings.' 
id=1129483	 
id=1191831	 'This bug is probably related to screen size, not iOS version. I see this bug on an iPhone 5S running iOS 8.4.', I can only reproduce this when the URL bar text is very long - enter a short URL and the spacing is fine. I have only seen this on iOS9 on a 5S. iOS8.4 on an iPod Touch is rendering just fine for me', Created ', ', Pull request', best STR I found was iOS9 on iPhone 5S, search for mozilla then rotate.', Comment on ', ', Pull request Brian and I were having issues with this before and were equally confused. I think this patch is good - maybe we can come back later and figure out whats really going on.', Merged' 
id=1224906	 'Created ', screenshot I made a PoC as follows and the attached is a screenshot when reproduced. ', Not sure if the iOS version is part of the bounty program but nominating all the same', Does this reproduce on Safari for iOS?', Created ', Test result on Safari for iOS It's not reproducible on Safari for iOS. When navigated to a URL with userinfo Safari blocks the loading and shows phishing site alert window as attached.", We should not be showing userinfo in the URL bar, this was a very old phishing technique. (search for old firefox security bugs about that). Even if we stop showing the userinfo, though, the restricted space allows for spoofing of the form "accounts.google.com.not.really.but.you.cant.see.this.com". Not sure what to do about that.', Confirmed this is a bug that we will fix in Firefox.', Created ', ', Pull request Removes user info from the URL bar', Comment on ', ', Pull request LGTM', Which release are we tracking this for? 1.3 or 1.4?', I think this one is a 1.3 release as it's a security bug, but double check with :st3fan", (In reply to Daniel Veditz :dveditz from ', ) ', We do show all domain segments other than the baseDomain in grey. We ellipsize the end of the URL. So that would show as grey ', which might be enough to tickle a user's spidey sense. On a big iPad it'd be grey ", ', (In reply to Stephan Leroux :sleroux from ', ) ', It's tracking 1.3. If a patch is done, tested, and landed, we should uplift it to v1.x.", v1.x 7193960', *** ', has been marked as a duplicate of this bug. ***' 
id=1142809	 'Created ', ', Link to Github pull-request: ' 
id=1271018	 'I think it should actually be? | ', | | 2016-05-06 20:31:23 Sync Now |', Created ', ', Pull request This fix resolves RTL alignment for all settings', LGTM!' 
id=1164160	 'Created ', ', PR: ', This patch actually does the reverse. It leaves the internal web server on a random port. But it does a couple of things to support this: * We now set the `GCDWebServerOption_AutomaticallySuspendInBackground` option to keep server alive and thus keep the port that was chosen upon application start. * We do no longer store reader mode URLs in the application state. Instead we write a `SavedTab` object and mark it with `readerMode` and `selected` properties together with the original url. When the tab is restored we turn the original URL into the reader mode url. This patch also contains two fixes for `ReaderModeUtils` to better recognize and parse reader mode URLs. I understand the last part of this was not really part of this bug description but that was actually the reason why I wanted to run the web server on a fixed port.', Comment on ', ', PR: ', Sounds like you plan to update this, so clearing r? flag for now.', Comment on ', ', PR: ', Although this is a relatively small patch, it fixes the following bugs: * 1164160 - Local server pages don't restore properly on resume * 1168687 - Screenshots do not restore on resume * 1167310 - Do not store tab state at startup * 1166491 - Session encoding unsafely unwraps web view's URL These are combined in a rewrite of the code that implements the `UIStateRestoration` functions. That code may seem a bit overly verbose and pedantic. This is on purpose because this code must be very robust to not fail on startup.", Comment on ', ', PR: ', I'd like to land this early wednesday so that we can include these fixes in the new build. (At least some of these contribute to the startup crashes that people have reported).", *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR: ', Nice, this looks great to me.', Comment on ', ', PR: ', LGTM!' 
id=1173372	 'Created ', ', PR ', Comment on ', ', PR ', LGTM', Merged' 
id=1186148	 'Created ', ', Pull request', Comment on ', ', Pull request Left some comments on the PR', Fixed!! :)' 
id=1111804	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good to me.' 
id=1265819	 'Good first bug?', Created ', ', ', Comment on ', ', ', Just some minor nits but good to go.', master 88fadc8af1e42e70d32f551e720d5bc702a197c3', v5.x d3fe758b19e5688d3588c1beb1b4758482104695' 
id=1131355	 'Created ', ', Pull request' 
id=1151970	 'Created ', ', Pull req. This needs a little more testing than it's so-far received, but I think you get the idea.", Comment on ', ', Pull req. Couple small nits. Looks good.', Part 1: ', Part 2: ', Created ', ', Remainder. Nick, this is pretty much ready to land. Ignore the non-numbered commits at the end of that branch.', Comment on ', ', Remainder. PR reviewed by nalexander.', 61c6e01' 
id=1145391	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1194413	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1156402	 'Created ', ', PR ', Comment on ', ', PR ', LGTM', Merged.' 
id=1310025	 'Created ', ', Link to Github pull-request: ', Looks great! Lets get this in ASAP :)' 
id=1255249	 'Created ', ', PR: ', Makes snapshots of the share sheet and the ShareTo and SendTo extensions.' 
id=1123520	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1244138	 'Created ', ', Link to Github pull-request: ', This patch hides the default favicons for the logins until we can resolve issues with loading favicons for loading: ', . There is some risk in the favicon patch that I'm working with Richard through and I don't feel confident in landing it for 2.0.", master 965d6fb9cf4c140ac99bd69063b37dbc3944d1c1' 
id=1135769	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1231539	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1147018	 'Preview ', (WiP)', Created ', shareWidget.pdf Layout guidelines for Share Widget', u(In reply to Stefan Arentz :st3fan from ', ) ', updated share link of works in progress: ', Closing this bug since we did the implementation and tweaking in ' 
id=1177936	 'marking resolved as you can Mark as Read by swiping right on the item.' 
id=1278672	 'Resolved with patch on meta.' 
id=1294807	 'Created ', ', Pull request', Comment on ', ', Pull request Nice.' 
id=1169833	 'Argh, these bugs are confusing me. Blocker was right the first time.', Created ', PR ', There was an incorrect sequence of events happening when we were inserting/deleting tabs from the TabTrayController.', Created ', ', Pull request', Merged', *** ', has been marked as a duplicate of this bug. ***', Created ', Build 32, iPhone 5S, iOS 8 Seems to be back\u2026', It seems that I also somehow changed tracking-fennec flag unintentionally and have no idea how to set it back.', (In reply to Stefan Plewako :stef from ', ) ', We fixed this again yesterday ' 
id=1160239	 "I've got a fix for this over in ", .', *** This bug has been marked as a duplicate of ', ***' 
id=1182153	 'Created ', ', PR', Comment on ', ', PR Looks OK, but see the issues mentioned in the PR.', Comment on ', ', PR Nice!' 
id=1235882	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good! Yay tests!' 
id=1213841	 'Page loaded instantly for me over WiFi, no problems same build (iPhone 6).', Forgot to mention that yo ll have to be signed in in order to see this. Probably has something to do with getting the account info. I'm also seeing this issue on Nightly/Android." 
id=1281814	 'Created ', ', Pull request' 
id=1162738	 'Created ', ', PR ', So the issue here is actually that we made the panel white+0.6 transparency with white dividers. On pages that are some color, the dividers are visible (i.e. the background isn't entirely white). On pages that are white though, they disappear. Does UX have any opinion here? This actually updates both the top sites and other panels to always use the same color (except reader view which apparently decided to do its own thing... argh).", Comment on ', ', PR ', I didn't run it, but code looks fine, so WFM as long as UX approves.", (In reply to Wesley Johnston (:wesj) from ', ) ', Looks good. Will file to update the dividers for Reading List' 
id=1171633	 'Just noticed this now and hit it on master.', *** ', has been marked as a duplicate of this bug. ***', I think this was fixed with Darrin's fix!", Created ', Screen Shot 2015-07-02 at 2.56.36 PM.png nope, just kidding hehe still needs to be fixed', ^ above behavior was made when signing in and refreshing to sync O_O', I'll take this one since I probably introduced it. (I added the first item with a UISwitch in it)", Created ', ', PR: ', This patch resets the cell's `accessoryView` to `nil` when it is configured with the defaults. This is not the best solution. I think what really should happen is that instead of subclassing a `Setting` class, we should simply implement `UITableViewCell` subclasses for the individual items, with unique `reuseIdentifiers`. There is no need to put an extra abstraction on top of that.", Comment on ', ', PR: ', Yup this works for now. When we move over to a subclass we can override the prepForReuse method to perform this resetting of values.', *** ', has been marked as a duplicate of this bug. ***' 
id=1183957	 "Wes, I'm pretty sure you wanted to remove this, right?", Yes.', This call stack is while constructing a record from Sync server data. That means we definitely have password records in the wild for which formSubmitURL doesn't match the record's hostname.", Created ', ', Pull req.' 
id=1238115	 'Created ', ', PR', Comment on ', ', PR See PR for comments.', This was not fixed for sure.', Created ', ', PR how are these?', Comment on ', ', PR I see similarly sounding strings on the screenshot behind ', (why link shortener btw) but it is hard to say (without checking the code) whenever strings got changed or they are completely different thing. It is better to describe UI element where translated string will be displayed. For example "Description on the introduction tour carousel slide" or "String spoken by assistive technology (like VoiceOver) stating on which page of the intro wizard we currently are. E.g. Introductory slide 1 of 3" or "Title on the introduction tour carousel slide". Screenshots are great when accurate but tend to become outdated easily.', Can some summarize the current status of this bug? Which strings need a different comment, and if the current assignee is going to drive it to a conclusion?', As far as I can tell this changeset should have fixed the remaining issues ' 
id=1109063	 "This is a demo/dev endpoint, and won't be present in the final product." 
id=1193058	 'Created ', ', Pull req. Let's see who gets to this first. Tested restore.", Comment on ', ', Pull req. LGTM', a33d99c' 
id=1205015	 "Removing NI for me as I was using it as a reminder to check this out. Sounds like yo re taking it Emily?", yup, I'm looking at this stuff", For additional context, the following locales have expressed the inability to test due to lack of devices: - bg 1212545 - da 1140855 - br 1212547 - dsb 1212561 - hsb 1212561 - gd 1140747 - gl - pt-PT 1212576 - son Some of these are opting to not ship because of this. I suspect more are not testing, but simply proofreading their translations. Getting screenshots up-and-running will solve this problem for the next release.', While pl is tested on real devices we would be also interested in this, especially on latest/default device and also on smallest supported device.', Created ', ', Changes to firefox-ios for l10n screenshotting I've created a new target and scheme for l10n screenshot tests so that they can be run separately from the marketing ones. There are currently no active tests, but they can be added when we want into this target.", Created ', ', Changes to firefox-ios-built-tools for localised screenshotting provides a lane for running snapshot tests for l10n', To test this you will have to amend fastlane/Fastfile import_build_tools action to take additions args branch: "fluffyemily/Bug-120515-automated-l10n-screenshots"' 
id=1272249	 'I think we can live with this one.' 
id=1144671	 'Mozilla, SUMO, ....', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', I noticed these thumbs look kinda bad on tablets. Cleaned it up a bit. I punted on localization for now (although we should just need to put this in a en.lprog directory for that to work).', I just realized this isn't smart enough to not show a tile if its already a top site...", Comment on ', ', PR ', Looks mostly good with some review comments. Biggest issue is making sure the thumbnail spacing doesn't regress." 
id=1153330	 'Not a bad idea. James will be looking to expand the Session in his current work from just storing it to an iOS provided "bundle" to saving to disk in the profile, mainly for crash restoration.', We also need access to your tabs for Sync: every open tab, its URL history (back stack), when it was last used, and the current page title. That sounds like: Session ... -> Browser Title URLs layered into ', . I'll need this very very soon -- Monday, ideally -- for tab sync. If it's not ready by then, that's OK: we'll just have one-directional tab syncing. This needs to be an interface in Storage, not in Client, so that Sync can read from it.", Created ', ', PR ', Some refactoring in here that actually doesn't need to be. Just me finding my footing. Happy to take feedback if you have time, but otherwise I'll send it for review tomorrow hopefully.", Comment on ', ', PR ', nits, comments, and questions added to ticket.', Comment on ', ', PR ', Back to you nick.', Comment on ', ', PR ', Comments on GH, but nothing major. Sorry for the slow turnaround.' 
id=1165481	 'Created ', ', PR ', Comment on ', ', PR ', I'm giving this a - because it copies all the Readability project files into our packaged application. Like tests, etc. I think it is fine to Carthage for this but don't drag the whole folder into the project. Instead just drag Readability.js in there.", Comment on ', ', PR ', Updated. Does having the files in the project actually build them or anything or do you just not like them being in the proj file?', Wes, they were actually part of the Copy Files phase. So those files would end up in the Firefox.ipa file. If it makes sense to have them in the project file then they should not be part of any targets.', Comment on ', ', PR ', This does not work for me. I did a clean checkout and ran `./checkout.sh`. In the project I now see a `readability` under `Third-Party Source` that has `Readability.js` in it. But, that file is marked red. And when I look at the path for it, it says `/Users/sarentz/Mozilla/firefox-ios/Readability.js`. Not sure what is going on here. Do you want me to fix this? Just assign it to me.', I'll pick this one up.", Comment on ', ', PR ', Obsoleting this PR. Going to create a new one.', Created ', ', PR: ', This patch includes ', as a Carthage dependency and pulls in the `Readability.js` from that checkout.', Comment on ', ', PR: ', LGTM' 
id=1229087	 'Created ', ', Link to Github pull-request: ', Emily, I know yo re already out, but feel free to re-look at this later.", Comment on ', ', Link to Github pull-request: ', Looks good to me.', What is the backstory? Do we think this is possible a cause for the corrupt database?', When running rnewman/minimal-db-fix on iPhone 6S. 2015-11-30 20:34:46.737 Debug BrowserDB.swift:37 init(filename:secretKey:files:) > Initializing BrowserDB: logins.db. 2015-11-30 20:34:46.738 Debug BrowserDB.swift:47 init(filename:secretKey:files:) > Creating db: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db with secret = Optional("qmk6QpgqXZOLNfL9hpjqwJLN9iwO9LqW1rfDdrJjk6hj4XDkI5ayL/bn9hr8IalKhM/KU0MBCCGwh2bK/8GI3/sDsfTtU7kfZZndzSVCeRm+lFlZAYSY30SZLfFeSXRcjeANyxFQbqDO+u7hR80qGYPpFJOSJpJ/f3jJHcrqGq9OyQb2kDb0SeajMGGi4ZVgmcV6UCO6AnN0WrRFuCb5056zRK+LpFhvnY4zvNiLk5TbN1+BqyM0a8ZghUsui+i7sz4lYboTXhkak8LnQsUOloDP2T1Sczxf/k9BipNW0Fau9We9XiKWKpIOQxo8+5J0E/hRGv+EaOJkhwWwT6Ni7A==") 2015-11-30 20:34:46.740 Debug SwiftData.swift:83 getSharedConnection() > >>> Creating shared SQLiteDBConnection for /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db on thread <NSThread: 0x12c50d220>{number = 1, name = main}. 2015-11-30 20:34:46.741 Debug SwiftData.swift:397 init(filename:flags:key:prevKey:) > Opening connection to /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db. 2015-11-30 20:34:46.814 Error SwiftData.swift:568 writeCorruptionInfoForDBNamed(_:toLogger:) > Corrupt DB detected! DB filename: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db 2015-11-30 20:34:46.815 Error SwiftData.swift:571 writeCorruptionInfoForDBNamed(_:toLogger:) > DB file size: 32768 bytes 2015-11-30 20:34:46.815 Error SwiftData.swift:573 writeCorruptionInfoForDBNamed(_:toLogger:) > Integrity check: 2015-11-30 20:34:46.816 Error SwiftData.swift:583 writeCorruptionInfoForDBNamed(_:toLogger:) > Couldn\'t run integrity check: Error Domain=org.mozilla Code=11 "The database disk image is malformed malformed database schema (?)" UserInfo={NSLocalizedDescription=The database disk image is malformed malformed database schema (?)}. 2015-11-30 20:34:46.817 Error SwiftData.swift:587 writeCorruptionInfoForDBNamed(_:toLogger:) > Call stack: 2015-11-30 20:34:46.833 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 0 Storage 0x0000000100d0c1c0 _TFFC7Storage18SQLiteDBConnection29writeCorruptionInfoForDBNamedFS0_FTSS8toLoggerC9XCGLogger9XCGLogger_T_U_FT_T_ + 2492 2015-11-30 20:34:46.834 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 1 Storage 0x0000000100cf8144 _TTRXFo__dT__XFdCb__dT__ + 44 2015-11-30 20:34:46.834 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 2 libdispatch.dylib 0x0000000102661c68 _dispatch_client_callout + 16 2015-11-30 20:34:46.835 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 3 libdispatch.dylib 0x000000010266dbc0 _dispatch_sync_f_invoke + 136 2015-11-30 20:34:46.835 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 4 Storage 0x0000000100d04548 _TFC7Storage18SQLiteDBConnection29writeCorruptionInfoForDBNamedfS0_FTSS8toLoggerC9XCGLogger9XCGLogger_T_ + 372 2015-11-30 20:34:46.836 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 5 Storage 0x0000000100d04004 _TFC7Storage18SQLiteDBConnection12executeQueryurfS0_FTSS7factoryFCS_5SDRowq_8withArgsGSqGSaGSqPSs9AnyObject_____GCS_6Cursorq__ + 388 2015-11-30 20:34:46.836 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 6 Storage 0x0000000100cfd4e4 _TFC7Storage18SQLiteDBConnectionP33_3F4389F18684E136A114953F0C3F855C6setKeyfS0_FGSqSS_GSqCSo7NSError_ + 2276 2015-11-30 20:34:46.837 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 7 Storage 0x0000000100cffa34 _TFC7Storage18SQLiteDBConnectionP33_3F4389F18684E136A114953F0C3F855C16prepareEncryptedfS0_FTVSs5Int323keySS7prevKeyGSqSS__Sb + 160 2015-11-30 20:34:46.838 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 8 Storage 0x0000000100d01700 _TFC7Storage18SQLiteDBConnectioncfMS0_FT8filenameSS5flagsVSs5Int323keyGSqSS_7prevKeyGSqSS__GSqS0__ + 2400 2015-11-30 20:34:46.838 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 9 Storage 0x0000000100cf9814 _TFC7Storage18SQLiteDBConnectionCfMS0_FT8filenameSS5flagsVSs5Int323keyGSqSS_7prevKeyGSqSS__GSqS0__ + 312 2015-11-30 20:34:46.839 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 10 Storage 0x0000000100d094b8 _TFFC7Storage9SwiftDataP33_3F4389F18684E136A114953F0C3F855C19getSharedConnectionFS0_FT_GSqCS_18SQLiteDBConnection_U_FT_T_ + 596 2015-11-30 20:34:46.839 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 11 Storage 0x0000000100cf8144 _TTRXFo__dT__XFdCb__dT__ + 44 2015-11-30 20:34:46.840 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 12 libdispatch.dylib 0x0000000102661c68 _dispatch_client_callout + 16 2015-11-30 20:34:46.840 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 13 libdispatch.dylib 0x000000010266d81c _dispatch_barrier_sync_f_invoke + 164 2015-11-30 20:34:46.841 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 14 Storage 0x0000000100cf96a0 _TFC7Storage9SwiftDataP33_3F4389F18684E136A114953F0C3F855C19getSharedConnectionfS0_FT_GSqCS_18SQLiteDBConnection_ + 296 2015-11-30 20:34:46.841 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 15 Storage 0x0000000100cf98f4 _TFC7Storage9SwiftData14withConnectionfS0_FTOS0_5Flags11synchronousSb2cbFT2dbCS_18SQLiteDBConnection_GSqCSo7NSError__GSqS3__ + 96 2015-11-30 20:34:46.842 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 16 Storage 0x0000000100cfa03c _TFC7Storage9SwiftData11transactionfS0_FT11synchronousSb18transactionClosureFT2dbCS_18SQLiteDBConnection_Sb_GSqCSo7NSError_ + 168 2015-11-30 20:34:46.843 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 17 Storage 0x0000000100cf9f74 _TFC7Storage9SwiftData11transactionfS0_FFT2dbCS_18SQLiteDBConnection_SbGSqCSo7NSError_ + 84 2015-11-30 20:34:46.843 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 18 Storage 0x0000000100ce3c38 _TFC7Storage9BrowserDB14createOrUpdatefS0_FtGSaPS_5Table___Sb + 380 2015-11-30 20:34:46.844 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 19 Storage 0x0000000100ce2998 _TFC7Storage9BrowserDBcfMS0_FT8filenameSS9secretKeyGSqSS_5filesCS_12FileAccessor_S0_ + 1840 2015-11-30 20:34:46.845 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 20 Storage 0x0000000100ce2b20 _TFC7Storage9BrowserDBCfMS0_FT8filenameSS9secretKeyGSqSS_5filesCS_12FileAccessor_S0_ + 212 2015-11-30 20:34:46.845 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 21 Client 0x000000010023e9f8 _TFFFC6Client14BrowserProfilegP33_A76D479B096E6A9510AC7CA65ECAC6898loginsDBC7Storage9BrowserDBU_FT_S2_U_FT_T_ + 216 2015-11-30 20:34:46.846 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 22 Client 0x00000001000e9848 _TTRXFo__dT__XFdCb__dT__ + 44 2015-11-30 20:34:46.846 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 23 libdispatch.dylib 0x0000000102661c68 _dispatch_client_callout + 16 2015-11-30 20:34:46.847 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 24 libdispatch.dylib 0x0000000102662ae0 dispatch_once_f + 132 2015-11-30 20:34:46.847 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 25 Client 0x000000010023e7fc _TFFC6Client14BrowserProfilegP33_A76D479B096E6A9510AC7CA65ECAC6898loginsDBC7Storage9BrowserDBU_FT_S2_ + 164 2015-11-30 20:34:46.848 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 26 Client 0x0000000100234dec _TFC6Client14BrowserProfilegP33_A76D479B096E6A9510AC7CA65ECAC6898loginsDBC7Storage9BrowserDB + 240 2015-11-30 20:34:46.848 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 27 Client 0x000000010023e4ac _TFFC6Client14BrowserProfileg6loginsP7Storage13BrowserLoginsS1_21ResettableSyncStorageS1_14SyncableLogins_U_FT_CS1_12SQLiteLogins + 40 2015-11-30 20:34:46.849 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 28 Client 0x00000001002347b4 _TFC6Client14BrowserProfileg6loginsP7Storage13BrowserLoginsS1_21ResettableSyncStorageS1_14SyncableLogins_ + 1120 2015-11-30 20:34:46.850 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 29 Client 0x0000000100235cd8 _TTWC6Client14BrowserProfileS_7ProfileS_FS1_g6loginsP7Storage13BrowserLoginsS2_21ResettableSyncStorageS2_14SyncableLogins_ + 68 2015-11-30 20:34:46.851 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 30 Client 0x0000000100185250 _TFC6Client12LoginsHelperP33_F268F8A631A601D16841AB5B28C189F113requestLoginsfS0_FTP7Storage9LoginData_9requestIdSS_T_ + 156 2015-11-30 20:34:46.851 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 31 Client 0x000000010018269c _TFC6Client12LoginsHelper21userContentControllerfS0_FTCSo23WKUserContentController23didReceiveScriptMessageCSo15WKScriptMessage_T_ + 2316 2015-11-30 20:34:46.852 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 32 Client 0x000000010018592c _TTWC6Client12LoginsHelperS_13BrowserHelperS_FS1_21userContentControlleruRq_S1__fq_FTCSo23WKUserContentController23didReceiveScriptMessageCSo15WKScriptMessage_T_ + 84 2015-11-30 20:34:46.853 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 33 Client 0x0000000100272f5c _TFC6ClientP33_51AAA34A1E0B8817D1AAA32D321A88D713HelperManager21userContentControllerfS0_FTCSo23WKUserContentController23didReceiveScriptMessageCSo15WKScriptMessage_T_ + 932 2015-11-30 20:34:46.854 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 34 Client 0x00000001002730f8 _TToFC6ClientP33_51AAA34A1E0B8817D1AAA32D321A88D713HelperManager21userContentControllerfS0_FTCSo23WKUserContentController23didReceiveScriptMessageCSo15WKScriptMessage_T_ + 92 2015-11-30 20:34:46.854 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 35 WebKit 0x000000018ac51e48 <redacted> + 228 2015-11-30 20:34:46.855 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 36 WebKit 0x000000018abfa710 <redacted> + 212 2015-11-30 20:34:46.855 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 37 WebKit 0x000000018abfc5f0 <redacted> + 112 2015-11-30 20:34:46.856 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 38 WebKit 0x000000018aa56830 <redacted> + 120 2015-11-30 20:34:46.856 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 39 WebKit 0x000000018abdc3e4 <redacted> + 32 2015-11-30 20:34:46.856 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 40 WebKit 0x000000018aa122dc <redacted> + 136 2015-11-30 20:34:46.856 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 41 WebKit 0x000000018aa14388 <redacted> + 120 2015-11-30 20:34:46.857 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 42 JavaScriptCore 0x0000000186323110 <redacted> + 484 2015-11-30 20:34:46.857 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 43 JavaScriptCore 0x000000018632376c <redacted> + 36 2015-11-30 20:34:46.858 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 44 CoreFoundation 0x000000018473c544 <redacted> + 24 2015-11-30 20:34:46.858 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 45 CoreFoundation 0x000000018473bfd8 <redacted> + 540 2015-11-30 20:34:46.858 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 46 CoreFoundation 0x0000000184739cd8 <redacted> + 724 2015-11-30 20:34:46.859 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 47 CoreFoundation 0x0000000184668ca0 CFRunLoopRunSpecific + 384 2015-11-30 20:34:46.860 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 48 GraphicsServices 0x000000018fbec088 GSEventRunModal + 180 2015-11-30 20:34:46.860 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 49 UIKit 0x0000000189d80ffc UIApplicationMain + 204 2015-11-30 20:34:46.861 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 50 Client 0x00000001002804d4 main + 528 2015-11-30 20:34:46.861 Error SwiftData.swift:589 writeCorruptionInfoForDBNamed(_:toLogger:) > >> 51 libdyld.dylib 0x000000019a4728b8 <redacted> + 4 2015-11-30 20:34:46.862 Error SwiftData.swift:591 writeCorruptionInfoForDBNamed(_:toLogger:) > ---- 2015-11-30 20:34:46.863 Error SwiftData.swift:595 writeCorruptionInfoForDBNamed(_:toLogger:) > Open file descriptors: 2015-11-30 20:34:46.863 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 5: /private/var/mobile/Containers/Data/Application/38A6297E-4376-42C1-BE42-201B089C3B76/Library/Caches/Logs/corruptLogger.20151130T203440+0000.log 2015-11-30 20:34:46.864 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 17: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db 2015-11-30 20:34:46.864 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 3: /dev/ttys000 2015-11-30 20:34:46.865 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 15: /private/var/mobile/Containers/Data/Application/38A6297E-4376-42C1-BE42-201B089C3B76/Library/WebKit/WebsiteData/LocalStorage/https_bugzilla.mozilla.org_0.localstorage 2015-11-30 20:34:46.866 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 11: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/browser.db-wal 2015-11-30 20:34:46.866 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 8: /private/var/mobile/Containers/Data/Application/38A6297E-4376-42C1-BE42-201B089C3B76/Library/Caches/Logs/browser.20151130T203440+0000.log 2015-11-30 20:34:46.867 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 12: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/browser.db-shm 2015-11-30 20:34:46.867 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 13: /private/var/mobile/Containers/Bundle/Application/28B0DC15-9247-42B4-8095-71A27C4D417F/Client.app/Assets.car 2015-11-30 20:34:46.868 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 0: /dev/null 2015-11-30 20:34:46.868 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 7: /private/var/mobile/Containers/Data/Application/38A6297E-4376-42C1-BE42-201B089C3B76/Library/Caches/Logs/browser.20151130T203440+0000.log 2015-11-30 20:34:46.869 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 18: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db-wal 2015-11-30 20:34:46.869 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 4: /private/var/mobile/Containers/Data/Application/38A6297E-4376-42C1-BE42-201B089C3B76/Library/Caches/Logs/sync.20151130T203440+0000.log 2015-11-30 20:34:46.870 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 19: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db-shm 2015-11-30 20:34:46.870 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 2: /dev/ttys000 2015-11-30 20:34:46.871 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 16: /dev/random 2015-11-30 20:34:46.871 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 14: /private/var/mobile/Containers/Data/Application/38A6297E-4376-42C1-BE42-201B089C3B76/Library/WebKit/WebsiteData/LocalStorage/StorageTracker.db 2015-11-30 20:34:46.872 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 10: /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/browser.db 2015-11-30 20:34:46.873 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 9: /System/Library/Frameworks/UIKit.framework/Artwork.bundle/Assets.car 2015-11-30 20:34:46.873 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 1: /dev/ttys000 2015-11-30 20:34:46.873 Error SwiftData.swift:597 writeCorruptionInfoForDBNamed(_:toLogger:) > 6: /private/var/mobile/Containers/Data/Application/38A6297E-4376-42C1-BE42-201B089C3B76/Library/Caches/Logs/browser.20151130T203440+0000.log 2015-11-30 20:34:46.874 Error SwiftData.swift:599 writeCorruptionInfoForDBNamed(_:toLogger:) > ---- 2015-11-30 20:34:46.875 Error SwiftData.swift:557 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 2015-11-30 20:34:46.875 Debug SwiftData.swift:478 closeCustomConnection(immediately:) > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db on <NSThread: 0x12c50d220>{number = 1, name = main}. 2015-11-30 20:34:46.879 Debug SwiftData.swift:498 closeCustomConnection(immediately:) > Closed /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db. 2015-11-30 20:34:46.944 Error SwiftData.swift:557 executeQuery(_:factory:withArgs:) > SQL error: The database disk image is malformed malformed database schema (?). 2015-11-30 20:34:46.944 Error SwiftData.swift:334 prepareEncrypted(_:key:prevKey:) > Unable to encrypt database 2015-11-30 20:34:46.945 Debug SwiftData.swift:415 deinit > deinit: closing connection on thread <NSThread: 0x12c50d220>{number = 1, name = main}. 2015-11-30 20:34:46.945 Debug SwiftData.swift:478 closeCustomConnection(immediately:) > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db on <NSThread: 0x12c50d220>{number = 1, name = main}. 2015-11-30 20:34:46.948 Debug SwiftData.swift:498 closeCustomConnection(immediately:) > Closed /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db. 2015-11-30 20:34:46.948 Debug BrowserDB.swift:166 createOrUpdate > Couldn\'t create or update "tableList" . 2015-11-30 20:34:46.949 Debug BrowserDB.swift:167 createOrUpdate > Attempting to move logins.db to another location. 2015-11-30 20:34:46.950 Debug BrowserDB.swift:186 createOrUpdate > Moving logins.db-shm and logins.db-wal\u2026 2015-11-30 20:34:46.951 Debug SwiftData.swift:83 getSharedConnection() > >>> Creating shared SQLiteDBConnection for /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db on thread <NSThread: 0x12c50d220>{number = 1, name = main}. 2015-11-30 20:34:46.951 Debug SwiftData.swift:397 init(filename:flags:key:prevKey:) > Opening connection to /private/var/mobile/Containers/Shared/AppGroup/41401A2A-CAAA-4E1F-850B-2186008946CA/profile.profile/logins.db. 2015-11-30 20:34:46.954 Info SwiftData.swift:340 prepareEncrypted(_:key:prevKey:) > Enabling WAL mode. 2015-11-30 20:34:47.024 Debug BrowserDB.swift:56 createTable(_:table:) > Try create tableList version 1 2015-11-30 20:34:47.030 Debug BrowserDB.swift:126 createOrUpdate > Create or update LOGINS version 2 on <NSThread: 0x12c50d220>{number = 1, name = main}. 2015-11-30 20:34:47.031 Debug BrowserDB.swift:402 tablesExist > 0 tables exist. Expected 2 2015-11-30 20:34:47.031 Debug BrowserDB.swift:128 createOrUpdate > Doesn\'t exist. Creating table LOGINS. 2015-11-30 20:34:47.032 Debug BrowserDB.swift:56 createTable(_:table:) > Try create LOGINS version 2 2015-11-30 20:34:47.041 Debug LoginsHelper.swift:197 requestLogins(_:requestId:) > Found 0 logins. 2015-11-30 20:34:47.054 Debug BrowserViewController.swift:380 viewDidLayoutSubviews() > BVC viewDidLayoutSubviews\u2026 2015-11-30 20:34:47.055 Debug BrowserViewController.swift:386 viewDidLayoutSubviews() > BVC done. 2015-11-30 20:34:47.070 Debug BrowserDB.swift:126 createOrUpdate > Create or update clients version 1 on <NSThread: 0x12c515c00>{number = 3, name = (null)}. 2015-11-30 20:34:47.075 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update clients version 1 2015-11-30 20:34:47.076 Debug BrowserDB.swift:138 createOrUpdate > Table clients already exists. 2015-11-30 20:34:47.078 Debug BrowserDB.swift:126 createOrUpdate > Create or update tabs version 2 on <NSThread: 0x12c515c00>{number = 3, name = (null)}. 2015-11-30 20:34:47.081 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update tabs version 2 2015-11-30 20:34:47.083 Debug BrowserDB.swift:138 createOrUpdate > Table tabs already exists. 2015-11-30 20:34:47.089 Debug BrowserDB.swift:126 createOrUpdate > Create or update commands version 1 on <NSThread: 0x12c515c00>{number = 3, name = (null)}. 2015-11-30 20:34:47.091 Debug BrowserDB.swift:70 updateTable(_:table:) > Trying update commands version 1 2015-11-30 20:34:47.092 Debug BrowserDB.swift:138 createOrUpdate > Table commands already exists. 2015-11-30 20:34:47.094 Debug GenericTable.swift:172 insert(_:item:err:) > INSERT did not change last inserted row ID. 2015-11-30 20:34:47.096 Debug SQLiteRemoteClientsAndTabs.swift:95 insertOrUpdateTabsForClientGUID(_:tabs:) > Didn\'t insert tab!', Created ', rnewman:minimal-db-fix app data Here is the app data for the build that produced the error I pasted below.', master: 2961ae1', Emily: that's fine if it was the first run, not fine if that was the second run with that branch.", Follow-up fix: master 6869d0d ', - Follow-up: let pragma throw. Allow removal of encryption.', Correction: bd82d07a014576a0a459b9fc27be82920ca85ab5', Uplifted: 3ed3912' 
id=1242479	 'Comment on ', ', Link to Github pull-request: ', Not sure how this PR got here...', Created ', ', Link to Github pull-request: ', 1-liner', Created ', Private Tab Fix Figured I would add this on top of this commit since it's related. This patch resolves the issue with performing 'Open & Fill' while in private mode. See ", for additional info.', Comment on ', Private Tab Fix add a test for the normal case and we're flying.", master 696967ac51a8e049c3b10194e5db6b737f742bf7' 
id=1321363	 'We have a page, so we can configure the app to show it.', This will happen because it's a major release (no changes need to the code!) reference: ", v6.x ' 
id=1145919	 'Fixed with ' 
id=1209089	 'Fixed.' 
id=1195918	 'Created ', ', PR: ', Ignore the "Frame load interrupted" error that is triggered when we cancel a request to open an external application and hand it over to `UIApplication.openURL()`. The result will be that we switch to the external app, for example the app store, while keeping the original web page in the tab instead of replacing it with an error page.' 
id=1168403	 'Matej, any suggestions to the copy in the above-linked mockup?', Slight simplification: Welcome to Sync Sync your tabs, bookmarks, passwords and more. Sign in Also flagging Ryan to make sure this aligns with other account work.', Perfect.', I updated these string changes as part of ' 
id=1257538	 'Created ', ', Pull Request I opted to set the number of lines to automatic. I can set this to 5 or something if you think that works better. I dont have the locals setup on my dev yet. Hopefully someone else can respond with a screenshot of exactly how it looks with the change.', I'm actually having trouble reproducing this bug. I've tried looking at the empty panels on the 4s, 5s, and 6s, but the fonts look the same on all of them. Did this get fixed somewhere else, or are there some STR I need to follow?", Try doubling the text in the label if you dont want to try a specfic locale. You can see it easily. If the text is longer than 2 lines than `welcomeLabel.adjustsFontSizeToFitWidth = true` will reduce the size to make the text fit into the 2 lines. The font is still the same but the text is so small it makes it hard to read.', Comment on ', ', Pull Request Er, somehow missed that the screenshot is in a different language. Makes sense to me!', master 8db5b867a878af7d09fb52cb5dc185f0499254cb', v4.x v4.x 6f49c25' 
id=1157973	 'Do the new error pages solve this issue?', Yes. "The internet connection appears to be offline"' 
id=1120521	 'Created ', ', Pull Request This is a first rough implementation of Reader Mode. I would like to merge this so that we can get an idea of how this works and start filing followup bugs for both UI and code issues. I want to iterate rather quickly on this, and it will be nice to get at least some working code in there now to enable that.', Comment on ', ', Pull Request Flagging me so I remember to look at the data model.', Comment on ', ', Pull Request Only thing I see that doesn't line up with Android (yet) is excerpt/word count. The latter needs some effort around locale detection etc. (", ).', Comment on ', ', Pull Request Left several questions/comments in the PR. r=me as long as they're answered/addressed, or follow-up bugs are filed to fix them.", Created ', ', Pull Request New PR since I messed up git squash. Also removed reader mode button UI code since I have a much better solution for that already.' 
id=1232871	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1137051	 '*** ', has been marked as a duplicate of this bug. ***', Re-noming since this came up as a fix for ', , and that's tracking+.", Created ', ', PR ', This does a little strange dance of setting BrowserLocationView.url to nil if you set it to "about:home". I\'m expecting that might be contentions :)', Comment on ', ', PR ', No argument here, makes sense to me. Might want to consider moving the about:home -> nil check outside of BrowserLocationView since that's more of an app detail than the URL bar responsibility, but not a big deal. I'd double check your early return, though, as mentioned in the PR. I'm not sure didSet is recursive.", Comment on ', ', PR ', I liked your idea about moving the about:home logic out of here enough that I just did it. Mind looking at a second commit?', Comment on ', ', PR ', Nice, I think I like this better too.' 
id=1212134	 'Works for me on current master. * Tap the top site for reddit. * Tap the star. * Tap the tab button. * Hit +. * Switch to the bookmark tab.', Can't repro this on device with Aurora 1105, either.", deleted the older version of the app and installed a fresh build. Closing the bug as I can't reproduce the issue anymore." 
id=1126071	 'Created ', ', Pull request', Comment on ', ', Pull request No comments. This looks great.' 
id=1187910	 'This landed on Friday on master ', Can you expand on what you mean by 'print is not working'. Did you build Firefox iOS off of master?" 
id=1161324	 'Created ', Pull Request', Created ', Recording - example of the aural progress bar Marco, I am attaching a recorded example of the aural progress bar in action. Would you mind listening to it and give your impression of it? Note that different webpages have different loading progress patterns, this recorded one is well "presentable" as it has many "progress" ticks (the ones with rising pitch). Some have less, some have many in the end with nearly the same pitch.', One more note - just like I am not graphic designer but can try my best, I also am no sound designer but tried my best. :-) The sounds are a little robotic, just a plain sine wave, no wider frequency spectrum, no attack-release (i.e. not "cool" but works). Pitches, volumes, durations, periods and stereo pans of both sounds (ticks) are easily configurable in the code (in the accompanying UX struct).', Comment on ', Recording - example of the aural progress bar Thanks for doing this! Very interesting approach, and it sort of mimics the behavior the Windows screen reader NVDA has when indicating progress bars. It has a single ascending beep similar to yours, and no low frequency "heartbeat" tone. But the concept is the same, and it\'s one of my favorite NVDA features. :) So yes, I am very much for implementing it in this way. perhaps we could even look at the exact code the frequencies are being calculated by. NVDA is open-source.', Comment on ', Pull Request Oops, wrong URL. Will redo.', Created ', ', Pull Request This is the correct URL for the pull request.', Hello Marco, (In reply to Marco Zehe (:MarcoZ) from ', ) ', I did not mention it here, but did in the pull request, so I will do it here and add to it, it provides some insight/information about how the aural progress bar is designed: The aural progress bar was inspired in part by Safari\'s "ticking" with VoiceOver (tickPlayer in code, i.e. the "heartbeat"), and in part by NVDA\'s "rising" progress (progressPlayer). We do both approaches as they serve different purposes: - the periodic fixed-pitch ticking (i.e. what you called heartbeat, great term) communicates that the page is being loaded, that something is in progress at all, that the progress "lives", is active, even when no new data from webpage is coming as some point (i.e. when the progress temporarily stalls for a few seconds) - the non-periodic, rising-pitch progress ticking communicates current value of progress and that the progress is actually progressing; it sounds exactly when actual data comes from webpage, i.e. when the progress increases Progress 0% has the same pitch as the periodic ticking (heartbeat), progress 100% is one octave higher. This makes one tell by the difference of pitches of the two sounds (heartbeat and progress) how far the loading progress is. I.e. the heartbeat provides pitchwise a "reference pitch", the 0% progress. The fact that you want the progress to get to 100% so that you can work with the page here means that you want the progress tick to get to being exactly one octave higher than the heartbeat. I.e. I made some (hopefully sensible) explicit choice for the frequencies for our current situation, so I don\'t think we need to mimic NVDA frequency-wise, i.e. no need to look at NVDA\'s source code. The fixed-pitch ticking\'s pitch is chosen to make a "tune" (cadence) with VoiceOver\'s "screen changed" sound. The "screen changed" is two tones, I made the heartbeat sound to be pitchwise exactly one tone below the first tone of the "screen changed" sound. This was to create a cadence of heartbeat being subdominant, first tone of "screen changed" being dominant and the second (last) tone of "screen changed" to be tonic. There are three things I think could be improved (but that is maybe for some later version, more important work now): 1. The tuning relative of the heartbeat to VoiceOver\'s "screen changed" first tone would work best without the progress ticking as that is by definition out of tune, violates the harmony. I tried to remedy it at least to some extent by making the progress tick less loud, this also makes it easier to listen as the heartbeat is volume-wise the prominent sound, and the progress ticks are less loud additions. 2. When a webpage is long loading without any new progress, the progress ticks are not playing so the user could forget after some time the relative pitch difference between heartbeat and progress, i.e. how far the progress is. 3. The sounds are not properly designed, just plain sine wave of required frequency. Maybe add some "spirit" to them by attack-sustain-release (I tried a little bit and it made the sounds too "diluted"), or record some real sounds. I also thought about an enhancement that I could make the progress tick change not only pitchwise, but also in stereo pan. Currently heartbeat is in the stereo slightly to the left, progress ticks slightly to the right. The progress tick could then be not fixed in the stereo pan, but also travel, 0% progress being same left as the heartbeat, 100% being same as it is currently (i.e. mirrored to the right from the heartbeat). But these are all things that I think should not block this first version to ship.', Comment on ', ', Pull Request Very neat! As usual, thanks for putting so much effort into this. I left a few (minor) comments in the PR.', Comment on ', ', Pull Request I rebased on latest master and addressed all your comments (except for the last one, for which I provided comment on GitHub) - please see the PR.', Merged. Thanks again for the contribution!' 
id=1147615	 'Created ', ', Pull request This came out of improving perf of the history panel. About 1000x faster on a 1000 site, 10,0000 visit database.', Comment on ', ', Pull request +'d because this is obviously a good improvement. Do check my note about the CursorStatus enum though. I think that will make the code more awesome. And more Swift-like." 
id=1100575	 
id=1250158	 'This was already fixed for 2.0. My suggestion for that fix was: ', *** This bug has been marked as a duplicate of ', ***', Able to reproduce with both data: and javascript: schemes in a playground.' 
id=1261173	 ' *** This bug has been marked as a duplicate of ', ***', Hey Chris, Do you remember which version of Firefox you were upgrading from or if you had the latest previous version from the App Store?', Given the bug this was dup-ed to, it was likely I upgraded from 2.1 to 3. My iPad with missing passwords has 3 installed and I'm delaying my upgrade to 3 on my other iPad. :)" 
id=1129087	 'My guess is that this is happening because GMail is trying some fallback scenarios for APIs that it needs. The WebView does not support all the APIs that Safari has and I think that is why it redirects through two or three different versions of the mobile GMail code. One thing that may be missing or not fully implemented in the WebView is window.applicationCache for example. (This is a hunch, because I see window.applicationCache is set to UNCACHED)', Also, if it was not clear, I think these issues are very GMail application specific and not related to redirects at all. Setting window.location from the console results in an instant redirect.', I also ruled out things in our app that possibly slow down redirects. I ran the app with the following disabled: * Reader Mode / User Scripts * Navigation Delegate * UI Delegate * KVO Which made no difference. To completely rule out our code I wrote a minimal iOS app with just a WKWebView: the slow redirects also happen there.', UIWebView is much faster. This is the redirect path taken from webView:shouldStartLoadWithRequest:navigationType: ', ', ', ', ', ', about:blank ', about:blank (About blank is probably because some frame magic that GMail does)', This needs to be tested on iOS9 to find out if this is a WebView issue or a gmail issue.', I think there's nothing we can do here. Might be fixed in iOS9?" 
id=1191629	 'Created ', ', Pull req.', Comment on ', ', Pull req. LGTM', cc31746' 
id=1183174	 'Created ', ', PR', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR Argh, looks like we were both working on the same bug. My fix here: ', . I'll update that bug to just be about UI tests. My fix just removed some of this logic altogether, including clearedText, as it wasn't obvious what this variable was for. I'd recommend that unless we can figure out what this clearedText is for...", Created ', ', Link to Github pull-request: ', Stealing from bkmunar since I already have the fix ready.', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1142222	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks. I explicitly tried to avoid this kind of coercion bullshit, and still failed :(' 
id=1203014	 'Created ', ', Pull request', Comment on ', ', Pull request Hey Pikor - thanks for the patch! Looks good - just noticed a bug where the section separator lines still appear when not logged in (left a comment with a picture on the PR).', Hey Pikor - are you still interested in patching up the PR with the comments I left?', Hi Stephan, yes, I'm definitely interested in patching this PR, even more, taking another one. Sorry for such long delay, I need to better organise my time for this project.", Update: ', Comment on ', ', Pull request Looks good! Thanks for revisiting this. Before I can merge it yo ll need to rebase the branch. Also, it would be nice if both commits were merged into a single commit. You can check out ", if yo re unfamiliar with squashing commits. Make sure to also include the Bug number/description in the commit like you did for the first commit as well.", Stephan, first of all, thanks for review. Secondly thanks for helpful link to git squash explanation. I followed article step-by-step and I ended in situation: * squashing was successfully performed (', ) * I had to pull, (then auto-merge happened) in order to be allowed to push. Which is weird since no changes where made, and now there is basically empty commit with 0 changes (', ). I did this process twice (with hard-reset to previous commit) and both times output was: do the merge. I did squashing for the first time. I feel like this merge commit shouldn't be there, please advise on next steps.", One of the side effects of rebasing/squashing the commits is that the makes your branchs history not match with the origin server (Github in this case). Probably when you tried to push the squashed branch it rejected it? The only way around this is to do a force-push (git push origin <branch-name> --force) to override the origin's view of the branch. Unfortunately there isn't another way (that I know of) to do this without using --force. As a note of caution, using --force may have undesired side effects since it will essentially override anything the remote server has so double check that what you want to push is indeed what you want.", Created ', git log 13.01.2016.png', Correct me if I'm wrong, what you are saying is: I should do force-push after squashing in order to avoid merge? In terms of current situation: everything is pushed and repo on my Mac is up-to-date with github repo (see attachment)", Hm looks like your commit history became wonky after the merge. Instead of merging from the mozilla repo, you should rebase. Here's something we can try to fix up the history: Cleaning up your branch history 1. Run git log --graph --abbrev-commit --decorate --date=relative. This will pretty print a nice graph of your branches. 2. Find the commit from which you branched off of master 3. Run 'git reset --soft <commit here>' This will reset you back to when you branched off of master with all your changes you made in a 'staged' state. 4. From here you can add the changes you want and create a brand new, single commit. Syncing up your fork There are some good instructions here: ", . This will update your repos code with the latest changes from the Mozilla repo. Rebasing your branch 1. Now with an up-to-date version of master, checkout your feature branch. 2. Rebase your feature branch from master to update by calling 'git rebase master' At this point you should see your commit on top of all the changes on master. After confirming this, go ahead and 'git push origin <branch-name> --force' to update your origin/PR.", Stephan, first of all, thank you for detailed, step-by-step instructions. It was much easier for me to perform fix. It wasn't easy, since there were lot of changes since my latest push, but now there is only 1 commit on my branch and it should work as expected. Please review latest changes. Also, slightly off-topic: is it possible to develop new features of Firefox? I didn't find that information in Contributor guidelines", Hey Pikor, Thanks for updating the PR with the latest changes. I realized this morning that between the time this patch was written and rebased I landed a pretty large refactoring of the way we do settings and it seems that your rebase got caught in the storm :( I left a comment on the PR about some changes that we don't need because of the refactor but after that everything _should_ be good to go :) ", Definitely! Contributors can participate in feature development as well. Pretty much any feature we are planning on working on should have a bug filed in Bugzilla. Was there something in particular you had in mind that you wanted to work on? I know filtering through Bugzilla can be challenging to find a feature to work on but we can come up with a list to help give some direction if thats something yo re interested in.", No problem with that. Software has to evolve, I waited too long with fixing this bug, I'll fix what's left according to your comments. In terms of features. In general, before fixing ", I thought it would be cool to work on Firefox iOS project but not only to fix bugs but also to develop new features. So, in order to keep balance, I thought of switching between bug-fixing/new features every one task. And I tried to find some list of current tasks/features roadmap but I end up asking you question because I found nothing. And yes I had something particular in mind. I thought of adding 3D touch* support to Firefox. More and more apps gained this support in recent weeks. Also Apple is willing to promote apps that implements this kind of "shiny new things" (like Enhanced with 3D Touch category in the App Store). Not sure if they promote Firefox, which is somehow competitor for Safari, but user-experience would be also improved. Also, Today widget might be handy for users, but not sure what to put there. This screen can be accessed without unlocking phone so we need to take into account privacy issues. Let me know what you think. I\'ll try to fix 1203014 this weekend. * Shortcuts example: 1. Favourites 2. Sync 3. Reading list P.S ', If I understand it correctly new features are marked as bugs?', Whoa! I hope we are good to go. What I did: 1. Applied changes according to your comment on github to `SettingsTableViewController` 2. Commit those changes 3. Squashed two commits into one 4. git push --force (and your comment is no longer visible on github. No wonder - history was changed, but If I didn't use force I would end up in situation like here ", Is everything okay now?', Hey Pikor, Thanks for updating the patch. Everything looks good now! ', We actually just finished implementing 3D touch on master and will be in the upcoming 2.0 release. Sorry for the lack of transparency behind the roadmap. ', This has been something we want to focus on for the upcoming releases. Along with 3D Touch we also implemented Spotlight integration so yo ll be able to see search results for open tabs in Spotlight for 2.0. Another feature I think we're looking at for the next release is doing something with the Today widget but I think James might have picked up that bug: ", . ', Yup. Usually larger features might be prefixed with meta as a way to encapsulate a group of related 'bugs' for a feature. For example: ", master 44cc3064c334ac65dce03af7097a0457fd3c0b65' 
id=1283062	 'Emily verified that this is fixed on the latest build.' 
id=1227863	 'Stephan, to start with we can disable creation of a new log file in the AppDelegate.swift: //log.debug("Creating corrupt DB logger\u2026") //Logger.corruptLogger.newLogWithDate(logDate) Any logs to corruptLogger are now going to the stdout. So, are we expecting individual developers to create their own corrupt DB logger if they intend to log to it? Wouldn\'t multiple developers end up creating multiple such log files?', We'd still want to be able to log corrupt database information on non-developer builds. This bug address more the fact that we _always_ create the logger which in turn writes a corruptLog.log file on disk even when no corruption occurs. Instead of creating the logger in the AppDelegate, I would investigate where we actually use the logger and create the newLog there. I believe the only place is here: ", Created ', ', Pull request', Comment on ', ', Pull request Left feedback on the PR.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Thanks for the patch Maurya!', master e57f4b333f91dc8711a5e85d5db0ac2f78a7107e' 
id=1173201	 'Created ', ', Link to Github pull-request: ', Note that this still leaves the user-visible label empty for about: tabs, which is probably fine. I doubt we want to expose "about:home" or "home" text.', Comment on ', ', Link to Github pull-request: ', Looks like wesj didn't get to this in time before his PTO, so redirecting.", Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1240540	 'Note: it\'s not only the error page. If I have an available device, the title says "Available devices:" Missing Client/SendTo.strings ', in ', Oh look we had a bug for this already. See ', *** This bug has been marked as a duplicate of ', ***' 
id=1151790	 'Happens in Fennec Aurora 6', Favicon: ', There should have been a title though. Example URL?', I just tried this (iPhone 6 - iOS 8.3), The row added to the bookmarks list is not empty, it has a title but no favicon.', Re-open if you see this again phlsa' 
id=1265659	 "My apologies - I'm respinning a new build to include all available locales now.", v4.0.0b3 has been released with all locales enabled.', Is there any pre-publishing step (automated?) that can catch this?', Well once we properly automate the build process it shouldn't be a concern. As it is, the current process is mostly automated - I just ended up typing in the wrong parameter for the localise flag into the script." 
id=1194380	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1145363	 'Expected: to be prompted for LDAP Actual: Never is prompted and never downloads', Changed the ldap password, cleared ipad data and reset the device.' 
id=1185560	 'Alt vid: ', When I go to neowin.net on Safari, I'm seeing the same kind of jittery behavior. Not sure what we can do about this as it seems to be a problem with the overflow scroll div on the top interfering with the WKWebView scroll behavior...", Sorry - the needinfo was to verify that the behavior is the same as Safari.', Testing in Safari, in landscape only, I am seeing it but it is not as bad', Patch for ', makes the toolbar scrolling behavior match Safari which alleviates some of the jankiness but doesn't do any better than what Safari does. Once that merges in, let's retest this to see how it affects it.", I'm going to mark this one as WONTFIX. When ", , the scrolling behavior will match Safari (which isn't perfect) but is the best we can do for now." 
id=1110680	 ' Closed by ', .' 
id=1206547	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1155859	 'Created ', ', Pull request Big PR, but hopefully the individual commits are manageable!', Comment on ', ', Pull request Merged. I swear rnewman had given an r+...oops! wesj just gave an IRC r+, so I'll roll with that." 
id=1177570	 "I see this on access to the remote tab pane on first launch. If we're not using notifications we shouldn't prompt.", We need this to show you sent tabs. We could request this permission when we set up FxA.', it will request permissions in 2 instances: 1.when you first sign up to an account (and it kicks off it's first sync) 2. if you are already signed into an account when the notification code lands, you will see it when the first sync occurs. It should not ask you any other time, because unless you are performing syncs then we will never send you notifications", I don't know much about the iOS permission model. As a user, I would want to: * be prompted to allow notifications when setting up the account; * be able to view and change my choice in the future. Perhaps we can do whatever requests the permission at account set up time? And I think the choice is managed by iOS, so perhaps the latter is already covered? Is it possible to inspect the choice and avoid taking whatever action requests the permission when permission has already been denied?", Move prompt to when the user signs in so there some more context for v1.0 and we'll revisit this after to provide additional context such as an info screen on what the notifications are for.", Created ', ', Pull request' 
id=1255030	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1220798	 'Created ', aauws9o9QZogrrzCV68lX3ih4ROi39G5rTO7qDClbPw.png Profile w/o cache optimization', Moved the blurring story into it's own bug: ", This'll do." 
id=1123430	 'Looks like ', is a pretty good candidate.', Created ', ', Pull Request', Comment on ', ', Pull Request With comment on PR, which I'd prefer to be addressed but isn't essential." 
id=1244103	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Although for me these tests passed without your changes and I saw the last modified string in master, but yay! for tests and clearer use of the header footer reuse stuff.', The problem was actually on iPad only. For some reason iPad didn't like init()'ing the UITableViewHeaderFooter subclass and wanted it to be dequeued \xaf\\_(\u30c4)_/\xaf", master 9ddaf8aec3bbcf3d849f6395332f05a7279cc8bb' 
id=1135194	 'Can you share your test project?', (In reply to Stefan Arentz :st3fan from ', ) ', Sure: ', Created ', ', Pull request', Comment on ', ', Pull request I would just change selectAll() to selectedTextRange instead. See comment in PR.', BTW If we want the same behaviour as Safari, where the text is just selected and the caret is hidden and no selection bars are shown, we probably want a UITextField subclass. Check out my old PR for the domain completion, which does the same.', Yeah, I mentioned this in ', . Adding the async_dispatch was just the quick fix since hiding the carets is a lower priority bug. I'll file a separate follow-up to make sure that change doesn't get lost.", Filed ', for the subclass/NSAttributedString implementation.' 
id=1197832	 "I'd like to add this in as an another test case for the app since there's a quite a bit of native UI work for password management that I would like to test this with. Would be a good start in adding ref tests.", Created ', ', Link to Github pull-request: ', I said I wanted to add this before and never got around to it. This adds the FBSnapshotTestCase library (', ) to the project so we can start writing some ref tests on our native views. This adds a new test target named NativeRefTests that is run with the other test cases for Client or on it's own as part of the ClientRefTests scheme. The library is BSD licensed - would we add that to our license page?", Comment on ', ', Link to Github pull-request: ', Looks good but I added emily as a reviewer to find out if this needs to become a Carthage dependency instead. Since she has been doing a lot of stuff with converting those. Maybe not because this is for tests only but I'd like to confirm that.", Comment on ', ', Link to Github pull-request: ', I'm fine with this not being a carthage dependency as Carthage support for FBSnapshotTestCase is currently a WIP: ", I'm going to go ahead and land this on master then. Let me know if there are any issues with the new fastlane stuff.", Landed 6696a264d1241ca897aef501ecb7b09dbf503cd9' 
id=1210794	 'Created ', RV-PB.zip Inverted assets. The UnRead asset remains the same (blue dot). The others have been inverted. The bgColor for the toolbar will be #595959 (89,89,89).', Created ', RL-PB-png', Created ', ', ', Instead of using the provided images, I made the existing assets templates which allows me to colorize them in code - just saves us from having custom assets for all the different colors. :tecgirl, let me know if this is fine or if you want me to drop in the provided ones.', Comment on ', ', ', LGTM Also did visual check. Looks good.' 
id=1159905	 'Looks like this is actually a regression from ', .', Created ', ', PR 403', Comment on ', ', PR 403 Nice, LGTM.' 
id=1146840	 'Potential fix: ', Created ', ', Pull request Thanks for the pull request! I added a few comments.', Just updated pull request with commits from comments.', Merged. Thanks again for the contribution!' 
id=1278620	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Strings look good just a note about some of the changes :flod recently did to improve the localization comments.', Merged.', v5.x 905217a21b031a08b50a1ac8e6e07c7103a5941e' 
id=1294555	 'Another, probably-related bug: In the tab tray: Open a new normal tab. Open a new private tab. Close the private tab. Go back to the normal tab. Its upper toolbar will have the private theme applied.', The second bug is actually unrelated, so I've filed it here: ", Created ', ', Pull request', Comment on ', ', Pull request Nice find again. Hopefully the last of these!', Yeah, just a pity we didn't come across them all in one go, and that they turned out to be different. I would be surprised if there was yet another issue..." 
id=1223426	 'Created ', ', Pull request Fixed as part of ', Comment on ', ', Pull request I think this is a good stability improvement. Lets land it.', *** ', has been marked as a duplicate of this bug. ***' 
id=1181738	 'Comment on ', ', ', Looks good! Just some nit comments.', Merged.' 
id=1248993	 "Hey Aaron, I saw you were interested in working on this follow up to the 'Edit' bug you resolved last week. Still interested?", Created ', ', Link to Github pull-request: ', Does this patch make sense? I don't have much experience writing tests but this seems to work.", Comment on ', ', Link to Github pull-request: ', Yup this works great! Thanks for adding the UI test.', If yo re interested in another bug: ", master 94c0163010124fc087fcf3388c8ac0e31b15c51a' 
id=1094236	 
id=1139729	 'Created ', ', Pull request' 
id=1189734	 'Created ', ', Pull request' 
id=1201108	 'WIP: ', Almost done but not yet tested.', Created ', ', Pull req. This includes: ', : payloads, types, and storage ', : downloading and mirroring ', : incomplete WIP for displaying the mirror Please take a look at the first two.', f5ad0aa', Temporarily turned off until I fix ', and ', . Yay live testing! b135e1b', Re-enabled. 71449b8', Comment on ', ', Pull req. We landed this, and have both contributed quite a bit of code to it :)', (In reply to Nick Alexander :nalexander from ', ) ', Hah! Wrong ticket. This has landed, at least.' 
id=1149708	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', I think this is fixed as part of ' 
id=1144404	 '(In reply to Stefan Arentz :st3fan from ', ) ', This is the only item I am not 100% on-board. On Android, readerized URLs *are* part of the back/forward history since they are shown in the real webview. On iOS, I think we should follow this convention because it's parity and is probably the easiest thing to do. If/when we want to change the readerized view to a separate webview, with nice transitions over the unreaderized content, we can add it to iOS and Android.", Resolved as part of ' 
id=1192998	 'First launch after install, after reboot, or a regular cold launch? If not first launch after install, then with Sync already configured?', Sorry terminology. This is the share window (Add to Reading List/Bookmarks). First use after install, no launch yet. Rare for a user to know about it or use it of course but just getting this on file.', So\u2026 what happens when it 'works'? An empty list?", On second attempt at invoking the share menu, both bookmarks and reading list can be added and both do get added fine. Skipping the tour on first launch I see both items added to their corresponding lists.', Ah, Share, not Send. I was confused.', I can't repro this.", This is what I see when I install the app and immediately run the Share extension and add the current site to both Bookmarks and Reading List: 2015-08-12 10:54:05.724 Info Profile.swift:176 init(localName:app:): New profile. Removing old account data. 2015-08-12 10:54:05.775 Debug BrowserDB.swift:73 init(filename:secretKey:files:): Initializing BrowserDB. 2015-08-12 10:54:05.800 Debug BrowserDB.swift:142 createOrUpdate: Create or update tableList version 1. 2015-08-12 10:54:05.841 Debug BrowserDB.swift:92 createTable(_:table:): Try create tableList version 1 2015-08-12 10:54:05.845 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:05.849 Debug BrowserDB.swift:142 createOrUpdate: Create or update favicons version 0. 2015-08-12 10:54:05.865 Debug BrowserDB.swift:92 createTable(_:table:): Try create favicons version 0 2015-08-12 10:54:05.867 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:05.871 Info BrowserTable.swift:73 init(version:): SQLite version: 3.8.8.3 (3008008). 2015-08-12 10:54:05.871 Debug BrowserDB.swift:142 createOrUpdate: Create or update BROWSER version 7. 2015-08-12 10:54:05.890 Debug BrowserDB.swift:379 tablesExist: 0 tables exist. Expected 6 2015-08-12 10:54:05.890 Debug BrowserDB.swift:92 createTable(_:table:): Try create BROWSER version 7 2015-08-12 10:54:05.892 Debug BrowserTable.swift:267 create(_:version:): Creating 11 tables, views, and indices. 2015-08-12 10:54:05.918 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:05.939 Info SQLiteHistory.swift:780 onRemovedAccount(): Clearing history metadata after account removal. 2015-08-12 10:54:05.941 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:05.944 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:05.948 Debug BrowserDB.swift:142 createOrUpdate: Create or update clients version 1. 2015-08-12 10:54:05.974 Debug BrowserDB.swift:92 createTable(_:table:): Try create clients version 1 2015-08-12 10:54:05.981 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:05.985 Debug BrowserDB.swift:142 createOrUpdate: Create or update tabs version 2. 2015-08-12 10:54:06.006 Debug BrowserDB.swift:92 createTable(_:table:): Try create tabs version 2 2015-08-12 10:54:06.015 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:06.019 Debug BrowserDB.swift:142 createOrUpdate: Create or update commands version 1. 2015-08-12 10:54:06.041 Debug BrowserDB.swift:92 createTable(_:table:): Try create commands version 1 2015-08-12 10:54:06.048 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:06.052 Info SQLiteRemoteClientsAndTabs.swift:253 onRemovedAccount(): Clearing clients and tabs after account removal. 2015-08-12 10:54:06.054 Debug SwiftData.swift:126 transaction: Op in transaction succeeded. Committing. 2015-08-12 10:54:06.184 Debug SQLiteBookmarks.swift:212 insertBookmark: Inserting bookmark with specified icon -1. 2015-08-12 10:54:06.197 Debug SyncStateMachine.swift:50 clearStateFromPrefs: Clearing all Sync prefs. 2015-08-12 10:54:06.206 Debug State.swift:331 clearFromPrefs: No key label; nothing to remove from keychain. After that I open Firefox, dismiss the tour and then I correctly see both bookmark and reading list item.', Tested in Simulator. On device with testflight build and dev build. Works for me.' 
id=1204542	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good. Could we get a small test case that shows that the tabs won't be saved?", Created ', ', Pull request In order to make TabManager testable I've had to make a couple of changes to the accessors for some functions. Just would like you to run your eye over it.", Comment on ', ', Pull request Nice test case - just a nit about not needing the internal keyword.' 
id=1217574	 'I get this issue when using: www.kqed.org/radio/listen', I don't remember what that NI is for.", I think we have parity with Safari here. There is also not much we can do, since the WKWebView owns the audio streams. So I think I will WONTFIX this.' 
id=1272229	 'Hi Emily, I assume this belongs under product: Firefox and not "Firefox for iOS". Since keyboard shortcuts are a desktop feature and not a mobile feature.', No, actually. This is for providing keyboard shortcuts to anyone using an external keyboard with their iPhone, iPad or iPad Pro. This use case is especially common with the Pro.', Heres the PR. ', Created ', ', ', Comment on ', ', ', Jacob - I've added some feedback to the PR", Hi all \u2014 I've fixed the issue in the feedback. This is my first bug, so just want to verify the correct process: 1. Do I commit/push to master or does every bug need a new branch? 2. Since there's an existing PR with feedback, are there different steps I should take? I'm on IRC as jmil if that's better. Thanks for any guidance. Forgive my newbity.", Hey Joel, Sorry for the delay. Let's get a developer to chime in for your particular PR. In general, once review has passed, we can land it on master.", Since you already have a PR open and a work-in-progress branch for this bug, 1. Push any additional fixes to the same branch your PR is opened for. The PR will update with the revised changes. 2. Since this branch has diverged from master quite a bit, yo ll want to rebase the changes from firefox-ios's master branch into yours. Github has a nice guide for doing this for forks: ", . The only thing I would do different to make your life a bit easier is to `rebase` instead of `merge`. So, if yo re updating from 'upstream', `git rebase upstream/master` while your on your master branch to update your fork's view of master to the mainline repo. `git rebase master` while on your feature branch to pull in the new changes from master into your branch while overlaying your changes on top. 3. We've moved to Xcode 8 since this PR was created so it would be worth double checking that the patch still works with Swift 2.3/Xcode 8. After that, feel free to post on either this bug or ping @sleroux on the PR and I can give it another look!", Hey Stephan, Thanks for your reply. Just to be clear, the original PR is not mine. The bug looked abandoned for a few months after the feedback so I thought I'd just pick it up as it's a quick fix. Sorry if that wasn't kosher. So, I don't personally have a branch/PR for this yet. I don't think I can access Jacob's branch/push to his original PR\u2014\u2014or am I mistaken? Thanks! I really appreciate the help.", Sorry! I thought the PR was yours. ', No worries at all! Doesn't seem to be a large change and seems dormant at the moment. ", Disregard what I said above and feel free to create a new branch from your fork and open a new PR. I would mention the existing PR in the new on in a comment just so I don't forget to close both :)", Created ', ', Link to Github pull-request: ', Thanks Stephan! Here's the PR.", Comment on ', ', ', ', Comment on ', ', Link to Github pull-request: ', Looks good! Thanks for the patch and congrats on your first Github pull request :D master ' 
id=1153081	 "I'd be willing to take these on.", Created ', ', Pull request', Comment on ', ', Pull request Thanks for the changes! These changes look good for the most part, but note that yo re working off of a very old HEAD (the parent commit to your changes is f5ab6aa, from April 2015). Please rebase your changes onto the latest master and force push to update this PR. Also, please squash all of these commits into one; they're all related to a single follow-up, so no need to split them. After that, I think this should be good to go!", Geez, my brain thought it was still 2015 - everything makes much more sense now, haha. Okay, it was easier to just trash that branch and make a new one. Most of the changes were overtaken, but I did change a function signature that hadn't been fixed yet (some whitespace changes made their way in too).", Created ', ', Pull request' 
id=1228908	 ' has the fix for this.', This is only used within a dispatch_once, so this isn't strictly needed. But I have a safe version of it, so might as well land it in case we add debugging code somewhere and accidentally break the world.", master: c054310', Uplifted: 3ed3912' 
id=1164955	 'Created ', ios-reader-v1.pdf', (In reply to Robin Andersen :tecgirl from ', ) ', Ignore 471, merge ', Created ', ', PR: ', Comment on ', ', PR: ', LGTM. Will file a followup to introduce iPad tweaks via some kind of Size Class or CSS mechanism.', iPad bug at ' 
id=1305245	 'Created ', ', PR: ', master f9839e031f14fe77b382f77719c058c6f5ba20a5' 
id=1175185	 '*** ', has been marked as a duplicate of this bug. ***', Thanks for reporting this Dan. I know we had a similar issue reported in a previous build but couldn't find a way to reproduce it. Could you try build 22 that was pushed out yesterday and see if this is still an issue? I wasn't able to see this in the latest build.", For example starting build 22 fresh on iPhone 5s with use compact tabs toggle off results in compact tabs being used anyway.', Still seeing it on Build 21. I don't see build 22 on pvtbuilds yet.", See also ', Largely, my thoughts are this feature is incomplete.', Ya I have the same thoughts around how we're displaying tabs in landscape as it looks to be in compact mode when it's not. I've been able to reproduce both what Stefan/Dan are seeing on device but not reliably. I'm going to continue to track down what could be causing this bug.", Created ', ', PR ', Removed UIDevice orientation code which was causing layout issues when the device was FaceDown/FaceUp on a flat surface. Fixed cell layout code to properly update when the collectionView is invalidated.', Comment on ', ', PR ', LGTM', Merged' 
id=1321209	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1242094	 'It\'s not the wrong solution to the problem. It\'s the best compromise we could achieve at the time. Top Sites can\'t be all things to all users, and for some users it won\'t be useful. So it goes. At some point in the future we want to explore some tweaks to the way it works now: // Eventually we can do something more sophisticated \u2014 e.g., if the site only consists of one // history item, show it, and otherwise use the longest common sub-URL (and take its title // if you visited that exact URL), etc. etc. \u2014 but not yet. Using a single URL for a top site tile, though, doesn\'t make sense in the general case. We could go back to not clustering by domain at all. That turns your Top Sites into a mess of similar URLs. Nope; we added grouping for a reason. We\'re not going back to the days of having twelve Bugzilla URLs filling the screen. We could use one of the candidate URLs for the domain tile, which is how this worked prior to this change. That means tapping on "reddit.com" takes you, quite surprisingly, to one particular thread on one particular subreddit. Tapping on mail.google.com takes you to one of your \'favorite\' emails. Nope, that\'s just stupid. So\u2026 what else? Better customization, certainly, including turning off Top Sites altogether -- it works for Karen, and it doesn\'t work for me, because Karen reads the same few news sites all the time, and I read thousands of different things across my devices Better handling of single URLs, certainly. That\'s the crux of the tiles fix in ', , and at some point we'll file a bug to do that. This bug as yo ve phrased it is WORKSFORME. What do you propose as an alternative?", (In reply to Richard Newman :rnewman from ', ) ', > ', I hardly believe that setting tld domain as top site tile address and grouping visits around it is the best and only solution to query not returning unique enough results. ', Only if it is domain tile, if it is expected by the user top site tile it makes much more sense. Frecency should guarantee that user will get appropriate landing page, be it "', " or "', " or "', " or "', " or even said message if user really opens it much more often then his inbox. Lowering scores for every next address in the domain may be the solution, another could be only one result per domain\u2026 ', I'm suggesting creating a list of expectations and investigating if the feature could be improved.", (In reply to Stefan Plewako :stef from ', ) ', Frecency does not \u2014 cannot \u2014 guarantee any such thing. The \'right\' landing page is not necessarily the most frecent page, because \'right\' is very much a human concept. The most frecent might be a login page, a recently re-visited attachment, or something else. The right page might be your Bugzilla Dashboard, the Enter Bug page, or the front page. Furthermore, the most frecent URL for a particular domain isn\'t stable. One day you might tap the Reddit tile and get "reddit.com/r/eyebleach", and another day get "reddit.com/r/bifl". If you\'re in an active conversation in a thread, that thread might take over. Your Google Maps tile will \u2014 apparently at random \u2014 select a business, search term, or place that you looked up recently, rather than taking you to the main Maps UI. Some people might like that. But if you\'re a user who\'s reliant on Top Sites to reach a reasonable, consistent entry point to a site, rather than a random history URL, this behavior is maddening. Surprise is not a good feature of a user interface. The only thing we can stably compute is the root URL for a collection of URLs with a common subdomain, which convention and conciseness has decided is a pretty good entry point to a site. (If you want your Bugzilla Dashboard or to file a bug, those are both linked from Bugzilla\'s front page.) So our choice is between computing some stable root, or not doing clustering at all. Not clustering really sucks. So here we are. ', Oh, I thought you said in ', that we can easily come up with something better? Can you at least offer a list of expectations?', (In reply to Richard Newman :rnewman from ', ) ', Right, I should have used the word "algorithm" instead. ', I think user data is better source of rightfulness than developer decisions in general. ', That would be expected and not that different from current situation, just on different level (domain vs tile). ', That would be surprising, haven heard about anything like that in desktop Firefox. ', Should I fill a bug every time when tile surprisingly gets removed from top sites? What are bookmarks for then? ', As a desktop Firefox user I'm really surprised and it makes me wonder what group of users Firefox for iOS is targeted at. ", I cannot as I don't know the whole story. If expectations will be known I think it should be easy to come up with something better (also because of what it is right now is so bad). Or maybe I'm wrong and it is OK? Maybe there is a data available about addresses without path part popularity suggesting anything?", (In reply to Stefan Plewako :stef from ', ) ', Desktop, just like iOS, truncates to a root domain in most cases. Take a look. For instance, my top sites on desktop right now are facebook.com, reddit.com, twitter.com, maps.google.com, todoist.com, smile.amazon.com, github.com/mozilla/firefox-ios, and irccloud. Note that the hundreds of reddit URLs are collapsed into the root domain, my thousands of Amazon URLs collapse into smile.amazon.com, and the thousands of GitHub URLs are collapsed into the "greatest common sub-URL" of the majority of my visits. On desktop users can set a particular URL as their new tab page, and they can opt out of Top Sites, so user disappointment with Top Sites is lessened. I don\'t use it, and I\'m not alone. ', For most users, with most behaviors, top sites should reach a point of stability and not churn much. They're not necessarily useful, but they tend to be fairly stable. But there are a limited number of slots, and so they'll change over time as you visit new sites. If you repeatedly and recently visited a site and it surprisingly gets removed, then yes, please file a bug. ", Desktop Firefox clusters by domain on the new tab page, almost identically to iOS. (We actually go a step further, up-weighting pages you visited on your mobile device and down-weighting pages you visited elsewhere, so that your desktop history doesn\'t dominate.) In my profile, only two of my nine top sites on desktop are full URLs, which are "greatest common sub-URLs" with massive visit counts, but the overall approach is much the same. ', Our current collective opinion is essentially: For some set of users (perhaps half, perhaps more; this is conjecture based on feedback and user research), particularly those who don't use Sync, Top Sites with domain clustering does pretty much what they want it to do. It'll pick out their favorite news site, their social networks, and so on, and will drop them at the front door of the site when they tap. Lots of people go to the same sites over and over again, in their little corner of the web. For another set of users \u2014 often high-volume, varied browsers with Sync configured; often 'typers' versus 'tappers' \u2014 we stand pretty much zero chance of guessing where they're going to go next just based on their browsing history. Their behaviors are so varied and Top Sites just doesn't have enough space, or enough awareness of context. For those users the best we can do is be consistent and surprise them as little as we can. I'm one of those users. I turn of Top Sites on desktop. Top Sites on iOS actually gets it right for me often enough that I'm a little surprised. In summary: we'd eventually like to do what desktop does, which is to present full URLs for one-URL-only tiles, and present greatest-common-subURLs for tiles with an obvious pattern. But we haven't seen a dramatically different approach that does better overall than clustering by domain, and desktop seems to agree. If yo ve got one, I'd love to hear it. Otherwise, we can close this bug.", (In reply to Richard Newman :rnewman from ', ) ', I did and do not see nothing like current *#$! iOS truncations (and keep in mind that redirects are much more expensive on mobile), even if I see some main pages (not always "/"). For the record, I check normal users profiles and exclude my personal trying to avoid bias. ', Grouping (probably good thing but not only solution) doesn't force collapsing into the root domain - it could be done better as desktop shows. ", Either I don't understand how it is relevant or it is not. ", What I see on desktop Firefox is very different and if it would almost identical I wouldn't fill this bug. ", That is good thing and I do not suggest changing it. ', "pretty much zero chance of guessing where they\'re going to go next just based on their browsing history" - I cannot disagree more and desktop Firefox suggest the same. ', I also tend to disable desktop tiles on new tab page but in many aspects address bar searches are similar. It takes only single not exactly working truncation to transition "often enough" to not enough or misimplemented. ', What desktop does is much better, clustering by domain isn't necessarily bad but truncating URLs to tld in all cases creates poor experience even when user finally lands on mostly good page.", (In reply to Stefan Plewako :stef from ', ) ', Can you describe what you do see? In my profile, iOS and desktop have identical behavior, with the exceptions I note in ', . That is, both iOS and desktop collapse ', * => ', ', * => ', ', * => ', ', * => ', ', In short: if you don't like top sites, you can turn it off, which means top sites doesn't need to be all things to all people. That's not (yet) the case on iOS. ", What do you see desktop doing that's better? The iOS approach is based on desktop's. Unless you tell me what you see different, I can't understand what's making you upset.", (In reply to Richard Newman :rnewman from ', ) ', Not true, desktop doesn't remove subdomais and path part. maps.google.com 302 to ", which 302 to ', and 302 to ', and 302 ', which loads ', ', loads only ', HTML. ', Not relevant then. ', Even if iOS approach was supposed to be based on desktop behavior it simply isn't - on desktop user lands on the page they wanted after one http request quite often and on iOS that is almost never true. ", I already did and in this comment I did once again. I don't know if this problem with understanding comes from apparently wrong assumptions about desktop or failure to recognize messing with urls impact, sorry.", (In reply to Stefan Plewako :stef from ', ) ', It absolutely does. ', ', Yup. So either yo re getting maps.google.com as a top site, and it's following that redirect chain, or yo re getting google.pl/maps, and it's not. Which are you getting on each platform? ", Are you complaining that on mobile sites often redirect from foo.com => m.foo.com? Are you complaining that desktop sites are being shown as top sites on mobile? ', You haven't told me what you see and what you expect to see. Yo ve told me the Google Maps redirect chain. How about you start with a screenshot of your about:newtab on desktop with a hover (showing the destination URL) on a tile that particularly bothers you, and a screenshot of your home screen on iOS?", (In reply to Richard Newman :rnewman from ', ) ', I have no idea what that code is, what it represents or when it is called. It could be easily tested that it does not remove subdomain or path from sites displayed on a new tab page in desktop Firefox. ', No, not true. On iOS after redirects I get to ', (from top site ', ) on desktop I get to ', (from new tab site ', ). ', No. ', No. ', I did, don't mess with urls to assert uniqueness of top sites urls (there are better ways to do that). ", Maybe you could read my comments more carefully first?', (In reply to Stefan Plewako :stef from ', ) ', It does; that\'s exactly what it\'s for, so that \'noise\' subdomains don\'t each appear in top sites. That code is why you don\'t get facebook.com, m.facebook.com, and www.facebook.com in your Top Sites. For example, I have a desktop "', " tile which loads and redirects to "', ". ', Okay, so your complaint is what I mentioned in ', and ', , about extraction of greatest common sub-URLs. Do you have two tiles on desktop, one of which is www.google.pl/ and one which is www.google.pl/maps, or only one?', (In reply to Richard Newman :rnewman from ', ) ', Then it doesn\'t work or maybe it works but not in a suggested way - maybe sites get grouped by domain and subdomain (with m, mobile, www and subdomains contributing to domain) for scoring purposes only. On the desktop new tab page I see sites with addresses not striped from "www." subdomains and path parts for sure. ', My complain and suggestions are in my comments. ', I don't see two sites from the same subdomain appearing in a new tab page on desktop, just single one. In fact, I don't see them both even if they are only two sites in history and that may be good enough.", That's part of presentation, not clustering. ", OK, good. So desktop is clustering in exactly the same way as iOS, and you are seeing that on your desktop profile. Desktop is extracting a high-scoring common subdomain and path, while iOS is simply taking the common domain. You visit google.pl/maps more than any other individual google.pl sub-path, so that 'wins' as the representation for that domain's tile. Extracting that high-scoring common subdomain is exactly what I mentioned in ", and ', , and we already plan to do that at some point when it's feasible to do so, so I'm going to close this bug. INVALID, because this is working as designed for now.", (In reply to Richard Newman :rnewman from ', ) ', It may be but but I highly doubt that is entirely true and that doesn't matter as far as that bug should be concerned. ", This bug is not only about clustering despite your tries to force such interpretation. ', > ', iOS behavior is simply wrong and bad. Apparently you have some problem with admitting and fixing that as you invalidated bug that suggest what is supposedly planed.' 
id=1253661	 'I am pretty confident that this was fixed with ', Confirmed on Build 3.0 (6) in the Simulator and on a device.' 
id=1118404	 "Do we have a bug to remove the confirmation on request by the user? I stumbled upon this trying out the 'Download on the App Store' button ", We redirect without prompt e.g snippet, <script src="', " type="text/javascript"></script> <script> $(document).ready(function (){ if(navigator.userAgent.toLowerCase().indexOf("iphone") > -1){ window.location.href = \'', '; } }); </script>", (Session restore on a page exemplifying similar code can also be a nuisance as it redirects away from the browser)', Created ', ', PR: ', This patch removes `itunes.apple.com` from a list of whitelisted URLs that are always allowed to open without user interaction. I am not sure why we had just `itunes.apple.com` in that whitelist because the result is that apps can auto redirect to the App Store. I think the whole *open external app* code needs a revisit. The code looks flawed. It will also need a rewrite for iOS 9, where things work in a different way. But for now just removing this whitelist seems to do the trick: both when you click an app store link and when an app tries to auto-redirect to it, the user will get a confirmation prompt. You can test the auto redirect on people.mozilla.com/~sarentz/t/itunes.html which opens an app store link upon loading.', Note that we have a different bug where we show a 'Frame Load Interrupted' error when we give the user choice to open the external app. This is an error in the error pages code that does not take into account that loads can be interrupted this way. We should not show that error at all and just stay on the original page. Will file followup.", Comment on ', ', PR: ', NEW UPDATED PATCH This patch adds a check to the logic that decided whether to show a confirmation dialog when the user opens a link that triggers an external app. Previously we would simply let all `itunes.apple.com` links open. With this extra check we explicitly ask the user for permission if the load was triggered by JavaScript or by a Reload. This prevents sites from sneaky opening app store links without user approval. I think the whole *open external app* code needs a revisit. The code looks flawed and incomplete. It will also need a rewrite for iOS 9, where things work in a different way. I have tried to do this with minimal changes to prevent other regressions. You can test the auto redirect on people.mozilla.com/~sarentz/t/itunes.html which opens an app store link upon loading. On twitter.com there is a Install button that shows how it works for actual clicks. You need to be logged in to Twitter to see this.', Comment on ', ', PR: ', Good, clean fix. Works great!' 
id=1133564	 'Yeah I think the bug is not so much site specific. We should not put content under the bottom toolbar. That is going to conflict with many sites that use the whole screen like google maps does. Filed a followup, attached to this bug.', Still problematic.', Added PR containing this fix attached to ', Resolved as part of ' 
id=1195318	 'Created ', key.zip Key asset.', Created ', ', ', Comment on ', ', ', With new assets I sent you, LGTM.', Created ', key.zip', Comment on ', ', ', LGTM', Merged' 
id=1145706	 
id=1209015	 'Created ', ', ', Merged' 
id=1276894	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1168393	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1157737	 'Not sure why this was minused. We have a remember password prompt that does nothing here.', Aaron, can you drive generalizing this?', We should see if WebKit gives us any help here.', Check to see if WebKit has some APIs/callbacks for seeing if password fields appear in the DOM.', Wasn't Emily working on this? Is there a WIP patch? Maybe we can improve things a little?", there is not WIP patch - for some reason I can't find the branch I was working on. I added some notes to ", Created ', ', Pull request', Comment on ', ', Pull request Comments in PR.', Comment on ', ', Pull request I've updated this to reflect the convo around searching the mutations. Would like some feedback", Replied in PR. TL;DR the recursion/string matching isn't necessary at all; if a couple of assumptions are true then the code gets a lot simpler." 
id=1179005	 'Created ', ', PR: ', This PR branch can be used for Xcode 6.4 fixes. So far I have only fixed the absolute paths in ` Storage/modules/module.modulemap` to point to the `iPhoneOS8.4` directory. May be the only change needed.', Comment on ', ', PR: ', Looks good - merge away!' 
id=1246651	 'Tried to simulate this with the network link conditioner tool using a profile of 1 and 2 and 3 and had no problem with startup. No hang. 1 100% packet loss 2 1 mbps, 10% packet loss with a delay of 500ms 3 3G 780 kbps, 0% packet loss with a delay of 100ms Works for me. Can you reproduce this?', Will try, what governs sync on start in 2.0?', When Firefox transitions to the foreground and meets some criteria. See ', Depending on the connection, this seems like a plausible description -- there's probably some FxA network operation that runs on the background thread, and that could effectively block DB access. To repro: * Quit Firefox * Wait five minutes * Make sure yo re on a network that allows connections to time out * Launch Firefox. Logs would help.", Is this still reproducible?', I cannot reproduce this with TestFlight 2.1 (4).' 
id=1257291	 'Alternate STR: 1) Go to site not Top Sites. 2) Tap the URL bar before the site shows up in Top Sites. 3) Delete the last top site.', Fixed by ', . *** This bug has been marked as a duplicate of ', ***' 
id=1187676	 'maybe related to ', ? I should try TConnect in Toronto', Any better?', Sorry it took so long. Everytime I was where that free wifi is, I didn't have the iPhone with me. With build #1104, it works properly, with, sadly, an SSL error when trying to go to an SSL page, but Safari has expectedly the same problem, so in the context of this bug, we're good. It /might/ be worth investigating if we can do something to detect SSL errors due to captive portals." 
id=1136800	 '*waves* *sheds a tear*', Created ', ', Github PR', Brian I saw you comment on Github and I made the changes. I comment here for the record. :) Could you check it again? Additionally I squashed the commits. So the PR is ready to push.', Looks like Wes already gave an r+, so I went ahead and merged. Thanks for the contribution! :)', Thanks for let others contribute :)' 
id=1199814	 'Created ', ', Link to Github pull-request: ', r=me' 
id=1279461	 'Filed seperately for faster l10n.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', You probably want to uplift these straight to v5.x and then tell :flod & :delphine that more strings have landed as I think they did the export this morning', Merged.', Cherry picked onto v5.x.' 
id=1183039	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1097402	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1128595	 'Created ', ', Pull request Whoever can get to this first. From the PR: This gets favicons using a JS shim. They're then stored locally (on disk), and the url -> site mapping is stored in a local database. The disk cache is just stored as a hash of the filename.fileExtension. That means if we can lookup the url in the database, we can load the local file. I also added a join on the history table for the history API to do that lookup simultaneously. The schema for the favicons table is url -> String date -> Double // date this was saved. I need to update this as you browse width -> Int height -> Int type -> Int // What type of tag this came from. I'm storing things like apple-touch-icon right now, and wanted to make sure we could disambiguate those That has speed tradeoffs I'm sure. This doesn't handle loading them asynchronously into the table yet.", This is an area where I have no objections to using CoreData, btw.', (In reply to Richard Newman :rnewman from ', ) ', That is a bit odd. Then we have to invest in two different storage layers. Why not use what we have?', Comment on ', ', Pull request I did a review but most of my comments are Swift style related. I'm having a hard time seeing the big picture of the storage code so I did not comment much on it. (That is not a code problem, but simply that I have not invested much time in understanding the Storage code) I'm ok with a +r but I think :rnewman should probably take a deeper look at at the storage details.", (In reply to Stefan Arentz :st3fan from ', ) ', Just expressing no objection, not making a recommendation or request! There's no pressing need for Sync to dig its fingers into favicons, so I just wanted to open the door to whatever is easiest for frontend code here.", Landed.' 
id=1191450	 'This is only possible on iOS9 and up.', Turning this into a meta bug so we can break this down into individual dependencies.', Adding this one as the reference bug in the Aha! card.', I think all the strings for this already landed in ', , so we can consider this bug string-complete.', *** ', has been marked as a duplicate of this bug. ***' 
id=1141845	 'Attacking this and tabs together: ', Created ', ', Pull req. There are some todos. The caller into SyncAuthState needs to know the token server URI, so I hard-code prod. Suggestions welcome. This only hooks into refresh. Each refresh will result in an i/c fetch.', Landed apart from the prod URI switchover. ', Comment on ', ', Pull req. Reviewed on GH, IRC, and in person.' 
id=1161243	 'I did some investigation and came across this SO post: ', . The behavior is that the prompt is shown once/twice and then is never shown after that - even after app restarts. Also, it was mentioned on the Apple dev forums that a fix for this behavior is available in iOS 9 beta (', ). I'll give this a try when I have my iOS 9 device.", Nothing we can do on iOS 8 and it looks like iOS 9 will prompt the user everytime. Closing as WONTFIX.' 
id=1151715	 'Created ', ', Pull req.', Comment on ', ', Pull req. LGTM' 
id=1215808	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1239755	 'Created ', Screen Shot 2016-01-14 at 1.05.45 PM.png In Edit mode', I've merged in ", which temporarily removes the placeholder favicons from the list and also resolves the empty padding in the login detail page which this bug was referring to. Any future work on resolving this will be part of ', so I'm going to mark this as INVALID for now." 
id=1185041	 'Whoops, forgot history shown too' 
id=1110165	 "Closing this. The favicon is currently not part of the UX design. If it has to be at a later stage then this bug can turn into a feature bug instead of a 'can we' bug. (To answer part of the question in this bug: It seems *only* Safari exposes the ability to run JS on the shared page. Third party apps cannot expose the underlying page to share extensions. So if we ever want to display or grab favicons (or any other content) from the shared page, we would have to download it in an offscreen webview or http get it)" 
id=1252271	 "Ah, we never used to show livemarks, and so we didn't fetch siteUri from the DB. Fix: ", I'll add a test a little later.", Updated the PR with the correct fix -- we actually omitted siteUri at a lower level, too. And I added a UITest that not only makes sure livemarks are displayed correctly, and that they load the siteURI when tapped, but that we show the contents of the buffer!', Created ', ', Pull req.', Direct pointer to the commit and test: ', Comment on ', ', Pull req. All works just fine now :)', c1aa3b9' 
id=1265383	 'Created ', ', Pull request Functionally, this PR works, almost exactly as designed, although the code does not yet use AppState. Making it work via AppState will not only add to the code in this PR, so I'd like to merge this into the feature branch so I can work on long pressing (which depends on this bug), without being blocked on AppState. Filing an additional bug (", ) to make this work with AppState.', Comment on ', ', Pull request I think it's good just not sure about the UIAlertAction's closures and retain cycles.", Address nits, and answered question on possible retain cycle. ', Merged into ', and closed.' 
id=1194323	 'Does this still happen?', I have not seen this. Was there a particular site that you saw this on? I'm pretty sure it was a consequence of the bad tile recycling, in which case it's probably fixed.", The tile needs to be one that's in the DB without an icon (typically via Sync), but a URL for which the favicon fetcher will guess correctly. Lemme see if I can repro.", Can't repro. Yay!" 
id=1145257	 'Created ', ', Link to Github pull-request: ', Just a little one. Mentor bug follow-ups, if we care, to include release channel and build date.', Comment on ', ', Link to Github pull-request: ', Yes please!' 
id=1206475	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1220319	 'Run ANALYZE on DB long query', I just did this and didn't see a measurable difference in top sites query timing, probably because there's not much one can do to improve a scanning query like that. We can revisit this when we materialize frecency data: it'll make a difference then." 
id=1230605	 "This is a red herring; 1Password's code logs." 
id=1166802	 'N.B., after successful upload, remove the is_deleted=1 records from the DB.', Created ', ', Pull req. Manually testing this now.', Comment on ', ', Pull req. Hand tested syncing, and a little automated test for the deletion stuff. This PR has a bunch of miscellaneous fixes; please look at those too. Next up: handling failures, adding indices, and triggering syncs.', Comment on ', ', Pull req. Comments and nits on GH, but looks solid.', 6dfce44' 
id=1308873	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1177397	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1244060	 'obligatory ni', Yes, this is expected; we don't sync bookmarks per se yet." 
id=1254794	 'Created ', ', PR: ', r=me' 
id=1123396	 'Fix is part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1197399	 'here\'s my curl session output (not sure if i got the User Agent right) Rolands-MBP:BIKETOWORKSHOP_COM_SURGE rolandtanglao$ curl -ILA "Mozilla/5.0 (iPhone; CPU iPhone OS 8_2 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) FxiOS/1.0 Mobile/12D508 Safari/600.1.4" ', HTTP/1.1 200 OK cache-control: private,max-age=300 content-length: 0 content-type: text/html; charset=utf-8 date: Fri, 21 Aug 2015 22:54:31 GMT expires: Fri, 21 Aug 2015 22:59:31 GMT server: tsa_a set-cookie: muc=7e22c61b-3228-443f-90ac-b835706344b3; Expires=Wed, 02 Aug 2017 22:54:31 GMT; Domain=t.co x-connection-hash: ba2f78988e2f8faf3573de0abe3c26d1 x-response-time: 10 x-xss-protection: 1; mode=block', hmmm wrong UA in ', , i used whatsmyip and here is a better curl with the "real UA": Rolands-MBP:BIKETOWORKSHOP_COM_SURGE rolandtanglao$ curl -ILA "Mozilla/5.0 (iPad; CPU OS 8_4_1 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) FxiOS/1.0 Mobile/12H321 Safari/600.1.4" ', HTTP/1.1 200 OK cache-control: private,max-age=300 content-length: 0 content-type: text/html; charset=utf-8 date: Fri, 21 Aug 2015 23:10:36 GMT expires: Fri, 21 Aug 2015 23:15:36 GMT server: tsa_a set-cookie: muc=131d3196-0696-4b62-b8fd-de52282c4abd; Expires=Wed, 02 Aug 2017 23:10:36 GMT; Domain=t.co x-connection-hash: 87566868df47a46e07b2bb987bdb00f0 x-response-time: 10 x-xss-protection: 1; mode=block', perhaps this is a twitter issue? i've seen this problem in Vancouver and :jsavage reproduced this problem in seattle and so did :guigs in mountainview with ", but :rnewman was not able to reproduce in montana', Here\'s the full response; t.co uses script redirects: $ curl -iLA "Mozilla/5.0 (iPad; CPU OS 8_4_1 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) FxiOS/1.0 Mobile/12H321 Safari/600.1.4" ', HTTP/1.1 200 OK cache-control: private,max-age=300 content-length: 419 content-type: text/html; charset=utf-8 date: Sat, 22 Aug 2015 00:18:07 GMT expires: Sat, 22 Aug 2015 00:23:07 GMT server: tsa_a set-cookie: muc=364bee11-1506-4d58-8a46-fb943c1b6533; Expires=Thu, 03 Aug 2017 00:18:07 GMT; Domain=t.co x-connection-hash: d13b57aa4985ac5b30d4d05f5a303ab8 x-response-time: 11 x-xss-protection: 1; mode=block <noscript><META http-equiv="refresh" content="0;URL=', "></noscript><title>', </title><script>window.opener = null; location.replace("', ")</script>% Can\'t repro on simulator on desktop or on iPhone on LTE.', i have also reproduced it at home on wifi and on lte in Vancouver as we as Mozilla Vancouver and kip gearwood has also reproduced it on his ipad over lte @revolver_coffee but :stephan in toronto can't reproce it :kip any ideas on how stephen and :rnewman can reproduce it", Firefox iOS Version 1.0 (41) Twitter opened and signed in. Tapped a few links and goes to page, no issues so far.', Still a problem?', *** ', has been marked as a duplicate of this bug. ***', still a problem unfortunately on my ipad air 2 ios 8.4.1 even after i uninstalled and re-installed!', i also tried mozilla guest with 8.8.8.8 as the DNS and mozilla with mozilla DNS and both fail on t.co links', I can reproduce in the Berlin office with t.co/Dpms1VCdtK', Definitely needs investigation.', This bug doesn't reproduce on an iPad3 (first retina) running iOS9 beta 3, it does reproduce on the same iPad3 running iOS 8.4.1 So somehow iOS 9 fixes this problem! Some thoughts after discussing this with kip (i spoke with :kip so am clearing the needinfo for him): 1. Something is wrong with non http302 redirects on iOS 8.4.1 2. http302 redirects e.g. hg.kearwood.com work on iOS 8.4.1 3. perhaps this is unique to any redirect that uses location.replace() ? (paraphrasing Kip may have got this wrong!)", *** ', has been marked as a duplicate of this bug. ***', I think this is an issue with WKWebView. See here: ', Really doubt it, as that is filed against iOS 9 and that would mean we can all reproduce. I still can't reproduce any issue here.", The bug was filed on May 6, maybe it was fixed in recent betas? I'm not sure if WKWebView is the culprit, but the issue in openradar looks very similar to this one. Also, I'm not able to reproduce the bug on the simulator and iPhone 6 (8.4).", this works fine in Chrome for iOS on 8.4.1 so I *think* that means we should be able to fix it in Firefox for iOS since FF & Firefox are wrappers around webkit', Chrome uses UIWebView, not WKWebView. ', :rnewman I stand corrected :-) For the sake of completeness, I can reproduce this problem in Vancouver when clicking on links in m.facebook.com again on ios 8.4.1 on my iphone6plus. could be some sort of western Canadian DNS or ISP related issue; 1 or 2 years ago we had a similar issue on firefox for desktop that only occurred in Vancouver and was fixed by the Vancouver ISP. The fact that this problem occurs in Seattle (:jsavaged repro'd) and Berlin (:madaline repro'd) is worrisome to me though!", Yeah, it definitely concerns me. The question is whether we can work around the WK bug, if that's what it is, and if we can do so before iOS 9 becomes our target.", Interestingly, I can't repro on an 8.4.1 iPad 2. Testing with ", from ', .', (In reply to Brian Nicholson (:bnicholson) from ', ) ', 1. not that interesting brian :-) 2. i and everybody else Vancouver can reproduce in Vancouver on all my build 37 iOS 8.4.1 devices: iPad 3, iPad Air 2, iPhone 6+ nobody outside Vanocouver and seattle and berlin can reproduce the problem (i.e.t he problem doesn\'t seem to exist in Toronto or Montana) 3. finally to reproduce the problem you need to tap on a link in a twitter timeline which does the t.co redirection "dance", you won\'t reproduce the problem by copying and pasting the tco url or by typing the url 4. i hate to bring this up, but maybe :bnicholson or :rnewman or some other equally awesome iOS developer needs to fly up to Vancouver to repro and fix? my worry is that new zealand will see this problem or some variation of it. I will ask :bram and :nthomas to test in New Zealand to ease :-) my worry', (In reply to Roland Tanglao :rolandtanglao from ', ) ', Yeah, I wanted to delete my comment after reading more scrollback. Interest retracted :D What might be interesting, though, is debugging this using the Web inspector: getting document.location when this happens, seeing the referrer, any JS errors, etc. Can you get that set up, then ping me so we can walk through some tests?', I noticed something interesting in the console. Every time i open a link from Twitter. Either a t.co one or a goo.gl one, I see this: Aug 27 21:36:38 Stefan-Arentzs-iPhone Client 3508 <Warning>: URL IS NIL! WE ARE RESETTING PROCESS POOL This is part of the workaround we put in for the blank tabs.', 10:25:51 st3fan | i'll add a comment to the bug: roland also tried with an older build where we do not reset the process pool and that resulted in the same issue for him 10:26:00 st3fan | but this is still something that needs investigation 10:26:26 st3fan | wait when did we do the KVO hack? Was that build 37 redirection instead of a HTTP 301 10:26:51 st3fan | we did in 37! 10:27:31 st3fan | so here is what is happening then i think: twitter uses JS to change document.location, that results in a nil webView.URL. We trigger on that and | manually reload the page. *The original page* 10:27:54 st3fan | that is the redirect loop 10:27:58 st3fan | it is a reload loop 10:28:02 st3fan | caused by us", omg this is working for me in build 43 on ios 8.4.1. both iPhone6plus and iPad Air 2! will mark resolved once i test on other people's devices which should be before noon pacific! high five, fist bump etc!", I don't know if this means I'm hitting a different bug (I originally filed ", which was marked as a dupe of this - which I'm not convinced it is), but reading list items sent from the twitter app still do not load properly for me without me turning off reading list mode and then turning it back on for that page.", closing this as works for me and others in build43 in vancouver on ios 8.4.1 iphone 6, iphone 6plus , ipad air2 (haven't tested ios 9) moving my Angst to ", :-)' 
id=1210185	 'Created ', ', Pull request #1147: ', - "Open In Private Browser" string has wrong capitalization', For *why* this is the case: ', "Title-style capitalization means that every word is capitalized, except articles, coordinating conjunctions, and prepositions of four or fewer letters when they aren\u2019t the first word. " "in" in "Open in New Private Tab" is a preposition, so it should be lowercase.', I believe this is fine to land for 1.1, because case and punctuation corrections of English strings don't count towards string freeze.", Landed ', In future please don\'t use English text as string identifier, something like NSLocalizedString("string.id", value: "string content", comment: "l10n comment") is better.' 
id=1278545	 'Nathaneal is going to take a look!', See SQLITE_MAX_VARIABLE_NUMBER and BrowserDB.MaxVariableNumber particularly their use in the async chaining utility chunk(seq, by: BrowserDB.MaxVariableNumber) and the synchronous equivalent: set.subsetsOfSize(BrowserDB.MaxVariableNumber) Yo ll need to add similar chunking to SQLiteLogins.removeLoginsWithGUIDs as you see in something like SQLiteBookmarksSyncing\u2026deleteStructureForGUIDs. I'm happy to give this a look over if you need.", Note that you should consider carefully whether you want to delete each chunk inside the same transaction (more efficient), or in its own transaction (allows the user to make partial progress in the case of errors).', Created ', ', Pull request', Comment on ', ', Pull request Looks good to me! Adding rnewman as an additional reviewer since it looks like he's done this elsewhere and kindly offered :)", Comment on ', ', Pull request Let's make this more consistent, more efficient, and a shorter diff.", Thanks for your advice! I've tried to make the changes you suggested. The only thing I'm not sure about is how to make the diff any shorter \u2014\xa0any advice on improving this?", Created ', ', Pull request After an organisational confusion, I've resubmitted the pull request (which now contains the test). Thanks for looking over it!", Comment on ', ', Pull request Two little tweaks/questions.', Comment on ', ', Pull request Sorry, I forgot this was still open \u2014 does it look ready now, or are there any other changes yo d make?", Comment on ', ', Pull request If this works, it's fine by me." 
id=1134926	 
id=1146596	 'Created ', ', PR: ', This patch sets a *Content Security Policy* on pages served for Reading View. I've broken the patch down in small changes. The policy that we set is as follows: ", This allows nothing by default. (No script, no inline, no objects, no iframes). And then makes an exception for styles and fonts to be loaded from localhost.', Comment on ', ', PR: ', LGTM!', Comment on ', ', PR: ', Looks good to me.' 
id=1159561	 'Created ', ', Pull request. The `Deferred` switch was way cleaner than I expected! Whichever of you gets to this first wins. Go! :D', Comment on ', ', Pull request. In general, I'm fine with this -- questions oand comments on GH. However, I do not understand (and haven't read the further sync stuff /to/ understand) what the desired Visit/SiteVisit/something else split is. I find that confusing and unexpected and suggest wesj weigh in tomorrow and I'll loop back as well.", I commented in the PR, but in short: `SiteVisit` is what the frontend code was already consuming, just with a different name. `Visit` is the simpler 'root' that Sync will produce. This is effectively the alternative to the `RemoteTab`/`Tab` issue that you commented on in tab sync, and it'll get resolved (likely to the point of just killing `SiteVisit` altogether) as I move forward with syncing and rip out the existing history storage and UI-facing bits. After all, we don't show visits in the UI\u2026", I suspect we\'ll run into this "annotated version" (anti?)-pattern a few times: that is, we have these domain objects that end up being decorated with row IDs, foreign key references, etc. IMO that\'ll frequently often be a sign that there\'s "model-view-controller smear" going on: rather than the model exposing domain items and what the UI wants (e.g., URLs and titles by frecency) it exposes the database contents (a cursor of objects containing row IDs). That viewpoint is why I expect SiteVisit to die -- the reference from a visit to a site is an implementation detail of the database schema.', (In reply to Richard Newman :rnewman from ', ) ', frequently often sometimes always. This is how my brain works when I wake up at 4:30am.', Comment on ', ', Pull request. Love the new Deferred style vs blocks.', rnewman, can you ping me on this stuff in the future? I wrote this stuff. I like to keep some tabs on changes in it...', Oh you did! I just got removed....' 
id=1169272	 'Created ', ', PR ', Comment on ', ', PR ', Wonderful!', Merged' 
id=1223403	 "One thing I noticed is that all of the Carthage dependencies include a .xccodeproj file into our project. For the existing 'correct' Carthage dependencies we see these included at the top level. Now that we're changing some third party sources to be pulled in from Carthage I wonder if we should do the following: 1. Move any of the .xccodeproj references that are being pulled in from Carthage into a 'Carthage' or 'Dependencies' group. 2. As we transition Third Party code to rely on Carthage (such as the Deferred/SwiftKeychainWrapper PRs), remove their source file references from 'Third-Party Source' and include their .xccodeproj file under the 'Carthage' group. The convention would then be: 1. Any Non-Carthage dependencies would have their .xccodeproj or raw source (what ever is available) live in `Third-Party Sources`. 2. Any Carthage dependency would be placed in the 'Carthage' or 'Dependencies' folder by adding a reference to its .xccodeproj file. Would something like that work?", My plan for carthage is as follows: 1. For all third party code that can be carthagised, move to referencing carthage code, but otherwise leave as is. 2. For all non-carthage compliant carthage dependencies, remove from carthage into ThirdParty 3. Get Carthage building via `carthage update` 4. Remove all subprojects and third party carthage code from project and replace with linked frameworks 5. Look at which non-carthage third party code can be carthagised & migrate 6. Look at which non-carthage third party code can be replaced with carthage compliant code & migrate. Currently I'm on step 1. As we're ultimately going to remove third party and subprojects, I don't want to start adding more sub projects at this time. If as we go along we want to change that, we can, but I want to get to step 4 as quickly as possible.", Ah okay that makes a lot more sense than the project file includes. I forgot that Carthage should be just linking frameworks and not have references like we do now. Really excited to see this!', Created ', ', Pull request All done (bar the merging)', (In reply to Emily Toop (:fluffyemily) from ', ) ', Instructions on how to test are in the PR description. Patch for fixing SwiftKeychainWrapper to be compatible with extensions has been submitted back to jrendel. I'll update the Cartfile when this has been accepted.", Comment on ', ', Pull request Added a commit that resolves linking errors on device/simulator. Besides that, the changes look good +1', Comment on ', ', Pull request Tested ok. Changes I needed to make on my machine: * upgrade carthage * upgrade git % brew update % brew update carthage % brew update git % brew link --overwrite git Thanks for this epic work. Would r+ again.', Created ', ', Complete Pull request', LGTM, (the script changes).' 
id=1234885	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1181563	 'Fixed on master *** This bug has been marked as a duplicate of ', ***' 
id=1248789	 'Created ', ', Link to Github pull-request: ' 
id=1094195	 'Created ', ', Pull request', *** ', has been marked as a duplicate of this bug. ***' 
id=1258544	 'Fixed with ' 
id=1189411	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1201094	 'This is probably us and caused by this fix: ', We're double encoding the final url instead of encoding the search term once and the search url once.", Related: ', .', All of our engines are affected.', Created ', ', ', Swift 2.0 patch', Created ', ', ', Attaching v1.0 patch for bugzilla sake', Merged' 
id=1268966	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', A real shame about not being able to include this in carthage. We should raise a follow up bug to carthegise this as soon as the project fixes it's build issues (or look at submitting a PR to make it carthage compatible)", Submitted an issue to their JIRA - ', master b50a925bd30b1c6187a47a4eb78cf1ac7944824e' 
id=1149281	 'It looks like Top Sites has been redesigned and hence this bug is not applicable now. If this is still applicable, can someone attach a screenshot for the same?' 
id=1162619	 'I see this too (iPhone 6, 8.3), latest code', Resetting the simulator and logging in on a clean profile shows the tabs again. So that confirms that they are still on the server.', Quiting and restarting the simulator does not show the tabs. It shows the devices but no tabs. Pull to refresh makes no change. Something local state it seems. Investigating.', sqlite> select * from tabs; .. nothing .. sqlite> select * from clients; 6_vaPEKAdrhc|Stefan's TestFlight Profile|1431017553820|desktop||Darwin Pjf1r25WT7SQ|Firefox|1430926396220|mobile|phone|iOS lZhwm1A/aW9Q|Fennec (sarentz) on iPhone Simulator|1430926107890|mobile|simulator|iOS", Directly after clicking the Synced Tabs panel for the first time: sqlite> select * from tabs; 1|6_vaPEKAdrhc|', Fireball||1430925953000 2|6_vaPEKAdrhc|', Mozilla Manifesto||1430925951000 3|6_vaPEKAdrhc|', - Apple Watch||1430925946000 So it seems something wipes the table after that.', Created ', Initial Sync', Created ', Pull to Refresh', updateMetadata is never called in ClientsSynchronizer. That means lastFetched is always zero. As a result, we always wipe and fetch all clients. When we wipe the clients DB, our delete cascades to tabs: "client_guid TEXT REFERENCES clients(guid) ON DELETE CASCADE", but our tabs sync respects our lastFetched, sees no change on the server, and doesn\'t re-fetch. The fix is to add the missing updateMetadata chain. An additional fix is to make sure we wipe (and set lastFetched to zero) in the tabs engine when we wipe clients.', Created ', ', PR: ', Comment on ', ', PR: ', LGTM!' 
id=1213293	 'Created ', Pull request Fixed as part of ', Comment on ', Pull request Looks good but do we need backgroundView? Could we just use contentView?', (In reply to Stephan Leroux :sleroux from ', ) ', If we just use `contentView` then the `backgroundView` from the superview will be used and then the whole table cell goes multi-toned.' 
id=1226389	 'Related to ', ?', Created ', ', Link to Github pull-request: ', Added ', to fix long-press tab issue you found.', Merged a4859634b11a90e3cedc1ace32ba0b982620833d', v1.x c0b48a6' 
id=1299810	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1183809	 'IMO: if it\'s technically feasible to localize, we should. If it\'s not, and the tiles aren\'t pictographically descriptive enough, then we should switch the titles to the least English strings they can be: "Mozilla Project" "Support" (or "Help")', I'd vote for removing titles here. I'd also vote for more pictographic images.", Looking at Fennec's generator: ", it sounds like l10n should have these tiles in their region.properties. Searching ', for any browser.suggestedsites (or even just suggestedsites) keys returns nothing though, so I assume these aren't localized there (testing confirmed!) Given Android doesn't localize these, I don't think we should block v1 on it. Opinions?", Moved this to 1.1. Not spending time on it for v1.0.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Replace json array with array of structs.', Comment on ', ', Replace json array with array of structs. LGTM!', Comment on ', ', Replace json array with array of structs. Don't localize the URLs. Just the titles. The URL will auto-redirect to the correct locale. There is nothing to localize for the L10N team there. This can land when those strings are turned into regular non-localized ones.", Comment on ', ', Replace json array with array of structs. Addressed nits.', No longer localizing URLs. Landed.' 
id=1250676	 'Created ', Screenshot 2016-02-23 17.07.43.png', Created ', Screenshot 2016-02-23 17.07.45.png', Created ', Icon-iPadPro@2x', *** This bug has been marked as a duplicate of ', ***' 
id=1104940	 'Created ', ', Pull request', Comment on ', ', Pull request Oops, didn't see comments in PR.", Comment on ', ', Pull request Sorry for the delay. Still getting used to this system.' 
id=1241683	 'Follow up to ', Flagging myself for string(s).', "Allow third-party keyboards" \u25cb| (default to \'off\')', Options for resolving: 1. Add the setting in system preferences 2. Add a description under the setting to prompt the user to leave Firefox and then come back 3. rnewman suggested something about allowing the switch to take place in-app with some AppDelegate magic (not quite sure about specifics, so need-infoing)', (In reply to Bryan Munar (:bkmunar) from ', ) ', Pure speculation that there might be a way to force the OS to reinit. I don't know a concrete way. The simplest option for 3.0 is to add a subtitle like: You need to reopen Firefox for this change to take effect.", what's your final decision on how you wanna handle the UX on this?", (In reply to Bryan Munar from ', ) ', Per our discussion, can we prompt the user to initiate the action? Firefox needs to reopen for this change to take effect. CANCEL OK and the app restarts or backgrounds to perform the action. that way, the user is aware they made a decision to proceed, and that something is going to happen, and they don't have to do the work. If this isn't possible then go with the subtitle as suggested.", Created ', ', PR', Comment on ', ', PR Mostly looks good - just some nits and a comment.' 
id=1186979	 "I'd like to work on this feature. tecgirl, let me know when we can start working on this one.", Created ', ', ', Comment on ', ', ', I think this is a good start but I'd like to see this approached a bit differently from the code side of things. I've left some comments on the PR but let's get together and jam on this for a bit.", Went over the revised changes and it's looking really good. Couple nits and questions. We should also consider using the UIViewController presentation API instead of adding the view directly.", Comment on ', ', ', Round 2 feedback', Comment on ', ', ', Awesome work - this feels great. Just one last comment and I think we're good to go.", (In reply to Stephan Leroux :sleroux from ', ) ', Awesome! Thanks Steph! I made the change. :)', master 6d1eefbc749673d696052f98a610994248d2c266', v5.x 08b8b99e4356d24817f887ca116d82ed0997bd5b' 
id=1253458	 "Contextual note for future spelunkers. Recall that Sync clients are susceptible to upload races: Client A download T0 Client A download end T5 Client A begins processing downloads Client B upload T6 Client A upload T7 Client B will fast-forward its download timestamp to T6. Client A will fast-forward its download timestamp to T7. Client A will never download B's uploaded records. In previous clients this has been a conundrum: fast-forward to T5, and see all of our own uploads, or fast-forward to T7 and miss B's upload? Clients _should_ issue X-I-U-S here, which -- in combination with atomic writes -- would allow either A or B to upload, but not both.", Fixed: 2016-03-03 17:37:11.018 Info Downloader.swift:45 init(collectionClient:basePrefs:collection:) > Downloader configured with prefs 'profile.sync.synchronizer.bookmarks..downloader.bookmarks..'. 2016-03-03 17:37:11.019 Debug BookmarksDownloader.swift:93 go(_:greenLight:) > Downloading up to 100 records. 2016-03-03 17:37:11.019 Debug Downloader.swift:127 go(_:limit:) > Modified: 1457050163160; last 1457050163160. 2016-03-03 17:37:11.019 Debug Downloader.swift:129 go(_:limit:) > No more data to batch-download. ... 2016-03-03 17:37:11.417 Debug BookmarksSynchronizer.swift:69 onUpload > Uploaded records got timestamp 1457055431460. 2016-03-03 17:37:11.418 Debug Synchronizer.swift:218 setTimestamp > Setting post-upload lastFetched to 1457055431460. 2016-03-03 17:37:11.420 Debug Synchronizer.swift:218 setTimestamp > Setting post-upload lastFetched to 1457055431460. 2016-03-03 17:37:11.421 Debug Downloader.swift:142 advanceTimestampTo > Advancing downloader lastModified from 1457050163160 to 1457055431460.", Created ', ', Pull req. I tagged this on the end of the last PR I did.', Comment on ', ', Pull req. Great explanation.', 87c17f6', v3.x df1ce3a' 
id=1117847	 'Created ', ', Pull Request' 
id=1132504	 "Sidenote: on Android I'm sorting like this: public Cursor getReadingList(ContentResolver cr) { // Return non-deleted, non-archived items, ordered by either server stored data or local added date, // descending. // This isn't ideal -- it depends on upload order! -- but the alternative is that a client with a // very skewed clock will force its items to the front or end of the list on other devices. return cr.query(mReadingListUriWithProfile, ReadingListItems.DEFAULT_PROJECTION, NEITHER_DELETED_NOR_ARCHIVED, null, SORT_ORDER_RECENT_FIRST); } We don't want to sort by last modified, because that'll change every time something happens to the record. We want to sort by date added.", Sorry, I should expand those constants! private static final String NOT_DELETED = ReadingListItems.IS_DELETED + " = 0"; private static final String NEITHER_DELETED_NOR_ARCHIVED = ReadingListItems.IS_ARCHIVED + " = 0 AND " + ReadingListItems.IS_DELETED + " = 0"; private static final String ITEMS_TO_FETCH = ReadingListItems.CONTENT_STATUS + " = " + ReadingListItems.STATUS_UNFETCHED + " AND " + NEITHER_DELETED_NOR_ARCHIVED; private static final String SORT_ORDER_RECENT_FIRST = "COALESCE(" + ReadingListItems.SERVER_STORED_ON + ", " + ReadingListItems.ADDED_ON + ") DESC";', Good points. I'll make sure we are in sync with Android.", Resolve?' 
id=1145597	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1194750	 'Created ', ', ', Merged', Reopening. I see this issue now only once when animating to the tab tray but after the first time it's fine..", Created ', ', ', Comment on ', ', ', Express reviewed!', Merged' 
id=1208506	 'Could this happen when users update their apps from 1.0->1.0.5?', Created ', ', ', This PR updates the Cartfile commit to an updated version of breakpad which supports recording of the build number when the app crashes. That change can be found here: ', There's a question on the commit about strings versus integers: ", The Cartfile PR is a rubberstamp once that's resolved.", Added a PR to resolve the file formatting issues and buildID issue: ', I'll land it and update the Cartfile.resolved PR change.", Comment on ', ', ', LGTM. Make sure it works! :D', I gave it a try by simulating a crash and updating the build number for a local build and rerunning the app. The crash prompt didn't show so it should work for TF/production builds as well.", Merged' 
id=1157398	 "I've also seen this when Sync does a pre-emptive wipe of the clients table. It looks like maybe our DB access is lazy, so we don't necessarily create the tables by the time we come to wipe them?", I cant reproduce this error. Since logins code has gone through a bunch of iterations since this bug was filed, I am going to close this.' 
id=1221706	 'Do you have the font sizes/color/margins for this layout?', Also, do you have a copy of the default firefox icon? I have a version in the app we use for the footer but downscaling it to fit makes it look grainy.', One more thing! I've started to use FBSnapshotTestCase for saving reference images so we can run tests on the layout without having to run the app. Also helps in reviewing UI changes :) ", (In reply to Stephan Leroux :sleroux from ', ) ', Yes, I'll add the spec and the grey default fox logo. Great to hear about FBSnapshotTestCase!", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Just one small nit switching the ref tests to `recordMode = false`.', Fixed nit with base class check for environment variable recording flag.', Merged Master 19c230d4c7d08ec2ea77f8f153a550f686cf87af' 
id=1168134	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Set colors to be default dark grey/light grey.', Comment on ', ', PR ', Looks good! I\'m not sure we want to mess with the scheme display, though, as mentioned in the PR (looks like Darrin\'s mockup also includes "https://").', So I updated the patch to include changes in the PR comments and refactored out the logic for coloring the URL into extension methods on NSURL and NSAttributedString so I could wrap some of the behavior in tests. To color the host without the subdomains, I'm currently using the last two components of the host, joining them, and coloring that in hopes of excluding any subdomains. Would this work as a workaround? If not, I can look into using the tld.dat list to create special handling and wrap that in some additional tests if needed.", We don't want to break things like www.bbc.co.uk . I think thats why things got complex originally...", Would it be difficult to emulate what Android does? I can probably port over whatever checking logic we do in Java over to Swift.', Android uses Gecko's code, so its basically the same as desktop.", Created ', ', PR ', I managed to find ', in Gecko which is the code thats responsible for determining the public suffix/base domain for a given hostname using the public suffix list found here: ', . I implemented the algorithm in Swift as an extension to NSURL so we can match the domain highlighting logic we have on Android/Desktop. I also included some basic test cases to confirm the algorithm's logic.", Comment on ', ', PR ', Couple of regressions: We show https:// again in front of the URL. (But not http://) Not sure if that was a design decision but before this patch we did not? If you open ', only apple.com is darker grey. Is that intentional? Opening a new tab shows the URL of the previously active tab in the location bar instead of "Search or enter address" - Not sure if that is this bug or the recent refactor of this url bar?', Comment on ', ', PR ', Code looks great. Nice to have that TLD code in the project, I think that will be useful for other things too. Just see my regression notes in the previous comment. Are the performance test data (.xcbaseline) supposed to be committed? I don't know how that stuff works.", Just spoke with Darrin and he said to go with this behavior as it matches what we do on desktop ', Yup - Firefox Desktop does the same thing. ', This is actually a regression thats on master at the moment.', See ', for URL regression bug.', Should I wait on merging this until we fix the URL regression on master?', Nope lets merge it!', Merged' 
id=1178786	 'Created ', ', Pull req.', Comment on ', ', Pull req. LGTM', e0c1fbd' 
id=1311017	 '- ReaderViewUITest: ReadingList related methods are commented, since KIFTest cannot swipe the list element. Also it only runs on iPad configuration - ReadingListTest: font change tests are commented - SearchTest: font change tests are commented, and Bing tests are comments out since location access request dialogs causes unresponsiveness with KIFTest - SessionRestoreTest disabled, since feeding JSON session data does not work. - TopsitesTests: font change methods are commented, and it only runs on iPad configuration - TopTabsTests: It only runs on iPad configuration - ViewMemoryLeakTests: disabled since getTopViewController() cannot return rootViewController anymore', Tests that fail on iPad: - ClearaPrivateDataTests - NavigationTests Tests that fail on iPhone: - ReaderViewUITest - TopSitesTests - TopTabsTests Also, HomePageSettingsUITests.testTypingBadURL() gives intermittent failure, when ran after a number of previous tests are run beforehand', We're going to deactivate ViewMemoryLeakTests (", ) since 1) it fails on iOS 10, and 2) it's technically more of a unit test rather than a UI Test. We eventually plan to migrate the KIFTests under UITests folder to XCUITest, but this one looks like it belongs to a dev-managed unit test. Aaron said I should check with you on this one. Do you think it's a good approach?", I don't think these would really work as unit tests since they're tightly coupled to the view state. That said, these tests have always been pretty hairy and unreliable, so I'd be fine if we just removed them altogether. It would be great if we could figure out a better way to find memory leaks -- perhaps there's some way to automate the Instruments > Allocations, for example?", Created ', ', Github PR Link', Looks good. Could you please rebase into one commit please :) Also setting up git on your machine to use the rebase workflow will avoid merge commits in your commit history. ', Also one more thing! There were some linting issues that were introduced by your changes last time. Could you fix those as well. You can see the issues here ', I've added your fork to now compile with BuddyBuild so these errors should come up next time before you merge in changes.", Will fix, also, here is the spreadsheet that outlines which UI tests pass on which (ipad/iphone) platform: ', Made some updates to the tests, and now current state is: On IPad, following tests will always fail: DomainAutocompleteTests NavigationTests On Iphone, following tests will always fail: ReaderViewUITests TopSitesTests TopTabsTests Deactivated on both: SessionRestoreTests ViewMemoryLeakTests', Actually, SessionRestoreTests is now enabled thanks to bnicholson', Merged: ' 
id=1187416	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Also fixes the progress bar not being shown', Comment on ', ', PR ', Makes sense, but why was `effect.clipsToBounds = true` set in the first place? Just an accident, or will this fix regress what that was fixing?', I set it to true in my tab tray fixes branch as a way to hide the animating progress bar during the transition but I'm not seeing that behavior anymore.", Merged' 
id=1124942	 'Maybe this has something to do with WKPreferences.javaScriptCanOpenWindowsAutomatically ? "A Boolean value indicating whether JavaScript can open windows without user interaction. The default value is false in iOS and true in OS X."', The test page works in Safari if I turn 'Block Popups' off in Settings -> Safari. With Block Popups off, I get a confirmation dialog 'This site is attempting to open a pop-up window. Block Allow '. Highly likely that this is connected to WKPreferences.javaScriptCanOpenWindowsAutomatically. We should probably do the same and make this an (advanced?) setting?", Cool, good find. Rather than silently hide the popup like Safari, we should probably show a notification like we do on desktop/Android that allows the user to control the setting for the site.', Can we do a tri-state global setting for this? Yes/No/Ask?', Morphing this bug a bit. As mentioned in ', , it should be easy enough to flip this setting on so popups appear, but we'll need some kind of UI to prevent popup spam.", Don't remember much discussion about popup blocking UI or settings, so setting tracking-fennec to get this on the radar.", WKPreferences.javaScriptCanOpenWindowsAutomatically seems to be an all or nothing thing. If we want to offer the user some differential control, or want to be block on a per-URL basis, then we need to do something more different (e.g. checking for WKNavigationType in WKNavigationDelegate of BrowserViewController).', WKPreferences javaScriptCanOpenWindowsAutomatically blocks a few classes of popups (see ', ). I can't see a way of detecting which popups would be opened or even that they have been blocked, without doing a bunch of bookwork in BrowserViewController.WKNavigationDelegate. You /can/ reset `webView.configuration.preferences.javaScriptCanOpenWindowsAutomatically` at anytime, and it will be respected after it is set. We could enable this on a site by site basis. However, without a way of detecting blocking, populating the block/noblock list will be painful for the user. If we can't detect popups that have been blocked, then the minimum we should do is a checkbox in prefs.", Adding a toggle in SettingsViewController. This will toggle the profile prefs object. onClick also needs to mutate the existing tabs, via the tabManager.', Currently, we're not using NSUserDefaults. However, existing settings/prefs are using a collection of actions (e.g. Clear Private Data). The exception here is Search engine prefs, which uses our own 'Prefs'. Why don't we use NSUserDefaults? Added a KVO addObserver to the Prefs object, so new Browser objects can listen for a change of preference.", NSUserDefaults being used in the implementation NSUserDefaultsProfilePrefs.', James, I saw your comment on our WebKit Wish List ', "It is not possible to detect popup blocking when it has happened via javaScriptCanOpenWindowsAutomatically. It is not possible to overide this on a per site basis." Is this true? Why can\'t we set javaScriptCanOpenWindowsAutomatically to true and then put our decision logic into - webView:createWebViewWithConfiguration:forNavigationAction:windowFeatures: ? That method would then always be called when WebKit asks us to create a window for a popup (or _target="blank"). We can return nil to ignore the request. We can see that this is a request for a popup window by looking at navigationAction.targetFrame, which is nil in case of a popup. (I guess that is always the case when this is called) The originating site is in navigationAction.sourceFrame and possibly navigationAction.request. I think that gives us enough info to show a Snackbar to confirm the action? We would just have to hold on to the naviationAction and the configuration for a while until the user confirms or rejects the request. But I think that is ok since both are probably pretty lightweight.', Implemented the suggested from ', , testing with ', Unfortunately, this overblocks\xa0\u2013 none of the links in ', when they should. We can further filter on navigationAction.navigationType, but this will still overblock. And this is what concerns me: we can go further and further into the 'it's just\u2026' but we're a) /at best/ duplicating what's already in Webkit, b) and /at worst/ overblocking or underblocking popups.", Created ', ', bug-1124942-overblocking.patch Small patch demonstrating overblocking of popups. We're calling it a popup if there is no targetFrame. Works just fine with the 'bad' popups from ", , however, fails for ', The navigation type is Other (-1) on both good popups and bad so this on its own, these two tests are insufficient.', (Why not put this on a PR branch? We don\'t really use attached patches.) James, I think you can completely skip the navigationAction.targetFrame == nil check because that seems to be always the case. No matter what kind of popup or window is being opened. I would just look at navigationAction.navigationType and only allow the new tab to be created in case of WKNavigationTypeLinkActivated. That looks only to be happening on user interaction on a <a href= target="_blank"> and not on JS being executed.', Checking navigationAction.navigationType isn't sufficient: in the case of bad popups, and good, the navigation type is WKNavigationTypeOther. If we disallow everything but WKNavigationTypeLinkActivated, this ends in us not being able to do things like Persona logins. (sorry patch; out of habit and time constraints).", Two strategies: * use javaScriptCanOpenWindowsAutomatically, and not be able to offer the user opening a blocked popup - because we don't get a hint from the webview. Any UI is limited to the preferences. * don't use javaScriptCanOpenWindowsAutomatically, and re-implement popup detection in the manner we're trying to do here. I'm going to do the former, while looking out for ways of doing the latter.", James, this came up in triage today. Is it possible to land a first iteration of this with the following properties: * We expose a global 'Block Pop-ups' setting * This setting maps directly to the WKPreferences.javaScriptCanOpenWindowsAutomatically property So, no per-site. Nothing fancy. This would be the same as Safari does. We can do a more complicated implementation after v1.", Created ', ', Exposed javaScriptCanOpenWindowsAutomatically to the user. I'm not sure where to put constants atm, so expect to be dinged on having magic strings in a couple of places.", Comment on ', ', Exposed javaScriptCanOpenWindowsAutomatically to the user. This looks good to me, but can we add a UI test? Should be fairly straightforward to include a minimal page that triggers a popup (like in the test case from ', ), then testing it for both pref cases.', Will add a KIFTest, and land.', This is great. Couple of observations: * The popups from ', are correctly blocked! * When logging in with Persona on ', , the login window correctly pops up and lets me login There is one issue, but I think that is not related this bug, and I will file a follow up: when you finish the Persona login, the tab in which Persona ran is supposed to automatically close. But it does not. The login was succesfull though because when I manually close it and go back to mozillians.org, i am logged in. Not sure what piece we miss, may be some WKWebView delegate that we need to implement.', I filed ', as a followup. Lets fix that in a separate bug.', Added a view more comments to the pull request about some small fixes that we need.', Addressed nits, and merged.', James, if still possible, would you mind rolling back the commit and then rebase and squash the 7 individual commits in your PR branch into a single one with subject "Fixes 1124942 - Implement popup blocker UI". I see the note about the prefsDidChange notification was not addresses. So you are chaning the webview settings when you receive that notification, but the Prefs actually never sends it. So that still needs to be implemented. Either as part of this bug or as a followup bug.', I'm not sure I understand the problem with prefsDidChange \u2013 it's not a notification, it's a selector being called by the notification center. The notification is being sent by changing the user defaults in /via/ the prefs.setObject call at ", (In reply to James Hugman :jhugman @jhugman from ', ) ', You are right, ignore my comment.', Comment on ', ', Exposed javaScriptCanOpenWindowsAutomatically to the user. Looks good to me. Next time please make sure to squash the commits into one single commit before merge please.' 
id=1136250	 ' is the Android equivalent.', Created ', ', PR: ', This patch creates a new Reading List API and Reading List Storage backend. This code is not hooked up yet but I would like to merge it now early because it will probably be a nightmare to merge it later as it contains many project file changes. Followup bugs will address integrating this with the UI and implementing the Sync part of it.', Comment on ', ', PR: ', This landed with review on GH.' 
id=1266958	 'This was fixed in v3.0 which is on the App Store. The Aurora build should be updated too. Not sure where current Aurora builds live. See ', . *** This bug has been marked as a duplicate of ', ***', (In reply to Aaron Train :aaronmt from ', ) ', Alright i see anyone with a test iPhone or iPod Touch, that can help me take a screenshot of the Spotlight Tab Search function in Swedish? and email to me at bittin(a)reimu.nl that would be nice :)' 
id=1199671	 'Created ', ', ', Merged - follow up to use SnapKit constraints instead located here: ' 
id=1224388	 'Sizes can be wrong, though: 2015-11-12 15:56:25.991 Debug FaviconFetcher.swift:118 parseHTMLForFavicons > Found icon //www.google.com/images/branding/product/ico/maps_32dp.ico. 2015-11-12 15:56:26.145 Debug FaviconFetcher.swift:138 getFavicon(_:icon:profile:) > Downloading image from ', : got image <UIImage: 0x7fddd0cd5d40>, {16, 16}, err nil. 2015-11-12 15:56:45.985 Debug FaviconFetcher.swift:143 getFavicon(_:icon:profile:) > Image is 16.0 x 16.0.', FaviconFetcher.getForURL(url, profile: profile) >>== { icons in if icons.count == 0 { return } guard let url = icons 0 .url.asURL else { return } If the first returned icon has no URL, we won't use any of them.", Compulsive exploration: rnewman/favicon-fetcher-test', Created ', ', Pull request Comments in PR.', Comment on ', ', Pull request Left some comments in the PR. It looks like a lot of the existing code was written prior to Swift 2.0 and could probably be cleaned up a bit with guard instead of nested ifs.', r? sleroux', Comment on ', ', Pull request Looks good! Also I find we actually download favicons most often now with this branch. Might just be the top sites I'm looking at but almost all of them have proper favicons now.", Merged.' 
id=1147262	 "Sounds like fallout from st3fan's fix for our extensions?", I can't reproduce this issue. Tried with several simulator types and on two devices. Is anyone else seeing this?", I am pretty sure now that this is happening because Mark has not setup his Mac to do device builds. That means that the provisioning profiles for org.mozilla.ios.Fennec are not present. And those profiles contain the reference to the application group. As a fallback we can use ~/Documents if containerURLForSecurityApplicationGroupIdentifier() fails, but that has the side effect that the share extension does not work. This may be ok because that is only a situation that can happen when the app is run in the simulator. On a device, containerURLForSecurityApplicationGroupIdentifier, cannot fail. (Famous last words, but it would only fail if the app were packaged incorrectly with wrong or missing entitlements)', Created ', ', Link to Github pull-request: ', stefan: I think we'll land a work-around to get the simulator back for contributors, but please follow-up with a longer term bug if there's more needed.", Comment on ', ', Link to Github pull-request: ', Works on device.', *** ', has been marked as a duplicate of this bug. ***' 
id=1211986	 '*** ', has been marked as a duplicate of this bug. ***', Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", Created ', ', ', Comment on ', ', ', This is great! Looks awesome and feels snappy. Awesome work :)', Comment on ', ', ', Nice, works well! Is this faster because the blur is only created once, whereas the UIVisualEffectView has to calculate the blur for every frame? Also, does this mean we can support this effect now on iPad 2 and other older devices that didn't work with UIVisualEffectView?", *** ', has been marked as a duplicate of this bug. ***', Yup - this is faster because we're only running the blur code once and caching it into an image so the performance hit only happens on blur but after that it's equivalent of having a normal background image. I'm not sure about iPad 2 and older devices. Unfortunately I don't have any of the unsupported older devices. :AaronMT, do you have an old iPad 2 to test on?", I have an iPad 2. Everything is terribly slow.', Can you confirm the blur works on the iPad 2? Just worried about regressing since on iPad 2 the blur view was not supported.', Going to merge this in for testing in the next aurora on an iPad 2', a50a9162ef7645aeb7baaabbbcfb8507c175e3d2', (In reply to Stephan Leroux :sleroux from ', ) ', The device is on iOS 8 and not 9 (not my device and they don't want to upgrade). Everything in Firefox is slow on the iPad 2." 
id=1097254	 'Created ', ', Pull Request', Created ', ', Pull Request', Comment on ', ', Pull Request Seems good to me. Quick question in the PR.' 
id=1250103	 'Created ', ', Pull request l10n snapshot tests for clear private data changes' 
id=1191062	 'Created ', ', Pull Request', Comment on ', ', Pull Request Thanks, Boris!' 
id=1127853	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1202093	 'One existing example on iOS: Settings > Safari > Advanced > Website Data > Remove All Website Data. That triggers the following alert, which the user has to confirm again before the deletion: ', The plan is to just switch the Clear Private Button to disabled after tapping it. We'll no longer automatically kick the user back to Settings.", Created ', ', Link to Github pull-request: ', Robin, how does this feel to you?', Comment on ', ', Link to Github pull-request: ', Darrin's fine with landing these now and filing separate follow-ups if needed after UX review.", Comment on ', ', Link to Github pull-request: ', LGTM - Just a question about the assert' 
id=1260731	 'This field is an <input type="number">, so my first guess is this is an inconsistency in handling that field between iOS and other rendering engines. I see similar behavior if I open the signup URL in desktop safari: ', ', It seems that the correct age-filtering rules are still applied, e.g. on desktop safari, entering "1." as your age will cause the signup to be rejected due to age restrictions, while entering "33." will allow the signup to proceed. Can you confirm whether this is the case on iOS as well?', Hello, Please observe the following steps to reproduce the issue: 1. Star Firefox 2. Create and activate FxA 3. Log out 4. Create account using previous credentials (user/password) 5. Enter age "1.", "33.", "3." and "1,". 6. Observe that the signup process can be completed', The above-linked fxa issue has been closed, so closing here. Please re-open if this is still happening.' 
id=1151553	 "I think I handled this in a previous fixed bug(?) I disabled all buttons that aren't needed on the home page when we load the home view. --> ", Indeed! *** This bug has been marked as a duplicate of ', ***' 
id=1215669	 'Could this be a regression of what we landed for ', ?', Not a regression, just a case that didn't get fixed there. This is the follow-up for that bug. See ", and following comments there.', Might not be an easy fix. Might want to put in default thumbnails as a stopgap.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Comments in the PR.' 
id=1282951	 'Created ', ', Pull request', Does this need uplift?', Shoot. forgot that. Sorry Stephan', v5.x ddbad29' 
id=1173086	 '(In reply to Richard Newman :rnewman from ', ) ', Context. Who? Does this need to track v1?', Need a decision from Karen', Looking at some Android search count data, Twitter is still relevant. I'm going to see about getting some more current data (this is Q3 / Q4 2014 numbers) but I don't believe the problem is that Twitter is there - because when people understand what it does, they use it (and use it more often than some other search providers we have included!). The trick is to educate users what it is, which I believe is being addressed in another bug. tl:dr don't pull it at this point. Being able to promote alternative choices is our strength." 
id=1239286	 
id=1184817	 'Testing this on the simulators with the URL and the scrolling seems fine?', Try on a device?', Might require zooming first. Brian hypothesizes relationship with scrollbar bug.', STR: 1. Navigation to bugzilla.mozilla.org 2. Zoom into page 3. Perfrom a mixture of vertical horizontal scrolling Expected: Page should scroll smoothly Actual: Page jitters ------ My gut says that the jittering is coming from the code that 'stablizes' the scroll view from scrolling while the toolbars are animating. We force the scroll view to not scroll while the toolbars are moving to prevent 'double' scrolling that gets caused by the scroll view scrolling + the toolbar animating.", Going to take this bug and see if some of the scrolling code I wrote on another branch will fix this.', Created ', ', PR ', Comment on ', ', PR ', LGTM. Scrolling performance is still not great on bugzilla.mozilla.org - but then I tried it in Safari and it was just as bad so I it's just bugzilla. I noticed that scrolling occasionally seemed to stall briefly as we displayed and hid the bottom toolbar. Is this part of the same bug do you think or a separate one?", I can kind of reproduce this if I'm panning + scrolling at the same time when the page size is close to the viewport size. Is this what you were referring to?", I'll file a separate bug for this.", Merged' 
id=1109772	 'WIP: ', Parts 1-7 merged: ', Parts 8-10 up for review, covering bookmarks and sharing. Tests pass.' 
id=1194156	 'we think this is an web page thing - will monitor' 
id=1145108	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', I have removed the workaround where the MFMailComposeViewController is created at startup because without it things also seem to work fine. This gets rid of the 'No Mail Accounts' alert when the application starts.", Comment on ', ', PR: ', Nice!' 
id=1252169	 'Note that this may be a red herring. This possibly does not happen on a clean build with cleaned Derived Data.', *** This bug has been marked as a duplicate of ', ***' 
id=1219652	 ' Another WebContent (overnight) crash and then a mismatch?', that was my initial thinking, however I know I didn't fall asleep with the political article as the 'last' article - I fell asleep 2 articles later, so it got stuck before the 'overnight' happened.", I thought this had something to do with this code path; ', But now I am not so sure.', Is this still an issue?', I haven't seen it in a long while, so let's close this out and I can re-open if I see it again." 
id=1166491	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1205924	 'Robin, do you already have mocks for this? If not, do you have time to put something together? I expect this to be tracking-1.1.', (In reply to Richard Newman :rnewman from ', ) ', I don't have mocks yet but I can put something together.", Created ', Image 2015-09-28 at 1.32.05 PM.png Bookmark folder mocks', Created ', bookmarkFolder.zip Bookmark Folder assets', I have these landed in my stack. Thanks for the quick turnaround!', Created ', ', Pull request', Comment on ', ', Pull request I left some questions and pointers to conflicting commits from the big bookmark sync PR on this PR.', Landed new assets (and removed the old) as part of my landing: 675ed95', Comment on ', ', Pull request This works. It doesn't match the mocks, but it's a thousand times better than the broken state it replaces, so I landed it: 751bfbe. We can iterate in-tree." 
id=1230414	 'Created ', ', PR: ', This patch fixes a regression introduced by the fix from ', *** ', has been marked as a duplicate of this bug. ***', Merged 3c09c504c45ec2821a819812e3611abed8a5b202', v1.x 1a2cbd949fbf256d484eb92a11a850b45b7925f8' 
id=1177132	 '(also if I exit out of editing mode in the screenshot the URL is still shown) Also, it looks like if we rotate the device the URL is wiped.', Created ', ', PR ', was flagged as v1 tracking+, so I think that would make this bug obsolete when fixed since it would load a new page entirely.', See ', .. I am not entirely sure.', I think we should probably land this anyway. Cancelling during Provisional navigation should reset state back to the previous state.' 
id=1323461	 'Might be: 2016-12-14 08:05:40.941 Warning BookmarkPayload.swift:503 isValid() > Not the places root and missing parent name. 2016-12-14 08:05:40.941 Warning Record.swift:59 fromEnvelope(_:payloadFactory:) > Invalid payload { "title" : "A Look At Wheel Locks For Bike Touring | TravellingTwo: Bicycle Touring Around The World", "loadInSidebar" : false, "tags" : , "id" : "e52JXyAOLbYT", "bmkUri" : "', ", "parentid" : "LUDt683r4Q0L", "type" : "bookmark" }.', The root cause for the error in ', : ', . My menu________ record doesn't include a parent title. We use INSERT OR IGNORE when inserting into the buffer. We fail for this reason: Error: CHECK constraint failed: parentNameOrDeleted but we roll through with IGNORE. That leaves us without the folder in the buffer, so when we go to add its children we get a foreign key constraint violation instead. There are two things to fix here: - Default to an empty string (the workaround for dirty data resulting from ", ). - Don't use INSERT OR IGNORE: we already tried an update in place, so anything else is a legitimate error!", Created ', ', Pull req. (Stacked) These two commits unblock my device.', 25c42cd', v6.x 3776c837e510cc78f692be6bfffc93780ffbb417 & 95a42cb97bc01a70ac52b1fdd04a57a66ad095df' 
id=1254695	 'Created ', ', PR ' 
id=1123376	 'Fix is part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1146535	 'PR here ', Created ', ', PR: ', Comment on ', ', PR: ', LGTM', Merged on March 24.' 
id=1278355	 'Created ', ', ', Created ', Before the fix', Created ', After the fix', Great job! I noticed the leak in app settings as well when debugging but didn't spend time figuring it out.", Thanks Farhan! :) These memory leaks aren't as easy to find as I had hoped haha", master 0fba934f99ab385d174c373bbcc609199d03d8df', v5.x d1a84ba96662e7626283538adc996aff713de8c9' 
id=1293668	 'Created ', ', Pull request', v5.x: 7d755bc' 
id=1234269	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1248034	 'Needinfo on :tecgirl to confirm that the empty state is good to go.', Created ', BookmarksEmptyPanel.zip', Created ', ', PR - for strings', Comment on ', ', PR - for strings I'm still seeing the Alexa Top 5 as default bookmarks, and unable to delete them. I know those are separate bugs, but I'm unable to review the empty state if I can't make it empty.", I'll add a trivial commit that we can back out before landing bookmarks sync.", Done. Ready for you.', Created ', ', PR', Comment on ', ', PR Clean up your commit messages!', (In reply to Richard Newman :rnewman from ', ) ', i think i already did!', Comment on ', ', PR Looks good just a couple of questions in the PR.', Comment on ', ', PR Solid stuff. Minor nits but good to go.' 
id=1134799	 'Looks like this particular case got fixed somewhere along the way, but I still see empty tiles on the top sites panel.', Created ', ', Pull request' 
id=1092568	 
id=1159350	 'see also ', *** This bug has been marked as a duplicate of ', ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1223276	 'Created ', ', Pull req.', This is based on ', .', Comment on ', ', Pull req. Looks good! I'll land it.", Landed 456979601bf440683babf724b571f1cad849ba90' 
id=1189165	 '6) Add UIFontWeightLight to WelcomeScreenItemFont', Problem with #1, this cuts the reader panel off when rotated :o', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR - i know will have nits, plz halp LOL', Comment on ', ', PR - i know will have nits, plz halp LOL All good!', Comment on ', ', PR - i know will have nits, plz halp LOL On the right track, but I'd like this to be more Auto Layout-friendly so this is easier to maintain. In particular, see if you can remove the device-specific constraints, and try to avoid remaking constraints where possible." 
id=1168890	 'Created ', ', Pull req. This puts backoff handling inside the storage client, using a state hook to persist into prefs. This is much, much simpler than inspecting the response in each synchronizer. There are two ways we can get a backoff: inside a success response, or as part of a failure response. The latter still fails. The former still succeeds. But in the former case, the *next* request will now fail due to outstanding backoff. Which is exactly what we want to happen. We also check for outstanding backoffs, via the storage client itself, when starting to sync each synchronizer -- better then than having the first request fail. Tested manually by forcibly returning backoff values in updateBackoffFromResponse. (I really, really want to get a testing service into the tree so we can write some proper tests for this, but alas now is not the time.)', Comment on ', ', Pull req. I gave this a quick scan only, but it looks sensible. Consider not hard-coding the string ("backoff.server...") and varying the Prefs object. That\'s a surprising pattern, I think. I think fixing the Prefs and varying the string is more expected. (Consider we might want this for FxA and token server, etc.)', Legit point. Will do.', Piss, I think I forgot to do the prefs object change. Will file a follow-up. ' 
id=1139053	 'Created ', ', Link to Github pull-request: ', rnewman: over to you. I haven\'t tried to rebase your branch on this -- I expect the changes to be minor -- and I don\'t have time to continue on this tonight. This is not perfect: * I\'m not 100% that we ignore certain error classes correctly. For example, a 503 should keep the account in the same state. * The expiration delays are hard coded right now; they should be extracted to FxALoginClient and be per-client. * The logging is there, but not yet exposed. I have a WIP commit to allow testers to update the state manually; we may be able to leap frog this directly to "test Synced tabs".', Thanks, Nick. I'll try to get to this tonight. Part of the test is likely to be rebasing my branch and seeing if my tests pass! :D", (In reply to Richard Newman :rnewman from ', ) ', I realized I may have made a tactical error in this PR. I changed the main advance signature from -> Deferred<Result<FxAState>> to -> Deferred<FxAState> My reasoning is that you should *always* be able to advance a state -- you might just get the same state back. However, this hides transient errors (such as broken connectivity, or a server 503), which consumers will almost certainly themselves witness shortly after the login machine does. This could cost us a connection round trip to error out higher in the stack. I wonder if it might be better to have the signature be -> Deferred<NSError?, FxAState> or even have the caller possibly provide error storage, like -> ErrorPointer -> Deferred<FxAState> This will become clear when I implement the abstraction I have planned for the Token Server token caching layer; but keep it in my mind if you have a strong opinion.', I guess the question is: does the caller care about the error, and does the error transition result in a useful state? That leaves us with three approaches: 1. The caller doesn\'t care about the error, and only cares about a successful advancement. Return `Deferred<FxAState?>`. 2. The caller always expects a state (even if it\'s the same one), and also wants to know if an error occurred. Return `Deferred<FxAState, NSError?>`. 3. The caller doesn\'t expect a state if an error occurs (e.g., because it\'s the same one), \'real\' failures are modeled as a particular state (Doghouse), and the caller cares about errors. Return `Deferred<Result<FxAState>>`. I would be happy with any of these, assuming the choice matches the need. E.g., if you know that you\'ll either advance to an error state or experience a transient error, #1 works fine. I expect this to be mostly encapsulated from my POV -- that is, for a sync to run in any capacity we need: * From the token server: * A server assignment * A token (expired or not) * A way to fetch a new token and new server assignment if necessary (which errors) * From the account itself: * The user\'s keys * Client state to use when fetching a token. These things can be bundled up in an object that can expose its own API. We don\'t really care about the account state itself, only about the capabilities that we derive from an account in good state. Even the syncing rules -- "can I sync? should I try again later?" -- should be abstracted somewhat.', Comment on ', ', Link to Github pull-request: ', Reviewed on GH.', I pushed this code basically as it was, deferring the "return error" API decision to the next ticket, which I am about to file.' 
id=1258156	 'Created ', ', Pull req.', Comment on ', ', Pull req. LGTM', 5811e17', v3.x 2b94a62' 
id=1200715	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1148998	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1213141	 "Yup it did but it's been resolved in this patch: ", *** This bug has been marked as a duplicate of ', ***' 
id=1171189	 'This seems to be a banner that Twitter adds. Not the standard banner that Apple can add on top of a page. You can see the difference between the two by for example going to ', - note the UI is a little different, it for example shows the number of stars and full app name and publisher.', Also, the 'Get the app' banner does not seem to show in the Simulator. So if in doubt if the bar is something the website is doing or if it is the native iOS provided one, run the app in the simulator and see what happens there. So I think for this bug we can ignore the fact that the banner keeps showing on Twitter, I assume they do it on purpose, and instead we should focus on the context menu showing on a non-long-press.", Created ', ', PR: ', The banner is a Twitter specific banner and not the built-in one that apps can ask to be shown in the `WKWebView`. The underlying problem here is that we also try to show the context menu on script links that are handled internally by the application. This patch has a basic fix for that where I check if the link's `href` is set to `#`. I don't know the web platform well enough if this is the best check to do. *Note that this fix is not twitter specific. This will work on any script-backed link.*", Comment on ', ', PR: ', I think the bigger issue here is the fact that the context menu shows at all with a regular tap -- we should only be showing the context menu for long taps. What\'s happening is that the element is removed on touchdown, so when you release within the 500ms timeout period, touchend is never called to cancel the context menu dialog. wesj pointed out that attaching the touchend/touchmove listeners directly to the elements (rather than having global capture on the window) will correctly fire the touchend/touchmove events, even if the element is removed from the document. So, in short, the "proper" way to fix this would be to attach the touchend/touchmove listeners to event.target directly, doing so inside of touchstart. I created a simple page here to help with testing (which also works in the simulator): ', Thanks :bnicholson that is super useful.', Created ', ', PR: ', Comment on ', ', PR: ', Looking good -- left a couple more comments in the PR.', Comment on ', ', PR: ', Brian, this now seems to work well on your test page and on m.twitter.com. Can you take a quick peek to see if I did anything crazy. JavaScript is not my greatest skill :-)', Comment on ', ', PR: ', Nice, looks good to me!' 
id=1183695	 "Steph, wanna steal this? This'll be a little bit of XCGLogger rewiring as we start and end a sync in Profile.swift, flushing to a file in a directory.", Yup I can take this. Looks like XCGLogger already handles writing logs to disk so we can just add the file logger alongside the console logger and we should be good to go.', Do we want to write all console log messages to disk or are we only looking for logging performing in Profile.swift?', Everything in Sync, Storage, FxA, Profile. Probably that means introducing two loggers -- one for browserish things, and one for storageish things.', An easy first step is to log everything to disk, of course :)', Created ', ', PR ', I've started with a generic app logger that will log everything to an app.log file for now.", Comment on ', ', PR ', Two comments on the PR.', Are we cleaning up the logs at some point?', See comment about log rolling. The current PR doesn't keep logs for longer than the last browser lifespan, so there's nothing to clean up.", Created ', ', PR ', Wrote patch to use rolling logger for sync logs and separate loggers for browser/keychain logging.', Still needs tests and adjustments', I've updated the PR to include the better way of getting folder size and nit fixes: ", I've contacted Nikolai about the licensing and he's fine with licensing it under MPL2.0: ", ', Comment on ', ', PR ', I've updated the NSFileManager license and added some tests for the RollingFileLogger class: ", bafb839' 
id=1237999	 'Created ', IMG_5497.PNG This is reproducible every time. I\'ve seen it for a while but due to vacation, been slow to report. I type in "tripadvisor" in the URL bar, it autocompletes to www.tripadvisor.com and I press "Go". It then goes to www.tripadvisor.com and loads their page for 1 sec then it goes to this strange error page.', *** This bug has been marked as a duplicate of ', ***' 
id=1104800	 'Fixed with ' 
id=1130249	 'The exact error is: App Installation Failed A signed resource has been added, modified, or deleted. This actually happens at the point where you drop the .ipa file on your device. The xcodebuild -exportArchive works without complaining. What we need to do is find out how to verify the code signing from the command line and see if that results in some hints. There is a codesign command that can be used for this. See also: iOS Code Signing Troubleshooting ', Installation Failure Troubleshooting for iOS ', Code Signing in Depth ', Here is a hint. Fennec-Aurora-Mac:tmp sarentz$ unzip Fennec\\ Aurora.ipa Fennec-Aurora-Mac:tmp sarentz$ cd Payload/ Fennec-Aurora-Mac:Payload sarentz$ codesign -vvv Client.app/ Client.app/: a sealed resource is missing or invalid file missing: /private/tmp/Payload/Client.app/archived-expanded-entitlements.xcent', Here is a fix. unzip Fennec\\ Aurora.ipa cd Payload/ cp PlugIns/SendTo.appex/archived-expanded-entitlements.xcent . Compress the Payload folder, call it Fennec Aurora.ipa again. This installs without complaints. Need to figure out why archived-expanded-entitlements.xcent is missing from the app bundle.', More hints .. ' 
id=1204492	 'I think we need 5 strings: **Empty private browsing tab tray** 1 title: "Private Browsing" 2 body: "Firefox won\u2019t remember any of your history or cookies, but new bookmarks will be saved." **Settings** 3 "Close private tabs" > 4 "When leaving private browsing" / 5 "Manually" (default) (see Settings > Safari > Open Links setting in iOS for the settings style to use here)', Should there be a similar learn more link found on desktop/android?', Great point Aaron... do we have such a page (or is the desktop/android one general enough... which I doubt)?', The 'learn more' link points to a sumo article talking about PB on android. No reason we couldn't point to an iOS sumo page relating to PB?", Added another dependency - we probably need 'Open In New Private Tab' when triggering the long press context menu within a private tab. Right now we show 'Open In New Tab'.", Created ', ', ', Remaining strings needed for private browsing', If these strings are for the settings, do we need Camel Caps Casing For These Strings?', (In reply to Darrin Henein :darrin from ', ) ', I need a bit of help to understand how this works: the first level setting will be "Close private tabs", you tap and get "When leaving private browsing", you tap again and get a selection between "Manually" and "Automatically". For Safari the option value is displayed near "Open Links", do you plan to display it near "Close private tabs"? With "Automatically" it will barely fit for English, probably won\'t for several locales.', Sorry, to clarify: Top-level setting is "Close Private Tabs", which gives you two options: "When Leaving Private Browsing" (which is \'automatically\') or "Manually"', Stephan, re :flod\'s comment "For Safari the option value is displayed near "Open Links", do you plan to display it near "Close private tabs"? With "Automatically" it will barely fit for English, probably won\'t for several locales." Can we show "Manually"/"Automatically" as the string on the right side/subtitle on the main screen, but tapping in gives you more verbose options? Or maybe we go with "Automatically" and "Manually" with a subtitle on the Automatically row which says "When Leaving Private Browsing"? I cam provide wireframes if this isn\'t clear.', Either option works. Just to clarify: Option 1: Close Private Tabs Automatically -> When Leaving Private Browsing -> Manually / Automatically Option 2: Close Private Tabs -> Automatically \ when leaving private browsing -> Manually / Automatically (Sorry for my ASCII art)', Created ', Screen Shot 2015-09-17 at 3.43.35 PM.png As per IRC, let's go with this.", Comment on ', ', ', Left a couple of comments in the PR, f+ with those addressed. In particular, we shouldn\'t pre-land strings if we\'re not planning to use them, which seems the case for "Automatically" and "Manually".', Merged' 
id=1250562	 'Oh hey! We already do this!' 
id=1192810	 'Part of ', ?', No this looks like a regression. I don't remember the top sites panel flashing in before rendering content.", I've noticed this for awhile, but forgot to file a bug for it. I think this happened after ", , which changed the way we detect URL changes on the webview. Previously, we used didCommitNavigation to look for URL changes, but that wasn\'t reliable since it wasn\'t fired for all cases. Using KVO to monitor the web view\'s URL is more reliable -- so reliable, in fact, that we we catch the very brief period between the web view being created with the initial about:home URL and setting the follow-up URL! Restored tabs are created without specifying a request 1 , so they\'ll use the default about:home request before loading the sessionData. The fix might be as simple as skipping the default request if "restoring" is true. 1 ', I shall take once done with presentaci\xf3n', Bryan: take it when yo re done with the other two+ bugs :)", After some digging, it looks like the reason the home pane view controller flashes is because we're resetting the page's push state to the home URL first, then navigating to their latest page: ", The first url is usually always about:home which, when replaceState gets called, loads into the web view which in turn updates WKWebView's URL property which triggers the KVO observer. I don't know what this is supposed to do but is there something we can do about this?", We have to call replaceState (rather than pushState) with the first URL to be restored since that removes the SessionRestore.html loader page from the back/forward history. We then have to use pushState in order of the history entries, so I'm not sure we can avoid this on the JS end. One way to fix this would be to delay attaching the KVO observers until the restore has happened, which kind of makes sense anyway since we don't want the restore to fire these events. Not a super simple fix like I was hoping, though.", Created ', ', ', Found a simple workaround for this. In the KVO observer, we check to see if the previous URL was session restore. If so, skip the reader mode/home panel checks.', Comment on ', ', ', Heh, this is the approach I was going to suggest first, but I don't think it will work in the case where about:home is actually the active restored URL. That is: create a new tab (which opens about:home), then close/reopen the browser. I think that will break the home panel appearing since the previous page was the session restore URL. Please reflag review if I'm wrong!", Ya looks like this breaks in this scenario - I'll see what else I can do :(", Comment on ', ', ', I've added a quick/dirty workaround for the restore->home issue ", Thoughts?', Comment on ', ', ', Well, this is kind of gross, but I guess it's good enough for now :)", Created ', ', ', Okay - I implemented a proper way of doing this instead of a lazy hack. I now delay KVO registration until restoration is complete.', Comment on ', ', ', I think this looks OK for restored tabs, but this won't work for new tabs that aren't restored. For example, try creating a tab the navigation to a new URL -- the home panel won't disappear. Maybe add a restoring boolean to Browser that we set to true at the end of this if condition 1 , then set to false after firing didRestoreSessionForBrowser? Then you could do if !browser.restoring { webView.addObserver(...) } in didCreateWebView. I think that might also allow you to drop the try/catch if you wanted since it would be safe to call the webView.removeObserver(...) as long browser.restoring is false. 1 ", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Typos. This should have been: "For example, try creating a tab, then navigating to a new URL...".', Ya that would work. Bah and I was trying to avoid adding more boolean state.', Comment on ', ', ', Updated with the restoration flag and it seems to be working fine for me (new tab + restoration)', Comment on ', ', ', Nice, thanks for taking this!', Merged/Resolved' 
id=1152660	 'Created ', ', PR ', I think this is closer to what Safari does.', Comment on ', ', PR ', LGTM' 
id=1164828	 "The issue is that yo re shipping 128px icons for English, while we stop at 32px on Android. That's causing the misalignment and the grainy image.", I vote to track, and expect this to be an easy fix.', (In reply to Francesco Lodolo :flod (UTC+2) from ', ) ', Android is adding hi-res icons as well (', ), so we should look into hi-res images for all locales. Filed ', .', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I think the scaling of the image is fine. The other fix for this would be to create a custom UITableViewCell subclass and set the UIImageView's frame to a fixed size in layoutSubviews or constraints using autolayout. That's more of a refactor though. I'm good with the scaling for now.", Also cool thing I just found using the new view debugging tools in Xcode 6 that might help in debugging issues like these in the future is the 'Show View Frames' feature: ", (In reply to Stephan Leroux from ', ) ', Yeah, that was actually the first thing I tried. It resized the image fine, but the text was still misaligned (i.e., the "Google" from your screenshot was still out of place). I guess we\'d need to change the label frame too if we went with that approach. \'Show View Frames\' looks pretty cool!', This actually still affects the pane used to select the default search engine. Should this be reopened or a new bug filed?', New bug please', Filed ', as a follow-up.' 
id=1217432	 "/Browser/SessionRestoreHelper.swift:28:21: Reference to property 'delegate' in closure requires explicit 'self.' to make capture semantics explicit /Browser/WindowCloseHelper.swift:33:17: Reference to property 'delegate' in closure requires explicit 'self.' to make capture semantics explicit", *** ', has been marked as a duplicate of this bug. ***', Build works fine with those minor adjustment fixes', Got a PR, Aaron?', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Landed, amended: afc42553a91f0ce559c9c4481cd00f3687831bec' 
id=1174129	 'Is this the latest available build for download? Or have you updated? This was fixed over a week ago in ', This is from TestFlight 19 - it expires in 17 days (was it released 13 days ago?), I did not update since then (because there was nothing to update to). I don't know if ", solution deals with other scenarios (not only after closing last tab).', Yep. This is fixed via that bug in newer builds. *** This bug has been marked as a duplicate of ', ***' 
id=1228736	 'Might change one day in the future, but likely not in this bug.', And in which then? This is a must have for a big screen.', I know the UX team is currently working on updated designs for iPad screens. I'm not sure if there is a bug filed for it. NI'ing our UX team.", Clearing NI.' 
id=1221608	 'Created ', Simulator Screen Shot Nov 23, 2015, 8.24.31 PM.png There doesn't seem to be a lot of UI here. What should the Firefox icons be replaced with? Obvious choices: favicons, screenshots.", Created ', Simulator Screen Shot Nov 23, 2015, 8.29.07 PM.png Search results next to other favicons provided by the iOS on the simulator.', Comment on ', Simulator Screen Shot Nov 23, 2015, 8.24.31 PM.png Hmm. Screenshots would be nice but maybe small in this context (they seem to have a fixed width)? Favicons may be small, too... might be nice to see/test these options. Let\'s see what Robin says as well. Can the subtitle in the other screenshot say "Firefox \u2014 {domain.com here}"', Created ', Simulator Screen Shot Dec 9, 2015, 4.55.01 PM.png The "fennec (jhugman)" text is taken from the app name.', Comment on ', Simulator Screen Shot Dec 9, 2015, 4.55.01 PM.png LGTM! Definitely prefer favicons over screenshots.', Created ', ', Pull request', Comment on ', ', Pull request Added :st3fan for feedback.', Comment on ', ', Pull request This is pretty cool! Left some comments on the PR. Also noticed that when selecting a search result from spotlight it opens the link in a new tab and not in the existing tab. Is that expected?', (In reply to Stephan Leroux :sleroux from ', ) ', No that sounds like a bug. The Quick Search results should mirror the open tabs in Firefox. So selecting a result should simply open the existing tab. Not a new one.', :sleroux, :st3fan Can't reproduce on iPhone device or simulator. ", Comment on ', ', Pull request I'd like to land this to get more people to find bugs. There are at least two issues which are increasingly out of scope of this bug.", Comment on ', ', Pull request A couple of comments on PR but essentially :+1: (It's a really cool feature, I love it :) )", Nits addressed, and merged. Followups filed.', Testing this out on master (01/14) Working great thus far, verification testing Questions: * Queries yielding both or either 'Top Hits' (app icon/site) vs just our application 'Fennec' (app icon/site); what's the differentiator here? * Most queries just yielding the application icon and not the site icon \u2013 does it take a while for this metadata to get pulled in?", I saw the icons not appearing on first visit, and have filed ', . The search query processing and search results aren't anything we do. I filed ", to explore how we can change our ranking. Top Hits, afaik is based on frequency of usage, though it's difficult to definitively know." 
id=1167970	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Since there are lots of shortcuts and your PR deals only with adding tabs, do you mind filing a separate bug blocking this one and moving your PR there? Then we can transform this into a meta bug that tracks all of individual the keyboard bugs.', Also, unless we're able to pull together all of these keyboard shortcuts before release, we probably don't want this for v1 since no keyboard support is better than half-baked support. That said, we can still work on this in anticipation for v1.1 or 2.0.", Yes, I'm fully aware this won't make it to 1.0 which is why I'm only working on it part-time.", *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Probably want to track this for iPad Pro keyboard users coming from Safari which supports all shortcuts. Quality of life issue which would probably drop users.', Here's what I've got so far. cmd+r reload tab cmd+ go back cmd+f find on page cmd+l open location cmd+t new tab cmd+shift+p new private tab cmd+w close tab ctrl+tab next tab ctrl+shift+tab previous tab", (not reviewer or staff): If I may, I think it would be great to also support Safari shortcuts in addition to the Firefox ones for the tab-switching actions: Cmd-Shift- in addition to Ctrl+TAB, and Cmd-Shift- in addition to Ctrl+Shift+TAB. Firefox on OS X already supports both of these - "yours" for compatibility with Firefox for Windows, and "mine" for compatibility with Safari on OS X.', Created ', ', PR: ', Sorry to take so long to look at this Jacob. The items you have look good, I've added a comment about some wording changes, as has :st3fan. The only thing I think is missing is: Cmd for going forward. This is the same as going back but the other direction. Would need the same kind of checks you have added for goBack, i.e. canGoForward etc. Return - for submitting a search into the URL bar.", also, if you want to, :dusek's suggestion above that we also support the safari keyboard shortcuts for the same items would be great. What you have done already is an excellent start though, so we can always add the safari shortcuts later so that it does not prevent this set from being accepted if you would rather.", Everything's in there except for the Safari compatible shortcuts.", (In reply to Jacob White from ', ) ', ', Fixed some strings I missed.', Not sure how I missed this one.', Jacob this is looking really good now. Can you please rebase against the latest master and then we'll merge this in? It should go in to version 5.0. I've created another bug for adding in Safari shortcuts for these. ", Okay, I think I've got it.", Thanks loads Jacob. I have now merged the patch into master and it will be included in version 5.0.', Hi all, Can you help me to test this feature? I am kind of confused here. Actually I will one Support article base on this. I mean I could not find cmd also in keyboard.', (In reply to Biraj Karmakar :biraj from ', ) ', This is in v5.0 which is not yet released and is currently under Apple TestFlight beta testing 1 . 1 Sign up here: ', To test you will need to configure a bluetooth keyboard or use an adapter to your iOS device.' 
id=1245503	 "Sounds fair to me. Does this mean that we don't support empty passwords on desktop, or that we only support saving them (not editing)?", (In reply to Richard Newman :rnewman from ', ) ', Sorry, I filed this from my phone so didn't was a bit terse and didn't provide links. We don't support logins with an empty password anywhere in toolkit code (which is also used by Android). This is enforced at the storage level. We really shouldn't ship as-is if they're going to end up getting synced to Desktop/Android. References: ", ', This sounds bad. I'll investigate.", Actually wouldn't this require a new string to tell the user they can't have a blank password? If this is a blocker we could just cancel the submission. Not the greatest UX but if it prevents login chaos I can see it being justified until the next release.", (In reply to Matthew N. :MattN from ', ) ', Huh, interesting. My reading of the RFCs suggests that Basic Auth allows an empty password; do we just not support saving that in Firefox, or am I misreading?', (In reply to Stephan Leroux :sleroux from ', ) ', Just don't offer to save in the UI -- no prompt when browsing, no save button if editing -- if the string is empty. Then make the storage layer reject.", There's also the ability to edit the login from the new detail page. I'll add validation in there.", Does this also apply for usernames or is it just passwords?', (In reply to Stephan Leroux :sleroux from ', ) ', No, empty usernames are fine as long as they are an empty string (instead of null). It's common for sites to have login forms that don't require a username so we definitely want to support them. Take a look at the two links in ", for other validation code. If you have some kind of form validation UI you could use that to indicate that the password field is invalid in the UI (e.g. ', ) to avoid a string. Either don't allow the user to leave that edit page (don't save) until correcting or have it revert to the old password upon leaving.", I'm going to move this up to 2.0 so its on our radar in Triage. Feel free to put it somewhere else if it doesn't belong there.", Created ', ', Link to Github pull-request: ', Adding two reviewers since we're close to launch.", master c72264407b08b760b9227f0751dd3fe9b16e2b0f' 
id=1136216	 
id=1124514	 "The error on that page is: Error SyntaxError: Unexpected identifier 'DefVid'. Expected ';' after var declaration. \twrite (former-nintendo-executive-dan-adelman-discusses-nintendos-culture-third-party-support-and-much-more, line 1) \tz (fcmdynet.js, line 12) \tZ (fcmdynet.js, line 12) \tloadL3 (former-nintendo-executive-dan-adelman-discusses-nintendos-culture-third-party-support-and-much-more, line 1) \tapply ( native code , line 0) \texecSafe (nmedianet.js, line 1) \tW (nmedianet.js, line 1) \t(anonymous function) (fcmdynet.js, line 12) \texecSafe (nmedianet.js, line 1) \tW (nmedianet.js, line 1) \tprocessL3 (former-nintendo-executive-dan-adelman-discusses-nintendos-culture-third-party-support-and-much-more, line 1) \tonreadystatechange (former-nintendo-executive-dan-adelman-discusses-nintendos-culture-third-party-support-and-much-more, line 1) This is likely useless info. What we should do is test the hypothesis that an error will abort processing our injected scripts.", Nope. Other pages on that site have the same error and still show the reader mode button.', Calling _firefox_ReaderMode.checkReadability() results in Error Failed to load resource: the server responded with a status of 404 (Not Found) (LuckySeymoreBGFB-300x93.jpg, line 0) Not sure why that would trigger an image load. Is that the cause of Readability completely failing?', Moved to ', .. we do not block on bugs like this.' 
id=1178394	 'Created ', Pull request', Created ', Foreground tab link If you need a link that will open up foreground tabs and not background tabs to test it out, the ZergNet advertisements on cracked.com will do that.', Comment on ', Pull request Nice, looks good to me!' 
id=1147148	 "Mind if I take this one? I have a partial implementation I've started to work on.", Take it!', Created ', ', Pull Request First pass at tab deletion', Created ', ', PR: ', This is the same patch that :sleroux originally submitted with two small changes that I made. From Gitub: I moved this branch to #293 so that I could add an additional change to it. I did two things: * To fix the offset issue I assigned self.startLocation to self.animatingView.center instead of self.originalCenter. * I changed the logic to decide if the tab should bounce back or not a little bit. Previously it was possible to slowly move the tab to the left or right and then upon release it would slowly continue moving off the screen. I changed it so that is now takes the velocity into account. You really have to give the tab a push AND be past the treshold. Otherwise it just bounced back.', Merged this. I am marking this as resolved. We will need to file a new bug for the work to move the tabstraycontroller to use a UICollectionView. That work can also include updates to this code.' 
id=1224227	 'Introduced in ', Created ', ', Link to Github pull-request: ', UIAppearance isn't dynamic, so it only applies to views that have already been instantiated. Since we now recreate the locationTextField each time we enter overlay mode, the theme won't be applied automatically. Here's a fix that manually applies each of the appearance attributes each time we create the locationTextField. I don't particularly like doing this since it means we need to keep these lines in sync with the ToolbarTextField lines in applyPrivateModeTheme in BVC, but I can't think of any better alternatives.", Comment on ', ', Link to Github pull-request: ', Patch works well. UIAppearance should support dynamically styling new instances of views - not just existing ones though. I think the issue is in the way The ToolbarTextField implements it's attributes for UIAppearance. I know there are issues with supporting UIAppearance for custom subviews 1 . I'm going to file a follow up bug to look more closely at what could be going on. I'm good with landing this since it's low risk and fixes the bug. 1 ", Comment on ', ', Link to Github pull-request: ', (In reply to Stephan Leroux :sleroux from ', ) ', Derp - thanks for pointing that out...this makes the fix much more straightforward!', Comment on ', ', Link to Github pull-request: ', Ah there it is! Great - looks good.', Landed on v1.2: 5726fc0' 
id=1236753	 "I'm able to reproduce this issue. I stored the login informations for Gmail in lastpass, then I checked what lastpass returns when I visit gmail.com in Safari and Firefox. I got the same actual result as above. Build: 1310", I can reproduce with 1.3, but not on master. On master, LastPass version 3.1.19 is not offering a form fill (only Copy Username, Copy Password) options.', From len at LastPass: "The 4.0 release should be good, and will be coming out Real Soon Now. (Apple dinged us on an app store metadata issue, otherwise it would have came out yesterday.)"', 4.0 is out now. Tested, and works as expected.' 
id=1296112	 'Created ', ', Pull request The method of switching using Deferred just broke down completely for top tabs, as there were so many race conditions, leading to buggy animations and crashes. This now uses completion handlers, and it's so much easier to work with (I think the code is also probably easier to follow.) This should fix up all the existing issues, which means the top tabs UI improvement work can land after this one.", Comment on ', ', Pull request Left comments on the PR!', The work on fixing the bugs with these features is being moved back to: ', *** This bug has been marked as a duplicate of ', ***' 
id=1279223	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Sorry wrong bug!', After allowing 3'rd party keyboards from Firefox settings and re-opening the app, I was able to use Fleksy and SwiftKey. Maybe the users are missing the 3'rd party keyboards setting.", :aaronmt we fixed a bug in 5.0 where we were ignoring the disable third party keyboards setting. It is probably this that is causing the reports. Users will need to enable third party keyboards in settings.', We should indicate as such in the store description with a release note.' 
id=1314374	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1211837	 'Created ', ', Pull Request UI so far', My understanding was this would look/behave like a native navigation controller (swipe from edge to go back a level, etc...) Is this still the case?', :darrin there were no interaction details in the mockups on the original bug, just visuals: ', I can add swipe navigation if we want it....', Thanks Emily! Yo re right here \u2013 there was nothing stated in that mockup :) Robin can work with you to get the interaction stuff right.", Comment on ', ', Pull Request It\'s getting there. The push L-R navigation interaction was what I expected, just didn\'t specify, so thank you for adding that. * The bottom border of "Desktop Bookmarks" header needs to span full width. * The header text should be Medium, 14pt, #5c5c5c (92,92,92). * The sub-headers are currently larger, please make 14pt. * The blue of the back caret and sub-header title is slightly lighter than the star/highlight color. Please make #49ceff(76,158,255). I\'ll attach the basic spec I put together yesterday.', Created ', bookmarks-ui-spec.png ui spec', Comment on ', ', Pull Request Looks fine to me', :tecgirl - I've updated the code to reflect the details in the spec. :+1: or :-1:?", Comment on ', ', Pull Request Two nits: Left align the top directory headers. See: ', Make header text color #5c5c5c (92,92,92)', The header text colour is 92,92,92 (at least that's what I've set it to). Not sure what else to do there. I'll fix the folder cell alignment.", Created ', Mobile Bookmark Folder', Created ', Ignore', Created ', Desktop Bookmark Folder', Created ', ', Pull request Part 2', Created ', bookmarks-ui-10-9 I just ran this on both 8.4 and 9.1, and on 8.4 the sub-folder header text is still larger.', Hierarchy weirdness: If I tap the 'Desktop Bookmarks' folder, the back nav on the next screen should say 'Desktop Bookmarks'. Instead, it says 'Bookmarks'. From there, whatever folder I tap, the subsequent screen shows that folder as the back nav. o-O", Comment on ', ', Pull request A few questions, but LGTM.', (In reply to Robin Andersen :tecgirl from ', ) ', So, the back nav tells you which folder you will return to when you hit the back button, not which folder you are in now and that is how I interpreted the mock-up: ', I can amend it to read the current folder, not the parent folder. Or I can add an extra header to indicate which folder we are in now.', (In reply to Robin Andersen :tecgirl from ', ) ', I can't see this. Am setting font in a different way on latest. Are you still seeing a size difference? Can you provide a screenshot?", (In reply to Emily Toop (:fluffyemily) from ', ) ', The screenshots are in the attachment (.zip), in folders according to version.', (In reply to Emily Toop (:fluffyemily) from ', ) ', The caret and title would always go/display to the parent folder. Currently if I tap on "Bookmarks Men it goes to that folder but shows "Bookmarks Men as the back nav.', (In reply to Robin Andersen :tecgirl from ', ) ', Yeah, I'm an idiot. Fixed", Created ', Bookmark UI fluffyemily So, here are some screenshots of what I see, and I can't see the same size difference, although it is very obvious in the screenshots that you provided. Did you do a clean before the build? And do you have the latest version of the branch?", (In reply to Emily Toop (:fluffyemily) from ', ) ', I always clean and make sure I'm on the latest branch :) I can take another look." 
id=1182475	 'I think this is a red herring. It seems that we do not restore state because we crash as soon as we go the background.', Closing this. Was a red herring.' 
id=1096732	 'It is really stupid that we have no control over that cache. Here is an equally stupid workaround .. :-) The API now responds to both: ', ', So to work around that TLS cache bug, I would suggest to put the username part of the email address in the url. So when ', logs in, use this as the API endpoint: ', Just make sure that you keep the wildcard part of the URL ASCII only and just a-z0-9- Not super happy with this but this is just temporary until we can stop using the REST API anyway.', Change in the NGINX config: ', Thanks for the quick fix! I'll update the login handling accordingly.", We're OK with just requiring people to restart the app for now. The REST API is a temporary solution anyway, so no need to put in extra effort here." 
id=1127504	 "The other similar warning introduced with the same commit is: Description: Directory not found for option '-F/Library/Developer/Xcode/DerivedData/Client-fhgufntxvuxtwfbmkckrmnagytst/Build/Products/Debug-iphoneos'. Committers: Introduced 26 integrations ago. Did you add those paths manually maybe?" 
id=1190960	 'Created ', iOS Simulator Screen Shot Aug 4, 2015, 10.29.17 AM.png', This was fixed and merged in ' 
id=1201892	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1141429	 "That blank grey row with no title and no indicative screenshot is 'about:home'. We should make this obvious like we do in Android.", I sort of understand what you mean. If you create a new new tab, don't search for anything you see a blank tab at the bottom which is white. I actually had content in all these tabs though and it looks like it just disappeared. I wasn't conscious that I created some about:home tabs.", (In reply to Sheila Mooney from ', ) ', Sounds like there are two issues here: about:home tabs being blank, and then other tabs turning gray. I filed ', to address the latter.', Created ', ', Pull request', Comment on ', ', Pull request Some nits in the bug. We removed these from about:home, but not from the tabs tray, so I assume this will make that transition a little nicer. Yay! If you have a bunch of about:home tabs, it would actually be nice to share a screenshot (follow up bug?) I wonder if we can eventually make Browser's have a getView() method (instead of an exposed WebView), that could return the AboutHomeViewController.view in this case. But... we've got enough balls in the air with how to fix Browser that I'm fine punting for now.", Added a bunch of comments. But the big one is that I don\'t think this approach for making screenshots works: "I don\'t think this will work. The problem is that when you open more than about 6 tabs, WebKit will start suspending the content process. And as a result, the screenshot here will be gray. We already had bug reports of that. Why don\'t we screenshot, and cache, before the user navigates away from a tab? Then we always have the most recent screenshot of what the user last saw. From a live tab that we know is in good state to screenshot."', Yeah, that issue is filed as ', . For this bug, I'm just improving on existing code by adding about:home support for screenshots, so it probably doesn't make sense to shoehorn that fix into this one.", Merged with comments addressed.' 
id=1151479	 'Created ', ', PR: ', This patch adds a release build configuration and scheme that can be used for TestFlight and App Store builds.', Merged. r=me.' 
id=1282748	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good to me on iPhone 4s/iPad Air 2 simulators!', *** ', has been marked as a duplicate of this bug. ***', #merged master ', Created ', ', Follow up PR', I've merged and uplifted both prs. v5.x 5707dc9032ba740b418035fc09f422dea8c359df" 
id=1163118	 'Would this be a good bug to save for Karim to work on?', We'll let emily get her feet wet with this.", Created ', ', Pull request', Comment on ', ', Pull request LGTM - Keep picking up Swift idioms. The most important for stable code are `if et`, optionals, try to never use `!`. And no more semicolons :-)' 
id=1172951	 "Also loading the above puts the browser into a situation where you can't go back as it loops forward again.", Opening a new tab afterwards yields localhost:60246/about/home/#panel=0, which yields "Could not connect to the server".', The above URL when visiting off from Dropbox might not reproduce the error. Try downloading and uploading to a personal Dropbox account and try to reproduce.', (In reply to Aaron Train :aaronmt from ', ) ', This reproduced after hitting 'Open in another app' on the *.wav file (native Dropbox application) installed", Another URL ', Tap test.mov', The "back/forward state broken afterwards and about:home" is related to ', -- once we leave and return to the app, the web server is restarted, changing ports.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Just loading the *.mov (ignoring the WebKitErrorDomain trying to play this file) I mentioned in ', triggers this without leaving the app but I assume it's the same issue. Trying to hit back to the directly listing doesn't work. For this bug let's figure out what this WebKitErrorDomain issue is.", Created ', ', PR: ', This patch ignores the WebKitDomainError/204 error that happens when you open a media file that is handled by an (internal) WebKit plugin. I don't understand why those are raised as errors via the `WKNavigationDelegate` - it is more like a notification from WebKit to tell us that it handled the page load internally.", Tested patch locally, WFM.' 
id=1239072	 'Created ', Screenshot 2016-01-12 15.29.57.png Not-configured state', Created ', Screenshot 2016-01-12 15.30.07.png Configured state', Consider excluding touch ID configuration for 2.0 release.', Created ', ', Link to Github pull-request: ', Includes a refactoring of our app settings screen so I can use the same controller for the authentication screen.', Comment on ', ', Link to Github pull-request: ', Looks good! Nice to see that we can finally start to reuse some of this code :)', master d9527a1cc04a8f2dc2c3db804e1968437a5381d5' 
id=1317439	 
id=1264748	 'Created ', ', Link to Github pull-request: ', There's a chance that intermittent bugs like ", are caused by threading issues. Hopefully this helps track them down!', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1109681	 'Clarifying the summary to distinguish from in-share FxA setup.', We found out!' 
id=1144908	 'Created ', ', PR 326' 
id=1193755	 'Expected: slide; no stretch, no scale.', I'll see if this can be a quick win", WAIT whoa i think my fix fixes this too', Created ', ', PR', Comment on ', ', PR Haven't tried this out yet, but left some comments in the PR.", Comment on ', ', PR I don't think this fixes the stretching of the URL text or the alpha fade. Whenever we enter editing mode, the text looks to be stretched and the buttons disappear instead of animations out to the left. Whenever we exit editing mode, the buttons appear right away on top of the text field These were taking in landscape on the iPhone 6 simulator. I'm not sure what the best approach is given we want to do an RC on Friday. I feel like modifying a bunch of the constraints might be risky. Let's have a discussion about this tomorrow @ triage.", Created ', Enter editing', Created ', Exiting editing', Comment on ', ', PR This is the same patch as ', so same comments apply.', Created ', ', ', Comment on ', ', ', Now we're talkin'! Looks great, thanks.", I found an issue with the text stretch PR - because I moved the setting of the text inside the dispatch_async method, there was a bug where when you switch tabs, and you go to edit the url, you see the old url for a moment before the new one comes in. Added an update for it here so we can preserve the same behaviour for the pasted case: ', Merged' 
id=1205709	 'Created ', ', Pull request', Merged.' 
id=1154553	 
id=1166372	 'UI not needed for v1. But stopping the crash loop would be nice.', The state restoration framework should be preventing crash loops an invalid state restoration causes, by deleting the restore file if a crash occurs during restoration. Noted: 'should' and 'does' are not the same.", Let's morph this down to the simplest possible thing: detect a crash and don't restore. We can present the option to restore in a later bug.", I have some code that we can use to detect when we've previously crashed and will put up a patch after ", gets merged down as it changes the way we restore tabs.', Hey Matej, We were thinking of showing the user a prompt asking if they want to restore their tabs after crashing or not instead of blindly getting rid of them. Do you know if we have existing copy on Desktop/Android for this that we could use?', (In reply to Stephan Leroux :sleroux from ', ) ', Unfortunately I'm not the right person to ask about existing in-product strings and I'm not sure who better to point you to. I know we have this copy on desktop (from about:sessionrestore), in case it helps: Well, this is embarrassing. Firefox is having trouble recovering your windows and tabs. This is usually caused by a recently opened web page. You can try: Removing one or more tabs that you think may be causing the problem Starting an entirely new browsing session", Created ', ', PR ', Note: This includes additional strings if we want to do with the prompt route.', :st3fan I only assigned this review to you since we were talking about it but feel free to pass it along to someone else.', Comment on ', ', PR ', Looks good. Lets land it so that we can get feedback from testers asap.', Thanks! Merged.' 
id=1273813	 'This is the new intended behavior.', (In reply to Stephan Leroux :sleroux from ', ) ', Intended only on iOS 8.x? With this behavior, there's one other issue. The menu will be misplaced under the URL bar when rotating from landscape to portrait.", Created ', Screen Shot 2016-05-20 at 17.11.33.png', Oops! No this is definitely a bug. Sorry - I was thinking this was occurring in the Tab Tray.', Created ', ', Pull request' 
id=1229952	 "2.0 if it's easy.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', it'll do ;-)" 
id=1177075	 'This seems to have already been done by someone else' 
id=1243544	 'Similar to Google Chrome for iOS ticket found here: ', Fix here, ', might be able to be adopted due to the similar nature of implementations (WKWebView)?', *** This bug has been marked as a duplicate of ', ***' 
id=1323101	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1122707	 'Fix is part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1196794	 'This works for me, iPhone 6/iPad Air (8.4) using latest TestFlight build. You might need to clear the browser cache in our browser settings and try again. ', Aaron, Noticed that the error message is not localized, can this be another bug?', I don't know if error pages are localized or localizable. Stefan?", Please file a bug for localized error pages. I thought they would come localized from iOS. Maybe this is not the case or we are doing something wrong there.', Yeah 'too many HTTP redirects' is not a string in our project. It comes from error.localizedDescription. We need to double check what is going on there and maybe provide our own localized strings." 
id=1254599	 'App State object should be able to contain the following:\r \r current location (browser, home panels, tabs tray, settings)\r current URL (nil if not in browser)\r bookmark state of current url\r whether the current URL is a mobile or desktop site\r whether the current user is logged in to an FxA\r the current home panel index (remembers last home panel index if the user not in Home Panels mode)\r \r We can add more states to the app as required, i.e. whether or not the user is in China etc. ', (In reply to Emily Toop (:fluffyemily) from ', ) ', Ignore this comment. The nature of the bug has changed since creation', Created ', ', Pull request', :sleroux :jhugman I've asked a question in the PR description that I would appreciate your views on.", Comment on ', ', Pull request Left feedback comment on the PR', Created ', ', WIP Feedback Request Changes to AppState implementation based on rethought approach that was then tweaked and adjusted and moulded into something I actually quite like through discussion with :rnewman and :jhugman. There is a question in the PR description I'd like some thoughts on, which is: `Currently I have set up the BrowserViewController to be the app state delegate for the Tab and Home Panels. Should instead, Tab and home panels maintain a list of delegates that it then runs through and notifies, and the Menu is just one of those? I don't really know if I like this idea. If we want to go that way, we are better off sending out an AppStateChanged notification and allowing any components to register as observers. This would enable us to get rid of the delegate entirely. Is this perhaps a better way? I think that what I have implemented here is the more redux-y way of doing things, but maybe I am wrong.`", The reason to do the chain of delegates is to transform a general app-state into more specific component-level states. For example, the app state might be All of my open tabs A set of bookmarked URLs If there's a network printer in range ... The top-level component (BrowserApp!?) takes that as input. It slices up this state and passes the slices to its sub-components. By the time we get down to refreshing the bookmark star component, we're just passing in the thing it cares about: is the current page bookmarked? The reason to do this is simple: it makes your components 'dumb' and testable. If every component in the entire app can implicitly depend on anything in the app state, then we're essentially using global immutable state. Better than global mutable state, but still hard to test and hard to understand. This leads to two lenses through which to reconsider your question. The first: broadcast or subscribe? If managing the set of subscribers (tab manager -> tabs, for example) is hard, then use broadcasts. The second: is the data we're sending general or specific? If it's general, don't broadcast it, and I'd expect the data to get smaller and smaller as you move down the chain. If it's specific, then see (1), and simply decide whether to use direct subscription or a specific broadcast at that level..", Comment on ', ', WIP Feedback Request I'm not going to have enough free time to attend to this :(", Created ', ', Pull Request Re-raised PR merging into main menu branch rather than sub-branch which got all too meta', Comment on ', ', Pull Request Looking really good! Left some discussion points on the PR.', Comment on ', ', Pull Request Looks good! Just a few nits and naming suggestions.', Adding follow up bugs * ', * ' 
id=1159030	 'Created ', ', Link to Github pull-request: ', st3fan: I did this in three micro-commits; it's easier to review this way, but I'm happy to land in one squashed commit.", Comment on ', ', Link to Github pull-request: ', Looks good. Don't bother squashing them. I think it is good to split it up." 
id=1210121	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1223129	 'I think this is important enough to ship in 1.2 is possible.', Created ', ', PR: ', This patch introduces a `TitleActivityItemProvider`. This UIActivityItemProvider subclass does two things that are non-standard behaviour: * We return `NSNull` if the calling activity is not supposed to see the title. For example the *Copy* action, which should only paste the URL. We also include *Message* and *Mail* to have parity with what Safari exposes. * We set the subject of the item to the title, this means it will correctly be used when sharing to for example Mail. Again parity with Safari. Note that not all applications use the Subject. For example *OmniFocus* ignores it, so we need to do both. Tested with the following share extensions: Firefox, Message, Mail, Pocket, Reminder, Notes, OmniFocus, Mail, Twitter, Evernote. Tested with the following action extensions: Copy, Print, Send Tab, View Later.', Comment on ', ', PR: ', LGTM and works pretty well', \\o/', Comment on ', ', PR: ', LGTM.' 
id=1293068	 'On its own this is sec-low. it only becomes interesting combined with a bug that can force a user into reader mode (such as ', )', Paying bounty for the combined attacks in ', Created ', ', Pull request', Comment on ', ', Pull request Nice, thanks for taking this!', master: ', v5.x: 9885a2c' 
id=1168832	 "I don't see this on my iPad Air (1st gen) in either Firefox or Safari, quickly scrolling will white-out the content div for a second but not the index on the left, so not the entire WebView.", Good clarification, the contents on the left do stay for me too, it's the scrollable area on the right that blanks out.", Created ', ', PR ', I've added a patch that reverts the change we made to the deceleration rate so it's back to the WKWebView's normal rate to see if this makes a difference.", I did a bit of research and what I'm seeing is that one of the reasons behind web view's having a faster than normal deceleration is to reduce the rendering load of rendering the web content as it's an expensive operation. This would explain the tiling problem we're seeing on larger screens that are scrolled down to fast like the iPad when we set the deceleration rate lower. Before I commit to anything I want to see if someone from the WebKit team can confirm. Also, as far as setting a deceleration between normal and fast, it looks like the scrollView API only accepts predetermined deceleration rates :( Any time I try to set a custom one it defaults to the Normal rate.", Since we can only use Normal or Fast deceleration rate we need to choose between the two evils of the faster deceleration (non-native scrolling), but having the web content render better or go with the slower deceleration (native-scrolling) and have cases where on larger displays + fast movement result in slower tiling performance. Ideas?', For now we'll keep the deceleration rate to the default FAST speed. I've opened ", to track the radar I've opened for allowing better rendering for WKWebView when the deceleration rate is set to NORMAL." 
id=1233852	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1247906	 '*** ', has been marked as a duplicate of this bug. ***', Fixed in ', Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1188903	 'Created ', ', PR ', Merged' 
id=1138828	 'Here is the Android (based on Desktop) code: ', Didn't we try this once? ", I think Wes wanted this in iOS, not Android.', Created ', ', Pull request', Comment on ', ', Pull request Wes this looks good. Do know that the Reader View URLs have changed from `about:reader` to `', *`. I introduced `Browser.displayURL` to make sure we don't use those internal URLs anywhere, but you may want to give that a thought and see if there is a special case regarding these new URLs we need for history collection.", I'll file something. I think maybe our best bet is to just also ignore localhost urls?", Comment on ', ', Pull request Sorry forgot to + .. see my previous comment.' 
id=1200651	 'Desktop bug!' 
id=1180612	 'Created ', Repro of Tab Tray animations jaggy with non-default height of status bar Two steps recorded: 1. Presenting the tab tray 2. Selecting a tab from the tab tray', I'm definitely seeing this issue and have done some investigating. Before I can address the janky animations, there is a bug I'm noticing with the way the tab tray view is updating it's layout in response to the status bar changes. Try the following: 1. Launch the app in any iOS device simulator 2. Turn on the in-call status bar from the debug menu 3. Navigate to the tab tray controller 4. Rotate device to landscape There seems to be a 20px gap between the top of the navigation bar and the view. Turns out this is a more deep rooted issue because that gap is not the view controller but the actual UIWindow of the application. Rotating back to portrait also causes a gap. From what I'm seeing so far, this issue is being caused by the way we're presenting the tab tray controller from our BVC which is the root and how the UITransitionView plays with UIWindow updates. A common practice is to use a UINavigationController as your applications root view controller and use it as the stage for your animations so you can prevent this sort of thing from happening. Anyways, that's a long winded way of saying that in order to fix this bug, I fix need to make sure the layouts work correctly so that when the animation occurs, all of the frames and offsets are correct. I'm going to file a separate bug for this and link it as a dependency of this one.", Is this the same bug as in the emulator you enable in-call status bar and see the tab tray animations jump?', (In reply to Aaron Train :aaronmt from ', ) ', Yes.', Resolved as part of ' 
id=1162484	 ' *** This bug has been marked as a duplicate of ', ***', (also ', )' 
id=1281405	 "I have a feeling that this is a regression from this line from a recent patch we merged in 1 . I'll investigate. 1 ", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', master a3bfd2ae75b2486ee51c1bad00d86d950cd21600', v5.x 1d6e4d5', Verifying as fix on master 6ad4b686.' 
id=1225854	 'Client 201 <Error>: Could not signal service com.apple.WebKit.WebContent: 154: Requestor is not a platform binary ', Is this still reproducible Catalin?', No, I can't reproduce on build 1310 (RC4)." 
id=1299364	 'Farhan, can you take a look?', Unfortunately its very hard for us to detect when a form input field is a search engine. Right now we detect this by checking to see if the input belongs to a form that performs a GET request. Because a form that performs a POST request could be a login form or something similar. Looking at ', It looks like the input field exists in a form that performs a POST request. There is actually a setting in searx that lets you request via GET instead of POST. ', (Change how forms are submitted). If you can find an instance that has it set to GET it would work. The way we can fix this and not try to handle every edge case is to allow manual adding of search engines. Similar to what firefox/chrome do. So in settings there would be a way to add a search engine based on a url like "', " I can create a ticket for that feature and it\'s probably best to mark this as wontfix.', Here is the bug to support this ', Thanks for taking the time to have a look everyone. You can actually use the general preferences page of any searx instance to change the form submission method from POST to GET. I can confirm that changing the form submission method indeed does allow the user to add searx as a new custom search engine so thank you for pointing that out. While that temporarily resolves the issue, is much more secure to use the POST method as specified at ', therefore I do agree that the user should be able to manually add a custom search engine. I look forward to having that feature added which will hopefully allow users to use searx with POST form submission.', This issue issue will probably be fixed in ', .' 
id=1104118	 'Fixed with ', The problem here was that presentShareDialog() was not called from the main thread.' 
id=1250518	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Nice test coverage', master: ', 3.x: ' 
id=1171041	 'Created ', ', PR ', Tried a couple things to slim down the CPU cycles when the transition finishes. Let me know how this feels - I think it's feeling better now.", Comment on ', ', PR ', These changes look good to me, though I'm not sure if they'll fix this. I've actually noticed this before too (thanks Aaron for filing), and I think it's related to the clone button we create at 1 during the animation. It doesn't have a click listener, so it's untappable while it's active. A simple solution might be to just attach the same click listener to the cloned view? It's a little strange that the animation is lasting as long as it is since I don't actually see any movement during this period. 1 ", Good catch -- I do notice the lag is longer whenever opening a new tab and it looks like it's probably because of the cloned button. I'll update the PR to add the selector to the fake button as well.", Merged' 
id=1130137	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1204090	 'The problem is the same if I compile with my iPhone on iOS 9.1 as target or with my iPad on iOS 8.4 as target. So the problem is probably the new compiler in Xcode 7.1.', Thanks for the early report. Not sure when we'll get to this but it's good to have on file.", This is irrelevant now: Xcode 7.3 (release) runs without any issues.' 
id=1262287	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM!', v4.x: ce7a41b' 
id=1164604	 'On-boarding is missing in Swedish aswell', (In reply to Luna Jernberg from ', ) ', + some settings text', I am going to close this. The on-boarding text is final now and will show up in the next export.' 
id=1192319	 
id=1144160	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1173885	 
id=1186665	 'Created ', ', PR ', This fallbacks through a series of possibilities. i.e. something like: ', // This may redirect, but Alamofire does that for us ', // Resolved url ', // Remove any path components ', // Try the base domain. This is risky ', // Mobile sites sometimes specify different icons than desktop ', Hm, this is an interesting idea, but I'm not sure I like this for several reasons: * If I'm reading your example correctly, we could end up firing 6 separate network requests for a single favicon. That feels aggressive, especially on mobile. * Checking a separate subdomain means that we're breaking out of the page's origin (protocol + host + port), which could result in unexpected behavior. Consider a somehostingsite.com where each member has a subdomain, such as foobar.somehostingsite.com. If foobar.somehostingsite.com doesn't supply a favicon, we'll fall back to www.somehostingsite.com, which isn't even the same owner. * As you mentioned in the PR, there's lots of room for error here. This feels particularly risky as a non-tracking feature so close to v1 shipping, so I think we should at least hold this off until v1.1 (if we want it at all). That said, might as well set tracking? now and get some group discussion since there's a PR up.", FWIW, on Android we only fall back to /favicon.ico. I generally concur with ', . One thing we might consider is not doing the network fetch, but being looser when fetching from the database. If we're showing a tile for www.facebook.com and we have a favicon for m.facebook.com, it might be a fair fallback until we load that page and know what the true icon URL is.", Too much risk for v1, needs time to decide on the approach. Minus for now.', Comment on ', ', PR ', Removing review for now; re-flag if you feel strongly about having this.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Yes. This is the fallback for when we're really out of options. i.e. ", provided nothing and ', also provided nothing. We\'re already deep down the guessing hole at this point. My original impetus was hoping that desktop or mobile versions of sites provided different/better icons (that\'s true on google.com properties for instance), but it doesn\'t seem like special casing to avoid moving out of a subdomains is worth it. i.e. an "m" subdomain with bad icons isn\'t much better than a "foobar" one. I have a script that runs against the Alexa top 1000 using these techinques. I can have it spit out when this is useful or not too, to see how much this helps (opengraph image support actually wound up helping google properties more if I remember right).', I split things up so that we can land these in stages. If things get "good enough" without this, seems good to skip.', Don't think this is worth the added cost, and I don't think anyone is planning on picking this up. Closing." 
id=1194664	 'This also causes a EXC_BAD_ACCESS crash to occur later on line 1015 BrowserViewController:browser(browser:, willDeleteWebView webView:) when running TopSitesTests->testRotatingOnTopSites. Crash does not occur if SessionRestoreTests are not run first.', Created ', ', ', Comment on ', ', ', Looks OK, though I'm wondering if we can simplify this KVO registration code as mentioned in the PR.", Simplified KVO stuff. Merged.' 
id=1228596	 'Twitter not showing up in master or v1.x. Suspect the Info.plist in Client, ShareTo and SendTo. Checking\u2026', Reverting the Info.plist changes hasn't changed anything. Not using the UIActivityItemSource as an activityItem does cause the problem to change; but does disable the feature.", This is an interesting thread. ', Adding in logging for hitting the share menu button: activityViewControllerPlaceholderItem is ', dataTypeIdentifierForActivityType nil Selecting a menu option: itemForActivityType com.apple.UIKit.activity.Print This method gets called when the share menu is about to be displayed, but activityType is always nil. func activityViewController(activityViewController: UIActivityViewController, dataTypeIdentifierForActivityType activityType: String?) -> String { // Because of our UTI declaration, this UTI now satisfies both the 1Password Extension and the usual NSURL for Share extensions. print("dataTypeIdentifierForActivityType \\(activityType)") return "org.appextension.fill-browser-action" }', Reading more about NSActivationRule, I\'m still suspicious of ours in Info.plist. Changing: SUBQUERY ( \textensionItems, \t$extensionItem, \t\tSUBQUERY ( \t\t\t$extensionItem.attachments, \t\t\t$attachment, \t\t\tANY $attachment.registeredTypeIdentifiers UTI-CONFORMS-TO "public.url" \t\t).@count == 1 ).@count == 1 to: SUBQUERY ( \textensionItems, \t$extensionItem, \tSUBQUERY ( \t\t$extensionItem.attachments, \t\t$attachment, \t\t( \t\t\tANY $attachment.registeredTypeIdentifiers UTI-CONFORMS-TO "com.adobe.pdf" \t\t\t|| ANY $attachment.registeredTypeIdentifiers UTI-CONFORMS-TO "public.url" \t\t\t|| ANY $attachment.registeredTypeIdentifiers UTI-CONFORMS-TO "public.file-url" \t\t\t|| ANY $attachment.registeredTypeIdentifiers UTI-CONFORMS-TO "public.plain-text" \t\t) \t).@count == $extensionItem.attachments.@count ).@count == 1 in SendTo/Info.plist makes our extension show up. Still no twitter though.', The ShareTo/Info.plist and SendTo/Info.plist NSActivationRules are for extensions to select which applications an extension can open in. ', Adding the ShareExtensionHelper (a UIActivityItemSource) into the items array means that extensions no longer match all items. Checking how we might make the items array only have one item in.', Created ', ', Pull request Fix provided by ', Needs uplift, once landed.', Comment on ', ', Pull request LGTM', This either made 1.4 or 1.3.' 
id=1241415	 'Created ', ', Pull request' 
id=1114857	 "Presumably we're not ready to put more details there yet but should keep it in mind that we will want it more up to date when there's more information we can share." 
id=1135920	 'Created ', ', WIP PR This is a WIP of this. It implements a custom UICollectionView layout to handle showing thumbnails up top and a list below. Works pretty well right now, but needs cleanup. No thumbnails yet. No click delegate hooked up.', Created ', ', Pull request This is a start at this. I wanted to start having someone look at it now. There's lots of follows up (handling rotation better, frecency, etc), but I think its enough for a good base.", Comment on ', ', Pull request Comments in the PR.', I'll fix this up and merge." 
id=1198943	 'so, we need to add implementations for the following functions in the AppDelegate (in Swift 1.2 parlance): func application(application: UIApplication, didFailToRegisterForRemoteNotificationsWithError error: NSError) func application(application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: NSData) In one we need to handle the failure of a registration for remote notifications and in the other we need to do whatever it is we need to do with the provided token, saving it somewhere for now presumably (:@st3fan?) We also register for notifications only once, currently, when the user signs up for an account. As we are not currently saving that remote notification registration token we might need to ensure that we re-request that remote notification registration from existing users in order to grab that token. We should figure out a way of ensuring that happens only once.', That sounds good. I think we can delay all this work until we are also adding functionality to actually deal with remote notifications. It sounds like we can simply always ask for it and always get the token back. (Assuming iOS does not nag the user if they have previously said No) So I don't think there is any urgency of saving that token right now for 1.0 or 1.1.", Closing this bug because there is no work required at this point.' 
id=1124490	 "I don't think we need separate targets. There already is a Release and Debug *build configuration* in the project. We can modify those. You can see these build configs in action for example here: ", Notice how all these options can be expanded and you can give separate values for the different build configs. If all we need now is a name change to either Fennec or Firefox then we can do that right there.', Nice, guess there's no extra work to be done here.", Opening this again since we need to make a bunch of changes to make the development builds (locally from Xcode) work in combination with the changes made for the Fennec Aurora channel.', *** This bug has been marked as a duplicate of ', ***' 
id=1147098	 'Yes, app icon is perfect. Can you tell me if we can control the size of it? If not, what are the dimensions? (I should have checked this before submitting the spec but I can always update it).', Pretty sure it reuses the application icon. So as long as we have the right assets there, we should be good.', Oh, also: " Users identify your app extension by its icon and its name. An extension\u2019s icon must be the same as the app icon of its containing app. Using the containing app\u2019s icon helps a user be confident that an extension is in fact provided by the app they installed. " From ' 
id=1278814	 'Created ', ', Pull request', Comment on ', ', Pull request Feels a lot less troublesome seeing this warning then the red sync failed banner from before +1.', #merged ', v5.x 292377615c94173c7ec21375107c78993f9ef922' 
id=1224217	 'We use WKWebView (WebKit), ', (Safari, does not support WebM).' 
id=1314368	 "With the exception of desktop bookmarks, other bookmarks and history items that live in the sync ecosystem should be populating the highlights section already. For bidirectional bookmarks, there is a separate, larger project underway to find ways of solving that. Since that is out of scope for this breakdown/user story, I'm going to mark this as RESOLVED as everything else should be syncing." 
id=1236613	 'Created ', ', PR', Comment on ', ', PR LGTM!', Doesn't need uplift. v1.x doesn't contain the logging statement." 
id=1249632	 'Created ', ', Pull request I fixed the first part of this bug (Tapping switch cells in settings should not highlight the cell.) But for the second part (but toggle the switch state) I don't think this is default behaviour in iOS. I've checked the Settings.app / Instagram / Dropbox and none of these change the switch state when the cell is tapped.", Thanks for the patch Farhan! Code looks good. The toggling of the switch isn't a default thing but is something nice to help users who have a difficult time tapping the smaller target of the switch but I'll defer to Robin.", Only the switch should be tappable. It would be nice to have a bigger tap target but 1) it's not iOS standard 2) we'd need to highlight the cell for feedback, which would look odd in contrast with the switching switch.", master 346978b0fbca1048024db671cfe0c237b3172703' 
id=1259253	 'Created ', ', PR definitely not perfect, but did what I could. Whoever gets to it first (like always!), but also would like two eyes on it!', Comment on ', ', PR It's close! see ", The Synced devices icon should center with the favicons, as well as the text labels, they should line up with the cells below. The default favicon letters are showing up fuzzy for me, how are these rendered? On a 6s+, the top and left borders of the favicons appears to be 2px instead of 1. The caret. It appears vertically stretched and is a different asset than used on Bookmarks. It looks close to what's in the mock, but is stretched. ", We need to unify this asset.', Comment on ', ', PR Left feedback on the PR. Good start!', Comment on ', ', PR round 2', Left more feedback on the PR.', Comment on ', ', PR Final round of nits but good to go!' 
id=1127065	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1094949	 'I am assuming this work will be almost a duplicate of the Reader work.', No longer needed: we now have a bug component.' 
id=1190717	 'Fix is in <', >.' 
id=1201592	 ':st3fan, I remember you mentioning you had issues with configuring GCDWebServer to suspend on background because of a changing port issue which is why we configured it to not suspend. Do you recall what those issues were?', Brian also knows more details about this specific one.', This is what i know: * The web server picks a random port * When we leave the socket open, the port number never changes * When we close the socket on going to the background, the port changes The port change is problematic for localhost URLs that are *currently* in the backforwardlist or open in any tab. We cannot update those active pages or backforward lists, so they now point to URLs that do not exist anymore. I think this is the reason we did not close the socket. An alternative is that we use a fixed port. But then there is the danger that the port is already in use by another app.', So I feel pretty confident that we can use a fixed port and not worry about collisions with other apps. GCDWebServer uses BSD sockets under the hood which are essentially file descriptors. File descriptors are sandboxed on iOS to their either their own application or can be create inside an application group's shared container (for example, we can use sockets to communicate between extensions if we wanted) so since there is no way for other applications to access our file descriptors I think we're good. Some interesting related reading regarding IPC/XPC/Sockets on iOS/Mac OSX ", Created ', ', ', Created ', ', ', Comment on ', ', ', So with this option, any requests to localhost will break while we're in the background (but not yet suspended). Theoretically, that means things like session restore or reader mode (which work by loading localhost URLs) could break if the user pushes the Home button at the wrong time. Have you tested this with session store, reader mode, etc. -- anything that might cause a delayed load to a localhost URL?", Ran some tests and it looks like session restore and reader mode work pretty well with the fixed port. I think what allows this to work is when GCDWebServer accepts a request, it starts processing it as a background task in case the application is backgrounded: ', . This allows the app to continue finishing the request while the app is backgrounded.', Comment on ', ', ', OK, sounds like this is worth a try!', Merged' 
id=1151446	 'Created ', ', PR ', Simple fix.', Comment on ', ', PR ', LGTM' 
id=1270723	 'Created ', ', PR #16 @Rex, This patch adds JP translation provided by partner, thanks', Comment on ', ', PR #16 Looks ok to me for it just changes l10n key.', Land to Master: ', The server is updated in the ' 
id=1163027	 
id=1215261	 "Testing my fix for this is complicated by the fact that our bookmark star state isn't updated when we switch tabs! ", .', Created ', ', Pull req. On top of ', , ', .', Stefan reviewed on IRC. bee6d41' 
id=1226922	 'By mistake I checked the Need Info box. Un-checking it.', According to Karen Rudnitski: "* China is currently excluded from today\u2019s app availability because we are allowing the Mozilla China team time to set up the appropriate Firefox Account service in order to comply with local regulations." Simon, you can follow ', to find out the progress that is made in this area.', What "local regulations"? Please be specific. This sounds like censorship. Also all the bugs linked to ', should be non-blocking.', China users have a separate sync server and brand (a fork) to guarantee the network stability and speed. It also has a legal requirements of network service. However, I also look forward to a Chinese version with international service can go online on Apple Store (China), if it is possible. I don't understand the *Also all the bugs linked to ", should be non-blocking*. *** This bug has been marked as a duplicate of ', ***', These are not good reasons to delay the launch in China.', (In reply to Simon Blanchard from ', ) ', Ah, I understand now. This may be China team having regard to legal risks. It is also a requirement of the user interface, the user will most likely get a slow connection, and an error for Firefox accounts (from familiar local to global, a non-existent or forgotten account). In short, localization features adaptation should be completed as soon as possible, since it has not been global launch.', We are releasing 1.4 in the coming weeks which will be in the App Store in China. We are not releasing older versions in the interim.' 
id=1184555	 'We (UX) decided not to do this.', (In reply to Stefan Arentz :st3fan from ', ) ', Any comments as to why not? I tried "View Later" but had no idea that anything happened, or what I should expect to do next.', In short: because Send actions don't show confirmation (or any UI, most of the time) on iOS; try it with some of the others. Share extensions do, Send extensions don't. Also it's essentially impossible for this to fail. If we get external feedback about this we might change our minds, but for the moment we're following platform conventions.", Robin would like to do this. Mocks: ', (Success) ', (Please try again) Not a heavy weight of strings, so perhaps we can get those in now?', Created ', Send-View-Toasts.png Layout for toast placement.', Created ', toastAssets.zip', So turns out this actually isn't possible. Action extensions such as View Later require you to modally present your view if you want to use UI. This is the same animation that happens when you tap SendTo and you see the list of devices animate up from the bottom. There doesn't seem to be a way to customize this. Also, because it's presented modally with what looks like a UINavigationController, we can't just make our view invisible so we don't see the modal and see the content behind it because the app you were looking at goes away after the transition is complete :/", I've pushed up my WIP code for this branch here: ", Demoting from 1.1 and re-nom it for UX consideration' 
id=1251688	 "Here's the skinny on TopSitesPanel and adding support for deleting suggested tiles: 1. The 'removal' code should partially work regardless of what kind of tile it is. The only reason we don't show the x for suggested tiles is because we explicitly hide them for suggested tiles 1 . 2. The challenging part of removing suggested tiles is that in both the deletion logic and data source we factor in the SuggestedSites separately from the normal top sites. For example, when deleting, we add the number of suggested sites to the data source and use that for determining which cell to delete 2 . We also hide this inside the data source 3 . 3. Another issue is that we don't actually store any state for a suggested tile anywhere. They are all statically provided from SuggestedSites.swift 4 . We'll need to add a way of remembering when a user deletes one. Some ideas: * I think the first step to bringing some sanity into TopSitesPanel is to rid the notion of appending SuggestedSites to the data source every time we use it and bring a uniform view of the sites that we display. This way the removal logic can be somewhat agnostic of what kind of site we're deleting. This might look like building a wrapping cursor object that delegates to two child cursors for top sites/suggested sites so from the outside it looks like a single cursor. * Along with the cursor abstraction, we could also delegate the persistence/deletion to this object as well so when we tell the object to delete a tile, the TopSitesPanel doesn't care how we delete it - just that it gets deleted. Behind the scenes we can implement the SQL deletion for TopSites and something else for suggested sites. Overall I think we'll need to build up some abstractions on top of what we have now to make it easier to manage deleting both types of cells while keeping our code clean. 1 ", 2 ', 3 ', 4 ', Created ', ', PR', Comment on ', ', PR Good start - left some comments', Comment on ', ', PR Awesome stuff - looks good. Thanks for revisions!', Re-read this: ', oops forgot/didn't see that, thanks!", v3.x 0cfcf23' 
id=1130516	 'Dupe *** This bug has been marked as a duplicate of ', ***' 
id=1193500	 '1. Open m.canadacomputers.com 2. Observe that tab counter is 0 3. Close the tab 4. Crash', Also happens if you open more tabs. Second tab bumps the count from 0 to 2. On closing the last tab, we crash.', Looks like this was introduced when I added the KVO observer from BrowserScrollController - will fix.', Created ', ', ', I merged this. 0e839ed' 
id=1109666	 'Vivek pinged me and expressed interest in contributing to iOS, so I pointed him here as a good place to start investigating. Vivek, can you look into replacing the "Add to Reading List" option? This will likely involve 1) hiding the existing reading list option, and 2) adding a new reading list option that we can hook into ourselves.', Hi I have done the pull request for this ', . Handle the long press on links and shown a custom action sheet like safari.Please let me know your suggestion/feedback.', Hi codester, Thanks for the contribution. I'll re-assign this bug to you.", Created ', ', Pull request', This is great. I think we have to decide what specific items to put in there since there but I think this is a good start that we can merge in as a first iteration.', Comment on ', ', Pull request Adding brian as a reviewer since he is the mentor for this bug.', Comment on ', ', Pull request Comments in the PR. Overall looks pretty good though. Neat to see the JS->Swift interaction. I think we'll want to formalize a bit there eventually. I looked at Chromium and they have some script loaders that load files, and then just call individual methods from their ObjC code. I think little one line function calls like that would be nice. For now, I'd just at least like to see this code not inline in the Swift. I wrote Fennec's contextmenu code, so I'm a bit biased about how I want that to look eventually, but I'm fine with it not being there now (in fact, I think landing this in incremental pieces like this is good). Also, maybe people have some good ideas on alternatives.", Update the pull request. I have injected the JavaScript.Also returned the element result as JSON. Done handling of links and Images.', Looking good, but I think this needs another iteration or two before this is ready.', Comment on ', ', Pull request Looks great now.' 
id=1205464	 "Notes: 1. Looks like this only occurs on iOS 8 and works fine on iOS 9. 2. Seems that the BVC's frame doesn't get rotated while the tab tray is rotated - even though the BVC is the presenting view controller. Looks like someone filed a radar about it here: ", . That workaround might work but is a bit hacky. I'll follow up and see if there is anything else we're missing or can do.", (In reply to Stephan Leroux :sleroux from ', ) ', Hm, haven't tried on a device yet, but I can reproduce this every time on the iOS 9 simulator.", Shoot - sorry, I meant it DID work on iOS 8 but BREAKS on iOS 9.', Created ', ', ', Workaround for the issue that was described in ', . Essentially we force the BVC's frame to match that of the window so we're in the proper orientation during and after the animation.", Comment on ', ', ', Pretty nasty hack, but I don't have anything better to suggest.", Merged' 
id=1154360	 "Needs some investigation. This works on my test page, but didn't on a site this morning. Maybe an iframe problem?", I haven't seen this again since. I'm closing this as WFM." 
id=1307312	 
id=1243168	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', I think the problem with the original code is that things are not yet correctly setup when `application(application:url:sourceApplication:annotation:)` is being called when the app cold boots. This patch checks `applicationState` to see if it is `.Active` and if it is, it just opens the URL right away. Otherwise it remembers the URL, which will then be opened when `applicationDidBecomeActive` has been called.', I believe this is the crash: Thread 1Queue : com.apple.main-thread (serial) #0\t0x0581ac23 in specialized _fatalErrorMessage(StaticString, StaticString, StaticString, UInt) -> () () #1\t0x0035c5fe in BrowserViewController.applyTheme(String) -> () at /Users/rnewman/moz/git/s2fxios/Client/Frontend/Browser/BrowserViewController.swift:2606 #2\t0x0035ce6d in @objc BrowserViewController.applyTheme(String) -> () () #3\t0x0033270f in BrowserViewController.switchToPrivacyMode(isPrivate : Bool) -> () at /Users/rnewman/moz/git/s2fxios/Client/Frontend/Browser/BrowserViewController.swift:931 #4\t0x00332d98 in BrowserViewController.openURLInNewTab(NSURL?, isPrivate : Bool) -> () at /Users/rnewman/moz/git/s2fxios/Client/Frontend/Browser/BrowserViewController.swift:965 #5\t0x00332bf6 in BrowserViewController.openURLInNewTab(NSURL) -> () at /Users/rnewman/moz/git/s2fxios/Client/Frontend/Browser/BrowserViewController.swift:951 #6\t0x0021b61d in AppDelegate.application(UIApplication, openURL : NSURL, sourceApplication : String?, annotation : AnyObject) -> Bool at /Users/rnewman/moz/git/s2fxios/Client/Application/AppDelegate.swift:220 #7\t0x0021a893 in AppDelegate.application(UIApplication, didFinishLaunchingWithOptions : NSObject : AnyObject ?) -> Bool at /Users/rnewman/moz/git/s2fxios/Client/Application/AppDelegate.swift:201 You can approximately repro by adding: self.application(application, openURL: "firefox:?url=', ".asURL!, sourceApplication: "org.mozilla.firefox", annotation: "foo") just before the return at the end of didFinishLaunching. In short: we\'re being called before display, which means we can\'t touch the URL bar yet.', BVC is 100% confident that it has the URL bar view, but that's not the case. We can either fix BVC to allow operations like this to occur before it's been attached to a view, or we can hack around it by only performing those operations afterwards. The former seems more strictly correct, but there's a whole chain of horror here. Fix the optional header and URL bar, and you end up with a new webView and no container view to attach it to. So let's do the hack approach in the PR, perhaps tidied up to use a simple array of thunks that we churn through in BVC after it's done getting dressed.", *** ', has been marked as a duplicate of this bug. ***' 
id=1122182	 'I did this.' 
id=1254576	 
id=1134496	 'Created ', ', Pull request' 
id=1146391	 
id=1158539	 'Steps * Open 10 about:home tabs * Swipe one off * See missing tabs and uncollapsed stack', *** ', has been marked as a duplicate of this bug. ***', ping?', Created ', ', Link to Github pull-request: ' 
id=1277581	 'If a home page is set, then we should allow the user chose to use it as the new tab page. This should default to true for Chinese users. ', should not have an attachment.', Created ', ', Link to Github pull-request: ', Created ', Accessing the new tab choice screen', Created ', Selecting the homepage to open', Created ', If a homepage is not set, default back to Top Sites. Currently the default behaviour is to go to top sites.', Question on Functionality. We have 3 options, "Show a blank page", "Show your Top Sites" and "Show your Homepage". But top sites are part of a suite of home panels, so either 1. we should re-word "Show your Top Sites" to "Show your Home Panels" OR 2. expand the list to include all home panels i.e. "Show your Top Sites", "Show your Bookmarks", "Show your History", "Show your Reading List"', Happy to add these. :tecgirl is my guidestar when it comes to such choices. (I don't think any of this has had any UX input yet).", I would omit "Show your Top Sites". Adding options to open a panel when opening a new tab seems to be overkill, and since no one seems to be a fan of the current version of Top Sites, then let\'s not make it front and center. Opening Bookmarks or History when opening a new tab is also odd. Limit the options to: Show blank page Show Homepage and make the default to show a blank page. If a user really wants to use a panel as a new tab, perhaps we can add the Homepage option to the panel menu and let them set one as a Homepage. Simplify!', Comment on ', ', Link to Github pull-request: ', see ', So\u2026 ', Currently: you open a new tab and home panels show. When you tap on the URL bar, then the home panels show. Showing blank page; it be reasonable to expect that the first thing the user will do would be to tap on the URL bar to enter a new URL. Which means you get the homepanels. Unless we disable this behaviour, there is very little difference between "blank page" and "home panel". If we do disable this behaviour, and make it the default, we are definitely relegating home panels. I\'m not averse to this\xa0\u2013\xa0the homepanels are available from the menu, but I can see that this would freak out a small percentage of our user base. What I am concerned about with this plan, however, is the empty state on first run problem, which is where (IMO) Top Sites is comes into its own. (this is first tab open after the intro). If we special case first run, and disable homepanels on URL focus, will the user ever get back to the homepanels? ', We no longer allow about:home, about:bookmarks etc as user addressable URLs. :( I've filed ", , but I think this is quite a large piece of work before the end of this release. The upshot of all this is a set of options, from easiest-from-here order: * "Show about:home" (i.e. string change only) * "Show your Top Sites" "Show your Bookmarks", "Show a blank page" etc (an extra option, no biggie) * "Show about:home" but not "Show a blank page". * No "Show your about:home", default to a blank page, but ensure Top Sites/Home Panels are shown on the first empty tab shown. * Fix up the about: links, and go with "Show your homepage", and let homepage be set to an about: link. My preference would be the first or the last, though I realise that having a blank page was an extra last minute feature slipping into this extra last minute feature.', Following f2f with tecgirl: going to go with "expand the list to include all home panels i.e. "Show your Top Sites", "Show your Bookmarks", "Show your History", "Show your Reading List"" We would like to fix ', so as to rationalize these options down to just Homepage and Blank page. We were not sure about the merged home panels, but we should definitely keep a track of that.', Comment on ', ', Link to Github pull-request: ', LGTM', Merged in to master.', v5.x dfbedd2' 
id=1292236	 'Created ', ', Pull request', Comment on ', ', Pull request Nice catch!', v5.x b0ae040' 
id=1223100	 'To which address?', Which one would you like? Do we have an email we can capture these logs with?', Created ', ', ', Comment on ', ', ', Lots of new code in this, but I think the risk should be pretty low since it will (hopefully) only be triggered when this debug option is enabled. I wonder if we can add tests for all of these new debug features?', The best I can think of for testing the debug feature is to have a basic unit test that create an app delegate, sets the flag to true, and sees if profile/BVC get loaded or not. The other ones are also difficult to test since they are all tied to app startup.', Comment on ', ', ', LGTM', Landed 12bf9a1488c966c48dee98c0d6c967f3e3bd5557' 
id=1168626	 'Created ', ', PR: ', Comment on ', ', PR: ', Great. I merged this one.' 
id=1233521	 "I'll make notes on how to do this.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', It appears I actually looked at this several days ago but forgot to do the clicky clicky.', Gave it a quick test and looks good to me. Landing.', master 778845d860a1b989616ea5bf9a6357d8d388aa8a' 
id=1247820	 'Fixed in 2.0. *** This bug has been marked as a duplicate of ', ***' 
id=1200554	 'Created ', ', ', Comment on ', ', ', Don't think we need the decoding change in ClientTests, but looks good otherwise." 
id=1138501	 'Can you try this in a few other apps? I notices Safari and for example Reeder.app do the same. Maybe this is intended behaviour by the OS.', Yo re right. Never really noticed, I often have orientation lock on." 
id=1188560	 'I worry about doing this without ', . i.e. it'll be confusing that a few of the bookmarks aren't deletable. Is this really a 1.0 thing? I think if we do it this way, we should (I will?) just add these bookmarks as default when the bookmarks db is created. We already create a bunch of folders then, so it shouldn't be too terrible. If you delete them, we'll just show nothing. I guess that's what you want in that case?", Created ', ', Link to Github pull-request: ', Had to move the suggested site code to Storage.', I didn't add these to the upgrade path. If you already have a bookmarks db, you won't get the new defaults added. Actually, going to look at an upgrade path real quick too... and a test.", We don't want to allow deletion after all (see resolution of ", ). We also still want to make sure these don't sync, so the simplest solution is to just tack the defaults onto the end of the list, rather than do some (potentially risky) DB work. If it's confusing for some users, then we can work on visually distinguishing them. Stealing this to wrap it up.", Created ', ', Pull req. I reviewed all of Wes's stuff, so just the commit on the end needs attention. Skim the rest by all means. Robin, lemme know if you want the defaults to be made visually distinct.", Comment on ', ', Pull req. Switching to Steph.', Comment on ', ', Pull req. LGTM - just fix up the editing delegate method where I commented.', Done, with editing delegate change and moving UIColor helper into an extension init method. ' 
id=1148433	 "This should probably be per tab based. On Android we use urls like about:home#reader to track the page yo re on (for this tab).", (In reply to Wesley Johnston (:wesj) from ', ) ', We use about:home?panel=whatever on Android, although we use UUIDs for the built-in panel types: ', Looking through the code, I don't really see where we use this in the product... this might just be something that add-ons use: ", Aha: ', Created ', ', Pull Request', Comment on ', ', Pull Request Using URL fragments is an issue right now due to ', , so this is a reasonable approach in the meantime. Added some comments in the PR.', Comment on ', ', Pull Request Looks good to me with minor cleanup mentioned in the PR.' 
id=1162268	 'Created ', ios-rotation-1.mov', Created ', ios-rotation-2.mov', Created ', ios-rotation-3.mov', *** This bug has been marked as a duplicate of ', ***', *** This bug has been marked as a duplicate of ', ***' 
id=1298665	 'The Aquarium WebGL game at ', appears to run OK on IOS 5.1 (3) beta however.', Environment: iPhone 6S plus, running IOS 9.3.5', Tested on iPhone 6 Plus on Nightly and 5.2b2. As mentioned in the description, only a few games have proper functionality. The behavior of these WegGL games in Firefox for iOS is similar to Safari. Also please note that the crash was not reproduced when playing Drawing Melody.', Since we're similar to Safari and we don't have any control over handling WebGL marking as WONTFIX." 
id=1170907	 'Created ', ', PR ', This doesn't reproduce the crash listed in ", , but I can't reproduce that crash using the STR there. Digging more. In the mean time, this is a test, which is apparently more than we had before.", See also ', if you wish to borrow and finish it', Comment on ', ', PR ', LGTM' 
id=1183353	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Works great for me' 
id=1100758	 'Created ', ', Pull request', I'm not against having this but I think we need to try to avoid using special Locking as much as possible. In general you are either on the Main thread or on the UI thread. Operations should generally happen on the main thread. Or if they can take a while on one of the predefined queues that the system gives us. The main thread executes blocks serially, so if we are consistent and schedule work there, then there should mostly be no need for locking resources.", Comment on ', ', Pull request Yeah, Wes and I have been talking about threading in Swift over the past couple days, and I think we agree that we should be breaking up critical sections into tasks that are handed off to GCD. I think we'll be dropping this and updating bug 8524345 to use GCD, so removing review.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Oops, I copied the attachment # instead of the bug #. I meant ', .', I talked to brian about this again today for a bit. I like having a locking API TBH, but I'd like to sit down at the work week and look at other better solutions." 
id=1262113	 'Created ', ', Pull request', Comment on ', ', Pull request comments left on the PR' 
id=1250467	 'Karen, the next time you see this, can you try rotating your device and/or quitting the app and reopening? Determining whether the wrong favicon "sticks" will help figure out whether this is a home panel issue or favicons issue.', I 'killed' the application. Re-launched it (restored tabs). Same result (ie what you see in the screenshot). Rotating has no effect. Still the same (not correct) result :/", Note - I had updated to the latest TF build, um, a minute after receiving the email notification for it. I had used it then several times over. But then suddenly, last night whilst I was using the client (again not the first time after the update), the 'facebook.com' thumbnail went blank/watermark, and replaced with a (pixelated) facebook thumbnail. How did that 'magically' happen? Could sync have anything bizarrely to do with it?", Haven't heard any more reports of this, and there's been a lot of work around favicons and top sites since this was filed, so closing this out. Please reopen if this is still an issue." 
id=1130095	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1191929	 'Created ', Client 2015-08-06, 2-05 PM.crash', Created ', Client 2015-08-06, 2-05 PM.crash re-symbolicated', Dupe of ', , except we tracking-minused that one...', Worthy of investigating if this kind of contributing to the #29 startup crashes (it was for me)', bkmunar and I can repro this crash, but there's no startup crash after. Might have just been an unlucky coincidence that you hit a startup crash with this -- would you mind trying again to verify?", Looks to the be case', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request', Reason was the recycling of cell for suggested cell in which we were not remove remove button. Due to this button this cell can be removed and Crash was happening because number of cell after the deletion was not matching with number of cell which should collectionView(collectionView: UICollectionView, numberOfItemsInSection section: Int) was returning. Fix is quite simple and created a pull request for the same.', Comment on ', ', Pull request Looks good. Thanks for the fix!' 
id=1271380	 'Created ', ', Link to Github pull-request: ', When creating the core ping, we immediately reset the search data that we're reporting. That means if we create the ping but the ping isn't successful, we'll drop the data. That's why the network connectivity check was added to the PR: it increases the likelihood that the ping will succeed. Unless we want to take the time to implement a telemetry fault-handling layer that stores and resends unique pings, I think this is the best we can do. The other option would be to reset the count only after receiving an HTTP 200, where we'd instead be sending potentially duplicate pings instead of dropping them. I agree with mcomella's comment 1 that missing data is better than bad data. 1 ", Comment on ', ', Link to Github pull-request: ', Seems reasonable to me with my comments taken into account.', Comment on ', ', Link to Github pull-request: ', Looks good. I like the two new classes to organize this functionality.' 
id=1152340	 'Closing this because we are doing exactly what I suggested above: "The easy fix is to simply import en-US/firefox-ios.xliff as part of the l10n import process." Also note that recent Xcode exports with both target-language and source-language set to \'en\'.' 
id=1164296	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Created ', ', PR ', Comment on ', ', PR ', Nice.', Merged.' 
id=1173627	 'Created ', ', Pull req.', This PR does two things: * We checkpoint immediately after futzing with tables. This gets the result out of the WAL and into the main DB structure, which can only be a good thing, and will help to keep the WAL small. * We finalize statements as soon as we're done with them, rather than waiting for the deinitializer to run. Shorter lifespans are nice.", As a follow-up we should consider checkpointing manually when it's convenient. We'll probably do so after each sync.", I haven't used WAL journaling before but it looks interesting. From what I read, instead of performing transactions to the DB directly and have a fallback, commits are written to the WAL file and then when a checkpoint is reached or invoked, the WAL is written to the DB. Is that correct? I won't hijack this bug for this discussion but I'd be interested in learning more about this.", Pretty much. Writers write to the WAL, not directly to the DB file; this buys some concurrency and some more resilience. After some amount of writing, the WAL is checkpointed, which involves replaying some or all of it directly into the DB. It's hard to describe it better than sqlite's docs do: ", Main concerns with the WAL are the cost of futzing with a large one next time you open the DB, and the size it can occupy on disk -- without taking some care, it can temporarily bloat, and it won't be resized down." 
id=1203692	 'On a production build we are logging full details of your Sync secrets: Oct 4 20:56:43 Stefans-iPhone-6 Client 437 <Warning>: onLogin: {"customizeSync":false,"sessionToken":"xxx","keyFetchToken":"xxx","verified":true,"unwrapBKey":"xxx","email":"', ","uid":"xxx","verifiedCanLinkAccount":true}', Created ', ', PR: ', Remove verbose logging from FxAContentViewController', Comment on ', ', PR: ', Wouldn't say no to a quick 1.0.2.", Merged ', Leaving this bug open in case we find more logging issues.', I'll finish this.", Here\'s what I\'ve found that we\'re logging that is questionable: Recording of URLs in log files on disk for every non-private tab visit: Profile#L221 - log.debug("Recording visit for \\(url) with type \\(v).") Recording of URLs in log files on disk when removing/adding bookmarks: SQLiteBookmarks#L283 - log.debug("Removing bookmark \\(url).") Logging of synced tab urls to disk: TabSynchronizer#L84 log.debug("\\(remotes)") Creating tabs from tab records: TabSynchronizer#L41 log.debug("Sending tabs JSON \\(tabsJSON.toString(true))") Logging DB secret: 2015-10-14 11:50:12.660 Debug BrowserDB.swift:47 init(filename:secretKey:files:) > Creating db: /private/var/mobile/Containers/Shared/AppGroup/3EBD981A-58BA-4A0A-959B-F0B0FFFEC8FC/profile.profile/logins.db with secret = Optional("njF81qBBMRi4oCKHHD/lANF2UH2cr1mynvpu6KcwKiJxSuBbe0Kbag+GO1MD3Y1QQJqsGAMYUEAa9YWBfpFU6CFlehHBP20rYnMYXdzxpV7IQvnqQ3dvThhOMqegCDpQsVpRKEJmUl/crsguP4QhxAtqosnpu8za6xlSgcd4io0nR8x8x8MAzD47q4My6h1KJ1ObcIGQ4/llGLu5kSHg0FlM8HvIHc9fdE8vavcO9uOixRJ940Lzg0IgPRevUcUJrPHd10OFzxD6j7mag90ffj3c5ePql68g2Zc7sxrE6+HsX8mhSM5u/b+gpLo37dp2Q2HNNAP67bclJc+PVULnJw==")', I have a couple of commits coming for those.', (In reply to Stephan Leroux :sleroux from ', ) ', Note that we only do that for developer builds, precisely so we can debug by poking the DB.', Commits are at the end of ', .', 4155dea', 2015-10-14 15:38:29.987 Debug SQLiteLogins.swift:217 getLoginsForProtectionSpace > Looking for login: ', Created ', ', Another PR Stealing this back for a final pass.', 2dfaff7' 
id=1241113	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good. So when you are in private mode and then open the last bookmark from the quick action menu, we open it in normal mode. I think this is fine and what people expect. There is an issue with the tab count not being updated correctly, but I think we have a separate bug for that?', This is the tab count bug ', (In reply to Stefan Arentz :st3fan from ', ) ', Yup, that's the one next on my list." 
id=1252894	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1320180	 "KIFTests (UITest) are extremely finicky on newer version of XCode, and unlike XCUITest, they are difficult to reset the Firefox so the test failure won't affect subsequent tests. I think we should convert KIFTests to XCUITests if we want to include them in the Nightly run. Enabling XCUITest for now.", Created ', ', PR Link', Merged: ' 
id=1132015	 'Fixed as part of the patch in 1132014 so marking as duplicate of that bug. *** This bug has been marked as a duplicate of ', ***' 
id=1112657	 'Created ', ', Pull request Imports the existing set of en-US search engines, parses them, and displays them in a new SearchViewController. Still to do (in followups): Support for other localizations Search suggestions Setting a default search engine Better log handling (these printlns are getting old)', Comment on ', ', Pull request Added a few small comments to the PR. Other than that, LGTM.' 
id=1145433	 'Still present in build 6', We should mimic android.', Let's make sure the active tab is not cropped, but is fully visible", Created ', ', PR ', Since we were only calling layoutSubviews on the collectionView, the frame of which we used to scroll in did not account for the height of the navigation bar which caused the last tab to be cropped at the bottom when minimizing the tab. Now, all tabs should be centered vertically if there are enough tabs above and below and the last tab will not be cropped at the bottom.', Created ', ', PR ', Updated PR (looks like you accidentally linked to #561).', Comment on ', ', PR ', LGTM', Thanks! Merged.' 
id=1157241	 "A bit too agressive. But lets leave it this way. Because we do not know what this string actually should be yet. I'm starting that discussion in a different bug. Will link here.", This is blocked on ', where we need to agree on the terminology first.', Quick update: this is going to be called 'Send Tab' - I am working on getting this properly exported.", This string is now showing up in the l10n repository.', (In reply to Stefan Arentz :st3fan from ', ) ', But it doesn't show up localized in UI (build 22)" 
id=1207203	 'Created ', ', Pull req.', 9a5eecc', Comment on ', ', Pull req. This we landed, and have both contributed to :)' 
id=1167521	 'Created ', ', Pull request', Merged' 
id=1289810	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1221588	 'This is something like public func getAllLogins() -> Deferred<Maybe<Cursor<LoginData>>> { let projection = SQLiteLogins.MainWithLastUsedColumns let sql = "SELECT \\(projection) FROM " + "\\(TableLoginsLocal) WHERE is_deleted = 0 " + "UNION ALL " + "SELECT \\(projection) FROM " + "\\(TableLoginsMirror) WHERE is_overridden = 0 " + "ORDER BY \\(orderBy)" return db.runQuery(sql, args: args, factory: SQLiteLogins.LoginDataFactory) } This can obviously be simplified to project and populate only the columns we need -- no point returning a LoginData when we just want username + host.', Might make sense to retrieve the full data object since we'll probably be passing it through to the detail controller in memory and make more detailed changes there. That way we can just send back the memory object back to the DB for updates.", Ultimately this probably comes down to perf -- if it's not too expensive to snarf the entire database into memory, then querying for everything up-front would certainly make things simpler. Note that it's possible for a sync to happen between preparing the list and generating the detail view. Fetching just the displayed item would reduce the race window, but of course not eliminate it.", Ideally the list view would be notified of when changes are made to the logins table so we can invalidate. I know I've mentioned it before but does it make sense to have some observer here to tell us when the data in that table changes so we can invalidate? I'm not sure what the best way of doing that would be from sqlite though. I guess we would have to latch on to the insert/update transactions we make and notify using the changeset?", There are, what, five or six different Cocoa ways of doing this? :D Yeah, we can observe if we want to. I suggest filing a follow-up.', Created ', ', Link to Github pull-request: ', N.B., the bug description mentions filtering, but the code doesn't. FWIW, on desktop we filter on any string -- username, hostname, and password.", My bad - yes, this patch should include filtering. You mention on desktop on any string - do you just mean by username, hostname, and password?', So I'm thinking of changing the API to be the following: public func getAllLoginsByField(field: SearchableLoginField, alphabetically: Bool, searchTerm: String?) To allow us to search by Hostname, Username, and Passwords. Do you think it makes sense to use something like FTS for this?", Nevermind - I'm going to start with basic LIKE query, write some perf unit test for it and see how that goes for now.", (In reply to Stephan Leroux :sleroux from ', ) ', Yup. The key is that you can search for a password (e.g., to change dupes after a leak) or a username (e.g., to find sites you might need to change your work email to personal), not just host. I think we should search all fields at the same time, like desktop: hostname LIKE \'...\' OR username LIKE \'..." OR password LIKE \'...\'', Comment on ', ', Link to Github pull-request: ', I've replaced the commit in the PR to a new one with the new search API and address the nits yo ve mentioned: ", Comment on ', ', Link to Github pull-request: ', I think we only need one input string (only one text box\u2026). Also `contains` and SQL escaping.', I've updated the PR with: * Better search API that takes a single term * No more SQL injection - uses the args parameter to properly bind the query arguments * Fixed tests to reflect new search API * Added perf tests for single/all search queries Note: On my machine, looks like the search query to find all matching results for 1000 entries is ~200ms. Might be worth optimizing later with FTS.", Landed a3ca2369537d0ad8e2babc40e6042f91897c38e6' 
id=1255816	 'Jakob, what feedback are you hoping for from me?', Just following guide lines on ', as there's no way to sign off the translation on ", Thanks Jakob! I have just a couple of questions for you: 1) Have you had a chance to test the localization? I know the Danish team has held back on shipping due to lack of iOS devices. We now have the ability to create localized screenshots of the app for l10n testing without a device. They can be found here for Danish: ', 2) Are you wanting to ship in 3.0?', Comment on ', firefox-ios.xliff Jeff offered to guide here, forwarding the flag to him.', 1) The localization is not tested on an actual device (since my phone is to old), but I have checked all the screenshots and everything looks fine. 2) Yes Thanks to the both of you!', Comment on ', firefox-ios.xliff Great! I\'m bringing an iOS device to Stockholm, so you\'ll have a chance to test on a device there. In the meantime, reviewing everything within the screenshots is the best way to go about it. XLIFF file looks good. We just need to add this to shipping-locale.txt. Congratulations! Now that da will be shipping with each release, it\'s important to note that we will not be performing "sign-offs" with this product. Instead, on the last day of the cycle, we\'ll simply take the last commit by default (unless the dashboard throws up red flags). That should help reduce the overhead for all of us :-) ', Stay tuned to dev-l10n for more announcements about the next Fx for iOS cycle. Thank you!', Reopening, I'll use this bug to track the addition.", Created ', ', Add Danish to v3.x branch', Merged ', Thanks.' 
id=1178129	 'how would you like this to be done rnewman? (in terms of just capping the url at a specific character count, etc.)', Created ', Pull request', Some widgets will do this automatically. If this alert doesn\'t, then at least break this functionality out into an extension on String. And use "\u2026" not "...". Over to someone who\'s not on PTO for the next step, though!', Comment on ', Pull request Thanks for the patch! See comments earlier in the bug.', Created ', ', Link to Github pull-request: ', UIAlertController doesn\'t truncate the title out of the box, so I wrote a String extension for that. I tried "\u2026" instead of "..." first, but for some reason, a line break was appended after the "\u2026" which didn\'t look nice (*In the UI*, not as a \ or \\r character in the string)', Comment on ', ', Link to Github pull-request: ', Looking much better. Let's get some tests and fix those off-by-one errors :)", Fixed those errors and added tests. I also left screenshots w/ 3 dots vs ellipsis on Github.', If I had to guess, I'd say you want ", to tell UIKit not to break there. That is, the string should be: "\\u{2060}\u2026\\u{2060}" Give that a shot?', (In reply to Richard Newman :rnewman from ', ) ', Yes that's exactly what I want. Worked like a charm. I pushed the changes on Github.", Comment on ', ', Link to Github pull-request: ', Merged ', .' 
id=1169857	 '*** ', has been marked as a duplicate of this bug. ***', The fix here will likely fix ', , too. Alternate (easier) STR: 1) Scroll down the page to make the URL bar disappear 2) Long press a link, choose Open In New Tab 3) See the new tab animation float in the top right corner', So I see there's two approaches we can take to fix this issue: 1. Whenever the user selects 'Open New Tab', we animating in the toolbars so the user can see the tab flip animation update to the new number of tabs as feedback. Downside of this is that having the toolbars dropdown might be a bit too jarring of an experience. 2. Hide the tab flip animation from occurring when the URLBarView is collapsed. In this case, there is no visual feedback indicating that a new tab was actually created. Darrin, any thoughts? I pushed up a branch with the show toolbars approach so you can compare. ", Feedback on IRC \u2013 tl;dr I like showing the toolbars on new tab, just need to delay the tab flip animation slightly so it starts once the bar is visible.', Created ', ', PR ', Added a fix for both the 'Open New Tab' animation issue and the Cancel button overlapping the cloned button issue.", Comment on ', ', PR ', I found ', when testing this, but looks like this is unrelated. Seems fine to me!', Merged.' 
id=1182184	 'Created ', ', PR', Comment on ', ', PR Just one more small change and then go for it' 
id=1249390	 'Fixes in parent bug. *** This bug has been marked as a duplicate of ', ***' 
id=1094476	 'Created ', ', Pull request It was really tricky getting autolayout to play nicely with UIScrollView, but I eventually got it working. The trick was to create a dummy view as the last child in the ScrollView whose bottom/edges are constrained to the ScrollView; this allows the ScrollView to correctly determine its content size. I was originally going to make this an extension instead of a subclass, but extensions can't hold state or have deinitializers (both needed here).", This is an interesting solution but I think doing it with a `UIScrollView` subclass is too complicated. How about this instead: (I think this will simplify the code a lot) * Create a plain container `UIView` and put the login items in there * Add the container to the viewcontroller * Start listening for keyboardWillShow and keyboardWillHide notifications * When you receive a show or hide notification, resize the containerview: decrease/increase its height with the height of the keyboard. (the notification's `userInfo` contains the keyboard height and also animation settings - if you animate the containerView height change with the same settings you get a nice synchronous resize of the login dialog while the keyboard goes up) * In the container view you can use just constraints to make sure the dialog items are properly positioned. If they all fit in the top part when the keyboard is showing then there should be no dynamic changes needed. Otherwise you can also show/hide or reposition items in the notification handlers. If you want to use autolayout for the container view, then you can add constraints to it to snap to the viewcontroller's view as usual. For the constraint at the bottom, keep a reference to the `NSLayoutConstraint` instance that you created and then instead of changing the container's view `frame`, just change the constraint's `constant` property. (Which should be padding between the bottom of the viewcontrollers view and the container view. Changes to constraints are animated if done within an animation block.", Brian do we still need this patch? Or was this made obsolete by other login screen changes?', We'll probably want something like this eventually for all cases where the keyboard obscures the view, but I'll close the existing PR and repurpose this bug into something more generic." 
id=1190097	 'Created ', ', Pull req.', Comment on ', ', Pull req. Seems fine to me', Comment on ', ', Pull req. Any reason to not include this in all configurations?', Yeah: so that we can still test the sign up flow during development and QA. We only want to keep out the unwary.', 632df85' 
id=1140022	 'The CI server runs the following script: export PATH=/usr/local/bin:$PATH cd firefox-ios carthage checkout --no-use-binaries svn co --non-interactive --trust-server-cert ', ../firefox-ios-l10n scripts/xliff-cleanup.py ../firefox-ios-l10n/*/*.xliff scripts/xliff-to-strings.py ../firefox-ios-l10n . scripts/strings-import.py' 
id=1201350	 'Created ', ', Link to Github pull-request: ' 
id=1270461	 'This should be fixed in v4.0 *** This bug has been marked as a duplicate of ', ***' 
id=1162936	 'Created ', ', PR', Comment on ', ', PR Wonderful. Looks good.', This is fixed in build 15.' 
id=1226813	 'Richard where do we want to schedule this? Before 2.0?', Until we do this: a user who experiences DB corruption will likely never get their data back. They\'ll need to sign out of Sync then back in, but instead they\'ll probably uninstall the app in disgust. If we reliably fix DB corruption, this can wait for a month or so. If we don\'t have great leads (and I\'ll know more about that when I read TheLinks logs tomorrow), then this becomes more urgent. I would certainly take this in 1.3 (if someone is feeling sprightly) or 1.4. It\'s not difficult: when we replace browser.db, do: if !self.hasAccount { return } let deferred = walk( "bookmarks", "history", "tabs" , self.profile.syncManager.locallyResetCollection) when we replace logins.db: if !self.hasAccount { return } let deferred = self.profile.syncManager.locallyResetCollection("passwords")', Created ', ', Link to Github pull-request: ', Tests on the PR. Manually tested. This is the last thing I want to get into 1.3.', Comment on ', ', Link to Github pull-request: ', Looks good to me', master: f7e8e11', v1.x: fa72549', Richard, I\'ve noticed that "database downgrade causes Sync to partially fail". I can create a new bug if it is not related. But, here\'s what happens: 1. On one git branch (let\'s say upgraded_db_branch), I\'m testing a new database version upgrade with changes for one table. I\'m also logged into Sync. 2. On another branch (current_db_branch), I\'m still using the current database version for an unrelated bug. 3. When I switch from upgraded_db_branch to current_db_branch, and build and run, I notice that I have only a very small subset of synced topsites and highlights (I assume only the updates since the most recent sync appear). The bookmarks are empty. Even the history is a small subset. However, the sync status shows that the sync happened after the branch switch, build and run. On a subsequent auto sync, the highlights list grows, but the bookmarks are still empty. It doesn\'t help matters if I attempt to manually sync. As per this, ', , I assume that the browser database downgrade is not an issue. But, the sync is probably not being told of the downgrade?', It\'s impossible for a downgrade to occur in the wild -- not only do we not ship a release that uses an earlier DB version, but users can\'t even manually install an APK as they can on Android. As you\'ve noticed, there\'s code in the tree that throws away and recreates a table on downgrade, and that will certainly screw up Sync! The table mechanism that does so is pretty dumb: it acts at the table level. (And if we upgrade the "schema schema" for table tracking, it\'s totally screwed!) Obviously that\'s wrong if there are interdependencies. It would probably be incorrect to try to add a Sync-related fix at that point: if we really do want to handle downgrades, we should do so by throwing away the entire DB, or the developer should implement a downgrade if they feel very motivated. I would be pretty leery of adding code to the tree that could apply *incorrectly* and catastrophically, when that code should never be necessary in the wild.' 
id=1172072	 "I would like to make this an toggle-option in Settings, in case the user should want to include their desktop history. We're syncing it, after all. Are your comments from ", still valid for the iOS sync instance, Richard?', On iOS I implemented what I'd like us to do on Android: we have separate recorded visits for local and remote. We can't distinguish between different remote devices, but we do know which visits you made on your iPhone. So this bug is immediately actionable, while that Android bug is not. A setting would be straightforward, and would just tweak which SQL we run; just local, both (what we do now), or a biased weighting between the two (even a slider if you hate our users).", 2.0 or 1.1 for the setting. Initial stab is ', .' 
id=1251507	 'Test Matrix: ', Test Page: ', Created ', ', Link to Github pull-request: ', This patch gives us parity with Safari with regards to custom scheme and url handling. The patch special cases three types of destinations in the following order: * `tel:`, `facetime:`, `facetime-audio:` - These all trigger a prompt that displays the phone or account number with the option to *Cancel* or to *Call*. Exactly like Safari. * `', `, `', ` - These are recognized as URLs that should be opened with `openURL()` so that the native *Maps* and *App Store* apps are triggered. * `http:`, `https:` - These are opened in *Firefox* After that, the default is to open the URL with `UIApplication.openURL()` *without* making a call to `canOpenURL()`. This gives us the following behaviour: * Third-party schemes like `twitter` trigger an iOS provided prompt that says 'Firefox wants to open Twitter` with the option to *Cancel* or *Open*. * There seems to be a special case built-in `WKWebView` that automatically handles `", ` correctly where it either opens in Firefox or in the native *Google Maps* app if it is installed. * It correctly handles `mailto:` and `sms:` links, which are opened without prompting in *Mail.app* and *Messages.app* * It correctly handles internal iOS schemes like `itms-books:` or `videos:` without prompting. This patch gives us 99% parity with Safari. The only thing that does not work as in Safari are `', ` links. iOS has traditionally handled those in a special way, opening the native app if present. If we want that same behaviour then we need to add the `youtube:` scheme to our `Info.plist` so that we have the capability to detect if the YouTube app is installed. I think we should wait with this until we have some user feedback. Test matrix at ', *** ', has been marked as a duplicate of this bug. ***', The test matrix shows what works in Safari, Chrome and Firefox 2.1 and also how things work after this patch is applied. (Firefox Next column)', I have duped ', to this one because this patch makes the 'Open in App' links on ", work. Tapping them switches to the native Twitter app, displaying the same profile or status as you had open in Firefox.', Comment on ', ', Link to Github pull-request: ', Looks great. Nice job on all the testing!', Will file followup for maps.apple.com based on user feedback.', Comment on ', ', Link to Github pull-request: ', This patch works even better than I was expecting!', This PR removes 2 strings: "This will open in another application" "Opening %@" Are they used in v3.0? If we remove them and export v4.0, we won\'t them available for v3 dot releases.', Strings have been put back on master and v4.x' 
id=1109652	 'Fixed with ', Sounds like we should consider building (or pulling in some code) to do nsIURIFixup type things' 
id=1153905	 "Haven't seen this recently." 
id=1166015	 'Iphone 5S 55.9GB version 8.3 and here is a unlisted youtube link to the recording .... ', I finally was able to delete the tab with the imdb link ..... but can't reproduce it now ....", Not able to reproduce this, iPhone 5 (8.3), latest code. I can load that IMDB URL without any crash.' 
id=1229460	 'Created ', misc To be honest that is a fantastic favicon for Bugzilla. Can we keep it?', This is reproducible. * Sync. Visit top-sites, everything looks OK. * Close browser and re-open and see the reflow. Badness happens Opening a new tab does not do a reflow. Enter edit mode; hit done, reflow happens and everything is fixed.', *** ', has been marked as a duplicate of this bug. ***', Setting as 1.3 since this is pretty bad since it's the first visual thing the user sees in the app...", Created ', ', Link to Github pull-request: ', As a side note, this logic really shouldn't live in the data source. The whole Top Sites stuff needs a refactor at some point because it's starting to get pretty intertwined.", *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Link to Github pull-request: ', Thanks for the explanation. Looks good to me!', Merged Master 7130194e1559b42634a7401de332699aa2112d81', Created ', IMG_0017.PNG Reproduced the issue with inverted and blurred favicons on version 1.3 build 1303 using iPad Air 2(IOS 9.1). Favicons are correctly displayed on version 1.3 build 1308, but some of them are still blurred.', We decided this needs uplift, can you handle this case?', Looks like this was already uplifted last week. v1.x: ad9d7f3a09da68c990f0dba026dd3e97acc0c9a4' 
id=1242817	 '(and Twitter). We should at least show Bing suggestions.', Created ', ', Pull request', Twitter does not provide search suggestion APIs. We don't provide don't attempt it in desktop or Android.", Comment on ', ', Pull request Works well for me. I tried Amazon and French (Canadian) for Bing and worked as expected on the simulator.', Merged!' 
id=1121079	 'Created ', ', Pull Request' 
id=1134282	 "Probably easier to just WONTFIX this for now so we aren't carrying around unused code." 
id=1196241	 "Can't remember if we can get this into 1.1 (preferred) or for 2.0 (acceptable)", is tracking 1.x. I'll file and track for removing exclude_signup and amending any server-side work.", Done.' 
id=1146376	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1277519	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1209931	 'We may choose to display things different on iOS in comparison to Android on suggestion opt-out. This would need UX input. I believe this a dupe of ', *** This bug has been marked as a duplicate of ', ***' 
id=1168504	 'Need to find the card!', We should have up to 10 mins of background execution time when the user leaves the app to run a long-running background task to perform the sync: ', Shouldn't take longer than 10 mins. Need to double check to see what we're allowed to do during that time.", Is this as simple as calling syncEverything() in the AppDelegate, then putting the existing shutdown in an upon block? ', Almost. Two big things to think about: the green light and DB closure. Syncs can take an unbounded amount of time. For that reason the caller provides a 'green light' function. The one we use now limits any sync to one minute and foreground-only: if we've exceeded the time limit or entered the background when the sync operation checks in, it'll gracefully give up on the rest of the sync. ", Running a background sync will involve changing that behavior, otherwise we'll immediately abort the new sync! We can probably remove the foreground-only constraint altogether, but to do so we will ought to make sure we don't forcibly shut down the profile (closing its databases) until a sync \u2014 either one that's already in progress when we background, or one we trigger in the background \u2014 is done. The existing shutdown code attempts to close each of our two databases by nilling out the shared DB connection. (The deinitializer for the connection instance will take care of the rest.) Our hypothesis is that this is relatively safe in the presence of an existing sync, but we almost certainly do leave a connection open sometimes, and we don't want to close these then immediately reopen them. It's not enough to fire off a sync with an upon -- we might already be syncing, and so we need to grab the existing sync's Deferred if one exists. To do that, calls to syncEverything (or individual syncs, like the one we trigger in onLoginDidChange) should put their `Deferred` results somewhere, so there's always a hook to chain off an ongoing sync. Right now we use a spinlock (syncLock in Profile.swift) to track whether a sync is in progress. That should probably be some kind of atomic property instead.", Created ', ', Pull request This feels like it's on the right track, but I haven't done anything with atomicity/spinlocks yet. I'm also not happy with having needing an extra method (or its name) on the SyncManager.", Comment on ', ', Pull request Comments on the PR. I think everything should be pushed down into `syncSeveral`; callers shouldn't be aware that a sync is in process, so on exit we can just call self.profile.syncManager.syncEverything() and if a sync for all engines is in progress, we'll just return that; if not, we'll chain off the existing sync to sync the remainder; if there isn't one, we'll run a new full sync.", Please stop spamming bugs.', Test scenarios: * Background the app with no account set up. Nothing untoward should happen. * Likewise, but with the account in Unverified (create a new account). Sync shouldn't work, because the account isn't syncable. * Start a sync from Settings, then immediately background the app. There should be no additional sync. * Background the app seconds after launch (never synced before). Sync or don't sync, but specify the behavior! * Allow a scheduled sync to run (fifteen seconds after launch) and complete, then background the app within the rate-limiting period. We expect no sync. * Likewise, but outside the rate-limiting period. We expect another sync. * Save a login. Wait for the post-login-change sync to occur, then background the app. We expect another sync to occur immediately, syncing everything but logins.", I've just pushed more commits to PR ", . It needs some more feedback. rnewman: please could you have a look at it. Also: are there any automated tests for this (it doesn't feel untestable, just that it hasn't been automated yet)?", You could test the sync continuation stuff, but syncing on exit itself is a little more challenging -- I don't think we have good control over the OS lifecycle callbacks.", Comment on ', ', Pull request Comments on the PR. Nice work!', I think this is ready for a review now. I've kept using the overall structure approximately the same, while (I think) addressing the feedback from earlier f+s.", Comment on ', ', Pull request Relatively speaking just nits, but they're the kind of nits that would make some people squint, so happy to take another look at this after. Tests would be super appreciated for this, but adding tests would be difficult without breaking out a little library for intermediate deferreds with accumulation. Consider whether you want to do that so you can test it\u2026", Comment on ', ', Pull request Left a comment in the PR, but I think this is ready for review.', Comment on ', ', Pull request Lovely. Really nice to see tests for this! I added my nits and an extra test as four commits here: ', Addressed nits, tested on device. Merged. Yay!', Thanks for your patience, James!' 
id=1233281	 'Those strings are hanging out in the PR for ', : ', I think using 'deleted' in conjunction with 'removed' is redundant and a little confusing. Remove history from your Firefox Account? History will be removed from all your connected devices. Cancel Delete I noticed there was mention of Delete/Clear and assumed it was the table entry, not the label that would inherit 'Clear'.", I wasn\'t done with that\u2026 Yes, add "This cannot be undone".', Re Delete versus Clear: the triggering row/button is "Clear Private Data", so I assumed that "Clear" would be the confirming verb. Which do you prefer?', (In reply to Richard Newman :rnewman from ', ) ', Ahh yes, I was thinking more about Login management (where "Delete" is prominent). "Clear" is good.', Done! *** This bug has been marked as a duplicate of ', ***' 
id=1257837	 'Created ', ', Pull request on GitHub', Comment on ', ', Pull request on GitHub lgtm', Merged ', Jeff, could you please elaborate? I'm a complete stranger to the iOS stack but conceptually I don't see how automated tasks fail because the lack of actual implementation of RTL APIs in FFiOS ? As that was the point IMO of automated screenshots:: see when (and how much) things are broken in RTL.", (In reply to Ahmed Nefzaoui :Nefzaoui from ', ) ', Hi Ahmed, Thanks for your questions. To add some context, there are two lists of locales that impact Fennec on iOS: locales with repos, and the locales we ship each release. shipped-locales.txt tells the build tools what locales we're planning to ship when it creates the release candidate build that's submitted to the App Store. So this bug is simply to avoid shipping RTL localizations through the App Store until we get RTL sorted out. Automated screenshots and nightly Aurora builds will still be made available for testing and identifying what's broken by the community. Hope that helps :-)" 
id=1158509	 'For the record, I asked accessibility-dev Apple mailing list whether pronunciation of a word spoken by VoiceOver can be changed (here we need it for "Read"): ', Created ', ', Pull request', Comment on ', ', Pull request Thank you for this contribution!' 
id=1126542	 'Created ', ', Pull request', Comment on ', ', Pull request This looks good. Excellent test. And, I totally agree with your composition over inheritance comment. Lets write a few more tests that need a web server and then we will probably have a good idea of what functionality can go into some helper class or functions.' 
id=1188383	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r?=tecgirl', Comment on ', ', Link to Github pull-request: ', Looks good! Also prompts me to file another bug for the Remote Tabs panel, as those same assets are used and are displaying a bit soft.' 
id=1137959	 'Fixed awhile ago with all of the search rewrites.' 
id=1147922	 'Created ', PR: Implement URL Transition' 
id=1212431	 "I'll work on this when Nick polishes and lands his state machine work.", Indeed. Although for the moment we're exposing your server bookmarks in the UI, the mirroring strategy we have now is very much a half-way house: we have no facility for upload, merging, or anything else we'd need to do something sane with a locally persisted mirror. The mirror is a replica of the server, nothing more. The correct behavior in almost any circumstance is to throw it away and start again: that way we'll always end up with an accurate snapshot of the server. (syncID and key changes are accompanied by server DELETEs, and of course we can't figure out what's been deleted, so we start from zero.) Imagine that a user turns off bookmark sync on their desktop (which wipes server storage and uploads a new meta/global), reimports a backup, then turns it back on. On iOS 1.1 we'd process the disablement as a reset, and reset again on enablement. Right now that throws away the mirror, and the new data will arrive when desktop turns bookmark sync back on. But what if we keep the data across those transitions? We'd have a broken jumble of half-overwritten data in the mirror -- we wouldn't ever throw anything away, and the user can't delete it. Even worse, when we implement two-way sync we wouldn't be able to trust our mirror! It would be accurate to say that we do not yet sync bookmarks in either direction, because we neither upload our own, nor merge downloaded data into real persistent storage. The mirror will eventually turn into either a shared mirror like logins (which is flushed to local storage on reset, with content-based reconciling used to reconstruct a shared parent on reconnection), or a temporary scratchpad that feeds into a richer local structure. Right now it's just a mirror.", Created ', ', Pull req.', Manual testing. Disabled passwords remotely; verified that loginsM was wiped and loginsL contained all passwords. Re-enabled: Profile.swift:643 syncLoginsWithDelegate(_:prefs:ready:) > Syncing logins to storage. Synchronizer.swift:151 init(scratchpad:delegate:basePrefs:collection:) > Synchronizer configured with prefs \'profile.sync.synchronizer.passwords...\' LoginsSynchronizer.swift:158 synchronizeLocalLogins(_:withServer:info:) > Synchronizing passwords. Last fetched: 0. StorageClient.swift:697 getSince(_:sort:limit:offset:) > Issuing GET with newer = 0. StorageClient.swift:328 failFromResponse > Status code: 200. LoginsSynchronizer.swift:163 synchronizeLocalLogins(_:withServer:info:) > Applying incoming password records from response timestamped 1444858265700, last modified 1444858255300. LoginsSynchronizer.swift:164 synchronizeLocalLogins(_:withServer:info:) > Records header hint: Optional(4) SQLiteLogins.swift:613 applyChangedLogin(_:local:mirror:) > Local record with GUID vytzVPlEY_vg but no mirror. This is unusual; assuming disconnect-reconnect scenario. Smushing. SQLiteLogins.swift:783 resolveConflictWithoutParentBetween(local:upstream:) > Conflicting records with no shared parent. Using newer remote record. SQLiteLogins.swift:613 applyChangedLogin(_:local:mirror:) > Local record with GUID u0FbeIHDbGif but no mirror. This is unusual; assuming disconnect-reconnect scenario. Smushing. SQLiteLogins.swift:783 resolveConflictWithoutParentBetween(local:upstream:) > Conflicting records with no shared parent. Using newer remote record. SQLiteLogins.swift:613 applyChangedLogin(_:local:mirror:) > Local record with GUID B7QQXwgfiFG5 but no mirror. This is unusual; assuming disconnect-reconnect scenario. Smushing. SQLiteLogins.swift:783 resolveConflictWithoutParentBetween(local:upstream:) > Conflicting records with no shared parent. Using newer remote record. SQLiteLogins.swift:613 applyChangedLogin(_:local:mirror:) > Local record with GUID 3p6dhcHfd2Tb but no mirror. This is unusual; assuming disconnect-reconnect scenario. Smushing. SQLiteLogins.swift:783 resolveConflictWithoutParentBetween(local:upstream:) > Conflicting records with no shared parent. Using newer remote record. IndependentRecordSynchronizer.swift:41 done() > Bumping fetch timestamp to 1444858255300. IndependentRecordSynchronizer.swift:73 uploadRecords(_:by:lastTimestamp:storageClient:onUpload:) > No modified records to upload. IndependentRecordSynchronizer.swift:73 uploadRecords(_:by:lastTimestamp:storageClient:onUpload:) > No modified records to upload. LoginsSynchronizer.swift:142 uploadOutgoingFromStorage(_:lastTimestamp:withServer:) > Done syncing. Those log lines aren\'t as scary as they look: we hit this block: // Do the best we can. Either the local wins and will be // uploaded, or the remote wins and we delete our overlay. if local.timePasswordChanged > upstream.timePasswordChanged { log.debug("Conflicting records with no shared parent. Using newer local record.") return self.insertNewMirror(upstream, isOverridden: 1) } and the timePasswordChanged values are the same, so we\'re simply taking the mirror value. If we\'d locally changed the password and the other client re-uploaded, we\'d take the local record. Verified that after re-merge all logins are in loginsM and none are in loginsL, but values are unchanged.', r+ over IRC. 4155dea' 
id=1162069	 'This sounds bad.', Wes/Aaron, test again?', Fixed' 
id=1170769	 
id=1183250	 'Created ', PR', Created ', Pull request', Comment on ', Pull request ', Created ', ', Pull request Looks like if you link to ', , Bugzilla doesn't recognize that it's a pull request. Make sure you link to the pull request directly (", ) so that it goes to GitHub when clicking the attachment.', Created ', ', Pull request Argh, except I used the wrong URL! Let's try this one more time...", omg u cray', Comment on ', ', Pull request I'm looking into an alternative fix for this.", Fixed by URL bar refactor (', ).' 
id=1224910	 'Not sure if the iOS version is part of the bounty program but nominating all the same', Does Safari on iOS have the same issue?', Created ', Test result on Safari for iOS It\'s not reproducible on Safari. As attached the location bar in a new window shows a message "Search or enter website name" but not the malicious URL given from the parent window.', Confirmed that this is a bug we will address in Firefox. Thank you for finding this one.', Created ', ', PR: ', There are two related fixes in this patch: \u2022 Better handle invalid schemes opened in popup windows. For example `foo://lalala.com` does now open and show in the location bar. \u2022 Make use of the new `WKFrameInfo.securityOrigin` to show better detailed titles in JavaScript originated alerts. (Via the `WKWebView` delegate) The second is as a result of the first. With the first now allowing `javascript:` URLs resulted in a crash that is fixed by the second fix.', Second commit makes sense, but I think we can do better for the fix. I think it\'s valid to open other types of URIs (data URIs or even empty URIs, for example). It sounds like the issue is that we fail to load the invalid URL, so the opening page has privileges to modify the opened frame\'s DOM (fitting into the "empty URI" case mentioned above). If we can, I think a good fix would be to show error pages for invalid schemes like we do with other invalid URLs. If we load an error page, it will be served from a localhost URL, failing the SOP, meaning the opening page shouldn\'t be able to touch the DOM. As a bonus, this would be a UX improvement since we\'d get visual feedback when trying to load invalid pages, as opposed to simply nothing happening.', FWIW, the fix I'm proposing is essentially what we do on Firefox desktop: the test page opens a new tab, showing the invalid URL in the URL bar, with an error page shown as the content.", Couple questions/notes: What would an "invalid scheme" be for popup windows? Can we limit that to a list of known schemes? I like the idea of presenting an error page instead of simply not creating a new window. That should be easy. And it solves a SOP problem. This original bug is about popup windows. And I think that is what should be fixed here. But I just noticed that opening nttp://google.com in a new tab does not result in any action at all, so I think a similar fix should happen in a separate bug for normal new tabs.', (In reply to Stefan Arentz :st3fan from ', ) ', I guess I was hoping that there was some WKWebView callback that was triggered in response to loading invalid URIs/schemes rather than trying to preemptively detect them. Do no error callbacks at all get fired when this happens?', I set breakpoints on the didFail and didFailProvisionally and they were not triggered on invalid URLs. Also webView(webView: decidePolicyForNavigationAction: decisionHandler:) is not being called, so we can't intercept it there. That is why the decision logic lives in the delegate method that creates the new tab. So at that point I think we do need a whitelist of schemes?", From last patch: There are two related fixes in this patch: \u2022 Better handle invalid schemes opened in popup windows. If the scheme is not in our whitelist, we consider it invalid and open a new tab without a context (WKConfiguration) that links to the parent window. After that `webView:decidePolicyForNavigationAction:` will be called and will show an appropriate error message that the URL cannot be opened. \u2022 Make use of the new `WKFrameInfo.securityOrigin` to show better detailed titles in JavaScript originated alerts. (Via the `WKWebView` delegate) The second is as a result of the first. With the first now allowing `javascript:` URLs resulted in a crash that is fixed by the second fix.', Left comment in PR. With error pages, I don't think we need the configuration hack (or at least I hope not since cross-origin page manipulations would be a severe vulnerability!).", Comment on ', ', PR: ', LGTM with hack removed as mentioned in the PR.', Addressed the 'configuration hack'. Tested this against: ", (invalid scheme in url) ', (javascript url) ', (invalid domain) Outcome is good. Although we can handle javascript: links better. Will file followup for that.', Comment on ', ', PR: ', This landed: 1a417ed', Uplifted: b48cd6930140d76bbf1123e164e29a811ec7e99a' 
id=1250233	 'Created ', ', PR' 
id=1100592	 
id=1191861	 'This is good, yes?', commit b27936faa4698a2a95a63d017b761afb35794536 Merge: 12f4223 5a79385 Author: Robin Andersen <', > Date: Thu Jul 23 17:07:02 2015 -0700 Merge pull request #796 from mozilla/', -Update-Empty-Panel-States ', Update Empty Panel States', Empty panels LGTM on current master.' 
id=1143125	 'We extracted a Shared target, which is Utils and some Third-Party code. Closing this out.' 
id=1129514	 "Hi Brian, I'm interested in squashing this bug. I've submitted a PR with a possible fix at: ", Created ', ', Pull request Thanks for digging in! As mentioned in the PR, using stringByAddingPercentEncodingWithAllowedCharacters might simplify this considerably :)', Merged long ago.' 
id=1216339	 
id=1203560	 "Originally we removed the title to make room for the CTA button. That kept the overall layout's across each slide consistent. The problem with adding a title would be increasing the height substantially for one of the slides. But, perhaps we can change the copy here to be in the same style as the title of the other slides. I.e. Bold. We might have to shorten it a bit? that way, this slide would still be in the same format as the others. Thoughts?", Created ', First Run V1 - Slide ', I'll need some help with my horrible copy but this is what I was thinking. Matej, care to chime in? :)", I can see the rationale for sure, although the OCD in me felt it so disjointed not to have a consistent feel (and especially now we're adding in more panels!) I appreciate trying to appeal to this consistency. The worry I have without providing much more context or benefit to the 'connect everyone' slide is that the CTA brings the user to the setting page where we don't provide any further context or benefits for connecting. Maybe some slightly tighter copy and/or modifying the image to show Firefox across other devices? ie a pic of a desktop screen and a tablet as well? Just to provide a bit of a stronger clue.", Here are some other options we could try here: Connect Firefox everywhere Take your Web with you Sync Firefox wherever you use it', (In reply to Karen Rudnitski :kar from ', ) ', I think the slides leading up to this should give the context and value proposition here :) ', Sure, I can give the imagery some more tries. I agree, we can show more than just a phone!', Created ', Screen Shot 2015-09-16 at 11.04.29 AM.png (In reply to Matej Novak :matej from ', ) ', Check it out Matej! This would be the current flow but we are adding additional slides. Thoughts?', Looking at that, what if it just said "Sync"? That would flow with the other titles and it\'s both the name of the feature and descriptive. I also wonder if we want to update the image on that third slide to show multiple devices and better communicate the benefit. Right now it looks like Sync provides backup service, which it really doesn\'t.', I kinda like just saying Sync, with a clearer illustration showing the Sync benefit (my stuff across devices)...', Yep, I left a note in ', to do just that. But looking at ', , we need to unify all these titles. Seeing as how we\'re going with "Sync" here in the final slide. Do we still want "Send to Firefox" and "Make it your browser" for slides 3 and 4?', (In reply to Anthony Lam (:antlam) from ', ) ', Would it be possible to put this all in one place so we can figure it out holistically, rather than in two different bugs?', Definitely, this is a bit disjointed but I think we\'re pretty pressed with time in this case :\\ Let\'s do this for now: - leave this one open for changing the copy of the last slide to "Sync" - Update the copy of slide 3 and 4 in ', (In reply to Anthony Lam (:antlam) from ', ) ', I was hoping to be able to see all the screens together, but I can review in the other bug. Thanks.', Matej, all tour slides in one image: ', We are too late for a 'Sync' string, but we have 'Sync your Devices'. Would that work?", (In reply to Stefan Arentz :st3fan from ', ) ', Looks great. Thanks.', We are past string freeze, so how about we start with 'Sync your Devices.' and for a later release change it to 'Sync'. There is nothing we can do in terms of new strings at this point, so the only other option is to not use a title. This bug needs a decision so that we can implement it :-)", (In reply to Stefan Arentz :st3fan from ', ) ', Since the choice is about including a headline or not, and not about copy, I don't think the decision is mine, but if we do include it, the D should be lowercase: Sync you devices", Created ', ', Pull request', Created ', Simulator Screen Shot Oct 14, 2015, 4.44.43 PM.png "Sync your devices" screenshot.', Comment on ', Simulator Screen Shot Oct 14, 2015, 4.44.43 PM.png Sweet! I can't see the other slides... But as long as the Title is in the same place as the others, this works!", Comment on ', ', Pull request Return the title label to the already localised string and raise a bug to properly capitilise it for 1.1.x.', Sync your devices WFM', Addressed nits, and landed. Follow up bug ' 
id=1152036	 'Boris, also see ', I removed tracking-fennec from this bug and marked it as WONTFIX because I think what we need instead is smaller bugs and patches to fix specific issues. We currently do not have the time or resources to do a complete design specification for accessibility. But, I think we know in which areas we need improvements. So my suggestion is to simply keep filing smaller concrete feature/improvement bugs so that we go towards a better state of accessibility.', Please followup here if you think this is not the right approach or if you have alternative suggestions.' 
id=1241002	 'Created ', ', Pull request :jhugman as this affect spotlight too :st3fan because he has a 3D touch device :tecgirl as she has a 3D touch device', Comment on ', ', Pull request Tested on a 6s. Works well.', A question in the issue re: settings submenus, but otherwise good.', *** ', has been marked as a duplicate of this bug. ***' 
id=1194439	 'Created ', ', Pull req.', Comment on ', ', Pull req. Yay, more debugging options!', febd448' 
id=1145397	 'This is still present in build 6', *** ', has been marked as a duplicate of this bug. ***', This has been resolved as part of the new RL database backend.' 
id=1112198	 '(In reply to Stefan Arentz :st3fan from ', ) ', Please allow localizing via vcs and don't force pootle, pretty please.", (In reply to Stefan Plewako :stef from ', ) ', :stef are we doing that for other projects? Can you point to an example? We're still figuring out the best way to localization for this app. So all input is appreciated. S.", I just saw the discussion for the other bug where you posted the same request. If you think this is not the right place for a discussion, feel free to email me or post a message to the mobile mailing list. As I said, all input is appreciated.', (In reply to Stefan Arentz :st3fan from ', ) ', Firefox, Firefox OS, Fennec, Thunderbird, Lightning, SeaMonkey - should I mention more? ', At the beginning you should realize, that there isn\'t something like the "best way of localization" - just ask Pike if in doubt. There are differrent localizers: there is the "old guard" of technical localizers who if forced to localize through a specific app or especially webapp, will just not localize anything. And there are the "non-technical" localizers, which if they here anything about hg/git, just start to panick and don\'t localize anything. So if you force the localizers to localize using a special tool, you loose a good portion of the localizers. The way it is done for most Mozilla projects is the best: localization is in VCM systems and different tools can be used to localize.', I just don't think that it would be valuable or appropriate to discuss the general approach for making new projects localizable here - mozilla.dev.l10n list may be much better place (all parties interested in l10n should watch it). In general, VCS approach should be the easiest to implement and the most open in the same time, allowing people to work in the same way as they work on fx, fennec, th, sm, fxos, mozilla.org and possibly other projects.", Pretty sure this must be done.' 
id=1206939	 '"Firefox on ..." isn\'t an in-product string; that\'s the name of the device. The cancel button sounds like ', . Steph, did that make it to master?', (In reply to Richard Newman :rnewman from ', ) ', I didn't name it like that, it needs to be defined somewhere - some sync code maybe?", The 'Cancel' string should now be using the localized string instead of the system button style. Don't think we caught the 'Firefox on...' string though.", (In reply to Stefan Plewako :stef from ', ) ', Here\'s how Firefox for iOS does it: Utils/DeviceInfo.swift 47: let f = NSLocalizedString("%@ on %@", tableName: "Shared", comment: "A brief descriptive name for this app on this device, used for Send Tab and Synced Tabs. The first argument is the app name. The second argument is the device name.") My point is that that string is supplied by another device, which presumably was using an English string at the time it first synced.', Duping to the 'Cancel' bug. *** This bug has been marked as a duplicate of ", ***', (In reply to Richard Newman :rnewman from ', ) ', Steps to reproduce: 1. Install Firefox 2. Sign in to sync 3. Force quit Firefox 4. Delete Firefox 5. Repeat steps 1-2 With each iteration one more "Firefox on device name" is added.', (In reply to Stefan Plewako :stef from ', ) ', That's the record added by this device, and one new record each time you do that is currently expected. If you uninstall the app or clear its data, we can't delete the old record, and we haven't implemented ", yet. The string is an NSLocalizedString, as I pointed out. Can you explain why you reopened this bug, Stef?', (In reply to Richard Newman :rnewman from ', ) ', I would expect that new records take localized/NSLocalizedString value and clearly they don't.", This string is in tableName: "Shared". I see in the Polish import: BookmarkPanel.strings\t\tHistoryPanel.strings\t\tLocalizable.strings\t\tStorage.strings ClearPrivateData.strings\tInfoPlist.strings\t\tPrivateBrowsing.strings ErrorPages.strings\t\tIntro.strings\t\t\tSearch.strings That implies that we\'re missing a whole table.', We do not correctly import the localized 'Shared' strings. Will be fixed today and will show up in an L10N build later today.", Because we are passed string freeze the Cancel button will have to be the iOS provided Cancel button instead of a custom localized one.', Fixed with ', To test: * Make sure your device is set to the correct locale * Clear all data ro do a clean install * Open some tabs * Login to sync * Sync your tabs by opening the remote tabs panel * Go to your desktop, see that the title of the device in "History -> Tabs from Other Devices" is localized' 
id=1186266	 'Created ', ', Link to Github pull-request: ' 
id=1274617	 'PR 1839 added to bug in error.', Created ', ', Link to Github pull-request: ', Merged.' 
id=1156500	 'Created ', ', Pull request', Comment on ', ', Pull request r+ for the first commit -- do what you gotta do -- but I really don't think the second commit is a good approach." 
id=1178012	 'Created ', ', Pull request', Comment on ', ', Pull request I am sorry for sitting on this one too long. Looks good! Just needs a rebase.' 
id=1167310	 'Can this be as simple as removing storeChanges() from TabManager.decodeRestorableStateWithCoder? That method already calls self.addTab(request: NSURLRequest(URL: url), flushToDisk: false) with flushToDisk set to false. So not sure why we are undoing that at the end of the call.', Note, I don't even this we're storing these anymore. i.e. Storage seems nil when we create the TabManager.", *** This bug has been marked as a duplicate of ', ***' 
id=1244829	 'Created ', ', PR: ', This patch makes SupportUtils.URLForTopic use the *language identifier* instead of the *locale identifier*.', Comment on ', ', PR: ', LGTM!' 
id=1325392	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1255412	 'Dupe?', Dupe of ', ?', Think it is, switch back if not *** This bug has been marked as a duplicate of ', ***' 
id=1211318	 
id=1278675	 "For implementing this feature I would look into using a UICollectionView and connect the existing TabsDataSource we use in the TabTrayController. The UICollectionView will provide us with cell recycling and additional view customization we'll need for rendering the curve views (as decoration views), custom animations (if we implement the 'stacking' tabs animation), and an API for reordering (if we want to implement the move tab functionality).", Resolved with patch on meta.' 
id=1135814	 'Created ', example content (screenshot) Spotted this on Yahoo Weather, there's some text behind our toolbar a user can't read", I don't see the difference, we either show a solid bar (which will block content) or we let it bleed through) which will block content. Its an aesthetic thing, unless I'm misunderstanding. This will also differ depending on device height.", No the problem is that some apps go 'full screen' and kill scrolling (like google maps) so that means there is unreachable content under the bar. The fix would be to move the webview up so that it is not under the bar at all.", I need to think about this...', Created ', ', Pull-Request Hi, I was interested in working on this bug. I just created a PR that may be useful to you.', The toolbars are designed to dock away when scrolling. Note Safari also has a bottom bar but it's fully opaque. No functionality is lost. My 2\xa2.", Created ', ', PR ', (Copied from Github) Finally got this working right. The idea now is that instead of setting contentInsets on the WKWebView's scroll view, the view is pinned to the toolbars using constraints so as they animate, the web view will expand. The additional trick in this branch is turning off the scrollView layer's maskToBounds property so the web content will render outside of the scroll view, beneath the toolbars. Additionally, I wrapped the showToolbars call in the scrollViewWillEndDragging method with a dispatch_async block to allow the scroll view to handle it's own animation first on the main queue and run the toolbar animation after so position:fixed elements on the page don't jump around. Last thing, I added a minimum content size for which the toolbars actually scroll away at. I noticed Safari does the same thing where if a page is too short or a fixed size, don't try to scroll away the toolbars.", I would have thought the bottom contentInset would fix this and allow you to scroll "beyond" the bottom a bit. It does that on the top. Some sites, like Google Maps also kill off all scrolling though or put all their content in an iframe inside the main frame. I assume that\'s the issue... sorry just thinking through this problem. The solution sounds nice to me (although I worry about page transitions and everyone always tells me that dynamically resizing a webview is a recipe for disaster).', Ya the bottom contentInset worked well for pages with position:fixed elements, but it became a problem on Google maps because the WKWebView uses it's frame as the viewport for pages it requests so Google maps returns a larger page than we wanted :(", Comment on ', ', PR ', This looks great. I tested with a bunch of sites that go full screen like Google Maps and it is a huge improvement.', Comment on ', ', PR ', Yeah, I'm fine too. I mostly would like some comments in the code so that the math's intent is clearer.", Hey Wes, I updated my branch from master after you merged in your changes. Could you take a gander and make sure it's what yo re expecting? I notice that the toolbars don't always animate and it's because the ScrollRecognizer is being prevented from doing the scroll logic because of this: ", . I'm not too clear on what's going on with it so if you have any ideas let me know.", Ahh. Looks good! Not super surprised actually. I expect the page is calling preventDefault() on a touchend event, which we're allowing to prevent our code from working (because if I didn't, the touch event listeners were locking up the page entirely). I wonder if we can just put a show/hideToolbars call in there. i.e. is that only hit when the user is done touching...?", I did some more testing and I think I was seeing it more frequently on the mozilla.org site because theres a lot of large click areas. On normal webpages the behavior is fine. I'm going to go ahead and merge this stuff in. I did notice an issue that we can address in another bug. Since we're preventing our scroll gesture from running when the web page's gesture should be invoked for link handling, when the user scrolls after holding onto a link, the bars don't animate back since that logic doesn't get called any more.", Filed ', for link scrolling bug. Merged PR.' 
id=1160400	 
id=1223894	 'I tried the following: 1. Downloaded 1.1b1112 Aurora build (before the Top Sites caching work) 2. Opened it up, connected my FxA account, navigated around a bit 3. Top sites were populated correctly Then, 4. Updated to 1.2b1201 Aurora 5. Launched the app (note: noticed a significantly longer startup time) 6. Opened top sites panel 7. Saw the default 2 tiles for a moment which then got replaced by my synced top sites :kar, does this sound similar to the steps you took (except for the top sites not showing at the end)?', Not quite. I loaded Firefox on my iPhone 6s for the first time and downloaded 1.2b1202 for the first time on that device. I signed into FxA and that's when it took 24 hours to populate top sites with my history.", Hm I tried to do this a few times with the 1.2b1202 on my iPhone 6 (9.1) device and can't seem to reproduce :( :kar, do you mind uninstalling and reinstalling to see if this happens a second time around?", On my iPhone 6 (9.1) and iPad Air (9.1), I see top-sites populating after Sync. By the description, this reminds me of the bug of top-sites query racing against the collectionView creation. Works for me.', We invalidate top sites after each completed sync: // These selectors run on which ever thread sent the notifications (not the main thread) @objc func onProfileDidFinishSyncing(notification: NSNotification) { history.setTopSitesNeedsInvalidation() } We background-refresh after the top sites view loads, if the cache is invalid: override func viewDidLoad() { ... self.profile.history.setTopSitesCacheSize(Int32(maxFrecencyLimit)) self.refreshTopSites(maxFrecencyLimit) } ... private func refreshTopSites(frecencyLimit: Int) { // Reload right away with whatever is in the cache, then check to see if the cache is invalid. If it's invalid, // invalidate the cache and requery. This allows us to always show results right away if they are cached but // also load in the up-to-date results asynchronously if needed reloadTopSitesWithLimit(frecencyLimit) >>> { return self.profile.history.updateTopSitesCacheIfInvalidated() >>== { result in return result ? self.reloadTopSitesWithLimit(frecencyLimit) : succeed() } } } so the only reasons why there would be no history visible in top sites are: 1. History didn't sync yet. If you have lots of bookmarks or logins, that would explain it. 2. You had enough local browsing data that the oldest-first history never showed in top sites. That doesn't seem to be the case here. 3. viewDidLoad isn't being called again. If the app stays resident in memory, the view won't be loaded again for a while. If (3) is the culprit, we could consider having TopSitesPanel listen for sync-finish notifications so it can redisplay.", (In reply to Stephan Leroux :sleroux from ', ) ', 1.2 will vacuum the DB on open in order to change the page size, which essentially involves rewriting the entire file. This will be a one-time hit after upgrade. You should see Vacuuming to alter database page size from \\(currentPageSize) to \\(desiredPageSize). in the log, and Vacuuming succeeded. afterwards.', (3) doesn't seem to be the culprit. When switching panels, deinit is called and viewDidLoad is called when navigating back to TopSites. Same thing happens when you show/hide the HomePanelViewController.", STR: 1) Do clean install of Firefox 2) Go to settings, login to your account 3) Stay on settings screen until sync is done 4) Close Settings 5) Open the only tab in the tab tray Expected: Top sites is populated Actual: Only the two default tiles are there Workaround: 6) Switch to bookmarks panel 7) Switch to top sites panel Top sites are refreshed.', Created ', ', Link to Github pull-request: ', Landed 2e971a8248b06ae042d8605e2c6fa52ac14780e9' 
id=1294867	 'Created ', ', Pull request', Comment on ', ', Pull request Oh, sorry for not catching this. I was thinking cell selection was independent of tapping for some reason.' 
id=1139960	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1270177	 'Patch included in ' 
id=1150581	 'Fixed via ' 
id=1201110	 'Interested parties can follow along here. ', Goddamn favicons.', Note to self: structure extraction will need is_overridden; make sure this is indexed, probably a partial index.', Created ', ', Pull req. High-level feedback and questions, please. This is the same approach we take to logins -- the idea of a local overlay on a reconciled mirror -- extended to bookmarks. See <', > for some notes. Bookmarks are much more complicated than logins: * There are more types and more fields. * We have structure as well as state. * We need to buffer downloaded records. For these reasons we end up with six tables (three pairs of value + structure). The 'mirror' table introduced in ", is renamed to 'buffer', because that's what it really is. This PR implements upgrading (albeit without a test yet) and new DB creation. It implements adding a new local bookmark and isBookmarked. We preserve our previous sad icon support for local bookmarks. Notable omissions: * Syncing of any kind. Downloaded records should be applied correctly to the buffer (though I haven't checked yet), but those won't end up being merged into the mirror. As a result they won't be displayed, but that would be a relatively easy change if we wanted to get this landed -- just point at (buffer + local) instead of (mirror + local). We can create views for these, making that a one-line switch. * Deletion and clearing. This is rote work that I haven't got to yet. It'll 'work' right now, but it won't work with syncing. * Indexing of tables. The approach we'll use when implementing syncing itself is a merger that can compare (buffer + mirror) to figure out server changes, and (local + mirror) to get local changes, and can lazily compare subtrees to yield a new merged state. The production of a merged state gives us a stream of changes that can be applied to the server and to the local (mirror + buffer + local) tables, typically putting everything in (mirror) with empty (buffer) and (local). That, as you can imagine, is a whole other bug -- ", .', The code itself makes sense but I'm having a hard time understanding how the big picture works. If I understand it correctly, 1. We have a local, mirror (remote), and buffer table for both the Bookmarks themselves and the Bookmark hierarchy (structure). 2. Incoming changes from the server get received in the buffer 3. Conflict resolution happens when merging between the buffered data and the mirror (remote) table. For clarification, could you go through some scenarios from a high level that happens when, 1. A local bookmark is changed 2. A remote bookmark is changed on the client side 3. A remote bookmark is changed on the server from sync", Yup, I'll put together another gist.", Comment on ', ', Pull req. If I am understanding this correctly, this feels like a much simpler and more logical separation of remote and local bookmarks which will make dealing with them a lot easier in future.', (In reply to Richard Newman :rnewman from ', ) ', I\'m quite comfortable with the schema, but I\'ll need this gist as well. My two big questions: 1) What do we gain from maintaining the structure as a separate table? It appears isomorphic to keeping additional fields in the existing tables to me, and requires cross-table transactions to be safe. Right? 2) Explain is_overridden. The code is too "in flight" for me to work this out, and I did try.', Nick raised an excellent question in his PR comments. +extension SQLiteBookmarks { - public func addToMobileBookmarks(url: NSURL, title: String, favicon: Favicon?) -> Success { + /** + * Assumption: the provided GUID exists in either the local table or the mirror table. ', If the GUID is entirely unknown, the insert into the structure table will fail because the foreign key constraint will be violated. If the GUID is present in the target table but the destination is not a folder, the newly inserted bookmark is basically lost to the world for navigation \u2014 it doesn\'t have a meaningful parent, so it\'s never re-found, but the page will show as bookmarked. In the course of answering this comment I noticed that each structure table permits only GUIDs that are already present in the appropriate \'values\' table \u2014 that is, mirror structure can only refer to mirror records (which makes sense), and the local structure can only refer to local records. Either we need to loosen that constraint for local records \u2014 they can refer to mirror folders \u2014 or we need to answer my TODO below with "we need to copy it so we can refer to the folder". I think the former makes more sense. Note that this constraint also makes it impossible to represent in the mirror structure table bookmarks that have no known parent. It\'s not an issue for the buffer tables, because by definition the structure is carried by a non-deleted parent.', A quick progress update: Lots of changes in the PR. More TODOs, but many more TODOs eliminated. A mini blog post that describes the current structure is here: ', I've tested migration of existing data. I ripped out most of the merged bookmark view, replacing it with the overlay-based view onto local + mirror. Eventually it will go entirely. Having manually schlepped buffer data into the mirror: insert into bookmarksMirror (id, guid, type, server_modified, is_deleted, hasDupe, parentid, parentName, feedUri, siteUri, pos, title, description, bmkUri, tags, keyword, folderName, queryId) select * from bookmarksBuffer; insert into bookmarksMirrorStructure select * from bookmarksBufferStructure; insert or ignore into bookmarksMirrorStructure select * from bookmarksLocalStructure; delete from bookmarksLocalStructure; delete from bookmarksLocal; the new bookmark view correctly shows Desktop Bookmarks. I've also mostly implemented separators and stubs for queries and livemarks, and I've tested bookmarking of new items into an existing synced Mobile Bookmarks folder. Everything's working nicely. Next up is implementing a testing framework, new tests for various kinds of structural and value-based reconciling and conflict resolution, and then the merger that makes those tests pass. Because the merged view was getting in the way and was consequently ripped out, I won't land this PR until I've built the merger -- to do so would remove access to synced bookmarks altogether -- but we can finish the review process when everyone's back from Orlando.", Comment on ', ', Pull req. I promised you some pictures to go with these, so that's next. In the mean time, the textual explanation is here: ", and if yo d like me to give you a spoken/guided romp through these 27 commits, I'd be happy to do so. Tests pass and the browser works with this sequence applied. Notably you won't be able to see your desktop bookmarks until I implement ", .', Comment on ', ', Pull req. Holy crap, long PR series is long. I reviewed up to and including part J. I tried to refrain from nits; in general, you and I have very similar styles anyway :) I had a few substantive questions, but nothing critical. There's so much to be built on top of this; we'll have time to wiggle out some tricky cases.", 4956641' 
id=1214206	 'As mentioned in another bug, this is confusing and will be confusing to users because we have a read-only list with Synced bookmarks and by hitting the bookmark button again you create a local bookmark.', This was a deliberate choice involving product and UX. We scoped down 1.1 to "show your desktop bookmarks in a tree in the home panel", because deleting a bookmark is hard. I doubt many users will even notice.' 
id=1281845	 'Created ', ', Pull request passing in correct locale as arg to tests in schemes for FennecUnitTests, Fennec CI and Fennec' 
id=1226605	 'Created ', ', PR: ', This patch upgrades Alamofire to their last stable release. It includes some code changes that follow their Migration Guide (', ).', Does this work? If so, want to flag review?', Closing because this will be done as part of the Carthage work Emily is doing.' 
id=1109643	 'Created ', ', x-github-pullrequest', (In reply to Stefan Arentz :st3fan from ', ) ', Let's just make sure that this won't conflict with gestures that UX might want to use for other parts of the UI.", Comment on ', ', x-github-pullrequest Looks fine to me. Since this is just a one line change, it should be easy to undo if there are any touch conflicts as Mark mentioned.' 
id=1238146	 ' ', Little better but from reading the comment I still wouldn\'t know what I\'m translating and how it should be done. Should I fill yet another bug, like "Empty Sync panel strings need improvement" or reopen this one?', Comments updated as part of ' 
id=1130499	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1144683	 'Fixed with ' 
id=1205058	 'This was WONTFIXED in ', did we change our mind?', I don't think we were happy with the resolution there as a long-term solution, but had to make a call for v1. Complexity aside, these default bookmarks should: a) not sync b) be delete-able", I agree with Darrin. On Android, we're able to delete them and I'd rather provide the same degree of control to our iOS users.", This is relatively straightforward; we can just store deletions in user defaults, and check those before adding the suggested sites as pseudo-bookmarks to the end of the model. I'm reworking some of that code in ", , and it will change again for full-fledged ', , so this ought to wait until that churn is done.', BTW - we had a user send through an idea in Aha where one of his points touched on this. He's frustrated that he can't remove the two default Top Sites thumbnails (same reason as the bookmarks, I know). His stance is that he doesn't keep his history and he's feeling forced to see Mozilla sites when he has no interest in them. He wants some aspect of his experience back under his control.", Create AHA card -> 2.0', Was mentioned to me a couple times by a few different folks in Orlando as a gripe', Will investigate technical details to scope for 3.0.', Took them out altogether and replaced with the empty bookmark state' 
id=1153349	 'Created ', ', PR', Comment on ', ', PR \\o/ for autolayout!', Thanks for the review! Ya autolayout is pretty great for animation stuff. I feel like a lot of bugs we'd see in different orientations would be caused by the transforms we're doing.", Yeah, I agree -- I think we're also directly tweaking frames a bit too much in some places. Autolayout can really help simplify UI logic. Merged." 
id=1171699	 'I found this issue as well. I already fixed it as part of this PR which is still in review: ', .', Resolved as part of dependency fix: ' 
id=1229213	 'Sorry, ignore -- bug from a local build!' 
id=1165587	 "Although I haven't been able to reliably reproduce it like on google images, it happened on ", as well.', Steph is working on a different patch that could fix this issue. He can dupe this if needed', Another reproducible case Visit ', in landscape and just pull down a bit on the page, the address bar falls off screen and it can't be shown again until a device rotation", For ', , it looks like the issue was related to the text input field and the scrollView not toggling toolbars when the scrollable area is too small. I've change it so regardless of how small the scrollable area is, the toolbars will always animate. The second issue related to ", seems to be related to the scrollable div at the top of the page. The scrolling behavior is interfering with the WKWebView scrolling behaviour and causing the toolbars to disappear and not come back. I compared both Safari and Chrome and it looks like they too also have problems with the toolbars being jittery but they never disappear. I'll continue investigating and see what I can do.", So couple more notes: 1. Looks like when the user is scrolling within a overflowed div, WKWebView's scroll view says it's contentOffset is (0,0), then some negative amount (0, -n), and then (0,0). This goes back and forth if yo re scrolled a bit, have the toolbars hidden, and trying moving within the div. With the panning/overflow/WKWebView gestures all at play, it seems that the scrollView is having a hard time deciding what it's contentOffset actually is. This is what seems to cause some jittery-ness as well. 2. Chrome works around this issue by locking all except one gesture. For example, if the user starts scrolling inside the div, then starts scrolling vertically, the div is locked and the user can't scroll horizontally anymore. This might be the default behavior of UIWebView as that's what Chrome is using and the behavior we're seeing with WKWebView is consistent with Safari. The downside with the locking approach (if we were able to replicate it in WKWebView) is that I've had Chrome lock scrollable divs indefinitely, breaking any scrolling on that page. The solution I have for now is to force the toolbars to be shown in the case when we have these negative/zero cycles. This works fine since any time the offset is negative, we should be showing the toolbars anyways so if anything this additional will be the toolbars that much more robust.", *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Comment on ', ', PR ', LGTM', Merged.' 
id=1242568	 'Created ', ', Link to Github pull-request: ', master d11a0e348faa4003e89c53957ebb12cd0cc31f10' 
id=1175879	 'Which Apple device are you using?', iPhone 5s, iOS 8', Confirming. iPhone 5S, iOS 8.2, pl.', Happens for all locales. Can be fixed with better constraints. I'm on it.", This looks better .. ', Created ', ', PR: ', This patch does a better job at autolayout to make sure the the icons do not overlap with the text. I also changed the title of that screen to use `adjustsFontSizeToFitWidth`, which helps with locales for which the 'Welcome to your Reading List' text is many words.", Comment on ', ', PR: ', Looks good - just some commented lines that we can remove from the patch.' 
id=1196088	 'GFI! Obviously cleaner, less random shit.', Created ', ', Pull req. Robin: there's a screenshot on the PR.", Comment on ', ', Pull req. Darrin ui-reviewed on GitHub.', Comment on ', ', Pull req. LGTM', a4a24a2' 
id=1120729	 "given we're looking at launching in a handful of countries upon v1.0 release (Germany and Canada, for instance), we'll need to get this localize-able. We want to ensure we have the flexibility to modify our search providers based on locale (since en-US would have a different default to de which would have a different default to ch-CN, for instance)", Also switching between partners based on geo. Need to thrash this out.', Created ', ', Link to Github pull-request: ', Even though nothing final has been decided in the search discussions, mfinkle suggested landing this and incrementing as we go. Geo-based search is likely orthogonal to these changes anyway.', Comment on ', ', Link to Github pull-request: ', LGTM If you decide to do use .lproj files, we can automate the import if needed. Also doing the same for strings.' 
id=1146095	 'I did some more digging and found out that this started happening after the commit ', In this commit init method has been added for superclass FileAccessor and remove method parameters have been changed and similar changes should happen in the subclass MockFiles which didn't.", You probably need to clear your DerivedData -- StorageTests aren't running at all right now, so they shouldn't be failing in a working build. That said, StorageTests shouldn't be disabled in the first place. StorageTests were part of the Storage framework, which was deleted in ", . Looks like we forgot to move them into the Client scheme.', Oops, didn't mean to close this yet.", Created ', Pull request', Comment on ', Pull request sachin: thanks for the report and the sleuthing! This was all my fault. bnicholson, patch looks good and tests pass on simulator locally. (And ClientTests does include StorageTests now.)' 
id=1209098	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1277326	 'Created ', ', Improve localization comments This covers a few of the dependent bugs: ', - Improve localization for string "Preview of %@" ', - Improve localization comments for Passcode strings ', - Improve localization comment for the Delete button in login manager ', - Improve localization comment for empty Sync panel ', - Improve localization comment for "Send Feedback" ', - Improve localization comments for Menu strings @st3fan Do you want to double check, or find another suitable reviewer in the team?', Comment on ', ', Improve localization comments LGTM', Change landed in ', v5.x 68302608335f698138de76b5f21b48c73fd4f9d7', One comment slipped out for "Delete" (I fixed one, but not the second) ', I'll take care of it as soon as I have an answer in ", .', Ongoing work in this branch ', The first step to make clearer comments would be to stop using "title" as a synonym for "label" or "text". A title is a specific element of the UI, that\'s really confusing, especially in things like "title for the button".', Created ', ', Improve other localization comments r? Brian this time (slowly going through all iOS devs :-)), since it covers the discussion in ', . Also improved localization comment for Home page setting, given the question in dev-l10n right after extracting string.', Comment on ', ', Improve other localization comments Added a comment about sharing UIConstants.CancelString everywhere since it seems like that's really what we want. Besides that, looks fine to me!", Thanks Brian, as explained in the PR it's not safe for me to touch real code in .swift file, so I'll merge the changeset as it is. I'd also like this change to be ported to v5.x. Feel free to file a follow-up to fix that though. master: 540782100fc1dd0787b632b2850ce7a8c6ac227e ", Additional patch v5.x 13429dec7f609d03d5e195bc63de0ec90643b7f7', Since 5.0 shipped, closing this one. Pending bug should be moved to a tracker for next release.' 
id=1222911	 "Isn't this expected?", Yes, that's exactly what's supposed to happen. The 'delete' means 'never again show me this domain on my Top Sites'. Alas, some users will be confused, but that's because Top Sites is really confusing, and there's not much we can do to band-aid it." 
id=1168452	 "Maybe we'll try using ", 's solution for this instead.", I haven't seen this happen as of late. I have a feeling that the UIStateRestoration work Stefan did sorted this out -> ", I'm only seeing this on the iPad Air simulator and what seems to be happening is the system is failing to take a screenshot of the latest screen so it resorts to the one it previously had. The console is spewing out the following: Snapshotting a view that has not been rendered results in an empty snapshot. Ensure your view has been rendered at least once before snapshotting or snapshot after screen updates. I believe this is also causing problems with ", since if it doesn't have a snapshot prepared it most likely defaults to the launch image.", Seems thats the following console error: Snapshotting a view that has not been rendered results in an empty snapshot. Ensure your view has been rendered at least once before snapshotting or snapshot after screen updates. Is being caused by us using the UIView snapshot API and not the system taking the background snapshot it doesn't seem that this relates to the issue we're seeing.", Closing as WFM until it becomes a problem and reproducible.' 
id=1179807	 "Investigate listening for notification changes to invalidate the Top Sites so we're not getting outraced.", seems like "onLocationChange" is not being fired, gonna investigate', being fired for certain sites* thus resulting in some top sites not being added', *** ', has been marked as a duplicate of this bug. ***', This was fixed by backout, right?', Unless there was a backout this afternoon, I was still seeing this on a build I made this morning while testing my other bug.', @wesj I haven't checked!", This seems to work now..(?)', The original bug was fixed by the backout. I think maybe some of the problems Aaron was seeing were related to ', (i.e. in the right set of circumstances, we might have set a limit on the top sites query of 3 or something). I'm going to close this, but feel free to reopen if I'm wrong.", Still reproducible in the sense in that we have delayed or slow writes to about:home so if you open a new tab as the prior is still loading you won't see it on about:home until you re-visit about:home later. At that point you will see your tabs there. Is there anything we can do to speed this up?", We could add the site earlier (during page load?). That would probably have a tiny impact on page load perf, and might result in sites being added that wind up being redirects.', This behavior works for me.', This is still reproducible.', Triage result: WONTFIX.' 
id=1257592	 'BTW, I\'m not completely sold that we want to do this -- I think it would be valid to consider the Top Sites panel "frozen" while the user is looking at it. It could be annoying if the site of sites changes out from under you while you\'re using the UI. But I do want to push for consistency: as mentioned above, we *do* already do live updates on sync completions, so if we like that behavior, it makes sense to do it here, too. I\'d consider this fixed for one of the following: 1) Refreshing Top Sites on location change as mentioned above. 2) *Not* live refreshing on sync changes. We refresh on sync now because we want to handle the case where the user goes to Settings > Sync and returns to their Top Sites, so if we like option 2, we could change the condition to refresh only if the panel isn\'t visible.', I think it works as-is. If I'm loading a site, why would I expect to see it show up automatically if I hit topsites while loading it?", See ', . If we don't want sites to refresh Top Sites while we're looking at it, we should change our current Sync behavior, right? As it stands now, a Sync can cause all of the top sites to change in front of the user.", I guess I'm not understanding the problem. Yes, a sync will cause all the top sites to change, but are you suggesting that there's an expectation to see the live sync when you have just visited a site?", Here's the way I see it. We don't, as a rule, change Top Sites while yo re viewing it: the situation in ", is a very artificial one. Not only is it uncommon for a page to load significant new domains while yo re hawkishly watching Top Sites, but for established users a single page load isn't going to affect Top Sites anyway! Sync is an exception to this rule because new users set up Sync, back out of Settings, and don't see their downloaded data until they create a new tab. That's jarring. It's not enough to only refresh in the background; perhaps the sync finishes 100msec after they return to Top Sites! Consistency is only an end goal if (a) the user notices it, and (b) the user has a mental model that demands it. I don't think either is true in this case, and the cost of refreshing top sites on every page load is significant, so we shouldn't do it.", (In reply to Robin Andersen :tecgirl from ', ) ', My question is: do we want top sites to be updated if the history changes while they're visible? An incoming sync from other devices causes new history to be added, potentially changing the set of top sites. A page that finishes loading in the background also adds a new history entry, also potentially changing the set of top sites. In the first case (sync), we update the top sites while the user is looking at them when the history changes; in the second case (pages loaded in the background), we don't. These actions both have the same effect on history -- new history items being added -- so my assertion is that Top Sites should handle them the same. (In reply to Richard Newman :rnewman from ", ) ', ', Not artificial/uncommon at all -- as mentioned in ', , you can reproduce this by tapping the URL bar any time the site hasn't started to load yet. I see this a lot, whether it's due to a poor connection on my end or a slow site. ", For established users, sure -- and that just means refreshing after these cases will have no effect, which is fine. For newer users, Top Sites will change frequently with each page load. ', For this bug, I'm suggesting we simply add OnLocationChange to the observed events at 1 (that is, assuming we want to go with option 1 in ", ). I don\'t think the cost is significant; we will only do the refresh when it matters and when Top Sites is visible. If by "refreshing top sites on every page load" you mean updating the DB for each location change even when Top Sites isn\'t visible, that\'s a different bug altogether. That said, I still think that\'d be an important change to consider: see 2 ! 1 ', 2 ' 
id=1126117	 'Created ', ', Pull request', Fixed by backout ', .' 
id=1137279	 'Created ', ', Pull Request My first pull request on this project. Feedback/suggestions welcome :)', Comment on ', ', Pull Request Hi Matthew! Thanks for the PR -- we love new contributors! Usually wesj would take this review but he's just had a new kid so I've redirected the review request to bnicholson. bnicholson: if this isn't your bailiwick let's you and I talk it through on Monday.", (In reply to Nick Alexander :nalexander from ', ) Thanks Nick :)' 
id=1188016	 "I think it's better to vertically center the content. It's worth noting that Apple uses vertically centered empty states in many apps (Mail, App Store, Photos, Safari). I can also work on this.", Question for UX.', Robin to decide if this is something we should track.', I don't mind if the content is vertically centered, if we can do a few things: 1) Compensate for the bottom nav bar on iPhone portrait\u2014the reason I moved it up in the first place was because even though it was vertically centered it hung too low due to the nav bar 2) Open up the padding a bit more, which would result in having to stack the button on Remote Tabs (like the error template) 3) Add a header to the History panel to visually match the other empty panels 4) Increase the font-size for iPad Think we could handle all of that in this bug? If not, happy to file separately.", This new bug encompasses what was addressed in this bug. *** This bug has been marked as a duplicate of ', ***' 
id=1200218	 'Created ', ', ', Merged' 
id=1170699	 'Seems like the same as ', *** This bug has been marked as a duplicate of ', ***' 
id=1212327	 "So I just re-ran this build through the firefox-ios-builder/build.sh script and it works fine now. This is a really odd one because build.sh really does a completley clean build: it clones a fresh copy of the firefox-ios project and it even configures its own DerivedData folder per build. I really don't get why this fails randomly, the build should be totally predictable.", I think this may be a solution: -destination generic/platform=iOS From: ', The reason it's doing this is that all products for Alamofire are build using the same name and placed in the same directory. It is therefore pot luck with alamofire.framework is picked up during the build process - sometimes it's the iOS one, sometimes the OSX one. Also, the Alamofire OSX target has a default iOS SDK, which is incorrect - as an OSX target it's iOS defaults should be empty. The ultimate problem is that we are using carthage completely incorrectly - we should not have the xcodeproj's for our dependencies as subprojects and should only be linking to the frameworks. Using carthage bootstrap for installation/building should create the projects ready to put into the projects, but instead we use carthage install and then build all of our carthage dependencies through xcodebuild every time, forcing a relink every time. A simple fix for this is to change the alamofire product name for the OSX and watchOS targets to make them separate. This fixes the problem locally but not globally ( a new install would have to be edited manually). I need to take a look at the way we are using carthage and fix it so we are using it right. It is fundamentally broken with our current usage. Maybe I might start liking it if it works the way it should.", (In reply to Stefan Arentz :st3fan from ', ) ', This makes no difference to the build', Created ', ', Pull request', I have linked to the branch here, but I also have created a similar alamofire fork for master, so once the Alamofire upgrade has occured, it _should_ be as simple as just moving to the master of the fork.', Comment on ', ', Pull request LGTM' 
id=1183210	 'Fallout from ', +CC Bryan', (missed a question mark after that commit URL)', @Aaron, just put back the code that I deleted and it still flickers; do we want it not to flicker?', (In reply to Bryan Munar (:bkmunar) from ', ) ', No :P', Created ', ', Pull Request @brain, This pull request resolve flicker issue.', Comment on ', ', Pull Request Since this is the same PR as ', , so this doesn't need a separate review -- we can just close this bug when ", is fixed.', Fixed as part of ', .' 
id=1250163	 'Created ', ', PR', master f3b5ba5e12bec948a10b82a1f270c4baddf4b059' 
id=1100581	 
id=1129161	 'This is waiting for new UX mocks for the settings/status screen. tecgirl, darrin: talk amongst yourselves :)', The actions that might be required to get a Firefox Account into a healthy state are: * needs to be verified (complete the email verification loop); * needs to have the password entered to re-connect; * needs to have Firefox itself upgraded (should never happen); * needs no action -- already healthy. We will need to expose all of these to the user both in the settings and in the Synced Tabs and Reading List panels.', I started to put some mockups in the Accounts section here, will attach when we decide they are what we're looking for :) ", needinfo me if you want further clarification', Created ', ', Link to Github pull-request: ', bnicholson, stefan: This re-implements the Firefox Account sign in and status content views, and re-exposes the Firefox Account state. It's not pretty but it'll do for now :)" 
id=1203156	 'See if we can use the same copy we have for the app store', The app store copy also seems to have the same issue about including desktop-only instructions: For complete details go to: ', Mozilla Firefox is free and open source software, built by a community of thousands from all over the world. There are a few things you should know: - Firefox is made available to you under the terms of the Mozilla Public License (', ). This means you may use, copy and distribute Firefox to others. You are also welcome to modify the source code of Firefox as you want to meet your needs. The Mozilla Public License also gives you the right to distribute your modified versions. - You are not granted any trademark rights or licenses to the trademarks of the Mozilla Foundation or any party, including without limitation the Firefox name or logo. Additional information on trademarks may be found here: ', . - Some features in Firefox, such as the Crash Reporter, give you the option to provide feedback to Mozilla. By choosing to submit feedback, you give Mozilla permission to use the feedback to improve its products, to publish the feedback on its websites, and to distribute the feedback. - How we use your personal information and feedback submitted to Mozilla through Firefox is described in the Firefox Privacy Policy (', ). - Some Firefox features make use of web-based information services, however, we cannot guarantee they are 100% accurate or error-free. More details, including information on how to disable the features that use these services, can be found in the service terms below. - In order to play back certain types of video content, Firefox downloads certain content decryption modules from third parties. Mozilla Firefox Web-Based Information Services Mozilla Firefox uses web-based information services ("Services") to provide some of the features provided for your use with this binary version of Firefox under the terms described below. If you do not want to use one or more of the Services or the terms below are unacceptable, you may disable the feature or Service(s). Instructions on how to disable a particular feature or Service may be found below. Other features and Services can be disabled in the application preferences. SafeBrowsing: Disabling the Safe Browsing feature is not recommended as it may result in you going to unsafe sites. If you wish to disable the feature completely, follow these steps: - Open the application preferences - Select the Security selection - Uncheck the options to "Block reported attack sites" and "Block reported web forgeries" - Safe Browsing is now disabled Location Aware Browsing: is always opt-in. No location information is ever sent without your permission. If you wish to disable the feature completely, follow these steps: - In the URL bar, type about:config - Type geo.enabled - Double click on the geo.enabled preference - Location-Aware Browsing is now disabled 1. Mozilla and its contributors, licensors and partners work to provide the most accurate and up-to-date Services. However, we cannot guarantee that this information is comprehensive and error-free. For example, the Safe Browsing Service may not identify some risky sites and may identify some safe sites in error, and all locations returned by the Location Aware Service are estimates only and neither we nor our service providers guarantee the accuracy of the locations provided. 2. Mozilla may discontinue or change the Services at its discretion. 3. You are welcome to use these Services with the accompanying version of Firefox, and Mozilla grants you its rights to do so. Mozilla and its licensors reserve all other rights in the Services. These terms are not intended to limit any rights granted under open source licenses applicable to Firefox and to corresponding source code versions of Firefox. 4. The Services are provided "as-is." Mozilla, its contributors, licensors, and distributors, disclaim all warranties, whether express or implied, including without limitation, warranties that the Services are merchantable and fit for your particular purposes. You bear the entire risk as to selecting the Services for your purposes and as to the quality and performance of the Services. Some jurisdictions do not allow the exclusion or limitation of implied warranties, so this disclaimer may not apply to you. 5. Except as required by law, Mozilla, its contributors, licensors, and distributors will not be liable for any indirect, special, incidental, consequential, punitive, or exemplary damages arising out of or in any way relating to the use of Firefox and the Services. The collective liability under these terms will not exceed $500 (five hundred dollars). Some jurisdictions do not allow the exclusion or limitation of certain damages, so this exclusion and limitation may not apply to you. 6. Mozilla may update these terms as necessary from time to time. These terms may not be modified or canceled without Mozilla\'s written agreement. 7. These terms are governed by the laws of the state of California, U.S.A., excluding its conflict of law provisions. If any portion of these terms is held to be invalid or unenforceable, the remaining portions will remain in full force and effect. In the event of a conflict between a translated version of these terms and the English language version, the English language version shall control.', The broken links are fixed in v1.0.1' 
id=1151959	 
id=1191767	 'The WKWebView already listens to keyboard events and will adjust its content properly when the keyboard overlaps.', Created ', ', PR: ', This patch removes all keyboard handling code and lets the WKWebView handle it.', Tested on 4S, 6 and iPad in simulator and on real device.', Comment on ', ', PR: ', Just a short comment about a possible code cleanup.' 
id=1142490	 'Created ', ', PR: ', This patch adds a button bar to reader mode. Couple of notes: * I could not correctly get the scrolling of the toolbars to work with this new bar added. So to not block on that I have *temporarily* disabled the hiding of the button bars. I will file a followup to fix this as soon as possible. I'd like to land this first so that it can be looked at. * Not all the buttons work. This is because some of the underlying reading list storage has not been committed yet. I have added `TODO` comments in the code and will file a followup for the database changes needed. * I have removed the old hack of a long press on the star button to add an item to the reading list. This can now be done with a press on the Add to Reading List button in this new toolbar. Note the second point though, the button will not just yet change to a trashcan icon until the database changes have been done.", Created ', ', PR: ', Ignore previous comment. This is the right PR and comment. This patch brings the Reading List home panel up to date with latest UX specs. Couple of notes: * As an experiment I have put all constants, offsets, fonts, colors in a `ReadingListCellUX` struct as `static` members. This makes it easy for the UX team to fiddle with these settings. Lets see if this works or not. It makes the code a little more difficult to handle because of a layer of indirection but maybe it makes the 'tweak things to perfection' easier. * For the left and right swiping of the row (for Mark as Read/Unread and Delete) I have imported the `SWTableCellView` dependency. This did not work as a Carthage dependency so I imported the sources straight into the `ThirdParty` directory. * A bunch of things in this list do not work because they depend on database / storage changes. These are marked with `TODO Hook up Data Store` and will be addressed in a followup bug. Enjoy" 
id=1216060	 'Sorry I have file the I unfinished bug report. I can\'t open new tabs with anchor link. I can open the page in same tab. Reproduce step: 1) long tap the anchor link 1 . 2) select open new tab. Actually result: - can\'t access.("#" was parsed rule code-style) Expected result: - we can access the page with anchor link. 1 ', Should be fixed by ', , and STR seem to be working for me now. *** This bug has been marked as a duplicate of ', ***' 
id=1164140	 "Tracking this, but unless sync is doing UA sniffing, I'm fine not tracking it.", One-line change to StorageClient.swift, so this can stay tracked :)', Created ', ', Pull request', Comment on ', ', Pull request Comment on the PR. Thanks for grabbing this!', Created ', ', Pull request', Made the changes suggested.', Comment on ', ', Pull request A few changes; see comments on PR.', Created ', ', Pull request', Comment on ', ', Pull request Cleaned up and merged: 3a910bc' 
id=1173204	 'Created ', ', PR ', Looks like it was being caused by a strong reference cycle between the CustomCell (Tab) and SwipeAnimator.', Merged.' 
id=1110997	 'Not seeing this on my end...this might have been fixed when the tabs button was added. Please reopen if you can still reproduce.' 
id=1240815	 "I don't think we should localize this. We should consider removing it considering we are not actually working on downloads.", Agreed. We should remove this.', Need research. We may be able to show an app picker instead.', Would it be possible not to block localizability on general decision what to do with downloads?', Created ', ', Strings Pull Request Strings only', I'll merge this in prior to branching for v5.0 today.", master db350f7cc839a34210dcb83e45713a4ddd81fb0e' 
id=1131281	 'Created ', ', Pull request This implements a sqlite datastore for bookmarks. I tried to keep from changing the existing code as much as I could. I don't love the existing code, but it was just to easy for this code to boil the ocean. I did change its ID field to a guid one, since most of our other data sources look that way. I then deleted all the old unused code.", Comment on ', ', Pull request I have some questions and concerns but nothing major, and no need to block on me getting my work reviewed. Thanks, y'all!" 
id=1194388	 'Created ', ', ', Adding the B-boys for review and Darrin for UX feedback', B-boyss!!', Comment on ', ', ', Seems simple enough to me.', CC Robin in case she wants to steal that uireview.', Comment on ', ', ', LGTM. Still see the flicker but I suppose for most pages, white is better than black.', Merged' 
id=1145383	 'I also encounterred this problem. my device: iphone 5s/ ios 8.2 / Build 5', *** This bug has been marked as a duplicate of ', ***' 
id=1206730	 "This is how it works on Android, too: we don't save the selections unless the user actually goes through with clearing the data.", *** ', has been marked as a duplicate of this bug. ***' 
id=1231534	 'Created ', ', Pull request Hey Stephan, here's a small patch for this one :)", Comment on ', ', Pull request Looks good - thanks for the patch!', Landed master b7015711372f6189ccb6b6e42f3cad37973fa629' 
id=1220847	 'Do we appear in the log?', Doug, do you have more logs? Do you have crash reporting turned on in Firefox settings?', Created ', log1.txt Build: Beta 1113 Device: iPhone 6 Plus (9.1) Can't say what caused this, but SpringBoard is restarting every time I try to open Firefox. I don't see any crash reports ", Can you get the JetsamEvent-2015-11-16-105221.ips file via Settings -> Privacy -> Diagnostics/ It contains some more hints.', Created ', JetsamEvent-2015-11-16-105221.ips.synced', Catalin, is this still reproducible? Stefan mentioned on IRC that we will provide you with a build for the iPad to test (leave the iPad as is in the meantime please).', Yes, I can reproduce on the configuration mentioned in ', . I didn't re-install or update Firefox on this device because I'm not sure that the issue will reproduce after that.", no longer can reproduce. i recall some warning in the log about a surface allocation failure. Sorry.', Created ', log1302 Logs from build 1302', With the local web server disabled, Firefox didn't crash. When re-enabling, Firefox crashed again. After skipping session restore one time, I wasn't able to reproduce the crash again", I've ran into this issue again on build 1308.", *** ', has been marked as a duplicate of this bug. ***', We need to get ', going so that we can take a look at the tabState that may be causing this.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', There is a spike in users experiencing this on their iPhone with iOS 9.1 on SUMO.', If you need an active device that is experiencing this, I can provide logs or any details. Had to go back to using Chrome until this is fixed.', (In reply to Casey Johnson from ', ) ', Yes, please provide all logs. Please attach them to this bug.', Duplicating this to 1238006 since all the recent discussion happened there. *** This bug has been marked as a duplicate of ', ***' 
id=1177613	 "The redirection to the correct locale works fine. But, the titles are hardcoded in english in the application. I'm filing a separate bug for that and we can see if we think that is important enough to include in v1." 
id=1135249	 'Created ', ', Pull request This turns out to be a one line thing, except we'd have to do it in every panel. I took the chance to move all of the duplicated functionality from all of these that I could into one class. That guy HomePanelTableViewController, basically stubs out all the same basic functionality for tables. They all use the same cell and header types, they all dismiss the keyboard when they're dragged, they all support pull to refresh, etc. I even moved the SearchViewController which might be a bit contentious, since its a bit of a different beast. I think this will be useful when we start adding the footer buttons as well though (i.e. we can make this not a TableViewController if we want without having to update every class separately). Also, I deleted all the unused xibs.", Comment on ', ', Pull request r=me with cleanup notes. A bit unhappy with making SearchViewController extend HomePanelTableViewController since it's neither a panel nor in home/.", Renamed the base class. We should move these common classes to some special folder I guess (Toolbar and TwoLineView as well)', Can we also hide the keyboard when you change to a different home panel by tapping on its icon in the toolbar? I don't think there is a reason to keep the keyboard on screen then?", Good idea. File a new bug! >:)' 
id=1123501	 'I was testing on an older build before the search providers landed. But the results with the most recent build as of today are the same. Testing on an iPad Mini with iOS 8.1.2', I am not completely sure this is a Yahoo specific problem, but so far the only page where I have reliably reproduced this error is the search results page of ', . In the WKWebViewDelegate nothing fires after clicking links on the search results page. Connecting the Safari Web Inspector does not show any errors.', On the Yahoo page the problem is the target="_blank". The problem is that we don\'t support it. <a id="link-6" class="yschttl spt" href="', -" target="_blank" data-bk="5141.1"> We need to implement the WKUIDelegate and specifically the webView:createWebViewWithConfiguration:navigationAction: delegate method, which is called when a site requests a page to be opened in a popup or a new window. Will file a bug.', To be clear, not a Yahoo problem.', Created ', ', Pull request', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1197845	 "Step one is to figure out how much work this'll take. We need to budget time for this, probably for 1.1, which will mean v1.0 stays on Carthage. Is there any reason not to do that that I'm failing to see?", Nope - just a suggestion. This can totally wait for 1.1 and until iOS 9 is stable.', I'd like to work on it", This bug is out of date. We've since tamed Carthage and it's in a pretty good state now. If yo re looking for a good first bug to start hacking on, want to check out ", ?' 
id=1210805	 'Created ', ', PR: ', This patch removed the built-in Your Rights page and shows the external (online) version instead. This was requested because the external page will be correctly localized to all our supported locales and can be kept up to date more easily.' 
id=1146848	 'This started working as expected in build 7.' 
id=1278668	 'Created ', ', ', Comment on ', ', ', Left some feedback on the PR but works pretty well!', Comment on ', ', ', Just one last nit to fix but looks good!', Resolved with patch on meta.' 
id=1169392	 'Created ', ', PR ', Comment on ', ', PR ', Just curious, what regressed this?', This commit where I did some refactoring on the URLBarView: ', Ah, OK. Looks like that may be related to ', and ', as well?', Looks like ', was causing by something else.', was related timing issues in the TabTrayController.', Merged.' 
id=1160197	 'Agreed, we need to improve this for sure.', Resolved with the improve tab animation patch. *** This bug has been marked as a duplicate of ', ***' 
id=1235608	 "How does Enter a passcode: 'Title for the screen when the app asks the user to enter a new passcode' Re-enter passcode: 'Title for the screen when the app asks to re-enter a passcode to confirm new passcode' sound?", Oops wrong Stef', (In reply to Stephan Leroux :sleroux from ', ) ', It sounds bit better but do not solve the problem - on ', it doesn\'t look that these are titles at all, "Set passcode" seems to be.', Thanks for filing this Stef. Could you offer a suggestion either a new comment or a new title that would satisfy the issue please, similar to ', ?', "Enter a passcode" and "Re-enter passcode" strings seem to be (are they?) descriptions/form legends for passcode input field or labels for it, maybe: - Passcode input field description label for entering a new passcode - Passcode input field description label for re-entering a passcode to confirm new passcode', Comments updated as part of ' 
id=1314224	 'Created ', ', pull request', Comment on ', ', pull request James is busy with another project now. But I am happy to review this.', master ', v6.x 7f4b2c1' 
id=1181877	 '(In reply to Robin Andersen :tecgirl from ', ) ', Yeah, that works for me. ', Yeah we can center it there ', hm, I'm open to this. But I think a subtle arrow in the beginning isn't a bad thing either.", Created ', ', PR', Comment on ', ', PR Works for me as long as UX approves.', Comment on ', ', PR Looks good. I nudged the page controls a bit to balance the spacing on the third slide.' 
id=1249026	 'Created ', ', Pull request', Comment on ', ', Pull request Nice catch. Looks good!' 
id=1105562	 'This is a MAYBE bug. Since we are working on making the sharing code part of a sync-cycle, we may not want to follow the original plan anymore. (I think :rnewman already commented out the HTTP calls that the sharing extensions make)', The REST API has been deprecated.' 
id=1250753	 'Created ', ', updated blue color for the 'More Info\u2026' link in Settings", Created ', more-info-blue.png before/after comparison' 
id=1094262	 "After some experimentation I have some bad news to share. It seems Action Extensions can only work full screen on phone devices. On tablet devices they can work either in fullscreen or in a pre-determined modal dialog that is centered above the application's greyed out transparent background. So this means that for Action Extensions, we cannot implement the design as shown in ", (Share Extensions do not seem to have this limitation. I am not sure why there is a difference between the two.) I have attached three screenshots to this bug to show what the flow would look like with a full screen Action Extension.', Created ', Action Extension Flow Step 1', Created ', Action Extension Flow Step 2', Created ', Action Extension Flow Step 3', So to be clear, we do have a full screen view controller that we can customize to our needs. In the third screenshot you can see that I added a tableviewcontroller in a navigationviewcontroller. We can do all the usual customization like cell headers, footers, more content, custom tint colors, fonts, etc. It just has to live in that full screen area.', I will restyle this then. Thank you! What are our UI options for once you tap send? Success/Error cases?', What happens happens after tapping send is not completely clear yet. I think ideally we just send the tab in the background and make the Action Extension UI go away as soon as possible. This is what most extensions seem to do. But it is not clear yet if that will be possible. We may be forced to do the sending while the Action Extension is still on screen, thus showing some feedback/progress. This won't be clear until later this month I think. (It depends on some technical details we have not fully figured out yet.) We do need a state for this Action Extension in case the user is not logged in yet: people need to log in to the app before the extensions work.", Created ', ', Pull Request', Comment on ', ', Pull Request I'd like to move the code around a bit, but overall looks good.", Created ', ', Pull Request', I have updated the PR. It has been brought up to date with the current code base. Refactored most of the code so that it uses the AccountManager and (Data) Providers.', Comment on ', ', Pull Request r=me with comments in PR.', Reopening this because this is using an early version of the UI that needs to be revisited and updated', Robin are these the latest UI mocks? ', ', Yes, Stefan, those are the latest, thanks for digging them up! Will that work?', *** ', has been marked as a duplicate of this bug. ***', Created ', emptySync.zip', Created ', ', PR: ', This patch brings the Send Tab UI up to date with the design at ', It also contains a fix for ', which makes sure your Firefox Account credentials are stored in a way so that they are shared with the extensions.', Comment on ', ', PR: ', Left some comments on the PR', *** ', has been marked as a duplicate of this bug. ***' 
id=1263582	 'Created ', ', Pull request on GitHub', Also landed in v4.x ' 
id=1189870	 "I've wanted this for ages.", Created ', ', Pull request', Comment on ', ', Pull request ', Comment on ', ', Pull request Thumbs up for the overall approach; left some comments in the PR.' 
id=1193012	 'When I designed these panels, it was never an intention to have them blurred. ', Applies to every panel, including top sites and empty states.', Created ', ', ', Comment on ', ', ', Let's go with this and immediately tweak the color if we need to.", Merged' 
id=1144471	 'Now fixed. *** This bug has been marked as a duplicate of ', ***' 
id=1153285	 "After looking at this for a while, mostly reading WebKit code, I don't think there is a simple solution for this that will not involve private APIs and patching UIKit/WebKit methods. I think we should leave this menu as it is now and file a bigger bug for post v1 to re-implement it in our own code, fixing all the regressions that we encountered when we previously tried. I am marking this as tracking-? so that we can discuss this during triage.", More technical: Using the Open action from the action sheet that appears when you long press on a link results in the - webView:decidePolicyForNavigationAction:decisionHandler: being called. But, from the WKNavigationAction we cannot see *how* that link was opened. We don't know if it was a regular tap on a link, or if the user went through the action sheet. We miss that context. We can *maybe* hack around that by patching UIAlertView or WKWebView and inject our own code, but I think that is fragile and probably 'private API usage' in App Store terms.", This hurts, but let's discuss.", st3fan, just to be clear what's the NavigationType for the decidePolicyForNavigation 1 ? I would expect its Other, but your message makes it sound like its actually LinkActivated? ", Still investigating, but we'll track it.", I'll take a look at this.", Well, bad news: user content scripts are not injected into iframes, so we'll still have ", . It looks like we can't do much better than the first implementation we tried in ", .', Not sure how I missed it, but Stefan pointed me to initWithSource:injectionTime:forMainFrameOnly:, which is exactly what I was looking for.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I tested a bunch. Works great! Just some questions in the PR comments.', Going to look into element highlighting/Open In Background as follow-ups. ' 
id=1284682	 "I'm guessing this will cause a crash loop on session restore. We should fix this for 5.1", Created ', ', Pull request', Comment on ', ', Pull request Looks good to me, though I don't know why we have the fetching logic duplicated in two places. Oh well, separate bug!", Looking at the history, it seems that this patch includes some work that was done for Top Tabs. When I try uplifting it I get a weird merge resolution. I'd vote to keep this on 6.0 for now.", Yeah, it's an edge case scenario anyway \u2014\xa0should be fine to save it for 6.0." 
id=1165006	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', nits on GH. If it works for you, it works for me.' 
id=1217728	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1175574	 'Created ', Notification - Today + Clipboard - SC.png', Created ', Notification - Today + Clipboard - Highlight.png', Created ', todayCopiedLink.zip', Highlight state: the entire cell with R216 G216 B216 A44', This should not be its own widget, but part of ', Created ', ', Pull request Added localizable string. Added icons, but not using them yet.', Created ', Open copied link, no icon or link.', Comment on ', Open copied link, no icon or link. Note the grey bg is only on press.', Created ', Copy link button not visible on the lock screen', Created ', Copy link visible when there is a URL on the clipboard', Created ', Copy link button not visible if there is non-link on the clipboard', Comment on ', ', Pull request Just a few minor nits and tings', Squashed and merged. Needs uplift for 4.0', Resolved.', Comment on ', ', Pull request LGTM. Small nit about the magic error code 257.', v4.x b8b7950', Noting via testing that clipboard URL's acquired via private tabs can be visible" 
id=1254223	 "@emin Is the searchplugin showing up fine on Android? I wonder if it's the empty line in the middle of the data URI. ", @flod It works fine on Android. Just checked base64 string, looks like correct (converting to image was successful). Wikipedia don't have that new line, most probably that is causing problem.", Fingers point to newline.', Once confirmed I can port the change to Aurora, so it won't create issues in future syncs ios<->Android.", Confirming this is the newline in the <Image> tag. Removing the newline shows the correct icon.', v3.x ', master ', :flod if you do this change in Android then we will pick it up next time we sync search engines.', Done ', ' 
id=1133918	 'Created ', ', Pull request Patch', Comment on ', ', Pull request r=me with comments fixed.', Landed' 
id=1119564	 'Created ', ', Pull request', Comment on ', ', Pull request I'm still surprised viewWillDisappear isn't called here, but the change seems find regardless..", You were right to be surprised since viewWillDisappear *is* called. The problem is that the notificationToken apparently holds a strong ref to the observer, so even though we've removed the observer from the notification center, we still have a controller -> token -> observer -> block -> controller cycle. Setting the notificationToken to nil in viewWillDisappear is another way to fix this, but I think we should just get in the habit of always passing unowned self to the notification center...or not using the notification center at all with blocks. This nice post explains why: " 
id=1209069	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', *** This bug has been marked as a duplicate of ', ***' 
id=1195759	 "Sharing from the USA Today app to for example the Safari Reading List also does not work. And the Safari 'Add to Bookmark' share option does not even appear. This may just be a case of USA Today not correctly sharing a URL.", This might need logging. (On-device logging won't be easy: app containers.)", This is what USA Today shares: <NSExtensionItem: 0x136629900> - userInfo: { NSExtensionItemAttachmentsKey = ( "<NSItemProvider: 0x136629ea0> {types = (\ \\"public.plain-text\\"\ )}" ); } So that is unfortunate. And we should probably not even show up. I think we should tighten our extension activation rules and only show if there is a URL.' 
id=1277227	 'I think this is ', .', Is this related to ', ?', hm.. I'm honestly not too sure because a) I tried looking into this and kind of failed lol... and b) but I think it might NOT be because the flicker is separate from the Wikipedia tile magic stuff. If you see in the video, some tiles turn into Wikipedia (AND some turn into Yahoo!!) before the spazzy flicker happens. Maybe a reuse issue with the icons/backgrounds?", Please re-test on master with ', resolved, let's see if this is resolved too. Re-open if this is still reproducible. *** This bug has been marked as a duplicate of ", ***', Tested on master 6cab24f7 on iPad mini 4 and iPad Air 2. The issue is still reproducible following the above STR. Please note that the issue is reproducible only on tablet devices.', :sleroux can you take a look at this?', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Hrm, I wish this stuff was better documented. Do the top sites still layout correctly if rotating the device between steps 3 and 4? If so, WFM.', master 435e66383c8d1532878b413ed679eb0d59d4b91a', v5.x f39865b' 
id=1157843	 'Created ', ', PR ', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR ', Results in a startup crash...', Note that ', just landed, so for whatever fix we end up with here, let's make sure all of our ViewMemoryLeakTests are passing to verify.", *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', Updated to not crash the world.', Comment on ', ', PR ', LGTM', Can you confirm all tests pass now with this fix?', All the tests that pass for me (not all of them), pass after this as well. The about:home ones give me grief with and without this patch. I gave up on fixing that.' 
id=1179422	 'Created ', ', PR: ', Work in progress. Adds a Credits & Acknowledgements item to the About section in the Settings. That opens a local web page that lists the licenses of all the dependencies we use.', Darrin, how do you want this to be exposed in the settings? I have a page in progress that is very much like about:license on Desktop. What should we call it in the settings?', Comment on ', ', PR: ', Adds a Licenses item to the About section in the Settings. That will open a local (about:license) web page that shows the MPL 2.0 for the main project and also lists the licenses of all the dependencies we use.', Comment on ', ', PR: ', LGTM - I also rebased it from master to update it with the latest build changes for Xcode 6.4', NSLocalizedString note seems wrong, incorrect screenshot link maybe?', I am reopening this. Looks like this PR is not complete. It is missing changes that were made. I wonder if I forgot to push some. For example the string in settings should be "Licenses" .. and I reformatted the licenses to nicer looking HTML. Looking into what happened here.', Created ', Screenshot 2015-07-08 10.43.23.png Screenshot for localizers', Followup fix ', This includes the following changes: * Changed "Licenses & Acknowledgements" to "Licenses" * Updated the l10n comment and included a correct screenshot * Updated Licenses.html to include mobile friendly copies' 
id=1187686	 'Created ', ', Pull Request Refreshed search query before entering text.', Thanks for catching this!', Comment on ', ', Pull Request Makes sense to me. Thanks!' 
id=1125849	 'STR: 1) Start App in portrait mode 2) Open ', 3) Enable Reader Mode 4) Switch to landscape mode 5) Switch back to portrait mode Expected: Reader Mode button is still visible. Actual: Reader Mode button has gone with the wind.', Created ', ', Pull Request' 
id=1199849	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r=rnewman' 
id=1147492	 '*** ', has been marked as a duplicate of this bug. ***', I'm going to close this because I can't reproduce this. This is a pretty old bug and I am pretty sure we covered these localhost urls in other related bugs." 
id=1279500	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Comment about potential copy-pasta error but I think the comments look good.', Merged into master.', I don't recall what happened 2 weeks back about our discussion about landing new strings. Should this be uplifted to v5.x?" 
id=1224756	 'Created ', ', Link to Github pull-request: ', Just wanted to check that this was the desired behaviour - if I select On for Saved Logins and then leave and then return, the toggle does not remember my previous choice and returns to Off. I can see why this might be the desired behaviour, but just in case...', Also, do we want some kind of dialog that would inform the user that enabling password clearing will remove all their passwords across their account?', (In reply to Emily Toop (:fluffyemily) from ', ) ', I filed this as bug ', and it was WONTFIXED.', (In reply to Emily Toop (:fluffyemily) from ', ) ', It remembers your choice if you go through with the action (according to my testing). I assumed that's so users can get in a groove of clearing just their cookies. (In reply to Emily Toop (:fluffyemily) from ", ) ', ', .', (In reply to Emily Toop (:fluffyemily) from ', ) ', Yes, since we now have this disabled by default and not immediately obvious what the action is, we should let the user know that logins/passwords will be cleared from all instances if they tap to enable it. This is related to ', but is a separate issue so I'll file a new one." 
id=1161258	 'This happens because a UIVisualEffectView is used to add a blur effect (see viewDidLoad in HomePanelViewController). On devices that are not powerful enough to render the blur (such as the iPad 2/3) this falls back to a grey tint which causes the #EEE. Devices with enough computing resources (such as the iPhone or iPad Air) will render the blur which makes the white background shine through. What is the reason for having the blur effect at all? There seems to be nothing behind the blur view to actually get blured. We could either remove the blur view altogether or disable it on under-powered iPad models.', (In reply to hennes from ', ) ', Thanks for the explanation! Yo re right, blur here is inefficient. Let's start by disabling where it's obviously an issue, on the under-powered devices. Darrin, should we keep blur on the home panel for devices that can render it? What's the benefit if there's nothing behind it?", Personally, I think it's a serious issue if someone opens up Firefox and sees a bunch of gray LOL", Bug is rendered non-bug if wes's new top sites thing lands. Please resolve bug when landed, Wes.", Bryan and Darrin to sync up on this. Land small stuff.', (In reply to Robin Andersen :tecgirl from ', ) ', There is often content behind it, i.e. the website yo re currently on. The only time we have nothing behind the panels is with a fresh new tab. Hence, the transparency (the larger concern here was the loss of context when tapping the URL bar and being presented with the panels... by fading it in and keeping a hint of the page behind it, we maintain the spacial relationship that the panels are just 'in front' of the websites behind them, like an overlay.) Also, why is this bug specific to iPads? Is it because these (iPad 2/3 likely) are the only devices at the cross-section of iOS8 and non-blur-supporting?", updated for a more accurate title', My stuff is waiting for UX (I think?). We should finish this without it probably.', also, my work is landing in pieces. The better useragent string is landed. The grouping will land soon. But the redesign I was playing with is still up in the air.', Created ', ', PR Currently detects which devices have blur support, but for simulators it categorizes them as one type; thus, just for simulators, blur is always enabled and on hardware, it detects and applies the changes correctly. To test to see how the UI changes on devices without blur support, negate the return statement in isBlurSupported() in DeviceInfo.swift.', Comment on ', ', PR LGTM with comments' 
id=1098358	 'I think the general idea for this has been scrapped for now. Closing this.' 
id=1183078	 "I can't reproduce this, tested #23 & master.", (In reply to Aaron Train :aaronmt from ', ) ', Can reproduce this via STR posted on IRC STR: enter "yah" that should autocomplete for "yahoo.com", hit backspace twice, then it suggests "yahoo.com" again', *** This bug has been marked as a duplicate of ', ***' 
id=1170678	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull Request', Looks good!', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1237351	 "It's possible that disabling cellular data in Settings also blocks resources being served on our local web server, which I think would prevent our session restore callback from being triggered. If that's the case, I'm not too concerned since I'm skeptical we can actually hit this in real-world scenarios.", I can't reproduce this in the simulator or on my iPod, so this must be related to this specific setting (as opposed to simply lack of a data connection). AaronMT confirmed that he only sees blank pages (no error pages), which supports the hypothesis in ", . I can, however, replicate this behavior if I simply prevent the web server from starting in my local build. I think the fix will be to make sure the browser toolbar state is updated for each page load (though I thought we'd be doing that already).", Created ', ', Link to Github pull-request: ', While I can test this PR by manually disabling the web server, I can't actually verify that this fixes the STR since I can't follow them without an iPhone. Aaron/Steph, would appreciate if you can try! It seems that disabling cellular data prevents our local web server from working, so even with this fix, it's worth noting that there will be other annoyances with that setting enabled. In particular, session restore won't work, and users can't access saved offline reader pages.", Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1191485	 'Created ', ', PR: ', Replaces three dots with a single \u2026 unicode character.' 
id=1202793	 'Created ', ', ', Created ', ', ', Swift 2.0 patches for reference', Merged' 
id=1141849	 
id=1270971	 'Created ', ', PR: ', This patch adds RTL support to Top Sites.', Comment on ', ', PR: ', LGTM!' 
id=1151717	 ' ' 
id=1215877	 'Created ', ', Pull request', Comment on ', ', Pull request Just some nits', Addressed nits and merged.' 
id=1163695	 'Steven is going to grab this branch and get it landed for you.', Created ', ', PR ', Pushed up some of the work I've been doing to port in Darrin's animation changes and TabTrayController refactor. I've refactored a lot of it and wouldn't mind some feedback what I'm doing so far.", Comment on ', ', PR ', Put a couple questions in the PR. I like the lazy vars a lot (and this code needed a good cleanup, so thanks. I will no longer have to be embarrassed when I see CustomCell). I'm curious about the why we need to snapshot the collectionview and hopeful we can actually make the urlBar/BrowserToolbar animation a little less heavy (but any fix should help the animation a lot).", Hey Wes, thanks a lot for checking that PR out. I really liked the lazy pattern. Glad you found it nice as well. I've been doing some work on this branch today and made the following realizations: 1. Having the URLBarView/Toolbar as part of the TabContentView is causing the animation to be really sluggish. I ended up removing them and currently trying to get the transforms working from the BVC. 2. Moved the frame layout code in the TabContentView back to autolayout since that wasn't where the performance issues were. 3. Trying to tackle getting the CALayer transforms working with the BVC :( I might put a pause on this branch and visit the URLBarView. I'm seeing issues transforming this during the animation because it has the status bar built into it (related to ", )', Comment on ', ', PR ', Looks good to me!', Comment on ', ', PR ', Going to mark this patch as obsolete and break apart the refactoring from the animation changes.', Created ', ', PR ', Ported over the animation code from darrin's branch", Comment on ', ', PR ', Code LGTM. I played with this on an iPad Mini and iPhone 6. Did not notice anything odd. Will leave visual check to Darrin.', Comment on ', ', PR ', This feels GREAT. Much improved over what we have currently. Ship it!', Merged.', *** ', has been marked as a duplicate of this bug. ***' 
id=1173162	 'Perf assess.', Profile this on the iPad Mini', Created ', ', PR ', I have removed debounce in this PR ', We are caching previous suggestion and hitting database when required i.e if user enters text which do not match with cached suggestion.' 
id=1252397	 "We shouldn't be showing the empty panel state at all in this case.", Created ', ', PR for whoever can get to it first, one-liner', Comment on ', ', PR I prefer my conditional; take a look at the PR.', Ahem bookkeeping. ' 
id=1185083	 'Created ', ', PR', Comment on ', ', PR Not a huge fan of this fix...the "3 * cell.bounds.width" value being used feels completely arbitrary. Also, I noticed that I still see a small bit of the separator in the bottom right corner when I test on the iPad Air profile. I\'m not familiar these iOS UI hacks -- sleroux might have some ideas.', Comment on ', ', PR There's actually a neat trick you can do to get rid of this line instead of setting a large inset. UITableViews by default will always show the separators unless there is a footer specified. If there is a footer, the bottom line won't appear. To fix this, I usually just set a footer for the first section and set it to a basic UIView.", Comment on ', ', PR Looks good!' 
id=1110219	 'Unassigning myself since :bnicholson is working on browser and toolbar things.', Created ', ', Pull request Currently assigned to TBonnin in GitHub.', Comment on ', ', Pull request Merged.' 
id=1265413	 'This has stalled due to ' 
id=1131140	 'Looks like a known issue: ', Using the xctool.sh from ', does fix the issue locally, though that's probably not helpful for Travis CI.", Yes! That is a great hint and fix. I'll integrate it in Travis :-)" 
id=1145316	 "Last I checked this simply isn't possible on iOS, at least not in the sense of a desktop OS or Android. We can explore options for integration with individual third-party apps, and we can see what share/send extensions allow, but it'll never be great.", *sadface* was worried that'd be the answer.", *** ', has been marked as a duplicate of this bug. ***' 
id=1194325	 'Questions: Why does this get a frecency of 28? 6540 ', Amazon Mus SaMyhhLWp6Mh 350 smile.amazon.com 1.43942622691112e+15 1.4375357522649 60 231 28.7456711035592 Why does this row have only one local visit, when there are dozens in the DB that apparently contribute to the frecency of 542? 8214 ', JUAkDkBsn2KU 324 r.duckduckgo.com 1.43915351772058e+15 0 1 0 542.315427090679', The 'fix' for this is to compute frecency for each individual site (or even visit), then aggregate. Desktop does it on a per-visit basis. In order to be performant we need an additional filter on recency. An updated query looks something like: SELECT historyID, url, title, guid, domain_id, domain, localVisitDate, remoteVisitDate, localVisitCount, remoteVisitCount, iconID, iconURL, iconDate, iconType, iconWidth FROM ( SELECT historyID, url, title, guid, domain_id, domain, max(localVisitDate) AS localVisitDate, max(remoteVisitDate) AS remoteVisitDate, sum(localVisitCount) AS localVisitCount, sum(remoteVisitCount) AS remoteVisitCount, sum(frecency) AS frecencies FROM ( SELECT *, (localVisitCount * (5 + localVisitCount)) * max(1, 100 * 225 / (((1439576194960535 - (localVisitDate)) / 86400000000.0) * ((1439576194960535 - (localVisitDate)) / 86400000000.0) + 225)) + remoteVisitCount * max(1, 100 * 225 / (((1439576194960600 - (remoteVisitDate)) / 86400000000.0) * ((1439576194960600 - (remoteVisitDate)) / 86400000000.0) + 225)) AS frecency FROM ( SELECT history.id AS historyID, history.url AS url, title, guid, domain_id, domain, COALESCE(max(case visits.is_local when 1 then visits.date else 0 end), 0) AS localVisitDate, COALESCE(max(case visits.is_local when 0 then visits.date else 0 end), 0) AS remoteVisitDate, COALESCE(sum(visits.is_local), 0) AS localVisitCount, COALESCE(sum(case visits.is_local when 1 then 0 else 1 end), 0) AS remoteVisitCount FROM history INNER JOIN domains ON domains.id = history.domain_id INNER JOIN visits ON visits.siteID = history.id WHERE (history.is_deleted = 0) AND (domains.showOnTopSites IS 1) GROUP BY historyID) WHERE ((localVisitCount + remoteVisitCount) > 0) AND max(localVisitDate, remoteVisitDate) > 143950424963682 ) GROUP BY domain_id ORDER BY frecencies DESC LIMIT 15 ) LEFT OUTER JOIN view_history_id_favicon ON historyID = view_history_id_favicon.id;", I have a slightly tweaked query that I'll put into code this afternoon. This needs one other change, which is to load the domain instead of the topmost URL -- the URL is likely to be some particular search engine redirect, rather than the engine itself. We should do this by calling .baseDomain on the returned URL; not only is this simpler, but it'll preserve the protocol. I also think that before ", is addressed, we should add (domains.domain NOT LIKE 'r.%') to the frecency query. That kicks r.search.yahoo.com and r.duckduckgo.com out of my top sites, which is a big help. Karen, lemme know if you want me to simulate this against your browser DB, or if you just want it to hit Nightly so you can try it there.", Created ', justdomain.sql This is a domains-only version of the query. You can run it against your own DB to see what happens.', Comment on ', justdomain.sql I ran the query on my DB and I find it gives better results. It definitely seems more correct and seems to put more importance on number of times I've visited a domain since I'm seeing some more frequently visited sites move up.", N.B. to self and future reviewers: pay close attention to not b0rking history substring search, which uses part of the same query mechanism.', I've been playing around on nightly all day yesterday and still can't get it to populate with relevant mobile top sites. In fact, Top Sites isn't updating at all. I have hit Facebook about 10 times in a very short period of time and it's not showing up anywhere on the Top Sites grid. Although it has keyed in that I visit the bbc, it's only showing up the 'most read' page and not the main 'news' page which is where I start off. And after visiting the telegraph, doing several other mobile searches / browsing, the Top Sites grid hasn't changed at all. It's stuffed with some desktop sites that aren't used frequently but a smattering of open tabs and something I visited once. The good news is that the Firefox watermark is showing up in thumbnails instead of blank.", Created ', ', Pull req. Read these commits in order. I split apart the shared history query function, tidied it up for history, and then revised it to reflect the new query. This slightly regresses strongly-recent top sites data, but doesn't seem to be noticeable for real data. History panel is now faster, which is nice.", Comment on ', ', Pull req. Tested on both iPhone and iPad (devices and sims) and everything matches. Wicked fast, too!', Comment on ', ', Pull req. Code looks good from what I can see', Steph landed this.', On nightly now, and it's being better, although the facebook thumbnail isn't resolving (even after tapping it twice now) BUT at least it's in the top row!", The FB favicon will continue to be a problem because it's desktop's URL that wins its group. So the favicon guesser gets it wrong, and we never load www.facebook.com, so we never get an icon. Changing that involves making favicon lookup domain-aware and/or biasing the internal ordering towards mobile sites. Favicons: still the hardest problem in browsing.", FWIW, I don't use desktop remote to go to Facebook except once in a blue moon - it's 95% done on my mobile local ....", Noting for the historical record: we can only distinguish between 'local' and 'remote' -- local being your iOS device, and remote being _typically_ a desktop or laptop. But in Karen's case, remote also includes a bunch of phones and tablets. Their 100+ visits contribute no more weightily to m.facebook.com than her 500 recent desktop visits do to www.facebook.com, so www wins in the pool. It's easy to see three tiers of behavior here: 1. On-device. I want my browsing on this device to be most accessible. 2. Same-category. My browsing on mobile devices is similar, and not the same as my desktop browsing. (This is also the split for m./www.) 3. Everything. Finally, I want to revisit sites that I visited on a desktop. We're unable to support #2 without reworking Sync and Places. I filed ", to figure out how to get an icon for this kind of situation.' 
id=1123408	 'The last bit of ', should be in a separate bug. It can be done as a followup bug to this one.', Created ', ', Pull Request' 
id=1146649	 'Created ', ', Link to Github pull-request: ', rnewman: this wasn't the approach I intended, but I don't want to add global skew state just yet." 
id=1278559	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good - just some nits. I wonder if users will be confused by the share sheet opening by itself when navigating to one of these URLs. It might make more sense to show a modified version of the downloads not supported page with a button and some text explaining that you can use the share sheet to pass the download to a third party service.', Created ', ', Strings Pull Request', merged strings ', Comment on ', ', Pull request I've deleted sleroux's r+ in error.", merged: ', v5.x 2ad5eebd54a3e4f1c65ace66b1b79d2934bd84af' 
id=1210775	 'Maybe something like for Close Private Tabs / When Leaving Private Browsing two lines would be better?', We're going with something similar - just the two lines on the right instead of the left: ", (In reply to Stefan Plewako :stef from ', ) ', (In reply to Stephan Leroux :sleroux from ', ) ', Are we sure? ', looks rather unusual and inconsistent with "When Leaving Private Browsing".', Clearing NI for Robin as we've discussed this in triage. We're going to remove the 'Last Synced' label and just show the timestamp as the time will implicitly let the user know the 'last' synced time. The row will look like this: Sync Now Just now (or whatever the timestamp is)", Created ', ', Pull request', Comment on ', ', Pull request Code looks good - thanks for the patch! :tecgirl, do we want to keep the the text for these lower cased? If want to change it we'll need to push this to 2.0 since 1.1.1 will be bug fix only :\\", Comment on ', ', Pull request I\'ll be honest, dropping "Last synced: xx" makes the other part of the string rather anemic, it lacks context. I\'m tempted to drop it all until we can come to a better solution. Two examples, ', & ', If we were to capitalize it, it would show: "Sync Now Just Now" "Sync Now Last Week" It\'s weird if we capitalize it or not.', Darrin, can I get your thoughts on this?', Honestly, I think if it were capitalized it will look fine. If we come up with a better solution in the future, we can ship that, but in the event that we don\'t come back to this for a while, something is better than nothing. If we don\'t want to change the strings and land this now, can we always show the timestamp (instead of the fancy "Just now" strings) and then show those strings 2.0+? Thoughts?', We can show a timestamp using a date formatter like YYYY/MM/DD HH:mm:ss for now if we wanted for 1.2.', I would greatly prefer that. I'm not thrilled with the current state at all.", Created ', PR - timestamp', Comment on ', PR - timestamp ', ', Comment on ', PR - timestamp Looks good - just some nits/comments on the PR.' 
id=1159563	 'Pull request being reviewed in ', .' 
id=1181584	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1189497	 'Already working on this. The assets are good, the problem was in the code. PR on its way.', Robin, can you make 36 \xd7 24 assets for deviceTypeDesktop and deviceTypeMobile. We currently have 36 x 25, and the image view that displays the icons has a 24 points height, so the assets are slightly resized which is why they look soft.', :karim will this change how the display on the Send Tab list?', No it won't.", Karim, does this need new assets? ', and ', disagree.', I can do a workaround to display the current assets correctly with code (basically resizing the UIImageView to avoid the small image stretch that makes the icons look soft), but I think its better to have new assets with the dimensions specified in ', Created ', deviceTypes.zip give these a whirl.', Created ', deviceTypeDesktop-replacements.zip try these.', Status update, Karim?', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good!', Merged PR: ' 
id=1094202	 "Stefan, it's close. The Share widget is good. The Action widget will be styled similarly, with device icons. Press on with these styles and I'll attach my latest iteration shortly.", Here is the updated Share/Action widget: ', . I am still working on what the 'sent' notification will look/behave like. For now use the default indicator.", Created ', ', Pull Request', Comment on ', ', Pull Request I think this is mostly with with comments addressed. I'm curious why you didn't use Snappy for defining any of your layout constraints!", (In reply to Brian Nicholson (:bnicholson) from ', ) ', File a followup for Snappy?', (In reply to Mark Finkle (:mfinkle) from ', ) ', Err, s/with with/fine with/. ', Sounds like a good idea. Filed ', .', I really don't know if Snappy is the way to go. I like the concept but it is an unmaintained and poorly documented third party library. It has open issues and pull requests that the author has not dealt with in months. What is wrong with the visual language that UIKit provides? It looks pretty simple no? I'd rather depend on Apple's stable and well documented APIs. AutoLayout is already a pretty tough subject to master. So using standard APIs lets us built on common knowledge/patterns from books/articles/StackOverflow.", (In reply to Stefan Arentz :st3fan from ', ) ', Not sure what you mean by unmaintained -- the last change was less than a month ago. The open issues seem minor, and he's commented on them recently. ", Well, take a look at Snappy's GitHub page (", ) and compare the before/after. I wouldn't say it's simple at all; the Snappy equivalent is much, much easier to read IMO. The visual language string itself isn't too complicated, but with all of the additional parameters, and the fact that the visual language can't handle centering and needs additional defined constraints, the code quickly becomes overwhelming. Did you actually run into any issues with Snappy? I agree it's unsettling to work with an evolving API (though Swift itself is evolving), but the project is open-source, so we can fix any issues ourselves (if we find any). If you look through the Snappy codebase, it's actually quite small.", How about we convert to Snappy in the next iteration of this code. I'd like to wait until UX has a better idea of that this dialog is supposed to look like as things seem to be rapidly changing at this point.", Reopening this because this is not functional at this point and it has a number of open bugs that need to be resolved first.', Created ', ', PR: ', This patch brings the Share To extension UI up to date with the latest specification. There are a couple of items though: * I am reusing icons (login in navigation bar, bookmark, add to reading list) from the application icon set and the reading list icon set. I can either scale these down if needed, or we can incorporate new sizes for this dialog. * I've left some of the fonts to the system default. Specifically the navigation bar buttons and the table row label. I don't know if we should actually change the size of those. * Note that the dialog has a dynamic size. It's maximum width is 380px. But it also enforces a 16px padding left and right. So on small width devices like the 4S and 5, the max width is 288px. (This is done with auto layout rules, so we can change these dynamics) Tested on iPhone 4S, iPhone 5, 6, 6 Plus and iPad. Fits & looks good on all these device sizes. This is not pixel/spec perfect, but it is easy to change paddings, font sizes, colors and item sizes by editing the `ShareViewController.swift` file and changing the settings in the `ShareDialogControllerUX` struct.", Comment on ', ', PR: ', Stefan, It looks good! I made some updates to your branch (', ShareToUI), mainly bumping up the app icon a bit, bumping up the font-size, and lessening some padding.', I merged this, r+ by me.', Comment on ', ', PR: ', I thought I r+ this before.' 
id=1169282	 'Via ' 
id=1201103	 'Created ', ', Pull req.', Comment on ', ', Pull req. Looks good - I like the way the payloads are structured. Just one question and a couple of nits.', fc9888e' 
id=1213534	 'I probably broke this test with ', , but at least one of the test, the mock server, and the app code are wrong. I think I get the assignee, and Nick gets a needinfo!', Ryan: needinfo for ', .', (In reply to Richard Newman :rnewman from ', ) ', Ah yes, I ran into this, and handled it by fudging MockSyncServer to not include present-but-empty collections in info/collections. That is, if MockSyncServer.collections "meta" == , I didn\'t include {"meta":"0"} in info/collections. Your extract-helper refactor probably changed that. I justified my handling by reading in the Sync docs or a ticket -- no reference to hand -- that the Sync server kept a collection timestamp independent of the set of collection records. I didn\'t want to build that for the MockSyncServer, hence the above. If my interpretation is correct, this ticket is "only" a failing test, not failure in the wild. ', This is what I arrived at, via docs, ticket, or rfkelly directly. ', I\'m not sure I follow. I think the expedient thing here is to special case info/collections "collection" == 0, since that means the collection is empty. ', N.b.: I expect this applies to the caching of meta/global and crypto/keys, which both use the collection timestamp and will both be susceptible to 0.', (In reply to Nick Alexander :nalexander from ', ) ', Yeah. We shouldn't do that: as far as possible, we should try to replicate the behavior of the API correctly. ", It does: there's a difference between deleting all of the records in a collection and deleting the collection itself. --- Collections are created implicitly when a BSO is stored in them for the first time. They continue to exist until they are explicitly deleted, even if they no longer contain any BSOs. --- --- Each collection has a last-modified time that is updated whenever an item in that collection is modified or deleted. It will always be less than or equal to the overall last-modified time. --- --- The last-modified time is guaranteed to be monotonically increasing and can be used for coordination and conflict management as described in Concurrency and Conflict Management. --- --- DELETE https://<endpoint-url>/storage/<collection> Deletes an entire collection. After executing this request, the collection will not appear in the output of GET /info/collections and calls to GET /storage/<collection> will return an empty list. --- and so on. ", Most likely, yes\u2026 but of course it's hard to tell if the client is buggy without replicating against a real server, because we know that the test server doesn't behave quite like the real thing. ", Based on re-reading, it looks like this should never be the case: timestamps are always monotonically increasing.', Created ', ', Pull req. This makes the tests pass. We now handle deletes correctly, and track collection timestamps independently of records.', Comment on ', ', Pull req. lgtm.', bb00145', This is indeed correct; I added a bit more to the docs in ' 
id=1226406	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Makes sense, though I noticed you aren't actually using synchronous = false anywhere. Just groundwork for ", ?', Yup, you can see it used here: ', 0824db3' 
id=1162724	 'Created ', Screenshot (before)', Created ', Screenshot (after)', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good :)' 
id=1238102	 "Unfortunately this is not something we can change for 3.0 at this time. I'm marking this as 4.0. We are also going to make a plan to move to identifers as string table keys. Like we do on Android. This will avoid situations like this where we depend on the string key.", Maybe it would be better to use identifiers differently only when requested by l10n?', Created ', ', Link to Github pull-request: ' 
id=1183856	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1171525	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1217451	 '(for the record, doing this on top of latest master, i.e. 58b6a5c27448b1dcfb38fe529d2b308be9b63c00)', *** This bug has been marked as a duplicate of ', ***' 
id=1228747	 'We should fix this. *** This bug has been marked as a duplicate of ', ***' 
id=1283918	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM, nits in the PR.' 
id=1164843	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1304768	 'This was caused by e18b6b5f3f040b5caa9acbf4bb1bf961b0f7cd98 (migration to 2.3).', *** This bug has been marked as a duplicate of ', ***' 
id=1174194	 "I noticed that navigating to news.bbc.co.uk often did several page loads before the actual page appeared. I think the 2 contributing factors here are a) low connectivity b) multiple redirects Possibly what is happening is that the first redirect happens (we show the full load) then the redirect doesn't happen and so it looks like we told the user their page loaded and it didn't." 
id=1118127	 "This bug doesn't have enough detail to be actionable. Please provide more details. I'm removing the security flag, as this is not a security sensitive report.", Created ', not_highlight.png 1. Open SettingsViewController, then "settings" icon is highlight. 2. Tabs, Bookmarks, History or Reader is disabled. 3. "settings" icon isnot highlight.', @Gijis, Thanks. I add details.', Created ', ', Pull request Wes, handing this review to you since I think you worked on the settings pane.', Comment on ', ', Pull request I think this is on the right track, but I'd like to do a bit less if we can. Can we?", I don't know if we should put time in this UI because it will all change soon, based on most recent designs. No?", I see, this issue will close. OK?', I pushed new commit 11 day ago.', Sorry, I mistake to add sec-review', Created ', pushed new commit for review Thanks @wesj ! Sorry, I have used bugzilla first time.', Comment on ', pushed new commit for review Yay! Thanks!', I see hirohisa closed the PR, but did this ever get merged?', Not sure, but I know you changed this code a lot recently. Lets close it.' 
id=1187161	 "Steph's going to look at this, see if there's anything we're doing that should terrify us. Mark tracking with your findings, Steph! :D", Created ', ', PR ', Looks like this error is coming from SDWebImage's image decoder. See ", . I've added a temporary workaround that was suggested in that thread for now until a new version of the library is released.", I don't know the actual consequences of this bug but we should probably patch it for now.", Comment on ', ', PR ', ', Created ', ', PR ', They've updated master to include a fix for this. I've updated the Cartfile to pull in the latest changes.", Merged.', I still see these in my console on master Aug 12 10:39:41 Normandy Client 2707 : CGContextDrawImage: invalid context 0x0. This is a serious error. This application, or a library it uses, is using an invalid context and is thereby contributing to an overall degradation of system stability and reliability. This notice is a courtesy: please fix this problem. It will become a fatal error in an upcoming update. Aug 12 10:39:41 Normandy Client 2707 : CGBitmapContextCreateImage: invalid context 0x0. This is a serious error. This application, or a library it uses, is using an invalid context and is thereby contributing to an overall degradation of system stability and reliability. This notice is a courtesy: please fix this problem. It will become a fatal error in an upcoming update.' 
id=1132816	 'Created ', ', Pull request Merged' 
id=1221749	 
id=1290671	 'Looks like this may be a duplicate of ', *** This bug has been marked as a duplicate of ', ***' 
id=1157518	 'To add: * Real app version. * Form factor. To do: * Manual testing of device, application, appPackage.', Hi Richard, Can you help me understand this bug? From what I understand, we want to add additional options for the formfactor (like iphone 6s plus, iphone 6s, iphone 6 plus, iphone 6, etc.). I do see the notes already made in the ClientsSynchronizer.swift. The app version seems to be hard-coded. Do we want to use the current fennec version value here? (possibly from some property file) Do we also want to test fennec for all these different formfactor values? (what does manual testing refer to?)', Hi Maurya, Sorry for the delayed reply! The formfactor here should be one of: \u201cphone\u201d, \u201clargetablet\u201d, \u201csmalltablet\u201d, \u201cdesktop\u201d, \u201claptop\u201d, \u201ctv\u201d -- see ', This bug is about poking around the OS-provided data to figure out which of those strings we should use: e.g., an iPad mini should be "smalltablet", and an iPhone should be "phone". And yes, the version should be \'live\', probably AppInfo.appVersion. Testing is a challenge. I\'m not sure if the Simulator behaves correctly, but we should be able to manually test on whatever devices are to hand. Do let us know if you need more pointers!', Hi Richard, Thanks for the details! I examined the data provided by iOS and found that it doesn\'t exactly tell us what device we are using. It only tells us if it\'s a tablet or a phone, etc. Doesn\'t tell us if it is an iPad Mini for instance. let model = UIDevice.currentDevice().model var formfactor: String switch model { case "iPhone": formfactor = "phone" case "iPad": formfactor = "largetablet" // or, "smalltablet" ? default: formfactor = "phone" } UIDevice.model is the key property here. Apparently, the available values for UIDevice.model is limited: ', UIScreen additionally provides screen sizes. We could use a combination of information provided by UIDevice and UIScreen to decipher what device it is, though it's not so straightforward. There are external libraries like DeviceGuru which seem to be doing this. Are we allowed to use such external libraries? Or, should we try to re-implement similar approaches here?", (In reply to Maurya Talisetti from ', ) ', rnewman is PTO right now, so I'll redirect to sleroux. I'm not sure we'd take an external dependency in this case, but sleroux will have a better handle.", Hey Maurya, Looks like the best we can do to get the device name/type is by using a system call to grab the hardware name using sysctlbyname() 1 . Passing in "hw.machine" should return back a string that is more descriptive of the device the user is running. Unfortunately this string looks like "iPhone5,2" and "iPad2,3". I would hesistate on pulling in a library like DeviceGuru since all it does it run this sysctlbyname command and filter the string through a giant switch statement. I think we can be a bit smarter by writing our own method that calls it and filters the various hardware names into our own buckets like \'smalltablet\', \'phone\', etc. I can see this being an extension on UIDevice with a method named formFactorString() that handles all of this logic. 1 SO Post ', Hi Stephan, I wrote the function formFactorString() as per your suggestions. It looks good for the simulator. While testing an iPhone 4s physical device, I ran into a couple of "code sign errors". It seems like I need to have a provisioning profile created before I can install the app on the device. Is there a provisioning profile that the Mozilla iOS team uses? Or, should I create my own?', When running on device, yo ll need to update the bundle identifiers and use your own signing certs. Instructions can be found here: ", Created ', ', Link to Github pull-request: ', Stephan, I tested the change on the simulator and it looks good. I\'m unable to test on my device because apparently a free developer provisioning profile cannot be created while using the "Passes" feature. Would anyone be able to help us test on an actual device?', Comment on ', ', Link to Github pull-request: ', I was only able to test it on my iPhone but the form factor string is working correctly. The patch looks good overall - just a few nits about cleaning up the code to make it more readable we when need to come back to it in the future.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good - just a super small nit comment about set allocation', I am not in favor of maintaining a list of devices in our code. This means the list will have to be updated all the time when new devices are introduced. Why do we need bigtablet/smalltablet granularity? Without that detail, the solution in ', looks fine to me. Just ask the device if it is a phone or tablet.', (In reply to Stefan Arentz :st3fan from ', ) ', In theory, because there's a pretty big difference in screen size and density between an iPad mini v2 and an iPad Pro. (At least, I think there is.) In practice, no Firefox client adapts on the basis of this information. It's more notable on Android, where there is no clear delineation between sizes (phone -> phablet -> tablet) and devices lie. (On Android, a list of devices is not feasible, of course.)", (In reply to Nick Alexander :nalexander from ', ) ', Why is that not just a local concern for the app currently running? On iOS we base our layout on many things. Device orientation, size class, wether you are in split view mode on an iPad. (The above code would say tabletxxlarge for an iPad Pro but the client possibly runs in a part of the screen as wide as an iPhone 5). Why does the server-side need to know this detail? What is the use case we have for this? Right now I only know one case: showing the right icon in a device list. Do we have ideas about other cases? I'm making a big deal out of this because it is unclear to me why we need this info. Having to maintain a list of devices is a maintenance burden that I would prefer to avoid if we don't have a good reason.", (In reply to Stefan Arentz :st3fan from ', ) ', I'm not sure the server ever sees this; it's other clients. But your point is taken: no, I'm not aware of other cases. ", I'm not saying you should! Just explaining why it was chosen to be so. All Sync clients have the right to behave inconsistently -- and all of them do :)", I can't seem to recollect where I saw this, and now I'm not able to find the evidence for it in the code, but I thought that the size of the device determines the frequency at which the sync occurs. Is this true? Either way, should we go with the solution as in ", ?', (In reply to Maurya Talisetti from ', ) ', I have never heard this. We do sync much more aggressively on Desktop devices (about every 5 minutes, if there is activity) but we don't differentiate phones from tablets, for example. What can happen is that the system (Android, depending on version, device characteristics, network status, etc) can sync us more frequently.", Thanks for confirming that, Nick. So, should we revert to the solution in ', since we don't have any different behavior for phones vs tablets?", I would like to understand if we can group iPads under "tablet".', (In reply to Stefan Arentz :st3fan from ', ) ', Android differentiates: ', Desktop does not appear to. You can make iOS do differently; I\'d be fine with making all iPads be "tablet".', If we're okay with lumping all iPads under 'tablet' and phones/iPods under 'phone' then we can can use the user idiom check 1 instead of having these strings hardcoded. This would be ideal since it would avoid the maintenance cost of updating the device list every time a new device appears. 1 ", We could also use the solution in ', -> UIDevice.currentDevice().model Btw, I think we need to choose from among the groupings 'smalltablet' and 'largetablet'. There's no grouping 'tablet' as per ", Use "tablet" and I\'ll add it to those docs.', Created ', ', Link to Github pull-request: ', Hi Stephan, Got rid of the hardcoded device strings. We are now using UIDevice.userInterfaceIdiom to check if it's a phone or a tablet.", Comment on ', ', Link to Github pull-request: ', Looks good and works for me! Thanks for iterating on this bug.', master bdabdec9a01d84e0a4859f74dd0cf7595603ab6f' 
id=1208564	 "Looks like we never had a 'highlighted' state for the bookmark button - only normal and selected. Do we want to also include a highlighted one? This would be the empty bookmark image just with a blue tint.", (In reply to Stephan Leroux :sleroux from ', ) ', Yes, it would be nice to have the highlighted state.', I would like to add this, can you assign this issue to me?', Sure thing! Robin, do you want to provide a highlighted image or have us tint the existing one? Either one is fine.', Yes, both works for me', (In reply to Stephan Leroux :sleroux from ', ) ', Stephan, tint the existing. Less is more!', Created ', ', Pull request', Could you update your branch from latest master? Looks a bit out of date.', I thought I got the latest code when I forked the Repo', Ah you know what - you opened the PR from Mozilla's master into your master. Yo re commit isn't in that PR!", Oops Your*', Ok second try', Created ', ', Pull request', Comment on ', ', Pull request Looks good! When I mentioned tinting, the alternative approach would be to use the already existing bookmark image and apply a color tint to it instead of generating another image but this works just as well. The only thing I notice is that when unselecting a bookmarked page, the icon goes from filled blue to black unfilled. Is that something we want :tecgirl?', Since I wanted to fix a consistency bug I didn't want to tint the greyscale image with CG, because then I would have to do it with the other icons as well (of you don't have to). If you mean tinting the UIButton: I tried that but it only worked with a UIButton subclass overriding the didSet of the highlighted variable. So I just did this, because it was the easiest way. If you suggest another way (I probably oversaw something regarding tinting), please let me know. I don't know what the highlighted image changed about the state transition from filled blue to black unfilled. Do suggest to have a highlighted state as well? The longPressGestureRecognizer seems to interfere somehow.", I meant tinting the greyscale image but I noticed we don't do that for any of the other toolbar buttons so you can ignore that suggestion :) I don't think your patch regressed the selected bookmark -> black icon - I think it was just never was highlighting to blue. I'm not sure if it should. It kind of makes sense that it would go from filled blue -> black since we are deselecting it but I'll leave that up to :tecgirl. Also, thanks for the contribution :D Are you interesting in looking at another bug in the meantime? ", I am currently waiting for input on this issue ', But I will take a look :)', Also figured I would mention it but if yo re looking for discussion about Firefox for iOS/Android, we're in the #mobile IRC channel -> ", Comment on ', ', Pull request I'm not able to review this PR, it has been closed.", It should be this PR ', Comment on ', ', Pull request LGTM! Thank you!', Did this land? Resolve?', Created ', ', Updated PR', The PR has unrelated commits for another bug. Split this out and merged it manually. ' 
id=1168163	 'Created ', ', PR ', Comment on ', ', PR ', LGTM', Merged.' 
id=1178789	 'Created ', ', Pull req.', Comment on ', ', Pull req. Fantastic!', This'll land today with the rest of passwords sync." 
id=1125268	 'Filing bugs from an iPad is not awesome.' 
id=1187455	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', Merged PR: ' 
id=1136319	 'Created ', ', Pull Request', Comment on ', ', Pull Request Thanks for the pull request! For future reference, the review flag is used to notify a reviewer that your commit needs to be looked at, so you\'ll want to set the flag to "?", then set Requestee to one of the Firefox for iOS devs. Note that there\'s a "suggested reviewers" link next to the Requestee field; you can choose someone from there. Once we\'ve looked at the patch and it\'s ready to land, we\'ll flip the "review?" to "review+", then merge it.' 
id=1267142	 "Will happen so rarely it's not worth fixing. If we have feedback otherwise we can reopen." 
id=1211991	 'Created ', ', ', I left some drive-by questions on the PR.', Comment on ', ', ', Might as well move this review to you :P Added a patch to move the function to a lazy prop', Comment on ', ', ', If it works, ship it!', Merged', *** ', has been marked as a duplicate of this bug. ***' 
id=1147407	 "Don't see this anymore" 
id=1279372	 "Whelp. This is a dupe. I'm a day late!", *** This bug has been marked as a duplicate of ', ***' 
id=1182716	 "I think this is a iOS bug, the only way of doing this is change the UIAlertActionStyle from Cancel to default, but it will change the Cancel Button's font to not bold. But we can find a way to change the font back to Bold.", Vincent, yup, yo re absolutely right", Decided that we're going to stick to the layout we're already using" 
id=1237052	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', master 4e79ccf66ac620b8aec0aa98669b9e0e8eb1c374' 
id=1097292	 "I have tracked this down to us having an 'incorrect' NSExtensionActivationRule in the Info.plist. We currently have: NSExtensionActivationSupportsWebURLWithMaxCount=1 But it seems we need to have: NSExtensionActivationSupportsWebURLWithMaxCount=1 NSExtensionActivationSupportsText=YES I am not totally sure what the logic here is because I think extensions are supposed to match to the minimum set of rules that they have in common with the providing app. (The URL is enough for us) It may be a bug or something badly documented on Apple's side. Patch forthcoming.", Created ', ', Pull Request', Comment on ', ', Pull Request Merged' 
id=1127989	 'Created ', ', Pull request', Is the problem here that we are adding a gesturerecognizer on top of a button, which already has its own click handling? Is that what you are seeing? That both the long press gesturerecognizer is fired, and also the normal button back/forward action on TouchUpInside?', Comment on ', ', Pull request Looks like checking the state for Began is a common way to do this when having a UILongPressGestureRcoginzier on a UIButton. Looks good.', (In reply to Stefan Arentz :st3fan from ', ) ', Nope, this isn't related to the fact that it's a button; the problem is that the gesture recognizer callback is called multiple times for multiple states. From what I can tell, a gesture recognizer callback will always be called at least twice: once for the Began state, and once for the Ended state. It can be called an indefinite number of times between those for the Changed state, too, when dragging around." 
id=1151567	 "I don't think this is a good idea because it changes something fundamental of how the language/stdlib works. Voting against this.", So what about: func optArrayEq<T: Equatable>(lhs: T ?, rhs: T ?) -> Bool { switch (lhs, rhs) { case (.None, .None): return true case (.None, _): return false case (_, .None): return false default: return lhs! == rhs! } } This uses Swift's own array == by unwrapping the optional, but doesn't interact with Equatable.", This blows up the playground, looks like it is being called recursively: // Causes the == below to be called recursively let a: Int ? = 1,2 let b: Int ? = 1,2 public func ==<T>(lhs: T?, rhs: T?) -> Bool { println("Calling!") switch (lhs, rhs) { case (.None, .None): return true case (.None, _): return false case (_, .None): return false default: return lhs! == rhs! } } a == b', I accidentally cherry-picked this onto master: ', I think this doesn't diverge from overall consensus on IRC, but scream if you disagree.", Wes mentioned he was fine with it, but I'll leave the ni for Stefan just in case.", Looks fine do it.' 
id=1170382	 'Created ', ', PR ', ', Comment on ', ', PR ', Having the DB layer call interrupt on every query doesn\'t feel like the right approach to me. We don\'t want to be routinely interrupting; we should be going in the other direction, which is trying to selectively interrupt only when necessary. Yes, that means exposing the ability to interrupt to code higher up the stack... but that actually seems right to me. So I would expect SearchLoader to maintain a flag ("am I waiting for results?"), to include the call to interrupt, and I would expect either profile.history or a subclass of Deferred to include the hook that it uses to call it. Pseudocode for the former: class SearchLoader { var pending: Bool = false ... didSet { ... if self.pending { // Sorry everyone! self.history.interrupt() self.pending = false } self.pending = true self.history.getSitesByFrecencyWithLimit(...).uponQueue(...) Pseudocode for the latter: class SearchLoader { var pending: InterruptibleDeferred<Result<Cursor<Site>>>? = nil ... didSet { ... if let p = self.pending { p.interrupt self.pending = nil } let again = self.history.getSitesByFrecencyWithLimit(...) self.pending = again again.uponQueue(...) Obviously the latter extends more readily to alternate approaches to canceling.', I have a bad feeling about interacting with SQLite at this level. Same with the other patch regarding threading. I can't describe this in technical terms. But it feels wrong that we need this kind of control. I am afraid that this will complicate things and will result in hard to debug problems. Is there a way we can *simplify* our interactions with SQLite instead so that we do not need code like this?", I do share that concern, which is -- if we do it at all -- I'd like interrupts to be narrowly scoped. Obviously the best solution is for queries to be (a) fast and (b) debounced, so we never need to interrupt...", Moving this up the stack sounds good to me. When I first wrote this stuff, I thought that history operations could return an NSOperation. We could still do something like that I guess with a Deferred/NSOperation hybrid of some sort. var defered: DeferredOperation self.defered = history.getSitesByFrecency(); // ... if deferred is still around when another query starts. self.deferred.cancel() Maybe I'll try that?", Oh, reading above that's pretty similar. Yay!", Comment on ', ', PR ', This looks more like what I proposed. I wanted to return an NSOperation from the history queries but NSOperation is an abstract class, so instead I made a deferred that looks a bit like an NSOperation. let deferred = DeferredSqliteOperation({ (db, err) -> Int? in // ... Do some db stuff return 1 }, withDb: myDb).start(onQueue: myQueue) // ... Some time later deferred.cancel() or in our case: let deferred = history.getSitesByFrecency(...) (deferred as? Cancellable).cancel() Deferred is final so override it isn't... clean. <rant>Final classes and methods are evil.</rant> It also has a few convenience inits() and one private one instead of one with default arguments, which made the Swift compiler angry when I did/didn't override them. I gave up and just edited it after awhile.", I think this is the right direction. A few comments about connection handling that I think will help us going forward, some nits, and I'm keen to hear a second opinion for a scary change like this!", Comment on ', ', PR ', Updated with the review comments. I was trying to be a bit careful here about the connection. i.e. a read/write lock around it since this implies its being touched from multiple threads. It feels a bit... fragile :) but I do like it better than exposing a method in SwiftData.', Comment on ', ', PR ', I think this is good. But I think it is a good idea if rnewman also looked at the sqlite specific pieces.', Comment on ', ', PR ', Two small questions/changes. I'd land this with a healthy dose of caution: not before a new build goes out, and make sure we get some heavy manual testing!", Created ', ', PR: ', I was surprised no one mentioned this originally, but now I realize that Deferred is actually an Carthage-imported library (I'd always assumed Third-Party was our dumping ground for real third-party source), so you didn't see that changes :( I made some changes here so that we can extend Deferred: 1.) Make it non-final 2.) Remove some convenience initializers. Swift was mad when I extended without overriding any initializers. It was also mad when I extended and tried to override a convenience initializer. It was also mad when I made the private initializer public and tried to extend it (it couldn't seem to figure out what I was overriding). For the sake of progress, I gave up and just removed the convenience ones since they weren't doing much that couldn't be done with default arguments anyway (maybe they won't want you to initialize with a value and queue?). I posted both changes upstream: ", Reverted this change while we talk about this.', Backout: ', Comment on ', ', PR: ', My intuition says we should find another way to do this without having to fork and maintain our own separate repo. I haven't been following/reviewing these PRs, though, so it's not clear to me what your alternatives are. I'll leave the decision up to you and rnewman.", Rnewman said this was fine in triage. I had no idea there was so much hatred for inheritance out there in the world. If this were a protocol, I could kind of get it. But its not and when I made it one things were... messy (Swift doesn't handle generic in protocols very smoothly). If we use composition, we'd have to do things like: history.clear().deferred ==>> history.query().deferred", Relanded the original patch now as well. ' 
id=1250147	 'Recreated the crash on that line by providing a nil value for URLString. If this is the same crash, then this is most likely the WKWebView having a URL.absoluteString being nil. Trying to recreate that. If this is the likely cause, then an extra guard condition in OnePasswordExtension.m createExtensionItemForURLString:webPageDetails:completion against a nil URLString would help. N.B. Acknowledged, URLString is meant to be (nonnull NSString *), but WKWebView.URL property is NSURL?.', I'm unable to reproduce this, so I'm not sure how invasive to make this fix. Aaron\xa0\u2013\xa0have you any STR with these clues?", Nice. ', Huh? ', No idea.', I'm able to reproduce this crashlog in a sample project: either the JSON object from webcontent, or the URLString needs to be nil. I'm satisfied that there are enough safeguards that the JSON object will always be populated with a non-empty dictionary. What I can't reproduce is this: making the URL invalid enough that the URL string passed to the crashing line is nil. (in other bugs, about: URLs are parsed as valid URLs, but not actually accepted by the thing that yo re passing it to, e.g. NSUserActivity).", Hi Aaron, Does this crash occur on a particular website or it can happen on any website? Am I correct to assume that you are using the latest stable versions of 1Password and of Firefox? I look forward to your reply :-) Cheers!', This is just pulled from the Xcode organizer based on a number of incoming reports. I have yet to run into this crash.', Hi Aaron, I think that the best way to investigate this issue is to log if the web view's URL is nil or invalid before calling the 1Password Extension API in Firefox ( ", ) and in the local OnePasswordExtension.m ( ', ) from Carthage. Let me know if this helps ;-) Cheers!', Created ', ', Pull request', Comment on ', ', Pull request Makes sense. The joy of Swift/ObjC bridging.', Merged.', v3.x ac50d72' 
id=1163273	 'I used this bug number for all of ', . *** This bug has been marked as a duplicate of ', ***' 
id=1215687	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', ', Fixes label scrolling offscreen and the overlapping issue', Comment on ', ', ', Rubberstamp r+ -- haven't tested this, but works for me if Robin approves.", Visual confirmation. Looks good.' 
id=1227669	 'This seems to already be taken care of right? Mark as resolved?' 
id=1282960	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1239514	 'bed595c rs=nalexander' 
id=1318213	 'Hi, We reviewed all translations for Kab locale. All seems to be right. May be we will review some strings for size. Kabyle localization team says Go.', Swedish sv-SE is ready for shipping me and Andreas (az) have worked on it :)', Catalan (ca) translation is finished. v6 will be the first Catalan release. If there is a chance, we would like to review a new set of screenshots from Stefan before l10n freeze (Nov 29th). I already requested that in the l10n list.', Hi Delphine, Is there any 2nd iteration before freeze on 29/11? Kabyle locale is ready', @Luna Not sure what's the NI for Andreas is, but let's not use a tracking bug for matters relevant for single locales ;-) The question about screenshots is better directed at Stefan, hopefully we'll manage to get one more round.", L10n deadline has been reached, here we go for the final list NEW LOCALES * List of locales not shipping in v5.x but currently complete: ar, fa: still blocked by RTL support bn-BD, bn-IN, ca, es-CL, eu, kab, ms: need explicit sign-off in dependent bugs since they are new locales * List of locales shipping in v5.x but currently incomplete: bg, br, da, en-GB, is, km, lt, nb-NO, rm, tl, uz I don't think they should be dropped at this point as they are not that far behind.", Created ', ', PR: updating shipping_locales.txt for v6', (Also, taking the ni off St3fan as screenshots have since then been updated)', Comment on ', ', PR: updating shipping_locales.txt for v6 Created an updated pull request for v6.x ', Also landed a list of locales on master to make updates easier ' 
id=1252179	 'This was deliberate. We deprecated the QuickAction type rather than just deleted it so that, on upgrade from 2.0 to 2.1, anyone using a pre-existing View Last Tab quick action to open the app immediately after upgrade would have it handled, rather than having it crash as there is no way to remove that option before the app starts.' 
id=1265115	 " isn't ready yet, so I'll just make sure this bug is fixed there. *** This bug has been marked as a duplicate of ", ***' 
id=1130571	 'Created ', ', Pull request', Comment on ', ', Pull request A few nits/suggestions in the PR. Looks like the build failure is unrelated, so overall looks OK to me.' 
id=1194274	 "I'm pretty sure this is due to cell recycling not clearing the old favicon when the new favicon is nil", Created ', IMG_4732.jpg', Created ', IMG_4733.jpg', Created ', ', Pull request', Comment on ', ', Pull request Tiles remain blank for me.', Comment on ', ', Pull request Nice, LGTM.', 0a649b1', *** ', has been marked as a duplicate of this bug. ***' 
id=1184947	 'Created ', ', PR ', Turns out it wasn't just the codepath that was wrong. The project setting for the release flag was set to Aurora!", Comment on ', ', PR ', LGTM', Merged' 
id=1273961	 'How would you change the comment? Asking because it seems clear to me: it\'s a "Send" button on the menu, used to share the current URL.', I have no idea how it could be clear that this is a button label on the menu. If it would, then why it is not defined like: ', OK. Current comment: "String describing the action of invoking the share menu. On the men . What about (at this point also for the other strings): "Used as a label for the button, displayed in the menu, invoking the share dialog"?', (In reply to Francesco Lodolo :flod from ', ) ', Great one. (if accurate)', Comments updated as part of ' 
id=1155135	 'I guess we can say this is fixed by the new compact view.' 
id=1205975	 ':cpeterson, which version of the app are you running? You can find out from the settings page inside the app near the bottom.', (In reply to Stephan Leroux :sleroux from ', ) ', I was using some build of version 1.0. I can't confirm my exact version because Firefox crashes on startup since I upgraded to iOS 9.", Could you update to the latest version and see if this still happens? Yo re several months behind.", Created ', 1-tabs.png I reproduced this problem today with version v1.1 (1103). Here is a screenshot of my tab screen right before I saw the problem.', Created ', 2-tab.png And when I select the "ZDNet Google and Microsoft\u2026" tab in the lower right of the tab screen, the Hacker News page and URL is opened. It was not a transitory problem. Once the problem happened, I could keep reproducing it by switching back to the tab screen and selecting the ZDNet tab again.', Hey Chris, In your example, did you open the zdnet tab by long pressing -> open in new tab? Do you find that this issue occurs when you open tabs in this manner or are you able to reproduce it with tabs created from the tab tray?', I think I only see this issue when long pressing links and opening new tabs in the background. My typical browsing behavior is to open Hacker News or Google News and then open 5\u201310 links into background tabs to read later.', Not sure if this is helpful but I am experiencing this on FF 1.4, iOS 9.2 on an iPhone 5S. Similarly to Chris Peterson I browse sites like hacker news open several tabs with a long press and then go back and read them. I haven't identified exactly what causes it but seems to happen when closing a tab and then selecting an already open tab. It's almost like a list has become out of sync with the currently open tabs presented in the UI.", I still see this bug every day on Fennec version 1.4 (1405). Like C suggested, it seems as if opening multiple new background tabs causes the tab list UI to get out of sync with the actual open tabs.', Still seeing this on master (2.0). Approximate steps: 1. Open In New Tab on a bunch of links. 2. Hit the tabs tray button. Observe that one page hasn't loaded. Don't pick that one. 3. Pick a page. 4. The page that hadn't loaded loads instead. Or perhaps: 1. Open In New Tab as above. 2. Tap a link directly. 3. Switch tabs. Observe that the tapped link loads instead.", Created ', rnewman_tabs.mp4 Attaching a video rnewman sent over IRC. Interestingly, the wrong tab seems "stuck" even after re-selecting it multiple times in the tabs tray. In this case at least, the browser only fixes itself after switching to another tab, then back.', I had this work happen to a private tab too. Reading HN pressing and holding to open link in new tab. Accidentally clicked private tab. Reading through all the links I had opened and when I clicked on one page in tab view it jumped into private mode and showed me that page. Jumping back to tab view showed I was in 'normal' mode however selecting the tab again jumped me into the private tab.", Haven't had any luck reproducing this, and we're about to go to 3.0, so bumping this to 4.0.", I still see this problem every day with 4.0.0 (1).', Frustrating -- we've had a lot of trouble reproducing this. Chris, are there any particular usage patterns yo ve noticed when this happens? Do you see this shortly after opening new tabs in the background? Do you know if you removed tabs recently, or if the app recently resumed from the background, etc?", The simple STR in ', worked for me very reliably. The good news, however, is that I haven't been able to repro today with the new 4.0.0 (3) build. :) I'll keep testing.", WONTFIX for now. If we can reproduce, we can reopen.' 
id=1123385	 'Created ', ', Pull Request', The patch attached is also a fix for ' 
id=1159380	 'Since this is replacing the old download bug, I think its +.', I fixed this in ', Visit ', (Content-Type: application/zip), we open the zip in the browser, potentially blowing bandwidth on a larger file for example. Expected to see an error if we won't hand off like Safari", Created ', ', PR ', Erp. Removed this before the final patches. Thanks for checking. This shows an error page that says "Sorry :( Downloads aren\'t supported in Firefox yet" and has an "Open in Safari" button. Not sure if that\'s too whimsical or not :)', Wes, you mention an error page, but in the patch I just see us cancel the request.', Comment on ', ', PR ', I changed the bug title to match the PR. Let me know if that is not correct.', Must have not pushed the changes (probably forgot the -f?) Updated now.', Can you re-review. Also pinging darrin for copy.', Looks good. Aaron can you test this with a few different files? And see how the error page interaction works?', Created ', Screen Shot 2015-06-05 at 2.35.36 PM.png UI looks great. Matej, I like the tone here... anything yo d adjust? The emoticon is cute but looks odd in the flow?", (In reply to Darrin Henein :darrin from ', ) ', Do we have to send people to Safari? On the one hand it\'s solving a problem for them, but on the other, it\'s Safari. Regardless, the copy could be: "Downloads aren\'t supported in Firefox yet (but we\'re working on it)." (We could also say "available" or "possible" instead of "supported," which sounds more technical.)', Thanks Matej! I think we should still punt them out to safari... better to let them complete their task elsewhere than not at all. Wes, let\'s go with: "Downloads aren\'t supported in Firefox yet (but we\'re working on it)."', "Open in Safari" does not work ' 
id=1197142	 'Reproducible? Reproducible in #38?', shows an invalid cert warning.', haven't come across it again, although the hl.co.uk site isn't in my thumbnails any longer. I need to try and up the frecency there a bit to look to reproduce...", Both ', and ', load well for me. I doubt this has anything to do specifically with top sites. I think this is a case where a web site fails to load. The next time this happens, can you please try to load the exact same URL in Safari and see if that results in different behavior? (I do this load, stop, reload, kill tab on a regular basis in Safari when sites are unresponsive - I think webkit is not very good with detecting stale loads or timeouts)' 
id=1146564	 'Created ', ', PR: ', This patch introduces a `ReadabilityService`. This is a background services that uses the `WKWebView` and a new `ReadabilityBrowserHelper` to readerize pages on demand in the background. Couple of notes: * The interstitial that is displayed when you open a page from the reading list for which we have no content yet is very raw. It just shows a `<h1>` with a message. This needs UX. This is all located in `ReaderViewLoading.html`. * The `ReaderModeService` may need a better way to handle errors. Right now things simply time out after which we display an error. We can probably speed that up so that the user does not have to wait 10 seconds. * The current `ReaderMode` (which is also a `BrowserHelper`) can be much simplified by using this new `ReadabilityBrowserHelper`. There will be a nicer separation of concerns when we do that. This is a good first iteration that I would like to expose to our testers sooner than later. This code needs to mature in the coming weeks though.', Comment on ', ', PR: ', I really don't like the approach we're going with here. The polling HTML page feels like an unnecessary hack, and I'm also not convinced it's a good idea to try doing this all in the background. For one, messing around with WKWebViews off the main thread is likely an unsafe operation as mentioned in the PR. Secondly, AFAICT, the browser isn't going to be doing anything useful on the main thread while it waits for the result -- it's simply waiting for the result to come back. It's not like we'll randomly be parsing pages in the background while the user is browsing, right? I'm just not sure what contention issues this is trying to solve.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Yeah, we will. This will happen whenever entries are added to your reading list from other sources, namely from synchronization and from the share extension.', Oh, that makes sense. But thinking about this a bit more, WKWebView content is already executed out-of-process, so I'm not sure throwing it on a background thread buys us anything regardless.", Merged after fixing thread safety issues around WKWebView. Initial setup is now done on the main thread, while the NSOperation waits for readabilty results on it's own (unspecified) thread." 
id=1230504	 'Created ', ', Pull request This is a very small change that simply performs a standard reload when long-tapping the refresh button in reader mode instead of presenting the RDS/RMS action sheet / popover.', Sorry, I just saw the note about Safari hiding the refresh button in reader mode. I could try to implement that instead of the simple reload approach in the current pull request. Just let me know what would be more desirable.', Robin, what do you think? Disable the refresh button in reader mode, or allow it without the long-press?', Disable the long-press for RDS, but keep refresh.', Would it be acceptable to just let the long-tap event handler return without doing anything in reader mode? When you long-tap the button in that case it'll highlight in blue until you either release it or the gesture recognizer times out which, I believe, is after 6 seconds. That would be a very easy fix but the UX feedback might be a bit confusing. If we want to truly disable long-tapping in reader mode, we'd need to expose the gesture recognizer to the browser view controller and toggle it on and off when the user switches into and out of reader mode.", (In reply to hennes from ', ) ', I think this will be OK -- I think this bug is a pretty unusual edge case, so let's just go with the easy fix for now.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Cool, this boils down to a mini-change then. PR is updated accordingly. :)', Comment on ', ', Pull request Looks great. Thanks!' 
id=1169075	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', This looks great. It is very nice to have a visual feedback. I see you set the borderRadius but I don't actually see that. Or maybe it is hard to see. I would just file a followup for visual tweaks if needed.", I'm with wesj in that handling this with injected DOM listeners feels sketchy, but I'm not sure if we have any good alternatives. Let's land this ASAP so it can be in tonight's build, which will hopefully give us some beta tester feedback. ", *** ', has been marked as a duplicate of this bug. ***' 
id=1223392	 'Created ', ', Pull request Part 1 of using carthage correctly - move GDCWebserver in ThirdParty to reference version fetched by carthage' 
id=1234581	 'Dupe of bug ', ?', Sounds like it. *** This bug has been marked as a duplicate of ', ***' 
id=1293931	 "This sounds bad, though it requires a bit of user interaction, so I'm marking it sec-high. Stefan, do you know who could look into fixing this? Thanks.", Should be a relatively straightforward fix -- just need to check origin of the message frame.', Muneaki: thanks for the great bug report! This is certainly a bug, and I think this can be leveraged to produce a security issue. This allows a 3rd party site to be compromised and pretend to be the Firefox Account server by messaging directly to the Chrome code. It can be exploited to exfiltrate the contents of the device as follows: 1) attacker creates account on FxA production service; 2) attacker gets FxA tokens for attack account; 3) attacker comprised 3rd party, injecting attack accounts "FxA tokens" in place of users real tokens; 4) iOS device syncs immediately, before user notices FxA email has been changed. (This could be very hard to notice even after change, if targeted email addresses with Unicode, etc are selected.) 5) attacker fetches user\'s synced data from attack account. The iOS FxA implementation is intended to never reveal sensitive tokens to the trusted content -- and it\'s worth auditing the code to ensure that password reset requests, for example, don\'t do something foolish in this way. Therefore, my initial analysis is that this attack doesn\'t allow to exfiltrate sensitive tokens from the user\'s actual account. As Brian says, as long as the origin of the postMessage in the attack scenario is correctly scoped to the 3rd party content, we can mitigate this attack. Again, thanks for the valuable report!', markh, kit: this is a novel attack on FxA's hosted content that I hadn't seen or considered. I believe that the WebChannel apparatus protects Desktop (and Android), but I want you to be aware of the method and consider ramifications in your area of expertise. (NI rather than CC so it doesn't get lost in the noise. Please add others you think should be aware.)", (In reply to Nick Alexander :nalexander (Away Aug 9 - Aug 27) from ', ) ', Wow!, I'd be happy if it could reach the border of your _novel_ vulnerability criteria here :-) ", (In reply to Muneaki Nishimura from ', ) ', Muneaki -- heh, I\'m not one of the folks who determines such bounties, so I wasn\'t trying to use _novel_ in such a precise way. It was, however, new to me: an inversion of the attack process, from "I take your credentials" to "I make you use my credentials". Novelty, however, might not be correct: the WebChannel process that all other Mozilla clients use explicitly prevents against this. That\'s a decision for the Bug Bounty program administrators to make. Thanks again!', As Nick mentioned, I strongly believe the WebChannel mechanism provides effective defense against this - not only is the origin of the message checked, that origin must be HTTPs, and the message must come directly from the site being trusted. While I'd be devastated to hear that's not true, I encourage anyone CCd on this bug to try and prove me wrong. (Also, see ", , fixed in 38+ - in that bug, a https page could wrap channel-hosting content in a webframe and "spy" on the messages going back and forwards between them. The fix for that caused the webchannel code to better check that only the actual trusted sender of the message gets the response. Even though the FXA servers are set to disallow iframing, any mitigation here should also take this vector into account.', oops - to be clear - s/a webframe/an iframe/', I see we also use WebChannels for about:newtab and remote troubleshooting on Desktop. At first glance, both of those look good: remote troubleshooting does a permission check, which requires HTTPS, and newtab uses HTTPS URLs for production and staging. ', looks quite subtle. On iOS, do we need an explicit check to make sure we're posting the reply to the same frame that sent the request, or is that already handled? Thanks for the report, Muneaki!", (In reply to Kit Cambridge :kitcambridge from ', ) ', Yes, we do. I always intended to implement and use WebChannels on iOS, but we didn't do it, and I missed this check :(", Created ', ', Link to Github pull-request: ', Verified (via JS console) that this blocks the message from ', if the origins don't match.", Comment on ', ', Link to Github pull-request: ', Comments on GH. Looks good with notes.', master: ', v5.x: 37040b9' 
id=1093900	 'I have just added the Firefox iOS project to the automated development build server. This mean you can always follow the latest and greatest Portland Demo work that we work on now and Production work later. If you go to ', using *Safari on your iOS device* and click on the \u2018Demo Bot\u2019 row, you will see a little green Install button. Hitting that will download and install the latest build of the app on your device. If you exit Safari then you should find the application, boringly called \u2018Client\u2019 but with a familiar icon, on your home screen. Your device needs to be in a whitelist that we maintain, so please let me know if you want to look at these builds and I will help you to get that going.' 
id=1181231	 'The back/forward breakage is probably due to ', .', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR ', I've seen some strange states go by here, but I think in some cases we end up with error pages pointing to error pages. This unwraps urls (or tries to) to find the inner most one in those cases (and then we'll try to load it). We really shouldn't show error pages for error pages, but I'm guessing that the session restore code isn't great at detecting that.", Heh, I had a WIP for this -- probably should have assigned myself here. FWIW, my fix to this is here: ', Comment on ', ', PR ', Heh, looks like we went with pretty different approaches to fixing this. I guess either is fine as long as it works...' 
id=1248069	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I have encountered this error before. What you need to do is do a full clean before building (cmd alt shift k) in order to force the linking against the alamofire dylib. For some reason it remains linked to an old version unless you do.', Ah, thanks for the tip -- I had only tried \u2318\u21e7K. I'll go ahead and close out ", too since it's likely the same issue." 
id=1189188	 'You can swipe the bookmark (left) in the list and delete it. Does that work for you?', (In reply to Wesley Johnston (:wesj) from ', ) ', Definitely works. Is that a common pattern on iOS? I'm clearly not an iOS user, but I expected a long tap to work, exactly as it works for tiles.", Yeah, swipe is the iOS pattern. Visible partial swipe transitions account for discoverability, and hiding multiple buttons behind the row is the extensibility. We use long-press where there's no row (e.g., for links in web content)." 
id=1139061	 "We don't plan to do this in v1, and perhaps not ever, so closing this for now." 
id=1149106	 "Lets hide Safari's reading list for now.", activityViewController.excludedActivityTypes = UIActivityTypeAddToReadingList , too lazy to rebase and patch it but that worked for me in simulator', (In reply to Aaron Train :aaronmt from ', ) ', Thanks. Looks like you were out-lazied :D' 
id=1268924	 'Created ', ', Link to Github pull-request: ', Too late for the RC build or can this still make it?', Comment on ', ', Link to Github pull-request: ', I need to do some more builds for i10n fixes so I don't see why we couldn't uplift!", Comment on ', ', Link to Github pull-request: ', LGTM', master: ', v4.x: decb5fc' 
id=1162599	 'Looks fixed in build 15' 
id=1238008	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM But do we still want to land this?', I think so. The original intention of the tabState debug menu option was to send the .archive to allow us to reproduce it on our devices by dropping it in.', master 3f2ef0c28bb7227e75b56662c72f710f92c6449b' 
id=1171277	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Or rnewman since he just touched this code.', Comment on ', ', Link to Github pull-request: ', Looks sane to me, but perhaps it can be simplified?' 
id=1183739	 "I'm going to spend some time to see if I can reliably reproduce this.", Ok this should do the trick; at least for me on my iPhone 6. 1. Load a site 2. Reboot device 3. Launch Firefox See sadness: ', This seems to be reproducible on Build #23 only but not on master.', Aaron, still affects 24?', Indeed', Still see this, hoping it 'goes away' with in-store build", How is this now, Aaron?', I still see this. In fact, as per my recollection, the first time I tried Firefox for iOS, my immediate observation was that it was quite slow to launch. While a native app like Safari opens up in about 2 seconds, Firefox takes about 4 or more seconds. For new users, this can make them impatient as they'd feel like they are waiting too long. One option, if we can't get rid of the delay, would be to incrementally display UI elements as they are loaded. Instead of the splash screen. This would at least make users less impatient.", Do you have steps to replicate the issue reliably?', Aaron, I just updated to v5.3 (up from 5.0) and it opens up in 2 seconds. So, I don't see the issue anymore. I hadn't listed any steps as such because I was referring to a cold and fresh launch of the app." 
id=1250584	 'Created ', ', Pull req.', 34ae579 We don't strictly need to uplift this for bookmark sync to work, but it's nice to have.", v3.x 3aa10c2' 
id=1104805	 'I think this was a merge issue where this change was not picked up or I accidentally skipped it. ' 
id=1130373	 "There is no point in doing this. WebKit simply does not support 'let'. So we have no other choice than to replace let with var." 
id=1192859	 'This bug is hilarious. func testCanadaComputers() { let url = "', ".asURL! let actual = url.baseDomain()! XCTAssertEqual("canadacomputers.com", actual) } SharedTests.NSURLExtensionsTests testCanadaComputers : XCTAssertEqual failed: ("canadacomputers.com") is not equal to ("canadaputers.com") - com. com. com.', Created ', ', Pull req. East-coasters!', Comment on ', ', Pull req. Looks good to me - not sure why there wasn't a test host set previously.", 7998bc7' 
id=1144349	 'Fixed in ', . *** This bug has been marked as a duplicate of ', ***' 
id=1204536	 'The rabbithole goes quite deep. If we want to do icons here, I see five options, in increasing order of complexity: 1. Don\'t write or show favicons anywhere in private browsing mode. 2. Allow "Browser" (should really be "Tab") to manage icons and URL associations in memory. This is like a mini icon manager. This would work because all of the other uses of icons \u2014 history lists and top sites \u2014 don\'t apply to private tabs; they\'d fall back to the default icon. Those other uses are the principle reason why we have the mappings between URLs, sites, and favicons. If we can live with the temporary and tab-scoped association between URLs and icons, then stuffing that logic into the Tab (or nearby) would work fine. There\'s a small cost in redundant fetches. 3. Tag icons in the main DB. Once they\'re used out of private browsing mode, they\'re PERSISTED. If they\'re only ever used in private browsing mode, they\'re TRANSIENT. Periodically kill TRANSIENT icons. This lets data touch disk, but it\'ll eventually disappear. This keeps our favicon management code largely untouched. 4. Overlay a second favicon access layer on top of what we already have. We could do that by creating a separate in-memory BrowserDB and throwing it away when the user is done with private browsing. This is architecturally a little more elegant than a bunch of special cases. We could also do it the obvious way: maintain an in-memory cache, and just look in both places but only write into the memory cache from private browsing and the persistent store from regular browsing. This is complex but complete. 5. Rewrite our favicon layer to use an abstracted store that\'s not BrowserDB. This buys other wins, but obviously is a larger change. I recommend (1) or (2).', I think there's definitely value in displaying the favicon - especially when Chrome and other apps show the favicon for private tabs. Option 2 sounds like the easiest win for now.", Created ', ', ', Looks like SDWebImageCache has an option you can provide it to only cache the image in memory and not disk. I've added this option on the condition that a tab is private when Favicon.js runs to download a site's favicon. I've also avoided storing the favicon in the profile so we never persist it in sqlite. This works since we only need favicons for the tabs in private mode.", Comment on ', ', ', r+ with nits.', Fixed nits and merged' 
id=1152858	 'Created ', ', PR', Created ', ', PR', Comment on ', ', PR Looks like this will need a bit more investigation.', I spoke with @darrinhenein and I think we can make the thumbnail image scale enough to fill the cell when the screenshot will be too narrow to fill the cell's height. The only downside of this is the right edge of the snapshot on iPhone landscape won't align with the edge of the web page like it does on portrait", Created ', iOS Simulator Screen Shot Jun 3, 2015, 10.41.28 AM.png', Created ', iOS Simulator Screen Shot Jun 3, 2015, 10.43.29 AM.png Doesn't look like it's an issue anymore. I can't seem to pinpoint the change but the UIImageView frame is now scaling down correctly. I've attached a before and after screenshot" 
id=1132477	 'Created ', Screen Shot 2015-02-12 at 4.58.16 PM.png As of the latest commit (', ) it appears to work in the 4s simulator for me.', I'm going to close this because I can't reproduce this. Tested with 4s, 5, 5s, 6. I know there have been changes to the bar recently so maybe that also fixed this bug? Please reopen if you see this happen again." 
id=1145590	 'Let\'s not over-rotate on the confusion. Some of this should be addressed by on-boarding, some of this is just stuff people need to "discover" and learn for themselves.' 
id=1276542	 '*** ', has been marked as a duplicate of this bug. ***', Chardis, can you clarify the behavior with First Run tour: Do you expect the user to end up on the Home Page (new portal you provided)? What about "What\'s New in v5.0" tab?', Actually, we expect users can end up on the Home Page when they launch the browser. We believe that most users want to visit websites from the home page. I know this depends on a default homepage being set. I suggest that we can set a default homepage like about:home for other locales, and about:home link to new tab page. If we have not enough time to make this change, we can land it for the next release.', I don't fully understand what you are asking for. Can you explain the following two cases? * Clean browser install. User will see the first run tour. What happens when they hit 'Start Browsing' * User creates new tab. Currently an empty tab with the top sites is shown.", (In reply to Stefan Arentz :st3fan from ', ) ', In this case, I hope user will see the home page instead of new tab page by default. ', If user creates new tab, open new tab page.', Thank you, that is clear. What did you mean with the "and about:home link to new tab page" part?', (In reply to Stefan Arentz :st3fan from ', ) ', Like desktop and android, if I visit about:home, the browser open the new tab page fpr me. So I think maybe we can set "about:home" as default home url for other locales, the first case maybe simple.', Splitting of new tab page into ', . This bug remains about the first run experience when a homepage is set (only really possible when a default home page is set).', Created ', ', Link to Github pull-request: ', Merged.', v5.x cf4c8327ce9d44fb25bb02849ae076cde6f52b46' 
id=1157376	 'Created ', ', Link to Github pull-request: ', A little one.', Comment on ', ', Link to Github pull-request: ', rnewman reviewed over IRC.' 
id=1221693	 ' PR includes fix for this bug.', Included in mentioned bug fix master b98103973b5ccfd9b2008eb29bb04de54f862c73' 
id=1245872	 "I've addressed this as part of ", . ', I've chosen to open a new private tab instead of going back and opening a normal tab for a couple of reasons: 1. If the user has the 'Close Private Tabs' switch ON, when we automatically switch to normal tabs from private mode the user will lose all their tabs when that probably wasn't their intention. 2. Additional refactoring would be required to get the animation timing right between switching from private -> normal then handling the open tab animation.", master 696967ac51a8e049c3b10194e5db6b737f742bf7' 
id=1232415	 "Stefan mentioned that pre-release final builds can't have debug settings. Sucks for those testing on that final build. Can anything be done?", I don't think there is a way to hide/show the debug settings bundle at runtime like we do for the debug databases shortcut from the settings list screen. One option :st3fan mentioned was to reword some of the options and put it under a 'developer' or 'advanced' subsection of the settings bundle so it's not as obvious to a normal user what the commands are. I don't see the harm in exposing this to public users.", Safari has a "Web Inspector" preference designed to be used in conjunction with developer features on Safari for your desktop in the "Advanced" section. Having a "Developer" or "Advanced" section in Settings seems appropriate.', Steph, this is fixed, right?', Yup' 
id=1124798	 "I can't reproduce this. Have you visited anything?", I have been browsing for a few hours. I don\'t see any history in the History panel... ...or I didn\'t, until I tapped it 3 or 4 times. Then I saw my history. It\'s very flakey though. I have never seen history on the first tap. It always takes a few taps to get the data to appear. I even "tap and wait" in case it takes a while to fetch and display. Still no difference.', I'm using a new iPod with iOS 8.1.2", Created ', ', Pull request', Comment on ', ', Pull request +'d - just check the comment I added to the PR", Marking this as resolved since the PR was merged.' 
id=1136219	 'Created ', ', PR: ', This patch introduces a AutocompleteTextField.selectAll() method and calls that when you enter the Awesome Screen. This results in the initial text being selected as in Safari: with the text highlighted but without the carrots. You can immediately start typing over the text.', lolautocorrect', Comment on ', ', PR: ', Looks pretty good, but I found that the autocomplete highlight can get "stuck" on the text. STR: 1) Click the URL bar. 2) Click Cancel without typing any text. 3) Click the URL bar again. 4) Type some text.', Brian, I've looked at this, but there is a lot of confusing state in the code. If you know a quick solution, feel free. Otherwise I am not going to spend time on this right now because we have higher priority items.", Comment on ', ', PR: ', (In reply to Stefan Arentz :st3fan from ', ) ', Hm, might be an iOS bug. I added logging to verify that the most recent attributedText being set does *not* have a background color, yet the background color still persists. We can explicitly set a clear background color to force it to be removed -- work for you? Works for me if so!', I meant to mention that I added this change to the PR (', ) if you want to take a look/test it out.', Oh interesting that you think this is an iOS bug. That would explain why I was so confused about the highlight staying there. The patch/workaround looks good to me.', I can still reproduce the behaviour you mentioned in ', - Will take a peek again later.', Fixed by ', . *** This bug has been marked as a duplicate of ', ***' 
id=1266740	 "Adding Brian since he's the one who built the system to sync iOS and Android, and he's most familiar with it. Not sure if he also did the search implementation. To answer your question #1: l10n is synced from aurora ", And you should be able to set up overrides as you want for English ', Unfortunately this particular override is a change to list.txt, so that won't work. I'll get the reorder checked into aurora and we can sync from there.", en-US is actually the only locale we *don't* sync (we probably should, but it's not part of the l10n repo and haven't gotten around to including it separately). The entire set of en-US engines, including list.txt, is in the overrides directory that flod linked to.", Beautiful. I'll do some testing and then add list.txt changes to my pull request.", I did some builds and testing and in all my tests, it was using the engines from SearchPlugins/en not SearchOverrides/en. Not sure why. I guess it really shouldn't matter though. I should probably make my changes in both places.", Whenever we update the search engines, we re-run the search import script (scrape_plugins.py). That script completely deletes the SearchPlugins directory and redownloads every Android search engine, importing them into a newly-created SearchPlugins directory. This process also includes making any iOS-specific changes to the search engines by copying engines in the Overrides directory to the SearchPlugins directory (full details at 1 ). So the general workflow for updating engines is to update the engines in their respective l10n repos or add items to overlays/overrides, then re-run the script. You generally don't need to modify SearchPlugins directly -- it will be updated when you run the script. Sorry for being unclear before! 1 ", Created ', ', Update EN search plugins This updates the en overrides to the new engines. After this is done, we'll need to resync the engines.", Comment on ', ', Update EN search plugins Looks fine to me! I'll run the script and commit.", Merged. Also updated the script to ignore :hidden engines and did a fresh import. master: f9e8311 v4.x: 1467228' 
id=1147158	 'Created ', ', Pull request' 
id=1211925	 'Created ', ', ', Comment on ', ', ', LGTM', Merged' 
id=1224265	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1170230	 'Created ', ', PR ', I'm going to keep playing with this a bit more (I realized that there may be transaction code I didn't wrap here?), but up for review/discussion anyway.", PR is closed. Should this?', They are on a background queue.' 
id=1236914	 'Created ', ', Pull request Part 1 of using carthage correctly - moving adjust to use carthage compatible tag from inside third party' 
id=1182489	 "Think I found the solution, but will consult Emily (or whoever made this part) for further information. Basically just noticed that the edit bar view was on top of the border layer view, so I switched the two and fixed the edges problem. Don't know if this will cause any problems, which is why I'm talk to fluffyemily heh", Created ', ', PR', :bkmunar take a look at the comments I put in the PR.' 
id=1190999	 'Created ', ', PR', Comment on ', ', PR This looks better in landscape/ipad, but on portrait it looks like the selected URL in edit mode is scaling up? Definitely something weird going on there, not sure it's ready to land.", Bryan, are you able to repro the issue Darrin is talking about? What happens if you move the updateNavButtonsForOverlayModeAndToolbarChanges call out of transitionToOverlay and into prepareOverlayAnimation?', wanna give the go on this darrin?', Comment on ', ', PR It looks much better, but it still looks like the text field/white box gets overlapped by the buttons as they fade out. Couldn't we just move the text field in front of the buttons so as they fade out the text box expands *on top* of them?", Separating the patches', Comment on ', ', PR Looks great, thanks!' 
id=1127547	 'Created ', ', Pull request', Comment on ', ', Pull request With regard to namespacing .. can we do a similar thing as in ', ? I am also going to follow that pattern for the ReaderMode.js code. I think that is the only thing that really needs a fix. Otherwise, let's merge this and see how this works in practice. (I see you already found one case where it fails in iframes.)" 
id=1249828	 "I'm guessing all your pages don't have titles. :) Most of my tabs for iOS have titles.", I can repro this. JSON.stringify(Weave.Service.engineManager.get("tabs")._store._remoteClients) => "{"ekhsSAMMigaU":{"id":"ekhsSAMMigaU","tabs": {"title":"', ","icon":null,"urlHistory": "', " ,"lastUsed":"1455910687846"}\u2026', Everything storage on down is right, so finger points at this: var displayTitle: String { if let title = webView?.title { if !title.isEmpty { return title } } return displayURL?.absoluteString ?? lastTitle ?? "" } \u2026 in other words, we\'re not able to get a title from the webview at the point we write out the tabs, so we\'re writing the URL instead. This\'ll need a little more analysis to find out what\'s happening when.', Created ', remote-tabs.png Currently none of my remote tabs are shown \u2013 only panels', This can't ship as broken.", Looks like yo re seeing something else, Aaron: yo re seeing the same home panel URL, presumably because we flushed to the database before restoring tabs. Likely the same root cause, but not the same symptom. Dumping this in 'General' 'cos this is almost certainly a tabs persistence issue.", Emily will look at this: related test failure.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request', Comment on ', ', Pull request Follow-on/more to think about: are we persisting at the right times?', (In reply to Richard Newman :rnewman from ', ) ', That's definitely something to consider. Right now we are persisting on restore, every time we complete a URL load in a webView and every time we create a new tab. We don't really need to persist on restore - we are restoring the state as it was when we last closed the app, so the current DB and disk state on before tab restoration will be identical that what it is after. We don't need to persist to RemoteTabs when we create a new, blank tab. All this does is replace the existing DB state with ... exactly the same DB state as until we have something loaded in that new tab remote tabs just don't care. Every time we complete a URL load, sure. This is sensible. This is when we should be persisting. There may be other times we persist, but nothing that I can see right now.", Assuming that we don't use this particular pile of persisted tab state for anything but Sync, we really just want to persist at two times: * Immediately before a sync while the app is in the foreground. * Immediately before we're backgrounded (because if we do it any later, the webviews are gone!). There's a second decision, which is when/whether to trigger a sync as a result of browsing activity -- browse enough and we should probably sync your tabs\u2026 and in the course of so doing we will persist them. Does that sound sane to you, Emily?", #merged c0b1939721a0ed563fb6582714738b9ddd945e1d', v3.x 2df73de6d3e2a43a53c12f8ac9346bc4c141329a' 
id=1096944	 'For a longer term solution, see this thread: ', The thread mentions that Desktop may already be Syncing search history as part of the Form Data. Worth looking to see if you can access it?', (In reply to Stefan Arentz :st3fan from ', ) ', We really don't want to parse real history if we can avoid it.", Grab form history, look for name="search-history". We might build something better, but I\'d bet against it.' 
id=1270858	 'Created ', ', Link to Github pull-request: ', Touches project config and telemetry so tagged both of you on the review!', Comment on ', ', Link to Github pull-request: ', LGTM, just wonder if we want to use a name other than "Fennec" for dev builds.', master 837cfcd15f7281b17063bc0f50b1567957990bc5' 
id=1141572	 'I agree, and I would go further: the animation metaphor we use makes little sense. If you tap the tap number, the "screen" -- including chrome UI -- collapses to a tab representation. The title and favicon fade in, with the page blurred behind them 1 . If you then tap a *different* collapsed tab, the "screen" -- including the chrome UI, magically transported from the other location they collapsed to -- expands. Except the chrome UI pops and jumps around. The arrangement of surfaces doesn\'t make sense to me: there\'s only one chrome UI, it shouldn\'t be going to and coming in from different places. 1 That pops like crazy for me, so I removed it when landing ', . I've filed ", to re-introduce it.', Tried out a build w/1135768, yes, while the animation is better the layering and clipping problems still exist (as mentioned above).', I don't disagree \u2013 the currently implemented animation is far from ideal. That being said, I think there is still some work before we're close to what was spec'd out here: ", The chrome UI (url bar, etc) should remain with each tab, as if each has their own instance. Yo ll notice in the linked gif that the URL bar slides behind the thumbnail as well. One major difference is that in all the mockups/gifs, the background layer of the tab and tray is persistent, so the only thing animating is the tab itself. If there are concerns with the intended animation (as in the gif), I'm happy to discuss those. :nalexander, should we use this bug or file a new one to get the animation closer to the design?", These types of inflamatory bug titles aren't really helpful. We've talked this through quite a bit in meetings. Our current setup (a BrowserViewController controlling a TabsManager) requires that the BrowserViewController be behind the TabsManager during the transition. We use a fake screenshot of the tab to make it appear on top during the transition. We could try to fake it with the urlbar as well, but I'd rather just fix this (", ).', Let's use this one. ", Concerns? No -- but I'm confused because the ticket I landed (", ) did not move us closer to the attached GIF. That is, the collapsed tab representation has the title on top, etc, etc. However, I'd very much like to see the chrome animation updated -- the tray and buttons moving out to the sides makes much more sense to me.", Sorry, ignore the visual design of the gif and focus solely on the animation. ', is probably relevant as well... Let's get it as close to the design as possible and then we can evaluate the metaphor and visual relationships, etc.", Darrin, can we close this? It seems like yo ve been doing other tweaks to this in follow ups?", Yep.' 
id=1201901	 'Created ', ', ', Comment on ', ', ', This seems to have fixed the issue reported. Is the URL bar supposed to have an alpha < 1? I only ask because while testing for this on iOS 8.4 on a Google search results page, the blue links can be seen blurred between the top of the web page and the bottom of the text field in the URL bar. When 'flinging' the page, this then looks like a 'flicker' in the rendering, which I found kinda jarring. Probably this is another issue entirely. Maybe Darrin can answer my question", Created ', Screen Shot 2015-09-10 at 1.57.01 PM.png', Yes, the URL bar is supposed to be semi-transparent like that. The content should *not* appear behind the status bar though.', Merged' 
id=1151504	 'Created ', ', Pull request', Thank you Boris.', My pleasure. :-)' 
id=1163121	 'Created ', ', PR ', Instead of setting up the readerModeBar in viewDidLoad for every page, the readerModeBar now only gets initialized when it needs to be shown.', Comment on ', ', PR ', Looks good!', Merged.' 
id=1227506	 'Is it possible these extensions are not in the submitted build?', Clarification this is on 1.3, I can not access the share menu currently on master (11/25) to see if this is a problem due to a crash ', Seems like these are available from other applications but not available in Firefox', blocks testing this on master, but is otherwise unrelated.', I can't reproduce this issue on latest the TF build (1304). (probably, was fixed by ", )', This works correctly for me in the 1.3 App Store build.', Regression covered in 1236644 *** This bug has been marked as a duplicate of ', ***' 
id=1302577	 'What do you think about this Richard?', A Socratic answer: Do you look at the CI results for performance tests? Have they helped you catch performance regressions? Might they catch regressions in the future? Does the team routinely run them locally? Can you create a target that runs periodically to catch regressions over a broader period, giving you the best of both worlds?', No. We haven't had the CI working reliably for a while now. But I only check CI to make sure I didn't break any existing tests. ", I dont think they can catch regressions. We don't track the results anywhere. ", I can create a target that does that. But we'd need a way to track performance over time. This might be something we can build into the CI. This is why I wanted to disable the tests. I don't really see a point of them as it stands. And another thing about running these tests in CI is that we dont have any info on the VM the tests are running on. If we get a slow VM and the tests take longer it would look like a regression if we were tracking it.", I think you just answered your own question :)', Created ', ', Pull Request', master 9f724fbe8ee46d5ba812fbbfc7235f10df370fb6' 
id=1172958	 'Argh. This got all bitrotted when I landed. Thought I had it fixed. I hate you git.', Created ', ', PR ', Just lost in uplift. Carrying the r+. Thanks for testing Aaron.' 
id=1239076	 'Created ', Screenshot 2016-01-12 15.39.17.png Request time interval configuration', Created ', ', Link to Github pull-request: ', Hey Robin, I don't remember if you ux-r'd the passcode creation/removal/input screens but feel free to add any UX comments for those screens or the all of the Touch ID & Passcode settings and I'll do a sweep to clean up all of the UX.", :bnicholson, what do you think about storing the 'Require Passcode' interval in the Keychain instead of the user's preferences? I feel like something like that might not necessarily be sensitive information but has an impact on the security of the passcode.", It might be worth considering if we required a passcode for changing the interval, but it doesn't look like we do that now. Someone could view/change the interval simply by opening settings, so moving the interval to the keychain wouldn't buy us much IMO.", master a7adc02ce481a4ed282de3f3838e086c6934f35e' 
id=1184719	 'Created ', ', PR This works for when it's on top of the keyboard, but on the URL bar it's still acting as it's part of the URLBar. Just removed it out of the footer view so that it doesn't get pulled down with the rest of the footer view when the keyboard is up. The constraints still apply making it viable.", Emily's right. Make it persistent. If navigated away from, disable if returning by using the back/forward (show once per session)." 
id=1109688	 'I would like to work on this.', (In reply to bigmacdev from ', ) ', Hi bigmacdev! We have another person working on this already. I don't think they are active on bugzilla but I have seen a pull request already for this feature on Github. I'll try to post a few more mentored bugs in the coming days.", duplicate? *** This bug has been marked as a duplicate of ', ***', Yes duplicate. I also marked 1109684 as a duplicate. See that bug for some more background info for this feature and why we cannot create a global Action Extension for this.' 
id=1252158	 'How many tabs do you have open? "Grey window syndrome" is usually a temporary WebKit state related to OOM.', Possible duplicate of ', .', *** This bug has been marked as a duplicate of ', ***', 9 tabs on an iPad Air. Only a gig of ram I believe.' 
id=1193790	 'Created ', ', Pull request', Comment on ', ', Pull request Code looks good!' 
id=1144917	 'Created ', ', Link to Github pull-request: ', Here is an alternative fix that replaces the `UIToolbar` with a `UINavigationBar` - ', - I think that is more appropriate than fidgeting with image offsets.', Created ', ', PR: ', Updated PR based on the original one.', Merged in this change. The only additional change I made on top of the original PR is that I changed back the settings icon and the + button. We still need more official assets for those though.' 
id=1205803	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', So, just to be clear, there are 3 Clear Private Data strings: 1) The general-level settings item, 2) The Clear Private Data settings page title, and 3) The Clear Private Data settings page button. This PR succeeded in separating 1 from 2 & 3, but 2 & 3 are still collapsed into a single item. We could create another tableName specifically for the nav title or the button, though that feels like a hack. I can do this if l10n thinks it'd be worth it." 
id=1154762	 
id=1273861	 'Created ', ', Link to Github pull-request: ', Merged and closed', Created ', ', Link to Github pull-request: ' 
id=1219294	 "This is being moved on Android to Privacy so I'm marking this as WONTFIX." 
id=1229956	 'Created ', ', Link to Github pull-request: ', I'd like to get this into the next 1.3 build.", Yes please!', v1.x: 15d4226 master: d114d5c', *** ', has been marked as a duplicate of this bug. ***' 
id=1166389	 'Sounds like Karen is OK with simple methods for determining the location', yep, provided we feel we capture most of the users (which I would expect we would when users select their location when setting up their phone).', We already have support for different languages and regions, so it's just a matter of importing the remaining search engines from Android.", Created ', ', Link to Github pull-request: ', I commented in the PR too, but: is there a reason for switching away from the list of locales actually localizing Firefox for iOS to a broader list? Even if you want the latter, "locales with a build for desktop on aurora" is not the list you\'re looking for. Desktop on aurora (95) ', Android single-locale builds on aurora ', And yo d still need to filter out ja-JP-mac.", I pulled the URL directly from your email a month ago: ', But I should have double-checked. Good catch! (In reply to Francesco Lodolo :flod (traveling, back 10 Jun) from ', ) ', Yes; even if the rest of the app isn't localized yet, locale-specific search engines are incrementally better than no localizations at all. Karen specifically mentioned en-GB as a case where we do not want to default to Yahoo, but we don't have en-GB localizations yet. Without this PR, all missing locales would fall back to Yahoo as default (along with the rest of en-US engines), which we don't want.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Argh, huge failure on my side (searched for all-locales in my URL history and got the browser one). ', OK, that makes sense. I assumed that we were use these searchplugins based on the enabled locale, which doesn't seem to be the case.", (In reply to Francesco Lodolo :flod (traveling, back 10 Jun) from ', ) ', Correct me if I am wrong, but I think we are actually selecting the search plugin based on the active locale. We have a bug for doing this based on the user's location I think?", (In reply to Stefan Arentz :st3fan from ', ) ', That used to be this bug. Using the engines from the user's locale gives us parity with Android, and we decided that that was sufficient for v1 (see ", ).', (In reply to Stefan Arentz :st3fan from ', ) ', I'm not the one making decisions here, but ", says "We need to use location-based search engines"... If we\'re not doing that, I feel that we should just import search engines for localizations that we actually support.', (In reply to Francesco Lodolo :flod from ', ) ', But as I mentioned in ', , Yahoo is the default engine only for en-US. All missing locales will fall back to en-US, meaning all missing locales will point to Yahoo. Is it not at least a slight improvement for locales to see more relevant engines specific to them, even if the rest of the app isn't localized? Why leave them out if they've already been created and approved for mobile?", At this point I'm not following the discussion: * We show search engines based on the locale, not location. * We're already picking search engines for all locales that want to translate this product. In which scenario would you use the searchplugins for, let's say, Zulu?", (In reply to Francesco Lodolo :flod from ', ) ', Correct. ', Correct, but the PR here will change this to also include all engines in general that are available on Android, whether that locale is translated or not. ', Zulu doesn't have an Android searchplugins directory (", ), so we'll be falling back to en-US search engines in that case. For any locale that does have an Android searchplugins directory, however, we will use it. In short: if there is no translation for a locale but we have searchplugins for that locale, the search engine list will be tailored to that locale, but the rest of the app will be translated as en-US.", Zulu was clearly a bad example (not supported by any of the two). ', Let's say Greek (el). Is supported on Android, but not localizing iOS. In which scenario do I get Greek searchplugins? The phone is set to Greek as main language, but we don't have Greek. The locale detected by the app will be 'el' (with English strings), not 'en-US'?", (In reply to Francesco Lodolo :flod from ', ) ', Right -- we're using NSLocale.preferredLanguages() to get the language the user has selected at the OS level, then finding the search engines based on that language code. The translations inside the app don't affect the set of preferred languages.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', OK, then it makes absolutely sense to use ', Comment on ', ', Link to Github pull-request: ', LGTM Sorry for the delay I was on PTO yesterday.', (In reply to Francesco Lodolo :flod from ', ) ', One day I'm sure I'll manage to write the right URL (we need Android searchplugins, so /mobile) " 
id=1254603	 'with the menu changes, the home panels will become accessible through the menu. This will result in changes needing to be made during home panel display.\r \r iPhone Portrait:\r \r * back forward and refresh icons should not display on toolbar\r * icons in toolbar to display in the following order:\r Top Sites\r Bookmarks\r Menu\r History\r Reading List\r * Home Panel icons should disappear when menu is displayed\r * Home panel toolbar should not display in menu when presented in this instance\r \r iPad & iPhone Landscape:\r \r * back, forward and refresh buttons should not be displayed. This will force the URLBar to left align\r * home panel icons should move into the top toolbar between the URLBar and the menu icon. This should force the URLBar to shrink to fit the icons in.\r * Home panel toolbar should not display in menu when presented in this instance ' 
id=1307870	 'This is working fine in Safari.', The javascript is parsing the user-agent string and crashing. Well that sucks. here is the js ', ', Please report a website compatibility bug at ', @Farhan - Thanks for the help. @Aaron - Bug reported here ' 
id=1123055	 'Just to add, this accessibility feature is for people with worse sight who might get trouble seeing e.g. subtle light gray font on white background. So when this setting is enabled, apps are expected to make not-so-dark things darker (or perhaps not-so-bright things brighter) so that they have more contrast against a bright background which should help them to read it better (or at least recognize that there is something there).', Created ', ', Pull request' 
id=1134789	 'I think we removed this awhile ago.' 
id=1146487	 '... which led directly to ', .', *** ', has been marked as a duplicate of this bug. ***', The icon should change to the Trashcan icon, indicating it has been added. Then, tapping again would remove it.' 
id=1196949	 'Created ', ', ', Created ', ', ', I also updated the system buttons that used the Done action instead of our localized copy.', Comment on ', ', ', LGTM', Comment on ', ', ', LGTM', Merged.', (In reply to Stephan Leroux :sleroux from ', ) ', Either l10n comment is misleading (all the title occurrences instead of button label) or this effectively reuses one string for button labels and other elements which will not work well. ', Sorry about that - ya 'button label' is probably better than 'title'. I can submit a patch that will fix that. Thanks!", Created ', ', ', I've updated the comment for the done buttons. Does this work?", Comment on ', ', ', Yes, this makes comments for "Done" more understandable, thx. In the same time I wonder why "Cancel title from search engine picker" and "Cancel title for selecting client screen" comments from 6eb78d27624fbcd116a03cc9ca5a25650fd11246 commit do not show up in exported xliff.', Looks like there was no tableName specified for the strings I added. Also looks like this might be the cause for a bunch of other strings. I've filed a follow bug for to investigate these warnings here: ", *** ', has been marked as a duplicate of this bug. ***', This should be reopened as the patch doesn't seem to work as expected, ", I wonder if the export conflict is causing this string to not be shown ', Will reopen and investigate', I doubt it has anything to do with ', I think the problem here is that the Cancel string is missing the tableName: "SendTo". Without that, the string ends up in the main strings table and I\'m pretty sure the extension cannot access strings from the main bundle.', Ah that makes more sense. How would that impact our string freeze? Simple fix code wise.', We cannot fix this because we are past string freeze. What I would like to suggest is that we revert the change. Instead of the NLocalizedString() strings we go back to using UIBarButtonSystemItem.Cancel and UIBarButtonSystemItem.Done We will fix this as soon as possible in a followup release. I understand that this means that we will use language that :stef prefers not to use, but it will be 'iOS standard' so I think it is a good short term compromise.", (In reply to Stefan Arentz :st3fan from ', ) ', Sounds good for me, and I think the issue was more for Ton (and Dutch) who reported the bug originally.', I wouldn't care about string freeze but exactly what Flod said, in Polish there is no difference - unless the sting is in English of course\u2026", (In reply to Francesco Lodolo :flod from ', ) ', As well as other locales suffering this. Just to be sure: it couldn\u2019t be (temporarily) fixed just by adding a Cancel string for that screen only, as mentioned in ', ?', As a compromise we have just landed ', This will use a system provided Cancel button (UIBarButtonSystemItem.Cancel) in the Send To and Share To dialogs. When the string windows opens again for the next release (either bugfix or big release) we can work on this bug again. (This bug will then be about reverting ', and making sure the strings have the correct table name specified)', Created ', Screenshot using the Cancel string Attaching screenshot to the bug just in case.', Created ', ', Link to Github pull-request: ', master f998f960111e14c8c88f622c1c0056a558d24180', Created ', ', PR ', Comment on ', ', PR ', If you say it works, I'll take your word for it! I don't like the fact that this requires another argument to NSLocalizedString -- that's just one more thing for us to get wrong. I'll keep playing around with strings to see if we can simplify this process more. I'm still not happy with it :(" 
id=1168856	 'This will cause pain at scale, so nominating for 2.0.', I just synced an account with 10,000 history records. synchronizeLocalHistory(_:withServer:info:) > Applying incoming history records from response timestamped 1445449320220, last modified 1445444878350. 2015-10-21 10:42:51.246 Debug HistorySynchronizer.swift:172 synchronizeLocalHistory(_:withServer:info:) > Records header hint: Optional(10834) 2015-10-21 10:44:13.504 Client 11794:3798886 Received memory warning. 2015-10-21 10:44:13.520 Debug BrowserViewController.swift:114 didReceiveMemoryWarning() > BVC received memory warning 2015-10-21 10:44:48.116 Client 11794:3798886 Received memory warning. 2015-10-21 10:44:48.117 Debug BrowserViewController.swift:114 didReceiveMemoryWarning() > BVC received memory warning 2015-10-21 10:44:48.314 Client 11794:3798886 Received memory warning. 2015-10-21 10:44:48.315 Debug BrowserViewController.swift:114 didReceiveMemoryWarning() > BVC received memory warning 2015-10-21 10:45:01.054 Debug IndependentRecordSynchronizer.swift:41 done() > Bumping fetch timestamp to 1445444878350. We hit 560MB and got three memory warnings. Turns out that's a lot of JSON! I'd like to see this fixed before 2.0 if we can (and it's not hard to do). Users on iPhone 5 or 5S who are heavy desktop users might never be able to finish first-syncing their history.", Aha card?', FIOS-207.', Created ', ', Pull req. Manually tested and some automated coverage (including existing coverage for batching). History downloads are now interruptible via backgrounding, resume where they left off, and happen in chunks of 500. Tested adding items on desktop and phone; things work as expected.', Comment on ', ', Pull req. LGTM. I would like to include this in today's build because this is a really important improvement that will make thigns work for a lot of our users. But with the option to back it out or do followup patches if we discover history sync instability in the coming days of testing. :fluffyemily, even though I merged this, please do review.", 53c396c55766dda942fbba5fcc93be8cc1e0b3cf Thanks for the quick review!' 
id=1234231	 'Created ', ', Pull request', Comment on ', ', Pull request Looks good to me! Tested on 6s in portrait and landscape.' 
id=1247911	 'Created ', ', PR aaron for testing', Comment on ', ', PR :bryan I've added a comment to the PR for what I feel is a slightly simpler fix." 
id=1180630	 'Created ', ', Pull Request', Comment on ', ', Pull Request FYI: Contains new strings.', Comment on ', ', Pull Request Nice!' 
id=1092565	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1127018	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1188947	 'I suggest prompting at next launch after crash.', Yes, first run after crash. What is the sending method? Backend or email attachment? S/would we be able to offer a choice? Send once Always send Cancel or simply Send Crash Report Cancel ', It\'s uploaded directly, not via email. Yes, I think we can offer a choice. There\'ll be no significant context, and no user initiation, so presumably "Don\'t send" makes more sense than "Cancel"\u2026? If we offer Always Send, we\'ll need a toggle somewhere to allow for the user to change her mind, right?', It would be nice to offer the choice so it just happens in the background. Less complaints overall that way, too, since they are aware of the crash but don't have to do anything about it. Don't send does make more sense. Yes, there would need to be a toggle in Settings.", OK, proposed strings: Oops! Firefox crashed Send a crash report so Mozilla can fix the problem? Send Report Always Send Don't Send then under Privacy Send Crash Reports () Tweak away, wordsmith. Do we want a Never Send ? I worry that a silent shutdown crash will cause this popup every time, and a user will keep having to say no. (We could also count how many times they say no consecutively, and just stop asking after 3 or 4\u2026)", Sure, Never Send would now work with a toggle, so they could option Always or Never, or each time with it enabled and Send chosen. The strings are fine with me.', Created a separate bug for adding a prompt after the app crashes for the first time ', . Leaving this to be the bug that tracks adding the setting to the settings screen.', Created ', ', PR ', First part: Adding the settings toggle', Comment on ', ', PR ', Naming tweak and making sure we catch in the right places.', Alright - I've made some changes that make it a little more clear and reliable 1. Updated the prefs key to use crashreports.send.always in case we need to add additional keys later. 2. The lack of existence of this key will start the crash reporter but NOT upload anything. This state means the user has not been prompted yet to ask if they want to send their reports so we want to make sure we catch any crashes that could occur. 3. If the key is TRUE, we will start and turn on uploads 4. If the key is FALSE, the crash reporter is never started 5. I've added additional abstraction by adding a CrashReporter protocol that allows me to create a mock version for a unit test to check for the changes in state. 6. The configureCrashReporter method now has a public and project scope variant that is global. The project scoped method uses the active crash reporter while the public version allows us to inject a mocked version into the method.", Merged.' 
id=1148698	 'Started seeing the issue after this change ', I am hitting the *exact* same issue for a few days now, currently with this configuration: Xcode 6.2 (6C131e) OS X 10.2.2 iOS 8.2 Simulator (iPhone 6) "Client" Scheme Commit 5d1a70d', (In reply to Boris Du\u0161ek from ', ) ', obviously meant OS X 10.10.2 here :-)', This is fixed with ', *** This bug has been marked as a duplicate of ', ***' 
id=1200687	 'I see where the confusion may lie, but in the instance of top sites, unless we can drop the tld when displaying a subdomain. One or the other. Even still, this may present titles becoming truncated. So instead of mozilla.com the title would show irccloud.mozilla, or developer.apple, groups.google etc. I think in these instances it would be OK to drop the tld, if possible.', Created ', Simulator Screen Shot Sep 8, 2015, 5.03.39 PM.png I see now that this has been implemented, and the titles definitely truncate with the tld, and it's not so bad.", The truncation was already fixed; now we do the right thing. I'm more concerned about how light the non-base domain components are; way lighter than desktop. Screenshot\u2026", Created ', Pic', Talking to rnewman: bug is really "Subdomain in URL bar is hard to read". Changing gray of subdomain to match that of desktop would probably be the best way forward.', Created ', ', ', \u2013 Change URL subdomain color to be more readable.', I dropped screenshots into the PR.' 
id=1212923	 'Created ', ', Pull req. Cranked this out now, because it's deployed in stage and it was worth verifying before pushing to prod. Verified that record timestamps increase on successive batches.", Comment on ', ', Pull req. lgtm. One request for naming clarity, but up to you.', 98ae79c' 
id=1171144	 '9a62a08' 
id=1162539	 'Safari makes use of a single top of the screen tap to reveal the address bar, and then tapping the top portion of the bar scrolls the page to the top.', We should either a) show the navigation bar on top of the screen tap in landscape and or b) designate the top portion as a clickable area to scroll to the top of the page, or c) only do so when the navigation bar is revealed on screen which would require the user scrolling up the page a bit to reveal the navigation bar which is bad', UX is going to look into this.', I played with the 'other' browsers a bit to see how they handle this. Safari's URL bar will reappear if you tap the top of the screen, allowing you to tap a second time to scroll to the top\u2014however, you have to tap in a sweet spot, which is essentially between icons. It's quite difficult to not hit any of the other targets. Chrome keeps the status bar in landscape. Easy. I am for enabling the status bar in landscape. True, we're giving up 40px, but gaining an interaction that would otherwise be difficult to obtain.", Created ', ', PR ', I implemented the way Safari does it where you can tap the top area and the toolbars will animate in and if you top on the top area above the address bar field it will scroll you to the top. It doesn't actually feel half bad considering its a small tap target. I also left in the tap to top area when in portrait mode so you can show the url bar easier than scrolling.", Comment on ', ', PR ', LGTM' 
id=1237819	 'I would like to remove the following two lines: ', We do not use the OS provided state preservation anymore. This is a leftover from that code.', Here's the symbols for the missing lines: specialized static TabManager.tabsToRestore() -> SavedTab ? (in Client) (TabManager.swift:449) specialized static TabManager.tabRestorationDebugInfo() -> String (in Client) (TabManager.swift:622) @objc static TabManager.tabRestorationDebugInfo() -> String (in Client) (TabManager.swift:0) AppDelegate.(presentEmailComposerWithLogs in _AF87EDC6D00E2DEF427B1B2399CCFD7D)() -> () (in Client) (AppDelegate.swift:295) specialized AppDelegate.application(UIApplication, willFinishLaunchingWithOptions : NSObject : AnyObject ?) -> Bool (in Client) (AppDelegate.swift:40) @objc AppDelegate.application(UIApplication, willFinishLaunchingWithOptions : NSObject : AnyObject ?) -> Bool (in Client) (AppDelegate.swift:0) Unfortunately this doesn't look like our startup crash but a crash caused by the debug tab restoration code.", Digging in some more, this looks like it is related to ', . This crash is occurring only when the user is attempting to email the debug tab state logs. The reason this crashes here and not on the normal session restoration path is because we wrap the restoration code with a Obj-C try/catch block 1 while the debug logger doesn't 2 . The unsettling thing is that decodeObjectForKey(key: String) method on NSKeyedUnarchiver which throwing the exception is not marked as such. Since this was being caused by the class definitions not matching I predict that we shouldn't see this bug on the next update (1404) since by then the tab archive will have been purged of the old class definition. This also shouldn't be a problem from 1.3 -> 1.4. 1 ", 2 ', Marking as resolved as this was a side effect of ' 
id=1183676	 'Resolved as part of ' 
id=1130212	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1104123	 'Created ', ', Pull Request Patch that hooks up the Share UI to the Bookmarks Provider. Also adds a shareItem() to the Bookmarks provider that pushes the shared item to the REST API.', This does not work and needs to be revisited.', This landed a long time ago and works as expected.' 
id=1192462	 'Created ', ', PR: ', This change to `import-locales.sh` adds a `--only-complete` flag to the script. If this is specified then the script will remove locales that are not complete, after checking out the initial l10n repository. To keep things simple, the list of incomplete locales is kept inside the script. This means that before we do a final build, this list needs to be updated. The best place to see what locales are ready to go is the ', Dashboard).', Adding some people to this bug to be sure.', Comment on ', ', PR: ', I agree with Flod's comments. I'm going to clear myself for review on this one.", Included :flod's improved shell code. Merging this into master so that it can be updated on release build day.", I have added instructions to ', Comment on ', ', PR: ', r+ on the current version, still need to think more about getting that list of locales directly from the dashboard.' 
id=1204452	 'Added url to use a localized string. Set the default to www.mozilla.org/about', Resolved with ', *** ', has been marked as a duplicate of this bug. ***' 
id=1152595	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1217181	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Comments on the PR. Thanks for fixing my fuckup!', Comment on ', ', Link to Github pull-request: ', Updated for review comments. Didn't remove Prefs from TabManager (see comment in PR). Let me know if you have a better place to put this delay constant!", Comment on ', ', Link to Github pull-request: ', r+ with that extraneous tabManager argument removed, now that we're explicitly passing the tab array.", When testing your branch I got the error for testTabManagerStoresChangesInDB: What I don\'t understand is why the test is being run as FennecAurora when I have the Client target selected. I can\'t see any changes in this branch that would cause this. Assertions: failed: caught "NSInternalInconsistencyException", "Completion handler passed to - FennecAurora.TabManagerNavDelegate webView:didReceiveAuthenticationChallenge:completionHandler: was not called" ( \t0 CoreFoundation 0x0000000107d87f65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x00000001070abdeb objc_exception_throw + 48 \t2 CoreFoundation 0x0000000107d87e9d + NSException raise:format: + 205 \t3 WebKit 0x0000000109ee91b0 _ZN6WebKit28CompletionHandlerCallCheckerD2Ev + 130 \t4 WebKit 0x000000010a130968 _ZN3WTF20ThreadSafeRefCountedIN6WebKit28CompletionHandlerCallCheckerEE5derefEv + 36 \t5 WebKit 0x0000000109f2e412 _ZN6WebKit15NavigationState16NavigationClient33didReceiveAuthenticationChallengeERNS_12WebPageProxyEPNS_28AuthenticationChallengeProxyE + 362 \t6 WebKit 0x000000010a05ecc8 _ZN6WebKit12WebPageProxy38didReceiveAuthenticationChallengeProxyEyN3WTF10PassRefPtrINS_28AuthenticationChallengeProxyEEE + 64 \t7 WebKit 0x0000000109f53673 _ZN6WebKit19NetworkProcessProxy33didReceiveAuthenticationChallengeEyyRKN7WebCore23AuthenticationChallengeEy + 105 \t8 WebKit 0x0000000109f550e2 _ZN3IPC13handleMessageIN8Messages19NetworkProcessProxy33DidReceiveAuthenticationChallengeEN6WebKit19NetworkProcessProxyEMS5_FvyyRKN7WebCore23AuthenticationChallengeEyEEEvRNS_14MessageDecoderEPT0_T1_ + 159 \t9 WebKit 0x0000000109ee958a _ZN3IPC10Connection15dispatchMessageENSt3__110unique_ptrINS_14MessageDecoderENS1_14default_deleteIS3_EEEE + 102 \t10 WebKit 0x0000000109eeb852 _ZN3IPC10Connection18dispatchOneMessageEv + 114 \t11 JavaScriptCore 0x0000000112fb2b05 _ZN3WTF7RunLoop11performWorkEv + 437 \t12 JavaScriptCore 0x0000000112fb31e2 _ZN3WTF7RunLoop11performWorkEPv + 34 \t13 CoreFoundation 0x0000000107cb40a1 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17 \t14 CoreFoundation 0x0000000107ca9fcc __CFRunLoopDoSources0 + 556 \t15 CoreFoundation 0x0000000107ca9483 __CFRunLoopRun + 867 \t16 CoreFoundation 0x0000000107ca8e98 CFRunLoopRunSpecific + 488 \t17 Foundation 0x0000000106c99891 - NSRunLoop(NSRunLoop) runMode:beforeDate: + 267 \t18 XCTest 0x0000000116eae1c9 - XCTestCase(AsynchronousTesting) waitForExpectationsWithTimeout:handler: + 921 \t19 FennecAurora 0x000000011d053e45 _TFE12FennecAuroraCSo10XCTestCase4waitfS0_FSdT_ + 1157 \t20 FennecAurora 0x000000011d05404c _TToFE12FennecAuroraCSo10XCTestCase4waitfS0_FSdT_ + 44 \t21 FennecAurora 0x000000011d0541fa _TFE12FennecAuroraCSo10XCTestCase16waitForConditionfS0_FT7timeoutSd9conditionFT_Sb_T_ + 394 \t22 FennecAurora 0x000000011d05429d _TToFE12FennecAuroraCSo10XCTestCase16waitForConditionfS0_FT7timeoutSd9conditionFT_Sb_T_ + 125 \t23 FennecAurora 0x000000011d0816a8 _TFC12FennecAurora15TabManagerTests31testTabManagerStoresChangesInDBfS0_FT_T_ + 2280 \t24 FennecAurora 0x000000011d082612 _TToFC12FennecAurora15TabManagerTests31testTabManagerStoresChangesInDBfS0_FT_T_ + 34 \t25 CoreFoundation 0x0000000107c7685c __invoking___ + 140 \t26 CoreFoundation 0x0000000107c766ae - NSInvocation invoke + 286 \t27 XCTest 0x0000000116e74608 __24- XCTestCase invokeTest _block_invoke_2 + 159 \t28 XCTest 0x0000000116ea3c90 - XCTestContext performInScope: + 184 \t29 XCTest 0x0000000116e74558 - XCTestCase invokeTest + 169 \t30 XCTest 0x0000000116e749f3 - XCTestCase performTest: + 443 \t31 XCTest 0x0000000116e726b9 - XCTestSuite performTest: + 377 \t32 XCTest 0x0000000116e726b9 - XCTestSuite performTest: + 377 \t33 XCTest 0x0000000116e726b9 - XCTestSuite performTest: + 377 \t34 XCTest 0x0000000116e5fec2 __25- XCTestDriver _runSuite _block_invoke + 51 \t35 XCTest 0x0000000116e800cb - XCTestObservationCenter _observeTestExecutionForBlock: + 615 \t36 XCTest 0x0000000116e5fe0e - XCTestDriver _runSuite + 408 \t37 XCTest 0x0000000116e60b6d - XCTestDriver _checkForTestManager + 263 \t38 XCTest 0x0000000116ea4ff1 _XCTestMain + 628 \t39 CoreFoundation 0x0000000107cb408c __CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK__ + 12 \t40 CoreFoundation 0x0000000107ca9d15 __CFRunLoopDoBlocks + 341 \t41 CoreFoundation 0x0000000107ca9472 __CFRunLoopRun + 850 \t42 CoreFoundation 0x0000000107ca8e98 CFRunLoopRunSpecific + 488 \t43 GraphicsServices 0x000000010b044ad2 GSEventRunModal + 161 \t44 UIKit 0x0000000108a58676 UIApplicationMain + 171 \t45 Client 0x000000010554ec27 main + 487 \t46 libdyld.dylib 0x000000010b6f092d start + 1 ) File: XCTestCaseExtensions.swift:15', Ignore the Aurora thing. It's been like that for months now it seems." 
id=1283499	 'Created ', ', ', master a33dd87cfa8331489753ef3edf122049a1b09d89' 
id=1164646	 'Created ', iOS Simulator Screen Shot May 13, 2015, 2.26.31 PM.png Update, it looks as if Share and Bookmark are displaying normally, and the Nav icons have been manually adjusted. We should replace these icons with correctly-sized assets (and confirm Universal indeed works on iPad).', Update #2, these icons show large after rotation (portrait > landscape > portrait)', possibly related to ', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', I tried several approaches to this, including implementing callbacks to have an opportunity to change the buttons `contentEdgeInsets` property based on the current `UITraitCollection`. But .. I decided that was all too complicated. The actual problem here is that we should not use the `contentEdgeInsets` to scale the button images. It is the wrong approach. So what I have done is simply remove the calls where we change the `contentEdgeInsets`. This means that this is now an asset problem. The icons are obviously a bit too big currently so I will file a new bug to ask for two icon sets (or one set with a scale factor for when we display them in the bottom bar - which I think displays a smaller version).', Comment on ', ', PR: ', I agree - this is much better. Makes more sense for the images to just be the correct size instead of trying to smoosh them into place.' 
id=1228611	 'PR is in ', .', Created ', ', Pull req. The work in this PR changes our database lifecycle. The principle change is that we do not close the DB until either: 1. Our connection -> SwiftData -> BrowserDB -> BrowserProfile is deallocated. 2. applicationWillTerminate is called. There are a bunch of other fixes in this PR, with detailed commit messages. Please read carefully. I'm not a huge fan of not closing the DB proactively -- strictly speaking, after close is the only time we can be totally sure of the contents on disk -- nor of checkpointing less frequently, because checkpointing is how we keep the size of the WAL file under control, and if we don't do it manually, sqlite will do it automatically. But we should be confident that applicationWillTerminate will be called, and the observed failures on TheLink's device occurred around closure flaps. (See notes in ", .) It's possible that this will fix things; TestFlight will help us verify.", Tracking 'cos this is my proposed fix for ", , which is tracking.', Comment on ', ', Pull req. Even with this PR I am seeing a corrupt DB on my 6S when I reopen it after killing it from the app switcher (and I have checked that applicationDidTerminate definitely gets called here) Error Domain=org.mozilla Code=11 "The database disk image is malformed malformed database schema (?)" UserInfo={NSLocalizedDescription=The database disk image is malformed malformed database schema (?)}', Everything but Part 5. I'll file a follow-up for that. master: 3d3e245", Follow-up fix for tests: master 9138851 ', - Follow-up: rename close to forceClose in tests.', Correction: 6a5e97fcbdc0d585ae09908a506d289dc38b8e03', Uplifted: 3ed3912' 
id=1186767	 'Created ', ', PR', Comment on ', ', PR Looks good.', Comment on ', ', PR ui-review+ from ', Comment on ', ', PR LGTM with a comment for clarification.' 
id=1173900	 'Any other way to reproduce this? Otherwise I think pass on v1', It reproduced twice (100%) on my iPhone 6 simulator. After step 1,2(click "Show Tour"),3. It stay in a status the last page url appears in url bar with a blank page and the tab icon shows 1. If I click it, it crashed with the following log: 2015-07-08 15:45:15.081 Client 5176:508685 *** Terminating app due to uncaught exception \'NSInvalidArgumentException\', reason: \'attempt to scroll to invalid index path: <NSIndexPath: 0xc000000000010016> {length = 2, path = 0 - 2}\' *** First throw call stack: ( \t0 CoreFoundation 0x0000000110a1cc65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x000000010ff44bb7 objc_exception_throw + 45 \t2 CoreFoundation 0x0000000110a1cb9d + NSException raise:format: + 205 \t3 UIKit 0x0000000111bfb7ba - UICollectionView scrollToItemAtIndexPath:atScrollPosition:animated: + 213 \t4 Client 0x000000010e649e1e _TFC6Client17TabTrayController21transitionablePreShowfS0_FTPS_14Transitionable_7optionsCS_17TransitionOptions_T_ + 750 \t5 Client 0x000000010e64a99a _TToFC6Client17TabTrayController21transitionablePreShowfS0_FTPS_14Transitionable_7optionsCS_17TransitionOptions_T_ + 74 \t6 Client 0x000000010e6e35b0 _TFC6Client17TransitionManager17animateTransitionfS0_FPSo36UIViewControllerContextTransitioning_T_ + 2048 \t7 Client 0x000000010e6e3ad6 _TToFC6Client17TransitionManager17animateTransitionfS0_FPSo36UIViewControllerContextTransitioning_T_ + 54 \t8 UIKit 0x00000001116dfa0e __56- UIPresentationController runTransitionForCurrentState _block_invoke + 1867 \t9 UIKit 0x00000001115f55ec _applyBlockToCFArrayCopiedToStack + 314 \t10 UIKit 0x00000001115f5466 _afterCACommitHandler + 533 \t11 CoreFoundation 0x000000011094fca7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23 \t12 CoreFoundation 0x000000011094fc00 __CFRunLoopDoObservers + 368 \t13 CoreFoundation 0x0000000110945a33 __CFRunLoopRun + 1123 \t14 CoreFoundation 0x0000000110945366 CFRunLoopRunSpecific + 470 \t15 GraphicsServices 0x0000000114339a3e GSEventRunModal + 161 \t16 UIKit 0x00000001115d18c0 UIApplicationMain + 1282 \t17 Client 0x000000010e61cdf5 main + 997 \t18 libdyld.dylib 0x00000001171da145 start + 1 \t19 ??? 0x0000000000000001 0x0 + 1 ) libc++abi.dylib: terminating with uncaught exception of type NSException', before step 1. You should open two or more pages...', Created ', ', Pull request', Comment on ', ', Pull request It's a fix, and it's fine, but I don't understand why it works. So a second set of eyes, please :)", Comment on ', ', Pull request Left a comment on the PR about why this works and what we should do to fix it.', Can you check if this fixes bug ', ?', Yup looks like this fixes that issue as well :D', *** ', has been marked as a duplicate of this bug. ***', Do we have an updated PR (just running into this again while testing today)', (In reply to Aaron Train :aaronmt from ', ) ', Sorry for I am quite busy these days. May have an updated PR in two days.', I have updated the PR. More comments on Github. Sorry for the delay caused by my relocation to a new city.', (In reply to Stephan Leroux :sleroux from ', ) ', That issue is not stable reproducible which I think is more tough..', Once we iron out the issues with ', , do you think that this will be resolved? I remember testing a patch you had put up earlier and it seemed to resolve this bug.', (In reply to Stephan Leroux :sleroux from ', ) ', I think the patch you tested is for solving bug. I get hands on fixing ', after this bug. This bug is focus on "clicking the tabs number button(right to the urlbar) after clear private" but the ', is focus on "Default(suggested sites) Tiles not shown on TopSitesPanel after tour(it happens when the app is first installed with nearly 100% probability)".', This is fixed! (i think)' 
id=1241456	 "This is ViewLater being enabled from within the app itself? Is this a use case that we are used to and want to cater to as it seems pointless (we originally didn't want the ViewLater to be shown inside the app extensions but we can't pick & choose & we wanted Send Tab more). We add the ViewLater to the QuickActions once we have processed opening the ViewLater tab, which only occurs after the app has been opened. Under normal circumstances we would Viewlater from another app, open FxiOS, open the ViewLater Tab and only then will LastTab be populated in QuickActions (we cannot add to QuickActions from an extension as they run in a different context to the app). If we want this scenario to work then we would need to update the ViewLater extension handling code to run when the app is already foregrounded rather than when the app starts. Is this something we want to do?", (In reply to Emily Toop (:fluffyemily) from ', ) ', Yes, but I can reproduce by enabling View Later from Safari also', You will only be able to see something send via ViewLater once that ViewLater tab has opened in FxiOS. If yo ve not yet seen that tab loaded then it won't appear in the QuickAction menu (this is a limitation of the API for setting dynamic Quick Actions and not something we can do anything about)", You need to open the app before it becomes a Last Tab. This is all we can do.' 
id=1253254	 'Build: 3.0(1)\r \r 1. Go to Settings and check the "Allow Third-Party Keyboards" option\r \r Result: The text is not centered ', Catalin, what device are you using? I can't repro this.", IPhone 6 Plus running iOS 9.2.1 The issue is visible in this screenshot ', *** This bug has been marked as a duplicate of ', ***', Re-tested on v3.0b7 and master f39f2d8 and, the sub-title of the \'Allow Third-Party Keyboards\' option exceeds the designated row. This issue seems to be specific to the 5.5" devices (iPhone 6 Plus and 6S Plus)', Created ', Screen Shot 2016-03-22 at 12.17.09.png iPhone 6 Plus screeenshot', *** This bug has been marked as a duplicate of ', ***' 
id=1116536	 'Created ', ', Pull request These commits are all stacked on top of one another right now, so only the top commit should be reviewed here.', Comment on ', ', Pull request Removing r? for now until these are rebased onto the non-Core Data implementation.', Fixed in ' 
id=1124504	 'This is due to useage of -moz-padding-start .. which has a -webkit-padding-start equivalent.', Fixed with ' 
id=1245247	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Comment in PR', master 8be599f11b522321b90902c8be47277bf1c5beee' 
id=1199070	 'We got a new search asset request from the WP folks: ', (Android) ', (iOS) Desktop hasn't caught up :) Thanks for the report!" 
id=1147132	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM' 
id=1211699	 ":bnicholson - I tried to replicate this but couldn't. Possibly fixed by ", ?', Hm, I can still reproduce this on both master and my branch for ', . On the yahoo results page for "test", every search result link under and including Speedtest.net don\'t show the context menu for me.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM Cannot reproduce this anymore. Looks like a sane fix.', Thanks for the quick review!' 
id=1160686	 'Created ', ', Pull req.', Landed: 94e94cc' 
id=1224220	 'Again, there is no support, nor draft support in WebKit as we use WKWebView ', This does not work in Safari.' 
id=1236644	 'Created ', Screen Shot 2016-01-04 at 3.02.54 PM.png', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request', Comment on ', ', Pull request Had a hard time trying to determine whether the extensions were coming from inside the current app or one of the other versions of FxiOS on my device, but after deleting all the others the extensions still appeared so I believe this is fixed.', Merged.' 
id=1182306	 ':st3fan maybe you have an idea what is going on?', Hi, Are you sure the script runs correctly ? I\'m getting the following error : Traceback (most recent call last): File "scripts/strings-import.py", line 101, in <module> phase = find_resources_phase(project, target) File "scripts/strings-import.py", line 41, in find_resources_phase phase = project.objects build_phase_id File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/UserDict.py", line 23, in __getitem__ raise KeyError(key) KeyError: \'288A2D831AB8B3260023ABC3\'', Boris, are you sure it did not fail? The scripts require a python virtualenv with the lxml module installed. If you did not set that up then the scripts will fail and leave things in a bad state. Let me know. And we are aware how fragile these scripts are. We would love to make them more robust. Right now they work well for our build environments, which was the main goal. But they can certainly use improvements to work better for developers.', (In reply to Stefan Arentz :st3fan from ', ) ', I will check later today to be 100% sure and report back (but I think I would have noticed an error output like the one Mosbah mentioned). I will also report w.r.t. whether I have lxml installed (or simply install it and try again).', - I have lxml installed (3.4.4) - through pip; I did not use any virtualenv - I cleaned my checkout (git clean -xffd; git reset --hard HEAD), updated (git pull - now on de4994e82831c8a9850f9f2c8042cb53a213eb2e), reran sh ./checkout.sh, then ./scripts/import-locales.sh, things then worked fine, and I did finally test Czech version of Firefox for iOS. As in the other bug, not sure what caused it to start behaving.', worked fine in another machine, can't understand what's was the problem though. Thank you." 
id=1249643	 "Emily, is it possible that this is happening because we use Carthage in a different way? Also, I don't know if it matters for these specific strings. We should check if these strings are actually user facing. They may not be.", This behavior of not exporting those strings is correct. It is a third-party package and those strings seem to be internal error messages.' 
id=1095249	 'Assigning back to myself to make a patch that includes the icons that Robin made yesterday.', Created ', ', Pull Request' 
id=1190858	 'Created ', ', PR ', Merged.' 
id=1127331	 'Created ', ', PR ', This patch starts a local web server when the application is started. It also registers all the embedded fonts in the application so that web content can reference those from CSS.', Comment on ', ', PR ', LGTM' 
id=1259432	 'Axel found this: ', Perhaps if we can nail down which Songhay language this is, and it has an ISO 639-2 code, we can add it back. Mohomodou, can you guide us here?', iOS seems to support the following three: Koyra Chiini Koyraboro Senni Zarmaciine Needinfo'd myself to find the locale codes for these as used by iOS.", From Mohomodou: Then we can use: Koyraboro Senni ("ses") Standardized Songhay used in Mali is based on this. If it\'s too late this time around, we\'ll catch up next time. Many thanks for your great efforts and all the best, Mohomodo , Moved 'son' to 'ses' ", Fixed target-language ', But I realized that we need to make sure if 'ses' works.", Fair enough. The whole issue hinges on how a language is represented. The "ses" code is used in Translatewiki and a Wikitionary. I guess for the same reason. My hunch is that "ses" should work to the extent that it is one of the main codes created for the Songhay idioms. In this regard, it preceded "son" which was created to remedy the fragmentation inherent to multiple locale codes.', Fair enough. The whole issue hinges on how a language is represented. The "ses" code is used in Translatewiki and a Wikitionary. I guess for the same reason. My hunch is that "ses" should work to the extent that it is one of the main codes created for the Songhay idioms. In this regard, it preceded "son" which was created to remedy the fragmentation inherent to multiple locale codes.', I just added Koyraboro Senni to my iPhone as a preferred language and it shows up as "ses" I think you can just go ahead and rename this locale? And we will pick it up if it is present in shipping_locales.txt', We still need to add shipping_locales.txt to v4.0. Given that 'ses' never shipped, we'll need to figure out the sign-off process for it with Jeff and Delphine.", Morphing bug and closing. Addition will be discussed in ', .', Note taken. Clearly, there are technical issues to be sorted out. The existing code system privileges the identity of dialects, which is fine for dialectology \u2013 the documentation of individual forms of a language. There are clear variations within the Songhay language(s). That's a reality that might justify the rejection of the \u201cson\u201d locale for iOS (though Firefox for desktop has been under \u201cson\u201d) since its first release in 2011. Using \u201cses\u201d just means that we have to identity the regional form of Songhay being used (Gao dialect), not a generic Songhay. Again, this is understandable but raises other questions: does dialectal identification mean to the localization effort when there are hardly any prospects that individual locales will get teams to do localization?", These open questions about language and dialect are certainly complex. The agenda of code creators here does not seem to match ours \u2013\xa0that is having tools in any language form under one name/code (\u201cson\u201d) to help maintain the language as a ecross-border vernacular idiom. close this explanatory parenthesis here. It is only meant to highlight the ambiguity of the codes assigned to language and the problematic blockage they can cause. ', (In reply to Mohomodou Houssouba from ', ) ', That would be a question for Apple, and sadly Apple is not Mozilla in terms of transparency. On Desktop we can ship any locale code we want, on Android we have a language switcher to change locale in-app, on iOS we're bound to the locale codes supported by the OS, to the point that you can't submit the app on the Store if the locale is not recognized as valid.", I know and agree with you 100%. On the other hand, I appreciate greatly the leeway we have with Mozilla, in terms of making choices that are sound. Indeed we\'ve had discussions with Apple, IBM, etc. and will pursue these. We have already made a step with "son" being listed as locale code for Songhay in many other databases. Thank you again.', I think the underlying issue is Unicode/CLDR. I found ', for when it was rejected, and OSes using CLDR to provide APIs will likely reject locales that don't have CLDR support. We'll face a similar issue in mozilla once we use Intl APIs that rely on cldr data in the background.", Thank you very much for the CLDR link. If one reads in it a comment like "\'Songhay\'" is primarily a lang of Burkina Faso!", there is certainly much talk and work to be done, and you will be right, NOT here. We\'ll follow up on this with the CLDR people, knowing that it can be a protracted affair. To be sure, that\'s not Mozilla\'s purview. NB: Songhay is among the "cross-border vehicular languages" recognized by the African Academy of Languages (ACALAN). Most of its speakers like in Niger and Mali, in order of size, with smaller populations in Benin and Burkina Faso.' 
id=1140556	 'Created ', ', PR: ', This fixes a bug where adding items to your reading list crashes on 32 bit devices. We were using the `Int` type to store the timestamp. The `Int` type is architecture dependend, so on our fancy 64 bit test phones this is all good, but on Mark's wimpy 32-bit iPod Touch, it wont fit because the timestamp is a 12 digit number that obviously does not fit in an `Int32`. The primary reason for the crash is that the Swift runtime throws an assertion when we stuff `NSTimeInterval * 1000.0` into an `Int`: ", The obvious solution here is to use Int64 of course. But there is a problem. The SQLite wrapper does not actually support 64 bit values. So that was first fixed with bug ', (1132500). In the end all this patch does it change timestamp types to `Int64` and then in the database code wrap those in `NSNumber` instances. And it adds a test to find out if timestamp values are properly stored and retrieved. Our CI builds now also run on both a 32 and 64 bit simulator.', Comment on ', ', PR: ', WFM.' 
id=1201786	 'Created ', Works for me.' 
id=1215264	 'Then we do it *again* immediately after loading about/home! DEBUG Connection sent 113 bytes on socket 16 DEBUG Did close connection on socket 16 VERBOSE ::1:6571 ::1:51735 405 "GET /about/home/" (378 | 113) 2015-10-15 12:54:40.387 Client 63393:14884466 <UIVisualEffectView 0x7fc4f355abe0> is being asked to animate its opacity. This will cause the effect to appear broken until opacity returns to 1. 2015-10-15 12:54:40.690 Debug SwiftData.swift:388 executeChange(_:withArgs:) > ------- SQL CHANGE: BEGIN EXCLUSIVE ------- 2015-10-15 12:54:40.691 Debug SwiftData.swift:388 executeChange(_:withArgs:) > ------- SQL CHANGE: DELETE FROM tabs WHERE client_guid IS ? ------- 2015-10-15 12:54:40.691 Debug SwiftData.swift:388 executeChange(_:withArgs:) > ------- SQL CHANGE: COMMIT -------', Same PR as the other two bugs I just filed.', bee6d41' 
id=1282555	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1163072	 "Looks like there's actually a quick workaround we can use where we remove the empty cells entirely. Darrin is OK with trying this approach, so I've just folded this change into ", . *** This bug has been marked as a duplicate of ', ***' 
id=1227106	 "Wording to be 'Open Last Tab'. Confirm with :tecgirl before implementing.", This is not really possible as originally invisioned as we can only display actions that are defined when the app last went into the background/was terminated. This means that tabs sent to the device from an extension cannot be added to the dynamic actions until _after_ the app has been opened. :tecgirl - what we can do here is add the action when we open the sent tabs in the app, so that next time you hit quick actions you can see the last tab that was sent to you (similar to the bookmarks). Is this enough for a first pass while you rethink?', :fluffyemily - yes, that would be good enough for now. thank you!', Created ', ', Pull request Use the View Later or Send Tab action extensions to add an Open Last Tab quick action to the home screen menu.', Comment on ', ', Pull request Looks good - same comments as the other related PR. Also unable to test the force touch interaction.', Comment on ', ', Pull request I could not get this to work using View Later, but I did get it to work after using Send Tab. However, the URL isn't show below the title, see ", (In reply to Robin Andersen :tecgirl from ', ) ', I'm raising these as a 2 separate issues: View Later not setting Last Tab quick action: ", URL not showing below title of Last Tab quick action: ' 
id=1251691	 'Created ', ', Pull req. Stacking pull requests as high as they'll go. These are the three commits now on the end -- check the bug numbers. The behavior now is that a bookmark with a malformed URL will result in _searching_ for that string on the user's default search engine. DuckDuckGo and Google in particular do a good job of this. This is exactly what happens if you copy and paste into the URL bar. The alternatives are: * Do nothing -- your tap is wasted. * Show some kind of toast. * Put a lot more work into URLFixer (but there are likely to be edge cases always). ui-review to Robin to make sure she's happy with this experience. (Sure beats a crash, at least.)", Comment on ', ', Pull req. LGTM!', 721a963' 
id=1109670	 'I did not notice this when I tried the Browser patch. Maybe the pages that I tried did something that changed the firstResponder chain, which resulted in a keyboard hide event.', Fixed with ' 
id=1239010	 "I can't repro this on my iPad mini.", Me: master, iPad mini, 8.3.', Me: master, iPad Pro 9.2', Let's get some share stuff logging \\o/", (In reply to Aaron Train :aaronmt from ', ) ', that's weird, I could have sworn I attached my logs.", Created ', iPad Pro', 2016-01-12 08:49:53.180 Client 8760:926056 Cannot access extension bundle. Well, that's exciting.", ="Cannot+access+extension+bundle" Suspicion is that there\'s an app on your device, perhaps this build itself, that doesn\'t have the right icon. E.g., ', There should be more logging further down; take a look? Also, this is ghastly. ', Created ', iPad Pro \u2014\xa0Clean install', Update: Chrome and Safari also crashed on tap, but not Opera/Mercury/Dolphin. Restored iPad and did a clean install. Extension works! Still have no idea which app may have contributed to the issue, but it's not one of Apple's.", Created ', iPad Pro - Restored', We can't fix this :/" 
id=1184591	 'Created ', firefox-ios-open-in-client', Comment on ', firefox-ios-open-in-client review the README plz <3', Created ', ', Pull request', Comment on ', ', Pull request Looks good, but let's wait on this until we have more of a plan!", Comment on ', ', Pull request review the README please!' 
id=1264640	 'Created ', ', Pull request This is basically just a better structure for the menu code, separating out the generic from the specific.', Comment on ', ', Pull request Comment in PR. Looks good.' 
id=1144853	 '(I get that you swipe to the left and then hit Delete from the tab list screen, but we should look at a way to close tabs without having to go to that screen)', Fx on Android also requires you go to the Tabs Tray, except on tablets. On tablets, there is an 'x' in the visible tab.", Nom'ing to decide if we want to close this." 
id=1218832	 'Crashing here: ', Not exactly sure what the cause is but passing in a Swift value type (UInt64) as an inout Objective-C parameter seems... messy. I have a feeling that it's something funky with the Swift/Objective-C interop but can't pin it down. A blanket solution to cover this up would be to not use the inout parameter and just return the size or rewrite the Objective-C logic into Swift to make the category method more safe.", Created ', ', Link to Github pull-request: ', Lifted logic into NSURL extension methods: ', Landed as part of 456979601bf440683babf724b571f1cad849ba90' 
id=1193612	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1166121	 'Created ', ', Pull req. There's a commit right at the end of the sync-history pull request. Wes, could you take a look? This is the simplest thing I think can work. We track WKNavigations as a result of loadRequests, either ignoring them (in the case of reader transitions) or marking them as 'typed'. Everything else that's not ignored is 'link'. Manually verified that typed URLs are recorded as typed, links are recorded as links, and reader mode transitions are ignored: 2015-05-18 18:06:58.398 Debug Profile.swift:143 onLocationChange: Recording visit for ", with type 2. 2015-05-18 18:06:58.399 Debug SQLiteHistory.swift:227 recordVisitedSite: Setting title to Slashdot for URL ', 2015-05-18 18:07:26.738 Debug Profile.swift:143 onLocationChange: Recording visit for ', with type 1. 2015-05-18 18:07:26.738 Debug SQLiteHistory.swift:227 recordVisitedSite: Setting title to Could a computer predict the next pandemic? | Science/AAAS | News for URL ', 2015-05-18 18:07:39.312 Debug BrowserViewController.swift:489 ignoreNavigationInTab(_:navigation:): Ignoring nav: <WKNavigation: 0x7f94bd1471b0> (Optional(', )). 2015-05-18 18:07:39.628 Debug Profile.swift:147 onLocationChange: Ignoring navigation for Optional(', ). 2015-05-18 18:07:54.103 Debug BrowserViewController.swift:489 ignoreNavigationInTab(_:navigation:): Ignoring nav: <WKNavigation: 0x7f94bad60b80> (Optional(', )). 2015-05-18 18:07:55.493 Debug Profile.swift:147 onLocationChange: Ignoring navigation for Optional(', ).', Yes, there's a pile of debugging stuff in here. We can strip that out before we GTB, or now; up to you.", Comment on ', ', Pull req. Some nits but mostly questions. Looks good!', Thanks, Wes. Will land on top of the history sync stuff.', Merged: a55d62c' 
id=1154463	 'dd8ed87' 
id=1254586	 "Doesn't actually seem to make sense to make Find In Page an action as it is simply showing/hiding a view and this is best done in the view that is doing the show/hide" 
id=1122321	 'Created ', ', Pull request', Comment on ', ', Pull request Yup! I completely missed that this is now a system provided keyboard. Awesome.', Chrome seem to put a few handy URL characters (\':\', \'/\') and \'.com\' in the "suggestion" area above the keyboard.' 
id=1134689	 'Created ', ', PR: ', Comment on ', ', PR: ', stefan and I discussed this in person. One request: fold the #if clauses into an AppConstants.swift file for future code inspection. It's stefan's choice if that happens now or in the near future.", Fixed with ', Reviewed in person with :nalexander during work week.' 
id=1196768	 'Created ', StandardEULA.txt', fx for iOS is MPL2, ', , so I guess we need something similar as we do for desktop? ', is what I found. CCing Gerv for insights.', Hi Elle - can you ensure our agreement meets the criteria and we can copy the text (and paste it in) for the submission? Thanks!', Had an email conversation with Geoff and Elvin. We'll use our agreement (Mozilla doesn't have a EULA) from about:rights and pasted here - About Your Rights Mozilla Firefox is free and open source software, built by a community of thousands from all over the world. There are a few things you should know: \u2022 Firefox is made available to you under the terms of the Mozilla Public License. This means you may use, copy and distribute Firefox to others. You are also welcome to modify the source code of Firefox as you want to meet your needs. The Mozilla Public License also gives you the right to distribute your modified versions. \u2022 You are not granted any trademark rights or licenses to the trademarks of the Mozilla Foundation or any party, including without limitation the Firefox name or logo. Additional information on trademarks may be found here. \u2022 Some features in Firefox, such as the Crash Reporter, give you the option to provide feedback to Mozilla. By choosing to submit feedback, you give Mozilla permission to use the feedback to improve its products, to publish the feedback on its websites, and to distribute the feedback. \u2022 How we use your personal information and feedback submitted to Mozilla through Firefox is described in the Firefox Privacy Policy. \u2022 Some Firefox features make use of web-based information services, however, we cannot guarantee they are 100% accurate or error-free. More details, including information on how to disable the features that use these services, can be found in the service terms.", I have copied the agreement from ', to iTunes Connect under the License Agreement setting. This agreement will be used for all territories where the app is released. Please take this into account when a final review of all App Store meta-data is done.', Make sure to preserve the several hyperlinks please as seen in about:rights (for the MPL, trademarks, privacy notice, and other features/services)', The agreement is plain text. Can't put links in there.", Hmm probably low risk but to be fair and friendly and transparent with our users, I say a best practice then is to paste the actual URLs as text in parentheses.', My 2 pence: Apple's default terms are open-source-unfriendly. As far as their minimum terms permit us (and it's lucky we aren't GPLed!), we should have terms which don't contain those restrictions. Using our about:rights language would be great, as long as it passes their minimum bar. Gerv", Hi, After speaking with Elvin, here\'s our plan: 1. Use the english text of our license agreement. 2. Replace hyperlinks with URL text in parenthesis 3. Include the URL to our terms. If we have localized versions, this link will take them to the localized page. 4. Note that I removed "en-us" on all links in the instance we have geo-location Here is what we will include: ___ For complete details go to: ', Mozilla Firefox is free and open source software, built by a community of thousands from all over the world. There are a few things you should know: - Firefox is made available to you under the terms of the Mozilla Public License (', ). This means you may use, copy and distribute Firefox to others. You are also welcome to modify the source code of Firefox as you want to meet your needs. The Mozilla Public License also gives you the right to distribute your modified versions. - You are not granted any trademark rights or licenses to the trademarks of the Mozilla Foundation or any party, including without limitation the Firefox name or logo. Additional information on trademarks may be found here: ', . - Some features in Firefox, such as the Crash Reporter, give you the option to provide feedback to Mozilla. By choosing to submit feedback, you give Mozilla permission to use the feedback to improve its products, to publish the feedback on its websites, and to distribute the feedback. - How we use your personal information and feedback submitted to Mozilla through Firefox is described in the Firefox Privacy Policy (', ). - Some Firefox features make use of web-based information services, however, we cannot guarantee they are 100% accurate or error-free. More details, including information on how to disable the features that use these services, can be found in the service terms below. - In order to play back certain types of video content, Firefox downloads certain content decryption modules from third parties. Mozilla Firefox Web-Based Information Services Mozilla Firefox uses web-based information services ("Services") to provide some of the features provided for your use with this binary version of Firefox under the terms described below. If you do not want to use one or more of the Services or the terms below are unacceptable, you may disable the feature or Service(s). Instructions on how to disable a particular feature or Service may be found here. Other features and Services can be disabled in the application preferences. 1. Mozilla and its contributors, licensors and partners work to provide the most accurate and up-to-date Services. However, we cannot guarantee that this information is comprehensive and error-free. For example, the Safe Browsing Service may not identify some risky sites and may identify some safe sites in error and the Location Aware Service all locations returned by our service providers are estimates only and neither we nor our service providers guarantee the accuracy of the locations provided. 2. Mozilla may discontinue or change the Services at its discretion. 3. You are welcome to use these Services with the accompanying version of Firefox, and Mozilla grants you its rights to do so. Mozilla and its licensors reserve all other rights in the Services. These terms are not intended to limit any rights granted under open source licenses applicable to Firefox and to corresponding source code versions of Firefox. 4. The Services are provided "as-is." Mozilla, its contributors, licensors, and distributors, disclaim all warranties, whether express or implied, including without limitation, warranties that the Services are merchantable and fit for your particular purposes. You bear the entire risk as to selecting the Services for your purposes and as to the quality and performance of the Services. Some jurisdictions do not allow the exclusion or limitation of implied warranties, so this disclaimer may not apply to you. 5. Except as required by law, Mozilla, its contributors, licensors, and distributors will not be liable for any indirect, special, incidental, consequential, punitive, or exemplary damages arising out of or in any way relating to the use of Firefox and the Services. The collective liability under these terms will not exceed $500 (five hundred dollars). Some jurisdictions do not allow the exclusion or limitation of certain damages, so this exclusion and limitation may not apply to you. 6. Mozilla may update these terms as necessary from time to time. These terms may not be modified or canceled without Mozilla\'s written agreement. 7. These terms are governed by the laws of the state of California, U.S.A., excluding its conflict of law provisions. If any portion of these terms is held to be invalid or unenforceable, the remaining portions will remain in full force and effect. In the event of a conflict between a translated version of these terms and the English language version, the English language version shall control.', (In reply to ', from ', ) ', ...of our terms... ', ', If this is plain text only, perhaps a blank line between each bullet? ', Er, where? :-) ', This sentence is still mangled in the second half. I would change to: "For example, the Safe Browsing Service may not identify some risky sites and may identify some safe sites in error, and all locations returned by the Location Aware Service are estimates only and neither we nor our service providers guarantee the accuracy of the locations provided." Gerv', All updated: ___ For complete details go to: ', Mozilla Firefox is free and open source software, built by a community of thousands from all over the world. There are a few things you should know: - Firefox is made available to you under the terms of the Mozilla Public License (', ). This means you may use, copy and distribute Firefox to others. You are also welcome to modify the source code of Firefox as you want to meet your needs. The Mozilla Public License also gives you the right to distribute your modified versions. - You are not granted any trademark rights or licenses to the trademarks of the Mozilla Foundation or any party, including without limitation the Firefox name or logo. Additional information on trademarks may be found here: ', . - Some features in Firefox, such as the Crash Reporter, give you the option to provide feedback to Mozilla. By choosing to submit feedback, you give Mozilla permission to use the feedback to improve its products, to publish the feedback on its websites, and to distribute the feedback. - How we use your personal information and feedback submitted to Mozilla through Firefox is described in the Firefox Privacy Policy (', ). - Some Firefox features make use of web-based information services, however, we cannot guarantee they are 100% accurate or error-free. More details, including information on how to disable the features that use these services, can be found in the service terms below. - In order to play back certain types of video content, Firefox downloads certain content decryption modules from third parties. Mozilla Firefox Web-Based Information Services Mozilla Firefox uses web-based information services ("Services") to provide some of the features provided for your use with this binary version of Firefox under the terms described below. If you do not want to use one or more of the Services or the terms below are unacceptable, you may disable the feature or Service(s). Instructions on how to disable a particular feature or Service may be found below. Other features and Services can be disabled in the application preferences. SafeBrowsing: Disabling the Safe Browsing feature is not recommended as it may result in you going to unsafe sites. If you wish to disable the feature completely, follow these steps: - Open the application preferences - Select the Security selection - Uncheck the options to "Block reported attack sites" and "Block reported web forgeries" - Safe Browsing is now disabled Location Aware Browsing: is always opt-in. No location information is ever sent without your permission. If you wish to disable the feature completely, follow these steps: - In the URL bar, type about:config - Type geo.enabled - Double click on the geo.enabled preference - Location-Aware Browsing is now disabled 1. Mozilla and its contributors, licensors and partners work to provide the most accurate and up-to-date Services. However, we cannot guarantee that this information is comprehensive and error-free. For example, the Safe Browsing Service may not identify some risky sites and may identify some safe sites in error, and all locations returned by the Location Aware Service are estimates only and neither we nor our service providers guarantee the accuracy of the locations provided. 2. Mozilla may discontinue or change the Services at its discretion. 3. You are welcome to use these Services with the accompanying version of Firefox, and Mozilla grants you its rights to do so. Mozilla and its licensors reserve all other rights in the Services. These terms are not intended to limit any rights granted under open source licenses applicable to Firefox and to corresponding source code versions of Firefox. 4. The Services are provided "as-is." Mozilla, its contributors, licensors, and distributors, disclaim all warranties, whether express or implied, including without limitation, warranties that the Services are merchantable and fit for your particular purposes. You bear the entire risk as to selecting the Services for your purposes and as to the quality and performance of the Services. Some jurisdictions do not allow the exclusion or limitation of implied warranties, so this disclaimer may not apply to you. 5. Except as required by law, Mozilla, its contributors, licensors, and distributors will not be liable for any indirect, special, incidental, consequential, punitive, or exemplary damages arising out of or in any way relating to the use of Firefox and the Services. The collective liability under these terms will not exceed $500 (five hundred dollars). Some jurisdictions do not allow the exclusion or limitation of certain damages, so this exclusion and limitation may not apply to you. 6. Mozilla may update these terms as necessary from time to time. These terms may not be modified or canceled without Mozilla\'s written agreement. 7. These terms are governed by the laws of the state of California, U.S.A., excluding its conflict of law provisions. If any portion of these terms is held to be invalid or unenforceable, the remaining portions will remain in full force and effect. In the event of a conflict between a translated version of these terms and the English language version, the English language version shall control.', I am going to resolve this. Please file a new bug if we need to localize this text.' 
id=1146395	 'Dupe of ', *** This bug has been marked as a duplicate of ', ***' 
id=1277923	 'Created ', ', ', Created ', Before - opening 20 tabs on iPad', Created ', After - opening 20 tabs on iPad', Comment on ', ', ', Snapshot quality looks decent enough for the transitions. Only thing I would comment on is maybe renaming ActiveScreenshotQuality to something more meaningful to it's usage like WebpageScreenshotQuality.", I know this isn't tracking 5.0+ but can we get this into 5.0? Seems pretty promising for lowering memory usage.", Yes! Sorry I should probably merge this and mark as uplift.', master 62ac8a32e9783d87a92f2c7e3ccd0b98bcce5d16', v5.x e253f20' 
id=1176709	 'I confirm. It does the same on iPhone 6, iOS 8.', Can't repro in current trunk. Anyone else?", Not able to reproduce this on the 6 simulator or my iPhone 6 device.', I'm on build 21, not 22 so perhaps it has been resolved. I do not however have access to 22 yet so I can't confirm if this is true.", *** ', has been marked as a duplicate of this bug. ***', This has been resolved in current master', I can still reproduce this with TestFlight build 24.', (In reply to Stefan Plewako :stef from ', ) ', Is this with a reinstall too? Sounds like a broken state', (In reply to Aaron Train :aaronmt from ', ) ', The same thing if I force quit, remove and install it again. One strange thing is that I see my fxa logged in right after that in settings (not in on-boarding tour which displays as expected).', Stefan, could you pull a crash log off your device? ', (In reply to Stefan Plewako :stef from ', ) ', I can also reproduce it in build 24. I only upgraded though. I did not do a full re-install. I'll try to pull a crash log too when I have a few mins.", Created ', Client_2015-07-13-223539_omron6.ips.beta', st3fan, can you symbolicate that? Needs the dSYM from the TestFlight build.', I just landed some changes in ', to fix a crash I saw here (related to new rows being added to the bottom of the list).', I assume this is the one crash that you can see in the Organizer -> Crashes now.', We need a better STR for this bug. I am unable to repro this.', The one I saw would only happen if you had over 100 items in your history.', Created ', Client_2015-07-14-133720_MyPhone.crash Here is my phone's crash report. Hope this helps.", If the crash report isn't useful, I am in the Mountain View office and don't mind walking over to someone's desk to reproduce the bug in person.", (In reply to Wesley Johnston (:wesj) from ', ) ', Just tested this and it seems to be the thing. After logging out of fxa, force quiting app, removing from disk, freshly installing from TestFlight (iPhone 5s, iOS 8), I don't get crashes until opening over ~100 pages.", Created ', ', Pull request This code is more simplistic than the previous version, but it definitely covers all eventualities which the other did not.', Comment on ', ', Pull request Looks good!' 
id=1158895	 "All these errors went away when I changed the deployment target of Snap from 7.0 to 8.0. I think this means we need to fork yet another dependency. Or make that a manual step of the 'build a release' process. (The latter may be the best actually)" 
id=1223102	 'Created ', ', Link to Github pull-request: ', Created ', ', Link to Github pull-request: ', Added a INCLUDE_SETTINGS_BUNDLE configuration option so we're not storing the state as to when we should include the bundle in the run script but in a logical place.", Comment on ', ', Link to Github pull-request: ', Nice, makes sense to me.', Landed 12bf9a1488c966c48dee98c0d6c967f3e3bd5557' 
id=1292681	 'Created ', ', Pull request', Looks great! Thanks for digging through this!' 
id=1180171	 'This is just a warning now. \ufeff\ufeffStorage/Logins.swift 155: log.warning("Form submit URL domain doesn\'t match login\'s domain.")' 
id=1233674	 "Hey Gert, Thanks for filing this! We've seen issues with grey screens when coming back to the app after long periods of being in the background (such as overnight). Could this be a potential way to reproduce this bug or is it something different?", Hello Stephan, This issue is different. I don't think it ever occurred after the app has been in the background for a long time. It just happens occasionally without any obvious reason. I think it is more likely to happen with web pages that take longer to load, so it may have something to do with load time, but that is just a guess. It certainly doesn't happen very often, which makes it difficult to get a grip on the issue. I will continue to try to reproduce it.", Created ', firefox iOS grey webview.png Firefox for iOS after the "page goes grey" bug. Note the browser chrome is still visible.', I see this problem intermittently as well. It\'s extremely annoying, because it happens while you\'re scrolling (that is, engaged with) a page. The entire UI does not go grey \u2013 just the webview (browsing context). The app chrome is remains visible (see the attached screenshot "firefox iOS grey webview.png"). Swiping up or down on the grey area exposes white top and bottom gutter areas before the rubber-band effect scrolls them away again. When the problem happens, the only way to recover the page is to reload, and as stated in the original post, further scrolling often results in the page disappearing again. Today I saw this happen multiple times while reading this article: ', I'm using Firefox for iOS 4.0 (11) on an iPad Mini running iOS 9.3.1. I've seen the problem for as long as I've been using Firefox for iOS, which is at least since version 2.", This is related to memory constraints and the related web content processes dying. *** This bug has been marked as a duplicate of ', ***' 
id=1092348	 'Closing this out now that we have real components. Any value this serves should probably shuffle over to ', .' 
id=1188623	 'This should be fixed by one of the checks I added in ', (in particular the isValid check on the RXMLElement), but please take a second look, Emily!', I'll close this out if I don't see it again after my fixes in the dependencies." 
id=1138711	 'Created ', ', Pull request', Comment on ', ', Pull request Expedient. These are for the search list items, not the suggestion pills, right? So there is only one for each engine?', Yep, correct.' 
id=1200556	 
id=1268012	 'Hi Farhan, I tried a couple of things without much luck :-/ Would you be able to suggest any pointers? In this section of code: ', , I tried: separatorInset = UIEdgeInsets(top: 0, left: 0, bottom: 0, right: 0) // changed left inset to 0 It didn't result in any noticeable change. I also tried removing the readStatusImageView and adjusted the ReadIndicator/TitleLable offsets. Though the cell title shifted to the extreme left, the separator remained where it is currently.", Try Debugging the view hierarchy to get a better understanding on how the view is laid out. ', Created ', ', Link to Github pull-request: ', Great job at finding the edge case! ', master 6f63c752f1686c4f1e5561fc3d6d02da93dc04f4', Needs uplift?', v5.x 70a8530' 
id=1281299	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Nice catch. I wouldn't be surprised if it's an iOS URL bug considering they were having issues with parsing RFP-valid URLs in iOS 8. I wonder if it's worth doing a range check as well where we crash in the case the domainURL returns nothing. Maybe it doesn't matter because this isn't a valid case?", Seems like a good idea. I can't think of other situations where this could happen, but it can't hurt!", v5.x 9cd74653fce0e7e30ab408f4ad6bafa1bae80a32' 
id=1212748	 'Odd. I can reproduce.', Created ', ', Pull request', Comment on ', ', Pull request LGTM Land please' 
id=1148487	 "We'll start with a generic error here. This bug can be about adding a more advanced (add this cert) ui.", *** This bug has been marked as a duplicate of ', ***' 
id=1225528	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1170920	 'Noticed this too.', Yes, it does. ', might help this a little if yo re switching tabs very frequently. The right solution for this is for the tabs panel controller to decide whether its data is stale enough to refetch.", *** This bug has been marked as a duplicate of ', ***' 
id=1101066	 'Created ', ', Pull request', Comment on ', ', Pull request r=st3fan in PR.', Merged.' 
id=1262154	 'Created ', ', Link to Github pull-request: ', I've started to work on the updated URL bar and was looking to get some feedback on the best way of integrating the new one with the existing code (BVC, etc). Would love to have your thoughts on the WIP/approach so far!", Comment on ', ', Link to Github pull-request: ', Feedback left in the PR', Comment on ', ', Link to Github pull-request: ', Looking good. Glad this is getting some love!', Hey Robin, I have a couple of questions about the landscape version of the URL bar: 1. According to ', , we have moved the panel buttons into the URL toolbar from the dedicated bar below. As I understand, this layout should appear when the user is on a new tab. What happens when a user starts to search? Before, the search screen would appear and cover the panel toolbar. Now that the panel buttons are in the toolbar the user can navigate to a panel mid-search. I'm not sure what this looks like w/r/t the navigation hierarchy. 2. Similarly, when tapping on the address field while browsing a page, we enter 'overlay' mode where the user sees the panels, the address field is ready for input, and a 'Cancel' button appears to the far right. Now that we are moving the panels into the URL bar, how does this work with the Cancel button? From this state we also encounter the issue above where a user can start searching and navigate to a panel mid search - with an added Cancel button. 3. For landscape on iPhone, do we want to use the panel URL bar layout instead of having the separate bar along the bottom?", (In reply to Stephan Leroux :sleroux from ', ) ', This variation was an alternative, not the layout we're going with currently. We should be going with ", ', Yes, we're sticking with the original layout \u2014 the alt. layout doesn't bode well on the 4s. Sorry for any confusion with this mock. What we have currently is good, just needs some polish!", :fluffyemily - By sticking with the original layout and just keeping the menu button, I think the work you did already to add the menu button negates the need for a flexible toolbar. Is there something else that's missing? Most of the work I've done on this has been a refactoring of the toolbar to fix animations and others issues but I can put that on the back burner for another time if we don't need it yet.", For now, yes. But ... ... one of the proposed changes for the home page is to replace the share button in the toolbar with the home button and move the share button to the menu for china only. I'm concerned that too many of these 'special cases' for the toolbars will result in a mess inside the toolbar code, especially as everything needs to be made in 2 places - once in the URLBar and once in the TabToolbar. However, seeing as for now the home page will be in the Menu only, then we can return to the concept of a flexible toolbar at a later date if required.", Marking as WONTFIX for now as we have no plans to implement anything else in the toolbar.' 
id=1130118	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1191987	 'Created ', ', PR ', How about getting rid of the set-build-version script and the step to call it in the documented "Making a Build" process. Then replace that with a step to modify and commit Client/Configuration/BaseConfig.xcconfig instead? I think when we make a build, that file should simply always contain the right and current MOZ_VERSION and MOZ_BUILD_ID for that specific build.', I think that would be better too since the BaseConfig file is the only place we should be touching for overall app configuration anyways. The nice thing about the approach is that we don't need to modify the build numbers for each of the extensions since they just use the same configuration value. Would it make sense to amend this patch with the removal of that script and an associated update to the wiki?", Yes please.', Comment on ', ', PR ', THis looks good. Lets do what you suggest in ', and let the team know that the build procedure has changed a little.', Merged' 
id=1204046	 'This is against master git rev-parse HEAD 5f192884aaa8bdcfdf87beaac111911c6f2514ad', iPad Air (iOS 9)', Since it's an assertion we won't see this in release and is resolved in GM." 
id=1162314	 'Created ', Screenshot', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', *** ', has been marked as a duplicate of this bug. ***' 
id=1164445	 'This was fixed in some other snackbar cleanup.' 
id=1228419	 'Created ', ', Link to Github pull-request: ', Basic implementation for feature flags + flag for login manager. See documentation for details: ', Comment on ', ', Link to Github pull-request: ', Looks good. Would you mind documenting the process of adding feature flags for the rest of the team?', Comment on ', ', Link to Github pull-request: ', I'm broadly in favor of using an AppConstants model, where flags are real runtime booleans rather than preprocessor directives. But this'll do for now.", :rnewman I'm down with using AppConstants instead of runtime booleans. Doesn't seem like a heavy lift or anything and there isn't an immediate need for this to land. Do you have any thoughts around the details of how it would work for different build variants?", (In reply to Stephan Leroux :sleroux from ', ) ', We already preprocess AppConstants, so we'd just do exactly what you already did in this PR, but in AppConstants instead.", Created ', ', Link to Github pull-request: ', Alternative patch using AppConstants', Merged master f8f4788ba64e310ac225ed36f22ec660dc833d71' 
id=1173789	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM' 
id=1113432	 'Created ', ', Pull request Approved by wesj and mfinkle in the PR, so let's give this a go." 
id=1132018	 'Created ', ', PR: ', This implements basic storage for Reading List. There are still a few items in the code marked as TODO but I intend to catch those when we actually need them. Which will probably be when we implement the Reading List Sync protocol later on. This is good enough now to start implementing reading list UI like the home panel and hooking up buttons to add items.', Comment on ', ', PR: ', This looks pretty good to me for a first drop.' 
id=1145436	 'This appears to be resolved in build 6' 
id=1275527	 "Also, the 'Edit' button is displayed when there is only one 3rd party search engine added and it is set as default search engine. Since removing the default search engine is not supported, the 'Edit' button should not be displayed", Created ', ', Link to Github pull-request: ', Thanks for getting to this! Much appreciated. I've reviewed it. Looks great!", master f8b7729d0446214dfae32a67fd0615cf200336a4', v5.x 8472b1d35314700aefa3536b6032886064e65369', Verifying as fix on master 6ad4b686.' 
id=1186604	 '*** ', has been marked as a duplicate of this bug. ***', This should be marked 2.0+ based on the result of the duplicate bug.', Created ', ', ', Merged' 
id=1289887	 'I filed this related bug yesterday that should fix the issue. ', *** This bug has been marked as a duplicate of ', ***' 
id=1221591	 'When the user scrolls down the list, should the search area scroll away with the list or be a fixed header?', (In reply to Stephan Leroux :sleroux from ', ) ', Fixed! Thank you :)', Is there a design for a 'No results found' view when searching and there isn't any matching results?", Opened ', to track no results page. For now I can push up the screen without it for code/ux review.', Created ', ', Link to Github pull-request: ', Pull together the widgets I already landed for the login cell and search widget to build the login list view with filtering/index view.', Comment on ', ', Link to Github pull-request: ', Looks good! One nit: we should sort by domain and not sub-domain. For example; ', would sort under M rather than L', (In reply to Stephan Leroux :sleroux from ', ) ', Not yet. Standby :)', (In reply to Stephan Leroux :sleroux from ', ) ', The sticky header is good as you have it.', Just landed this and forgot to fix the domain nit. I'll file another bug :( Master 534e509f0cb921b2dbae3b4e83f5dcd2c1756ca2", Follow up bug: ' 
id=1167784	 'Created ', ', Pull-to-refresh and fix swipe-to-delete I think the first two commits have been reviewed.', Comment on ', ', Pull-to-refresh and fix swipe-to-delete Haven't tested yet, but looks fine." 
id=1232189	 'Currently losing users to the Springboard crash so this should be a priorty', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good to me.', Merged master 8926b04d754aceb4a2bfaa9a7661178458d07570', v1.x 430aacf' 
id=1207314	 'Created ', ', PR: ', Comment on ', ', PR: ', NOTE: Things may change a bit when we start doing actual testing against Adjust. This patch integrates *Adjust*. I have chosen for the following approach: All Adjust related code is in a new `AdjustIntegration` class. This singleton manages the Adjust configuration and contains all the code that directly talks to the Adjust SDK. This makes it easy to see the interaction with Adjust. The *Adjust* settings, *Environment* and *Application Token* are taken from our `Info.plist`. They are put in there during the build process through the `Firefox.xcconfig` and `FennecAurora.xcfonfig` files. In case we do not want to store the *Application Token* in source control we can leave it out of those files and manually set it during a build. (Note that no tokens are currently in source control) (Note though, that keeping the *Application Token* secret is very difficult. People can still download the application and find it by inspecting our binary or `Info.plist`. If we want to prevent that then we need to implement some kind of secret obfuscation.) The `AdjustIntegration` class has one public method, `applicationDidFinishLaunchingWithOptions()`, which needs to be called as part of application launch. This method does the following: 1. It checks if we have previously received *Attribution Info* from *Adjust* by looking for the presence of the `~/Documents/AdjustAttribution.json` file. If the file exists then there is nothing to do. 2. If we have not received the *Attribution Info* then we try to create an *Adjust Configuration*. If that fails, for example because this specific build is not configured to use *Adjust*, then there is nothing to do. 3. We call the *Adjust SDK* method `Adjust.appDidLaunch()`, which will talk to the *Adjust* service to discover the *Attribution Info*. 4. We implement the *Adjust SDK* delegate method `adjustAttributionChanged()` to find out when the *Attribution Info* has been sucessfully retrieved. 5. The `adjustAttributionChanged()` delegate method simply calls `AdjustIntegration.saveAttribution` to remember the *Attribution Info* on disk to `~/Documents/AdjustAttribution.json`. The following items are stored in the `AdjustAttribution.json` file: * `_timestamp` * `trackerToken` * `trackerName` * `network` * `campaign` * `adgroup` * `creative` * `clickLabel` All these fields, except `_timestamp`, map directly to the fields of the `ADJAttribution` class that is part of the *Adjust SDK*. This data is only stored locally on the device and not used for anything at this point. We keep it around because at some later point when *Unified Telemetry* is implemented, we can send back some of this info to for example track per-Campaign retention. How and what can and will be sent through Telemetry, and to what specific info people will need to opt-in, will have to be decided by the Mozilla Data Council before that functionality is implemented.', (In reply to Stefan Arentz :st3fan from ', ) ', Do we really want to store this in Documents? Is there a risk of this being accidentally synced via iCloud, restored to a new device when it shouldn't be, etc?", Comment on ', ', PR: ', LGTM with comments noted on the PR.', Extra commit to disable Adjust after receiving the Attribution. If this is not done then additional pings to Adjust are done until the application is cold started again. ', I have asked Adjust on how to test this, and this is what I got back: It\'s definitely possible to simulate attribution for a mock-campaign through testing. Next steps are as follows: Create an adjust Tracker URL, naming it something like "Stefan Test." If you\'d like to see any additional parameters passed, then feel free to hardcode them at the campaign/adgroup/creative levels \u2014 example: ', Once yo ve setup the basic tracker URL structure (as outlined above) yo ll want to append your IDFA \u2014 a final, test-ready tracker should look like this: ", Proceed with testing \u2014 steps below: Close App Delete App CLICK HERE FROM DEVICE: ', CLICK HERE FROM DEVICE: ', Download/install the TEST BUILD Open the app Once these are complete, in the order listed above, yo ll see data appear in the Dashboard. Please let me know if you have any questions about next steps. As a result, I have used the following steps to simulate a install via a campaign: Note that 60A5BFDE-654C-45A4-9B78-365EE7327BA3 is my iPhone's IDFA and is useless for testing from other devices. 1) Delete all instances of the application from my device 2) Load ", on the device. This makes Adjust forgets my device completely. 3) Load ', on the device. This tells Adjust that a user has clicked an install link with the specified campaign/adgroup/creative. This redirects to the store, ignore that. 4) Install and run Fennec Aurora or Nightly on my device In the AdjustAttribution.json file that we store I now see the following: { "network" : "Alex test tracker", "trackerToken" : "tdbl19", "adgroup" : "test-group", "campaign" : "test-campaign", "creative" : "test-creative", "_timestamp" : 1444184471, "trackerName" : "Alex test tracker::test-campaign::test-group::test-creative" } This looks good. However, in the Adjust (sandbox) dashboard I only see two Organic installs and no mention of the above campaign.', I have tried with both production and sandbox. I see the number of 'clicks' go up after testing. But the number 'installs' does not change. Asking Adjust Support for advice.", Email to adjust: Hi Joli, thank you for your advice. I have used the method below but I don't get the expected results. I see that the app correctly discovers the attribution: 2015-10-06 22:32:51.451 Client 527:110101 Adjust d: Wrote Attribution: tt:tdbl19 tn:Alex test tracker::test-campaign::test-group::test-creative net:Alex test tracker cam:test-campaign adg:test-group cre:test-creative cl:(null) And in the dashboard I see the number of 'clicks' go up. However, the number of installs stays at n/a. Is that expected? I would expect this number to go up. I have tested both in sandbox and production. For completeness, these are the two URLs that I have used: First: ", Then: ', The IDFA comes from my device. S.', Oh maybe i spoke too soon. Maybe Adjust needed some time to process this data. Because now I do see 2 installs in the sandbox environment. Will do one more test to confirm.', Confirmed. Did a third test and the counters are going up after about 15 minutes. I guess that is the time Adjust needs to process new data.' 
id=1157251	 'Besides being consistently in English, the dialog seems a bit random. Try to enter a password protected website using a username and blank password (there actually is one). At the bottom of the page I get a request to "save the password for USER on URL". When I finally get the Apache error page, the request becomes "save the password for USER on (EMPTY)". Try to access without providing username and password, you get the incomplete dialog in the attachment (no username) when the Apache error page is displayed.', Created ', ', PR ', I think maybe we shouldn't save empty usernames or passwords. That's what this does.", Comment on ', ', PR ', Just a comment about a stray println() left in the code.', Comment on ', ', PR ', I know that empty usernames/passwords are valid, so I don't know if not saving them is the best option. WFM if this is what Android/desktop do. If we're different, we should probably get UX approval for this change.", *** ', has been marked as a duplicate of this bug. ***', This looks fixed in build 13, I don't get any request to save the password. Amending subject, keeping ", for the localizability issue (still present in build 13).' 
id=1178320	 'Created ', ', Pull request (ViewMemoryLeakTests) This pull request fixes the broken ViewMemoryLeakTests. The main issue was that the browser controller is wrapped inside a navigation controller now which was not reflected in the tests.', Created ', ', Pull request (SearchTests) This is a separate pull request for fixing the broken SearchTests. Let me know if I shall merge everything into a single pull request. I decided not to do that for now because the tests are logically separated.', Comment on ', ', Pull request (SearchTests) r+ with nits. Good work! Thank you! Fix the nits, update the PR and we can merge it in :)', Thanks. :) I resolved the conflicts on the SearchTests PR (', ) and left more comments on the ViewMemoryLeakTests PR (', ).', *** ', has been marked as a duplicate of this bug. ***', Thank you for the fix! ' 
id=1211369	 "It's hard to tell whether behaviour is incorrect. Safari does the same thing (it actually has a worse scrolling interaction than Firefox), and you can access the header by scrolling up. It could be that this was intentional on Google's part. We could change this behaviour to show the header by default if that seems like the right thing to do, though.", We should investigate and see if we can contact Google to see what's up.", The behaviour actually seems much more reasonable with the scrollbar changes introduced in ', Maybe this is actually acceptable now?' 
id=1278681	 'Not needed.' 
id=1169862	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Yes, but .. my gut feeling says that having a special TestAppDelegate, or any test specific code in the app, is wrong. I think this specifically is really a 'make sure tests start with a clean app state' problem, which should be a test or test runner issue. And probably test specific. Because what happens if we want to unit test the tab state code? Add more special test login in the app? Is there no 'wipe simulator state before each test' option?", (In reply to Stefan Arentz :st3fan from ', ) ', Yes, it should be, but it\'s a flaw with the way iOS tests are run. iOS tests work by first launching the app, then attaching the test framework to the app, and the same app instance is used across all tests 1 . That means we can\'t clear the simulator, or even restart the app, and we\'re required to reset the state on our own between each test (hence the reason for our resetToAboutHome() helper function at 2 ). If a single UI test fails, it can cause all following UI tests to fail since the app won\'t be in the "default" state when the tests start. It\'s all very fragile. ', The we\'d probably want to test something more componentized that doesn\'t directly interact with NSCoding. We could test that the session data written matches the expected data, and in a separate test we could feed in mock data and test that the post-restore state matches the expected state (this is what we do on Android). Testing actual restoration would be difficult since logic would have to span across multiple tests, breaking the "I" (isolated) condition in the FIRST unit test principles. ', Unlikely, given 1 . But that link also mentions running tests from the command line, giving us more control over how they're run, so that may be worth investigating. 1 ", 2 ' 
id=1160469	 'Created ', Screenshot: Unable to assign myself to bug Please how do I assign myself to this bug? (see the screenshot, situation after clicking the value right to the "Assigned To:" field)', It's all yours. No need to ask :)", To not have to file a separate bug: Computer vs. Mobile device should also be announced (cell image)', Created ', ', Pull request', (In reply to atrain from ', ) ', I was wondering how one should follow the "Assign yourself" instruction in the Contributor guidelines (README.md on GitHub) ;-)', I'm not sure why you can't assign bugs to yourself. Let me investigate. The patch looks great. I'll merge it soon.", Thanks Stefan but no need to investigate that, I applied for the "editbugs" privilege as suggested by Brian and Nick, approval is pending, until then I can\'t assign bugs to myself.', Added a quick comment to the patch about a println() that was left in. Other than that it should be good to go.', Merged. Thank you for the contribution.' 
id=1249436	 'Fixed as part of ', *** This bug has been marked as a duplicate of ', ***' 
id=1182255	 "stomlinson: can you estimate the amount of work that this is for the fxa-content-server team? And how Firefox for iOS would signal that it doesn't want to allow account creation? Thanks!", Triage note: we should keep this ? along with a few other decisions that Karen and I are keeping in our heads.', Hey Nick, Can you give us a bit more context? Vlad and I are shooting various speculations back and forth, but figure we should just ask. What constraints &| problems are you facing? It sounds like v1 of Fx on iOS is unable to poll the auth server to find out when the user has verified their email. If this is the case, we may have to disable password reset as well, because that would have the same problem.', (In reply to Shane Tomlinson :stomlinson from ', ) ', Yes. ', The Sync state machine that configures a blank server is complicated. Very complicated. This is what needs to happen when you have a brand new account, an existing account that got Sync-node migrated (now rare, but common in the past), or a wiped server (which is a Sync client's get out of jail card). That is, you arrive at a Sync endpoint that doesn't have meta/global or crypto/keys. Yo re the first to the party. ", No, nothing like this. It means you have auth and everything set up, but you have a blank Sync endpoint. You make progress by doing a bunch of finicky things that we're not going to implement for v1. ", Password reset will not be smooth if the iOS device is the first to the new Sync endpoint. Password reset looks like Sync-node migration.', What will happen if, despite our efforts, the iOS device finds itself trying to sync against an empty sync endpoint? Will it silently fail? Error out? Wipe all the user\'s local bookmarks? :-) As you note, this is going to happen some non-zero percetnage of the time anyway due to node migrations, password resets, etc. How bad the outcome is will affect how much work we can put into trying to prevent it. Perhaps it\'s wishful thinking, but I wonder if we can\'t finesse this away from within FxiOS by pretending that it\'s not an unexpected error state, but rather a partial success state. If you try to read /meta/global and it\'s not there, message the user to say "Almost there! Now connect a Desktop Firefox to sync your bookmarks, history, and more".', (In reply to Ryan Kelly :rfkelly from ', ) ', Log and abort. The current behavior is relatively safe, assuming no node reassignments (which we haven't tested). The main thing I'm hoping to avoid: a user trying to sync their iPad with their iPhone, or trying to back up data from their iPhone without first connecting to a desktop. Nothing will happen, and they'll be disappointed. This is a mitigation, a behavior limiter, which I primarily intend as a hedge. I'd like to have the state machine complete by Christmas. ", On first sync that might be a good idea. I'm a little worried about iOS lifecycle stuff, but we might be able to make this happen.", Naturally, a big part of this is me selfishly wanting to use the FxiOS release to drive as many new account creations as possible...', We'd definitely like to; v1s are always embarrassing. We hope to get 1.1 and 2.0 out the door this year, which will be the releases that we promote and should drive growth.", Ryan, Shane: can I get a status update on this? If it's not something we can get done and deployed within the next few weeks, we'd love to know ASAP so we can try to get the full state machine built or prepare for non-technical mitigations. Thanks!", :rnewman, can you give us concrete dates?', Context: ', Basically that means this week or early next if we want to be sure of getting the change landed and out the door. If we miss that, we can probably get a URL change in right up until we deliver an RC to the App Store. Basically what we\'re looking for is accounts.firefox.com/signin with the "Create an account" link removed, and/or an alternative splash page that goes to that amended sign in screen on clickthrough.', Before addressing the specific request here, and based on previous discussions with Shane, I think we need to commit to implementing an iOS-specific auth broker, and baking a corresponding "context" value into your config ASAP. I see that currently you have: public let signInURL = NSURL(string: "', ")! public let settingsURL = NSURL(string: "', ")! public let forceAuthURL = NSURL(string: "', ")! Let\'s aim to change this to use `context=fx_ios_v1` and we can use that as a flag to enable any ios-specific behaviour for these flows. On our side, we\'d just make the corresponding "iOS auth broker" act identically to the desktop broker for now, but this would give us the necessary hook to diverge between iOS and desktop behaviour, as required. This flag, in combination with user-agent sniffing as necessary, should be all the API we need to drive any platform-specific tweaks to the flow, now or in the future. Shane, does this mesh with what you had in mind when we talked more broadly about this broker situation yesterday? ', If we got the above change into the current train it would hit production sometime week of 10th August. This is the earliest we could have it ready without a full-blown fire drill and out-of-band deployment. Does that mesh with your deadlines? The page linked above suggests RCs are going out early August.', W.r.t. the specific request of hiding "/signup" links: I strongly dislike it and I want to avoid doing it. But I trust you guys to judge how important it is, and if you tell me you need it, we can get some minimal iOS-specific styling done in the above timeframe. Would you want this behaviour to stick around in fxa-content-server forever? In other words, would you want us to keep hiding /signup links for FxiOS-v1 clients even after FxiOS-v2 has been released? ', Whatever they are, you should prep these non-technical mitigations either way. We won't be able to 100% prevent people from making their way to /signup. (With more time, we could e.g. make /signup throw an error if yo re on FxiOS, but that's be a terrible experience if we tried to hack it in now)", I\'m talking literally "apply dispay:none to some links" level minimal here, and even that could easily have flow-on effects that make it complicated. Unfortunately this fell of my radar, we were not prepared to be doing any work on it for this train.', I had a quick stab at the changes required for ', and ', to get a sense of what's possible: ", The `context` hook can be done initially with a very small change. The no-signup-links thing was a terrible hack. More importantly, trying it out makes it seem like a pretty crappy user experience. If I happen to land on that page and I don't have an account, it's a dead-end with no indication of what I should do next. A better fxa-side solution would be to make /signup rediect to an error page when context=fx_ios_v1, so there's some explanation of what's going on. But that seems like a bigger chunk of work. I'd strongly prefer to manage this outside of the fxa-content-server flow if possible, as in ", . Anyway, I should stop rambling here and let Shane share his thoughts, he's got much more context on the plans and possibilities here than I do!", :rfk, this is a good start for a solution. I think in the long run, a new broker will be needed so the user flow can be controlled independently of other brokers. For instance, the fx-desktop-v1 broker halts all processing after signin, the content server notifies the browser and dead ends w/o a screen transition. Fx on iOS might want a screen transition. On top of what you have here, we need to handle users that attempt to sign in with an unknown email address. An error message is currently displayed that allows the user to go to the signup page 1 . I\'m unsure of the best way to handle this case, a quick and dirty hack is to query the relier\'s context, see if it\'s fx_ios_v1, and if so, display the error as is instead of calling _suggestSignUp. A better solution is to create the above mentioned auth broker and add a function to it `isSignUpEnabled`, which returns false. the BaseAuthenticationBroker would have the same function, but return true. With this functionality, we could even do a redirect from the /signup page to /signin with a message to the user that says, "sorry, signup isn\'t ready yet on Fx for iOS, but will be soon." rnewman, nalexander: Even though Nick made this request a couple of weeks ago, this kind of blind sided us because we were unaware of the coming App Store deadline. Who can I work with to tease out additional requirements and the corresponding schedule so that crunch time scrambles are avoided? Is there a meeting either myself or Edwin can sit in to hear about upcoming FxA integration work? I don\'t like when our team causes others stress, and I\'d like to make this integration as awesome as possible! 1 - ', (In reply to Shane Tomlinson :stomlinson from ', ) ', While we're here, Fennec will want it's on broker too, for all the same reasons. ", Sorry about this. The back story is that I did most of the iOS FxA work and then walked away from the iOS project to work on other things. I don't think the iOS FxA code has been touched since. Who can I work with to tease out additional requirements and ", I have an action item to investigate some rough points in the FxA login machine, so I'll be back in the area and I can be your point person for FxA integration on iOS. We're expecting very minimal asks from the fxa-content-server team from here until we ship.", I added a new column in 1 to define how the fx_ios_v1 flow should act. 1 - ', (In reply to Ryan Kelly :rfkelly from ', ) ', Filed ', . ', That works, so long as things will continue to work as they do now if we send the new context before Aug 10. ', Not necessarily -- once the new version of the app is out, we expect almost all users to upgrade, and the ones who stick around can take what they get. This is simply a super short-term mitigation to avoid a user creating an account on iOS without the client being finished. Our hope is that it's better for the user to be a little puzzled and go sign up on their desktop than for them to successfully sign up and end up without their data syncing (or tickle client bugs and really screw something up). If we can put up that crowd-control barrier for 2-6 weeks, then that's enough. As soon as ", is done, we can kill the no-signup URL param (if it's client-controlled) or you can deploy a new train (if you control this on the server by context), and by the time it reaches users, sign up is back. ", If you mean "some users will post a direct link on a forum and open it on their iPad": I\'m not worried about those users. If anyone does manage to do that, things will still work (the account will be created, the client configured, and it *should* stop there). It just won\'t be syncing anything.', Unfortunately I don't think this will work. If you send an unknown context yo ll probably get the default broker which doesn't do what you want. The patch to accept the updated context value is very small and very low risk, if it makes the difference I think we should try to backport it onto train-42 for an earlier deployment. Shane, thoughts? ", This is very reassuring :-)', Aye aye. Train 43 is tentatively scheduled to go out on August 10th; if all goes well with testing and the train 42 deployment, which is currently scheduled for Monday the 3rd. My hope is train 43 goes out on Monday the 10th, or within a couple of days afterwards, to fix a two outstanding bugs for the firstrun flow. Backporting a patch and having it released between Monday the 3rd and Monday the 10th will add pressure to the train 43 schedule, could cause that train to be pushed back. Maybe it can be slipped in before train 42 goes out on Monday? Either way, jrgm should be involved in this discussion, he's the one in the best position to say what is and isn't possible with the current schedule.", Aye, :jrgm is loaded up to the max with deployment wrangling right now :-( FWIW I think this is the minimal change we could get away with to lay the groundword for future tweaks: ', I don't have enough context on the timelines here. AFAICT our options are: 1) Do nothing now, maybe add some user-agent sniffing in a future train 2) Try to rush `context=fx_ios_v1` out early next week by jamming it into train-42 3) Include `context=fx_ios_v1` in train-43 so it's ready the week after, assuming all goes well 4) Use a messaging flow like 1 to signal that we want special treatment, and leave `context=fx_desktop_v1` alone One advantage of (4) is that you could try to ship the client code for it before we get the server stuff deployed through to production, reducing timeline pressure on our side. This from ", gives me hope that (3) is a workable, low-risk, stress-free option: ', But we'll need some combination of Richard, Nick and John to eliminate the unviable options from that list. 1 ", It sounds like the easiest thing to do is separate: 1. Add &exclude_signup=1 to our URLs or signInOnlyMode to capabilities. We can do that now. When the server code is done and deployed, things will magically work. When we're ready to support sign up, we'll land the appropriate undo-change in the client at the same time, and that'll magically work, too. 2. When you know the context is deployed, add the new context to the iOS client.", (In reply to Ryan Kelly :rfkelly from ', ) ', This patch is low risk, and could possibly target a train 42.1. Does FxiOS communicate to FxA using WebChannels or FirefoxAccountsCommands? WebChannels are V2 of the desktop auth broker, FirefoxAccountsCommands are V1.', FirefoxAccountsCommand AFAICT, they use context=fx_desktop_v1" and I see this in the source: "addEventListener("FirefoxAccountsCommand", handleAccountsCommand)" ', I suppose this won't break anything, and is at least an improvement over UA sniffing :-)", FYSA, Emily already implemented ', . I marked it as not ready to land until you say so.', I didn't say this explicitly, but I think separating is a good plan: ", Do this because it won't break anything, gives us something that's better than U/A sniffing as a last resort, and is certain to be short-lived. I'm not even going to bother bikeshedding the name of it :-) ", We'll move ahead on this at a fast-but-sensible pace, either train-43 or as a patch release of train-42.", (In reply to Ryan Kelly :rfkelly from ', ) ', Why do we need both context=fx_ios_v1 and exclude_signup=1 ? "fx_ios_v1" would already mean that sign up is not supported', (In reply to Vlad Filippov :vladikoff from ', ) ', It wouldn't be for the workaround in this bug; it would be so we're not reusing desktop's context, which gives us flexibility in the future.", We don't. But the client can add exclude_signup=1 to its URLs now without breaking anything, it'll just be a no-op. Switching to context=fx_ios_v1 before it's deployed on our servers will cause things to break. We will *not* commit to exclude_signup being an ongoing API feature, or anything more than a temporary escape-hatch. It's only for this specific situation and only because of impending URL-freeze deadlines. If it turns out we get context=fx_ios_v1 in production before client RC ships to the app store, we should throw away exclude_signup entirely and pretend it never happened.", Initial support for |context=fx_ios_v1| landed in ', . This patch was backported to create train 42.1. If all goes well with testing, support for |context=fx_ios_v1|, with hidden signup links, should go to production this week.', (In reply to Shane Tomlinson :stomlinson from ', ) ', Thanks, Shane. That'll unblock ", . Ryan, do you have a PR we should be watching for exclude_signup?', Support for disabling signup when *either* `exclude_signup=1` or `context=fx_ios_v1` landed in this PR and will be part of FxA train-43 deployment: ', That's scheduled for this week, but I haven't caught up with :jrgm yet to confirm the details. Note that as of now, it is safe to include either or both of `exclude_signup=1` and `context=fx_ios_v1` in the URLs. They just won't trigger the signup-disabling behaviour until the next train is deployed. ", Does this seem doable now, or should we stick with exclude_signup=1 for initial release?', :rnewman - The PR with this feature is 1 , which should go into production today. You can see it in stage now by visiting 2 or 3 . 1 - ', 2 - ', 3 - ', (In reply to Ryan Kelly :rfkelly from ', ) ', I'm happy to continue with exclude_signup=1 for this particular hack. Using the correct context is just the Right Thing To Do\xae going forward. Also using *only* exclude_signup is nice, because developer builds will send the correct context but *not* exclude_signup, so devs (read: me) can still test the correct empty-server flow :) (In reply to Shane Tomlinson :stomlinson from ", ) ', Thanks, Shane! I'll try this out.", Verified on stage. Jumps straight to sign in.', FTR, uireview+ from tecgirl.', Interesting point, I hadn't considered this. The current behaviour of fxa-content-server will not support it because it disables signup when *either* exclude_signup or the ios context is present. Given the ask above, perhaps we should change that to make exclude_signup the *only* way to trigger this behaviour, keep it around for a few months while you dev, and aim to remove that hackery by christmas. In any case, I'm glad we've got something in place that you can ship to the app store and we can tweak behind-the-scenes over the next couple of cycles.", (In reply to Ryan Kelly :rfkelly from ', ) ', +1 on that. ', It's much appreciated! I owe you lot some beers and/or tacos and/or coffees.", (In reply to Ryan Kelly :rfkelly from ', ) ', If our stated goal is to remove exclude_signup, I would rather not use this approach. API options that live for more than an extremely short period end up being supported forever. Can we just use two different contexts, fx_ios_v1 means singup is not supported, fx_ios_v2 means it is. We reduce the API surface area, and the version bump blatantly indicates something major has changed.', Another option to consider is whether the `capabilities` approach is applicable, and could be used here. We could just query the UA. If it says it supports signup, we enable signup. If it responds negatively, then we don't.", (In reply to Shane Tomlinson :stomlinson from ', ) ', This will be a very short period -- until the end of September most likely, and November at the latest. There's no need to continue supporting this once we get v1.x/v2.0 out the door, and if it breaks before then, so be it: this is a hack to avoid a limitation, not a real API option. (The guarantee: Karen would kill me if we were in the market for months without supporting account creation from the device.) ", That would work for me, but I don't think you can safely get that deployed in production by tomorrow. We hope to cut an RC on Friday, and we've already tested what's in stage (and now prod).", As far as I can tell, this is done in prod. Ryan, close this when yo re happy!", Yes, let\'s follow up in follow-up bugs. I filed 1 to formulate and implement a plan for the eventual removal of exclude_signup=1. I see the following URLs in our source and unless you tell me otherwise, I\'ll assume this is what\'s been shipped in the RC and will go out to users-we-have-to-support in the wild: signInURL = NSURL(string: "', ")! settingsURL = NSURL(string: "', ")! forceAuthURL = NSURL(string: "', ")! 1 ', (In reply to Ryan Kelly :rfkelly from ', ) ', Correct. Thanks to both of you for getting this done and out the door!' 
id=1094479	 'Not demo-specific, so renaming.', I don't think this really applies anymore." 
id=1190564	 'Created ', ', Pull req.', Comment on ', ', Pull req. bnicholson reviewed on IRC. ' 
id=1140227	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM', Comment on ', ', Pull request Merged.' 
id=1151353	 'Code to fix the issue ', Thanks. I've CC'ed Nick for review.", Created ', ', Pull Request', Comment on ', ', Pull Request Use the UITableViewCell's accessoryView to do this, like in ", . The controller returns as soon as you select (IIRC), so you can just set the accessoryView once during the cellForRow:.', Comment on ', ', Pull Request Made changes based on the SO link given by alexander.' 
id=1259250	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1162996	 'Submitted a PR here ', Created ', ', Link to Github pull-request: ', Looks good, though it'd be nice if we could turn each helper method into an actual test as mentioned in the PR." 
id=1226821	 '3e791d5', v1.x: 071b78d Cherry-picked a test tweak: fe0bba9' 
id=1282114	 'Closing as invalid. Unsure why one would choose to translate "add" instead of "ok" here.' 
id=1172101	 'Same with pages in reader mode?', Pages rendered in Reader Mode should be seen in tiles, as they do now.', Investigation: - SQLiteHistory.getFilteredSitesWithLimit(): we could filter out the pages without error screenshots here, though a) it's not clear what is in error b) what happens when a previously valid page is now in error (e.g. if I go to ", when we have no network connection) - FavIconManager.addFavicons, and Client/Assets/Favicons.js These get executed once the page is loaded, so is too late to fix the problem in ', . The page isn't loaded in that case.", Created ', ', Don't add error pages to history or screenshots.", Comment on ', ', Don't add error pages to history or screenshots. LGTM", Created ', ', PR: ', Replacing the obsolete PR just for reference' 
id=1184523	 'Oh it seems this is already fixed and I was looking at old code locally. Marking as resolved.' 
id=1238807	 'Needs a test!', Regression introduced by ', .', Created ', ', Pull request URL as a string should not be in the list of activity items.', (In reply to James Hugman :jhugman @jhugman from ', ) ', Hm, but it looks like selectedURL is an NSURL. Why would adding an NSURL as a share item break sharing with Twitter? Moreover, if you remove the URL from the share items, what are we even sharing to Twitter? Also, does this regress anything from ', ? Just curious why it was added in the first place. Sorry for all the questions -- would like to understand the fix a bit better before giving r+.', Comment on ', ', Pull request This patch looks good to me. Tested with Twitter, Mail, Copy, 1Password, Things.', This is /exactly/ the same problem as seen in ', . That fix worked because self will return the selected URL via UIActivityItemSource protocol. The bug existed because extensions set the rule of how many activity items they can support, and a common rule is that they can interpret exactly one of activity items. Adding both a URL and a UIActivityItemSource means those items match more than one, so the extension doesn't show up. The bug was introduced in ", , which makes the ShareExtensionHelper work with either a tab or a URL. In my testing this didn't break any of the Share Link behaviour, though I'm not convinced that all the share menu items are going to be valid for that use case, (e.g. Share Link -> 1Password).", Comment on ', ', Pull request Got it. Thanks for the explanation!', Merged.' 
id=1144763	 "This was meant as a way to promote the Sign In flow, as well as provide some continuity when the user's email/avatar shows up there. I'm happy to remove it if there is consensus, but fear that absent an on-boarding experience or tour many people will altogether fail to discover the Sign In possibility. Thoughts?", Thanks for the reminder: I think we should have a minimal on-boarding experience!', @darrin, I noticed in the gif posted in ', there's an account picture, maybe a stock silhouette account picture (pre-sign in) and a slight rewording might help. I think it's a good discoverable area.", IMO we should remove this altogether until Sync and/or RL is implemented, landed, and we're confident that it works.", This was removed in another patch.' 
id=1109656	 'Created ', ', x-github-pullrequest First iteration of location completion.', Comment on ', ', x-github-pullrequest Looks OK, though I'd like to see an updated PR with nits fixed and a rebase (since this code is completely bitrotted). Ideally we'd also fix the behavior at 1 , but I'd be OK with handling that in a follow-up bug if you prefer. 1 ", Comment on ', ', x-github-pullrequest I think this looks pretty good as a first draft (with lots of little follow ups to land after, but I had some comments and ideas. What do you think?', *** ', has been marked as a duplicate of this bug. ***', Removed the META from the name since this rolled in under the Awesome Screen Meta.', Created ', ', Pull request', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Pull request This looks pretty good but I noticed two issues: The first is a blocker: (Assuming you have news.ycombinator.com in your history) 1) Start typing 'ne' 2) URL is autocompleted to news.ycombinator.com 3) I hit either Go on the onscreen keyboard or just Enter on my bluetooth kbd 4) Yahoo search opens searching for 'ne' Expected: news.ycombinator.com should open The second is just a little odd: Also, one thing that I liked from the original implementation, which is on parity with Safari, is this: (Assuming you have news.ycombinator.com in your history) 1) Start typing 'ne' 2) See ne ws.ycombinator.com appear (last bit is selected without bars) 3) tap anywhere in the field Expected: the 'completion selection' turns into a text selection with handlebars. Ie, it would look like: ne bar ws.combinator.com bar Actual: all text is deselected and the cursor is placed at what seems some random place in the url. In my case the cursor appears a bit before the end while i tapped on the 'news' part of the url.", Comment on ', ', Pull request Updated with review comments addressed.', (In reply to Stefan Arentz :st3fan from ', ) Oops, I didn't notice you commented here, so I flipped the flag to wesj since I spent awhile addressing his comments in the PR. Feel free to review the updated version if you want! ", Hm, thanks. I'll take a look. ", Yeah, I noticed that in the Safari too, but I wanted to make it so that tapping in the field would end the selection so you could immediately type the remaining characters. Maybe it\'s just because I\'m used to Android, but what\'s the benefit of selecting the completion portion? It just seemed like an annoyance to me, requiring two taps to get back into editing mode. But I definitely didn\'t intend for the cursor to go to "random place in the url"; in my testing, it went to the end. That\'s strange that it was a bit before the end for you...guess I\'ll have to play around with it some more.', Comment on ', ', Pull request Stefan, I updated the PR with your issues addressed.', I can't get this going without immediately crashing. This is what I did: 1) Start clean simulator. iPhone 5S 2) Tap on location bar 3) Type www.reddit.com 4) Hit Go Stack trace below: * thread #1: tid = 0x2e66989, 0x000000010ab4fcd8 Shared`Shared.KeyboardHelper.SELkeyboardWillHide (notification=0x00007fd208db5410, self=0x00007fd208c40630)(ObjectiveC.NSNotification) -> () + 1928 at KeyboardHelper.swift:84, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT) * frame #0: 0x000000010ab4fcd8 Shared`Shared.KeyboardHelper.SELkeyboardWillHide (notification=0x00007fd208db5410, self=0x00007fd208c40630)(ObjectiveC.NSNotification) -> () + 1928 at KeyboardHelper.swift:84 frame #1: 0x000000010ab4fd5a Shared`@objc Shared.KeyboardHelper.SELkeyboardWillHide (Shared.KeyboardHelper)(ObjectiveC.NSNotification) -> () + 58 at KeyboardHelper.swift:0 frame #2: 0x000000010bf73cec CoreFoundation`__CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 12 frame #3: 0x000000010be738a4 CoreFoundation`_CFXNotificationPost + 2484 frame #4: 0x000000010b3906b8 Foundation`- NSNotificationCenter postNotificationName:object:userInfo: + 66 frame #5: 0x000000010d059c33 UIKit`- UIInputWindowController postStartNotifications:withInfo: + 340 frame #6: 0x000000010d05b342 UIKit`__77- UIInputWindowController moveFromPlacement:toPlacement:starting:completion: _block_invoke556 + 375 frame #7: 0x000000010c9fb362 UIKit`+ UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:factory:animations:start:animationStateGenerator:completion: + 473 frame #8: 0x000000010c9fb578 UIKit`+ UIView(UIViewAnimationWithBlocks) _animateWithDuration:delay:options:animations:start:completion: + 53 frame #9: 0x000000010d05b04d UIKit`- UIInputWindowController moveFromPlacement:toPlacement:starting:completion: + 972 frame #10: 0x000000010d05edc2 UIKit`- UIInputWindowController setInputViewSet: + 599 frame #11: 0x000000010d05aa7a UIKit`- UIInputWindowController performOperations:withAnimationStyle: + 50 frame #12: 0x000000010ce4abce UIKit`- UIPeripheralHost(UIKitInternal) setInputViews:animationStyle: + 1054 frame #13: 0x000000010cb003f1 UIKit`- UIResponder _finishResignFirstResponder + 141 frame #14: 0x000000010cb004f5 UIKit`- UIResponder resignFirstResponder + 236 frame #15: 0x000000010d0bd2d4 UIKit`- UITextField resignFirstResponder + 114 frame #16: 0x000000010a62e742 Client`Client.URLBarView.finishEditing (self=0x00007fd20a019900)() -> () + 274 at URLBarView.swift:343 frame #17: 0x000000010a7465f3 Client`Client.BrowserViewController.(url=0x00007fd208d6f7f0, self=0x00007fd208d304f0) (Client.BrowserViewController)(ObjectiveC.NSURL) -> () + 707 at BrowserViewController.swift:257 frame #18: 0x000000010a74d0ce Client`Client.BrowserViewController.urlBar (urlBar=0x00007fd20a019900, text=Swift.String at 0x00007fff555fdd78, self=0x00007fd208d304f0)(Client.URLBarView, didSubmitText : Swift.String) -> () + 1262 at BrowserViewController.swift:386 frame #19: 0x000000010a74d167 Client`@objc Client.BrowserViewController.urlBar (Client.BrowserViewController)(Client.URLBarView, didSubmitText : Swift.String) -> () + 87 at BrowserViewController.swift:0 frame #20: 0x000000010a77b908 Client`dynamic Client.BrowserViewController.urlBar (urlBar=0x00007fd20a019900, text=Swift.String at 0x00007fff555fde30, self=0x00007fd208d304f0)(Client.URLBarView, didSubmitText : Swift.String) -> () + 88 at BrowserViewController.swift:372 frame #21: 0x000000010a74d6a1 Client`protocol witness for Client.URLBarDelegate.urlBar <A : Client.URLBarDelegate>(Client.URLBarDelegate.Self)(Client.URLBarView, didSubmitText : Swift.String) -> () in conformance Client.BrowserViewController : Client.URLBarDelegate + 17 at BrowserViewController.swift:372 frame #22: 0x000000010a62d961 Client`Client.URLBarView.autocompleteTextFieldShouldReturn (autocompleteTextField=0x00007fd208d4b640, self=0x00007fd20a019900)(Client.AutocompleteTextField) -> Swift.Bool + 1457 at URLBarView.swift:309 frame #23: 0x000000010a633a85 Client`protocol witness for Client.AutocompleteTextFieldDelegate.autocompleteTextFieldShouldReturn <A : Client.AutocompleteTextFieldDelegate>(Client.AutocompleteTextFieldDelegate.Self)(Client.AutocompleteTextField) -> Swift.Bool in conformance Client.URLBarView : Client.AutocompleteTextFieldDelegate + 37 at URLBarView.swift:308 frame #24: 0x000000010a720a77 Client`Client.AutocompleteTextField.textFieldShouldReturn (textField=0x00007fd208d4b640, self=0x00007fd208d4b640)(ObjectiveC.UITextField) -> Swift.Bool + 295 at AutocompleteTextField.swift:134 frame #25: 0x000000010a720b4a Client`@objc Client.AutocompleteTextField.textFieldShouldReturn (Client.AutocompleteTextField)(ObjectiveC.UITextField) -> Swift.Bool + 58 at AutocompleteTextField.swift:0 frame #26: 0x000000010d0c5aee UIKit`- UITextField keyboardInput:shouldInsertText:isMarkedText: + 128 frame #27: 0x000000010cb764ba UIKit`- UIKeyboardImpl callShouldInsertText: + 109 frame #28: 0x000000010cb81a73 UIKit`- UIKeyboardImpl addWordTerminator:afterSpace:elapsedTime:executionContext: + 72 frame #29: 0x000000010d0e8469 UIKit`- UIKeyboardTaskExecutionContext returnExecutionToParentWithInfo: + 264 frame #30: 0x000000010cb80d5a UIKit`- UIKeyboardImpl acceptAutocorrectionForWordTerminator:executionContextPassingTIKeyboardCandidate: + 257 frame #31: 0x000000010cb8066b UIKit`- UIKeyboardImpl addInputEvent:executionContext: + 1312 frame #32: 0x000000010cb800c9 UIKit`__60- UIKeyboardImpl addInputString:withFlags:executionContext: _block_invoke + 36 frame #33: 0x000000010d0e8469 UIKit`- UIKeyboardTaskExecutionContext returnExecutionToParentWithInfo: + 264 frame #34: 0x000000010cb84393 UIKit`- UIKeyboardImpl acceptCurrentCandidateIfSelectedWithExecutionContext: + 224 frame #35: 0x000000010cb80096 UIKit`- UIKeyboardImpl addInputString:withFlags:executionContext: + 507 frame #36: 0x000000010cb8dc8f UIKit`- UIKeyboardImpl handleKeyWithString:forKeyEvent:executionContext: + 628 frame #37: 0x000000010cb8d8a0 UIKit`- UIKeyboardImpl handleKeyEvent:executionContext: + 1573 frame #38: 0x000000010d0e8914 UIKit`- UIKeyboardTaskQueue continueExecutionOnMainThread + 332 frame #39: 0x000000010cb8d1db UIKit`- UIKeyboardImpl handleKeyEvent: + 216 frame #40: 0x000000010c9a7046 UIKit`_UIApplicationHandleEventFromQueueEvent + 2467 frame #41: 0x000000010c986103 UIKit`_UIApplicationHandleEventQueue + 1961 frame #42: 0x000000010bed9551 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17 frame #43: 0x000000010becf41d CoreFoundation`__CFRunLoopDoSources0 + 269 frame #44: 0x000000010becea54 CoreFoundation`__CFRunLoopRun + 868 frame #45: 0x000000010bece486 CoreFoundation`CFRunLoopRunSpecific + 470 frame #46: 0x00000001101f59f0 GraphicsServices`GSEventRunModal + 161 frame #47: 0x000000010c989420 UIKit`UIApplicationMain + 1282 frame #48: 0x000000010a6c6b1e Client`top_level_code + 78 at AppDelegate.swift:11 frame #49: 0x000000010a6c6b5a Client`main + 42 at AppDelegate.swift:0 frame #50: 0x000000010ea67145 libdyld.dylib`start + 1", In another simulator where I have history, the domain completes correctly but I still get the same crash when I hit Go. (Or enter when using an external keyboard)', (In reply to Stefan Arentz :st3fan from ', ) ', Looks like this was a result of pulling WeakList out of KeyboardHelper. This looks like yet another Swift generics bug, so I reverted the changes to KeyboardHelper and left that class alone. Things should be working now.', Comment on ', ', Pull request Brian sorry for the delay. This looks great! No crashers. No comments on the code.' 
id=1205314	 'This is due to another build of Firefox installed (e.g, TestFlight or Aurora).' 
id=1154139	 'Nah, we do good things here -- did you see that commit I pushed at you?', Yes. But even so, in HasMetaGlobal, we always fetch, right?', Created ', ', Link to Github pull-request: ', Hey hey, you already did most of this :0', Comment on ', ', Link to Github pull-request: ', We talked about this: needs to check for timestamp changes and then key changes, and bail out if the keys changed. Safe to assume default-only for now.', Stale PR: ', Created ', ', Pull req. I want at least two reviewers for this.', Comment on ', ', Pull req. It's definitely safe in the success case, which is the only one we really care about just now.", Comment on ', ', Pull req. This looks good. I don't see anything crazy in this code. But I have to rely on :nalexander for the big sync picture.", 78a5f73' 
id=1193421	 'Created ', wikipedia-updated.zip updated wikipedia assets.', Would it be possible to merge this ', before RC?', I cherry-picked the icon changes, 'cos those are easy. Let me double check with BD about the search engine changes.", Jeff pointed me to the parallel Android bug for engine additions, so I merged those changes, too.' 
id=1243061	 'Note: I experienced this using an iPad Pro.', *** This bug has been marked as a duplicate of ', ***' 
id=1176274	 'This is probably from ', Same for Reader View button - I too see it while editing the location text field, given it was available before starting editing. After pressing it, it immediately vanishes and nothing else happens.', Created ', ', Pull request', Comment on ', ', Pull request Looks good!' 
id=1254568	 'Created ', ', Pull request Reviews for this are being handled as part of ', Comment on ', ', Pull request ' 
id=1196256	 " Yes. We'll need to change some behaviour on the FxA side to allow you to opt back in to the signup experience. Some options are in ", which I'll make sure we've got on our agenda for the next iteration.", In 1 we changed the logic so that *both* context=fx_ios_v1 and exclude_signup=1 are required to get the no-signups behaviour: accounts.firefox.com/signin?context=fx_ios_v1 -> sign-up link is shown accounts.firefox.com/signin?context=fx_ios_v1&exclude_signup=1 -> sign-up link is hidden This should get released to production with FxA train-45, in approximately two weeks from now. It'll be on latest.dev.lcip.org shortly. IIUC, this should be enough to unblock the issue here, let you experiment with building the signup flow in dev, and then enable it globally when yo re ready. On the FxA side, we just need a follow-up bug to let us know when we can remove support for exclude_signup=1 completely, after sufficient penetration of a signup-enabled Firefox for iOS.", Adding Shane for context.', (In reply to Ryan Kelly :rfkelly from ', ) ', Ryan, just checking in to find out if this did indeed land. S.', yes it did 1 and should be available in production for you to try out. 1 ', Created ', ', PR: ', This patch removes the exclude_signup=1 parameter from the FxA production URLs. This is related to ', which handles initialization of the sync server in case of account creation. That is about to land and this should go with it so that we can test account creation as soon as possible. :rnewman, if you review :nalexander's patch, feel free to land this too in one go.", Comment on ', ', PR: ', Yupyup, a patch to do this is already nesting half-way through Nick's big patch stack (with the wrong bug number).", Duping this to ', *** This bug has been marked as a duplicate of ', ***' 
id=1121228	 'Created ', ', Pull request', Keep in mind that Desktop and Android have a way to order more than a single engine as "first". On Android we set the order for the top 3 engines.', Also, this is locale dependent and distribution dependent. Things to think about.', Added a few small comments to the PR.', (In reply to Mark Finkle (:mfinkle) from ', ) ', The locale we can look at for sure but Distribution is an interesting one. Because you can only upload one binary to the App Store. (Is that different on Google Play?) I wonder if there is a 'receipt' left on the device in which we can from what App Store the app was downloaded.", (In reply to Stefan Arentz :st3fan from ', ) ', We only have one core binary on the Play Store too. We allow Distributions via pre-installs (might not be applicable to iOS) and over-the-air-download of configuration files, which might be possible. We're not ready to focus on making Distributions work right now, I just wanted is to be aware that they could happen.", Comment on ', ', Pull request LGTM' 
id=1146384	 'Created ', search-suggestions.png This is the opt-in UI. Same as Android.', The feedback seems to be form a period when the UI was only in Settings. Marking WFM now.' 
id=1210059	 'Roland, someone mentioned we have a SUMO article that we can link to. Does this need any changes for iOS?', hi stephan: great question, my guess is we will need a separate article for private browsing for iOS since it would be too hard to do conditional markup for android and ios (and we don\'t yet have conditional markup i.e. "showfor" for ios, that will come in 2016 i think) joni: am i right? if so please create a stub article that stephan et al can link to this week please. (needinfo-ing our fantastic content editor joni savage who writes all english articles for sumo for firefox desktop, ios, android and Firefox os)', How do we want this to look? Darker gray, centered below the empty private tabs tray text?', Created ', Screen Shot 2015-10-02 at 2.53.48 PM.png Same text color as the selected text highlight on the URL bar in private mode (rgb 120/120/165), 15pt system font medium.', Hi, Holly also asked for a private browsing article for iOS, so we've set up a placeholder. Here's the in-product link you can use: ", Just replace the %Version%/%OS%/%Locale% tuple. It will automatically redirect to the SUMO page.', Does this URL look right for US/English locale? Just want to make sure the formats line up. ', Created ', ', ', Comment on ', ', ', Nice! Can we include a down state so we're not tracking these down later (I thought iOS had built in ones for buttons?)... basically a slightly transparent version of the text. + with that nit.", (In reply to Stephan Leroux :sleroux from ', ) ', Hi Stephan, it\'s close. We use "en-us" for English (US) locale.', Thanks! I've added a follow up commit to use the language identifier instead of the locale one: ", Merged' 
id=1277521	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1247624	 'Created ', ', Pull request', Created ', ', Pull request I needed to recreate the l10nsnapshottests and marketingsnapshot tests schemes to get them running.' 
id=1168537	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', ', PR: ', When exporting strings files `(xliff-to-strings.py)`, use the `trans-unit id ` as the string key. Right now we use `trans-unit.source` but that is not correct.', Comment on ', ', PR: ', This definitely solves the issue on the build side. Run script/import-locales.sh, tested with XCode Simulator in Italian and both dialogs from ', are fixed. I kind of remember testing in XCode, importing my localization from XCode (without running scripts) and running the simulator, and that the string was untranslated there too. But I tried again tonight (with quite a lot of build failures, thanks XCode) and that seems to work just fine, so maybe my memory is failing me.', I see that the PR is merged, and both dialogs work for me in build 18 (testflight). I guess we can mark this as FIXED:' 
id=1257955	 'Created ', ', PR: ', Simplifying test11LocationDialog. The test framework already correctly dismisses the (system) dialog. We don't need to do that." 
id=1162139	 "Can't seem to reproduce this on the latest aurora build #17.", Haven't seen this in a long time. Closing for now." 
id=1212475	 
id=1138103	 'Brian is refactoring this UI to match the new design. Just want him to be aware of this bug, and dupe/wontfix based on the new work.', Search engines are no longer displayed in the list, so hopefully this is fixed by ', .' 
id=1170847	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1237620	 'Created ', ', Pull request', Comment on ', ', Pull request ', :jhugman I've created a new branch/PR for this as the whole rebasing thing wasn't working at all.", Created ', ', Pull request (on behalf of :etoop) LGTM' 
id=1250242	 'Created ', ', Link to Github pull-request: ', *** ', has been marked as a duplicate of this bug. ***', master 52c20f6746843925f13dc34470c8f268de70f93f' 
id=1100596	 
id=1129631	 'Created ', ', Pull request Lets start reviewing this. Darrin said he's happy to iterate on it in product for a bit, so this is just a start. It adds thumbnails to the tray (using a custom cell view and screenshots grabbed dynamically as we need them), and an animated transition.", Comment on ', ', Pull request I put lots of cleanup/refactoring comments in the PR, so I'd prefer to see a follow-up commit (or responses to the comments) before giving r+.", Comment on ', ', Pull request Updated the PR. I made the options argument super specific. Makes me a little sick inside, but I want to get this landed so that we can iterate with UX. Also fixed the delay using a dispatch to the main thread.' 
id=1143156	 'Mocks for one state at: ', randerson: it's possible for the account to need some user action, namely: 1) need to verify your email; 2) need to enter your password again; 3) need to upgrade Firefox (very unlikely). See also ", , which did this for Android, and includes screen shots.', randerson: also, can I get the cloud assets?', *** This bug has been marked as a duplicate of ', ***', I marked this as a duplicate because I implemented this recently in ', - but now I see ', which also did that. That PR was not attached to this bug however :-(' 
id=1191879	 'heh, quick fix; will take if triaged!', This refreshes the Settings table view itself, which seems\u2026 not that useful.', Created ', ', PR', 63da9f8' 
id=1164190	 'Created ', ', PR: ', Comment on ', ', PR: ', Just one comment. I think the logic might be right just the naming is off', Comment on ', ', PR: ', Forgot to mark this as reviewed.' 
id=1228178	 'Created ', QQ-Broswer's-Navigator-Page.jpg", Created ', UC-Broswer's-Navigator-Page", Created ', Baidu-Broswer's-Navigator-Page", *** This bug has been marked as a duplicate of ', ***' 
id=1173392	 'fixed as part of ', Created ', ', PR: ', Same PR as ', Comment on ', ', PR: ', I'll take this because Emily is at WWDC" 
id=1241013	 'Created ', ', Pull request', Comment on ', ', Pull request Looks fine, but you will need to rebase this because it does not merge anymore. Please set the review flag again when it can be merged.', Merged' 
id=1186372	 'Created ', ', Pull request' 
id=1152179	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1112376	 'Created ', ', Pull request', It would be nice to get some tests for the utility classes you are adding here', Comment on ', ', Pull request Several questions/comments in the PR. Also, I think you said something about splitting this up more.', We have a disk cache now. I actually want to avoid a separate memory cache if we can for now...' 
id=1252664	 'Similar to 2.0 release, we need a new page with content relevant for 3.0 release.', Here's the URL you can use in-product: \t", The content is being worked on now. Leaving the "NI" for myself as a reminder.', Here's a draft: ", This page is live now: ' 
id=1131914	 'Created ', ', Pull request An incremental cleanup patch that fixes a number of things, including: * Using iOS-style naming conventions for delegates, which means using the class name as the method name. This makes code completion easier and helps to avoid namespace collisions. * Moving the various TabBar ViewController panels into a single Home directory, and renaming them from *ViewController to *Panel. Also renamed TabBarViewController to HomePanelViewController to make its purpose as the "master" pager more clear. * Other miscellaneous variable renamings and whitespace cleanup.', Comment on ', ', Pull request I think these are all good changes. One comment added: "If we really want to follow the UIKit conventions then the first argument should also be a reference to the object calling the delegate. I know that does not always make sense in cases where there is just one instance alive, but .. that is what UIKit does. (It does actually help with state management. Specially when presenting viewcontrollers, it means that you don\'t have to keep a reference to the viewcontroller around. You can just use the reference that you get in your delegates.)"' 
id=1194499	 "I suspect this is getting a 404 response in either upload or download of a client record, and the body isn't JSON.", What's happening here is we're getting a JSON parse error, which overrides the 404 handler, so we don't log that.", This breaks command sending to other clients, and also tab sync (which depends on clients).', Created ', ', Pull req.', Comment on ', ', Pull req. Code looks good - just some q's", Half way there: 2015-08-13 18:35:04.809 Debug ClientsSynchronizer.swift:239 maybeUploadOurRecord(_:ifUnmodifiedSince:toServer:): Should we upload our client record? Caller = false, expired = false. 2015-08-13 18:35:04.811 Info SQLiteRemoteClientsAndTabs.swift:335 getCommands(): Found 1 client sync commands in the DB. 2015-08-13 18:35:04.813 Debug ClientsSynchronizer.swift:193 syncClientCommands(_:commands:clientsAndTabs:withServer:): Fetching current client record for client Tb40VvFMTUfh. 2015-08-13 18:35:04.874 Debug StorageClient.swift:326 errorWrap(_:handler:): Status code: 404 2015-08-13 18:35:04.875 Warning ClientsSynchronizer.swift:211 syncClientCommands(_:commands:clientsAndTabs:withServer:): Failed to fetch record with GUID Tb40VvFMTUfh. 2015-08-13 18:35:04.875 Error ClientsSynchronizer.swift:226 syncClientCommands(_:commands:clientsAndTabs:withServer:): Client Tb40VvFMTUfh commands upload failed: No remote client for GUID Now to figure out why the NotFound code block didn't run.", I pushed 3de233f as a follow-up: I changed my mind on whether to throw away or keep trying on 404.' 
id=1145402	 'Still able to repro on build 6', *** ', has been marked as a duplicate of this bug. ***', Thanks for the helpful report/video!', Created ', ', Pull request This was kind of a pain to debug since the STR seem to work only when the app is not attached to Xcode. I noticed the URL is nil when this happens, so hopefully that's a good enough test to trigger that reload. With this fix plus ", , the user shouldn't see gray WebViews anymore. They could still cause us trouble with session restore, though, if there are zombified tabs when we try to serialize the app state (since the URLs will be nil).", Comment on ', ', Pull request I don't think this is ideal and I think we need to better understand what is happening. But if this is a good workaround until we do then please include it.", (In reply to Stefan Arentz :st3fan from ', ) ', What do you mean? What don't we understand/what's not ideal?" 
id=1156894	 "I think we'd probably want to make this like Remote Tabs: pull-to-refresh the Account state and force a sync.", Created ', ', Link to Github pull-request: ', st3fan: flagging you since this is a delicate interaction with the view controller lifecycle and refresh control. The intention is to advance the Firefox Account state when opening the settings, and to allow you to pull-to-refresh the Account state. (We'll make that do a full sync eventually.)", Comment on ', ', Link to Github pull-request: ', This looks good to me.' 
id=1178017	 'Works when restarting the app. May be related to the local web server restarting and changing port?', Do we spew out any logging for such cases?', Can't reproduce this. This was most likely due to a bad network connection as this was filed from the bus to Whistler. When we know a more specific cause for this behaviour, please open a new bug." 
id=1275017	 'Fixed in 5.0 *** This bug has been marked as a duplicate of ', ***' 
id=1245086	 'This only happens if the URL you open from 3D touch/Spotlight was the selected tab before opening the tabs tray.', Created ', ', Pull request This can be tested through spotlight if you haven't got 3DT as both use the same code.", Comment on ', ', Pull request LGTM. Tested it out using Spotlight.' 
id=1124310	 'Created ', ', Pull request No idea why this happens only on the iPhone 6 Plus. I assume this is some iOS bug.', Comment on ', ', Pull request Sorry I thought I +d this earlier.', I merged the PR.', This crash is back. Looks like the same kind of issue: 2015-02-13 16:24:11.229 Client 16496:17854846 *** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: nan nan ' \t0 CoreFoundation 0x000000010a06af35 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x00000001098f5bb7 objc_exception_throw + 45 \t2 CoreFoundation 0x000000010a06ae6d + NSException raise:format: + 205 \t3 QuartzCore 0x000000010e5014e6 _ZN2CA5Layer12set_positionERKNS_4Vec2IdEEb + 152 \t4 QuartzCore 0x000000010e501655 - CALayer setPosition: + 43 \t5 QuartzCore 0x000000010e501c4f - CALayer setFrame: + 709 \t6 UIKit 0x000000010a8f4541 - UIView(Geometry) setFrame: + 322 \t7 UIKit 0x000000010ac7c152 - UISelectionGrabberDot setFrame: + 122 \t8 UIKit 0x000000010ac7d9a9 - UISelectionGrabber updateDot + 3219 \t9 UIKit 0x000000010a8fa086 - UIView(Hierarchy) _postMovedFromSuperview: + 437 \t10 UIKit 0x000000010a903f4b - UIView(Internal) _addSubview:positioned:relativeTo: + 1604 \t11 UIKit 0x000000010ac7826b - UITextRangeView updateGrabbers + 3197 \t12 UIKit 0x000000010ac71e34 - UITextSelectionView updateSelectionRects + 1182 \t13 UIKit 0x000000010afd366b __47- UITextInputController _setSelectedTextRange: _block_invoke251 + 200 \t14 UIKit 0x000000010afd388f __52- UITextInputController _coordinateSelectionChange: _block_invoke + 76 \t15 UIFoundation 0x000000010d51206b - NSTextStorage coordinateReading: + 42 \t16 UIKit 0x000000010afd3838 - UITextInputController _coordinateSelectionChange: + 108 \t17 UIKit 0x000000010afd335a - UITextInputController _setSelectedTextRange: + 521 \t18 UIKit 0x000000010afd7e49 - UITextInputController setSelectedTextRange: + 37 \t19 UIKit 0x000000010ad8b32c - UITextSelection commit + 268 \t20 UIKit 0x000000010ac4bbb4 - UITextInteractionAssistant(UITextInteractionAssistant_Internal) selectAll: + 113 \t21 Client 0x0000000108e3ab70 _TFC6Client10URLBarView24textFieldDidBeginEditingfS0_FCSo11UITextFieldT_ + 96 \t22 Client 0x0000000108e3abda _TToFC6Client10URLBarView24textFieldDidBeginEditingfS0_FCSo11UITextFieldT_ + 58 \t23 UIKit 0x000000010afc1227 - UITextField _becomeFirstResponder + 481 \t24 UIKit 0x000000010aa0428d - UIResponder becomeFirstResponder + 324 \t25 UIKit 0x000000010a8f9e03 - UIView(Hierarchy) becomeFirstResponder + 99 \t26 UIKit 0x000000010afc0ad7 - UITextField becomeFirstResponder + 51 \t27 Client 0x0000000108e39969 _TFC6Client10URLBarView33browserLocationViewDidTapLocationfS0_FCS_19BrowserLocationViewT_ + 4697 \t28 Client 0x0000000108e3bfc1 _TTWC6Client10URLBarViewS_27BrowserLocationViewDelegateFS1_33browserLocationViewDidTapLocationUS1___fRQPS1_FCS_19BrowserLocationViewT_ + 81 \t29 Client 0x0000000108e6d88a _TFC6Client19BrowserLocationView19SELtapLocationLabelfS0_FCSo22UITapGestureRecognizerT_ + 266 \t30 Client 0x0000000108e6d90a _TToFC6Client19BrowserLocationView19SELtapLocationLabelfS0_FCSo22UITapGestureRecognizerT_ + 58 \t31 UIKit 0x000000010ac402e6 _UIGestureRecognizerSendActions + 262 \t32 UIKit 0x000000010ac3ef89 - UIGestureRecognizer _updateGestureWithEvent:buttonEvent: + 532 \t33 UIKit 0x000000010ac43ba6 ___UIGestureRecognizerUpdate_block_invoke662 + 51 \t34 UIKit 0x000000010ac43aa2 _UIGestureRecognizerRemoveObjectsFromArrayAndApplyBlocks + 254 \t35 UIKit 0x000000010ac39b1d _UIGestureRecognizerUpdate + 2796 \t36 UIKit 0x000000010a8d3ff6 - UIWindow _sendGesturesForEvent: + 1041 \t37 UIKit 0x000000010a8d4c23 - UIWindow sendEvent: + 667 \t38 UIKit 0x000000010a8a19b1 - UIApplication sendEvent: + 246 \t39 UIKit 0x000000010a8aea7d _UIApplicationHandleEventFromQueueEvent + 17370 \t40 UIKit 0x000000010a88a103 _UIApplicationHandleEventQueue + 1961 \t41 CoreFoundation 0x0000000109fa0551 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17 \t42 CoreFoundation 0x0000000109f9641d __CFRunLoopDoSources0 + 269 \t43 CoreFoundation 0x0000000109f95a54 __CFRunLoopRun + 868 \t44 CoreFoundation 0x0000000109f95486 CFRunLoopRunSpecific + 470 \t45 GraphicsServices 0x000000010e0409f0 GSEventRunModal + 161 \t46 UIKit 0x000000010a88d420 UIApplicationMain + 1282 \t47 Client 0x0000000108e96a1e top_level_code + 78 \t48 Client 0x0000000108e96a5a main + 42 \t49 libdyld.dylib 0x000000010c880145 start + 1 \t50 ??? 0x0000000000000001 0x0 + 1", Fixed by ', .' 
id=1289687	 'Created ', ', pull request Use pundycode to represent Unicode with the limited character subset of ASCII supported by the Domain Name System.', Comment on ', ', pull request I did a drive-by, but here's a flag for the real thing.", Comment on ', ', pull request Looking good! Left a few comments in the PR.', Comment on ', ', pull request I have changed this code. Please help me review it. If you have any questions, please contact me. Thank you.', Comment on ', ', pull request Thanks, this looks great! One last comment in the PR to avoid a crash, then we can go ahead and land this.', (In reply to Brian Nicholson (:bnicholson) from ', ) I have changed the code according to you last comment in the PR. If there is no problem, please help me land this pull request to master before v6.0 released. Thank you.', Looks good! Thank you for the pull request. ' 
id=1198718	 'Done ', *** This bug has been marked as a duplicate of ', ***' 
id=1266443	 'Created ', ios-tour-slide-update.zip Let's update two slides, since we're also moving the send icon.", Created ', ', Updated tour slides' 
id=1135885	 'is this also done?', Isn't there already a transition?", The BrowserLocationView doesn't actually transition. i.e. the lock/readingmode/etc. icons just disappear. The textfield also doesn't dynamically resize itself (it just jumps to the new size). Now that there's only one textbox here instead of two that we're switching between, this shouldn't be too hard.", Was just about to file a regression and found this bug. Nom-ing it because the textfield width actually used to animate with the same duration and easing as the rest of the layout changes \u2013 this should still happen.', Created ', ', PR', Comment on ', ', PR I'd believe that" 
id=1161327	 'Created ', ', Pull Request' 
id=1147071	 'One option here is to use the same SQLite.swift project that we use for Reading List. It has support for SQLCipher, which means that we could generate a random encryption key and store it in the Keychain. And then use that key to unlock/encrypt/decrypt the passwords database.', We could just do the same manually as well, or just move the sqlite3.dylib from the project into our own and use it with SwiftData. I don't want two sqlite's touching browser.db at the same time (and I'm kinda annoyed that all the Reader stuff is in its own DB making it harder to do any joins with other tables).", Actually, looking at how to do AES256 encryption (just a few lines with an NSData object), I think I'd prefer to keep this really localized. i.e. just encrypt the usernames and passwords. Being able to open the database locally and look through it/run queries on it has proven super useful. Can we do that (easily) sqlitecipher?", Created ', ', PR ', This does the encryption in the table layer. Adds a String extension to do it.', I used a key randomly generated using SecRandomCopyBytes and stored it in keychain. Encryption is being done with CCCrypt. I realize as I write this that I use the words AES256 in a few places, but this is AES128. Happy to hear if I'm using them wrong :)", I think if we actually use AES128 then we should say so in the code. Otherwise it will be a hot item in case security researchers look at this code. (Haha they think they use AES 256 but they are not) The kCCOptionECBMode and empty IV worries me. I think we need to loop in someone who can say something about this. My gut feeling says that we need to use AES in CBC or CTR mode. Otherwise it becomes really easy to brute force passwords with a dictionary.', I think it is a better idea to use the same encrypted record format that Sync does. This is documented at ', It uses AES256 in CBC mode. With a random IV. And a HMAC to prove the authenticity of the record. I think that is a pretty common scheme to do per-record encryption.', We should definitely reuse an existing crypto scheme, even if it involves 'userspace' crypto. Everything Stefan mentions in ", makes sense. In theory we have less need of HMAC locally, but there's no harm in doing so. Reading ", would be well worth your time, just for context -- Sync's record format isn't quite perfect.", If we were to use SQLCipher, I would note that it should get some very careful review, just as if we were landing it ourselves. Another thing to think about: whatever storage mechanism we use needs to be designed for use by Sync. That means supporting three-way merges (', ), and being rebased on top of ', . Some additional context: ', .', I see no particular reason to follow Sync's lead. It's not a bad way to go, but it's not compelling to me. I'd prefer to use the Keychain for this type of sensitive storage. We could have our PWs schema not actually store the PW, but merely some identifier to it in the keychain. (We're doing this for the Firefox Account state storage.) I think we could manage the metadata updates reasonably well. I'm not certain we could support searching by usernames or sites all that well, but I don't know what /exactly/ is required here.", I updated this to be closer to the sync spec. i.e. we use a random IV, CBC mode, and do some hashing/checks. Also only encrypts the password now (since we can't know/guess what the username is anymore for deletes). We could not use a random IV, and instead use something like the username + hostname + secret as a key if we wanted to still store that (and still use a random IV for the passwords). That would keep it from being obvious which accounts had the same username which might be nice? The key generation still doesn't match syncs. 1.) We don't have a username to use. 2.) We don't SHA256 the encryption key or the HMAC key. Maybe its worth doing that? Since our password is random, I couldn't see a strong reason for it (but I certainly haven't finished reading everything listed above). The hashing of the encoded data is in here, but I think its probably pretty useless in this context as well (it wasn't much to add it). I don't hate the keychain idea either (I like it). I just want this to move forward. If you think its more likely to land that way, speak up.", (In reply to Wesley Johnston (:wesj) from ', ) ', Sync's record-level crypto uses random keys; no username needed at that level. Same is true here, I expect. Random keys, stored in the keychain, used with an IV and HMAC. I like the idea of storage in the Keychain for simplicity, but it adds a kind of distributed transaction: when you delete a password, it needs to be deleted in two places; when you do a lookup, it can fail at either step, and we'll be doing two queries every time we need password content. Can the user delete stuff from the iOS keychain from underneath us, e.g., by syncing it to iCloud and having changes sync back down?", Why can\'t we encrypt the whole thing including usernames and hostnames? I bet a lookup on a fully encrypted database would still take milliseconds. What does the "We could not use a random IV, and instead use something like the username + hostname + secret as a key if we wanted to still store that (and still use a random IV for the passwords)." bit mean?', Long term, I\'d like to be able to delete a username+hostname combination. "Remove this login for this site". If they\'re encrypted with individual random keys, that gets weighty. i.e. We\'d have to query for the entire DB, then search through it for entries that looked like what we wanted, and then delete on those (DELETE where hostname = encryptedHostname AND username = encryptedUsername). If they\'re encrypted with something non-random like a hostname+username+secrectKey though, then this works. I\'ll put that together and encrypt those fields.', (In reply to Wesley Johnston (:wesj) from ', ) ', This is the perfect use-case for SQLCipher. You get a fully encrypted SQLite database that you can query like any other database. We don't have to keep certain things public. Or jump though hoops to get an index. It would just work. And still be fully encrypted. I'm still strongly in favor us using SQLCipher instead of implementing our own and making sacrifices like keeping username+hostname clear text.", We don't have to make the sacrifice, like I said in the comment above.", (In reply to Stefan Arentz :st3fan from ', ) ', As rnewman pointed out, SQLCipher is a non-trivial implementation of non-trivial crypto. We'd need to familiarize ourselves with, and potentially audit, SQLCipher. Can you provide this justification of SQLCipher, or another compelling justification?", Updated again. Now encrypts usernames and hostnames. Removed no-encryption options. And made things handle failure much better. Encrypting hostnames didn't go as well as I wanted. We query the database with ONLY the hostname available to us. To make that work, for now I'm just encrypting them with their own name as an IV. That means every entry with the same hostname will have the same encryption. That makes me start coming around on SqlCypher... I did use a separate (runtime-randomly-generated) secret for each type of data here because I worry the overlapping data would make it easier to find one.", (In reply to Nick Alexander :nalexander from ', ) ', Their design document looks pretty decent ', If we have doubts about this then we can let one of our in-house crypto people look at it. There is also this: ', Full presentation here: ', In which a SQLCipher-powered password manager for iOS came out as one of the strongest. All the others are like ours: best effort, home made crypto. Crypto is really hard to do right. I just don't know if we did the right thing. Even with the latest changes I have questions about our implementation. Number one rule for crypto is: do not reinvent. Use something existing and proven. (The presentation also has an interesting note about the Apple Keychain storing SHA-1 hashes of data items for fast lookups. Not sure if this is still the case for iOS8 but somethign we should think about since it would allow easy brute forcing of plaintext values stored in the keychain.)", (In reply to Stefan Arentz :st3fan from ', ) ', Reading this suggests we would replace our existing SQLite implementation with SQLCipher. That would mean we'd be using a non-standard SQLite implementation throughout the App. I am assuming shipping two versions of SQLite is even worse than shipping one non-standard version. ", Good idea. ', In general, I agree. ', I suggest we do the following: * investigate whether SQLCipher runs afoul of any App store restrictions; * request an opinion from security team. I have no particular skin in this game; I'm happy to run SQLCipher if sec-team concurs. st3fan, wesj, rnewman: reasonable?", (In reply to Nick Alexander :nalexander from ', ) ', Plus sides: we can encrypt everything, not just passwords; no maintenance of storage crypto code; in theory we can run a newer sqlite than Apple provides (and with different options: e.g., adding free-text search if it's missing). Downsides: sqlite fork (with commercial support!); larger app size. This worries me (from <", >): --- All applications that make use of cryptography, including those that use SQLCipher or iOS internal libraries like CommonCrypto and Keychain, must provide documentation to Apple that demonstrates review by the Department of Commerce (DOC) Bureau of Industry and Security (BIS) and classification of the application a mass market encryption item. ---', My main concern here is that these databases will become essentially impossible to debug. Even if we wanted to look at one, getting the key for it would be (and should be) prohibitively difficult. That said, I should have put this data in a separate signons file anyway, and the number of times we ask someone to send us our signons.db is rare.', Yeah, that worries me too -- particularly because getting the syncing part right sometimes involves staring confusedly at a sqlite3 console! Presumably sqlcipher yields standard sqlite DBs if created without a key? If so, perhaps we can figure out an arrangement of on/off that makes sense. Agreed on using a separate DB file.', (In reply to Wesley Johnston (:wesj) from ', ) ', A quibble: Sync calls the engine passwords. Our password research suggests users think of them as "logins". Whatever they are, nobody refers to them as signons, so we shouldn\'t start.', Desktop calls the db 'signons.sqlite'. Variety is the spice of life. (I agree, btw.)", (In reply to Richard Newman :rnewman from ', ) ', Truly.', Heh. I just meant, they probably shouldn't be in the same db as history, visits, and favicons like they are now. We don't join against them, and we could at least then perhaps encrypting everything... sometimes. But I know some people who would like everything encrypted too! I'll look and see how the cipher stuff behaves if there's no key.", (In reply to Richard Newman :rnewman from ', ) ', Legal already signed off on our app and the crypto it uses even though we use custom crypto code. We should ask them to be sure but I highly doubt this is an issue. I think we are except from all this because we are an open source app and we already did the paper work.', (In reply to Nick Alexander :nalexander from ', ) ', We already do via ReadingList, which has its own SQLite.framework from the ', project. That project also has SQLCipher support. (Which is not included in our app now because RL does not need it)', I like the idea of encrypting everything by default. Wish we did that on Desktop too. We have to find out what that means wrt backups though. We need to make sure the keychain item with the master key travels to both iCloud and local iTunes backups. I know that the latter only happens if you enable encrypted backups.', Created ', ', PR ', This encrypts BrowserDB. I was suprised to see the SQlite.swift actually just uses the sdk sqlite. Its instructions read like it can magically find the sqlcipher one if you have it, but I haven\'t seen how that would work. Right now I assume its still using the SDK sql. I haked the project files quite a bit to get this working. Need to clean them back up. I also had to fix up our error handling quite a bit in there to handle the upgrade or downgrade case. In both cases this just tosses the old db and creates the new one. I\'m looking into at least forcing an upgrade from no-password to the new one (sqlite3_rekey should do that for us...) On that same line, we already had potentials to fail opening/creating the db and now there are more. I looked into making the BrowserDB initializer fallible (I think I did make the SwiftData one fallible here). Doing so becomes... hairy, but not impossible (thanks Swift!) I ran through it for awhile and then heard bnicholson in my head saying "Why/How would we let you continue if things were broken this badly?". You guys have feelings on how long we should limp along with no history/bookmarks/etc? We could easily let you browse in the hope that next time you restarted we could somehow fix the error. Regardless, maybe its best as a follow up.', Comment on ', ', PR ', Updated with some tests as well. This supports upgrades as well. I spent too long chasing some problems (open connections?) in the tests. Punting a bit for now.', (In reply to Wesley Johnston (:wesj) from ', ) ', I'll take a look too. We may want to include a pre-build SQLCipher library in our project instead of building it as part of our application. Because I had problems with it earlier, I actually forked SQLite.swift and just disabled SQLCipher for now. ", I think at this pre-v1.0 stage it is fine to just delete the file and not worry about a migration that we would only do now during development. My bigger worry is how do we make sure old unencrypted data is not traveling to iCloud backups.', I left a bunch of questions on the PR. The implementation looks pretty sane (modulo the optional db), but there are some hairy lifecycle questions that need to be answered before I'd want this to apply to browser.db. Depending on the answers, this might be OK for passwords.db alone, and we'd simply accept e.g., the inability to sync passwords in the background.", Comment on ', ', PR ', Updated. I actually had some code that wasn't appearing in here before either. This supports encrypting/decrypting an existing database provided you can provide the previous and the new keys. I also updated the Keychain code. There's a PR for it at: ", Apple just released ', which has a bunch of hints about keychain, icloud and backups. We should probably all read the relevant sections. I'm trying to catch up on how all of this works.", I talked to Stefan a bit right now about this. I got a bit distracted last week with iCloud backups. AFAIK from the reading the above, iCloud backs up your keychain using a key based on your device UID, meaning it can\'t automatically restore the keychain to any device except the one that created it. You can mark certain values as sync-able... but I think that\'s outside scope for here. For this bug we\'ll focus on just making this locally encrypted/decryptable. If you lose you keychain somehow (or if you back things up, but don\'t encrypt the backup so that your keychain isn\'t backed up), we\'re just going to toss this data next run. If you want a "backup" of passwords, FirefoxAccounts is the way to go. I\'ve got this using its own separate database now. In accordance with our "Don\'t bother with updates yet" plan, I don\'t clean up the old db. Just make a new one.AFAIK from my reading, we\'re ready.', Wes, what is the status of ', .. is that made obsolete with the sqlcipher one?', I thought I replied to this, but yeah, its basically obsolete. I wanted to keep it around just in case.', The XCode server keeps trying to link x86 and x64 here and failing. I can't find any reason except that some of our Frameworks aren't being clobbered between builds maybe? I've tried making sqlcipher build a fat binary during debug builds, but since it depends on a few other projects that also fails. We'd have to fork them all and make them all fat binaries for that to work. st3fan said he'd look at the server for me.", I don't think this is a server issue. I can't get this to compile locally either. What I did: 1263 hub clone ", :mozilla/firefox-ios.git 1264 cd firefox-ios 1265 hub checkout ', 1266 ./checkout.sh 1267 xcnuke 1268 open Client.xcodeproj The first thing I see when I open the project is this: ', Not sure why this is happening. Client is most certainly not a OS X app. When I change that to for example the simulator, I get build errors like: Utils/KeychainCache.swift:8:19: error: module 'XCGLogger' has no member named 'defaultInstance' Utils/Extensions/HexExtensions.swift:10:16: error: use of unresolved identifier 'base16DecodeToData' I don't really understand why this is happening.", Ha! A device build has no errors. Do you get the same results locally on a simulator build?', Like I said above, the code that's up there right now was an attempt to build sqlcipher as a fat binary. I saw some problems with other libraries when I did that. Reverted now. Try again? It builds fine for me on the simulator or device.", Yup. Builds fine on simulator. Investigating now why this fails on the server.', Landed a rebase of this pull request with a few build changes to make the buildbots happy: ', Comment on ', ', PR ', Removing myself from review. Great job landing this.' 
id=1160778	 'In latest master, this issue no longer happens, guess some commit (perhaps unintentionally) fixed this.' 
id=1158523	 'Created ', ', Pull Request' 
id=1203619	 'Created ', ', ', Merged' 
id=1151157	 "I doubt we'll try to get this in v1", I would like to work on this.', Created ', ', PR: ', Created ', ', Pull request', We'll take it, but not tracking.", Comment on ', ', Pull request There's something strange with the PR here (i.e. its got a ton of commits from master in it?) Maybe you just need to rebase back onto master? Other than that and a few tiny nits, looks good!", I fixed the nits and rebased it. Could you please review it again? (In reply to Wesley Johnston (:wesj) from ', ) ', New PR @ ', Rebased and merged into master ' 
id=1114294	 'Created ', ', Pull request' 
id=1120831	 'Created ', ', Pull request', There is a regression in this since this was fixed - this no longer works for going back in history when browsing a webpage.', (In reply to Boris Du\u0161ek from ', ) ', Mind filing a new bug if not already?' 
id=1183166	 "Not sure if there's a public API. Related (?) solution (?) at ", Seen again on ios-feedback ', tracking? so we can get a quick technical investigation and consider aiming for a release.', So I think this is possible. Here\'s what we would need to do: 1. Build some native widget with a button that says "Open in iBooks" whenever the WKWebView is displaying a .PDF file. Currently Safari shows this as a toolbar that gets displayed at the top of a page showing a .PDF when the user taps on the screen. 2. When the user taps that button, we save a local copy of the PDF in our cache 3. Using the local file copy, launch iBooks using the itms-books:// url protocol Some details here: ', Not sure if this is v1.0 scope though', What other opening choices do we/should we have?', iOS provides a way for applications to register as a document handler by adding applications that can open files as part of the Open in context menu (', ). I think if we support open in iBooks natively and then use the open in context menu for other applications we don't need to bundle in which applications can open what.", So, the Save PDF in iBooks option comes up automatically when I select the share extensions from FxiOS on my iPhone, but the resulting PDF has only the URL and no content. Looks like we may have to save the pdf locally first to ensure we have the content before sharing...', Created ', ', Pull request Needs some design love. Made something up as I went along just to get it working', Comment on ', ', Pull request So far I can see the "Open in\u2026" but nothing happens when I tap it. ', Basic styling. ', :tecgirl - What device are you on, running which version of iOS?', (In reply to Emily Toop (:fluffyemily) from ', ) ', 6, 9.1', Comment on ', ', Pull request Looks pretty good overall -- just lots of cleanup comments (many of which you ended up fixing in following commits). Since the follow-up commits are mostly incremental/fixup commits that that revert things in previous commits, I suggest folding them all together to make this easier to review/blame.', Comment on ', ', Pull request Emily, I took another look at this today, same device (6, 9.1) \u2014 but this time hosted the .pdf myself rather than trying to view it on dropbox or cl.ly. The error I received when trying from dropbox or cl.ly: ', But the "Open in\u2026" button still shows. If I open it from my server, I am able to access the "Copy to" share widget. I am able to "Copy to iBooks" successfully. Yay! I\'ll + this and open a new bug to cover those instances where the .pdf is embedded, rendering the button useless.', Comment on ', ', Pull request Nice, looks good! While testing this, I found some nasty rendering bugs when switching between multiple tabs with PDFs open, but looks like that's a WKWebView bug since it's reproducible in Safari.", Came across this: ' 
id=1208216	 'Got this fixed up in the original PR for ', , so should be working now.' 
id=1267016	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1260449	 'UI of Home button in Menu: ', Design document: ', Sevaan: have you an assets for this (I think it's the home button for the menu, and the version for the tool bar)?", Switching the NI to Robin who has the asset.', Created ', menuHome.zip', Created ', ', Pull request Work in progress PR.', Robin! When you have a minute, please may I have a private browsing version of the Home button? Also, should I be re-using these menu icons as toolbar icons too?', Created ', Home-PBM-Engaged.zip Home PBM and engaged versions', Created ', ', Link to Github pull-request: ', Anything left for this bug or can it be resolved?', All sub-bugs resolved, squashed and merged in to master.' 
id=1144681	 'This is resolved with included domain defaults with UX differences.' 
id=1178072	 'Created ', ', Pull Request', Comment on ', ', Pull Request Interesting, looks good! Do other browsers do this?', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Well, Safari does not do highlighting in url bar, it does not even show anything apart from the domain name. Chrome does change the highlighting for things outside the domain, but does not translate it into pitch change. We are already doing similar thing for read items in Reading List table, where gray for read items translated into lower pitch. I am not aware of an example of any other app doing this. This might well be Firefox for iOS pushing the envelope (raising the bar for iOS accessible apps).', :bnicholson I guess this is ready for merge.', Nice, Firefox first! :D ' 
id=1212166	 'Created ', ', Pull request', Comment on ', ', Pull request ' 
id=1164067	 'Our Chromium friends filed this one ', I don't think we are blocking on that missing feature. We can probably do a decent enough impl in JavaScript until there is native support.", Requested in ios-feedback', Karen says 2.0.', I'll take a look to see if I can throw together a quick prototype.", Created ', ', Link to Github pull-request: ', Early Find In Page prototype using window.find. It mostly works OK, though there are weird issues whenever the page contains absolutely positioned elements that match. Using this on Google, for example, causes the search input field to gain focus, which shows a search suggestions popup, and then there's some wonky behavior with random rects that aren't near the search term match. A few notes: * The find highlight must be translucent since we overlay the highlight onto the page. * We can make case sensitive searches if wanted. * We can limit searches to whole word matches if wanted.", I think the base implementation is complete enough, so onto UX!', *** ', has been marked as a duplicate of this bug. ***', Bumping to 2.0 since this needs some UX love.', Please reset the 2.0+ flag.', Bulk changes to Aha cards. Filter on 'mpopova-aha-20151008' to find all matching messages.", To enable, tap the menu icon on the bottom nav bar and choose Find in Page or long-press any text and an option for Find in Page will be included in the context menu. The search input loads with the keyboard enabled and a custom-color cursor blinking (230/96/0/100). The text entered is default typeface, regular weight, 18pt, 230/96/0/100. The search input bar includes a counter and previous/next navigation carets. The counter text is regular weight, 15pt, 216/216/216/100 when inactive, 155/155/155/100 when active. If the user taps the webview, the keyboard will close but the search input bar will remain. An 'X' button allows dismissal. Once a character has been entered, the text search has begun. Case does not matter. The first search result will highlight in 230/96/0/66 (if possible, behind the text), with subsequent results (if any) will highlight in 255/203/0/66 (if possible, behind the text). Tapping the previous/next carets will advance to the previous/next result if available.", Created ', Find-in-Page.zip', Created ', Find-in-Page-Assets.zip', For those who want to see the screens but hate downloading zips: ', Created ', ', Link to Github pull-request: ', This PR replaces the bookmark button with a menu (which currently has just Find in Page and Bookmark). I think this is about as far as I can go for now, so back to UX for the next iteration. Robin, can you take a look? Note that this PR only adds the toolbar -- I'll probably do the selection menu as a follow-up. One thing I noticed is that when there are multiple results and I try clicking Next, I end up tapping the page/clicking random links because the keyboard slides down (and the Find in Page bar goes with it). Not sure if/how we want to handle that...Chrome avoids that issue by putting the bar at the top; Safari avoids it by keeping the keyboard on the screen. When you get a chance to upload the assets, I'll go ahead and include them in the PR. I think that's just the menu button image, and the previous/next/close buttons for the Find in Page bar.", :bnicholson, it's looking good! 2 nits:", 1) there's a slight delay in the keyboard catching up to the search bar when it animates up. 2) persist the search between tabs, the user has the option to X out.", (In reply to Robin Andersen :tecgirl from ', ) ', This is tricky since we\'re using the keyboard\'s animation curve, but the start locations of the find bar and keyboard are different (the keyboard starts at the bottom of the screen, but the find bar is above the toolbar). They both animate together, so the keyboard has to "catch up" to the find bar since it starts below it. A few workarounds we could try: 1) Replace the bottom toolbar with the Find in Page bar so that the bar will always be at the very bottom of the screen when the keyboard isn\'t visible. This is what Safari does. 2) Don\'t show the Find in Page bar until after the keyboard animation has finished. This wouldn\'t fix the janky animation when the keyboard goes back down (after hitting Previous/Next), so we might also want to consider keeping the keyboard on the screen if we did this. Keeping the keyboard on the screen would also fix the issue I mentioned in ', . 3) Put the Find in Page bar at the top so that it doesn't need to animate with the keyboard. This is what Chrome does. This would also fix the issue I mentioned in ", . ', I'll probably end up doing this in a follow-up since this will require extra work. We'll have to manually re-show the bar after the tab change animation happens, and we'll also have to do a find in the newly selected tab to update the highlights/highlight count. Might be a bit janky since the find will also cause the tab to scroll to the first match. A couple more questions (both can be addressed in a follow-up, just thinking out loud): * What do we want the overflow menu to look like? I remember seeing a few different designs in your mockups. The PR is currently just using a standard UIAlertController. * Does this mean we'll lose the jumpy bookmark star animation when we replace it with the menu button, or do we still want some effect somewhere?", (In reply to Brian Nicholson (:bnicholson) from ', ) ', We should keep the bottom navigation so the user can use the same query across multiple pages. ', I would rather see the little bit of jank than have it pop in at the end of the load, and still prefer dropping the keyboard when the input isn't engaged to allow more visible viewport. ", I think it's cleaner at the bottom and won't clash with site nav (as seen on IRC). ", Great. I'll file. ", With regards to the offset animation of the toolbar and keyboard, there might be a trick we can do to have it match. UITextFields have an inputAccessoryView property that allows you to add a custom toolbar on top of the keyboard when the text field is selected. I wonder if we can use the exact same toolbar we want to display on top of the keyboard as the inputAccessoryView for the text field. The illusion is that the toolbar animates up when the keyboard is shown but in reality the text field is just a trigger and the real input happens in a clone that is the accessory view. There some more documentation here about this: ', Comment on ', ', Link to Github pull-request: ', Giving r? to you two since it looks like yo re the only ones not on PTO :) Steph, I filed ", as a follow-up to ', to keep this PR as small as possible.', Comment on ', ', Link to Github pull-request: ', Code looks good - mostly just nits. I also left a couple of UX comments on the PR thread.', Merged with nits addressed: ' 
id=1155317	 'Forward-duping. Thanks, Aaron! *** This bug has been marked as a duplicate of ', ***' 
id=1319425	 'Simon, this should be good now. Can you please verify this in 6.0b5? (Not out yet when I write this)', The issue is no longer reproducible in 6.0b5.' 
id=1303845	 'Created ', Link to Github pull-request: ', Looks like the Account tests were failing on this URL being a problem and was causing us to never sync!', Comment on ', Link to Github pull-request: ', Yikes...we should probably dig into our code to see where else this is happening since this could be a difficult class of bugs to track down. This particular change looks good to me!', master ' 
id=1323745	 "Note: The diagram shows that the sync completion block occurs on the main thread which currently is not true. Even if we were to move this invocation to the main thread it wouldn't solve the issue.", So we actually already have code that checks to make sure that we only call shutdown if the application is in the foreground 1 . What appears to be happening is that we can run into the situation where the app becomes foregrounded then immediately after the upon block from the background sync is scheduled on the main thread on a cycle after reopen has already happened. Since we're enqueuing the shutdown on the main thread, we need to be mindful of it potentially being called after appDidForeground - which makes the foreground check invalid. 1 ", Created ', Link to Github pull-request: ', Comment on ', Link to Github pull-request: ', Makes sense to me.', master ', v6.x 19f760b828c1493ba8457abad5c17221d35f80aa' 
id=1317093	 'Sorry, I forgot which device this happened on! This happened on my iPhone 6S, which has been running Beta for ages.', This just happened again, this time on my iPad, seemingly while I was using it. I was just testing ', , and noticed that even pages I had *just* opened -- still had open! -- weren't matching in history. Everything's gone. IIRC the only significant thing I did was use Send Tab from within Firefox. Between this, ", , and ', , I don't think we can release v6.", Also of note: once the browser enters this state, browser visits aren't recorded, and history stays empty. And I just noticed history start appearing again, so it does indeed appear to be syncing back down.", I just got this to repro by simply hitting home then launching Firefox again. Literally: see my top sites; hit Home; hit Firefox; see the 5 default top sites. It's possible that a sync was happening in the background.", My guess is that ', or ', is flawed.', More thinking: - Do we run the backgrounding code when we launch the share extension from our own process? If so, are we racing our shutdown writes with the extension's startup open? If not, we can still get SQLITE_BUSY from racing writes! - When we resume, do we coordinate with a still-pending shutdown? The reopen should go into the same queue that's closing the DB, otherwise we can reopen a currently open DB that might at that moment be servicing a write\u2026", I can trivially reproduce part of this bug by delaying profile.shutdown in syncOnDidEnterBackground, exactly as if it synced on exit, then immediately relaunching the app. The queued shutdown happens after the app relaunches, closing the active database connection. Logs show something like: 2016-11-13 19:39:25.112 Debug Profile.swift:269 reopen() > Reopening profile. INFO GCDWebServer started on port 6571 and reachable at ', 2016-11-13 19:39:25.525 Debug BrowserViewController.swift:484 loadQueuedTabs() > Loading queued tabs in the background. 2016-11-13 19:39:25.526 Debug BrowserViewController.swift:498 dequeueQueuedTabs() > Queue. Count: 0. 2016-11-13 19:39:25.997 Debug Profile.swift:282 shutdown() > Shutting down profile. 2016-11-13 19:39:25.997 Debug SwiftData.swift:525 deinit > deinit: closing connection on thread <NSThread: 0x170261500>{number = 7, name = (null)}. 2016-11-13 19:39:25.998 Debug SwiftData.swift:592 closeCustomConnection(immediately:) > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/C68FF084-36F0-4473-817F-26E0D73AE3F1/profile.profile/browser.db on <NSThread: 0x170261500>{number = 7, name = (null)}. 2016-11-13 19:39:26.000 Debug SwiftData.swift:612 closeCustomConnection(immediately:) > Closed /private/var/mobile/Containers/Shared/AppGroup/C68FF084-36F0-4473-817F-26E0D73AE3F1/profile.profile/browser.db. 2016-11-13 19:39:28.916 Debug BrowserViewController.swift:473 viewDidLayoutSubviews() > BVC viewDidLayoutSubviews\u2026 2016-11-13 19:39:28.922 Debug BrowserViewController.swift:480 viewDidLayoutSubviews() > BVC done. 2016-11-13 19:39:28.924 Warning SwiftData.swift:88 getSharedConnection() > >>> Database is closed for /private/var/mobile/Containers/Shared/AppGroup/C68FF084-36F0-4473-817F-26E0D73AE3F1/profile.profile/browser.db 2016-11-13 19:39:28.926 Debug SQLiteBookmarksModel.swift:842 modelFactory > Using local+mirror bookmark factory. 2016-11-13 19:39:28.926 Debug SQLiteBookmarksModel.swift:120 modelForRoot() > Getting model for root. 2016-11-13 19:39:28.928 Warning SwiftData.swift:88 getSharedConnection() > >>> Database is closed for /private/var/mobile/Containers/Shared/AppGroup/C68FF084-36F0-4473-817F-26E0D73AE3F1/profile.profile/browser.db 2016-11-13 19:39:28.929 Error BookmarksPanel.swift:175 onModelFailure > Error: failed to get data: Optional(Couldn\'t get children: Error Domain=mozilla Code=0 "Non-open connection; can\'t execute query." UserInfo={NSLocalizedDescription=Non-open connection; can\'t execute query.}.) and the app behaves as if the DB is empty until you quit and reopen the app. We need a more considered state machine here, where the \'should be shut down\' and \'should be reopened\' states are a property of the DB, processed sequentially by a looper on the queue. Look at the above sequence. If instead of a plain query we instead had a call to createOrUpdate, it would fail and we\'d move the database out of the way. That might imply that we need to rethink that error handling, too.', We call createOrUpdate six times during startup, so there\'s lots of opportunity for error. On my iPhone 6S, there\'s 1150ms between application:willFinishLaunchingWithOptions: and the createOrUpdate for SQLiteRemoteClientsAndTabs. If you manage to background the app *any time* before all browser.db createOrUpdate calls occur, browser.db will be deleted. Try it: add self.shutdown() in the lazy clients getter, mimicking our on-background shutdown firing just before our on-startup setup flow. If you\'re super fast at hitting the home button, you can probably cause data corruption just by hitting Home real fast on a cold start. 21:20:54.828 Debug BrowserDB.swift:83 updateTable(_:table:) > Trying update BROWSER version 19 21:20:54.829 Debug BrowserDB.swift:151 createOrUpdate > Table BROWSER already exists. 21:20:55.271 Debug Profile.swift:282 shutdown() > Shutting down profile. 21:20:55.272 Debug SwiftData.swift:525 deinit > deinit: closing connection on thread <NSThread: 0x17407d480>{number = 3, name = (null)}. 21:20:55.272 Debug SwiftData.swift:592 closeCustomConnection(immediately:) > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/5B91923C-BBAE-418B-A299-18A7CFFD89E3/profile.profile/browser.db on <NSThread: 0x17407d480>{number = 3, name = (null)}. 21:20:55.277 Debug SwiftData.swift:612 closeCustomConnection(immediately:) > Closed /private/var/mobile/Containers/Shared/AppGroup/5B91923C-BBAE-418B-A299-18A7CFFD89E3/profile.profile/browser.db. 21:20:55.280 Warning SwiftData.swift:88 getSharedConnection() > >>> Database is closed for /private/var/mobile/Containers/Shared/AppGroup/5B91923C-BBAE-418B-A299-18A7CFFD89E3/profile.profile/browser.db 21:20:55.288 Warning SwiftData.swift:88 getSharedConnection() > >>> Database is closed for /private/var/mobile/Containers/Shared/AppGroup/5B91923C-BBAE-418B-A299-18A7CFFD89E3/profile.profile/browser.db 21:20:55.289 Warning SwiftData.swift:163 transaction(synchronous:transactionClosure:) > BEGIN EXCLUSIVE failed. 21:20:55.289 Debug BrowserDB.swift:180 createOrUpdate > Couldn\'t create or update "clients", "tabs", "commands" . 21:20:55.290 Debug BrowserDB.swift:181 createOrUpdate > Attempting to move browser.db to another location.', Layered recommendations: - Don't try to recover from a locked DB if the error is that our DB connection is closed. - Don't just shutdown on the queue: when we get to the front of the queue, look to see whether we've already been reopened. If so, don't close the DB! - Possibly: don't shut down until we're done starting up.", ', has a fix. ', ', will address that.', Steph has both of the dependencies, so he might as well get the credit for this one, too :)', Re: ', Looking at BrowserDB.swift:createOrUpdate, if we do encounter an error with the transaction and we try to move/recreate the database, it will fail because we forceClose the connection on line 205. This will cause the new/moved database to be empty - hence the lack of history/bookmarks. I might be just rewording what you wrote above but just to help understand I'm going to write it down anyways. Another interesting point is that createOrUpdate won't just fail because of corruption. The likely cause is the addition of the forceClose calls and the use of the FailedSQLiteConnection in place of ConcreteSQLiteConnection when the DB is closed. Here's a scenario 1. User launches the app 2. Backgrounds shortly after 3. profile.shutdown is called 4. createOrUpdate will fail 5. DB is moved because it thinks we're in a 'bad' state vs a 'closed' state 6. Since the connection is gone, we cant recreate the tables 7. empty DB! As a side note, this goes back to our discussion about having the databases accessible from lazy properties. Since they are created on-demand, the time of which we create is not explicit. I feel like if we were to force create our DB handles on app foregrounded and close them on backgrounded we wouldn't be getting as many issues.", Always worthwhile! ', Yes, exactly. That's why ", is a partial fix for this: we detect a closed connection explicitly, and don't go through the recovery flow. If we didn't have the recovery flow at all, the only symptom here would be ", : a transient closed database when it should be open. Relaunching the app would fix things. (On the other hand, I think the recovery flow still has value for real database corruption.) ', That's true -- it reduces some potential race windows -- but we would still have known bugs (e.g., preventing a late close from impacting a subsequent session). I don't think the laziness is intrinsically a bad thing: it just needs to be correct, and I think that part is. It's our larger lifecycle problems that cause this bug, not the laziness per se.", Both dependencies bugs are resolved so I'll mark this as resolved and we can retest in the next beta." 
id=1318330	 'Created ', ', PR: ', master ', Hey Delphine, We recently found an issue in Focus 1 which is causing the app to crash when users try to visit websites which prompt the user for location/media access. Is there a way we can uplift this sentence into the L10N process for 6.0? 1 ', Sorry for the lag. Yes, let's get this in since it's critical. Thanks!", v6.x 294bc99', Created ', ', Link to Github pull-request: ', I've attached the L10N export PR", Comment on ', ', Link to Github pull-request: ', Merged: ' 
id=1293977	 "Three questions: a) Do you have a Firefox Sync account connected? b) Can you try removing Firefox, re-downloading it and verifying wether it crashes again? If it does not, if you re-sign into Sync, does it crash again? c) Verify wether this only happens on your jailbroken device? In general, we don't really support jailbreaking.", a) Yes, I had Sync account connected. b) Removing and re-downloading Firefox, the crashes are gone. Signing in again begins the crashes anew. So it has to be some sync issues. c) My iPad4 is the only iOS device I have. I would have thought that Firefox/Mozilla - given its customizable nature and philosophy - would be more supportive towards jailbreak honestly. I'm not willing to lose my jailbreak, so if it's some immovable obstacle for you, I'm sorry.", Thanks. This looks like a Sync related crash. Steph, anything in thread 7 stand out? Thread 7 name: Dispatch queue: com.mozilla.sync.collectionclient Thread 7: 0 libsystem_kernel.dylib \t0x390f0210 0x390dc000 + 0x14210 \t// __kill + 0x8 1 Client (*) \t0x003b8222 0x00085000 + 0x333222 2 libsystem_platform.dylib \t0x3918c85e 0x39188000 + 0x485e \t// _sigtramp + 0x2a 3 CoreFoundation \t0x26fef72a 0x26fea000 + 0x572a \t// CFRelease + 0x12a 4 Sync \t0x0101cc70 0x00f99000 + 0x83c70 \t// _TFC4Sync13EncryptedJSONg9cleartextGSqC6Shared4JSON_ + 0x104 5 Sync \t0x010b9fdc 0x00f99000 + 0x120fdc\t// _TTSg5C4Sync11TabsPayload___TFFC4Sync9KeyBundle7factoryuRxCS_20CleartextPayloadJSONrFFC6Shared4JSONxFSSGSqx_U_FSSGSqQ__ + 0x104 6 Sync \t0x0104c2cc 0x00f99000 + 0xb32cc \t// _TPA__TTSg5C4Sync13ClientPayload___TFFC4Sync9KeyBundle7factoryuRxCS_20CleartextPayloadJSONrFFC6Shared4JSONxFSSGSqx_U_FSSGSqQ__ + 0x60 7 Sync \t0x010c267c 0x00f99000 + 0x12967c\t// _TTSg5C4Sync13ClientPayload___TZFC4Sync6Record12fromEnvelopefTCS_12EnvelopeJSON14payloadFactoryFSSGSqx__GSqGS0_x__ + 0x294 8 Sync \t0x0100f334 0x00f99000 + 0x76334 \t// _TTSg5C4Sync13ClientPayload___TFFFC4Sync22Sync15CollectionClient8getSinceFTVs6UInt644sortGSqOS_10SortOption_5limitGSqSi_6offsetGSqSS__GC8Deferred8DeferredGO6Shared5MaybeGVS_15StorageResponseGSaGCS_6Recordx_____U_FTGSqCSo12NSURLRequest_GSqCSo17NSHTTPURLResponse_GO9Alamofire6ResultPs9AnyObject___T_L_9recordifyfCS5_4JSONGSqGS8_Q___ + 0x98 9 Sync \t0x00ff10ac 0x00f99000 + 0x580ac \t// _TPA__TTSg5C4Sync11TabsPayload___TTRGRxC4Sync20CleartextPayloadJSONrXFo_oC6Shared4JSON_oGSqGCS_6Recordx__zoPs9ErrorType__XFo_iS2__iGSqGS3_x__zoPS4___ + 0x44 10 Sync \t0x00ff12f0 0x00f99000 + 0x582f0 \t// _TPA__TTSg5C4Sync13ClientPayload___TTRGRxC4Sync20CleartextPayloadJSONrXFo_oC6Shared4JSON_oGSqGCS_6Recordx__zoPs9ErrorType__XFo_iS2__iGSqGS3_x__zoPS4___ + 0xc 11 Sync \t0x00ff2fe0 0x00f99000 + 0x59fe0 \t// _TTSg5GSaC6Shared4JSON_GSaS0__s12SequenceTypes_GVs17IndexingGeneratorGSaS0___GS2_GSaS0___s13GeneratorTypes_S0__GVs10ArraySliceS0___GC4Sync6RecordCS5_13ClientPayload____TFEsPs12SequenceType7flatMapurfzFzWx9Generator7Element_GSqqd___GSaqd___ + 0x2a0 12 Sync \t0x0100e1c8 0x00f99000 + 0x751c8 \t// _TTSg5C4Sync13ClientPayload___TFFC4Sync22Sync15CollectionClient8getSinceFTVs6UInt644sortGSqOS_10SortOption_5limitGSqSi_6offsetGSqSS__GC8Deferred8DeferredGO6Shared5MaybeGVS_15StorageResponseGSaGCS_6Recordx_____U_FTGSqCSo12NSURLRequest_GSqCSo17NSHTTPURLResponse_GO9Alamofire6ResultPs9AnyObject___T_ + 0x230 13 Sync \t0x00fef7d4 0x00f99000 + 0x567d4 \t// _TPA__TTSg5C4Sync13ClientPayload___TFFC4Sync22Sync15CollectionClient8getSinceFTVs6UInt644sortGSqOS_10SortOption_5limitGSqSi_6offsetGSqSS__GC8Deferred8DeferredGO6Shared5MaybeGVS_15StorageResponseGSaGCS_6Recordx_____U_FTGSqCSo12NSURLRequest_GSqCSo17NSHTTPURLResponse_GO9Alamofire6ResultPs9AnyObject___T_ + 0x68 14 Sync \t0x00ff7ddc 0x00f99000 + 0x5eddc \t// _TTSg5GV4Sync15StorageResponseGSaGCS_6RecordCS_13ClientPayload______TFFC4Sync19Sync15StorageClient9errorWrapurFTGC8Deferred8DeferredGO6Shared5Maybex__7handlerFTGSqCSo12NSURLRequest_GSqCSo17NSHTTPURLResponse_GO9Alamofire6ResultPs9AnyObject___T__FTGSqS5__GSqS6__GS8_PS9____T_U_FTGSqS5__GSqS6__GS8_PS9____T_ + 0x538 15 Sync \t0x00fef860 0x00f99000 + 0x56860 \t// _TPA__TTSg5GV4Sync15StorageResponseGSaGCS_6RecordCS_13ClientPayload______TFFC4Sync19Sync15StorageClient9errorWrapurFTGC8Deferred8DeferredGO6Shared5Maybex__7handlerFTGSqCSo12NSURLRequest_GSqCSo17NSHTTPURLResponse_GO9Alamofire6ResultPs9AnyObject___T__FTGSqS5__GSqS6__GS8_PS9____T_U_FTGSqS5__GSqS6__GS8_PS9____T_ + 0x80 16 Sync \t0x010c44e4 0x00f99000 + 0x12b4e4\t// _TTRXFo_oGSqCSo12NSURLRequest_oGSqCSo17NSHTTPURLResponse_oGO9Alamofire6ResultPs9AnyObject___dT__XFo_oGSqS__oGSqS0__iGS2_PS3____dT__ + 0x30 17 Sync \t0x00ff05e0 0x00f99000 + 0x575e0 \t// _TPA__TTRXFo_oGSqCSo12NSURLRequest_oGSqCSo17NSHTTPURLResponse_oGO9Alamofire6ResultPs9AnyObject___dT__XFo_oGSqS__oGSqS0__iGS2_PS3____dT__.103 + 0x50', Yup. Looks like we're crashing while trying to pull down a connected client or tab record from the sync server. I'll dig into it some more but the crash logs look promising!", Cydia CrashReproter caught a crash on lockscreen. I've been using it not logged in to sync, so it works kinda fine, but suddenly I got a notification from CrashReporter: crashlog: ", syslog: ', I see in Exception note it should not be a crash, but I thought it might be useful.', Dupe of ', ?', Did anyone grab the Hastebin contents and can attach them to the bug? The stack in ', could be explained by a failure in the JSON library we use: it force-unwraps a decoded UTF-8 sequence internally. But I'd need to see the rest of the crash report to be sure.", I'm going to dupe this in favor of 1319875 *** This bug has been marked as a duplicate of ", ***' 
id=1323373	 "Also of note: there are 80k items here because we now just download everything on the server. If we're ever node-reassigned, we'll upload them all, too. We upload 100 items at a time once the batch is constructed (", /', ), so this still takes forever\u2026 we just shouldn't OOM when we try.", Created ', ', Pull req. I'm not wedded to this approach. The key to this workaround is to delay when makeHistoryRecord happens. That limits our memory usage. We *could* push this down as a function into the upload batcher: it's a richer kind of serializer. But the upload batcher wants to serialize every item to be sure of their correctness; not ideal here. And if we always use the atomic uploader, we are almost certain to never make progress when a device decides to upload 80,000 records. This way we can fail our chain at any point and still have scratched off each uploaded record. Please give this a thorough chew.", I'm confused why my device is uploading: * My account has not been node reassigned. * A DB recovery would trigger a full sync, but then I wouldn't have 80,000 history records! * Setting up a new Simulator pulls down all the data, but (correctly) marks them as should_upload = 0, and doesn't reupload.", 25c42cd', v6.x 2b7339597067ad1244cf96003b749543786de2ec' 
id=1315246	 'Was this introduced via ', ? Let's track this.", Created ', ', Github PR', Comment on ', ', Github PR I've left some feedback of a case I think you missed. Please let me know if this is an issue.", master ' 
id=1303832	 "After some testing, it seems that after logging into your FxA account and seeing the 'Confirmation Email Sent' screen, you have to wait for a few seconds before navigating back to see your account show up. Otherwise, it forgets yo ve logged in. :AaronMT, have you noticed this in the past? I don't recall having an issue with this in the past...", On Nightly (on TestFlight). After logging in and permitting permissions on iOS, I see " Sync is experiencing issues syncing Bookmarks " Which a) Should not be displayed to the user after signing in b) Is false Tapping \'Done\', heading back to the navigational panes, I see my content. I don\'t need to interact with any email.', We should track this as per poor sign-in experience.', I think this is the same bug as ', *** This bug has been marked as a duplicate of ', ***' 
id=1317324	 'This is interesting Exception Type: EXC_CRASH (SIGKILL) Exception Codes: 0x0000000000000000, 0x0000000000000000 Exception Note: EXC_CORPSE_NOTIFY Termination Reason: Namespace SPRINGBOARD, Code 0xdead10cc', The presence of FailedSQLiteDBConnection in the stack, and refreshTabs in a notificationReceived higher up, suggests to me that the following happened: - A sync finished - The app was backgrounded - The DB was closed - RemoteTabsViewController serviced NotificationProfileDidFinishSyncing - The query it ran failed because the DB was closed - We crash creating a cursor from an NSError. init(err: NSError) { self.status = .Failure self.statusMessage = err.description <<<<<< }', I think we might be using localized strings wrong. return NSError(domain: "mozilla", code: 0, userInfo: NSLocalizedDescriptionKey: str ) ... return self.fail("Non-open connection; can\'t execute change.") That should be return NSError(domain: "mozilla", code: 0, userInfo: NSLocalizedDescriptionKey: NSLocalizedString("Failed", str) ) It should be easy to force this problem to occur locally by creating a failed DB then running a query on it\u2026 indeed, just creating an NSError like this should make it easy to repro!', Additionally, it would be smart for listeners of NotificationProfileDidFinishSyncing to check if the app has been backgrounded, or the DB is open, before trying to do DB-related work.', I'm pretty sure this crash log is a red herring. Opening up Xcode and diving into the full log shows an fsync running on Thread 11: ... Thread 11 name: Thread 11: 0 libsystem_kernel.dylib \t0x000000018b94e428 fsync + 8 1 Storage \t0x0000000100d38708 unixSync + 76 2 Storage \t0x0000000100d41488 sqlite3WalCheckpoint + 2060 3 Storage \t0x0000000100d40b30 sqlite3WalClose + 128 4 Storage \t0x0000000100d409c8 sqlite3PagerClose + 88 5 Storage \t0x0000000100d280a0 sqlite3BtreeClose + 316 6 Storage \t0x0000000100d2d35c sqlite3LeaveMutexAndCloseZombie + 176 7 Storage \t0x0000000100d34308 sqlite3Close + 428 8 Storage \t0x0000000100d0b6f8 ConcreteSQLiteDBConnection.deinit.(closure #1) + 192 (SwiftData.swift:603) 9 libdispatch.dylib \t0x000000018b8251c0 _dispatch_client_callout + 16 (object.m:455) 10 libdispatch.dylib \t0x000000018b832860 _dispatch_barrier_sync_f_invoke + 84 (queue.c:3457) 11 Storage \t0x0000000100d0b2d8 ConcreteSQLiteDBConnection.__deallocating_deinit + 256 (SwiftData.swift:528) 12 Storage \t0x0000000100d16d9c specialized SwiftData.withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError? + 844 (SwiftData.swift:0) 13 Storage \t0x0000000100d06e94 SwiftData.withConnection(SwiftData.Flags, synchronous : Bool, cb : (db : SQLiteDBConnection) -> NSError?) -> NSError? + 24 (SwiftData.swift:106) 14 Storage \t0x0000000100cefc54 BrowserDB.withConnection<A> (flags : SwiftData.Flags, err : inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> A) -> A + 212 (BrowserDB.swift:254) 15 Storage \t0x0000000100cf0154 BrowserDB.withReadableConnection<A> (inout NSError?, callback : (connection : SQLiteDBConnection, err : inout NSError?) -> Cursor<A>) -> Cursor<A> + 240 (BrowserDB.swift:263) 16 Storage \t0x0000000100c30508 SQLiteRemoteClientsAndTabs.getClientsAndTabs() -> Deferred<Maybe< ClientAndTabs >> + 568 (SQLiteRemoteClientsAndTabs.swift:207) 17 Storage \t0x0000000100c348d4 protocol witness for RemoteClientsAndTabs.getClientsAndTabs() -> Deferred<Maybe< ClientAndTabs >> in conformance SQLiteRemoteClientsAndTabs + 80 (SQLiteRemoteClientsAndTabs.swift:187) 18 Client \t0x000000010020fbf8 BrowserProfile.(getClientsAndTabs() -> Deferred<Maybe< ClientAndTabs >>).(closure #1) + 864 (Profile.swift:463) 19 Shared \t0x0000000100b116d0 static (>>> infix<A, B> (Deferred<Maybe<A>>, () -> Deferred<Maybe<B>>) -> Deferred<Maybe<B>>).(closure #1) + 284 (DeferredUtils.swift:28) 20 Deferred \t0x00000001012b6580 Deferred.(bindQueue<A> (OS_dispatch_queue, f : (A) -> Deferred<A1>) -> Deferred<A1>).(closure #1) + 76 (Deferred.swift:94) 21 Deferred \t0x00000001012b5d28 partial apply for Deferred.(uponQueue(OS_dispatch_queue, block : (A) -> ()) -> ()).(closure #2) + 116 (Deferred.swift:68) 22 libdispatch.dylib \t0x000000018b825200 _dispatch_call_block_and_release + 24 (init.c:947) 23 libdispatch.dylib \t0x000000018b8251c0 _dispatch_client_callout + 16 (object.m:455) 24 libdispatch.dylib \t0x000000018b833ab4 _dispatch_queue_override_invoke + 732 (inline_internal.h:2421) 25 libdispatch.dylib \t0x000000018b83538c _dispatch_root_queue_drain + 572 (inline_internal.h:2458) 26 libdispatch.dylib \t0x000000018b8350ec _dispatch_worker_thread3 + 124 (queue.c:5548) 27 libsystem_pthread.dylib \t0x000000018ba2e2b8 _pthread_wqthread + 1288 (pthread.c:2196) ... If I was a betting man, I'd say that fsync is whats causing the termination.", Also I tried to run various scenarios creating an NSError with NSLocalizedDescriptionKey while backgrounded and it worked fine.', Yeah, betcha we're getting a signal 'cos we're fsyncing in the background. However, we're in the middle of closing the DB at that point. So I think there's still a bug here\u2026 being killed here shouldn't be able to happen.", Looking at where we call sqlite3_close in the `closeCustomConnection` call, when the connection runs it's deinit method, it doesn't use the immediately flag. I assume that sqlite3_close_v2 will force close any connections and not run the WAL checkpoint which looks like what is triggering the fsync after the app should be in a closed state. Could we simply fix this by calling sqlite3_close_v2 instead of sqlite3_close when the connection deinits?", Created ', Another disk access crash Found another crash that has a unique stack trace resulting in a SPRINGBOARD exception.', Just to add some more details, it looks like 8/10 of our libsystem_kernel crashes on v6.0b6 are caused by the deinit->closeCustomConnection->sqlite3_close inside ConcreteSQLiteDBConnection. Linking 1307822 since this looks to be the same issue.', Actually I'm just going to dupe this to that bug since the crash log attached to this one is a red herring. *** This bug has been marked as a duplicate of ", ***', Sigh. Too many tabs open. Duplicating proper bug. *** This bug has been marked as a duplicate of ', ***', (In reply to Stephan Leroux :sleroux from ', ) ', The difference between sqlite3_close and sqlite3_close_v2: * _close returns SQLITE_BUSY if you haven\'t already closed statements etc. I believe it\'s always synchronous. * _close_v2 turns the connection into a zombie and closes itself when everything else is done. That is -- _close makes it an error if the database couldn\'t be immediately closed, and leaves the database open on failure. _close_v2 will delay work, but guarantees eventual closure. All of this nonsense is why there are comments around the force-close stuff saying "use the deinitializer instead". It\'s important to make sure that all prepared statements and blob handles have been finalized before attempting to close the connection. I suspect we use _v2 by preference because up until recently, it wasn\'t a capital offense to do a few milliseconds of writes on shutdown. There\'s no obvious right answer here that doesn\'t risk deadlock or leakage. If close_v2 synchronously closes in the normal case, then we would be no better off using close() -- it would just return _BUSY. You could try using close() and falling back to close_v2(), perhaps with telemetry\u2026', Let's make this a dependency of that crash instead of duping it.", Looking closely at the stack, it looks like we\'re doing a \'regular\' deinit-based close of the DB while in the background (when file access isn\'t allowed). That is: this isn\'t triggered by an async close, because the deinitializer is on the stack. The reason we\'re doing this in the background is quite possibly because we did kicked off a close, it didn\'t work because we were holding a prepared statement, and so we carried on and ended our background task. 0x0000000100d2d35c sqlite3LeaveMutexAndCloseZombie + 176 is in the stack, which might mean we closed the database while the callback for getClientsAndTabs ran in the context of the connection. When it was done, it closed the connection\u2026 but by that point we were already backgrounded, and when the close triggered an fsync, the OS killed us. The "zombie" part might also be a red herring, and this is simply a normal close happening in the wrong spot.', More root cause analysis: this is something I mentioned before, but we didn't fix. Note that db.forceClose simply sets the connection reference to nil. But the connection is captured by withConnection/withReadableConnection blocks, and one of those is in the stack here. That implies that we shut down the profile, called forceClose, discarded the main reference to the connection\u2026\xa0but there was already a code block on a separate thread that held a reference to it. forceClose did all this in a dispatch_sync block, expecting that when it returned the deinitializer for the DB would have run, closing the connection and doing all the necessary writes. However, the refcount didn't hit zero. forceClose returned, we exited the background task, and a few milliseconds later the withConnectionBlock on thread 11 exited. That dropped the refcount of the connection to zero, causing the deinitializer to close the connection, which caused a forbidden background write. The fix here will probably be to have forceClose block until the refcount of the connection drops to zero. One way to do that is to wait for the DB queue to be empty within the dispatch_sync block, probably by cycling a runnable through the queue. A little thought will be necessary to guarantee that we can't deadlock here. Steph, let me know if you have a different interpretation of that stack!", Nope this sounds a lot better than my explanation and the stack trace makes it seem that this is the case. ', One concern I have is that since Deferreds are using concurrent queues underneath, could there be a chance that once we see the queue be zero, another thread comes along and adds a new DB operation after our forceClose block? `withConnection` will add to the refcount in this case so when forceClose finishes we still won't hit the deinit until after the DB op is finished. The dispatch_sync will only block the current thread from continuing on wards but doesn't stop another thread from adding a new operation to the sharedConnectionQueue in the meantime. From a higher level, the issue is that we have potentially multiple readers/writers from different parts in the app using Deferreds which can run in different threads (since it uses a concurrent queue) making it difficult to guarantee a safe close of the DB. The retaining of the connection in `withConnection` makes it especially difficult.", As I was writing that I had a idea: What if we make `withConnection` get a weakref to the connection instead of retaining?', Created ', ', Link to Github pull-request: ', Let's try this!", Comment on ', ', Link to Github pull-request: ', Review on GH.', Let's see if this patch finally fixes this! master ", v6.x 7f017bace51b887da5403c4e9adc04aacd43fa1c' 
id=1316581	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1291304	 "This dead lock (0xdead10cc) should be 'easy' to reproduce as it's possible that we're holding onto a system resource when backgrounded?", Installed iOS 10 Beta 4 on my iPad Pro. I hit this crash when Firefox was in the background while device was idle. Springboard restarted.', At ', it says "The exception code 0xdead10cc indicates that an application has been terminated by iOS because it held on to a system resource (like the address book database) while running in the background." Does that give us a hint?', Aaron, can you pull a crash report from your iPad Pro? The report that is written to the device may include more info than what we see in Xcode. Settings -> Privacy -> Diagnostics -> Diagnostic & Usage Data. We need the full .ips file on this bug if you have it.', I can only get the same non-symbolic stack traces on the device. This crash is so frequent that any device with iOS 10 (developers) should be able to see this now.', Were you logged into Sync by chance? I got the app running on my iPod Touch on iOS 10b5 but haven't gotten it to crash.", Nope. Take a look at the *.IPS files, it might not be apparent that it's a crash, but they started collecting up when Firefox was in the background. Firefox kept refreshing the pages when restored in the foreground.", From 'ortwin' on the dev forums here: ", ', CoreSpotlight could be one reason why we're deadlocking on a shared resources with Springboard. We use the CoreSpotlight framework to index open tabs so they show up in spotlight. Aaron, I've created a branch with the CoreSpotlight use commented out on a branch named sleroux/SpringboardCrashTest. Mind giving that a test? I was able to reproduce the crash once on my iPod but it seems yo re able to reproduce it easier.", This is a top-crash on 5.1', Updated my iPhone 5 to iOS 10 Public Beta 6. Running Nightly off TestFlight for several hours, I have yet to hit a crash.', 30e46eba14d917c4dcd7293b5b04360daaf94986 is the first bad commit commit 30e46eba14d917c4dcd7293b5b04360daaf94986 Author: jhugman <', > Date: Mon Jun 13 13:33:34 2016 +0100 ', \u2013 Change new tab behaviour based on user setting (#1916) * ', \u2013\xa0Don't show the home panels if new tab is either a blank or homepage. This would otherwise mean that there is zero difference between a blank page and the defaults. * ", \u2013 Detect that this is a new tab and load the correct URL into the tab. * ', \u2013\xa0Remove concept of default homepage for opening new tabs. This replaces the notion of a single unified new tab page set at start up.. * ', \u2013\xa0Added defaults for China. Using literals, because I don't like copying PrefsDefaults and PrefsKeys around, and we can't have a dependency from Profile to Client. * ", \u2013 Update feature flags now there is real functionality available. * ', \u2013\xa0Construct localhostURL from rawValue and remove other calculations of the URL. * ', \u2013\xa0Moved string literals into existing PrefsKeys and PrefsDefaults. :040000 040000 30ce148a13911a0416cd7fcb2ac834655a879759 0a9565f08b286472c759b66c712ce54c90333616 M\tClient :040000 040000 a7e4e027a1005d4533e6322d7144f59fc51f85ac b3023dc37f3a021fec56abeb9c3f3e0c057f0b7b M\tClientTests :040000 040000 2745a3e85f51bbd686476d9045733fa6d804cb4f 1ad9279144f2751f65e7ad9fe28b0cd143fb1f62 M\tProviders :040000 040000 857e75a803531f141df24715f847fe9aab33442b 8b173f6ba2e8133538d82d98c21e32eff70f332d M\tUtils', (In reply to Aaron Train :aaronmt from ', ) ', I can trigger a crash pretty easily: * iPad Pro 9.7" * iOS 10.0b7 * Running Fennec, master Open the following tabs: * New tab, search for "news" * Facebook login screen * What\'s New in Firefox for iOS * ', * ', Open Firefox. Flip through all the tabs. End on the last one about the white sharks. Hit the home button to background the app. When run in the Debugger, the app exists with: Message from debugger: Terminated due to signal 9', Link to what git bisect thinks is the first bad commit: ', May or not be the case, but this is probably the best starting point we have now.', Not convinced that git bisect is telling the truth :-(', I have narrowed this down to the LoginsHelper! The crash consistently happens on ', - Open that page (without logging in) as your only tab, hit the home button and boom. Terminated due to signal 9. Commenting out the following code: // only add the logins helper if the tab is not a private browsing tab if !tab.isPrivate { let logins = LoginsHelper(tab: tab, profile: profile) tab.addHelper(logins, name: LoginsHelper.name()) } In BrowserViewController.tab(:didCreateWebView) makes the crash go away. I did not setup sync, so I do not have any logins, as this confirms: 2016-08-25 23:33:57.625 Debug LoginsHelper.swift:214 requestLogins(_:requestId:) > Found 0 logins. Is it possible that on iOS 10 things are more strict, and we cannot leave any databases open?', This is what happens when I start the app with a clean profile and then go to ', 2016-08-25 23:38:04.875 Debug BrowserDB.swift:50 init(filename:secretKey:files:) > Initializing BrowserDB: logins.db. 2016-08-25 23:38:04.876 Debug BrowserDB.swift:60 init(filename:secretKey:files:) > Creating db: /private/var/mobile/Containers/Shared/AppGroup/A03623BA-3FA4-45E7-A073-35BA75714C15/profile.profile/logins.db with secret = Optional("LkuHAsY2RwY5DoeNkhOJm3lgkaIzZ/5LgoK1sF9YB6jaR9vptY8aj4BDTDOXIx/uxYCz6nyFSkt1BE/rA36ch32KJnzNmIMYc4EgryxDi01EfprnYIUIiRYzeCw3bPFuhiRMYwKh1iCpNaQC2i2TqIhd0+QGc8VoWDuH4XzFQLkGopK8Wv+htZijH+6euf+EHYWex8o8zk/uvwkbknJpdnGSL68TyyYz5ThlV/pkqnONbv+cxrohXLbBBasBxjQEraHAyIoXY7fYrWyYy+1Q8MMGDOVIlcTOo3GDjsA/BvItRfq8kStD1iwcx8LYtnb9e2zJgyo0tzRXO19PgwomKg==") 2016-08-25 23:38:04.877 Debug SwiftData.swift:83 getSharedConnection() > >>> Creating shared SQLiteDBConnection for /private/var/mobile/Containers/Shared/AppGroup/A03623BA-3FA4-45E7-A073-35BA75714C15/profile.profile/logins.db on thread <NSThread: 0x17406a380>{number = 1, name = main}. 2016-08-25 23:38:04.877 Debug SwiftData.swift:480 init(filename:flags:key:prevKey:) > Opening connection to /private/var/mobile/Containers/Shared/AppGroup/A03623BA-3FA4-45E7-A073-35BA75714C15/profile.profile/logins.db. 2016-08-25 23:38:04.928 Info SwiftData.swift:406 prepareEncrypted(_:key:prevKey:) > Enabling WAL mode. 2016-08-25 23:38:04.929 Debug BrowserDB.swift:139 createOrUpdate > Create or update tableList version 1 on <NSThread: 0x17406a380>{number = 1, name = main}. 2016-08-25 23:38:04.929 Debug BrowserDB.swift:83 updateTable(_:table:) > Trying update tableList version 1 2016-08-25 23:38:04.929 Debug BrowserDB.swift:151 createOrUpdate > Table tableList already exists. 2016-08-25 23:38:04.930 Debug BrowserDB.swift:139 createOrUpdate > Create or update LOGINS version 3 on <NSThread: 0x17406a380>{number = 1, name = main}. 2016-08-25 23:38:04.930 Debug BrowserDB.swift:449 tablesExist > 2 tables exist. Expected 2 2016-08-25 23:38:04.930 Debug BrowserDB.swift:83 updateTable(_:table:) > Trying update LOGINS version 3 2016-08-25 23:38:04.931 Debug BrowserDB.swift:151 createOrUpdate > Table LOGINS already exists. 2016-08-25 23:38:04.934 Debug LoginsHelper.swift:214 requestLogins(_:requestId:) > Found 0 logins.', Reproducible on other login forms too. Like Google or Amazon. (If you test, be sure to reset the browser and not let the browser load any tabs with login forms from previous tests)', Fixed with the following patch: diff --git a/Client/Application/AppDelegate.swift b/Client/Application/AppDelegate.swift index 9f4d9a2..9bf6e68 100644 --- a/Client/Application/AppDelegate.swift +++ b/Client/Application/AppDelegate.swift @@ -359,6 +359,7 @@ class AppDelegate: UIResponder, UIApplicationDelegate { private func syncOnDidEnterBackground(application application: UIApplication) { // Short circuit and don't sync if we don't have a syncable account. guard self.profile?.hasSyncableAccount() ?? false else { + self.profile?.shutdown() return } This is probably not complete or fully correct. But I think the problem is that we only call self.profile().shutdown() if sync is setup. If it is not setup then we do not shut down the profile, aka close the databases on suspend. I did not follow the flow of applicationDidEnterBackground() very well. The shutdown() call may have to go in another place to make sure it always runs. But this is probably a good hint!", Looks like this definitely could be problematic considering that shutdown is only called after the guard and in the applicationWillTerminate method. I think what we have is to remove the guard check altogether and allow the profile to be shutdown below in the beginBackgroundTaskWithExpirationHandler method since it could potentially take a while to shut down the database. I'll rewrite this method to make sure the profile gets shutdown all the time and does sync-y stuff if needed.", Happy to review if you want extra eyes.', Created ', Link to Github pull-request: ', Found another related issue in this code path! I've attached :st3fan's fix and another fix in the PR.", master: 2e126ad8285e3e5fbe1af1e1b3a1c94cbf8e9450', v5.x f5b3137', I'm seeing this crash when I am not logged in to Sync. This is the crash log: MOOMOO syncOnDidEnterBackground() MOOMOO Shutting down profile 2016-09-21 16:15:25.384 Debug Profile.swift:268 shutdown() > Shutting down profile. 2016-09-21 16:15:25.384 Debug SwiftData.swift:504 deinit > deinit: closing connection on thread <NSThread: 0x17407ee40>{number = 1, name = main}. 2016-09-21 16:15:25.385 Debug SwiftData.swift:571 closeCustomConnection(immediately:) > Closing custom connection for /private/var/mobile/Containers/Shared/AppGroup/0FA91D99-5271-47A8-9CFF-8BC2B0D05B69/profile.profile/browser.db on <NSThread: 0x17407ee40>{number = 1, name = main}. 2016-09-21 16:15:25.389 Debug SwiftData.swift:591 closeCustomConnection(immediately:) > Closed /private/var/mobile/Containers/Shared/AppGroup/0FA91D99-5271-47A8-9CFF-8BC2B0D05B69/profile.profile/browser.db. MOOMOO 555 Returning MOOMOO 666 Returning INFO GCDWebServer stopped 2016-09-21 16:15:25.416 Debug Telemetry.swift:55 sendPing > Ping URL: Optional(", ) 2016-09-21 16:15:25.446 Debug Telemetry.swift:56 sendPing > Ping payload: {"locale":"en","osversion":"10.0.1","tz":-240,"durations":7,"device":"Apple-iPhone8,2","v":7,"profileDate":17065,"defaultSearch":"yahoo","seq":8,"os":"iOS","clientId":"06D37AF3-F611-4CAD-9EB4-84273E67FEAC","sessions":1,"created":"2016-09-21","arch":"arm"} 2016-09-21 16:15:25.477 Debug Telemetry.swift:65 sendPing > Non-release build; not sending ping 2016-09-21 16:15:25.602 Debug SwiftData.swift:83 getSharedConnection() > >>> Creating shared SQLiteDBConnection for /private/var/mobile/Containers/Shared/AppGroup/0FA91D99-5271-47A8-9CFF-8BC2B0D05B69/profile.profile/logins.db on thread <NSThread: 0x174471e80>{number = 9, name = (null)}. 2016-09-21 16:15:25.607 Debug SwiftData.swift:480 init(filename:flags:key:prevKey:) > Opening connection to /private/var/mobile/Containers/Shared/AppGroup/0FA91D99-5271-47A8-9CFF-8BC2B0D05B69/profile.profile/logins.db. Message from debugger: Terminated due to signal 9 And this is how I annotated my code: private func syncOnDidEnterBackground(application application: UIApplication) { print("MOOMOO syncOnDidEnterBackground()") guard let profile = self.profile else { print("MOOMOO 111 Returning") return } profile.syncManager.applicationDidEnterBackground() var taskId: UIBackgroundTaskIdentifier = 0 taskId = application.beginBackgroundTaskWithExpirationHandler { _ in log.warning("Running out of background time, but we have a profile shutdown pending.") profile.shutdown() application.endBackgroundTask(taskId) print("MOOMOO 222 Returning") } if profile.hasSyncableAccount() { let backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0) profile.syncManager.syncEverything().uponQueue(backgroundQueue) { _ in profile.shutdown() application.endBackgroundTask(taskId) print("MOOMOO 333 Returning") } print("MOOMOO 444 Returning") } else { print("MOOMOO Shutting down profile") profile.shutdown() application.endBackgroundTask(taskId) print("MOOMOO 555 Returning") } print("MOOMOO 666 Returning") } (print statements because I dont think i can step through this in the debugger) What this looks like is that we correctly go through the code path. But then *after* syncOnDidEnterBackground() finishes, something happens that causes the profile to be opened again. Could this be Telemetry the code? Should the Telemetry code check if the app state is in shutdown state (does that exist on iOS) and then not open the profile?', 16:27:38\xa0<st3fan>\xa0STR is the same, go to a login page, tap on one of the fields, background the app 16:28:08\xa0<st3fan>\xa0the ping code does not always run, but when it does, it seems to crash', Have we tried a build with telemetry disabled using the STR?', Created ', ', Link to Github pull-request: ', Fix part 2!', master: ', v5.x: db0236a3985c5dc8ed1f368cf567550a1a5e22d8' 
id=1261054	 'Incident Identifier: 9389B7AA-32C4-4B47-812F-321A3B5847A5 CrashReporter Key: 2d76cbdd2b33de3213661baf9674ffcec1745475 Hardware Model: iPhone7,1 Process: AdSheet 776 Path: /Applications/AdSheet.app/AdSheet Identifier: com.apple.AdSheetPhone Version: 1.0 (1.0) Code Type: ARM-64 (Native) Parent Process: launchd 1 Date/Time: 2016-03-31 15:26:26.26 +0300 Launch Time: 2016-03-31 15:25:45.45 +0300 OS Version: iOS 9.1 (13B143) Report Version: 105 Exception Type: EXC_CRASH (SIGABRT) Exception Codes: 0x0000000000000000, 0x0000000000000000 Exception Note: EXC_CORPSE_NOTIFY Triggered by Thread: 5 Filtered syslog: None found Last Exception Backtrace: 0 CoreFoundation \t0x183854f48 __exceptionPreprocess + 124 1 libobjc.A.dylib \t0x198407f80 objc_exception_throw + 56 2 CoreFoundation \t0x18385bc5c - NSObject(NSObject) doesNotRecognizeSelector: + 212 3 CoreFoundation \t0x183858c00 ___forwarding___ + 872 4 CoreFoundation \t0x18375ccac _CF_forwarding_prep_0 + 92 5 Foundation \t0x184808d28 getObjectValue + 208 6 Foundation \t0x184808c20 - NSDateFormatter getObjectValue:forString:errorDescription: + 188 7 Foundation \t0x184808f70 - NSDateFormatter dateFromString: + 48 8 AdSheet \t0x10005cebc 0x100040000 + 118460 9 libdispatch.dylib \t0x198c256e8 _dispatch_call_block_and_release + 24 10 libdispatch.dylib \t0x198c256a8 _dispatch_client_callout + 16 11 libdispatch.dylib \t0x198c33b40 _dispatch_root_queue_drain + 2140 12 libdispatch.dylib \t0x198c332dc _dispatch_worker_thread3 + 112 13 libsystem_pthread.dylib \t0x198e39470 _pthread_wqthread + 1092 14 libsystem_pthread.dylib \t0x198e39020 start_wqthread + 4 Thread 0 name: Dispatch queue: com.apple.main-thread Thread 0: 0 libsystem_kernel.dylib \t0x0000000198d58a40 mach_msg_trap + 8 1 libsystem_kernel.dylib \t0x0000000198d588bc mach_msg + 72 2 CoreFoundation \t0x000000018380c108 __CFRunLoopServiceMachPort + 196 3 CoreFoundation \t0x0000000183809e0c __CFRunLoopRun + 1032 4 CoreFoundation \t0x0000000183738ca0 CFRunLoopRunSpecific + 384 5 GraphicsServices \t0x000000018e974088 GSEventRunModal + 180 6 UIKit \t0x0000000188e50ffc UIApplicationMain + 204 7 AdSheet \t0x0000000100045194 0x100040000 + 20884 8 libdyld.dylib \t0x0000000198c568b8 start + 4 Thread 1 name: Dispatch queue: com.apple.libdispatch-manager Thread 1: 0 libsystem_kernel.dylib \t0x0000000198d744fc kevent_qos + 8 1 libdispatch.dylib \t0x0000000198c38a04 _dispatch_mgr_invoke + 232 2 libdispatch.dylib \t0x0000000198c27874 _dispatch_source_invoke + 0 Thread 2 name: WebThread Thread 2: 0 libsystem_kernel.dylib \t0x0000000198d58a40 mach_msg_trap + 8 1 libsystem_kernel.dylib \t0x0000000198d588bc mach_msg + 72 2 CoreFoundation \t0x000000018380c108 __CFRunLoopServiceMachPort + 196 3 CoreFoundation \t0x0000000183809e0c __CFRunLoopRun + 1032 4 CoreFoundation \t0x0000000183738ca0 CFRunLoopRunSpecific + 384 5 WebCore \t0x000000019534654c RunWebThread(void*) + 456 6 libsystem_pthread.dylib \t0x0000000198e3bb28 _pthread_body + 156 7 libsystem_pthread.dylib \t0x0000000198e3ba8c _pthread_body + 0 8 libsystem_pthread.dylib \t0x0000000198e39028 thread_start + 4 Thread 3 name: com.apple.coremedia.player.async Thread 3: 0 libsystem_kernel.dylib \t0x0000000198d58a7c semaphore_wait_trap + 8 1 libdispatch.dylib \t0x0000000198c36614 _dispatch_semaphore_wait_slow + 244 2 MediaToolbox \t0x000000018606caa4 fpa_AsyncMovieControlThread + 1948 3 CoreMedia \t0x00000001840bea70 figThreadMain + 272 4 libsystem_pthread.dylib \t0x0000000198e3bb28 _pthread_body + 156 5 libsystem_pthread.dylib \t0x0000000198e3ba8c _pthread_body + 0 6 libsystem_pthread.dylib \t0x0000000198e39028 thread_start + 4 Thread 4 name: AVAudioSession Notify Thread Thread 4: 0 libsystem_kernel.dylib \t0x0000000198d58a40 mach_msg_trap + 8 1 libsystem_kernel.dylib \t0x0000000198d588bc mach_msg + 72 2 CoreFoundation \t0x000000018380c108 __CFRunLoopServiceMachPort + 196 3 CoreFoundation \t0x0000000183809e0c __CFRunLoopRun + 1032 4 CoreFoundation \t0x0000000183738ca0 CFRunLoopRunSpecific + 384 5 libAVFAudio.dylib \t0x0000000181ea1810 GenericRunLoopThread::Entry(void*) + 164 6 libAVFAudio.dylib \t0x0000000181e76384 CAPThread::Entry(CAPThread*) + 84 7 libsystem_pthread.dylib \t0x0000000198e3bb28 _pthread_body + 156 8 libsystem_pthread.dylib \t0x0000000198e3ba8c _pthread_body + 0 9 libsystem_pthread.dylib \t0x0000000198e39028 thread_start + 4 Thread 5 name: Dispatch queue: com.apple.root.background-qos Thread 5 Crashed: 0 libsystem_kernel.dylib \t0x0000000198d73140 __pthread_kill + 8 1 libsystem_pthread.dylib \t0x0000000198e3cef8 pthread_kill + 112 2 libsystem_c.dylib \t0x0000000198ce6b78 abort + 140 3 libc++abi.dylib \t0x0000000197a7d3f4 __cxa_bad_cast + 0 4 libc++abi.dylib \t0x0000000197a99e98 default_unexpected_handler() + 0 5 libobjc.A.dylib \t0x0000000198408248 _objc_terminate() + 124 6 libc++abi.dylib \t0x0000000197a96f44 std::__terminate(void (*)()) + 16 7 libc++abi.dylib \t0x0000000197a9685c __cxxabiv1::exception_cleanup_func(_Unwind_Reason_Code, _Unwind_Exception*) + 0 8 libobjc.A.dylib \t0x0000000198408094 _objc_exception_destructor(void*) + 0 9 CoreFoundation \t0x000000018385bc5c __methodDescriptionForSelector + 0 10 CoreFoundation \t0x0000000183858c00 ___forwarding___ + 872 11 CoreFoundation \t0x000000018375ccac _CF_forwarding_prep_0 + 92 12 Foundation \t0x0000000184808d28 getObjectValue + 208 13 Foundation \t0x0000000184808c20 - NSDateFormatter getObjectValue:forString:errorDescription: + 188 14 Foundation \t0x0000000184808f70 - NSDateFormatter dateFromString: + 48 15 AdSheet \t0x000000010005cebc 0x100040000 + 118460 16 libdispatch.dylib \t0x0000000198c256e8 _dispatch_call_block_and_release + 24 17 libdispatch.dylib \t0x0000000198c256a8 _dispatch_client_callout + 16 18 libdispatch.dylib \t0x0000000198c33b40 _dispatch_root_queue_drain + 2140 19 libdispatch.dylib \t0x0000000198c332dc _dispatch_worker_thread3 + 112 20 libsystem_pthread.dylib \t0x0000000198e39470 _pthread_wqthread + 1092 21 libsystem_pthread.dylib \t0x0000000198e39020 start_wqthread + 4 Thread 6: 0 libsystem_kernel.dylib \t0x0000000198d73b6c __workq_kernreturn + 8 1 libsystem_pthread.dylib \t0x0000000198e39530 _pthread_wqthread + 1284 2 libsystem_pthread.dylib \t0x0000000198e39020 start_wqthread + 4 Thread 7: 0 libsystem_kernel.dylib \t0x0000000198d73b6c __workq_kernreturn + 8 1 libsystem_pthread.dylib \t0x0000000198e39530 _pthread_wqthread + 1284 2 libsystem_pthread.dylib \t0x0000000198e39020 start_wqthread + 4 Thread 8: 0 libsystem_kernel.dylib \t0x0000000198d73b6c __workq_kernreturn + 8 1 libsystem_pthread.dylib \t0x0000000198e39530 _pthread_wqthread + 1284 2 libsystem_pthread.dylib \t0x0000000198e39020 start_wqthread + 4 Thread 5 crashed with ARM Thread State (64-bit): x0: 0x0000000000000000 x1: 0x0000000000000000 x2: 0x0000000000000000 x3: 0x000000013455e747 x4: 0x0000000197a9ae02 x5: 0x000000016e1b9650 x6: 0x000000000000006e x7: 0x0000000000000f80 x8: 0x000000000c000000 x9: 0x0000000004000000 x10: 0x0000000000000002 x11: 0x0000000000000010 x12: 0x0000000000000000 x13: 0x0000000000000002 x14: 0x0000000000000000 x15: 0x0000030000000300 x16: 0x0000000000000148 x17: 0x0000000000000000 x18: 0x0000000000000000 x19: 0x0000000000000006 x20: 0x000000016e1bb000 x21: 0x000000016e1b9650 x22: 0x0000000134649010 x23: 0x000000019f7191f0 x24: 0x0000000000000000 x25: 0x00000001897ee2ec x26: 0x000000019e898000 x27: 0x0000000000000001 x28: 0x0000000000000000 fp: 0x000000016e1b95b0 lr: 0x0000000198e3cef8 sp: 0x000000016e1b9590 pc: 0x0000000198d73140 cpsr: 0x00000000', Created ', crashlog.log', Can you attach a Firefox crash report?', The crash was reproduced and sent with the "Send Crash Reports" option checked and it was also sent with the option unchecked by choosing "Send Report" from the "Oops! Firefox crashed" prompt.', (In reply to simion.basca from ', ) ', Path: /Applications/AdSheet.app/AdSheet Identifier: com.apple.AdSheetPhone This is not Firefox', No other log file was created in Xcode at the time the crash occurred. Sorry for the incontinence.', Created ', Client 31-03-16 18-41.crash I've reproduced the issue with: Device: Iphone 6 (IOS 9.2.1) Build: 4.0.0 (1) Here is the crash report", Comment on ', Client 31-03-16 18-41.crash Last Exception Backtrace: 0 CoreFoundation \t0x182f41900 __exceptionPreprocess + 124 1 libobjc.A.dylib \t0x1825aff80 objc_exception_throw + 56 2 UIKit \t0x187fb10e4 - UIViewController _presentViewController:withAnimationController:completion: + 4996 3 UIKit \t0x187d37044 - _UIViewControllerTransitionCoordinator _applyBlocks:releaseBlocks: + 272 4 UIKit \t0x187d64484 - _UIViewControllerTransitionContext _runAlongsideCompletions + 148 5 UIKit \t0x187d63294 - _UIViewControllerTransitionContext completeTransition: + 132 6 Foundation \t0x1838f644c __NSFireDelayedPerform + 428 7 CoreFoundation \t0x182ef95f4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 28 8 CoreFoundation \t0x182ef9298 __CFRunLoopDoTimer + 884 9 CoreFoundation \t0x182ef69ac __CFRunLoopRun + 1520 10 CoreFoundation \t0x182e25680 CFRunLoopRunSpecific + 384 11 GraphicsServices \t0x184334088 GSEventRunModal + 180 12 UIKit \t0x187c9cd90 UIApplicationMain + 204 13 Client \t0x100307084 0x1000dc000 + 2273412 14 libdyld.dylib \t0x1829c68b8 start + 4', This is being fixed as part of ', Teste on build 1649ceb8 on IPhone 6 Plus (9.1) The issue is still reproducible following the steps from the description. Please note that the application will crash only after following steps 5) and 6) by pressing the home button while rotating the device in portrait view.', Tested on build afdbc70 on IPhone 6 Plus. Please see below simpler steps to reproduce the crash: 1. Launch Firefox and change orientation to landscape 2. Open the Tools menu 3. Change orientation while backgrounding Firefox using the home button 4. Re-open Firefox', Alternative steps to reproduce on Tablet devices: 1. Go to amazon.com 2. Open Share menu 3. Tap on 'More' option 4. Change device orientation to landscape", I am having a hard time to reproduce any of the crashes mentioned in this bug. I'm using latest master. Is it possible that this is not happening anymore? I'm also on iOS 9.3.2, mayne that makes a difference?", The issue was reproduced with latest master on IPhone 6 S (9.2.1) Iphone SE (9.3.2). Please see the following URL for more information: ', . Also, please note that the same issue can be reproduced on IPad Air 2 (9.3.1) when opening the 'More options' from the Share menu and changing device orientation: ", I can't reproduce this on ios10 iphoneSE or in simulator iphone6plus iOS9.3. master c0c43446959073a74b1b41f51acdda9f28c808fe If you can reproduce. Please feel free to reopen", Tested on 0f93b9b14de02 on devices running iOS 9.x and iOS 10.0.2 I am unable to reproduce this issue on the current build. I will re-open if the the issue is re-encountered.' 
id=1289563	 'This was reported for iOS 10. Still needs verification if this also happens on 9.3.3 though.', I can't reproduce this on iOS 9.3 in the simulator. Will test on an actual device and then mark the bug with the affected iOS version.", I can reproduce this issue only on iOS 10 (iPhone 6S). On iOS 9.3.2 (iPhone 6 Plus) it's working fine", *** ', has been marked as a duplicate of this bug. ***', This issue is not reddit.com specific. I can reproduce on multiple sites (bbc.com, cnn.com, ...) on iOS 10', Was unable to reproduce on iOS 10.0 Beta 5 running on iPhone 6. Attempted to reproduce the issue using Firefox downloaded from App Store. Browsed both mobile and desktop reddit and bbc, opening multiple links that lead to various media types but was not able to reproduce.', I can't reproduce either on iOS 10.0b6 running on iPad mini." 
id=1315755	 'Created ', 2016-11-06_15-45-59.9619_+1000-fefeb57bd5679c07d304b48d353bcebb42e3523f.crash Note: #3 crash in organizer looks like the same thing but originating from the ViewLater extension instead of SendTo. Crash log attached.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Counter-proposal on the PR.', Comment on ', ', Link to Github pull-request: ', Updated with the simpler approach. SQLiteHistory no longer failable and skip over create/update if we're closed.", Part of this change -- the short-circuiting on close -- should fix ', . There are other recommendations in that bug that should also be addressed (e.g., quickly hitting Home on first ever run).', Sweet! I forgot I included that short circuit logic on that PR. That should resolve the empty case for now but I'll keep the bug open and add the layered fixes to it as part of that bug.", master ', v6.x f6e7ec22d9ce4d2c41c21f57b992d886946d3a06' 
id=1309571	 'After waiting a bit and pulling down to refresh on the history panel, all my history is gone... Performing a re-sync does not pull down anymore history items.', Take a look at the code -- are we downloading with sort=oldest and limit=5000? This might have changed with the batching stuff.', Force closing the app and relaunched made my history items re-appear.', Simon are you able to reproduce this using a large Sync profile? If so, I'd like to see this fixed on 6.0", Looks like the batch downloader is ordering by oldest-first and batching limit is set to 500 which is why we're seeing older records come in but not the most recent ones. One solution would be to download the most recent 500 first then batch download the others oldest -> latest. Moving to 6.0/P2.", Android's current solution for this is to not limit downloads at all. On modern devices it's probably fine to grab all of the user's history. We can maintain a limit by: - arbitrarily picking a date and fetching batch-wise from that point. - fetching IDs and using those to construct either an ID-based fetch or a timestamp-based fetch. - fetching with a limit newest-to-oldest. This has the potential to miss records.", (In reply to Aaron Train :aaronmt from ', ) ', Tested on devices running iOS 10.0.3 and iOS 9.x. I am able to reproduce this with a large Sync profile. The only difference observed is that when swiping down to refresh the list will update with the correct history.', Would this mean we wouldn't be batching anymore and just one-shot download everything? It would be nice to keep a limit and batch since we already have some nice code for doing that but downloading in one go is easier. One thing I'm a bit confused about is _why_ we're missing recent records. I know we're starting from oldest->newest, but since we're batching 500 at a time, shouldn't we eventually get the last set of records? Since it's missing records since roughly a month ago it seems that the batch client might have a one-off error and just not grabbing the latest/last batch. From a UX perspective, it would make sense to download the latest batch first since those are the history items most visible from the panels. Technically, if we set an arbitrary date to start with (ex. records in the last month), how do we know we won't be missing records from the end of the lastest->newest batching and the latest months worth of records? Lastly, do you see this change being made to the Downloader and affect bookmarks/logins/history or just something history specific?", (In reply to Stephan Leroux :sleroux from ', ) ', No, it still batches. Grisha's current approach fetches: limit=500&sort=newest (that is, the 500 most recent history items), then fetches: sort=oldest&batch=true&... to fill in the backlog. We just reintroduced 'older' in ", so we can avoid re-fetching those 500 most recent records. If older+sort=oldest now gives us the ability to batch backwards, we could do that instead. ', That would be nice!', Created ', ', Link to Github pull-request: ', First part of resolving this issue. I haven't been seeing the month old issue on the history panel so lets see if this does it.", I do *not* see recent history reappear if I swipe down in History, or re-sync multiple times. Reproduced in 5.3. Interestingly, both devices end up on exactly the same last history item from September 26th.', Copying a note from the PR: that's definitely only the first part of a fix. My fresh installs that exhibit this bug don't find the missing history even by text search in the awesomebar, so it seems that the data is really not there.", Hypothesis: - We call HistorySynchronizer.synchronizeLocalHistory(). - It calls go() with the greenLight. - Several batches are downloaded and applied. - The green light turns red, and we return Success to synchronizeLocalHistory. - We move on and call the upload flow! return self.go(info, greenLight: greenLight, downloader: downloader, history: history) >>> { self.uploadOutgoingFromStorage(history, lastTimestamp: 0, withServer: historyClient) } >>> { return deferMaybe(.Completed) } - The upload flow doesn\'t have a green light, and when it\'s done (unless it has no records to upload) it calls `setTimestamp` on the synchronizer, which sets `lastFetched` so that we skip our own records. func uploadRecords<T>(records: Record<T> , lastTimestamp: Timestamp, storageClient: Sync15CollectionClient<T>, onUpload: (POSTResult, Timestamp?) -> DeferredTimestamp) -> DeferredTimestamp { if records.isEmpty { log.debug("No modified records to upload.") return deferMaybe(lastTimestamp) } let batch = storageClient.newBatch(ifUnmodifiedSince: (lastTimestamp == 0) ? nil : lastTimestamp, onCollectionUploaded: onUpload) return batch.addRecords(records) >>> batch.endBatch >>> { let timestamp = batch.ifUnmodifiedSince ?? lastTimestamp self.setTimestamp(timestamp) return deferMaybe(timestamp) } } As such: if there\'s _any_ history to upload, we won\'t ever redownload more than we get in our first sync. Solutions: - Check the green light before calling `uploadOutgoingFromStorage`. - Indeed, don\'t upload until we\'re done batching. That will require `go` to return a status flag rather than mere success or failure.', Stealing this for the follow-up PR.', The sweet, sweet logs of success. Debug Downloader.swift:157 downloadNextBatchWithLimit(_:infoModified:) > Fetching newer=0, offset=Optional("1474939836960:19"). Debug StorageClient.swift:759 getSince(_:sort:limit:offset:) > Issuing GET with newer = 0. Debug StorageClient.swift:356 failFromResponse > Status code: 200. Debug Downloader.swift:175 handleSuccess > Handling success. Debug Downloader.swift:209 handleSuccess > Got success response with Optional(500) records. Debug HistorySynchronizer.swift:208 onBatchResult > Running another batch. Debug Downloader.swift:192 handleSuccess > Advancing baseTimestamp to 1474939843330 - 1 Info HistorySynchronizer.swift:186 go(_:greenLight:downloader:history:) > Green light turned red. Stopping history download. Debug HistorySynchronizer.swift:266 synchronizeLocalHistory(_:withServer:info:greenLight:) > Didn\'t finish downloading history; not uploading yet. Info Profile.swift:1161 syncSeveral > Nothing left to sync Info Profile.swift:706 endSyncing > Ending all queued syncs. Debug SyncStatusResolver.swift:73 resolveResults() > Sync status for clients: Completed Debug SyncStatusResolver.swift:73 resolveResults() > Sync status for tabs: Completed Debug SyncStatusResolver.swift:73 resolveResults() > Sync status for logins: Completed Debug SyncStatusResolver.swift:73 resolveResults() > Sync status for bookmarks: Completed Debug SyncStatusResolver.swift:73 resolveResults() > Sync status for history: Partial Debug SyncStatusResolver.swift:133 resolveResults() > Resolved sync display state: Good And it\'s running subsequent batches correctly, too.', Created ', ', Don't continue and upload unless download finished.", Comment on ', ', Don't continue and upload unless download finished. LGTM!", Landed fix for AS panel showing month old data: master ', Rebased and merged (4 commits): ', ', covers speeding up the history panel in the face of this much data. sleroux, does this need uplift anywhere?', Yup - lets uplift your patch for 6.0', v6.x 48b72f177def0470d4c5b8d9082a03e27a642030' 
id=1238971	 'Intentional side-effect of our startup crash fix, but we should see if we can avoid this without fixing the upstream WebKit bug. Can we see what bleeding-edge Chrome does?', *** ', has been marked as a duplicate of this bug. ***', +1 I've had my wife and a friend report this one to me as being really annoying. (I ignored the first person but by the second..)", Created ', ', Pull request This issue is hard to test for, but these changes are passing the previous STR, so it's possible this is enough to fix the issues.", It'd be great to bring this back if we can. I think Stefan was able to reproduce this crash in ", , so let's see if it's fixed for him.", I think this priority conflicts with the tracking flag, discuss next triage.', I think we're clear to land this since Stefan filed a WebKit bug about this crash, which got fixed.", *** ', has been marked as a duplicate of this bug. ***' 
id=1319296	 "This is expected. The data you currently see in the app is a read-only temporary mirror of the server contents. We show that to you in the bookmarks UI as a convenience, but it's temporary. Naturally, we throw that away in several situations, including when you disconnect from an account. When we enable bidirectional syncing (see ", ), the server-side data will be merged into your local bookmarks, and will be preserved across account transitions. Resolving as INVALID because this is the current expected behavior.', (In reply to Richard Newman :rnewman from ', ) ', > Will bidirectional syncing be enabled when Firefox for iOS 6.0 releases? Since the behavior is different from that on Firefox for Desktop/Android, and different from that on older version of Firefox for iOS, users might be confused.', I don't believe this behavior is any different from older versions of Firefox for iOS. No, 6.0 will not include this feature; it's blocked on a whole tree of (mostly desktop) bugs. But soon." 
id=1322121	 'Created ', ', Pull Request', master ', v6.x 8e2037b9d7e62b8abd6b135985d8006cac1c2dfd', Verifying as fix on master 6dae35c6.', Hello, For some reason when I tested this issue on 6dae35c6 I was unable to reproduce it. When I have re-tested this issue I was able to reproduce it on latest Nightly fdbfbcbc and also on 6.0b7. Farhan, do you have any ideas what's happening?", If this is still reproducible, I am most concerned about this bug on the tracking list for 6.0 currently. Farhan, please investigate.', Simon I cant seem to replicate this on v6.x. with the last commit 65ffa16e677206aeb77649b623a4e6f5882139cc Can you try again? Make sure you close any open tabs -> Restart. And then try to replicate the bug.', I can still reproduce this issue on beta 6.0b8 and also on latest Nightly. Can you please try again following these exact steps: 1. Open a New tab 2. Tap on Bookmarks panel (Be sure this tab remains open in the Bookmark panel) 3. Open the menu and tap on the New tab button 4. In the new tab go to youtube.com (This tab should remain in focus) 5. Go to App Switcher and close Firefox 6. Re-open Firefox (This will restore Firefox with the youtube.com tab in focus) 7. Open tabs tray 8. Go to the tab which was previously open in the Bookmark panel at step 2) Result: - The bookmarks are not displayed. After switching to another panel and returning to the Bookmark panel the bookmarks are correctly displayed.', I was able to reproduce this using the steps above on 6.0b8 (have not tried a master build) on my iPhone 7+.', Created ', ', Pull Request V2', Comment on ', ', Pull Request V2 I wish there was better Apple documentation around all of this, but if it works for you then it works for me!', Attempty 2! ', This issue is no longer reproducible on latest master 72ab4df1.', v6.x 1be63457ee415f8f57bc9258b161635904288ca5' 
id=1278262	 'reminds me of bug ', Yeah, this is a crash when the data changes underneath the row action. 4 UIKit \t0x187035808 - UITableView _endCellAnimationsWithContext: + 12624 5 Client \t0x10044fe80 BookmarksPanel.(tableView(UITableView, editActionsForRowAtIndexPath : NSIndexPath) -> AnyObject ?).(closure #1) (BookmarksPanel.swift:377)', Is this actionable for 5.0?', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I'm going to mark this as r- because this fix wont work.", Created ', ', Link to Github pull-request: ', Applies the revised approach :rnewman suggested where we generate a copy of the data with the removal applied to represent a transient state until the user moves away and comes back. At that point, the model is reloaded from disk to be consistent.', Comment on ', ', Link to Github pull-request: ', Looks sane to me!', master ', v6.x 9f15555' 
id=1315918	 'You need to download the testflight/beta version of Mail.Ru (Barbara can give you the details) - the release version does not yet support opening with Firefox', Also, I just tested it on my device and it works fine - I think the release version now supports it (Mail.Ru 7.6)', Also, I'm on my iPhone 6S with OS 10.1.1", Just updated Mail.Ru from v7.5 to v7.6 and and the Firefox setting is enabled now' 
id=1130503	 
id=1309603	 
id=1314683	 'Already implemented throughout various previous bugs.' 
id=1211201	 "Hey Eric, I tried to emulate the behavior that Safari has where if yo re dragging the page downwards (scrolling back up), the URL Bar doesn't animate in. When you 'fling' or have any acceleration, the URL bar will animate. One of the reasons I tried this was to prevent the URL bar from always animating back in when yo re slowing dragging the page up or down. I found that with the animation happening on every movement the URL bar seemed really 'jumpy'. Do you have any suggestions as to how we can more easily show the URL bar without having to show it every time the page is scrolled? I also find it a bit cumbersome to get the URL bar back.", Safari handles this by never fully obscuring the URL bar (it minimised to a maybe 20px or so navigation bar at the top, that can be tapped on to bring the full bar). Perhaps this would be a useful behaviour to implement?', (In reply to Nathanael Alcock from ', ) ', That would be one option. Really, any way to more quickly access the URL bar. Some kind of gesture or special tap would even be okay. But having the URL bar shrink down to a strip across the top, maybe even one that shows the page title in a small font, would be a decent way to go.', Related to this, and should probably be a separate bug: with a hardware keyboard attached, pressing Command-L to focus on the location bar currently does not show the URL bar.', Filed ', (In reply to Stefan Arentz :st3fan from ', ) ', I was about to ask if Cmd-K opened the search box, but then I remembered that we have a unified URL/search box on iOS. Maybe have Cmd-K focus the URL bar, too, then? Along similar lines, what keyboard shortcut integrations do we already have? Cmd-F for in-page find? Etc.', I've just realised that you can actually tap the top of the page, when the search bar is hidden, to show it. But I imagine most users don't even realise this exists \u2014 having the region that was already tappable be visible in some way would be much better. (In reply to Eric Shepherd :sheppy from ", ) ', We already have a number of keyboard shortcuts. You can see all of the ones currently here: ', (Though there's an open PR to add even more.)", Created ', ', Pull request I've made the touch target that shows the URL bar actually visible now, which I think helps a lot. The UI could perhaps be improved further, but I think it's probably worth having even a basic bar like this over the current solution.", Created ', Simulator Screen Shot 15 \u0438\u044e\u043b\u044f 2016 \u0433., 11.27.50.png An example for a Wikipedia page. The text simply uses the document's title (with a URL fallback).", (In reply to Nathanael Alcock from ', ) ', That\'s a nice start indeed! Perhaps have the top-right corner let you open the tab panel like usual (on iPhone). About the only other thought that comes into my head, and it\'s a little possibly crazy thought, is it might be interesting to have a sort of minimized, dimmed version of the usual controls from the URL bar across that space. Maybe they don\'t even work (hence the "dimmed") but it would help people understand what that bar is there for.', Comment on ', ', Pull request Mostly minor nits and the subclass thing. I'm not really a fan of the transition between URL Bar -> minified view though. It seems disjoint from the actual URL Bar and might be confused as a fixed header from the web page since that transition isn't there. I think Safari nailed the transition between the two states since it's clear to the user that the URL bar `becomes` minified but I don't really want to straight up copy from Safari.", Ah, yes, I can see what you mean. I'll give it a little more thought \u2014\xa0something like the text from the URL bar sliding down, and becoming the minified view might work, though it could also look a bit strange. Maybe it'd most effectively to play around with a couple of different effects to see what works best.", Comment on ', ', Pull request LGTM! I dig it. Though sites with sticky headers seem to get cut off; see this example from Wired: ', Created ', ', Pull request Due to the concerns both about floating headers, and the separation of the two URL bars, I've changed the approach slightly \u2014\xa0there's now a transition between the two bars.", Created ', Simulator Screen Shot 24 \u0430\u0432\u0433. 2016 \u0433., 13.01.00.png', Comment on ', ', Pull request Looks great! Thanks for all the work on this feature.', Comment on ', ', Pull request Looks great!', master ' 
id=1300111	 'How about we use a third party library instead? ', does exactly what we want and is already localized in 33 languages. Does this support all the languages we need? If not maybe we could send a PR to add support for the missing languages?', I think this is a great idea. I can see us forking this repo, maybe adding Carthage compatibility, and add the missing locales there then PR the changes back.', Also it looks like that library has been folded into DateTools (', )', (In reply to Farhan Patel from ', ) ', It could be complicated (Flod could probably say more about this) and right now, with this library as is, it would be even worse than the current state for Polish (unacceptable really) even with ', problematic patch applied.', Not the mobile owner (that would be Delphine), but I personally would not depend on translations made by external entities.', Ok, I will revert the changes back!', Created ', ', PR', master ', Let's use ", to discuss alternatives such as using a third party library moving forward.' 
id=1314035	 "Going to pick this up while I'm working on getting 6.0 to build for beta.", As you can see from this list, (', ) there are tests that only passes on ipad, or iphone. For example, DomainAutocompleteTests will fail on ipad, but passes on iphone. In order to run tests that only passes on certain devices, we need to create a new scheme for each of them- like FennecCI - Ipad and FennecCI - Iphone and enable applicable tests. But if we don't need to test older api, perhaps we can run tests on iphone only. But in that case the tests that fail on them should be disabled.", Resolved as part of ', Just saw your comment :njpark. I've landed the first pass of this bug and removed the FennecCI scheme in favor of just Fennec with tests that are currently working on iPhone. We should probably file a follow up to investigate running the test suite against both iPad and iPhone and figuring out a way to get that going with a single scheme." 
id=1182855	 'I see the same issue on www.ziare.com. Visit the site in portrait, switch orientation to landscape then switch back to portrait Result: The page is zoomed in Note: This is not reproducible on Safari', *** ', has been marked as a duplicate of this bug. ***', Note that after scrolling around for a bit in the zoomed-in view, it will suddenly revert back to the original zoom level.', This issue is still reproducible on latest master (0da9bd79a8efda)', Created ', ', Pull Request I think I got all the cases of issues with zoom scale. Catalin can you please give it a try and make sure I'm not missing any cases. Here is what I've tried. ", Go to a wikipedia article. Zoom in / Zoom out. Rotate device to landscape and then back. Rotation should be preserved. ', ', Comment on ', ', Pull Request LGTM - some notes on the PR.', I've tested this on a few sites, including the ones mentioned in ", and: 1. On phones, the zoom scale is properly restored when switching orientation but, on some sites, the transition is not that smoother as it is on Chrome and Safari (see the videos bellow). Firefox: ', Chrome: ', 2. On iPads, the bug is still reproducible on a few sites (', , ', , ', ), but only until a zoom out action is performed in portrait mode (to restore the zoom scale). After that, the zoom scale is restored correctly at rotation.', I've pushed a new version to my branch. If you could test it that would be great. Sorry to make you test it before it lands. But this is a pretty important fix and I dont want to find any major regressions after it lands :crossesfingers: Yea, I've noticed the jankyness. It's a late animation. I'll try to spend some time to see if I can move the animation closer to the time so it blends in more. The thing is though I think chrome is a bit broken here. If you try ", a dozen times yo ll notice that chrome will eventually break the zoomscale sometimes. The fix I have is a bit more reliable but we get a noticeable animation. This should also fix issues with ipad", Re-tested on the new version and found one other issue (not sure if it was present on the previous version): 1. Go to ', 2. Double tap on the page to zoom it in 3. Rotate to landscape and back to portrait Result: The zoom scale will be reset to default. Didn't noticed any other issues so far. The iPads issue mentioned in ", is no longer reproducible.', I think this is acceptable behavior for phrack.org imo. Yo ll notice doing the same thing in chrome breaks the zoom once you rotate back. Resetting to default only happens if the zoomscale in portrait is smaller than the zoomscale when in landscape. If I preserve the zoomscale on phrack I run into other issues with the page not being centered correctly (this is what happens in chrome) I think its a better experience to reset the zoomscale than to have content off centered.", master ', v6.x dd03925' 
id=1282962	 'Created ', ', Pull request', Comment on ', ', Pull request Code looks good - just the comment about the class declaration in the extension. After fixing the bugs from Tyler it should be good to go!', Created ', Simulator Screen Shot 27 \u0438\u044e\u043b\u044f 2016 \u0433., 15.00.22.png One of the suggestions for adding more distinction between the two browsing modes was making the background top tabs lighter in normal browsing mode. Do we think this improves usability; and if so: how much lighter should the background tabs be in normal browsing mode? Attached is a screenshot for an example, though this could be too light.', I think it helps, but yes; it's too light. There should be more contrast. What greys are we using at the moment?", In that screenshot: Selected normal tab: rgb(235, 235, 235) Background normal tab: rgb(198, 198, 198) Selected private tab: rgb(90, 90, 90) Background private tab: rgb(53, 53, 53) Previously the background normal tab colour was rgb(53, 53, 53) also.', Comment on ', ', Pull request varkor fixed all of my concerns, LGTM!', LGTM', Don't think this needed any changes; landing since it got r+ and ui-review+. Filed ", for the private browsing menu arrow issue. ' 
id=1313146	 'Created ', ', Github PR First export for 6.0!', Hey there - just wanted to call out something concerning the removal of some strings here: if removing strings used in v5.x, then we won't be able to release updates to v5.x once we export the strings So if a string is used in v5.x, and you want to release an update to 5.0, then localizations will miss that string.. Please confirm we all are on the same page with this! thanks.", Flod mentioned this yesterday as well and I think we should be fine. I don't see us releasing any more releases on v5.x.", Merged: ' 
id=1303391	 'Created ', ', Pull Request', Comment on ', ', Pull Request Nice!', master 4779a27b54458edf754fcff86a265f903f3f5a43' 
id=1299658	 'Created ', ', Pull Request This is done except for the new images I'm waiting on from bbell. In the code, I'm not using the new images anywhere. I'm waiting to get the new assets from bbell before I use them in the code.", Comment on ', ', Pull Request Looks good! Just some minor comments.', master a5e6ad80f85190af1f9cf0c1130bfba3c2ac606e' 
id=1109744	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1295989	 'Done! master: 2131bb2 v5.x: 207dc10' 
id=1312801	 'about:srcdoc - not about:docsrc', Created ', ', PR: ', This patch passes `about:srcdoc` URLs to WebKit instead if trying to handle it within the app and eventually passing them to `openURL()`.' 
id=1302254	 "I don't know if I can fix this without breaking something in punyCode. Please make sure to add new tests to show how punycode should work so that if anyone comes to this code later they understand what it should do :)", Created ', pull request Fix this bug and add test case.', Created ', ', p', Created ', ', pull request Fix this bug and add test case.', Thanks for getting to this so quickly. :) master 118831d1953f5058bab42d3f2a21bd0732bcabb6' 
id=1320718	 'Created ', ', Pull Request This only happens on the iPad', Comment on ', ', Pull Request lgtm', master ', v6.x 0d9de6f' 
id=1314701	 
id=1301691	 'Created ', ', Pull request', master: ', v5.x: 09a9654' 
id=1307180	 "With XCUITests, I don't see a good way of doing a blackbox test to check for results from the Onyx server at this time. Using a unit test would work but the code buried pretty deep in a view controller it might be more trouble than it's worth. If anyone has any options let me know but for now I'm going to make this as WONTFIX." 
id=1314695	 '*** ', has been marked as a duplicate of this bug. ***', Already implemented across various bugs.' 
id=1304202	 'Created ', ', PR', Comment on ', ', PR Code looks good - we should probably address the disappearing bookmark issue though before landing.', Comment on ', ', PR Looks good. Sorry for the delay!', master ' 
id=1300712	 'Up until iOS9, there was no reliable way of a today widget telling if it is on the lock screen or not. The solution is described in ', . This no longer seems to be working.', It seems like it is still working. But it takes time for it to kick in. You have to wait almost a minute sometimes for it to hide the url. I think this is just Apple not restricting access to the filesystem right away. Here is what I did Steps to reproduce: 1.Copy a link 2.Lock screen 3.Tap the home button 4.Type enough wrong passcodes to get locked out for a min. 5.Swipe right and go to Today widget This is still the most reliable way of checking if the device is locked or not. So I think it's best to just leave it as is." 
id=1306044	 'Created ', ', Link to Github pull-request: ', This imports our Focus block lists and creates an NSURLProtocol that blocks them on UIWebView.', Landed in branch uiwebview: bc1158813cf210746dc1dfc5875b7192b240bdc1' 
id=1314687	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1289584	 'master 3cbecef2c9bd880d4ad26d6674421cbd03610b7c' 
id=1320139	 'Maybe related to ', Created ', ', Pull Request', *** ', has been marked as a duplicate of this bug. ***', Created ', Background colors in AS Farhan, the AS top-sites and highlights are now having that background color too!', Hmm. I knew that would happen. But I'm surprised the colors dont match.", Ah. I see. The letters of the Alphabet are cached. So it keeps the color of the last one.', So this only breaks AS right now which is only on master. So lets still get this half working fix into 6.x because otherwise users wont see any favicons in their bookmarks.', v6.x 5875608', The favicon is correctly displayed on master 6dae35c6.', Simon, but the AS top-sites and highlights are still showing the background color as in ', Per #', , my understanding is that this patch only fixes the favicon for synced bookmarks and history panel. I believe that the AS top - sites and highlights is a separate issue. I will log a new bug for that issue.' 
id=1289556	 'Created ', ', Pull Request', master 72abfa8a3a6ea4f66ee0dd46ab92b514f032c535' 
id=1303734	 " is the Android side of this. Here's the desktop add-on's schema: ", We'll be storing similar in Tofino using Datomish, eventually -- it's sparse, growing, graph-shaped, and all that good stuff.", Moving to backlog for now until we prioritize', Will be part of MVP definition so moving to P2.', Refining bug to focus on only textual data from web page metadata. Images will be filed as another bug.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Forgot to add :rnewman for feedback on SQLite-ness.', master ' 
id=1314398	 
id=1127040	 
id=1318519	 'Created ', ', Pull Request Actually, it looks like the separator is there but does not appear in the empty state. This PR just adds the missing gradient', master ', v6.x 239ef04', Reverted change on v6.x due to conflicts v6.x be5c6aa' 
id=1276640	 '*** ', has been marked as a duplicate of this bug. ***', I think this appears to be fixed now (after several patches involving private theme bugs). Is it reproducible on master for you?', Created ', IMG_0049.PNG', Created ', Tested on master 7bbb5465571 on iPhone 6. The issue is still reproducible following the STR from the description.', Can't reproduce on latest master. ", Please reopen if you can replicate this bug.' 
id=1297128	 'For a start being able to delete a history item from the list is great. You can look at the existing bookmarks for inspiration', Closing meta in favour of UI user story.' 
id=1302904	 'Created ', ', Pull Request Another one for ya Steph. Thanks!', Comment on ', ', Pull Request Looks great!', master d4df584a9b1d7ac71307fea3f0f4988f5a06fb99' 
id=1312922	 'Movie of new behaviour at ', Created ', ', PR: ', Very rough initial patch that only works well on iOS 10 for now.', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR: ', Farhan, you most recently worked with the Today Widget code. Can you take a look at my patch and see if it is going the right way?', Created ', widget without expand Hey Robin. So I can get this working without the "show more/less". I\'ve attached a screenshot of how it looks. The original reason this patch was written was because the spacing between the new tab buttons and the copied link button was missing. Things are still a bit tight but we have the advantage of not having to hide functionality. If you want to take the time now to update anything in the Today Widget I can do that now too.', (In reply to Farhan Patel from ', ) ', I'd still like to pin down why our release version still has the (preferred) darker background. See ", Instead of re-working the palette to better serve the contrast ratio, can we at least get the background dark again (on both lock/notif screen and homescreen) and open up the line-height to match?', (In reply to Robin Andersen :tecgirl from ', ) ', Apple renders the widget differently based on what SDK the app is linked against. The release version is linked against the iOS 9 SDK while Nightly is linked against the iOS 10 SDK. ', I don't think this is the right thing to do. On iOS 10 the widgets have a different style and we should follow that. If we use the vibrancy APIs, iOS will actually give us the right colors to use for text. Without us having to know if iOS will render the widget with Dark or Light style vibrancy.", Yea, Stefan has it right. I'll make sure that the color of the text matches the widget on both ios9/10", Created ', finaltoday.jpg Let me know what you think of the colors/alignment in this one. I've included both iOS9/iOS10 in the screenshot.", Woops. Don\'t mind the "Show more" thats appearing. I\'ve disabled that and it wont appear in the actual widget anymore.', Created ', ', Pull Request I changed the widget to use the tint color property more to set the desired colors. This allows UIVibrancyEffect to work correctly on iOS10. On iOS9 I just set the tintColor to white manually. I also added some spacing between the copied link button and the rest of the extension.', Comment on ', ', Pull Request LGTM', master ', v6.x b5b1093' 
id=1130771	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1093898	 
id=1314704	 
id=1304424	 "I can't reproduce this on master c0c43446959073a74b1b41f51acdda9f28c808fe Is this still happening for you? If it is feel free to reopen.", Tested on 0f93b9b14de02 on devices running iOS 9.x and iOS 10.0.2. The issue is not reproducible on the current build. Will re-open if the issue is re-encountered.' 
id=1295153	 "Activity stream is enable now in nightly and beta. I've added a configuration flag in AppConstants.swift. The first phase of AS is pretty similar to top sites. I dont think users will need an opt in flag. master fdc3684c7c071328eb40bda08a8740dbec6fff41" 
id=1301798	 'Created ', Pull Request Some simple UI fixes based on what bbell saw from screenshots.', Comment on ', Pull Request LGTM!', master 8e656ea58828f6906cac29c2d70259a905d1ef53' 
id=1307370	 'I can\'t seem to replicate this Catalin. Also looking at the code. It seems both the "Change Passcode" and "Turn off Passcode" pages use the same logic. So it should have been fixed in both. Could you check this again please. Sorry! I tested this in a ios10 iPhone 6s Simulator. Running master f43a1d35b3e6b0d7f4e356abfe65bfbb7443f3ad Thanks!', I can't reproduce either on latest master. Probably, I was having an older build installed when I saw this." 
id=1314697	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1310300	 'Created ', Link to Github pull-request: ', Comment on ', Link to Github pull-request: ', Looks good. Too bad you can't actually mark it as deprecated so that the compiler actually shows it." 
id=1294898	 'See Storage/DefaultSuggestedSites.swift. ni jhugman who created that file in the first place, and is conveniently geographically located to test -- this might be an easy thing to tweak, if we have the assets. Marking tracking? to decide whether or not this is worth doing for 5.1.', Talked with sleroux today, we are already code complete for 5.1 and they want to do the RC release on Monday. FWIW from an l10n perspective, we don't need this in 5.1 - it can definitely wait a later release", Currently the suggested sites can only be localized on a per-set-of-suggested-sites basis. So the simplest fix is to add a en_GB specialization of the whole set for the domains (en.wikipedia.org, amazon.co.uk, twitter.co.uk) and reuse the titles and assets. Only the amazon.co.uk asset will need to be changed.', Created ', ', Pull Request', Any reason to define these here instead of simply as an NSLocalizedString? That way, each translator can provide the Amazon-specific URL for their locale, and we wouldn't have to maintain this list ourselves.", To be honest I'd prefer not to have these kind of settings exposed to localization (that's the same approach we're trying to build for search). Anyhow, that's Delphine's call in case.", Comment on ', ', Pull Request OK, works for me then.', master d5df9da97892c0560d0b19f462dbaf65b6466bcb' 
id=1311656	 'Created ', ', Pull Request', master ' 
id=1267593	 'Created ', Please see the attached screenshot for more information.', Can you still reproduce this on a device with the latest master?', Tested with latest master 1649ceb8. The issue is reproducible following the STR from the description.', Created ', Tested on latest master 1649ceb8', After investigation, sometimes the Today widget is not called when it is displayed. I have not managed to figure out why that is. Setting breakpoints in init, viewDidLoad and viewDidLayoutSubview confirms that when the widget appears, these functions are called as expected, however when it is not displayed, those breakpoints are never hit.', Haven't been seeing this lately. Will reopen if we see it again.", Created ', Screen Shot 2016-10-17 at 16.22.39.png I'm able to reproduce this issue on latest master (6a18631e369) running on iPhone 6 Plus (9.3.5) STR: 1. While in landscape, swipe down from the top of the screen to open Today view. 2. Scroll Fennec(master) widget out of view 3. Dismiss Today view 4. Switch to portrait and open Today view 5. Scroll Fennec widget into view Result: The widget buttons are missing I'm can't reproduce this issue on other devices", * I can't reproduce this issue on other devices", I think I fixed this in another patch. I can't reproduce this anymore." 
id=1298918	 'For phase 1 we can display recent history instead of highlights. This will let us ship AS faster and we can work on smarter highlights for phase 2.', Both Desktop 1 and Android 2 know when a bookmark was created but I can't seem to find this on iOS. The best thing I can find is the local_modified/sync_status properties that might be used to infer the creation date but doesn't seem reliable. Do we just not store this information on iOS? 1 ", 2 ', At present we only store modified times. Creation time isn't present in the Sync bookmark record format, so we wouldn't be able to sync it in or out. ", . We could add it as a local column, or as a table with ON DELETE CASCADE to associate a GUID to a creation time, but of course we'd only know the creation time for bookmarks created on the local device. Android and desktop either lie, using server-clock modified timestamps, or return NULL.", Created ', ', Link to Github pull-request: ', :rnewman mind checking out my SQLite queries? I'm not the greatest at SQL and you wrote most of it in the codebase so far :)", For easier reading of the full query: ', Comment on ', ', Link to Github pull-request: ', See final comment on PR!', master ' 
id=1280460	 'Tested on: Build: 5.1b3 Device: iPad mini 4 iOS: 10b6 The issue is not reproducible on the current build.', Verify on 10 beta 7', Tested on 5.1b3: Device: iPad mini 4, iPhone 6 S iOS: 10b7 The issue is not reproducible following the above STR.', Reopening as I'm seeing on today's master. iOS 10, iPhone 7.", Created ', IMG_2366.PNG', Created ', Screen Shot 2016-09-27 at 15.42.44.png Similar issue on an iPad Air 2 running iOS 10.0.2/latest master (0484a51f)', Created ', IMG_2505.PNG FWIW, release shows a darker bg; not sure what we're doing differently.", Created ', ', Pull Request I've redone this using UIStackview now that we are ios9+. Let me know what you think!", Comment on ', ', Pull Request LGTM with PR review comments addressed.', master ', I've redone the entire layout for the TodayWidget. I think I've been pretty careful to avoid any regressions but some double checking would be much appreciated. Make sure to try different screen sizes." 
id=1314690	 
id=1300503	 'This is a weird one. The Today widget was denied from opening URLs. Here is the error. "The request to open "org.mozilla.ios.Fennec" failed. The request was denied by service delegate (SBMainWorkspace) for reason: Security ("Widget extension <Today:32811> is neither visible nor entitled, so may not open URLs"" But the extension is visible! Don\'t know what to do with this one.', Check out entitlements.', I can reproduce this issue on an 9.7" iPad Pro with iOS 10.1 using the STR. Not entirely sure if the error that Farhan sees is related.', Here are simplified steps: 1. Put iPad in landscape mode 2. Arrange today widgets in such a way that the Firefox one is last. I have these on the right side of my screen: "Maps Nearby", "Batteries", "Hot Questions" (Stack Overflow), "Fennec" 3. Open today widget, hit New Tab button Nothing happens when you hit New Tab. But things do work when I rearrange the widget and put Fennec on top. This makes me think this is related to the fact that the Fennec Today Widget is partially obscured. Which makes me think that the error that Farhan sees is actually relevant to this bug. It says \'is neither visible\' ... The Today Widget has had a ton of layout problems. i think it may be time to revisit it. And see if it correctly calculates its bounds, size, etc.', Removed this bug from blocking "', - meta UI bugs in Top Tabs". I don\'t think it has anything to do with top tabs.', I hope this bug will go away when we have dealt with ', - I am now thinking that the buttons may be obscured by badly aligned labels for the Go To Copied Link button.', This works for me on my iPhone 6S on iOS 10.1.1 on the Firefox Nightly build', Please reopen if you find it to be reproducible', I found it to be reproducible on iPad Pro iOS 10.1.1 still, the widget text seems to be cut off near "Open in Private Tab"!', This is an issue on Apple's end. If you add the News widget to your Today section and then use stefan's steps. Yo ll notice that once you scroll down to the firefox extension (and it isnt responsive) going back to the news widget at the top it too won't be responsive. There is an open radar for this too. ", ', Also this answer suggests deleting/adding the extension again after you install via debugging.' 
id=1281901	 "So running the code migrator only shows a few files that need to be changed in Shared but thats it for moving to 2.3. The bigger problem are some of our dependencies: SnapKit's 2.3 branch is failing to build on Carthage but should be fixed soon since it's a pretty active project. XCGLogger might need some work to convert to Swift 2.3 since there hasn't been any update from the author yet. Project isn't large so it shouldn't be a problem if we need to SwiftKeychainWrapper hasn't started a 2.3 branch but is somewhat active so we might see a 2.3 branch soon. If needed, the project is small so converting it to 2.3 won't be bad. Other than that all other Swift dependencies have 2.3 branches in flight so I don't see too many issues considering the jump from 2.2->2.3 is pretty minimal.", WIP branch: ', See PR comments for updates: TL;DR: Just need to update our code with the recent Alamofire changes and we should be good to go in Xcode 8.', If yo re looking to use Carthage to build the dependencies using Xcode 8, 1. Download Xcode 8 GM 2. Switch the toolchain Carthage uses to build with by using 'sudo xcode-select -s <path to Xcode 8 GM>' 3. Make sure you remove your Carthage/ and Cartfile.resolve files prior to ./bootstrap'ing", Taking a look at this now. Unfortunately, as I go through and fix these Alamofire errors, it unlocks a lot more errors like the ones fixed in the linked branch, so it's difficult to judge exactly how close we are to completion.", I had a feeling there was a can of worms being opened =( If there is anything you want help with feel free to let me know. I'll go ahead and assign this to you.", Created ', ', Link to Github pull-request: ', Rebased and updated. There turned out to be a ton of other fixes needed after the Alamofire changes, but things seem to be building now. There's one new API change that I wasn't quite sure how to resolve -- see PR.", Comment on ', ', Link to Github pull-request: ', Looks good! Excited to start using Xcode 8 =)' 
id=1315784	 'Created ', ', PR: ', I would prefer to merge this now and then do followup bugs to fill in the blanks with new testcases for those parts of the app that we do not cover fully.', Comment on ', ', PR: ', LGTM!', Comment on ', ', PR: ', change seems straightforward', v6.x dcde3ce' 
id=1314681	 
id=1309601	 'Created ', ', PR', Comment on ', ', PR Feedback in the PR!', Comment on ', ', PR Great job - patch is looking good!' 
id=1314260	 "Bryan Bell asked for this to be a white color a while ago - I'll fix this.", Created ', ', PR' 
id=1315362	 "Are there any issues being able to enable then disable bidirectional bookmark syncing? I vaguely remember that once a user turns it on they can't go back.", Once you turn it on, turning it off will have undesirable results -- you won't see new, unmerged remote bookmark changes in the UI. That's the motivation for making this a debug setting, rather than a real setting: it's so engineers can opt-in to a process they understand.", Created ', ', Link to Github pull-request:', master ', v6.x 47b8cc1' 
id=1130494	 
id=1291325	 "This issue might be specific to iPads. I've tried on an iPhone 6S running iOS 10 beta 4 and I couldn't reproduce but I could reproduce on an iPad mini with the same OS", Looks like it. I had to swipe the menu to reveal the item as the menu is currently broken.', *** This bug has been marked as a duplicate of ', ***' 
id=1250783	 "Copying :markh's additional info from ", : """ Note that to try and help us mitigate the pain of multiple device concepts, desktop now writes a |fxaDeviceId| to the client record, which is the FxA device GUID. The expectation is that this will (a) help later Sync clients to determine whether a client record came from an FxA-device-aware client (eg, to prefer the FxA device info over the Sync info), and (b) to allow Synced Tabs to indirect back to the FxA device (tab records have the Sync client ID rather than the FxA ID). So it probably makes sense for Fennec to do the same until we actually *do* kill it with fire. """', We definitely want it -- we want push, we want strong device identification, and all that other 21st-century jazz :) We can do the same kind of Sync client record hack that desktop does, but I'll split that out into a separate bug -- handling the stuff from desktop can be done immediately. I'll take a look at the API a little later. Maria, can we get an Aha card for this? This blocks any push notification work that's already on the boards.", (In reply to Ryan Kelly :rfkelly from ', ) ', Comments on the API: * The device descriptor should be at least as descriptive as <', >. That is, my iPhone should report formfactor="phone", device="iPhone 6S", not just "mobile". We\'re going to have TVs, tablets, phones, watches, laptops, desktops, and refrigerators here, not just phone-or-desktop. * Presumably we don\'t bump createdAt if the device ID has already been seen. * POST /device doesn\'t give much clarity around what happens if this session is already registered. It implies that if the device ID differs, it\'ll 400, and if it\'s the same it\'ll update metadata, but it\'d be nice to be explicit. * Similarly when I POST /account/create, and I specify a device bundle that\'s already associated with an existing device, what happens? * GET /devices should have some kind of 204/delta response to avoid fetching the entire list every time.', Here is the Aha card: ', Thanks Richard, I've filed an auth-server bug to review the API based on your feedback: ", ', Do you mean "304" here?', Here's my progress (does not work) if someone wants to pick this up : ", Hey Edouard, I skimmed over this and it looks pretty great! Are you looking to keep working on this or transfer it over to someone else potentially on the iOS team? Either way, it'd be great if you could open up a PR to the main repo to make it more visible and make it easier to diff/review the existing work. Thanks!", I'm not sure I'll have enough time to work on this. tlacroix contacted me today, maybe he'll carry the flame?", I looked into this for the last week and Nathanael is going to pick this up. The in-progress PR is ', To-do: Save fxaDeviceId and deviceRegistrationVersion when the registerOrUpdateDevice succeeds. - call Profile.setAccount(...) in the completion handler of registerOrUpdateDevice to save the account. More error handling: - recoverFromUnknownDevice() - logErrorAndResetDeviceRegistrationVersion() - handleTokenError() Resources: Android and Desktop have the function implemented, checkout: ', Firefox Accounts Server API is documented here: ', Future work: Add UI to change device name. (registerOrUpdateDevice works, just the UI needs to be done)', The only things left to do now are saving fxaDeviceId and deviceRegistrationVersion; and calling Profile.setAccount(). The working branch for this is currently: ', I've been working on this as a precursor to ", , so assigning it to myself. I've been pushing cleanup/refactoring commits to the same branch at ", .', Created ', ', Link to Github pull-request: ', I think this is ready for an initial review pass. Planning on adding some comments to the PR soon.', Comment on ', ', Link to Github pull-request: ', I just went through the PR and dropped some comments/questions more about the code and some things I saw since I'm not 100 on the account services stuff. I'll defer to the :rnewman/:nalexander for this.", Comment on ', ', Link to Github pull-request: ', Updated with cleaned up error handling and other review comments address. To decrease the scope of this bug, I dropped the WIP code we had to add the fxaDeviceId to the Sync client records; we can that add that in a separate bug. Flagging sleroux/rnewman in case either of you are up for reviewing this now. If not, I'll defer to nalexander once he's back from PTO!", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Namely, ', .', Comment on ', ', Link to Github pull-request: ', Skimmed over and left some comments - mostly just nits/code style stuff', Comment on ', ', Link to Github pull-request: ', Nick, it'd be great to get your eyes on this now. One uncertainty I had working on this PR was where we should do the device registration handling. I see that you proposed including this as a post-marriage state at 1 , though Richard suggested that it be separate 2 . Right now, the registration is handled when we actually access the account (in BVC 3 and SettingsTableViewController 4 ). I don't think this is correct as these are triggered by UI events, and we don't want to tie device registration to UI as you mentioned in 1 . The dependencies are a bit tricky since FxAStateMachine/FirefoxAccount don't have a reference to Profile, which we need to persist the updated account. Perhaps Profile can implement a FirefoxAccountDelegate, attaching itself in the lazy account getter. We could then call the delegate from FirefoxAccount.advance() whenever the FxAState is married. 1 ", 2 ', 3 ', 4 ', Comment on ', ', Link to Github pull-request: ', The mechanics here look totally reasonable. Conceptually, rnewman and I are aligned: device registration is an identity-attached service, like Sync or a Reading List or any other such service. In practice, however, device management will be consumed by essentially all other services (to support Push) and is much closer to the auth service itself. (I believe the FxA would have built it into the auth service directly if we had been ready to do so when the auth server was built; we only didn\'t due to scheduling and a desire to keep the auth server small and stable.) That suggests that registration should be *parallel* to FxA state advancement. That\'s a pain, since the account wants to own the device registration details as well. Therefore, I suggest to have the state advancement also try to register, and just accept that some registrations may fail. (We might have devices that are in the process of upgrading and fail to register for some time, but are still able to Sync, so one cannot assume that we always get a registration on any particular schedule anyway; that means we have to handle optional registrations, contrary to what sleroux suggested about making the registration required.) We want to use the device registration to Push-instigate a Sync after the account is verified on a different device, which means that we want the registration to be in place *before* we are Married (which requires a verified account). (I see we get this wrong on Android -- sorry for the bad advice earlier.) So I would add a "general step" to the login state machine that uses the `sessionToken`, if it\'s available, to register the device before doing the usual state machine. That is, we insert a "transient NeedsRegistration state" each time we advance the state machine. This also conveniently allows to keep track of *when* we registered, and re-register every week or month, which is a generally good practice. Does that make sense?', Comment on ', ', Link to Github pull-request: ', Updated to do the device registration step before the normal advancing. Having to set the FirefoxAccountDelegate to flush the profile after registration is a bit awkward, but I'm not sure of a better way to persist the device.", Comment on ', ', Link to Github pull-request: ', I'd take this as is, but do spend some time thinking about removing that delegate -- that's an unfortunate life-cycle coupling that we'd prefer to avoid.", Rebased and merged: ', Thanks for all the reviews and feedback!' 
id=1314404	 'work is done here ' 
id=1321061	 'As the product manager of sync, I would like to measure the health of sync on iOS because it will help me better prioritize (and understand the impact of) new features and enhancements.\r \r Further more, this is a prerequisite for the Sync team to start using event telemetry to measure feature funnels and product performance across devices. ' 
id=1328584	 'Created ', Last Month Section.PNG', Created ', Today Section.PNG', This actually happens on "Firefox Beta 6 - Build 8". I don\'t seem to have the privileges to edit the "version" section.', This is pretty major. Here is how you can replicate it. History is split into 4 sections Today/Yesterday/Last Week/ Last month. 1) Have a history in all 4 sections. 2) Delete history in the Today section. 3) Click on an item in the last section. It should go to the correct Item. Instead it chooses the wrong item. The reason why this doesnt happen that often is once you click on an item in a single section yo ll get new content in the Today section. And the issue will stop happening.", Created ', ', Pull Request', master ', v6.x d9020a33d4b43e9f209b256b2e3bc2a37096837a', whoops. Too many tabs. Wrong commit. v6.x 87ad08bf44e0f68d39e49ecdb5d3d82100386362' 
id=1308014	 'master == f43a1d3', // TODO: support longer GUID lists.', MaxVariableNumber should be 999, not 99. This implies that yo re uploading 1000+ deleted history items. Did you clear local history while Sync was enabled?", Oh, the 99 could be: public func markAsSynchronized(guids: GUID , modified: Timestamp) -> Deferred<Maybe<Timestamp>> { // TODO: support longer GUID lists. assert(guids.count < 99) which looks wrong to me. That should be MaxVariableNumber.', And the proper fix for this is to chunk in both markAsSynchronized and markAsDeleted, as we do in SQLiteLogins: public func removeLoginsWithGUIDs(guids: GUID ) -> Success { let timestamp = NSDate.now() return db.run(chunk(guids, by: BrowserDB.MaxVariableNumber).flatMap { self.getDeletionStatementsForGUIDs($0, nowMillis: timestamp) }) >>> effect(self.notifyLoginDidChange) } My bad for not filing the follow-up to do so\u2026', *** ', has been marked as a duplicate of this bug. ***', Causing crashes in testing and debug builds. Potentially can causes strange behavior for release clients. Moving to P1.', Created ', Link to Github pull-request: ', Comment on ', Link to Github pull-request: ', r+ with nits. Thanks for jumping on this!' 
id=1293468	 'Created ', ', Pull Request', master 7bbb5465571eace354212d163fdcb00e71b3d057', All the necessary code changes have been made. But I'm going to leave this open till I get everything set up on the buddybuild side", Lots of work has been done! And with the move to firefox-mobile. Its been a lot easier. There is still a little bit of work left though! - Tests arent running right now because compiling any scheme that doesnt use the FennecAurora build configuration breaks the build when CI tries to run (It tries to codesign but fails). The upside of code signing every build is that any build thats compiled is ready to be deployed with a few clicks. Move the FennecCI / FennecUnitTest schemes to use the FennecAurora configuration as well. - I'd like to get Danger ", working. Right now swiftlint runs. But unless you look at travis you dont see linting errors. Danger can leave a comment in the PR letting you know where the linting errors are. There is more we can do but thats all I want for now. This is pretty simple to setup in BB. - The UI on the BB website loads very slowly (I think) because we have way too many branches. Lets try to prune branches we don't use anymore. Stefan / Emily / James / Steph / Richard If it isn't too big of a hassle could you guys please remove any open branches that you know are not useful. I think we can easily remove all the closed/merged branches.", I've deleted merged/closed branches that are no longer needed that were mine and removed any open branches that were related to any debug/development build releases which should clean a lot of things up :D", I've deleted everyones merged in branches.", I think we can close this now we! - CI works on each PR - CI builds the app for each PR - Swiftlint does a basic check of code style - Unit tests run' 
id=1127020	 
id=1092566	 "We also talked about showing only 'Recently bookmarked' instead of letting people browse the classic hierarchical structure. Maybe that, combined with Search is enough?", Folder navigation seems out of scope for v1.0 IMO. I was merely bringing it up for a future consideration.', A v1 could be to flatten out all of the folders and just have one list as your back-up (for the one time you REALLY need *that* bookmark), with the core use case being served by search & recently bookmarked. Could that make sense? Do-able? Actual management should be on the roadmap for the future since I think we'll need to support that use-case going forward when FxA grabs hold as the central source of browser data 'truth'. We're just not there yet though.", We have a bookmarks page. I don't really think its useful to have these sub-meta bugs around (i.e. the bookmarks page will likely always have bugs, so we can never close this). Anyone opposed to just closing this (and the other bugs like it?)", Dunno, I kind of like the grouping under the meta bugs because I use the tree view in bugzilla a lot to get an idea of outstanding work per 'component'.", *** ', has been marked as a duplicate of this bug. ***' 
id=1302242	 'Created ', ', Pull Request', Comment on ', ', Pull Request Oops. Thanks for fixing this!', master 96ec621f41637cd4958feb2c3093e24c3e0bb5ca' 
id=1307441	 "I'll take a look and see if we can bundle the SDK only with nightly builds", Moving into this sprint to support weekly Mozillian build.', Not sure if there is an _easy_ way of doing this. The route I tried go down involved linking in Buddybuild and it's dependent frameworks using the `other linker flags` in the build settings instead of the `Link Binaries With Frameworks` phase. This allows us to link based on the configuration so we can have it link for Nightly but not for Beta/Release. To handle the optional linking at runtime, I created a wrapper class called `BuddyBuildSDK_Weak` written in ObjC that performs the `setup` selector. This allows the Swift code to call the setup method without needing the library to be linked since the performs selector would just be a no-op if BB isn't there. The missing piece to all of this is actually getting the framework to be copied over to the application. The `Link Binaries With Libraries` phase does a couple of fancy things like code signing. I tried to emulate this using a custom `Run Script` phase which would allow us to use a `User-defined Setting` property for conditionally copying the framework over. Alas, the application fails to run because the framework is missing an Info.plist that describes how the framework was built. Like the other libraries we have with the `Link Binaries With Libraries` phases, it looks like the BB framework needs to be part of the binary and not alongside of it. So I'm at a bit of a roadblock here. Other ways forward include: 1. Figure out how I can add the BB framework into the binary conditionally without using the `Link Binaries with Libraries` phase 2. Clone the `Client` target, name it DebuggableClient or something like that, and include the framework there It's worth noting that option 2 is the more pragmatic way of doing this kind of thing. Targets should define a fixed set of libraries that are built for an application instead of relying on build settings to optionally exclude settings. It just adds more bloat and another target just for linking in a simple framework :/", How about a stub BB lib, and copy or symlink the real or stub in a copy script before build?', This is what I'm doing for Focus .. ", Created ', ', Github PR ', master ' 
id=1314700	 "Spoke to Bryan and this concept won't be part of the MVP as we currently don't want the exact same content across devices." 
id=1292700	 'Created ', before.png', Created ', ', Pull Request Its all image changes except for a change in Alpha for the images. Instead of the alpha being present in the images I add the alpha to the color when creating the UIImage.', Comment on ', ', Pull Request LGTM!', master 6280a316450be23a420d508509bec549acfa1dca', v5.x 75e6a02', Tested on iPad Air 2, iPhone 6 Plus, iPhone SE. The Home Panel icons have been updated with sharper icons.' 
id=1311997	 'If we add this to the Core Ping (it is very similar to the search engine selection that we already have in there, so that sounds like a good place), do we need to talk to the telemetry team about adding a new field? Or can we just do that?', Georg, if we add a new field to the Firefox for iOS Core Ping, do we need to talk to the Telemetry team? Or will that just show up with no extra steps needed on the backend side things?', The job that generates the dataset for re:dash needs to be updated. mdoglio currently owns the mobile datasets, you should talk to him. The core ping schema also needs to be updated: ', I assume this is a data collection to answer a specific question? If so, we should make this an optional property and stop sending it once you have enough data. Before landing this will need data review: ', Created ', ', PR', Comment on ', ', PR Looks good to me as long as yo ve communicated this plan to the telemetry team.", This still needs a data collection review. Perhaps liuche would be best to look at this, although I think the bug needs more details about the question yo re trying to answer and how long you need this.", Benjamin, we need this metric for two reasons: * we need to measure the success/usage of the 'mailto' feature * we need to communicate to partners how often people use this feature We will need this for a good amount of time until we know we know we have chosen the best approach to engage users to use this feature. Ideally we keep this around for a long time so that we can keep an eye on it.", Note that the "core" ping was originally designed for low bandwidth consumption as it is sent very often. For that reason, it contains only minimal data that is critical long-term and no extended monitoring information. If it expands into a richer ping, the submission interval probably needs revising (for b/w and storage impact). Please also update the ping documentation: ', gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/data/core-ping.html', Data review occurs on the patch which updates the documentation, so there is currently nothing I can data-review. However, I can tell that I already don't understand the following questions: * How does this metric tell you about the success/usage of the mailto feature? * Do you record usage of the mailto feature in addition to this? * If the user never uses the mailto feature, do we still record this data/need to record it? * Are there a well-known set of possible values for this, or can it possible contain user-specific data? * Who is responsible for actually using the data, and how will that happen? Will the results be shared publicly? If report generation is a followup work item, is the bug filed/assigned?", Hey Benjamin, I\'m gonna attempt to answer the questions! 1. This metric will tell us how many people will switch their default mail scheme from the one Apple provides ("mailto:") to one of their choosing (e.g. Outlook, Airmail, Spark, etc.). 2. I don\'t think we record further usage of mailto as of now; I think this is the first step. 3. If the user never uses mailto, I\'m assuming recording it can still be of value because it would either tell us how many people don\'t use other mail providers or actually use the default Apple mail app. This would still be valuable in determining whether or not this feature is important to users. 4. There are set mail schemes we provide the user to choose; they cannot input their own so there will be no user-specific data. 5. This question sounds like Barbara can answer better than I can because I don\'t know haha', Hi Benjamin, 1-4 was answered already by Bryan. As for 5, I will be the consumer of this data. I was under the assumption to create my own report using re:dash. Could you help me figure out who is responsible for including this data into re:dash? We might also want, if permitted, share this data (the mail app usage) with the mail app partners.', I\'m a little disappointed in the answers here. The problem statement/question you\'re trying to answer keeps shifting? My job as data steward is to make sure that we are applying our principles of data minimization: collecting enough data to answer the question but not more, and for just long enough. If the original question is "measure the success/usage of the \'mailto\' feature" (', ) then it appears that what yo re recording here is insufficient to answer that question: yo re still not recording whether people actually use the feature. ", has a separate goal which is "tell us how many people don\'t use other mail providers or actually use the default Apple mail app. This would still be valuable in determining whether or not this feature is important to users." If that\'s your goal, then we don\'t need to collect this permanently and should plan on collecting data only for as long as it takes to answer this question. Barbara, in general we\'re trying to make as many results public as possible, to show transparency into the data we collect: is there a reason we need to share this data privately with partners instead of making it a public report? We Still looking to see an actual patch, which is what I do the data review on.', I understand (and share) your disappointment, what we currently have for iOS metrics is in general not sufficient. iOS is behind in regards to (UI/Event) telemetry and we aim to solve in 2017 the latest. In the meantime, I asked the engineering team if there is anything we can do to at least understand if people use different mail app providers. It was suggested to put this in the core ping, to at least keep track of that event/setting. As for sharing the data privately with partners, sorry, if I was not clear, this can definitely be shared publicly, if you and legal are ok with it. Thanks bsmedberg for expressing your concerns.', I don't know too much about what our capabilities are of iOS telemetry as of now, but I think Core Ping would suffice - just seeing which mail provider a user selects tells a great deal of what's their provider of choice (since there's only one choice they can choose). I personally think it would give even more robust data once we implement the discoverability of this feature with Robin's UI. But that's as far as it goes for me for info on how we can track/understand more fully how people use this feature. Pinging Steph for probably more insight.", We don't have much telemetry in Firefox for iOS at the moment unfortunately. We only support sending the CorePing and some events alongside of it (Search selection). We don't have any UITelemetry implemented.", v6.x 1d40ac7', We are ok with it, and actively desire public sharing when possible. I am still waiting for a doc update for the data review. I don't understand whether ", is relevant, since I'm not asking for event telemetry: I'm asking for you to either only send this if the user actually uses mail integration, or to include a counter of the # of times people actually used mail integration.", (In reply to Benjamin Smedberg :bsmedberg from ', ) ', ', reviewed by Chenxia - see bug ', ok thank you, I didn't realize there were data reviews going on in multiple bugs." 
id=1320668	 'Reproduced using the latest beta (11/28) on my iPhone 7+', This is actually a pretty weird edge case and most likely youtube's fault When you switch back to mobile Youtube via the banner Youtube sets a cookie with a few preferences. Those preferences are making the desktop version use the rtsp:// protocol for some reason. They are probably doing some user-agent splitting of their own to build the preferences cookie.", Sounds like this is WONTFIX', Yup, this happens on Safari too!! (just tested on my iPhone 6S)' 
id=1307178	 'Created ', ', Link to Github pull-request: ', Patch for integrating telemetry into the AS Panel', Created ', Onyx Client The OnyxClient library that reports the events/sessions to the server. Currently FF is using the 0.0.2 but after review comments I can publish a 0.0.3 with fixes!', Overall looks great. My only suggestions are related to simplifying the amount of code that is added to the ActivityStreamPanel.swift. If we can limit the amount of code there that would be awesome, makes things less noisy. The other suggestion I had was with putting all the telemetry related files into their own folder. Looks like there is already a Telemetry folder. lets add it in there? Also if you do this. It looks like there is a "ClientTelemetry.swift" in the root of the project. that should also be in the Telemetry folder.', master ' 
id=1314692	 '*** ', has been marked as a duplicate of this bug. ***', *** This bug has been marked as a duplicate of ', ***' 
id=1126993	 'AFAIK, this was fixed in ', . I also don't think this is a meta bug really." 
id=1325492	 'Created ', Pull Request', master ', v6.x d9020a33d4b43e9f209b256b2e3bc2a37096837a' 
id=1310159	 'Created ', screenshot2.png', Created ', ', Pull Request', master ' 
id=1130505	 
id=1306043	 'Created ', ', Link to Github pull-request: ', A basic UIWebView implementation built on top of ', . Still has a long way to go, but basic page navigation, back, forward, etc. are working -- enough to do some general performance testing.', Landed in branch uiwebview: 9d83c1f91dd5fb296280406b150c3cc7f0a5e10b' 
id=1280447	 "Tested on: Build: 5.1b3 Device: iPad mini 4 iOS: 10b6 The issue is reproducible following these steps: 1. With the phone placed in landscape, go to google.com 2. Tap the Share Menu. 3. Tap on the Message icon 4. Close the menu by tapping 'Cancel'. 5. Change device orientation.", Created ', Link to Github pull-request: ', See ', for the root cause of this weird issue.', Comment on ', Link to Github pull-request: ', Nice find!', master 5a63555e72c0a51caf682dbf93ca2f829fd02793', v5.x 3c400f4', Tested on iPad mini 4 and iPhone 6S running iOS 10b8 on Firefox 5.2b2. The menu is not re-opening when following the steps to reproduce.' 
id=1314685	 "With the exception of desktop bookmarks, other bookmarks and history items that live in the sync ecosystem should be populating the highlights section already. For bidirectional bookmarks, there is a separate, larger project underway to find ways of solving that. Since that is out of scope for this breakdown/user story, I'm going to mark this as RESOLVED as everything else should be syncing." 
id=1289578	 'Created ', ', Pull Request', master 6d4f78dad385c4d1f5c009dfc812e0d1bba9d56c' 
id=1237577	 'More research: SWXMLHash seems only used for parsing well known XML files (e.g. opensearch.xml), and RaptureXML is used parsing HTML to get Favicons. This suggests we need to think again. This may mean a departure from downloading and parsing HTML in swift, or adopting another library that is supported.', Created ', ', Pull Request I agree with James, it isnt quite clear if SWXMLHash is okay with HTML. It works fine and some of their examples are examples of small HTML pages but it seems more like a library focused on XML and parsing properly structured XML based on the github page. I've submitted a PR for this. It's just a PR for everyone to see how it would look with SWXML. I didn't remove RaptureXML but if I get the go ahead with this I'll add that to the PR and squash after. I've also left some comments on the PR. Would love any feedback. If we want to be safer it would be better to pick a new library that specializes in parsing html and switch to that. We could then use that new library to parse the XML that SWXML is currently being used for and remove SWXML. The top 3 libraries I found for this are ", ', ', Well. After some more testing. SWXML doesn't work with many pages. More times than it should it falls back to the favicon. I'll look into a new library if we want to close this ticket that way.", So, I agree that if SWXMLHash doesn't work reliably for favicons then we should choose another library. We only parse XML/HTML in 2 places in our codebase, Favicons and OpenSearch, and we use two separate libraries to do that each of those things. One of those libraries, RaptureXML is no longer maintained, is not carthage compliant and is written in Objective C. The other is SWXMLHash, hence the idea of moving Rapture code over to use SWXMLHash. The ultimate aim of this issue is to unify our XML/HTML parsing code to use the same library - one that is actively maintained, carthage compliant and, preferably, written in Swift. I shall amend the title of this bug to reflect that.", (In reply to farhanpatel.17 from ', ) ', I've had a look at these. Ji seems to have the cleanest API. I like the way that Fuzi uses errors so you can get actual information from the API as to why things have failed, but the author isn't using the best code to create the project so I would be a little wary of the results. All 3 are actively maintained, swift and carthage compliant. My usual approach at this point would be to pick a couple (probably Ji and Kanna), and run a comparison between the two, seeing what the implementation would look like and running performance metrics. However, that is quite a lot to ask a contributor to do :) If you would like to do this, by all means do. If, however, yo d rather not, leave it with me. I'll run the comparison tests and post back here which library we'd like to go with, if yo d like?", It would be best if you could compare the libraries. Yo ll have a better idea of what performance metrics are important to the project. I can submit a PR once you choose a library. Thank you.", Comment on ', ', Pull Request I'll run the comparison tests on the possible replacements and let you know which one we decide to go with. Thanks for the PR :)", (In reply to Emily Toop (:fluffyemily) from ', ) ', Maybe a little bit late to join this topic, but I'm a little bit curious about why you think Fuzi's author isn't using the best code to create the project though? AFAIK, Fuzi is careful about libxml2's API usage and I has been memory leak free ever since its first release, and many of those libxml2 memory leaks were not fixed until recent versions of Ji or Kanna. What I personally think about these 3 libraries is that: 1. Fuzi is the fastest(due to heavy use of lazy) and the only one with error reporting. 2. Kanna has the most comprehensive CSS -> XPath conversion logic. 3. Ji has some convenient methods such as parsing from URL directly, but no CSS support TBH, I think CSS -> XPath conversion shouldn't be used at all since it's just using Regex to do the trick.", How these 3 projects were created, AFAIK Fuzi: Based on Ono, fix some leaks and bugs, improved error reporting. Ji: Initially based on hpple, but did many optimizations & reduced a lot of copy operations Kanna: Pretty much inspired directly by nokogiri, and the implementation of the library seems to be original. For objc libraries, Ono was much faster than hpple due to the heavy use of lazy initialization, Fuzi just took that from Ono.', Thanks for the well thought out analysis! I cant speak for Emily on why she didn\'t like Fuzi. We haven\'t had the chance to work on this and if you would like, you are welcome to assign this to yourself and submit a PR using a library you think would work best. I would prefer a lazy loading library because in the case of parsing HTML we only use the information in the head tag. We also don\'t need any fancy css or XPath support. The XML libraries are used in 2 places 1) Parsing <link rel="icon"> from HTML web pages 2) Parsing OpenSearch formatted XML files A simple metric you can use to compare the speed of the libraries for the specific use cases is to use the Instruments Time Profiler to get a rough estimate on performance. This would also be helpful to make sure there aren\'t any regressions.', Any update? I'm considering Kanna, Ji, Fuzi, etc. for a similar kind of project. So far I am leaning toward Kanna because the author seems to be the most up to date, such as supporting the new Swift 3 beta. Advice is much appreciated.", If you don't need to use CSS selectors, I think Fuzi or Ji might be better. For Swift 3, both Kanna & Fuzi has a branch for Swift 3(I just finished migrating one of my personal app that uses Fuzi and it works well). From cocoapods info page Fuzi seems to have a much smaller integration size than Kanna which was the reason I picked Fuzi at the very beginning, they ain't that different after all though", Now seems like a good time to fix this. There are a lot of depreciation warnings related to SWXMLHash. I'll look for a new library that fixes these warnings and is compat with swift 2.3/3.0", Created ', ', Pull Request', Comment on ', ', Pull Request Awesome!', master 2523a9189e1125812be925942d6566668c8477ce' 
id=1319572	 'Created ', ', Link to Github pull-request: ', v6.x: cfa2b09' 
id=1305574	 'Created ', ', PR', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR Works pretty well - just left some comments to check out to fix up some things.', Comment on ', ', PR LGTM! Just needs a rebase and I can land away.', master ', "Dismiss" made me think that the context menu would get dismissed. But, it turns out that the specific highlight is removed from the Highlights list! So, I\'m wondering if it would confused other users as well?', I thought that too as well as I was making it - I'll ask Bryan Bell for more direction", On the same topic, I just recollected, even the "Remove From History" option was confusing. And this was my thought process while tapping that option: We are also implementing the same context menu for top sites (', ). So, the same options would be used for it as well. Does it remove both the highlight/top-site and the history entries? Or, does it remove just the history entries? After tapping it looked like it removed the history entry. But, if I close and relaunch firefox, would the highlight/top-site remain? Would a user want to delete from history, but make it remain in the highlights/top-sites? May be, only one of them, the Dismiss option and the Remove From History option, is necessary? It would also make the context menu look smaller and cleaner. After adding the new tab functionality, it would have 7 options: Open in New Tab Open in New Private Tab Bookmark Delete from History Share Dismiss (for highlights) / Remove (for topsites)', Hey Bryan (bell), do you have any thoughts on the discussion above? Not sure if Bryan M reached out on or not.', Sorry, I have more to add :) Though I'm currently only testing this 6 option context menu in the simulator (as opposed to in a device), the number of options and thereby the size of the context menu is being a bit bothersome. When I'm done looking at the context menu, I try to dismiss it by clicking on the area outside the context menu, usually on the bottom side. But, I end up mistakenly clicking the last option (Dismiss) and much to my disappointment, the highlight/top-site gets removed from the AS panel. So, essentially I'm hinting at wanting lesser number of options in the context menu." 
id=1314481	 'We also need to update the core ping schema as documented at ', The ping field name is "defaultNewTabExperience" - i know this is not an awesome name :-/', Created ', ', PR', v6.x c92339b' 
id=1303731	 'Moving into P1 for this sprint since Bryan is waiting on reviews for the his existing P1 bugs. Also is closely related to UI work being done this sprint.', *** This bug has been marked as a duplicate of ', ***' 
id=1131272	 'All dependencies fixed, so closing.' 
id=1309342	 'Created ', ', See mockup for measurements and revised design for rich highlight and regular highlight rows.', Created ', ', PR', Comment on ', ', PR Looks good just left some comments about a few things on the PR.', Created ', Simulator Screen Shot 03-Nov-2016, 7.37.45 PM.png Long titles are making the cell heights seem unequal. For example, if the title is 3 lines long, the cell height is expanding to accommodate that. If the title is just a line long, the cell height remains as intended. In the sample screenshot, yo ll see that the first 2 highlight rows have a bigger height compared to the rest of the rows in the highlights table. I'm assuming that this is ok given the idea is to add more context to these highlight rows. Nevertheless, I just wanted to point it out so that you might consider it if necessary." 
id=1324531	 'Created ', ', Pull Request', master ', v6.x 65ffa16e677206aeb77649b623a4e6f5882139cc' 
id=1297703	 'Created ', Link to Github pull-request: ', Broke out my DB work for this patch and kept this PR to just including the metadata parser and adding the plumbing in place. If you want to see the metadata being generated, place a breakpoint on the TODO line in Profile.swift!', Comment on ', Link to Github pull-request: ', LGTM!', *** ', has been marked as a duplicate of this bug. ***', master ' 
id=1314394	 'I believe through already filed bugs such as dismiss/delete (', ) and the algorithm for influencing highlights, this should be considered completed. We don't have other methods of 'managing' highlights for the MVP." 
id=1318516	 'Created ', ', Pull Request', Comment on ', ', Pull Request Sounds like a good idea to me.', Should this be uplifted?', Yes! Sorry I forgot.', v6.x 8dca468' 
id=1130767	 
id=1323993	 'Created ', IMG_0032.PNG', Created ', Pull Request', master ', v6.x 2e7d6dc06d1770cc0f40e1c0803f382262410665' 
id=1313147	 'Created ', ', Github PR ', Includes scheme changes for ', .', Comment on ', ', Github PR ', Awesome! lets get this in asap :)', master ' 
id=1317748	 'This behavior is also present on the Reading List panel. We might also want to think about this interaction and if we want to block engagement with the panel while the URLbar is active, or if we would cancel the active URLbar if the user taps/scrolls within the panel.', Created ', ', Pull Request The keyboard is only dismissed when the user hasn't typed anything. Also scrolling the topsites does not hide the keyboard.", master ', v6.x 47b151e' 
id=1312842	 'Created ', ', PR: ', This patch adds the `NSPhotoLibraryUsageDescription` and `NSCameraUsageDescription` items to our `Info.plist`. These are mandatory when linked against the iOS 10 SDK and running on iOS 10. Because they are currently undefined, we crash when we try to save an image to the photo library or when a web page wants to access the camera.', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', PR: ', LGTM!', How we should translate those strings? There are no comments and string ids are not helpful either.' 
id=1127022	 
id=1308215	 'Created ', ', Github PR Instead of sinking time into getting the Carthage dependency up right now, I've committed the JS bundle directly into the repo temporarily until we can get a Carthage dependency up and running for it.", Temporary fix: master ', Moving to P2 as this should be something we do before we ship AS with metadata parsing.', Created ', ', Link to Github pull-request: ', Created ', WebMetadataKit Library The library', Comment on ', ', Link to Github pull-request: ', Makes sense to me!', master ' 
id=1299628	 'Created ', ', Pull Request This will be one of many PR's to add tests to AS. But first lets get the old tests working to get builds passing.", Is the goal to move towards using XCUITests for new integration tests?', Yea, I've been trying to write more and more tests with XCUITests. It still has its quirks so I understand if the team doesn't want to use it. And because there are no external dependencies I think having it alongside KiF is fine.", Comment on ', ', Pull Request Fixes look good, but the accessibility labels need to be tweaked.', Comment on ', ', Pull Request Looks good! It'd be nice if we could also fix accessibility for the cell pagination while tweaking this stuff.", master f4f90b441fe53255e17649618db88d15fc7c8722' 
id=1307550	 'Related: We also want to collect some form of telemetry if possible for this new feature. Evaluate alongside the mailto: feature breakdown.', Moving to P1 as breaking this down is happening this sprint.', *** ', has been marked as a duplicate of this bug. ***' 
id=1127016	 "I don't understand what is it.", This, rather confusingly, is a meta bug to track work relating to supporting back navigation in the browser.' 
id=1314702	 
id=1253112	 'Relevant API documentation: ', I can take a stab at this. Putting :rnewman as a mentor :)', Created ', ', Link to Github pull-request: ', I don't understand swift, but one thing that stands out: The way the spec is written, we can't know the batch semantics of the server until we make the first post (and thus have already enqueued a number of records). It's not clear this is handled here - or maybe the intent was to deduce the server semantics from the result of the info/configuration endpoint and fail if we thought the server was going to give us a batch but didn't? Best I can tell this patch doesn't hit info/configuration at all, nor use the batch limits it returns, so maybe that will become clearer in later versions of the patch?", On iOS we don't support custom servers, so we don't have to worry too much about non-supported batch operations; see ", for using i/conf.', (In reply to Richard Newman :rnewman from ', ) ', FWIW, I believe the plan for rolling out the server side of this is "slowly" :) It\'s tricky to fully simulate a production load, so I believe ops will enable this per-node and disable it if any problems are found (then presumably tweak, rinse and repeat). In practice, this means a patch that assumes batch semantics can only land once the config is enabled for all nodes and ops are confident they will never need to turn it off. (Richard says something similar in ', , but I thought it worth explicitly calling out here)', master ' 
id=1301787	 "I can't reproduce this. If anyone has STR please feel free to reopen Tested on master 14c580701f7d49bed4812e46fba433926218c9b9" 
id=1314696	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1130507	 
id=1316204	 'edit: I was being sarcastic at the end there. I even added an emoji to signal that. But bugzilla removed it. :(', Darn. I like the emojis too. We might be able to make the regex less strict in its checking or find a way to match against a unicode character for the emoji. Looking at the regex, I'm sure weakening the the regex check devalues the test a bit but I'm not sure if it's that big of a deal. A more forgiving regex could be: ^Firefox-iOS-Sync/ 0-9\\\\. + .* This would match the prefix of the strings and version and just leave the app name part to be whatever.", The User-Agent header must only contain ASCII. See e.g., ', . Don't weaken the test, fix the code.", A more thorough response: RFC 2616 specifies that User-Agent consists of product and version strings, which are composed of tokens. Token is defined as token = 1*<any CHAR except CTLs or separators> separators = "(" | ")" | "<" | ">" | "@" | "," | ";" | ":" | "\\" | <"> | "/" | " " | " " | "?" | "=" | "{" | "}" | SP | HT CHAR = <any US-ASCII character (octets 0 - 127)> CTL = <any US-ASCII control character (octets 0 - 31) and DEL (127)> product = token "/" product-version product-version = token User-Agent = "User-Agent" ":" 1*( product | comment ) Examples: User-Agent: CERN-LineMode/2.15 libwww/2.17b3 This is why Android has MOZ_APP_ASCII_DISPLAYNAME, so that the User-Agent string it sends is plain ASCII. If you don\'t do this correctly, you make Firefox diverge from the HTTP specs, and that\'s a bad thing.', Created ', ', Pull Request Lets remove the emoji as failing tests are not a good thing to have.', Why not just fix the UA while keeping the emoji in the app name?', We could do that. If it was something important it might have been worth it to make changes to how we handle UA and display names. But for something small like this the path of least resistance is just to revert it back to normal. :(', Heh, OK. I think the fix would be pretty straightforward if we wanted to keep them though -- we could just fall back to "Firefox" instead of the app name if the AppConstants.BuildChannel == Aurora/Beta/Nightly. Up to you! :winkemoji:', Ah I see. I'll look into this. But for now, I'll close this one. master ", v6.x 3a0227a' 
id=1304203	 'Created ', ', PR', Comment on ', ', PR Just needs the string to be fixed/moved and is good to go.' 
id=1314689	 "I'm assuming this is for Top Sites specifically since we already have a bug for higlights: ", I'm going to mark this a duplicate of ", since dismissing is a subset of actions under managing Top Sites. If this is incorrect or there is something I'm missing feel free to reopen. *** This bug has been marked as a duplicate of ", ***' 
id=1280456	 'Saw this on my iPad Pro yesterday (iOS 10 Beta 4)', Tested on: Build: 5.1b3 Device: iPad mini 4 iOS: 10b6 The issue is reproducible.', Possibly related to intrinsticContentSize being zero.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', Passing the review over to you but if you don't have an iOS 10 device to test on I can assign to someone else!", Comment on ', ', Link to Github pull-request: ', I think this fix is doing too much and causing the MenuView layout code to be called too many times when the menu is displayed. I have left a suggested alternative fix in the PR. :farhan - What should I do with this given :sleroux is on PTO?', Steph said he'll be on and off. I think he should be able to land this.", Thanks for the alternative :fluffyemily! I've used that instead and gave it a test and works the same without the performance hit. I'll land that instead.", master b607bab40b46e3647a1bcfed630cf480c1ae24cf', v5.x d5e33d7', Tested on iPad mini 4 running iOS 10b8 on 5.2b2. The issue is not reproducible following the above STR.' 
id=1303880	 'Created ', ', PR', I added a little more than just the basic UI, but that's the priority of the PR! (and also the way I'm structuring the data store of the tableView cells)", Comment on ', ', PR I've (and farhan!) left some feedback on the PR. Looking good otherwise!", Comment on ', ', PR Looking great. Just some minor things and should be good to land. I wonder if we should add a small feature flag to enable/disable this so we don't confuse testers on nightly when the actions don't work." 
id=1315776	 'I am marking this for 6.0 because we need these changes to make the L10N tests work better.', This patch does the following: * Introduce `LaunchArguments.swift` with constants for the launch arguments that Fennec takes. Currently: `.Test`, `.ClearProfile` and `.SkipIntro`. * Use those constants in all the places where we used to have strings like `"FIREFOX_RESET"` * Fennec does not know about *Fastlane* anymore. It makes no UI choices based on specific test cases. Instead the tests can simply tell Fennec what they want to change. This is the base work needed to make the L10N Screenshot Tests request the right things per test case. For example, all test cases want to clear the profile, but only one wants to see the intro. These options now allow that.', Created ', ', PR: ', Comment on ', ', PR: ', LGTM just need to fix the MPL preamble.', v6.x 9ad942f' 
id=1289590	 'These should be UICollectionViewCells', master 3cbecef2c9bd880d4ad26d6674421cbd03610b7c', It could be impossible to translate strings for this bug, ', correctly (or in a way that is not awkward) into some locales.', (In reply to Stefan Plewako :stef from ', ) ', I agree. Also, this bug is confusing. It's hard to tell what is going on here as there is basically no information and no comments explaining. Also, no merge link?", My apologies. This bug was created to track a finer-grained engineering task and the patch that was merged contains many resolved bugs. I'll create a new bug reflecting the l10n work needed for the overall feature we're implementing through these bugs.", Instead of creating a new bug, the string changes are only needed for this task so I'll link the details here: Merge commit: ", Strings in question for this feature: ', In particular, the various plural forms for the 'X time ago' strings. We plan on showing these strings on the new Activity Stream panel cells for the recent history items: ", We currently show similar strings in your Synced Devices screen (for how long ago yo re device was synced) and in the Settings screen showing how long it has been since a user has synced their account. Unfortunately this isn't a good way of handling plural forms so at this point we'll probably need to implement ", in order for this to work.', We use "more than a month ago", "this week" for that very reason, not something that is associated to a number, es "x days ago". As Stef said, these are basically not localizable right now. Just imagine to only have one string that says "X hours ago", instead of the two you artificially created, and show "1 hours ago" to users.', Ah yes I forgot we made that change a while ago. I'll file a new bug to revert this change." 
id=1297833	 'I think some default links in the Highlight section should work well for an empty / first launch state. Here are the links I think would work well ', ', ', ', ', ', (we can swap out the release notes programmatically.) ', ', We can only show 3. And cycle through these when the user doesnt have enough highlights.', Adding as bug under ', as we're using the empty state as a way to communicate to users what highlights are.", Adding link to invision mocks for reference: ', Created ', ', Pull Request', Comment on ', ', Pull Request Just remove the development team stuff and then it's good to go after some nits!", master ' 
id=1309581	 'Are you having database woes on your device? :D Anything in the log?', Heh I hope not. I seem to be finding all the sync issues this morning. Mostly filing bugs in case anyone else is seeing this. I'll dig into this and see whats going on.", Looks like the reason the list isn't being populated is because when calling 'getClients' 1 , we're getting back an error that the account is in a .NotMarried state 2 . Two things could be causing this: 1. There was some changes made on the server which requires iOS to update how we handle the login handshaking 3 . We haven't made these changes yet. 2. When advancing our FxA account state, we touch some of the new device registration API code that was introduced on master 4 . This also might effect missing history items if we're failing to pull down records because of our FxA state 5 1 ", 2 ', 3 ', 4 ', 5 ', Created ', Link to Github pull-request: ', IIRC you worked on shared app groups/keychain stuff in the past. Mind checking out this fix?', Looks good. Left a view comments on the PR.', Comment on ', Link to Github pull-request: ', I'll + it because I think it is all good to go. Just a question about a team identifier and how to test this.", Added comments to PR and removed the SQL commit that was supposed to be on another branch.', master ', v6.x fda6300', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Oops wrong bug!' 
id=1305413	 'Build I was testing with was a WIP from another containing a DB migration. Works fine when testing from previous commit to highlights commit.' 
id=1289557	 'Created ', ', master fdc3684c7c071328eb40bda08a8740dbec6fff41' 
id=1303375	 'Created ', ', Pull Request', Comment on ', ', Pull Request LGTM just a comment about the localized string.', master 5a7b119caa5930fc40dac27f5904353d45afdd97', Why are you exposing a string that says 'AS.PageControl.Button'? I don't think it should be localizable.", The way I understand it is. By making that button localized, if a user with accessibility turned on tapped on the button they would understand that its used to go to the next page. I forgot to add a default value. I think it should be something like "Next Page" and that is the value that should be localized. Sorry for fumbling this up. I haven\'t worked with Accessibility to this extent before. If this is wrong please let me know.', I'm not sure I have the right answer regarding accessibility, but the string should definitely have a value." 
id=1314402	 
id=1127032	 'Some of these are old or dupes, but just gathering them so I have them in one place.', Since this blocks the service, which blocks ios1, I don't think this needs to block?" 
id=1302905	 'Created ', Pasted image at 2016_09_14 04_48 PM.png', Created ', ', Pull Request', Comment on ', ', Pull Request Looks great! These top sites keep getting better and better.', master 0e8538068a61a633ab6adf978423aa7fb9f1e810' 
id=1299641	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull Request', Comment on ', ', Pull Request Left some feedback and potential solution to the weird timing issue you were seeing.', Comment on ', ', Pull Request The update to the deletion code looks good!', master 21a3b4c8225d241beb741953bab5369218a00396' 
id=1293465	 'Created ', ', Pull Request', Comment on ', ', Pull Request Awesome =) Looks good, just a nit or two here and there. I'm excited to get this landed so we can start phasing in cleaner code!", master fdcae6e19ab07443e61bbe17f74d4408ffe0c6db' 
id=1304456	 'Created ', ', Link to Github pull-request: ', Here's a shim that wraps WKWebView that, in theory, will allow us to swap in UIWebView if we implement the same set of APIs. There's probably no point in landing this until we know if/when the UIWebView implementation is ready since this doesn't do anything on its own, but I'm posting this PR in case anyone wants to take a look now.", Comment on ', ', Link to Github pull-request: ', We're definitely interested in moving forward with this work, so might as well get some eyes on this. Here's a branch that basically just wraps WKWebView in a shim. There a few tricky implementation details to get this to work properly, but the end result should be that the shimmed browser works exactly as it does on master. A few options for merging: 1) We can merge this into master, which shouldn't have any major implications so long as the shim is implemented correctly. Might be useful to get this to a bigger audience to help hunt down those bugs. 2) Keep this maintained in a separate branch, where we can make separate builds for people that want to test these experiments. We can merge to master later once we're sure we want it in the product.", Landed in branch uiwebview: 9d83c1f91dd5fb296280406b150c3cc7f0a5e10b' 
id=1314706	 
id=1298922	 'Going to give the new process a try and use this as a breakdown bug for collecting data for AS.', Looking at ', I have a couple of questions about what we want to do for mobile. Specifically, * For the source field, do we want to use FEATURED or HIGHLIGHTS for mobile? Not sure if there is a difference between desktop/mobile here. * Since Activity Stream isn't implemented as an addon, do we want to use addon_version as the application version or does it lose meaning if we do that? * tab_id, client_id - Are these fields desktop/gecko specific? I'm wondering what mobile should do for these fields. * Can we send blank metadata_source on mobile? We currently don't use embedly or fathom for any metadata parsing. * Do we send url for \u2018highlights\u2019 or only for recommendation/pocket driven content? We don't have that on mobile yet.", Hi Stephan, Q1: the "source" is a required field, but its values are open-ended and free to change Q2: the "addon_version" is also a required one, it\'s being used to track the performance of different releases. If there is no such counterpart for iOS, I think you can use the Firefox version, or "N/A" if you really don\'t want to populate it Q3: Yes, those fields are coming from Firefox directly, "client_id" is particularly useful for the following data analysis. For instance, we use this field to associate a couple of performance telemetries in order to do the engagement research Q4: the "metadata_source" is an "optional" field, you don\'t need to include it in the payload Q5: No, we only send urls for recommendation/pocket content, and this field is also optional Hope that works, Nan', Oops, forgot to mention that "tab_id" and "client_id" are both required field, which means they should be included in the payload all the time, but you can just use some placeholders for them if they\'re not available on iOS.', Thanks for the input! Marking as closed as I have my work items defined now.' 
id=1314699	 
id=1127061	 'Service used to save and load the Tab state so we have a good UX if iOS kills Firefox in the background.' 
id=1307440	 "What do you want to do with the FennecAurora build configuration? Do you want to remove that as well? The configurations have very similar names to the schemes. I don't know if this is how it's suppose to be. But it makes it confusing when talking about them.", We can delete that. ', Yea - when I originally made the schemes I had them map to the build configurations so that for each scheme we can just select the matching .xcconfig. That was more of a convenience thing but if there is a better way of doing it feel free!', Created ', ', Pull Request', Comment on ', ', Pull Request Left feedback on the PR but forgot to flip the bugzilla flag...', One minor change and we should be good to go!', master ' 
id=1126992	 
id=1300903	 'Created ', ', Pull Request', master ab90d2d0da8896a25bcb4e475a036c8b531823b9' 
id=1298054	 'With iOS 10 around the corner, this is a good time to finally drop 8 support.', Not requiring these #available checks for iOS 9 will make life easier for ', , and we'll have to eventually do this anyway, so let's go ahead and knock this one out now.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Awesome. Thanks for fixing the keychain stuff I missed in the test targets.', Hi Brian, Was there any burden, code-wise, or any compromises we had to make, that we dropped support for iOS 8? I thought it was only the 'if #available' checks that were extra. Just curious, since I'm on iPhone 4s/iOS 8 and don't want to move to iOS 9 as it might slow it down.", Hi Maurya, There's a growing number of features and APIs with each iOS release, so maintaining support for older releases becomes a huge maintenance burden. Examples from iOS 9: * Private browsing * Clearing private data * New XCTest APIs This list will grow longer with iOS 10. Code-wise, we worked around many of these using 'if #available' checks as you said, but maintaining support for 8 means we also need to test and run iOS 8 builds often to make sure they're stable. We were already neglecting iOS 8 before; we just don't have the resources to maintain 8, 9, *and* 10 now.", Hmm, yeah that sounds reasonable. Thanks for your reply!' 
id=1314370	 "I'm assuming this is for Top Sites specifically since we already have a bug for higlights: ", work is already done here ', There doesn't seem to be a user story linked to this bug though." 
id=1314691	 'Any mocks on how this is suppose to look? The context menu is already really large and takes up a majority of the screen. If we add another option to copy the URL it might get too long for certain devices and make it harder to dismiss the menu.', Not sure unfortunately. :bbell might have some more info. First time I hear about this feature.', This feature already exists in the share menu. And this is pretty standard for most share interactions across iOS. The copy link feature is expected to be in the share menu.' 
id=1312746	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1310145	 'Created ', ', Pull Request', Comment on ', ', Pull Request Nice catch. Awesome work adding the unit tests!', master ' 
id=1243412	 "This'd fix the root cause of ", , which would be nice.', Great suggestion. Needs some UX work for the dialog presentation but seems like a quick win.', Currently 'edit mode' seems to cause issues like ", .', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I've left some feedback on the PR!", Created ', ', Link to Github pull-request: ', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Almost there! Thanks for addressing all the issues!', Marking as MobileAS and added to UI user story for Activity Stream.', Created ', ', Link to Github pull-request: ', review ping', Great work. I've left some comments. Just stylistic changes now :)", Created ', ', Link to Github pull-request: ', Created ', ', Link to Github pull-request: ', master ', Created ', ', Pull Request I just cleaned up some stuff related to ASPing, Context Menu and AS in general. Mainly renaming and moving stuff around.', Comment on ', ', Pull Request Nice clean up =)', master ' 
id=1315188	 "I've been experimenting a bit, and noticed that the crash is happening since this commit (5c9913a87b0652729e0f29a58f72ab145077b23a).", Sorry, the correct link (', )', No longer an issue after resolution of ' 
id=1305895	 'Created ', ', Link to Github pull-request: ', master ' 
id=1305180	 'Steph, If you could have a look at this. That would be awesome. We have an assert that is suppose to check if the file exists and that passes. But somehow when it tries to open the same file it crashes. Someone on irc was having this issue earlier and I tried it myself on master.', Looks like this was caused by the patch we landed to close the database when the app goes into the background 1 which was causing our iOS 10 springboard crash. What seems to be happening is that when try to create the failing table in the test case 2 , the database files are never moved after the database is closed because we now completely ignore 3 any connections made after we call `forceClose` on the DB 4 . :rnewman, would it make sense to move the .bak moving file logic before we call forceClose? 1 ', 2 ', 3 ', 4 ', If I'm understanding you correctly, this might be a real bug. The forceClose call in BrowserDB is trying to forcibly close the database handle, so that it's free to move all of the old stuff out of the way and try again. Later on, we call db.transaction to open a connection to a new database in the same place, and create all the tables 1 . This relies on the underlying DB quietly reopening or recreating the DB. Now that forceClose means we never open a connection again, this logic is broken: we'll force close, move the files out of the way, and then we won't be able to 'reopen' the database again! In the test, the subsequent recreate will fail\u2026 which the test already expects, but for the wrong reason. My suggestion is that we add `self.reopenIfClosed()` at line 227, so that we get back on the old tracks. 1 <", >', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Thanks for looking at this. Is this something that we might want to uplift to 5.x?', Yup definitely.', master ', v5.x ' 
id=1308015	 'This works for me on the current master - ffeaa7a Please reopen if this is still reproducible' 
id=1317580	 "I think having the deep linking/auto filling of the FxA sign in form will be _way_ better than what we have now. As far as the schemes goes, I think it would work alright as yo ve listed. James has worked more on the schemes we currently support so I've CC'ed him for input.", Created ', ', Link to Github pull-request: ', re lingering PR', Let's chat about this in triage today. I think we should put this into an upcoming release.", Question about the code: ', I've left comments on the PR.", PR updated and merged. Thanks guys!', master 54c89aa48812c35a5b6ffb32243bce544764f2cf', v6.x 767975f60dd5bed0db4873b1775d882d0b184d52', Created ', ', PR: ', Adds a feature flag to disable this code path for the upcoming 6.0 release.', Comment on ', ', PR: ', ', Comment on ', ', PR: ', ', Feature flag patch master 9fb8dfcf4377271da5ec8f5ab8bb2a24c87024df v6.x 593fe136d05807f502394732fd61659409db0fcd' 
id=1304400	 'Created ', video-1475564649.mp4 I had a friend try it on an actual iphone 7. This is master f43a1d35b3e6b0d7f4e356abfe65bfbb7443f3ad' 
id=1130521	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1283863	 "Correct me if I'm wrong but I think this is correct behavior? Say another person was trying to look at our app switcher/phone and such - we wouldn't want sensitive information like that to be easily accessed right? Is this the same motivation behind blurring private browsing tabs in the app switcher as well?", This was intentionally done to protect sensitive data.', Maybe I was misunderstood but I do not think this is the desired behavior. When in app switcher it is understandable that the screen is blurred in order to protect sensitive information but when returning to the application the login screen will remain blurred and the logins can open in edit mode by tapping on them. This issue occurs without setting up passcode functionality Please see a video of the issue: ', .', Yup this looks like a bug and regression from some recent fixes we did to the passcode logic. Definitely valid.', Also note that when passcode/touch ID functionality is set on, when following the above STR and returning to the Firefox, no passcode/touch ID is requested.', I wasn't able to reproduce this. When I come back to the login screen from the App switcher it prompts me for my password. Once I enter my password everything works fine. If you can reproduce this on the latest nightly please feel free to reopen it!", I'm also not able to reproduce this issue on latest master or release." 
id=1314049	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1312689	 'Created ', iPhone 7 Plus - iOS 10.png Also, on iOS 9, 'Go to copied link' button is not aligned with the Fennec icon as it is on iOS 10. Please see both attachments.", *** This bug has been marked as a duplicate of ', ***' 
id=1130506	 'What changes are involved for this ticket?', By ticket I mean bug :/', I've known Nick for years and he still calls them tickets :) My expectation: tel: URIs open Phone. Works. mailto: opens Mail. Works. geo.itunes\u2026 opens the store. Works. maps.{apple,google}.com open the right app. This doesn't happen, but I don't care enough.", This issue is marked as "fixed" but the official release of Firefox in App Store (v 1.1) there is still no support for protocols of third party apps. Am I missing somethind?' 
id=1303756	 'XMLAttribute warnings will be resolved when ', lands since we're replacing SWXMLHash", Created ', Link to Github pull-request: ', master ' 
id=1313681	 'US breakdown changed' 
id=1321661	 "I've also fixed - section separator line appearing below highlights - broken constraint in headerview", Created ', Pull Request', Looks gooood', master ', *** ', has been marked as a duplicate of this bug. ***' 
id=1127034	 
id=1127025	 'Created ', AwesomeScreen - Bookmarks (Edit).png', Created ', AwesomeScreen - Bookmark Editing.png This should come up as a modal.', bnicholson: add/delete - yes, edit - no. nalexander: seconded. rnewman: delete is hard with Sync. We could scope to delete leaves only, or mobile bookmarks only.', (In reply to Nick Alexander :nalexandIsntfrom ', ) ', Isn't delete just unbookmark?", It's unclear what's happening here" 
id=1130527	 'I am interpreting this as implementing the mock at 1 , where the total set of search engines is the set that ships with the product. That is, this ticket tracks letting the user select a default search engine, reorder the non-default search engines, and optionally disable the non-default search engines. I am interpreting ', as tracking allowing the user to add /additional/ search engines (and to then allow reordering, disabling, and possibly customization of those additional search engines). 1 ', darrin: there is an interaction between the default search engine and the ordering/disabling search engine list. You can even see it in your mock above: is it sensible to allow the default search engine to be disabled? I believe no -- it is going to be very convenient to assume that the user has a default search engine that is not disabled. I can imagine addressing this in a few ways: * disable the toggle for the default search engine; or * don't show the default search engine in the list of orderable search engines; or ... If we go for the second option, we should reconsider the chevron that shows a list for setting the default search engine. We can allow the user to drag a search engine between list sections; we might use this to allow the user to drag their preferred engine to the default slot (which does not show the disabled toggle). darrin: what say you?", (In reply to Nick Alexander :nalexander from ', ) ', I originally thought about this interaction and love its simplicity, but aside from it being more complex technically, I wasn\'t confident that users would know to drag to another list/area to set a default. I think we should follow what desktop has done... a separate selection list for the default, and we should re-label the toggle list to "Quick Search Engines" or "One-touch Search Engines" (where you may in fact want to turn off the default in the quick-search bar). Does that make sense?', Created ', ', Link to Github pull-request: ', I'm quite confident this won't be the final form for the UI, so I'm not going to write UI tests quite yet. This allows to: * Set the default search engine; * Disable non-default search engines; * Re-order non-default search engines. The search engine state is persisted.", Comment on ', ', Link to Github pull-request: ', This is a nice combination! I noticed you can still drag from the bottom list to the top, which is a nice touch. A couple suggestions: - set a background on the table cells, so you don\'t see through them when dragging (need this 100%) - maybe highlight the cell in some way (we can set the background blue and text white) when hovering over the top "drop area", to indicate that an action occurs if you drop it there I\'ve attached two sketches, probably don\'t need them for launch but would be nice details.', Created ', search settings - highlight.png', Created ', search settings - dropzone.png', Comment on ', ', Link to Github pull-request: ', Looks fine codewise.', Darrin -- love the design. Unfortunately, it's really quite challenging to implement :/ (In reply to Darrin Henein :darrin from ", ) ', Apple, in their magnificent wisdom, makes this challenging. See ', and ', . I think we can do it, but I question whether we should subvert the standard UI paradigm on the device. ', Again, this is challenging. There's little way to determine that re-ordering has started. There are some undocumented but not private APIs, in theory -- see ", -- or you can get a delayed event using ', . ', I landed this with review comments addressed, but without the tweaks darrin requested. Those can be follow-up, although I'm not sure we want to do them at all. " 
id=1297126	 'closing this because we have finer grained bugs instead. *** This bug has been marked as a duplicate of ', ***' 
id=1127008	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1132263	 
id=1130522	 'Created ', ', PR ', Sorry for the mess again. This is rebased from the old patch on top of your patch. I'm not sure how to make github show that correctly, so your changes are still appearing in here (as their own commit).", I should note this doesn't interact with sync yet. There are enough interfaces between this and sync that I think we can fix that separately.", Yup, we'll tackle the Sync interaction when we come to implement syncing of these things!", Comment on ', ', PR ', Comments on GH.', Comment on ', ', PR ', Comments and an additional patch with changes on the PR. I also switched to using Deferred instead of callbacks here.', Comment on ', ', PR ', If yo re sure that `Deferred<Result<Bool>>` is appropriate, go ahead. I really think it should be either D<R<()>> or D<Bool>, though.", Thanks for the void type hint.', Noting also here: the string that landed doesn't make sense. ", ', I guess it\'s missing a "to clear/delete" after "want"?', "Clear private data setting" note doesn\'t help much (after reading it I still didn\'t know how the string is used) and should be updated. ', Created ', ', PR: ', Updated these strings. Thanks for checking them flod :)', Comment on ', ', PR: ', Left a couple of nits for comments, but looks good, thanks.', updated and merged. Thanks!' 
id=1130493	 '*** ', has been marked as a duplicate of this bug. ***' 
id=1311147	 '(In reply to Stephan Leroux :sleroux from ', ) ', Desktop has a rev_host column in history which stores the host, but reversed, as a string (it might be in a few other tables too), I'm guessing they just wanted to mirror that. (On Android we're adding a domains table which stores the domains, which aren't reversed (similar to what iOS already has), so we're just using normal (non-reversed) domains too - see ", .)', Created ', ', PR' 
id=1313679	 'US Breakdown changed' 
id=1315357	 'Investigate along with the other today widget bugs.', this doesn\'t look promising to solve - "Unfortunately, there\'s now way to hide app widget. If you set UIApplicationShortcutWidget to nil, your app will get rejected."', Also, in response to the empty widget, I think you have to wait a few seconds until it appears (that's what happens for me on current nightly build)", System causes the delay loading the widgets. If there are other issues besides that lets reopen.' 
id=1323924	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1310711	 'RESET_FIREOX is the launch arg defined for XCUITests under a base test. What about UITests?', Farhan, is this something we need to do to get the tests back up and running?', Actually, I think we can close this, since I put a workaround in UITest so it\'ll just press "Start Browsing" when it sees the first time UI dialog. (As Farhan reviewed those tests already)', Yea if No-Jun finds it adequate. We can close this.' 
id=1318670	 "Simon - Whoever you were actually trying to reach when you cc:'d this bug to '", ', I'm quite confident that it wasn't me. Please reassign/cc this bug to the appropriate parties if you still want to reach them. -- Thomas W <", >', Hey Simon I can't seem to reproduce this. Any more details on how I can reproduce this? If you could provide a video that would also be very helpful.", I have retested and the issue is not reproducible on the latest master (build 5d7484369). I will re-open if the issue occurs.' 
id=1304395	 'Created ', Link to Github pull-request: ', Found a few feature that needed wrapping and backed out one. If we truly want to make 6.0 a featureless release, the atomic uploads code is on master and is something we can't feature flag-ify so we can either back it out now or let it ride in beta to see how it goes. I'd be tempted to let it ride and if there are any issues to just back it out.", Comment on ', Link to Github pull-request: ', I left a small comment. But otherwise, Awesome! I agree with disabling the URL scrolling stuff. It's nice, but I've been seeing some wonkyness myself with it. Best to disable for now.", master ' 
id=1298028	 'One of the last lines indicates that the user tapped the top of the screen to scroll to the top while looking at a PDF. 3 CorePDF \t0x2b9aa66a - UIPDFSelectionController selectionHideFromAncestor: + 114', I don't get a crash on iOS 9.3.5 with 5.1 beta using scroll-to-top on an 11-page PDF.", Let's investigate for 6.0.", Looks like it might be related to changes made here ', ', I got this crash report from the 5.0 release and this commit landed on master afterwards so this is probably a red herring.', No one has reported a crash for this and we have no way of seeing how often it happens so we can reopen if it's an issue." 
id=1294792	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1281761	 'Please note that when typing a word in the google search bar, the search suggestions will overlap the content on the page.', These are the kind of bugs that I am worried about if this mode is altering styling on pages.', I see the same thing on ', Elements are shown as transparent. ', Chardis: please could you look at this?', (In reply to James Hugman :jhugman @jhugman from ', ) ', The solution is to create an observer to modify the background color of each node, except the nodes that the background color is transparent. ', will fix this next.', Created ', ', pull request', Comment on ', ', pull request The code yo re replacing is quite probably a dead-end. I've left some comments in the PR, suggesting next steps.", (In reply to James Hugman :jhugman @jhugman from ', ) ', I have changed my code according to your suggestion.Please review it. Thank you.', Comment on ', ', pull request This is good now. Thanks Lyang. Please merge to master, delete the branch, then resolve this bug as fixed.', (In reply to James Hugman :jhugman @jhugman from ', ) ', I do not have access to merge the pull request in to master. Please help me to land the pull request to master\uff0c and change the bug status.Thank you.', (In reply to James Hugman :jhugman @jhugman from ', ) Hi James, Could you help me land this PR to master and change this bug status? Because I do not have access to merge the PR into master.', :lyang \u2013 do you still need help with this?', (In reply to James Hugman :jhugman @jhugman from ', ) ', Yes, I need you help. Please help me land this PR to master, delete the branch and change this bug status. Because I do not have access to merge the pull request in to mozilla/master.', Yes, though I am mostly afk for this week. Could you rebase this to master, then I can land it. Many thanks, James', (In reply to James Hugman :jhugman @jhugman from ', ) I have rebased this to master, please land it. Thanks.', Merged to master.' 
id=1201875	 'Tools > Sync Now on your desktop. Then pull-to-refresh on the tabs panel on the phone. Does that make a difference?', Desktop: one window has 16 tabs, the other has 13 for a total of 29. On the phone: 20 tabs are visible (mix between the two windows). There's definitely been some updates, but doesn't pull all my tabs over.", Potential causes: 1. There are tabs on desktop that are dupes of each other or otherwise aren't syncable: fewer make it to the server. 2. The changed record is not being uploaded. 3. The changed record is not being downloaded. 4. There are tabs in the record that are not being applied to the local DB. Open a browser console: ", To test the first: and run Weave.Service.engineManager.get("tabs")._store.getAllTabs().length which should return a number. If that\'s 32, (1) is OK. If that\'s 24, then the desktop is at fault. To test the second: Date(100 * (JSON.parse(Weave.Service.resource(Weave.Service.storageURL + "tabs/" + Weave.Service.clientsEngine.localID + "?full=1").get()).modified)) it\'ll return a date.', Ran Weave.Service.engineManager.get("tabs")._store.getAllTabs().length and I got 23 (which is true) and just forced a \'sync now\' on my mobile and I have 19 tabs there I also just ran Date(100 * (JSON.parse(Weave.Service.resource(Weave.Service.storageURL + "tabs/" + Weave.Service.clientsEngine.localID + "?full=1").get()).modified)) and I got "Fri Sep 04 2015 18:07:07 GMT+0100 (GMT Standard Time)" and on the phone in the cloud panel, it says \'last synced today at 18:04\'', (In reply to Karen Rudnitski :kar from ', ) ', The answer to the ordering here is that they're sorted most-recently-viewed first. As to why some tabs are missing, dunno! If you can get logs and/or your browser DB from the device, we can dig deeper.", Probably a URL parse issue.', Created ', ', Pull request I've been unable to replicate any missing tabs even when using Karen's account so I have added logging to try and figure out under what circumstances tabs go missing.", Comment on ', ', Pull request Sorry for the delay -- looks fine to me!', Here's one possible explanation for this kind of thing: ", .', Comment on ', 14.Insert.LargePlaylistBW.xml Please don't set flags if you don't know what they are for.", :aaron - can you re-test this to see if this issue still exists.', I'm not able to reproduce this issue following the steps from the description. Tested on latest master running on iPad Air 2 (9.3.3), and Firefox release 48.0 on desktop All tabs are correctly synced from desktop to device. Karen, please reopen if you see this issue again." 
id=1297566	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1130514	 'This might Just Work' 
id=1261783	 'Karen, do you happen to have multiple tabs open in background when the main window is turning grey?', There may be 2 - 4 other tabs in the session.', *** ', has been marked as a duplicate of this bug. ***', We've done some memory improvement work so this issue might be a lot less severe. Do you mind retesting this to see if it's still an issue?", Created ', IMG_0047.PNG Tested on latest Nightly (6.0) on iPad Air 2. The issue was reproduced during a browsing session with multiple tabs opened in background and after a session restore. I could not find reliable steps to reproduce this issue as it is highly intermittent and it occurred only once.', Will file new bug to track larger work to investigate what to do for many, many tabs.' 
id=1134059	 'This probably blocks v1?' 
id=1291303	 'Created ', ', PR', Comment on ', ', PR Er, I don't understand this commit. You aren't replacing Readability.js anywhere; yo re just dropping in a new file. Where is this getting used?", We import Readability in the Cartfile', To clarify: we pull in Readability via Carthage, and its version is pinned to "master" (as opposed to an older commit). So unless I\'m mistaken, we just need to make sure we\'ve pulled in the latest HEAD before doing a build.', Oops, I forgot that bootstrapped dependencies are tied to Cartfile.resolved, not Cartfile. So there is something actionable in the bug: `carthage update` Readability so that it points to a more recent commit in Cartfile.resolved. Sorry for the bug churn!', Comment on ', ', PR Can we see whether this fixes ', now?' 
id=1299640	 'misclick :(' 
id=1127030	 'Can this one be marked Resolved? This Meta was just for the data store, and looks like the one child bug accomplished that.', (In reply to Jenn Chaulk (:jchaulk) from ', ) ', Sure. We have other open bugs for actually saving and filling the logins & passwords. Those should be enough to cover getting the feature to a working state.' 
id=1293229	 'Related to top tabs feature implementation.', Created ', ', PR', master ' 
id=1127058	 
id=1127043	 'Background service to create and store thumbnails.', We added a screenshot function in ', . Closing this. We'll handle the rest of the storage parts of this in ", .', wesj: was this intended to be closed?' 
id=1289559	 'This one has been replaced by a few different bugs. *** This bug has been marked as a duplicate of ', ***' 
id=1127017	 'This bug tracks the work needed to implement the built-in Reading View. This includes: * The readability.js conversion code * The controls used to adjust the content * The UI buttons and actions used to open content in the Reading View', *** ', has been marked as a duplicate of this bug. ***' 
id=1281801	 "hmm, there was a bug open for this, but I couldn't replicate so asked Catalin to retest. Bug got closed as no longer reproducible. I'll try this STR and see if I can get any joy.", Emily, I'm able to reproduce this issue again on 5.0b14/iPad Pro (9.3.2). In my case, some options, including the email address, are shifted to the right after scrolling the settings page while the 'Sync is unavailable' warning message is displayed. This issue is reproducible only when there is a sync warning message displayed in settings ", Unable to reproduce in simulator (iPhone 6).' 
id=1304398	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I left a small comment. But otherwise, Awesome!' 
id=1288162	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1132037	 
id=1300216	 'Created ', after.mov', Created ', ', Pull Request', Comment on ', ', Pull Request Silky smooth!', master ' 
id=1130497	 
id=1130513	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1127028	 
id=1130530	 'I am incorporating this work into the Firefox Account Settings work.', This should land as part of ', .' 
id=1284550	 '(especially in light of this bug and ', )', Do we want to remove it or revise the confusion of seeing the blank page?', I think :jhugman was more up to date with this', :sleroux is right here. There is some confusion of the value of New Tab as a blank page rather than New Tab as homepage. The New Tab as homepage was asked for by :dxue, I don't know where New Tab as blank page came from.", (In reply to Stephan Leroux :sleroux from ', ) ', No, a new tab set to open a blank page is fine if the URLbar is focused. See ', .', There is nothing actionable here from what I remember. There is another bug tracking making the url bar focused when a "new tab as blank tab" is set. I\'m going to close this.' 
id=1281776	 'I used another way to implement night mode. Now this problem has not existed.' 
id=1092561	 ' says: "I\'m prompted to create a Firefox Account, something I haven\'t heard of before. After creating it, I\'m encouraged to sign into the same account on my desktop. Note that the sign-up story outside of Desktop is not good at this point. We can implement signup on a non-desktop device, but the part that stings is \'go to your email to verify your account\' and the things that happen after that. For example if you click the verification link in Mail.app on your iPad, there is no easy way to get back back to the P105 app where you started the signup. Could be a reason to move signups past v1.0?', I think "signups" should be considered secondary, perhaps even post-v1.0 since it requires more consideration and UX flow than just "sign in".', I disagree. We're tasked to growing FxA (although to me, that's besides the point). We'll be targeting existing desktop users who - quite frankly - in majority won't have an existing FxA yet. We can't leave them hanging - that will be an incredibly poor experience (even more poor than figuring out how best to 'verify your account')", (In reply to Karen Rudnitski :kar from ', ) ', We\'ll need to get the FxAccount UX people involved to help work through the challenges of "Sign Up" on iOS.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***' 
id=1311629	 'Hello ,I want to work on this bug . is this still valid ? could you tell how can i resolve it ?', Hey shrvan, This bug is still valid. As a starting point, you can check out the code that creates the toast that appears when the user closes all the tabs. Specifically, here's where we construct the button in question that has no pressed state: ", The button is custom drawn and doesn't use an image so it's a bit more involved than setting an image for the selected state. One approach you can try is to create a private UIButton subclass in the same file and override the `setSelected` method to toggle the background/text color. The button right now has a clear background with white text so I'd probably make the selected state use a white background with clear text. I'll go ahead and assign this bug to you.", Is there any progress on this bug. I would like to fix this one', It looks like this bug has stalled. Feel free to work on it. All patches are welcome.', I'll go ahead and re-assign.", Hey, noticed no progress on this issue so went ahead and fixed it here ', Created ', ', Pull request', master 0218c37044e9bed4c47bbb685adbf8864e6b6a14', Thanks for the contribution!' 
id=1134899	 
id=1281799	 "Maurya, this is similar to the bookmarks bug yo re working on in that we want to disable a feature depending on whether the URL is internal or not. If yo re looking for something else after finishing the other bug, this could be a good option!", Sure Brian, thanks! I'll add it to my queue.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good, but I think we should avoid adding accessibility IDs when possible.', Created ', ', Link to Github pull-request: ', Created ', ', Link to Github pull-request: ' 
id=1313073	 'Created ', ', PR: ', This patch disabled our Today Widget on the Home Screen (3D Touch on our app icon) by setting the `UIApplicationShortcutWidget` to `nil`.', Comment on ', ', PR: ', I don't have a 3DT device but the diff looks good!", I tried to push an archive for 6.0 to iTunes and got an error saying the UIApplicationShortcutWidget field much be a Today widget bundle identifier :( See PR for the exact error.', I don't think we can do this because apparently Apple will reject the app????", Yeah we discussed that in triage.', Unfortunately :( When I tried to submit the first beta build to Apple with that field nil it rejected the binary so we'll need to stick with the current widget we have and think of doing something better for 7.0.", We backed this out because the app was rejected with UIApplicationShortcutWidget set to nil.' 
id=1288111	 'master fdc3684c7c071328eb40bda08a8740dbec6fff41 The Activity Stream panel appears in a home panel on iPhone size devices for beta/nightly.' 
id=1127009	 'The work was done in the same bugs as "BACK"' 
id=1126994	 'I guess this depends on the data level. This separation between "Services" and the data layer isn\'t really useful.', I think we did this in the data layer. Since they're basically the same, lets close this." 
id=1127023	 "Think maybe we can do away with this one. I think a heading from the original spreadsheet made it's way in by accident. This doesn't exist in Aha! anymore. I 'think' it's a duplicate of ", . Mark, can you confirm?', Let's go the way and mark the ", as the dupe. This bug is at least labeled as "Content", but I\'ll move to "Browser" component since filling passwords happens in the scope of the browser.', *** ', has been marked as a duplicate of this bug. ***', I just tweaked the name to reference 114 instead of 113, since the 113 card was deleted from Aha already. All matches again now. Thx!' 
id=1130508	 'This bug is about building the infrastructure needed to save/download enough content so we can display it later, potentially without network, in the Reading View. This bug will depend on creating a DB system for reading articles. It will also depend on background downloading of content.', *** ', has been marked as a duplicate of this bug. ***' 
id=1127064	 'Just a simple link out to the SUMO help pages for Firefox on iOS', Needs mockup.', :jchaulk is this a dupe of ', this one is more the tracking meta. I'll list 1145088 as a blocker", Created ', Settings - Signed In v1.png', All problems in computer science are caused by an additional layer of indirection. *** This bug has been marked as a duplicate of ', ***' 
id=1131752	 
id=1127063	 'Service to download content used to create a good offline experience for Reading View.', *** This bug has been marked as a duplicate of ', ***' 
id=1127024	 
id=1130487	 
id=1127057	 'This is the code to pull the data from the cloud' 
id=1127021	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1127056	 
id=1130532	 'I think we can remove this from our list because iOS already exposed the following option under Settings -> Firefox: Allow Firefox to access: On/Off Use Cellular Data Unless we want things more fine-grained.' 
id=1126999	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1092387	 'Stefan, I think you said you were going to look into this (specifically, figuring out how to share strings between code and storyboards). Any luck?', I'd really like to get input from Axel and Jeff before we commit to a particular avenue. I know that there are lots of tools hanging around, and it might be premature to assume that we should take the same .properties/.dtd-style approach that we use for Fennec. So chaps: what localization mechanism, ending up in-tree (but not necessarily starting there) would work best for you?", I'll be on PTO next week, and then I'll need to get back to work and start investigating, so it's probably going to be two weeks or so 'til I can come back with something. Which might just be questions. Keeping the needinfo around.", I'd like to do a little experiment too and rediscover how localization works on iOS. Things have changed a lot since Firefox Home. We used to do things on ", .. at least I think so .. the name Verbatim sounds familiar. I can't find the Home project there anymore though. That said, I am strongly in favor of: * Not fighting Apple's tools * ... yet, integrating with the best localization tool we use at Mozilla * Using Xcode to manage Storyboards and Xibs for visual layout as much as possible * ... accept that a likely a *very* small subset of strings may be duplicated and just live with that I think it will be a mistake to already give up on Storyboards or Xibs completely just based on a possible duplicate strings issue. (I would rather see us find a balance between those things that absolutely need to be done in code while keeping most high level views in Xibs. It will allow us to more easily design, including for Size Classes and to let the whole team participate in the design process except just those of us who know how to code.)", While it may not have much overlap with l10n, I do like the idea Brian mentioned about doing more of the UI creation in code. He mentioned a DSL called Masonry that allowed more of the UI constraint logic to be expressed in code rather than through storyboards. I like being able to look at code and understand it, without needing to fire up an IDE and open the right panels.', Stefan, do you have pointers to docs to read when I'm back?", Flagging a needinfo for Stefan exlicitly, it'd be great if you had recommended docs to read for someone that never ever did anything iOS related.", Hi Axel, this is probably a good starting point: ', Assigning this to myself. This does not have the highest priotity at the moment but I am working on figuring out all the steps involved to make this as smooth as possible. Initial notes are in ', (In reply to Stefan Arentz :st3fan from ', ) ', Please allow localizing via vcs and don't force verbatim/localize.mozilla.org, pretty please.", Stefan: locamotion.mozilla.org is the Pootle platform used for localization. Verbatim is used for web content. Many teams use Pootle as their primary translation tool. Some edit native source files they clone from vcs, but the number of those teams working in that fashion is in decline. More and more are moving toward localization tools that enable collaborative work, translation memory, terminology management, and other features. That being said, we will need to accommodate both workflows for the l10n teams to actively participate. Could you go into more detail about your objections to Pootle for this project?', (In reply to Stefan Plewako :stef from ', ) ', (In reply to Jeff Beatty :gueroJeff from ', ) ', localize.mozilla.org is explicitly mentioned in initial notes ', I don't think it is the right place to discuss l10n tools pros and cons and I'm not objecting Pootle or any other tool. I'm objecting personal views as a base to force one tool (esp without proper discussion) - ie for pl, the tool that enables collaborative work, translation memory, terminology management, and other features is vcs.", (In reply to Stefan Plewako :stef from ', ) ', We'll continue the policy of keeping toolchains and workflows open.", *** ', has been marked as a duplicate of this bug. ***' 
id=1130526	 
id=1127006	 'Created ', ', Pull request', Un-metaing this bug. While I think there will be additions and follow ups (adding screenshots, "Share image" in pages, etc.), the core feature is simple.', Comment on ', ', Pull request Wes, the screenshot is added already :-) Try to share some pages to Twitter. I compared the results between our app and Safari and the resulting screenshots are exactly the same. Looks like the extension framework downloads the page to grab screenshots. I think the only thing that needs a quick fix is this: I don't think the `selected.title ?? url` bit is correct. If it is good practice to attach the URL if a title is missing (i don't know if it is, we should check what safari does probably) then we should attach `url.absoluteString` instead. Otherwise we are just attaching two similar items of type `public.url` and the receiving extension would not see the difference between them.", Comment on ', ', Pull request I'm +ing but i think that title issue needs to be resolved before we merge.", Which Meta should those dependencies belong to then? I'm marking this one done, and those aren't, they belong elsewhere in the dependency tree.", Yeah Wes. This one really can't be FIXED if the dependencies are not. How do we correct the links?", I am not sure why those bugs are dependent on this one. i.e. why does "Supporting share extensions from other applications" depend on "Create a share extension to allow sharing into Firefox" or "Send tab"? I revamped the other metabug (', ) that seemed to be specifically about Twitter/Facebook into a generic sharing one and we can hang these off there if you want (since it was fixed by this as well). But this was marked iOS-2 and that was iOS-1, so I regret doing that now. This is not a meta bug. The dependencies here were wrong. I'm leaving them until I know where they go, but this bug did not depend on them.", Wes - Keep in mind that there are two distinct types of sharing: 1. I am inside Firefox and want to share to another app 2. I am in a different app and want to share to Firefox Let's not use one meta bug for both concepts. Also, #2 has two sub components: 1. Add URL to the Firefox bookmarks or reading list 2. Send URL to a different device The early mockups used two different UI entry points for these.", Looking at the pull request, this code is for #1 in ', , "I am inside Firefox and want to share to another app". That is not what the title of this bug is about. It\'s about #2. So I am changing the titles between this bug and ', (the Twitter and Facebook part confused you).', *** ', has been marked as a duplicate of this bug. ***' 
id=1130489	 'This works.' 
id=1194157	 'Can anything be done for v0.9 (ie do we have known work that could improve upon this) or can this be a 0.95 must it be a 2.0', Some of this is likely to be cert checking in TestFlight. Wait until we're on the store for real. Some of it is Top Sites, for that part of the experience. Top Sites isn't free. We could consider pre-loading that behind the first run experience.", Does the TestFlight comment also refer to Aurora and Nightly? Because I feel it there, too, myself. Definitely needs to feel quicker on start-up. Even upon 'closing' the browser, re-opening it and it opening to a tab that was already open feels like it takes a long time. I'd like to see what we could do - maybe it also doesn't help that the splash screen is very 'white' and feels like it melds into the 'white' when a page is loading, making you see 'white' longer than you should? (Just a guess here, as I try and put on a psychology hat)", This is a dupe of ', .', (In reply to Karen Rudnitski :kar from ', ) ', I don't know. I suspect it's still doing some kind of in-line cert checking; Steph? ", I don't really see this on an iPhone 6. Warm restores have perhaps 100msec before an already open page responds to scroll events. Visually there's no interruption at all. Cold restores -- where we need to reload the page -- take time, of course. I think we need to be more precise with terminology here. There's: * Time to first run (tour) * Cold time to URL bar visible * Cold time to top sites loaded * Cold time to tab restore / scrollable * Warm time to top sites restore * Warm time to tab restore / scrollable Which ones are bothering you?", For me, it's cold time to URL showing (the cold time to tab restore I think has gotten better in 32 vs 28, I think) Mark - I know yo ve found it sluggish - which aspect do you find the most noticeable?", Ya - the device does a security/cert check before launching which causes the slight delay when tapping the icon on the home screen -> app in use. I'm confident that this will be resolved when the app is in the app store as I've seen empty apps with release optimizations behave the same way.", Created ', Cold launch to URL bar tap This is the speed I see with current TestFlight v32.', Love the zinger you added in there. Let's discuss in a mo at triage.", Karen: what do you feel about startup time now? I think not computing top sites on resume-to-page, and some other perf work, has helped. Do we need more?', Intuitively feels a bit better to me, and can re-open if not (or if we're getting similar feedback from in-field)", Forgot about this. With the in App Store version, we are starting up quicker now. Compare with debug builds like Aurora.' 
id=1243584	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good and works pretty well. Just a comment about duplicating the topdomains.txt.' 
id=1217843	 'Created ', Client 23-10-15 16-48.crash', Created ', Client 2015-10-23, 9-48 AM.crash Symbolicated', NSFoundationVersionNumber_iOS_8_3 :-(', 13:56:35 AaronMT | sleroux: st3fan: so what's the story with the CPD bug 13:57:47 sleroux | AaronMT: I was going to investigate further this afternoon but it looks like it's a bug with a codepath that only effects <= 8.4 devices No I think the problem is that the code within that version check is supposed to execute if we do not run on iOS 9. But, we wrote it when 8.3 was the most recent so the check we do is to see if the OS version is <= NSFoundationVersionNumber_iOS_8_3, which simply misses anything in between 8.3 and 9.0. Aka, 8.4. (8.4 is the OS version in the crash report)", Created ', ', ', So there actually isn't a flag for 8_4. The highest version that NSFoundationVersionNumber offers is 8_3. I think it might be misleading because it starts at 8_0 so 8_3 might really mean 8.4? Anyways, I did find a pretty significant issue with the Tabs Tray and why the app was crashing. Clearing private data is the only place in the app which closes tabs on the Tab Tray without interacting with the UI. As part of the PB Mode work, I added some logic to didRemoveTab that relies on selected indexPath of the item that was deleted 1 . Since the deletion from CPD is not triggered from UI, this code path never happens which makes the tabDataSource.tabs list and tabManager out of sync. It also crashes in the didAddTab callback on debug builds because this assert is thrown 2 . Removing this removedIndexPath dependency and only use the tab to find out what to delete resolves this issue. Also, the reason this crashes on iOS < 9 is because the codepath for iOS 9 doesn't remove tabs from the tab tray. 1 ", 2 ', & ', Comment on ', ', ', LGTM', Merged', Verified as fixed on Version 1.2(1201) by using Ipod Touch 5 with 8.4 firmware.' 
id=1243847	 'Hey Brian can you just check if we still use the same list on iOS as we use on Android. And if not, re-import it.', Doing a preliminary import, I see that only cs (Czech) and zh-TW (Chinese/Taiwan) have been updated to include DDG. I've also seen a few reports of missing DDG, and those I saw (neither of the above) simply didn't have duckduckgo in the locale's list.txt: `grep -rl duckduckgo . | wc -l` shows that only 17 of the 74 locales currently include it. So being on par with Android will fix the two locales mentioned above, but the initial bug report sounds like we might want to cover more. If that's the case, this isn't iOS-specific, and we should file an l10n bug to make sure these locales are updated on both platforms. Karen, do you know which locale(s) in particular we want to update?", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Just remember that this is not one bug, it's X bugs, where X is the number of locales we support on Fennec and don't have DDG. And it will take weeks, if not months to fix. If you want to add this to iOS, I'd suggest to patch list.txt to include DDG in firefox-ios if missing. For example desktop adds DDG at build time for all locales; at the time we started shipping DDG, it was decided to manually include only a handful of locales in Fennec and not going that way. Last note: the real issue is that on iOS you can't manage searchplugins and add your own, unlike Fennec.", As a first step, I'd like to ensure that the search engine list (pre-installed) for iOS is the same as the pre-installed list for Android. Can we get that audit done first, and then we'll know what search engines need updating? Joanne should also be kept in the loop in case specific codes are required.", Created ', ', Link to Github pull-request: ', Besides myself, I think Stefan and Richard have touched plugins the most!', Note that the SearchOverlays/wikipedia.xml overlay (which includes an updated Wikipedia icon) and the SearchOverlays/zh-CN/list.txt override (which changes the list of zh-CN engines) should probably be pushed upstream to the Android repos since these don't seem iOS-specific. I'll make sure the appropriate bugs are filed.", The first case has already been handled by ', . That bug updates all of the Wikipedia assets to a 96x96 icon (even though the XML shows 16x16). We're using a 90x90 image on iOS, so our current Wikipedia assets are slightly worse quality than the ones on Android. Since it looks like Android has mostly switched over to the higher-res icon, I propose we drop the Wikipedia icon we're using on iOS and just pull in Android's. Filed ", to do this.', Filed ', to push the zh-CN list to Android. We can remove our zh-CN list.txt override once that's fixed.", (In reply to Brian Nicholson (:bnicholson) from ', ) ', Nit: Wikipedia was completely switched to 96px ', v3.x: ' 
id=1217408	 "Ok, I can reproduce this on my iPad Air. Previously, I had Firefox already running that's why I couldn't hit this crash. Just hit it on iOS 9.1", I don't have a device. Can you somehow get a crash log or trace or even console log out of this? We need more details.", There's an attached crash log - I'll symbolicate/investigate", Can you upload the Aurora 1112 archive?', Created ', Client 2015-10-22, 11-40 AM.crash Symbolicated', Thanks for the symbolication!', Created ', ', ', Turns out willTransitionToTraitCollection gets called BEFORE viewDidLoad in this case... Seems very strange.', Verifying as fixed on Beta 1113 running on iPad Air 2 (iOS 9.0.2)' 
id=1277237	 'Simon please remember to set keywords and bug importance for crashes fatal error: Could not find first responder: file /Users/AaronMT/Documents/Projects/firefox-ios/Client/Frontend/Browser/BrowserViewController.swift, line 2909', This is related to the third party search. There is an assertion that occurs when it tries detecting a search engine. I think its better if it just fails silently and just doesn\'t show the "add search engine" button in cases where the first responder is not found. Brian added the assertion would love his feedback on this.', Created ', ', Pull Request', Comment on ', ', Pull Request LGTM! Sorry for adding this assertion -- I think I misunderstood your comment in the custom search bug. I assumed that findSubViewWithFirstResponder should always succeed, but that's obviously not the case if we're attaching the button via the KeyboardHelper listener.", master 1ee0cf08cd1f02402de5765bbcb279d8c75727cf', Shouldn't this track 5.0? Did this land before the cut?", :aaronmt this did not land before the cut, but the needsuplift means it will be reviewed today in triage. If we decide to uplift to 5.0 we can update the tracking flag to 5.0, but for not we shall leave for 6.0 in case we decide not to uplift.', I was just trying to remove any resolved issues from the tracking list before triage to make it easier.', v5.x c0116518dcd2ec517253ed67093c5d699c12a2d4', Verifying as fix on master 1bc8bb71f.' 
id=1271625	 "I suspect that this is because our timestamps are unsigned, and we subtract the last sync time from the current time when we wake up. Arithmetic with two unsigned values isn't safe. We should explicitly check for the current time being in the past/last sync time being in the future and invalidate the stored time. That'll solve this bug and also avoid is not syncing for multiple hours!", Created ', ', ', master 0f2fabe3ff0ee84c1598896f8046e3c842fde7b6', v5.x 5502270f4cc78f3ab0376b70912b7f15f12e1e72', Tested on master 1bc8bb71f. The issue is no longer reproducible following the STR.' 
id=1142998	 "I'm working on this here: ", ', ' 
id=1274570	 'Created ', Simulator Screen Shot May 20, 2016, 9.50.28 AM.png', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', Merged.', Tested on 3c8f33c5. The Browsers layout no longer breaks when 'Home' button is added." 
id=1263624	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I've left some comments in the bug.", Comment on ', ', Link to Github pull-request: ', Updated!', Comment on ', ', Link to Github pull-request: ', Whoever gets to this first. Should land soon if we can since this has some strings.', Comment on ', ', Link to Github pull-request: ', I've left a comment about calling completionHandler too many times, but otherwise :thumbsup:", Tested on 6ad4b686. Only http and https URL are supported when entered in the URL bar. When using the SendTo app extension to send an unsupported URL from another application (Safari) to Firefox, an error message will be displayed (URL not supported). When using the other App Extension (ShareTo/View Later) from Safari to share unsupported URL to Firefox no action occurs.' 
id=1224855	 'Brian, any clues?', Created ', ', Link to Github pull-request: ', Looking at our Copy Image code, I see a few different issues: 1. In the Alamofire response, we do application.endBackgroundTask() only if the pasteboard string equals the copied string. We do this check to prevent replacing the pasteboard contents in case it's changed after any long-running image fetching, but ending the background task should be done unconditionally. 2. UIImage(data: NSData) can return nil if the image creation fails for whatever reason, and we don't guard against this. I tested explicitly assigning pasteBoard.image = nil, and that caused the same crash reported in the bug, so I'm guessing that's the issue. Not sure why iOS allows setting a nil image if it's not supported! 3. Setting the image replaces the image URL text in the pasteboard. The iOS pasteboard supports multiple representations simultaneously for an item on the pasteboard, so in this case, the pasteboard should hold both the image and its URL (e.g., for when pasting into text fields). This is consistent with Safari.", Comment on ', ', Link to Github pull-request: ', See comments about incorrect file type being displayed in iMessage/Messages when copying image of type JPEG.', Comment on ', ', Link to Github pull-request: ', Updated with commentary.', STR crash, for the sake of completeness: 1) Go to ', . 2) Long press and choose Copy Image.', Comment on ', ', Link to Github pull-request: ', Yup, this last patch fixes it and renders the right image with the correct URL fallback.', Master: 60a3b28 v1.x: a0be117', Reproduced the issue on version 1.2 build 1206 using Iphone 6 (IOS 9.1). Verified as fixed on version 1.3 build 1308.' 
id=1289146	 'Can we retest this on the latest 5.0 build as well?', Please remember, for crashes, to identify bugs correctly. As for this crash, I get a generic SIGABRT in main (reproducible on my iPad Pro). 2016-07-27 11:48:50.524 Client 820:290712 _BSMachError: (os/kern) invalid capability (20) 2016-07-27 11:48:50.524 Client 820:290712 _BSMachError: (os/kern) invalid name (15) (lldb) bt * thread #1: tid = 0x46f98, 0x00000001820ac11c libsystem_kernel.dylib`__pthread_kill + 8, queue = 'com.apple.main-thread', stop reason = signal SIGABRT frame #0: 0x00000001820ac11c libsystem_kernel.dylib`__pthread_kill + 8 frame #1: 0x0000000182178ef8 libsystem_pthread.dylib`pthread_kill + 112 frame #2: 0x000000018201ddc8 libsystem_c.dylib`abort + 140 frame #3: 0x000000010048067c Client`uncaught_exception_handler + 36 frame #4: 0x0000000182513138 CoreFoundation`__handleUncaughtException + 652 frame #5: 0x0000000181b7823c libobjc.A.dylib`_objc_terminate() + 112 frame #6: 0x0000000181b7823c libobjc.A.dylib`_objc_terminate() + 112 frame #7: 0x0000000181b6af44 libc++abi.dylib`std::__terminate(void (*)()) + 16 frame #8: 0x0000000181b6ab10 libc++abi.dylib`__cxa_rethrow + 144 frame #9: 0x0000000181b78120 libobjc.A.dylib`objc_exception_rethrow + 44 frame #10: 0x00000001823f0cf8 CoreFoundation`CFRunLoopRunSpecific + 552 frame #11: 0x0000000183cd8088 GraphicsServices`GSEventRunModal + 180 frame #12: 0x00000001876d2088 UIKit`UIApplicationMain + 204 * frame #13: 0x000000010035d64c Client`main + 560 at main.swift:20 frame #14: 0x0000000181f8e8b8 libdyld.dylib`start + 4", In my case above, I was trying to download an Android system image tarball, which is obviously not something one would do on the iPad.', Created ', Pull request', Comment on ', Pull request See PR for feedback', Comment on ', Pull request ', Comment on ', Pull request LGTM! Thanks for moving it to the share button.', master ae190595e6652f2223be737772be61ec376f6868', v5.x 10b4c2f', Tested on 5.1b2 on iPad Air 2 (9.3.3) When taping on the iOS 10 beta 3 - download link the context menu will open and Firefox will no longer crash', Verifying as fix on master aae3fdc32.' 
id=1274547	 'Created ', ', Pull request', Verifying as fixed on master e5b6720f' 
id=1223124	 'Same as ', ?', Hard to say. Same crash but it might be being caused by something else. Any STR?', Now this is #1 on 1.2', After some playing around, it looks like there's a lot of issues with top sites in general which could cause this bug: 1. After deleting some items, I've seen the default suggested tiles appear even when I'm not at the end. Seems to occur more after rotation changes. 2. I've been able to have the option to delete suggested tiles when I shouldn't. 3. After rotations I've had some top site tiles randomly not have the option to delete. Any of these issues could cause a crash if done correctly. Seems like to get to the root of this the Top Sites panel needs a serious look at in how we display the tiles. From looking at it, it doesn't seem like this is a regression from any of the caching stuff but an issue that has been there for a while.", Found a reproducible STR for this crash: 1. Load up app with a enough top sites to fill the screen and some more. 2. Rotate device to landscape (not sure if this matters0 3. Delete two items at the exact same time Expected Both (or one) of the items should delete Actual Crash', Created ', ', Link to Github pull-request: ', This quick patch resolves the crash by limiting the deletion of Top Site tiles by one tile at a time. I've filed ", to provide a more robust and better solution in the future instead of using some boolean flag to determine when we should delete a tile.', :rnewman / :bnicholson, this should be good to review. This PR should resolve all 3 issues I've highlighted above that are causing the crash.", Comment on ', ', Link to Github pull-request: ', Didn't get a chance to review this thoroughly, but looks OK after a brief glance-through. Can do more thorough testing/reviewing after the break if needed.", Instead of using semaphores, I ended up using a simple counter since we're we want we're accessing the shared resource on the same (main) thread so we don't need a semaphore to sync stuff up. Now the code simply fires off the async deletions, ups a counter, on completion, decrements it, check to see if it's 0 before going ahead with the refresh. We also have a flag indicating when we're in the process of refilling the tiles since we don't want to refill while we're deleting. Ready for another view whenever you get a chance :rnewman/:bnicholson", Comment on ', ', Link to Github pull-request: ', A few thready nits on the PR. My brain is not at 100%, but this looks OK to me. Test the living heck out of it -- removing last item, removing while triggering a sync, removing two then removing another, etc. etc.', I did some testing and was able to get duplicates to show while deleting during a sync :( The scope of changes this PR and all of the edges makes me think we should leave this out of 1.3 and push it to 2.0. I've must have tried everything so far to get it to avoid duplicates. I might just need to consider a different approach again. Thoughts?", Agreed. or 1.4. This needs more time to bake.', Agreed. If yo re happy with the patch to exit edit mode after removing one tile, then I'd consider that for 1.3 -- this was a topcrash. Not an ideal fix, but lower risk.", Let's get this on 1.4", #2 on 1.3', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Marking obsolete for simpler patch.', Comment on ', ', Link to Github pull-request: ', I did a code-level review as well, but leaving Brian's flag in case either of you wants another pass.", :rnewman I saw you were looking at this PR while we were in triage. How risky do you feel this is for landing in 1.4?', Comment on ', ', Link to Github pull-request: ', LGTM', Landed master 107294899325029b82ec29e10b7c2cae3f2dc403', Using the steps from ', I was able to reproduce the crash on build 1310 but not on 1404 Verifying as fixed.' 
id=1268033	 'Same here, running on an iPad, iOS 9.3.2 (beta), upgraded from 4.0.0b3. I can try to open one or two tabs, without any of them loading and than the entire app becomes unresponsive.', I was able to reproduce with a resigned version of the TestFlight build. Happened on the third time I upgraded from b3->b4. Nothing in the logs shows anything concerning though. The behavior I'm seeing is the web session fails to load the page, the toolbar items become unresponsive, and upon opening new tabs, the app eventually becomes full unresponsive.", Change list between b3 and b4: ', *** ', has been marked as a duplicate of this bug. ***', build 5 fixes this for me.', Tested on build 4.0.0b5 The issue no longer occurs when updating from 4.0.0b3 to 4.0.0b5.', Good to hear. Should be fixed from the uplift on ', . Marking as resolved.', What bug fix was the cause of the regression?', As part of the core telemetry work we uplifted to the 4.0 branch, we set values on the profile from a background thread on app launch: App Launch: ', Profile modification: ', This normally is fine but what was happening is upon setting a value to the profile, a notification is broadcasted across the app. In this case, our TabManager was listening to this nofication: ', . The problem is that this notification is handled on a background thread and we access the web view from it which breaks things since the web view/UIKit is not thread safe.' 
id=1290443	 'This will be fixed when the patch for ', lands.', It is no longer possible to close a tab while dragging it on master, as ', has been resolved.', Verifying as fixed on master acc25e6d9' 
id=1278224	 'Created ', Link to Github pull-request: ', Comment on ', Link to Github pull-request: ', Well, it works. I like default values, but perhaps we should avoid them for @objc decorated methods. I suspect we might need to compile some kind of style guide for this kind of thing.', master ed9b575f4152b76d43f63c2eae755b1382528144', *** ', has been marked as a duplicate of this bug. ***', v5.x 9aa315dfa0a81c60250c3943a13d56be2b64c671', Tested on 5.0b10. The issue is no longer occurs following the above steps to reproduce.' 
id=1272234	 'Created ', Crash log of the issue.', Created ', ', ', Comment on ', ', ', Looks good!', master efb43ad94a080dbdb883e2b9c4211ea88dbf586f', v5.x 91ba310', Tested on master fa14e51. The application will no longer crash when deleting a login after lock screen.' 
id=1279245	 'Created ', ', Pull Request', Comment on ', ', Pull Request Interesting find. Not sure whats going on either but this seems to work? Might be some weird layout collision between the snapshot call and animating in the new tabs while closing the others?', Aaron, seems there there are conflicts like All checks have failed also not sure what is expected there from the sheriffs re: checkin-needed since i'm also not sure if we have push rights :)", (In reply to Carsten Book :Tomcat from ', ) ', Oh \u2013 never-mind, I did not know about the new usage of that keyword.', master ea208fb2b297f73ce8137454234298cc8293893d', v5.x 9e19089', Tested on build 5.0b14. Firefox no longer becomes unresponsive after following the STR.' 
id=1216545	 'Possibly related, I saw this on my Simulator yesterday after ', landed. 2015-10-19 13:41:06.168 Client 13665:3213222 13:41:06.168 ERROR: AVAudioIONodeImpl.mm:365: _GetHWFormat: required condition is false: hwFormat 2015-10-19 13:41:06.169 Client 13665:3213222 *** Terminating app due to uncaught exception 'com.apple.coreaudio.avfaudio', reason: 'required condition is false: hwFormat' *** First throw call stack: ( \t0 CoreFoundation 0x0000000106558f65 __exceptionPreprocess + 165 \t1 libobjc.A.dylib 0x0000000105878deb objc_exception_throw + 48 \t2 CoreFoundation 0x0000000106558dca + NSException raise:format:arguments: + 106 \t3 libAVFAudio.dylib 0x000000010d427e53 _Z19AVAE_RaiseExceptionP8NSStringz + 176 \t4 libAVFAudio.dylib 0x000000010d4693a7 _ZN13AVAudioIOUnit12_GetHWFormatEjPj + 373 \t5 libAVFAudio.dylib 0x000000010d4690aa ___ZN13AVAudioIOUnit22IOUnitPropertyListenerEPvP28OpaqueAudioComponentInstancejjj_block_invoke_2 + 166", Console: 2015-10-20 15:01:52.857 Client 10329:2870709 15:01:52.820 ERROR: 0x1a1ed2000 >aurioc> 807: failed: '!pla' (enable 2, outf< 2 ch, 44100 Hz, Float32, non-inter> inf< 2 ch, 0 Hz, Float32, non-inter>) 2015-10-20 15:01:52.891 Client 10329:2870709 15:01:52.889 ERROR: 0x1a1ed2000 AVAudioEngineGraph.mm:2510: PerformCommand: error 561015905 Trace: Thread 1Queue : com.apple.main-thread (serial) #0\t0x000000019ac1ff48 in objc_exception_throw () #1\t0x0000000186f6744c in __NSThreadPerformPerform () #2\t0x0000000185fe05a4 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ () #3\t0x0000000185fe0038 in __CFRunLoopDoSources0 () #4\t0x0000000185fddd38 in __CFRunLoopRun () #5\t0x0000000185f0cdc0 in CFRunLoopRunSpecific () #6\t0x0000000191060088 in GSEventRunModal () #7\t0x000000018b5e6f44 in UIApplicationMain () #8\t0x000000010023519c in main at /Users/sarentz/Projects/firefox-ios/Client/Application/main.swift:22 #9\t0x000000019b44a8b8 in start ()", Thrown from: func startEngine() { if !engine.running { do { ', } catch { log.error("Unable to start AVAudioEngine: \\(error)") } } }', Interesting the catch clause is never called. This may not work as we expect it to.', Some notes: Safari behaviour: Make sure audio is silent Open a new tab, go to ', Play the podcast Hit the home button - Audio keeps playing Open Clock, set an alarm for 1 minute Lock screen - Audio keeps playing When alarm goes off, silence it "Tap to Stop" Audio should still be playing Unlock phone Double tap Switch to Safari - Audio should still be playing', We already fail here: When alarm goes off, silence it "Tap to Stop" Audio should still be playing We don\'t crash, but the audio stops playing. I think we may be using the wrong audio session flags/mode/etc.', I have added the 'audio' background mode to the app. This gives us behaviour similar to Safari and stops the crashes. I don't think this one had anything to do with our AuralProgressBar code. I think this is about the WKWebView playing audio.", Created ', ', PR: ', This patch adds audio as a required background mode. This prevents the crash and also makes the app behave similar to Safari wrt audio. You can now for example start a podcast in a tab, answer a phone call, or play a game, and the podcast will be correctly suspended and resumed.', Comment on ', ', PR: ', #1180 works for me ', I merged that. 273dcf7', Comment on ', ', PR: ', sleroux, please post-review!', I can't reproduce the crash using the steps from description. Verifying as fixed on Beta 1113" 
id=1221511	 'Created ', ', Pull request', Comment on ', ', Pull request Hey Philippe, Thanks for the patch! It looks like this crash might be being caused by something more troubling than checking to see if the index is -1 or not. I noticed that we assign privateMode before we run the tab deletion code when tapping the private mode icon 1 . This looks problematic since we swap out the tabs inside the TabManagerDataSource BEFORE we run the deletion 2 which would mean that when we go to delete the tabs, the data source thinks we're deleting normal tabs when in fact we want to delete the private ones. I think looking at ways to reordering or keep the state between the tabManagerDataSource and when to delete the tabs would resolve the root of this bug. 1 ", 2 ', Stephan, Thank you for your feedback. Yo re right, there is something wrong in the code order. I'll have a look and push related changes. Should I remove the previous code checking for -1 or do I keep it? By the way, I saw something that seems strange to me: there is a code to ensure the code for private state update is executed on iOS 9 only 1 , however the deployment target of the app is set to 8.2 so I guess the app should work on iOS 8. This means that private mode may not properly work on iOS before 9 with this code, or am I missing something? 1 : ", I would probably omit the -1 patch and replace it with a fix for the core issue. I feel like if we're getting into a state where we're passing -1, we're doing something very wrong and should investigate where it originates from (like this issue). Private browsing is only available on iOS 9 only unfortunately. WKWebView only began supporting memory/non-persistent data sources in iOS 9 and there was no way to support it in previous versions without swapping out to something like UIWebView :( That's why yo ll find #available(iOS 9, *) checks throughout the mode when it comes to private browsing.", I updated my pull request with a proposition for fixing the issue and removed the previous code that checked on returned values. I found out that the issue comes from the fact that tabs are removed the usual way, as if the user removed them and thus the delegate of TabManager is called for each tab, initiating an update of the view. There were two things that were not right with this: 1. as you mentionned earlier, the delegate was called at an inappropriate moment thus causing the app to crash, 2. by re-ordering method calls, the issue was fixed but it causes a new issue: animation and/or view state after quitting private browsing were not right. To fix the issue, I added a method to remove all private tabs without calling the delegate. Thanks for this information about WKWebView, I did not know the memory/non-persistent thing, good to know.', Comment on ', ', Pull request Patch looks good! I just added one nitpick that can simplify the patch. As far as the fix goes - I'm a bit torn. On one hand, passing in the notify flag allows us to side step the delegates from being called which in the case of the tab tray makes sense since the delete method contains logic pertaining to deletion from the UI. On the other, I feel like we're doing other potential delegates of the tab manager a disservice by providing them a potential lie in the fact that a tab can be removed but the delegate method isn't guaranteed to be called. Ultimately it seems that the issue is that we're abusing the tabManager's didRemoveTab delegate for our UI uses and programmatic ones when we shouldn't have any of the UI deletion code in the didRemoveTab callback in the first place. I think this is a better fix than the -1 index check and works for resolving this bug but we should file a follow up to look into a larger refactor of how this view controller handles deleting tabs. :bnicholson, do you have any thoughts on the above?", Comment on ', ', Pull request Hm, yeah, this code is a bit of a mess at the moment. I think a lot of the complexity here is from having to maintain a mirrored state between the TabManager tabs and the TabTrayController tabs; if the collections get out-of-sync, everything breaks. At first glance, it seems like a good fix for this might be to remove the tabs array from TabManagerDataSource altogether, including related methods (addTab and removeTab). We could give the data source our TabManager instance so that it could pull the live set of tabs directly. If we did this, we might need to do some fidgeting with our existing tabManager delegate methods (didRemoveTab and didAddTab) to also send along the index of the tab that was added removed (since we're currently using the mirrored structure to calculate that index dynamically). Assuming that works, that feels like a better fix to me than having the cloned structures and the notify argument hack.", Going to land this as is for now - I think the work done for ', might help clean up the tab manager callbacks and we can work on removing the duplicate state afterwards', cbae7207eaa3e31f9d5357407534dbff63abe4c0 Merged', Marking as a dependency so I don't forget about it", I can't reproduce this issue on Beta 1202 Verifying as fixed", *** ', has been marked as a duplicate of this bug. ***' 
id=1284270	 'Created ', ', Link to Github pull-request: ', master 45ac290debbb61d5a61aff9f7c67c2492f0bd54a', v5.x 2cd06e0', Already uplifted.', Tested on 5.1b2 and master 3f103883 on iPhone 6 Plus and iPad Air 2 Following the above STR, when the Touch ID is requested, the login credentials are still visible. Stephan, should I report a new issue?', Ya I would file another issue.', Verifying as fix on master aae3fdc32.' 
id=1263842	 'Is Step #4 missing an important part?', the 4th step is not missing an important part. It was just a typing error. Please see below the correct step: "4. Open Firefox"', I was able to reproduce. I'll look into this one.", Created ', ', Pull Request', Comment on ', ', Pull Request Looks good!', master 552698b958a5a4e74402190f5495d7305e31e4b0', v4.x 1de33be', The issue is no longer reproducible on build 4.0.0b2 and 5.0.0(1).' 
id=1281777	 '(In reply to Teodora Vermesan (:TeoVermesan) from ', ) ', I set my homepage to ', ', I get ', ', The URL is editable ', What am I missing? I can't reproduce. Why would about:home be displayed if I set a custom homepage to a site.", Actually never-mind, I misunderstood. We should be showing the panels, otherwise the only access to them is via the me menu button shortcuts.', so speaking with tecgirl about this, I'm assuming that you implemented to not show about:home on url taps for blank pages and homepages? If so and if that's part of the plan, I'll leave it to tecgirl to come in with the final say to see if that needs to be changed. If it needs to be changed, I think it's a simple 1-3 liner right?", The new tab behaviour is fairly under-specced. My reasoning for new tab as: blank: tapping on the URL bar was the only action that makes sense after opening the new tab. If this is automatic, and the homepanels are displayed, this is indistinguishable from the previous behaviour. homepage: the homepage is more like a web page than a home panel, and the URL should be editable. Much less clear reasoning for why this shouldn't bring up the Home panel when tapping on the URL bar. ", Correct. Relevant line is: ', This does feel kinda funky. What\'s the use case for "Show a Blank Page"? Can we just remove that option altogether?', will wait for tecgirl to respond - i think she's flying rn.", about:home should only be displayed when tapping the Home icon. no changes should be made to the current behavior when you tap on the URLbar.', Created ', ', PR', :bkmunar: < if .HomePage, .BlankPage .contains(NewTabAccessors.getNewTabPage(profile.prefs)) ', Current PR means that 'Show a Blank Page' does exactly the same as 'Show Top Sites', but for a tap. (i.e. a worse experience than Show Top Sites). Blank page is a requirement from :dxue btw.", I think that's the behavior :tecgirl wants, but waiting for her confirmation/review", Comment on ', ', PR ', v5.x c348e81', Verifying as fixed on build 5.0(2) about:home is displayed when following the steps from ', Looks like this was been resolved and already uplifted. Removing needs uplift.' 
id=1261457	 'I did a little bit of research: when I open the above URL in a minimal app that just has a WKWebView embedded without any of the infrastructure that Firefox adds, things work as expected. So we need to narrow down what in Firefox causes this. My guess is that this is most likely related to some UserScript that we inject.', The problem persists after disabling all user content scripts. Not sure what is going on here yet.', Also, not much useful in the web console.', Created ', ', PR: ', This patch adds a special case for `about:blank` to the 'should we load this url' decision handler. It looks like `about:blank` is used to reset an iframe. We used to load these, but after ", (', - Safari parity for url and scheme handling) we started to ignore them. That was a mistake :-/ This patch simply special cases `about:blank` and lets the `WKWebView` load them.', I have marked this with losing-users because we know of at least two cases where people have said 'i cannot use this because i cannot use some website anymore'.", Comment on ', ', PR: ', LGTM!', *** ', has been marked as a duplicate of this bug. ***', Also, for reference, when you create a frame without a src, it defaults to about:blank. If we block that then page load events are never fired. Which breaks things that depend on this behaviour.', Are we taking this patch on 4.0?', Verifying this as fixed on build 4.0.0b5' 
id=1289717	 'Created ', ', ', Comment on ', ', ', I think this patch is on the wrong bug?', This patch fixes a few bugs, one of which is this one and 1289768 too. When you open tabs too quickly there\'s a possibility of a "floating" HomePanelViewController (by that I mean we add a HomePanelViewController, set homePanelViewController to nil but dont remove it, so there becomes 2 HomePanelViewControllers when a new tab is opened) this causes the browser to become unusable.', When the tab tray button is pressed in this video ', you can see the "floating" HomePanelViewController during the animation :)', master ab314a630e04d5fb0e3b9d66c5334b0e026c8594 The bug was flagged as affecting 5.1 but the build this was tested on was master. Is this incorrect?', Yes!', Looks like this bug is also affecting another which is targeting 5.1: ', Marking as uplift to resolve the other bug.', v5.x 7d90f3e', Tested on master 3f103883 on iPad Air 2. Webpages can be visited and are correctly loaded.', Verifying as fix on master aae3fdc32.' 
id=1270292	 "Looks like it's only the 100th tab that runs into ellipses...after than the numbers display again until the characters are too big to contain in the box.", Good first bug?', Created ', ', ', Comment on ', ', ', Looks good!', master 4ac09309c0a0400f1d20b1265f39758472d60bc7', Tested on build d3c9de01. After opening 100 tabs an infinity symbol is displayed.' 
id=1268871	 '2016-04-29 09:28:57.255 Error Tab.swift:203 restore > creating webview with no lastRequest and no session data: nil 2016-04-29 09:28:57.522 Warning BrowserViewController.swift:1994 webView(_:decidePolicyForNavigationAction:decisionHandler:) > Denying unprivileged request: <NSMutableURLRequest: 0x7f8724a07790> { URL: ', }', Still reproducible on master (05/03, ddc21a)', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Good catch.', *** ', has been marked as a duplicate of this bug. ***', Tested on build b222aa67. The issue is not reproducible following the above steps.' 
id=1205280	 'This was reported last week or two, forget the bug number. Richard?', stomlinson, vladikoff: I thought this was squashed in ', . Can you help debug?', This was resolved on 2015-09-17 13:14:37 PDT with train 45.1 of the content server Ref: ', Verifying as fixed on current TestFlight build (1111)' 
id=1272293	 'This bug should be fixed in this change: ', With ', fixed, is this still reproducible?', Tested on build afdbc70 The issue is no longer reproducible following the steps in the description.' 
id=1267482	 'Created ', ', Link to Github pull-request: ', master: ', v4.x: d910f6d', Verifying as fixed on build 4.0.0b5 and latest master' 
id=1274549	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Works for me!', master 80a244317f27783d9026d7d6efde873011f1e6e3', The top and bottom padding for multi-line settings rows text on small screen devices is correct on master 5979d61c.' 
id=1283088	 'Created ', ', ', Comment on ', ', ', LGTM', master bcdd500fa0d0f37fa8e6f39f076892ce3bea265b', Tested on iPad Air 2(10.0.2). Verifying as fix on master 0e03028ac.' 
id=1249109	 'Please check wether this is mentioned in 2.0 release notes and or support documentation.', Created ', ', Pull request', Aaron, we are not documenting this in the 2.0 documentation or What's New page.", Comment on ', ', Pull request LGTM', Verifying as fixed on build 2.1(1) "Last Open Tab" is no longer available in the 3D Touch men 
id=1244133	 'In Safari/Chrome, pasting a data URI into the address-bar, they will display inline in a document.', We should support data URLs.', Need to update BVC: webView:decidePolicyForNavigationAction switch to include the data URL. This also causes an issue with the Spotlight code setting the URL for the activity webPage URL but that should be easy to find a solution for. I feel we should also add data URI's to the list of excluded URI's for history and syncing, but not sure?", Agreed. We should handle data URIs correctly. Parity with Android wrt history and (tab) syncing.', A quick test shows that WKWebView happily loads and renders data: URIs. So we do not have to parse and process them manually. If we decide to support this then I think we just need to think a bit about possible content types that we may not want to support. If any at all.', Good short test that renders a red dot: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==', *** ', has been marked as a duplicate of this bug. ***', javascript:; also fails, e.g, long-tap on an image from a Google search and 'Copy Link'", Created ', ', Pull request A couple of notes: I haven't blocked any specific resource types for data URIs \u2014\xa0as normal URIs can represent any data type, is there any disadvantage to doing this? Secondly, no change to the Spotlight code was needed, as that already checks for a HTTP/HTTPS scheme.", Looks good, though it would be useful if we also included support for data URIs that aren't Base64-encoded, which Safari also supports. For example: data:text/html;charset=utf-8,<!doctype html>%0D%0A<html>%0D%0A <head>%0D%0A <title>Hello<%2Ftitle>%0D%0A <%2Fhead>%0D%0A <body>hello<%2Fbody>%0D%0A<%2Fhtml>%0D%0A Looks like the current PR fails in that case because the string contains invalid URL characters. I think we should try escaping the URL characters (using NSCharacterSet.URLAllowedCharacterSet()) before doing the check at 1 , which will fix this case. That will also match our behavior on desktop/Android. 1 ", I've fixed support for non-base64-encoded URIs (at least for the ones I tested). However, I noticed there were a few more changed that needed to be made (e.g. to enable the refresh button when viewing data URIs and so on) \u2014\xa0would you just be able to take a look to make sure everything still looks okay?", Comment on ', ', Pull request Nice, looks good!', Verifying as fixed on master fa14e51' 
id=1270974	 'Created ', ', PR: ', This patch improved LTR support in the Reading List.', Comment on ', ', PR: ', lgtm', Followup patch because the button actions were not swapped :-/ ', Tested on build d3c9de01. The issue is not reproducible.' 
id=1267241	 'Created ', ', Link to Github pull-request: ', Steph \u2013\xa0you said you might have some insight?', I was just going to mention the default padding 1 but it looks like yo ve compensated for it in the PR. Nevermind! 1 ", :', Comment on ', ', Link to Github pull-request: ', We should land this before 5.0. It's a good deal better than it was, but not perfect.", Comment on ', ', Link to Github pull-request: ', LGTM. Tested on 6+', v5.x 6e972f6c0306fffe50e46189c6904598dacc042a', Tested on 5.0b10 The copied link is correctly positioned.' 
id=1246923	 'Created ', ', ', - Disable edit button when the list of logins is empty (Pull request #1521) This may also (indirectly) fix ', .', Comment on ', ', ', - Disable edit button when the list of logins is empty (Pull request #1521) Thanks for the patch! Looks good. If yo re interested in a follow up bug, this fix could also use a UITest. I can file another bug for that and add some more details.", master 1481788a5897acc70b14a784b72a67a800b4aa33', Follow up bug for adding UITest: ', Verifying as fixed on build 3.0(1) The Edit mode is disabled if the logins list is empty' 
id=1283048	 'Created ', ', ', master dc09f7983b700f884ab55cced78ace8aed5efa72', Tested on iPad Pro (9.2.1) verifying as fix on master 1bc8bb71f.' 
id=1265657	 'Created ', ', Pull request', Created ', Simulator Screen Shot Apr 19, 2016, 10.48.04 PM.png Full bleed highlight.', This is fixed as part of ', *** This bug has been marked as a duplicate of ', ***', Verifying as fixed on 4.0.0b5 and latest master' 
id=1274398	 "Note: - The entered URL can be saved by tapping on the '< Settings' button but only when typing the URL domain as well ( ", ). After typing the http:// domain the text color will change from red to black and the URL will be saved. On Android, the address can be saved without having to enter http:// . Can we do the same on iOS?', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', I think we could simplify the a little as mentioned in the PR, but LGTM otherwise.', *** ', has been marked as a duplicate of this bug. ***', Fixed and merged.', Verifying as fix on master 6ad4b686.' 
id=1258716	 'Created ', ', Github PR ', This patch also fixes ', Comment on ', ', Github PR ', Tested on iPhone 6s. LGTM!', master a6c672fdfccd02749f408108e2b6e16f7fb3d1c1', *** ', has been marked as a duplicate of this bug. ***', Verifying as fixed on master a6c672f.', v3.x 18d8103', On build 3.0b8 I can disable 'Use Touch ID' using the passcode. Verified as fixed." 
id=1290838	 'This is also true when the content is refreshing.', Created ', ', Pull request', Comment on ', ', Pull request Nice find!', Verifying as fix on master 0e03028ac.' 
id=1257219	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request', Comment on ', ', Pull request Nice!', Probably a good point release candidate.', v5.x 2ad3e11', Tested on 5.1b2 on iPhone 6 Plus (9.3.3). The URL from Private Tabs is no longer visible during iOS multitasking.' 
id=1213210	 "Nick's on PTO on Monday, but I don't think waiting until Tuesday is likely to kill us. If there are free hands, someone else can poke at this.", Agreed. I expect this to be an fxa-content-server navigation issue: redirecting to vlad for confirmation and suggestions for how to address. vlad, I expect this to be mildly similar to issues like ', , where things just get a little confused with Back being shown/hidden and links being opened in new tabs, etc.', So normally that would open a new window with COPPA laws. I guess we should hide it somehow for the iOS context unless we can trigger a new event in FxiOS to open a tab', Filed content server issue ', Tracking this, even though the fix is server-side.', (In reply to Richard Newman :rnewman from ', ) ', What does that mean? Are we going to hide the link on iOS?', We will try to "show the link\'s href next to the learn-more text" 1 in the FxA content server 1 - ', This was fixed in ', Will be in production next week.', Aaron, could you verify?', Still an issue. Commented in ' 
id=1237149	 "Oh so when we use let language = NSLocale.preferredLanguages().first! We get zh-Hans-CN back. So that will not match any of the directories in SearchPlugins. Is there a reason we don't use NSLocale.currentLocale().localeIdentifier here?", Since this is related I figured I should ask here and get some additional verification. While I was uplifting the patches for the search engine .xml changes there were conflicts. Who would be the best person to NI to double check these? ', Created ', ', PR: ', Patch comment: This patch introduces a `directoriesForLanguageIdentifier()` function that returns a list of `SearchPlugins` directories to search for the given *language identifier*. This change was made so that we correctly handle the `zh-Hans-CN` *language identifier* which does not map to any of the `SearchPlugins` subdirectories but should default to the `zh-CN` one.', Comment on ', ', PR: ', Looks good, a couple minor comments in the PR.', Merged.', v1.x 9d61f45', Reopen it because it still shows the incorrect search engine on iOS 8.4.1.', Created ', ', Pull request for ', Comment on ', ', Pull request for ', I am ok with this change, but: Please fix the testDirectoriesForLanguageIdentifier() test, which currently fails because directoriesForLanguageIdentifier() now returns a different preference for language identifiers.', Created ', ', PR: ', This is an alternative for the existing pull request that renames the directories. I think I would prefer to just normalize the language identifier to get some commonality between iOS 8 and iOS 9. Specially because the search engine directories are generated by a script and are based on the Android ones. So I would prefer to keep the same locale identifiers in their names.', Comment on ', ', Pull request for ', See newly attached pull request with new and simpler approach.', I am ok with this change.', Comment on ', ', PR: ', LGTM. Might be worth exploring using currentLocale soon so we can properly handle other languages that have similar IDs.', v1.x e59f3b5', Verified on v1.4(1404). It can shows the right search engines for zh-CN both on iOS 8.4.1 and iOS 9.2.', Changing the status to Verified based on the previous comment' 
id=1258431	 'Created ', ', Github PR ', Comment on ', ', Github PR ', Nice.', Created ', ', Link to Github pull-request: ', master f210cffe5a9314becca9ca8b05dc136617eb4de8', Verifying as fixed on build 4.0.0b5' 
id=1263178	 "Tested on multiple devices with iOS 8.x/9.x and it's working as expected. Verifying as fixed on master e5b6720f" 
id=1260699	 'Created ', ', Link to Github pull-request: ', master ae535e4de737cea0f7ba25ae3c7bd4cbe45ebdff', v5.x 8739c82632ba96fcd42b353504b567595a866855', The first run tour has proper functionality when swiping between slides on build 5.0b10.' 
id=1273915	 'Created ', Link to Github pull-request: ', master f3e2571c6219ec32c890f03d3a26684f94f22fab', The information text is no longer overlapping the new opened tab on master e5b6720f.' 
id=1272007	 'This bug should be fixed in this change: ', Tested on master fa14e51. The delete confirmation screen is dismissed and the passcode requested when the device is locked or the application is minimized and restored.' 
id=1266699	 'Created ', ', Pull request', Verifying as fix on master 6ad4b686.' 
id=1283742	 'Created ', ', pull request', Comment on ', ', pull request ', Created ', ', pull request', Comment on ', ', pull request I'm not too familiar with how our sharing code works but I feel like this will effect other extensions - not just WeChat. Does this make sense?", :jhugman is definitely the person to answer this one.', So the patch here feels like it's a workaround rather than the fix. I'd like to understand why our custom uti conforms to public.url but wechat doesn't recognize that. Do other apps correctly understand behave (and thus its wechat's bug) or is it ours? (perhaps writing a test application might help here). Also: how does this perform in the presence of both wechat and a password manager? ", (In reply to James Hugman :jhugman @jhugman from ', ) I totally agree with you. Our custom uti conforms to public.url, but WeChat doesn\u2019t recognize that. It is feels like wechat\u2019s bug. But in China, we only have a small number of users, and WeChat is really popular, so we need fix this bug for ourselves. And I have changed my patch, just compatible with the WeChat. Please help me review it. (I do not know how to write test application. Could you tell me more detail about this?)', Created ', Pull Request', Thanks for fixing this Lin. And sorry for taking so long. There were some slight changes I had to make so I created a new PR and incorporated your fix. ', v6.x a03c6bc', Tested on 6.0b3 on devices running iOS 9 and 10. The content can now be shared to WeChat.' 
id=1224226	 'Created ', ', Pull request', Created ', Before / After Screenshot Hey Darrin! Don't know if yo re reviewing the screenshot/the code or both, but feel free to redirect :)", Comment on ', ', Pull request I can take the code review part if you want :darrin', Comment on ', ', Pull request Looks good to me! The only thing is maybe renaming the header view to reflect that it's also used as a footer now.", Comment on ', ', Pull request Just noticed something in landscape: ', Comment on ', Before / After Screenshot This looks great! For details sake, I'm wondering why the bottom border appears to be thicker/heavier than the top border on that view? If it's just a height/border width issue, it should be a quick fix and +.", Comment on ', ', Pull request Thanks for the quick fix! Looks like the double thickness issue is also gone that :darrin mentioned.', Landed 24dfac4dd89ffb0433730125c381afbdcad71ba3', Cool, fun project to contribute too :) Thanks!', Reproduced the issue on version 1.2 build 1206 using Iphone 6 (IOS 9.1). Verified as fixed on version 1.3 build 1308.' 
id=1216994	 "What's supposed to happen here: * Desktop will upload at least three records: the new target folder, the old parent folder, and the changed record. * We'll apply the moved record. Nothing will seem to have happened, but we'll update some metadata. * We'll apply the old and new folder records, which involves dropping all related rows and re-inserting, and the parent of the moved record will thus be updated.", Tested locally: BookmarksDownloader.swift:295 handleSuccess > Got success response with Optional(3) records. BookmarksDownloader.swift:307 handleSuccess > Advancing lastModified to Optional(1445444510550) ?? 1445444510550. BookmarksDownloader.swift:136 go(_:greenLight:) > Done with batched mirroring. BookmarksDownloader.swift:117 applyRecordsFromBatcher() > Applying 3 downloaded bookmarks. SQLiteBookmarks.swift:499 applyRecords(_:withMaxVars:) > Inserting 36 children. SQLiteBookmarks.swift:507 applyRecords(_:withMaxVars:) > 2 unique parents to drop from structure table. SQLiteBookmarks.swift:533 applyRecords(_:withMaxVars:) > Inserting 36 records (out of 36). SQLiteBookmarks.swift:426 deleteChildrenInTransactionWithGUIDs(_:connection:withMaxVars:) > Deleting 0 mirror bookmarks from structure table. Cannot reproduce, whether moving an old bookmark or following the STR in ', precisely. Am I missing something, Catalin? Note that the UI will not update, so if you were viewing the old parent folder after syncing, yo ll still see the moved bookmark until you pick a different folder and then come back.", Investigated a bit more and, for some reason, I'm not able to reproduce either when using old/heavily populated accounts. However, I can reproduce with newer accounts/less populated profiles. ", The easiest way to reproduce is to use a new account and clean profiles. ', I've even restarted the browser, with no effect.", Repro'ed on simulator, with logs and a captured DB: unfiled_____ TPgJZkruqybK 0 <<<< toolbar_____ 9ALDRLHyjaAl 0 toolbar_____ nM7-VQqiXEds 1 toolbar_____ 8bvT3V67KRxH 2 toolbar_____ TPgJZkruqybK 3 <<<< Thanks for double-checking, Catalin!", Profile.swift:659 mirrorBookmarksWithDelegate(_:prefs:ready:) > Mirroring server bookmarks to storage. Synchronizer.swift:151 init(scratchpad:delegate:basePrefs:collection:) > Synchronizer configured with prefs 'profile.sync.synchronizer.bookmarks...' Profile.swift:823 greenLight() > Checking green light. Backgrounded: false. BookmarksDownloader.swift:176 init(collectionClient:basePrefs:collection:) > Downloader configured with prefs 'downloader.bookmarks.'. BookmarksDownloader.swift:127 go(_:greenLight:) > Downloading up to 100 records. BookmarksDownloader.swift:241 go(_:limit:) > Modified: 1445522147510; last 1445522116190. BookmarksDownloader.swift:261 downloadNextBatchWithLimit(_:infoModified:) > Fetching newer=1445522116190, offset=nil. StorageClient.swift:698 getSince(_:sort:limit:offset:) > Issuing GET with newer = 1445522116190. StorageClient.swift:329 failFromResponse > Status code: 200. BookmarksDownloader.swift:279 handleSuccess > Handling success. BookmarksDownloader.swift:291 handleSuccess > Advancing baseTimestamp to 1445522147510 - 1 BookmarksDownloader.swift:295 handleSuccess > Got success response with Optional(3) records. BookmarksDownloader.swift:307 handleSuccess > Advancing lastModified to Optional(1445522147510) ?? 1445522147510. BookmarksDownloader.swift:136 go(_:greenLight:) > Done with batched mirroring. BookmarksDownloader.swift:117 applyRecordsFromBatcher() > Applying 3 downloaded bookmarks. SQLiteBookmarks.swift:499 applyRecords(_:withMaxVars:) > Inserting 4 children. SQLiteBookmarks.swift:507 applyRecords(_:withMaxVars:) > 1 unique parents to drop from structure table. SQLiteBookmarks.swift:533 applyRecords(_:withMaxVars:) > Inserting 4 records (out of 4). SQLiteBookmarks.swift:426 deleteChildrenInTransactionWithGUIDs(_:connection:withMaxVars:) > Deleting 0 mirror bookmarks from structure table.", A little quality time with the debugger suggests that this only happens to now-empty folders. We choose what to delete from the structure table by looking at the parents of changed children\u2026 and for a now-empty folder, there are no new children. The fix is to delete all touched folders, not just the ones with new or moved children.', Created ', ', Pull req. r? whoever-has-time', I added an automated test. That was easier than expected.', 7b5cf8a', Verified on build 1113 with my own account.' 
id=1228547	 'Created ', ', Pull request', Probably needs a UX thought +CC :tecgirl', For clarification, Safari does not reset the UA on reload and continues to hold onto the desktop UA on new links clicked (except for opening links in a new tab). I suppose we should do that.', This does not work correctly. In webView(webView: WKWebView, didFinishNavigation navigation: WKNavigation!) we are doing the following: // Remember whether or not a desktop site was requested and reset potentially spoofed user agent if #available(iOS 9, *) { tab.desktopSite = webView.customUserAgent?.isEmpty == false webView.customUserAgent = nil } This will always reset the custom user agent for the next request. I don't think that is the behaviour we want. I think we want the same thing as Safari does, which is this: * When you RDS, the current page is reloaded with a Desktop user agent * When you open a new link in the same tab (that now has RDS enabled) for the *same* site, we need to stay in RDS. * When you open a new link the same tab (that now has RDS enabled) for a *different* site, we need to reset RDS So you need to keep track of the page URL and decide to disable RDS probably before each request starts in webView(webView: WKWebView, decidePolicyForNavigationAction navigationAction: WKNavigationAction, decisionHandler: (WKNavigationActionPolicy) -> Void) Here is a good test case: 1) Open a new tab 2) Load Github.com - See that it loads the mobile site 3) Enable RDS - See that it reloads and github.com is now the desktop version 4) Tap on a link in the navigation bar like 'Explore' - See that it loads the Desktop version 5) In the same tab, open ", from the location bar - See that it loads the Desktop version 6) On the Almofire Github page, scroll down to the Communiation section and tap the link to Stack Overflow - See that RDS is reset and that SO opens in Mobile mode', Aaron, Safari does reset RDS if you go to a different web site on a tab where RDS is enabled. See test case above.', Comment on ', ', Pull request See my comment earlier. I think we need better Safari parity before this can land. I attached a good test case.', (In reply to Stefan Arentz :st3fan from ', ) ', I meant links clicked through the same domain, however you are correct on the above as I just tested on my iPhone on Safari.', Thanks for the feedback on the pull request, Stefan. I think that always resetting the UA for the next request is exactly what we agreed on in ', (specifically in the comments on GitHub). But you are right in that it should be refined. I can look into updating the pull request with the suggested changes.', Comment on ', ', Pull request (In reply to hennes from ', ) ', Yep, I was unfamiliar with Safari's behavior myself, so I apologize for not giving more direction in ", . But no worries -- I think your code that's already landed was a good first iteration; we want to land/test features rapidly so we can find precisely the kinds of follow-up bugs we have here.", Yes, that makes perfect sense. :) I updated the pull request and the behavior should comply with Stefan's test case now. Brian, Stefan, I added both of you as reviewers because I wasn't sure whom to pick. I guess one reviewer will be enough but I'll let you guys work it out.", hennes, this works really well. fantastic.', Brian if you are happy with the code then we should land it and still ship it as part of 1.3!', Comment on ', ', Pull request Looks great, thanks! Left a few minor comments in the PR.', Thanks for the feedback. I updated the PR with the small changes.', Thanks! Landed: master: 531f59c v1.x: d7255be' 
id=1207593	 'This should be resolved as part of ', Commit: ', Karen was seeing this on a current TestFlight build (iOS 8). Did that fix end up in a release yet?', Not yet. This was merged in yesterday morning.', Verified as fixed on current TestFlight build (1111)' 
id=1201515	 "Tracking 'cos PB is tracking.", Created ', ', ', First patch for PBMode!', Comment on ', ', ', Nice, looks good. Several questions in the PR, but nothing major.', Merged', Verifying as fixed on current TestFlight build (1104) The page visited in private browsing are not saved in History' 
id=1276204	 'Created ', ', Pull request', merged #00e5344145a675612aca9ff396ffeb9d1a02442b', v5.x 32c22f80382712ea0acf65f80add0cdbff4616c1', Tested on 5.0b10. The buttons are correctly displayed in the toolbar.' 
id=1280489	 'Tested on iPhone 6 S iOS 10.0 on RC 5.0(2). The login screen is dismissed and a new tab is open. Probably fixed by ', .' 
id=1203640	 'Created ', ', ', Hides the collection view when we resign the application while in private mode.', Merged.', Verifying as fixed on the current TestFlight build (1104) The private browsing tabs are not displayed in the app switcher' 
id=1241089	 'This issue would also be present in the same scenario from Spotlight', Created ', ', Pull request Added :jhugman as this affect Spotlight too.', Comment on ', ', Pull request Looks good to me!', Comment on ', ', Pull request LGTM', Verified as fixed for both 3D Touch and Spotlight scenarios. Tested on build 2.0(4)' 
id=1270456	 'This will also cause for the menu that is shown in browser view to be displayed in tabs tray or in the home screen: 1. Open menu in landscape 2. Rotate to portrait 3. Open tabs tray or go to the home screen 4. Rotate to landscape', Created ', ', Pull request', Comment on ', ', Pull request This is pretty hacky and gross but I can't think of another way of doing it :(", (In reply to Stephan Leroux :sleroux from ', ) ', I know. If I could have found another way I would have done it. I hate writing code like this, but hacky code is better than bad User Experience I suppose.', Verifying as fixed on master e5b6720f' 
id=1252888	 '?', *** ', has been marked as a duplicate of this bug. ***', should fix the lifecycle issue here.', Still reproducible on master', Perhaps Farhan you might be interested in this bug too?', Is this related to the similar bug that we had wrt favicon? Aaron, can you see if you can still reproduce this?', This should still be reproducible. I'll submit a PR for this today.", This is reproducible as per tested yesterday.', Created ', ', Pull Request', This does not work for me, i see the same behaviour as in ', I also tried a few things and that reader mode button is very persistent! It looks like the button is already there when the tab switch animation happens.', When the tab switches, readerMode.state is set to .Available. I'm not sure where that comes from. I think we should probably set the state to Unavailable on tab switch and then let run the ReaderMode.js again to determine the actual state.", Yea you are right. This issue isn't related to the bug with the favicons. I'll close the PR and reevaluate", Created ', ', Link to Github pull-request: ', Silly error -- we\'re sending "StatusUnavailable" as the string, but the enum uses "Unavailable". Since it doesn\'t match, we fall back to "Invalid", which is a no-op. That causes the page to be stuck in "Available".', Comment on ', ', Link to Github pull-request: ', LGTM!', v3.x 95ce08a', I cannot reproduce this issue on build 3.0b8 using the steps from ', . Verifying as fixed on 3.0', Tested on build 4.0.0b1 The issue could not be reproduced using the steps form ', .' 
id=1259191	 'Please WONTFIX this if other work makes this go away!', Created ', ', Pull Request I'll upload some screenshots so you can see the difference on iphone6/iphone4s", Created ', iphone4s-fixed.png', Comment on ', ', Pull Request It's a little lopsided (with far more space on the right side than the left) which looks a tad jarring, but given we're dumping this particular panel soon then I'm OK with that for now.", master 8fba2838a1d08bf2d9bd76c5ac55f7978c24667a', v4.x 83fcd0a', Tested on build 4.0.0b5 The issue is no longer present.' 
id=1282061	 'Created ', ', Link to Github pull-request: ', Recently we've added 'privileged' localhost URL requests to help differentiate between our internal localhost requests and user initiated ones. Part of this work includes a check 1 to filter out unprivileged localhost requests. Toggling reader mode makes use of this and sends out a privileged request since reader mode is rendered using a localhost URL but this only works if the reader mode page is not cached. In all other cases where we are moving back/forth between the cached readerized version in the back forward list, the request fails because we don't make a privileged request. 1 ", 2 ', Not sure if this is a great fix for it but not sure how to filter out the unprivileged request we're making :(", Comment on ', ', Link to Github pull-request: ', Seems reasonable to me. Back/forward events are implicitly "internal", and pages will only be added to the back/forward stack if they were allowed in the first place.', master f1750617c823f381754c1d233141990ea675e03a Ya that was my thinking too.', v5.x be1b2ea', Verifying as fix on 5.0b14.' 
id=1226654	 'We want this before login management lands.', Created ', ', Pull request Deleting code.', Comment on ', ', Pull request LGTM', Merged', "Saved Logins" option is not displayed anymore in "Clear private data" on version 1.3 build 1308 (Iphone 6 (IOS 9.1) )' 
id=1267581	 'Created ', ', Pull request', Comment on ', ', Pull request oops, editing the wrong bug', Tested on build d3c9de01 The 3 menu items are displayed equally along the row.' 
id=1280455	 'Created ', IMG_0094.PNG', Tested on iPhone 6S iOS 10 on RC 5.0(2). Top sites are correctly displayed after changing device orientation.' 
id=1203557	 'Pre-landing strings here ', Not completely sure what the ask is here. Let's sync up tomorrow to hash this out.", ^ Although I did just go through the commit log and update the copy in my design (posted in ', before reading this bug).', Anthony - can you add the full flow maybe to this bug so we can see it holistically, based on the three dependent bugs? In the attachment in ', , it didn't include an update to the 'customize' and I want to ensure we get this included :). Maybe we can now use this bug for tweaking the final, end-to-end flow? It's looking really good, in my opinion! One tweak I would suggest (but not enforce) would be to also include the Firefox logo on all the screens on the 'sync' page. I'm just trying to make it super obvious what needs to be done here.", I landed a new string for the customize page "Personalize things like your default search engine in Settings."... maybe thats all that we needed for this bug?', Yep, I remembered you thinking along those lines but hadn't seen it show up yet in mocks. Yay!", Created ', Screen Shot 2015-09-17 at 9.23.02 AM.png done!', Created ', prev_FR_V2.zip Continuing the discussion from ', here. I've attached all 5 screens in this package. It should contain all the changes from feedback :) thoughts?", I like it. Ship it ;)', I'm liking this as well! My only 'nit' would be to say 'Personalize your experience like ...' instead of 'Personalize things like...' just to make it a bit more clear and less informal / colloquial.", (In reply to Karen Rudnitski :kar from ', ) ', I think if we want to add "experience" then we need to rework this a bit as "Personalize your experience like your default search engine in Settings" doesn\'t flow that well. It could simply be "Personalize your browsing experience in Settings." Or if we want to call out search, then I would suggest something like "Change your default search engine and other options in Settings."', calling our search is deffo our intention based on feedback from our user research. I'm not married to 'experience' but it just felt that 'things' was very informal. What about 'Make it yours like choosing your default search engine in Settings'? Or I stop wordsmithing and leave it up to your fine minds!", (In reply to Karen Rudnitski :kar from ', ) ', How about: Personalize your default search engine and more in Settings.', Going to make an executive decision based on string freeze being today and all the fine feedback we\'ve receieved, thanks all! Going to ship 1.1 with "Personalize your default search engine and more in Settings."', Landed: ', \\o/', "Sync Your Devices." string has inaccurate localization comment.', Follow-up or new bug is required', String landed.', The following text is displayed in the Customize panel "Personalize your default search engine and more in Settings." Verifying as fixed on Beta 1111' 
id=1251074	 'Created ', ', Pull request', Comment on ', ', Pull request Thanks for the patch! Looks good.', master e9f4d77c485748c1acaddb297c341c7bdef794c9', Verifying as fixed on build 3.0(3)' 
id=1270087	 'Screenshot?', Created ', Please see the attached screenshot for more information.', Any objections with locking this to portrait mode if I can? Don't see why we would need to support landscape for passcode input.", (In reply to Stephan Leroux :sleroux from ', ) ', IIRC, we had already decided to lock this in portrait.', That's what I thought. So probably a regression then. I'll fix it to stay portrait.", Created ', ', ', Comment on ', ', ', Almost there - just a couple nits and an issue with the animation.', Instead of locking to portrait, :tlacroix found a better way to move the elements into view and auto-center if the keyboard is up which solves the original problem of not seeing the dots. Would you prefer to lock it or go with this approach?', Comment on ', ', ', Revised changes look good!', (In reply to Stephan Leroux :sleroux from ', ) ', LGTM!', master 4735cbbc1abe32003f19ab4d22a0219438ac4611', Tested on master afdbc70 The password bullets are fully displayed.' 
id=1237539	 '(In reply to Bingqing Li from ', ) ', Those webpages can be opened successfully in Safari and Chrome.', *** ', has been marked as a duplicate of this bug. ***', From ', ', Created ', ', PR: ', The problem is that we should not show this error page if an app tries to probe if a native application is installed from JavaScript. The error page would overwrite the actual page. This patch fixes that. It will report errors for every navigation action except 'Other', which means JavaScript-initiated.", Merged.', v1.x 8aabc23', The links provided in ', are loading without any errors on build 1404 Verifying as fixed.' 
id=1216000	 "I think this should be lumped in with the top site changes I've been making. I bet this is being caused by our orientation-specific logic here: ", Quick fix for 1.2 would be preferred.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', ', Comment on ', ', ', Welp, this doesn't look so good; on a signed in Air 2 sim: ", and on a non signed in Air 2: ', (both on 9.1) Richard said he had an idea of what was happening, so I'll let him chime in.", Ah shoot - I know what's happening. Sorry I had this patch ready last week, might be something introduced since then.", *waves hands at Steph*', Comment on ', ', ', Removing r? for now since this needs to be tweaked.', Comment on ', ', ', I've resolved the layout issue with this commit: ", I've also went through and fixed the Bug # in the previous commits. Ready for review!", Comment on ', ', ', Some comments/questions in the PR about making our layout a bit more adaptable, but nothing major.', Comment on ', ', ', Thanks for the suggestions - the code is much more robust now that thumbnailCols is computed and uses the size/preferred thumbnail sizes for calculating the thumbnail width. Another benefit of this logic is that when doing the 50/50 split on the iPad Air 2, we no longer should 9 giant tiles but use the same smaller size which (IMO) looks much better. Wouldn't mind a pass on the fix commit: ", Also, the tile sizes have changed slightly so flagging Robin to make sure everything is kosher.', Stephan, by changing tile sizes did you mean for 4 columns to show on the 6 and larger? 24 top sites seems a bit excessive, 20 on iPad. ', ', Comment on ', ', ', Code looks good to me! Hopefully it's not too hard to fix the iPad count that Robin pointed out.", No I didn't - looks like I'll need to adjust the preferred sizes a bit.", Comment on ', ', ', Alright - one more time. I've had to remove the preferred thumbnail sizes in favor of the fixed columns counts because getting the math to work the way we want it to for each screen size doesn't work. This should have the expected number of cells for all devices including 4 column layout for half split screen iPad instead of 3.", Here's the commit if you want to take a gander :bnicholson ", Merged 27d666011953f1285804f4322d76efe73dd3c5fa', Verifying as fixed on Beta 1.2 (1201)' 
id=1283070	 'Created ', ', ', Comment on ', ', ', Just a nit comment about some potentially unneeded changes. Looks good otherwise!', master ef42c72f8de3dba4b3651283a31b5aaf0b2f1a43', Verifying as fix on master bd689d7e33. No delay was observed when opening a link via 'Open In New Tab'." 
id=1265669	 'Created ', ', Pull request', Merged and closed.', Tested on master 3be0655. The highlight occurs when tapping anywhere on the row.' 
id=1274521	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM!', Merged.', Tested on 3c8f33c5. The URL text can be selected / highlighted when manually setting a Homepage.' 
id=1272231	 "I couldn't reproduce it. For me when I unlock the phone I am not asked for the passcode by Firefox and all logins are selected as expected. Tested on Version 4.0 (11).", Hi, Can i take this up?', Sure! I'll assign it to you.", 've been able to reproduce this and can try taking it from here if no one else is working on it. It looks like it might be a couple things. At least in the simulator the steps caused a crash. I haven't looked yet, but I assume that you are doing state restoration. So it looks like this screen may not have been updated to properly work with it yet. So I think there are really 2 bugs here: 1. The crash 2. Ensuring state restoration works for this view controller It seems like this has been assigned, but I thought I'd share what I found anyway.", Hey Stephan, Below are steps to reproduce : 1. Keep compiler optimizations on 2. Make sure you are logged in to your firefox account 3. Goto Logins -> Edit -> Select All 4. Simply background and foreground the app 5. Wait for about 10 sec. Issue : NotificationDataRemoteLoginChangesWereApplied is received on app foreground, which causes tableView to reload data. Cell\'s "selected" state is not restored causing it to show unselected state image. I have a fix ready but i\'m not sure which branch should i push to.', 4.0 (11) looks to be tail end. which branch should i make pull request to ?', We use 'master' as our development branch so you can submit a PR to there. Thanks for looking into this!", Created ', ', Pull request I see that this was already assigned to someone else, but no PR was made. If this is duplicated please ignore my PR. Thanks :)', Comment on ', ', Pull request Nice catch - thanks for the patch!', master ', Tested on 0f93b9b14de02 on devices running iOS 9.x and iOS 10.0.2. The checkbox is displaying the logins current state after following the steps from the description.' 
id=1239796	 'Created ', ', Updated X asset on Find in Page bar', Verifying as fixed on build 2.0(3)' 
id=1227840	 'The sites are currently configured in ', I think we can do a simple start by turning the DefaultSuggestedSites.sites into a map that has a locale code as the key. Something like: public class DefaultSuggestedSites { public static let sites = "*": // Default sites , "zh-CN": // China specific sites } Then in ', we can pass in the locale and use the correct set.', This is unneccessarily delaying Firefox for users of the Chinese app store. Not everyone in China speaks/reads Chinese or wants/needs this set up as default. What about the users in China not using the zh-cn locale?', (In reply to Simon Blanchard from ', ) ', (In reply to Stefan Arentz :st3fan from ', ) ', Sure, in the first version, we just add some sites to DefaultSuggestedSites. Do you want the Chinese version to separate from the global version, or detect the different region or language in same version?', (In reply to Simon Blanchard from ', ) ', Hi Simon, Actually, you can only visit these sites in China because the great wall, and most users want to visit these sites every day. If users don't like these sites, they can remove them from the panel and add other sites they want.", Created ', ', Pull request Customize topsite panel in home screen for zh-cn locale', Two comments: 1) You cannot just replace the default list of sites in DefaultSuggestedSites. We need to have two sets of presets there and choose the right set based on the location of he user. The check will eventually be based on bug ', but for now you can just check NSLocale.currentLocale() - I think that is a good start. 2) I ran this code on a device and the images are very pixelated. I'm not sure why because I see you did include @2x and @3x images.", (In reply to Stefan Arentz :st3fan from ', ) ', I have updated the pull request. ', I have uploaded a screenshot as attachment, is it the same as yours? Because the images are not vectograms, there may be a bit of pixelated.', Created ', screen-shot.jpg', Master 2918fbaf821fce8362f2b1110c6bba70d8fc6041', Created ', ', pull request 2', Comment on ', ', pull request 2 Now included in separate bug: ', v1.x 2271b7f', iOS v8.4.1, v9.2 Firefox v1.4(1404). Verfied. It works fine on both iOS 8.4.1 and iOS 9.2.' 
id=1274245	 'Possible regression from commit 45d1395c6482136592f5bef9796f868da6c14901', Created ', Screen Shot 2016-05-20 at 12.57.31.png The bottom toolbar becomes barely visible in normal browsing also when: 1. In normal browsing long tap on a link. 2. Select 'Open In New Private Tab' from the context menu.", *** This bug has been marked as a duplicate of ', ***' 
id=1289096	 'Created ', ', Pull request', Comment on ', ', Pull request Works for me!', master be7049c072a5ecacbbfed8bd66e0b93e903d1705', Verifying as fixed on master 5e2ef3fb' 
id=1290462	 'Created ', ', Pull request', Comment on ', ', Pull request Works for me!', master 12970feabee34ed2ddd410a27792ada82f7031b7', Tested on master bd689d7e33 on devices running iOS 9.x and 10.0.3. No other action can be performed when rearranging the tabs (open/close tab, open menu, switch to private browsing).' 
id=1299834	 'Created ', ', Pull Request Good catch Aaron :D', Comment on ', ', Pull Request I have a small question but that's it!", master c371ac6565cf4bb9f50146846c54cdbdbde63088', Verifying as fixed on latest master (acc25e6d9)' 
id=1254708	 'Created ', ', PR', Comment on ', ', PR Seems sensible to me.', v3.x 6fefe31', *** ', has been marked as a duplicate of this bug. ***', Tested on master b222aa67. No tiles flicker was observed when opening Top Sites' 
id=1223386	 'Created ', Screen Shot 2015-11-10 at 16.38.09.png', Created ', ', Pull request', Comment on ', ', Pull request I think this looks good but I think it will be good if :sleroux can take a peek too.', Comment on ', ', Pull request Good approach - just left some comments about the deprecated API and some minor clean up we can do.', I updated my PR following your recommendations.', One last night and I think we're good to go :)", PR updated :)', Comment on ', ', Pull request Awesome! Thanks for fixing it up. I'll go ahead and land it.", Landed f09aa73786006634c7179ee5ef48331b37da87a1', Verifying as fixed on TF build 1303' 
id=1234322	 '*** ', has been marked as a duplicate of this bug. ***', New script now knows about files that need to be duplicated: Exporting firefox-ios-l10n/it/firefox-ios.xliff Writing Client/3DTouchActions.strings to Client/it.lproj/3DTouchActions.strings Writing Client/AuthenticationManager.strings to Client/it.lproj/AuthenticationManager.strings Writing Client/BookmarkPanel.strings to Client/it.lproj/BookmarkPanel.strings Writing Client/ClearHistoryConfirm.strings to Client/it.lproj/ClearHistoryConfirm.strings Writing Client/ClearPrivateData.strings to Client/it.lproj/ClearPrivateData.strings Writing Client/ErrorPages.strings to Client/it.lproj/ErrorPages.strings Writing Client/FindInPage.strings to Client/it.lproj/FindInPage.strings Writing Client/HistoryPanel.strings to Client/it.lproj/HistoryPanel.strings Writing Client/Info.plist to Client/it.lproj/InfoPlist.strings Writing Client/Intro.strings to Client/it.lproj/Intro.strings Writing Client/LightweightThemes.strings to Client/it.lproj/LightweightThemes.strings Writing Client/Localizable.strings to Client/it.lproj/Localizable.strings Writing Client/LoginManager.strings to Client/it.lproj/LoginManager.strings Writing Client/OnePasswordExtension.strings to Client/it.lproj/OnePasswordExtension.strings Writing Client/PrivateBrowsing.strings to Client/it.lproj/PrivateBrowsing.strings Writing Client/Search.strings to Client/it.lproj/Search.strings Writing Client/SendAnonymousUsageData.strings to Client/it.lproj/SendAnonymousUsageData.strings >>> Writing Client/SendTo.strings to Client/it.lproj/SendTo.strings >>> Writing Client/SendTo.strings to Extensions/SendTo/it.lproj/SendTo.strings Writing Extensions/SendTo/Info.plist to Extensions/SendTo/it.lproj/InfoPlist.strings Writing Extensions/ShareTo/ShareTo.strings to Extensions/ShareTo/it.lproj/ShareTo.strings Writing Extensions/ViewLater/Info.plist to Extensions/ViewLater/it.lproj/InfoPlist.strings Writing Client/Shared.strings to Client/it.lproj/Shared.strings Writing Client/Storage.strings to Client/it.lproj/Storage.strings', Created ', ', Link to Github pull-request: ', Confirming that the feature is now localized in build 2.0 201601181633' 
id=1270857	 'Fixed with 1270858', Tested on d3c9de01. The icon has been changed for 'Nightly' version." 
id=1266709	 'Created ', ', Pull request', Some comments in the bug.', Comment on ', ', Pull request r+ with nits.', #merged ', I'm running into some merge conflicts uplifting this commit onto v4.x. In particular, I'm not 100% sure that this is what we want: ", I know that Browser got renamed to Tab but what is the difference between passing it in as a param or not?', (In reply to Stephan Leroux :sleroux from ', ) ', The only difference is that before we were using the passed in tab for something, and after we're not so I removed the tab arg.", Tested on build 4.0.0b7. The issue no longer reproducible.' 
id=1282751	 "I noticed this bug appears anytime the private tab webview is loading. It is reproducible on both master and beta build. It looks like it's a regression caused by ", . Emily do you mind if I take this bug and submit a PR?', Hey. Yo re welcome to look at it. I was concerned about the effect of James patch as I mentioned in the comments, but it was decided that the need for the patch outweighed the effects of the removal of that line.", Created ', ', ', Comment on ', ', ', I think this is fine but I remember something being wonky with the UITests if we're not in a loading state. :fluffyemily, do you remember anything about this or have any thoughts on this patch?", Tyler is correct with his patch. We should be in a loading state only if there is no other state at all - i.e. the app is still loading. If we can check that the bug whose fix introduced this regression (', ) is still fixed, then this is all good.', Comment on ', ', ', LGTM, although there is a a followup bug to be filed. See PR for details.', master d910235cdca6ce8f58da9b871e5c29c2b182cf50', v5.x b4ad8c4', Verifying as fix on master 0e03028ac.' 
id=1264893	 'Can anyone help me with this? I reviewed the code and found out that some custom scripts are being executed after page load. When the tab is in the foreground, all these scripts are getting executed ok. But, when the tab is in the background, the Favicon script 1 is not sent to the HelperManager.userContentController() 2 . 1 ', 2 ', 10:02:09 AM <bnicholson> maurya: we don't actually use page events to send the favicons message back to swift -- swift asks for the favicons explicitly in KVOLoading 10:02:34 AM <bnicholson> ", 10:03:00 AM <bnicholson> note a few lines above that, where we back out of the KVO listener if the webview isn't the selected tab", Hey Maurya, any luck?', Hi Brian, I was out on vacation last week. I'll try it out this week and update you :)", Created ', ', Link to Github pull-request: ', Hi Brian, I was wondering if we should remove the "selected-tab?" check from KVOCanGoForward/Back also. What do you think? It might not hurt to have the estimated progress also be updated regardless of whether it is the selected tab. So, we might as well remove the "selected-tab" check all together.', Comment on ', ', Link to Github pull-request: ', Thanks for the PR; this is looking good! I left a few comments in GitHub. (In reply to Maurya Talisetti from ', ) ', I think we do want the check for back/forward, the progress bar, and also stop/reload (as mentioned in the PR comments). The reason is that these UI elements are reused among all tabs, and they act on the active tab. We wouldn't want a non-selected tab to change the UI since the UI doesn't reflect any tab other than the selected one.", Also, apologies for the slow response. I was on vacation myself this week!', We should land this in 5.0 since the bug also results in tab URLs not being updated in the background.', Hey Maurya, any progress with this one? It'd be great if we could get this fix in 5.0 if possible!", Hi Brian, yeah I have it ready. I had a problem with my github account and so was waiting to push it. I'll push it soon.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Awesome. Thanks!', master: ', v5.x: 7fde357', Verifying as fix on 5.0b14.' 
id=1283435	 'Created ', ', Pull request Although this seems to work for all the interactions I tried (using Today widget to open while on different screens, as well as 3D Touch actions), I wasn't quite sure of the view hierarchy, so this might not be the correct thing to do in some situations \u2014\xa0it would be good to clarify!", Comment on ', ', Pull request I've run through all the open scenarios I can think of: In tabs tray when new tab opened In Settings from BVC & TabsTray when new tab opened Showing alert from settings from BVC & Tabs Tray when new tab opened In Enter Touch ID when new tab opened Menu Open (BVC & Tabs Tray) when new tab opened In Share menu when new tab opened The only issue was when touch ID enter is open, this is not dismissed, but I think that is a separate issue not tied to this. Otherwise, all dismissed. Works well.", v5.x a78d5d1', Tested on devices running iOS 10.0.3 and 9.x Verifying as fix on Master 0e03028ac.' 
id=1278235	 'Verify if similar behavior happens for reading list items', Does the same thing happen when adding items to the reading list?', This issue does not occur when adding items to reading list. Please note that when adding bookmarks form the Share menu and checking the 3D Touch menu option, the option "Open last bookmark" should be presented. This does not happen when bookmarks are added from the Share menu.', Where can I find the build number of the firefox-ios? The value of CFBundleVersion is 1. Either way, I tried it on v5.0 (1) (commit: 4f41e10) installed on iPad Air 2 simulator with the following results: 1. The behavior described in the bug description can't be reproduced. 2. The behavior is still buggy though. Any bookmarks added via the share menu just don't appear on the bookmarks menu page! The same behavior when adding items to the reading list. They don't appear on the reading list menu page!", The build number is only incremented when we make releases. For development its always set to 1. ', Interesting. In either case it sounds like something fishy is going on when bookmarking from the share menu. It seems that we either add it twice or not at all. My gut says it might be some kind of async/race condition.', Hi Stephan, The code's quite challenging to understand :) I managed to find out one thing so far. While running it on the simulator, the database files accessed by the bookmarks panel (database 1) and the share menu (database 2) are different! No wonder, the bookmarks saved thru the Share Menu are not visible on the Bookmarks Panel. Also, I noticed that the database 2 contains multiple copies of each bookmark depending on the number of times we've attempted to bookmark it (as in the scenario explained in the Bug Description ). So, it appears that the databases are separate while running from the simulator. While running on a device, it appears that the same database is used. I'm trying to understand why this difference. Anyway, do you have any tips on what I could investigate?", One theory as to why you might be seeing 2 on the simulator is that when we instantiate the BrowserDB instance, if it fails, we move the old copy and open a new one for writing 1 . This shouldn't happen often and if we're seeing this duplicate issue frequently it might be a red herring but worth double checking. ", Are we seeing the duplicate issue with a single database on device? If so, the double DB on the simulator might not be attributing to the duplication. I'm not too familiar with this side of the bookmarks code but it looks like prior to adding new bookmarks to the database, we queue them up in memory first 2 & 3 . I'm also not sure how this memory queue interacts with the one that is being invoked by the ShareTo extension. Since the application and extension are separated in different processes, I don't see how the memory queue can be shared - hence resulting in two queues. I wonder if by queuing it up in the ShareTo extension, we're adding it there once, but the app also re-adds it when it becomes foregrounded since it was queued? Anyways just some thoughts I had when looking at the code. If you have any questions regarding the API or want to brainstorm on this I'm available on #mobile IRC during the day EST time. 1 ", 2 ', 3 ', (In reply to Stephan Leroux :sleroux from ', ) ', Yo re looking at code that's only used for tests; the memory bookmark sink is used instead of the SQLite version. This is the code that's called: ", and it's called from here: ", ', There's no memory queue, but this analysis is kinda correct: there are two processes, so absent other complications both processes end up opening the database. The STR in ", are unusual because they involve bookmarking from Firefox itself; I don't know if the extension mechanism does anything special when the parent app and container app are the same. Taking a step back, I think this bug is nothing to do with a bookmark being added twice with a single action -- ", is jumping straight to the scariest interpretation, which I also did! I think the report in ', is that we allow you to bookmark the same page multiple times through the share extension, and the report in ', is that addition via the share extensions don't trigger a redisplay of the UI. Both of those are entirely expected: we don't check for dupes before inserting, and we don't use notifications to detect changes.", Summary of discussion on chat: 1. Dupe check to be added. 2. 2 database files issue on the simulator is a non-issue. This happens because a separate container is being used for extensions when no team id is set.', Hi Stephan, I\'ve been stuck on this for some time! Need your thoughts :) 1. I\'m wondering if we could add a primary key as the url of a bookmark. That would prevent duplicate inserts without us having to add any other logic elsewhere in the code. 2. If that\'s not possible, we\'d have to add a dupe check, possibly a call to SQLiteBookmarksModelFactor.isBookmarked(_:), to SQLBookmarksSyncing.insertBookmark(_:title:favicon:intoFolder:withTitle:) But, this would mean that we are making this call twice, in the standard workflow. By standard workflow I mean, Go to url in a tab -> on load, check if bookmarked (happens here for the first time) -> if not bookmarked, "Add bookmark" (happens here for the 2nd time). In both cases, the above SQLiteBookmarksModelFactor.isBookmarked(_:) would have been invoked.', I'm a little hesitant on making this kind of change since I'm not sure if we want to unique-ify by URL. Richard probably knows more as to why though. ", ', As long as the cost of performing the dupe check it cheap, I'm fine with it being called twice. Better than it being called never :). I think it's crucial to have the check at least inside the insertBookmark to safeguard from duplicates at point of insertion.", Bookmarks aren't unique on URL; it would be convenient if it were so (and if we were to replace 'bookmarks' with 'starred pages' we'd make them unique), but alas. I think the check should be added to addMobileBookmarks, not insertBookmark: ", Notably yo ll need to lift the implementation of isBookmarked out of the model factory and into SQLiteBookmarks itself; there's no factory available at this point, and they should share an implementation.", Hi Richard, I'm unable to decipher the error I get when I try copying the isBookmarked implementation (see ", ) into SQLiteBookmarks: SQLiteBookmarksHelpers.swift:51:24: Cannot convert call result type 'Deferred<Maybe<Cursor<_>>>' to expected type 'Deferred<Maybe<_>>' The implementation is pretty much the same as the isBookmarked() method in SQLiteBookmarksModelFactory. Any suggestions?", Replacing the last few lines with: return self.db.queryReturnsResults(sql, args: args) neatly side-steps the problem. Don't forget to turn the implementation in SQLiteBookmarkModel into: public func isBookmarked(url: String) -> Deferred<Maybe<Bool>> { return self.bookmarks.isBookmarked(url) } Extra points for retrofitting the cursor success check into queryReturnsResults!", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Comments on the PR.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good with the additional changes to queryReturnsResult etc. removed. (Sorry for the churn!)', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM!', Hi Richard, If everything looks good, can you merge the PR? Thanks!', I asked one of the current iOSers to merge in line with their release process.', Waiting on the Swift 2.3 rebase as Steph mentioned in the PR. Feel free to ping/re-flag me or Steph when ready!', Created ', ', Link to Github pull-request: ', Stephan, I've handled the error that Swift 2.3 was complaining. PR has been updated.", Tested on master f43a1d35b3 and the bookmarks are no longer duplicated when added via Share menu. Verifying as fixed.' 
id=1282385	 'Created ', ', ', Comment on ', ', ', Just a couple of nits. Looks good!', master 4b1e44e0d82a4bc3b9f4dd35004ac3ce024133b9 Worth uplifting to v5.1 since it's a small, simple fix.", v5.x 52400e9', Already uplifted', Tested on 5.1b2 on iPad Air 2 (9.3.3). The menu rendering issue has been fixed. When stretched the menu is fully displayed.', Verifying as fix on master aae3fdc32.' 
id=1270765	 'Brian is this fixed with ', ? Did that make it to 4.0 (7)? What sort of tile invalidation do we do when the application is restored to the foreground here?', I think this should be fixed on master because we were updating the UI in two different places. Now I only update it when we get the data from the user's profile and, as far as I can tell, this doesn't get shown when I test it on the simulator. Would love it if we could have another pair of eyes to see if the patch fixes this!", does this still happen?', Tested on latest master 4593dfdc. The issue is still reproducible following the steps in the description.', Bryan, bouncing this back to you. Do you think this is something you can address for v5.0?', For record, during last triage Stefan mentioned that he saw the default tiles flickering behind his top-sites', The issue was reproduced on latest master 8bb33eb, IPhone SE (9.3.2) and IPhone 6 S (9.2.1) while signed in to FXA. Please see the attached URL for more information: ', .', Created ', Link to Github pull-request: ', Hey Bryan, I kept on seeing this and figured I would take a peek - I hope you don't mind! Turns out we were always invalidating when re-entering the app because the sync finish notification fires, needlessly invalidating top sites. I've added a method to check if the cache has actually changed from the result of a sync.", Comment on ', Link to Github pull-request: ', Deal with the NotificationDynamicFontChanged case and it looks good. Nice check.', Comment on ', Link to Github pull-request: ', lgtm (don't really know much about the SQL stuff tho; haven't done any of that kind of stuff really)", master 8268720d9bab2c72d0792b21c4d9c960d442bc6e', v5.x c23c68f', *** ', has been marked as a duplicate of this bug. ***', Verifying as fix on bd689d7e33.' 
id=1273155	 'Looks like something introduced by the notification status bar I added. I can take a look.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Annoying. Works for me!', master 57cc05c734293de516ab7996fa53cee1f6cb11b0', Tested on 3c8f33c5. The menu is displayed correct.' 
id=1271568	 "Looks like a bug with the new tab tray bar and the new status bar notification I did conflicting with each other. I'll take a look.", Created ', Link to Github pull-request: ', master b9c8b70af0381930115327682cc82084af8e1df0', Tested with master b222aa67. The issue is not reproducible following the above steps.' 
id=1243269	 "On the URL above, on tap of `Login` (in the upper right), I am directed to a login form. I don't see an auth dialog?", Created ', Screenshot from local network (In reply to Aaron Train :aaronmt from ', ) ', Ah. Apparently, it uses HTTP auth when you try to login while connected to the local network. It uses the form when logging in from somewhere else.', Created ', Android device', Created ', ', Show HTTP auth dialog for NSURLAuthenticationMethodNTLM', *** ', has been marked as a duplicate of this bug. ***', Chromium's patch: ", Test site URL attached', Comment on ', ', Show HTTP auth dialog for NSURLAuthenticationMethodNTLM Looks good - thanks for the patch Alex!', master 2ebf0a621626ad185e1208b9aa2e7e83337f726c', On build 2.0(4),the auth dialog is shown when visiting ' 
id=1201504	 'I remember seeing some UI for initial thoughts around what visual cues we want to do for private browsing. Do we have any designs for how we want to open a private tab?', Invision link: ', Do you have the asset for the goggles?', Got em', Created ', ', ', First pass at private browsing UI in the tab tray and managing private/normal tabs.', I'm currently working on some tests and ironing out a couple of things if you want to hold off on this but there's probably enough changes in here to start some discussion.", Comment on ', ', ', Looks good. Nice series of commits!', Created ', ', Fixed up the UI nits with new assets and implemented :dusek's accessibility feedback.", Comment on ', ', LGTM!', Created ', Commits Eventually this will land.. I swear.. Added two additional commits: ', ', The first resolves an issue :darrin found where the tab count was not updating correctly when opening a private tab. updateTabCount gets called twice and the previous animation doesn't get cancelled which causes the tab button to show the normal tab count in place of the private one. The second resolves broken tests from that change to the accessibility label for toggling private mode. Also makes sure that we only avoid setting the count if we cancel the animation for updateTabCount, not avoid attaching the accessibility label.", Merged!', Verifying as fixed on the current TestFlight build (1104)' 
id=1203563	 'Suggested copy: 3 Title: "Share to Firefox" 3 Body: "Send your favorite links to Firefox using the iOS share sheet" 4 Title: "Make it your browser" 4 Body: "Tap and hold the Firefox icon and move it into your dock for easy access"', (In reply to Darrin Henein :darrin from ', ) ', Is "share sheet" something that the average iOS user will understand? I think I know what it refers to, but I didn\'t know it was called that. I\'m also not sure about "Share to Firefox." Maybe it could be one of the following: 3 Title: "Send to Firefox" 3 Body: "Use the iOS share sheet to send links from other apps" 3 Title: "Send to Firefox" 3 Body: "Use the iOS share sheet to open links from other apps in Firefox" ', This one feels a bit long. Here are two other options: 4 Title: "Make it your browser" 4 Body: "Tap, hold and move the Firefox icon into your dock for easy access" 4 Title: "Quick, easy access" 4 Body: "Tap, hold and move the Firefox icon into your dock"', Thanks Matej! Lets go with: 3 Title: "Send to Firefox" 3 Body: "Use the share sheet to send links from other apps to Firefox" 4 Title: "Make it your browser" 4 Body: "Tap, hold and move the Firefox icon into your dock for easy access" I will pre-land these strings for localization.', Pre-landing here ', Based on the conversation in ', , we\'d like to update the titles here to be one word each. Here are some options for each: 3 Title: "Share" or "Send" or "Connect" 3 Body: "Use the share sheet to send links from other apps to Firefox" 4 Title: "Choose" or "Move" or "Simplify" 4 Body: "Tap, hold and move the Firefox icon into your dock for easy access"', Created ', Screen Shot 2015-09-16 at 3.52.13 PM.png Thanks Matej! See attachment for current mocks and how the copy is being displayed. Thoughts?', ^ note, i've updated the copy with what was in ", since posting that.', This looks great. Thanks.', Do we want some indication of the ^ share icon on the Share page (this is what most apps will use to show this sheet)...', Thanks guys! moving this discussion to ', "Easily switch between open pages with tabs." and "Personalize things like your default search engine in Settings." strings have inaccurate localization comments.', Strings landed.', Are the assets ready for this? If so, where they be?', Ready for merge: ', Note \u2013 the assets in the catalog are named in the order we created them, not the order they may appear in the tour. Please reference the mockup in this bug for the correct ordering of the slides.', Created ', ', Pull request Renamed the imagesets, and string identifiers. Added extra cards into slider.', Comment on ', ', Pull request Code looks good except the sign in button doesn't work. Probably because we need to update this page number to be 4 instead of 2: ", Amended PR to fix signin bug. Good spot :sleroux', Comment on ', ', Pull request Beautiful, looks awesome! Thanks James :)', Merged', Verifying as fixed on Beta 1111.' 
id=1252637	 'We follow this pattern for FxA credentials: ', Awesome thanks for the pointer!', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', If this works, LGTM!', master a515dbdd6fdc292c0e3b4c607f898c7e3ada55bd', v3.x 9471c8dde001d62fa74fcd7b292e3334a29eb905', Verifying as fixed on 3.0(6)' 
id=1274679	 'Created ', ', ', Comment on ', ', ', LGTM!', master eef89a0fea1052f405155b377a8c365fcc8028b4', *** ', has been marked as a duplicate of this bug. ***', Tested on 3c8f33c5. The toolbar color is correct.' 
id=1272261	 'This bug should be fixed in this change: ', Verifying as fix on master bd689d7e33.' 
id=1285491	 'This was introduced knowingly as a result of ', Just to make sure that anyone who tackles this bug does not accidentally cause another regression.', Created ', ', Pull request', Comment on ', ', Pull request LGTM!', Verifying as fixed on master fa14e51', v5.x 064a1f1' 
id=1283079	 'Created ', ', ', Comment on ', ', ', Works well on both device form factors. LGTM!', master 777cb9832abc461e0e3b07a077292221f945e811', Tested on iPad Air 2 (10.0.2). Verifying as fix on master 0e03028ac.' 
id=1229047	 '*** ', has been marked as a duplicate of this bug. ***', Which branch is affected here?', Created ', ', Link to Github pull-request: ', viewWillTransitionToSize was not being called in TopSitesPanel because further up the view controller hierarchy there was a missing call to super.viewWillTransitionToSize.', Landed Master a053bd8fa7f0cad8c3550dcb5e4e3465ac434105', Reproduced the issue on version 1.3 build 1303 using iPad Air 2 (IOS 9.1). Verified as fixed on version 1.3 build 1308.' 
id=1254267	 "Note: running from Xcode using the same code doesn't cause the crash or error to appear. Might be something related to code optimization (yay)", Yup - turning on fast -O/-Os optimization that we use for our release builds causes this issue.', Fun fact: No code changes since 2.0 in LoginListViewController/LoginTableViewCell and it works in the current production build which was built using Xcode 7.2.1 Checking out the same tag and building now causes the issue.', I'll try to find time to look at this.", Investigate bindings to data source for cell or delegates during dequeuing.', Commenting out ', until the end of that switch case closure works.', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Github PR', Comment on ', ', Github PR Wonder if this is related to our lazy block init pattern we're using? This bug is a bit concerning since there's no compiler error, and no crash log is sent to us, so I have no idea where else this might be happening...", Might be related to how the SnapKit closures capture their vars. Early in my testing if I commented out the constraint setup code for the highlight/description labels things seemed to work fine even if it was not public scoped. I also just found out about the @noescape keyword 1 with closures in Swift and it looks like SnapKit makes use of that when calling snp_makeConstraints. If I had to guess, the compiler is optimizing out the strong ref caused by the @noescape block for the lazy property. Its annoying that this works everywhere else but for some reason not here... I'm going to file a follow up bug to dig in a bit more. 1 ", master 057da44099858adeb677d91c1c4c8900d207b6f2', Pointer to follow up investigation bug: ', v3.x 1e43f69', Tested on build 4.0.0b1 and 3.0b11 The issue has been fixed and logins can be accessed.', *** ', has been marked as a duplicate of this bug. ***' 
id=1283035	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', master 87d0b2810ada7f98941d92da04e1e21f906dc926', Verifying as fix on master bd689d7e33.' 
id=1227845	 'I think this is something we can do right now in the search engine config files.', The templates for the search engines are here: ', Brian, am I right that the changes mentioned in ', can be done by simply modifying those files? Or do we need to do additional work?', Same comment as ', . It's fine for now, but we should really start considering a plan to make these changes more scalable. If we were to re-import search engines right now using our scripts, all of these custom changes would be overwritten. At some point (hopefully soon), we should do a diff of all the changes we've made and move those into the script. That way, they'll get dynamically reapplied every time we do an import.", I'm confused why the changes proposed here don't mirror the zh-CN search engines in Android: ", That list shows four engines: google, baidu, twitter, wikipedia-zh-CN. Currently, we have the same list for iOS. Is there an open Android bug for making the same changes?', This is unneccessarily delaying Firefox for users of the Chinese app store. Not everyone in China is using the zh-cn locale. Not everyone wants the Chinese search engines.', (In reply to Brian Nicholson (:bnicholson) from ', ) ', Hi Brian, Thank you for reminding, we should update the search plugins to android. Because we republish the firefox for android in China, we always change the search plugins when we rebuild the android version.', Created ', ', Pull request', Comment on ', ', Pull request Looks good to me.', Created ', Screen Shot 2015-12-14 at 12.27.34 PM.png', v1.x fb2061c', Verified on Firefox for iOS v1.4(1404). It works fine both on iOS 8.4.1 and iOS 9.2. As long as the region is set to China, the default search engine is Baidu as we expect.' 
id=1246921	 'Just to clarify, did you by chance enter a blank password?', No, I've just added a few characters to the saved one", Reproducible on master (2.0) as well with newly created logins.', Created ', ', Link to Github pull-request: ', Also adds some fixes to the tests to get them working again after some merges in master. Added both of you so whoever gets to it first :)', Comment on ', ', Link to Github pull-request: ', LGTM!', Comment on ', ', Link to Github pull-request: ', One comment on the diff.', master 3dad82a8d6ea2454d4cea01cf8752176d2bec4c7', Verified as fixed on build 2.0(2006)', Apparently I've rushed into 'Verifying' this bug because the edited passwords are still not saved. I've logged a new bug for this: " 
id=1244090	 'This page needs a nice empty state.', The fix from ', also fixes this issue.', Verifying as fixed on build 3.0(1)' 
id=1255025	 'Created ', panelTopSitesNull.png', Created ', topSitesEmptyPanel.zip', Created ', ', PR', Comment on ', ', PR I think the code looks mostly OK, but let's use NSLocalizedString with value here.", Comment on ', ', PR ', correct link', Verified as fixed on v4.0.0b5' 
id=1159754	 'This WFM -- any other details?', Confirm yo re testing on device? I open a tab, e.g, ", , double-tap home button, swipe the browser off, re-launch the browser, the only tab open is about:home', Yeah, device (and simulator) restore works fine for me.', Tried it on my iPad Air (8.3) which made no difference. My tabs are never restored on browser re-launch, just a single about:home tab. I'm using the Client scheme on latest code.", From TestFlight Firefox for iOS 1.0 (13) What to test: "The app now remembers the tabs you had open" - it doesn\'t (on IPhone 5S)', Tested on an iPhone 4s as well and non of my tabs are restored at all ever.', Can reliably reproduce this on the simulator.', Still doesn't work, latest code", Previous patch is responding to UIStateRestoring lifecycle events. However, UIStateRestoration (how this is implemented) doesn't support Force Quitting. Worse: when the app is Force Quit, the state restoration archive gets deleted.", I swear this was working for me at one point, even when force quitting. I wonder what changed?', Is there any update here?', I set a breakpoint on our tab preservation/restoration code and I can confirm that the state code is called when you double-tap the home button and then close the application. In other words: swiping the app away from that screen does not 'force kill' the app. It simply asks the app to stop and as part of that the state preservation handlers are invoked. (AFAIK there is no Force Kill on iOS) To me that means that this bug can be closed as WONTFIX. No code changed are required.", I do not agree at all as WONTFIX. Both Safari and Chrome restore tabs.', Maybe Stefan meant WORKSFORME? It's definitely a bug that needs to be addressed, but sounds like it might be working as expected now according to ", .', My findings are premature. I don\'t know why encodeRestorableStateWithCoder is being called when the app is killed manually. I don\'t think it should be because the UIKit Guide says this: "The system automatically DELETES AN APP\'S PRESERVED STATE when the user FORCE QUITS the app. Deleting the preserved state information when the app is killed is a safety precaution. (As a safety precaution, the system also deletes preserved state if the app crashes twice during launch.) If you want to test your app\u2019s ability to restore its state, you should not use the multitasking bar to kill the app during debugging. Instead, use Xcode to kill the app or kill the app programmatically by installing a temporary command or gesture to call exit on demand." So, we can either close this as \'works as intended\' or we can keep this open to do whatever Safari did to work around the system default. I like the system default btw. Because it is an escape hatch. And we don\'t have anything better at this point. So my suggestion is to leave this as it is now until we have implemented ', - We need to recognize when we crashed and then allow the user to not reopen tabs.', That's not what this bug is about. I don't think we can ship if my tabs are never restored. Bug ", is a meta bug that is tracking version 1.0', Created ', ', PR: ', This patch reverts the `UIStateRestoring` code. Instead we now do the same storing/restoring of tabs but on our own terms. This means that we are on parity with Chrome and Safari so that tabs are also restored when we crash or when the user kills the app from the app switcher. Special request for QA to test this carefully.', Comment on ', ', PR: ', Patch looks good! I wonder if we need to know when the application crashed previously if it would be worth the effort to add Breakpad/PLCrashReporter.framework so we get in-process crash reporting. This would also help with the issue we're seeing with test flight reports not coming in.", \\o/' 
id=1267167	 "This is more than likely WONTFIX, as firefox:// is the registered context for opening the application for both applications and we're not likely to change this. The order of precedence is probably the install order.", While this is possible, in a similar way to the way we provide build specific AdjustAppToken, this would break any apps that use the 'Open in Firefox' library when a release version of Firefox is not installed. It may be worth separating out internal and external users of the scheme, such that the external usage /always/ uses the firefox:// scheme (and thus the open in firefox apps won't break), but internal use routes to the correct version of the app. Renomming for target.next.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Just a small nit', Thanks, fluffyemily! Addressed nits, and merged.', Does this need uplift?', YES!', v5.x 7a215a2', Verifying as fixed on master 6ad4b686.' 
id=1221949	 'Silly. Reproducible.', Created ', ', PR: ', This patch transfers the `isLoading` state to the `BrowserToolbarHelper`, which is the component that deals with presses on the Stop/Reload button. Without the state transferred, it always thinks it needs to reload the page.', A good page to test this on is ', - it loads some images incrementally, delayed, so you have plenty of time to interrupt the page load.', Comment on ', ', PR: ', LGTM. (And by G I mean B.)', Verifying as fixed on Beta 1202' 
id=1258695	 "This involves modifying Client/Assets/FindInPage.js. Currently, we center the result in the viewport, but the keyboard takes up more than half of the screen on small devices, so the result gets covered up. We can modify the scrollTo offset to be a bit higher so it's no longer hidden.", Created ', ', Pull Request', Comment on ', ', Pull Request Looks good! Before merging, please add ', - to the beginning of the commit message/PR. This makes it easier to trace back to the bug in the future when using git log or git blame.', Sounds good. Thanks!', master 716d931b13f1a8a5bf331c45b1cf6b3c9fd29252', v4.x 1c96745', Verifying as fixed on 4.0.0b2 and master 14fcad7' 
id=1224538	 'Created ', ', Pull request', master 97899e5e08f6d02011f222b430919482424eda36', Nominating for needsuplift .', v5.x 55550f5', Tested on 5.1b2 on iPhone 6 Plus (9.3.3). The next scroll gesture after the toolbars are appearing is no longer discarded and has correct functionality.', Verifying as fix on master 0e03028ac.' 
id=1215698	 'Created ', IMG_4713.PNG', I am moving this to 2.0+ because it is an edge case. The text disappears when you go "Settings -> Accessibility -> Larger Text" and change the size. But if you switch back and forth between bookmarks and history, history will correctly reload. This is annoying and I would like to understand why this is happening and correctly deal with it, but I don\'t think we should block on it now. We would block on it if we would render that list badly with non-default text size settings. But that is not the case.', We have a 1.2 flag now, so let's put this there until we figure out scope.", Out of curiosity is iPad affected?', :AaronMT - Yup it happens on iPad as well.', Created ', ', ', Seems like modifying the UITableViewCell's default label fonts doesn't work well with dynamic type. UITableViewCell makes assumptions on how to handle it's labels and what font it should and by us change the font it breaks and causes the labels to disappear. I've replaced the default labels with custom ones but overrode the accessors to allow external consumers to remain unchanged. When we want to add support for dynamic type, we should refactor our cell code to use custom label types and listen for dynamic type size notifications to handle the text updates.", Comment on ', ', ', LGTM', Merged', Verifying as fixed on Beta 1.2 (1201)' 
id=1282961	 'Created ', ', ', This seems to fix the incorrect positioning. There is a brief but noticeable animation when switching between the two modes, despite animating with a duration of zero. Is this something that could be addressed too?', Comment on ', ', ', Comments/nits on the PR. Also found out why yo re seeing that delay when transitioning between modes.", I fixed the animation bug. Do you mind rechecking Nathanael?', Looks much better now \u2014 that seems to do the trick!', master 82e3e773ab5aa21ffa7ca2208a945d1c4db1e8bc', Tested on iPad Air 2(10.0.2). Verifying as fix on master 0e03028ac.' 
id=1258337	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Awesome!', master fb12031c48d0db37c6640421905d302b8cea8f6a', Tested on latest master The user is prompted to re-enter/verify the new passcode' 
id=1302636	 'Tested on iPad mini 4 - iOS 10.1 I can confirm that this issue occurs after changing the input method to Chinese(Traditional) - Canjie and navigating to ', . In the search field, after typing the characters "\u535c\u5eff" and tapping space it should compose the character "\u7acb".', How does this work in Safari?', We think this is resolved on master with the punycode work we've landed. Can you try this on master?", (In reply to Stefan Arentz :st3fan from ', ) ', Safari works.', I can't reproduce this issue on latest master(a8d043fc) running on iPad Air 2 (iOS 10.0.1)", Verifying as fixed.' 
id=1268932	 'Created ', ', ', master 7f00d3f5dad145db94e30d1661f5797f98a26da6', Tested on master afdbc70. The string was replaced with "This Connection is Untrusted".' 
id=1273864	 'This occurs now because the menu now has enough items in to paginate. STR: * go to any open tab * hit menu * observe > 6 items. * look at the pager dots.', Created ', ', Pull request', Comment on ', ', Pull request LGTM!', Comment on ', ', Pull request ', Tested on master 80a24431. The menu pagination dots have the correct color in Normal Browsing.' 
id=1210131	 'I should have first checked if this was assigned, My bad. But I spent some time looking into this and figured out what was going on. Hopefully it saves you some time. or if you have enough on your plate and have not started I can take this one over. The issue simply is that WKWebview doesn\'t always fire events when loading a page from its own internal cache. So when you call goBack quickly after going forward a page none of the events are triggered because the page is loaded from its internal cache. It doesn\'t try running any of the user scripts (favicon.js/reader.js/etc). Because of that none of the events are triggered. This isn\'t simply an issue of favicon.js not listening to the proper window events. For example (onLoad vs onPageShow). None of the scripts seem to fire. So this issue is not limited to just favicons but could have issues with other functionality that depends on the scripts being run every time. It seems like you have run into this issue in the past. And the solution was to evaluate javascript from BrowserViewController manually in the "didFinishNavigation" WKNavigationDelegate method. But this method too isn\'t called on quick goBack method calls. Here is an issue in chromium where they ran into the same issue ', . We can fix this by manually calling didFinishNavigation. And make sure any scripts that are required to be called are called manually just to be safe. So I'm not sure of most scripts but for this bug I would add the ability to call favicon.js from didFinishNavigation similar to how reader.js is called.", No problem -- I'm not actively working on this right now. Thanks for the investigation and comments! I'll go ahead and assign this to you since it sounds like yo re interested in fixing it :)", Re-evaluate based on other fallout e.g, ', Created ', ', Pull Request', (In reply to farhanpatel.17 from ', ) ', I was about to suggest pageshow as an alternative fix, then saw your comment. When you say none of the scripts seem to fire, are you using the same steps as ', ? Locally, if I simple replace "load" with "pageshow" in Favicons.js, it seems to fix this bug. Curious to hear which cases are still broken for you using pageshow.', I was still able to replicate it. The first thing I tried was to replace load with pageshow. I tested it by setting a breakpoint in ', making sure that favicons were fetched every time. You might have to try it a few times. pageshow does seem to work better but it doesn't work all the time. If you go to the tabmanager to check the favicon and then return to the tab. Going back right away will cause pageshow to fire. Try setting the breakpoint where I mentioned. That should show you that the script isn't running every time.", Are you using the simulator or a device? iOS 8 or 9? Which sites are you going to/from when testing this? It's frustrating -- no matter what I try, I can't get it to break using pageshow!", I'm using ios 9.2 and an iPhone 6 simulator. Here is a video. You might have to download it if dropbox doesnt let you view the full resolution version. ", Oddly enough I cant replicate this on my device only in simulator. If we can't get another person to replicate this I'm okay with just switching to pageshow.", Actually. My device is running 9.0.2 so my device might not be the perfect test. sidenote: Can I edit comments in bugzilla?', Thanks for sharing! I was finally able to reproduce when coming from gawker.com, like you did.', Comment on ', ', Pull Request This works great. Thanks for fixing this, and thanks for sharing your steps to reproduce! ', Unfortunately, no -- for consistency, everything is permanent once posted.', v3.x e10d8c9', Tested on 4.0.0b1 and 3.0(11) The issue could not be reproduce following the steps form description and ', .' 
id=1217209	 'Created ', ', Pull request UIReview just in case I missed an tab count animation scenario somewhere. My eyes are not as eagle as some.', Comment on ', ', Pull request Animation is fixed, but this crashes every time I open a new private tab :(', Comment on ', ', Pull request Nice, works well.', Verifying as fixed on Beta 1.2 (1201)' 
id=1304505	 'Created ', ', Link to Github pull-request: ', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', Link to Github pull-request: ', LGTM', *** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Verified as fixed on master f43a1d35b3' 
id=1252070	 "To clarify, the current behavior is that we have to enter the passcode *twice* when turning it off. That's not the behavior we want is it? It makes sense when setting a passcode to make sure they don't mistype, but requiring the user to enter it twice after it's already set just gets in the way.", As discussed in triage the pattern we want to do here is an enter/confirm flow to double check the user is entering the passcode before turning it off.', (In reply to Stephan Leroux :sleroux from ', ) ', Yeah, but I think there was some confusion about what this bug meant. If we read this as "require the passcode when turning it off", I think we all agree this is INVALID. But what it really means is "require entering the passcode *twice* when turning it off", and I\'d argue that we don\'t want to do that. It\'s a common UX pattern to require passcode reentry when setting the password. If I want to set the passcode to 1234, for example, and I accidentally type 1235, the confirm screen will catch the password mismatch and the passcode won\'t change (unless I mistype it the same way twice, which is rare). The system doesn\'t know what passcode I really want, so having the confirm screen is a standard way to account for human error. If the passcode is already set, though, the usage above doesn\'t apply. In this case, I have 1) already chosen to turn off the passcode, and 2) confirmed my choice by entering my existing passcode. There\'s no reason to retype it: the system already knows what the passcode is, and I\'ve confirmed my choice by entering it.', ', The above is correct, and as I understood this bug \u2014 we only want the user to enter their passcode to disable/reset it once.', Makes sense - moving this out of invalid then.', Added ', to another bug as part of the refactor work. ', master cb87a5e13cbc8741e0bf13c7f02f0fdd0575c0e2', Tested on build 4.0.0(1) When turning passcode off the user is not prompt to 'Re-enter passcode'." 
id=1122627	 ' *** This bug has been marked as a duplicate of ', ***', Alwin: please stop playing with bugzilla. Use ', instead. *** This bug has been marked as a duplicate of ', ***' 
id=1109675	 'Created ', User agents from Safari and Chrome on iOS It is possible. Placing the following code in AppDelegate will allow you to change the user agent. (I don\'t know if this is the best or only way) NSUserDefaults.standardUserDefaults().registerDefaults( "UserAgent" : "Custom Agent" ) for example I can load the Facebook desktop site like this: NSUserDefaults.standardUserDefaults().registerDefaults( "UserAgent" : "Macintosh; Max OS 10_10" )', Aaron this is a good method to globally change the user agent. I'm not sure if it is the best way to go for Request Desktop Site though since we cannot do this per tab. Would you mind doing an experiment to see if we can change this value for individual WKWebView instances? (In reply to Aaron Raimist :aaronraimist from ", ) ', Created ', ', desktop-only.diff Since this ticket is targeting iOS9, we could simply take advantage of WKWebView\'s customUserAgent property. The attached patch is meant as a prrof of concept and applies a custom user agent of "Macintosh; Max OS 10_10" to each newly created tab which forces all content to be loaded in the desktop representation.', Are there any UI mocks for how to opt in and out of desktop mode?', Comment on ', ', desktop-only.diff Just making sure some set of eyes sees this as I believe it's on a roadmap.", Thank you Hennes. Please ask :bnicholson for a review. He has this feature on his personal roadmap but I am sure he would happily work with you if you are interested in taking this on. Do know that we are still in the process of figuring out where the button should go. The UX team is experimenting with a place for 'tools' where things like Request Desktop Site and Find In Page can live. So this bug may be on hold for a little while until we figure that part out.", Comment on ', ', desktop-only.diff Hi Hennes, When we last talked about this feature, I think the UX was to long-press the reload button to reload the current page with a desktop UA (what Safari does). I think the only visible UI was simply a small bar that floats right above the bottom toolbar that says "Request Desktop Site", which appears after the long press, and disappears when the user lets go. I think Darrin had mockups for this. For now, a good start would be to simply implement this without any UI. That is, reload with the desktop UA after long-pressing the reload button, then reset the UA to mobile whenever the user navigates away from that page.', Created ', ', Pull request Hi Brian, Thanks a lot for the info. I got a basic version of what you described working in this pull request. I also have a few follow-up questions that I added in the comments of the pull request.', Comment on ', ', Pull request Looking good! Left a few comments in the PR.', I think for now we want to just use a system action sheet, with one primary action ("Request Desktop Site" or "Request Mobile Site") and a system Cancel item. We lose the one gesture (long-press and then release) for two taps (long-press then tap sheet item) but I think this is fine for now. Let me know if there are any questions.', I added the action sheet toggling to the PR.', See also ', , which is worth testing for our iOS implementation.', (In reply to Richard Newman :rnewman from ', ) ', I was actually already able to work this out with Brian's help. The web view gives us access to the initial unredirected URL of a page which we use for requesting the desktop (or mobile) presentation.", Comment on ', ', Pull request This looks great...thanks for all your work so far! Left a few suggested cleanup comments in the PR, but I think this is about ready to land.', Comment on ', ', Pull request Awesome, thanks a ton for the patch and all of the follow-up fixes! :)', Tested via ', on iPhone/iPad', v1.x: ', Backed out v1.x (7ed4b63) due to ', .', Re-uplifted to v1.x: b4f1ab1e' 
id=1205692	 'Created ', ', New private tab added, shown in both private and normal.', Created ', Screen shot of context menu in non-private browsing', Created ', Screen shot of context menu in private browsing', Comment on ', ', New private tab added, shown in both private and normal. Looks good! Just need to remove the temp string I added from UIConstants so we don't have it in two places.", Comment on ', Screen shot of context menu in non-private browsing LGTM! ++ for AT', Comment on ', Screen shot of context menu in private browsing OK, one nit: "Open in New Private Tab" instead of "Open In New Private Tab" (de-capitalize \'In\'). Same goes for "Open in New Tab".', Ok; trivial change to change the capitalization in code. However: NSLocalizedStrings are case sensitive, and string freeze. sleroux: This isn't something we want to give to the localizers to fix. Other than not landing this feature, are there any options?", I think it might be too late but you can double check with st3fan/flod about it.', File a follow-up to change the string capitalization, and land it.', Follow up bug ', to fix the capitalization.', Verifying as fixed on the current TestFlight build (1104)' 
id=1281403	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', During triage we decided that even though there is a risk of regression, this bug is worse than the regressed bug so let's go with it and fix the other if we rediscover it.", :etoop: I missed that yo d reviewed this.", v5.x f03c738', Verifying as fix on master 6ad4b686.' 
id=1282583	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!', Verifying as fix on master bd689d7e33.' 
id=1237694	 'Created ', ', Pull request', Comment on ', ', Pull request Code looks good and makes sense. Found a couple of bugs though related to scrolling so the logic might need to be addressed a bit.', Comment on ', ', Pull request Thanks for all of the revisions and work on this patch. I'm always wary of large changes to the scroll controller since its always a pain to get right and is at the forefront of the browser experience. I think this patch is in a good place - simple and addresses the main concern. For any other scrolling issues, feel free to file separate bugs for those issues.", master 4f04495360381f602bc66c755f3ed3a8865ec78c', Verifying as fixed on master 4f0449536. The toolbar is shown when scrolling to the end of the page.' 
id=1250512	 'Is there a list of interactions that are problematic? What are in our control that we can fix? Will those bugs be prioritized if we roll-back? How will we proceed with resulting IME feedback?', Aaron, all keyboard issues are grouped under ', The intent is to address them all.', Created ', ', PR: ', Comment on ', ', PR: ', Looks good/works for me using SwiftKey.', v2.x 44dc2f5c76a808924f12a30cc6e4baf2aad90af3 5a1aa0f09bd41826598763e8d882c6d278e3182b', On build 2.1(1) I can switch to a third-party keyboard. Tested using SwiftKey and Flesksy. Verifying as fixed' 
id=1262160	 'Created ', ', Pull request The problem was caused by a pointer to an expired version of self in applicationDidEnterBackground during the execution of background tasks. Added nowned self to ensure self hung around long enough to execute those tasks', Comment on ', ', Pull request Don't think the explanation or commit message here are accurate, so I'm not sure how this fix works. If you verified that this does fix the crash, though, (meaning the issue is somehow related to a retain cycle?) I'll happily r+ as-is with an updated message!", :bnicholson When I returned to this I got a far more useful crash location and feel that this is a better fix.', Comment on ', ', Pull request LGTM!', *** ', has been marked as a duplicate of this bug. ***', Tested on build 0977e5b5 The issue is not reproducible following the above steps to reproduce.' 
id=1228538	 "This works fine for me in 1.3 if I long-press. Presumably we didn't generalize that fix!", Created ', ', PR: ', This patch recognizes Reading View URLs and decodes them when shared via the Share Sheet.', Comment on ', ', PR: ', LGTM', v1.x 5cda081', Reproduced the issue on version 1.3 build 1303 using iPad Air 2 (IOS 9.1). Verified as fixed on version 1.3 build 1308.' 
id=1207517	 'Still reproducible after reverting ', , so Emily is off the hook there. Investigating.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Code looks good & it works - would like to see a test seeing as we have a demo HTML page.', Added a note in ', to follow-up on the test. ', Verifying as fixed on current TestFlight build (1110)' 
id=1289893	 'Created ', ', Pull request', Comment on ', ', Pull request Left some minor comments on the PR. Also cc'ed tecgirl re: popover.", LGTM, I prefer this view.', master 7ddee08bcbf9363c5b802ceba59fb20d2d2d16e3', Tested on latest master (acc25e6d9) and, on iPhone Plus (landscape) and iPads, history list opens from top Verifying as fixed' 
id=1270573	 'Created ', ', ', master 0866f7dee827a556afd3f9fe7578184fffdf0bda', Not able to reproduce on master e5b6720 using the STRs from description' 
id=1280488	 'Tested on iPhone 6 S iOS 10.0 on RC 5.0(2) The issue is no longer reproducible following the STR. Probably fixed in ', .' 
id=1259020	 "We have the string 'Set Passcode' already translated as part of a screen in the app. Would it make sense to replace the title of the setting to that when Touch ID is disabled/unavailable?", Created ', ', Github PR ', Comment on ', ', Github PR ', Changes look OK to me if we want them, but worth double-checking with the l10n team that do (if you haven\'t already). "Touch ID & Passcode" is a noun grouping the set of actions; "Set Passcode" is a specific action. It\'s a passable substitution English, but might not work as well in other languages.', Reusing a string in a completely different context is not a good idea. I would keep the current string in 3.0 and fix it properly (with a new string) in 4.0 (it's not clear to me which version this fix is targeting).", I\'ve updated the patch to use the "Passcode" string we use for the section title within the "Touch ID & Passcode" screen in place of "Touch ID & Passcode" when the device has no Touch ID support or if it\'s disabled. I believe the context should be fine since they are both used as titles. The only issue is that the localization comment won\'t make sense since it\'s now also used for the title of a screen and the button text. Ideally we would want this resolved for the upcoming 3.0 release instead of 4.0 since mentioning \'Touch ID\' within an app on a device which doesn\'t support it may cause Apple to reject the submission.', (In reply to Stephan Leroux :sleroux from ', ) ', Button text? As far as I can tell it\'s used as a section title above "Turn Passcode On", am I missing another usage? We can update the existing note: "Section title for passcode settings". Also, given the current choice of using English strings as IDs, I don\'t think that we have any alternatives (we can\'t have two "Passcode" strings).', The 'Touch ID & Passcode' string is also used on the main settings page as the list item title to navigate to that screen.", (In reply to Stephan Leroux :sleroux from ', ) ', Right, I was looking at "Passcode". The reality is that we\'re already reusing the string "Touch ID & Passcode" both as list item and title (ideally we shouldn\'t), aren\'t we? So I don\'t believe it\'s an issue if we do the same for Passcode.', Yup', master 840e195985f14bbc9d712776eb2a4d2ca902e061', v3.x 6fdb136', Verified the following on 3.0b8: - On iPod 6th gen and iPhone 4S (both with no Touch ID support) - the setting title and the section title is Passcode - On iPad Air 2 - with the passcode turned off in iOS settings, the setting title and the section title is 'Passcode' - with the passcode turned on in iOS settings but no fingerprint saved, the setting title and the section title is 'Passcode' - with the passcode turned on in iOS settings and a fingerprint saved, the setting title and the section title is 'Touch ID & Passcode' Based on the above, I'm marking the bug as verified on 3.0", Verified as fixed on 4.0.0b1.' 
id=1238188	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM', v1.x b51b1f5', Verified on v1.4(1404) with iOS 8.4.1&9.2. Once the option of switching sync server is disabled, it changes back to standard/global sync server. It will not using the China-hosted sync server until the option is enabled again.' 
id=1282016	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!', Verifying as fix on master 0e03028ac.' 
id=1242657	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', ok', Verifying as fixed on build 2.0(4) The page no longer scrolls from the bottom' 
id=1272299	 'This bug should also be fixed in this change: ', With ', fixed, is this still reproducible?', Tested on master afdbc70. The issue is still reproducible following the steps from the description.', After a clean install of master afdbc70, the issue is no longer reproducible. Please disregard the previous comment.' 
id=1198407	 'Created ', ', ', Looks like the ignoreSnapshotOnNextLaunch method isn't for the app switcher but is for not showing a snapshot on the next app launch. Instead, I listen for app lifecycle notifications to determine if we should hide/show the url/web content depending on if we're in a private tab. Also, anyone have any ideas on how we can write an automated test for this? Darrin: Since we're just hiding the content and url, the backgrounded view of the app with a private tab open replaces the content with a large gray box. Any ideas on what we want to display instead?", Comment on ', ', ', I think we could avoid subtle bugs if we hide the container instead of individual web views. LGTM otherwise. (In reply to Stephan Leroux :sleroux from ', ) ', Let me know if you find a good answer. I haven't really found any good way to test anything outside of the app sandbox (like pressing the home button).", Merged', Going to the app switcher while in pbmode shows: - the content of the page replaced by a grey box - no url in the url bar Verifying as fixed on Beta 1.1 (1103).' 
id=1283118	 'Created ', ', ', Comment on ', ', ', Patch looks good I think but I'm not sure if it fixes the crash issue.", master 940628cd0036dcd3895ee87dec836ba335a14c38', Verifying as fix on bd689d7e33. After exiting split screen, Firefox will display the correct browsing session. Also the crash is no longer reproducible.' 
id=1285029	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!', Verifying as fix on master 6ad4b686.' 
id=1279901	 'Created ', Gmail login.PNG', Should this feature be available in a private browsing session if these history items are not written?', I'm seeing this in normal browsing, too, for any page that doesn't have a title. For example, ", .', (In reply to Aaron Train :aaronmt from ', ) ', Yes, the list should still work even if the history items are not saved to History. If the title and/or favicon is unavailable, use first letter of domain (not globe) and URL', Created ', ', ', master 4b59d873c33bf06ac46c6604dc4cc06d98a01166', v5.x bbbb4b5', Verifying as fix on master 6ad4b686.' 
id=1274508	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', Merged.', Tested on 3c8f33c5. The Homepage icon is displayed correctly.' 
id=1266350	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!', #merged ', Tested on master 3be0655. When selecting home panel from Menu, panel are opened in current privacy mode.' 
id=1231515	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Not quite right yet\u2026 see note in PR.', Updated with a check to only open full url for suggested sites.', Comment on ', ', Link to Github pull-request: ', I left a note in the PR about an alternative way to organize this that I think makes more sense.', Master 6c6bc946c2b569f5263c9033c3317ec2c1120307', Tracking for 1.4 since it blocks china requirements', v1.x 9de95c3', Verifying as fixed on build 1404' 
id=1237499	 'Created ', ', Pull request', Comment on ', ', Pull request Lets do this.', Merged', v1.x 14c7d3b', Verifying as fixed on build 1405' 
id=1266136	 'Created ', ', Pull request', Comment on ', ', Pull request +++ Nice work, James! Thirds works in all devices/orientations! The bottom padding is good, too.', Comment on ', ', Pull request Looks good. I'm just afraid that we delay adding the copied link UI too much because there is a lot of flashing and animation going on when that part gets added. Specially on iPad landscape it looks really odd where the buttons seem to slide in from the right side and then after a short delay the copied link UI moves in over that. Followup bug if other people also see this?", Followup filed. Squashed and merged.', *** ', has been marked as a duplicate of this bug. ***', Verifying this as fixed on build 4.0.0b5' 
id=1258727	 "I tried to use a blank reason to circumvent strings for 3.0 but the API requires a non-empty reason. Looks like this is something that we'll need to do for 4.0 :(", Created ', ', Github PR ', Strings I added: "Use your fingerprint to access configuring your required passcode interval." "Use your fingerprint to disable Touch ID." Let me know if we want to revise the copy.', Comment on ', ', Github PR ', LGTM. Would it be easier if we had a string like "Use your fingerprint to continue", or something generic like that, so we don\'t need to make a new string for each specific Touch ID action?', Created ', Commit ', Does this make sense for the value parameter? Do we want to keep it all lowercase or go camel?', Note that "value" is the actual string; the first parameter should be the key, so you\'ll want to reverse the first two args in each of these. I\'ve been using all lowercase (which we also do on Android), so the format you\'re using WFM. Only thing I\'d maybe change is using a dot between each word rather than collapsingthemalltogether.', I've updated the patch to flip the value/param and added dots.between.the.words. thanks.for.the.feedback!", master 6507dd98c6ab097a4e856a116ce7fae537aeefee', Verifying this as fixed on build 4.0.0b5' 
id=1270047	 'What happens when you tap the button?', Maybe the widget should only be available on iOS 9.0+', When tapping on the button a new tab opens(In reply to Aaron Train :aaronmt from ', ) ', When tapping on the button a new tab opens for both buttons. (New Tab / New Private Tab)', Without that button, the designs are going to look pretty sparse. What should should we show if New Private Tab button is not available? How long do we need to support iOS9?', (In reply to James Hugman :jhugman @jhugman from ', ) ', Let's just center the New Tab button. It will be sparse, but it's something.", In the context of v4.0 imminentness, I don't feel comfortable with any further layout changes (pending any risk). What about disabling it on iOS 8 and we'll fix it for v5.0?", Just a quick note that :sleroux is making a new build with the deployment target for the Today Widget set to 9.0. If that works and if that is accepted by the app store, it means that the today widget will only be available to people using iOS 9 and up.', Using my iPhone 4 (iOS 8) => Can confirm am not seeing the widget offered after installing build 4.0 (11) Using my iPhone 6 (iOS 9) => Can confirm I am seeing seeing the widget offered after installing build 4.0 (11)', This fix should be applied in master 5.0.', The issue is still reproducible on v5.0b9. :sleroux can you please make sure that the next beta build will have the deployment target for the Today Widget set to 9.0', Created ', ', Github PR ', Looks like the patch to make it 9.0 only was only applied to v4.x and not master/v5.x. I'll merge this into master and uplift today for the next 5.0 build.", master 63481e0ad1f25de7dee538a917bc5d6eeb5035eb', v5.x 29fb658f1deb53bb05c1415d0773f448902b4999', Tested on build 5.0b10. The today widget is no longer offerd on IOS 8.x after instalation, only on IOS 9.x' 
id=1291017	 'Created ', ', Pull request', Comment on ', ', Pull request Nice catch! I guess that\'s why the "finished" hack was there before, but it\'s definitely better to explicitly control the animation completion handler rather than guessing whether we want to call it based on the finished state.', I believe this is actually also fixed by ', , which has just been landed, so perhaps this patch isn't necessary after all?", Resolved with linked bug in ', .', I'm unable to reproduce this issue on master 3f103883" 
id=1238075	 "joni let's come up with a plan for zhCN and document it here stefan: can you CC: the beijing folks", Looks like this is done.', the 3 changes 1 were done by the Mozilla China folks! thanks all 1 for the record they were: The changes in English that have to be added translated to chinese in the the traditional chinese versions are : 1. ', " {note}Custom servers are available for Sync accounts in China.{/note}" 2. ', " {note}Firefox for iOS comes with customized search engines especially for China.{/note}" 3. ', delete existing chinese notes' 
id=1276639	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', Merged.', v5.x bb963eb5aa64095953b8cb5cb47282f78f88ee29', Tested on 5.0b10 The home button icons is correctly displayed.' 
id=1274243	 'Created ', ', Pull request', Comment on ', ', Pull request LGTM!', Tested on da286949 The menu is displayed correct when loading a web page' 
id=1270865	 'Created ', Screenshot of the issue in landscape', Can this be reproduced in fewer steps (i.e. can this be repod more easily)', Created ', Screen Shot 2016-05-10 at 18.49.16.png On latest master running on iPhone 6 Plus (9.3.1) the issue is reproducible when: 1. Open 3 tabs in portrait 2. Swipe off two of them with a single gesture 3. Rotate to landscape 4. Open a new tab', That latest screenshot is awful. We should fix this.', Created ', ', PR', Did you check that this doesn't cause the top sites panel to flicker when switching panels? That issue seems to appear every time the refresh logic is changed.", I did check and as far as I can tell, it didn't show the flicker of the empty state in all the cases I tried to execute. Also, that empty state code has to do with querying the dataSource.count(), and collection.reloadData() doesn't affect whether or not the empty state will appear or not.", Comment on ', ', PR Alternate STR: 1) Open the home panel in portrait. 2) Tap the tabs button. 3) Rotate the phone to landscape. 4) Tap the new tab button at the bottom. I don't think the fix for this should be to throw another reloadData() call into TopSitesPanel since we already do this in viewWillTransitionToSize. This bug happens only on new tabs, but not when returning to an existing home panel tab, so I think the bug should address what's going wrong in that particular situation instead. Digging into this, I found that this is a regression from ", . didCommitNavigation is fired for the new tab, which calls updateUIForReaderHomeStateForTab, which calls scrollController.showToolbars, which updates the home panel layout as a side effect. A better fix, I think, would be to change showToolbars() to not trigger an animation in the first place if the UI is already in the state being animated to. That is, do nothing in showToolbars if toolbarState == .Visible already (and similar idea for hideToolbars).', The top sites are correctly displayed after changing device orientation on build 3c8f33c5.' 
id=1273927	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Does the menu bar push the layout up from the bottom, or does it overlap it? If the former, I think a better fix for this would be to pin the Learn More link bottom to be >= the bottom of the view so it gets shifted up with the menu. If the latter, I wonder if it'd be worth changing. WFM as a band-aid for now.", The empty view was being added on top of the collection view with it's constraints setup to match the root view's top/left/right/bottom with an offset to factor in the toolbar. Ideally the bottom constraint should be pinned to the top of the toolbar instead of a constant value offset so I've updated that. ", I've updated the constraints of the 'Learn More' button to be more adaptive. While in portrait, visually there is no difference to what it was before. In landscape, the learn more button will move up with the menu bar while maintaining a padding of 10px at the bottom.", master 260cadc1e2b87a281831172ed9e908df1d694754', The 'Learn more' button is displayed correct on master 5979d61c." 
id=1272008	 'This bug should be fixed in this change: ', Tested on master fa14e51. The logins menu is not dismissed when opening a new tab from Today Widget.', Disregard ', . Tested on master fa14e51. The logins menu is dismissed when opening a new tab from Today Widget and the new tab is opened.' 
id=1283767	 'Potentially a regression from this patch that was recently landed: ', Created ', Link to Github pull-request: ', Found a quick solution for this issue. Sorry :bkmunar - Aaron mentioned this might be a 5.0 blocker and we wanted to push out an RC build for today so I hope you don't mind I grabbed this bug.", :sleroux nope! totes fine, I think I had a similar solution to what you had too! hehe', master c828a2215e87fbeca89601f1e1bc56bf19a51956 v5.x 1dd4243', Verifying as fix on master 6ad4b686.' 
id=1290147	 'Created ', ', Pull request', This issue is not reproducible on latest master (acc25e6d9)' 
id=1249741	 '(Is this needed for 3.0?)', Works for me. This field would remain un-editable.', Created ', ', Pull request', Comment on ', ', Pull request LGTM', master 5e2ef3fb8d658720a8393a3ea7d605e63473d8d8', Verifying as fixed on master 5e2ef3fb' 
id=1266700	 '*** ', has been marked as a duplicate of this bug. ***', ', ', ', (In reply to Emily Toop (:fluffyemily) from ', ) ', This was an oversight on our part. Yes, the labels should say "Request Desktop Site" "Request Mobile Site".', Created ', ', Pull request', Comment on ', ', Pull request LGTM!', Verifying as fixed on master 2b87f6a The new menu items are called "Request Desktop Site" and "Request Mobile site"' 
id=1276212	 'I cannot seem to reproduce this bug on master following the given steps.', Tested on build 5.0b12 on IPhone 6 Plus and IPhone SE. The issue is no longer reproducible following the above steps.' 
id=1184678	 'Maybe fixed via ', ?', Newly added tabs don't display on about:home either, a full close/re-open of the browser is required to fix this.", Steph thinks this is a dupe.', *** This bug has been marked as a duplicate of ', ***', (In reply to Stephan Leroux :sleroux from ', ) ', I think this is not a duplicate of ', . Let me dive into it.', Let's re-open for now", Created ', ', Pull request', Comment on ', ', Pull request (Copied from Github) I feel like if the browser.db hasn't been created yet, we should get at least get notified of when it does so we can update what we're seeing in top sites. I don't know if displaying the suggested sites is a complete solution since it seems that the root of the bug is a race condition between the UI for top sites and database creation. @rnewman thoughts?", This kind of thing is usually solved by always chaining off an initialization promise. That is: nothing that accesses the DB completes (or even begins) until init is done. This shouldn't be happening to us, though: BrowserDB initializes synchronously, and we rely on the lazy var in BrowserProfile to delay init. That implies that there's one of three bugs here: 1. We have an implicit table dependency that's not reflected in the code. E.g., favicons depends on bookmarks, we're hitting favicons, and we're getting an error that makes everything break. 2. We have a table init race; just as the above, but we have table dependencies that aren't serialized. 3. Part of BrowserDB.createOrUpdate (or one of its friends) has an async component on which we're not blocking. The fix is to find it and add '.value' to the end of the line if it's a Deferred, or manually block otherwise. I don't think we should allow a query to run against BrowserDB before BrowserDB is inited. As such, it's not necessary to have delayed init. We simply can't do anything useful until it's up and running, so we should wait.", This\'ll do it. func getFaviconsForBookmarkedURL(url: String) -> Deferred<Result<Cursor<Favicon?>>> { let sql = "SELECT \\(TableFavicons).id AS id, \\(TableFavicons).url AS url, \\(TableFavicons).date AS date, \\(TableFavicons).type AS type, \\(TableFavicons).width AS width FROM \\(TableFavicons), \\(TableBookmarks) WHERE \\(TableBookmarks).faviconID = \\(TableFavicons).id AND \\(TableBookmarks).url IS ?" let args: Args = rl return db.runQuery(sql, args: args, factory: SQLiteHistory.iconColumnFactory) } SQLiteHistory has an implicit dependency on the bookmarks table. So does Favicons.', Sorry, I mis-analyzed. SQLiteHistory is responsible for initing FaviconsTable and BrowserTable. But if you hit SQLiteBookmarks (profile.bookmarks) first\u2026\xa0you get a BrowserDB that has a SchemaTable, which SQLiteBookmarks populates with FaviconsTable, but is never populated by BrowserTable.', Created ', ', Initialize BrowserTable before handing over profile.bookmarks; make wipe DB writes sequential. v1', Not a complete fix. I managed to repro: ', I believe the problem is either: * that Swift lazy vars aren't thread safe, and we're getting a partially initialized object in Profile.onRemovedAccount. * that we're ending up with two database connections due to the same thing, and they're both trying to write. The easy fix is to \u2026 well \u2026 not do the account data cleanup on first run. The (presumably) harder fix is to make this safe.", Comment on ', ', Pull request This fix will show SuggestedSites if we have no DB contents. That's a band-aid, but not a fix, so I don't think we should take this right now.", (In reply to Richard Newman :rnewman from ', ) ', Okay, as you wish. But, IMHO: 1. The lazy initialize for db maybe used for performance consideration. The PR I submitted is necessary to help when user first launch the app. 2. For safety consideration, what if the disk space of iPhone is full so that the db file is too large to create successfully? There will be nothing (instead of the suggested ones) to show at app start.', I can no longer repro with the fix in the last commit. Our cleanup process involved marking history items and also removing remote clients and tabs. These are in the same DB, and we ran those tasks in parallel. I think that's why we got contention. My fix is to run them sequentially. Take a look, Steph? Extra points if you can test out that PR, Aaron.", (In reply to zhaocong89 from ', ) ', We still lazily init the DB. But we need the DB to show the main screen, so it's not that lazy. ", That's a case we need to fix more generally. I don't think it'll delight the user to show suggested sites but then be unable to (a) load web content (no cache), (b) fail to write logs, (c) be unable to write history, etc. etc. If we're unable to create the DB we should tell the user that their phone is full, rather than ending up in a really degraded, untested, broken state.", Comment on ', ', Initialize BrowserTable before handing over profile.bookmarks; make wipe DB writes sequential. v1 So logically this all makes sense and the patch looks good/works but it also works fine on master now. Might be just a race condition thing in some instances so that why I'm not seeing it but I'm good to merge this in if this resolves any issues with timing like that.", 33248b8' 
id=1273143	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', master bbe039f8153e8c6aa32296f946334501e3f8bb45', Tested on master afdbc70. The status bar is displayed correctly when the sync process actually occurs.' 
id=1287800	 "Alternative steps to reproduce: 1. Open 3 tabs in a normal browsing session 2. Open tabs tray 3. Close the second tab (the one in the middle) 4. Open menu and tap 'Close tabs' Actual results: The 'close tabs' option will not be functional after the tabs are rearranged.", v5.x 3156cb6e049f2b4f9c340deb15e1e4dcaa26944b', Tested on 5.1b2 on iPad Air 2(9.3.3). The issue is no longer reproducible following the STR' 
id=1252087	 "* Add passcode/touch id verification to 'Require Passcode' interval screen * Add verification for turning off 'Touch ID'", Created ', Link to Github pull-request: ', Comment on ', Link to Github pull-request: ', Looks good...just some minor nits.', master 8fb01cc2da764d9236baea481600c0098b060b73', v3.x aaea3cbcfd1b9ac9d711940341844eb196865b77', Verifying as fixed on build 3.0(6)' 
id=1259201	 'Created ', ', Pull req. Whoever gets to it first. I tested this with Teo's data. The malformed record is seriously malformed, so there's not much we can do -- we can't sync until that record is corrected, at which point we'll redownload it and life will be great. In the mean time, we do enter the fallback read-only state and send telemetry!", Comment on ', ', Pull req. Tested in the Simulator. Code looks good. Tests all green. I was able to sync my bookmarks.', Comment on ', ', Pull req. Code LGTM. Ran sync on simulator from new login and worked. Subsequent sync actions worked as well.', Comment on ', ', Pull req. A couple of very small nits', I was able to perform sync, so: Verifying as fixed on v 3.0 (9) using iPod touch (9.1), iPhone 6 Plus (9.1, iPad Air 2', master (4.0): ', 3.x: ' 
id=1280490	 'Tested on iPhone 6S iOS 10.0 on RC 5.0(2). The issue is no longer reproducible following the above STR. Probability fixed by ' 
id=1216801	 'Created ', ', Link to Github pull-request: ', Is that what we do on Android?', Yep.', Comment on ', ', Link to Github pull-request: ', Looks good - nice catch!', Verified on Beta 1113 that the search suggestion are disabled in private browsing' 
id=1264225	 'Should/can we disable Sync and the manual functionality until the account is verified? If so, let\'s \u2014 and print \'Sync disabled\' in grey until the account is verified. If the user goes to a panel that would normally ping Sync, we can enable statusbar messaging: "Verify your email address to enable sync".', Syncing should not be green lit unless the account is verified. i.e. it'll be started, but quickly finished abnormally (same as if the device is offline).", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Just one comment, otherwise LGTM', master 85c582ef41a376b6c3a18ae4e58e79da1d3ac6e7', Tested on build afdbc70. The unverified accounts are no longer syncing on exit.' 
id=1205307	 "I think to describe this as part a setting we might need two lines instead of the single line we currently use for most settings. 'Close Private Tabs' doesn't seem meaningful enough and 'Close Private Tabs When Leaving Private Mode' is too long (especially in some locales potentially) and still doesn't really make sense. Could we do something like, Close Private Tabs Enable if you would like your private tabs to be closed when switching back to normal mode from private mode.", See ', here ', Created ', Screen Shot 2015-09-17 at 3.43.35 PM.png', Created ', ', ', Comment on ', ', ', Looks (and works) great! Minor nit: can this setting be #2 in the Privacy section? So: Clear Private Data Close Private Tabs Send Crash Reports Privacy Policy ui-r+ with that change!', Fixed the accessibility assignment bug and merged.', Verifying as fixed on latest TestFlight build (1104)' 
id=1286304	 'Nathanael, is this the same bug as ', ?', This is actually a separate issue with loading the wrong favicon, and then not supporting SVG favicons (which is probably another bug in itself). I'm going to work on a fix.", Created ', ', Pull request', Looks good. Just some nits. How does this make sure that a SVG favicon isn't requested? By using the existing favicon logic in the browser is it just selecting a different favicon compared to before which this time happens to not be SVG?", I've just updated it to prioritise picking smaller favicons \u2014 do you think this is a better approach, or unnecessary? Regarding SVG favicons \u2014\xa0no, this doesn't address that issue. I've created another bug for that here: ", I think really that's a separate issue. However, this approach does mean we won't be given an SVG URL to fetch (because SDWebImageManager would have already failed, and thus not set it as the tab's favicon), so it indirectly at least mitigates that case.", I think its unnecessary. On retina devices the icon is actually 60x60. And on a 3x device it would be 90x90. If we end up choosing a 16x16 icon because it is the smallest it'll be blurry. Best to get whichever one the tab is already using and just use that. It'll get resized and look good on retina. Also with the added benefit that the tab favicon is already cached so reusing it is quicker.", v5.x b136a03', Tested on 5.1b2 on iPhone 6 Plus (9.3.3) and iPad Air 2 (9.3.3). IMDB desktop search box can be added / removed as a search engine.' 
id=1184344	 "On Google Chrome's iOS app, I noticed that when they open a background tab, Chrome is loading up the URL for the background tab even as you stay on the original tab. That way, when you switch tabs, the newly opened tab has a thumbnail so you can see what's on the tab before you click it. It also has the other effect of making your new tab preloaded so you don't have to wait for it. Is that something we would consider doing too or should we hold off on that? That would fix this bug. However, on Safari's iOS app, it doesn't do that and just forces a newly opened tab to come to the foreground so that the problem of background tabs not having a thumbnail is non applicable.", Well now they should get a favicon in their tile, I assume that works now, Brian?', Yeah, we already load the page immediately (you don't have to switch to it to load it). The title and favicon work already; we just need to throw in logic to take a screenshot somewhere.", Created ', ', Pull request', Comment on ', ', Pull request Thanks for the pull request! For performance reasons, I don't think we want to take a full screenshot of every tab for every single page load, so we should figure out a way to narrow the scope of this fix. Right now, we take a screenshot of the active tab every time we switch to the tab tray. What if iterate through all of the tabs and take screenshots of those that have a nil thumbnail?", It's not a performance hit. The webView.didFinishNavigation() method gets called by delegation and only that specific webView it's being called for takes a screenshot. The code I put in doesn't iterate over the tabManager to take a screenshot of each tab. It only takes a screenshot once it gets the go ahead from whatever tab says it is done loading. Iterating through all of the tabs every time the user switches to the tab tray and taking a screenshot of all tabs that have a nil thumbnail runs into the problem of prematurely screenshotting. Say a user opens a link in a background tab, then switches to the tab tray immediately before the new URL can be loaded. The webView may not have finished loading its web content, but then we will still take a screenshot anyway, resulting in a blank white screenshot for the tab. That would complicate it even more. At least with a nil thumbnail, we know that the tab doesn't have a valid thumbnail. But if the blank white screenshot takes the place, we then can't test for nil since it will have a valid memory address (which holds a screenshot of a UIView that hasn't loaded anything).", Going to throw this into the nom queue for discussion', Sorry to take so long for these responses -- I must have missed the bugmail! (In reply to allenngn from ', ) ', Well, that's the performance hit I'm talking about :) Taking a screenshot for every page load is not free; doing some brief testing, I see that one screenshot takes 100+ ms on my iPod touch. It happens on the UI thread, so this can cause a hiccup when scrolling or interacting with the browser. ", Right -- when I said "every tab for every single page load", I just meant that all tabs are hooked into this delegate, and that every navigation change triggers a screenshot (as opposed to iterating through every tab for every navigation change). Sorry, poorly worded comment. ', Agreed, and I have seen blank thumbnails more than once, so let\'s roll with your change here. I think empty thumbnails are probably more user-visible than the delay mentioned above, and this is the only reliable way to fix it. Worth keeping an eye on perf regressions, though. So, just to summarize, we now take screenshots in two different places: 1) After every page load (this bug), which should give a good base screenshot for every tab. 2) When going to the tabs tray, we take a screenshot of the active tab, plus any other tabs that don\'t have screenshots. Given #1, the "other tabs" part of this shouldn\'t be very common (and should be limited to newly created tabs that haven\'t fully loaded yet).', Allen, I rebased your changes and created a branch here: ', Unfortunately, your fix doesn't seem to work with the steps I'm using: 1) Long press a link to add a tab in the background. 2) Open the tab tray before that page loads. Yo ll see a gray thumbnail. 3) Wait a few seconds (or set a breakpoint) until the background page is finished loading. 4) Tap the thumbnail of the tab you came from, then open the tab tray again. The other thumbnail is still gray. Do you have a chance to look at this again?", Sorry, it's been awhile since I worked on this. The code base has changed a lot, and my life has gotten a lot busier. I don't think I'll be able to fix this bug. That was the one scenario that I couldn't get to work. Opening the tab tray immediately or at least before the newly opened tab was able to load always seemed to mess up the snapshot.", Created ', ', Pull request I went with best-worst case: delay during potential scrolling, rather than delay on press for tab tray.', Comment on ', ', Pull request Hm, this looks pretty much the same as the branch linked to in ', (rebased commit at ', ). We didn't land that because of the issues mentioned in that comment, and I imagine this PR has the same issues. Can you try those STR and see if you can figure out what's going on?", Comment on ', ', Pull request This is still an improvement over what we have now since it still captures background screenshots for other cases. Filed ', to look into the issue from ', .', (In reply to Brian Nicholson (:bnicholson) from ', ) ', ', , rather. ', Verifying as fixed on build on current TestFlight build (1111) Tested the following: - Open link in background in normal browsing > wait for the page to load > open tabs tray - the newly opened link has screenshot. - Open link in background in private browsing > wait for the page to load > open tabs tray - the newly opened link has screenshot - Open link in background in private browsing from normal browsing > wait for the page to load > open tabs tray - the newly opened link has screenshot.' 
id=1271303	 ' *** This bug has been marked as a duplicate of ', ***' 
id=1267589	 'Created ', ', ', Comment on ', ', ', Yup figured there was something missing!', master c3273d6eda1bb59d895a68ca275bf7288f880728', Verifying as fixed on master 0977e5b5' 
id=1266362	 "Sometimes, in order to see this issue yo ll need to switch orientation, from portrait to landscape and back to portrait. Tested on iPhone 6 Plus running iOS 9.3.1", I only see this after an initial rotation of my phone.', Created ', ', Pull request', Tested on master d3c9de01. The menu button is displayed correct.', *** ', has been marked as a duplicate of this bug. ***' 
id=1265863	 ' *** This bug has been marked as a duplicate of ', ***', Tested on master b222aa67. The "Welcome to Top Sites" will not appear when Switching between any panel and the Top Sites panel.' 
id=1251222	 'Created ', Screen Shot 2016-02-25 at 11.21.46 AM.png Potential URL leak', Created ', ', ', Comment on ', ', ', Looks good! I like that this also applies to the various popovers like share menu as well.', master 1649ceb86c5f54deb82a74bb46950bafd35ff2c0', Verifying as fixed on master 1649ceb86' 
id=1237560	 'Pretty sure I noticed this too yesterday, I had one tab open (nytimes). Can we capture any logging during upgrade and launch from 1401 (is 1401 archived?)', Might be a regression related to the tabArchive logging code I uplifted. Will investigate.', Created ', ', Link to Github pull-request: ', Looks like this bug was caused by moving the SavedTab definition out of TabManager and into the file namespace. What was happening was that the saved tabs are defined as TabManager.SavedTab but on update the class changes to just SavedTab which results in no tabs found to be restored. This patch moves the SavedTab definition back into TabManager. I did a quick test on this branch by doing the following: 1. Checked out master which contains the SavedTab definition at the root 2. Ran the app and generated a few tabs. 3. Moved SavedTab into TabManager so the class is defined as TabManager.SavedTab 4. Ran the app again At this point, none of the previous tabs were restored which confirms my theory that moving the class out of TabManager caused the tabs to not be restored. For 1.4, since SavedTab is defined as TabManager.SavedTab in 1.3, users should not experience tab loss since they are defined the same.', Comment on ', ', Link to Github pull-request: ', LGTM', master eacc9630650afc0f324e9e40685af5d771b76a5e', v1.x db4390c', *** ', has been marked as a duplicate of this bug. ***', Previous session is restored after updating to 1404.' 
id=1147658	 "There's a parallel discussion (sort of) happening in Servo-land that may be useful to consider here: ", . But an iOS browser will have different compat constraints than a new browser. Chrome on iOS jams in a `CriOS/19.0.1084.60` token in the Safari UA string: ', If we assume Google did the compat research here we could do something similar with `FirefoxiOS/1.0`: ', It may be useful to run that kind of UA string through some device detection libs (cf. ', ) to see if the "Firefox" string is picked up as Gecko. If that\'s the case, maybe using "FxiOS/1.0" would be better.', Let me know if it would be useful to replicate some of the work that was done for other UA decisions in the past, eg here ', The choice of UA depends on how different our browser is going to be from Safari. Given that we are using their rendering engine, I suspect it will behave pretty similarly - is that fair to say? In which case, I suspect that Chrome\'s approach is the right one, which is to use the Safari UA string almost as-is but add Yet Another Token which notes that it\'s Chrome, but without using the word "Chrome" to avoid confusion with actual real Chrome. If we add "Firefox" to the string, we\'ll probably get some bad detections because people will think we are real Gecko. Can we determine the UA string Safari is using programmatically, so we can always match it (with our addition)? Or would we need to hard-code something and update it regularly? NI lmandel for his thoughts. Gerv', (In reply to Gervase Markham :gerv from ', ) ', Correct ', Brian can test to see if we can "get" the current UA before attempting to "set" a modified version. I agree with your line of thought: 1. Base it on Safari\'s UA 2. Add a unique token 3. Make sure the new token does not trigger "this is firefox" and suddenly break pages NI Brian for the test', There are a couple of use cases that I think we want to satisfy with the UA: 1. Get the right Web content 2. Ensure Firefox on iOS can be differentiated for usage stats I think the Safari plus a unique token should satisfy these requests. I expect that the "firefox" token will result in Gecko/Moz specific content as "firefox" + "mobile" is used to differentiate content for Fennec.', This: WKWebView *webView = WKWebView new ; self.view addSubview: webView ; webView evaluateJavaScript: @"navigator.userAgent" completionHandler:^(id obj, NSError *error) { NSLog(@"%@", obj); } ; webView removeFromSuperview ; Gives me: Mozilla/5.0 (iPad; CPU OS 8_1_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12B466 We can do this at app startup and see if it has changed because of iOS updates. And then configure a custom UA with whatever extra token we want in there.', Based on the webview UA from ', , we\'d need to add both our own unique token, in addition to Safari at the end. I\'ll do some manual testing right now with "Mozilla/5.0 (iPad; CPU OS 8_1_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) FxiOS/1.0 dMobile/12B466 Safari/7534.48.3" with the device detection libs I have on hand and report back.', (without the obvious "dMobile" typo)', "Mobile" is not supposed to be a token unique to us. I think that most detection libs would detect the Safari UA as mobile without us needing to say "Mobile". And where did "12B466" come from? :-) Gerv', It's not. It's in the Safari UA string. It would be silly to remove it, IMO. ", Dunno, ask Apple. :) I'm assuming it's a hex that represents... something. \xaf\\_(\u30c4)_/\xaf", Oh, sorry - I misread ', as "both our own unique token_s_", assumed this Mobile thing was the other one, and got very confused! Gerv', Here\'s my quick (manual) results: I grabbed 6 existing JS device detection frameworks and 5 popular server modules/service, using "Mozilla/5.0 (iPhone; CPU OS 8_1_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) FxiOS/1.0 Mobile/10A5355d Safari/8536.25" detect.js -> mobile safari detectizr -> mobile safari device.js -> mobile iOS iphone isMobile -> mobile apple phone platform.js -> mobile safari ua-parser -> mobile safari ', -> mobile Apache Mobile Filter -> is_mobile true, device_is_touch true 51Degrees -> Apple iPhone Device Atlas -> Apple iPhone, mobile safari WURFL -> Apple iPhone Every single one classified it as mobile Safari, which is what we want. And then we have "FxiOS/$Version" for stat counters.', Looks like my NI request was answered by ', and ', .', Lets move with this!', Created ', ', Pull request Testing Safari on the phone and on my Mac, I found that the Safari version is always the same as the WebKit version. Here's the UA from desktop Safari: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/600.4.10 (KHTML, like Gecko) Version/8.0.4 Safari/600.4.10 Since that's what Safari does, it seems reasonable for us to do the same -- especially since there's no way that I know of to query for the Safari app version. Here's the UA with this commit applied: Mozilla/5.0 (iPhone; CPU iPhone OS 10_10_2 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) FxiOS/1.0 Mobile/12D508 Safari/600.1.4", One nit: would it be wise for it currently to say FxiOS/0.1 or similar, and switch to 1.0 when we actually ship? Gerv', This looks good, I am just worried about taking the UA value from UIWebView instead of WKWebView. Specially since UIWebView uses WebKit1 while WKWebView uses WebKit2.', (In reply to Gervase Markham :gerv from ', ) ', This commit just pulls the appVersion, which is set to 1.0. Stefan, would it make sense to change this to something else while we're still in pre-release stages? It might be too late since we're already making builds.", I don't think it really matters much what version number we have in there now. You could add the build number, also in the info.plist, there. Like 1.0b6 .. would that help? Not sure what problem we are trying to solve :-)", Merely not announcing something as a 1.0 before it's a 1.0. Don't go adding b6 and all that stuff; there's no need to increase the fingerprintability above what's needed. Gerv", Merged.', Mozilla/5.0 (iPhone; CPU iPhone OS 8_2 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) FxiOS/1.0 Mobile/12D508 Safari/600.1.4', It is also possible to set the user agent per webView instead of globally. webView.setValue("MyFancyUserAgent" forKeyPath: "customUserAgent") This can also be called multiple times, so this could be used for Desktop Mode for example. This is not entirely private, since it is well documented in WebKit, and it has landed months ago. But, we may want to be cautious and not try to use this for our first release. See ', I updated our MDN docs to include FxiOS: ' 
id=1283073	 'Created ', ', ', Comment on ', ', ', Works well. Annoying that this seemingly random boolean effects the loading bar.', master 0de93bd9d05c9b47c6bd2530eeef9038d5526d29', *** ', has been marked as a duplicate of this bug. ***', Tested on iPad Air 2 (10.0.2). Verifying as fix on master 0e03028ac. The loading bar is displayed and dismissed correctly after the page has been loaded.' 
id=1265688	 'Created ', ', Pull request', Comment on ', ', Pull request Apart from the fact that I hate methods that are prefixed with SEL, which is hardly in the remit of this bug, :+1: from me.', Merged and closed.', Tested on master 3be0655. The tab counter no longer animates over the Cancel button when "Go to copied link" while Firefox is in edit mode.' 
id=1255098	 'Thanks for the report. Trying this out in a simulator now and was able to reproduce. I opened two blanks and quickly closed the first having clicked (using a mouse) multiple times and immediately hit a hang as confirmed by trying to access any UI.', Created ', Pull Request This fixes the issue. By moving the deletion of the tab before the animation it removes the ability to tap a tab before the deletion animation completes.', Comment on ', Pull Request ', Comment on ', Pull Request ', Comment on ', Pull Request Looks good just a nit.', master 8ea8d9b169be62395f6a71a7102c5c2d3900b03d', v3.x 63ffb96', Tested on 3.0(9) and 4.0.0(1) The application runs correctly when pressing the close button on a tab quickly.' 
id=1274542	 'I can reproduce right off the bat off of master today (5918595) => Visit ', => Long tap on the first link article at the top => Open in New Tab / Private Tab Nothing happens.', Comment on ', ', Link to Github pull-request: ', Nice catch!', Merged.', Regression caused by ', .', Created ', ', Link to Github pull-request: ', Tested on build Open new tab via context menu is working as expected on build 5979d61c.' 
id=1167010	 'Is this a must have for 1.1 and is it related to signup?', I wrote some words that outline what needs to happen here. Reproduced for posterity. ', The token server is responsible for taking an assertion and a client state \u2014 `X-Client-State`, derived from `kB` \u2014 and returning an `api_endpoint` and a token to use with it. The API endpoint (Sync server) might be new or it might be a previous one. It might be the same physical server but with a different UID. The client doesn\'t care. X-C-S is there to make sure that a client with a new sync key (e.g., after a password change) never ends up at the same server+uid combination; this avoids some classes of data integrity bugs. Populating a blank server is an involved and slightly risky business. There are a few definitions of \'blank\': * Missing everything. * Missing data, but has `m/g` and `c/k`. * Missing `c/k`, but has `m/g`. * Potentially: missing `m/g` but has other stuff. There are two ways of detecting \'blank\': * Not present in `info/collections`. * 404 on fetch. * Record fetches, but is malformed or encrypted with the wrong key. A client needs to get the server into a consistent state, which might involve wiping `/storage/` in order to e.g., delete data that might be encrypted with a lost key. The client needs to make sure that the server ends up with four things: * A meta/global with the right engine selections and declined list. * A `crypto/keys` object, encrypted with the correct `kB`, containing a (new, I think) bulk key bundle. * Our encrypted client record. * Collection data encrypted with the right keys from the bulk key bundle. This might take some time to upload. The reason this is tricky: doing this involves 4+ HTTP requests, including potentially very slow bulk deletions, and clients need to be careful to avoid races. For example, two clients might race with meta/global, leading to a collection being written without having an engine entry, and two clients might race with key upload, leading to collection data being encrypted with the wrong bulk keys (eek!). `X-If-Unmodified-Since` and careful re-fetches is the right approach. It\'s not as simple as "oh, it\'s an empty server, I\'ll run four `PUT`s". The above is a fairly complete picture of what\'s supposed to happen, but I recommend you read the Android Sync source, and maybe the desktop `service.js` code to get more angles.', (In reply to Stephan Leroux :sleroux from ', ) ', When we say "support sign up for a Firefox Account" (', ), what we really mean is: We removed the sign up links from FxA and empty panels because the Sync state machine doesn't support populating a blank server, and certain other edge cases. Those omissions lead to a bad user experience after creating an account: a user with two iOS devices won't see them syncing until they connect a desktop or Android device. We need to finish the state machine so we can deal with a blank server correctly; then we can restore those links. Given that we want to support account creation for 1.1, this bug is the real meat. The blocked bugs are mopping up when we're done.", Nick wanted to get to this towards the end of September.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', r+ with comments addressed. Excellent work as always; very intrinsically complicated stuff reduced to clarity.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', Link to Github pull-request: ', Back to you. I haven't done any in-App testing; figure you can look at the changes, especially around `LocalCommand`, and then I can do some final testing before landing tomorrow AM.", Comment on ', ', Link to Github pull-request: ', Nits on the PR. Next up: responding to the changes!', AaronMT: this could use some focus testing. You should be able to create a Firefox Account on iOS, and start syncing correctly. The Choose What to Sync button is not yet functional, and there is no UI showing you what is currently syncing. (That's 1.2 territory). If you sync against Desktop, you should see everything syncing initially. If you turn things off and on in Desktop, you should see your iOS device responding (although not reflecting the changes anywhere in the UI; and remote tabs, bookmarks, etc are not yet purged when an engine is disabled: see ", ).' 
id=1204635	 'Created ', ', PR: ', Comment on ', ', PR: ', Post f+. Also verified that the diff looks good after this merged.' 
id=1283030	 'Created ', ', ', *** ', has been marked as a duplicate of this bug. ***', Comment on ', ', ', Left some questions and nit comments.', Comment on ', ', ', Thanks for the fixes. Works well!', master 329861bf39a32f68f2fcd3e3efd2a6c785509dd5', Tested on iPad Air 2 (10.0.3). Verifying as fix on master 0e03028ac. The tab selection previously made is preserved when switching browsing modes.' 
id=1274278	 "Note: - Please note that the 'Show homepage icon in men option is checked off. When the option is checked on the Share button will be displayed in the top left corner instead of the Homepage icon.", *** This bug has been marked as a duplicate of ', ***' 
id=1227843	 '(In reply to DongShengXue from ', ) ', It's not clear to me exactly what this means _once a user has created an account_. Presumably before then it's just like switching between stage and prod. After we could get partitioning, unrecognized accounts, unreachable servers, or other baffling behavior. Answers to some or all of these would be great. * Can Chinese users access China-hosted Firefox Accounts / Sync servers from outside China? (I.e., is the restriction one-way?) * Are Firefox Accounts global with only Sync servers being scoped to China? * Are Chinese-created Firefox Accounts scoped to China? * To what extent do we need to explain to users what's going on, when they might switch, and what the results are? * What does the Android repack do? * What does desktop do?", (In reply to Richard Newman :rnewman from ', ) ', Sure, Chinese users can access China-hosted Firefox Accounts / Sync servers from outside China. ', Unfortunately\uff0c all the services hosted on AWS being scoped to China. ', Whether the accounts are scoped to China depending on the location of the server. ', I add an attachment to explain it, please see the screenshot. ', We have customized the sync service in the same way for desktop and android in China', Created ', sync-preference-for-China.jpg', I actually have a suggestion for a different approach. I think the checkbox is confusing and I would rather not include it at all and see this flow: 1) User goes to Settings and selects Sign In 2) We detect if the app was downloaded from the Chinese App Store 3) If it was then we show an intermediate screen or a dialog where the user can select the server location. We can present this as Mozilla China Server / Mozilla Global Server / Cancel or something similar. 4) After the selection we continue with the normal sign-in flow. This removes uncertainty and 'state' about things like 'what happens if you change it while you are logged in'.", Another option is that we grey-out the switch as soon as you are logged in. So that you can only change it when you are not currently logged in. Looping in Darrin and Robin to ask about UX perspective.', This is delaying the introduction of Firefox for iOS in the Chinese App Store. Why is this specific to Firefox for iOS? Surely this is the same for all versions of Firefox - which work just fine with out sync servers inside the GFW.', (In reply to Stefan Arentz :st3fan from ', ) ', This is a great idea. Actually, at the beginning I wanted to do this. But there is a issue for me, one is how to detect the region, another is too many entry point to login web page, for example the remote tab, welcome page, settings page. I think if the Chinese version is a separate version, we don't need to detect region in code. If not we must detect region to hide or show the preference. Finally, the prefernece is a withoutAccountSetting, if user connected with him accout, the setting should be hidden.", (In reply to Simon Blanchard from ', ) ', The code bases for Desktop, Android, and iOS are disjoint. There's work to be done to allow customization for iOS. ", My guess is there's no technical limitation for Firefox for iOS to work, in China, to external Sync servers -- other than the Great Firewall potentially blocking traffic to said servers.", (In reply to DongShengXue from ', ) ', There are only two places that construct the FxAContentViewController to start the sign-in/sign-up process; you could do things in these two places. However, I'd suggest making the profile's accountConfiguration configurable *when no Account exists*. (After that, it's locked down!) That would let us expose a way to make stage accounts (rather than prod accounts), and we could use the same logic and a China-specific test to expose the setting for China. Finally, I would change BrowserViewController.presentSignInViewController to be less sophisticated in China, and always take the user to the Settings page (so they can see the toggle). This seems better than routing the view controller through a layer of checks and configuration, although that probably can be made to work.", Created ', ', Pull request', Another thought would be to let the user decide which server they'd like to use when signing in/up (through an interstitial or actionsheet)... this way we avoid the complexity of managing server preferences (and changes!) once the user is signed in. To switch servers, you could log out and when signing back in, see the choice again.", Comment on ', ', Pull request Merged', Created ', flow.png zh_CN settings', v1.x 8c9df6c', Verified on v1.4(1404). It works fine on both iOS 8.4.1 and iOS 9.2', Changing the status to Verified based on the previous comment' 
id=1255018	 'View Later also does not work. Possibly a shared container or bundle id issue after the build/project changes? Cc :sleroux', Here is a good hint. I'll take this bug. dyld: Library not loaded: @rpath/Alamofire.framework/Alamofire Referenced from: /Users/sarentz/Library/Developer/CoreSimulator/Devices/0E9D6016-EE86-4F06-88B8-1CED39A20500/data/Containers/Bundle/Application/79FAFF87-8BA2-412A-9710-14F13739C154/Client.app/PlugIns/ShareTo.appex/ShareTo Reason: image not found", There also is an issue with the ShareTo extension where it is not set to Universal. So it only works on iPhone.', Created ', ', PR: ', This patch does two things: * It fixes `TARGETED_DEVICE_FAMILY` for *ShareTo* so that it is enabled for both *iPhone* and *iPad* * It fixes `LD_RUNPATH_SEARCH_PATHS ` to prevent link failure', 17bd0aeacd172f23773a625c0753035f55e4e7bb', Tested on build 4.0.0b1 The SendTo/ViewLater/ShareTo extensions have proper functionality.' 
id=1258643	 'Created ', ', Link to Github pull-request: ', Created ', Simulator Screen Shot Mar 22, 2016, 12.40.46 PM.png Here is a side effect of the changes by removing the the constraint that was causing problems. In cases where the text fits on a line without word break, it will push up right next to the switch which isn't the greatest thing in the world. I've tried today to get a fix going but coming up short. It's been brought up before but I wonder if we should look into replacing the use of the default UITableViewCells with customizations with cell subclasses that allow us to have more control over the layout of things like labels/switch/etc. I know there were issues before with readableMargins and other finicky Autolayout stuff but might be worth investigating.", *** ', has been marked as a duplicate of this bug. ***', Created ', Simulator Screen Shot Mar 22, 2016, 3.10.12 PM.png Thanks for the padding fix Brian! Looks much better now.', master a7c2a0643289c013431878156899079a64cad9d5', All subtitles are looking good on master a6c672f Tested on 3.5" and 4" devices.', v3.x 2e8e939', Verifying as fixed on 3.0b8' 
id=1241908	 'Do you think that is the same as this one? ', *** ', has been marked as a duplicate of this bug. ***', STRs to reproduce this issue using 3D Touch: 1. Launch an app 2. Go to a page 3. Go to settings 4. Press home 5. Open a new tab via 3D Touch 6. Go to a page in the new tab Result: Toolbar is not visible in the new tab Jan 25 10:44:17 iPhone Client 271 <Warning>: Unbalanced calls to begin/end appearance transitions for <Client.TabTrayController: 0x12d793410>.', Created ', ', Pull request', Comment on ', ', Pull request Nit found, almost certainly not a problem. Details in the PR.', Verified both scenarios on build 2.0(4) and the issue is no longer reproducible' 
id=1139504	 'Perfect. Thanks for the report!', Aaron of Jennifer, can you find out what other browsers do? Like Safari and Chrome? I'm curious if there is an intermediate confirmation dialog. And if not, if the phone starts dialing the number immediately. Would be useful info to have when we implement this.", href="tel:########" will prompt the number in a dialog with a "Cancel | Call" button, on call the dialler opens and begins dialing Safari and Chrome both honour this.', It seems like we directly launch the dialler and begin dialling actually but we bypass the prompt. So it looks like it is partially natively handled already which is a good thing.', Here's what the intermediate confirmation dialog looks like on Safari ", Let's bear in mind ", when implementing this.', It looks like this works in build 6, according to some user feedback. Someone please reopen this if I'm wrong!" 
id=1253557	 'Do you have Touch ID enabled on your device or just the passcode? Also, which device are you trying this on? I tried this on my iPhone 6 with Touch ID enabled and when tapping the switch I get prompted for authentication using Touch ID.', Nevermind I can reproduce this following similar steps to ', .', Fix for ', might resolve this issue if it's the STR I mentioned above.", Marking as fixed for retesting in v3.0b4', I'm not able to reproduce on 3.0(6) and 4.0.0(1)" 
id=1269008	 ' *** This bug has been marked as a duplicate of ', ***', Tested with build b222aa67 No crashes were encountered when attempting to navigate to any of the home panels from the menu.' 
id=1276648	 'Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', just a very personal nit. Otherwise LGTM', master 17f8ba111fdd292053e7ef2ccde88bb37a7f9e68', v5.x a512f47be32c55df9653cf06e9a3df580bca810a', Tested on 5.0b10. The private browsing information text will no longer overlap the closed tabs.' 
id=1272071	 'Created ', ', PR check if the completion blocking results in too slow of a render time. There is a slight difference but not much!', Comment on ', ', PR Left feedback on the PR!', Comment on ', ', PR Adding some more feedback about async-ness of calls and some nits.', Comment on ', ', PR Looks good - just two minor nits.', Missing needsuplift . Uplifting since this change needs to be in 5.0. v5.x ea81f6e505bf63aaedb6996102dc879987175b93', Tested on 5.0b10. The Synced Tabs title label no longer jumps down when navigating to panel.' 
id=1213157	 "I can't test this because of ", (yup, we can't create livemarks in trunk!), but I think I see my bug\u2026", Created ', ', Pull req. Stupid error means a thorough well-tested fix.', Big thanks to Robin for getting me a stack!', Also, I created a livemark in my Desktop Firefox bookmarks, synced desktop, synced fxiOS and couldn't see the livemark in the bookmark browser. Should I have? I can see no errors output from bookmark sync that should have brought down the livemark: 2015-10-09 14:18:50.496 Debug Profile.swift:674 syncSeveral > Syncing bookmarks\u2026 2015-10-09 14:18:50.497 Debug Profile.swift:619 mirrorBookmarksWithDelegate(_:prefs:ready:) > Mirroring server bookmarks to storage. 2015-10-09 14:18:50.497 Info Synchronizer.swift:130 init(scratchpad:delegate:basePrefs:collection:) > Synchronizer configured with prefs 'synchronizer.bookmarks.'. 2015-10-09 14:18:50.498 Debug Profile.swift:760 greenLight() > Checking green light. Backgrounded: false. 2015-10-09 14:18:50.498 Info BookmarksDownloader.swift:176 init(collectionClient:basePrefs:collection:) > Downloader configured with prefs 'downloader.bookmarks.'. 2015-10-09 14:18:50.499 Debug BookmarksDownloader.swift:127 go(_:greenLight:) > Downloading up to 100 records. 2015-10-09 14:18:50.499 Debug BookmarksDownloader.swift:241 go(_:limit:) > Modified: 1444396233190; last 1442938785130. 2015-10-09 14:18:50.499 Debug BookmarksDownloader.swift:261 downloadNextBatchWithLimit(_:infoModified:) > Fetching newer=1442938785130, offset=nil. 2015-10-09 14:18:50.500 Debug StorageClient.swift:699 getSince(_:sort:limit:offset:) > Issuing GET with newer = 1442938785130. 2015-10-09 14:18:50.678 Debug StorageClient.swift:328 failFromResponse > Status code: 200. 2015-10-09 14:18:50.682 Debug StorageClient.swift:704 getSince(_:sort:limit:offset:) > Response is Optional(<NSHTTPURLResponse: 0x1278f3a20> { URL: ", } { status code: 200, headers { "Access-Control-Allow-Credentials" = true; "Access-Control-Allow-Headers" = "DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization,X-Conditions-Accepted"; "Access-Control-Allow-Methods" = "GET, POST, OPTIONS"; "Access-Control-Max-Age" = 1728000; Connection = "keep-alive"; "Content-Length" = 2649; "Content-Type" = "application/json; charset=UTF-8"; Date = "Fri, 09 Oct 2015 13:18:50 GMT"; Server = "openresty/1.7.0.1"; "X-Last-Modified" = "1444396233.19"; "X-Weave-Records" = 4; "X-Weave-Timestamp" = "1444396730.58"; } }). 2015-10-09 14:18:50.702 Debug BookmarksDownloader.swift:279 handleSuccess > Handling success. 2015-10-09 14:18:50.703 Debug BookmarksDownloader.swift:296 handleSuccess > Got success response with Optional(4) records. 2015-10-09 14:18:50.703 Debug BookmarksDownloader.swift:308 handleSuccess > Advancing lastModified to Optional(1444396233190) ?? 1444396233190. 2015-10-09 14:18:50.704 Info BookmarksDownloader.swift:136 go(_:greenLight:) > Done with batched mirroring. 2015-10-09 14:18:50.707 Debug BookmarksDownloader.swift:117 applyRecordsFromBatcher() > Applying 3 downloaded bookmarks. 2015-10-09 14:18:50.710 Debug SQLiteBookmarks.swift:504 applyRecords(_:withMaxVars:) > Inserting 42 children. 2015-10-09 14:18:50.710 Debug SQLiteBookmarks.swift:512 applyRecords(_:withMaxVars:) > 2 unique parents to drop from structure table. 2015-10-09 14:18:50.712 Debug SQLiteBookmarks.swift:538 applyRecords(_:withMaxVars:) > Inserting 42 records (out of 42). 2015-10-09 14:18:50.714 Debug SQLiteBookmarks.swift:431 deleteChildrenInTransactionWithGUIDs(_:connection:withMaxVars:) > Deleting 0 mirror bookmarks from structure table. 2015-10-09 14:18:50.714 Debug SwiftData.swift:126 transaction > Op in transaction succeeded. Committing.', (In reply to Emily Toop (:fluffyemily) from ', ) ', No. We only show bookmarks and folders right now. It's there in the DB, though.", Comment on ', ', Pull req. lgtm.', Thanks, people! 192d518', *** ', has been marked as a duplicate of this bug. ***', Verifying as fixed using the steps from ' 
id=1191376	 'Is there a mentor for this bug? I have some changes that might benefit from a review: ', Essentially, the scenario doesn't exist when the is relaunched after a termination. The scenario exists only when the app is brought back to the foreground from the background. The above changes work as expected. However, in terms of code quality, I thought there might be improvements since I'm accessing the BrowserViewController and BrowserScrollController from the AppDelegate. Any suggestions anyone?", Eventually I'd like to see us eliminate as much of the coupling between the AppDelegate/BVC as we can. iOS sends out notifications that anyone can listen to for the various foreground/background events. The BVC already listens to these for hiding/showing web content when backgrounding the app while viewing a private tab 1 . Maybe try moving this logic here? 1 ", Created ', ', Pull request', Comment on ', ', Pull request Great, simple fix. Thanks for the patch!', master c9d67a4aea23ec93880fdd6085352222a351eb06', Verified as fixed latest master (0da9bd79).' 
id=1266691	 'Created ', ', Pull request', Comment on ', ', Pull request Left feedback on the PR', Comment on ', ', Pull request Same nit: the curve is also on the bottom.', Comment on ', ', Pull request Looks good! I've never heard of UIRectCorner before - really neat API.", :tecgirl', Tested on master d3c9de01. The menu have the same rounded corners as the menu toolbar when there are no toolbar items to display.' 
id=1260249	 'Created ', ', PR review bb', Tested on 5979d61c. The top sites are displayed correct.' 
id=1270767	 "I'm not able to reproduce this at all on my iPhone 6 (iOS 9.3.1) using 4.0 (build 11). I'm able to launch Firefox, open the tab tray and open and switch tabs perfectly fine. Works for me. Any missing steps? Which device are you using? Reproducible on different devices? Not enough information here.", The issue was reproduced on on Iphone 6 Plus, Ipad mini 4, Iphone 4S. When quickly tapping on the private browsing button and open new tab button while the tabs tray is open the application will enter in an unresponsive stat. Please see a video of the issue: ', . In the attached issue the following steps were followed: 1. Quickly tap on the Private Browosing button 2. Quickly tap on the New Tab button', Unfortunately I don't have the symbols for the crash log since it looks like it was taken off a master build. Is there a crash log for the 4.0.0b7 crash?", (In reply to Stephan Leroux :sleroux from ', ) ', The issue occurs on 4.0.0b7 as well but no crash log is created on the beta version.', Is this reproducible on device or only in simulator?', On device (see ', )', Created ', ', ', Comment on ', ', ', See PR for comment.', master d3c9de01c06a5658ef5483f2b08f5397dcc2821d', Tested on d3c9de01. The issue is not reproducible following the above steps.' 
id=1273224	 'Created ', ', Pull request', Comment on ', ', Pull request OMG. Please land yesterday. I keep meaning to file this.', Tested on 5.0b10 The menu arrows color is correct.' 
id=1247884	 'master (3.0) affected too', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', LGTM', master 1fbafa958f6e50fc67750a61299f56c05e614ad1 v2.x 93e7230', Verifying as fixed on build 2.1(1)' 
id=1271572	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull request', Comment on ', ', Pull request Looks good to me.', Tested on latest master b222aa67 The issue is not reproducible following the above steps.' 
id=1252963	 ' cell.imageView.layer.minificationFilter = kCAFilterTrilinear helps a lot, but we should also make these images fill more of the space.', Created ', ', Pull req.', Created ', After.', A huge improvement but they're still a bit soft. I'm going to attach another set of assets that are scaled to the tile width, and would still be vertically centered. Drop those in and see if there's a difference without any scaling.", Created ', Alexa-Top5.zip 440w (@2x)', The actual image in use is scaled to 90.5x56.5, downsampled from the 220x100 smallest PNG in the imageset. Lemme see if I can get that to use 90x56, but if we do that the best @1x image size would be 180x112 (or 180x82). It's going to be hard to get good options for all device sizes unless we fix the size of these images rather than scaling them to the thumbnail container.", I attempted to get Xcode to use a 180x82 version of the @1x png, and it stubbornly insisted that the content was 220x100, so *shrug*', Created ', Clamped to integer width (90)', Created ', Amazon 200px', Created ', Amazon 220px', Created ', All US images at 220px', Created ', All US images at 220px, iPhone 6+', (In reply to Richard Newman :rnewman from ', ) ', Why would @1x be 180? It should be 220.', (In reply to Richard Newman :rnewman from ', ) ', This looks a LOT better, but I can see see some fuzziness around the edges, suggesting they are still being scaled and half-pixels are being created. I scaled these to 220, after measuring the tile width. If this width is something other than 220, let me know, and I'll scale the assets accordingly.", (In reply to Robin Andersen :tecgirl from ', ) ', ', Yeah, that's the trick. Every device has a different tile width; the 180px I was experimenting with was for the 5S in particular, to see if I could get a 2:1 scale factor. On a 4S and 5S portrait the tile image view width is 90x56.5. On a Retina iPad it's 157x122.5 in landscape, and 142x108.5 in portrait. On a 6S portrait it's 109x75.5. And so on. (I suspect that the original 400,200,100 set was intended for iPhone 6 with 10px padding, and it wasn't quite right.) You can pick *one* device on which to make these images look good, and the others will have some softness. (Really that's two -- iPad is a separate category -- but in that case you can choose which iPad and which orientation!) Alternatively, we can try to pick a fixed set of sizes for tile images, and adjust the padding -- there would be more or less visual space around each logo depending on the device and orientation. The final wrench in these works: the non-US suggested site tile images are all different sizes: Baidu: 276x112 Suna: 276x113 Taobao: 260x60 QQ: 260x60 I don't know when we show those, but they'll also be scaled.", Comment on ', ', Pull req. Emily, could you see (a) if this implementation is acceptable, and (b) how this looks to you? I trust your thoroughness! Feel free to push better implementation commits on top :D', Comment on ', ', Pull req. a couple of nits in the comments', Rebased, nitted, briefly re-tested, and landed: e59062e If we're happy with how this looks in master, let's uplift to 3.0 before release.", v3.x 3faf1cebdeb361026c784e5c61d69b512ed36dc3', Tested on build 4.0.0(1) Device: iPhone 6S, iPhone 6 plus, iPhone 4S, iPad Air 2 The issue is not longer reproducible.' 
id=1201505	 'Same comment from ', Created ', ', ', Created ', Screen Shot 2015-09-22 at 4.20.44 PM.png 3 quick nits, will play more with it though: 1. outline on selected url bar should be purple 2. text highlight color should be lavender and more readable 3. tab button stroke width should be 1pt, not 2pt Colors in screenshot, in r/g/b format.', Comment on ', ', ', Looking good, just want to see the next iteration with fixups and UX nits addressed.', Updated with code nits/ui nit fixes', Comment on ', ', ', Can't say I particularly like the purple tab counter, but that's just a personal preference.", Comment on ', ', ', Love it, now for animations :)', Comment on ', ', ', Flagging for PR fix review', Comment on ', ', ', LGTM with autocomplete highlight fixed.', Ah thanks for find this. I've fixed it and will merge this down to master.", Merged.', Verifying as fixed on the current TestFlight build (1104)' 
id=1251598	 "Just tried going through these STR on the latest master and I wasn't able to reproduce. I did do some work around the logic for when we display the passcode screen last week so that might have resolved this issue. Can we re-test this on the upcoming TestFlight build?", Still able to reproduce on 4.0(1), 3.0(2) Yo ll need to have 'Use Touch ID' enabled in Firefox when 'Turning Passcode Off' in iOS settings. This will cause 'Logins' to no longer ask for Touch Id. Instead the passcode screen should be displayed. This does not happen. The only way to access Logins is to disable the passcode in Firefox settings, or to re-enable Touch ID in iOS settings.", Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Makes sense!', master 3478cef3c6398b28b781b373f4ccf8494c995ea8', v3.x ffcd09e', Verifying as fixed on build 3.0(6) and 4.0.0(1)' 
id=1272602	 'Can the menu be scrollable? Otherwise, hitting Done on the keyboard reveals the entirety of the menu.', :tecgirl - I'm thinking the quickest and easiest way of dealing with this is to dismiss the keyboard when presenting the menu - I can't think of a world in which we would want both to be open at the same time. Does that work for you?", Created ', ', Pull request', Comment on ', ', Pull request LGTM!', (In reply to Emily Toop (:fluffyemily) from ', ) ', that makes sense. wfm!', The menu is no longer cut off on phones when VKB is open. The keyboard will dismiss when presenting the menu on build 5979d61c.' 
id=1270567	 "Can we be more aggressive in ensuring that we set the thumbnail here? The tab thumbnail here will always show about:home until it's accessed.", Created ', ', ', Comment on ', ', ', Just rewrite using a conditional unwrap and good to go!', master cc53bc457f2881b7245c1c8a00be655f29a9e1f7', Verifying as fixed on master d3c9de01' 
id=1229593	 "Just for reference, I'm working on a similar bug for the login manager where we show a custom 'Reveal' option using a custom UIMenuItem: ", Created ', ', Link to Github pull-request: ', There's one issue I found when testing this, which is that if you try to select text while the find-in-page bar is already visible and focused, the selected text menu won't have Find in Page as an option. I think this is because the web view isn't the first responder, so it doesn't get asked which items to show. Maybe we could set the web view to the first responder right on touch down? Not sure what the best solution is yet...let me know if you have any ideas. Will probably push the fix off to a follow-up bug.", Comment on ', ', Link to Github pull-request: ', As discussed in triage, I'd be fine with landing this as is with the UIMenuAction bug and filing a follow up to investigate.", Verifying as fixed on build 2.0(3)' 
id=1233316	 'Created ', ', pull request', Hi Stefan, Kema(', ) is the new guy to join Beijing office. This bug update the icons of default suggested sites for zh-cn locale. Please help to review. Thanks.', Comment on ', ', pull request Looks good to me. I will merge it in.', Thank you!', v1.x 60fc1cc', Verified on v1.4(1404). The icons are correct both on iOS 8.4.1 and iOS 9.2.' 
id=1251260	 'Created ', ', Pull request', Super simple fix - I can see us lifting this to 5.1. Shout at me if we shouldn't.", v5.x 10ca45a', Tested on 5.1b2 on iPhone 6 Plus (9.3.3). Cancelling a Touch ID prompt on 'Logins' no longer highlights the selected row." 
id=1271337	 'It appears we are not displaying the empty state for the reading list any more when navigating to it from the menu. This is a regression as this used to work.', Created ', ', Pull request', Caused by the removal of the synced tabs panel not being reflected from the men , Verifying as fixed on master b222aa67' 
id=1283157	 'The same behaviour is shown whilst opening a bunch of new tabs too, look at the indicator while doing so.', *** ', has been marked as a duplicate of this bug. ***', Created ', ', ', Comment on ', ', ', Works pretty well!', master 74df88f7c2bc2153f9b1b96391d0f4fa172a919a', Verifying as fix on master 1bc8bb71f.' 
id=1267602	 'Created ', ', Pull Request', Comment on ', ', Pull Request Looks good!', Marking as needsuplift since it seems small/low risk and impactful enough to uplift.', master ea6e25bd12afbebe1e3524ba120ea61dcb9d0679', Verifying as fixed on build 4.0.0b7', Tested on master d3c9de01. The issue has been fixed.' 
id=1272448	 "Yeah, triple-line labels weren't considered in the initial mocks, which were designed for horizontal centering to balance 1+2 lines. I've updated the mocks for top-alignment. :fluffyemily, would it be possible to top-align the labels?", :tecgirl - yup, totally possible.', Created ', ', Pull request', Comment on ', ', Pull request Question for general case in the PR, but LGTM.', Tested on 5.0 (5979d61c). The labels are top - aligned.' 
id=1318434	 'I used my iPhone 6 on Firefox Nightly', Created ', 2016-11-18_09-28-38.2251_+0900-a38767deb894262d3de95a319754ee8407d80ba2.crash Attached crash from organizer.', Moving to P1 since this crash is pretty easy to reproduce and seems common.', master ', Verifying as fixed on Beta 6 and latest master (6dae35c6)' 
id=1304394	 "This is a major UI regression affecting all iPads with iOS 10 and it should be fixed in the 5.3 release - if it's not too late", Not reproducible on my iPhone 6 (iOS 10). Seems tablet specific.', I looked into this a bit more today. This issue can be fixed by closing the menu and reopening it. Sadly, I\'m having trouble understanding why exactly this is happening. I\'m writing my thoughts here for when I want to get back to this. A change in the menuViewController\'s appState when going into the background triggers a layout. That triggers a full reloadData of the Menu which causes "prepareLayout" in the Menu\'s colletionViewLayout. Turns out the bounds of the collectionView are incorrect (width=0). But the layout continues anyways and fails horribly (see screenshot). This happens because the constraints for the width aren\'t set the same way they are for the height. One way of fixing this. Is to fix the width of the popOver. This way the case of the collectionview ever being 0 never happens. This all wouldn\'t be such a big deal if once the app appeared again viewDidAppear was triggered and layout happened again. But it isn\'t', Thanks for looking into this. This seems related to the iOS 10 bug that was fixed a few weeks back where the menu wasn't correctly laying out at all on iPads 1 . From what I can recall, on iOS 10, the UI ", My gut says that the timing of the reloadData which in turn forces the relayout is occurring at an incorrect time in the view lifecycle. For example, if you try laying things out manually without autolayout prior to viewDidLayoutSubviews, you get some undefined frame values. 1 ', Created ', ', Pull Request', Comment on ', ', Pull Request Looks good!', master ', Verifying as fixed on master acc25e6d9. The Menu is dismissed when foregrounding Firefox.' 
id=1320096	 'Created ', 2016-11-24_15-05-18.7320_+0200-2ceda6d445cc1d3a71b4bcab8291461976c75e76.crash I believe this crash that's on beta is the same as this issue.", this also happens when you try to delete from an individual login: press delete, the alert will pop up, background firefox, come back, and then press delete --> crash', Created ', ', PR', Comment on ', ', PR Looks good but do we also want to add this patch to master? Might make sense to change the PR to point to there then I can uplift it.', done', v6.x ec28df591c8d8faa0d9e1f0850e3c4ad2fd626ca', Verifying as fix on master 6dae35c6.' 
id=1290331	 '*** ', has been marked as a duplicate of this bug. ***', *** ', has been marked as a duplicate of this bug. ***', Created ', Link to Github pull-request: ', Hey Nick, I know :rnewman is heading on PTO next week - any chance you could take a quick peek and let me know your thoughts?', Comment on ', Link to Github pull-request: ', I've left feedback. My understanding of sync is limited. Please correct me if I'm wrong :)", *** ', has been marked as a duplicate of this bug. ***', Comment on ', Link to Github pull-request: ', I'm about to PTO, so any f? or r? will have to come from elsewhere.", Comment on ', Link to Github pull-request: ', I reviewed this. Comments on the PR.', master 36f899ec2b8308cabc7c665900fb190d5e0887cb', v5.x 199450e', Tested on 5.1b3 on iPhone 6 Plus. Verifying as fixed. When unchecking the bookmarks and history from desktop the mentioned preferences will not be imported to mobile. When checking these preferences on desktop, sync will be performed as intended also on iOS devices.', How about when just unchecking Passwords? That's the only thing I'm not syncing with FF Sync, and it causes the problem for me on iOS FF.", Yup this bug would appear when unchecking passwords as well. The sync actually succeeds but the messaging is not correct. Everything else will sync fine though.', Nice job fixing Sync in the 5.1 update that came out today!', Verifying as fix on master 0e03028ac.' 
id=1316324	 "Looks like this might be caused by fallout from our profile.shutdown changes we made when background the app. This looks pretty severe so I'll pick it up and investigate.", See ', and 8. We're closing the DB after a sync, which happens to finish after you reopen the app. Let's use this bug for this part: --- - Don't just shutdown on the queue: when we get to the front of the queue, look to see whether we've already been reopened. If so, don't close the DB! ---", Created ', ', Github PR I made it over complicated then simplified it.', Comment on ', ', Github PR I left a note about Inactive.', master ', v6.x cfcaf4b3995041ddc6389f6cc9e29adb943de7b2', Verifying as fix on 6.0b4 and latest master.' 
id=1300527	 'Created ', ', Pull Request', Comment on ', ', Pull Request Nice catch!', master ', Verifing as fix on Master 1bc8bb71f.' 
id=1308855	 '*** ', has been marked as a duplicate of this bug. ***', Created ', ', Pull Request', master ', Verifying as fixed on master acc25e6d9' 
id=1294056	 'Simon, is this still reproducible on latest master?', Tested on iPhone 6S (iOS 10.0.2), iPhone 6 Plus (iOS 9.3.4) on latest master. The issue is still reproducible following the STR.', I can't seem to reproduce this issue on iphone 6 9.3 and iphoneSE iOS10. master c0c43446959073a74b1b41f51acdda9f28c808fe How often do you have it set to Require Passcode? I have it set to 15 mins.", I am able to reproduce this with all the Require Passcode settings but it is more easy to see the issue when it is set to 'Immediately' and only when the device is locked by pressing the lock button in the log in screen. The Touch ID is requested but the login screen is still visible (it is not blurred). Please see a video of the issue: ", .', Created ', ', Pull Request', master ', Verifying as fix on master 0e03028ac. The login screen is dismissed when locking the device with the lock button.' 
id=1299573	 '*** ', has been marked as a duplicate of this bug. ***', Probably related to the URL minified patch Nathanael landed last week on master.', Created ', ', Pull Request', Comment on ', ', Pull Request Haven't tested, but fine with me if it works!", master 9b36f8aacf31d589a90d153a84c51a192214ce93', Verifying as fixed on latest master (acc25e6d9)' 
id=1316349	 'Also affects Google. Also affects iPhone.', Created ', ', Pull Request Support for punycode had broken the search term re-extraction. I've also made modifications to the search term extraction to only check the domain name and not the TLD. google.com likes to redirect to the local TLD eg. google.ca which breaks search term extraction for people in Canada.", Comment on ', ', Pull Request Looks good, but since we already have a lot of code around TLD handling, I wonder if it'd make sense to use that.", master ', v6.x 902a215', Hello Farhan, I have tested this issue and everything looks in order except for one inconsistency. When adding youtube (so far observed just for youtube) as a 3rd party search engine the search term re-extraction does not work. Is this inconsistency something we should fix?', I think search term re-extraction working on third party search engines is just an added bonus. As long as it works on the default engines I think we are good.', Verifying as fix on 6.0b5.' 
id=1317380	 'Yep. 100% reproducible.', Hey Aaron How often is the app set to require passcode?', I used our default, immediately.', Created ', ', Pull Request', Yeah I'm glad this is being fixed - it annoyed me so much HAHAHA", master ', v6.x b2ec6f5', Verifying as fix on 6.0b6.' 
id=1289768	 'This should be fixed by the patch in ', Can you please verify?', Tested on iPhone 6 Plus on 5.1b1. The issue is still reproducible following the STR.', Tested on master 412365a09 (5.0) If we want this fixed in 5.1 we probably need to uplift the fix from ', .', Forgot to mention that the issue is not reproducible on latest master.', Uplifted the commit mentioned in ', . v5.x 7d90f3e', Tested on 5.1b3 on iPad Air 2 and iPhone 6 Plus The tabs opened from the Menu are correctly displayed. This should be fixed by the patch in ' 
id=1321576	 'Reproducible with any thread on the same forum.', *** ', has been marked as a duplicate of this bug. ***', Notably this usually occurs for me on Bugzilla, but not always, and can even occur for the same page in one tab and not for the same page in a different tab. See duped bug for video. (Thanks Aaron!)', Two more observations: - Happens on amazon.com. Urgh. - Sometimes this starts or stops happening after rotating the screen.', Wonder if this is a recent regression? (', or ', )', Non-blocking on 6.0 but we should look into backing out the zoom patch.', I get this a lot recently; I wouldn't block 6.0 on this (too many other things in the release!), but it's big motivation for a 6.1 IMO, because it's really frustrating.", Commenting out the zoomScale assignment resolves this issue so it looks like the zoom patch caused this regression. I'll take a look to see if we can resolve this and the zoom issue. We can always revert though if needed.", Created ', ', Link to Github pull-request: ', Removes some of the zoom logic you added. I tried all the zoom scenarios and everything seems to work and the frictionless scrolling is resolved.', Created ', ', Pull Request Alternative The zoom state code is required for edge cases like when you are slightly zoomed in and rotate the device. Also sometimes the rotation events arent enough to handle all the edge cases related to zooming. This alternative patch makes sure that invalid zoomscales of 0 arent applied to the scrollview which fixes the issue with scrolling inertia.', Comment on ', ', Pull Request Alternative Thanks for picking this up!', master ', v6.x 87d9cc8f842f9e1e9d989da403509d747b95a0b7', I cannot reproduce this issue on latest master (6dae35c6). Verifying as fixed.' 
id=1322224	 'I see this too. Closed database in the extension profile? Regardless, it would be good to load the client list and fetch and apply an update in the background -- no spinner by default.', Alright so a couple of things are going on here: 1. By introducing the needed `profile.shutdown` call when we exit away from the SendTo extension, we've introduced this bug. 2. The reason adding a `profile.reopen` doesn't resolve this is because when we launch into the SendTo extension a second time, the `dbCreated` boolean is re-assigned to false when the profile is re-created. Since we set it to `true` in the `dispatch_once` block, this will never be assigned true again - skipping the `reopen` logic. 3. One solution could be to move the `dbCreated = true` assignment outside the dispatch_once called (since we know that after we invoke this the DB was created) but this will fail since you need to access the DB property for the assignment to happen (since it's a computed property). You can test this by adding `let _ = profile.bookmarks` prior to the reopening. Ideally, we shouldn't keep track of if the DB has been created in `BrowserProfile` since the two can have different lifecycles. This isn't so much an issue within the app since for the most part the Profile and BrowserDB have the same lifetime but this falls apart in the extensions when they are being reopened. Also, we recreate the profile when we create a `CommandStoringSyncDelegate` 1 which seems concerning. We should probably pass in our existing profile. 1 ", Created ', Link to Github pull-request: ', Ah, so the issue here is that we are creating a second profile in the same application, and that doesn't interact correctly with our use of a singleton. In theory, then, we could write a test that opens two profiles, and reproduce the root cause?", Yup in theory. I'll add a test case.", Comment on ', Link to Github pull-request: ', See PR note. Well done finding the root cause!', master ', v6.x 4f445ae5799f760ecaa9e003ee911cbf4aca0cca', Verifying as fix on master 6dae35c6.' 
id=1310688	 'Created ', ', Pull Request', Verifying as fixed on v6.0b6' 
id=1315971	 'Was there a fix that was applied for this in 6.0?', Yup. *** This bug has been marked as a duplicate of ', ***', Oops, didn't notice that this was reported in 6.0. Reopening.", Created ', ', Pull Request', Updating the title -- the items don't appear in the list, but the pages are still restored (i.e., restore still works fine).", Comment on ', ', Pull Request Left a couple of comments.', master ', v6.x 7e23c71', Verifying as fix on 6.0b6.', Restored pages are displayed in the back/forward list.' 
id=1322117	 'Correction: Tapping on the item takes us to the reader view page (not blank page). But, we want it to take us to the actual page (without the reader view applied).', I\'ve noticed that even other "localhost" pages are also being displayed in the Recently Closed Tabs panel. For instance if a page timed out, an entry shows up in the panel with the title "The request timed out." and with a "localhost" url. I believe we don\'t want to show localhost urls anywhere.', Created ', ', PR: ', This patch does the following: * It moves helper functions from `AboutUtils`, `ReaderModeUtils` and `ErrorPageHelper` into `NSURLExtensions`. * It introduces a `NSURL.displayURL` and `NSURL.displayString` which correctly transform about, error and reader mode URLs to the page that they represent. * It fixes ', by calling `url.displayString()` instead of `url.absoluteString()` in the `RecentlyClosedTabsPanel`. I understand this turned out to be a rather big refactor. We can also move this to 6.1 or 7.0 if we have a bad feeling about a change this large.', Comment on ', ', PR: ', I'm cool with this going into 6.0.", Comment on ', ', PR: ', Left some comments in the PR, but nothing too big. Would be nice if these extension functions were computed properties instead.', I added a lot more changes. If you could do another look that would be awesome :)', Mostly LGTM -- left a few comments in the PR.', master ', make sure to also uplift the folowup please b28cdb50962ecfc35b22c833cfa6b1506a165a0e', v6.x 182fe46a9b060c40c43c7ab3871c3d7e8e5d1d54', On latest master, the URL is show correctly in the 'Recently Closed' panel, but tapping on it takes you to the reader view page. Per ", , tapping in the link should take you to the actual page. Farhan, what's the expected behavior in this case?", This was the behavior I was going for. It is also similar to how the back/forward list behaves. In the future it would be a good way to show that the URL is a ReaderMode url.', Verifying as fixed on 6.0b9' 
id=1300091	 'Created ', ', Pull Request', master ', Tested on master 0f93b9b14de0 on devices running iOS 9.x and iOS 10.0.2. The Layout menu is correctly dismissed and will not re-open when changing device orientation.' 
id=1304030	 'This issue is also reproducible on 5.2(1) released version.', Created ', ', Pull Request', Created ', ', Pull Request', Comment on ', ', Pull Request Steph is more familiar with this BrowserTrayAnimators code than I am, so I'll defer to him.", Comment on ', ', Pull Request Saw another related bug. Left comments on the PR.', I've updated the PR. Let me know what you think! :)", Comment on ', ', Pull Request LGTM!', master ', Verifying as fixed on master 186e1f3b45.' 
id=1302970	 'Does this also happen on 5.2 release?', This issue is also reproducible on 5.2 and on master. When opening a new tab via Today Widget it will always open in edit mode with focus on the URL which will cause Top Sites to be displayed. This is an inconsistency between opening a new tab via Today Widget/3D T and opening a tab from the menu. I am guessing this was not implemented when New Tabs feature was added.', Created ', ', Pull Request', master ', Tested on master 0f93b9b14de02 on iOS 9.x an 10.0.2 Opening a New Tab via Today Widget/3DT displays the correct page (Bookmarks/History/Homepage).' 
id=1308854	 'Created ', Screen Shot 2016-10-10 at 11.16.41.png', Created ', ', Pull Request', master ', Verifying as fixed on master acc25e6d9. The menu is dismissed when the app is backgrounded' 
id=1314729	 "+1 I'm also getting this occasionally. I don't know why!", I can't seem to reproduce this anymore. Can you see if this still happens? I'm using a build with ", This could be related to the mailto changes. Although looking at the code I don't see how this could be happening.", IIRC the last time this happened it was an ad iframe with a bad URL.', Yea that seems likely what was happening here. I guess the next question is do we really want to show an error here? In this case even though an ad might be broken the page loads fine. So an error here is really a nuisance. I'm gonna look into using WKNavigationType to see if the url is an explicit tap or something else. Does it make sense to _only_ show the error when someone clicks a bad link?", Is it possible that you saw this on a build that did not have the fix from ', yet? That patch fixed a very similar issue and it landed a few days before this was reported. Before we make changes, I would really like to understand the exact URL that is causing this. Is there a site where this happens reliably?', Is it possible that you saw this on a build that did not have the fix from ', yet? That patch fixed a very similar issue and it landed a few days before this was reported. Before we make changes, I would really like to understand the exact URL that is causing this. Is there a site where this happens reliably?', For me after rebuilding from the latest master, going to www.gizmodo.com shows the popup consistently.', This was fixed by ', I've confirmed with No-Jun that it is fixed with the patch from the above bug (he wasn't running a correct version of master earlier)", Tested on master 6dae35c6. According to previous comment I am verifying this as fix. This issue is not longer reproducible on gizmodo.com.' 
id=1320907	 'Created ', ', Pull Request', master ', v6.x bd1ac40', Verifying as fix on 6.0b6.' 
id=1283409	 'Please see similar issue reported here ', and fixed here ', This should be fixed by the bug here ', I'll double check it once the bug lands in master.", Tested on master 4779a27b5 which contains the fix for ', and this issue is still reproducible', Created ', ', Pull Request', master ', Verifying as fix on master 0e03028ac.' 
id=1300499	 'Created ', ', Pull Request', master ', Tested on iPhone 6 (9.3.5) on master 1bc8bb71f. The resize of tabs is no longer visible after following the above STR.' 
id=1294609	 'Created ', ', Pull Request A quick look over would be appreciated!', Verifying as fix on master 0e03028ac. The "Save PDF to iBooks" option is correctly displayed when the "Send" icon will be shown in Menu.' 
id=1302134	 'Also visible in private tabs.', Created ', ', Pull Request This looks like a bug when setting the shadow of a UIVisualEffect View. Here is an open radar. ', I've removed the shadow. I also removed it in ios9 in order to keep things consistent.", Booo, hopefully we can add this back once they fix it?', master 8989de3292162ec2d168648dca8a4020c9362b96', This issue is no longer reproducible on latest master (acc25e6d9)' 
id=1312703	 'master ', Tested on devices running iOS 9 and 10. The font color in Today Widget has been changed to a darker color for devices running iOS 10.' 
id=1317096	 "I haven't been able to reproduce this on the simulator/device. Is there any additional steps or does it happen randomly?", It might be related to my bookmark data. Want me to investigate?', Sure if yo re able to repro on your device!", 2016-11-17 09:28:57.493 Debug SQLiteBookmarksModel.swift:842 modelFactory > Using local+mirror bookmark factory. 2016-11-17 09:28:57.494 Debug SQLiteBookmarksModel.swift:120 modelForRoot() > Getting model for root. 2016-11-17 09:28:57.501 Debug SQLiteBookmarksModel.swift:208 onlyMobile() > No desktop bookmarks. Only showing mobile. Well, that'll be why.", The reason is that while the buffer contains plenty of bookmarks, it doesn't contain the structure for the four roots: sqlite> SELECT COUNT(*) FROM bookmarksBuffer; COUNT(*) ---------- 2316 sqlite> SELECT COUNT(*) FROM bookmarksBufferStructure; COUNT(*) ---------- 1789 sqlite> SELECT EXISTS(SELECT 1 FROM bookmarksBufferStructure WHERE parent IN ('menu________', 'toolbar_____', 'unfiled_____', 'mobile______')); EXISTS(SELECT 1 FROM bookmarksBufferStructure WHERE parent IN ('menu________', 'toolbar_____', 'unfiled_____', 'mobile______')) --------------------------------------------------------------------------------------------- 0 so hasOnlyUnmergedRemoteBookmarks returns 'no', and we use local+mirror.", And here\'s the root cause: 2016-11-17 10:18:30.531 Warning BookmarkPayload.swift:500 isValid() > Not the places root and missing parent name. 2016-11-17 10:18:30.543 Warning Record.swift:59 fromEnvelope(_:payloadFactory:) > Invalid payload { "title" : "Bookmarks Toolbar", "description" : "Add bookmarks to this folder to see them displayed on the Bookmarks Toolbar", "id" : "toolbar", "children" : "uZJ-SgK5kgE2", "8RPb1N8Ozaf0", "ZFI_J-9ihosn", "B8WxDqcMMQqf", "nE_IBTKMGA1c", "5ZO9vzgNn6I8", "MOi2WFUAYBQJ", "slf34ON7SOO-", "5nx3XFeVbGH3", "loX7JRkZ19Xx", "63_yHk-4W3lY", "vq-xRNJKJ_21", "BZPgOt-0LSjt", "H4VaXmepqAK2" , "parentid" : "places", "type" : "folder" }.', Created ', ', Workaround.', Comment on ', ', Workaround. LGTM!', master: 79c6e2a Steph, could you uplift as yo re cutting new betas?", Yup - I'm just about to release b4 but I can make a new one tomorrow.", v6.x d787fc9', Verifying as fix on 6.0b5. The desktop bookmarks are correctly displayed.' 
id=1300766	 'Please see the video for more information: ', Created ', ', Pull request', #merged ', Verified as fixed on master f43a1d35b3' 
id=1311007	 'Created ', ', Pull Request', master ', This issue is fixed on latest master but I see the same behavior as in description on beta 5. If the patch is low risk, I think that it should be uplifted to 6.0? Farhan, Stephan, what do you think?', I would say definitely. This drives me nuts!', v6.x 29cb747', Verifying as fix on 6.0b6.' 
id=1314954	 'v6.x 0b2f3d7', Verifying as fix on master 6dae35c6 and 6.0b6.' 
id=1304691	 'Created ', ', Pull Request A simple fix! Let me know if it works for ya Bryan :)', Comment on ', ', Pull Request lgtm', master f43a1d35b3e6b0d7f4e356abfe65bfbb7443f3ad', The keyboard is no longer displayed when trying to turn off the passcode if maximum failed attempts have been reached Verifying as fixed on master f43a1d35b' 
id=1302360	 'Created ', ', Pull Request', Comment on ', ', Pull Request I left an alternative suggestion in the PR, but can take a second look at this fix if that doesn't work.", Comment on ', ', Pull Request ...and that fix apparently doesn't work.", I think the fix that I have is probably the lowest risk fix I can think of. Because this is not an issue in iOS10 I want to believe its an issue in the transitionContext that exists in ios9 only. If yo d like me to dig into this more I can. Else I'd like to merge this patch. :)", I'm fine with this fix if it works for you :)", master af6aaf222af79a39b3514ed92ab67fdda63a880f', The user is no longer able to interact with the menu button when opening a new tab from tabs tray Verifying as fixed on master f43a1d35b' 
id=1304716	 'Created ', ', Pull request', Comment on ', ', Pull request Left a comment on the PR. I think there might be a simpler way of going around this issue.', master ', Tested on 0f93b9b14de02 on devices running iOS 9.x and iOS 10.0.2. The the selected row are correctly displayed after canceling the request Passcode prompt.' 
id=1311945	 "I'd like to fix this bug. Please assign it to me if still valid. I'm also new to bugzilla. Should it be fixed for both versions 6 and 7, or just 7?", (In reply to Rod Knowlton from ', ) ', For sure, feel free to work on this. ', We would like to have this fixed for version 7.0, which is currently the master branch.', Do we only want the menu dismissed on going to background on iPad? On iPhone, it doesn't get dismissed even upon returning to foreground. I, personally, think it should be dismissed when going to background on both. That'd be consistent with iOS behaviors in similar circumstances, such as when Share menu is displayed.", I agree - I think having it be consistent on both form factors and with other iOS behaviors would be the way to go.', Created ', ', Link to Github pull-request: ', Comment on ', ', Link to Github pull-request: ', Looks good. Thanks for the patch!', master ', v6.x 3839230c3390680c88b59301f7ba01ce0cb6b417', Verifying as fixed on v6.0b8. The menu is correctly dismissed when backgrounding/foregrounding the app.' 
id=1304035	 'Created ', ', Pull request', Ah, looks like I barely beat you to it! Fixed this separately in ', .', Comment on ', ', Pull request Looks like this was resolved with Brian's patch so I'll mark this as fixed.", Tested on latest master (acc25e6d9) and this issue is no longer reproducible.' 
id=1272658	 "I cannot reproduce this bug in simulator. I found a few commits (8fba2838 and 82a90c9) that might affect this bug (both commits was prior to bug date, but I'm not sure if patches was included in build b222aa67)", Created ', ', Pull request', master ', I'm unable to reproduce this issue on master acc25e6d964 Verifying as fixed." 
id=1232807%0D%0A	 '*** ', has been marked as a duplicate of this bug. ***', We already have the RDS strings, and I plan on implementing the FIP part of this in ', . Moving the needstrings flag to that bug and morphing this one.', Created ', ', Link to Github pull-request: ', Robin, you can try this out if you want. I'll go ahead and include the assets whenever they're ready!", Created ', ShareActionIcons.zip :bnicholson here are all of the new Share Action icons. I tried your PR and saw the option, but experienced a locking crash when tapping on it.', Created ', RMS!', Comment on ', ', Link to Github pull-request: ', Think this is ready to land now.', Comment on ', ', Link to Github pull-request: ', It works! Looks good!', Comment on ', ', Link to Github pull-request: ', LGTM! Works too! :)', master: 3cec293e v1.x: 42395af' 
id=1283143	 'Please note that the issue is reproducible following the steps from the description by tapping on the Private Browsing button and the New Tab button from tabs bar.', SimonB: By tabs bar, do you mean the top tabs bar, the tabs tray, or the menu popup?', Hello, by tabs bar I am referring to the top tabs bar.', I don't seem to be able to click the 2 buttons fast enough on simulator to replicate this and I don't have my iPad at the office today to test on device. Will retest on Friday 22 September when I have access to a suitable device", What a helpful error message (for once, not being facetious) 2016-09-23 14:17:24.924165 Client 310:25885 The behavior of the UICollectionViewFlowLayout is not defined because: 2016-09-23 14:17:24.924754 Client 310:25885 the item height must be less than the height of the UICollectionView minus the section insets top and bottom values, minus the content insets top and bottom values. 2016-09-23 14:17:24.925237 Client 310:25885 The relevant UICollectionViewFlowLayout instance is <Client.TopTabsViewLayout: 0x127e14cd0>, and it is attached to <UICollectionView: 0x128840000; frame = (-10 0; 666 40); gestureRecognizers = <NSArray: 0x1742460f0>; layer = <CALayer: 0x1740392e0>; contentOffset: {0, 0}; contentSize: {2242, 40}> collection view layout: <Client.TopTabsViewLayout: 0x127e14cd0>. 2016-09-23 14:17:24.925684 Client 310:25885 Make a symbolic breakpoint at UICollectionViewFlowLayoutBreakForInvalidSizes to catch this in the debugger. 2016-09-23 14:17:24.938649 Client 310:25885 *** Assertion failure in - UICollectionViewData indexPathForItemAtGlobalIndex: , /BuildRoot/Library/Caches/com.apple.xbs/Sources/UIKit/UIKit-3599.6/UICollectionViewData.m:652', "The problem is this: it appears that the indexPath of a supplementary view MUST correspond to the indexPath of an extant cell in the collection. If the supplementary view\'s index path has no corresponding ordinary cell, the application will crash. I believe that the collection view attempts to retrieve information for a supplementary view\'s cell for some reason during the update procedure. It crashes when it cannot find one."', The action that causes this is not the rapid tapping of the New Tab after the toggle private data button, but the tapping of Toggle Private Data rapidly after New Tab, causing the new tab to be added in the wrong collection as the privacy status has changed since the new tab was requested. If you wait a second or so between new tab and toggle privacy mode then the crash does not occur.', Created ', ', Pull request', Thanks for fixing this Emily! master a8d043fc193283fab43a490ae4f9b5fe13c6b83f', Verifying as fix on Master 1bc8bb71f. The toggle private data button is disabled after opening a New Tab.' 
